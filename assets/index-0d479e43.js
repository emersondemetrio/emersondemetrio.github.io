function _mergeNamespaces(e,i){for(var a=0;a<i.length;a++){const o=i[a];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in e)){const s=Object.getOwnPropertyDescriptor(o,c);s&&Object.defineProperty(e,c,s.get?s:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const s of c)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function a(c){const s={};return c.integrity&&(s.integrity=c.integrity),c.referrerPolicy&&(s.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?s.credentials="include":c.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(c){if(c.ep)return;c.ep=!0;const s=a(c);fetch(c.href,s)}})();function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$1(e){return e===null||typeof e!="object"?null:(e=z$3&&e[z$3]||e["@@iterator"],typeof e=="function"?e:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(e,i,a){this.props=e,this.context=i,this.refs=D$1,this.updater=a||B$3}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(e,i){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,i,"setState")};E$1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F$1(){}F$1.prototype=E$1.prototype;function G$2(e,i,a){this.props=e,this.context=i,this.refs=D$1,this.updater=a||B$3}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$1(H$2,E$1.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$3={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$2(e,i,a){var o,c={},s=null,d=null;if(i!=null)for(o in i.ref!==void 0&&(d=i.ref),i.key!==void 0&&(s=""+i.key),i)J$1.call(i,o)&&!L$3.hasOwnProperty(o)&&(c[o]=i[o]);var et=arguments.length-2;if(et===1)c.children=a;else if(1<et){for(var $t=Array(et),h=0;h<et;h++)$t[h]=arguments[h+2];c.children=$t}if(e&&e.defaultProps)for(o in et=e.defaultProps,et)c[o]===void 0&&(c[o]=et[o]);return{$$typeof:l$1,type:e,key:s,ref:d,props:c,_owner:K$3.current}}function N$2(e,i){return{$$typeof:l$1,type:e.type,key:i,ref:e.ref,props:e.props,_owner:e._owner}}function O$1(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape(e){var i={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return i[a]})}var P$2=/\/+/g;function Q$3(e,i){return typeof e=="object"&&e!==null&&e.key!=null?escape(""+e.key):i.toString(36)}function R$2(e,i,a,o,c){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(s){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=e,c=c(d),e=o===""?"."+Q$3(d,0):o,I$2(c)?(a="",e!=null&&(a=e.replace(P$2,"$&/")+"/"),R$2(c,i,a,"",function(h){return h})):c!=null&&(O$1(c)&&(c=N$2(c,a+(!c.key||d&&d.key===c.key?"":(""+c.key).replace(P$2,"$&/")+"/")+e)),i.push(c)),1;if(d=0,o=o===""?".":o+":",I$2(e))for(var et=0;et<e.length;et++){s=e[et];var $t=o+Q$3(s,et);d+=R$2(s,i,a,$t,c)}else if($t=A$1(e),typeof $t=="function")for(e=$t.call(e),et=0;!(s=e.next()).done;)s=s.value,$t=o+Q$3(s,et++),d+=R$2(s,i,a,$t,c);else if(s==="object")throw i=String(e),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(e,i,a){if(e==null)return e;var o=[],c=0;return R$2(e,o,"","",function(s){return i.call(a,s,c++)}),o}function T$1(e){if(e._status===-1){var i=e._result;i=i(),i.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=i)}if(e._status===1)return e._result.default;throw e._result}var U$4={current:null},V$3={transition:null},W$2={ReactCurrentDispatcher:U$4,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$3};react_production_min.Children={map:S$1,forEach:function(e,i,a){S$1(e,function(){i.apply(this,arguments)},a)},count:function(e){var i=0;return S$1(e,function(){i++}),i},toArray:function(e){return S$1(e,function(i){return i})||[]},only:function(e){if(!O$1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(e,i,a){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=C$1({},e.props),c=e.key,s=e.ref,d=e._owner;if(i!=null){if(i.ref!==void 0&&(s=i.ref,d=K$3.current),i.key!==void 0&&(c=""+i.key),e.type&&e.type.defaultProps)var et=e.type.defaultProps;for($t in i)J$1.call(i,$t)&&!L$3.hasOwnProperty($t)&&(o[$t]=i[$t]===void 0&&et!==void 0?et[$t]:i[$t])}var $t=arguments.length-2;if($t===1)o.children=a;else if(1<$t){et=Array($t);for(var h=0;h<$t;h++)et[h]=arguments[h+2];o.children=et}return{$$typeof:l$1,type:e.type,key:c,ref:s,props:o,_owner:d}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$2;react_production_min.createFactory=function(e){var i=M$2.bind(null,e);return i.type=e,i};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$1,render:e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(e){return{$$typeof:y$1,_payload:{_status:-1,_result:e},_init:T$1}};react_production_min.memo=function(e,i){return{$$typeof:x,type:e,compare:i===void 0?null:i}};react_production_min.startTransition=function(e){var i=V$3.transition;V$3.transition={};try{e()}finally{V$3.transition=i}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(e,i){return U$4.current.useCallback(e,i)};react_production_min.useContext=function(e){return U$4.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$4.current.useDeferredValue(e)};react_production_min.useEffect=function(e,i){return U$4.current.useEffect(e,i)};react_production_min.useId=function(){return U$4.current.useId()};react_production_min.useImperativeHandle=function(e,i,a){return U$4.current.useImperativeHandle(e,i,a)};react_production_min.useInsertionEffect=function(e,i){return U$4.current.useInsertionEffect(e,i)};react_production_min.useLayoutEffect=function(e,i){return U$4.current.useLayoutEffect(e,i)};react_production_min.useMemo=function(e,i){return U$4.current.useMemo(e,i)};react_production_min.useReducer=function(e,i,a){return U$4.current.useReducer(e,i,a)};react_production_min.useRef=function(e){return U$4.current.useRef(e)};react_production_min.useState=function(e){return U$4.current.useState(e)};react_production_min.useSyncExternalStore=function(e,i,a){return U$4.current.useSyncExternalStore(e,i,a)};react_production_min.useTransition=function(){return U$4.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,i,a){var o,c={},s=null,d=null;a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),i.ref!==void 0&&(d=i.ref);for(o in i)m$1.call(i,o)&&!p$1.hasOwnProperty(o)&&(c[o]=i[o]);if(e&&e.defaultProps)for(o in i=e.defaultProps,i)c[o]===void 0&&(c[o]=i[o]);return{$$typeof:k,type:e,key:s,ref:d,props:c,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function i(Uo,c0){var $0=Uo.length;Uo.push(c0);e:for(;0<$0;){var Bo=$0-1>>>1,x0=Uo[Bo];if(0<c(x0,c0))Uo[Bo]=c0,Uo[$0]=x0,$0=Bo;else break e}}function a(Uo){return Uo.length===0?null:Uo[0]}function o(Uo){if(Uo.length===0)return null;var c0=Uo[0],$0=Uo.pop();if($0!==c0){Uo[0]=$0;e:for(var Bo=0,x0=Uo.length,A0=x0>>>1;Bo<A0;){var G0=2*(Bo+1)-1,q0=Uo[G0],ny=G0+1,xy=Uo[ny];if(0>c(q0,$0))ny<x0&&0>c(xy,q0)?(Uo[Bo]=xy,Uo[ny]=$0,Bo=ny):(Uo[Bo]=q0,Uo[G0]=$0,Bo=G0);else if(ny<x0&&0>c(xy,$0))Uo[Bo]=xy,Uo[ny]=$0,Bo=ny;else break e}}return c0}function c(Uo,c0){var $0=Uo.sortIndex-c0.sortIndex;return $0!==0?$0:Uo.id-c0.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var d=Date,et=d.now();e.unstable_now=function(){return d.now()-et}}var $t=[],h=[],b=1,g=null,jt=3,Ht=!1,Kt=!1,or=!1,jr=typeof setTimeout=="function"?setTimeout:null,Lr=typeof clearTimeout=="function"?clearTimeout:null,ir=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function qr(Uo){for(var c0=a(h);c0!==null;){if(c0.callback===null)o(h);else if(c0.startTime<=Uo)o(h),c0.sortIndex=c0.expirationTime,i($t,c0);else break;c0=a(h)}}function vn(Uo){if(or=!1,qr(Uo),!Kt)if(a($t)!==null)Kt=!0,e0(xn);else{var c0=a(h);c0!==null&&l0(vn,c0.startTime-Uo)}}function xn(Uo,c0){Kt=!1,or&&(or=!1,Lr(Xo),Xo=-1),Ht=!0;var $0=jt;try{for(qr(c0),g=a($t);g!==null&&(!(g.expirationTime>c0)||Uo&&!h0());){var Bo=g.callback;if(typeof Bo=="function"){g.callback=null,jt=g.priorityLevel;var x0=Bo(g.expirationTime<=c0);c0=e.unstable_now(),typeof x0=="function"?g.callback=x0:g===a($t)&&o($t),qr(c0)}else o($t);g=a($t)}if(g!==null)var A0=!0;else{var G0=a(h);G0!==null&&l0(vn,G0.startTime-c0),A0=!1}return A0}finally{g=null,jt=$0,Ht=!1}}var No=!1,Ro=null,Xo=-1,o0=5,s0=-1;function h0(){return!(e.unstable_now()-s0<o0)}function E0(){if(Ro!==null){var Uo=e.unstable_now();s0=Uo;var c0=!0;try{c0=Ro(!0,Uo)}finally{c0?C0():(No=!1,Ro=null)}}else No=!1}var C0;if(typeof ir=="function")C0=function(){ir(E0)};else if(typeof MessageChannel<"u"){var D0=new MessageChannel,N0=D0.port2;D0.port1.onmessage=E0,C0=function(){N0.postMessage(null)}}else C0=function(){jr(E0,0)};function e0(Uo){Ro=Uo,No||(No=!0,C0())}function l0(Uo,c0){Xo=jr(function(){Uo(e.unstable_now())},c0)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Uo){Uo.callback=null},e.unstable_continueExecution=function(){Kt||Ht||(Kt=!0,e0(xn))},e.unstable_forceFrameRate=function(Uo){0>Uo||125<Uo?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):o0=0<Uo?Math.floor(1e3/Uo):5},e.unstable_getCurrentPriorityLevel=function(){return jt},e.unstable_getFirstCallbackNode=function(){return a($t)},e.unstable_next=function(Uo){switch(jt){case 1:case 2:case 3:var c0=3;break;default:c0=jt}var $0=jt;jt=c0;try{return Uo()}finally{jt=$0}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Uo,c0){switch(Uo){case 1:case 2:case 3:case 4:case 5:break;default:Uo=3}var $0=jt;jt=Uo;try{return c0()}finally{jt=$0}},e.unstable_scheduleCallback=function(Uo,c0,$0){var Bo=e.unstable_now();switch(typeof $0=="object"&&$0!==null?($0=$0.delay,$0=typeof $0=="number"&&0<$0?Bo+$0:Bo):$0=Bo,Uo){case 1:var x0=-1;break;case 2:x0=250;break;case 5:x0=1073741823;break;case 4:x0=1e4;break;default:x0=5e3}return x0=$0+x0,Uo={id:b++,callback:c0,priorityLevel:Uo,startTime:$0,expirationTime:x0,sortIndex:-1},$0>Bo?(Uo.sortIndex=$0,i(h,Uo),a($t)===null&&Uo===a(h)&&(or?(Lr(Xo),Xo=-1):or=!0,l0(vn,$0-Bo))):(Uo.sortIndex=x0,i($t,Uo),Kt||Ht||(Kt=!0,e0(xn))),Uo},e.unstable_shouldYield=h0,e.unstable_wrapCallback=function(Uo){var c0=jt;return function(){var $0=jt;jt=c0;try{return Uo.apply(this,arguments)}finally{jt=$0}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$2=reactExports,ca$2=schedulerExports;function p(e){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$2=new Set,ea$1={};function fa$2(e,i){ha$1(e,i),ha$1(e+"Capture",i)}function ha$1(e,i){for(ea$1[e]=i,e=0;e<i.length;e++)da$2.add(i[e])}var ia$2=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$2=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$2={},ma$1={};function oa$2(e){return ja$2.call(ma$1,e)?!0:ja$2.call(la$2,e)?!1:ka$1.test(e)?ma$1[e]=!0:(la$2[e]=!0,!1)}function pa$2(e,i,a,o){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return o?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa$2(e,i,a,o){if(i===null||typeof i>"u"||pa$2(e,i,a,o))return!0;if(o)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function v(e,i,a,o,c,s,d){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=a,this.propertyName=e,this.type=i,this.sanitizeURL=s,this.removeEmptyString=d}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z$2[e]=new v(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=e[0];z$2[i]=new v(i,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z$2[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z$2[e]=new v(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z$2[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z$2[e]=new v(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z$2[e]=new v(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z$2[e]=new v(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z$2[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var i=e.replace(ra$1,sa$2);z$2[i]=new v(i,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var i=e.replace(ra$1,sa$2);z$2[i]=new v(i,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(ra$1,sa$2);z$2[i]=new v(i,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z$2[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z$2[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta$1(e,i,a,o){var c=z$2.hasOwnProperty(i)?z$2[i]:null;(c!==null?c.type!==0:o||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(qa$2(i,a,c,o)&&(a=null),o||c===null?oa$2(i)&&(a===null?e.removeAttribute(i):e.setAttribute(i,""+a)):c.mustUseProperty?e[c.propertyName]=a===null?c.type===3?!1:"":a:(i=c.attributeName,o=c.attributeNamespace,a===null?e.removeAttribute(i):(c=c.type,a=c===3||c===4&&a===!0?"":""+a,o?e.setAttributeNS(o,i,a):e.setAttribute(i,a))))}var ua$2=aa$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$2=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$2=Symbol.iterator;function Ka$2(e){return e===null||typeof e!="object"?null:(e=Ja$2&&e[Ja$2]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,La$1;function Ma$1(e){if(La$1===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);La$1=i&&i[1]||""}return`
`+La$1+e}var Na=!1;function Oa$1(e,i){if(!e||Na)return"";Na=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(h){var o=h}Reflect.construct(e,[],i)}else{try{i.call()}catch(h){o=h}e.call(i.prototype)}else{try{throw Error()}catch(h){o=h}e()}}catch(h){if(h&&o&&typeof h.stack=="string"){for(var c=h.stack.split(`
`),s=o.stack.split(`
`),d=c.length-1,et=s.length-1;1<=d&&0<=et&&c[d]!==s[et];)et--;for(;1<=d&&0<=et;d--,et--)if(c[d]!==s[et]){if(d!==1||et!==1)do if(d--,et--,0>et||c[d]!==s[et]){var $t=`
`+c[d].replace(" at new "," at ");return e.displayName&&$t.includes("<anonymous>")&&($t=$t.replace("<anonymous>",e.displayName)),$t}while(1<=d&&0<=et);break}}}finally{Na=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?Ma$1(e):""}function Pa(e){switch(e.tag){case 5:return Ma$1(e.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return e=Oa$1(e.type,!1),e;case 11:return e=Oa$1(e.type.render,!1),e;case 1:return e=Oa$1(e.type,!0),e;default:return""}}function Qa$2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca$1:return(e.displayName||"Context")+".Consumer";case Ba$1:return(e._context.displayName||"Context")+".Provider";case Da$1:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga$1:return i=e.displayName||null,i!==null?i:Qa$2(e.type)||"Memo";case Ha$2:i=e._payload,e=e._init;try{return Qa$2(e(i))}catch{}}return null}function Ra(e){var i=e.type;switch(e.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=i.render,e=e.displayName||e.name||"",i.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$2(i);case 8:return i===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Sa$1(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta$1(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ua$1(e){var i=Ta$1(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,s=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return c.call(this)},set:function(d){o=""+d,s.call(this,d)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(d){o=""+d},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Va$2(e){e._valueTracker||(e._valueTracker=Ua$1(e))}function Wa$1(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=Ta$1(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function Xa$2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya$2(e,i){var a=i.checked;return A({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function Za$2(e,i){var a=i.defaultValue==null?"":i.defaultValue,o=i.checked!=null?i.checked:i.defaultChecked;a=Sa$1(i.value!=null?i.value:a),e._wrapperState={initialChecked:o,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ab$1(e,i){i=i.checked,i!=null&&ta$1(e,"checked",i,!1)}function bb$1(e,i){ab$1(e,i);var a=Sa$1(i.value),o=i.type;if(a!=null)o==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}i.hasOwnProperty("value")?cb$1(e,i.type,a):i.hasOwnProperty("defaultValue")&&cb$1(e,i.type,Sa$1(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(e.defaultChecked=!!i.defaultChecked)}function db$1(e,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var o=i.type;if(!(o!=="submit"&&o!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+e._wrapperState.initialValue,a||i===e.value||(e.value=i),e.defaultValue=i}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function cb$1(e,i,a){(i!=="number"||Xa$2(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var eb$1=Array.isArray;function fb$1(e,i,a,o){if(e=e.options,i){i={};for(var c=0;c<a.length;c++)i["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=i.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Sa$1(a),i=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}i!==null||e[c].disabled||(i=e[c])}i!==null&&(i.selected=!0)}}function gb$1(e,i){if(i.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},i,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb$1(e,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(p(92));if(eb$1(a)){if(1<a.length)throw Error(p(93));a=a[0]}i=a}i==null&&(i=""),a=i}e._wrapperState={initialValue:Sa$1(a)}}function ib$1(e,i){var a=Sa$1(i.value),o=Sa$1(i.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),i.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),o!=null&&(e.defaultValue=""+o)}function jb$1(e){var i=e.textContent;i===e._wrapperState.initialValue&&i!==""&&i!==null&&(e.value=i)}function kb$1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$1(e,i){return e==null||e==="http://www.w3.org/1999/xhtml"?kb$1(i):e==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb$1,nb$1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,o,c){MSApp.execUnsafeLocalFunction(function(){return e(i,a,o,c)})}:e}(function(e,i){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=i;else{for(mb$1=mb$1||document.createElement("div"),mb$1.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=mb$1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;i.firstChild;)e.appendChild(i.firstChild)}});function ob$1(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var pb$1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb$1=["Webkit","ms","Moz","O"];Object.keys(pb$1).forEach(function(e){qb$1.forEach(function(i){i=i+e.charAt(0).toUpperCase()+e.substring(1),pb$1[i]=pb$1[e]})});function rb$1(e,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||pb$1.hasOwnProperty(e)&&pb$1[e]?(""+i).trim():i+"px"}function sb$1(e,i){e=e.style;for(var a in i)if(i.hasOwnProperty(a)){var o=a.indexOf("--")===0,c=rb$1(a,i[a],o);a==="float"&&(a="cssFloat"),o?e.setProperty(a,c):e[a]=c}}var tb$1=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub$1(e,i){if(i){if(tb$1[e]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(p(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(p(61))}if(i.style!=null&&typeof i.style!="object")throw Error(p(62))}}function vb$1(e,i){if(e.indexOf("-")===-1)return typeof i.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb$1=null;function xb$1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb$1=null,zb$1=null,Ab$1=null;function Bb$1(e){if(e=Cb$1(e)){if(typeof yb$1!="function")throw Error(p(280));var i=e.stateNode;i&&(i=Db$1(i),yb$1(e.stateNode,e.type,i))}}function Eb$1(e){zb$1?Ab$1?Ab$1.push(e):Ab$1=[e]:zb$1=e}function Fb$1(){if(zb$1){var e=zb$1,i=Ab$1;if(Ab$1=zb$1=null,Bb$1(e),i)for(e=0;e<i.length;e++)Bb$1(i[e])}}function Gb$1(e,i){return e(i)}function Hb$1(){}var Ib$1=!1;function Jb$1(e,i,a){if(Ib$1)return e(i,a);Ib$1=!0;try{return Gb$1(e,i,a)}finally{Ib$1=!1,(zb$1!==null||Ab$1!==null)&&(Hb$1(),Fb$1())}}function Kb$1(e,i){var a=e.stateNode;if(a===null)return null;var o=Db$1(a);if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(p(231,i,typeof a));return a}var Lb$1=!1;if(ia$2)try{var Mb$1={};Object.defineProperty(Mb$1,"passive",{get:function(){Lb$1=!0}}),window.addEventListener("test",Mb$1,Mb$1),window.removeEventListener("test",Mb$1,Mb$1)}catch{Lb$1=!1}function Nb$1(e,i,a,o,c,s,d,et,$t){var h=Array.prototype.slice.call(arguments,3);try{i.apply(a,h)}catch(b){this.onError(b)}}var Ob$1=!1,Pb$1=null,Qb$1=!1,Rb$1=null,Sb$1={onError:function(e){Ob$1=!0,Pb$1=e}};function Tb$1(e,i,a,o,c,s,d,et,$t){Ob$1=!1,Pb$1=null,Nb$1.apply(Sb$1,arguments)}function Ub$1(e,i,a,o,c,s,d,et,$t){if(Tb$1.apply(this,arguments),Ob$1){if(Ob$1){var h=Pb$1;Ob$1=!1,Pb$1=null}else throw Error(p(198));Qb$1||(Qb$1=!0,Rb$1=h)}}function Vb$1(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,i.flags&4098&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function Wb$1(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function Xb$1(e){if(Vb$1(e)!==e)throw Error(p(188))}function Yb$1(e){var i=e.alternate;if(!i){if(i=Vb$1(e),i===null)throw Error(p(188));return i!==e?null:e}for(var a=e,o=i;;){var c=a.return;if(c===null)break;var s=c.alternate;if(s===null){if(o=c.return,o!==null){a=o;continue}break}if(c.child===s.child){for(s=c.child;s;){if(s===a)return Xb$1(c),e;if(s===o)return Xb$1(c),i;s=s.sibling}throw Error(p(188))}if(a.return!==o.return)a=c,o=s;else{for(var d=!1,et=c.child;et;){if(et===a){d=!0,a=c,o=s;break}if(et===o){d=!0,o=c,a=s;break}et=et.sibling}if(!d){for(et=s.child;et;){if(et===a){d=!0,a=s,o=c;break}if(et===o){d=!0,o=s,a=c;break}et=et.sibling}if(!d)throw Error(p(189))}}if(a.alternate!==o)throw Error(p(190))}if(a.tag!==3)throw Error(p(188));return a.stateNode.current===a?e:i}function Zb$1(e){return e=Yb$1(e),e!==null?$b$1(e):null}function $b$1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var i=$b$1(e);if(i!==null)return i;e=e.sibling}return null}var ac$2=ca$2.unstable_scheduleCallback,bc$2=ca$2.unstable_cancelCallback,cc$2=ca$2.unstable_shouldYield,dc$2=ca$2.unstable_requestPaint,B$2=ca$2.unstable_now,ec$1=ca$2.unstable_getCurrentPriorityLevel,fc$2=ca$2.unstable_ImmediatePriority,gc$2=ca$2.unstable_UserBlockingPriority,hc$1=ca$2.unstable_NormalPriority,ic$2=ca$2.unstable_LowPriority,jc$2=ca$2.unstable_IdlePriority,kc$2=null,lc$2=null;function mc$2(e){if(lc$2&&typeof lc$2.onCommitFiberRoot=="function")try{lc$2.onCommitFiberRoot(kc$2,e,void 0,(e.current.flags&128)===128)}catch{}}var oc$2=Math.clz32?Math.clz32:nc$2,pc$2=Math.log,qc$2=Math.LN2;function nc$2(e){return e>>>=0,e===0?32:31-(pc$2(e)/qc$2|0)|0}var rc$1=64,sc$2=4194304;function tc$1(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc$2(e,i){var a=e.pendingLanes;if(a===0)return 0;var o=0,c=e.suspendedLanes,s=e.pingedLanes,d=a&268435455;if(d!==0){var et=d&~c;et!==0?o=tc$1(et):(s&=d,s!==0&&(o=tc$1(s)))}else d=a&~c,d!==0?o=tc$1(d):s!==0&&(o=tc$1(s));if(o===0)return 0;if(i!==0&&i!==o&&!(i&c)&&(c=o&-o,s=i&-i,c>=s||c===16&&(s&4194240)!==0))return i;if(o&4&&(o|=a&16),i=e.entangledLanes,i!==0)for(e=e.entanglements,i&=o;0<i;)a=31-oc$2(i),c=1<<a,o|=e[a],i&=~c;return o}function vc$2(e,i){switch(e){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$2(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,s=e.pendingLanes;0<s;){var d=31-oc$2(s),et=1<<d,$t=c[d];$t===-1?(!(et&a)||et&o)&&(c[d]=vc$2(et,i)):$t<=i&&(e.expiredLanes|=et),s&=~et}}function xc$2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc$2(){var e=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),e}function zc$2(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function Ac$2(e,i,a){e.pendingLanes|=i,i!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,i=31-oc$2(i),e[i]=a}function Bc$2(e,i){var a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<a;){var c=31-oc$2(a),s=1<<c;i[c]=0,o[c]=-1,e[c]=-1,a&=~s}}function Cc$2(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-oc$2(a),c=1<<o;c&i|e[o]&i&&(e[o]|=i),a&=~c}}var C=0;function Dc$2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec$2,Fc$2,Gc$2,Hc$2,Ic$2,Jc$2=!1,Kc$2=[],Lc$2=null,Mc$2=null,Nc$2=null,Oc$2=new Map,Pc$2=new Map,Qc$2=[],Rc$2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$2(e,i){switch(e){case"focusin":case"focusout":Lc$2=null;break;case"dragenter":case"dragleave":Mc$2=null;break;case"mouseover":case"mouseout":Nc$2=null;break;case"pointerover":case"pointerout":Oc$2.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$2.delete(i.pointerId)}}function Tc$2(e,i,a,o,c,s){return e===null||e.nativeEvent!==s?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:s,targetContainers:[c]},i!==null&&(i=Cb$1(i),i!==null&&Fc$2(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,c!==null&&i.indexOf(c)===-1&&i.push(c),e)}function Uc$2(e,i,a,o,c){switch(i){case"focusin":return Lc$2=Tc$2(Lc$2,e,i,a,o,c),!0;case"dragenter":return Mc$2=Tc$2(Mc$2,e,i,a,o,c),!0;case"mouseover":return Nc$2=Tc$2(Nc$2,e,i,a,o,c),!0;case"pointerover":var s=c.pointerId;return Oc$2.set(s,Tc$2(Oc$2.get(s)||null,e,i,a,o,c)),!0;case"gotpointercapture":return s=c.pointerId,Pc$2.set(s,Tc$2(Pc$2.get(s)||null,e,i,a,o,c)),!0}return!1}function Vc$2(e){var i=Wc$2(e.target);if(i!==null){var a=Vb$1(i);if(a!==null){if(i=a.tag,i===13){if(i=Wb$1(a),i!==null){e.blockedOn=i,Ic$2(e.priority,function(){Gc$2(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc$2(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Yc$2(e.domEventName,e.eventSystemFlags,i[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);wb$1=o,a.target.dispatchEvent(o),wb$1=null}else return i=Cb$1(a),i!==null&&Fc$2(i),e.blockedOn=a,!1;i.shift()}return!0}function Zc$2(e,i,a){Xc$2(e)&&a.delete(i)}function $c$2(){Jc$2=!1,Lc$2!==null&&Xc$2(Lc$2)&&(Lc$2=null),Mc$2!==null&&Xc$2(Mc$2)&&(Mc$2=null),Nc$2!==null&&Xc$2(Nc$2)&&(Nc$2=null),Oc$2.forEach(Zc$2),Pc$2.forEach(Zc$2)}function ad$2(e,i){e.blockedOn===i&&(e.blockedOn=null,Jc$2||(Jc$2=!0,ca$2.unstable_scheduleCallback(ca$2.unstable_NormalPriority,$c$2)))}function bd$1(e){function i(c){return ad$2(c,e)}if(0<Kc$2.length){ad$2(Kc$2[0],e);for(var a=1;a<Kc$2.length;a++){var o=Kc$2[a];o.blockedOn===e&&(o.blockedOn=null)}}for(Lc$2!==null&&ad$2(Lc$2,e),Mc$2!==null&&ad$2(Mc$2,e),Nc$2!==null&&ad$2(Nc$2,e),Oc$2.forEach(i),Pc$2.forEach(i),a=0;a<Qc$2.length;a++)o=Qc$2[a],o.blockedOn===e&&(o.blockedOn=null);for(;0<Qc$2.length&&(a=Qc$2[0],a.blockedOn===null);)Vc$2(a),a.blockedOn===null&&Qc$2.shift()}var cd$2=ua$2.ReactCurrentBatchConfig,dd$2=!0;function ed$2(e,i,a,o){var c=C,s=cd$2.transition;cd$2.transition=null;try{C=1,fd$2(e,i,a,o)}finally{C=c,cd$2.transition=s}}function gd$1(e,i,a,o){var c=C,s=cd$2.transition;cd$2.transition=null;try{C=4,fd$2(e,i,a,o)}finally{C=c,cd$2.transition=s}}function fd$2(e,i,a,o){if(dd$2){var c=Yc$2(e,i,a,o);if(c===null)hd$2(e,i,o,id$3,a),Sc$2(e,o);else if(Uc$2(c,e,i,a,o))o.stopPropagation();else if(Sc$2(e,o),i&4&&-1<Rc$2.indexOf(e)){for(;c!==null;){var s=Cb$1(c);if(s!==null&&Ec$2(s),s=Yc$2(e,i,a,o),s===null&&hd$2(e,i,o,id$3,a),s===c)break;c=s}c!==null&&o.stopPropagation()}else hd$2(e,i,o,null,a)}}var id$3=null;function Yc$2(e,i,a,o){if(id$3=null,e=xb$1(o),e=Wc$2(e),e!==null)if(i=Vb$1(e),i===null)e=null;else if(a=i.tag,a===13){if(e=Wb$1(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null);return id$3=e,null}function jd$2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$2:return 1;case gc$2:return 4;case hc$1:case ic$2:return 16;case jc$2:return 536870912;default:return 16}default:return 16}}var kd$2=null,ld$2=null,md$2=null;function nd$2(){if(md$2)return md$2;var e,i=ld$2,a=i.length,o,c="value"in kd$2?kd$2.value:kd$2.textContent,s=c.length;for(e=0;e<a&&i[e]===c[e];e++);var d=a-e;for(o=1;o<=d&&i[a-o]===c[s-o];o++);return md$2=c.slice(e,1<o?1-o:void 0)}function od$2(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function pd$2(){return!0}function qd$2(){return!1}function rd$2(e){function i(a,o,c,s,d){this._reactName=a,this._targetInst=c,this.type=o,this.nativeEvent=s,this.target=d,this.currentTarget=null;for(var et in e)e.hasOwnProperty(et)&&(a=e[et],this[et]=a?a(s):s[et]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pd$2:qd$2,this.isPropagationStopped=qd$2,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pd$2)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pd$2)},persist:function(){},isPersistent:pd$2}),i}var sd$2={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$2=rd$2(sd$2),ud$2=A({},sd$2,{view:0,detail:0}),vd$2=rd$2(ud$2),wd$1,xd$1,yd$1,Ad$2=A({},ud$2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd$1&&(yd$1&&e.type==="mousemove"?(wd$1=e.screenX-yd$1.screenX,xd$1=e.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=e),wd$1)},movementY:function(e){return"movementY"in e?e.movementY:xd$1}}),Bd$1=rd$2(Ad$2),Cd$2=A({},Ad$2,{dataTransfer:0}),Dd$2=rd$2(Cd$2),Ed$2=A({},ud$2,{relatedTarget:0}),Fd$2=rd$2(Ed$2),Gd$1=A({},sd$2,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$2=rd$2(Gd$1),Id$2=A({},sd$2,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd$1=rd$2(Id$2),Kd$2=A({},sd$2,{data:0}),Ld$2=rd$2(Kd$2),Md$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od$2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd$2(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Od$2[e])?!!i[e]:!1}function zd$1(){return Pd$2}var Qd$1=A({},ud$2,{key:function(e){if(e.key){var i=Md$1[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=od$2(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd$1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(e){return e.type==="keypress"?od$2(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od$2(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd$1=rd$2(Qd$1),Sd$2=A({},Ad$2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd$2(Sd$2),Ud$1=A({},ud$2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd$1=rd$2(Ud$1),Wd$1=A({},sd$2,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd$2=rd$2(Wd$1),Yd$2=A({},Ad$2,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd$1=rd$2(Yd$2),$d$1=[9,13,27,32],ae$1=ia$2&&"CompositionEvent"in window,be$1=null;ia$2&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia$2&&"TextEvent"in window&&!be$1,de=ia$2&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee=String.fromCharCode(32),fe$2=!1;function ge(e,i){switch(e){case"keyup":return $d$1.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,i){switch(e){case"compositionend":return he(i);case"keypress":return i.which!==32?null:(fe$2=!0,ee);case"textInput":return e=i.data,e===ee&&fe$2?null:e;default:return null}}function ke$1(e,i){if(ie)return e==="compositionend"||!ae$1&&ge(e,i)?(e=nd$2(),md$2=ld$2=kd$2=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return de&&i.locale!=="ko"?null:i.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!le$1[e.type]:i==="textarea"}function ne$1(e,i,a,o){Eb$1(o),i=oe$1(i,"onChange"),0<i.length&&(a=new td$2("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var pe=null,qe$1=null;function re(e){se(e,0)}function te(e){var i=ue(e);if(Wa$1(i))return e}function ve$1(e,i){if(e==="change")return i}var we$2=!1;if(ia$2){var xe$1;if(ia$2){var ye$2="oninput"in document;if(!ye$2){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$2=typeof ze.oninput=="function"}xe$1=ye$2}else xe$1=!1;we$2=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe$1=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe$1)){var i=[];ne$1(i,qe$1,e,xb$1(e)),Jb$1(re,i)}}function Ce(e,i,a){e==="focusin"?(Ae(),pe=i,qe$1=a,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae()}function De$2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe$1)}function Ee$1(e,i){if(e==="click")return te(i)}function Fe$1(e,i){if(e==="input"||e==="change")return te(i)}function Ge(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,i){if(He(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var c=a[o];if(!ja$2.call(i,c)||!He(e[c],i[c]))return!1}return!0}function Je$1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,i){var a=Je$1(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Je$1(a)}}function Le(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Le(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Me$1(){for(var e=window,i=Xa$2();i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Xa$2(e.document)}return i}function Ne$1(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function Oe(e){var i=Me$1(),a=e.focusedElem,o=e.selectionRange;if(i!==a&&a&&a.ownerDocument&&Le(a.ownerDocument.documentElement,a)){if(o!==null&&Ne$1(a)){if(i=o.start,e=o.end,e===void 0&&(e=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(e,a.value.length);else if(e=(i=a.ownerDocument||document)&&i.defaultView||window,e.getSelection){e=e.getSelection();var c=a.textContent.length,s=Math.min(o.start,c);o=o.end===void 0?s:Math.min(o.end,c),!e.extend&&s>o&&(c=o,o=s,s=c),c=Ke(a,s);var d=Ke(a,o);c&&d&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(i=i.createRange(),i.setStart(c.node,c.offset),e.removeAllRanges(),s>o?(e.addRange(i),e.extend(d.node,d.offset)):(i.setEnd(d.node,d.offset),e.addRange(i)))}}for(i=[],e=a;e=e.parentNode;)e.nodeType===1&&i.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)e=i[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe$1=ia$2&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re=null,Se=null,Te=!1;function Ue$2(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Te||Qe$1==null||Qe$1!==Xa$2(o)||(o=Qe$1,"selectionStart"in o&&Ne$1(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Se&&Ie(Se,o)||(Se=o,o=oe$1(Re,"onSelect"),0<o.length&&(i=new td$2("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=Qe$1)))}function Ve(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var We$2={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe$1={},Ye={};ia$2&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$2.animationend.animation,delete We$2.animationiteration.animation,delete We$2.animationstart.animation),"TransitionEvent"in window||delete We$2.transitionend.transition);function Ze$2(e){if(Xe$1[e])return Xe$1[e];if(!We$2[e])return e;var i=We$2[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ye)return Xe$1[e]=i[a];return e}var $e$1=Ze$2("animationend"),af$2=Ze$2("animationiteration"),bf$1=Ze$2("animationstart"),cf$1=Ze$2("transitionend"),df$1=new Map,ef$2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$2(e,i){df$1.set(e,i),fa$2(i,[e])}for(var gf$1=0;gf$1<ef$2.length;gf$1++){var hf$2=ef$2[gf$1],jf$1=hf$2.toLowerCase(),kf$1=hf$2[0].toUpperCase()+hf$2.slice(1);ff$2(jf$1,"on"+kf$1)}ff$2($e$1,"onAnimationEnd");ff$2(af$2,"onAnimationIteration");ff$2(bf$1,"onAnimationStart");ff$2("dblclick","onDoubleClick");ff$2("focusin","onFocus");ff$2("focusout","onBlur");ff$2(cf$1,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$2("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$2("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$2("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$2("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$2("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$2("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf$2=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$2));function nf$2(e,i,a){var o=e.type||"unknown-event";e.currentTarget=a,Ub$1(o,i,void 0,e),e.currentTarget=null}function se(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],c=o.event;o=o.listeners;e:{var s=void 0;if(i)for(var d=o.length-1;0<=d;d--){var et=o[d],$t=et.instance,h=et.currentTarget;if(et=et.listener,$t!==s&&c.isPropagationStopped())break e;nf$2(c,et,h),s=$t}else for(d=0;d<o.length;d++){if(et=o[d],$t=et.instance,h=et.currentTarget,et=et.listener,$t!==s&&c.isPropagationStopped())break e;nf$2(c,et,h),s=$t}}}if(Qb$1)throw e=Rb$1,Qb$1=!1,Rb$1=null,e}function D(e,i){var a=i[of$2];a===void 0&&(a=i[of$2]=new Set);var o=e+"__bubble";a.has(o)||(pf$2(i,e,2,!1),a.add(o))}function qf$1(e,i,a){var o=0;i&&(o|=4),pf$2(a,e,o,i)}var rf$2="_reactListening"+Math.random().toString(36).slice(2);function sf$2(e){if(!e[rf$2]){e[rf$2]=!0,da$2.forEach(function(a){a!=="selectionchange"&&(mf$2.has(a)||qf$1(a,!1,e),qf$1(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[rf$2]||(i[rf$2]=!0,qf$1("selectionchange",!1,i))}}function pf$2(e,i,a,o){switch(jd$2(i)){case 1:var c=ed$2;break;case 4:c=gd$1;break;default:c=fd$2}a=c.bind(null,i,a,e),c=void 0,!Lb$1||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(i,a,{capture:!0,passive:c}):e.addEventListener(i,a,!0):c!==void 0?e.addEventListener(i,a,{passive:c}):e.addEventListener(i,a,!1)}function hd$2(e,i,a,o,c){var s=o;if(!(i&1)&&!(i&2)&&o!==null)e:for(;;){if(o===null)return;var d=o.tag;if(d===3||d===4){var et=o.stateNode.containerInfo;if(et===c||et.nodeType===8&&et.parentNode===c)break;if(d===4)for(d=o.return;d!==null;){var $t=d.tag;if(($t===3||$t===4)&&($t=d.stateNode.containerInfo,$t===c||$t.nodeType===8&&$t.parentNode===c))return;d=d.return}for(;et!==null;){if(d=Wc$2(et),d===null)return;if($t=d.tag,$t===5||$t===6){o=s=d;continue e}et=et.parentNode}}o=o.return}Jb$1(function(){var h=s,b=xb$1(a),g=[];e:{var jt=df$1.get(e);if(jt!==void 0){var Ht=td$2,Kt=e;switch(e){case"keypress":if(od$2(a)===0)break e;case"keydown":case"keyup":Ht=Rd$1;break;case"focusin":Kt="focus",Ht=Fd$2;break;case"focusout":Kt="blur",Ht=Fd$2;break;case"beforeblur":case"afterblur":Ht=Fd$2;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ht=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ht=Dd$2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ht=Vd$1;break;case $e$1:case af$2:case bf$1:Ht=Hd$2;break;case cf$1:Ht=Xd$2;break;case"scroll":Ht=vd$2;break;case"wheel":Ht=Zd$1;break;case"copy":case"cut":case"paste":Ht=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ht=Td$1}var or=(i&4)!==0,jr=!or&&e==="scroll",Lr=or?jt!==null?jt+"Capture":null:jt;or=[];for(var ir=h,qr;ir!==null;){qr=ir;var vn=qr.stateNode;if(qr.tag===5&&vn!==null&&(qr=vn,Lr!==null&&(vn=Kb$1(ir,Lr),vn!=null&&or.push(tf$2(ir,vn,qr)))),jr)break;ir=ir.return}0<or.length&&(jt=new Ht(jt,Kt,null,a,b),g.push({event:jt,listeners:or}))}}if(!(i&7)){e:{if(jt=e==="mouseover"||e==="pointerover",Ht=e==="mouseout"||e==="pointerout",jt&&a!==wb$1&&(Kt=a.relatedTarget||a.fromElement)&&(Wc$2(Kt)||Kt[uf$2]))break e;if((Ht||jt)&&(jt=b.window===b?b:(jt=b.ownerDocument)?jt.defaultView||jt.parentWindow:window,Ht?(Kt=a.relatedTarget||a.toElement,Ht=h,Kt=Kt?Wc$2(Kt):null,Kt!==null&&(jr=Vb$1(Kt),Kt!==jr||Kt.tag!==5&&Kt.tag!==6)&&(Kt=null)):(Ht=null,Kt=h),Ht!==Kt)){if(or=Bd$1,vn="onMouseLeave",Lr="onMouseEnter",ir="mouse",(e==="pointerout"||e==="pointerover")&&(or=Td$1,vn="onPointerLeave",Lr="onPointerEnter",ir="pointer"),jr=Ht==null?jt:ue(Ht),qr=Kt==null?jt:ue(Kt),jt=new or(vn,ir+"leave",Ht,a,b),jt.target=jr,jt.relatedTarget=qr,vn=null,Wc$2(b)===h&&(or=new or(Lr,ir+"enter",Kt,a,b),or.target=qr,or.relatedTarget=jr,vn=or),jr=vn,Ht&&Kt)t:{for(or=Ht,Lr=Kt,ir=0,qr=or;qr;qr=vf$1(qr))ir++;for(qr=0,vn=Lr;vn;vn=vf$1(vn))qr++;for(;0<ir-qr;)or=vf$1(or),ir--;for(;0<qr-ir;)Lr=vf$1(Lr),qr--;for(;ir--;){if(or===Lr||Lr!==null&&or===Lr.alternate)break t;or=vf$1(or),Lr=vf$1(Lr)}or=null}else or=null;Ht!==null&&wf$1(g,jt,Ht,or,!1),Kt!==null&&jr!==null&&wf$1(g,jr,Kt,or,!0)}}e:{if(jt=h?ue(h):window,Ht=jt.nodeName&&jt.nodeName.toLowerCase(),Ht==="select"||Ht==="input"&&jt.type==="file")var xn=ve$1;else if(me$1(jt))if(we$2)xn=Fe$1;else{xn=De$2;var No=Ce}else(Ht=jt.nodeName)&&Ht.toLowerCase()==="input"&&(jt.type==="checkbox"||jt.type==="radio")&&(xn=Ee$1);if(xn&&(xn=xn(e,h))){ne$1(g,xn,a,b);break e}No&&No(e,jt,h),e==="focusout"&&(No=jt._wrapperState)&&No.controlled&&jt.type==="number"&&cb$1(jt,"number",jt.value)}switch(No=h?ue(h):window,e){case"focusin":(me$1(No)||No.contentEditable==="true")&&(Qe$1=No,Re=h,Se=null);break;case"focusout":Se=Re=Qe$1=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue$2(g,a,b);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$2(g,a,b)}var Ro;if(ae$1)e:{switch(e){case"compositionstart":var Xo="onCompositionStart";break e;case"compositionend":Xo="onCompositionEnd";break e;case"compositionupdate":Xo="onCompositionUpdate";break e}Xo=void 0}else ie?ge(e,a)&&(Xo="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Xo="onCompositionStart");Xo&&(de&&a.locale!=="ko"&&(ie||Xo!=="onCompositionStart"?Xo==="onCompositionEnd"&&ie&&(Ro=nd$2()):(kd$2=b,ld$2="value"in kd$2?kd$2.value:kd$2.textContent,ie=!0)),No=oe$1(h,Xo),0<No.length&&(Xo=new Ld$2(Xo,e,null,a,b),g.push({event:Xo,listeners:No}),Ro?Xo.data=Ro:(Ro=he(a),Ro!==null&&(Xo.data=Ro)))),(Ro=ce$1?je(e,a):ke$1(e,a))&&(h=oe$1(h,"onBeforeInput"),0<h.length&&(b=new Ld$2("onBeforeInput","beforeinput",null,a,b),g.push({event:b,listeners:h}),b.data=Ro))}se(g,i)})}function tf$2(e,i,a){return{instance:e,listener:i,currentTarget:a}}function oe$1(e,i){for(var a=i+"Capture",o=[];e!==null;){var c=e,s=c.stateNode;c.tag===5&&s!==null&&(c=s,s=Kb$1(e,a),s!=null&&o.unshift(tf$2(e,s,c)),s=Kb$1(e,i),s!=null&&o.push(tf$2(e,s,c))),e=e.return}return o}function vf$1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf$1(e,i,a,o,c){for(var s=i._reactName,d=[];a!==null&&a!==o;){var et=a,$t=et.alternate,h=et.stateNode;if($t!==null&&$t===o)break;et.tag===5&&h!==null&&(et=h,c?($t=Kb$1(a,s),$t!=null&&d.unshift(tf$2(a,$t,et))):c||($t=Kb$1(a,s),$t!=null&&d.push(tf$2(a,$t,et)))),a=a.return}d.length!==0&&e.push({event:i,listeners:d})}var xf$1=/\r\n?/g,yf$1=/\u0000|\uFFFD/g;function zf$1(e){return(typeof e=="string"?e:""+e).replace(xf$1,`
`).replace(yf$1,"")}function Af$1(e,i,a){if(i=zf$1(i),zf$1(e)!==i&&a)throw Error(p(425))}function Bf$1(){}var Cf$1=null,Df$1=null;function Ef$1(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ff$1=typeof setTimeout=="function"?setTimeout:void 0,Gf$1=typeof clearTimeout=="function"?clearTimeout:void 0,Hf$1=typeof Promise=="function"?Promise:void 0,Jf$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf$1<"u"?function(e){return Hf$1.resolve(null).then(e).catch(If$1)}:Ff$1;function If$1(e){setTimeout(function(){throw e})}function Kf$1(e,i){var a=i,o=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(o===0){e.removeChild(c),bd$1(i);return}o--}else a!=="$"&&a!=="$?"&&a!=="$!"||o++;a=c}while(a);bd$1(i)}function Lf$1(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return e}function Mf$1(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}var Nf$1=Math.random().toString(36).slice(2),Of$1="__reactFiber$"+Nf$1,Pf$1="__reactProps$"+Nf$1,uf$2="__reactContainer$"+Nf$1,of$2="__reactEvents$"+Nf$1,Qf$1="__reactListeners$"+Nf$1,Rf$1="__reactHandles$"+Nf$1;function Wc$2(e){var i=e[Of$1];if(i)return i;for(var a=e.parentNode;a;){if(i=a[uf$2]||a[Of$1]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Mf$1(e);e!==null;){if(a=e[Of$1])return a;e=Mf$1(e)}return i}e=a,a=e.parentNode}return null}function Cb$1(e){return e=e[Of$1]||e[uf$2],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db$1(e){return e[Pf$1]||null}var Sf$1=[],Tf$1=-1;function Uf$1(e){return{current:e}}function E(e){0>Tf$1||(e.current=Sf$1[Tf$1],Sf$1[Tf$1]=null,Tf$1--)}function G$1(e,i){Tf$1++,Sf$1[Tf$1]=e.current,e.current=i}var Vf$1={},H$1=Uf$1(Vf$1),Wf$1=Uf$1(!1),Xf$1=Vf$1;function Yf$1(e,i){var a=e.type.contextTypes;if(!a)return Vf$1;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===i)return o.__reactInternalMemoizedMaskedChildContext;var c={},s;for(s in a)c[s]=i[s];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=c),c}function Zf$1(e){return e=e.childContextTypes,e!=null}function $f$1(){E(Wf$1),E(H$1)}function ag(e,i,a){if(H$1.current!==Vf$1)throw Error(p(168));G$1(H$1,i),G$1(Wf$1,a)}function bg$1(e,i,a){var o=e.stateNode;if(i=i.childContextTypes,typeof o.getChildContext!="function")return a;o=o.getChildContext();for(var c in o)if(!(c in i))throw Error(p(108,Ra(e)||"Unknown",c));return A({},a,o)}function cg$1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf$1,Xf$1=H$1.current,G$1(H$1,e),G$1(Wf$1,Wf$1.current),!0}function dg$1(e,i,a){var o=e.stateNode;if(!o)throw Error(p(169));a?(e=bg$1(e,i,Xf$1),o.__reactInternalMemoizedMergedChildContext=e,E(Wf$1),E(H$1),G$1(H$1,e)):E(Wf$1),G$1(Wf$1,a)}var eg=null,fg$1=!1,gg=!1;function hg$1(e){eg===null?eg=[e]:eg.push(e)}function ig$1(e){fg$1=!0,hg$1(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,i=C;try{var a=eg;for(C=1;e<a.length;e++){var o=a[e];do o=o(!0);while(o!==null)}eg=null,fg$1=!1}catch(c){throw eg!==null&&(eg=eg.slice(e+1)),ac$2(fc$2,jg),c}finally{C=i,gg=!1}}return null}var kg=[],lg$1=0,mg$1=null,ng$1=0,og$1=[],pg$1=0,qg=null,rg$1=1,sg$1="";function tg$1(e,i){kg[lg$1++]=ng$1,kg[lg$1++]=mg$1,mg$1=e,ng$1=i}function ug$1(e,i,a){og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg,qg=e;var o=rg$1;e=sg$1;var c=32-oc$2(o)-1;o&=~(1<<c),a+=1;var s=32-oc$2(i)+c;if(30<s){var d=c-c%5;s=(o&(1<<d)-1).toString(32),o>>=d,c-=d,rg$1=1<<32-oc$2(i)+c|a<<c|o,sg$1=s+e}else rg$1=1<<s|a<<c|o,sg$1=e}function vg$1(e){e.return!==null&&(tg$1(e,1),ug$1(e,1,0))}function wg$1(e){for(;e===mg$1;)mg$1=kg[--lg$1],kg[lg$1]=null,ng$1=kg[--lg$1],kg[lg$1]=null;for(;e===qg;)qg=og$1[--pg$1],og$1[pg$1]=null,sg$1=og$1[--pg$1],og$1[pg$1]=null,rg$1=og$1[--pg$1],og$1[pg$1]=null}var xg$1=null,yg=null,I$1=!1,zg=null;function Ag(e,i){var a=Bg(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=e,i=e.deletions,i===null?(e.deletions=[a],e.flags|=16):i.push(a)}function Cg(e,i){switch(e.tag){case 5:var a=e.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(e.stateNode=i,xg$1=e,yg=Lf$1(i.firstChild),!0):!1;case 6:return i=e.pendingProps===""||i.nodeType!==3?null:i,i!==null?(e.stateNode=i,xg$1=e,yg=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=qg!==null?{id:rg$1,overflow:sg$1}:null,e.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Bg(18,null,null,0),a.stateNode=i,a.return=e,e.child=a,xg$1=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I$1){var i=yg;if(i){var a=i;if(!Cg(e,i)){if(Dg(e))throw Error(p(418));i=Lf$1(a.nextSibling);var o=xg$1;i&&Cg(e,i)?Ag(o,a):(e.flags=e.flags&-4097|2,I$1=!1,xg$1=e)}}else{if(Dg(e))throw Error(p(418));e.flags=e.flags&-4097|2,I$1=!1,xg$1=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg$1=e}function Gg(e){if(e!==xg$1)return!1;if(!I$1)return Fg(e),I$1=!0,!1;var i;if((i=e.tag!==3)&&!(i=e.tag!==5)&&(i=e.type,i=i!=="head"&&i!=="body"&&!Ef$1(e.type,e.memoizedProps)),i&&(i=yg)){if(Dg(e))throw Hg(),Error(p(418));for(;i;)Ag(e,i),i=Lf$1(i.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(i===0){yg=Lf$1(e.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}e=e.nextSibling}yg=null}}else yg=xg$1?Lf$1(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf$1(e.nextSibling)}function Ig(){yg=xg$1=null,I$1=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua$2.ReactCurrentBatchConfig;function Lg(e,i){if(e&&e.defaultProps){i=A({},i),e=e.defaultProps;for(var a in e)i[a]===void 0&&(i[a]=e[a]);return i}return i}var Mg=Uf$1(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(e){var i=Mg.current;E(Mg),e._currentValue=i}function Sg(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function Tg$1(e,i){Ng=e,Pg=Og=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&i&&(Ug=!0),e.firstContext=null)}function Vg(e){var i=e._currentValue;if(Pg!==e)if(e={context:e,memoizedValue:i,next:null},Og===null){if(Ng===null)throw Error(p(308));Og=e,Ng.dependencies={lanes:0,firstContext:e}}else Og=Og.next=e;return i}var Wg=null;function Xg(e){Wg===null?Wg=[e]:Wg.push(e)}function Yg(e,i,a,o){var c=i.interleaved;return c===null?(a.next=a,Xg(i)):(a.next=c.next,c.next=a),i.interleaved=a,Zg(e,o)}function Zg(e,i){e.lanes|=i;var a=e.alternate;for(a!==null&&(a.lanes|=i),a=e,e=e.return;e!==null;)e.childLanes|=i,a=e.alternate,a!==null&&(a.childLanes|=i),a=e,e=e.return;return a.tag===3?a.stateNode:null}var $g=!1;function ah(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh$1(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ch$1(e,i){return{eventTime:e,lane:i,tag:0,payload:null,callback:null,next:null}}function dh$1(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,K$2&2){var c=o.pending;return c===null?i.next=i:(i.next=c.next,c.next=i),o.pending=i,Zg(e,a)}return c=o.interleaved,c===null?(i.next=i,Xg(o)):(i.next=c.next,c.next=i),o.interleaved=i,Zg(e,a)}function eh$1(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,Cc$2(e,a)}}function fh(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var c=null,s=null;if(a=a.firstBaseUpdate,a!==null){do{var d={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};s===null?c=s=d:s=s.next=d,a=a.next}while(a!==null);s===null?c=s=i:s=s.next=i}else c=s=i;a={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:s,shared:o.shared,effects:o.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}function gh$1(e,i,a,o){var c=e.updateQueue;$g=!1;var s=c.firstBaseUpdate,d=c.lastBaseUpdate,et=c.shared.pending;if(et!==null){c.shared.pending=null;var $t=et,h=$t.next;$t.next=null,d===null?s=h:d.next=h,d=$t;var b=e.alternate;b!==null&&(b=b.updateQueue,et=b.lastBaseUpdate,et!==d&&(et===null?b.firstBaseUpdate=h:et.next=h,b.lastBaseUpdate=$t))}if(s!==null){var g=c.baseState;d=0,b=h=$t=null,et=s;do{var jt=et.lane,Ht=et.eventTime;if((o&jt)===jt){b!==null&&(b=b.next={eventTime:Ht,lane:0,tag:et.tag,payload:et.payload,callback:et.callback,next:null});e:{var Kt=e,or=et;switch(jt=i,Ht=a,or.tag){case 1:if(Kt=or.payload,typeof Kt=="function"){g=Kt.call(Ht,g,jt);break e}g=Kt;break e;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=or.payload,jt=typeof Kt=="function"?Kt.call(Ht,g,jt):Kt,jt==null)break e;g=A({},g,jt);break e;case 2:$g=!0}}et.callback!==null&&et.lane!==0&&(e.flags|=64,jt=c.effects,jt===null?c.effects=[et]:jt.push(et))}else Ht={eventTime:Ht,lane:jt,tag:et.tag,payload:et.payload,callback:et.callback,next:null},b===null?(h=b=Ht,$t=g):b=b.next=Ht,d|=jt;if(et=et.next,et===null){if(et=c.shared.pending,et===null)break;jt=et,et=jt.next,jt.next=null,c.lastBaseUpdate=jt,c.shared.pending=null}}while(1);if(b===null&&($t=g),c.baseState=$t,c.firstBaseUpdate=h,c.lastBaseUpdate=b,i=c.shared.interleaved,i!==null){c=i;do d|=c.lane,c=c.next;while(c!==i)}else s===null&&(c.shared.lanes=0);hh$1|=d,e.lanes=d,e.memoizedState=g}}function ih$1(e,i,a){if(e=i.effects,i.effects=null,e!==null)for(i=0;i<e.length;i++){var o=e[i],c=o.callback;if(c!==null){if(o.callback=null,o=a,typeof c!="function")throw Error(p(191,c));c.call(o)}}}var jh$1=new aa$2.Component().refs;function kh$1(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:A({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var nh$1={isMounted:function(e){return(e=e._reactInternals)?Vb$1(e)===e:!1},enqueueSetState:function(e,i,a){e=e._reactInternals;var o=L$2(),c=lh$1(e),s=ch$1(o,c);s.payload=i,a!=null&&(s.callback=a),i=dh$1(e,s,c),i!==null&&(mh$1(i,e,c,o),eh$1(i,e,c))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=L$2(),c=lh$1(e),s=ch$1(o,c);s.tag=1,s.payload=i,a!=null&&(s.callback=a),i=dh$1(e,s,c),i!==null&&(mh$1(i,e,c,o),eh$1(i,e,c))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=L$2(),o=lh$1(e),c=ch$1(a,o);c.tag=2,i!=null&&(c.callback=i),i=dh$1(e,c,o),i!==null&&(mh$1(i,e,o,a),eh$1(i,e,o))}};function oh$1(e,i,a,o,c,s,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,s,d):i.prototype&&i.prototype.isPureReactComponent?!Ie(a,o)||!Ie(c,s):!0}function ph$1(e,i,a){var o=!1,c=Vf$1,s=i.contextType;return typeof s=="object"&&s!==null?s=Vg(s):(c=Zf$1(i)?Xf$1:H$1.current,o=i.contextTypes,s=(o=o!=null)?Yf$1(e,c):Vf$1),i=new i(a,s),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=nh$1,e.stateNode=i,i._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=s),i}function qh$1(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&nh$1.enqueueReplaceState(i,i.state,null)}function rh$1(e,i,a,o){var c=e.stateNode;c.props=a,c.state=e.memoizedState,c.refs=jh$1,ah(e);var s=i.contextType;typeof s=="object"&&s!==null?c.context=Vg(s):(s=Zf$1(i)?Xf$1:H$1.current,c.context=Yf$1(e,s)),c.state=e.memoizedState,s=i.getDerivedStateFromProps,typeof s=="function"&&(kh$1(e,i,s,a),c.state=e.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(i=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),i!==c.state&&nh$1.enqueueReplaceState(c,c.state,null),gh$1(e,a,c,o),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function sh$1(e,i,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(p(309));var o=a.stateNode}if(!o)throw Error(p(147,e));var c=o,s=""+e;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===s?i.ref:(i=function(d){var et=c.refs;et===jh$1&&(et=c.refs={}),d===null?delete et[s]:et[s]=d},i._stringRef=s,i)}if(typeof e!="string")throw Error(p(284));if(!a._owner)throw Error(p(290,e))}return e}function th$1(e,i){throw e=Object.prototype.toString.call(i),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e))}function uh$1(e){var i=e._init;return i(e._payload)}function vh$1(e){function i(Lr,ir){if(e){var qr=Lr.deletions;qr===null?(Lr.deletions=[ir],Lr.flags|=16):qr.push(ir)}}function a(Lr,ir){if(!e)return null;for(;ir!==null;)i(Lr,ir),ir=ir.sibling;return null}function o(Lr,ir){for(Lr=new Map;ir!==null;)ir.key!==null?Lr.set(ir.key,ir):Lr.set(ir.index,ir),ir=ir.sibling;return Lr}function c(Lr,ir){return Lr=wh$1(Lr,ir),Lr.index=0,Lr.sibling=null,Lr}function s(Lr,ir,qr){return Lr.index=qr,e?(qr=Lr.alternate,qr!==null?(qr=qr.index,qr<ir?(Lr.flags|=2,ir):qr):(Lr.flags|=2,ir)):(Lr.flags|=1048576,ir)}function d(Lr){return e&&Lr.alternate===null&&(Lr.flags|=2),Lr}function et(Lr,ir,qr,vn){return ir===null||ir.tag!==6?(ir=xh$1(qr,Lr.mode,vn),ir.return=Lr,ir):(ir=c(ir,qr),ir.return=Lr,ir)}function $t(Lr,ir,qr,vn){var xn=qr.type;return xn===ya$1?b(Lr,ir,qr.props.children,vn,qr.key):ir!==null&&(ir.elementType===xn||typeof xn=="object"&&xn!==null&&xn.$$typeof===Ha$2&&uh$1(xn)===ir.type)?(vn=c(ir,qr.props),vn.ref=sh$1(Lr,ir,qr),vn.return=Lr,vn):(vn=yh$1(qr.type,qr.key,qr.props,null,Lr.mode,vn),vn.ref=sh$1(Lr,ir,qr),vn.return=Lr,vn)}function h(Lr,ir,qr,vn){return ir===null||ir.tag!==4||ir.stateNode.containerInfo!==qr.containerInfo||ir.stateNode.implementation!==qr.implementation?(ir=zh$1(qr,Lr.mode,vn),ir.return=Lr,ir):(ir=c(ir,qr.children||[]),ir.return=Lr,ir)}function b(Lr,ir,qr,vn,xn){return ir===null||ir.tag!==7?(ir=Ah$1(qr,Lr.mode,vn,xn),ir.return=Lr,ir):(ir=c(ir,qr),ir.return=Lr,ir)}function g(Lr,ir,qr){if(typeof ir=="string"&&ir!==""||typeof ir=="number")return ir=xh$1(""+ir,Lr.mode,qr),ir.return=Lr,ir;if(typeof ir=="object"&&ir!==null){switch(ir.$$typeof){case va$1:return qr=yh$1(ir.type,ir.key,ir.props,null,Lr.mode,qr),qr.ref=sh$1(Lr,null,ir),qr.return=Lr,qr;case wa$1:return ir=zh$1(ir,Lr.mode,qr),ir.return=Lr,ir;case Ha$2:var vn=ir._init;return g(Lr,vn(ir._payload),qr)}if(eb$1(ir)||Ka$2(ir))return ir=Ah$1(ir,Lr.mode,qr,null),ir.return=Lr,ir;th$1(Lr,ir)}return null}function jt(Lr,ir,qr,vn){var xn=ir!==null?ir.key:null;if(typeof qr=="string"&&qr!==""||typeof qr=="number")return xn!==null?null:et(Lr,ir,""+qr,vn);if(typeof qr=="object"&&qr!==null){switch(qr.$$typeof){case va$1:return qr.key===xn?$t(Lr,ir,qr,vn):null;case wa$1:return qr.key===xn?h(Lr,ir,qr,vn):null;case Ha$2:return xn=qr._init,jt(Lr,ir,xn(qr._payload),vn)}if(eb$1(qr)||Ka$2(qr))return xn!==null?null:b(Lr,ir,qr,vn,null);th$1(Lr,qr)}return null}function Ht(Lr,ir,qr,vn,xn){if(typeof vn=="string"&&vn!==""||typeof vn=="number")return Lr=Lr.get(qr)||null,et(ir,Lr,""+vn,xn);if(typeof vn=="object"&&vn!==null){switch(vn.$$typeof){case va$1:return Lr=Lr.get(vn.key===null?qr:vn.key)||null,$t(ir,Lr,vn,xn);case wa$1:return Lr=Lr.get(vn.key===null?qr:vn.key)||null,h(ir,Lr,vn,xn);case Ha$2:var No=vn._init;return Ht(Lr,ir,qr,No(vn._payload),xn)}if(eb$1(vn)||Ka$2(vn))return Lr=Lr.get(qr)||null,b(ir,Lr,vn,xn,null);th$1(ir,vn)}return null}function Kt(Lr,ir,qr,vn){for(var xn=null,No=null,Ro=ir,Xo=ir=0,o0=null;Ro!==null&&Xo<qr.length;Xo++){Ro.index>Xo?(o0=Ro,Ro=null):o0=Ro.sibling;var s0=jt(Lr,Ro,qr[Xo],vn);if(s0===null){Ro===null&&(Ro=o0);break}e&&Ro&&s0.alternate===null&&i(Lr,Ro),ir=s(s0,ir,Xo),No===null?xn=s0:No.sibling=s0,No=s0,Ro=o0}if(Xo===qr.length)return a(Lr,Ro),I$1&&tg$1(Lr,Xo),xn;if(Ro===null){for(;Xo<qr.length;Xo++)Ro=g(Lr,qr[Xo],vn),Ro!==null&&(ir=s(Ro,ir,Xo),No===null?xn=Ro:No.sibling=Ro,No=Ro);return I$1&&tg$1(Lr,Xo),xn}for(Ro=o(Lr,Ro);Xo<qr.length;Xo++)o0=Ht(Ro,Lr,Xo,qr[Xo],vn),o0!==null&&(e&&o0.alternate!==null&&Ro.delete(o0.key===null?Xo:o0.key),ir=s(o0,ir,Xo),No===null?xn=o0:No.sibling=o0,No=o0);return e&&Ro.forEach(function(h0){return i(Lr,h0)}),I$1&&tg$1(Lr,Xo),xn}function or(Lr,ir,qr,vn){var xn=Ka$2(qr);if(typeof xn!="function")throw Error(p(150));if(qr=xn.call(qr),qr==null)throw Error(p(151));for(var No=xn=null,Ro=ir,Xo=ir=0,o0=null,s0=qr.next();Ro!==null&&!s0.done;Xo++,s0=qr.next()){Ro.index>Xo?(o0=Ro,Ro=null):o0=Ro.sibling;var h0=jt(Lr,Ro,s0.value,vn);if(h0===null){Ro===null&&(Ro=o0);break}e&&Ro&&h0.alternate===null&&i(Lr,Ro),ir=s(h0,ir,Xo),No===null?xn=h0:No.sibling=h0,No=h0,Ro=o0}if(s0.done)return a(Lr,Ro),I$1&&tg$1(Lr,Xo),xn;if(Ro===null){for(;!s0.done;Xo++,s0=qr.next())s0=g(Lr,s0.value,vn),s0!==null&&(ir=s(s0,ir,Xo),No===null?xn=s0:No.sibling=s0,No=s0);return I$1&&tg$1(Lr,Xo),xn}for(Ro=o(Lr,Ro);!s0.done;Xo++,s0=qr.next())s0=Ht(Ro,Lr,Xo,s0.value,vn),s0!==null&&(e&&s0.alternate!==null&&Ro.delete(s0.key===null?Xo:s0.key),ir=s(s0,ir,Xo),No===null?xn=s0:No.sibling=s0,No=s0);return e&&Ro.forEach(function(E0){return i(Lr,E0)}),I$1&&tg$1(Lr,Xo),xn}function jr(Lr,ir,qr,vn){if(typeof qr=="object"&&qr!==null&&qr.type===ya$1&&qr.key===null&&(qr=qr.props.children),typeof qr=="object"&&qr!==null){switch(qr.$$typeof){case va$1:e:{for(var xn=qr.key,No=ir;No!==null;){if(No.key===xn){if(xn=qr.type,xn===ya$1){if(No.tag===7){a(Lr,No.sibling),ir=c(No,qr.props.children),ir.return=Lr,Lr=ir;break e}}else if(No.elementType===xn||typeof xn=="object"&&xn!==null&&xn.$$typeof===Ha$2&&uh$1(xn)===No.type){a(Lr,No.sibling),ir=c(No,qr.props),ir.ref=sh$1(Lr,No,qr),ir.return=Lr,Lr=ir;break e}a(Lr,No);break}else i(Lr,No);No=No.sibling}qr.type===ya$1?(ir=Ah$1(qr.props.children,Lr.mode,vn,qr.key),ir.return=Lr,Lr=ir):(vn=yh$1(qr.type,qr.key,qr.props,null,Lr.mode,vn),vn.ref=sh$1(Lr,ir,qr),vn.return=Lr,Lr=vn)}return d(Lr);case wa$1:e:{for(No=qr.key;ir!==null;){if(ir.key===No)if(ir.tag===4&&ir.stateNode.containerInfo===qr.containerInfo&&ir.stateNode.implementation===qr.implementation){a(Lr,ir.sibling),ir=c(ir,qr.children||[]),ir.return=Lr,Lr=ir;break e}else{a(Lr,ir);break}else i(Lr,ir);ir=ir.sibling}ir=zh$1(qr,Lr.mode,vn),ir.return=Lr,Lr=ir}return d(Lr);case Ha$2:return No=qr._init,jr(Lr,ir,No(qr._payload),vn)}if(eb$1(qr))return Kt(Lr,ir,qr,vn);if(Ka$2(qr))return or(Lr,ir,qr,vn);th$1(Lr,qr)}return typeof qr=="string"&&qr!==""||typeof qr=="number"?(qr=""+qr,ir!==null&&ir.tag===6?(a(Lr,ir.sibling),ir=c(ir,qr),ir.return=Lr,Lr=ir):(a(Lr,ir),ir=xh$1(qr,Lr.mode,vn),ir.return=Lr,Lr=ir),d(Lr)):a(Lr,ir)}return jr}var Bh$1=vh$1(!0),Ch$1=vh$1(!1),Dh$1={},Eh$1=Uf$1(Dh$1),Fh$1=Uf$1(Dh$1),Gh$1=Uf$1(Dh$1);function Hh$1(e){if(e===Dh$1)throw Error(p(174));return e}function Ih(e,i){switch(G$1(Gh$1,i),G$1(Fh$1,e),G$1(Eh$1,Dh$1),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:lb$1(null,"");break;default:e=e===8?i.parentNode:i,i=e.namespaceURI||null,e=e.tagName,i=lb$1(i,e)}E(Eh$1),G$1(Eh$1,i)}function Jh$1(){E(Eh$1),E(Fh$1),E(Gh$1)}function Kh$1(e){Hh$1(Gh$1.current);var i=Hh$1(Eh$1.current),a=lb$1(i,e.type);i!==a&&(G$1(Fh$1,e),G$1(Eh$1,a))}function Lh$1(e){Fh$1.current===e&&(E(Eh$1),E(Fh$1))}var M$1=Uf$1(0);function Mh$1(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Nh$1=[];function Oh$1(){for(var e=0;e<Nh$1.length;e++)Nh$1[e]._workInProgressVersionPrimary=null;Nh$1.length=0}var Ph$1=ua$2.ReactCurrentDispatcher,Qh$1=ua$2.ReactCurrentBatchConfig,Rh$1=0,N$1=null,O=null,P$1=null,Sh$1=!1,Th$1=!1,Uh$1=0,Vh$1=0;function Q$2(){throw Error(p(321))}function Wh$1(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!He(e[a],i[a]))return!1;return!0}function Xh$1(e,i,a,o,c,s){if(Rh$1=s,N$1=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ph$1.current=e===null||e.memoizedState===null?Yh$1:Zh$1,e=a(o,c),Th$1){s=0;do{if(Th$1=!1,Uh$1=0,25<=s)throw Error(p(301));s+=1,P$1=O=null,i.updateQueue=null,Ph$1.current=$h$1,e=a(o,c)}while(Th$1)}if(Ph$1.current=ai$1,i=O!==null&&O.next!==null,Rh$1=0,P$1=O=N$1=null,Sh$1=!1,i)throw Error(p(300));return e}function bi$1(){var e=Uh$1!==0;return Uh$1=0,e}function ci$1(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=e:P$1=P$1.next=e,P$1}function di$2(){if(O===null){var e=N$1.alternate;e=e!==null?e.memoizedState:null}else e=O.next;var i=P$1===null?N$1.memoizedState:P$1.next;if(i!==null)P$1=i,O=e;else{if(e===null)throw Error(p(310));O=e,e={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P$1===null?N$1.memoizedState=P$1=e:P$1=P$1.next=e}return P$1}function ei$1(e,i){return typeof i=="function"?i(e):i}function fi$2(e){var i=di$2(),a=i.queue;if(a===null)throw Error(p(311));a.lastRenderedReducer=e;var o=O,c=o.baseQueue,s=a.pending;if(s!==null){if(c!==null){var d=c.next;c.next=s.next,s.next=d}o.baseQueue=c=s,a.pending=null}if(c!==null){s=c.next,o=o.baseState;var et=d=null,$t=null,h=s;do{var b=h.lane;if((Rh$1&b)===b)$t!==null&&($t=$t.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),o=h.hasEagerState?h.eagerState:e(o,h.action);else{var g={lane:b,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};$t===null?(et=$t=g,d=o):$t=$t.next=g,N$1.lanes|=b,hh$1|=b}h=h.next}while(h!==null&&h!==s);$t===null?d=o:$t.next=et,He(o,i.memoizedState)||(Ug=!0),i.memoizedState=o,i.baseState=d,i.baseQueue=$t,a.lastRenderedState=o}if(e=a.interleaved,e!==null){c=e;do s=c.lane,N$1.lanes|=s,hh$1|=s,c=c.next;while(c!==e)}else c===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function gi$1(e){var i=di$2(),a=i.queue;if(a===null)throw Error(p(311));a.lastRenderedReducer=e;var o=a.dispatch,c=a.pending,s=i.memoizedState;if(c!==null){a.pending=null;var d=c=c.next;do s=e(s,d.action),d=d.next;while(d!==c);He(s,i.memoizedState)||(Ug=!0),i.memoizedState=s,i.baseQueue===null&&(i.baseState=s),a.lastRenderedState=s}return[s,o]}function hi$2(){}function ii$1(e,i){var a=N$1,o=di$2(),c=i(),s=!He(o.memoizedState,c);if(s&&(o.memoizedState=c,Ug=!0),o=o.queue,ji$2(ki$1.bind(null,a,o,e),[e]),o.getSnapshot!==i||s||P$1!==null&&P$1.memoizedState.tag&1){if(a.flags|=2048,li$1(9,mi$2.bind(null,a,o,c,i),void 0,null),R$1===null)throw Error(p(349));Rh$1&30||ni$1(a,i,c)}return c}function ni$1(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=N$1.updateQueue,i===null?(i={lastEffect:null,stores:null},N$1.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function mi$2(e,i,a,o){i.value=a,i.getSnapshot=o,oi$1(i)&&pi$2(e)}function ki$1(e,i,a){return a(function(){oi$1(i)&&pi$2(e)})}function oi$1(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!He(e,a)}catch{return!0}}function pi$2(e){var i=Zg(e,1);i!==null&&mh$1(i,e,1,-1)}function qi$2(e){var i=ci$1();return typeof e=="function"&&(e=e()),i.memoizedState=i.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei$1,lastRenderedState:e},i.queue=e,e=e.dispatch=ri$1.bind(null,N$1,e),[i.memoizedState,e]}function li$1(e,i,a,o){return e={tag:e,create:i,destroy:a,deps:o,next:null},i=N$1.updateQueue,i===null?(i={lastEffect:null,stores:null},N$1.updateQueue=i,i.lastEffect=e.next=e):(a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e)),e}function si$2(){return di$2().memoizedState}function ti$1(e,i,a,o){var c=ci$1();N$1.flags|=e,c.memoizedState=li$1(1|i,a,void 0,o===void 0?null:o)}function ui$1(e,i,a,o){var c=di$2();o=o===void 0?null:o;var s=void 0;if(O!==null){var d=O.memoizedState;if(s=d.destroy,o!==null&&Wh$1(o,d.deps)){c.memoizedState=li$1(i,a,s,o);return}}N$1.flags|=e,c.memoizedState=li$1(1|i,a,s,o)}function vi$1(e,i){return ti$1(8390656,8,e,i)}function ji$2(e,i){return ui$1(2048,8,e,i)}function wi$1(e,i){return ui$1(4,2,e,i)}function xi$1(e,i){return ui$1(4,4,e,i)}function yi$1(e,i){if(typeof i=="function")return e=e(),i(e),function(){i(null)};if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function zi$2(e,i,a){return a=a!=null?a.concat([e]):null,ui$1(4,4,yi$1.bind(null,i,e),a)}function Ai$1(){}function Bi$2(e,i){var a=di$2();i=i===void 0?null:i;var o=a.memoizedState;return o!==null&&i!==null&&Wh$1(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function Ci$1(e,i){var a=di$2();i=i===void 0?null:i;var o=a.memoizedState;return o!==null&&i!==null&&Wh$1(i,o[1])?o[0]:(e=e(),a.memoizedState=[e,i],e)}function Di$2(e,i,a){return Rh$1&21?(He(a,i)||(a=yc$2(),N$1.lanes|=a,hh$1|=a,e.baseState=!0),i):(e.baseState&&(e.baseState=!1,Ug=!0),e.memoizedState=a)}function Ei$1(e,i){var a=C;C=a!==0&&4>a?a:4,e(!0);var o=Qh$1.transition;Qh$1.transition={};try{e(!1),i()}finally{C=a,Qh$1.transition=o}}function Fi$2(){return di$2().memoizedState}function Gi$2(e,i,a){var o=lh$1(e);if(a={lane:o,action:a,hasEagerState:!1,eagerState:null,next:null},Hi$2(e))Ii$1(i,a);else if(a=Yg(e,i,a,o),a!==null){var c=L$2();mh$1(a,e,o,c),Ji$2(a,i,o)}}function ri$1(e,i,a){var o=lh$1(e),c={lane:o,action:a,hasEagerState:!1,eagerState:null,next:null};if(Hi$2(e))Ii$1(i,c);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=i.lastRenderedReducer,s!==null))try{var d=i.lastRenderedState,et=s(d,a);if(c.hasEagerState=!0,c.eagerState=et,He(et,d)){var $t=i.interleaved;$t===null?(c.next=c,Xg(i)):(c.next=$t.next,$t.next=c),i.interleaved=c;return}}catch{}finally{}a=Yg(e,i,c,o),a!==null&&(c=L$2(),mh$1(a,e,o,c),Ji$2(a,i,o))}}function Hi$2(e){var i=e.alternate;return e===N$1||i!==null&&i===N$1}function Ii$1(e,i){Th$1=Sh$1=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Ji$2(e,i,a){if(a&4194240){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,Cc$2(e,a)}}var ai$1={readContext:Vg,useCallback:Q$2,useContext:Q$2,useEffect:Q$2,useImperativeHandle:Q$2,useInsertionEffect:Q$2,useLayoutEffect:Q$2,useMemo:Q$2,useReducer:Q$2,useRef:Q$2,useState:Q$2,useDebugValue:Q$2,useDeferredValue:Q$2,useTransition:Q$2,useMutableSource:Q$2,useSyncExternalStore:Q$2,useId:Q$2,unstable_isNewReconciler:!1},Yh$1={readContext:Vg,useCallback:function(e,i){return ci$1().memoizedState=[e,i===void 0?null:i],e},useContext:Vg,useEffect:vi$1,useImperativeHandle:function(e,i,a){return a=a!=null?a.concat([e]):null,ti$1(4194308,4,yi$1.bind(null,i,e),a)},useLayoutEffect:function(e,i){return ti$1(4194308,4,e,i)},useInsertionEffect:function(e,i){return ti$1(4,2,e,i)},useMemo:function(e,i){var a=ci$1();return i=i===void 0?null:i,e=e(),a.memoizedState=[e,i],e},useReducer:function(e,i,a){var o=ci$1();return i=a!==void 0?a(i):i,o.memoizedState=o.baseState=i,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},o.queue=e,e=e.dispatch=Gi$2.bind(null,N$1,e),[o.memoizedState,e]},useRef:function(e){var i=ci$1();return e={current:e},i.memoizedState=e},useState:qi$2,useDebugValue:Ai$1,useDeferredValue:function(e){return ci$1().memoizedState=e},useTransition:function(){var e=qi$2(!1),i=e[0];return e=Ei$1.bind(null,e[1]),ci$1().memoizedState=e,[i,e]},useMutableSource:function(){},useSyncExternalStore:function(e,i,a){var o=N$1,c=ci$1();if(I$1){if(a===void 0)throw Error(p(407));a=a()}else{if(a=i(),R$1===null)throw Error(p(349));Rh$1&30||ni$1(o,i,a)}c.memoizedState=a;var s={value:a,getSnapshot:i};return c.queue=s,vi$1(ki$1.bind(null,o,s,e),[e]),o.flags|=2048,li$1(9,mi$2.bind(null,o,s,a,i),void 0,null),a},useId:function(){var e=ci$1(),i=R$1.identifierPrefix;if(I$1){var a=sg$1,o=rg$1;a=(o&~(1<<32-oc$2(o)-1)).toString(32)+a,i=":"+i+"R"+a,a=Uh$1++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Vh$1++,i=":"+i+"r"+a.toString(32)+":";return e.memoizedState=i},unstable_isNewReconciler:!1},Zh$1={readContext:Vg,useCallback:Bi$2,useContext:Vg,useEffect:ji$2,useImperativeHandle:zi$2,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:fi$2,useRef:si$2,useState:function(){return fi$2(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(e){var i=di$2();return Di$2(i,O.memoizedState,e)},useTransition:function(){var e=fi$2(ei$1)[0],i=di$2().memoizedState;return[e,i]},useMutableSource:hi$2,useSyncExternalStore:ii$1,useId:Fi$2,unstable_isNewReconciler:!1},$h$1={readContext:Vg,useCallback:Bi$2,useContext:Vg,useEffect:ji$2,useImperativeHandle:zi$2,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:gi$1,useRef:si$2,useState:function(){return gi$1(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(e){var i=di$2();return O===null?i.memoizedState=e:Di$2(i,O.memoizedState,e)},useTransition:function(){var e=gi$1(ei$1)[0],i=di$2().memoizedState;return[e,i]},useMutableSource:hi$2,useSyncExternalStore:ii$1,useId:Fi$2,unstable_isNewReconciler:!1};function Ki$2(e,i){try{var a="",o=i;do a+=Pa(o),o=o.return;while(o);var c=a}catch(s){c=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:i,stack:c,digest:null}}function Li$2(e,i,a){return{value:e,source:null,stack:a??null,digest:i??null}}function Mi$2(e,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Ni$1=typeof WeakMap=="function"?WeakMap:Map;function Oi$2(e,i,a){a=ch$1(-1,a),a.tag=3,a.payload={element:null};var o=i.value;return a.callback=function(){Pi$2||(Pi$2=!0,Qi$2=o),Mi$2(e,i)},a}function Ri$2(e,i,a){a=ch$1(-1,a),a.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var c=i.value;a.payload=function(){return o(c)},a.callback=function(){Mi$2(e,i)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(a.callback=function(){Mi$2(e,i),typeof o!="function"&&(Si$1===null?Si$1=new Set([this]):Si$1.add(this));var d=i.stack;this.componentDidCatch(i.value,{componentStack:d!==null?d:""})}),a}function Ti$1(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new Ni$1;var c=new Set;o.set(i,c)}else c=o.get(i),c===void 0&&(c=new Set,o.set(i,c));c.has(a)||(c.add(a),e=Ui$2.bind(null,e,i,a),i.then(e,e))}function Vi$1(e){do{var i;if((i=e.tag===13)&&(i=e.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return e;e=e.return}while(e!==null);return null}function Wi$2(e,i,a,o,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===i?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=ch$1(-1,1),i.tag=2,dh$1(a,i,1))),a.lanes|=1),e)}var Xi$2=ua$2.ReactCurrentOwner,Ug=!1;function Yi$2(e,i,a,o){i.child=e===null?Ch$1(i,null,a,o):Bh$1(i,e.child,a,o)}function Zi$2(e,i,a,o,c){a=a.render;var s=i.ref;return Tg$1(i,c),o=Xh$1(e,i,a,o,s,c),a=bi$1(),e!==null&&!Ug?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~c,$i$1(e,i,c)):(I$1&&a&&vg$1(i),i.flags|=1,Yi$2(e,i,o,c),i.child)}function aj(e,i,a,o,c){if(e===null){var s=a.type;return typeof s=="function"&&!bj(s)&&s.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=s,cj(e,i,s,o,c)):(e=yh$1(a.type,null,o,i,i.mode,c),e.ref=i.ref,e.return=i,i.child=e)}if(s=e.child,!(e.lanes&c)){var d=s.memoizedProps;if(a=a.compare,a=a!==null?a:Ie,a(d,o)&&e.ref===i.ref)return $i$1(e,i,c)}return i.flags|=1,e=wh$1(s,o),e.ref=i.ref,e.return=i,i.child=e}function cj(e,i,a,o,c){if(e!==null){var s=e.memoizedProps;if(Ie(s,o)&&e.ref===i.ref)if(Ug=!1,i.pendingProps=o=s,(e.lanes&c)!==0)e.flags&131072&&(Ug=!0);else return i.lanes=e.lanes,$i$1(e,i,c)}return dj(e,i,a,o,c)}function ej(e,i,a){var o=i.pendingProps,c=o.children,s=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=a;else{if(!(a&1073741824))return e=s!==null?s.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:e,cachePool:null,transitions:null},i.updateQueue=null,G$1(fj,gj),gj|=e,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=s!==null?s.baseLanes:a,G$1(fj,gj),gj|=o}else s!==null?(o=s.baseLanes|a,i.memoizedState=null):o=a,G$1(fj,gj),gj|=o;return Yi$2(e,i,c,a),i.child}function hj(e,i){var a=i.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function dj(e,i,a,o,c){var s=Zf$1(a)?Xf$1:H$1.current;return s=Yf$1(i,s),Tg$1(i,c),a=Xh$1(e,i,a,o,s,c),o=bi$1(),e!==null&&!Ug?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~c,$i$1(e,i,c)):(I$1&&o&&vg$1(i),i.flags|=1,Yi$2(e,i,a,c),i.child)}function ij(e,i,a,o,c){if(Zf$1(a)){var s=!0;cg$1(i)}else s=!1;if(Tg$1(i,c),i.stateNode===null)jj(e,i),ph$1(i,a,o),rh$1(i,a,o,c),o=!0;else if(e===null){var d=i.stateNode,et=i.memoizedProps;d.props=et;var $t=d.context,h=a.contextType;typeof h=="object"&&h!==null?h=Vg(h):(h=Zf$1(a)?Xf$1:H$1.current,h=Yf$1(i,h));var b=a.getDerivedStateFromProps,g=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function";g||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(et!==o||$t!==h)&&qh$1(i,d,o,h),$g=!1;var jt=i.memoizedState;d.state=jt,gh$1(i,o,d,c),$t=i.memoizedState,et!==o||jt!==$t||Wf$1.current||$g?(typeof b=="function"&&(kh$1(i,a,b,o),$t=i.memoizedState),(et=$g||oh$1(i,a,et,o,jt,$t,h))?(g||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=$t),d.props=o,d.state=$t,d.context=h,o=et):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,bh$1(e,i),et=i.memoizedProps,h=i.type===i.elementType?et:Lg(i.type,et),d.props=h,g=i.pendingProps,jt=d.context,$t=a.contextType,typeof $t=="object"&&$t!==null?$t=Vg($t):($t=Zf$1(a)?Xf$1:H$1.current,$t=Yf$1(i,$t));var Ht=a.getDerivedStateFromProps;(b=typeof Ht=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(et!==g||jt!==$t)&&qh$1(i,d,o,$t),$g=!1,jt=i.memoizedState,d.state=jt,gh$1(i,o,d,c);var Kt=i.memoizedState;et!==g||jt!==Kt||Wf$1.current||$g?(typeof Ht=="function"&&(kh$1(i,a,Ht,o),Kt=i.memoizedState),(h=$g||oh$1(i,a,h,o,jt,Kt,$t)||!1)?(b||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,Kt,$t),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,Kt,$t)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||et===e.memoizedProps&&jt===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||et===e.memoizedProps&&jt===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=Kt),d.props=o,d.state=Kt,d.context=$t,o=h):(typeof d.componentDidUpdate!="function"||et===e.memoizedProps&&jt===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||et===e.memoizedProps&&jt===e.memoizedState||(i.flags|=1024),o=!1)}return kj(e,i,a,o,s,c)}function kj(e,i,a,o,c,s){hj(e,i);var d=(i.flags&128)!==0;if(!o&&!d)return c&&dg$1(i,a,!1),$i$1(e,i,s);o=i.stateNode,Xi$2.current=i;var et=d&&typeof a.getDerivedStateFromError!="function"?null:o.render();return i.flags|=1,e!==null&&d?(i.child=Bh$1(i,e.child,null,s),i.child=Bh$1(i,null,et,s)):Yi$2(e,i,et,s),i.memoizedState=o.state,c&&dg$1(i,a,!0),i.child}function lj(e){var i=e.stateNode;i.pendingContext?ag(e,i.pendingContext,i.pendingContext!==i.context):i.context&&ag(e,i.context,!1),Ih(e,i.containerInfo)}function mj(e,i,a,o,c){return Ig(),Jg(c),i.flags|=256,Yi$2(e,i,a,o),i.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(e){return{baseLanes:e,cachePool:null,transitions:null}}function pj(e,i,a){var o=i.pendingProps,c=M$1.current,s=!1,d=(i.flags&128)!==0,et;if((et=d)||(et=e!==null&&e.memoizedState===null?!1:(c&2)!==0),et?(s=!0,i.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),G$1(M$1,c&1),e===null)return Eg(i),e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(i.mode&1?e.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(d=o.children,e=o.fallback,s?(o=i.mode,s=i.child,d={mode:"hidden",children:d},!(o&1)&&s!==null?(s.childLanes=0,s.pendingProps=d):s=qj(d,o,0,null),e=Ah$1(e,o,a,null),s.return=i,e.return=i,s.sibling=e,i.child=s,i.child.memoizedState=oj(a),i.memoizedState=nj,e):rj(i,d));if(c=e.memoizedState,c!==null&&(et=c.dehydrated,et!==null))return sj(e,i,d,o,et,c,a);if(s){s=o.fallback,d=i.mode,c=e.child,et=c.sibling;var $t={mode:"hidden",children:o.children};return!(d&1)&&i.child!==c?(o=i.child,o.childLanes=0,o.pendingProps=$t,i.deletions=null):(o=wh$1(c,$t),o.subtreeFlags=c.subtreeFlags&14680064),et!==null?s=wh$1(et,s):(s=Ah$1(s,d,a,null),s.flags|=2),s.return=i,o.return=i,o.sibling=s,i.child=o,o=s,s=i.child,d=e.child.memoizedState,d=d===null?oj(a):{baseLanes:d.baseLanes|a,cachePool:null,transitions:d.transitions},s.memoizedState=d,s.childLanes=e.childLanes&~a,i.memoizedState=nj,o}return s=e.child,e=s.sibling,o=wh$1(s,{mode:"visible",children:o.children}),!(i.mode&1)&&(o.lanes=a),o.return=i,o.sibling=null,e!==null&&(a=i.deletions,a===null?(i.deletions=[e],i.flags|=16):a.push(e)),i.child=o,i.memoizedState=null,o}function rj(e,i){return i=qj({mode:"visible",children:i},e.mode,0,null),i.return=e,e.child=i}function tj(e,i,a,o){return o!==null&&Jg(o),Bh$1(i,e.child,null,a),e=rj(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function sj(e,i,a,o,c,s,d){if(a)return i.flags&256?(i.flags&=-257,o=Li$2(Error(p(422))),tj(e,i,d,o)):i.memoizedState!==null?(i.child=e.child,i.flags|=128,null):(s=o.fallback,c=i.mode,o=qj({mode:"visible",children:o.children},c,0,null),s=Ah$1(s,c,d,null),s.flags|=2,o.return=i,s.return=i,o.sibling=s,i.child=o,i.mode&1&&Bh$1(i,e.child,null,d),i.child.memoizedState=oj(d),i.memoizedState=nj,s);if(!(i.mode&1))return tj(e,i,d,null);if(c.data==="$!"){if(o=c.nextSibling&&c.nextSibling.dataset,o)var et=o.dgst;return o=et,s=Error(p(419)),o=Li$2(s,o,void 0),tj(e,i,d,o)}if(et=(d&e.childLanes)!==0,Ug||et){if(o=R$1,o!==null){switch(d&-d){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(o.suspendedLanes|d)?0:c,c!==0&&c!==s.retryLane&&(s.retryLane=c,Zg(e,c),mh$1(o,e,c,-1))}return uj(),o=Li$2(Error(p(421))),tj(e,i,d,o)}return c.data==="$?"?(i.flags|=128,i.child=e.child,i=vj.bind(null,e),c._reactRetry=i,null):(e=s.treeContext,yg=Lf$1(c.nextSibling),xg$1=i,I$1=!0,zg=null,e!==null&&(og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg,rg$1=e.id,sg$1=e.overflow,qg=i),i=rj(i,o.children),i.flags|=4096,i)}function wj(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),Sg(e.return,i,a)}function xj(e,i,a,o,c){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:c}:(s.isBackwards=i,s.rendering=null,s.renderingStartTime=0,s.last=o,s.tail=a,s.tailMode=c)}function yj(e,i,a){var o=i.pendingProps,c=o.revealOrder,s=o.tail;if(Yi$2(e,i,o.children,a),o=M$1.current,o&2)o=o&1|2,i.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wj(e,a,i);else if(e.tag===19)wj(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(G$1(M$1,o),!(i.mode&1))i.memoizedState=null;else switch(c){case"forwards":for(a=i.child,c=null;a!==null;)e=a.alternate,e!==null&&Mh$1(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=i.child,i.child=null):(c=a.sibling,a.sibling=null),xj(i,!1,c,a,s);break;case"backwards":for(a=null,c=i.child,i.child=null;c!==null;){if(e=c.alternate,e!==null&&Mh$1(e)===null){i.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}xj(i,!0,a,null,s);break;case"together":xj(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function jj(e,i){!(i.mode&1)&&e!==null&&(e.alternate=null,i.alternate=null,i.flags|=2)}function $i$1(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),hh$1|=i.lanes,!(a&i.childLanes))return null;if(e!==null&&i.child!==e.child)throw Error(p(153));if(i.child!==null){for(e=i.child,a=wh$1(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=wh$1(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function zj(e,i,a){switch(i.tag){case 3:lj(i),Ig();break;case 5:Kh$1(i);break;case 1:Zf$1(i.type)&&cg$1(i);break;case 4:Ih(i,i.stateNode.containerInfo);break;case 10:var o=i.type._context,c=i.memoizedProps.value;G$1(Mg,o._currentValue),o._currentValue=c;break;case 13:if(o=i.memoizedState,o!==null)return o.dehydrated!==null?(G$1(M$1,M$1.current&1),i.flags|=128,null):a&i.child.childLanes?pj(e,i,a):(G$1(M$1,M$1.current&1),e=$i$1(e,i,a),e!==null?e.sibling:null);G$1(M$1,M$1.current&1);break;case 19:if(o=(a&i.childLanes)!==0,e.flags&128){if(o)return yj(e,i,a);i.flags|=128}if(c=i.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),G$1(M$1,M$1.current),o)break;return null;case 22:case 23:return i.lanes=0,ej(e,i,a)}return $i$1(e,i,a)}var Aj,Bj,Cj,Dj;Aj=function(e,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Bj=function(){};Cj=function(e,i,a,o){var c=e.memoizedProps;if(c!==o){e=i.stateNode,Hh$1(Eh$1.current);var s=null;switch(a){case"input":c=Ya$2(e,c),o=Ya$2(e,o),s=[];break;case"select":c=A({},c,{value:void 0}),o=A({},o,{value:void 0}),s=[];break;case"textarea":c=gb$1(e,c),o=gb$1(e,o),s=[];break;default:typeof c.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Bf$1)}ub$1(a,o);var d;a=null;for(h in c)if(!o.hasOwnProperty(h)&&c.hasOwnProperty(h)&&c[h]!=null)if(h==="style"){var et=c[h];for(d in et)et.hasOwnProperty(d)&&(a||(a={}),a[d]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ea$1.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in o){var $t=o[h];if(et=c!=null?c[h]:void 0,o.hasOwnProperty(h)&&$t!==et&&($t!=null||et!=null))if(h==="style")if(et){for(d in et)!et.hasOwnProperty(d)||$t&&$t.hasOwnProperty(d)||(a||(a={}),a[d]="");for(d in $t)$t.hasOwnProperty(d)&&et[d]!==$t[d]&&(a||(a={}),a[d]=$t[d])}else a||(s||(s=[]),s.push(h,a)),a=$t;else h==="dangerouslySetInnerHTML"?($t=$t?$t.__html:void 0,et=et?et.__html:void 0,$t!=null&&et!==$t&&(s=s||[]).push(h,$t)):h==="children"?typeof $t!="string"&&typeof $t!="number"||(s=s||[]).push(h,""+$t):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(h)?($t!=null&&h==="onScroll"&&D("scroll",e),s||et===$t||(s=[])):(s=s||[]).push(h,$t))}a&&(s=s||[]).push("style",a);var h=s;(i.updateQueue=h)&&(i.flags|=4)}};Dj=function(e,i,a,o){a!==o&&(i.flags|=4)};function Ej(e,i){if(!I$1)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function S(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags&14680064,o|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function Fj(e,i,a){var o=i.pendingProps;switch(wg$1(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(i),null;case 1:return Zf$1(i.type)&&$f$1(),S(i),null;case 3:return o=i.stateNode,Jh$1(),E(Wf$1),E(H$1),Oh$1(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Gg(i)?i.flags|=4:e===null||e.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(e,i),S(i),null;case 5:Lh$1(i);var c=Hh$1(Gh$1.current);if(a=i.type,e!==null&&i.stateNode!=null)Cj(e,i,a,o,c),e.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!o){if(i.stateNode===null)throw Error(p(166));return S(i),null}if(e=Hh$1(Eh$1.current),Gg(i)){o=i.stateNode,a=i.type;var s=i.memoizedProps;switch(o[Of$1]=i,o[Pf$1]=s,e=(i.mode&1)!==0,a){case"dialog":D("cancel",o),D("close",o);break;case"iframe":case"object":case"embed":D("load",o);break;case"video":case"audio":for(c=0;c<lf$2.length;c++)D(lf$2[c],o);break;case"source":D("error",o);break;case"img":case"image":case"link":D("error",o),D("load",o);break;case"details":D("toggle",o);break;case"input":Za$2(o,s),D("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!s.multiple},D("invalid",o);break;case"textarea":hb$1(o,s),D("invalid",o)}ub$1(a,s),c=null;for(var d in s)if(s.hasOwnProperty(d)){var et=s[d];d==="children"?typeof et=="string"?o.textContent!==et&&(s.suppressHydrationWarning!==!0&&Af$1(o.textContent,et,e),c=["children",et]):typeof et=="number"&&o.textContent!==""+et&&(s.suppressHydrationWarning!==!0&&Af$1(o.textContent,et,e),c=["children",""+et]):ea$1.hasOwnProperty(d)&&et!=null&&d==="onScroll"&&D("scroll",o)}switch(a){case"input":Va$2(o),db$1(o,s,!0);break;case"textarea":Va$2(o),jb$1(o);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(o.onclick=Bf$1)}o=c,i.updateQueue=o,o!==null&&(i.flags|=4)}else{d=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb$1(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=d.createElement(a,{is:o.is}):(e=d.createElement(a),a==="select"&&(d=e,o.multiple?d.multiple=!0:o.size&&(d.size=o.size))):e=d.createElementNS(e,a),e[Of$1]=i,e[Pf$1]=o,Aj(e,i,!1,!1),i.stateNode=e;e:{switch(d=vb$1(a,o),a){case"dialog":D("cancel",e),D("close",e),c=o;break;case"iframe":case"object":case"embed":D("load",e),c=o;break;case"video":case"audio":for(c=0;c<lf$2.length;c++)D(lf$2[c],e);c=o;break;case"source":D("error",e),c=o;break;case"img":case"image":case"link":D("error",e),D("load",e),c=o;break;case"details":D("toggle",e),c=o;break;case"input":Za$2(e,o),c=Ya$2(e,o),D("invalid",e);break;case"option":c=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},c=A({},o,{value:void 0}),D("invalid",e);break;case"textarea":hb$1(e,o),c=gb$1(e,o),D("invalid",e);break;default:c=o}ub$1(a,c),et=c;for(s in et)if(et.hasOwnProperty(s)){var $t=et[s];s==="style"?sb$1(e,$t):s==="dangerouslySetInnerHTML"?($t=$t?$t.__html:void 0,$t!=null&&nb$1(e,$t)):s==="children"?typeof $t=="string"?(a!=="textarea"||$t!=="")&&ob$1(e,$t):typeof $t=="number"&&ob$1(e,""+$t):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ea$1.hasOwnProperty(s)?$t!=null&&s==="onScroll"&&D("scroll",e):$t!=null&&ta$1(e,s,$t,d))}switch(a){case"input":Va$2(e),db$1(e,o,!1);break;case"textarea":Va$2(e),jb$1(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Sa$1(o.value));break;case"select":e.multiple=!!o.multiple,s=o.value,s!=null?fb$1(e,!!o.multiple,s,!1):o.defaultValue!=null&&fb$1(e,!!o.multiple,o.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Bf$1)}switch(a){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return S(i),null;case 6:if(e&&i.stateNode!=null)Dj(e,i,e.memoizedProps,o);else{if(typeof o!="string"&&i.stateNode===null)throw Error(p(166));if(a=Hh$1(Gh$1.current),Hh$1(Eh$1.current),Gg(i)){if(o=i.stateNode,a=i.memoizedProps,o[Of$1]=i,(s=o.nodeValue!==a)&&(e=xg$1,e!==null))switch(e.tag){case 3:Af$1(o.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af$1(o.nodeValue,a,(e.mode&1)!==0)}s&&(i.flags|=4)}else o=(a.nodeType===9?a:a.ownerDocument).createTextNode(o),o[Of$1]=i,i.stateNode=o}return S(i),null;case 13:if(E(M$1),o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&i.mode&1&&!(i.flags&128))Hg(),Ig(),i.flags|=98560,s=!1;else if(s=Gg(i),o!==null&&o.dehydrated!==null){if(e===null){if(!s)throw Error(p(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(p(317));s[Of$1]=i}else Ig(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;S(i),s=!1}else zg!==null&&(Gj(zg),zg=null),s=!0;if(!s)return i.flags&65536?i:null}return i.flags&128?(i.lanes=a,i):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(i.child.flags|=8192,i.mode&1&&(e===null||M$1.current&1?T===0&&(T=3):uj())),i.updateQueue!==null&&(i.flags|=4),S(i),null);case 4:return Jh$1(),Bj(e,i),e===null&&sf$2(i.stateNode.containerInfo),S(i),null;case 10:return Rg(i.type._context),S(i),null;case 17:return Zf$1(i.type)&&$f$1(),S(i),null;case 19:if(E(M$1),s=i.memoizedState,s===null)return S(i),null;if(o=(i.flags&128)!==0,d=s.rendering,d===null)if(o)Ej(s,!1);else{if(T!==0||e!==null&&e.flags&128)for(e=i.child;e!==null;){if(d=Mh$1(e),d!==null){for(i.flags|=128,Ej(s,!1),o=d.updateQueue,o!==null&&(i.updateQueue=o,i.flags|=4),i.subtreeFlags=0,o=a,a=i.child;a!==null;)s=a,e=o,s.flags&=14680066,d=s.alternate,d===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,e=d.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return G$1(M$1,M$1.current&1|2),i.child}e=e.sibling}s.tail!==null&&B$2()>Hj&&(i.flags|=128,o=!0,Ej(s,!1),i.lanes=4194304)}else{if(!o)if(e=Mh$1(d),e!==null){if(i.flags|=128,o=!0,a=e.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ej(s,!0),s.tail===null&&s.tailMode==="hidden"&&!d.alternate&&!I$1)return S(i),null}else 2*B$2()-s.renderingStartTime>Hj&&a!==1073741824&&(i.flags|=128,o=!0,Ej(s,!1),i.lanes=4194304);s.isBackwards?(d.sibling=i.child,i.child=d):(a=s.last,a!==null?a.sibling=d:i.child=d,s.last=d)}return s.tail!==null?(i=s.tail,s.rendering=i,s.tail=i.sibling,s.renderingStartTime=B$2(),i.sibling=null,a=M$1.current,G$1(M$1,o?a&1|2:a&1),i):(S(i),null);case 22:case 23:return Ij(),o=i.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(i.flags|=8192),o&&i.mode&1?gj&1073741824&&(S(i),i.subtreeFlags&6&&(i.flags|=8192)):S(i),null;case 24:return null;case 25:return null}throw Error(p(156,i.tag))}function Jj(e,i){switch(wg$1(i),i.tag){case 1:return Zf$1(i.type)&&$f$1(),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Jh$1(),E(Wf$1),E(H$1),Oh$1(),e=i.flags,e&65536&&!(e&128)?(i.flags=e&-65537|128,i):null;case 5:return Lh$1(i),null;case 13:if(E(M$1),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(p(340));Ig()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return E(M$1),null;case 4:return Jh$1(),null;case 10:return Rg(i.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$3=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Mj(e,i){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(o){W$1(e,i,o)}else a.current=null}function Nj(e,i,a){try{a()}catch(o){W$1(e,i,o)}}var Oj=!1;function Pj(e,i){if(Cf$1=dd$2,e=Me$1(),Ne$1(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var c=o.anchorOffset,s=o.focusNode;o=o.focusOffset;try{a.nodeType,s.nodeType}catch{a=null;break e}var d=0,et=-1,$t=-1,h=0,b=0,g=e,jt=null;t:for(;;){for(var Ht;g!==a||c!==0&&g.nodeType!==3||(et=d+c),g!==s||o!==0&&g.nodeType!==3||($t=d+o),g.nodeType===3&&(d+=g.nodeValue.length),(Ht=g.firstChild)!==null;)jt=g,g=Ht;for(;;){if(g===e)break t;if(jt===a&&++h===c&&(et=d),jt===s&&++b===o&&($t=d),(Ht=g.nextSibling)!==null)break;g=jt,jt=g.parentNode}g=Ht}a=et===-1||$t===-1?null:{start:et,end:$t}}else a=null}a=a||{start:0,end:0}}else a=null;for(Df$1={focusedElem:e,selectionRange:a},dd$2=!1,V$2=i;V$2!==null;)if(i=V$2,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,V$2=e;else for(;V$2!==null;){i=V$2;try{var Kt=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Kt!==null){var or=Kt.memoizedProps,jr=Kt.memoizedState,Lr=i.stateNode,ir=Lr.getSnapshotBeforeUpdate(i.elementType===i.type?or:Lg(i.type,or),jr);Lr.__reactInternalSnapshotBeforeUpdate=ir}break;case 3:var qr=i.stateNode.containerInfo;qr.nodeType===1?qr.textContent="":qr.nodeType===9&&qr.documentElement&&qr.removeChild(qr.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(vn){W$1(i,i.return,vn)}if(e=i.sibling,e!==null){e.return=i.return,V$2=e;break}V$2=i.return}return Kt=Oj,Oj=!1,Kt}function Qj(e,i,a){var o=i.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&e)===e){var s=c.destroy;c.destroy=void 0,s!==void 0&&Nj(i,a,s)}c=c.next}while(c!==o)}}function Rj(e,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var o=a.create;a.destroy=o()}a=a.next}while(a!==i)}}function Sj(e){var i=e.ref;if(i!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof i=="function"?i(e):i.current=e}}function Tj(e){var i=e.alternate;i!==null&&(e.alternate=null,Tj(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&(delete i[Of$1],delete i[Pf$1],delete i[of$2],delete i[Qf$1],delete i[Rf$1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uj(e){return e.tag===5||e.tag===3||e.tag===4}function Vj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wj(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(e,i):a.insertBefore(e,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(e,a)):(i=a,i.appendChild(e)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Bf$1));else if(o!==4&&(e=e.child,e!==null))for(Wj(e,i,a),e=e.sibling;e!==null;)Wj(e,i,a),e=e.sibling}function Xj(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Xj(e,i,a),e=e.sibling;e!==null;)Xj(e,i,a),e=e.sibling}var X$2=null,Yj=!1;function Zj(e,i,a){for(a=a.child;a!==null;)ak(e,i,a),a=a.sibling}function ak(e,i,a){if(lc$2&&typeof lc$2.onCommitFiberUnmount=="function")try{lc$2.onCommitFiberUnmount(kc$2,a)}catch{}switch(a.tag){case 5:U$3||Mj(a,i);case 6:var o=X$2,c=Yj;X$2=null,Zj(e,i,a),X$2=o,Yj=c,X$2!==null&&(Yj?(e=X$2,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):X$2.removeChild(a.stateNode));break;case 18:X$2!==null&&(Yj?(e=X$2,a=a.stateNode,e.nodeType===8?Kf$1(e.parentNode,a):e.nodeType===1&&Kf$1(e,a),bd$1(e)):Kf$1(X$2,a.stateNode));break;case 4:o=X$2,c=Yj,X$2=a.stateNode.containerInfo,Yj=!0,Zj(e,i,a),X$2=o,Yj=c;break;case 0:case 11:case 14:case 15:if(!U$3&&(o=a.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){c=o=o.next;do{var s=c,d=s.destroy;s=s.tag,d!==void 0&&(s&2||s&4)&&Nj(a,i,d),c=c.next}while(c!==o)}Zj(e,i,a);break;case 1:if(!U$3&&(Mj(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=a.memoizedProps,o.state=a.memoizedState,o.componentWillUnmount()}catch(et){W$1(a,i,et)}Zj(e,i,a);break;case 21:Zj(e,i,a);break;case 22:a.mode&1?(U$3=(o=U$3)||a.memoizedState!==null,Zj(e,i,a),U$3=o):Zj(e,i,a);break;default:Zj(e,i,a)}}function bk(e){var i=e.updateQueue;if(i!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Lj),i.forEach(function(o){var c=ck.bind(null,e,o);a.has(o)||(a.add(o),o.then(c,c))})}}function dk(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var c=a[o];try{var s=e,d=i,et=d;e:for(;et!==null;){switch(et.tag){case 5:X$2=et.stateNode,Yj=!1;break e;case 3:X$2=et.stateNode.containerInfo,Yj=!0;break e;case 4:X$2=et.stateNode.containerInfo,Yj=!0;break e}et=et.return}if(X$2===null)throw Error(p(160));ak(s,d,c),X$2=null,Yj=!1;var $t=c.alternate;$t!==null&&($t.return=null),c.return=null}catch(h){W$1(c,i,h)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)ek(i,e),i=i.sibling}function ek(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dk(i,e),fk(e),o&4){try{Qj(3,e,e.return),Rj(3,e)}catch(or){W$1(e,e.return,or)}try{Qj(5,e,e.return)}catch(or){W$1(e,e.return,or)}}break;case 1:dk(i,e),fk(e),o&512&&a!==null&&Mj(a,a.return);break;case 5:if(dk(i,e),fk(e),o&512&&a!==null&&Mj(a,a.return),e.flags&32){var c=e.stateNode;try{ob$1(c,"")}catch(or){W$1(e,e.return,or)}}if(o&4&&(c=e.stateNode,c!=null)){var s=e.memoizedProps,d=a!==null?a.memoizedProps:s,et=e.type,$t=e.updateQueue;if(e.updateQueue=null,$t!==null)try{et==="input"&&s.type==="radio"&&s.name!=null&&ab$1(c,s),vb$1(et,d);var h=vb$1(et,s);for(d=0;d<$t.length;d+=2){var b=$t[d],g=$t[d+1];b==="style"?sb$1(c,g):b==="dangerouslySetInnerHTML"?nb$1(c,g):b==="children"?ob$1(c,g):ta$1(c,b,g,h)}switch(et){case"input":bb$1(c,s);break;case"textarea":ib$1(c,s);break;case"select":var jt=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!s.multiple;var Ht=s.value;Ht!=null?fb$1(c,!!s.multiple,Ht,!1):jt!==!!s.multiple&&(s.defaultValue!=null?fb$1(c,!!s.multiple,s.defaultValue,!0):fb$1(c,!!s.multiple,s.multiple?[]:"",!1))}c[Pf$1]=s}catch(or){W$1(e,e.return,or)}}break;case 6:if(dk(i,e),fk(e),o&4){if(e.stateNode===null)throw Error(p(162));c=e.stateNode,s=e.memoizedProps;try{c.nodeValue=s}catch(or){W$1(e,e.return,or)}}break;case 3:if(dk(i,e),fk(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{bd$1(i.containerInfo)}catch(or){W$1(e,e.return,or)}break;case 4:dk(i,e),fk(e);break;case 13:dk(i,e),fk(e),c=e.child,c.flags&8192&&(s=c.memoizedState!==null,c.stateNode.isHidden=s,!s||c.alternate!==null&&c.alternate.memoizedState!==null||(gk=B$2())),o&4&&bk(e);break;case 22:if(b=a!==null&&a.memoizedState!==null,e.mode&1?(U$3=(h=U$3)||b,dk(i,e),U$3=h):dk(i,e),fk(e),o&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!b&&e.mode&1)for(V$2=e,b=e.child;b!==null;){for(g=V$2=b;V$2!==null;){switch(jt=V$2,Ht=jt.child,jt.tag){case 0:case 11:case 14:case 15:Qj(4,jt,jt.return);break;case 1:Mj(jt,jt.return);var Kt=jt.stateNode;if(typeof Kt.componentWillUnmount=="function"){o=jt,a=jt.return;try{i=o,Kt.props=i.memoizedProps,Kt.state=i.memoizedState,Kt.componentWillUnmount()}catch(or){W$1(o,a,or)}}break;case 5:Mj(jt,jt.return);break;case 22:if(jt.memoizedState!==null){hk(g);continue}}Ht!==null?(Ht.return=jt,V$2=Ht):hk(g)}b=b.sibling}e:for(b=null,g=e;;){if(g.tag===5){if(b===null){b=g;try{c=g.stateNode,h?(s=c.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(et=g.stateNode,$t=g.memoizedProps.style,d=$t!=null&&$t.hasOwnProperty("display")?$t.display:null,et.style.display=rb$1("display",d))}catch(or){W$1(e,e.return,or)}}}else if(g.tag===6){if(b===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(or){W$1(e,e.return,or)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;b===g&&(b=null),g=g.return}b===g&&(b=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:dk(i,e),fk(e),o&4&&bk(e);break;case 21:break;default:dk(i,e),fk(e)}}function fk(e){var i=e.flags;if(i&2){try{e:{for(var a=e.return;a!==null;){if(Uj(a)){var o=a;break e}a=a.return}throw Error(p(160))}switch(o.tag){case 5:var c=o.stateNode;o.flags&32&&(ob$1(c,""),o.flags&=-33);var s=Vj(e);Xj(e,s,c);break;case 3:case 4:var d=o.stateNode.containerInfo,et=Vj(e);Wj(e,et,d);break;default:throw Error(p(161))}}catch($t){W$1(e,e.return,$t)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function ik(e,i,a){V$2=e,jk(e)}function jk(e,i,a){for(var o=(e.mode&1)!==0;V$2!==null;){var c=V$2,s=c.child;if(c.tag===22&&o){var d=c.memoizedState!==null||Kj;if(!d){var et=c.alternate,$t=et!==null&&et.memoizedState!==null||U$3;et=Kj;var h=U$3;if(Kj=d,(U$3=$t)&&!h)for(V$2=c;V$2!==null;)d=V$2,$t=d.child,d.tag===22&&d.memoizedState!==null?kk(c):$t!==null?($t.return=d,V$2=$t):kk(c);for(;s!==null;)V$2=s,jk(s),s=s.sibling;V$2=c,Kj=et,U$3=h}lk(e)}else c.subtreeFlags&8772&&s!==null?(s.return=c,V$2=s):lk(e)}}function lk(e){for(;V$2!==null;){var i=V$2;if(i.flags&8772){var a=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:U$3||Rj(5,i);break;case 1:var o=i.stateNode;if(i.flags&4&&!U$3)if(a===null)o.componentDidMount();else{var c=i.elementType===i.type?a.memoizedProps:Lg(i.type,a.memoizedProps);o.componentDidUpdate(c,a.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var s=i.updateQueue;s!==null&&ih$1(i,s,o);break;case 3:var d=i.updateQueue;if(d!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}ih$1(i,d,a)}break;case 5:var et=i.stateNode;if(a===null&&i.flags&4){a=et;var $t=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":$t.autoFocus&&a.focus();break;case"img":$t.src&&(a.src=$t.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var h=i.alternate;if(h!==null){var b=h.memoizedState;if(b!==null){var g=b.dehydrated;g!==null&&bd$1(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U$3||i.flags&512&&Sj(i)}catch(jt){W$1(i,i.return,jt)}}if(i===e){V$2=null;break}if(a=i.sibling,a!==null){a.return=i.return,V$2=a;break}V$2=i.return}}function hk(e){for(;V$2!==null;){var i=V$2;if(i===e){V$2=null;break}var a=i.sibling;if(a!==null){a.return=i.return,V$2=a;break}V$2=i.return}}function kk(e){for(;V$2!==null;){var i=V$2;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Rj(4,i)}catch($t){W$1(i,a,$t)}break;case 1:var o=i.stateNode;if(typeof o.componentDidMount=="function"){var c=i.return;try{o.componentDidMount()}catch($t){W$1(i,c,$t)}}var s=i.return;try{Sj(i)}catch($t){W$1(i,s,$t)}break;case 5:var d=i.return;try{Sj(i)}catch($t){W$1(i,d,$t)}}}catch($t){W$1(i,i.return,$t)}if(i===e){V$2=null;break}var et=i.sibling;if(et!==null){et.return=i.return,V$2=et;break}V$2=i.return}}var mk=Math.ceil,nk=ua$2.ReactCurrentDispatcher,ok=ua$2.ReactCurrentOwner,pk=ua$2.ReactCurrentBatchConfig,K$2=0,R$1=null,Y=null,Z$2=0,gj=0,fj=Uf$1(0),T=0,qk=null,hh$1=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi$2=!1,Qi$2=null,Si$1=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$2(){return K$2&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh$1(e){return e.mode&1?K$2&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Ck===0&&(Ck=yc$2()),Ck):(e=C,e!==0||(e=window.event,e=e===void 0?16:jd$2(e.type)),e):1}function mh$1(e,i,a,o){if(50<zk)throw zk=0,Ak=null,Error(p(185));Ac$2(e,a,o),(!(K$2&2)||e!==R$1)&&(e===R$1&&(!(K$2&2)&&(rk|=a),T===4&&Dk(e,Z$2)),Ek(e,o),a===1&&K$2===0&&!(i.mode&1)&&(Hj=B$2()+500,fg$1&&jg()))}function Ek(e,i){var a=e.callbackNode;wc$2(e,i);var o=uc$2(e,e===R$1?Z$2:0);if(o===0)a!==null&&bc$2(a),e.callbackNode=null,e.callbackPriority=0;else if(i=o&-o,e.callbackPriority!==i){if(a!=null&&bc$2(a),i===1)e.tag===0?ig$1(Fk.bind(null,e)):hg$1(Fk.bind(null,e)),Jf$1(function(){!(K$2&6)&&jg()}),a=null;else{switch(Dc$2(o)){case 1:a=fc$2;break;case 4:a=gc$2;break;case 16:a=hc$1;break;case 536870912:a=jc$2;break;default:a=hc$1}a=Gk(a,Hk.bind(null,e))}e.callbackPriority=i,e.callbackNode=a}}function Hk(e,i){if(Bk=-1,Ck=0,K$2&6)throw Error(p(327));var a=e.callbackNode;if(Ik()&&e.callbackNode!==a)return null;var o=uc$2(e,e===R$1?Z$2:0);if(o===0)return null;if(o&30||o&e.expiredLanes||i)i=Jk(e,o);else{i=o;var c=K$2;K$2|=2;var s=Kk();(R$1!==e||Z$2!==i)&&(vk=null,Hj=B$2()+500,Lk(e,i));do try{Mk();break}catch(et){Nk(e,et)}while(1);Qg(),nk.current=s,K$2=c,Y!==null?i=0:(R$1=null,Z$2=0,i=T)}if(i!==0){if(i===2&&(c=xc$2(e),c!==0&&(o=c,i=Ok(e,c))),i===1)throw a=qk,Lk(e,0),Dk(e,o),Ek(e,B$2()),a;if(i===6)Dk(e,o);else{if(c=e.current.alternate,!(o&30)&&!Pk(c)&&(i=Jk(e,o),i===2&&(s=xc$2(e),s!==0&&(o=s,i=Ok(e,s))),i===1))throw a=qk,Lk(e,0),Dk(e,o),Ek(e,B$2()),a;switch(e.finishedWork=c,e.finishedLanes=o,i){case 0:case 1:throw Error(p(345));case 2:Qk(e,uk,vk);break;case 3:if(Dk(e,o),(o&130023424)===o&&(i=gk+500-B$2(),10<i)){if(uc$2(e,0)!==0)break;if(c=e.suspendedLanes,(c&o)!==o){L$2(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Ff$1(Qk.bind(null,e,uk,vk),i);break}Qk(e,uk,vk);break;case 4:if(Dk(e,o),(o&4194240)===o)break;for(i=e.eventTimes,c=-1;0<o;){var d=31-oc$2(o);s=1<<d,d=i[d],d>c&&(c=d),o&=~s}if(o=c,o=B$2()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*mk(o/1960))-o,10<o){e.timeoutHandle=Ff$1(Qk.bind(null,e,uk,vk),o);break}Qk(e,uk,vk);break;case 5:Qk(e,uk,vk);break;default:throw Error(p(329))}}}return Ek(e,B$2()),e.callbackNode===a?Hk.bind(null,e):null}function Ok(e,i){var a=tk;return e.current.memoizedState.isDehydrated&&(Lk(e,i).flags|=256),e=Jk(e,i),e!==2&&(i=uk,uk=a,i!==null&&Gj(i)),e}function Gj(e){uk===null?uk=e:uk.push.apply(uk,e)}function Pk(e){for(var i=e;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var o=0;o<a.length;o++){var c=a[o],s=c.getSnapshot;c=c.value;try{if(!He(s(),c))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Dk(e,i){for(i&=~sk,i&=~rk,e.suspendedLanes|=i,e.pingedLanes&=~i,e=e.expirationTimes;0<i;){var a=31-oc$2(i),o=1<<a;e[a]=-1,i&=~o}}function Fk(e){if(K$2&6)throw Error(p(327));Ik();var i=uc$2(e,0);if(!(i&1))return Ek(e,B$2()),null;var a=Jk(e,i);if(e.tag!==0&&a===2){var o=xc$2(e);o!==0&&(i=o,a=Ok(e,o))}if(a===1)throw a=qk,Lk(e,0),Dk(e,i),Ek(e,B$2()),a;if(a===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=i,Qk(e,uk,vk),Ek(e,B$2()),null}function Rk(e,i){var a=K$2;K$2|=1;try{return e(i)}finally{K$2=a,K$2===0&&(Hj=B$2()+500,fg$1&&jg())}}function Sk(e){xk!==null&&xk.tag===0&&!(K$2&6)&&Ik();var i=K$2;K$2|=1;var a=pk.transition,o=C;try{if(pk.transition=null,C=1,e)return e()}finally{C=o,pk.transition=a,K$2=i,!(K$2&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(e,i){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,Gf$1(a)),Y!==null)for(a=Y.return;a!==null;){var o=a;switch(wg$1(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&$f$1();break;case 3:Jh$1(),E(Wf$1),E(H$1),Oh$1();break;case 5:Lh$1(o);break;case 4:Jh$1();break;case 13:E(M$1);break;case 19:E(M$1);break;case 10:Rg(o.type._context);break;case 22:case 23:Ij()}a=a.return}if(R$1=e,Y=e=wh$1(e.current,null),Z$2=gj=i,T=0,qk=null,sk=rk=hh$1=0,uk=tk=null,Wg!==null){for(i=0;i<Wg.length;i++)if(a=Wg[i],o=a.interleaved,o!==null){a.interleaved=null;var c=o.next,s=a.pending;if(s!==null){var d=s.next;s.next=c,o.next=d}a.pending=o}Wg=null}return e}function Nk(e,i){do{var a=Y;try{if(Qg(),Ph$1.current=ai$1,Sh$1){for(var o=N$1.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Sh$1=!1}if(Rh$1=0,P$1=O=N$1=null,Th$1=!1,Uh$1=0,ok.current=null,a===null||a.return===null){T=1,qk=i,Y=null;break}e:{var s=e,d=a.return,et=a,$t=i;if(i=Z$2,et.flags|=32768,$t!==null&&typeof $t=="object"&&typeof $t.then=="function"){var h=$t,b=et,g=b.tag;if(!(b.mode&1)&&(g===0||g===11||g===15)){var jt=b.alternate;jt?(b.updateQueue=jt.updateQueue,b.memoizedState=jt.memoizedState,b.lanes=jt.lanes):(b.updateQueue=null,b.memoizedState=null)}var Ht=Vi$1(d);if(Ht!==null){Ht.flags&=-257,Wi$2(Ht,d,et,s,i),Ht.mode&1&&Ti$1(s,h,i),i=Ht,$t=h;var Kt=i.updateQueue;if(Kt===null){var or=new Set;or.add($t),i.updateQueue=or}else Kt.add($t);break e}else{if(!(i&1)){Ti$1(s,h,i),uj();break e}$t=Error(p(426))}}else if(I$1&&et.mode&1){var jr=Vi$1(d);if(jr!==null){!(jr.flags&65536)&&(jr.flags|=256),Wi$2(jr,d,et,s,i),Jg(Ki$2($t,et));break e}}s=$t=Ki$2($t,et),T!==4&&(T=2),tk===null?tk=[s]:tk.push(s),s=d;do{switch(s.tag){case 3:s.flags|=65536,i&=-i,s.lanes|=i;var Lr=Oi$2(s,$t,i);fh(s,Lr);break e;case 1:et=$t;var ir=s.type,qr=s.stateNode;if(!(s.flags&128)&&(typeof ir.getDerivedStateFromError=="function"||qr!==null&&typeof qr.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(qr)))){s.flags|=65536,i&=-i,s.lanes|=i;var vn=Ri$2(s,et,i);fh(s,vn);break e}}s=s.return}while(s!==null)}Tk(a)}catch(xn){i=xn,Y===a&&a!==null&&(Y=a=a.return);continue}break}while(1)}function Kk(){var e=nk.current;return nk.current=ai$1,e===null?ai$1:e}function uj(){(T===0||T===3||T===2)&&(T=4),R$1===null||!(hh$1&268435455)&&!(rk&268435455)||Dk(R$1,Z$2)}function Jk(e,i){var a=K$2;K$2|=2;var o=Kk();(R$1!==e||Z$2!==i)&&(vk=null,Lk(e,i));do try{Uk();break}catch(c){Nk(e,c)}while(1);if(Qg(),K$2=a,nk.current=o,Y!==null)throw Error(p(261));return R$1=null,Z$2=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc$2();)Vk(Y)}function Vk(e){var i=Wk(e.alternate,e,gj);e.memoizedProps=e.pendingProps,i===null?Tk(e):Y=i,ok.current=null}function Tk(e){var i=e;do{var a=i.alternate;if(e=i.return,i.flags&32768){if(a=Jj(a,i),a!==null){a.flags&=32767,Y=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T=6,Y=null;return}}else if(a=Fj(a,i,gj),a!==null){Y=a;return}if(i=i.sibling,i!==null){Y=i;return}Y=i=e}while(i!==null);T===0&&(T=5)}function Qk(e,i,a){var o=C,c=pk.transition;try{pk.transition=null,C=1,Xk(e,i,a,o)}finally{pk.transition=c,C=o}return null}function Xk(e,i,a,o){do Ik();while(xk!==null);if(K$2&6)throw Error(p(327));a=e.finishedWork;var c=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var s=a.lanes|a.childLanes;if(Bc$2(e,s),e===R$1&&(Y=R$1=null,Z$2=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||wk||(wk=!0,Gk(hc$1,function(){return Ik(),null})),s=(a.flags&15990)!==0,a.subtreeFlags&15990||s){s=pk.transition,pk.transition=null;var d=C;C=1;var et=K$2;K$2|=4,ok.current=null,Pj(e,a),ek(a,e),Oe(Df$1),dd$2=!!Cf$1,Df$1=Cf$1=null,e.current=a,ik(a),dc$2(),K$2=et,C=d,pk.transition=s}else e.current=a;if(wk&&(wk=!1,xk=e,yk=c),s=e.pendingLanes,s===0&&(Si$1=null),mc$2(a.stateNode),Ek(e,B$2()),i!==null)for(o=e.onRecoverableError,a=0;a<i.length;a++)c=i[a],o(c.value,{componentStack:c.stack,digest:c.digest});if(Pi$2)throw Pi$2=!1,e=Qi$2,Qi$2=null,e;return yk&1&&e.tag!==0&&Ik(),s=e.pendingLanes,s&1?e===Ak?zk++:(zk=0,Ak=e):zk=0,jg(),null}function Ik(){if(xk!==null){var e=Dc$2(yk),i=pk.transition,a=C;try{if(pk.transition=null,C=16>e?16:e,xk===null)var o=!1;else{if(e=xk,xk=null,yk=0,K$2&6)throw Error(p(331));var c=K$2;for(K$2|=4,V$2=e.current;V$2!==null;){var s=V$2,d=s.child;if(V$2.flags&16){var et=s.deletions;if(et!==null){for(var $t=0;$t<et.length;$t++){var h=et[$t];for(V$2=h;V$2!==null;){var b=V$2;switch(b.tag){case 0:case 11:case 15:Qj(8,b,s)}var g=b.child;if(g!==null)g.return=b,V$2=g;else for(;V$2!==null;){b=V$2;var jt=b.sibling,Ht=b.return;if(Tj(b),b===h){V$2=null;break}if(jt!==null){jt.return=Ht,V$2=jt;break}V$2=Ht}}}var Kt=s.alternate;if(Kt!==null){var or=Kt.child;if(or!==null){Kt.child=null;do{var jr=or.sibling;or.sibling=null,or=jr}while(or!==null)}}V$2=s}}if(s.subtreeFlags&2064&&d!==null)d.return=s,V$2=d;else e:for(;V$2!==null;){if(s=V$2,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qj(9,s,s.return)}var Lr=s.sibling;if(Lr!==null){Lr.return=s.return,V$2=Lr;break e}V$2=s.return}}var ir=e.current;for(V$2=ir;V$2!==null;){d=V$2;var qr=d.child;if(d.subtreeFlags&2064&&qr!==null)qr.return=d,V$2=qr;else e:for(d=ir;V$2!==null;){if(et=V$2,et.flags&2048)try{switch(et.tag){case 0:case 11:case 15:Rj(9,et)}}catch(xn){W$1(et,et.return,xn)}if(et===d){V$2=null;break e}var vn=et.sibling;if(vn!==null){vn.return=et.return,V$2=vn;break e}V$2=et.return}}if(K$2=c,jg(),lc$2&&typeof lc$2.onPostCommitFiberRoot=="function")try{lc$2.onPostCommitFiberRoot(kc$2,e)}catch{}o=!0}return o}finally{C=a,pk.transition=i}}return!1}function Yk(e,i,a){i=Ki$2(a,i),i=Oi$2(e,i,1),e=dh$1(e,i,1),i=L$2(),e!==null&&(Ac$2(e,1,i),Ek(e,i))}function W$1(e,i,a){if(e.tag===3)Yk(e,e,a);else for(;i!==null;){if(i.tag===3){Yk(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(o))){e=Ki$2(a,e),e=Ri$2(i,e,1),i=dh$1(i,e,1),e=L$2(),i!==null&&(Ac$2(i,1,e),Ek(i,e));break}}i=i.return}}function Ui$2(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),i=L$2(),e.pingedLanes|=e.suspendedLanes&a,R$1===e&&(Z$2&a)===a&&(T===4||T===3&&(Z$2&130023424)===Z$2&&500>B$2()-gk?Lk(e,0):sk|=a),Ek(e,i)}function Zk(e,i){i===0&&(e.mode&1?(i=sc$2,sc$2<<=1,!(sc$2&130023424)&&(sc$2=4194304)):i=1);var a=L$2();e=Zg(e,i),e!==null&&(Ac$2(e,i,a),Ek(e,a))}function vj(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Zk(e,a)}function ck(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(p(314))}o!==null&&o.delete(i),Zk(e,a)}var Wk;Wk=function(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps||Wf$1.current)Ug=!0;else{if(!(e.lanes&a)&&!(i.flags&128))return Ug=!1,zj(e,i,a);Ug=!!(e.flags&131072)}else Ug=!1,I$1&&i.flags&1048576&&ug$1(i,ng$1,i.index);switch(i.lanes=0,i.tag){case 2:var o=i.type;jj(e,i),e=i.pendingProps;var c=Yf$1(i,H$1.current);Tg$1(i,a),c=Xh$1(null,i,o,e,c,a);var s=bi$1();return i.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Zf$1(o)?(s=!0,cg$1(i)):s=!1,i.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,ah(i),c.updater=nh$1,i.stateNode=c,c._reactInternals=i,rh$1(i,o,e,a),i=kj(null,i,o,!0,s,a)):(i.tag=0,I$1&&s&&vg$1(i),Yi$2(null,i,c,a),i=i.child),i;case 16:o=i.elementType;e:{switch(jj(e,i),e=i.pendingProps,c=o._init,o=c(o._payload),i.type=o,c=i.tag=$k(o),e=Lg(o,e),c){case 0:i=dj(null,i,o,e,a);break e;case 1:i=ij(null,i,o,e,a);break e;case 11:i=Zi$2(null,i,o,e,a);break e;case 14:i=aj(null,i,o,Lg(o.type,e),a);break e}throw Error(p(306,o,""))}return i;case 0:return o=i.type,c=i.pendingProps,c=i.elementType===o?c:Lg(o,c),dj(e,i,o,c,a);case 1:return o=i.type,c=i.pendingProps,c=i.elementType===o?c:Lg(o,c),ij(e,i,o,c,a);case 3:e:{if(lj(i),e===null)throw Error(p(387));o=i.pendingProps,s=i.memoizedState,c=s.element,bh$1(e,i),gh$1(i,o,null,a);var d=i.memoizedState;if(o=d.element,s.isDehydrated)if(s={element:o,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},i.updateQueue.baseState=s,i.memoizedState=s,i.flags&256){c=Ki$2(Error(p(423)),i),i=mj(e,i,o,a,c);break e}else if(o!==c){c=Ki$2(Error(p(424)),i),i=mj(e,i,o,a,c);break e}else for(yg=Lf$1(i.stateNode.containerInfo.firstChild),xg$1=i,I$1=!0,zg=null,a=Ch$1(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ig(),o===c){i=$i$1(e,i,a);break e}Yi$2(e,i,o,a)}i=i.child}return i;case 5:return Kh$1(i),e===null&&Eg(i),o=i.type,c=i.pendingProps,s=e!==null?e.memoizedProps:null,d=c.children,Ef$1(o,c)?d=null:s!==null&&Ef$1(o,s)&&(i.flags|=32),hj(e,i),Yi$2(e,i,d,a),i.child;case 6:return e===null&&Eg(i),null;case 13:return pj(e,i,a);case 4:return Ih(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Bh$1(i,null,o,a):Yi$2(e,i,o,a),i.child;case 11:return o=i.type,c=i.pendingProps,c=i.elementType===o?c:Lg(o,c),Zi$2(e,i,o,c,a);case 7:return Yi$2(e,i,i.pendingProps,a),i.child;case 8:return Yi$2(e,i,i.pendingProps.children,a),i.child;case 12:return Yi$2(e,i,i.pendingProps.children,a),i.child;case 10:e:{if(o=i.type._context,c=i.pendingProps,s=i.memoizedProps,d=c.value,G$1(Mg,o._currentValue),o._currentValue=d,s!==null)if(He(s.value,d)){if(s.children===c.children&&!Wf$1.current){i=$i$1(e,i,a);break e}}else for(s=i.child,s!==null&&(s.return=i);s!==null;){var et=s.dependencies;if(et!==null){d=s.child;for(var $t=et.firstContext;$t!==null;){if($t.context===o){if(s.tag===1){$t=ch$1(-1,a&-a),$t.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var b=h.pending;b===null?$t.next=$t:($t.next=b.next,b.next=$t),h.pending=$t}}s.lanes|=a,$t=s.alternate,$t!==null&&($t.lanes|=a),Sg(s.return,a,i),et.lanes|=a;break}$t=$t.next}}else if(s.tag===10)d=s.type===i.type?null:s.child;else if(s.tag===18){if(d=s.return,d===null)throw Error(p(341));d.lanes|=a,et=d.alternate,et!==null&&(et.lanes|=a),Sg(d,a,i),d=s.sibling}else d=s.child;if(d!==null)d.return=s;else for(d=s;d!==null;){if(d===i){d=null;break}if(s=d.sibling,s!==null){s.return=d.return,d=s;break}d=d.return}s=d}Yi$2(e,i,c.children,a),i=i.child}return i;case 9:return c=i.type,o=i.pendingProps.children,Tg$1(i,a),c=Vg(c),o=o(c),i.flags|=1,Yi$2(e,i,o,a),i.child;case 14:return o=i.type,c=Lg(o,i.pendingProps),c=Lg(o.type,c),aj(e,i,o,c,a);case 15:return cj(e,i,i.type,i.pendingProps,a);case 17:return o=i.type,c=i.pendingProps,c=i.elementType===o?c:Lg(o,c),jj(e,i),i.tag=1,Zf$1(o)?(e=!0,cg$1(i)):e=!1,Tg$1(i,a),ph$1(i,o,c),rh$1(i,o,c,a),kj(null,i,o,!0,e,a);case 19:return yj(e,i,a);case 22:return ej(e,i,a)}throw Error(p(156,i.tag))};function Gk(e,i){return ac$2(e,i)}function al$2(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,i,a,o){return new al$2(e,i,a,o)}function bj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $k(e){if(typeof e=="function")return bj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da$1)return 11;if(e===Ga$1)return 14}return 2}function wh$1(e,i){var a=e.alternate;return a===null?(a=Bg(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function yh$1(e,i,a,o,c,s){var d=2;if(o=e,typeof e=="function")bj(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case ya$1:return Ah$1(a.children,c,s,i);case za$1:d=8,c|=8;break;case Aa$1:return e=Bg(12,a,i,c|2),e.elementType=Aa$1,e.lanes=s,e;case Ea$1:return e=Bg(13,a,i,c),e.elementType=Ea$1,e.lanes=s,e;case Fa$1:return e=Bg(19,a,i,c),e.elementType=Fa$1,e.lanes=s,e;case Ia$1:return qj(a,c,s,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba$1:d=10;break e;case Ca$1:d=9;break e;case Da$1:d=11;break e;case Ga$1:d=14;break e;case Ha$2:d=16,o=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return i=Bg(d,a,i,c),i.elementType=e,i.type=o,i.lanes=s,i}function Ah$1(e,i,a,o){return e=Bg(7,e,o,i),e.lanes=a,e}function qj(e,i,a,o){return e=Bg(22,e,o,i),e.elementType=Ia$1,e.lanes=a,e.stateNode={isHidden:!1},e}function xh$1(e,i,a){return e=Bg(6,e,null,i),e.lanes=a,e}function zh$1(e,i,a){return i=Bg(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function bl$2(e,i,a,o,c){this.tag=i,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$2(0),this.expirationTimes=zc$2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$2(0),this.identifierPrefix=o,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function cl$2(e,i,a,o,c,s,d,et,$t){return e=new bl$2(e,i,a,et,$t),i===1?(i=1,s===!0&&(i|=8)):i=0,s=Bg(3,null,null,i),e.current=s,s.stateNode=e,s.memoizedState={element:o,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(s),e}function dl$2(e,i,a){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:o==null?null:""+o,children:e,containerInfo:i,implementation:a}}function el$2(e){if(!e)return Vf$1;e=e._reactInternals;e:{if(Vb$1(e)!==e||e.tag!==1)throw Error(p(170));var i=e;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Zf$1(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(p(171))}if(e.tag===1){var a=e.type;if(Zf$1(a))return bg$1(e,a,i)}return i}function fl$2(e,i,a,o,c,s,d,et,$t){return e=cl$2(a,o,!0,e,c,s,d,et,$t),e.context=el$2(null),a=e.current,o=L$2(),c=lh$1(a),s=ch$1(o,c),s.callback=i??null,dh$1(a,s,c),e.current.lanes=c,Ac$2(e,c,o),Ek(e,o),e}function gl$2(e,i,a,o){var c=i.current,s=L$2(),d=lh$1(c);return a=el$2(a),i.context===null?i.context=a:i.pendingContext=a,i=ch$1(s,d),i.payload={element:e},o=o===void 0?null:o,o!==null&&(i.callback=o),e=dh$1(c,i,d),e!==null&&(mh$1(e,c,d,s),eh$1(e,c,d)),d}function hl$2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function il$2(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function jl$2(e,i){il$2(e,i),(e=e.alternate)&&il$2(e,i)}function kl$2(){return null}var ll$2=typeof reportError=="function"?reportError:function(e){console.error(e)};function ml$2(e){this._internalRoot=e}nl$2.prototype.render=ml$2.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(p(409));gl$2(e,i,null,null)};nl$2.prototype.unmount=ml$2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Sk(function(){gl$2(null,e,null,null)}),i[uf$2]=null}};function nl$2(e){this._internalRoot=e}nl$2.prototype.unstable_scheduleHydration=function(e){if(e){var i=Hc$2();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Qc$2.length&&i!==0&&i<Qc$2[a].priority;a++);Qc$2.splice(a,0,e),a===0&&Vc$2(e)}};function ol$2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pl$2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ql$2(){}function rl$2(e,i,a,o,c){if(c){if(typeof o=="function"){var s=o;o=function(){var h=hl$2(d);s.call(h)}}var d=fl$2(i,o,e,0,null,!1,!1,"",ql$2);return e._reactRootContainer=d,e[uf$2]=d.current,sf$2(e.nodeType===8?e.parentNode:e),Sk(),d}for(;c=e.lastChild;)e.removeChild(c);if(typeof o=="function"){var et=o;o=function(){var h=hl$2($t);et.call(h)}}var $t=cl$2(e,0,!1,null,null,!1,!1,"",ql$2);return e._reactRootContainer=$t,e[uf$2]=$t.current,sf$2(e.nodeType===8?e.parentNode:e),Sk(function(){gl$2(i,$t,a,o)}),$t}function sl$2(e,i,a,o,c){var s=a._reactRootContainer;if(s){var d=s;if(typeof c=="function"){var et=c;c=function(){var $t=hl$2(d);et.call($t)}}gl$2(i,d,e,c)}else d=rl$2(a,i,e,c,o);return hl$2(d)}Ec$2=function(e){switch(e.tag){case 3:var i=e.stateNode;if(i.current.memoizedState.isDehydrated){var a=tc$1(i.pendingLanes);a!==0&&(Cc$2(i,a|1),Ek(i,B$2()),!(K$2&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var o=Zg(e,1);if(o!==null){var c=L$2();mh$1(o,e,1,c)}}),jl$2(e,1)}};Fc$2=function(e){if(e.tag===13){var i=Zg(e,134217728);if(i!==null){var a=L$2();mh$1(i,e,134217728,a)}jl$2(e,134217728)}};Gc$2=function(e){if(e.tag===13){var i=lh$1(e),a=Zg(e,i);if(a!==null){var o=L$2();mh$1(a,e,i,o)}jl$2(e,i)}};Hc$2=function(){return C};Ic$2=function(e,i){var a=C;try{return C=e,i()}finally{C=a}};yb$1=function(e,i,a){switch(i){case"input":if(bb$1(e,a),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var c=Db$1(o);if(!c)throw Error(p(90));Wa$1(o),bb$1(o,c)}}}break;case"textarea":ib$1(e,a);break;case"select":i=a.value,i!=null&&fb$1(e,!!a.multiple,i,!1)}};Gb$1=Rk;Hb$1=Sk;var tl$2={usingClientEntryPoint:!1,Events:[Cb$1,ue,Db$1,Eb$1,Fb$1,Rk]},ul$2={findFiberByHostInstance:Wc$2,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl$2={bundleType:ul$2.bundleType,version:ul$2.version,rendererPackageName:ul$2.rendererPackageName,rendererConfig:ul$2.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$2.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb$1(e),e===null?null:e.stateNode},findFiberByHostInstance:ul$2.findFiberByHostInstance||kl$2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl$2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl$2.isDisabled&&wl$2.supportsFiber)try{kc$2=wl$2.inject(vl$2),lc$2=wl$2}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl$2;reactDom_production_min.createPortal=function(e,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol$2(i))throw Error(p(200));return dl$2(e,i,null,a)};reactDom_production_min.createRoot=function(e,i){if(!ol$2(e))throw Error(p(299));var a=!1,o="",c=ll$2;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onRecoverableError!==void 0&&(c=i.onRecoverableError)),i=cl$2(e,1,!1,null,null,a,!1,o,c),e[uf$2]=i.current,sf$2(e.nodeType===8?e.parentNode:e),new ml$2(i)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb$1(i),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Sk(e)};reactDom_production_min.hydrate=function(e,i,a){if(!pl$2(i))throw Error(p(200));return sl$2(null,e,i,!0,a)};reactDom_production_min.hydrateRoot=function(e,i,a){if(!ol$2(e))throw Error(p(405));var o=a!=null&&a.hydratedSources||null,c=!1,s="",d=ll$2;if(a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(s=a.identifierPrefix),a.onRecoverableError!==void 0&&(d=a.onRecoverableError)),i=fl$2(i,null,e,1,a??null,c,!1,s,d),e[uf$2]=i.current,sf$2(e),o)for(e=0;e<o.length;e++)a=o[e],c=a._getVersion,c=c(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,c]:i.mutableSourceEagerHydrationData.push(a,c);return new nl$2(i)};reactDom_production_min.render=function(e,i,a){if(!pl$2(i))throw Error(p(200));return sl$2(null,e,i,!1,a)};reactDom_production_min.unmountComponentAtNode=function(e){if(!pl$2(e))throw Error(p(40));return e._reactRootContainer?(Sk(function(){sl$2(null,null,e,!1,function(){e._reactRootContainer=null,e[uf$2]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,i,a,o){if(!pl$2(a))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return sl$2(e,i,a,!1,o)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const index="";function r(e){var i,a,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(i=0;i<c;i++)e[i]&&(a=r(e[i]))&&(o&&(o+=" "),o+=a)}else for(a in e)e[a]&&(o&&(o+=" "),o+=a);return o}function clsx(){for(var e,i,a=0,o="",c=arguments.length;a<c;a++)(e=arguments[a])&&(i=r(e))&&(o&&(o+=" "),o+=i);return o}function Mt$2(e){if(!e||typeof document>"u")return;let i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}Mt$2(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var L$1=e=>typeof e=="number"&&!isNaN(e),N=e=>typeof e=="string",P=e=>typeof e=="function",mt$1=e=>N(e)||L$1(e),B$1=e=>N(e)||P(e)?e:null,pt=(e,i)=>e===!1||L$1(e)&&e>0?e:i,z$1=e=>reactExports.isValidElement(e)||N(e)||P(e)||L$1(e);function Z$1(e,i,a=300){let{scrollHeight:o,style:c}=e;requestAnimationFrame(()=>{c.minHeight="initial",c.height=o+"px",c.transition=`all ${a}ms`,requestAnimationFrame(()=>{c.height="0",c.padding="0",c.margin="0",setTimeout(i,a)})})}function $({enter:e,exit:i,appendPosition:a=!1,collapse:o=!0,collapseDuration:c=300}){return function({children:s,position:d,preventExitTransition:et,done:$t,nodeRef:h,isIn:b,playToast:g}){let jt=a?`${e}--${d}`:e,Ht=a?`${i}--${d}`:i,Kt=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{let or=h.current,jr=jt.split(" "),Lr=ir=>{ir.target===h.current&&(g(),or.removeEventListener("animationend",Lr),or.removeEventListener("animationcancel",Lr),Kt.current===0&&ir.type!=="animationcancel"&&or.classList.remove(...jr))};or.classList.add(...jr),or.addEventListener("animationend",Lr),or.addEventListener("animationcancel",Lr)},[]),reactExports.useEffect(()=>{let or=h.current,jr=()=>{or.removeEventListener("animationend",jr),o?Z$1(or,$t,c):$t()};b||(et?jr():(Kt.current=1,or.className+=` ${Ht}`,or.addEventListener("animationend",jr)))},[b]),React.createElement(React.Fragment,null,s)}}function J(e,i){return{content:tt$1(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:i}}function tt$1(e,i,a=!1){return reactExports.isValidElement(e)&&!N(e.type)?reactExports.cloneElement(e,{closeToast:i.closeToast,toastProps:i,data:i.data,isPaused:a}):P(e)?e({closeToast:i.closeToast,toastProps:i,data:i.data,isPaused:a}):e}function yt$1({closeToast:e,theme:i,ariaLabel:a="close"}){return React.createElement("button",{className:`Toastify__close-button Toastify__close-button--${i}`,type:"button",onClick:o=>{o.stopPropagation(),e(!0)},"aria-label":a},React.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gt$2({delay:e,isRunning:i,closeToast:a,type:o="default",hide:c,className:s,controlledProgress:d,progress:et,rtl:$t,isIn:h,theme:b}){let g=c||d&&et===0,jt={animationDuration:`${e}ms`,animationPlayState:i?"running":"paused"};d&&(jt.transform=`scaleX(${et})`);let Ht=clsx("Toastify__progress-bar",d?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${b}`,`Toastify__progress-bar--${o}`,{"Toastify__progress-bar--rtl":$t}),Kt=P(s)?s({rtl:$t,type:o,defaultClassName:Ht}):clsx(Ht,s),or={[d&&et>=1?"onTransitionEnd":"onAnimationEnd"]:d&&et<1?null:()=>{h&&a()}};return React.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":g},React.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${b} Toastify__progress-bar--${o}`}),React.createElement("div",{role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:Kt,style:jt,...or}))}var Xt$2=1,at=()=>`${Xt$2++}`;function _t$1(e,i,a){let o=1,c=0,s=[],d=[],et=i,$t=new Map,h=new Set,b=ir=>(h.add(ir),()=>h.delete(ir)),g=()=>{d=Array.from($t.values()),h.forEach(ir=>ir())},jt=({containerId:ir,toastId:qr,updateId:vn})=>{let xn=ir?ir!==e:e!==1,No=$t.has(qr)&&vn==null;return xn||No},Ht=(ir,qr)=>{$t.forEach(vn=>{var xn;(qr==null||qr===vn.props.toastId)&&((xn=vn.toggle)==null||xn.call(vn,ir))})},Kt=ir=>{var qr,vn;(vn=(qr=ir.props)==null?void 0:qr.onClose)==null||vn.call(qr,ir.removalReason),ir.isActive=!1},or=ir=>{if(ir==null)$t.forEach(Kt);else{let qr=$t.get(ir);qr&&Kt(qr)}g()},jr=()=>{c-=s.length,s=[]},Lr=ir=>{var qr,vn;let{toastId:xn,updateId:No}=ir.props,Ro=No==null;ir.staleId&&$t.delete(ir.staleId),ir.isActive=!0,$t.set(xn,ir),g(),a(J(ir,Ro?"added":"updated")),Ro&&((vn=(qr=ir.props).onOpen)==null||vn.call(qr))};return{id:e,props:et,observe:b,toggle:Ht,removeToast:or,toasts:$t,clearQueue:jr,buildToast:(ir,qr)=>{if(jt(qr))return;let{toastId:vn,updateId:xn,data:No,staleId:Ro,delay:Xo}=qr,o0=xn==null;o0&&c++;let s0={...et,style:et.toastStyle,key:o++,...Object.fromEntries(Object.entries(qr).filter(([E0,C0])=>C0!=null)),toastId:vn,updateId:xn,data:No,isIn:!1,className:B$1(qr.className||et.toastClassName),progressClassName:B$1(qr.progressClassName||et.progressClassName),autoClose:qr.isLoading?!1:pt(qr.autoClose,et.autoClose),closeToast(E0){$t.get(vn).removalReason=E0,or(vn)},deleteToast(){let E0=$t.get(vn);if(E0!=null){if(a(J(E0,"removed")),$t.delete(vn),c--,c<0&&(c=0),s.length>0){Lr(s.shift());return}g()}}};s0.closeButton=et.closeButton,qr.closeButton===!1||z$1(qr.closeButton)?s0.closeButton=qr.closeButton:qr.closeButton===!0&&(s0.closeButton=z$1(et.closeButton)?et.closeButton:!0);let h0={content:ir,props:s0,staleId:Ro};et.limit&&et.limit>0&&c>et.limit&&o0?s.push(h0):L$1(Xo)?setTimeout(()=>{Lr(h0)},Xo):Lr(h0)},setProps(ir){et=ir},setToggle:(ir,qr)=>{let vn=$t.get(ir);vn&&(vn.toggle=qr)},isToastActive:ir=>{var qr;return(qr=$t.get(ir))==null?void 0:qr.isActive},getSnapshot:()=>d}}var I=new Map,F=[],st=new Set,Vt$1=e=>st.forEach(i=>i(e)),bt$1=()=>I.size>0;function Qt$1(){F.forEach(e=>nt$2(e.content,e.options)),F=[]}var vt=(e,{containerId:i})=>{var a;return(a=I.get(i||1))==null?void 0:a.toasts.get(e)};function X$1(e,i){var a;if(i)return!!((a=I.get(i))!=null&&a.isToastActive(e));let o=!1;return I.forEach(c=>{c.isToastActive(e)&&(o=!0)}),o}function ht$1(e){if(!bt$1()){F=F.filter(i=>e!=null&&i.options.toastId!==e);return}if(e==null||mt$1(e))I.forEach(i=>{i.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let i=I.get(e.containerId);i?i.removeToast(e.id):I.forEach(a=>{a.removeToast(e.id)})}}var Ct=(e={})=>{I.forEach(i=>{i.props.limit&&(!e.containerId||i.id===e.containerId)&&i.clearQueue()})};function nt$2(e,i){z$1(e)&&(bt$1()||F.push({content:e,options:i}),I.forEach(a=>{a.buildToast(e,i)}))}function xt$1(e){var i;(i=I.get(e.containerId||1))==null||i.setToggle(e.id,e.fn)}function rt$1(e,i){I.forEach(a=>{(i==null||!(i!=null&&i.containerId)||(i==null?void 0:i.containerId)===a.id)&&a.toggle(e,i==null?void 0:i.id)})}function Et$1(e){let i=e.containerId||1;return{subscribe(a){let o=_t$1(i,e,Vt$1);I.set(i,o);let c=o.observe(a);return Qt$1(),()=>{c(),I.delete(i)}},setProps(a){var o;(o=I.get(i))==null||o.setProps(a)},getSnapshot(){var a;return(a=I.get(i))==null?void 0:a.getSnapshot()}}}function Pt$1(e){return st.add(e),()=>{st.delete(e)}}function Wt$2(e){return e&&(N(e.toastId)||L$1(e.toastId))?e.toastId:at()}function U$2(e,i){return nt$2(e,i),i.toastId}function V$1(e,i){return{...i,type:i&&i.type||e,toastId:Wt$2(i)}}function Q$1(e){return(i,a)=>U$2(i,V$1(e,a))}function y(e,i){return U$2(e,V$1("default",i))}y.loading=(e,i)=>U$2(e,V$1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...i}));function Gt(e,{pending:i,error:a,success:o},c){let s;i&&(s=N(i)?y.loading(i,c):y.loading(i.render,{...c,...i}));let d={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},et=(h,b,g)=>{if(b==null){y.dismiss(s);return}let jt={type:h,...d,...c,data:g},Ht=N(b)?{render:b}:b;return s?y.update(s,{...jt,...Ht}):y(Ht.render,{...jt,...Ht}),g},$t=P(e)?e():e;return $t.then(h=>et("success",o,h)).catch(h=>et("error",a,h)),$t}y.promise=Gt;y.success=Q$1("success");y.info=Q$1("info");y.error=Q$1("error");y.warning=Q$1("warning");y.warn=y.warning;y.dark=(e,i)=>U$2(e,V$1("default",{theme:"dark",...i}));function qt(e){ht$1(e)}y.dismiss=qt;y.clearWaitingQueue=Ct;y.isActive=X$1;y.update=(e,i={})=>{let a=vt(e,i);if(a){let{props:o,content:c}=a,s={delay:100,...o,...i,toastId:i.toastId||e,updateId:at()};s.toastId!==e&&(s.staleId=e);let d=s.render||c;delete s.render,U$2(d,s)}};y.done=e=>{y.update(e,{progress:1})};y.onChange=Pt$1;y.play=e=>rt$1(!0,e);y.pause=e=>rt$1(!1,e);function It$1(e){var i;let{subscribe:a,getSnapshot:o,setProps:c}=reactExports.useRef(Et$1(e)).current;c(e);let s=(i=reactExports.useSyncExternalStore(a,o,o))==null?void 0:i.slice();function d(et){if(!s)return[];let $t=new Map;return e.newestOnTop&&s.reverse(),s.forEach(h=>{let{position:b}=h.props;$t.has(b)||$t.set(b,[]),$t.get(b).push(h)}),Array.from($t,h=>et(h[0],h[1]))}return{getToastToRender:d,isToastActive:X$1,count:s==null?void 0:s.length}}function At$1(e){let[i,a]=reactExports.useState(!1),[o,c]=reactExports.useState(!1),s=reactExports.useRef(null),d=reactExports.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:et,pauseOnHover:$t,closeToast:h,onClick:b,closeOnClick:g}=e;xt$1({id:e.toastId,containerId:e.containerId,fn:a}),reactExports.useEffect(()=>{if(e.pauseOnFocusLoss)return jt(),()=>{Ht()}},[e.pauseOnFocusLoss]);function jt(){document.hasFocus()||Lr(),window.addEventListener("focus",jr),window.addEventListener("blur",Lr)}function Ht(){window.removeEventListener("focus",jr),window.removeEventListener("blur",Lr)}function Kt(Ro){if(e.draggable===!0||e.draggable===Ro.pointerType){ir();let Xo=s.current;d.canCloseOnClick=!0,d.canDrag=!0,Xo.style.transition="none",e.draggableDirection==="x"?(d.start=Ro.clientX,d.removalDistance=Xo.offsetWidth*(e.draggablePercent/100)):(d.start=Ro.clientY,d.removalDistance=Xo.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function or(Ro){let{top:Xo,bottom:o0,left:s0,right:h0}=s.current.getBoundingClientRect();Ro.nativeEvent.type!=="touchend"&&e.pauseOnHover&&Ro.clientX>=s0&&Ro.clientX<=h0&&Ro.clientY>=Xo&&Ro.clientY<=o0?Lr():jr()}function jr(){a(!0)}function Lr(){a(!1)}function ir(){d.didMove=!1,document.addEventListener("pointermove",vn),document.addEventListener("pointerup",xn)}function qr(){document.removeEventListener("pointermove",vn),document.removeEventListener("pointerup",xn)}function vn(Ro){let Xo=s.current;if(d.canDrag&&Xo){d.didMove=!0,i&&Lr(),e.draggableDirection==="x"?d.delta=Ro.clientX-d.start:d.delta=Ro.clientY-d.start,d.start!==Ro.clientX&&(d.canCloseOnClick=!1);let o0=e.draggableDirection==="x"?`${d.delta}px, var(--y)`:`0, calc(${d.delta}px + var(--y))`;Xo.style.transform=`translate3d(${o0},0)`,Xo.style.opacity=`${1-Math.abs(d.delta/d.removalDistance)}`}}function xn(){qr();let Ro=s.current;if(d.canDrag&&d.didMove&&Ro){if(d.canDrag=!1,Math.abs(d.delta)>d.removalDistance){c(!0),e.closeToast(!0),e.collapseAll();return}Ro.style.transition="transform 0.2s, opacity 0.2s",Ro.style.removeProperty("transform"),Ro.style.removeProperty("opacity")}}let No={onPointerDown:Kt,onPointerUp:or};return et&&$t&&(No.onMouseEnter=Lr,e.stacked||(No.onMouseLeave=jr)),g&&(No.onClick=Ro=>{b&&b(Ro),d.canCloseOnClick&&h(!0)}),{playToast:jr,pauseToast:Lr,isRunning:i,preventExitTransition:o,toastRef:s,eventHandlers:No}}var Ot$2=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,G=({theme:e,type:i,isLoading:a,...o})=>React.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${i})`,...o});function ao$2(e){return React.createElement(G,{...e},React.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function so$2(e){return React.createElement(G,{...e},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function no$2(e){return React.createElement(G,{...e},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ro$2(e){return React.createElement(G,{...e},React.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function io$2(){return React.createElement("div",{className:"Toastify__spinner"})}var W={info:so$2,warning:ao$2,success:no$2,error:ro$2,spinner:io$2},lo$2=e=>e in W;function Nt$1({theme:e,type:i,isLoading:a,icon:o}){let c=null,s={theme:e,type:i};return o===!1||(P(o)?c=o({...s,isLoading:a}):reactExports.isValidElement(o)?c=reactExports.cloneElement(o,s):a?c=W.spinner():lo$2(i)&&(c=W[i](s))),c}var wt=e=>{let{isRunning:i,preventExitTransition:a,toastRef:o,eventHandlers:c,playToast:s}=At$1(e),{closeButton:d,children:et,autoClose:$t,onClick:h,type:b,hideProgressBar:g,closeToast:jt,transition:Ht,position:Kt,className:or,style:jr,progressClassName:Lr,updateId:ir,role:qr,progress:vn,rtl:xn,toastId:No,deleteToast:Ro,isIn:Xo,isLoading:o0,closeOnClick:s0,theme:h0,ariaLabel:E0}=e,C0=clsx("Toastify__toast",`Toastify__toast-theme--${h0}`,`Toastify__toast--${b}`,{"Toastify__toast--rtl":xn},{"Toastify__toast--close-on-click":s0}),D0=P(or)?or({rtl:xn,position:Kt,type:b,defaultClassName:C0}):clsx(C0,or),N0=Nt$1(e),e0=!!vn||!$t,l0={closeToast:jt,type:b,theme:h0},Uo=null;return d===!1||(P(d)?Uo=d(l0):reactExports.isValidElement(d)?Uo=reactExports.cloneElement(d,l0):Uo=yt$1(l0)),React.createElement(Ht,{isIn:Xo,done:Ro,position:Kt,preventExitTransition:a,nodeRef:o,playToast:s},React.createElement("div",{id:No,tabIndex:0,onClick:h,"data-in":Xo,className:D0,...c,style:jr,ref:o,...Xo&&{role:qr,"aria-label":E0}},N0!=null&&React.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!o0})},N0),tt$1(et,e,!i),Uo,!e.customProgressBar&&React.createElement(gt$2,{...ir&&!e0?{key:`p-${ir}`}:{},rtl:xn,theme:h0,delay:$t,isRunning:i,isIn:Xo,closeToast:jt,hide:g,type:b,className:Lr,controlledProgress:e0,progress:vn||0})))},K$1=(e,i=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:i}),lt$2=$(K$1("bounce",!0)),_o$2={position:"top-right",transition:lt$2,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function Lt(e){let i={..._o$2,...e},a=e.stacked,[o,c]=reactExports.useState(!0),s=reactExports.useRef(null),{getToastToRender:d,isToastActive:et,count:$t}=It$1(i),{className:h,style:b,rtl:g,containerId:jt,hotKeys:Ht}=i;function Kt(jr){let Lr=clsx("Toastify__toast-container",`Toastify__toast-container--${jr}`,{"Toastify__toast-container--rtl":g});return P(h)?h({position:jr,rtl:g,defaultClassName:Lr}):clsx(Lr,B$1(h))}function or(){a&&(c(!0),y.play())}return Ot$2(()=>{var jr;if(a){let Lr=s.current.querySelectorAll('[data-in="true"]'),ir=12,qr=(jr=i.position)==null?void 0:jr.includes("top"),vn=0,xn=0;Array.from(Lr).reverse().forEach((No,Ro)=>{let Xo=No;Xo.classList.add("Toastify__toast--stacked"),Ro>0&&(Xo.dataset.collapsed=`${o}`),Xo.dataset.pos||(Xo.dataset.pos=qr?"top":"bot");let o0=vn*(o?.2:1)+(o?0:ir*Ro);Xo.style.setProperty("--y",`${qr?o0:o0*-1}px`),Xo.style.setProperty("--g",`${ir}`),Xo.style.setProperty("--s",`${1-(o?xn:0)}`),vn+=Xo.offsetHeight,xn+=.025})}},[o,$t,a]),reactExports.useEffect(()=>{function jr(Lr){var ir;let qr=s.current;Ht(Lr)&&((ir=qr.querySelector('[tabIndex="0"]'))==null||ir.focus(),c(!1),y.pause()),Lr.key==="Escape"&&(document.activeElement===qr||qr!=null&&qr.contains(document.activeElement))&&(c(!0),y.play())}return document.addEventListener("keydown",jr),()=>{document.removeEventListener("keydown",jr)}},[Ht]),React.createElement("section",{ref:s,className:"Toastify",id:jt,onMouseEnter:()=>{a&&(c(!1),y.pause())},onMouseLeave:or,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":i["aria-label"]},d((jr,Lr)=>{let ir=Lr.length?{...b}:{...b,pointerEvents:"none"};return React.createElement("div",{tabIndex:-1,className:Kt(jr),"data-stacked":a,style:ir,key:`c-${jr}`},Lr.map(({content:qr,props:vn})=>React.createElement(wt,{...vn,stacked:a,collapseAll:or,isIn:et(vn.toastId,vn.containerId),key:`t-${vn.key}`},qr)))}))}/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},_extends$2.apply(this,arguments)}var Action;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createHashHistory(e){e===void 0&&(e={});function i(c,s){let{pathname:d="/",search:et="",hash:$t=""}=parsePath(c.location.hash.substr(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),createLocation("",{pathname:d,search:et,hash:$t},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function a(c,s){let d=c.document.querySelector("base"),et="";if(d&&d.getAttribute("href")){let $t=c.location.href,h=$t.indexOf("#");et=h===-1?$t:$t.slice(0,h)}return et+"#"+(typeof s=="string"?s:createPath(s))}function o(c,s){warning(c.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return getUrlBasedHistory(i,a,o,e)}function invariant(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function warning(e,i){if(!e){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(e,i){return{usr:e.state,key:e.key,idx:i}}function createLocation(e,i,a,o){return a===void 0&&(a=null),_extends$2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof i=="string"?parsePath(i):i,{state:a,key:i&&i.key||o||createKey()})}function createPath(e){let{pathname:i="/",search:a="",hash:o=""}=e;return a&&a!=="?"&&(i+=a.charAt(0)==="?"?a:"?"+a),o&&o!=="#"&&(i+=o.charAt(0)==="#"?o:"#"+o),i}function parsePath(e){let i={};if(e){let a=e.indexOf("#");a>=0&&(i.hash=e.substr(a),e=e.substr(0,a));let o=e.indexOf("?");o>=0&&(i.search=e.substr(o),e=e.substr(0,o)),e&&(i.pathname=e)}return i}function getUrlBasedHistory(e,i,a,o){o===void 0&&(o={});let{window:c=document.defaultView,v5Compat:s=!1}=o,d=c.history,et=Action.Pop,$t=null,h=b();h==null&&(h=0,d.replaceState(_extends$2({},d.state,{idx:h}),""));function b(){return(d.state||{idx:null}).idx}function g(){et=Action.Pop;let jr=b(),Lr=jr==null?null:jr-h;h=jr,$t&&$t({action:et,location:or.location,delta:Lr})}function jt(jr,Lr){et=Action.Push;let ir=createLocation(or.location,jr,Lr);a&&a(ir,jr),h=b()+1;let qr=getHistoryState(ir,h),vn=or.createHref(ir);try{d.pushState(qr,"",vn)}catch(xn){if(xn instanceof DOMException&&xn.name==="DataCloneError")throw xn;c.location.assign(vn)}s&&$t&&$t({action:et,location:or.location,delta:1})}function Ht(jr,Lr){et=Action.Replace;let ir=createLocation(or.location,jr,Lr);a&&a(ir,jr),h=b();let qr=getHistoryState(ir,h),vn=or.createHref(ir);d.replaceState(qr,"",vn),s&&$t&&$t({action:et,location:or.location,delta:0})}function Kt(jr){let Lr=c.location.origin!=="null"?c.location.origin:c.location.href,ir=typeof jr=="string"?jr:createPath(jr);return invariant(Lr,"No window.location.(origin|href) available to create URL for href: "+ir),new URL(ir,Lr)}let or={get action(){return et},get location(){return e(c,d)},listen(jr){if($t)throw new Error("A history only accepts one active listener");return c.addEventListener(PopStateEventType,g),$t=jr,()=>{c.removeEventListener(PopStateEventType,g),$t=null}},createHref(jr){return i(c,jr)},createURL:Kt,encodeLocation(jr){let Lr=Kt(jr);return{pathname:Lr.pathname,search:Lr.search,hash:Lr.hash}},push:jt,replace:Ht,go(jr){return d.go(jr)}};return or}var ResultType;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ResultType||(ResultType={}));function matchRoutes(e,i,a){a===void 0&&(a="/");let o=typeof i=="string"?parsePath(i):i,c=stripBasename(o.pathname||"/",a);if(c==null)return null;let s=flattenRoutes(e);rankRouteBranches(s);let d=null;for(let et=0;d==null&&et<s.length;++et)d=matchRouteBranch(s[et],safelyDecodeURI(c));return d}function flattenRoutes(e,i,a,o){i===void 0&&(i=[]),a===void 0&&(a=[]),o===void 0&&(o="");let c=(s,d,et)=>{let $t={relativePath:et===void 0?s.path||"":et,caseSensitive:s.caseSensitive===!0,childrenIndex:d,route:s};$t.relativePath.startsWith("/")&&(invariant($t.relativePath.startsWith(o),'Absolute route path "'+$t.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),$t.relativePath=$t.relativePath.slice(o.length));let h=joinPaths([o,$t.relativePath]),b=a.concat($t);s.children&&s.children.length>0&&(invariant(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),flattenRoutes(s.children,i,b,h)),!(s.path==null&&!s.index)&&i.push({path:h,score:computeScore(h,s.index),routesMeta:b})};return e.forEach((s,d)=>{var et;if(s.path===""||!((et=s.path)!=null&&et.includes("?")))c(s,d);else for(let $t of explodeOptionalSegments(s.path))c(s,d,$t)}),i}function explodeOptionalSegments(e){let i=e.split("/");if(i.length===0)return[];let[a,...o]=i,c=a.endsWith("?"),s=a.replace(/\?$/,"");if(o.length===0)return c?[s,""]:[s];let d=explodeOptionalSegments(o.join("/")),et=[];return et.push(...d.map($t=>$t===""?s:[s,$t].join("/"))),c&&et.push(...d),et.map($t=>e.startsWith("/")&&$t===""?"/":$t)}function rankRouteBranches(e){e.sort((i,a)=>i.score!==a.score?a.score-i.score:compareIndexes(i.routesMeta.map(o=>o.childrenIndex),a.routesMeta.map(o=>o.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,i){let a=e.split("/"),o=a.length;return a.some(isSplat)&&(o+=splatPenalty),i&&(o+=indexRouteValue),a.filter(c=>!isSplat(c)).reduce((c,s)=>c+(paramRe.test(s)?dynamicSegmentValue:s===""?emptySegmentValue:staticSegmentValue),o)}function compareIndexes(e,i){return e.length===i.length&&e.slice(0,-1).every((o,c)=>o===i[c])?e[e.length-1]-i[i.length-1]:0}function matchRouteBranch(e,i){let{routesMeta:a}=e,o={},c="/",s=[];for(let d=0;d<a.length;++d){let et=a[d],$t=d===a.length-1,h=c==="/"?i:i.slice(c.length)||"/",b=matchPath({path:et.relativePath,caseSensitive:et.caseSensitive,end:$t},h);if(!b)return null;Object.assign(o,b.params);let g=et.route;s.push({params:o,pathname:joinPaths([c,b.pathname]),pathnameBase:normalizePathname(joinPaths([c,b.pathnameBase])),route:g}),b.pathnameBase!=="/"&&(c=joinPaths([c,b.pathnameBase]))}return s}function matchPath(e,i){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,o]=compilePath(e.path,e.caseSensitive,e.end),c=i.match(a);if(!c)return null;let s=c[0],d=s.replace(/(.)\/+$/,"$1"),et=c.slice(1);return{params:o.reduce((h,b,g)=>{if(b==="*"){let jt=et[g]||"";d=s.slice(0,s.length-jt.length).replace(/(.)\/+$/,"$1")}return h[b]=safelyDecodeURIComponent(et[g]||"",b),h},{}),pathname:s,pathnameBase:d,pattern:e}}function compilePath(e,i,a){i===void 0&&(i=!1),a===void 0&&(a=!0),warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(d,et)=>(o.push(et),"/([^\\/]+)"));return e.endsWith("*")?(o.push("*"),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,i?void 0:"i"),o]}function safelyDecodeURI(e){try{return decodeURI(e)}catch(i){return warning(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),e}}function safelyDecodeURIComponent(e,i){try{return decodeURIComponent(e)}catch(a){return warning(!1,'The value for the URL param "'+i+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+a+").")),e}}function stripBasename(e,i){if(i==="/")return e;if(!e.toLowerCase().startsWith(i.toLowerCase()))return null;let a=i.endsWith("/")?i.length-1:i.length,o=e.charAt(a);return o&&o!=="/"?null:e.slice(a)||"/"}function resolvePath(e,i){i===void 0&&(i="/");let{pathname:a,search:o="",hash:c=""}=typeof e=="string"?parsePath(e):e;return{pathname:a?a.startsWith("/")?a:resolvePathname(a,i):i,search:normalizeSearch(o),hash:normalizeHash(c)}}function resolvePathname(e,i){let a=i.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?a.length>1&&a.pop():c!=="."&&a.push(c)}),a.length>1?a.join("/"):"/"}function getInvalidPathError(e,i,a,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(e){return e.filter((i,a)=>a===0||i.route.path&&i.route.path.length>0)}function resolveTo(e,i,a,o){o===void 0&&(o=!1);let c;typeof e=="string"?c=parsePath(e):(c=_extends$2({},e),invariant(!c.pathname||!c.pathname.includes("?"),getInvalidPathError("?","pathname","search",c)),invariant(!c.pathname||!c.pathname.includes("#"),getInvalidPathError("#","pathname","hash",c)),invariant(!c.search||!c.search.includes("#"),getInvalidPathError("#","search","hash",c)));let s=e===""||c.pathname==="",d=s?"/":c.pathname,et;if(o||d==null)et=a;else{let g=i.length-1;if(d.startsWith("..")){let jt=d.split("/");for(;jt[0]==="..";)jt.shift(),g-=1;c.pathname=jt.join("/")}et=g>=0?i[g]:"/"}let $t=resolvePath(c,et),h=d&&d!=="/"&&d.endsWith("/"),b=(s||d===".")&&a.endsWith("/");return!$t.pathname.endsWith("/")&&(h||b)&&($t.pathname+="/"),$t}const joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext$1=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(e,i){let{relative:a}=i===void 0?{}:i;useInRouterContext()||invariant(!1);let{basename:o,navigator:c}=reactExports.useContext(NavigationContext$1),{hash:s,pathname:d,search:et}=useResolvedPath(e,{relative:a}),$t=d;return o!=="/"&&($t=d==="/"?o:joinPaths([o,d])),c.createHref({pathname:$t,search:et,hash:s})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$1(e){reactExports.useContext(NavigationContext$1).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let e=reactExports.useContext(DataRouterContext),{basename:i,navigator:a}=reactExports.useContext(NavigationContext$1),{matches:o}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),s=JSON.stringify(getPathContributingMatches(o).map($t=>$t.pathnameBase)),d=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{d.current=!0}),reactExports.useCallback(function($t,h){if(h===void 0&&(h={}),!d.current)return;if(typeof $t=="number"){a.go($t);return}let b=resolveTo($t,JSON.parse(s),c,h.relative==="path");e==null&&i!=="/"&&(b.pathname=b.pathname==="/"?i:joinPaths([i,b.pathname])),(h.replace?a.replace:a.push)(b,h.state,h)},[i,a,s,c,e])}function useParams(){let{matches:e}=reactExports.useContext(RouteContext),i=e[e.length-1];return i?i.params:{}}function useResolvedPath(e,i){let{relative:a}=i===void 0?{}:i,{matches:o}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),s=JSON.stringify(getPathContributingMatches(o).map(d=>d.pathnameBase));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(s),c,a==="path"),[e,s,c,a])}function useRoutes(e,i){return useRoutesImpl(e,i)}function useRoutesImpl(e,i,a){useInRouterContext()||invariant(!1);let{navigator:o}=reactExports.useContext(NavigationContext$1),{matches:c}=reactExports.useContext(RouteContext),s=c[c.length-1],d=s?s.params:{};s&&s.pathname;let et=s?s.pathnameBase:"/";s&&s.route;let $t=useLocation(),h;if(i){var b;let or=typeof i=="string"?parsePath(i):i;et==="/"||(b=or.pathname)!=null&&b.startsWith(et)||invariant(!1),h=or}else h=$t;let g=h.pathname||"/",jt=et==="/"?g:g.slice(et.length)||"/",Ht=matchRoutes(e,{pathname:jt}),Kt=_renderMatches(Ht&&Ht.map(or=>Object.assign({},or,{params:Object.assign({},d,or.params),pathname:joinPaths([et,o.encodeLocation?o.encodeLocation(or.pathname).pathname:or.pathname]),pathnameBase:or.pathnameBase==="/"?et:joinPaths([et,o.encodeLocation?o.encodeLocation(or.pathnameBase).pathname:or.pathnameBase])})),c,a);return i&&Kt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Action.Pop}},Kt):Kt}function DefaultErrorComponent(){let e=useRouteError(),i=isRouteErrorResponse(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},i),a?reactExports.createElement("pre",{style:c},a):null,s)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,a){return a.location!==i.location||a.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error||a.error,location:a.location,revalidation:i.revalidation||a.revalidation}}componentDidCatch(i,a){console.error("React Router caught the following error during render",i,a)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(e){let{routeContext:i,match:a,children:o}=e,c=reactExports.useContext(DataRouterContext);return c&&c.static&&c.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=a.route.id),reactExports.createElement(RouteContext.Provider,{value:i},o)}function _renderMatches(e,i,a){var o;if(i===void 0&&(i=[]),a===void 0&&(a=null),e==null){var c;if((c=a)!=null&&c.errors)e=a.matches;else return null}let s=e,d=(o=a)==null?void 0:o.errors;if(d!=null){let et=s.findIndex($t=>$t.route.id&&(d==null?void 0:d[$t.route.id]));et>=0||invariant(!1),s=s.slice(0,Math.min(s.length,et+1))}return s.reduceRight((et,$t,h)=>{let b=$t.route.id?d==null?void 0:d[$t.route.id]:null,g=null;a&&(g=$t.route.errorElement||defaultErrorElement);let jt=i.concat(s.slice(0,h+1)),Ht=()=>{let Kt;return b?Kt=g:$t.route.Component?Kt=reactExports.createElement($t.route.Component,null):$t.route.element?Kt=$t.route.element:Kt=et,reactExports.createElement(RenderedRoute,{match:$t,routeContext:{outlet:et,matches:jt,isDataRoute:a!=null},children:Kt})};return a&&($t.route.ErrorBoundary||$t.route.errorElement||h===0)?reactExports.createElement(RenderErrorBoundary,{location:a.location,revalidation:a.revalidation,component:g,error:b,children:Ht(),routeContext:{outlet:null,matches:jt,isDataRoute:!0}}):Ht()},null)}var DataRouterHook$1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(DataRouterHook$1||{}),DataRouterStateHook$1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(DataRouterStateHook$1||{});function useDataRouterContext(e){let i=reactExports.useContext(DataRouterContext);return i||invariant(!1),i}function useDataRouterState(e){let i=reactExports.useContext(DataRouterStateContext);return i||invariant(!1),i}function useRouteContext(e){let i=reactExports.useContext(RouteContext);return i||invariant(!1),i}function useCurrentRouteId(e){let i=useRouteContext(),a=i.matches[i.matches.length-1];return a.route.id||invariant(!1),a.route.id}function useRouteError(){var e;let i=reactExports.useContext(RouteErrorContext),a=useDataRouterState(DataRouterStateHook$1.UseRouteError),o=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return i||((e=a.errors)==null?void 0:e[o])}function useNavigateStable(){let{router:e}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),i=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),a=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{a.current=!0}),reactExports.useCallback(function(c,s){s===void 0&&(s={}),a.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,_extends$1({fromRouteId:i},s)))},[e,i])}function Navigate(e){let{to:i,replace:a,state:o,relative:c}=e;useInRouterContext()||invariant(!1);let{matches:s}=reactExports.useContext(RouteContext),{pathname:d}=useLocation(),et=useNavigate(),$t=resolveTo(i,getPathContributingMatches(s).map(b=>b.pathnameBase),d,c==="path"),h=JSON.stringify($t);return reactExports.useEffect(()=>et(JSON.parse(h),{replace:a,state:o,relative:c}),[et,h,c,a,o]),null}function Route(e){invariant(!1)}function Router(e){let{basename:i="/",children:a=null,location:o,navigationType:c=Action.Pop,navigator:s,static:d=!1}=e;useInRouterContext()&&invariant(!1);let et=i.replace(/^\/*/,"/"),$t=reactExports.useMemo(()=>({basename:et,navigator:s,static:d}),[et,s,d]);typeof o=="string"&&(o=parsePath(o));let{pathname:h="/",search:b="",hash:g="",state:jt=null,key:Ht="default"}=o,Kt=reactExports.useMemo(()=>{let or=stripBasename(h,et);return or==null?null:{location:{pathname:or,search:b,hash:g,state:jt,key:Ht},navigationType:c}},[et,h,b,g,jt,Ht,c]);return Kt==null?null:reactExports.createElement(NavigationContext$1.Provider,{value:$t},reactExports.createElement(LocationContext.Provider,{children:a,value:Kt}))}function Routes(e){let{children:i,location:a}=e;return useRoutes(createRoutesFromChildren(i),a)}new Promise(()=>{});function createRoutesFromChildren(e,i){i===void 0&&(i=[]);let a=[];return reactExports.Children.forEach(e,(o,c)=>{if(!reactExports.isValidElement(o))return;let s=[...i,c];if(o.type===reactExports.Fragment){a.push.apply(a,createRoutesFromChildren(o.props.children,s));return}o.type!==Route&&invariant(!1),!o.props.index||!o.props.children||invariant(!1);let d={id:o.props.id||s.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(d.children=createRoutesFromChildren(o.props.children,s)),a.push(d)}),a}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(e,i){if(e==null)return{};var a={},o=Object.keys(e),c,s;for(s=0;s<o.length;s++)c=o[s],!(i.indexOf(c)>=0)&&(a[c]=e[c]);return a}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,i){return e.button===0&&(!i||i==="_self")&&!isModifiedEvent(e)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function HashRouter(e){let{basename:i,children:a,future:o,window:c}=e,s=reactExports.useRef();s.current==null&&(s.current=createHashHistory({window:c,v5Compat:!0}));let d=s.current,[et,$t]=reactExports.useState({action:d.action,location:d.location}),{v7_startTransition:h}=o||{},b=reactExports.useCallback(g=>{h&&startTransitionImpl?startTransitionImpl(()=>$t(g)):$t(g)},[$t,h]);return reactExports.useLayoutEffect(()=>d.listen(b),[d,b]),reactExports.createElement(Router,{basename:i,children:a,location:et.location,navigationType:et.action,navigator:d})}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(i,a){let{onClick:o,relative:c,reloadDocument:s,replace:d,state:et,target:$t,to:h,preventScrollReset:b}=i,g=_objectWithoutPropertiesLoose(i,_excluded),{basename:jt}=reactExports.useContext(NavigationContext$1),Ht,Kt=!1;if(typeof h=="string"&&ABSOLUTE_URL_REGEX.test(h)&&(Ht=h,isBrowser))try{let ir=new URL(window.location.href),qr=h.startsWith("//")?new URL(ir.protocol+h):new URL(h),vn=stripBasename(qr.pathname,jt);qr.origin===ir.origin&&vn!=null?h=vn+qr.search+qr.hash:Kt=!0}catch{}let or=useHref(h,{relative:c}),jr=useLinkClickHandler(h,{replace:d,state:et,target:$t,preventScrollReset:b,relative:c});function Lr(ir){o&&o(ir),ir.defaultPrevented||jr(ir)}return reactExports.createElement("a",_extends({},g,{href:Ht||or,onClick:Kt||s?o:Lr,ref:a,target:$t}))});var DataRouterHook;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(e,i){let{target:a,replace:o,state:c,preventScrollReset:s,relative:d}=i===void 0?{}:i,et=useNavigate(),$t=useLocation(),h=useResolvedPath(e,{relative:d});return reactExports.useCallback(b=>{if(shouldProcessLinkClick(b,a)){b.preventDefault();let g=o!==void 0?o:createPath($t)===createPath(h);et(e,{replace:g,state:c,preventScrollReset:s,relative:d})}},[$t,et,h,o,c,a,e,s,d])}const GITHUB_URL="https://github.com/emersondemetrio/emersondemetrio.github.io/blob/main/",API_URL="https://api.exchangerate-api.com/v4/latest/",Instagram={title:"Instagram",url:"https://instagram.com/emersondemetrio/",handle:"@emersondemetrio",ranking:9,category:"social",about:"Instagram profile"},Links=[{title:"Dev Daily",url:"#/dev",category:"professional",handle:"Dev Daily",ranking:0,keepFocus:!0,about:"Developer's Daily Routine"},Instagram,{title:"x (Twitter)",url:"https://x.com/emersondemetrio/",category:"social",handle:"@emersondemetrio",ranking:10,about:"X profile"},{title:"LinkedIn",url:"https://linkedin.com/in/emersondemetrio/",category:"professional",handle:"@emersondemetrio",ranking:2,about:"LinkedIn profile"},{title:"GitHub",url:"https://github.com/emersondemetrio?tab=repositories",category:"professional",handle:"@emersondemetrio",ranking:1,about:"GitHub profile"},{title:"Gist",url:"https://gist.github.com/emersondemetrio",category:"professional",handle:"@emersondemetrio",ranking:3,about:"Gist profile"},{title:"CodePen",url:"https://codepen.io/emersondemetrio/",category:"professional",handle:"@emersondemetrio",ranking:4,about:"CodePen profile"},{title:"YouTube",url:"https://youtube.com/@emersondemetrio/videos",category:"arts",handle:"@emersondemetrio",ranking:5,about:"YouTube channel"},{title:"Playlists",url:"https://youtube.com/@emersondemetrio/playlists",category:"arts",handle:"YT Playlists",ranking:6,about:"YouTube playlists"},{title:"SoundCloud",url:"https://soundcloud.com/emersondemetrio/tracks",category:"arts",handle:"@emersondemetrio",ranking:7,about:"SoundCloud profile"},{title:"Spotify",url:"https://open.spotify.com/user/12156014938",category:"arts",handle:"@emersondemetrio",ranking:8,about:"Spotify profile"},{title:"Blog",url:"https://badcompiler.tumblr.com",category:"arts",handle:"@badcompiler",ranking:10,about:"Personal Blog"}],linkGet=e=>{const i=Links.find(a=>a.title.toLowerCase()===e);return i||Instagram},CurrencyProviders=[{name:"Wise",nickname:"wis",url:(e,i,a)=>`https://wise.com/us/currency-converter/${`${e}-to-${i}-rate?amount=${a}`.toLocaleLowerCase()}`},{name:"Google",nickname:"ggl",url:(e,i,a)=>`https://google.com/search?q=${a}+${e}+to+${i}`}],REPOS={timezones:{name:"Timezones",url:`${GITHUB_URL}src/pages/timezones/timezones.tsx`},weather:{name:"Weather App",url:`${GITHUB_URL}src/pages/weather-app/weather-app.tsx`},codepen:{name:"Code Pen",url:`${GITHUB_URL}src/pages/code-pen/pens`}},TargetCurrencies=["EUR","USD","GBP","BRL"],notWordsRegex=/[^a-zA-Z]+/g,useCache=(e,i="WEEKLY")=>{const a=()=>{const b=localStorage.getItem(e);return!b||b==="undefined"||b==="null"?{}:JSON.parse(b)},o=b=>{localStorage.setItem(e,JSON.stringify(b))},c=(b,g)=>{const jt=a();jt[b]=g,o(jt)},s=(b,g)=>{c(b,g)},d=b=>a()[b]||null,et=(b,g)=>{const jt=`${b.replace(notWordsRegex,"_").toLowerCase()}`;if(!g)return jt;const Ht=new Date(g),Kt=Ht.getDate(),or=Ht.getMonth()+1,jr=Ht.getFullYear();return`${jt}-${jr}-${or}-${Kt}`},$t=()=>{o({}),localStorage.removeItem(e)};return(()=>{const b=d("expiresAt");if(b){const g=new Date().getTime(),jt=new Date(b);if(g>jt.getTime())return o({})}if(!b){const g=new Date;i==="DAILY"&&g.setDate(g.getDate()+1),i==="WEEKLY"&&g.setDate(g.getDate()+7),i==="MONTHLY"&&g.setMonth(g.getMonth()+1),s("expiresAt",`${g.getTime()}`)}})(),{cacheKey:e,data:a(),createItemKey:et,invalidate:$t,set:s,get:d}},fetchCurrency=async e=>await(await fetch(`${API_URL}/${e}`)).json(),filterTarget=(e,i)=>{const a=Object.keys(e.rates).filter(o=>TargetCurrencies.includes(o)).filter(o=>o!==i).reduce((o,c)=>(o[c]=e.rates[c],o),{});return{...e,rates:a}},fixedAs2=e=>Math.round(e*100)/100,formatToCurrency=(e,i,a=1)=>{(!e||isNaN(e))&&(e=1);const o=i==="BRL"?"pt-BR":"en-US";return fixedAs2(e*a).toLocaleString(o,{currency:i,style:"currency"})},CACHE_KEY$1="currency-app-cache",useCurrencyNow=(e="EUR")=>{const[i,a]=reactExports.useState(!0),[o,c]=reactExports.useState(null),[s,d]=reactExports.useState(!1),[et,$t]=reactExports.useState(null),{get:h,set:b,invalidate:g,createItemKey:jt}=useCache(CACHE_KEY$1),Ht=()=>{g(),d(!0),a(!0)};return reactExports.useEffect(()=>{const Kt=jt(e,new Date().getTime()),or=h(Kt);if(!s&&or){const jr=filterTarget(or,e);if(jr){c(jr),a(!1);return}}s&&d(!1),fetchCurrency(e).then(jr=>{c(filterTarget(jr,e)),b(Kt,jr),a(!1)}).catch(jr=>{$t(jr),a(!1)})},[e,s]),{data:o,isLoading:i,error:et,refresh:Ht}},Loading=()=>jsxRuntimeExports.jsxs("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"24px",height:"30px",viewBox:"0 0 24 30",xmlSpace:"preserve",children:[jsxRuntimeExports.jsx("rect",{x:"0",y:"0",width:"4",height:"10",fill:"#333",children:jsxRuntimeExports.jsx("animateTransform",{attributeType:"xml",attributeName:"transform",type:"translate",values:"0 0; 0 20; 0 0",begin:"0",dur:"0.6s",repeatCount:"indefinite"})}),jsxRuntimeExports.jsx("rect",{x:"10",y:"0",width:"4",height:"10",fill:"#333",children:jsxRuntimeExports.jsx("animateTransform",{attributeType:"xml",attributeName:"transform",type:"translate",values:"0 0; 0 20; 0 0",begin:"0.2s",dur:"0.6s",repeatCount:"indefinite"})}),jsxRuntimeExports.jsx("rect",{x:"20",y:"0",width:"4",height:"10",fill:"#333",children:jsxRuntimeExports.jsx("animateTransform",{attributeType:"xml",attributeName:"transform",type:"translate",values:"0 0; 0 20; 0 0",begin:"0.4s",dur:"0.6s",repeatCount:"indefinite"})})]}),Badge=({base:e,target:i,amount:a,provider:o})=>jsxRuntimeExports.jsx(Link,{target:"_blank",className:"badge badge-primary",to:o.url(e,i,a),children:o.nickname}),CurrencyToggles=({base:e,options:i,onChange:a})=>{const[o,c]=reactExports.useState(e);return jsxRuntimeExports.jsxs("div",{className:"p-10",children:[jsxRuntimeExports.jsx("span",{children:"From"}),i.map(s=>{const d=`${o===s?"btn-active":"btn-accent"}`;return jsxRuntimeExports.jsx("button",{className:`mx-2 btn btn-sm btn-outline ${d}`,onClick:()=>{c(s),a(s)},children:s},s)})]})},CurrencyNow=({asList:e=!1})=>{const i=jt=>y(jt),[a,o]=reactExports.useState("EUR"),{data:c,isLoading:s,error:d,refresh:et}=useCurrencyNow(a),[$t,h]=reactExports.useState(null);if(s)return jsxRuntimeExports.jsx(Loading,{});const b=jt=>()=>{navigator.clipboard.writeText(jt),i("Copied to clipboard!")},g=jt=>{jt.preventDefault();const Ht=parseInt(jt.target.value,10);if(isNaN(Ht)){h(null);return}Ht>5e6||h(Ht)};return c===null?jsxRuntimeExports.jsx("div",{className:"currency-item",children:"No currency data"}):d?jsxRuntimeExports.jsx("div",{className:"currency-item",children:d.message}):e?jsxRuntimeExports.jsxs("div",{className:"flex flex-col w-96 border border-gray-500 p-10",children:[jsxRuntimeExports.jsx("h3",{children:"Currency"}),Object.entries(c.rates).map(([jt,Ht])=>{const Kt=formatToCurrency($t||1,a.toLocaleLowerCase()),or=formatToCurrency($t,jt,Ht);return jsxRuntimeExports.jsxs("div",{title:jt,className:"flex flex-row items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[Kt," = ",or]}),jsxRuntimeExports.jsx("div",{children:CurrencyProviders.map(jr=>jsxRuntimeExports.jsx(Badge,{base:a,target:jt,amount:$t||1,provider:jr},jr.name))})]},jt)})]}):jsxRuntimeExports.jsx("div",{className:"currency-now",children:jsxRuntimeExports.jsxs("div",{className:"overflow-x-auto",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CurrencyToggles,{base:"EUR",onChange:o,options:["EUR","USD","BRL","GBP"]}),jsxRuntimeExports.jsx("input",{type:"number",max:999999,placeholder:`Amount (in ${a})`,value:$t??"",onChange:g,className:"input input-bordered input-md w-full max-w-xs"}),jsxRuntimeExports.jsx("button",{className:"btn btn-xs",onClick:et,children:""})]}),jsxRuntimeExports.jsxs("table",{className:"table",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Conversion"}),jsxRuntimeExports.jsx("th",{children:"Rate"}),jsxRuntimeExports.jsx("th",{children:"Sources"})]})}),jsxRuntimeExports.jsx("tbody",{children:Object.entries(c.rates).map(([jt,Ht])=>{const Kt=formatToCurrency($t||1,a.toLocaleLowerCase()),or=formatToCurrency($t,jt,Ht),jr=b(`${Kt} = ${or}`);return jsxRuntimeExports.jsxs("tr",{title:jt,children:[jsxRuntimeExports.jsxs("td",{onClick:jr,children:[a," to ",jt]}),jsxRuntimeExports.jsxs("td",{onClick:jr,children:[Kt," = ",or]}),jsxRuntimeExports.jsx("td",{children:CurrencyProviders.map(Lr=>jsxRuntimeExports.jsx(Badge,{base:a,target:jt,amount:$t||1,provider:Lr},Lr.name))})]},jt)})})]})]})})},useIsMobile=(e=768)=>{if(typeof window.matchMedia!="function")throw Error("matchMedia not supported by browser!");const[i,a]=reactExports.useState(window.matchMedia(`(max-width: ${e}px)`).matches),o=reactExports.useCallback(c=>{a(c.matches)},[]);return reactExports.useEffect(()=>{const c=window.matchMedia(`(max-width: ${e}px)`);try{c.addEventListener("change",o)}catch{c.addListener(o)}return()=>{try{c.removeEventListener("change",o)}catch{c.removeListener(o)}}},[e]),i},Toggle=({children:e,title:i,onChange:a,style:o={}})=>{const[c,s]=reactExports.useState(!1),d=()=>{s(!c),typeof a=="function"&&a(!c)};return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flex:1,flexDirection:"column",...o},children:[jsxRuntimeExports.jsx("div",{style:{flex:1,display:"flex",justifyContent:"left"},children:jsxRuntimeExports.jsxs("button",{className:"btn btn-primary",onClick:d,children:[i," ",c?"":""]})}),jsxRuntimeExports.jsx("div",{style:{},children:c&&e})]})},Footer$1=()=>{const e=useIsMobile();return jsxRuntimeExports.jsxs("footer",{className:"bg-black px-3 py-12 text-center text-white border-t",children:[jsxRuntimeExports.jsxs(Link,{target:"_blank",to:linkGet("linkedin").url,className:"font-medium text-white-600 hover:underline",children:["Emerson Demetrio ",new Date().getFullYear()]}),!e&&jsxRuntimeExports.jsx(Toggle,{title:"Currency Today",children:jsxRuntimeExports.jsx("div",{className:"w-full flex items-center justify-center",children:jsxRuntimeExports.jsx(CurrencyNow,{asList:!0})})})]})},noop=()=>{},randomUUID=()=>Math.random().toString(36).substring(2,15),range=(e,i)=>Array.from({length:i-e+1},(a,o)=>o+e),reverseRange=(e,i)=>range(e,i).reverse(),limitString=(e,i)=>e.length>i?e.slice(0,i):e,openUrl=(e,i="_blank")=>window.open(e,i),Modal=({title:e,visible:i,onClose:a,children:o})=>{const c=randomUUID();return jsxRuntimeExports.jsx("dialog",{id:c,className:i?"modal modal-open":"modal",children:jsxRuntimeExports.jsxs("div",{className:"modal-box w-full",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg",children:e}),o,a&&jsxRuntimeExports.jsx("div",{className:"modal-action",children:jsxRuntimeExports.jsx("form",{method:"dialog",children:jsxRuntimeExports.jsx("button",{className:"btn",onClick:a,children:"Close"})})})]})})},terminal="",CloseIcon=({active:e})=>jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{cx:"15",cy:"15",r:"15",fill:"#DF4744"}),e&&jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{cx:"14.9032",cy:"14.9032",r:"13.7419",fill:"#FC5753"}),jsxRuntimeExports.jsx("rect",{x:"8.10388",y:"20.0107",width:"16.8387",height:"2.12903",transform:"rotate(-45 8.10388 20.0107)",fill:"#7E0508"}),jsxRuntimeExports.jsx("rect",{x:"8.10388",y:"9.60934",width:"2.12903",height:"16.8387",transform:"rotate(-45 8.10388 9.60934)",fill:"#7E0508"})]})]}),MinimizeIcon=({active:e})=>jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{cx:"15",cy:"15",r:"15",fill:"#DE9F34"}),e&&jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{cx:"14.9032",cy:"14.9032",r:"13.7419",fill:"#FDBC40"}),jsxRuntimeExports.jsx("rect",{x:"6.58064",y:"13.9355",width:"16.8387",height:"2.12903",fill:"#985712"})]})]}),MaximizeIcon=({active:e})=>jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{cx:"15",cy:"15",r:"15",fill:"#27AA35"}),e&&jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{cx:"14.9032",cy:"14.9032",r:"13.7419",fill:"#36C84B"}),jsxRuntimeExports.jsx("path",{d:"M21.3004 7.52811C21.8549 7.52653 22.3048 7.97644 22.3032 8.53095L22.2815 16.1749C22.2789 17.0644 21.2034 17.5081 20.5744 16.8791L12.9522 9.25696C12.3232 8.62796 12.7669 7.55239 13.6564 7.54986L21.3004 7.52811Z",fill:"#0B650D"}),jsxRuntimeExports.jsx("path",{d:"M8.53096 22.3032C7.97645 22.3048 7.52654 21.8549 7.52811 21.3003L7.54986 13.6564C7.5524 12.7669 8.62797 12.3232 9.25697 12.9522L16.8791 20.5743C17.5081 21.2033 17.0644 22.2789 16.1749 22.2814L8.53096 22.3032Z",fill:"#0B650D"})]})]}),Icon=({onClick:e,name:i})=>{const[a,o]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("svg",{onClick:e,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"15px",height:"15px"},children:[i==="close"&&jsxRuntimeExports.jsx(CloseIcon,{active:a}),i==="minimize"&&jsxRuntimeExports.jsx(MinimizeIcon,{active:a}),i==="maximize"&&jsxRuntimeExports.jsx(MaximizeIcon,{active:a})]})},TerminalActions=({actions:e})=>jsxRuntimeExports.jsxs("div",{className:"action-button-container",children:[jsxRuntimeExports.jsx(Icon,{name:"maximize",onClick:(e==null?void 0:e.onMaximize)||noop}),jsxRuntimeExports.jsx(Icon,{name:"minimize",onClick:(e==null?void 0:e.onMaximize)||noop}),jsxRuntimeExports.jsx(Icon,{name:"close",onClick:(e==null?void 0:e.onMinimize)||noop})]}),TerminalHeader=({title:e,actions:i})=>jsxRuntimeExports.jsxs("div",{className:"rounded terminal-header",children:[jsxRuntimeExports.jsxs("span",{className:"title-container",children:["~/",e.toLowerCase().split(" ").join("-"),"/"]}),jsxRuntimeExports.jsx(TerminalActions,{actions:i})]}),TerminalFooter=({category:e})=>{const i=["h-10","flex","justify-end","items-center","terminal-item-tag-container","border-t-2","bg-[#202427]","border-t-[#202427]","border-solid","rounded-b-lg"].join(" ");return jsxRuntimeExports.jsx("div",{className:i,children:jsxRuntimeExports.jsx("span",{className:"badge badge-outline m-2",children:e})})},TerminalContent=({category:e,title:i,handle:a,url:o,onClick:c,actions:s,keepFocus:d,tabIndex:et,about:$t})=>{const h=()=>{if(o)return openUrl(o,d?"_self":"_blank");typeof c=="function"&&c()},[b,g]=reactExports.useState(!1),jt=()=>g(!0),Ht=()=>g(!1);return jsxRuntimeExports.jsxs("div",{tabIndex:et,className:"md:p-0 px-6 rounded hover:outline hover:outline-solid outline-offset-2 outline-cyan-500",onFocus:jt,onBlur:Ht,onMouseEnter:jt,onMouseLeave:Ht,children:[jsxRuntimeExports.jsx(TerminalHeader,{title:i,actions:s}),jsxRuntimeExports.jsx("div",{className:"terminal-item-content",onClick:h,children:jsxRuntimeExports.jsx("span",{children:b?`${a}: ${$t}`:a})}),jsxRuntimeExports.jsx(TerminalFooter,{category:e})]},`${e}/${i}`)},Terminal=({links:e,tools:i=[]})=>jsxRuntimeExports.jsxs("div",{className:"terminal-container mb-5",children:[e.map(({handle:a,title:o,url:c,category:s,about:d,keepFocus:et=!1},$t)=>jsxRuntimeExports.jsx(TerminalContent,{tabIndex:$t,url:c,keepFocus:et,title:o,handle:a,category:s,about:d},`${s}/${o}`)),i.map((a,o)=>jsxRuntimeExports.jsx(TerminalContent,{tabIndex:o,actions:a.actions,onClick:a.actions.onMaximize,title:a.title,handle:a.handle,category:a.category,about:a.about},`tool-${o}`))]}),Page=({name:e="Page Name",description:i,children:a,style:o={},onPaste:c=()=>{},className:s="",withoutName:d=!1,isHome:et=!1,withoutPadding:$t=!1,repo:h,landing:b=!1})=>{const g=useIsMobile(),jt=reactExports.useRef(null);reactExports.useEffect(()=>{document.title=`${e} | emerson.run`},[e]),reactExports.useEffect(()=>{if(!g&&jt.current){const Kt=or=>{c(or)};return window.addEventListener("paste",Kt),()=>{window&&window.removeEventListener("paste",Kt)}}},[g,c]);const Ht=$t?"":"py-8";return s=g&&!et?`mt-10 ${s}`:s,jsxRuntimeExports.jsx("section",{style:o,onPaste:c,ref:jt,tabIndex:-1,"data-page":`page-${e.toLowerCase().replace(/\s/g,"-")}`,className:`grid place-items-center py-20 text-center ${Ht} ${s}`,children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto flex flex-wrap",children:[d?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between items-center flex-col md:flex-row gap-6",children:[!b&&jsxRuntimeExports.jsx("h2",{className:"my-2 text-lg font-bold leading-tight text-center text-white-800",children:e}),h&&jsxRuntimeExports.jsx(Link,{to:h,target:"_blank",className:"text-center text-white-800 items-center",children:" Show me the code"})]}),et&&jsxRuntimeExports.jsx("div",{className:"w-full flex flex-col",children:a}),!et&&jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col",children:[i&&jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("p",{className:"text-lg",children:i})}),jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center items-center",children:a})]})]})})},Hero=()=>useIsMobile()?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("h1",{className:"my-4 text-2xl font-bold leading-tight text-center",children:"~/emerson/home"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"pt-2 w-full",children:jsxRuntimeExports.jsx("div",{className:"flex items-center w-full",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col w-full justify-center items-start text-center md:text-left",children:[jsxRuntimeExports.jsx("h1",{className:"my-4 text-1xl font-bold leading-tight",children:"~/emerson/home"}),jsxRuntimeExports.jsx("p",{className:"leading-normal text-1xl mb-8",children:"Welcome. Useful links bellow."})]})})})}),Home=()=>{const[e,i]=reactExports.useState(!1);return jsxRuntimeExports.jsxs(Page,{isHome:!0,name:"Home",withoutName:!0,children:[jsxRuntimeExports.jsx(Hero,{}),jsxRuntimeExports.jsx(Terminal,{links:Links.sort((a,o)=>a.ranking>o.ranking?1:-1),tools:[{handle:"Currency Tools",category:"tools",title:"Currency Tools",actions:{onMaximize:()=>i(!0),onMinimize:()=>i(!1),onClose:()=>i(!1)},about:"Compare currency worldwide."}]}),jsxRuntimeExports.jsx(Modal,{title:"Currency Tools",visible:e,onClose:()=>i(!1),children:jsxRuntimeExports.jsx(CurrencyNow,{})})]})},Blog=()=>jsxRuntimeExports.jsx(Page,{name:"Blog",description:"Come back soon!"}),FilePicker=({onFileChange:e})=>{const i=a=>{e(a.target.files)};return jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("label",{htmlFor:"fileInput",children:"Select File(s)"}),jsxRuntimeExports.jsx("input",{multiple:!0,type:"file",id:"fileInput",className:"file-input w-full max-w-xs",onChange:i})]})};function iota$1(e){for(var i=new Array(e),a=0;a<e;++a)i[a]=a;return i}var iota_1=iota$1;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var isBuffer_1=function(e){return e!=null&&(isBuffer$1(e)||isSlowBuffer(e)||!!e._isBuffer)};function isBuffer$1(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&isBuffer$1(e.slice(0,0))}var iota=iota_1,isBuffer=isBuffer_1,hasTypedArrays=typeof Float64Array<"u";function compare1st(e,i){return e[0]-i[0]}function order(){var e=this.stride,i=new Array(e.length),a;for(a=0;a<i.length;++a)i[a]=[Math.abs(e[a]),a];i.sort(compare1st);var o=new Array(i.length);for(a=0;a<o.length;++a)o[a]=i[a][1];return o}function compileConstructor(e,i){var a=["View",i,"d",e].join("");i<0&&(a="View_Nil"+e);var o=e==="generic";if(i===-1){var c="function "+a+"(a){this.data=a;};var proto="+a+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+a+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+a+"(a){return new "+a+"(a);}",or=new Function(c);return or()}else if(i===0){var c="function "+a+"(a,d) {this.data = a;this.offset = d};var proto="+a+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+a+"_copy() {return new "+a+"(this.data,this.offset)};proto.pick=function "+a+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+a+"_get(){return "+(o?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+a+"_set(v){return "+(o?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+a+"(a,b,c,d){return new "+a+"(a,d)}",or=new Function("TrivialArray",c);return or(CACHED_CONSTRUCTORS[e][0])}var c=["'use strict'"],s=iota(i),d=s.map(function(jr){return"i"+jr}),et="this.offset+"+s.map(function(jr){return"this.stride["+jr+"]*i"+jr}).join("+"),$t=s.map(function(jr){return"b"+jr}).join(","),h=s.map(function(jr){return"c"+jr}).join(",");c.push("function "+a+"(a,"+$t+","+h+",d){this.data=a","this.shape=["+$t+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+a+".prototype","proto.dtype='"+e+"'","proto.dimension="+i),c.push("Object.defineProperty(proto,'size',{get:function "+a+"_size(){return "+s.map(function(jr){return"this.shape["+jr+"]"}).join("*"),"}})"),i===1?c.push("proto.order=[0]"):(c.push("Object.defineProperty(proto,'order',{get:"),i<4?(c.push("function "+a+"_order(){"),i===2?c.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):i===3&&c.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):c.push("ORDER})")),c.push("proto.set=function "+a+"_set("+d.join(",")+",v){"),o?c.push("return this.data.set("+et+",v)}"):c.push("return this.data["+et+"]=v}"),c.push("proto.get=function "+a+"_get("+d.join(",")+"){"),o?c.push("return this.data.get("+et+")}"):c.push("return this.data["+et+"]}"),c.push("proto.index=function "+a+"_index(",d.join(),"){return "+et+"}"),c.push("proto.hi=function "+a+"_hi("+d.join(",")+"){return new "+a+"(this.data,"+s.map(function(jr){return["(typeof i",jr,"!=='number'||i",jr,"<0)?this.shape[",jr,"]:i",jr,"|0"].join("")}).join(",")+","+s.map(function(jr){return"this.stride["+jr+"]"}).join(",")+",this.offset)}");var b=s.map(function(jr){return"a"+jr+"=this.shape["+jr+"]"}),g=s.map(function(jr){return"c"+jr+"=this.stride["+jr+"]"});c.push("proto.lo=function "+a+"_lo("+d.join(",")+"){var b=this.offset,d=0,"+b.join(",")+","+g.join(","));for(var jt=0;jt<i;++jt)c.push("if(typeof i"+jt+"==='number'&&i"+jt+">=0){d=i"+jt+"|0;b+=c"+jt+"*d;a"+jt+"-=d}");c.push("return new "+a+"(this.data,"+s.map(function(jr){return"a"+jr}).join(",")+","+s.map(function(jr){return"c"+jr}).join(",")+",b)}"),c.push("proto.step=function "+a+"_step("+d.join(",")+"){var "+s.map(function(jr){return"a"+jr+"=this.shape["+jr+"]"}).join(",")+","+s.map(function(jr){return"b"+jr+"=this.stride["+jr+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var jt=0;jt<i;++jt)c.push("if(typeof i"+jt+"==='number'){d=i"+jt+"|0;if(d<0){c+=b"+jt+"*(a"+jt+"-1);a"+jt+"=ceil(-a"+jt+"/d)}else{a"+jt+"=ceil(a"+jt+"/d)}b"+jt+"*=d}");c.push("return new "+a+"(this.data,"+s.map(function(jr){return"a"+jr}).join(",")+","+s.map(function(jr){return"b"+jr}).join(",")+",c)}");for(var Ht=new Array(i),Kt=new Array(i),jt=0;jt<i;++jt)Ht[jt]="a[i"+jt+"]",Kt[jt]="b[i"+jt+"]";c.push("proto.transpose=function "+a+"_transpose("+d+"){"+d.map(function(jr,Lr){return jr+"=("+jr+"===undefined?"+Lr+":"+jr+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+a+"(this.data,"+Ht.join(",")+","+Kt.join(",")+",this.offset)}"),c.push("proto.pick=function "+a+"_pick("+d+"){var a=[],b=[],c=this.offset");for(var jt=0;jt<i;++jt)c.push("if(typeof i"+jt+"==='number'&&i"+jt+">=0){c=(c+this.stride["+jt+"]*i"+jt+")|0}else{a.push(this.shape["+jt+"]);b.push(this.stride["+jt+"])}");c.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),c.push("return function construct_"+a+"(data,shape,stride,offset){return new "+a+"(data,"+s.map(function(jr){return"shape["+jr+"]"}).join(",")+","+s.map(function(jr){return"stride["+jr+"]"}).join(",")+",offset)}");var or=new Function("CTOR_LIST","ORDER",c.join(`
`));return or(CACHED_CONSTRUCTORS[e],order)}function arrayDType(e){if(isBuffer(e))return"buffer";if(hasTypedArrays)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}var CACHED_CONSTRUCTORS={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function wrappedNDArrayCtor(e,i,a,o){if(e===void 0){var h=CACHED_CONSTRUCTORS.array[0];return h([])}else typeof e=="number"&&(e=[e]);i===void 0&&(i=[e.length]);var c=i.length;if(a===void 0){a=new Array(c);for(var s=c-1,d=1;s>=0;--s)a[s]=d,d*=i[s]}if(o===void 0){o=0;for(var s=0;s<c;++s)a[s]<0&&(o-=(i[s]-1)*a[s])}for(var et=arrayDType(e),$t=CACHED_CONSTRUCTORS[et];$t.length<=c+1;)$t.push(compileConstructor(et,$t.length-1));var h=$t[c+1];return h(e,i,a,o)}var ndarray=wrappedNDArrayCtor;const ndarray4=getDefaultExportFromCjs(ndarray);/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var vd$1=Object.create,Pn$1=Object.defineProperty,_d$1=Object.getOwnPropertyDescriptor,Od$1=Object.getOwnPropertyNames,Id$1=Object.getPrototypeOf,Sd$1=Object.prototype.hasOwnProperty,L=(e,i)=>()=>(e&&(i=e(e=0)),i),me=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports),Sr=(e,i)=>{for(var a in i)Pn$1(e,a,{get:i[a],enumerable:!0})},Va$1=(e,i,a,o)=>{if(i&&typeof i=="object"||typeof i=="function")for(let c of Od$1(i))!Sd$1.call(e,c)&&c!==a&&Pn$1(e,c,{get:()=>i[c],enumerable:!(o=_d$1(i,c))||o.enumerable});return e},Ar=(e,i,a)=>(a=e!=null?vd$1(Id$1(e)):{},Va$1(i||!e||!e.__esModule?Pn$1(a,"default",{value:e,enumerable:!0}):a,e)),ar=e=>Va$1(Pn$1({},"__esModule",{value:!0}),e),En,sr$1,Pr$1,Ad$1,Dn$1,Ln$1=L(()=>{En=new Map,sr$1=[],Pr$1=(e,i,a)=>{if(i&&typeof i.init=="function"&&typeof i.createInferenceSessionHandler=="function"){let o=En.get(e);if(o===void 0)En.set(e,{backend:i,priority:a});else{if(o.priority>a)return;if(o.priority===a&&o.backend!==i)throw new Error(`cannot register backend "${e}" using priority ${a}`)}if(a>=0){let c=sr$1.indexOf(e);c!==-1&&sr$1.splice(c,1);for(let s=0;s<sr$1.length;s++)if(En.get(sr$1[s]).priority<=a){sr$1.splice(s,0,e);return}sr$1.push(e)}return}throw new TypeError("not a valid backend")},Ad$1=async e=>{let i=En.get(e);if(!i)return"backend not found.";if(i.initialized)return i.backend;if(i.aborted)return i.error;{let a=!!i.initPromise;try{return a||(i.initPromise=i.backend.init(e)),await i.initPromise,i.initialized=!0,i.backend}catch(o){return a||(i.error=`${o}`,i.aborted=!0),i.error}finally{delete i.initPromise}}},Dn$1=async e=>{let i=e.executionProviders||[],a=i.map($t=>typeof $t=="string"?$t:$t.name),o=a.length===0?sr$1:a,c,s=[],d=new Set;for(let $t of o){let h=await Ad$1($t);typeof h=="string"?s.push({name:$t,err:h}):(c||(c=h),c===h&&d.add($t))}if(!c)throw new Error(`no available backend found. ERR: ${s.map($t=>`[${$t.name}] ${$t.err}`).join(", ")}`);for(let{name:$t,err:h}of s)a.includes($t)&&console.warn(`removing requested execution provider "${$t}" from session options because it is not available: ${h}`);let et=i.filter($t=>d.has(typeof $t=="string"?$t:$t.name));return[c,new Proxy(e,{get:($t,h)=>h==="executionProviders"?et:Reflect.get($t,h)})]}}),Wa=L(()=>{Ln$1()}),Ha$1,qa$1=L(()=>{Ha$1="1.18.0"}),ja$1,ut$1,Vo=L(()=>{qa$1(),ja$1="warning",ut$1={wasm:{},webgl:{},webgpu:{},versions:{common:Ha$1},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);ja$1=e}},get logLevel(){return ja$1}},Object.defineProperty(ut$1,"logLevel",{enumerable:!0})}),Z,Ya$1=L(()=>{Vo(),Z=ut$1}),Xa$1,Ka$1,Ja$1=L(()=>{Xa$1=(e,i)=>{let a=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);a.width=e.dims[3],a.height=e.dims[2];let o=a.getContext("2d");if(o!=null){let c,s;(i==null?void 0:i.tensorLayout)!==void 0&&i.tensorLayout==="NHWC"?(c=e.dims[2],s=e.dims[3]):(c=e.dims[3],s=e.dims[2]);let d=(i==null?void 0:i.format)!==void 0?i.format:"RGB",et=i==null?void 0:i.norm,$t,h;et===void 0||et.mean===void 0?$t=[255,255,255,255]:typeof et.mean=="number"?$t=[et.mean,et.mean,et.mean,et.mean]:($t=[et.mean[0],et.mean[1],et.mean[2],0],et.mean[3]!==void 0&&($t[3]=et.mean[3])),et===void 0||et.bias===void 0?h=[0,0,0,0]:typeof et.bias=="number"?h=[et.bias,et.bias,et.bias,et.bias]:(h=[et.bias[0],et.bias[1],et.bias[2],0],et.bias[3]!==void 0&&(h[3]=et.bias[3]));let b=s*c,g=0,jt=b,Ht=b*2,Kt=-1;d==="RGBA"?(g=0,jt=b,Ht=b*2,Kt=b*3):d==="RGB"?(g=0,jt=b,Ht=b*2):d==="RBG"&&(g=0,Ht=b,jt=b*2);for(let or=0;or<s;or++)for(let jr=0;jr<c;jr++){let Lr=(e.data[g++]-h[0])*$t[0],ir=(e.data[jt++]-h[1])*$t[1],qr=(e.data[Ht++]-h[2])*$t[2],vn=Kt===-1?255:(e.data[Kt++]-h[3])*$t[3];o.fillStyle="rgba("+Lr+","+ir+","+qr+","+vn+")",o.fillRect(jr,or,1,1)}if("toDataURL"in a)return a.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Ka$1=(e,i)=>{let a=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),o;if(a!=null){let c,s,d;(i==null?void 0:i.tensorLayout)!==void 0&&i.tensorLayout==="NHWC"?(c=e.dims[2],s=e.dims[1],d=e.dims[3]):(c=e.dims[3],s=e.dims[2],d=e.dims[1]);let et=i!==void 0&&i.format!==void 0?i.format:"RGB",$t=i==null?void 0:i.norm,h,b;$t===void 0||$t.mean===void 0?h=[255,255,255,255]:typeof $t.mean=="number"?h=[$t.mean,$t.mean,$t.mean,$t.mean]:(h=[$t.mean[0],$t.mean[1],$t.mean[2],255],$t.mean[3]!==void 0&&(h[3]=$t.mean[3])),$t===void 0||$t.bias===void 0?b=[0,0,0,0]:typeof $t.bias=="number"?b=[$t.bias,$t.bias,$t.bias,$t.bias]:(b=[$t.bias[0],$t.bias[1],$t.bias[2],0],$t.bias[3]!==void 0&&(b[3]=$t.bias[3]));let g=s*c;if(i!==void 0&&(i.format!==void 0&&d===4&&i.format!=="RGBA"||d===3&&i.format!=="RGB"&&i.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let jt=4,Ht=0,Kt=1,or=2,jr=3,Lr=0,ir=g,qr=g*2,vn=-1;et==="RGBA"?(Lr=0,ir=g,qr=g*2,vn=g*3):et==="RGB"?(Lr=0,ir=g,qr=g*2):et==="RBG"&&(Lr=0,qr=g,ir=g*2),o=a.createImageData(c,s);for(let xn=0;xn<s*c;Ht+=jt,Kt+=jt,or+=jt,jr+=jt,xn++)o.data[Ht]=(e.data[Lr++]-b[0])*h[0],o.data[Kt]=(e.data[ir++]-b[1])*h[1],o.data[or]=(e.data[qr++]-b[2])*h[2],o.data[jr]=vn===-1?255:(e.data[vn++]-b[3])*h[3]}else throw new Error("Can not access image data");return o}}),Wo,Za$1,Qa$1,es$1,ts$1,rs$1=L(()=>{Cn(),Wo=(e,i)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(i.height===void 0||i.width===void 0)throw new Error("Image height and width must be defined");if(i.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:a,width:o}=i,c=i.norm??{mean:255,bias:0},s,d;typeof c.mean=="number"?s=[c.mean,c.mean,c.mean,c.mean]:s=[c.mean[0],c.mean[1],c.mean[2],c.mean[3]??255],typeof c.bias=="number"?d=[c.bias,c.bias,c.bias,c.bias]:d=[c.bias[0],c.bias[1],c.bias[2],c.bias[3]??0];let et=i.format!==void 0?i.format:"RGBA",$t=i.tensorFormat!==void 0&&i.tensorFormat!==void 0?i.tensorFormat:"RGB",h=a*o,b=$t==="RGBA"?new Float32Array(h*4):new Float32Array(h*3),g=4,jt=0,Ht=1,Kt=2,or=3,jr=0,Lr=h,ir=h*2,qr=-1;et==="RGB"&&(g=3,jt=0,Ht=1,Kt=2,or=-1),$t==="RGBA"?qr=h*3:$t==="RBG"?(jr=0,ir=h,Lr=h*2):$t==="BGR"&&(ir=0,Lr=h,jr=h*2);for(let vn=0;vn<h;vn++,jt+=g,Kt+=g,Ht+=g,or+=g)b[jr++]=(e[jt]+d[0])/s[0],b[Lr++]=(e[Ht]+d[1])/s[1],b[ir++]=(e[Kt]+d[2])/s[2],qr!==-1&&or!==-1&&(b[qr++]=(e[or]+d[3])/s[3]);return $t==="RGBA"?new Je("float32",b,[1,4,a,o]):new Je("float32",b,[1,3,a,o])},Za$1=async(e,i)=>{let a=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,o=typeof ImageData<"u"&&e instanceof ImageData,c=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,s=typeof e=="string",d,et=i??{},$t=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},h=b=>b instanceof HTMLCanvasElement||b instanceof OffscreenCanvas?b.getContext("2d"):null;if(a){let b=$t();b.width=e.width,b.height=e.height;let g=h(b);if(g!=null){let jt=e.height,Ht=e.width;if(i!==void 0&&i.resizedHeight!==void 0&&i.resizedWidth!==void 0&&(jt=i.resizedHeight,Ht=i.resizedWidth),i!==void 0){if(et=i,i.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");et.tensorFormat="RGBA",et.height=jt,et.width=Ht}else et.tensorFormat="RGBA",et.height=jt,et.width=Ht;g.drawImage(e,0,0),d=g.getImageData(0,0,Ht,jt).data}else throw new Error("Can not access image data")}else if(o){let b,g;if(i!==void 0&&i.resizedWidth!==void 0&&i.resizedHeight!==void 0?(b=i.resizedHeight,g=i.resizedWidth):(b=e.height,g=e.width),i!==void 0&&(et=i),et.format="RGBA",et.height=b,et.width=g,i!==void 0){let jt=$t();jt.width=g,jt.height=b;let Ht=h(jt);if(Ht!=null)Ht.putImageData(e,0,0),d=Ht.getImageData(0,0,g,b).data;else throw new Error("Can not access image data")}else d=e.data}else if(c){if(i===void 0)throw new Error("Please provide image config with format for Imagebitmap");let b=$t();b.width=e.width,b.height=e.height;let g=h(b);if(g!=null){let jt=e.height,Ht=e.width;return g.drawImage(e,0,0,Ht,jt),d=g.getImageData(0,0,Ht,jt).data,et.height=jt,et.width=Ht,Wo(d,et)}else throw new Error("Can not access image data")}else{if(s)return new Promise((b,g)=>{let jt=$t(),Ht=h(jt);if(!e||!Ht)return g();let Kt=new Image;Kt.crossOrigin="Anonymous",Kt.src=e,Kt.onload=()=>{jt.width=Kt.width,jt.height=Kt.height,Ht.drawImage(Kt,0,0,jt.width,jt.height);let or=Ht.getImageData(0,0,jt.width,jt.height);et.height=jt.height,et.width=jt.width,b(Wo(or.data,et))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(d!==void 0)return Wo(d,et);throw new Error("Input data provided is not supported - aborted tensor creation")},Qa$1=(e,i)=>{let{width:a,height:o,download:c,dispose:s}=i,d=[1,o,a,4];return new Je({location:"texture",type:"float32",texture:e,dims:d,download:c,dispose:s})},es$1=(e,i)=>{let{dataType:a,dims:o,download:c,dispose:s}=i;return new Je({location:"gpu-buffer",type:a??"float32",gpuBuffer:e,dims:o,download:c,dispose:s})},ts$1=(e,i,a)=>new Je({location:"cpu-pinned",type:e,data:i,dims:a??[i.length]})}),ur$1,Qr$1,ns,os$1,is$1=L(()=>{ur$1=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Qr$1=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ns=!1,os$1=()=>{if(!ns){ns=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,i=typeof BigUint64Array<"u"&&BigUint64Array.from,a=typeof Float16Array<"u"&&Float16Array.from;e&&(ur$1.set("int64",BigInt64Array),Qr$1.set(BigInt64Array,"int64")),i&&(ur$1.set("uint64",BigUint64Array),Qr$1.set(BigUint64Array,"uint64")),a?(ur$1.set("float16",Float16Array),Qr$1.set(Float16Array,"float16")):ur$1.set("float16",Uint16Array)}}}),as$1,ss$1,us$1=L(()=>{Cn(),as$1=e=>{let i=1;for(let a=0;a<e.length;a++){let o=e[a];if(typeof o!="number"||!Number.isSafeInteger(o))throw new TypeError(`dims[${a}] must be an integer, got: ${o}`);if(o<0)throw new RangeError(`dims[${a}] must be a non-negative integer, got: ${o}`);i*=o}return i},ss$1=(e,i)=>{switch(e.location){case"cpu":return new Je(e.type,e.data,i);case"cpu-pinned":return new Je({location:"cpu-pinned",data:e.data,type:e.type,dims:i});case"texture":return new Je({location:"texture",texture:e.texture,type:e.type,dims:i});case"gpu-buffer":return new Je({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:i});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),Je,Cn=L(()=>{Ja$1(),rs$1(),is$1(),us$1(),Je=class{constructor(e,i,a){os$1();let o,c;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,o=e.type,c=e.dims,e.location){case"cpu-pinned":{let d=ur$1.get(o);if(!d)throw new TypeError(`unsupported type "${o}" to create tensor from pinned buffer`);if(!(e.data instanceof d))throw new TypeError(`buffer should be of type ${d.name}`);this.cpuData=e.data;break}case"texture":{if(o!=="float32")throw new TypeError(`unsupported type "${o}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="uint8"&&o!=="bool")throw new TypeError(`unsupported type "${o}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let d,et;if(typeof e=="string")if(o=e,et=a,e==="string"){if(!Array.isArray(i))throw new TypeError("A string tensor's data must be a string array.");d=i}else{let $t=ur$1.get(e);if($t===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(i)){if(e==="float16"&&$t===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");e==="uint64"||e==="int64"?d=$t.from(i,BigInt):d=$t.from(i)}else if(i instanceof $t)d=i;else throw new TypeError(`A ${o} tensor's data must be type of ${$t}`)}else if(et=i,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let $t=typeof e[0];if($t==="string")o="string",d=e;else if($t==="boolean")o="bool",d=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${$t}.`)}else{let $t=Qr$1.get(e.constructor);if($t===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);o=$t,d=e}if(et===void 0)et=[d.length];else if(!Array.isArray(et))throw new TypeError("A tensor's dims must be a number array");c=et,this.cpuData=d,this.dataLocation="cpu"}let s=as$1(c);if(this.cpuData&&s!==this.cpuData.length)throw new Error(`Tensor's size(${s}) does not match data length(${this.cpuData.length}).`);this.type=o,this.dims=c,this.size=s}static async fromImage(e,i){return Za$1(e,i)}static fromTexture(e,i){return Qa$1(e,i)}static fromGpuBuffer(e,i){return es$1(e,i)}static fromPinnedBuffer(e,i,a){return ts$1(e,i,a)}toDataURL(e){return Xa$1(this,e)}toImageData(e){return Ka$1(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let i=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=i,e&&this.disposer&&(this.disposer(),this.disposer=void 0),i}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ss$1(this,e)}}}),Me,Fn$1=L(()=>{Cn(),Me=Je}),ls$1,fs$1,lr$1,fr$1,Ho=L(()=>{Vo(),ls$1=(e,i)=>{(typeof ut$1.trace>"u"?!ut$1.wasm.trace:!ut$1.trace)||console.timeStamp(`${e}::ORT::${i}`)},fs$1=(e,i)=>{var c;let a=((c=new Error().stack)==null?void 0:c.split(/\r\n|\r|\n/g))||[],o=!1;for(let s=0;s<a.length;s++){if(o&&!a[s].includes("TRACE_FUNC")){let d=`FUNC_${e}::${a[s].trim().split(" ")[1]}`;i&&(d+=`::${i}`),ls$1("CPU",d);return}a[s].includes("TRACE_FUNC")&&(o=!0)}},lr$1=e=>{(typeof ut$1.trace>"u"?!ut$1.wasm.trace:!ut$1.trace)||fs$1("BEGIN",e)},fr$1=e=>{(typeof ut$1.trace>"u"?!ut$1.wasm.trace:!ut$1.trace)||fs$1("END",e)}}),$n,cs$1=L(()=>{Ln$1(),Fn$1(),Ho(),$n=class Jx{constructor(i){this.handler=i}async run(i,a,o){lr$1();let c={},s={};if(typeof i!="object"||i===null||i instanceof Me||Array.isArray(i))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let d=!0;if(typeof a=="object"){if(a===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(a instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(a)){if(a.length===0)throw new TypeError("'fetches' cannot be an empty array.");d=!1;for(let h of a){if(typeof h!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(h)===-1)throw new RangeError(`'fetches' contains invalid output name: ${h}.`);c[h]=null}if(typeof o=="object"&&o!==null)s=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else{let h=!1,b=Object.getOwnPropertyNames(a);for(let g of this.outputNames)if(b.indexOf(g)!==-1){let jt=a[g];(jt===null||jt instanceof Me)&&(h=!0,d=!1,c[g]=jt)}if(h){if(typeof o=="object"&&o!==null)s=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else s=a}}else if(typeof a<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let h of this.inputNames)if(typeof i[h]>"u")throw new Error(`input '${h}' is missing in 'feeds'.`);if(d)for(let h of this.outputNames)c[h]=null;let et=await this.handler.run(i,c,s),$t={};for(let h in et)if(Object.hasOwnProperty.call(et,h)){let b=et[h];b instanceof Me?$t[h]=b:$t[h]=new Me(b.type,b.data,b.dims)}return fr$1(),$t}async release(){return this.handler.dispose()}static async create(i,a,o,c){lr$1();let s,d={};if(typeof i=="string"){if(s=i,typeof a=="object"&&a!==null)d=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else if(i instanceof Uint8Array){if(s=i,typeof a=="object"&&a!==null)d=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else if(i instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&i instanceof SharedArrayBuffer){let b=i,g=0,jt=i.byteLength;if(typeof a=="object"&&a!==null)d=a;else if(typeof a=="number"){if(g=a,!Number.isSafeInteger(g))throw new RangeError("'byteOffset' must be an integer.");if(g<0||g>=b.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${b.byteLength}).`);if(jt=i.byteLength-g,typeof o=="number"){if(jt=o,!Number.isSafeInteger(jt))throw new RangeError("'byteLength' must be an integer.");if(jt<=0||g+jt>b.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${b.byteLength-g}].`);if(typeof c=="object"&&c!==null)d=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(typeof o<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof a<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(b,g,jt)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[et,$t]=await Dn$1(d),h=await et.createInferenceSessionHandler(s,$t);return fr$1(),new Jx(h)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),Pd$1,ps$1=L(()=>{cs$1(),Pd$1=$n}),ds$1=L(()=>{}),hs$1=L(()=>{}),ms$1=L(()=>{}),bs$1=L(()=>{}),Ed$1,kn$1,gs$1=L(()=>{Ln$1(),Fn$1(),Ed$1="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",kn$1=class eT{constructor(i,a,o){this.handler=i,this.hasOptimizerModel=a,this.hasEvalModel=o}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(i,a){let o=i.evalModel||"",c=i.optimizerModel||"",s=a||{},[d,et]=await Dn$1(s);if(d.createTrainingSessionHandler){let $t=await d.createTrainingSessionHandler(i.checkpointState,i.trainModel,o,c,et);return new eT($t,!!i.optimizerModel,!!i.evalModel)}else throw new Error(Ed$1)}typeNarrowingForRunStep(i,a,o,c,s){let d={},et={};if(typeof o!="object"||o===null||o instanceof Me||Array.isArray(o))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let $t=!0;if(typeof c=="object"){if(c===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(c instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(c)){if(c.length===0)throw new TypeError("'fetches' cannot be an empty array.");$t=!1;for(let h of c){if(typeof h!="string")throw new TypeError("'fetches' must be a string array or an object.");if(a.indexOf(h)===-1)throw new RangeError(`'fetches' contains invalid output name: ${h}.`);d[h]=null}if(typeof s=="object"&&s!==null)et=s;else if(typeof s<"u")throw new TypeError("'options' must be an object.")}else{let h=!1,b=Object.getOwnPropertyNames(c);for(let g of a)if(b.indexOf(g)!==-1){let jt=c[g];(jt===null||jt instanceof Me)&&(h=!0,$t=!1,d[g]=jt)}if(h){if(typeof s=="object"&&s!==null)et=s;else if(typeof s<"u")throw new TypeError("'options' must be an object.")}else et=c}}else if(typeof c<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let h of i)if(typeof o[h]>"u")throw new Error(`input '${h}' is missing in 'feeds'.`);if($t)for(let h of a)d[h]=null;return[d,et]}convertHandlerReturnTypeToMapOfTensors(i){let a={};for(let o in i)if(Object.hasOwnProperty.call(i,o)){let c=i[o];c instanceof Me?a[o]=c:a[o]=new Me(c.type,c.data,c.dims)}return a}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(i,a,o){let[c,s]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,i,a,o),d=await this.handler.runTrainStep(i,c,s);return this.convertHandlerReturnTypeToMapOfTensors(d)}async runOptimizerStep(i){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(i||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(i,a,o){if(this.hasEvalModel){let[c,s]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,i,a,o),d=await this.handler.runEvalStep(i,c,s);return this.convertHandlerReturnTypeToMapOfTensors(d)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(i=!0){return this.handler.getParametersSize(i)}async loadParametersBuffer(i,a=!0){let o=await this.getParametersSize(a);if(i.length!==4*o)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(i,a)}async getContiguousParameters(i=!0){return this.handler.getContiguousParameters(i)}async release(){return this.handler.dispose()}}}),Dd$1,ys$1=L(()=>{gs$1(),Dd$1=kn$1}),qo={};Sr(qo,{InferenceSession:()=>Pd$1,TRACE:()=>ls$1,TRACE_FUNC_BEGIN:()=>lr$1,TRACE_FUNC_END:()=>fr$1,Tensor:()=>Me,TrainingSession:()=>Dd$1,env:()=>Z,registerBackend:()=>Pr$1});var Ot$1=L(()=>{Wa(),Ya$1(),ps$1(),Fn$1(),ds$1(),hs$1(),Ho(),ms$1(),bs$1(),ys$1()});function Xt$1(e,i,a,o){if(i===void 0)return Cd$1(e);if(a===void 0)Bn$1(e,i);else if(typeof a=="number"&&o===void 0)Bn$1(e,i);else if(typeof a=="string"&&o===void 0)Bn$1(e,a,1,i);else if(typeof a=="string"&&typeof o=="number")Bn$1(e,a,o,i);else throw new TypeError("input is valid")}function Cd$1(e){return{verbose:Xt$1.verbose.bind(null,e),info:Xt$1.info.bind(null,e),warning:Xt$1.warning.bind(null,e),error:Xt$1.error.bind(null,e),fatal:Xt$1.fatal.bind(null,e)}}function Bn$1(e,i,a,o){let c=en$1[o||""]||en$1[""];xs$1[e]<xs$1[c.minimalSeverity]||(c.logDateTime&&(i=`${new Date().toISOString()}|${i}`),c.logSourceLocation,Ld$1[c.provider].log(e,i,o))}var jo,Yo,xs$1,Ld$1,ws$1,en$1,ce,Rn$1,Mn$1,Gn$1,Nn$1,lt$1=L(()=>{jo=class{log(e,i,a){}},Yo=class{log(e,i,a){console.log(`${this.color(e)} ${a?"\x1B[35m"+a+"\x1B[0m ":""}${i}`)}color(e){switch(e){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${e}`)}}},xs$1={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Ld$1={none:new jo,console:new Yo},ws$1={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},en$1={"":ws$1},(e=>{function i(h,b){e("verbose",h,b)}e.verbose=i;function a(h,b){e("info",h,b)}e.info=a;function o(h,b){e("warning",h,b)}e.warning=o;function c(h,b){e("error",h,b)}e.error=c;function s(h,b){e("fatal",h,b)}e.fatal=s;function d(h){en$1={},et("",h||{})}e.reset=d;function et(h,b){if(h==="*")d(b);else{let g=en$1[h]||ws$1;en$1[h]={provider:b.provider||g.provider,minimalSeverity:b.minimalSeverity||g.minimalSeverity,logDateTime:b.logDateTime===void 0?g.logDateTime:b.logDateTime,logSourceLocation:b.logSourceLocation===void 0?g.logSourceLocation:b.logSourceLocation}}}e.set=et;function $t(h){let b={};h.logLevel&&(b.minimalSeverity=h.logLevel),et("",b)}e.setWithEnv=$t})(Xt$1||(Xt$1={})),ce=Xt$1,Rn$1=class{constructor(e,i,a,o,c,s){this.category=e,this.name=i,this.startTime=a,this.endCallback=o,this.timer=c,this.ctx=s}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}},Mn$1=class{constructor(e,i,a,o){this.category=e,this.name=i,this.startTime=a,this.endTime=o}},Gn$1=class{constructor(e,i,a){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=e===void 0?1e4:e,this._flushBatchSize=i===void 0?10:i,this._flushIntervalInMilliseconds=a===void 0?5e3:a}static create(e){return e===void 0?new this:new this(e.maxNumberEvents,e.flushBatchSize,e.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=Nn$1(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(e,i,a,o){let c=this._started?this.begin(e,i,o):void 0,s=!1,d=a();if(d&&typeof d.then=="function")return s=!0,new Promise((et,$t)=>{d.then(async h=>{c&&await c.end(),et(h)},async h=>{c&&await c.end(),$t(h)})});if(!s&&c){let et=c.end();if(et&&typeof et.then=="function")return new Promise(($t,h)=>{et.then(()=>{$t(d)},b=>{h(b)})})}return d}begin(e,i,a){if(!this._started)throw new Error("profiler is not started yet");if(a===void 0){let o=Nn$1();return this.flush(o),new Rn$1(e,i,o,c=>this.endSync(c))}else{let o=a.beginTimer();return new Rn$1(e,i,0,async c=>this.end(c),o,a)}}async end(e){let i=await e.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn$1(e.category,e.name,e.startTime,i)),this.flush(i))}endSync(e){let i=Nn$1();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn$1(e.category,e.name,e.startTime,i)),this.flush(i))}logOneEvent(e){ce.verbose(`Profiler.${e.category}`,`${(e.endTime-e.startTime).toFixed(2)}ms on event '${e.name}' at ${e.endTime.toFixed(2)}`)}flush(e){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||e-this._flushTime>=this._flushIntervalInMilliseconds){for(let i=this._flushPointer;this._flushPointer<i+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=Nn$1()}}get started(){return this._started}},Nn$1=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function vs$1(e,i,a){for(let o of a){let c=o[0],s=o[1],d=o[2],et=o[3],$t=o[4];if(e.opType===c){for(let h of i)if((h.domain===s||h.domain==="ai.onnx"&&s==="")&&Fd$1(h.version,d))return{opImpl:et,opInit:$t}}}throw new TypeError(`cannot resolve operator '${e.opType}' with opsets: ${i.map(o=>`${o.domain||"ai.onnx"} v${o.version}`).join(", ")}`)}function Fd$1(e,i){if(i.endsWith("+")){let a=Number.parseInt(i.substring(0,i.length-1),10);return!isNaN(a)&&a<=e}else if(i.split("-").length===2){let a=i.split("-"),o=Number.parseInt(a[0],10),c=Number.parseInt(a[1],10);return!isNaN(o)&&!isNaN(c)&&o<=e&&e<=c}else return Number.parseInt(i,10)===e}var _s$1=L(()=>{}),Os$1=me(e=>{e.__esModule=!0;var i=function(){function a(o){if(!o)throw new TypeError("Invalid argument; `value` has no value.");this.value=a.EMPTY,o&&a.isGuid(o)&&(this.value=o)}return a.isGuid=function(o){var c=o.toString();return o&&(o instanceof a||a.validator.test(c))},a.create=function(){return new a([a.gen(2),a.gen(1),a.gen(1),a.gen(1),a.gen(3)].join("-"))},a.createEmpty=function(){return new a("emptyguid")},a.parse=function(o){return new a(o)},a.raw=function(){return[a.gen(2),a.gen(1),a.gen(1),a.gen(1),a.gen(3)].join("-")},a.gen=function(o){for(var c="",s=0;s<o;s++)c+=((1+Math.random())*65536|0).toString(16).substring(1);return c},a.prototype.equals=function(o){return a.isGuid(o)&&this.value===o.toString()},a.prototype.isEmpty=function(){return this.value===a.EMPTY},a.prototype.toString=function(){return this.value},a.prototype.toJSON=function(){return{value:this.value}},a.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),a.EMPTY="00000000-0000-0000-0000-000000000000",a}();e.Guid=i});function be(e,i,a){this.low=e|0,this.high=i|0,this.unsigned=!!a}function Xe(e){return(e&&e.__isLong__)===!0}function Is$1(e){var i=Math.clz32(e&-e);return e?31-i:i}function cr$1(e,i){var a,o,c;return i?(e>>>=0,(c=0<=e&&e<256)&&(o=As$1[e],o)?o:(a=le(e,0,!0),c&&(As$1[e]=a),a)):(e|=0,(c=-128<=e&&e<128)&&(o=Ss$1[e],o)?o:(a=le(e,e<0?-1:0,!1),c&&(Ss$1[e]=a),a))}function ct(e,i){if(isNaN(e))return i?zt$1:It;if(i){if(e<0)return zt$1;if(e>=Ls$1)return $s$1}else{if(e<=-Es$1)return nt$1;if(e+1>=Es$1)return Fs$1}return e<0?ct(-e,i).neg():le(e%Dr|0,e/Dr|0,i)}function le(e,i,a){return new be(e,i,a)}function Jo(e,i,a){if(e.length===0)throw Error("empty string");if(typeof i=="number"?(a=i,i=!1):i=!!i,e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return i?zt$1:It;if(a=a||10,a<2||36<a)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(o===0)return Jo(e.substring(1),i,a).neg();for(var c=ct(Un$1(a,8)),s=It,d=0;d<e.length;d+=8){var et=Math.min(8,e.length-d),$t=parseInt(e.substring(d,d+et),a);if(et<8){var h=ct(Un$1(a,et));s=s.mul(h).add(ct($t))}else s=s.mul(c),s=s.add(ct($t))}return s.unsigned=i,s}function St$1(e,i){return typeof e=="number"?ct(e,i):typeof e=="string"?Jo(e,i):le(e.low,e.high,typeof i=="boolean"?i:e.unsigned)}var ft,Ss$1,As$1,Un$1,Ps$1,kd$1,Dr,Ls$1,Es$1,Ds$1,It,zt$1,Er$1,Cs$1,Ko,Fs$1,$s$1,nt$1,B,Vt,Zo=L(()=>{ft=null;try{ft=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}be.prototype.__isLong__,Object.defineProperty(be.prototype,"__isLong__",{value:!0}),be.isLong=Xe,Ss$1={},As$1={},be.fromInt=cr$1,be.fromNumber=ct,be.fromBits=le,Un$1=Math.pow,be.fromString=Jo,be.fromValue=St$1,Ps$1=65536,kd$1=1<<24,Dr=Ps$1*Ps$1,Ls$1=Dr*Dr,Es$1=Ls$1/2,Ds$1=cr$1(kd$1),It=cr$1(0),be.ZERO=It,zt$1=cr$1(0,!0),be.UZERO=zt$1,Er$1=cr$1(1),be.ONE=Er$1,Cs$1=cr$1(1,!0),be.UONE=Cs$1,Ko=cr$1(-1),be.NEG_ONE=Ko,Fs$1=le(-1,2147483647,!1),be.MAX_VALUE=Fs$1,$s$1=le(-1,-1,!0),be.MAX_UNSIGNED_VALUE=$s$1,nt$1=le(0,-2147483648,!1),be.MIN_VALUE=nt$1,B=be.prototype,B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*Dr+(this.low>>>0):this.high*Dr+(this.low>>>0)},B.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(nt$1)){var i=ct(e),a=this.div(i),o=a.mul(i).sub(this);return a.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var c=ct(Un$1(e,6),this.unsigned),s=this,d="";;){var et=s.div(c),$t=s.sub(et.mul(c)).toInt()>>>0,h=$t.toString(e);if(s=et,s.isZero())return h+d;for(;h.length<6;)h="0"+h;d=""+h+d}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nt$1)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,i=31;i>0&&!(e&1<<i);i--);return this.high!=0?i+33:i+1},B.isZero=function(){return this.high===0&&this.low===0},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return(this.low&1)===1},B.isEven=function(){return(this.low&1)===0},B.equals=function(e){return Xe(e)||(e=St$1(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},B.eq=B.equals,B.notEquals=function(e){return!this.eq(e)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(e){return this.comp(e)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(e){return this.comp(e)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(e){return this.comp(e)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(e){return this.comp(e)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(e){if(Xe(e)||(e=St$1(e)),this.eq(e))return 0;var i=this.isNegative(),a=e.isNegative();return i&&!a?-1:!i&&a?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(nt$1)?nt$1:this.not().add(Er$1)},B.neg=B.negate,B.add=function(e){Xe(e)||(e=St$1(e));var i=this.high>>>16,a=this.high&65535,o=this.low>>>16,c=this.low&65535,s=e.high>>>16,d=e.high&65535,et=e.low>>>16,$t=e.low&65535,h=0,b=0,g=0,jt=0;return jt+=c+$t,g+=jt>>>16,jt&=65535,g+=o+et,b+=g>>>16,g&=65535,b+=a+d,h+=b>>>16,b&=65535,h+=i+s,h&=65535,le(g<<16|jt,h<<16|b,this.unsigned)},B.subtract=function(e){return Xe(e)||(e=St$1(e)),this.add(e.neg())},B.sub=B.subtract,B.multiply=function(e){if(this.isZero())return this;if(Xe(e)||(e=St$1(e)),ft){var i=ft.mul(this.low,this.high,e.low,e.high);return le(i,ft.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?zt$1:It;if(this.eq(nt$1))return e.isOdd()?nt$1:It;if(e.eq(nt$1))return this.isOdd()?nt$1:It;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Ds$1)&&e.lt(Ds$1))return ct(this.toNumber()*e.toNumber(),this.unsigned);var a=this.high>>>16,o=this.high&65535,c=this.low>>>16,s=this.low&65535,d=e.high>>>16,et=e.high&65535,$t=e.low>>>16,h=e.low&65535,b=0,g=0,jt=0,Ht=0;return Ht+=s*h,jt+=Ht>>>16,Ht&=65535,jt+=c*h,g+=jt>>>16,jt&=65535,jt+=s*$t,g+=jt>>>16,jt&=65535,g+=o*h,b+=g>>>16,g&=65535,g+=c*$t,b+=g>>>16,g&=65535,g+=s*et,b+=g>>>16,g&=65535,b+=a*h+o*$t+c*et+s*d,b&=65535,le(jt<<16|Ht,b<<16|g,this.unsigned)},B.mul=B.multiply,B.divide=function(e){if(Xe(e)||(e=St$1(e)),e.isZero())throw Error("division by zero");if(ft){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var i=(this.unsigned?ft.div_u:ft.div_s)(this.low,this.high,e.low,e.high);return le(i,ft.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?zt$1:It;var a,o,c;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return zt$1;if(e.gt(this.shru(1)))return Cs$1;c=zt$1}else{if(this.eq(nt$1)){if(e.eq(Er$1)||e.eq(Ko))return nt$1;if(e.eq(nt$1))return Er$1;var s=this.shr(1);return a=s.div(e).shl(1),a.eq(It)?e.isNegative()?Er$1:Ko:(o=this.sub(e.mul(a)),c=a.add(o.div(e)),c)}else if(e.eq(nt$1))return this.unsigned?zt$1:It;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();c=It}for(o=this;o.gte(e);){a=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var d=Math.ceil(Math.log(a)/Math.LN2),et=d<=48?1:Un$1(2,d-48),$t=ct(a),h=$t.mul(e);h.isNegative()||h.gt(o);)a-=et,$t=ct(a,this.unsigned),h=$t.mul(e);$t.isZero()&&($t=Er$1),c=c.add($t),o=o.sub(h)}return c},B.div=B.divide,B.modulo=function(e){if(Xe(e)||(e=St$1(e)),ft){var i=(this.unsigned?ft.rem_u:ft.rem_s)(this.low,this.high,e.low,e.high);return le(i,ft.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return le(~this.low,~this.high,this.unsigned)},B.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},B.clz=B.countLeadingZeros,B.countTrailingZeros=function(){return this.low?Is$1(this.low):Is$1(this.high)+32},B.ctz=B.countTrailingZeros,B.and=function(e){return Xe(e)||(e=St$1(e)),le(this.low&e.low,this.high&e.high,this.unsigned)},B.or=function(e){return Xe(e)||(e=St$1(e)),le(this.low|e.low,this.high|e.high,this.unsigned)},B.xor=function(e){return Xe(e)||(e=St$1(e)),le(this.low^e.low,this.high^e.high,this.unsigned)},B.shiftLeft=function(e){return Xe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):le(0,this.low<<e-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(e){return Xe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):le(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(e){return Xe(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?le(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?le(this.high,0,this.unsigned):le(this.high>>>e-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.rotateLeft=function(e){var i;return Xe(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?le(this.high,this.low,this.unsigned):e<32?(i=32-e,le(this.low<<e|this.high>>>i,this.high<<e|this.low>>>i,this.unsigned)):(e-=32,i=32-e,le(this.high<<e|this.low>>>i,this.low<<e|this.high>>>i,this.unsigned))},B.rotl=B.rotateLeft,B.rotateRight=function(e){var i;return Xe(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?le(this.high,this.low,this.unsigned):e<32?(i=32-e,le(this.high<<i|this.low>>>e,this.low<<i|this.high>>>e,this.unsigned)):(e-=32,i=32-e,le(this.low<<i|this.high>>>e,this.high<<i|this.low>>>e,this.unsigned))},B.rotr=B.rotateRight,B.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0)},B.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var e=this.high,i=this.low;return[i&255,i>>>8&255,i>>>16&255,i>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},B.toBytesBE=function(){var e=this.high,i=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,i>>>24,i>>>16&255,i>>>8&255,i&255]},be.fromBytes=function(e,i,a){return a?be.fromBytesLE(e,i):be.fromBytesBE(e,i)},be.fromBytesLE=function(e,i){return new be(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,i)},be.fromBytesBE=function(e,i){return new be(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],i)},Vt=be}),_,zn$1=L(()=>{_={},_.Offset,_.Table,_.SIZEOF_SHORT=2,_.SIZEOF_INT=4,_.FILE_IDENTIFIER_LENGTH=4,_.SIZE_PREFIX_LENGTH=4,_.Encoding={UTF8_BYTES:1,UTF16_STRING:2},_.int32=new Int32Array(2),_.float32=new Float32Array(_.int32.buffer),_.float64=new Float64Array(_.int32.buffer),_.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,_.Long=function(e,i){this.low=e|0,this.high=i|0},_.Long.create=function(e,i){return e==0&&i==0?_.Long.ZERO:new _.Long(e,i)},_.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296},_.Long.prototype.equals=function(e){return this.low==e.low&&this.high==e.high},_.Long.ZERO=new _.Long(0,0),_.Builder=function(e){if(e)var i=e;else var i=1024;this.bb=_.ByteBuffer.allocate(i),this.space=i,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.forceDefaults=function(e){this.force_defaults=e},_.Builder.prototype.dataBuffer=function(){return this.bb},_.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},_.Builder.prototype.prep=function(e,i){e>this.minalign&&(this.minalign=e);for(var a=~(this.bb.capacity()-this.space+i)+1&e-1;this.space<a+e+i;){var o=this.bb.capacity();this.bb=_.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-o}this.pad(a)},_.Builder.prototype.pad=function(e){for(var i=0;i<e;i++)this.bb.writeInt8(--this.space,0)},_.Builder.prototype.writeInt8=function(e){this.bb.writeInt8(this.space-=1,e)},_.Builder.prototype.writeInt16=function(e){this.bb.writeInt16(this.space-=2,e)},_.Builder.prototype.writeInt32=function(e){this.bb.writeInt32(this.space-=4,e)},_.Builder.prototype.writeInt64=function(e){this.bb.writeInt64(this.space-=8,e)},_.Builder.prototype.writeFloat32=function(e){this.bb.writeFloat32(this.space-=4,e)},_.Builder.prototype.writeFloat64=function(e){this.bb.writeFloat64(this.space-=8,e)},_.Builder.prototype.addInt8=function(e){this.prep(1,0),this.writeInt8(e)},_.Builder.prototype.addInt16=function(e){this.prep(2,0),this.writeInt16(e)},_.Builder.prototype.addInt32=function(e){this.prep(4,0),this.writeInt32(e)},_.Builder.prototype.addInt64=function(e){this.prep(8,0),this.writeInt64(e)},_.Builder.prototype.addFloat32=function(e){this.prep(4,0),this.writeFloat32(e)},_.Builder.prototype.addFloat64=function(e){this.prep(8,0),this.writeFloat64(e)},_.Builder.prototype.addFieldInt8=function(e,i,a){(this.force_defaults||i!=a)&&(this.addInt8(i),this.slot(e))},_.Builder.prototype.addFieldInt16=function(e,i,a){(this.force_defaults||i!=a)&&(this.addInt16(i),this.slot(e))},_.Builder.prototype.addFieldInt32=function(e,i,a){(this.force_defaults||i!=a)&&(this.addInt32(i),this.slot(e))},_.Builder.prototype.addFieldInt64=function(e,i,a){(this.force_defaults||!i.equals(a))&&(this.addInt64(i),this.slot(e))},_.Builder.prototype.addFieldFloat32=function(e,i,a){(this.force_defaults||i!=a)&&(this.addFloat32(i),this.slot(e))},_.Builder.prototype.addFieldFloat64=function(e,i,a){(this.force_defaults||i!=a)&&(this.addFloat64(i),this.slot(e))},_.Builder.prototype.addFieldOffset=function(e,i,a){(this.force_defaults||i!=a)&&(this.addOffset(i),this.slot(e))},_.Builder.prototype.addFieldStruct=function(e,i,a){i!=a&&(this.nested(i),this.slot(e))},_.Builder.prototype.nested=function(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},_.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},_.Builder.prototype.slot=function(e){this.vtable[e]=this.offset()},_.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},_.Builder.growByteBuffer=function(e){var i=e.capacity();if(i&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var a=i<<1,o=_.ByteBuffer.allocate(a);return o.setPosition(a-i),o.bytes().set(e.bytes(),a-i),o},_.Builder.prototype.addOffset=function(e){this.prep(_.SIZEOF_INT,0),this.writeInt32(this.offset()-e+_.SIZEOF_INT)},_.Builder.prototype.startObject=function(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(var i=0;i<e;i++)this.vtable[i]=0;this.isNested=!0,this.object_start=this.offset()},_.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var e=this.offset(),i=this.vtable_in_use-1;i>=0&&this.vtable[i]==0;i--);for(var a=i+1;i>=0;i--)this.addInt16(this.vtable[i]!=0?e-this.vtable[i]:0);var o=2;this.addInt16(e-this.object_start);var c=(a+o)*_.SIZEOF_SHORT;this.addInt16(c);var s=0,d=this.space;e:for(i=0;i<this.vtables.length;i++){var et=this.bb.capacity()-this.vtables[i];if(c==this.bb.readInt16(et)){for(var $t=_.SIZEOF_SHORT;$t<c;$t+=_.SIZEOF_SHORT)if(this.bb.readInt16(d+$t)!=this.bb.readInt16(et+$t))continue e;s=this.vtables[i];break}}return s?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,s-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e},_.Builder.prototype.finish=function(e,i,a){var o=a?_.SIZE_PREFIX_LENGTH:0;if(i){var c=i;if(this.prep(this.minalign,_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH+o),c.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var s=_.FILE_IDENTIFIER_LENGTH-1;s>=0;s--)this.writeInt8(c.charCodeAt(s))}this.prep(this.minalign,_.SIZEOF_INT+o),this.addOffset(e),o&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},_.Builder.prototype.finishSizePrefixed=function(e,i){this.finish(e,i,!0)},_.Builder.prototype.requiredField=function(e,i){var a=this.bb.capacity()-e,o=a-this.bb.readInt32(a),c=this.bb.readInt16(o+i)!=0;if(!c)throw new Error("FlatBuffers: field "+i+" must be set")},_.Builder.prototype.startVector=function(e,i,a){this.notNested(),this.vector_num_elems=i,this.prep(_.SIZEOF_INT,e*i),this.prep(a,e*i)},_.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},_.Builder.prototype.createString=function(e){if(e instanceof Uint8Array)var i=e;else for(var i=[],a=0;a<e.length;){var o,c=e.charCodeAt(a++);if(c<55296||c>=56320)o=c;else{var s=e.charCodeAt(a++);o=(c<<10)+s+(65536-56623104-56320)}o<128?i.push(o):(o<2048?i.push(o>>6&31|192):(o<65536?i.push(o>>12&15|224):i.push(o>>18&7|240,o>>12&63|128),i.push(o>>6&63|128)),i.push(o&63|128))}this.addInt8(0),this.startVector(1,i.length,1),this.bb.setPosition(this.space-=i.length);for(var a=0,d=this.space,et=this.bb.bytes();a<i.length;a++)et[d++]=i[a];return this.endVector()},_.Builder.prototype.createLong=function(e,i){return _.Long.create(e,i)},_.ByteBuffer=function(e){this.bytes_=e,this.position_=0},_.ByteBuffer.allocate=function(e){return new _.ByteBuffer(new Uint8Array(e))},_.ByteBuffer.prototype.clear=function(){this.position_=0},_.ByteBuffer.prototype.bytes=function(){return this.bytes_},_.ByteBuffer.prototype.position=function(){return this.position_},_.ByteBuffer.prototype.setPosition=function(e){this.position_=e},_.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},_.ByteBuffer.prototype.readInt8=function(e){return this.readUint8(e)<<24>>24},_.ByteBuffer.prototype.readUint8=function(e){return this.bytes_[e]},_.ByteBuffer.prototype.readInt16=function(e){return this.readUint16(e)<<16>>16},_.ByteBuffer.prototype.readUint16=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8},_.ByteBuffer.prototype.readInt32=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24},_.ByteBuffer.prototype.readUint32=function(e){return this.readInt32(e)>>>0},_.ByteBuffer.prototype.readInt64=function(e){return new _.Long(this.readInt32(e),this.readInt32(e+4))},_.ByteBuffer.prototype.readUint64=function(e){return new _.Long(this.readUint32(e),this.readUint32(e+4))},_.ByteBuffer.prototype.readFloat32=function(e){return _.int32[0]=this.readInt32(e),_.float32[0]},_.ByteBuffer.prototype.readFloat64=function(e){return _.int32[_.isLittleEndian?0:1]=this.readInt32(e),_.int32[_.isLittleEndian?1:0]=this.readInt32(e+4),_.float64[0]},_.ByteBuffer.prototype.writeInt8=function(e,i){this.bytes_[e]=i},_.ByteBuffer.prototype.writeUint8=function(e,i){this.bytes_[e]=i},_.ByteBuffer.prototype.writeInt16=function(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8},_.ByteBuffer.prototype.writeUint16=function(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8},_.ByteBuffer.prototype.writeInt32=function(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8,this.bytes_[e+2]=i>>16,this.bytes_[e+3]=i>>24},_.ByteBuffer.prototype.writeUint32=function(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8,this.bytes_[e+2]=i>>16,this.bytes_[e+3]=i>>24},_.ByteBuffer.prototype.writeInt64=function(e,i){this.writeInt32(e,i.low),this.writeInt32(e+4,i.high)},_.ByteBuffer.prototype.writeUint64=function(e,i){this.writeUint32(e,i.low),this.writeUint32(e+4,i.high)},_.ByteBuffer.prototype.writeFloat32=function(e,i){_.float32[0]=i,this.writeInt32(e,_.int32[0])},_.ByteBuffer.prototype.writeFloat64=function(e,i){_.float64[0]=i,this.writeInt32(e,_.int32[_.isLittleEndian?0:1]),this.writeInt32(e+4,_.int32[_.isLittleEndian?1:0])},_.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var e="",i=0;i<_.FILE_IDENTIFIER_LENGTH;i++)e+=String.fromCharCode(this.readInt8(this.position_+_.SIZEOF_INT+i));return e},_.ByteBuffer.prototype.__offset=function(e,i){var a=e-this.readInt32(e);return i<this.readInt16(a)?this.readInt16(a+i):0},_.ByteBuffer.prototype.__union=function(e,i){return e.bb_pos=i+this.readInt32(i),e.bb=this,e},_.ByteBuffer.prototype.__string=function(e,i){e+=this.readInt32(e);var a=this.readInt32(e),o="",c=0;if(e+=_.SIZEOF_INT,i===_.Encoding.UTF8_BYTES)return this.bytes_.subarray(e,e+a);for(;c<a;){var s,d=this.readUint8(e+c++);if(d<192)s=d;else{var et=this.readUint8(e+c++);if(d<224)s=(d&31)<<6|et&63;else{var $t=this.readUint8(e+c++);if(d<240)s=(d&15)<<12|(et&63)<<6|$t&63;else{var h=this.readUint8(e+c++);s=(d&7)<<18|(et&63)<<12|($t&63)<<6|h&63}}}s<65536?o+=String.fromCharCode(s):(s-=65536,o+=String.fromCharCode((s>>10)+55296,(s&1024-1)+56320))}return o},_.ByteBuffer.prototype.__indirect=function(e){return e+this.readInt32(e)},_.ByteBuffer.prototype.__vector=function(e){return e+this.readInt32(e)+_.SIZEOF_INT},_.ByteBuffer.prototype.__vector_len=function(e){return this.readInt32(e+this.readInt32(e))},_.ByteBuffer.prototype.__has_identifier=function(e){if(e.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var i=0;i<_.FILE_IDENTIFIER_LENGTH;i++)if(e.charCodeAt(i)!=this.readInt8(this.position_+_.SIZEOF_INT+i))return!1;return!0},_.ByteBuffer.prototype.createLong=function(e,i){return _.Long.create(e,i)}}),V,tn$1=L(()=>{zn$1(),(e=>{(i=>{(a=>{(o=>(o[o.UNDEFINED=0]="UNDEFINED",o[o.FLOAT=1]="FLOAT",o[o.INT=2]="INT",o[o.STRING=3]="STRING",o[o.TENSOR=4]="TENSOR",o[o.GRAPH=5]="GRAPH",o[o.FLOATS=6]="FLOATS",o[o.INTS=7]="INTS",o[o.STRINGS=8]="STRINGS",o[o.TENSORS=9]="TENSORS",o[o.GRAPHS=10]="GRAPHS",o[o.SPARSE_TENSOR=11]="SPARSE_TENSOR",o[o.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(a.AttributeType||(a.AttributeType={}))})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{(o=>(o[o.UNKNOWN=0]="UNKNOWN",o[o.VALUE=1]="VALUE",o[o.PARAM=2]="PARAM"))(a.DimensionValueType||(a.DimensionValueType={}))})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{(o=>(o[o.UNDEFINED=0]="UNDEFINED",o[o.FLOAT=1]="FLOAT",o[o.UINT8=2]="UINT8",o[o.INT8=3]="INT8",o[o.UINT16=4]="UINT16",o[o.INT16=5]="INT16",o[o.INT32=6]="INT32",o[o.INT64=7]="INT64",o[o.STRING=8]="STRING",o[o.BOOL=9]="BOOL",o[o.FLOAT16=10]="FLOAT16",o[o.DOUBLE=11]="DOUBLE",o[o.UINT32=12]="UINT32",o[o.UINT64=13]="UINT64",o[o.COMPLEX64=14]="COMPLEX64",o[o.COMPLEX128=15]="COMPLEX128",o[o.BFLOAT16=16]="BFLOAT16",o[o.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",o[o.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",o[o.FLOAT8E5M2=19]="FLOAT8E5M2",o[o.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(a.TensorDataType||(a.TensorDataType={}))})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{(o=>(o[o.Primitive=0]="Primitive",o[o.Fused=1]="Fused"))(a.NodeType||(a.NodeType={}))})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{(o=>(o[o.NONE=0]="NONE",o[o.tensor_type=1]="tensor_type",o[o.sequence_type=2]="sequence_type",o[o.map_type=3]="map_type"))(a.TypeInfoValue||(a.TypeInfoValue={}))})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsShape(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsShape(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}dim(s,d){let et=this.bb.__offset(this.bb_pos,4);return et?(d||new e.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+et)+s*4),this.bb):null}dimLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}static startShape(s){s.startObject(1)}static addDim(s,d){s.addFieldOffset(0,d,0)}static createDimVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startDimVector(s,d){s.startVector(4,d,4)}static endShape(s){return s.endObject()}static createShape(s,d){return o.startShape(s),o.addDim(s,d),o.endShape(s)}}a.Shape=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsDimension(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDimension(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}value(s){let d=this.bb.__offset(this.bb_pos,4);return d?(s||new e.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}denotation(s){let d=this.bb.__offset(this.bb_pos,6);return d?this.bb.__string(this.bb_pos+d,s):null}static startDimension(s){s.startObject(2)}static addValue(s,d){s.addFieldOffset(0,d,0)}static addDenotation(s,d){s.addFieldOffset(1,d,0)}static endDimension(s){return s.endObject()}static createDimension(s,d,et){return o.startDimension(s),o.addValue(s,d),o.addDenotation(s,et),o.endDimension(s)}}a.Dimension=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsDimensionValue(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDimensionValue(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}dimType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt8(this.bb_pos+s):0}dimValue(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}dimParam(s){let d=this.bb.__offset(this.bb_pos,8);return d?this.bb.__string(this.bb_pos+d,s):null}static startDimensionValue(s){s.startObject(3)}static addDimType(s,d){s.addFieldInt8(0,d,0)}static addDimValue(s,d){s.addFieldInt64(1,d,s.createLong(0,0))}static addDimParam(s,d){s.addFieldOffset(2,d,0)}static endDimensionValue(s){return s.endObject()}static createDimensionValue(s,d,et,$t){return o.startDimensionValue(s),o.addDimType(s,d),o.addDimValue(s,et),o.addDimParam(s,$t),o.endDimensionValue(s)}}a.DimensionValue=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsTensorTypeAndShape(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTensorTypeAndShape(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}elemType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}shape(s){let d=this.bb.__offset(this.bb_pos,6);return d?(s||new e.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}static startTensorTypeAndShape(s){s.startObject(2)}static addElemType(s,d){s.addFieldInt32(0,d,0)}static addShape(s,d){s.addFieldOffset(1,d,0)}static endTensorTypeAndShape(s){return s.endObject()}static createTensorTypeAndShape(s,d,et){return o.startTensorTypeAndShape(s),o.addElemType(s,d),o.addShape(s,et),o.endTensorTypeAndShape(s)}}a.TensorTypeAndShape=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsMapType(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsMapType(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}keyType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}valueType(s){let d=this.bb.__offset(this.bb_pos,6);return d?(s||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}static startMapType(s){s.startObject(2)}static addKeyType(s,d){s.addFieldInt32(0,d,0)}static addValueType(s,d){s.addFieldOffset(1,d,0)}static endMapType(s){return s.endObject()}static createMapType(s,d,et){return o.startMapType(s),o.addKeyType(s,d),o.addValueType(s,et),o.endMapType(s)}}a.MapType=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsSequenceType(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSequenceType(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}elemType(s){let d=this.bb.__offset(this.bb_pos,4);return d?(s||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}static startSequenceType(s){s.startObject(1)}static addElemType(s,d){s.addFieldOffset(0,d,0)}static endSequenceType(s){return s.endObject()}static createSequenceType(s,d){return o.startSequenceType(s),o.addElemType(s,d),o.endSequenceType(s)}}a.SequenceType=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(s,d,et,$t){return s.prep(4,12),s.writeInt32($t),s.writeInt32(et),s.writeInt32(d),s.offset()}}a.EdgeEnd=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsNodeEdge(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsNodeEdge(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}nodeIndex(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readUint32(this.bb_pos+s):0}inputEdges(s,d){let et=this.bb.__offset(this.bb_pos,6);return et?(d||new e.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+et)+s*12,this.bb):null}inputEdgesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}outputEdges(s,d){let et=this.bb.__offset(this.bb_pos,8);return et?(d||new e.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+et)+s*12,this.bb):null}outputEdgesLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}static startNodeEdge(s){s.startObject(3)}static addNodeIndex(s,d){s.addFieldInt32(0,d,0)}static addInputEdges(s,d){s.addFieldOffset(1,d,0)}static startInputEdgesVector(s,d){s.startVector(12,d,4)}static addOutputEdges(s,d){s.addFieldOffset(2,d,0)}static startOutputEdgesVector(s,d){s.startVector(12,d,4)}static endNodeEdge(s){return s.endObject()}static createNodeEdge(s,d,et,$t){return o.startNodeEdge(s),o.addNodeIndex(s,d),o.addInputEdges(s,et),o.addOutputEdges(s,$t),o.endNodeEdge(s)}}a.NodeEdge=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsNode(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsNode(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}name(s){let d=this.bb.__offset(this.bb_pos,4);return d?this.bb.__string(this.bb_pos+d,s):null}docString(s){let d=this.bb.__offset(this.bb_pos,6);return d?this.bb.__string(this.bb_pos+d,s):null}domain(s){let d=this.bb.__offset(this.bb_pos,8);return d?this.bb.__string(this.bb_pos+d,s):null}sinceVersion(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readInt32(this.bb_pos+s):0}index(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.readUint32(this.bb_pos+s):0}opType(s){let d=this.bb.__offset(this.bb_pos,14);return d?this.bb.__string(this.bb_pos+d,s):null}type(){let s=this.bb.__offset(this.bb_pos,16);return s?this.bb.readInt32(this.bb_pos+s):0}executionProviderType(s){let d=this.bb.__offset(this.bb_pos,18);return d?this.bb.__string(this.bb_pos+d,s):null}inputs(s,d){let et=this.bb.__offset(this.bb_pos,20);return et?this.bb.__string(this.bb.__vector(this.bb_pos+et)+s*4,d):null}inputsLength(){let s=this.bb.__offset(this.bb_pos,20);return s?this.bb.__vector_len(this.bb_pos+s):0}outputs(s,d){let et=this.bb.__offset(this.bb_pos,22);return et?this.bb.__string(this.bb.__vector(this.bb_pos+et)+s*4,d):null}outputsLength(){let s=this.bb.__offset(this.bb_pos,22);return s?this.bb.__vector_len(this.bb_pos+s):0}attributes(s,d){let et=this.bb.__offset(this.bb_pos,24);return et?(d||new e.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+et)+s*4),this.bb):null}attributesLength(){let s=this.bb.__offset(this.bb_pos,24);return s?this.bb.__vector_len(this.bb_pos+s):0}inputArgCounts(s){let d=this.bb.__offset(this.bb_pos,26);return d?this.bb.readInt32(this.bb.__vector(this.bb_pos+d)+s*4):0}inputArgCountsLength(){let s=this.bb.__offset(this.bb_pos,26);return s?this.bb.__vector_len(this.bb_pos+s):0}inputArgCountsArray(){let s=this.bb.__offset(this.bb_pos,26);return s?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}implicitInputs(s,d){let et=this.bb.__offset(this.bb_pos,28);return et?this.bb.__string(this.bb.__vector(this.bb_pos+et)+s*4,d):null}implicitInputsLength(){let s=this.bb.__offset(this.bb_pos,28);return s?this.bb.__vector_len(this.bb_pos+s):0}static startNode(s){s.startObject(13)}static addName(s,d){s.addFieldOffset(0,d,0)}static addDocString(s,d){s.addFieldOffset(1,d,0)}static addDomain(s,d){s.addFieldOffset(2,d,0)}static addSinceVersion(s,d){s.addFieldInt32(3,d,0)}static addIndex(s,d){s.addFieldInt32(4,d,0)}static addOpType(s,d){s.addFieldOffset(5,d,0)}static addType(s,d){s.addFieldInt32(6,d,0)}static addExecutionProviderType(s,d){s.addFieldOffset(7,d,0)}static addInputs(s,d){s.addFieldOffset(8,d,0)}static createInputsVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startInputsVector(s,d){s.startVector(4,d,4)}static addOutputs(s,d){s.addFieldOffset(9,d,0)}static createOutputsVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startOutputsVector(s,d){s.startVector(4,d,4)}static addAttributes(s,d){s.addFieldOffset(10,d,0)}static createAttributesVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startAttributesVector(s,d){s.startVector(4,d,4)}static addInputArgCounts(s,d){s.addFieldOffset(11,d,0)}static createInputArgCountsVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addInt32(d[et]);return s.endVector()}static startInputArgCountsVector(s,d){s.startVector(4,d,4)}static addImplicitInputs(s,d){s.addFieldOffset(12,d,0)}static createImplicitInputsVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startImplicitInputsVector(s,d){s.startVector(4,d,4)}static endNode(s){return s.endObject()}static createNode(s,d,et,$t,h,b,g,jt,Ht,Kt,or,jr,Lr,ir){return o.startNode(s),o.addName(s,d),o.addDocString(s,et),o.addDomain(s,$t),o.addSinceVersion(s,h),o.addIndex(s,b),o.addOpType(s,g),o.addType(s,jt),o.addExecutionProviderType(s,Ht),o.addInputs(s,Kt),o.addOutputs(s,or),o.addAttributes(s,jr),o.addInputArgCounts(s,Lr),o.addImplicitInputs(s,ir),o.endNode(s)}}a.Node=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsValueInfo(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsValueInfo(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}name(s){let d=this.bb.__offset(this.bb_pos,4);return d?this.bb.__string(this.bb_pos+d,s):null}docString(s){let d=this.bb.__offset(this.bb_pos,6);return d?this.bb.__string(this.bb_pos+d,s):null}type(s){let d=this.bb.__offset(this.bb_pos,8);return d?(s||new e.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}static startValueInfo(s){s.startObject(3)}static addName(s,d){s.addFieldOffset(0,d,0)}static addDocString(s,d){s.addFieldOffset(1,d,0)}static addType(s,d){s.addFieldOffset(2,d,0)}static endValueInfo(s){return s.endObject()}static createValueInfo(s,d,et,$t){return o.startValueInfo(s),o.addName(s,d),o.addDocString(s,et),o.addType(s,$t),o.endValueInfo(s)}}a.ValueInfo=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsTypeInfo(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTypeInfo(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}denotation(s){let d=this.bb.__offset(this.bb_pos,4);return d?this.bb.__string(this.bb_pos+d,s):null}valueType(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readUint8(this.bb_pos+s):0}value(s){let d=this.bb.__offset(this.bb_pos,8);return d?this.bb.__union(s,this.bb_pos+d):null}static startTypeInfo(s){s.startObject(3)}static addDenotation(s,d){s.addFieldOffset(0,d,0)}static addValueType(s,d){s.addFieldInt8(1,d,0)}static addValue(s,d){s.addFieldOffset(2,d,0)}static endTypeInfo(s){return s.endObject()}static createTypeInfo(s,d,et,$t){return o.startTypeInfo(s),o.addDenotation(s,d),o.addValueType(s,et),o.addValue(s,$t),o.endTypeInfo(s)}}a.TypeInfo=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsOperatorSetId(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsOperatorSetId(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}domain(s){let d=this.bb.__offset(this.bb_pos,4);return d?this.bb.__string(this.bb_pos+d,s):null}version(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}static startOperatorSetId(s){s.startObject(2)}static addDomain(s,d){s.addFieldOffset(0,d,0)}static addVersion(s,d){s.addFieldInt64(1,d,s.createLong(0,0))}static endOperatorSetId(s){return s.endObject()}static createOperatorSetId(s,d,et){return o.startOperatorSetId(s),o.addDomain(s,d),o.addVersion(s,et),o.endOperatorSetId(s)}}a.OperatorSetId=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsTensor(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTensor(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}name(s){let d=this.bb.__offset(this.bb_pos,4);return d?this.bb.__string(this.bb_pos+d,s):null}docString(s){let d=this.bb.__offset(this.bb_pos,6);return d?this.bb.__string(this.bb_pos+d,s):null}dims(s){let d=this.bb.__offset(this.bb_pos,8);return d?this.bb.readInt64(this.bb.__vector(this.bb_pos+d)+s*8):this.bb.createLong(0,0)}dimsLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}dataType(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readInt32(this.bb_pos+s):0}rawData(s){let d=this.bb.__offset(this.bb_pos,12);return d?this.bb.readUint8(this.bb.__vector(this.bb_pos+d)+s):0}rawDataLength(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__vector_len(this.bb_pos+s):0}rawDataArray(){let s=this.bb.__offset(this.bb_pos,12);return s?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}stringData(s,d){let et=this.bb.__offset(this.bb_pos,14);return et?this.bb.__string(this.bb.__vector(this.bb_pos+et)+s*4,d):null}stringDataLength(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__vector_len(this.bb_pos+s):0}static startTensor(s){s.startObject(6)}static addName(s,d){s.addFieldOffset(0,d,0)}static addDocString(s,d){s.addFieldOffset(1,d,0)}static addDims(s,d){s.addFieldOffset(2,d,0)}static createDimsVector(s,d){s.startVector(8,d.length,8);for(let et=d.length-1;et>=0;et--)s.addInt64(d[et]);return s.endVector()}static startDimsVector(s,d){s.startVector(8,d,8)}static addDataType(s,d){s.addFieldInt32(3,d,0)}static addRawData(s,d){s.addFieldOffset(4,d,0)}static createRawDataVector(s,d){s.startVector(1,d.length,1);for(let et=d.length-1;et>=0;et--)s.addInt8(d[et]);return s.endVector()}static startRawDataVector(s,d){s.startVector(1,d,1)}static addStringData(s,d){s.addFieldOffset(5,d,0)}static createStringDataVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startStringDataVector(s,d){s.startVector(4,d,4)}static endTensor(s){return s.endObject()}static createTensor(s,d,et,$t,h,b,g){return o.startTensor(s),o.addName(s,d),o.addDocString(s,et),o.addDims(s,$t),o.addDataType(s,h),o.addRawData(s,b),o.addStringData(s,g),o.endTensor(s)}}a.Tensor=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsSparseTensor(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSparseTensor(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}values(s){let d=this.bb.__offset(this.bb_pos,4);return d?(s||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}indices(s){let d=this.bb.__offset(this.bb_pos,6);return d?(s||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}dims(s){let d=this.bb.__offset(this.bb_pos,8);return d?this.bb.readInt64(this.bb.__vector(this.bb_pos+d)+s*8):this.bb.createLong(0,0)}dimsLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}static startSparseTensor(s){s.startObject(3)}static addValues(s,d){s.addFieldOffset(0,d,0)}static addIndices(s,d){s.addFieldOffset(1,d,0)}static addDims(s,d){s.addFieldOffset(2,d,0)}static createDimsVector(s,d){s.startVector(8,d.length,8);for(let et=d.length-1;et>=0;et--)s.addInt64(d[et]);return s.endVector()}static startDimsVector(s,d){s.startVector(8,d,8)}static endSparseTensor(s){return s.endObject()}static createSparseTensor(s,d,et,$t){return o.startSparseTensor(s),o.addValues(s,d),o.addIndices(s,et),o.addDims(s,$t),o.endSparseTensor(s)}}a.SparseTensor=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsAttribute(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsAttribute(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}name(s){let d=this.bb.__offset(this.bb_pos,4);return d?this.bb.__string(this.bb_pos+d,s):null}docString(s){let d=this.bb.__offset(this.bb_pos,6);return d?this.bb.__string(this.bb_pos+d,s):null}type(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.readInt32(this.bb_pos+s):0}f(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readFloat32(this.bb_pos+s):0}i(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}s(s){let d=this.bb.__offset(this.bb_pos,14);return d?this.bb.__string(this.bb_pos+d,s):null}t(s){let d=this.bb.__offset(this.bb_pos,16);return d?(s||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}g(s){let d=this.bb.__offset(this.bb_pos,18);return d?(s||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}floats(s){let d=this.bb.__offset(this.bb_pos,20);return d?this.bb.readFloat32(this.bb.__vector(this.bb_pos+d)+s*4):0}floatsLength(){let s=this.bb.__offset(this.bb_pos,20);return s?this.bb.__vector_len(this.bb_pos+s):0}floatsArray(){let s=this.bb.__offset(this.bb_pos,20);return s?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}ints(s){let d=this.bb.__offset(this.bb_pos,22);return d?this.bb.readInt64(this.bb.__vector(this.bb_pos+d)+s*8):this.bb.createLong(0,0)}intsLength(){let s=this.bb.__offset(this.bb_pos,22);return s?this.bb.__vector_len(this.bb_pos+s):0}strings(s,d){let et=this.bb.__offset(this.bb_pos,24);return et?this.bb.__string(this.bb.__vector(this.bb_pos+et)+s*4,d):null}stringsLength(){let s=this.bb.__offset(this.bb_pos,24);return s?this.bb.__vector_len(this.bb_pos+s):0}tensors(s,d){let et=this.bb.__offset(this.bb_pos,26);return et?(d||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+et)+s*4),this.bb):null}tensorsLength(){let s=this.bb.__offset(this.bb_pos,26);return s?this.bb.__vector_len(this.bb_pos+s):0}graphs(s,d){let et=this.bb.__offset(this.bb_pos,28);return et?(d||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+et)+s*4),this.bb):null}graphsLength(){let s=this.bb.__offset(this.bb_pos,28);return s?this.bb.__vector_len(this.bb_pos+s):0}static startAttribute(s){s.startObject(13)}static addName(s,d){s.addFieldOffset(0,d,0)}static addDocString(s,d){s.addFieldOffset(1,d,0)}static addType(s,d){s.addFieldInt32(2,d,0)}static addF(s,d){s.addFieldFloat32(3,d,0)}static addI(s,d){s.addFieldInt64(4,d,s.createLong(0,0))}static addS(s,d){s.addFieldOffset(5,d,0)}static addT(s,d){s.addFieldOffset(6,d,0)}static addG(s,d){s.addFieldOffset(7,d,0)}static addFloats(s,d){s.addFieldOffset(8,d,0)}static createFloatsVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addFloat32(d[et]);return s.endVector()}static startFloatsVector(s,d){s.startVector(4,d,4)}static addInts(s,d){s.addFieldOffset(9,d,0)}static createIntsVector(s,d){s.startVector(8,d.length,8);for(let et=d.length-1;et>=0;et--)s.addInt64(d[et]);return s.endVector()}static startIntsVector(s,d){s.startVector(8,d,8)}static addStrings(s,d){s.addFieldOffset(10,d,0)}static createStringsVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startStringsVector(s,d){s.startVector(4,d,4)}static addTensors(s,d){s.addFieldOffset(11,d,0)}static createTensorsVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startTensorsVector(s,d){s.startVector(4,d,4)}static addGraphs(s,d){s.addFieldOffset(12,d,0)}static createGraphsVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startGraphsVector(s,d){s.startVector(4,d,4)}static endAttribute(s){return s.endObject()}static createAttribute(s,d,et,$t,h,b,g,jt,Ht,Kt,or,jr,Lr,ir){return o.startAttribute(s),o.addName(s,d),o.addDocString(s,et),o.addType(s,$t),o.addF(s,h),o.addI(s,b),o.addS(s,g),o.addT(s,jt),o.addG(s,Ht),o.addFloats(s,Kt),o.addInts(s,or),o.addStrings(s,jr),o.addTensors(s,Lr),o.addGraphs(s,ir),o.endAttribute(s)}}a.Attribute=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsGraph(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsGraph(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}initializers(s,d){let et=this.bb.__offset(this.bb_pos,4);return et?(d||new e.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+et)+s*4),this.bb):null}initializersLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}nodeArgs(s,d){let et=this.bb.__offset(this.bb_pos,6);return et?(d||new e.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+et)+s*4),this.bb):null}nodeArgsLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}nodes(s,d){let et=this.bb.__offset(this.bb_pos,8);return et?(d||new e.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+et)+s*4),this.bb):null}nodesLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}maxNodeIndex(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readUint32(this.bb_pos+s):0}nodeEdges(s,d){let et=this.bb.__offset(this.bb_pos,12);return et?(d||new e.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+et)+s*4),this.bb):null}nodeEdgesLength(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__vector_len(this.bb_pos+s):0}inputs(s,d){let et=this.bb.__offset(this.bb_pos,14);return et?this.bb.__string(this.bb.__vector(this.bb_pos+et)+s*4,d):null}inputsLength(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__vector_len(this.bb_pos+s):0}outputs(s,d){let et=this.bb.__offset(this.bb_pos,16);return et?this.bb.__string(this.bb.__vector(this.bb_pos+et)+s*4,d):null}outputsLength(){let s=this.bb.__offset(this.bb_pos,16);return s?this.bb.__vector_len(this.bb_pos+s):0}sparseInitializers(s,d){let et=this.bb.__offset(this.bb_pos,18);return et?(d||new e.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+et)+s*4),this.bb):null}sparseInitializersLength(){let s=this.bb.__offset(this.bb_pos,18);return s?this.bb.__vector_len(this.bb_pos+s):0}static startGraph(s){s.startObject(8)}static addInitializers(s,d){s.addFieldOffset(0,d,0)}static createInitializersVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startInitializersVector(s,d){s.startVector(4,d,4)}static addNodeArgs(s,d){s.addFieldOffset(1,d,0)}static createNodeArgsVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startNodeArgsVector(s,d){s.startVector(4,d,4)}static addNodes(s,d){s.addFieldOffset(2,d,0)}static createNodesVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startNodesVector(s,d){s.startVector(4,d,4)}static addMaxNodeIndex(s,d){s.addFieldInt32(3,d,0)}static addNodeEdges(s,d){s.addFieldOffset(4,d,0)}static createNodeEdgesVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startNodeEdgesVector(s,d){s.startVector(4,d,4)}static addInputs(s,d){s.addFieldOffset(5,d,0)}static createInputsVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startInputsVector(s,d){s.startVector(4,d,4)}static addOutputs(s,d){s.addFieldOffset(6,d,0)}static createOutputsVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startOutputsVector(s,d){s.startVector(4,d,4)}static addSparseInitializers(s,d){s.addFieldOffset(7,d,0)}static createSparseInitializersVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startSparseInitializersVector(s,d){s.startVector(4,d,4)}static endGraph(s){return s.endObject()}static createGraph(s,d,et,$t,h,b,g,jt,Ht){return o.startGraph(s),o.addInitializers(s,d),o.addNodeArgs(s,et),o.addNodes(s,$t),o.addMaxNodeIndex(s,h),o.addNodeEdges(s,b),o.addInputs(s,g),o.addOutputs(s,jt),o.addSparseInitializers(s,Ht),o.endGraph(s)}}a.Graph=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsModel(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsModel(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}irVersion(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}opsetImport(s,d){let et=this.bb.__offset(this.bb_pos,6);return et?(d||new e.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+et)+s*4),this.bb):null}opsetImportLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}producerName(s){let d=this.bb.__offset(this.bb_pos,8);return d?this.bb.__string(this.bb_pos+d,s):null}producerVersion(s){let d=this.bb.__offset(this.bb_pos,10);return d?this.bb.__string(this.bb_pos+d,s):null}domain(s){let d=this.bb.__offset(this.bb_pos,12);return d?this.bb.__string(this.bb_pos+d,s):null}modelVersion(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}docString(s){let d=this.bb.__offset(this.bb_pos,16);return d?this.bb.__string(this.bb_pos+d,s):null}graph(s){let d=this.bb.__offset(this.bb_pos,18);return d?(s||new e.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}graphDocString(s){let d=this.bb.__offset(this.bb_pos,20);return d?this.bb.__string(this.bb_pos+d,s):null}static startModel(s){s.startObject(9)}static addIrVersion(s,d){s.addFieldInt64(0,d,s.createLong(0,0))}static addOpsetImport(s,d){s.addFieldOffset(1,d,0)}static createOpsetImportVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startOpsetImportVector(s,d){s.startVector(4,d,4)}static addProducerName(s,d){s.addFieldOffset(2,d,0)}static addProducerVersion(s,d){s.addFieldOffset(3,d,0)}static addDomain(s,d){s.addFieldOffset(4,d,0)}static addModelVersion(s,d){s.addFieldInt64(5,d,s.createLong(0,0))}static addDocString(s,d){s.addFieldOffset(6,d,0)}static addGraph(s,d){s.addFieldOffset(7,d,0)}static addGraphDocString(s,d){s.addFieldOffset(8,d,0)}static endModel(s){return s.endObject()}static createModel(s,d,et,$t,h,b,g,jt,Ht,Kt){return o.startModel(s),o.addIrVersion(s,d),o.addOpsetImport(s,et),o.addProducerName(s,$t),o.addProducerVersion(s,h),o.addDomain(s,b),o.addModelVersion(s,g),o.addDocString(s,jt),o.addGraph(s,Ht),o.addGraphDocString(s,Kt),o.endModel(s)}}a.Model=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsKernelCreateInfos(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsKernelCreateInfos(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}nodeIndices(s){let d=this.bb.__offset(this.bb_pos,4);return d?this.bb.readUint32(this.bb.__vector(this.bb_pos+d)+s*4):0}nodeIndicesLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}nodeIndicesArray(){let s=this.bb.__offset(this.bb_pos,4);return s?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}kernelDefHashes(s){let d=this.bb.__offset(this.bb_pos,6);return d?this.bb.readUint64(this.bb.__vector(this.bb_pos+d)+s*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}static startKernelCreateInfos(s){s.startObject(2)}static addNodeIndices(s,d){s.addFieldOffset(0,d,0)}static createNodeIndicesVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addInt32(d[et]);return s.endVector()}static startNodeIndicesVector(s,d){s.startVector(4,d,4)}static addKernelDefHashes(s,d){s.addFieldOffset(1,d,0)}static createKernelDefHashesVector(s,d){s.startVector(8,d.length,8);for(let et=d.length-1;et>=0;et--)s.addInt64(d[et]);return s.endVector()}static startKernelDefHashesVector(s,d){s.startVector(8,d,8)}static endKernelCreateInfos(s){return s.endObject()}static createKernelCreateInfos(s,d,et){return o.startKernelCreateInfos(s),o.addNodeIndices(s,d),o.addKernelDefHashes(s,et),o.endKernelCreateInfos(s)}}a.KernelCreateInfos=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsSubGraphSessionState(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSubGraphSessionState(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}graphId(s){let d=this.bb.__offset(this.bb_pos,4);return d?this.bb.__string(this.bb_pos+d,s):null}sessionState(s){let d=this.bb.__offset(this.bb_pos,6);return d?(s||new e.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}static startSubGraphSessionState(s){s.startObject(2)}static addGraphId(s,d){s.addFieldOffset(0,d,0)}static addSessionState(s,d){s.addFieldOffset(1,d,0)}static endSubGraphSessionState(s){let d=s.endObject();return s.requiredField(d,4),d}static createSubGraphSessionState(s,d,et){return o.startSubGraphSessionState(s),o.addGraphId(s,d),o.addSessionState(s,et),o.endSubGraphSessionState(s)}}a.SubGraphSessionState=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsSessionState(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSessionState(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}kernels(s){let d=this.bb.__offset(this.bb_pos,4);return d?(s||new e.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}subGraphSessionStates(s,d){let et=this.bb.__offset(this.bb_pos,6);return et?(d||new e.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+et)+s*4),this.bb):null}subGraphSessionStatesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}static startSessionState(s){s.startObject(2)}static addKernels(s,d){s.addFieldOffset(0,d,0)}static addSubGraphSessionStates(s,d){s.addFieldOffset(1,d,0)}static createSubGraphSessionStatesVector(s,d){s.startVector(4,d.length,4);for(let et=d.length-1;et>=0;et--)s.addOffset(d[et]);return s.endVector()}static startSubGraphSessionStatesVector(s,d){s.startVector(4,d,4)}static endSessionState(s){return s.endObject()}static createSessionState(s,d,et){return o.startSessionState(s),o.addKernels(s,d),o.addSubGraphSessionStates(s,et),o.endSessionState(s)}}a.SessionState=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={})),(e=>{(i=>{(a=>{class o{constructor(){this.bb=null,this.bb_pos=0}__init(s,d){return this.bb_pos=s,this.bb=d,this}static getRootAsInferenceSession(s,d){return(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsInferenceSession(s,d){return s.setPosition(s.position()+_.SIZE_PREFIX_LENGTH),(d||new o).__init(s.readInt32(s.position())+s.position(),s)}static bufferHasIdentifier(s){return s.__has_identifier("ORTM")}ortVersion(s){let d=this.bb.__offset(this.bb_pos,4);return d?this.bb.__string(this.bb_pos+d,s):null}model(s){let d=this.bb.__offset(this.bb_pos,6);return d?(s||new e.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}sessionState(s){let d=this.bb.__offset(this.bb_pos,8);return d?(s||new e.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}static startInferenceSession(s){s.startObject(3)}static addOrtVersion(s,d){s.addFieldOffset(0,d,0)}static addModel(s,d){s.addFieldOffset(1,d,0)}static addSessionState(s,d){s.addFieldOffset(2,d,0)}static endInferenceSession(s){return s.endObject()}static finishInferenceSessionBuffer(s,d){s.finish(d,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(s,d){s.finish(d,"ORTM",!0)}static createInferenceSession(s,d,et,$t){return o.startInferenceSession(s),o.addOrtVersion(s,d),o.addModel(s,et),o.addSessionState(s,$t),o.endInferenceSession(s)}}a.InferenceSession=o})(i.fbs||(i.fbs={}))})(e.experimental||(e.experimental={}))})(V||(V={}))}),Bs$1=me((e,i)=>{i.exports=a;function a(o,c){for(var s=new Array(arguments.length-1),d=0,et=2,$t=!0;et<arguments.length;)s[d++]=arguments[et++];return new Promise(function(h,b){s[d]=function(g){if($t)if($t=!1,g)b(g);else{for(var jt=new Array(arguments.length-1),Ht=0;Ht<jt.length;)jt[Ht++]=arguments[Ht];h.apply(null,jt)}};try{o.apply(c||null,s)}catch(g){$t&&($t=!1,b(g))}})}}),Gs$1=me(e=>{var i=e;i.length=function(d){var et=d.length;if(!et)return 0;for(var $t=0;--et%4>1&&d.charAt(et)==="=";)++$t;return Math.ceil(d.length*3)/4-$t};var a=new Array(64),o=new Array(123);for(c=0;c<64;)o[a[c]=c<26?c+65:c<52?c+71:c<62?c-4:c-59|43]=c++;var c;i.encode=function(d,et,$t){for(var h=null,b=[],g=0,jt=0,Ht;et<$t;){var Kt=d[et++];switch(jt){case 0:b[g++]=a[Kt>>2],Ht=(Kt&3)<<4,jt=1;break;case 1:b[g++]=a[Ht|Kt>>4],Ht=(Kt&15)<<2,jt=2;break;case 2:b[g++]=a[Ht|Kt>>6],b[g++]=a[Kt&63],jt=0;break}g>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,b)),g=0)}return jt&&(b[g++]=a[Ht],b[g++]=61,jt===1&&(b[g++]=61)),h?(g&&h.push(String.fromCharCode.apply(String,b.slice(0,g))),h.join("")):String.fromCharCode.apply(String,b.slice(0,g))};var s="invalid encoding";i.decode=function(d,et,$t){for(var h=$t,b=0,g,jt=0;jt<d.length;){var Ht=d.charCodeAt(jt++);if(Ht===61&&b>1)break;if((Ht=o[Ht])===void 0)throw Error(s);switch(b){case 0:g=Ht,b=1;break;case 1:et[$t++]=g<<2|(Ht&48)>>4,g=Ht,b=2;break;case 2:et[$t++]=(g&15)<<4|(Ht&60)>>2,g=Ht,b=3;break;case 3:et[$t++]=(g&3)<<6|Ht,b=0;break}}if(b===1)throw Error(s);return $t-h},i.test=function(d){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(d)}}),zs$1=me((e,i)=>{i.exports=a;function a(){this._listeners={}}a.prototype.on=function(o,c,s){return(this._listeners[o]||(this._listeners[o]=[])).push({fn:c,ctx:s||this}),this},a.prototype.off=function(o,c){if(o===void 0)this._listeners={};else if(c===void 0)this._listeners[o]=[];else for(var s=this._listeners[o],d=0;d<s.length;)s[d].fn===c?s.splice(d,1):++d;return this},a.prototype.emit=function(o){var c=this._listeners[o];if(c){for(var s=[],d=1;d<arguments.length;)s.push(arguments[d++]);for(d=0;d<c.length;)c[d].fn.apply(c[d++].ctx,s)}return this}}),Xs$1=me((e,i)=>{i.exports=a(a);function a(et){return typeof Float32Array<"u"?function(){var $t=new Float32Array([-0]),h=new Uint8Array($t.buffer),b=h[3]===128;function g(or,jr,Lr){$t[0]=or,jr[Lr]=h[0],jr[Lr+1]=h[1],jr[Lr+2]=h[2],jr[Lr+3]=h[3]}function jt(or,jr,Lr){$t[0]=or,jr[Lr]=h[3],jr[Lr+1]=h[2],jr[Lr+2]=h[1],jr[Lr+3]=h[0]}et.writeFloatLE=b?g:jt,et.writeFloatBE=b?jt:g;function Ht(or,jr){return h[0]=or[jr],h[1]=or[jr+1],h[2]=or[jr+2],h[3]=or[jr+3],$t[0]}function Kt(or,jr){return h[3]=or[jr],h[2]=or[jr+1],h[1]=or[jr+2],h[0]=or[jr+3],$t[0]}et.readFloatLE=b?Ht:Kt,et.readFloatBE=b?Kt:Ht}():function(){function $t(b,g,jt,Ht){var Kt=g<0?1:0;if(Kt&&(g=-g),g===0)b(1/g>0?0:2147483648,jt,Ht);else if(isNaN(g))b(2143289344,jt,Ht);else if(g>34028234663852886e22)b((Kt<<31|2139095040)>>>0,jt,Ht);else if(g<11754943508222875e-54)b((Kt<<31|Math.round(g/1401298464324817e-60))>>>0,jt,Ht);else{var or=Math.floor(Math.log(g)/Math.LN2),jr=Math.round(g*Math.pow(2,-or)*8388608)&8388607;b((Kt<<31|or+127<<23|jr)>>>0,jt,Ht)}}et.writeFloatLE=$t.bind(null,o),et.writeFloatBE=$t.bind(null,c);function h(b,g,jt){var Ht=b(g,jt),Kt=(Ht>>31)*2+1,or=Ht>>>23&255,jr=Ht&8388607;return or===255?jr?NaN:Kt*(1/0):or===0?Kt*1401298464324817e-60*jr:Kt*Math.pow(2,or-150)*(jr+8388608)}et.readFloatLE=h.bind(null,s),et.readFloatBE=h.bind(null,d)}(),typeof Float64Array<"u"?function(){var $t=new Float64Array([-0]),h=new Uint8Array($t.buffer),b=h[7]===128;function g(or,jr,Lr){$t[0]=or,jr[Lr]=h[0],jr[Lr+1]=h[1],jr[Lr+2]=h[2],jr[Lr+3]=h[3],jr[Lr+4]=h[4],jr[Lr+5]=h[5],jr[Lr+6]=h[6],jr[Lr+7]=h[7]}function jt(or,jr,Lr){$t[0]=or,jr[Lr]=h[7],jr[Lr+1]=h[6],jr[Lr+2]=h[5],jr[Lr+3]=h[4],jr[Lr+4]=h[3],jr[Lr+5]=h[2],jr[Lr+6]=h[1],jr[Lr+7]=h[0]}et.writeDoubleLE=b?g:jt,et.writeDoubleBE=b?jt:g;function Ht(or,jr){return h[0]=or[jr],h[1]=or[jr+1],h[2]=or[jr+2],h[3]=or[jr+3],h[4]=or[jr+4],h[5]=or[jr+5],h[6]=or[jr+6],h[7]=or[jr+7],$t[0]}function Kt(or,jr){return h[7]=or[jr],h[6]=or[jr+1],h[5]=or[jr+2],h[4]=or[jr+3],h[3]=or[jr+4],h[2]=or[jr+5],h[1]=or[jr+6],h[0]=or[jr+7],$t[0]}et.readDoubleLE=b?Ht:Kt,et.readDoubleBE=b?Kt:Ht}():function(){function $t(b,g,jt,Ht,Kt,or){var jr=Ht<0?1:0;if(jr&&(Ht=-Ht),Ht===0)b(0,Kt,or+g),b(1/Ht>0?0:2147483648,Kt,or+jt);else if(isNaN(Ht))b(0,Kt,or+g),b(2146959360,Kt,or+jt);else if(Ht>17976931348623157e292)b(0,Kt,or+g),b((jr<<31|2146435072)>>>0,Kt,or+jt);else{var Lr;if(Ht<22250738585072014e-324)Lr=Ht/5e-324,b(Lr>>>0,Kt,or+g),b((jr<<31|Lr/4294967296)>>>0,Kt,or+jt);else{var ir=Math.floor(Math.log(Ht)/Math.LN2);ir===1024&&(ir=1023),Lr=Ht*Math.pow(2,-ir),b(Lr*4503599627370496>>>0,Kt,or+g),b((jr<<31|ir+1023<<20|Lr*1048576&1048575)>>>0,Kt,or+jt)}}}et.writeDoubleLE=$t.bind(null,o,0,4),et.writeDoubleBE=$t.bind(null,c,4,0);function h(b,g,jt,Ht,Kt){var or=b(Ht,Kt+g),jr=b(Ht,Kt+jt),Lr=(jr>>31)*2+1,ir=jr>>>20&2047,qr=4294967296*(jr&1048575)+or;return ir===2047?qr?NaN:Lr*(1/0):ir===0?Lr*5e-324*qr:Lr*Math.pow(2,ir-1075)*(qr+4503599627370496)}et.readDoubleLE=h.bind(null,s,0,4),et.readDoubleBE=h.bind(null,d,4,0)}(),et}function o(et,$t,h){$t[h]=et&255,$t[h+1]=et>>>8&255,$t[h+2]=et>>>16&255,$t[h+3]=et>>>24}function c(et,$t,h){$t[h]=et>>>24,$t[h+1]=et>>>16&255,$t[h+2]=et>>>8&255,$t[h+3]=et&255}function s(et,$t){return(et[$t]|et[$t+1]<<8|et[$t+2]<<16|et[$t+3]<<24)>>>0}function d(et,$t){return(et[$t]<<24|et[$t+1]<<16|et[$t+2]<<8|et[$t+3])>>>0}}),Ks$1=me((exports,module)=>{module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}}),Zs$1=me(e=>{var i=e;i.length=function(a){for(var o=0,c=0,s=0;s<a.length;++s)c=a.charCodeAt(s),c<128?o+=1:c<2048?o+=2:(c&64512)===55296&&(a.charCodeAt(s+1)&64512)===56320?(++s,o+=4):o+=3;return o},i.read=function(a,o,c){var s=c-o;if(s<1)return"";for(var d=null,et=[],$t=0,h;o<c;)h=a[o++],h<128?et[$t++]=h:h>191&&h<224?et[$t++]=(h&31)<<6|a[o++]&63:h>239&&h<365?(h=((h&7)<<18|(a[o++]&63)<<12|(a[o++]&63)<<6|a[o++]&63)-65536,et[$t++]=55296+(h>>10),et[$t++]=56320+(h&1023)):et[$t++]=(h&15)<<12|(a[o++]&63)<<6|a[o++]&63,$t>8191&&((d||(d=[])).push(String.fromCharCode.apply(String,et)),$t=0);return d?($t&&d.push(String.fromCharCode.apply(String,et.slice(0,$t))),d.join("")):String.fromCharCode.apply(String,et.slice(0,$t))},i.write=function(a,o,c){for(var s=c,d,et,$t=0;$t<a.length;++$t)d=a.charCodeAt($t),d<128?o[c++]=d:d<2048?(o[c++]=d>>6|192,o[c++]=d&63|128):(d&64512)===55296&&((et=a.charCodeAt($t+1))&64512)===56320?(d=65536+((d&1023)<<10)+(et&1023),++$t,o[c++]=d>>18|240,o[c++]=d>>12&63|128,o[c++]=d>>6&63|128,o[c++]=d&63|128):(o[c++]=d>>12|224,o[c++]=d>>6&63|128,o[c++]=d&63|128);return c-s}}),eu$1=me((e,i)=>{i.exports=a;function a(o,c,s){var d=s||8192,et=d>>>1,$t=null,h=d;return function(b){if(b<1||b>et)return o(b);h+b>d&&($t=o(d),h=0);var g=c.call($t,h,h+=b);return h&7&&(h=(h|7)+1),g}}}),ru$1=me((e,i)=>{i.exports=o;var a=Jt();function o(et,$t){this.lo=et>>>0,this.hi=$t>>>0}var c=o.zero=new o(0,0);c.toNumber=function(){return 0},c.zzEncode=c.zzDecode=function(){return this},c.length=function(){return 1};var s=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(et){if(et===0)return c;var $t=et<0;$t&&(et=-et);var h=et>>>0,b=(et-h)/4294967296>>>0;return $t&&(b=~b>>>0,h=~h>>>0,++h>4294967295&&(h=0,++b>4294967295&&(b=0))),new o(h,b)},o.from=function(et){if(typeof et=="number")return o.fromNumber(et);if(a.isString(et))if(a.Long)et=a.Long.fromString(et);else return o.fromNumber(parseInt(et,10));return et.low||et.high?new o(et.low>>>0,et.high>>>0):c},o.prototype.toNumber=function(et){if(!et&&this.hi>>>31){var $t=~this.lo+1>>>0,h=~this.hi>>>0;return $t||(h=h+1>>>0),-($t+h*4294967296)}return this.lo+this.hi*4294967296},o.prototype.toLong=function(et){return a.Long?new a.Long(this.lo|0,this.hi|0,!!et):{low:this.lo|0,high:this.hi|0,unsigned:!!et}};var d=String.prototype.charCodeAt;o.fromHash=function(et){return et===s?c:new o((d.call(et,0)|d.call(et,1)<<8|d.call(et,2)<<16|d.call(et,3)<<24)>>>0,(d.call(et,4)|d.call(et,5)<<8|d.call(et,6)<<16|d.call(et,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var et=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^et)>>>0,this.lo=(this.lo<<1^et)>>>0,this},o.prototype.zzDecode=function(){var et=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^et)>>>0,this.hi=(this.hi>>>1^et)>>>0,this},o.prototype.length=function(){var et=this.lo,$t=(this.lo>>>28|this.hi<<4)>>>0,h=this.hi>>>24;return h===0?$t===0?et<16384?et<128?1:2:et<2097152?3:4:$t<16384?$t<128?5:6:$t<2097152?7:8:h<128?9:10}}),Jt=me(e=>{var i=e;i.asPromise=Bs$1(),i.base64=Gs$1(),i.EventEmitter=zs$1(),i.float=Xs$1(),i.inquire=Ks$1(),i.utf8=Zs$1(),i.pool=eu$1(),i.LongBits=ru$1(),i.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),i.global=i.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||e,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c},i.isString=function(c){return typeof c=="string"||c instanceof String},i.isObject=function(c){return c&&typeof c=="object"},i.isset=i.isSet=function(c,s){var d=c[s];return d!=null&&c.hasOwnProperty(s)?typeof d!="object"||(Array.isArray(d)?d.length:Object.keys(d).length)>0:!1},i.Buffer=function(){try{var c=i.inquire("buffer").Buffer;return c.prototype.utf8Write?c:null}catch{return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(c){return typeof c=="number"?i.Buffer?i._Buffer_allocUnsafe(c):new i.Array(c):i.Buffer?i._Buffer_from(c):typeof Uint8Array>"u"?c:new Uint8Array(c)},i.Array=typeof Uint8Array<"u"?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(c){return c?i.LongBits.from(c).toHash():i.LongBits.zeroHash},i.longFromHash=function(c,s){var d=i.LongBits.fromHash(c);return i.Long?i.Long.fromBits(d.lo,d.hi,s):d.toNumber(!!s)};function a(c,s,d){for(var et=Object.keys(s),$t=0;$t<et.length;++$t)(c[et[$t]]===void 0||!d)&&(c[et[$t]]=s[et[$t]]);return c}i.merge=a,i.lcFirst=function(c){return c.charAt(0).toLowerCase()+c.substring(1)};function o(c){function s(d,et){if(!(this instanceof s))return new s(d,et);Object.defineProperty(this,"message",{get:function(){return d}}),Error.captureStackTrace?Error.captureStackTrace(this,s):Object.defineProperty(this,"stack",{value:new Error().stack||""}),et&&a(this,et)}return s.prototype=Object.create(Error.prototype,{constructor:{value:s,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return c},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),s}i.newError=o,i.ProtocolError=o("ProtocolError"),i.oneOfGetter=function(c){for(var s={},d=0;d<c.length;++d)s[c[d]]=1;return function(){for(var et=Object.keys(this),$t=et.length-1;$t>-1;--$t)if(s[et[$t]]===1&&this[et[$t]]!==void 0&&this[et[$t]]!==null)return et[$t]}},i.oneOfSetter=function(c){return function(s){for(var d=0;d<c.length;++d)c[d]!==s&&delete this[c[d]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var c=i.Buffer;if(!c){i._Buffer_from=i._Buffer_allocUnsafe=null;return}i._Buffer_from=c.from!==Uint8Array.from&&c.from||function(s,d){return new c(s,d)},i._Buffer_allocUnsafe=c.allocUnsafe||function(s){return new c(s)}}}),si$1=me((e,i)=>{i.exports=b;var a=Jt(),o,c=a.LongBits,s=a.base64,d=a.utf8;function et(ir,qr,vn){this.fn=ir,this.len=qr,this.next=void 0,this.val=vn}function $t(){}function h(ir){this.head=ir.head,this.tail=ir.tail,this.len=ir.len,this.next=ir.states}function b(){this.len=0,this.head=new et($t,0,0),this.tail=this.head,this.states=null}var g=function(){return a.Buffer?function(){return(b.create=function(){return new o})()}:function(){return new b}};b.create=g(),b.alloc=function(ir){return new a.Array(ir)},a.Array!==Array&&(b.alloc=a.pool(b.alloc,a.Array.prototype.subarray)),b.prototype._push=function(ir,qr,vn){return this.tail=this.tail.next=new et(ir,qr,vn),this.len+=qr,this};function jt(ir,qr,vn){qr[vn]=ir&255}function Ht(ir,qr,vn){for(;ir>127;)qr[vn++]=ir&127|128,ir>>>=7;qr[vn]=ir}function Kt(ir,qr){this.len=ir,this.next=void 0,this.val=qr}Kt.prototype=Object.create(et.prototype),Kt.prototype.fn=Ht,b.prototype.uint32=function(ir){return this.len+=(this.tail=this.tail.next=new Kt((ir=ir>>>0)<128?1:ir<16384?2:ir<2097152?3:ir<268435456?4:5,ir)).len,this},b.prototype.int32=function(ir){return ir<0?this._push(or,10,c.fromNumber(ir)):this.uint32(ir)},b.prototype.sint32=function(ir){return this.uint32((ir<<1^ir>>31)>>>0)};function or(ir,qr,vn){for(;ir.hi;)qr[vn++]=ir.lo&127|128,ir.lo=(ir.lo>>>7|ir.hi<<25)>>>0,ir.hi>>>=7;for(;ir.lo>127;)qr[vn++]=ir.lo&127|128,ir.lo=ir.lo>>>7;qr[vn++]=ir.lo}b.prototype.uint64=function(ir){var qr=c.from(ir);return this._push(or,qr.length(),qr)},b.prototype.int64=b.prototype.uint64,b.prototype.sint64=function(ir){var qr=c.from(ir).zzEncode();return this._push(or,qr.length(),qr)},b.prototype.bool=function(ir){return this._push(jt,1,ir?1:0)};function jr(ir,qr,vn){qr[vn]=ir&255,qr[vn+1]=ir>>>8&255,qr[vn+2]=ir>>>16&255,qr[vn+3]=ir>>>24}b.prototype.fixed32=function(ir){return this._push(jr,4,ir>>>0)},b.prototype.sfixed32=b.prototype.fixed32,b.prototype.fixed64=function(ir){var qr=c.from(ir);return this._push(jr,4,qr.lo)._push(jr,4,qr.hi)},b.prototype.sfixed64=b.prototype.fixed64,b.prototype.float=function(ir){return this._push(a.float.writeFloatLE,4,ir)},b.prototype.double=function(ir){return this._push(a.float.writeDoubleLE,8,ir)};var Lr=a.Array.prototype.set?function(ir,qr,vn){qr.set(ir,vn)}:function(ir,qr,vn){for(var xn=0;xn<ir.length;++xn)qr[vn+xn]=ir[xn]};b.prototype.bytes=function(ir){var qr=ir.length>>>0;if(!qr)return this._push(jt,1,0);if(a.isString(ir)){var vn=b.alloc(qr=s.length(ir));s.decode(ir,vn,0),ir=vn}return this.uint32(qr)._push(Lr,qr,ir)},b.prototype.string=function(ir){var qr=d.length(ir);return qr?this.uint32(qr)._push(d.write,qr,ir):this._push(jt,1,0)},b.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new et($t,0,0),this.len=0,this},b.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new et($t,0,0),this.len=0),this},b.prototype.ldelim=function(){var ir=this.head,qr=this.tail,vn=this.len;return this.reset().uint32(vn),vn&&(this.tail.next=ir.next,this.tail=qr,this.len+=vn),this},b.prototype.finish=function(){for(var ir=this.head.next,qr=this.constructor.alloc(this.len),vn=0;ir;)ir.fn(ir.val,qr,vn),vn+=ir.len,ir=ir.next;return qr},b._configure=function(ir){o=ir,b.create=g(),o._configure()}}),cu$1=me((e,i)=>{i.exports=c;var a=si$1();(c.prototype=Object.create(a.prototype)).constructor=c;var o=Jt();function c(){a.call(this)}c._configure=function(){c.alloc=o._Buffer_allocUnsafe,c.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&o.Buffer.prototype.set.name==="set"?function(d,et,$t){et.set(d,$t)}:function(d,et,$t){if(d.copy)d.copy(et,$t,0,d.length);else for(var h=0;h<d.length;)et[$t++]=d[h++]}},c.prototype.bytes=function(d){o.isString(d)&&(d=o._Buffer_from(d,"base64"));var et=d.length>>>0;return this.uint32(et),et&&this._push(c.writeBytesBuffer,et,d),this};function s(d,et,$t){d.length<40?o.utf8.write(d,et,$t):et.utf8Write?et.utf8Write(d,$t):et.write(d,$t)}c.prototype.string=function(d){var et=o.Buffer.byteLength(d);return this.uint32(et),et&&this._push(s,et,d),this},c._configure()}),fi$1=me((e,i)=>{i.exports=et;var a=Jt(),o,c=a.LongBits,s=a.utf8;function d(Ht,Kt){return RangeError("index out of range: "+Ht.pos+" + "+(Kt||1)+" > "+Ht.len)}function et(Ht){this.buf=Ht,this.pos=0,this.len=Ht.length}var $t=typeof Uint8Array<"u"?function(Ht){if(Ht instanceof Uint8Array||Array.isArray(Ht))return new et(Ht);throw Error("illegal buffer")}:function(Ht){if(Array.isArray(Ht))return new et(Ht);throw Error("illegal buffer")},h=function(){return a.Buffer?function(Ht){return(et.create=function(Kt){return a.Buffer.isBuffer(Kt)?new o(Kt):$t(Kt)})(Ht)}:$t};et.create=h(),et.prototype._slice=a.Array.prototype.subarray||a.Array.prototype.slice,et.prototype.uint32=function(){var Ht=4294967295;return function(){if(Ht=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(Ht=(Ht|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(Ht=(Ht|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(Ht=(Ht|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(Ht=(Ht|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return Ht;if((this.pos+=5)>this.len)throw this.pos=this.len,d(this,10);return Ht}}(),et.prototype.int32=function(){return this.uint32()|0},et.prototype.sint32=function(){var Ht=this.uint32();return Ht>>>1^-(Ht&1)|0};function b(){var Ht=new c(0,0),Kt=0;if(this.len-this.pos>4){for(;Kt<4;++Kt)if(Ht.lo=(Ht.lo|(this.buf[this.pos]&127)<<Kt*7)>>>0,this.buf[this.pos++]<128)return Ht;if(Ht.lo=(Ht.lo|(this.buf[this.pos]&127)<<28)>>>0,Ht.hi=(Ht.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return Ht;Kt=0}else{for(;Kt<3;++Kt){if(this.pos>=this.len)throw d(this);if(Ht.lo=(Ht.lo|(this.buf[this.pos]&127)<<Kt*7)>>>0,this.buf[this.pos++]<128)return Ht}return Ht.lo=(Ht.lo|(this.buf[this.pos++]&127)<<Kt*7)>>>0,Ht}if(this.len-this.pos>4){for(;Kt<5;++Kt)if(Ht.hi=(Ht.hi|(this.buf[this.pos]&127)<<Kt*7+3)>>>0,this.buf[this.pos++]<128)return Ht}else for(;Kt<5;++Kt){if(this.pos>=this.len)throw d(this);if(Ht.hi=(Ht.hi|(this.buf[this.pos]&127)<<Kt*7+3)>>>0,this.buf[this.pos++]<128)return Ht}throw Error("invalid varint encoding")}et.prototype.bool=function(){return this.uint32()!==0};function g(Ht,Kt){return(Ht[Kt-4]|Ht[Kt-3]<<8|Ht[Kt-2]<<16|Ht[Kt-1]<<24)>>>0}et.prototype.fixed32=function(){if(this.pos+4>this.len)throw d(this,4);return g(this.buf,this.pos+=4)},et.prototype.sfixed32=function(){if(this.pos+4>this.len)throw d(this,4);return g(this.buf,this.pos+=4)|0};function jt(){if(this.pos+8>this.len)throw d(this,8);return new c(g(this.buf,this.pos+=4),g(this.buf,this.pos+=4))}et.prototype.float=function(){if(this.pos+4>this.len)throw d(this,4);var Ht=a.float.readFloatLE(this.buf,this.pos);return this.pos+=4,Ht},et.prototype.double=function(){if(this.pos+8>this.len)throw d(this,4);var Ht=a.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,Ht},et.prototype.bytes=function(){var Ht=this.uint32(),Kt=this.pos,or=this.pos+Ht;if(or>this.len)throw d(this,Ht);if(this.pos+=Ht,Array.isArray(this.buf))return this.buf.slice(Kt,or);if(Kt===or){var jr=a.Buffer;return jr?jr.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,Kt,or)},et.prototype.string=function(){var Ht=this.bytes();return s.read(Ht,0,Ht.length)},et.prototype.skip=function(Ht){if(typeof Ht=="number"){if(this.pos+Ht>this.len)throw d(this,Ht);this.pos+=Ht}else do if(this.pos>=this.len)throw d(this);while(this.buf[this.pos++]&128);return this},et.prototype.skipType=function(Ht){switch(Ht){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(Ht=this.uint32()&7)!==4;)this.skipType(Ht);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+Ht+" at offset "+this.pos)}return this},et._configure=function(Ht){o=Ht,et.create=h(),o._configure();var Kt=a.Long?"toLong":"toNumber";a.merge(et.prototype,{int64:function(){return b.call(this)[Kt](!1)},uint64:function(){return b.call(this)[Kt](!0)},sint64:function(){return b.call(this).zzDecode()[Kt](!1)},fixed64:function(){return jt.call(this)[Kt](!0)},sfixed64:function(){return jt.call(this)[Kt](!1)}})}}),xu=me((e,i)=>{i.exports=c;var a=fi$1();(c.prototype=Object.create(a.prototype)).constructor=c;var o=Jt();function c(s){a.call(this,s)}c._configure=function(){o.Buffer&&(c.prototype._slice=o.Buffer.prototype.slice)},c.prototype.string=function(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))},c._configure()}),vu$1=me((e,i)=>{i.exports=o;var a=Jt();(o.prototype=Object.create(a.EventEmitter.prototype)).constructor=o;function o(c,s,d){if(typeof c!="function")throw TypeError("rpcImpl must be a function");a.EventEmitter.call(this),this.rpcImpl=c,this.requestDelimited=!!s,this.responseDelimited=!!d}o.prototype.rpcCall=function c(s,d,et,$t,h){if(!$t)throw TypeError("request must be specified");var b=this;if(!h)return a.asPromise(c,b,s,d,et,$t);if(!b.rpcImpl){setTimeout(function(){h(Error("already ended"))},0);return}try{return b.rpcImpl(s,d[b.requestDelimited?"encodeDelimited":"encode"]($t).finish(),function(g,jt){if(g)return b.emit("error",g,s),h(g);if(jt===null){b.end(!0);return}if(!(jt instanceof et))try{jt=et[b.responseDelimited?"decodeDelimited":"decode"](jt)}catch(Ht){return b.emit("error",Ht,s),h(Ht)}return b.emit("data",jt,s),h(null,jt)})}catch(g){b.emit("error",g,s),setTimeout(function(){h(g)},0);return}},o.prototype.end=function(c){return this.rpcImpl&&(c||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),Ou$1=me(e=>{var i=e;i.Service=vu$1()}),Su$1=me((e,i)=>{i.exports={}}),Eu$1=me(e=>{var i=e;i.build="minimal",i.Writer=si$1(),i.BufferWriter=cu$1(),i.Reader=fi$1(),i.BufferReader=xu(),i.util=Jt(),i.rpc=Ou$1(),i.roots=Su$1(),i.configure=a;function a(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}a()}),Lu$1=me((e,i)=>{i.exports=Eu$1()}),Cr=me((e,i)=>{var a=Lu$1(),o=a.Reader,c=a.Writer,s=a.util,d=a.roots.default||(a.roots.default={});d.onnx=function(){var et={};return et.Version=function(){var $t={},h=Object.create($t);return h[$t[0]="_START_VERSION"]=0,h[$t[1]="IR_VERSION_2017_10_10"]=1,h[$t[2]="IR_VERSION_2017_10_30"]=2,h[$t[3]="IR_VERSION_2017_11_3"]=3,h[$t[4]="IR_VERSION_2019_1_22"]=4,h[$t[5]="IR_VERSION_2019_3_18"]=5,h[$t[6]="IR_VERSION_2019_9_19"]=6,h[$t[7]="IR_VERSION_2020_5_8"]=7,h[$t[8]="IR_VERSION_2021_7_30"]=8,h[$t[9]="IR_VERSION"]=9,h}(),et.AttributeProto=function(){function $t(h){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],h)for(var b=Object.keys(h),g=0;g<b.length;++g)h[b[g]]!=null&&(this[b[g]]=h[b[g]])}return $t.prototype.name="",$t.prototype.refAttrName="",$t.prototype.docString="",$t.prototype.type=0,$t.prototype.f=0,$t.prototype.i=s.Long?s.Long.fromBits(0,0,!1):0,$t.prototype.s=s.newBuffer([]),$t.prototype.t=null,$t.prototype.g=null,$t.prototype.sparseTensor=null,$t.prototype.tp=null,$t.prototype.floats=s.emptyArray,$t.prototype.ints=s.emptyArray,$t.prototype.strings=s.emptyArray,$t.prototype.tensors=s.emptyArray,$t.prototype.graphs=s.emptyArray,$t.prototype.sparseTensors=s.emptyArray,$t.prototype.typeProtos=s.emptyArray,$t.create=function(h){return new $t(h)},$t.encode=function(h,b){if(b||(b=c.create()),h.name!=null&&Object.hasOwnProperty.call(h,"name")&&b.uint32(10).string(h.name),h.f!=null&&Object.hasOwnProperty.call(h,"f")&&b.uint32(21).float(h.f),h.i!=null&&Object.hasOwnProperty.call(h,"i")&&b.uint32(24).int64(h.i),h.s!=null&&Object.hasOwnProperty.call(h,"s")&&b.uint32(34).bytes(h.s),h.t!=null&&Object.hasOwnProperty.call(h,"t")&&d.onnx.TensorProto.encode(h.t,b.uint32(42).fork()).ldelim(),h.g!=null&&Object.hasOwnProperty.call(h,"g")&&d.onnx.GraphProto.encode(h.g,b.uint32(50).fork()).ldelim(),h.floats!=null&&h.floats.length){b.uint32(58).fork();for(var g=0;g<h.floats.length;++g)b.float(h.floats[g]);b.ldelim()}if(h.ints!=null&&h.ints.length){b.uint32(66).fork();for(var g=0;g<h.ints.length;++g)b.int64(h.ints[g]);b.ldelim()}if(h.strings!=null&&h.strings.length)for(var g=0;g<h.strings.length;++g)b.uint32(74).bytes(h.strings[g]);if(h.tensors!=null&&h.tensors.length)for(var g=0;g<h.tensors.length;++g)d.onnx.TensorProto.encode(h.tensors[g],b.uint32(82).fork()).ldelim();if(h.graphs!=null&&h.graphs.length)for(var g=0;g<h.graphs.length;++g)d.onnx.GraphProto.encode(h.graphs[g],b.uint32(90).fork()).ldelim();if(h.docString!=null&&Object.hasOwnProperty.call(h,"docString")&&b.uint32(106).string(h.docString),h.tp!=null&&Object.hasOwnProperty.call(h,"tp")&&d.onnx.TypeProto.encode(h.tp,b.uint32(114).fork()).ldelim(),h.typeProtos!=null&&h.typeProtos.length)for(var g=0;g<h.typeProtos.length;++g)d.onnx.TypeProto.encode(h.typeProtos[g],b.uint32(122).fork()).ldelim();if(h.type!=null&&Object.hasOwnProperty.call(h,"type")&&b.uint32(160).int32(h.type),h.refAttrName!=null&&Object.hasOwnProperty.call(h,"refAttrName")&&b.uint32(170).string(h.refAttrName),h.sparseTensor!=null&&Object.hasOwnProperty.call(h,"sparseTensor")&&d.onnx.SparseTensorProto.encode(h.sparseTensor,b.uint32(178).fork()).ldelim(),h.sparseTensors!=null&&h.sparseTensors.length)for(var g=0;g<h.sparseTensors.length;++g)d.onnx.SparseTensorProto.encode(h.sparseTensors[g],b.uint32(186).fork()).ldelim();return b},$t.encodeDelimited=function(h,b){return this.encode(h,b).ldelim()},$t.decode=function(h,b){h instanceof o||(h=o.create(h));for(var g=b===void 0?h.len:h.pos+b,jt=new d.onnx.AttributeProto;h.pos<g;){var Ht=h.uint32();switch(Ht>>>3){case 1:{jt.name=h.string();break}case 21:{jt.refAttrName=h.string();break}case 13:{jt.docString=h.string();break}case 20:{jt.type=h.int32();break}case 2:{jt.f=h.float();break}case 3:{jt.i=h.int64();break}case 4:{jt.s=h.bytes();break}case 5:{jt.t=d.onnx.TensorProto.decode(h,h.uint32());break}case 6:{jt.g=d.onnx.GraphProto.decode(h,h.uint32());break}case 22:{jt.sparseTensor=d.onnx.SparseTensorProto.decode(h,h.uint32());break}case 14:{jt.tp=d.onnx.TypeProto.decode(h,h.uint32());break}case 7:{if(jt.floats&&jt.floats.length||(jt.floats=[]),(Ht&7)===2)for(var Kt=h.uint32()+h.pos;h.pos<Kt;)jt.floats.push(h.float());else jt.floats.push(h.float());break}case 8:{if(jt.ints&&jt.ints.length||(jt.ints=[]),(Ht&7)===2)for(var Kt=h.uint32()+h.pos;h.pos<Kt;)jt.ints.push(h.int64());else jt.ints.push(h.int64());break}case 9:{jt.strings&&jt.strings.length||(jt.strings=[]),jt.strings.push(h.bytes());break}case 10:{jt.tensors&&jt.tensors.length||(jt.tensors=[]),jt.tensors.push(d.onnx.TensorProto.decode(h,h.uint32()));break}case 11:{jt.graphs&&jt.graphs.length||(jt.graphs=[]),jt.graphs.push(d.onnx.GraphProto.decode(h,h.uint32()));break}case 23:{jt.sparseTensors&&jt.sparseTensors.length||(jt.sparseTensors=[]),jt.sparseTensors.push(d.onnx.SparseTensorProto.decode(h,h.uint32()));break}case 15:{jt.typeProtos&&jt.typeProtos.length||(jt.typeProtos=[]),jt.typeProtos.push(d.onnx.TypeProto.decode(h,h.uint32()));break}default:h.skipType(Ht&7);break}}return jt},$t.decodeDelimited=function(h){return h instanceof o||(h=new o(h)),this.decode(h,h.uint32())},$t.verify=function(h){if(typeof h!="object"||h===null)return"object expected";if(h.name!=null&&h.hasOwnProperty("name")&&!s.isString(h.name))return"name: string expected";if(h.refAttrName!=null&&h.hasOwnProperty("refAttrName")&&!s.isString(h.refAttrName))return"refAttrName: string expected";if(h.docString!=null&&h.hasOwnProperty("docString")&&!s.isString(h.docString))return"docString: string expected";if(h.type!=null&&h.hasOwnProperty("type"))switch(h.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(h.f!=null&&h.hasOwnProperty("f")&&typeof h.f!="number")return"f: number expected";if(h.i!=null&&h.hasOwnProperty("i")&&!s.isInteger(h.i)&&!(h.i&&s.isInteger(h.i.low)&&s.isInteger(h.i.high)))return"i: integer|Long expected";if(h.s!=null&&h.hasOwnProperty("s")&&!(h.s&&typeof h.s.length=="number"||s.isString(h.s)))return"s: buffer expected";if(h.t!=null&&h.hasOwnProperty("t")){var b=d.onnx.TensorProto.verify(h.t);if(b)return"t."+b}if(h.g!=null&&h.hasOwnProperty("g")){var b=d.onnx.GraphProto.verify(h.g);if(b)return"g."+b}if(h.sparseTensor!=null&&h.hasOwnProperty("sparseTensor")){var b=d.onnx.SparseTensorProto.verify(h.sparseTensor);if(b)return"sparseTensor."+b}if(h.tp!=null&&h.hasOwnProperty("tp")){var b=d.onnx.TypeProto.verify(h.tp);if(b)return"tp."+b}if(h.floats!=null&&h.hasOwnProperty("floats")){if(!Array.isArray(h.floats))return"floats: array expected";for(var g=0;g<h.floats.length;++g)if(typeof h.floats[g]!="number")return"floats: number[] expected"}if(h.ints!=null&&h.hasOwnProperty("ints")){if(!Array.isArray(h.ints))return"ints: array expected";for(var g=0;g<h.ints.length;++g)if(!s.isInteger(h.ints[g])&&!(h.ints[g]&&s.isInteger(h.ints[g].low)&&s.isInteger(h.ints[g].high)))return"ints: integer|Long[] expected"}if(h.strings!=null&&h.hasOwnProperty("strings")){if(!Array.isArray(h.strings))return"strings: array expected";for(var g=0;g<h.strings.length;++g)if(!(h.strings[g]&&typeof h.strings[g].length=="number"||s.isString(h.strings[g])))return"strings: buffer[] expected"}if(h.tensors!=null&&h.hasOwnProperty("tensors")){if(!Array.isArray(h.tensors))return"tensors: array expected";for(var g=0;g<h.tensors.length;++g){var b=d.onnx.TensorProto.verify(h.tensors[g]);if(b)return"tensors."+b}}if(h.graphs!=null&&h.hasOwnProperty("graphs")){if(!Array.isArray(h.graphs))return"graphs: array expected";for(var g=0;g<h.graphs.length;++g){var b=d.onnx.GraphProto.verify(h.graphs[g]);if(b)return"graphs."+b}}if(h.sparseTensors!=null&&h.hasOwnProperty("sparseTensors")){if(!Array.isArray(h.sparseTensors))return"sparseTensors: array expected";for(var g=0;g<h.sparseTensors.length;++g){var b=d.onnx.SparseTensorProto.verify(h.sparseTensors[g]);if(b)return"sparseTensors."+b}}if(h.typeProtos!=null&&h.hasOwnProperty("typeProtos")){if(!Array.isArray(h.typeProtos))return"typeProtos: array expected";for(var g=0;g<h.typeProtos.length;++g){var b=d.onnx.TypeProto.verify(h.typeProtos[g]);if(b)return"typeProtos."+b}}return null},$t.fromObject=function(h){if(h instanceof d.onnx.AttributeProto)return h;var b=new d.onnx.AttributeProto;switch(h.name!=null&&(b.name=String(h.name)),h.refAttrName!=null&&(b.refAttrName=String(h.refAttrName)),h.docString!=null&&(b.docString=String(h.docString)),h.type){default:if(typeof h.type=="number"){b.type=h.type;break}break;case"UNDEFINED":case 0:b.type=0;break;case"FLOAT":case 1:b.type=1;break;case"INT":case 2:b.type=2;break;case"STRING":case 3:b.type=3;break;case"TENSOR":case 4:b.type=4;break;case"GRAPH":case 5:b.type=5;break;case"SPARSE_TENSOR":case 11:b.type=11;break;case"TYPE_PROTO":case 13:b.type=13;break;case"FLOATS":case 6:b.type=6;break;case"INTS":case 7:b.type=7;break;case"STRINGS":case 8:b.type=8;break;case"TENSORS":case 9:b.type=9;break;case"GRAPHS":case 10:b.type=10;break;case"SPARSE_TENSORS":case 12:b.type=12;break;case"TYPE_PROTOS":case 14:b.type=14;break}if(h.f!=null&&(b.f=Number(h.f)),h.i!=null&&(s.Long?(b.i=s.Long.fromValue(h.i)).unsigned=!1:typeof h.i=="string"?b.i=parseInt(h.i,10):typeof h.i=="number"?b.i=h.i:typeof h.i=="object"&&(b.i=new s.LongBits(h.i.low>>>0,h.i.high>>>0).toNumber())),h.s!=null&&(typeof h.s=="string"?s.base64.decode(h.s,b.s=s.newBuffer(s.base64.length(h.s)),0):h.s.length>=0&&(b.s=h.s)),h.t!=null){if(typeof h.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");b.t=d.onnx.TensorProto.fromObject(h.t)}if(h.g!=null){if(typeof h.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");b.g=d.onnx.GraphProto.fromObject(h.g)}if(h.sparseTensor!=null){if(typeof h.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");b.sparseTensor=d.onnx.SparseTensorProto.fromObject(h.sparseTensor)}if(h.tp!=null){if(typeof h.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");b.tp=d.onnx.TypeProto.fromObject(h.tp)}if(h.floats){if(!Array.isArray(h.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");b.floats=[];for(var g=0;g<h.floats.length;++g)b.floats[g]=Number(h.floats[g])}if(h.ints){if(!Array.isArray(h.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");b.ints=[];for(var g=0;g<h.ints.length;++g)s.Long?(b.ints[g]=s.Long.fromValue(h.ints[g])).unsigned=!1:typeof h.ints[g]=="string"?b.ints[g]=parseInt(h.ints[g],10):typeof h.ints[g]=="number"?b.ints[g]=h.ints[g]:typeof h.ints[g]=="object"&&(b.ints[g]=new s.LongBits(h.ints[g].low>>>0,h.ints[g].high>>>0).toNumber())}if(h.strings){if(!Array.isArray(h.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");b.strings=[];for(var g=0;g<h.strings.length;++g)typeof h.strings[g]=="string"?s.base64.decode(h.strings[g],b.strings[g]=s.newBuffer(s.base64.length(h.strings[g])),0):h.strings[g].length>=0&&(b.strings[g]=h.strings[g])}if(h.tensors){if(!Array.isArray(h.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");b.tensors=[];for(var g=0;g<h.tensors.length;++g){if(typeof h.tensors[g]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");b.tensors[g]=d.onnx.TensorProto.fromObject(h.tensors[g])}}if(h.graphs){if(!Array.isArray(h.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");b.graphs=[];for(var g=0;g<h.graphs.length;++g){if(typeof h.graphs[g]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");b.graphs[g]=d.onnx.GraphProto.fromObject(h.graphs[g])}}if(h.sparseTensors){if(!Array.isArray(h.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");b.sparseTensors=[];for(var g=0;g<h.sparseTensors.length;++g){if(typeof h.sparseTensors[g]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");b.sparseTensors[g]=d.onnx.SparseTensorProto.fromObject(h.sparseTensors[g])}}if(h.typeProtos){if(!Array.isArray(h.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");b.typeProtos=[];for(var g=0;g<h.typeProtos.length;++g){if(typeof h.typeProtos[g]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");b.typeProtos[g]=d.onnx.TypeProto.fromObject(h.typeProtos[g])}}return b},$t.toObject=function(h,b){b||(b={});var g={};if((b.arrays||b.defaults)&&(g.floats=[],g.ints=[],g.strings=[],g.tensors=[],g.graphs=[],g.typeProtos=[],g.sparseTensors=[]),b.defaults){if(g.name="",g.f=0,s.Long){var jt=new s.Long(0,0,!1);g.i=b.longs===String?jt.toString():b.longs===Number?jt.toNumber():jt}else g.i=b.longs===String?"0":0;b.bytes===String?g.s="":(g.s=[],b.bytes!==Array&&(g.s=s.newBuffer(g.s))),g.t=null,g.g=null,g.docString="",g.tp=null,g.type=b.enums===String?"UNDEFINED":0,g.refAttrName="",g.sparseTensor=null}if(h.name!=null&&h.hasOwnProperty("name")&&(g.name=h.name),h.f!=null&&h.hasOwnProperty("f")&&(g.f=b.json&&!isFinite(h.f)?String(h.f):h.f),h.i!=null&&h.hasOwnProperty("i")&&(typeof h.i=="number"?g.i=b.longs===String?String(h.i):h.i:g.i=b.longs===String?s.Long.prototype.toString.call(h.i):b.longs===Number?new s.LongBits(h.i.low>>>0,h.i.high>>>0).toNumber():h.i),h.s!=null&&h.hasOwnProperty("s")&&(g.s=b.bytes===String?s.base64.encode(h.s,0,h.s.length):b.bytes===Array?Array.prototype.slice.call(h.s):h.s),h.t!=null&&h.hasOwnProperty("t")&&(g.t=d.onnx.TensorProto.toObject(h.t,b)),h.g!=null&&h.hasOwnProperty("g")&&(g.g=d.onnx.GraphProto.toObject(h.g,b)),h.floats&&h.floats.length){g.floats=[];for(var Ht=0;Ht<h.floats.length;++Ht)g.floats[Ht]=b.json&&!isFinite(h.floats[Ht])?String(h.floats[Ht]):h.floats[Ht]}if(h.ints&&h.ints.length){g.ints=[];for(var Ht=0;Ht<h.ints.length;++Ht)typeof h.ints[Ht]=="number"?g.ints[Ht]=b.longs===String?String(h.ints[Ht]):h.ints[Ht]:g.ints[Ht]=b.longs===String?s.Long.prototype.toString.call(h.ints[Ht]):b.longs===Number?new s.LongBits(h.ints[Ht].low>>>0,h.ints[Ht].high>>>0).toNumber():h.ints[Ht]}if(h.strings&&h.strings.length){g.strings=[];for(var Ht=0;Ht<h.strings.length;++Ht)g.strings[Ht]=b.bytes===String?s.base64.encode(h.strings[Ht],0,h.strings[Ht].length):b.bytes===Array?Array.prototype.slice.call(h.strings[Ht]):h.strings[Ht]}if(h.tensors&&h.tensors.length){g.tensors=[];for(var Ht=0;Ht<h.tensors.length;++Ht)g.tensors[Ht]=d.onnx.TensorProto.toObject(h.tensors[Ht],b)}if(h.graphs&&h.graphs.length){g.graphs=[];for(var Ht=0;Ht<h.graphs.length;++Ht)g.graphs[Ht]=d.onnx.GraphProto.toObject(h.graphs[Ht],b)}if(h.docString!=null&&h.hasOwnProperty("docString")&&(g.docString=h.docString),h.tp!=null&&h.hasOwnProperty("tp")&&(g.tp=d.onnx.TypeProto.toObject(h.tp,b)),h.typeProtos&&h.typeProtos.length){g.typeProtos=[];for(var Ht=0;Ht<h.typeProtos.length;++Ht)g.typeProtos[Ht]=d.onnx.TypeProto.toObject(h.typeProtos[Ht],b)}if(h.type!=null&&h.hasOwnProperty("type")&&(g.type=b.enums===String?d.onnx.AttributeProto.AttributeType[h.type]===void 0?h.type:d.onnx.AttributeProto.AttributeType[h.type]:h.type),h.refAttrName!=null&&h.hasOwnProperty("refAttrName")&&(g.refAttrName=h.refAttrName),h.sparseTensor!=null&&h.hasOwnProperty("sparseTensor")&&(g.sparseTensor=d.onnx.SparseTensorProto.toObject(h.sparseTensor,b)),h.sparseTensors&&h.sparseTensors.length){g.sparseTensors=[];for(var Ht=0;Ht<h.sparseTensors.length;++Ht)g.sparseTensors[Ht]=d.onnx.SparseTensorProto.toObject(h.sparseTensors[Ht],b)}return g},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.AttributeProto"},$t.AttributeType=function(){var h={},b=Object.create(h);return b[h[0]="UNDEFINED"]=0,b[h[1]="FLOAT"]=1,b[h[2]="INT"]=2,b[h[3]="STRING"]=3,b[h[4]="TENSOR"]=4,b[h[5]="GRAPH"]=5,b[h[11]="SPARSE_TENSOR"]=11,b[h[13]="TYPE_PROTO"]=13,b[h[6]="FLOATS"]=6,b[h[7]="INTS"]=7,b[h[8]="STRINGS"]=8,b[h[9]="TENSORS"]=9,b[h[10]="GRAPHS"]=10,b[h[12]="SPARSE_TENSORS"]=12,b[h[14]="TYPE_PROTOS"]=14,b}(),$t}(),et.ValueInfoProto=function(){function $t(h){if(h)for(var b=Object.keys(h),g=0;g<b.length;++g)h[b[g]]!=null&&(this[b[g]]=h[b[g]])}return $t.prototype.name="",$t.prototype.type=null,$t.prototype.docString="",$t.create=function(h){return new $t(h)},$t.encode=function(h,b){return b||(b=c.create()),h.name!=null&&Object.hasOwnProperty.call(h,"name")&&b.uint32(10).string(h.name),h.type!=null&&Object.hasOwnProperty.call(h,"type")&&d.onnx.TypeProto.encode(h.type,b.uint32(18).fork()).ldelim(),h.docString!=null&&Object.hasOwnProperty.call(h,"docString")&&b.uint32(26).string(h.docString),b},$t.encodeDelimited=function(h,b){return this.encode(h,b).ldelim()},$t.decode=function(h,b){h instanceof o||(h=o.create(h));for(var g=b===void 0?h.len:h.pos+b,jt=new d.onnx.ValueInfoProto;h.pos<g;){var Ht=h.uint32();switch(Ht>>>3){case 1:{jt.name=h.string();break}case 2:{jt.type=d.onnx.TypeProto.decode(h,h.uint32());break}case 3:{jt.docString=h.string();break}default:h.skipType(Ht&7);break}}return jt},$t.decodeDelimited=function(h){return h instanceof o||(h=new o(h)),this.decode(h,h.uint32())},$t.verify=function(h){if(typeof h!="object"||h===null)return"object expected";if(h.name!=null&&h.hasOwnProperty("name")&&!s.isString(h.name))return"name: string expected";if(h.type!=null&&h.hasOwnProperty("type")){var b=d.onnx.TypeProto.verify(h.type);if(b)return"type."+b}return h.docString!=null&&h.hasOwnProperty("docString")&&!s.isString(h.docString)?"docString: string expected":null},$t.fromObject=function(h){if(h instanceof d.onnx.ValueInfoProto)return h;var b=new d.onnx.ValueInfoProto;if(h.name!=null&&(b.name=String(h.name)),h.type!=null){if(typeof h.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");b.type=d.onnx.TypeProto.fromObject(h.type)}return h.docString!=null&&(b.docString=String(h.docString)),b},$t.toObject=function(h,b){b||(b={});var g={};return b.defaults&&(g.name="",g.type=null,g.docString=""),h.name!=null&&h.hasOwnProperty("name")&&(g.name=h.name),h.type!=null&&h.hasOwnProperty("type")&&(g.type=d.onnx.TypeProto.toObject(h.type,b)),h.docString!=null&&h.hasOwnProperty("docString")&&(g.docString=h.docString),g},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.ValueInfoProto"},$t}(),et.NodeProto=function(){function $t(h){if(this.input=[],this.output=[],this.attribute=[],h)for(var b=Object.keys(h),g=0;g<b.length;++g)h[b[g]]!=null&&(this[b[g]]=h[b[g]])}return $t.prototype.input=s.emptyArray,$t.prototype.output=s.emptyArray,$t.prototype.name="",$t.prototype.opType="",$t.prototype.domain="",$t.prototype.attribute=s.emptyArray,$t.prototype.docString="",$t.create=function(h){return new $t(h)},$t.encode=function(h,b){if(b||(b=c.create()),h.input!=null&&h.input.length)for(var g=0;g<h.input.length;++g)b.uint32(10).string(h.input[g]);if(h.output!=null&&h.output.length)for(var g=0;g<h.output.length;++g)b.uint32(18).string(h.output[g]);if(h.name!=null&&Object.hasOwnProperty.call(h,"name")&&b.uint32(26).string(h.name),h.opType!=null&&Object.hasOwnProperty.call(h,"opType")&&b.uint32(34).string(h.opType),h.attribute!=null&&h.attribute.length)for(var g=0;g<h.attribute.length;++g)d.onnx.AttributeProto.encode(h.attribute[g],b.uint32(42).fork()).ldelim();return h.docString!=null&&Object.hasOwnProperty.call(h,"docString")&&b.uint32(50).string(h.docString),h.domain!=null&&Object.hasOwnProperty.call(h,"domain")&&b.uint32(58).string(h.domain),b},$t.encodeDelimited=function(h,b){return this.encode(h,b).ldelim()},$t.decode=function(h,b){h instanceof o||(h=o.create(h));for(var g=b===void 0?h.len:h.pos+b,jt=new d.onnx.NodeProto;h.pos<g;){var Ht=h.uint32();switch(Ht>>>3){case 1:{jt.input&&jt.input.length||(jt.input=[]),jt.input.push(h.string());break}case 2:{jt.output&&jt.output.length||(jt.output=[]),jt.output.push(h.string());break}case 3:{jt.name=h.string();break}case 4:{jt.opType=h.string();break}case 7:{jt.domain=h.string();break}case 5:{jt.attribute&&jt.attribute.length||(jt.attribute=[]),jt.attribute.push(d.onnx.AttributeProto.decode(h,h.uint32()));break}case 6:{jt.docString=h.string();break}default:h.skipType(Ht&7);break}}return jt},$t.decodeDelimited=function(h){return h instanceof o||(h=new o(h)),this.decode(h,h.uint32())},$t.verify=function(h){if(typeof h!="object"||h===null)return"object expected";if(h.input!=null&&h.hasOwnProperty("input")){if(!Array.isArray(h.input))return"input: array expected";for(var b=0;b<h.input.length;++b)if(!s.isString(h.input[b]))return"input: string[] expected"}if(h.output!=null&&h.hasOwnProperty("output")){if(!Array.isArray(h.output))return"output: array expected";for(var b=0;b<h.output.length;++b)if(!s.isString(h.output[b]))return"output: string[] expected"}if(h.name!=null&&h.hasOwnProperty("name")&&!s.isString(h.name))return"name: string expected";if(h.opType!=null&&h.hasOwnProperty("opType")&&!s.isString(h.opType))return"opType: string expected";if(h.domain!=null&&h.hasOwnProperty("domain")&&!s.isString(h.domain))return"domain: string expected";if(h.attribute!=null&&h.hasOwnProperty("attribute")){if(!Array.isArray(h.attribute))return"attribute: array expected";for(var b=0;b<h.attribute.length;++b){var g=d.onnx.AttributeProto.verify(h.attribute[b]);if(g)return"attribute."+g}}return h.docString!=null&&h.hasOwnProperty("docString")&&!s.isString(h.docString)?"docString: string expected":null},$t.fromObject=function(h){if(h instanceof d.onnx.NodeProto)return h;var b=new d.onnx.NodeProto;if(h.input){if(!Array.isArray(h.input))throw TypeError(".onnx.NodeProto.input: array expected");b.input=[];for(var g=0;g<h.input.length;++g)b.input[g]=String(h.input[g])}if(h.output){if(!Array.isArray(h.output))throw TypeError(".onnx.NodeProto.output: array expected");b.output=[];for(var g=0;g<h.output.length;++g)b.output[g]=String(h.output[g])}if(h.name!=null&&(b.name=String(h.name)),h.opType!=null&&(b.opType=String(h.opType)),h.domain!=null&&(b.domain=String(h.domain)),h.attribute){if(!Array.isArray(h.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");b.attribute=[];for(var g=0;g<h.attribute.length;++g){if(typeof h.attribute[g]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");b.attribute[g]=d.onnx.AttributeProto.fromObject(h.attribute[g])}}return h.docString!=null&&(b.docString=String(h.docString)),b},$t.toObject=function(h,b){b||(b={});var g={};if((b.arrays||b.defaults)&&(g.input=[],g.output=[],g.attribute=[]),b.defaults&&(g.name="",g.opType="",g.docString="",g.domain=""),h.input&&h.input.length){g.input=[];for(var jt=0;jt<h.input.length;++jt)g.input[jt]=h.input[jt]}if(h.output&&h.output.length){g.output=[];for(var jt=0;jt<h.output.length;++jt)g.output[jt]=h.output[jt]}if(h.name!=null&&h.hasOwnProperty("name")&&(g.name=h.name),h.opType!=null&&h.hasOwnProperty("opType")&&(g.opType=h.opType),h.attribute&&h.attribute.length){g.attribute=[];for(var jt=0;jt<h.attribute.length;++jt)g.attribute[jt]=d.onnx.AttributeProto.toObject(h.attribute[jt],b)}return h.docString!=null&&h.hasOwnProperty("docString")&&(g.docString=h.docString),h.domain!=null&&h.hasOwnProperty("domain")&&(g.domain=h.domain),g},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.NodeProto"},$t}(),et.TrainingInfoProto=function(){function $t(h){if(this.initializationBinding=[],this.updateBinding=[],h)for(var b=Object.keys(h),g=0;g<b.length;++g)h[b[g]]!=null&&(this[b[g]]=h[b[g]])}return $t.prototype.initialization=null,$t.prototype.algorithm=null,$t.prototype.initializationBinding=s.emptyArray,$t.prototype.updateBinding=s.emptyArray,$t.create=function(h){return new $t(h)},$t.encode=function(h,b){if(b||(b=c.create()),h.initialization!=null&&Object.hasOwnProperty.call(h,"initialization")&&d.onnx.GraphProto.encode(h.initialization,b.uint32(10).fork()).ldelim(),h.algorithm!=null&&Object.hasOwnProperty.call(h,"algorithm")&&d.onnx.GraphProto.encode(h.algorithm,b.uint32(18).fork()).ldelim(),h.initializationBinding!=null&&h.initializationBinding.length)for(var g=0;g<h.initializationBinding.length;++g)d.onnx.StringStringEntryProto.encode(h.initializationBinding[g],b.uint32(26).fork()).ldelim();if(h.updateBinding!=null&&h.updateBinding.length)for(var g=0;g<h.updateBinding.length;++g)d.onnx.StringStringEntryProto.encode(h.updateBinding[g],b.uint32(34).fork()).ldelim();return b},$t.encodeDelimited=function(h,b){return this.encode(h,b).ldelim()},$t.decode=function(h,b){h instanceof o||(h=o.create(h));for(var g=b===void 0?h.len:h.pos+b,jt=new d.onnx.TrainingInfoProto;h.pos<g;){var Ht=h.uint32();switch(Ht>>>3){case 1:{jt.initialization=d.onnx.GraphProto.decode(h,h.uint32());break}case 2:{jt.algorithm=d.onnx.GraphProto.decode(h,h.uint32());break}case 3:{jt.initializationBinding&&jt.initializationBinding.length||(jt.initializationBinding=[]),jt.initializationBinding.push(d.onnx.StringStringEntryProto.decode(h,h.uint32()));break}case 4:{jt.updateBinding&&jt.updateBinding.length||(jt.updateBinding=[]),jt.updateBinding.push(d.onnx.StringStringEntryProto.decode(h,h.uint32()));break}default:h.skipType(Ht&7);break}}return jt},$t.decodeDelimited=function(h){return h instanceof o||(h=new o(h)),this.decode(h,h.uint32())},$t.verify=function(h){if(typeof h!="object"||h===null)return"object expected";if(h.initialization!=null&&h.hasOwnProperty("initialization")){var b=d.onnx.GraphProto.verify(h.initialization);if(b)return"initialization."+b}if(h.algorithm!=null&&h.hasOwnProperty("algorithm")){var b=d.onnx.GraphProto.verify(h.algorithm);if(b)return"algorithm."+b}if(h.initializationBinding!=null&&h.hasOwnProperty("initializationBinding")){if(!Array.isArray(h.initializationBinding))return"initializationBinding: array expected";for(var g=0;g<h.initializationBinding.length;++g){var b=d.onnx.StringStringEntryProto.verify(h.initializationBinding[g]);if(b)return"initializationBinding."+b}}if(h.updateBinding!=null&&h.hasOwnProperty("updateBinding")){if(!Array.isArray(h.updateBinding))return"updateBinding: array expected";for(var g=0;g<h.updateBinding.length;++g){var b=d.onnx.StringStringEntryProto.verify(h.updateBinding[g]);if(b)return"updateBinding."+b}}return null},$t.fromObject=function(h){if(h instanceof d.onnx.TrainingInfoProto)return h;var b=new d.onnx.TrainingInfoProto;if(h.initialization!=null){if(typeof h.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");b.initialization=d.onnx.GraphProto.fromObject(h.initialization)}if(h.algorithm!=null){if(typeof h.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");b.algorithm=d.onnx.GraphProto.fromObject(h.algorithm)}if(h.initializationBinding){if(!Array.isArray(h.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");b.initializationBinding=[];for(var g=0;g<h.initializationBinding.length;++g){if(typeof h.initializationBinding[g]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");b.initializationBinding[g]=d.onnx.StringStringEntryProto.fromObject(h.initializationBinding[g])}}if(h.updateBinding){if(!Array.isArray(h.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");b.updateBinding=[];for(var g=0;g<h.updateBinding.length;++g){if(typeof h.updateBinding[g]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");b.updateBinding[g]=d.onnx.StringStringEntryProto.fromObject(h.updateBinding[g])}}return b},$t.toObject=function(h,b){b||(b={});var g={};if((b.arrays||b.defaults)&&(g.initializationBinding=[],g.updateBinding=[]),b.defaults&&(g.initialization=null,g.algorithm=null),h.initialization!=null&&h.hasOwnProperty("initialization")&&(g.initialization=d.onnx.GraphProto.toObject(h.initialization,b)),h.algorithm!=null&&h.hasOwnProperty("algorithm")&&(g.algorithm=d.onnx.GraphProto.toObject(h.algorithm,b)),h.initializationBinding&&h.initializationBinding.length){g.initializationBinding=[];for(var jt=0;jt<h.initializationBinding.length;++jt)g.initializationBinding[jt]=d.onnx.StringStringEntryProto.toObject(h.initializationBinding[jt],b)}if(h.updateBinding&&h.updateBinding.length){g.updateBinding=[];for(var jt=0;jt<h.updateBinding.length;++jt)g.updateBinding[jt]=d.onnx.StringStringEntryProto.toObject(h.updateBinding[jt],b)}return g},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.TrainingInfoProto"},$t}(),et.ModelProto=function(){function $t(h){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],h)for(var b=Object.keys(h),g=0;g<b.length;++g)h[b[g]]!=null&&(this[b[g]]=h[b[g]])}return $t.prototype.irVersion=s.Long?s.Long.fromBits(0,0,!1):0,$t.prototype.opsetImport=s.emptyArray,$t.prototype.producerName="",$t.prototype.producerVersion="",$t.prototype.domain="",$t.prototype.modelVersion=s.Long?s.Long.fromBits(0,0,!1):0,$t.prototype.docString="",$t.prototype.graph=null,$t.prototype.metadataProps=s.emptyArray,$t.prototype.trainingInfo=s.emptyArray,$t.prototype.functions=s.emptyArray,$t.create=function(h){return new $t(h)},$t.encode=function(h,b){if(b||(b=c.create()),h.irVersion!=null&&Object.hasOwnProperty.call(h,"irVersion")&&b.uint32(8).int64(h.irVersion),h.producerName!=null&&Object.hasOwnProperty.call(h,"producerName")&&b.uint32(18).string(h.producerName),h.producerVersion!=null&&Object.hasOwnProperty.call(h,"producerVersion")&&b.uint32(26).string(h.producerVersion),h.domain!=null&&Object.hasOwnProperty.call(h,"domain")&&b.uint32(34).string(h.domain),h.modelVersion!=null&&Object.hasOwnProperty.call(h,"modelVersion")&&b.uint32(40).int64(h.modelVersion),h.docString!=null&&Object.hasOwnProperty.call(h,"docString")&&b.uint32(50).string(h.docString),h.graph!=null&&Object.hasOwnProperty.call(h,"graph")&&d.onnx.GraphProto.encode(h.graph,b.uint32(58).fork()).ldelim(),h.opsetImport!=null&&h.opsetImport.length)for(var g=0;g<h.opsetImport.length;++g)d.onnx.OperatorSetIdProto.encode(h.opsetImport[g],b.uint32(66).fork()).ldelim();if(h.metadataProps!=null&&h.metadataProps.length)for(var g=0;g<h.metadataProps.length;++g)d.onnx.StringStringEntryProto.encode(h.metadataProps[g],b.uint32(114).fork()).ldelim();if(h.trainingInfo!=null&&h.trainingInfo.length)for(var g=0;g<h.trainingInfo.length;++g)d.onnx.TrainingInfoProto.encode(h.trainingInfo[g],b.uint32(162).fork()).ldelim();if(h.functions!=null&&h.functions.length)for(var g=0;g<h.functions.length;++g)d.onnx.FunctionProto.encode(h.functions[g],b.uint32(202).fork()).ldelim();return b},$t.encodeDelimited=function(h,b){return this.encode(h,b).ldelim()},$t.decode=function(h,b){h instanceof o||(h=o.create(h));for(var g=b===void 0?h.len:h.pos+b,jt=new d.onnx.ModelProto;h.pos<g;){var Ht=h.uint32();switch(Ht>>>3){case 1:{jt.irVersion=h.int64();break}case 8:{jt.opsetImport&&jt.opsetImport.length||(jt.opsetImport=[]),jt.opsetImport.push(d.onnx.OperatorSetIdProto.decode(h,h.uint32()));break}case 2:{jt.producerName=h.string();break}case 3:{jt.producerVersion=h.string();break}case 4:{jt.domain=h.string();break}case 5:{jt.modelVersion=h.int64();break}case 6:{jt.docString=h.string();break}case 7:{jt.graph=d.onnx.GraphProto.decode(h,h.uint32());break}case 14:{jt.metadataProps&&jt.metadataProps.length||(jt.metadataProps=[]),jt.metadataProps.push(d.onnx.StringStringEntryProto.decode(h,h.uint32()));break}case 20:{jt.trainingInfo&&jt.trainingInfo.length||(jt.trainingInfo=[]),jt.trainingInfo.push(d.onnx.TrainingInfoProto.decode(h,h.uint32()));break}case 25:{jt.functions&&jt.functions.length||(jt.functions=[]),jt.functions.push(d.onnx.FunctionProto.decode(h,h.uint32()));break}default:h.skipType(Ht&7);break}}return jt},$t.decodeDelimited=function(h){return h instanceof o||(h=new o(h)),this.decode(h,h.uint32())},$t.verify=function(h){if(typeof h!="object"||h===null)return"object expected";if(h.irVersion!=null&&h.hasOwnProperty("irVersion")&&!s.isInteger(h.irVersion)&&!(h.irVersion&&s.isInteger(h.irVersion.low)&&s.isInteger(h.irVersion.high)))return"irVersion: integer|Long expected";if(h.opsetImport!=null&&h.hasOwnProperty("opsetImport")){if(!Array.isArray(h.opsetImport))return"opsetImport: array expected";for(var b=0;b<h.opsetImport.length;++b){var g=d.onnx.OperatorSetIdProto.verify(h.opsetImport[b]);if(g)return"opsetImport."+g}}if(h.producerName!=null&&h.hasOwnProperty("producerName")&&!s.isString(h.producerName))return"producerName: string expected";if(h.producerVersion!=null&&h.hasOwnProperty("producerVersion")&&!s.isString(h.producerVersion))return"producerVersion: string expected";if(h.domain!=null&&h.hasOwnProperty("domain")&&!s.isString(h.domain))return"domain: string expected";if(h.modelVersion!=null&&h.hasOwnProperty("modelVersion")&&!s.isInteger(h.modelVersion)&&!(h.modelVersion&&s.isInteger(h.modelVersion.low)&&s.isInteger(h.modelVersion.high)))return"modelVersion: integer|Long expected";if(h.docString!=null&&h.hasOwnProperty("docString")&&!s.isString(h.docString))return"docString: string expected";if(h.graph!=null&&h.hasOwnProperty("graph")){var g=d.onnx.GraphProto.verify(h.graph);if(g)return"graph."+g}if(h.metadataProps!=null&&h.hasOwnProperty("metadataProps")){if(!Array.isArray(h.metadataProps))return"metadataProps: array expected";for(var b=0;b<h.metadataProps.length;++b){var g=d.onnx.StringStringEntryProto.verify(h.metadataProps[b]);if(g)return"metadataProps."+g}}if(h.trainingInfo!=null&&h.hasOwnProperty("trainingInfo")){if(!Array.isArray(h.trainingInfo))return"trainingInfo: array expected";for(var b=0;b<h.trainingInfo.length;++b){var g=d.onnx.TrainingInfoProto.verify(h.trainingInfo[b]);if(g)return"trainingInfo."+g}}if(h.functions!=null&&h.hasOwnProperty("functions")){if(!Array.isArray(h.functions))return"functions: array expected";for(var b=0;b<h.functions.length;++b){var g=d.onnx.FunctionProto.verify(h.functions[b]);if(g)return"functions."+g}}return null},$t.fromObject=function(h){if(h instanceof d.onnx.ModelProto)return h;var b=new d.onnx.ModelProto;if(h.irVersion!=null&&(s.Long?(b.irVersion=s.Long.fromValue(h.irVersion)).unsigned=!1:typeof h.irVersion=="string"?b.irVersion=parseInt(h.irVersion,10):typeof h.irVersion=="number"?b.irVersion=h.irVersion:typeof h.irVersion=="object"&&(b.irVersion=new s.LongBits(h.irVersion.low>>>0,h.irVersion.high>>>0).toNumber())),h.opsetImport){if(!Array.isArray(h.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");b.opsetImport=[];for(var g=0;g<h.opsetImport.length;++g){if(typeof h.opsetImport[g]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");b.opsetImport[g]=d.onnx.OperatorSetIdProto.fromObject(h.opsetImport[g])}}if(h.producerName!=null&&(b.producerName=String(h.producerName)),h.producerVersion!=null&&(b.producerVersion=String(h.producerVersion)),h.domain!=null&&(b.domain=String(h.domain)),h.modelVersion!=null&&(s.Long?(b.modelVersion=s.Long.fromValue(h.modelVersion)).unsigned=!1:typeof h.modelVersion=="string"?b.modelVersion=parseInt(h.modelVersion,10):typeof h.modelVersion=="number"?b.modelVersion=h.modelVersion:typeof h.modelVersion=="object"&&(b.modelVersion=new s.LongBits(h.modelVersion.low>>>0,h.modelVersion.high>>>0).toNumber())),h.docString!=null&&(b.docString=String(h.docString)),h.graph!=null){if(typeof h.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");b.graph=d.onnx.GraphProto.fromObject(h.graph)}if(h.metadataProps){if(!Array.isArray(h.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");b.metadataProps=[];for(var g=0;g<h.metadataProps.length;++g){if(typeof h.metadataProps[g]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");b.metadataProps[g]=d.onnx.StringStringEntryProto.fromObject(h.metadataProps[g])}}if(h.trainingInfo){if(!Array.isArray(h.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");b.trainingInfo=[];for(var g=0;g<h.trainingInfo.length;++g){if(typeof h.trainingInfo[g]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");b.trainingInfo[g]=d.onnx.TrainingInfoProto.fromObject(h.trainingInfo[g])}}if(h.functions){if(!Array.isArray(h.functions))throw TypeError(".onnx.ModelProto.functions: array expected");b.functions=[];for(var g=0;g<h.functions.length;++g){if(typeof h.functions[g]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");b.functions[g]=d.onnx.FunctionProto.fromObject(h.functions[g])}}return b},$t.toObject=function(h,b){b||(b={});var g={};if((b.arrays||b.defaults)&&(g.opsetImport=[],g.metadataProps=[],g.trainingInfo=[],g.functions=[]),b.defaults){if(s.Long){var jt=new s.Long(0,0,!1);g.irVersion=b.longs===String?jt.toString():b.longs===Number?jt.toNumber():jt}else g.irVersion=b.longs===String?"0":0;if(g.producerName="",g.producerVersion="",g.domain="",s.Long){var jt=new s.Long(0,0,!1);g.modelVersion=b.longs===String?jt.toString():b.longs===Number?jt.toNumber():jt}else g.modelVersion=b.longs===String?"0":0;g.docString="",g.graph=null}if(h.irVersion!=null&&h.hasOwnProperty("irVersion")&&(typeof h.irVersion=="number"?g.irVersion=b.longs===String?String(h.irVersion):h.irVersion:g.irVersion=b.longs===String?s.Long.prototype.toString.call(h.irVersion):b.longs===Number?new s.LongBits(h.irVersion.low>>>0,h.irVersion.high>>>0).toNumber():h.irVersion),h.producerName!=null&&h.hasOwnProperty("producerName")&&(g.producerName=h.producerName),h.producerVersion!=null&&h.hasOwnProperty("producerVersion")&&(g.producerVersion=h.producerVersion),h.domain!=null&&h.hasOwnProperty("domain")&&(g.domain=h.domain),h.modelVersion!=null&&h.hasOwnProperty("modelVersion")&&(typeof h.modelVersion=="number"?g.modelVersion=b.longs===String?String(h.modelVersion):h.modelVersion:g.modelVersion=b.longs===String?s.Long.prototype.toString.call(h.modelVersion):b.longs===Number?new s.LongBits(h.modelVersion.low>>>0,h.modelVersion.high>>>0).toNumber():h.modelVersion),h.docString!=null&&h.hasOwnProperty("docString")&&(g.docString=h.docString),h.graph!=null&&h.hasOwnProperty("graph")&&(g.graph=d.onnx.GraphProto.toObject(h.graph,b)),h.opsetImport&&h.opsetImport.length){g.opsetImport=[];for(var Ht=0;Ht<h.opsetImport.length;++Ht)g.opsetImport[Ht]=d.onnx.OperatorSetIdProto.toObject(h.opsetImport[Ht],b)}if(h.metadataProps&&h.metadataProps.length){g.metadataProps=[];for(var Ht=0;Ht<h.metadataProps.length;++Ht)g.metadataProps[Ht]=d.onnx.StringStringEntryProto.toObject(h.metadataProps[Ht],b)}if(h.trainingInfo&&h.trainingInfo.length){g.trainingInfo=[];for(var Ht=0;Ht<h.trainingInfo.length;++Ht)g.trainingInfo[Ht]=d.onnx.TrainingInfoProto.toObject(h.trainingInfo[Ht],b)}if(h.functions&&h.functions.length){g.functions=[];for(var Ht=0;Ht<h.functions.length;++Ht)g.functions[Ht]=d.onnx.FunctionProto.toObject(h.functions[Ht],b)}return g},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.ModelProto"},$t}(),et.StringStringEntryProto=function(){function $t(h){if(h)for(var b=Object.keys(h),g=0;g<b.length;++g)h[b[g]]!=null&&(this[b[g]]=h[b[g]])}return $t.prototype.key="",$t.prototype.value="",$t.create=function(h){return new $t(h)},$t.encode=function(h,b){return b||(b=c.create()),h.key!=null&&Object.hasOwnProperty.call(h,"key")&&b.uint32(10).string(h.key),h.value!=null&&Object.hasOwnProperty.call(h,"value")&&b.uint32(18).string(h.value),b},$t.encodeDelimited=function(h,b){return this.encode(h,b).ldelim()},$t.decode=function(h,b){h instanceof o||(h=o.create(h));for(var g=b===void 0?h.len:h.pos+b,jt=new d.onnx.StringStringEntryProto;h.pos<g;){var Ht=h.uint32();switch(Ht>>>3){case 1:{jt.key=h.string();break}case 2:{jt.value=h.string();break}default:h.skipType(Ht&7);break}}return jt},$t.decodeDelimited=function(h){return h instanceof o||(h=new o(h)),this.decode(h,h.uint32())},$t.verify=function(h){return typeof h!="object"||h===null?"object expected":h.key!=null&&h.hasOwnProperty("key")&&!s.isString(h.key)?"key: string expected":h.value!=null&&h.hasOwnProperty("value")&&!s.isString(h.value)?"value: string expected":null},$t.fromObject=function(h){if(h instanceof d.onnx.StringStringEntryProto)return h;var b=new d.onnx.StringStringEntryProto;return h.key!=null&&(b.key=String(h.key)),h.value!=null&&(b.value=String(h.value)),b},$t.toObject=function(h,b){b||(b={});var g={};return b.defaults&&(g.key="",g.value=""),h.key!=null&&h.hasOwnProperty("key")&&(g.key=h.key),h.value!=null&&h.hasOwnProperty("value")&&(g.value=h.value),g},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.StringStringEntryProto"},$t}(),et.TensorAnnotation=function(){function $t(h){if(this.quantParameterTensorNames=[],h)for(var b=Object.keys(h),g=0;g<b.length;++g)h[b[g]]!=null&&(this[b[g]]=h[b[g]])}return $t.prototype.tensorName="",$t.prototype.quantParameterTensorNames=s.emptyArray,$t.create=function(h){return new $t(h)},$t.encode=function(h,b){if(b||(b=c.create()),h.tensorName!=null&&Object.hasOwnProperty.call(h,"tensorName")&&b.uint32(10).string(h.tensorName),h.quantParameterTensorNames!=null&&h.quantParameterTensorNames.length)for(var g=0;g<h.quantParameterTensorNames.length;++g)d.onnx.StringStringEntryProto.encode(h.quantParameterTensorNames[g],b.uint32(18).fork()).ldelim();return b},$t.encodeDelimited=function(h,b){return this.encode(h,b).ldelim()},$t.decode=function(h,b){h instanceof o||(h=o.create(h));for(var g=b===void 0?h.len:h.pos+b,jt=new d.onnx.TensorAnnotation;h.pos<g;){var Ht=h.uint32();switch(Ht>>>3){case 1:{jt.tensorName=h.string();break}case 2:{jt.quantParameterTensorNames&&jt.quantParameterTensorNames.length||(jt.quantParameterTensorNames=[]),jt.quantParameterTensorNames.push(d.onnx.StringStringEntryProto.decode(h,h.uint32()));break}default:h.skipType(Ht&7);break}}return jt},$t.decodeDelimited=function(h){return h instanceof o||(h=new o(h)),this.decode(h,h.uint32())},$t.verify=function(h){if(typeof h!="object"||h===null)return"object expected";if(h.tensorName!=null&&h.hasOwnProperty("tensorName")&&!s.isString(h.tensorName))return"tensorName: string expected";if(h.quantParameterTensorNames!=null&&h.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(h.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var b=0;b<h.quantParameterTensorNames.length;++b){var g=d.onnx.StringStringEntryProto.verify(h.quantParameterTensorNames[b]);if(g)return"quantParameterTensorNames."+g}}return null},$t.fromObject=function(h){if(h instanceof d.onnx.TensorAnnotation)return h;var b=new d.onnx.TensorAnnotation;if(h.tensorName!=null&&(b.tensorName=String(h.tensorName)),h.quantParameterTensorNames){if(!Array.isArray(h.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");b.quantParameterTensorNames=[];for(var g=0;g<h.quantParameterTensorNames.length;++g){if(typeof h.quantParameterTensorNames[g]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");b.quantParameterTensorNames[g]=d.onnx.StringStringEntryProto.fromObject(h.quantParameterTensorNames[g])}}return b},$t.toObject=function(h,b){b||(b={});var g={};if((b.arrays||b.defaults)&&(g.quantParameterTensorNames=[]),b.defaults&&(g.tensorName=""),h.tensorName!=null&&h.hasOwnProperty("tensorName")&&(g.tensorName=h.tensorName),h.quantParameterTensorNames&&h.quantParameterTensorNames.length){g.quantParameterTensorNames=[];for(var jt=0;jt<h.quantParameterTensorNames.length;++jt)g.quantParameterTensorNames[jt]=d.onnx.StringStringEntryProto.toObject(h.quantParameterTensorNames[jt],b)}return g},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.TensorAnnotation"},$t}(),et.GraphProto=function(){function $t(h){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],h)for(var b=Object.keys(h),g=0;g<b.length;++g)h[b[g]]!=null&&(this[b[g]]=h[b[g]])}return $t.prototype.node=s.emptyArray,$t.prototype.name="",$t.prototype.initializer=s.emptyArray,$t.prototype.sparseInitializer=s.emptyArray,$t.prototype.docString="",$t.prototype.input=s.emptyArray,$t.prototype.output=s.emptyArray,$t.prototype.valueInfo=s.emptyArray,$t.prototype.quantizationAnnotation=s.emptyArray,$t.create=function(h){return new $t(h)},$t.encode=function(h,b){if(b||(b=c.create()),h.node!=null&&h.node.length)for(var g=0;g<h.node.length;++g)d.onnx.NodeProto.encode(h.node[g],b.uint32(10).fork()).ldelim();if(h.name!=null&&Object.hasOwnProperty.call(h,"name")&&b.uint32(18).string(h.name),h.initializer!=null&&h.initializer.length)for(var g=0;g<h.initializer.length;++g)d.onnx.TensorProto.encode(h.initializer[g],b.uint32(42).fork()).ldelim();if(h.docString!=null&&Object.hasOwnProperty.call(h,"docString")&&b.uint32(82).string(h.docString),h.input!=null&&h.input.length)for(var g=0;g<h.input.length;++g)d.onnx.ValueInfoProto.encode(h.input[g],b.uint32(90).fork()).ldelim();if(h.output!=null&&h.output.length)for(var g=0;g<h.output.length;++g)d.onnx.ValueInfoProto.encode(h.output[g],b.uint32(98).fork()).ldelim();if(h.valueInfo!=null&&h.valueInfo.length)for(var g=0;g<h.valueInfo.length;++g)d.onnx.ValueInfoProto.encode(h.valueInfo[g],b.uint32(106).fork()).ldelim();if(h.quantizationAnnotation!=null&&h.quantizationAnnotation.length)for(var g=0;g<h.quantizationAnnotation.length;++g)d.onnx.TensorAnnotation.encode(h.quantizationAnnotation[g],b.uint32(114).fork()).ldelim();if(h.sparseInitializer!=null&&h.sparseInitializer.length)for(var g=0;g<h.sparseInitializer.length;++g)d.onnx.SparseTensorProto.encode(h.sparseInitializer[g],b.uint32(122).fork()).ldelim();return b},$t.encodeDelimited=function(h,b){return this.encode(h,b).ldelim()},$t.decode=function(h,b){h instanceof o||(h=o.create(h));for(var g=b===void 0?h.len:h.pos+b,jt=new d.onnx.GraphProto;h.pos<g;){var Ht=h.uint32();switch(Ht>>>3){case 1:{jt.node&&jt.node.length||(jt.node=[]),jt.node.push(d.onnx.NodeProto.decode(h,h.uint32()));break}case 2:{jt.name=h.string();break}case 5:{jt.initializer&&jt.initializer.length||(jt.initializer=[]),jt.initializer.push(d.onnx.TensorProto.decode(h,h.uint32()));break}case 15:{jt.sparseInitializer&&jt.sparseInitializer.length||(jt.sparseInitializer=[]),jt.sparseInitializer.push(d.onnx.SparseTensorProto.decode(h,h.uint32()));break}case 10:{jt.docString=h.string();break}case 11:{jt.input&&jt.input.length||(jt.input=[]),jt.input.push(d.onnx.ValueInfoProto.decode(h,h.uint32()));break}case 12:{jt.output&&jt.output.length||(jt.output=[]),jt.output.push(d.onnx.ValueInfoProto.decode(h,h.uint32()));break}case 13:{jt.valueInfo&&jt.valueInfo.length||(jt.valueInfo=[]),jt.valueInfo.push(d.onnx.ValueInfoProto.decode(h,h.uint32()));break}case 14:{jt.quantizationAnnotation&&jt.quantizationAnnotation.length||(jt.quantizationAnnotation=[]),jt.quantizationAnnotation.push(d.onnx.TensorAnnotation.decode(h,h.uint32()));break}default:h.skipType(Ht&7);break}}return jt},$t.decodeDelimited=function(h){return h instanceof o||(h=new o(h)),this.decode(h,h.uint32())},$t.verify=function(h){if(typeof h!="object"||h===null)return"object expected";if(h.node!=null&&h.hasOwnProperty("node")){if(!Array.isArray(h.node))return"node: array expected";for(var b=0;b<h.node.length;++b){var g=d.onnx.NodeProto.verify(h.node[b]);if(g)return"node."+g}}if(h.name!=null&&h.hasOwnProperty("name")&&!s.isString(h.name))return"name: string expected";if(h.initializer!=null&&h.hasOwnProperty("initializer")){if(!Array.isArray(h.initializer))return"initializer: array expected";for(var b=0;b<h.initializer.length;++b){var g=d.onnx.TensorProto.verify(h.initializer[b]);if(g)return"initializer."+g}}if(h.sparseInitializer!=null&&h.hasOwnProperty("sparseInitializer")){if(!Array.isArray(h.sparseInitializer))return"sparseInitializer: array expected";for(var b=0;b<h.sparseInitializer.length;++b){var g=d.onnx.SparseTensorProto.verify(h.sparseInitializer[b]);if(g)return"sparseInitializer."+g}}if(h.docString!=null&&h.hasOwnProperty("docString")&&!s.isString(h.docString))return"docString: string expected";if(h.input!=null&&h.hasOwnProperty("input")){if(!Array.isArray(h.input))return"input: array expected";for(var b=0;b<h.input.length;++b){var g=d.onnx.ValueInfoProto.verify(h.input[b]);if(g)return"input."+g}}if(h.output!=null&&h.hasOwnProperty("output")){if(!Array.isArray(h.output))return"output: array expected";for(var b=0;b<h.output.length;++b){var g=d.onnx.ValueInfoProto.verify(h.output[b]);if(g)return"output."+g}}if(h.valueInfo!=null&&h.hasOwnProperty("valueInfo")){if(!Array.isArray(h.valueInfo))return"valueInfo: array expected";for(var b=0;b<h.valueInfo.length;++b){var g=d.onnx.ValueInfoProto.verify(h.valueInfo[b]);if(g)return"valueInfo."+g}}if(h.quantizationAnnotation!=null&&h.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(h.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var b=0;b<h.quantizationAnnotation.length;++b){var g=d.onnx.TensorAnnotation.verify(h.quantizationAnnotation[b]);if(g)return"quantizationAnnotation."+g}}return null},$t.fromObject=function(h){if(h instanceof d.onnx.GraphProto)return h;var b=new d.onnx.GraphProto;if(h.node){if(!Array.isArray(h.node))throw TypeError(".onnx.GraphProto.node: array expected");b.node=[];for(var g=0;g<h.node.length;++g){if(typeof h.node[g]!="object")throw TypeError(".onnx.GraphProto.node: object expected");b.node[g]=d.onnx.NodeProto.fromObject(h.node[g])}}if(h.name!=null&&(b.name=String(h.name)),h.initializer){if(!Array.isArray(h.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");b.initializer=[];for(var g=0;g<h.initializer.length;++g){if(typeof h.initializer[g]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");b.initializer[g]=d.onnx.TensorProto.fromObject(h.initializer[g])}}if(h.sparseInitializer){if(!Array.isArray(h.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");b.sparseInitializer=[];for(var g=0;g<h.sparseInitializer.length;++g){if(typeof h.sparseInitializer[g]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");b.sparseInitializer[g]=d.onnx.SparseTensorProto.fromObject(h.sparseInitializer[g])}}if(h.docString!=null&&(b.docString=String(h.docString)),h.input){if(!Array.isArray(h.input))throw TypeError(".onnx.GraphProto.input: array expected");b.input=[];for(var g=0;g<h.input.length;++g){if(typeof h.input[g]!="object")throw TypeError(".onnx.GraphProto.input: object expected");b.input[g]=d.onnx.ValueInfoProto.fromObject(h.input[g])}}if(h.output){if(!Array.isArray(h.output))throw TypeError(".onnx.GraphProto.output: array expected");b.output=[];for(var g=0;g<h.output.length;++g){if(typeof h.output[g]!="object")throw TypeError(".onnx.GraphProto.output: object expected");b.output[g]=d.onnx.ValueInfoProto.fromObject(h.output[g])}}if(h.valueInfo){if(!Array.isArray(h.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");b.valueInfo=[];for(var g=0;g<h.valueInfo.length;++g){if(typeof h.valueInfo[g]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");b.valueInfo[g]=d.onnx.ValueInfoProto.fromObject(h.valueInfo[g])}}if(h.quantizationAnnotation){if(!Array.isArray(h.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");b.quantizationAnnotation=[];for(var g=0;g<h.quantizationAnnotation.length;++g){if(typeof h.quantizationAnnotation[g]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");b.quantizationAnnotation[g]=d.onnx.TensorAnnotation.fromObject(h.quantizationAnnotation[g])}}return b},$t.toObject=function(h,b){b||(b={});var g={};if((b.arrays||b.defaults)&&(g.node=[],g.initializer=[],g.input=[],g.output=[],g.valueInfo=[],g.quantizationAnnotation=[],g.sparseInitializer=[]),b.defaults&&(g.name="",g.docString=""),h.node&&h.node.length){g.node=[];for(var jt=0;jt<h.node.length;++jt)g.node[jt]=d.onnx.NodeProto.toObject(h.node[jt],b)}if(h.name!=null&&h.hasOwnProperty("name")&&(g.name=h.name),h.initializer&&h.initializer.length){g.initializer=[];for(var jt=0;jt<h.initializer.length;++jt)g.initializer[jt]=d.onnx.TensorProto.toObject(h.initializer[jt],b)}if(h.docString!=null&&h.hasOwnProperty("docString")&&(g.docString=h.docString),h.input&&h.input.length){g.input=[];for(var jt=0;jt<h.input.length;++jt)g.input[jt]=d.onnx.ValueInfoProto.toObject(h.input[jt],b)}if(h.output&&h.output.length){g.output=[];for(var jt=0;jt<h.output.length;++jt)g.output[jt]=d.onnx.ValueInfoProto.toObject(h.output[jt],b)}if(h.valueInfo&&h.valueInfo.length){g.valueInfo=[];for(var jt=0;jt<h.valueInfo.length;++jt)g.valueInfo[jt]=d.onnx.ValueInfoProto.toObject(h.valueInfo[jt],b)}if(h.quantizationAnnotation&&h.quantizationAnnotation.length){g.quantizationAnnotation=[];for(var jt=0;jt<h.quantizationAnnotation.length;++jt)g.quantizationAnnotation[jt]=d.onnx.TensorAnnotation.toObject(h.quantizationAnnotation[jt],b)}if(h.sparseInitializer&&h.sparseInitializer.length){g.sparseInitializer=[];for(var jt=0;jt<h.sparseInitializer.length;++jt)g.sparseInitializer[jt]=d.onnx.SparseTensorProto.toObject(h.sparseInitializer[jt],b)}return g},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.GraphProto"},$t}(),et.TensorProto=function(){function $t(h){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],h)for(var b=Object.keys(h),g=0;g<b.length;++g)h[b[g]]!=null&&(this[b[g]]=h[b[g]])}return $t.prototype.dims=s.emptyArray,$t.prototype.dataType=0,$t.prototype.segment=null,$t.prototype.floatData=s.emptyArray,$t.prototype.int32Data=s.emptyArray,$t.prototype.stringData=s.emptyArray,$t.prototype.int64Data=s.emptyArray,$t.prototype.name="",$t.prototype.docString="",$t.prototype.rawData=s.newBuffer([]),$t.prototype.externalData=s.emptyArray,$t.prototype.dataLocation=0,$t.prototype.doubleData=s.emptyArray,$t.prototype.uint64Data=s.emptyArray,$t.create=function(h){return new $t(h)},$t.encode=function(h,b){if(b||(b=c.create()),h.dims!=null&&h.dims.length){b.uint32(10).fork();for(var g=0;g<h.dims.length;++g)b.int64(h.dims[g]);b.ldelim()}if(h.dataType!=null&&Object.hasOwnProperty.call(h,"dataType")&&b.uint32(16).int32(h.dataType),h.segment!=null&&Object.hasOwnProperty.call(h,"segment")&&d.onnx.TensorProto.Segment.encode(h.segment,b.uint32(26).fork()).ldelim(),h.floatData!=null&&h.floatData.length){b.uint32(34).fork();for(var g=0;g<h.floatData.length;++g)b.float(h.floatData[g]);b.ldelim()}if(h.int32Data!=null&&h.int32Data.length){b.uint32(42).fork();for(var g=0;g<h.int32Data.length;++g)b.int32(h.int32Data[g]);b.ldelim()}if(h.stringData!=null&&h.stringData.length)for(var g=0;g<h.stringData.length;++g)b.uint32(50).bytes(h.stringData[g]);if(h.int64Data!=null&&h.int64Data.length){b.uint32(58).fork();for(var g=0;g<h.int64Data.length;++g)b.int64(h.int64Data[g]);b.ldelim()}if(h.name!=null&&Object.hasOwnProperty.call(h,"name")&&b.uint32(66).string(h.name),h.rawData!=null&&Object.hasOwnProperty.call(h,"rawData")&&b.uint32(74).bytes(h.rawData),h.doubleData!=null&&h.doubleData.length){b.uint32(82).fork();for(var g=0;g<h.doubleData.length;++g)b.double(h.doubleData[g]);b.ldelim()}if(h.uint64Data!=null&&h.uint64Data.length){b.uint32(90).fork();for(var g=0;g<h.uint64Data.length;++g)b.uint64(h.uint64Data[g]);b.ldelim()}if(h.docString!=null&&Object.hasOwnProperty.call(h,"docString")&&b.uint32(98).string(h.docString),h.externalData!=null&&h.externalData.length)for(var g=0;g<h.externalData.length;++g)d.onnx.StringStringEntryProto.encode(h.externalData[g],b.uint32(106).fork()).ldelim();return h.dataLocation!=null&&Object.hasOwnProperty.call(h,"dataLocation")&&b.uint32(112).int32(h.dataLocation),b},$t.encodeDelimited=function(h,b){return this.encode(h,b).ldelim()},$t.decode=function(h,b){h instanceof o||(h=o.create(h));for(var g=b===void 0?h.len:h.pos+b,jt=new d.onnx.TensorProto;h.pos<g;){var Ht=h.uint32();switch(Ht>>>3){case 1:{if(jt.dims&&jt.dims.length||(jt.dims=[]),(Ht&7)===2)for(var Kt=h.uint32()+h.pos;h.pos<Kt;)jt.dims.push(h.int64());else jt.dims.push(h.int64());break}case 2:{jt.dataType=h.int32();break}case 3:{jt.segment=d.onnx.TensorProto.Segment.decode(h,h.uint32());break}case 4:{if(jt.floatData&&jt.floatData.length||(jt.floatData=[]),(Ht&7)===2)for(var Kt=h.uint32()+h.pos;h.pos<Kt;)jt.floatData.push(h.float());else jt.floatData.push(h.float());break}case 5:{if(jt.int32Data&&jt.int32Data.length||(jt.int32Data=[]),(Ht&7)===2)for(var Kt=h.uint32()+h.pos;h.pos<Kt;)jt.int32Data.push(h.int32());else jt.int32Data.push(h.int32());break}case 6:{jt.stringData&&jt.stringData.length||(jt.stringData=[]),jt.stringData.push(h.bytes());break}case 7:{if(jt.int64Data&&jt.int64Data.length||(jt.int64Data=[]),(Ht&7)===2)for(var Kt=h.uint32()+h.pos;h.pos<Kt;)jt.int64Data.push(h.int64());else jt.int64Data.push(h.int64());break}case 8:{jt.name=h.string();break}case 12:{jt.docString=h.string();break}case 9:{jt.rawData=h.bytes();break}case 13:{jt.externalData&&jt.externalData.length||(jt.externalData=[]),jt.externalData.push(d.onnx.StringStringEntryProto.decode(h,h.uint32()));break}case 14:{jt.dataLocation=h.int32();break}case 10:{if(jt.doubleData&&jt.doubleData.length||(jt.doubleData=[]),(Ht&7)===2)for(var Kt=h.uint32()+h.pos;h.pos<Kt;)jt.doubleData.push(h.double());else jt.doubleData.push(h.double());break}case 11:{if(jt.uint64Data&&jt.uint64Data.length||(jt.uint64Data=[]),(Ht&7)===2)for(var Kt=h.uint32()+h.pos;h.pos<Kt;)jt.uint64Data.push(h.uint64());else jt.uint64Data.push(h.uint64());break}default:h.skipType(Ht&7);break}}return jt},$t.decodeDelimited=function(h){return h instanceof o||(h=new o(h)),this.decode(h,h.uint32())},$t.verify=function(h){if(typeof h!="object"||h===null)return"object expected";if(h.dims!=null&&h.hasOwnProperty("dims")){if(!Array.isArray(h.dims))return"dims: array expected";for(var b=0;b<h.dims.length;++b)if(!s.isInteger(h.dims[b])&&!(h.dims[b]&&s.isInteger(h.dims[b].low)&&s.isInteger(h.dims[b].high)))return"dims: integer|Long[] expected"}if(h.dataType!=null&&h.hasOwnProperty("dataType")&&!s.isInteger(h.dataType))return"dataType: integer expected";if(h.segment!=null&&h.hasOwnProperty("segment")){var g=d.onnx.TensorProto.Segment.verify(h.segment);if(g)return"segment."+g}if(h.floatData!=null&&h.hasOwnProperty("floatData")){if(!Array.isArray(h.floatData))return"floatData: array expected";for(var b=0;b<h.floatData.length;++b)if(typeof h.floatData[b]!="number")return"floatData: number[] expected"}if(h.int32Data!=null&&h.hasOwnProperty("int32Data")){if(!Array.isArray(h.int32Data))return"int32Data: array expected";for(var b=0;b<h.int32Data.length;++b)if(!s.isInteger(h.int32Data[b]))return"int32Data: integer[] expected"}if(h.stringData!=null&&h.hasOwnProperty("stringData")){if(!Array.isArray(h.stringData))return"stringData: array expected";for(var b=0;b<h.stringData.length;++b)if(!(h.stringData[b]&&typeof h.stringData[b].length=="number"||s.isString(h.stringData[b])))return"stringData: buffer[] expected"}if(h.int64Data!=null&&h.hasOwnProperty("int64Data")){if(!Array.isArray(h.int64Data))return"int64Data: array expected";for(var b=0;b<h.int64Data.length;++b)if(!s.isInteger(h.int64Data[b])&&!(h.int64Data[b]&&s.isInteger(h.int64Data[b].low)&&s.isInteger(h.int64Data[b].high)))return"int64Data: integer|Long[] expected"}if(h.name!=null&&h.hasOwnProperty("name")&&!s.isString(h.name))return"name: string expected";if(h.docString!=null&&h.hasOwnProperty("docString")&&!s.isString(h.docString))return"docString: string expected";if(h.rawData!=null&&h.hasOwnProperty("rawData")&&!(h.rawData&&typeof h.rawData.length=="number"||s.isString(h.rawData)))return"rawData: buffer expected";if(h.externalData!=null&&h.hasOwnProperty("externalData")){if(!Array.isArray(h.externalData))return"externalData: array expected";for(var b=0;b<h.externalData.length;++b){var g=d.onnx.StringStringEntryProto.verify(h.externalData[b]);if(g)return"externalData."+g}}if(h.dataLocation!=null&&h.hasOwnProperty("dataLocation"))switch(h.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(h.doubleData!=null&&h.hasOwnProperty("doubleData")){if(!Array.isArray(h.doubleData))return"doubleData: array expected";for(var b=0;b<h.doubleData.length;++b)if(typeof h.doubleData[b]!="number")return"doubleData: number[] expected"}if(h.uint64Data!=null&&h.hasOwnProperty("uint64Data")){if(!Array.isArray(h.uint64Data))return"uint64Data: array expected";for(var b=0;b<h.uint64Data.length;++b)if(!s.isInteger(h.uint64Data[b])&&!(h.uint64Data[b]&&s.isInteger(h.uint64Data[b].low)&&s.isInteger(h.uint64Data[b].high)))return"uint64Data: integer|Long[] expected"}return null},$t.fromObject=function(h){if(h instanceof d.onnx.TensorProto)return h;var b=new d.onnx.TensorProto;if(h.dims){if(!Array.isArray(h.dims))throw TypeError(".onnx.TensorProto.dims: array expected");b.dims=[];for(var g=0;g<h.dims.length;++g)s.Long?(b.dims[g]=s.Long.fromValue(h.dims[g])).unsigned=!1:typeof h.dims[g]=="string"?b.dims[g]=parseInt(h.dims[g],10):typeof h.dims[g]=="number"?b.dims[g]=h.dims[g]:typeof h.dims[g]=="object"&&(b.dims[g]=new s.LongBits(h.dims[g].low>>>0,h.dims[g].high>>>0).toNumber())}if(h.dataType!=null&&(b.dataType=h.dataType|0),h.segment!=null){if(typeof h.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");b.segment=d.onnx.TensorProto.Segment.fromObject(h.segment)}if(h.floatData){if(!Array.isArray(h.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");b.floatData=[];for(var g=0;g<h.floatData.length;++g)b.floatData[g]=Number(h.floatData[g])}if(h.int32Data){if(!Array.isArray(h.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");b.int32Data=[];for(var g=0;g<h.int32Data.length;++g)b.int32Data[g]=h.int32Data[g]|0}if(h.stringData){if(!Array.isArray(h.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");b.stringData=[];for(var g=0;g<h.stringData.length;++g)typeof h.stringData[g]=="string"?s.base64.decode(h.stringData[g],b.stringData[g]=s.newBuffer(s.base64.length(h.stringData[g])),0):h.stringData[g].length>=0&&(b.stringData[g]=h.stringData[g])}if(h.int64Data){if(!Array.isArray(h.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");b.int64Data=[];for(var g=0;g<h.int64Data.length;++g)s.Long?(b.int64Data[g]=s.Long.fromValue(h.int64Data[g])).unsigned=!1:typeof h.int64Data[g]=="string"?b.int64Data[g]=parseInt(h.int64Data[g],10):typeof h.int64Data[g]=="number"?b.int64Data[g]=h.int64Data[g]:typeof h.int64Data[g]=="object"&&(b.int64Data[g]=new s.LongBits(h.int64Data[g].low>>>0,h.int64Data[g].high>>>0).toNumber())}if(h.name!=null&&(b.name=String(h.name)),h.docString!=null&&(b.docString=String(h.docString)),h.rawData!=null&&(typeof h.rawData=="string"?s.base64.decode(h.rawData,b.rawData=s.newBuffer(s.base64.length(h.rawData)),0):h.rawData.length>=0&&(b.rawData=h.rawData)),h.externalData){if(!Array.isArray(h.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");b.externalData=[];for(var g=0;g<h.externalData.length;++g){if(typeof h.externalData[g]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");b.externalData[g]=d.onnx.StringStringEntryProto.fromObject(h.externalData[g])}}switch(h.dataLocation){default:if(typeof h.dataLocation=="number"){b.dataLocation=h.dataLocation;break}break;case"DEFAULT":case 0:b.dataLocation=0;break;case"EXTERNAL":case 1:b.dataLocation=1;break}if(h.doubleData){if(!Array.isArray(h.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");b.doubleData=[];for(var g=0;g<h.doubleData.length;++g)b.doubleData[g]=Number(h.doubleData[g])}if(h.uint64Data){if(!Array.isArray(h.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");b.uint64Data=[];for(var g=0;g<h.uint64Data.length;++g)s.Long?(b.uint64Data[g]=s.Long.fromValue(h.uint64Data[g])).unsigned=!0:typeof h.uint64Data[g]=="string"?b.uint64Data[g]=parseInt(h.uint64Data[g],10):typeof h.uint64Data[g]=="number"?b.uint64Data[g]=h.uint64Data[g]:typeof h.uint64Data[g]=="object"&&(b.uint64Data[g]=new s.LongBits(h.uint64Data[g].low>>>0,h.uint64Data[g].high>>>0).toNumber(!0))}return b},$t.toObject=function(h,b){b||(b={});var g={};if((b.arrays||b.defaults)&&(g.dims=[],g.floatData=[],g.int32Data=[],g.stringData=[],g.int64Data=[],g.doubleData=[],g.uint64Data=[],g.externalData=[]),b.defaults&&(g.dataType=0,g.segment=null,g.name="",b.bytes===String?g.rawData="":(g.rawData=[],b.bytes!==Array&&(g.rawData=s.newBuffer(g.rawData))),g.docString="",g.dataLocation=b.enums===String?"DEFAULT":0),h.dims&&h.dims.length){g.dims=[];for(var jt=0;jt<h.dims.length;++jt)typeof h.dims[jt]=="number"?g.dims[jt]=b.longs===String?String(h.dims[jt]):h.dims[jt]:g.dims[jt]=b.longs===String?s.Long.prototype.toString.call(h.dims[jt]):b.longs===Number?new s.LongBits(h.dims[jt].low>>>0,h.dims[jt].high>>>0).toNumber():h.dims[jt]}if(h.dataType!=null&&h.hasOwnProperty("dataType")&&(g.dataType=h.dataType),h.segment!=null&&h.hasOwnProperty("segment")&&(g.segment=d.onnx.TensorProto.Segment.toObject(h.segment,b)),h.floatData&&h.floatData.length){g.floatData=[];for(var jt=0;jt<h.floatData.length;++jt)g.floatData[jt]=b.json&&!isFinite(h.floatData[jt])?String(h.floatData[jt]):h.floatData[jt]}if(h.int32Data&&h.int32Data.length){g.int32Data=[];for(var jt=0;jt<h.int32Data.length;++jt)g.int32Data[jt]=h.int32Data[jt]}if(h.stringData&&h.stringData.length){g.stringData=[];for(var jt=0;jt<h.stringData.length;++jt)g.stringData[jt]=b.bytes===String?s.base64.encode(h.stringData[jt],0,h.stringData[jt].length):b.bytes===Array?Array.prototype.slice.call(h.stringData[jt]):h.stringData[jt]}if(h.int64Data&&h.int64Data.length){g.int64Data=[];for(var jt=0;jt<h.int64Data.length;++jt)typeof h.int64Data[jt]=="number"?g.int64Data[jt]=b.longs===String?String(h.int64Data[jt]):h.int64Data[jt]:g.int64Data[jt]=b.longs===String?s.Long.prototype.toString.call(h.int64Data[jt]):b.longs===Number?new s.LongBits(h.int64Data[jt].low>>>0,h.int64Data[jt].high>>>0).toNumber():h.int64Data[jt]}if(h.name!=null&&h.hasOwnProperty("name")&&(g.name=h.name),h.rawData!=null&&h.hasOwnProperty("rawData")&&(g.rawData=b.bytes===String?s.base64.encode(h.rawData,0,h.rawData.length):b.bytes===Array?Array.prototype.slice.call(h.rawData):h.rawData),h.doubleData&&h.doubleData.length){g.doubleData=[];for(var jt=0;jt<h.doubleData.length;++jt)g.doubleData[jt]=b.json&&!isFinite(h.doubleData[jt])?String(h.doubleData[jt]):h.doubleData[jt]}if(h.uint64Data&&h.uint64Data.length){g.uint64Data=[];for(var jt=0;jt<h.uint64Data.length;++jt)typeof h.uint64Data[jt]=="number"?g.uint64Data[jt]=b.longs===String?String(h.uint64Data[jt]):h.uint64Data[jt]:g.uint64Data[jt]=b.longs===String?s.Long.prototype.toString.call(h.uint64Data[jt]):b.longs===Number?new s.LongBits(h.uint64Data[jt].low>>>0,h.uint64Data[jt].high>>>0).toNumber(!0):h.uint64Data[jt]}if(h.docString!=null&&h.hasOwnProperty("docString")&&(g.docString=h.docString),h.externalData&&h.externalData.length){g.externalData=[];for(var jt=0;jt<h.externalData.length;++jt)g.externalData[jt]=d.onnx.StringStringEntryProto.toObject(h.externalData[jt],b)}return h.dataLocation!=null&&h.hasOwnProperty("dataLocation")&&(g.dataLocation=b.enums===String?d.onnx.TensorProto.DataLocation[h.dataLocation]===void 0?h.dataLocation:d.onnx.TensorProto.DataLocation[h.dataLocation]:h.dataLocation),g},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.TensorProto"},$t.DataType=function(){var h={},b=Object.create(h);return b[h[0]="UNDEFINED"]=0,b[h[1]="FLOAT"]=1,b[h[2]="UINT8"]=2,b[h[3]="INT8"]=3,b[h[4]="UINT16"]=4,b[h[5]="INT16"]=5,b[h[6]="INT32"]=6,b[h[7]="INT64"]=7,b[h[8]="STRING"]=8,b[h[9]="BOOL"]=9,b[h[10]="FLOAT16"]=10,b[h[11]="DOUBLE"]=11,b[h[12]="UINT32"]=12,b[h[13]="UINT64"]=13,b[h[14]="COMPLEX64"]=14,b[h[15]="COMPLEX128"]=15,b[h[16]="BFLOAT16"]=16,b[h[17]="FLOAT8E4M3FN"]=17,b[h[18]="FLOAT8E4M3FNUZ"]=18,b[h[19]="FLOAT8E5M2"]=19,b[h[20]="FLOAT8E5M2FNUZ"]=20,b}(),$t.Segment=function(){function h(b){if(b)for(var g=Object.keys(b),jt=0;jt<g.length;++jt)b[g[jt]]!=null&&(this[g[jt]]=b[g[jt]])}return h.prototype.begin=s.Long?s.Long.fromBits(0,0,!1):0,h.prototype.end=s.Long?s.Long.fromBits(0,0,!1):0,h.create=function(b){return new h(b)},h.encode=function(b,g){return g||(g=c.create()),b.begin!=null&&Object.hasOwnProperty.call(b,"begin")&&g.uint32(8).int64(b.begin),b.end!=null&&Object.hasOwnProperty.call(b,"end")&&g.uint32(16).int64(b.end),g},h.encodeDelimited=function(b,g){return this.encode(b,g).ldelim()},h.decode=function(b,g){b instanceof o||(b=o.create(b));for(var jt=g===void 0?b.len:b.pos+g,Ht=new d.onnx.TensorProto.Segment;b.pos<jt;){var Kt=b.uint32();switch(Kt>>>3){case 1:{Ht.begin=b.int64();break}case 2:{Ht.end=b.int64();break}default:b.skipType(Kt&7);break}}return Ht},h.decodeDelimited=function(b){return b instanceof o||(b=new o(b)),this.decode(b,b.uint32())},h.verify=function(b){return typeof b!="object"||b===null?"object expected":b.begin!=null&&b.hasOwnProperty("begin")&&!s.isInteger(b.begin)&&!(b.begin&&s.isInteger(b.begin.low)&&s.isInteger(b.begin.high))?"begin: integer|Long expected":b.end!=null&&b.hasOwnProperty("end")&&!s.isInteger(b.end)&&!(b.end&&s.isInteger(b.end.low)&&s.isInteger(b.end.high))?"end: integer|Long expected":null},h.fromObject=function(b){if(b instanceof d.onnx.TensorProto.Segment)return b;var g=new d.onnx.TensorProto.Segment;return b.begin!=null&&(s.Long?(g.begin=s.Long.fromValue(b.begin)).unsigned=!1:typeof b.begin=="string"?g.begin=parseInt(b.begin,10):typeof b.begin=="number"?g.begin=b.begin:typeof b.begin=="object"&&(g.begin=new s.LongBits(b.begin.low>>>0,b.begin.high>>>0).toNumber())),b.end!=null&&(s.Long?(g.end=s.Long.fromValue(b.end)).unsigned=!1:typeof b.end=="string"?g.end=parseInt(b.end,10):typeof b.end=="number"?g.end=b.end:typeof b.end=="object"&&(g.end=new s.LongBits(b.end.low>>>0,b.end.high>>>0).toNumber())),g},h.toObject=function(b,g){g||(g={});var jt={};if(g.defaults){if(s.Long){var Ht=new s.Long(0,0,!1);jt.begin=g.longs===String?Ht.toString():g.longs===Number?Ht.toNumber():Ht}else jt.begin=g.longs===String?"0":0;if(s.Long){var Ht=new s.Long(0,0,!1);jt.end=g.longs===String?Ht.toString():g.longs===Number?Ht.toNumber():Ht}else jt.end=g.longs===String?"0":0}return b.begin!=null&&b.hasOwnProperty("begin")&&(typeof b.begin=="number"?jt.begin=g.longs===String?String(b.begin):b.begin:jt.begin=g.longs===String?s.Long.prototype.toString.call(b.begin):g.longs===Number?new s.LongBits(b.begin.low>>>0,b.begin.high>>>0).toNumber():b.begin),b.end!=null&&b.hasOwnProperty("end")&&(typeof b.end=="number"?jt.end=g.longs===String?String(b.end):b.end:jt.end=g.longs===String?s.Long.prototype.toString.call(b.end):g.longs===Number?new s.LongBits(b.end.low>>>0,b.end.high>>>0).toNumber():b.end),jt},h.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},h.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.TensorProto.Segment"},h}(),$t.DataLocation=function(){var h={},b=Object.create(h);return b[h[0]="DEFAULT"]=0,b[h[1]="EXTERNAL"]=1,b}(),$t}(),et.SparseTensorProto=function(){function $t(h){if(this.dims=[],h)for(var b=Object.keys(h),g=0;g<b.length;++g)h[b[g]]!=null&&(this[b[g]]=h[b[g]])}return $t.prototype.values=null,$t.prototype.indices=null,$t.prototype.dims=s.emptyArray,$t.create=function(h){return new $t(h)},$t.encode=function(h,b){if(b||(b=c.create()),h.values!=null&&Object.hasOwnProperty.call(h,"values")&&d.onnx.TensorProto.encode(h.values,b.uint32(10).fork()).ldelim(),h.indices!=null&&Object.hasOwnProperty.call(h,"indices")&&d.onnx.TensorProto.encode(h.indices,b.uint32(18).fork()).ldelim(),h.dims!=null&&h.dims.length){b.uint32(26).fork();for(var g=0;g<h.dims.length;++g)b.int64(h.dims[g]);b.ldelim()}return b},$t.encodeDelimited=function(h,b){return this.encode(h,b).ldelim()},$t.decode=function(h,b){h instanceof o||(h=o.create(h));for(var g=b===void 0?h.len:h.pos+b,jt=new d.onnx.SparseTensorProto;h.pos<g;){var Ht=h.uint32();switch(Ht>>>3){case 1:{jt.values=d.onnx.TensorProto.decode(h,h.uint32());break}case 2:{jt.indices=d.onnx.TensorProto.decode(h,h.uint32());break}case 3:{if(jt.dims&&jt.dims.length||(jt.dims=[]),(Ht&7)===2)for(var Kt=h.uint32()+h.pos;h.pos<Kt;)jt.dims.push(h.int64());else jt.dims.push(h.int64());break}default:h.skipType(Ht&7);break}}return jt},$t.decodeDelimited=function(h){return h instanceof o||(h=new o(h)),this.decode(h,h.uint32())},$t.verify=function(h){if(typeof h!="object"||h===null)return"object expected";if(h.values!=null&&h.hasOwnProperty("values")){var b=d.onnx.TensorProto.verify(h.values);if(b)return"values."+b}if(h.indices!=null&&h.hasOwnProperty("indices")){var b=d.onnx.TensorProto.verify(h.indices);if(b)return"indices."+b}if(h.dims!=null&&h.hasOwnProperty("dims")){if(!Array.isArray(h.dims))return"dims: array expected";for(var g=0;g<h.dims.length;++g)if(!s.isInteger(h.dims[g])&&!(h.dims[g]&&s.isInteger(h.dims[g].low)&&s.isInteger(h.dims[g].high)))return"dims: integer|Long[] expected"}return null},$t.fromObject=function(h){if(h instanceof d.onnx.SparseTensorProto)return h;var b=new d.onnx.SparseTensorProto;if(h.values!=null){if(typeof h.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");b.values=d.onnx.TensorProto.fromObject(h.values)}if(h.indices!=null){if(typeof h.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");b.indices=d.onnx.TensorProto.fromObject(h.indices)}if(h.dims){if(!Array.isArray(h.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");b.dims=[];for(var g=0;g<h.dims.length;++g)s.Long?(b.dims[g]=s.Long.fromValue(h.dims[g])).unsigned=!1:typeof h.dims[g]=="string"?b.dims[g]=parseInt(h.dims[g],10):typeof h.dims[g]=="number"?b.dims[g]=h.dims[g]:typeof h.dims[g]=="object"&&(b.dims[g]=new s.LongBits(h.dims[g].low>>>0,h.dims[g].high>>>0).toNumber())}return b},$t.toObject=function(h,b){b||(b={});var g={};if((b.arrays||b.defaults)&&(g.dims=[]),b.defaults&&(g.values=null,g.indices=null),h.values!=null&&h.hasOwnProperty("values")&&(g.values=d.onnx.TensorProto.toObject(h.values,b)),h.indices!=null&&h.hasOwnProperty("indices")&&(g.indices=d.onnx.TensorProto.toObject(h.indices,b)),h.dims&&h.dims.length){g.dims=[];for(var jt=0;jt<h.dims.length;++jt)typeof h.dims[jt]=="number"?g.dims[jt]=b.longs===String?String(h.dims[jt]):h.dims[jt]:g.dims[jt]=b.longs===String?s.Long.prototype.toString.call(h.dims[jt]):b.longs===Number?new s.LongBits(h.dims[jt].low>>>0,h.dims[jt].high>>>0).toNumber():h.dims[jt]}return g},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.SparseTensorProto"},$t}(),et.TensorShapeProto=function(){function $t(h){if(this.dim=[],h)for(var b=Object.keys(h),g=0;g<b.length;++g)h[b[g]]!=null&&(this[b[g]]=h[b[g]])}return $t.prototype.dim=s.emptyArray,$t.create=function(h){return new $t(h)},$t.encode=function(h,b){if(b||(b=c.create()),h.dim!=null&&h.dim.length)for(var g=0;g<h.dim.length;++g)d.onnx.TensorShapeProto.Dimension.encode(h.dim[g],b.uint32(10).fork()).ldelim();return b},$t.encodeDelimited=function(h,b){return this.encode(h,b).ldelim()},$t.decode=function(h,b){h instanceof o||(h=o.create(h));for(var g=b===void 0?h.len:h.pos+b,jt=new d.onnx.TensorShapeProto;h.pos<g;){var Ht=h.uint32();switch(Ht>>>3){case 1:{jt.dim&&jt.dim.length||(jt.dim=[]),jt.dim.push(d.onnx.TensorShapeProto.Dimension.decode(h,h.uint32()));break}default:h.skipType(Ht&7);break}}return jt},$t.decodeDelimited=function(h){return h instanceof o||(h=new o(h)),this.decode(h,h.uint32())},$t.verify=function(h){if(typeof h!="object"||h===null)return"object expected";if(h.dim!=null&&h.hasOwnProperty("dim")){if(!Array.isArray(h.dim))return"dim: array expected";for(var b=0;b<h.dim.length;++b){var g=d.onnx.TensorShapeProto.Dimension.verify(h.dim[b]);if(g)return"dim."+g}}return null},$t.fromObject=function(h){if(h instanceof d.onnx.TensorShapeProto)return h;var b=new d.onnx.TensorShapeProto;if(h.dim){if(!Array.isArray(h.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");b.dim=[];for(var g=0;g<h.dim.length;++g){if(typeof h.dim[g]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");b.dim[g]=d.onnx.TensorShapeProto.Dimension.fromObject(h.dim[g])}}return b},$t.toObject=function(h,b){b||(b={});var g={};if((b.arrays||b.defaults)&&(g.dim=[]),h.dim&&h.dim.length){g.dim=[];for(var jt=0;jt<h.dim.length;++jt)g.dim[jt]=d.onnx.TensorShapeProto.Dimension.toObject(h.dim[jt],b)}return g},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.TensorShapeProto"},$t.Dimension=function(){function h(g){if(g)for(var jt=Object.keys(g),Ht=0;Ht<jt.length;++Ht)g[jt[Ht]]!=null&&(this[jt[Ht]]=g[jt[Ht]])}h.prototype.dimValue=null,h.prototype.dimParam=null,h.prototype.denotation="";var b;return Object.defineProperty(h.prototype,"value",{get:s.oneOfGetter(b=["dimValue","dimParam"]),set:s.oneOfSetter(b)}),h.create=function(g){return new h(g)},h.encode=function(g,jt){return jt||(jt=c.create()),g.dimValue!=null&&Object.hasOwnProperty.call(g,"dimValue")&&jt.uint32(8).int64(g.dimValue),g.dimParam!=null&&Object.hasOwnProperty.call(g,"dimParam")&&jt.uint32(18).string(g.dimParam),g.denotation!=null&&Object.hasOwnProperty.call(g,"denotation")&&jt.uint32(26).string(g.denotation),jt},h.encodeDelimited=function(g,jt){return this.encode(g,jt).ldelim()},h.decode=function(g,jt){g instanceof o||(g=o.create(g));for(var Ht=jt===void 0?g.len:g.pos+jt,Kt=new d.onnx.TensorShapeProto.Dimension;g.pos<Ht;){var or=g.uint32();switch(or>>>3){case 1:{Kt.dimValue=g.int64();break}case 2:{Kt.dimParam=g.string();break}case 3:{Kt.denotation=g.string();break}default:g.skipType(or&7);break}}return Kt},h.decodeDelimited=function(g){return g instanceof o||(g=new o(g)),this.decode(g,g.uint32())},h.verify=function(g){if(typeof g!="object"||g===null)return"object expected";var jt={};if(g.dimValue!=null&&g.hasOwnProperty("dimValue")&&(jt.value=1,!s.isInteger(g.dimValue)&&!(g.dimValue&&s.isInteger(g.dimValue.low)&&s.isInteger(g.dimValue.high))))return"dimValue: integer|Long expected";if(g.dimParam!=null&&g.hasOwnProperty("dimParam")){if(jt.value===1)return"value: multiple values";if(jt.value=1,!s.isString(g.dimParam))return"dimParam: string expected"}return g.denotation!=null&&g.hasOwnProperty("denotation")&&!s.isString(g.denotation)?"denotation: string expected":null},h.fromObject=function(g){if(g instanceof d.onnx.TensorShapeProto.Dimension)return g;var jt=new d.onnx.TensorShapeProto.Dimension;return g.dimValue!=null&&(s.Long?(jt.dimValue=s.Long.fromValue(g.dimValue)).unsigned=!1:typeof g.dimValue=="string"?jt.dimValue=parseInt(g.dimValue,10):typeof g.dimValue=="number"?jt.dimValue=g.dimValue:typeof g.dimValue=="object"&&(jt.dimValue=new s.LongBits(g.dimValue.low>>>0,g.dimValue.high>>>0).toNumber())),g.dimParam!=null&&(jt.dimParam=String(g.dimParam)),g.denotation!=null&&(jt.denotation=String(g.denotation)),jt},h.toObject=function(g,jt){jt||(jt={});var Ht={};return jt.defaults&&(Ht.denotation=""),g.dimValue!=null&&g.hasOwnProperty("dimValue")&&(typeof g.dimValue=="number"?Ht.dimValue=jt.longs===String?String(g.dimValue):g.dimValue:Ht.dimValue=jt.longs===String?s.Long.prototype.toString.call(g.dimValue):jt.longs===Number?new s.LongBits(g.dimValue.low>>>0,g.dimValue.high>>>0).toNumber():g.dimValue,jt.oneofs&&(Ht.value="dimValue")),g.dimParam!=null&&g.hasOwnProperty("dimParam")&&(Ht.dimParam=g.dimParam,jt.oneofs&&(Ht.value="dimParam")),g.denotation!=null&&g.hasOwnProperty("denotation")&&(Ht.denotation=g.denotation),Ht},h.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},h.getTypeUrl=function(g){return g===void 0&&(g="type.googleapis.com"),g+"/onnx.TensorShapeProto.Dimension"},h}(),$t}(),et.TypeProto=function(){function $t(b){if(b)for(var g=Object.keys(b),jt=0;jt<g.length;++jt)b[g[jt]]!=null&&(this[g[jt]]=b[g[jt]])}$t.prototype.tensorType=null,$t.prototype.sequenceType=null,$t.prototype.mapType=null,$t.prototype.optionalType=null,$t.prototype.sparseTensorType=null,$t.prototype.denotation="";var h;return Object.defineProperty($t.prototype,"value",{get:s.oneOfGetter(h=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:s.oneOfSetter(h)}),$t.create=function(b){return new $t(b)},$t.encode=function(b,g){return g||(g=c.create()),b.tensorType!=null&&Object.hasOwnProperty.call(b,"tensorType")&&d.onnx.TypeProto.Tensor.encode(b.tensorType,g.uint32(10).fork()).ldelim(),b.sequenceType!=null&&Object.hasOwnProperty.call(b,"sequenceType")&&d.onnx.TypeProto.Sequence.encode(b.sequenceType,g.uint32(34).fork()).ldelim(),b.mapType!=null&&Object.hasOwnProperty.call(b,"mapType")&&d.onnx.TypeProto.Map.encode(b.mapType,g.uint32(42).fork()).ldelim(),b.denotation!=null&&Object.hasOwnProperty.call(b,"denotation")&&g.uint32(50).string(b.denotation),b.sparseTensorType!=null&&Object.hasOwnProperty.call(b,"sparseTensorType")&&d.onnx.TypeProto.SparseTensor.encode(b.sparseTensorType,g.uint32(66).fork()).ldelim(),b.optionalType!=null&&Object.hasOwnProperty.call(b,"optionalType")&&d.onnx.TypeProto.Optional.encode(b.optionalType,g.uint32(74).fork()).ldelim(),g},$t.encodeDelimited=function(b,g){return this.encode(b,g).ldelim()},$t.decode=function(b,g){b instanceof o||(b=o.create(b));for(var jt=g===void 0?b.len:b.pos+g,Ht=new d.onnx.TypeProto;b.pos<jt;){var Kt=b.uint32();switch(Kt>>>3){case 1:{Ht.tensorType=d.onnx.TypeProto.Tensor.decode(b,b.uint32());break}case 4:{Ht.sequenceType=d.onnx.TypeProto.Sequence.decode(b,b.uint32());break}case 5:{Ht.mapType=d.onnx.TypeProto.Map.decode(b,b.uint32());break}case 9:{Ht.optionalType=d.onnx.TypeProto.Optional.decode(b,b.uint32());break}case 8:{Ht.sparseTensorType=d.onnx.TypeProto.SparseTensor.decode(b,b.uint32());break}case 6:{Ht.denotation=b.string();break}default:b.skipType(Kt&7);break}}return Ht},$t.decodeDelimited=function(b){return b instanceof o||(b=new o(b)),this.decode(b,b.uint32())},$t.verify=function(b){if(typeof b!="object"||b===null)return"object expected";var g={};if(b.tensorType!=null&&b.hasOwnProperty("tensorType")){g.value=1;{var jt=d.onnx.TypeProto.Tensor.verify(b.tensorType);if(jt)return"tensorType."+jt}}if(b.sequenceType!=null&&b.hasOwnProperty("sequenceType")){if(g.value===1)return"value: multiple values";g.value=1;{var jt=d.onnx.TypeProto.Sequence.verify(b.sequenceType);if(jt)return"sequenceType."+jt}}if(b.mapType!=null&&b.hasOwnProperty("mapType")){if(g.value===1)return"value: multiple values";g.value=1;{var jt=d.onnx.TypeProto.Map.verify(b.mapType);if(jt)return"mapType."+jt}}if(b.optionalType!=null&&b.hasOwnProperty("optionalType")){if(g.value===1)return"value: multiple values";g.value=1;{var jt=d.onnx.TypeProto.Optional.verify(b.optionalType);if(jt)return"optionalType."+jt}}if(b.sparseTensorType!=null&&b.hasOwnProperty("sparseTensorType")){if(g.value===1)return"value: multiple values";g.value=1;{var jt=d.onnx.TypeProto.SparseTensor.verify(b.sparseTensorType);if(jt)return"sparseTensorType."+jt}}return b.denotation!=null&&b.hasOwnProperty("denotation")&&!s.isString(b.denotation)?"denotation: string expected":null},$t.fromObject=function(b){if(b instanceof d.onnx.TypeProto)return b;var g=new d.onnx.TypeProto;if(b.tensorType!=null){if(typeof b.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");g.tensorType=d.onnx.TypeProto.Tensor.fromObject(b.tensorType)}if(b.sequenceType!=null){if(typeof b.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");g.sequenceType=d.onnx.TypeProto.Sequence.fromObject(b.sequenceType)}if(b.mapType!=null){if(typeof b.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");g.mapType=d.onnx.TypeProto.Map.fromObject(b.mapType)}if(b.optionalType!=null){if(typeof b.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");g.optionalType=d.onnx.TypeProto.Optional.fromObject(b.optionalType)}if(b.sparseTensorType!=null){if(typeof b.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");g.sparseTensorType=d.onnx.TypeProto.SparseTensor.fromObject(b.sparseTensorType)}return b.denotation!=null&&(g.denotation=String(b.denotation)),g},$t.toObject=function(b,g){g||(g={});var jt={};return g.defaults&&(jt.denotation=""),b.tensorType!=null&&b.hasOwnProperty("tensorType")&&(jt.tensorType=d.onnx.TypeProto.Tensor.toObject(b.tensorType,g),g.oneofs&&(jt.value="tensorType")),b.sequenceType!=null&&b.hasOwnProperty("sequenceType")&&(jt.sequenceType=d.onnx.TypeProto.Sequence.toObject(b.sequenceType,g),g.oneofs&&(jt.value="sequenceType")),b.mapType!=null&&b.hasOwnProperty("mapType")&&(jt.mapType=d.onnx.TypeProto.Map.toObject(b.mapType,g),g.oneofs&&(jt.value="mapType")),b.denotation!=null&&b.hasOwnProperty("denotation")&&(jt.denotation=b.denotation),b.sparseTensorType!=null&&b.hasOwnProperty("sparseTensorType")&&(jt.sparseTensorType=d.onnx.TypeProto.SparseTensor.toObject(b.sparseTensorType,g),g.oneofs&&(jt.value="sparseTensorType")),b.optionalType!=null&&b.hasOwnProperty("optionalType")&&(jt.optionalType=d.onnx.TypeProto.Optional.toObject(b.optionalType,g),g.oneofs&&(jt.value="optionalType")),jt},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(b){return b===void 0&&(b="type.googleapis.com"),b+"/onnx.TypeProto"},$t.Tensor=function(){function b(g){if(g)for(var jt=Object.keys(g),Ht=0;Ht<jt.length;++Ht)g[jt[Ht]]!=null&&(this[jt[Ht]]=g[jt[Ht]])}return b.prototype.elemType=0,b.prototype.shape=null,b.create=function(g){return new b(g)},b.encode=function(g,jt){return jt||(jt=c.create()),g.elemType!=null&&Object.hasOwnProperty.call(g,"elemType")&&jt.uint32(8).int32(g.elemType),g.shape!=null&&Object.hasOwnProperty.call(g,"shape")&&d.onnx.TensorShapeProto.encode(g.shape,jt.uint32(18).fork()).ldelim(),jt},b.encodeDelimited=function(g,jt){return this.encode(g,jt).ldelim()},b.decode=function(g,jt){g instanceof o||(g=o.create(g));for(var Ht=jt===void 0?g.len:g.pos+jt,Kt=new d.onnx.TypeProto.Tensor;g.pos<Ht;){var or=g.uint32();switch(or>>>3){case 1:{Kt.elemType=g.int32();break}case 2:{Kt.shape=d.onnx.TensorShapeProto.decode(g,g.uint32());break}default:g.skipType(or&7);break}}return Kt},b.decodeDelimited=function(g){return g instanceof o||(g=new o(g)),this.decode(g,g.uint32())},b.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.elemType!=null&&g.hasOwnProperty("elemType")&&!s.isInteger(g.elemType))return"elemType: integer expected";if(g.shape!=null&&g.hasOwnProperty("shape")){var jt=d.onnx.TensorShapeProto.verify(g.shape);if(jt)return"shape."+jt}return null},b.fromObject=function(g){if(g instanceof d.onnx.TypeProto.Tensor)return g;var jt=new d.onnx.TypeProto.Tensor;if(g.elemType!=null&&(jt.elemType=g.elemType|0),g.shape!=null){if(typeof g.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");jt.shape=d.onnx.TensorShapeProto.fromObject(g.shape)}return jt},b.toObject=function(g,jt){jt||(jt={});var Ht={};return jt.defaults&&(Ht.elemType=0,Ht.shape=null),g.elemType!=null&&g.hasOwnProperty("elemType")&&(Ht.elemType=g.elemType),g.shape!=null&&g.hasOwnProperty("shape")&&(Ht.shape=d.onnx.TensorShapeProto.toObject(g.shape,jt)),Ht},b.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},b.getTypeUrl=function(g){return g===void 0&&(g="type.googleapis.com"),g+"/onnx.TypeProto.Tensor"},b}(),$t.Sequence=function(){function b(g){if(g)for(var jt=Object.keys(g),Ht=0;Ht<jt.length;++Ht)g[jt[Ht]]!=null&&(this[jt[Ht]]=g[jt[Ht]])}return b.prototype.elemType=null,b.create=function(g){return new b(g)},b.encode=function(g,jt){return jt||(jt=c.create()),g.elemType!=null&&Object.hasOwnProperty.call(g,"elemType")&&d.onnx.TypeProto.encode(g.elemType,jt.uint32(10).fork()).ldelim(),jt},b.encodeDelimited=function(g,jt){return this.encode(g,jt).ldelim()},b.decode=function(g,jt){g instanceof o||(g=o.create(g));for(var Ht=jt===void 0?g.len:g.pos+jt,Kt=new d.onnx.TypeProto.Sequence;g.pos<Ht;){var or=g.uint32();switch(or>>>3){case 1:{Kt.elemType=d.onnx.TypeProto.decode(g,g.uint32());break}default:g.skipType(or&7);break}}return Kt},b.decodeDelimited=function(g){return g instanceof o||(g=new o(g)),this.decode(g,g.uint32())},b.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.elemType!=null&&g.hasOwnProperty("elemType")){var jt=d.onnx.TypeProto.verify(g.elemType);if(jt)return"elemType."+jt}return null},b.fromObject=function(g){if(g instanceof d.onnx.TypeProto.Sequence)return g;var jt=new d.onnx.TypeProto.Sequence;if(g.elemType!=null){if(typeof g.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");jt.elemType=d.onnx.TypeProto.fromObject(g.elemType)}return jt},b.toObject=function(g,jt){jt||(jt={});var Ht={};return jt.defaults&&(Ht.elemType=null),g.elemType!=null&&g.hasOwnProperty("elemType")&&(Ht.elemType=d.onnx.TypeProto.toObject(g.elemType,jt)),Ht},b.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},b.getTypeUrl=function(g){return g===void 0&&(g="type.googleapis.com"),g+"/onnx.TypeProto.Sequence"},b}(),$t.Map=function(){function b(g){if(g)for(var jt=Object.keys(g),Ht=0;Ht<jt.length;++Ht)g[jt[Ht]]!=null&&(this[jt[Ht]]=g[jt[Ht]])}return b.prototype.keyType=0,b.prototype.valueType=null,b.create=function(g){return new b(g)},b.encode=function(g,jt){return jt||(jt=c.create()),g.keyType!=null&&Object.hasOwnProperty.call(g,"keyType")&&jt.uint32(8).int32(g.keyType),g.valueType!=null&&Object.hasOwnProperty.call(g,"valueType")&&d.onnx.TypeProto.encode(g.valueType,jt.uint32(18).fork()).ldelim(),jt},b.encodeDelimited=function(g,jt){return this.encode(g,jt).ldelim()},b.decode=function(g,jt){g instanceof o||(g=o.create(g));for(var Ht=jt===void 0?g.len:g.pos+jt,Kt=new d.onnx.TypeProto.Map;g.pos<Ht;){var or=g.uint32();switch(or>>>3){case 1:{Kt.keyType=g.int32();break}case 2:{Kt.valueType=d.onnx.TypeProto.decode(g,g.uint32());break}default:g.skipType(or&7);break}}return Kt},b.decodeDelimited=function(g){return g instanceof o||(g=new o(g)),this.decode(g,g.uint32())},b.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.keyType!=null&&g.hasOwnProperty("keyType")&&!s.isInteger(g.keyType))return"keyType: integer expected";if(g.valueType!=null&&g.hasOwnProperty("valueType")){var jt=d.onnx.TypeProto.verify(g.valueType);if(jt)return"valueType."+jt}return null},b.fromObject=function(g){if(g instanceof d.onnx.TypeProto.Map)return g;var jt=new d.onnx.TypeProto.Map;if(g.keyType!=null&&(jt.keyType=g.keyType|0),g.valueType!=null){if(typeof g.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");jt.valueType=d.onnx.TypeProto.fromObject(g.valueType)}return jt},b.toObject=function(g,jt){jt||(jt={});var Ht={};return jt.defaults&&(Ht.keyType=0,Ht.valueType=null),g.keyType!=null&&g.hasOwnProperty("keyType")&&(Ht.keyType=g.keyType),g.valueType!=null&&g.hasOwnProperty("valueType")&&(Ht.valueType=d.onnx.TypeProto.toObject(g.valueType,jt)),Ht},b.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},b.getTypeUrl=function(g){return g===void 0&&(g="type.googleapis.com"),g+"/onnx.TypeProto.Map"},b}(),$t.Optional=function(){function b(g){if(g)for(var jt=Object.keys(g),Ht=0;Ht<jt.length;++Ht)g[jt[Ht]]!=null&&(this[jt[Ht]]=g[jt[Ht]])}return b.prototype.elemType=null,b.create=function(g){return new b(g)},b.encode=function(g,jt){return jt||(jt=c.create()),g.elemType!=null&&Object.hasOwnProperty.call(g,"elemType")&&d.onnx.TypeProto.encode(g.elemType,jt.uint32(10).fork()).ldelim(),jt},b.encodeDelimited=function(g,jt){return this.encode(g,jt).ldelim()},b.decode=function(g,jt){g instanceof o||(g=o.create(g));for(var Ht=jt===void 0?g.len:g.pos+jt,Kt=new d.onnx.TypeProto.Optional;g.pos<Ht;){var or=g.uint32();switch(or>>>3){case 1:{Kt.elemType=d.onnx.TypeProto.decode(g,g.uint32());break}default:g.skipType(or&7);break}}return Kt},b.decodeDelimited=function(g){return g instanceof o||(g=new o(g)),this.decode(g,g.uint32())},b.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.elemType!=null&&g.hasOwnProperty("elemType")){var jt=d.onnx.TypeProto.verify(g.elemType);if(jt)return"elemType."+jt}return null},b.fromObject=function(g){if(g instanceof d.onnx.TypeProto.Optional)return g;var jt=new d.onnx.TypeProto.Optional;if(g.elemType!=null){if(typeof g.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");jt.elemType=d.onnx.TypeProto.fromObject(g.elemType)}return jt},b.toObject=function(g,jt){jt||(jt={});var Ht={};return jt.defaults&&(Ht.elemType=null),g.elemType!=null&&g.hasOwnProperty("elemType")&&(Ht.elemType=d.onnx.TypeProto.toObject(g.elemType,jt)),Ht},b.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},b.getTypeUrl=function(g){return g===void 0&&(g="type.googleapis.com"),g+"/onnx.TypeProto.Optional"},b}(),$t.SparseTensor=function(){function b(g){if(g)for(var jt=Object.keys(g),Ht=0;Ht<jt.length;++Ht)g[jt[Ht]]!=null&&(this[jt[Ht]]=g[jt[Ht]])}return b.prototype.elemType=0,b.prototype.shape=null,b.create=function(g){return new b(g)},b.encode=function(g,jt){return jt||(jt=c.create()),g.elemType!=null&&Object.hasOwnProperty.call(g,"elemType")&&jt.uint32(8).int32(g.elemType),g.shape!=null&&Object.hasOwnProperty.call(g,"shape")&&d.onnx.TensorShapeProto.encode(g.shape,jt.uint32(18).fork()).ldelim(),jt},b.encodeDelimited=function(g,jt){return this.encode(g,jt).ldelim()},b.decode=function(g,jt){g instanceof o||(g=o.create(g));for(var Ht=jt===void 0?g.len:g.pos+jt,Kt=new d.onnx.TypeProto.SparseTensor;g.pos<Ht;){var or=g.uint32();switch(or>>>3){case 1:{Kt.elemType=g.int32();break}case 2:{Kt.shape=d.onnx.TensorShapeProto.decode(g,g.uint32());break}default:g.skipType(or&7);break}}return Kt},b.decodeDelimited=function(g){return g instanceof o||(g=new o(g)),this.decode(g,g.uint32())},b.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.elemType!=null&&g.hasOwnProperty("elemType")&&!s.isInteger(g.elemType))return"elemType: integer expected";if(g.shape!=null&&g.hasOwnProperty("shape")){var jt=d.onnx.TensorShapeProto.verify(g.shape);if(jt)return"shape."+jt}return null},b.fromObject=function(g){if(g instanceof d.onnx.TypeProto.SparseTensor)return g;var jt=new d.onnx.TypeProto.SparseTensor;if(g.elemType!=null&&(jt.elemType=g.elemType|0),g.shape!=null){if(typeof g.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");jt.shape=d.onnx.TensorShapeProto.fromObject(g.shape)}return jt},b.toObject=function(g,jt){jt||(jt={});var Ht={};return jt.defaults&&(Ht.elemType=0,Ht.shape=null),g.elemType!=null&&g.hasOwnProperty("elemType")&&(Ht.elemType=g.elemType),g.shape!=null&&g.hasOwnProperty("shape")&&(Ht.shape=d.onnx.TensorShapeProto.toObject(g.shape,jt)),Ht},b.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},b.getTypeUrl=function(g){return g===void 0&&(g="type.googleapis.com"),g+"/onnx.TypeProto.SparseTensor"},b}(),$t}(),et.OperatorSetIdProto=function(){function $t(h){if(h)for(var b=Object.keys(h),g=0;g<b.length;++g)h[b[g]]!=null&&(this[b[g]]=h[b[g]])}return $t.prototype.domain="",$t.prototype.version=s.Long?s.Long.fromBits(0,0,!1):0,$t.create=function(h){return new $t(h)},$t.encode=function(h,b){return b||(b=c.create()),h.domain!=null&&Object.hasOwnProperty.call(h,"domain")&&b.uint32(10).string(h.domain),h.version!=null&&Object.hasOwnProperty.call(h,"version")&&b.uint32(16).int64(h.version),b},$t.encodeDelimited=function(h,b){return this.encode(h,b).ldelim()},$t.decode=function(h,b){h instanceof o||(h=o.create(h));for(var g=b===void 0?h.len:h.pos+b,jt=new d.onnx.OperatorSetIdProto;h.pos<g;){var Ht=h.uint32();switch(Ht>>>3){case 1:{jt.domain=h.string();break}case 2:{jt.version=h.int64();break}default:h.skipType(Ht&7);break}}return jt},$t.decodeDelimited=function(h){return h instanceof o||(h=new o(h)),this.decode(h,h.uint32())},$t.verify=function(h){return typeof h!="object"||h===null?"object expected":h.domain!=null&&h.hasOwnProperty("domain")&&!s.isString(h.domain)?"domain: string expected":h.version!=null&&h.hasOwnProperty("version")&&!s.isInteger(h.version)&&!(h.version&&s.isInteger(h.version.low)&&s.isInteger(h.version.high))?"version: integer|Long expected":null},$t.fromObject=function(h){if(h instanceof d.onnx.OperatorSetIdProto)return h;var b=new d.onnx.OperatorSetIdProto;return h.domain!=null&&(b.domain=String(h.domain)),h.version!=null&&(s.Long?(b.version=s.Long.fromValue(h.version)).unsigned=!1:typeof h.version=="string"?b.version=parseInt(h.version,10):typeof h.version=="number"?b.version=h.version:typeof h.version=="object"&&(b.version=new s.LongBits(h.version.low>>>0,h.version.high>>>0).toNumber())),b},$t.toObject=function(h,b){b||(b={});var g={};if(b.defaults)if(g.domain="",s.Long){var jt=new s.Long(0,0,!1);g.version=b.longs===String?jt.toString():b.longs===Number?jt.toNumber():jt}else g.version=b.longs===String?"0":0;return h.domain!=null&&h.hasOwnProperty("domain")&&(g.domain=h.domain),h.version!=null&&h.hasOwnProperty("version")&&(typeof h.version=="number"?g.version=b.longs===String?String(h.version):h.version:g.version=b.longs===String?s.Long.prototype.toString.call(h.version):b.longs===Number?new s.LongBits(h.version.low>>>0,h.version.high>>>0).toNumber():h.version),g},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.OperatorSetIdProto"},$t}(),et.OperatorStatus=function(){var $t={},h=Object.create($t);return h[$t[0]="EXPERIMENTAL"]=0,h[$t[1]="STABLE"]=1,h}(),et.FunctionProto=function(){function $t(h){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],h)for(var b=Object.keys(h),g=0;g<b.length;++g)h[b[g]]!=null&&(this[b[g]]=h[b[g]])}return $t.prototype.name="",$t.prototype.input=s.emptyArray,$t.prototype.output=s.emptyArray,$t.prototype.attribute=s.emptyArray,$t.prototype.attributeProto=s.emptyArray,$t.prototype.node=s.emptyArray,$t.prototype.docString="",$t.prototype.opsetImport=s.emptyArray,$t.prototype.domain="",$t.create=function(h){return new $t(h)},$t.encode=function(h,b){if(b||(b=c.create()),h.name!=null&&Object.hasOwnProperty.call(h,"name")&&b.uint32(10).string(h.name),h.input!=null&&h.input.length)for(var g=0;g<h.input.length;++g)b.uint32(34).string(h.input[g]);if(h.output!=null&&h.output.length)for(var g=0;g<h.output.length;++g)b.uint32(42).string(h.output[g]);if(h.attribute!=null&&h.attribute.length)for(var g=0;g<h.attribute.length;++g)b.uint32(50).string(h.attribute[g]);if(h.node!=null&&h.node.length)for(var g=0;g<h.node.length;++g)d.onnx.NodeProto.encode(h.node[g],b.uint32(58).fork()).ldelim();if(h.docString!=null&&Object.hasOwnProperty.call(h,"docString")&&b.uint32(66).string(h.docString),h.opsetImport!=null&&h.opsetImport.length)for(var g=0;g<h.opsetImport.length;++g)d.onnx.OperatorSetIdProto.encode(h.opsetImport[g],b.uint32(74).fork()).ldelim();if(h.domain!=null&&Object.hasOwnProperty.call(h,"domain")&&b.uint32(82).string(h.domain),h.attributeProto!=null&&h.attributeProto.length)for(var g=0;g<h.attributeProto.length;++g)d.onnx.AttributeProto.encode(h.attributeProto[g],b.uint32(90).fork()).ldelim();return b},$t.encodeDelimited=function(h,b){return this.encode(h,b).ldelim()},$t.decode=function(h,b){h instanceof o||(h=o.create(h));for(var g=b===void 0?h.len:h.pos+b,jt=new d.onnx.FunctionProto;h.pos<g;){var Ht=h.uint32();switch(Ht>>>3){case 1:{jt.name=h.string();break}case 4:{jt.input&&jt.input.length||(jt.input=[]),jt.input.push(h.string());break}case 5:{jt.output&&jt.output.length||(jt.output=[]),jt.output.push(h.string());break}case 6:{jt.attribute&&jt.attribute.length||(jt.attribute=[]),jt.attribute.push(h.string());break}case 11:{jt.attributeProto&&jt.attributeProto.length||(jt.attributeProto=[]),jt.attributeProto.push(d.onnx.AttributeProto.decode(h,h.uint32()));break}case 7:{jt.node&&jt.node.length||(jt.node=[]),jt.node.push(d.onnx.NodeProto.decode(h,h.uint32()));break}case 8:{jt.docString=h.string();break}case 9:{jt.opsetImport&&jt.opsetImport.length||(jt.opsetImport=[]),jt.opsetImport.push(d.onnx.OperatorSetIdProto.decode(h,h.uint32()));break}case 10:{jt.domain=h.string();break}default:h.skipType(Ht&7);break}}return jt},$t.decodeDelimited=function(h){return h instanceof o||(h=new o(h)),this.decode(h,h.uint32())},$t.verify=function(h){if(typeof h!="object"||h===null)return"object expected";if(h.name!=null&&h.hasOwnProperty("name")&&!s.isString(h.name))return"name: string expected";if(h.input!=null&&h.hasOwnProperty("input")){if(!Array.isArray(h.input))return"input: array expected";for(var b=0;b<h.input.length;++b)if(!s.isString(h.input[b]))return"input: string[] expected"}if(h.output!=null&&h.hasOwnProperty("output")){if(!Array.isArray(h.output))return"output: array expected";for(var b=0;b<h.output.length;++b)if(!s.isString(h.output[b]))return"output: string[] expected"}if(h.attribute!=null&&h.hasOwnProperty("attribute")){if(!Array.isArray(h.attribute))return"attribute: array expected";for(var b=0;b<h.attribute.length;++b)if(!s.isString(h.attribute[b]))return"attribute: string[] expected"}if(h.attributeProto!=null&&h.hasOwnProperty("attributeProto")){if(!Array.isArray(h.attributeProto))return"attributeProto: array expected";for(var b=0;b<h.attributeProto.length;++b){var g=d.onnx.AttributeProto.verify(h.attributeProto[b]);if(g)return"attributeProto."+g}}if(h.node!=null&&h.hasOwnProperty("node")){if(!Array.isArray(h.node))return"node: array expected";for(var b=0;b<h.node.length;++b){var g=d.onnx.NodeProto.verify(h.node[b]);if(g)return"node."+g}}if(h.docString!=null&&h.hasOwnProperty("docString")&&!s.isString(h.docString))return"docString: string expected";if(h.opsetImport!=null&&h.hasOwnProperty("opsetImport")){if(!Array.isArray(h.opsetImport))return"opsetImport: array expected";for(var b=0;b<h.opsetImport.length;++b){var g=d.onnx.OperatorSetIdProto.verify(h.opsetImport[b]);if(g)return"opsetImport."+g}}return h.domain!=null&&h.hasOwnProperty("domain")&&!s.isString(h.domain)?"domain: string expected":null},$t.fromObject=function(h){if(h instanceof d.onnx.FunctionProto)return h;var b=new d.onnx.FunctionProto;if(h.name!=null&&(b.name=String(h.name)),h.input){if(!Array.isArray(h.input))throw TypeError(".onnx.FunctionProto.input: array expected");b.input=[];for(var g=0;g<h.input.length;++g)b.input[g]=String(h.input[g])}if(h.output){if(!Array.isArray(h.output))throw TypeError(".onnx.FunctionProto.output: array expected");b.output=[];for(var g=0;g<h.output.length;++g)b.output[g]=String(h.output[g])}if(h.attribute){if(!Array.isArray(h.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");b.attribute=[];for(var g=0;g<h.attribute.length;++g)b.attribute[g]=String(h.attribute[g])}if(h.attributeProto){if(!Array.isArray(h.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");b.attributeProto=[];for(var g=0;g<h.attributeProto.length;++g){if(typeof h.attributeProto[g]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");b.attributeProto[g]=d.onnx.AttributeProto.fromObject(h.attributeProto[g])}}if(h.node){if(!Array.isArray(h.node))throw TypeError(".onnx.FunctionProto.node: array expected");b.node=[];for(var g=0;g<h.node.length;++g){if(typeof h.node[g]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");b.node[g]=d.onnx.NodeProto.fromObject(h.node[g])}}if(h.docString!=null&&(b.docString=String(h.docString)),h.opsetImport){if(!Array.isArray(h.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");b.opsetImport=[];for(var g=0;g<h.opsetImport.length;++g){if(typeof h.opsetImport[g]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");b.opsetImport[g]=d.onnx.OperatorSetIdProto.fromObject(h.opsetImport[g])}}return h.domain!=null&&(b.domain=String(h.domain)),b},$t.toObject=function(h,b){b||(b={});var g={};if((b.arrays||b.defaults)&&(g.input=[],g.output=[],g.attribute=[],g.node=[],g.opsetImport=[],g.attributeProto=[]),b.defaults&&(g.name="",g.docString="",g.domain=""),h.name!=null&&h.hasOwnProperty("name")&&(g.name=h.name),h.input&&h.input.length){g.input=[];for(var jt=0;jt<h.input.length;++jt)g.input[jt]=h.input[jt]}if(h.output&&h.output.length){g.output=[];for(var jt=0;jt<h.output.length;++jt)g.output[jt]=h.output[jt]}if(h.attribute&&h.attribute.length){g.attribute=[];for(var jt=0;jt<h.attribute.length;++jt)g.attribute[jt]=h.attribute[jt]}if(h.node&&h.node.length){g.node=[];for(var jt=0;jt<h.node.length;++jt)g.node[jt]=d.onnx.NodeProto.toObject(h.node[jt],b)}if(h.docString!=null&&h.hasOwnProperty("docString")&&(g.docString=h.docString),h.opsetImport&&h.opsetImport.length){g.opsetImport=[];for(var jt=0;jt<h.opsetImport.length;++jt)g.opsetImport[jt]=d.onnx.OperatorSetIdProto.toObject(h.opsetImport[jt],b)}if(h.domain!=null&&h.hasOwnProperty("domain")&&(g.domain=h.domain),h.attributeProto&&h.attributeProto.length){g.attributeProto=[];for(var jt=0;jt<h.attributeProto.length;++jt)g.attributeProto[jt]=d.onnx.AttributeProto.toObject(h.attributeProto[jt],b)}return g},$t.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},$t.getTypeUrl=function(h){return h===void 0&&(h="type.googleapis.com"),h+"/onnx.FunctionProto"},$t}(),et}(),i.exports=d});function Fr(e,i){if(!e)throw new Error(typeof i=="string"?i:i())}function sn$1(e){return new TextDecoder().decode(e)}var ye$1,hr$1,pi$1,Ze$1,jn$1,We$1,it,U$1,an$1,mr$1,br,gr$1,fe$1=L(()=>{zn$1(),Zo(),ye$1=Ar(Cr()),yr(),hr$1=class{static arraysEqual(e,i){if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==i[a])return!1;return!0}},pi$1=class{static preprocessInputShapes(e,i){let a=e.length===1?[1,e[0]]:e,o=i.length===1?[i[0],1]:i;return[a,o]}static postprocessOutputShape(e,i,a){i===1&&e.splice(e.length-2,1),a===1&&e.pop()}static calcMatMulShape(e,i){return e[1]!==i[0]?void 0:[e[0],i[1]]}},Ze$1=class cw{static calcShape(i,a,o=!1){let c=i.length,s=a.length;if(c===0)return a;if(s===0)return i;let d=Math.max(i.length,a.length),et=new Array(d);if(o){if(c<2||s<2)return;let $t=pi$1.calcMatMulShape([i[c-2],i[c-1]],[a[s-2],a[s-1]]);if($t===void 0)return;[et[d-2],et[d-1]]=$t}for(let $t=o?3:1;$t<=d;$t++){let h=c-$t<0?1:i[c-$t],b=s-$t<0?1:a[s-$t];if(h!==b&&h>1&&b>1)return;et[d-$t]=Math.max(h,b)}return et}static index(i,a){let o=new Array(a.length);return cw.fillIndex(i,a,o),o}static fillIndex(i,a,o){let c=i.length-a.length;for(let s=0;s<a.length;s++)o[s]=i[c+s]%a[s]}static calc(i,a,o,c,s){let d=cw.calcShape(i.dims,a.dims);if(d){if(c&&!U$1.areEqual(d,i.dims))return;let et=U$1.size(d),$t=c?i:new $e(d,s||i.type);if(d.length===0)$t.set([],o(i.get([]),a.get([])));else{let h=new Array(d.length),b=new Array(i.dims.length),g=new Array(a.dims.length),jt=0,Ht=0,Kt=!1,or=!1;i.dims.length===0&&(jt=i.get([]),Kt=!0),a.dims.length===0&&(Ht=a.get([]),or=!0);let jr;for(let Lr=0;Lr<et;Lr++){jr=Lr;for(let ir=d.length-1;ir>=0;ir--)h[ir]=jr%d[ir],jr=Math.floor(jr/d[ir]);Kt||(cw.fillIndex(h,i.dims,b),jt=i.get(b)),or||(cw.fillIndex(h,a.dims,g),Ht=a.get(g)),$t.set(h,o(jt,Ht))}}return $t}}static isValidBroadcast(i,a){let o=i.length,c=a.length;if(o>c)return!1;for(let s=1;s<=o;s++)if(i[o-s]!==1&&i[o-s]!==a[c-s])return!1;return!0}static getBroadcastDims(i,a){let o=i.length,c=[];for(let s=0;s<o;s++){let d=o-1-s,et=i[d]||1;(a[a.length-1-s]||1)>1&&et===1&&c.unshift(d)}return c}},jn$1=class{static getShapeOfGemmResult(e,i,a,o,c){if(e.length!==2||a.length!==2)throw new Error("shape need to be of size 2");let s,d,et;i?(s=e[1],d=e[0]):(s=e[0],d=e[1]);let $t=-1;if(o?(et=a[0],$t=1):(et=a[1],$t=0),a[$t]!==d)throw new Error("dimension mismatch");if(s<=0||et<=0||d<=0)throw new Error("invalid shape specified");if(c&&!Ze$1.isValidBroadcast(c,[s,et]))throw new Error("gemm: invalid bias shape for broadcast");return[s,et,d]}},We$1=class o_{static tensorDataTypeFromProto(i){switch(i){case ye$1.onnx.TensorProto.DataType.INT8:return"int8";case ye$1.onnx.TensorProto.DataType.UINT8:return"uint8";case ye$1.onnx.TensorProto.DataType.BOOL:return"bool";case ye$1.onnx.TensorProto.DataType.INT16:return"int16";case ye$1.onnx.TensorProto.DataType.UINT16:return"uint16";case ye$1.onnx.TensorProto.DataType.INT32:return"int32";case ye$1.onnx.TensorProto.DataType.UINT32:return"uint32";case ye$1.onnx.TensorProto.DataType.FLOAT:return"float32";case ye$1.onnx.TensorProto.DataType.DOUBLE:return"float64";case ye$1.onnx.TensorProto.DataType.STRING:return"string";case ye$1.onnx.TensorProto.DataType.INT64:return"int32";case ye$1.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ye$1.onnx.TensorProto.DataType[i]}`)}}static tensorDataTypeStringToEnum(i){switch(i){case"int8":return ye$1.onnx.TensorProto.DataType.INT8;case"uint8":return ye$1.onnx.TensorProto.DataType.UINT8;case"bool":return ye$1.onnx.TensorProto.DataType.BOOL;case"int16":return ye$1.onnx.TensorProto.DataType.INT16;case"uint16":return ye$1.onnx.TensorProto.DataType.UINT16;case"int32":return ye$1.onnx.TensorProto.DataType.INT32;case"uint32":return ye$1.onnx.TensorProto.DataType.UINT32;case"float32":return ye$1.onnx.TensorProto.DataType.FLOAT;case"float64":return ye$1.onnx.TensorProto.DataType.DOUBLE;case"string":return ye$1.onnx.TensorProto.DataType.STRING;case"int64":return ye$1.onnx.TensorProto.DataType.INT64;case"uint64":return ye$1.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${i}`)}}static tensorDimsFromProto(i){return i.map(a=>Vt.isLong(a)?a.toNumber():a)}static tensorValueTypeFromProto(i){return{tensorType:o_.tensorDataTypeFromProto(i.elemType),shape:{dims:o_.tensorDimsFromProto(i.shape.dim.map(a=>a.dimValue))}}}static tensorDimsFromORTFormat(i){let a=[];for(let o=0;o<i.dimsLength();o++)a.push(it.longToNumber(i.dims(o)));return a}static tensorAttributesFromORTFormat(i){let a=[];for(let o=0;o<i.attributesLength();o++)a.push(i.attributes(o));return a}},it=class{static longToNumber(e,i){return Vt.isLong(e)?e.toNumber():e instanceof _.Long?Vt.fromValue({low:e.low,high:e.high,unsigned:i??!1}).toNumber():e}static isLong(e){return Vt.isLong(e)||e instanceof _.Long}},U$1=class u${static size(i){return u$.getSizeFromDimensionRange(i,0,i.length)}static sizeFromDimension(i,a){if(a<0||a>i.length)throw new Error(`invalid dimension of ${a} for sizeFromDimension as Tensor has ${i.length} dimensions.`);return u$.getSizeFromDimensionRange(i,a,i.length)}static sizeToDimension(i,a){if(a<0||a>i.length)throw new Error(`invalid dimension of ${a} for sizeToDimension as Tensor has ${i.length} dimensions.`);return u$.getSizeFromDimensionRange(i,0,a)}static getSizeFromDimensionRange(i,a,o){let c=1;for(let s=a;s<o;s++){if(i[s]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");c*=i[s]}return c}static computeStrides(i){let a=i.length;if(a===0)return[];if(a===1)return[1];let o=new Array(a);o[a-1]=1,o[a-2]=i[a-1];for(let c=a-3;c>=0;--c)o[c]=o[c+1]*i[c+1];return o}static transpose(i){return i.slice().reverse()}static indicesToOffset(i,a,o){o===void 0&&(o=i.length);let c=0;for(let s=0;s<o;++s)c+=a[s]*i[s];return c}static offsetToIndices(i,a){let o=a.length;if(o===0)return[];if(o===1)return[i*a[0]];let c=new Array(a.length);for(let s=0;s<c.length-1;++s)c[s]=Math.floor(i/a[s]),i-=c[s]*a[s];return c[c.length-1]=i,c}static normalizeAxis(i,a){if(i<-a&&i>=a)throw new Error("unsupported axis for this operation.");return i<0?i+a:i}static normalizeAxes(i,a){return i.map(o=>this.normalizeAxis(o,a))}static incrementIndex(i,a,o){if(a.length===0||i.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(o===void 0)o=a.length;else if(o<=0||o>a.length)throw new Error("Incorrect axis to increment on");for(let c=o-1;c>=0&&(i[c]++,!(i[c]<a[c]));--c)i[c]=0}static calculateReshapedDims(i,a){if(a.length===0){if(i.length===0||u$.size(i)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let o=a.length,c=new Array(o),s=-1,d=1;for(let $t=0;$t<o;$t++){if(a[$t]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(a[$t]===-1){if(s!==-1)throw new Error("at most one dimension in shape hints can be -1");s=$t}else{if(a[$t]===0){if($t>=i.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");c[$t]=i[$t]}else c[$t]=a[$t];d*=c[$t]}}let et=u$.size(i);if(s!==-1){if(et%d!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${i}] Output shape: [${a}]`);c[s]=et/d}else if(d!==et)throw new Error("reshapedDims and originalDims don't have matching sizes");return c}static sortBasedOnPerm(i,a){return a?a.map(o=>i[o]):i.slice().reverse()}static padShape(i,a){let o=i.length;return i.map((c,s)=>c+a[s]+a[s+o])}static areEqual(i,a){return i.length!==a.length?!1:i.every((o,c)=>o===a[c])}static validateDimsAndCalcSize(i){if(i.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let a=1;for(let o of i){if(!Number.isInteger(o))throw new TypeError(`Invalid shape: ${o} is not an integer`);if(o<0||o>2147483647)throw new TypeError(`Invalid shape: length ${o} is not allowed`);a*=o}return a}static flattenShape(i,a){a<0&&(a+=i.length);let o=i.reduce((s,d)=>s*d,1),c=i.slice(a).reduce((s,d)=>s*d,1);return[o/c,c]}static squeezeShape(i,a){let o=new Array;a=u$.normalizeAxes(a,i.length);for(let c=0;c<i.length;c++){let s=a.indexOf(c)>=0;if(s&&i[c]!==1)throw new Error("squeeze an axis of size different than 1");(a.length===0&&i[c]>1||a.length>0&&!s)&&o.push(i[c])}return o}static unsqueezeShape(i,a){let o=new Array(i.length+a.length);o.fill(0);for(let s=0;s<a.length;s++){let d=u$.normalizeAxis(a[s],o.length);if(d>=o.length)throw new Error("'axes' has an out of range axis");if(o[d]!==0)throw new Error("'axes' has a duplicate axis");o[d]=1}let c=0;for(let s=0;s<o.length;s++)o[s]===0&&(o[s]=i[c++]);if(c!==i.length)throw new Error("the unsqueezed dimension could not be established");return o}},an$1=class tT{static splitShape(i,a,o,c){if(o.length===0){if(!c)throw new Error("need to know number of outputs when the 'split' attribute is not specified");tT.determineSplit(i[a],c,o)}let s=[],d=[0];for(let et=0;et<o.length;++et){et!==0&&d.push(d[et-1]+o[et-1]);let $t=i.slice();$t[a]=o[et],s.push($t)}return[s,d]}static determineSplit(i,a,o){if(i%a!==0)throw new Error("cannot split tensor to equal sized parts");for(let c=0;c<a;++c)o.push(i/a)}},mr$1=class pw{static adjustPoolAttributes(i,a,o,c,s,d){if(!i&&o.length!==a.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(i)for(let et=0;et<a.length-2;et++)et>=o.length?o.push(a[et+2]):o[et]=a[et+2];for(let et=0;et<o.length;et++)if(et<c.length){if(c[et]<0)throw new Error("strides should be greater than or equal to 1")}else c.push(1);for(let et=0;et<o.length;et++)if(et<s.length){if(s[et]<0)throw new Error("dilations should be greater than or equal to 1")}else s.push(1);for(let et=0;et<o.length*2;et++)if(et<d.length){if(d[et]<0)throw new Error("pad should be greater than or equal to 1")}else d.push(0);for(let et=0;et<o.length;et++){if(o[et]<=0)throw new Error("kernel shapes need to be greater than 0");if(d[et]>=o[et]||d[et+o.length]>=o[et])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(i,a,o,c,s,d){if(d){if(s.length!==2*(i.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(a.length!==i.length-2)throw new Error("length of strides should be the length of data dimensions");if(c.length!==i.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let et=0;et<i.length-2;et++)pw.adjustPadAndReturnShape(i[et+2],a[et],o[et],c[et],s,et,et+i.length-2,d)}}static computePoolOutputShape(i,a,o,c,s,d,et){if(a.length<=0)throw new Error("input shape must be of size greater than 0");let $t=[a[0],a[1]];return pw.computeShapeHelper(i,a,$t,o,c,s,d,et),$t}static computeConvOutputShape(i,a,o,c,s,d,et){if(i.length<=0||a.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let $t=[i[0],a[0]];return pw.computeShapeHelper(!1,i,$t,o,c,s,d,et),$t}static computeShapeHelper(i,a,o,c,s,d,et,$t){if(i)for(let h=0;h<a.length-2;h++)o.push(1);else for(let h=0;h<a.length-2;h++)o.push(pw.adjustPadAndReturnShape(a[h+2],c[h],s[h],d[h],et,h,h+a.length-2,$t))}static adjustPadAndReturnShape(i,a,o,c,s,d,et,$t){let h=o*(c-1)+1;if($t&&$t!=="NOTSET")switch($t){case"VALID":return s[d]=0,s[et]=0,Math.floor((i-h)/a+1);case"SAME_LOWER":case"SAME_UPPER":if(o!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let b=((i+a-1)/a-1)*a+c-i;return s[d]=Math.floor($t==="SAME_LOWER"?(b+1)/2:b/2),s[et]=b-s[d],Math.floor((i+b-c)/a+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((i+s[d]+s[et]-h)/a+1)}},br=-34028234663852886e22,gr$1=34028234663852886e22});function Hd$1(e){switch(e){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${e}`)}}function Fu$1(e){switch(e){case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.BOOL:return 1;case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT16:return 2;case ne.onnx.TensorProto.DataType.FLOAT:case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.UINT32:return 4;case ne.onnx.TensorProto.DataType.INT64:case ne.onnx.TensorProto.DataType.DOUBLE:case ne.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${ne.onnx.TensorProto.DataType[e]}`)}}function qd$1(e,i){return new(Bu$1(i))(e)}function Bu$1(e){switch(e){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function hi$1(e,i){if(i===ne.onnx.TensorProto.DataType.INT64||i===di$1.TensorDataType.INT64){if(e.greaterThanOrEqual(2147483648)||e.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(i===ne.onnx.TensorProto.DataType.UINT32||i===di$1.TensorDataType.UINT32||i===ne.onnx.TensorProto.DataType.UINT64||i===di$1.TensorDataType.UINT64){if(e.greaterThanOrEqual(4294967296)||e.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${ne.onnx.TensorProto.DataType[i]}`);return e.toNumber()}function $u$1(e,i,a){switch(i){case ne.onnx.TensorProto.DataType.BOOL:case ne.onnx.TensorProto.DataType.UINT8:return e.getUint8(a);case ne.onnx.TensorProto.DataType.INT8:return e.getInt8(a);case ne.onnx.TensorProto.DataType.UINT16:return e.getUint16(a,!0);case ne.onnx.TensorProto.DataType.INT16:return e.getInt16(a,!0);case ne.onnx.TensorProto.DataType.FLOAT:return e.getFloat32(a,!0);case ne.onnx.TensorProto.DataType.INT32:return e.getInt32(a,!0);case ne.onnx.TensorProto.DataType.UINT32:return e.getUint32(a,!0);case ne.onnx.TensorProto.DataType.INT64:return hi$1(Vt.fromBits(e.getUint32(a,!0),e.getUint32(a+4,!0),!1),i);case ne.onnx.TensorProto.DataType.DOUBLE:return e.getFloat64(a,!0);case ne.onnx.TensorProto.DataType.UINT64:return hi$1(Vt.fromBits(e.getUint32(a,!0),e.getUint32(a+4,!0),!0),i);default:throw new Error(`cannot read from DataView for type ${ne.onnx.TensorProto.DataType[i]}`)}}var ku$1,ne,di$1,$e,yr=L(()=>{ku$1=Ar(Os$1()),Zo(),tn$1(),ne=Ar(Cr()),fe$1(),di$1=V.experimental.fbs,$e=class l2{constructor(i,a,o,c,s,d=ku$1.Guid.create()){this.dims=i,this.type=a,this.dataProvider=o,this.asyncDataProvider=c,this.cache=s,this.dataId=d,this.size=U$1.validateDimsAndCalcSize(i);let et=this.size,$t=o===void 0&&c===void 0&&s===void 0;if(s!==void 0&&s.length!==et)throw new RangeError("Input dims doesn't match data length.");if(a==="string"){if(s!==void 0&&(!Array.isArray(s)||!s.every(h=>typeof h=="string")))throw new TypeError("cache should be a string array");$t&&(this.cache=new Array(et))}else{if(s!==void 0){let h=Bu$1(a);if(!(s instanceof h))throw new TypeError(`cache should be type ${h.name}`)}if($t){let h=new ArrayBuffer(et*Hd$1(a));this.cache=qd$1(h,a)}}}get data(){if(this.cache===void 0){let i=this.dataProvider(this.dataId);if(i.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=i}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(i){return this.data[U$1.indicesToOffset(i,this.strides)]}set(i,a){this.data[U$1.indicesToOffset(i,this.strides)]=a}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=U$1.computeStrides(this.dims)),this._strides}static fromProto(i){if(!i)throw new Error("cannot construct Value from an empty tensor");let a=We$1.tensorDataTypeFromProto(i.dataType),o=We$1.tensorDimsFromProto(i.dims),c=new l2(o,a);if(a==="string")i.stringData.forEach((s,d)=>{c.data[d]=sn$1(s)});else if(i.rawData&&typeof i.rawData.byteLength=="number"&&i.rawData.byteLength>0){let s=c.data,d=new DataView(i.rawData.buffer,i.rawData.byteOffset,i.rawData.byteLength),et=Fu$1(i.dataType),$t=i.rawData.byteLength/et;if(i.rawData.byteLength%et!==0)throw new Error("invalid buffer length");if(s.length!==$t)throw new Error("buffer length mismatch");for(let h=0;h<$t;h++){let b=$u$1(d,i.dataType,h*et);s[h]=b}}else{let s;switch(i.dataType){case ne.onnx.TensorProto.DataType.FLOAT:s=i.floatData;break;case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.INT16:case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.BOOL:s=i.int32Data;break;case ne.onnx.TensorProto.DataType.INT64:s=i.int64Data;break;case ne.onnx.TensorProto.DataType.DOUBLE:s=i.doubleData;break;case ne.onnx.TensorProto.DataType.UINT32:case ne.onnx.TensorProto.DataType.UINT64:s=i.uint64Data;break;default:throw new Error("unspecific error")}if(s==null)throw new Error("failed to populate data from a tensorproto value");let d=c.data;if(d.length!==s.length)throw new Error("array length mismatch");for(let et=0;et<s.length;et++){let $t=s[et];Vt.isLong($t)?d[et]=hi$1($t,i.dataType):d[et]=$t}}return c}static fromData(i,a,o){return new l2(a,o,void 0,void 0,i)}static fromOrtTensor(i){if(!i)throw new Error("cannot construct Value from an empty tensor");let a=We$1.tensorDimsFromORTFormat(i),o=We$1.tensorDataTypeFromProto(i.dataType()),c=new l2(a,o);if(o==="string")for(let s=0;s<i.stringDataLength();s++)c.data[s]=i.stringData(s);else if(i.rawDataArray()&&typeof i.rawDataLength()=="number"&&i.rawDataLength()>0){let s=c.data,d=new DataView(i.rawDataArray().buffer,i.rawDataArray().byteOffset,i.rawDataLength()),et=Fu$1(i.dataType()),$t=i.rawDataLength()/et;if(i.rawDataLength()%et!==0)throw new Error("invalid buffer length");if(s.length!==$t)throw new Error("buffer length mismatch");for(let h=0;h<$t;h++){let b=$u$1(d,i.dataType(),h*et);s[h]=b}}return c}}});function H(e){return e===1?jd$1:Yd$1}function Nu$1(e){let i=H(e);return`${i.version}
      precision highp float;
      ${i.attribute} vec3 position;
      ${i.attribute} vec2 textureCoord;

      ${i.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function Ru$1(e){let i=H(e);return`${i.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${i.varyingFrag} vec2 TexCoords;
    ${i.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function Mu$1(e,i){let a=H(e);return`
  void main() {
    int indices[${i}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${a.output} = result;
  }
  `}var jd$1,Yd$1,we$1=L(()=>{jd$1={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},Yd$1={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),ae=L(()=>{});async function mi$1(e,i=o=>0,a){return new Promise((o,c)=>{let s=0,d=()=>{if(e()){o();return}s++;let et=i(s);if(a!=null&&s>=a){c();return}setTimeout(d,et)};d()})}function Yn$1(e){return Fr(typeof e<"u"&&e.length!==0,()=>"empty string found for sampler name"),"get"+e.charAt(0).toUpperCase()+e.slice(1)}function Gu$1(e){return Fr(typeof e<"u"&&e.length!==0,()=>"empty string found for sampler name"),"get"+e.charAt(0).toUpperCase()+e.slice(1)+"AtOutCoords"}function $r(e,i){let a=JSON.parse(JSON.stringify(e));return a=i,a}function kr$1(e,i){return i.map(a=>e[a]).join(", ")}function Qe(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function Dt$1(e=6){return["x","y","z","w","u","v"].slice(0,e)}var Bt$1=L(()=>{fe$1()});function Xd$1(e,i){return Dt$1(i).map(a=>`${e}.${a}`)}function Br$1(e,i){return i===1?[e]:Xd$1(e,i)}function Nt(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var Tr=L(()=>{Bt$1()});function Jd(e,i,a){if(e===0)return"false";if(e===1)return`rc > ${i[0]}`;let o="";for(let c=e-2;c<e;c++)o+=`${a[c]} >= ${i[c-e+2]}`,c<e-1&&(o+="||");return o}function Zd(e,i){let a=e.length;if(a===0)return"getA(), 0, 0, 0";if(a===1)return`getA(rc),
            rc + 1 >= ${e[0]} ? 0. : getA(rc + 1),
            0, 0`;let o="r, c",c="r, cp1",s="rp1, c",d="rp1, cp1",et="";if(a>2)for(let $t=0;$t<a-2;++$t)et=et+`${i[$t]},`;return`getA(${et}${o}),
          rEdge ? 0. : getA(${et}${s}),
          cEdge ? 0. : getA(${et}${c}),
          rEdge || cEdge ? 0. : getA(${et}${d})`}function Qd(e,i,a,o){return e===0||e===1?"":`
    int r = ${i[e-2]};
    int c = ${i[e-1]};
    int rp1 = ${i[e-2]} + 1;
    int cp1 = ${i[e-1]} + 1;
    bool rEdge = rp1 >= ${o};
    bool cEdge = cp1 >= ${a};
    `}var Uu$1,Kd$1,zu$1,Vu$1=L(()=>{we$1(),ae(),Bt$1(),Tr(),Uu$1={name:"pack",inputNames:["A"],inputTypes:[1]},Kd$1=(e,i)=>{let a=H(e.session.backend.glContext.version),o=i.dims,c=o.length,s=i.dims.length,d=Qe(s),et=Br$1("rc",s),$t=Qd(s,et,o[o.length-2],o[o.length-1]),h;c===0?h=[1,1]:c===1?h=[o[0],1]:h=[o[s-1],o[s-2]];let b=Jd(s,h,et),g=Zd(o,et),jt=`
        void main() {
          ${d} rc = getOutputCoords();

          if(${b}) {
            ${a.output} = vec4(0);
          } else {
            ${$t}

            ${a.output} = vec4(${g});
          }
        }
      `;return{...Uu$1,hasMain:!0,output:{dims:i.dims,type:i.type,textureType:2},shaderSource:jt}},zu$1=(e,i)=>({...Uu$1,get:()=>Kd$1(e,i)})});function bi(e){if(e.length===0)return[1,1,1];let i=1;for(let a=0;a<e.length-2;++a)i*=e[a];return[i,e.length>1?e[e.length-2]:1,e[e.length-1]]}function Hu$1(e,i){let a=!1;return e.length===0||i.length===0?a=!0:e.length<2||i.length<2?a=e[e.length-1]===i[i.length-1]:a=e[e.length-1]===i[i.length-1]&&e[e.length-2]===i[i.length-2],a}function rh(e){let i=U$1.computeStrides(e),a=["b","r","c"],o="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${i.map((c,s)=>{let d=`int ${a[s]} = ${o} / ${c}`,et=s===i.length-1?`int ${a[s+1]} = ${o} - ${a[s]} * ${c}`:`index -= ${a[s]} * ${c}`;return`${d}; ${et};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function nh(e){let i=U$1.computeStrides(e);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${i[0]} + coords.z * ${i[1]} + coords.y;
  }
`}var eh,th,Wu$1,qu$1=L(()=>{fe$1(),we$1(),ae(),Tr(),eh=e=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${e}`}),th=(e,i,a,o)=>{let c=i.dims,s=o,d="";for(let h=0;h<4;h++){let b="";switch(h){case 0:b="outputCoords = rc;";break;case 1:b="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:b="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:b="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}d+=`
        ${b}
        ${h>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${h}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${h>0?"}":""}
      `}let et=H(e.session.backend.glContext.version),$t=`
      ${rh(c)}
      ${nh(s)}
      ${Nt()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${s[2]};
        int cols = ${s[1]};

        ${d}
        ${et.output} = result;
      }
    `;return{...a,output:{dims:s,type:i.type,textureType:2},shaderSource:$t,hasMain:!0}},Wu$1=(e,i,a)=>{let o=eh(a);return{...o,get:()=>th(e,i,o,a)}}}),gi,ju$1=L(()=>{we$1(),ae(),gi=(e,i)=>{let a=i.shape,o=H(e.session.backend.glContext.version),c=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${o.texture2D}(X,TexCoords).r;
      ${o.output} = encodeAsUint8(value);
    }`,s={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:a,type:i.tensor.type,textureType:3},shaderSource:c,hasMain:!0};return e.executeProgram(s,[i.tensor])}});function ih(e,i){if(e===1)return"rc";let a="";for(let o=0;o<e;o++)a+=i[o],o<e-1&&(a+=",");return a}var Yu$1,oh,Xu$1,Ku$1=L(()=>{we$1(),ae(),Bt$1(),Tr(),Yu$1={name:"unpack",inputNames:["A"],inputTypes:[2]},oh=(e,i)=>{let a=i.dims.length,o=Br$1("rc",a),c=o.slice(-2),s=Qe(a),d=Nt(),et=i.dims.length===0?"":ih(a,o),$t=a<=1?"rc":`vec2(${c.join(",")})`,h=H(e.session.backend.glContext.version),b=`
    ${d}
    void main() {
      ${s} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${et});

       ${h.output} = vec4(getChannel(packedInput, ${$t}), 0, 0, 0);
     }
   `;return{...Yu$1,hasMain:!0,output:{dims:i.dims,type:i.type,textureType:0},shaderSource:b}},Xu$1=(e,i)=>({...Yu$1,get:()=>oh(e,i)})}),Xn$1,un,Kn$1,ln=L(()=>{lt$1(),Xn$1=class{constructor(e,i=1){if(i===1)this.internalFormat=e.R32F,this.format=e.RED,this.textureType=e.FLOAT,this.channelSize=i;else if(i===4)this.internalFormat=e.RGBA32F,this.format=e.RGBA,this.textureType=e.FLOAT,this.channelSize=i;else throw new Error(`Invalid number of channels: ${i}`)}encode(e,i){let a,o;return e.constructor!==Float32Array&&(ce.warning("Encoder","data was not of type Float32; creating new Float32Array"),o=new Float32Array(e)),i*this.channelSize>e.length?(ce.warning("Encoder","Source data too small. Allocating larger array"),o=e,a=this.allocate(i*this.channelSize),o.forEach((c,s)=>a[s]=c)):(o=e,a=o),a}allocate(e){return new Float32Array(e*4)}decode(e,i){return this.channelSize===1?e.filter((a,o)=>o%4===0).subarray(0,i):e.subarray(0,i)}},un=class{constructor(e,i=1,a){if(i!==1&&i!==4)throw new Error(`Invalid number of channels: ${i}`);this.internalFormat=e.RGBA,this.format=e.RGBA,this.channelSize=i,this.textureType=a||e.FLOAT}encode(e,i){let a=e;return this.channelSize===1&&(ce.verbose("Encoder","Exploding into a larger array"),a=this.allocate(i),e.forEach((o,c)=>a[c*4]=o)),a}allocate(e){return new Float32Array(e*4)}decode(e,i){return this.channelSize===1?e.filter((a,o)=>o%4===0).subarray(0,i):e.subarray(0,i)}},Kn$1=class{constructor(e,i=1){if(this.channelSize=4,i===1)this.internalFormat=e.ALPHA,this.format=e.ALPHA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=i;else if(i===4)this.internalFormat=e.RGBA,this.format=e.RGBA,this.textureType=e.UNSIGNED_BYTE,this.channelSize=i;else throw new Error(`Invalid number of channels: ${i}`)}encode(e,i){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}allocate(e){return new Uint8Array(e*this.channelSize)}decode(e,i){if(e instanceof Uint8Array)return e.subarray(0,i);throw new Error(`Invalid array type: ${e.constructor}`)}}}),fn,Ju$1,yi,Zu$1=L(()=>{fe$1(),ae(),fn=(e,i,a)=>{let o=a===0||a===1?1:4,c=a===2,s=a===1||a===2,d=a===4?i.length-1:void 0,et=a===4?i.map(($t,h)=>h===i.length-1?$t*4:$t):void 0;return yi(e,i,o,et,{isPacked:c,reverseWH:s,breakAxis:d})},Ju$1=(e,i,a)=>{let o=fn(e,i,a);return[o.width,o.height]},yi=(e,i,a=1,o,c)=>{let s=!!(c&&c.isPacked),[d,et]=e.computeTextureWH(s&&o||i,c),$t=i.length,h=i.slice(0);if($t===0&&(h=[1]),a===1)o=i;else if(s){if(a!==4)throw new Error("a packed texture must be 4-channel");o=i,$t>0&&(h[$t-1]=Math.ceil(h[$t-1]/2)),$t>1&&(h[$t-2]=Math.ceil(h[$t-2]/2))}else if(!o)throw new Error("Unpacked shape is needed when using channels > 1");return{width:d,height:et,channels:a,isPacked:s,shape:h,strides:U$1.computeStrides(h),unpackedShape:o,reversedWH:c&&c.reverseWH}}}),sh,Jn$1,el$1=L(()=>{lt$1(),yr(),fe$1(),Vu$1(),qu$1(),ju$1(),Ku$1(),ln(),Zu$1(),ae(),sh=(e,i)=>{let a=i.map(c=>`${c.unpackedShape.join(",")};${c.width}x${c.height}`).join("_"),o=e.name;return e.cacheHint&&(o+="["+e.cacheHint+"]"),o+=":"+a,o},Jn$1=class{constructor(e){this.session=e,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(e,i){return Ju$1(this.session.layoutStrategy,e,i)}executeProgram(e,i){if(i.length<e.inputNames.length)throw new Error(`Input size mustn't be less than ${e.inputNames.length}.`);if(e.inputNames.length!==e.inputTypes.length)throw new Error("input names size does not match input types");let a=[];for(let $t=0;$t<e.inputNames.length;++$t)a[$t]=this.getOrCreateTextureData(i[$t],e.inputTypes[$t]);let o=sh(e,a),c=this.session.programManager.getArtifact(o),s=c?c.programInfo:typeof e.get=="function"?e.get():e,d=fn(this.session.layoutStrategy,s.output.dims,s.output.textureType),et=this.createTextureData(d,s.output.type);return c||(c=this.session.programManager.build(s,a,et),this.session.programManager.setArtifact(o,c)),this.runProgram(c,a,et),et}run(e,i){return this.executeProgram(e,i).tensor}runProgram(e,i,a){for(let o=0;o<i.length;++o)if(!!i[o].isPacked!=(e.programInfo.inputTypes[o]===2))throw new Error(`input[${o}] property packed inconsistent`);if(!!a.isPacked!=(e.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(e,i,a)}getOrCreateTextureData(e,i){let a=this.getTextureData(e.dataId,i===2);if(!a&&(a=this.getTextureData(e.dataId,i!==2),a))return i===2?this.pack(a):this.unpack(a);if(!a){let o=fn(this.session.layoutStrategy,e.dims,i);if(i===4){let c=e.dims;if(c.length===4){let s=[c[0],Math.ceil(c[1]*c[2]*c[3]/4)],d=fn(this.session.layoutStrategy,s,i),et=e.numberData;if(c[1]*c[2]*c[3]%4!==0){let $t=c[0],h=c[1]*c[2]*c[3],b=Math.ceil(h*1/4)*4,g=$t*b;et=new Float32Array(g);for(let jt=0;jt<$t;++jt){let Ht=jt*h,Kt=jt*b+jt%1*h;et.set(e.numberData.subarray(Ht,Ht+h),Kt)}}return this.createTextureData(d,e.type,et,e,1)}}if(i===2){let c=yi(this.session.layoutStrategy,e.dims,1,[],{reverseWH:!0}),s=this.createTextureData(c,e.type,e.numberData,e,1);a=this.pack(s)}else a=this.createTextureData(o,e.type,e.numberData,e,1)}return a}createTextureDataFromLayoutBindTensor(e,i,a,o){return this.createTextureData(e,i,a,o,1)}createTextureData(e,i,a,o,c){ce.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(e)}]`);let s=this.session.textureManager.createTextureFromLayout(i,e,a,c);return this.createTextureDataFromTexture(e,i,s,o)}reshapeUnpacked(e,i){let a=this.getOrCreateTextureData(e,0),o={channels:a.channels,height:a.height,width:a.width,shape:i.length!==0?i:[1],strides:U$1.computeStrides(i),unpackedShape:i};return this.createTextureDataFromTexture(o,e.type,a.texture).tensor}reshapePacked(e,i){let a=this.getOrCreateTextureData(e,2);if(Hu$1(e.dims,i)){let et={channels:a.channels,height:a.height,width:a.width,shape:i.length!==0?i:[1],strides:U$1.computeStrides(i),unpackedShape:i,isPacked:!0};return this.createTextureDataFromTexture(et,e.type,a.texture).tensor}let o=bi(e.dims),c=bi(i),s=this.reshapePacked(e,o),d=this.run(Wu$1(this,s,c),[s]);return this.reshapePacked(d,i)}cast(e,i){let a=this.getOrCreateTextureData(e,0);return this.createTextureDataFromTexture(a,i,a.texture).tensor}createTextureDataFromTexture(e,i,a,o,c){let s={...e,tensor:o||new $e(e.unpackedShape,i,d=>this.readTexture(s),async d=>this.readTextureAsync(s),void 0,c),texture:a};return this.setTextureData(s.tensor.dataId,s,e.isPacked),s}getTextureData(e,i=!1){return this.session.isInitializer(e)?this.session.getTextureData(e,i):i?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)}setTextureData(e,i,a=!1){this.session.isInitializer(e)?this.session.setTextureData(e,i,a):(a?this.packedTextureDataCache:this.unpackedTextureDataCache).set(e,i)}isTextureLayoutCached(e,i=!1){return!!this.getTextureData(e.dataId,i)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e=>this.session.textureManager.releaseTexture(e)),this.unpackedTextureDataCache=new Map}readTexture(e){return e.isPacked?this.readTexture(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,e))}async readTextureAsync(e){return e.isPacked?this.readTextureAsync(this.unpack(e)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(e,e.tensor.type,e.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,e))}pack(e){return this.executeProgram(zu$1(this,e.tensor),[e.tensor])}unpack(e){return this.executeProgram(Xu$1(this,e.tensor),[e.tensor])}}}),Ti,Q,Ue$1=L(()=>{Ti=class{constructor(e){Object.assign(this,e)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this.key}},Q=e=>new Ti(e)}),tl$1,rl$1,nl$1,uh,lh,ol$1=L(()=>{Ue$1(),we$1(),ae(),tl$1={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},rl$1=(e,i,a)=>(lh(i),[e.run({...tl$1,cacheHint:a.cacheKey,get:()=>uh(e,i,a)},i)]),nl$1=e=>{let i=e.attributes.getFloat("epsilon",1e-5),a=e.attributes.getFloat("momentum",.9),o=e.attributes.getInt("spatial",1);return Q({epsilon:i,momentum:a,spatial:o})},uh=(e,i,a)=>{let o=H(e.session.backend.glContext.version),c=i[0].dims.length,[s,d]=e.calculateTextureWidthAndHeight(i[1].dims,0),et=`
  float process(int[${c}] indices) {
    vec2 position = offsetToCoords(indices[1], ${s}, ${d});
    float scale = getColorAsFloat(${o.texture2D}(Scale, position));
    float mean = getColorAsFloat(${o.texture2D}(Mean, position));
    float variance = getColorAsFloat(${o.texture2D}(Variance, position));
    float b = getColorAsFloat(${o.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${a.epsilon})) ) + b;
  }`;return{...tl$1,output:{dims:i[0].dims,type:i[0].type,textureType:0},shaderSource:et}},lh=e=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let i=e[0],a=e[1],o=e[2],c=e[3],s=e[4];if(i.dims.length<3||a.dims.length!==1||o.dims.length!==1||c.dims.length!==1||s.dims.length!==1)throw new Error("invalid input shape.");if(a.dims[0]!==i.dims[1]||o.dims[0]!==i.dims[1]||c.dims[0]!==i.dims[1]||s.dims[0]!==i.dims[1])throw new Error("invalid input shape.");if(i.type!=="float32"&&i.type!=="float64"||a.type!=="float32"&&a.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||c.type!=="float32"&&c.type!=="float64"||s.type!=="float32"&&s.type!=="float64")throw new Error("invalid input tensor types.")}}),Zn$1,dt,R,cn,Qn$1,Wt$1=L(()=>{Zn$1=class{constructor(e,i,a,o){this.glContext=e,this.programInfo=i,this.inputTextureLayouts=a,this.outputTextureLayout=o}},dt=class{constructor(e){this.context=e}},R=class{constructor(e,i){this.routineBody=e,this.dependencies=i}},cn=class{constructor(e,i,a){this.name=e,a?this.dependencies=a:this.dependencies=[],i&&(this.routineBody=i)}addDependency(e){e&&this.dependencies.push(e)}},Qn$1=class{static returnOrderedNodes(e){if(!e||e.length===0)return[];if(e.length===1)return e;let i=new Set,a=new Set,o=new Array;return this.createOrderedNodes(e,i,a,o),o}static createOrderedNodes(e,i,a,o){for(let c=0;c<e.length;++c)this.dfsTraverse(e[c],i,a,o)}static dfsTraverse(e,i,a,o){if(!e||a.has(e.name))return;if(i.has(e.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");i.add(e.name);let c=e.dependencies;if(c&&c.length>0)for(let s=0;s<c.length;++s)this.dfsTraverse(c[s],i,a,o);o.push(e),a.add(e.name),i.delete(e.name)}}});function ch(){let e="add_";return{body:`
  float ${e}(float a, float b) {
    return a + b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:e,type:0}}function ph(){let e="div_";return{body:`
  float ${e}(float a, float b) {
    return a / b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:e,type:0}}function dh(){let e="mul_";return{body:`
  float ${e}(float a, float b) {
    return a * b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:e,type:0}}function hh(){let e="sub_";return{body:`
  float ${e}(float a, float b) {
    return a - b;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:e,type:0}}function mh(){let e="equal_";return{body:`
  float ${e}(float a, float b) {
    return float(a == b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:e,type:0}}function bh(){let e="greater_";return{body:`
  float ${e}(float a, float b) {
    return float(a > b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:e,type:0}}function gh(){let e="less_";return{body:`
  float ${e}(float a, float b) {
    return float(a < b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:e,type:0}}function yh(){let e="and_";return{body:`
  float ${e}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:e,type:0}}function Th(){let e="or_";return{body:`
  float ${e}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:e,type:0}}function xh(){let e="xor_";return{body:`
  float ${e}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:e,type:0}}function wh(){return _h("pow")}function vh(){let e="prelu_";return{body:`
  float ${e}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:e,type:0}}function _h(e){let i=`${e}_`;return{body:`
  float ${i}(float a, float b) {
    return ${e}(a, b);
  }
  vec4 ${i}(vec4 v1, vec4 v2) {
    return ${e}(v1, v2);
  }
  `,name:i,type:0}}var ht,Oh,il$1,al$1,sl$1,ul$1,ll$1,fl$1,cl$1,pl$1,dl$1,hl$1,ml$1,bl$1,gl$1=L(()=>{fe$1(),Wt$1(),we$1(),ae(),ht=(e,i,a,o=i[0].type,c)=>{let s=e.session.pack?2:0;return{name:a.name,inputNames:["A","B"],inputTypes:[s,s],cacheHint:c,get:()=>Oh(e,i,a,o)}},Oh=(e,i,a,o=i[0].type)=>{let c=e.session.pack?2:0,s=!U$1.areEqual(i[0].dims,i[1].dims),d=i[0].dims,et=e.session.pack;if(s){let b=Ze$1.calcShape(i[0].dims,i[1].dims,!1);if(!b)throw new Error("Can't perform binary op on the given tensors");d=b;let g=d.length,jt=i[0].dims.length!==0?i[0].dims.length:1,Ht=i[1].dims.length!==0?i[1].dims.length:1,Kt=i[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",or=i[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",jr=H(e.session.backend.glContext.version),Lr=et?`
      ${a.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${a.name}(a, b);
        ${jr.output} = result;
      }`:`
      ${a.body}
      float process(int indices[${g}]) {
        int aindices[${jt}];
        int bindices[${Ht}];
        ${Kt}
        ${or}
        return ${a.name}(_A(aindices), _B(bindices));
      }`;return{name:a.name,inputNames:["A","B"],inputTypes:[c,c],output:{dims:d,type:o,textureType:c},shaderSource:Lr,hasMain:et}}let $t=H(e.session.backend.glContext.version),h=`
    ${a.body}
    void main() {
      vec4 v1 = ${$t.texture2D}(A, TexCoords);
      vec4 v2 = ${$t.texture2D}(B, TexCoords);
      vec4 result = ${a.name}(v1, v2);
      ${$t.output} = result;
    }
    `;return{name:a.name,inputNames:["A","B"],inputTypes:[c,c],output:{dims:i[0].dims,type:o,textureType:c},shaderSource:h,hasMain:!0}},il$1=(e,i)=>[e.run(ht(e,i,ch()),i)],al$1=(e,i)=>[e.run(ht(e,i,yh(),"bool"),i)],sl$1=(e,i)=>[e.run(ht(e,i,ph()),i)],ul$1=(e,i)=>[e.run(ht(e,i,mh(),"bool"),i)],ll$1=(e,i)=>[e.run(ht(e,i,bh(),"bool"),i)],fl$1=(e,i)=>[e.run(ht(e,i,gh(),"bool"),i)],cl$1=(e,i)=>[e.run(ht(e,i,dh()),i)],pl$1=(e,i)=>[e.run(ht(e,i,Th(),"bool"),i)],dl$1=(e,i)=>[e.run(ht(e,i,wh()),i)],hl$1=(e,i)=>[e.run(ht(e,i,vh()),i)],ml$1=(e,i)=>[e.run(ht(e,i,hh()),i)],bl$1=(e,i)=>[e.run(ht(e,i,xh(),"bool"),i)]}),yl$1,Tl$1,Sh,xl$1=L(()=>{fe$1(),yl$1=(e,i,a)=>(Sh(i),[e.cast(i[0],a)]),Tl$1=e=>We$1.tensorDataTypeFromProto(e.attributes.getInt("to")),Sh=e=>{if(!e||e.length!==1)throw new Error("Cast requires 1 input.");if(e[0].type==="string")throw new Error("Invalid input type.")}}),Ah,Ph,wl$1,eo$1,vl$1=L(()=>{we$1(),ae(),Bt$1(),Tr(),Ah=(e,i)=>({name:"Concat (packed)",inputNames:Array.from({length:e},(a,o)=>`X${o}`),inputTypes:Array(e).fill(2),cacheHint:i}),Ph=(e,i,a,o)=>{let c=a[0].dims.slice();if(o>=c.length||o<-1*c.length)throw new Error("axis specified for concat doesn't match input dimensionality");o<0&&(o=c.length+o);let s=c.slice(0);for(let xn=1;xn<a.length;xn++){let No=a[xn].dims.slice();for(let Ro=0;Ro<c.length;Ro++)if(Ro===o)s[o]+=No[Ro];else if(c[Ro]!==No[Ro])throw new Error("non concat dimensions must match")}let d=s.length,et=Br$1("coords",d),$t=Qe(d),h=Nt(),b=a.map(xn=>xn.dims),g=Dt$1(d),jt=new Array(b.length-1);jt[0]=b[0][o];for(let xn=1;xn<jt.length;xn++)jt[xn]=jt[xn-1]+b[xn][o];let Ht=g[o],Kt=g.slice(-2),or=g.join(),jr=`if (${Ht} < ${jt[0]}) {
        return getChannel(
            getX0(${or}), vec2(${Kt.join()}));
        }`;for(let xn=1;xn<jt.length;xn++){let No=jt[xn-1];jr+=`
            if (${Ht} < ${jt[xn]}  && ${Ht} >= ${jt[xn-1]}) {
              return getChannel(
                getX${xn}(${eo$1(g,Ht,No)}),
                vec2(${eo$1(Kt,Ht,No)}));
            }`}let Lr=jt.length,ir=jt[jt.length-1];jr+=`
            return getChannel(
              getX${Lr}(${eo$1(g,Ht,ir)}),
              vec2(${eo$1(Kt,Ht,ir)}));`;let qr=H(e.session.backend.glContext.version),vn=`
          ${h}
          float getValue(${g.map(xn=>"int "+xn)}) {
            ${jr}
          }

          void main() {
            ${$t} coords = getOutputCoords();
            int lastDim = coords.${g[d-1]};
            coords.${g[d-1]} = coords.${g[d-2]};
            coords.${g[d-2]} = lastDim;

            vec4 result = vec4(getValue(${et}), 0., 0., 0.);

            ${et[d-1]} = ${et[d-1]} + 1;
            if (${et[d-1]} < ${s[d-1]}) {
              result.g = getValue(${et});
            }

            ${et[d-2]} = ${et[d-2]} + 1;
            if (${et[d-2]} < ${s[d-2]}) {
              result.a = getValue(${et});
            }

            ${et[d-1]} = ${et[d-1]} - 1;
            if (${et[d-2]} < ${s[d-2]} &&
                ${et[d-1]} < ${s[d-1]}) {
              result.b = getValue(${et});
            }
            ${qr.output} = result;
          }
        `;return{...i,output:{dims:s,type:a[0].type,textureType:2},shaderSource:vn,hasMain:!0}},wl$1=(e,i,a)=>{let o=Ah(i.length,a.cacheKey);return{...o,get:()=>Ph(e,o,i,a.axis)}},eo$1=(e,i,a)=>{let o=e.indexOf(i);return e.map((c,s)=>s===o?`${c} - ${a}`:c).join()}}),_l$1,Eh,Dh,Lh,Ol$1,Ch,Fh,$h,Il$1,kh,Sl$1=L(()=>{Ue$1(),ae(),vl$1(),_l$1=(e,i,a)=>(kh(i),e.session.pack&&i[0].dims.length>1?[e.run(wl$1(e,i,a),i)]:[e.run(Lh(e,i,a),i)]),Eh=(e,i)=>({name:"Concat",inputNames:Array.from({length:e},(a,o)=>`X${o}`),inputTypes:Array(e).fill(0),cacheHint:i}),Dh=(e,i,a,o)=>{let c=a[0].dims.slice();if(o>=c.length||o<-1*c.length)throw new Error("axis specified for concat doesn't match input dimensionality");o<0&&(o=c.length+o);let s=c.slice(0);for(let Ht=1;Ht<a.length;Ht++){let Kt=a[Ht].dims.slice();for(let or=0;or<c.length;or++)if(or===o)s[o]+=Kt[or];else if(c[or]!==Kt[or])throw new Error("non concat dimensions must match")}let d=s.length,et=new Array(a.length),$t=0;for(let Ht=0;Ht<et.length;++Ht)$t+=a[Ht].dims[o],et[Ht]=$t;let h="";a.length<5?h=Ol$1(et):h=Ch(et);let b=Fh(a.length,d),g=$h(et),jt=`
        ${b}
        ${g}
        ${h}
        float process(int indices[${d}]) {
          int textureIndex = getTextureWhereDataResides (indices[${o}]);

          if(textureIndex != 0) {
            indices[${o}] = indices[${o}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return{...i,output:{dims:s,type:a[0].type,textureType:0},shaderSource:jt}},Lh=(e,i,a)=>{let o=Eh(i.length,a.cacheKey);return{...o,get:()=>Dh(e,o,i,a.axis)}},Ol$1=e=>`int getTextureWhereDataResides(int index) {
      ${e.map((i,a)=>`if(index<${i}) {return ${a};}
`).join("")}
    }`,Ch=e=>Ol$1(e),Fh=(e,i)=>{let a=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${i}]) {`];for(let o=0;o<e;++o)o===0?a.push(`	if (textureIndex == ${o}) { return _X${o}(indices); }`):o===e-1?a.push(`	else { return _X${o}(indices); }`):a.push(`	else if (textureIndex == ${o}) { return _X${o}(indices); }`);return a.push("	}"),a.join(`
`)},$h=e=>{let i=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let a=0;a<e.length;++a)a===0?i.push(`	if (index == ${a}) { return ${e[a]}; }`):a===e.length-1?i.push(`	else { return ${e[a]}; }`):i.push(`	else if (index == ${a}) { return ${e[a]}; }`);return i.push("	}"),i.join(`
`)},Il$1=e=>Q({axis:e.attributes.getInt("axis")}),kh=e=>{if(!e||e.length<1)throw new Error("too few inputs");let i=e[0].type,a=e[0].dims.length;if(i==="string")throw new Error("string tensor is not supported yet");for(let o of e){if(o.type!==i)throw new Error("input tensors should be one type");if(o.dims.length!==a)throw new Error("input tensors should have the same shape")}}});function Bh(){return mt("abs")}function Nh(){return mt("acos")}function Rh(){return mt("asin")}function Mh(){return mt("atan")}function Gh(){return mt("ceil")}function Uh(){return mt("cos")}function zh(e){let i="elu";return{body:`
  const float alpha = float(${e});

  float ${i}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${i}_(vec4 v) {
    return vec4(${i}_(v.x), ${i}_(v.y), ${i}_(v.z), ${i}_(v.w));
  }
  `,name:i,type:0}}function Vh(){return mt("exp")}function Wh(){return mt("floor")}function xi(e,i){let a="clip";return{body:`
  const float min = float(${e});
  const float max = float(${i});

  float ${a}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${a}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:a,type:0}}function Hh(){let e="indentity";return{body:`
  float ${e}_(float a) {
    return a;
  }
  vec4 ${e}_(vec4 v) {
    return v;
  }
  `,name:e,type:0}}function qh(e){let i="leakyRelu";return{body:`
  const float alpha = float(${e});

  float ${i}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${i}_(vec4 v) {
    return vec4(${i}_(v.x), ${i}_(v.y), ${i}_(v.z), ${i}_(v.w));
  }
  `,name:i,type:0}}function jh(){return mt("log")}function Yh(){let e="neg";return{body:`
  float ${e}_(float a) {
    return -a;
  }
  vec4 ${e}_(vec4 v) {
    return -v;
  }
  `,name:e,type:0}}function Xh(){let e="not";return{body:`
  float ${e}_(float a) {
    return float( ! bool(a) );
  }
  bool ${e}_(bool a) {
    return !a;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${e}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:e,type:0}}function Kh(){return mt("sin")}function wi(){let e="relu";return{body:`
  float ${e}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${e}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:e,type:0}}function vi(){let e="sigmoid";return{body:`
  float ${e}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${e}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:e,type:0}}function Jh(){return mt("sqrt")}function Zh(){return mt("tan")}function Qh(){let e="tanh";return{body:`
  float ${e}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${e}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:e,type:0}}function mt(e){return{body:`
  float ${e}_(float a) {
    return ${e}(a);
  }
  vec4 ${e}_(vec4 v) {
    return ${e}(v);
  }
  `,name:e,type:0}}var em$1,Ee,Al$1,Pl$1,El$1,Dl$1,_i,Ll$1,Cl$1,tm$1,Fl$1,$l$1,kl$1,Bl$1,Nl$1,Rl$1,Oi$1,Ml$1,Gl$1,Ul$1,zl$1,Vl$1,Wl$1,Hl$1,ql$1,jl$1,Yl$1,Xl$1,Ii=L(()=>{Ue$1(),fe$1(),Wt$1(),we$1(),ae(),em$1=(e,i,a,o)=>{let c=e.session.pack?2:0,s=H(e.session.backend.glContext.version);return{...i,output:{dims:a.dims,type:a.type,textureType:c},shaderSource:`
     ${o.body}
     void main() {
       vec4 v = ${s.texture2D}(A, TexCoords);
       v = ${o.name}_(v);
       ${s.output} = v;
     }
     `,hasMain:!0}},Ee=(e,i,a,o)=>{let c=e.session.pack?2:0,s={name:a.name,inputTypes:[c],inputNames:["A"],cacheHint:o};return{...s,get:()=>em$1(e,s,i,a)}},Al$1=(e,i)=>[e.run(Ee(e,i[0],Bh()),i)],Pl$1=(e,i)=>[e.run(Ee(e,i[0],Nh()),i)],El$1=(e,i)=>[e.run(Ee(e,i[0],Rh()),i)],Dl$1=(e,i)=>[e.run(Ee(e,i[0],Mh()),i)],_i=(e,i,a)=>[e.run(Ee(e,i[0],xi(a.min,a.max),a.cacheKey),i)],Ll$1=e=>Q({min:e.attributes.getFloat("min",br),max:e.attributes.getFloat("max",gr$1)}),Cl$1=(e,i)=>{let a=tm$1(e,i);return _i(e,[i[0]],a)},tm$1=(e,i)=>{if(i.length>=3&&(!e.session.isInitializer(i[1].dataId)||!e.session.isInitializer(i[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let a=i.length>=3?i[1].numberData[0]:br,o=i.length>=3?i[2].numberData[0]:gr$1;return Q({min:a,max:o})},Fl$1=(e,i)=>[e.run(Ee(e,i[0],Gh()),i)],$l$1=(e,i)=>[e.run(Ee(e,i[0],Uh()),i)],kl$1=(e,i,a)=>[e.run(Ee(e,i[0],zh(a.alpha),a.cacheKey),i)],Bl$1=e=>Q({alpha:e.attributes.getFloat("alpha",1)}),Nl$1=(e,i)=>[e.run(Ee(e,i[0],Vh()),i)],Rl$1=(e,i)=>[e.run(Ee(e,i[0],Wh()),i)],Oi$1=(e,i)=>[e.run(Ee(e,i[0],Hh()),i)],Ml$1=(e,i,a)=>[e.run(Ee(e,i[0],qh(a.alpha),a.cacheKey),i)],Gl$1=e=>Q({alpha:e.attributes.getFloat("alpha",.01)}),Ul$1=(e,i)=>[e.run(Ee(e,i[0],jh()),i)],zl$1=(e,i)=>[e.run(Ee(e,i[0],Yh()),i)],Vl$1=(e,i)=>[e.run(Ee(e,i[0],Xh()),i)],Wl$1=(e,i)=>[e.run(Ee(e,i[0],wi()),i)],Hl$1=(e,i)=>[e.run(Ee(e,i[0],vi()),i)],ql$1=(e,i)=>[e.run(Ee(e,i[0],Kh()),i)],jl$1=(e,i)=>[e.run(Ee(e,i[0],Jh()),i)],Yl$1=(e,i)=>[e.run(Ee(e,i[0],Zh()),i)],Xl$1=(e,i)=>[e.run(Ee(e,i[0],Qh()),i)]});function Rt(e){let i;switch(e.activation){case"Relu":i=wi();break;case"Sigmoid":i=vi();break;case"Clip":i=xi(e.clipMin,e.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let a=i.name,o=i.body,c=`value = ${a}_(value);`;return{activationFunction:o,applyActivation:c}}var Nr,xr=L(()=>{fe$1(),Ii(),Nr=e=>{let i=e.getString("activation","");if(i==="Clip"){let[a,o]=e.getFloats("activation_params",[br,gr$1]);return{activation:i,clipMax:o,clipMin:a,activationCacheKey:`${i}:${a},${o}`}}return{activation:i,activationCacheKey:i}}}),nm$1,om$1,Kl$1,Jl$1=L(()=>{lt$1(),we$1(),ae(),to$2(),xr(),nm$1=(e,i)=>({name:"GroupedConv",inputNames:e?["X","W","Bias"]:["X","W"],inputTypes:e?[0,0,0]:[0,0],cacheHint:i}),om$1=(e,i,a,o)=>{let c=i.length>2?"value += getBias(output_channel);":"",s=i[0].dims.slice(),d=i[1].dims.slice(),et=d[0]/o.group;ce.verbose("GroupedConv",`autpPad:${o.autoPad}, dilations:${o.dilations}, group:${o.group}, kernelShape:${o.kernelShape}, pads:${o.pads}, strides:${o.strides}`);let $t=Rr$1(s,d,o.dilations,o.pads,o.strides),h=H(e.session.backend.glContext.version),{activationFunction:b,applyActivation:g}=Rt(o),jt=`
  const ivec2 strides = ivec2(${o.strides[0]}, ${o.strides[1]});
  const ivec2 pads = ivec2(${o.pads[0]}, ${o.pads[1]});
  ${b}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${et};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${d[1]}; wInChannel++) {
      int input_channel = group_id * ${d[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${d[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${o.dilations[0]};

        if (xHeight < 0 || xHeight >= ${s[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${d[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${o.dilations[1]};
          if (xWidth < 0 || xWidth >= ${s[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${c}
    ${g}
    ${h.output} = vec4(value, .0, .0, .0);
  }
`;return{...a,output:{dims:$t,type:i[0].type,textureType:0},shaderSource:jt,hasMain:!0}},Kl$1=(e,i,a)=>{let o=nm$1(i.length>2,a.cacheKey);return{...o,get:()=>om$1(e,i,o,a)}}}),im$1,am$1,Zl$1,Ql$1=L(()=>{we$1(),ae(),Tr(),im$1=e=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:e}),am$1=(e,i,a,o,c,s)=>{let d=a.dims,et=o.dims,$t=2,h=3,b=c.length,g=[et[1]*et[2]*et[3],c[2]*c[3]],jt=et[2]*et[3],Ht=Nt(),Kt=H(e.session.backend.glContext.version),or="";for(let Lr=0;Lr<=1;Lr++)for(let ir=0;ir<=1;ir++)or+=`
            blockIndex = rc.x + ${ir};
            pos = rc.y + ${Lr};

            if(blockIndex < ${g[1]} && pos < ${g[0]}) {
              offsetY = int(blockIndex / (${c[b-1]})) * ${s.strides[0]} -
                ${s.pads[0]};
              d0 = offsetY + ${s.dilations[0]} * (imod(pos, ${jt}) / ${et[2]});

              if(d0 < ${d[$t]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${c[b-1]}) * ${s.strides[1]} -
                  ${s.pads[1]};
                d1 = offsetX + ${s.dilations[1]} * imod(imod(pos, ${jt}), ${et[2]});

                if(d1 < ${d[h]} && d1 >= 0) {

                  ch = int(float(pos)/ ${jt}.);
                    innerDims = vec2(d0, d1);
                    result[${Lr*2+ir}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let jr=`
      ${Ht}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${or}
          ${Kt.output} = result;
      }
            `;return{...i,output:{dims:g,type:a.type,textureType:2},shaderSource:jr,hasMain:!0}},Zl$1=(e,i,a,o,c)=>{let s=im$1(c.cacheKey);return{...s,get:()=>am$1(e,s,i,a,o,c)}}});function um$1(e,i,a){let o=i[0].dims,c=i[1].dims,s=Ze$1.calcShape(o,c,!0);if(!s)throw new Error("Can't use matmul on the given tensors");let d=Qe(s.length),et=Dt$1(),{activationFunction:$t,applyActivation:h}=Rt(a),b=i.length>2,g=b?"value += getBiasForMatmul();":"",jt=b?`${Ai(d,et,i[2].dims,s,!1)}`:"",Ht=s.length,Kt=o.length,or=c.length,jr=o[o.length-1],Lr=`
    ${$t}
    ${jt}
    float process(int indices[${Ht}]) {
        int a[${Kt}];
        int b[${or}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${jr}; ++k) {
            a[${Kt-1}] = k;
            b[${or-2}] = k;
            value += _A(a) * _B(b);
        }
        ${g}
        ${h}
        return value;
    }`;return{...e,output:{dims:s,type:i[0].type,textureType:0},shaderSource:Lr}}function Si(e,i){let a=sm$1(e.length>2,i.activationCacheKey);return{...a,get:()=>um$1(a,e,i)}}function Ai(e,i,a,o,c){let s="",d=a.length,et=o.length,$t=et-d;et<2&&d>0?s="coords":s=a.map((jt,Ht)=>`coords.${i[Ht+$t]}`).join(", ");let h=Ze$1.getBroadcastDims(a,o).map(jt=>`coords.${i[jt+$t]} = 0;`).join(`
`),b=U$1.size(a)===1,g="vec4(outputValue.xx, outputValue.yy)";return b&&(g="vec4(outputValue.x)"),c?`
vec4 getBiasForMatmul() {
  ${e} coords = getOutputCoords();
  ${h}
  vec4 outputValue = getBias(${s});
  return ${g};
}`:`
float getBiasForMatmul() {
  ${e} coords = getOutputCoords();
  ${h}
  return getBias(coords.x);
}`}var ef$1,tf$1,sm$1,lm$1,ro$1=L(()=>{fe$1(),ae(),Bt$1(),xr(),Pi$1(),ef$1=(e,i,a)=>(lm$1(i),e.session.pack?[e.run(no$1(e,i,a),i)]:[e.run(Si(i,a),i)]),tf$1=e=>Nr(e.attributes),sm$1=(e,i)=>({name:"MatMul",inputNames:e?["A","B","Bias"]:["A","B"],inputTypes:e?[0,0,0]:[0,0],cacheHint:i}),lm$1=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.");if(e[0].type!=="float32"&&e[0].type!=="float64"||e[1].type!=="float32"&&e[1].type!=="float64")throw new Error("inputs should be float type");if(e[0].type!==e[1].type)throw new Error("inputs types should match")}});function pm$1(e,i,a,o){let c=[],s=[],d=a[0].dims,et=a[1].dims,$t=d.length,h=et.length,b=o.length,g=b-$t,jt=b-h;c=d.map((ir,qr)=>`coords.${i[qr+g]}`),c[$t-1]="i*2",c.join(", "),s=et.map((ir,qr)=>`coords.${i[qr+jt]}`),s[h-2]="i*2",s.join(", ");let Ht=Ze$1.getBroadcastDims(d,o),Kt=Ze$1.getBroadcastDims(et,o),or=Ht.map(ir=>`coords.${i[ir+g]} = 0;`).join(`
`),jr=Kt.map(ir=>`coords.${i[ir+jt]} = 0;`).join(`
`),Lr=`int lastDim = coords.${i[b-1]};
  coords.${i[b-1]} = coords.${i[b-2]};
  coords.${i[b-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${e} coords = getOutputCoords();
  ${Lr}
  ${or}
  vec4 outputValue = getA(${c});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${e} coords = getOutputCoords();
  ${Lr}
  ${jr}
  vec4 outputValue = getB(${s});
  return outputValue;
}`}function dm$1(e,i){let a="";for(let o=0;o<i-2;o++)a+=`rc.${e[o]}, `;return a+=`rc.${e[i-2]}, i*2`,a}function hm$1(e,i){let a="";for(let o=0;o<i-2;o++)a+=`rc.${e[o]}, `;return a+=`i*2, rc.${e[i-1]}`,a}var fm$1,cm$1,no$1,Pi$1=L(()=>{fe$1(),we$1(),ae(),Bt$1(),xr(),ro$1(),fm$1=(e,i)=>({name:"MatMul (packed)",inputNames:e?["A","B","Bias"]:["A","B"],inputTypes:e?[2,2,2]:[2,2],cacheHint:i}),cm$1=(e,i,a,o)=>{let c=a.length>2,s=c?"value += getBiasForMatmul();":"",d=a[0].dims,et=a[1].dims,$t=Ze$1.calcShape(d,et,!0),h=!U$1.areEqual(a[0].dims,a[1].dims);if(!$t)throw new Error("Can't use matmul on the given tensors");let b=d[d.length-1],g=Math.ceil(b/2),jt=d.length,Ht=et.length,Kt=H(e.session.backend.glContext.version),or=Qe($t.length),jr=$t.length,Lr=Dt$1(),{activationFunction:ir,applyActivation:qr}=Rt(o),vn=c?`${Ai(or,Lr,a[2].dims,$t,!0)}`:"",xn=h?`${pm$1(or,Lr,a,$t)}`:"",No=h?"getAAtOutCoordsMatmul(i)":`getA(${dm$1(Lr,jt)})`,Ro=h?"getBAtOutCoordsMatmul(i)":`getB(${hm$1(Lr,Ht)})`,Xo=h?"":`${or} rc =
          getOutputCoords(); int lastDim = rc.${Lr[jr-1]}; rc.${Lr[jr-1]} =
          rc.${Lr[jr-2]}; rc.${Lr[jr-2]} = lastDim;
      `,o0=`
            ${xn}
            ${vn}
            ${ir}
            void main() {
              ${Xo}

              vec4 value = vec4(0);
              for (int i = 0; i < ${g}; i++) {
                vec4 a = ${No};
                vec4 b = ${Ro};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${s}
              ${qr}
              ${Kt.output} = value;
            }`;return{...i,output:{dims:$t,type:a[0].type,textureType:2},shaderSource:o0,hasMain:!0}},no$1=(e,i,a)=>{let o=fm$1(i.length>2,a.activationCacheKey);return{...o,get:()=>cm$1(e,o,i,a)}}}),rf$1,nf$1=L(()=>{to$2(),Ql$1(),Pi$1(),rf$1=(e,i,a)=>{let o=i[0].dims,c=i[1].dims,s=Rr$1(o,c,a.dilations,a.pads,a.strides),d=e.run(Zl$1(e,i[0],i[1],s,a),[i[0]]),et=e.reshapePacked(i[1],[c[0],c[1]*c[2]*c[3]]),$t=i.length===3?[et,d,i[2]]:[et,d],h=e.run(no$1(e,$t,a),$t);return e.reshapePacked(h,s)}}),mm$1,bm$1,of$1,Ei,Di$1=L(()=>{ae(),mm$1=e=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:e}),bm$1=(e,i,a,o,c,s)=>{let d=a.dims,et=o.dims,$t=c.length,h=Ei(d,et,c,4),b=`
        const int XC = ${d[1]};
        const int XH = ${d[2]};
        const int XW = ${d[3]};
        const int KH = ${s.kernelShape[0]};
        const int KW = ${s.kernelShape[1]};
        const int dilationH = ${s.dilations[0]};
        const int dilationW = ${s.dilations[1]};
        const int strideH = ${s.strides[0]};
        const int strideW = ${s.strides[1]};
        const int padH = ${s.pads[0]};
        const int padW = ${s.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${$t}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${d.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return{...i,output:{dims:h,type:a.type,textureType:4},shaderSource:b}},of$1=(e,i,a,o,c)=>{let s=mm$1(c.cacheKey);return{...s,get:()=>bm$1(e,s,i,a,o,c)}},Ei=(e,i,a,o=4)=>[a[0],a[2],a[3],Math.ceil(e[1]*i[2]*i[3]/o)]}),gm$1,ym$1,af$1,sf$1=L(()=>{fe$1(),we$1(),ae(),xr(),Di$1(),gm$1=(e,i)=>({name:"ConvDotProduct",inputNames:e?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:e?[0,4,0]:[0,4],cacheKey:i.activationCacheKey}),ym$1=(e,i,a,o,c)=>{let s=a[0].dims,d=a[1].dims,et=[d[0],Math.ceil(s[1]*d[2]*d[3]/4)],$t=Ei(s,d,o),[h,b]=e.calculateTextureWidthAndHeight(et,4),g=U$1.computeStrides($t),[jt,Ht]=e.calculateTextureWidthAndHeight($t,4),Kt=o.length,or=a.length<3?"0.0":"_B(b)",jr=Math.ceil(s[1]*d[2]*d[3]/4),{activationFunction:Lr,applyActivation:ir}=Rt(c),qr=H(e.session.backend.glContext.version),vn=`
${Lr}
float process(int indices[${Kt}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${g[0]} + im2col[1] * ${g[1]} + im2col[2] * ${g[2]};
  int kernelOffset = indices[1] * ${et[1]};
  float value = ${or};
  for (int i = 0; i < ${jr}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${jt}, ${Ht});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${h}, ${b});
    value += dot(${qr.texture2D}(Im2Col, im2colCoords), ${qr.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${ir}
  return value;
}`;return{...i,output:{dims:o,type:a[0].type,textureType:0},shaderSource:vn}},af$1=(e,i,a,o)=>{let c=gm$1(i.length>2,o);return{...c,get:()=>ym$1(e,c,i,a,o)}}}),Rr$1,Li$1,Tm$1,xm$1,wm$1,vm,Ci,_m$1,to$2=L(()=>{Ue$1(),fe$1(),Jl$1(),nf$1(),sf$1(),xr(),Di$1(),ro$1(),Rr$1=(e,i,a,o,c)=>{let s=e[0],d=e.slice(2),et=d.length,$t=i[0],h=i.slice(2).map((g,jt)=>g+(g-1)*(a[jt]-1)),b=d.map((g,jt)=>g+o[jt]+o[jt+et]).map((g,jt)=>Math.floor((g-h[jt]+c[jt])/c[jt]));return[s,$t].concat(...b)},Li$1=(e,i,a)=>(_m$1(i,a),Tm$1(e,i,a)),Tm$1=(e,i,a)=>{let o=vm(a,i),c=e.session.pack,s=o.kernelShape[0]===1&&o.kernelShape[1]===1;return o.group>1?[e.run(Kl$1(e,i,o),i)]:s&&c?[xm$1(e,i,o)]:c&&i[0].dims.length===4&&i[0].dims[0]===1&&!s?[rf$1(e,i,o)]:[wm$1(e,i,o)]},xm$1=(e,i,a)=>{let o=i[0].dims,c=i[1].dims,s=Rr$1(o,c,a.dilations,a.pads,a.strides),d=e.reshapeUnpacked(i[0],[o[1],o[2]*o[3]]),et=e.reshapeUnpacked(i[1],[c[0],c[1]]),$t=i.length>2?[et,d,i[2]]:[et,d],h=e.run(Si($t,a),$t);return e.reshapeUnpacked(h,s)},wm$1=(e,i,a)=>{let o=i[0].dims,c=i[1].dims,s=Rr$1(o,c,a.dilations,a.pads,a.strides),d=e.run(of$1(e,i[0],i[1],s,a),[i[0]]),et=i.length===3?[d,i[1],i[2]]:[d,i[1]];return e.run(af$1(e,i,s,a),et)},vm=(e,i)=>{let a=e.kernelShape.slice();if(e.kernelShape.length===0)for(let s=2;s<i[1].dims.length;++s)a.push(i[1].dims[s]);let o=e.pads.slice();mr$1.adjustPadsBasedOnAutoPad(i[0].dims,e.strides,e.dilations,a,o,e.autoPad);let c=Object.assign({},e);return Object.assign(c,{kernelShape:a,pads:o,cacheKey:e.cacheKey}),c},Ci=e=>{let i=e.attributes,a=Nr(i),o=i.getString("auto_pad","NOTSET"),c=i.getInts("dilations",[1,1]),s=i.getInt("group",1),d=i.getInts("kernel_shape",[]),et=i.getInts("pads",[0,0,0,0]),$t=i.getInts("strides",[1,1]);return Q({autoPad:o,dilations:c,group:s,kernelShape:d,pads:et,strides:$t,...a})},_m$1=(e,i)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4||e[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let a=e[0].dims[1],o=e[1].dims[1]*i.group;if(a!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let c=e[0].dims.length-2;if(i.dilations.length!==c)throw new Error(`dilations should be ${c}D`);if(i.strides.length!==c)throw new Error(`strides should be ${c}D`);if(i.pads.length!==c*2)throw new Error(`pads should be ${c*2}D`);if(i.kernelShape.length!==0&&i.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(e[0].type!=="float32"||e[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(e.length===3&&e[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}}),Om$1,Im$1,Sm$1,uf$1,Am$1,Pm$1,Em$1,Dm$1,Lm$1,Cm$1,lf$1,Fm$1,ff$1=L(()=>{Ue$1(),we$1(),ae(),xr(),Om$1=(e,i,a,o,c,s)=>(e-1)*i+a+(o-1)*c+1-s,Im$1=(e,i,a,o,c)=>{let s=Math.floor(e/2);i==="SAME_UPPER"?(a[o]=s,a[c]=e-s):i==="SAME_LOWER"&&(a[o]=e-s,a[c]=s)},Sm$1=(e,i,a,o,c,s,d,et)=>{let $t=e.length-2,h=et.length===0;for(let b=0;b<$t;++b){let g=h?e[b+2]*s[b]:et[b],jt=Om$1(e[b+2],s[b],c[b],i[b],a[b],g);Im$1(jt,o,c,b,b+$t),h&&et.push(s[b]*(e[b+2]-1)+d[b]+(i[b]-1)*a[b]+1-c[b]-c[b+$t])}},uf$1=(e,i,a)=>(Fm$1(i,a),Am$1(e,i,a)),Am$1=(e,i,a)=>{let o=Cm$1(a,i);return[Lm$1(e,i,o)]},Pm$1=(e,i)=>({name:"ConvTranspose",inputNames:e?["X","W","B"]:["X","W"],inputTypes:e?[0,0,0]:[0,0],cacheHint:i}),Em$1=(e,i,a,o)=>{let c=i.length>2?"getB(output_channel)":"0.0",s=i[0].dims,d=i[1].dims,et=d[1],$t=d[0]/o.group,h=[i[0].dims[0],i[1].dims[1]*o.group,...o.outputShape],b=H(e.session.backend.glContext.version),{activationFunction:g,applyActivation:jt}=Rt(o),Ht=`
  const ivec2 strides = ivec2(${o.strides[0]}, ${o.strides[1]});
  const ivec2 pads = ivec2(${o.pads[0]}, ${o.pads[1]});
  ${g}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${et};
    int wOutChannel = output_channel - group_id * ${et};

    float value = ${c};
    for (int inChannelOffset = 0; inChannelOffset < ${$t}; inChannelOffset++) {
      int input_channel = group_id * ${$t} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${d[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${d[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${o.dilations[0]}, wHOff * ${o.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${s[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${s[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${jt}
    ${b.output} = vec4(value, .0, .0, .0);
  }
`;return{...a,output:{dims:h,type:i[0].type,textureType:0},shaderSource:Ht,hasMain:!0}},Dm$1=(e,i,a)=>{let o=Pm$1(i.length>2,a.cacheKey);return{...o,get:()=>Em$1(e,i,o,a)}},Lm$1=(e,i,a)=>e.run(Dm$1(e,i,a),i),Cm$1=(e,i)=>{let a=e.kernelShape.slice();if(e.kernelShape.length===0)for(let et=2;et<i[1].dims.length;++et)a.push(i[1].dims[et]);let o=e.pads.slice(),c=e.outputShape.slice(),s=i[0].dims;Sm$1(s,a,e.dilations,e.autoPad,o,e.strides,e.outputPadding,c);let d=Object.assign({},e);return Object.assign(d,{kernelShape:a,pads:o,outputShape:c,cacheKey:e.cacheKey}),d},lf$1=e=>{let i=e.attributes,a=Nr(i),o=i.getString("auto_pad","NOTSET"),c=i.getInts("dilations",[1,1]),s=i.getInt("group",1),d=i.getInts("kernel_shape",[]),et=i.getInts("output_padding",[0,0]),$t=i.getInts("output_shape",[]),h=i.getInts("pads",[0,0,0,0]),b=i.getInts("strides",[1,1]);return Q({autoPad:o,dilations:c,group:s,kernelShape:d,outputPadding:et,outputShape:$t,pads:h,strides:b,...a})},Fm$1=(e,i)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4||e[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let a=e[0].dims[1],o=e[1].dims[0];if(a!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let c=e[1].dims[1]*i.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==c))throw new Error("invalid bias");let s=e[0].dims.length-2;if(i.dilations.length!==s)throw new Error(`dilations should be ${s}D`);if(i.strides.length!==s)throw new Error(`strides should be ${s}D`);if(i.pads.length!==s*2)throw new Error(`pads should be ${s*2}D`);if(i.outputPadding.length!==s)throw new Error(`output_padding should be ${s}D`);if(i.kernelShape.length!==0&&i.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(i.outputShape.length!==0&&i.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape");if(e[0].type!=="float32"||e[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(e.length===3&&e[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}}),cf,wr,pf$1,$m$1,df,km$1,Bm$1,Nm$1,oo$1=L(()=>{Ue$1(),fe$1(),ae(),cf={name:"Transpose",inputNames:["A"],inputTypes:[0]},wr=(e,i,a)=>(Nm$1(i),[e.run({...cf,cacheHint:a.cacheKey,get:()=>$m$1(e,i[0],a.perm)},i)]),pf$1=e=>Q({perm:e.attributes.getInts("perm",[])}),$m$1=(e,i,a)=>{let o=i.dims;a=df(o,a);let c=km$1(o,a),s=o.length,d=`
      ${Bm$1("perm",a,s)}
      float process(int indices[${s}]) {
        int a[${s}];
        perm(a, indices);
        return _A(a);
      }`;return{...cf,output:{dims:c,type:i.type,textureType:0},shaderSource:d}},df=(e,i)=>(i&&i.length!==e.length&&(i=[...e.keys()].reverse()),i),km$1=(e,i)=>(i=df(e,i),U$1.sortBasedOnPerm(e,i)),Bm$1=(e,i,a)=>{let o=[];o.push(`void ${e}(out int a[${a}], int src[${a}]) {`);for(let c=0;c<a;++c)o.push(`	a[${i[c]}]=src[${c}];`);return o.push("	}"),o.join(`
`)},Nm$1=e=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("input should be float tensor")}}),hf$1,mf$1,Rm$1,bf=L(()=>{oo$1(),hf$1=(e,i,a)=>{Rm$1(i);let o=a.blocksize,c=o*o,s=a.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],d=a.mode==="DCR"?[i[0].dims[0],o,o,i[0].dims[1]/c,i[0].dims[2],i[0].dims[3]]:[i[0].dims[0],i[0].dims[1]/c,o,o,i[0].dims[2],i[0].dims[3]],et=e.reshapeUnpacked(i[0],d),$t={perm:s,cacheKey:`${s}`},[h]=wr(e,[et],$t),b=[i[0].dims[0],i[0].dims[1]/c,i[0].dims[2]*o,i[0].dims[3]*o];return[e.reshapeUnpacked(h,b)]},mf$1=e=>{let i=e.attributes.getInt("blocksize");if(i<1)throw new Error(`blocksize must be >= 1, but got : ${i} for DepthToSpace`);let a=e.attributes.getString("mode","DCR");if(a!=="DCR"&&a!=="CRD")throw new Error(`unrecognized mode: ${a} for DepthToSpace`);return{mode:a,blocksize:i}},Rm$1=e=>{if(e.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${e.length}`);if(e[0].type==="string"||e[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),gf,yf,Mm$1,Tf=L(()=>{fe$1(),gf=(e,i,a)=>{Mm$1(i,a);let o=U$1.flattenShape(i[0].dims,a);return[e.reshapeUnpacked(i[0],o)]},yf=e=>e.attributes.getInt("axis",1),Mm$1=(e,i)=>{if(!e||e.length!==1)throw new Error("Flatten requires 1 input.");let a=e[0].dims.length;if(a===0)throw new Error("scalar tensor is not supported.");if(i<-a||i>a)throw new Error("Invalid axis");if(e[0].type==="string")throw new Error("string tensor is not supported.")}}),Qt,pn=L(()=>{Qt=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),xf,wf,Gm$1,Um$1,zm$1,Vm$1,vf=L(()=>{Ue$1(),pn(),fe$1(),ae(),xf=(e,i,a)=>(Vm$1(i,a.axis),[e.run(zm$1(e,i,a),i)]),wf=e=>Q({axis:e.attributes.getInt("axis",0)}),Gm$1={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Um$1=(e,i,a,o)=>{let c=a[0].dims.slice(),s=a[1].dims.slice(),d=new Array(c.length+s.length-1);o=U$1.normalizeAxis(o,c.length);let et=[];for(let jt=0;jt<d.length;jt++)jt<o?(d[jt]=c[jt],et.push(`inputIdx[${jt}] = outputIdx[${jt}];`)):jt<o+s.length?(d[jt]=s[jt-o],et.push(`indexDataIdx[${jt-o}] = outputIdx[${jt}];`)):(d[jt]=c[jt-s.length+1],et.push(`inputIdx[${jt-s.length+1}] = outputIdx[${jt}];`));let $t=d.length||1,h=c.length,b=s.length||1,g=`
      float process(int outputIdx[${$t}]) {
        int inputIdx[${h}];
        int indexDataIdx[${b}];
        indexDataIdx[0] = 0;
        ${et.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${o}] = idx < 0 ? idx + ${c[o]} : idx;
        return _A(inputIdx);
      }`;return{...i,output:{dims:d,type:a[0].type,textureType:0},shaderSource:g}},zm$1=(e,i,a)=>{let o={...Gm$1,cacheHint:a.cacheKey};return{...o,get:()=>Um$1(e,o,i,a.axis)}},Vm$1=(e,i)=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.");let a=e[0].dims.length;if(a<1)throw new Error("Invalid input shape.");if(i<-a||i>a-1)throw new Error("Invalid axis.");if(Qt.indexOf(e[0].type)===-1)throw new Error("Invaid input type.");if(e[1].type!=="int32"&&e[1].type!=="int16")throw new Error("Invaid input type.")}}),Fi$1,_f,Of,If,Wm$1,Hm$1,qm$1,Sf=L(()=>{Ue$1(),fe$1(),ae(),Fi$1=(e,i,a)=>(qm$1(i,a),[e.run(Wm$1(i,a),i)]),_f=(e,i)=>{let a=e.attributes.getInt("transA",0)!==0,o=e.attributes.getInt("transB",0)!==0,c=e.attributes.getFloat("alpha",1),s=e.attributes.getFloat("beta",1);return Q({transA:a,transB:o,alpha:c,beta:s,isOptionalC:i})},Of=e=>_f(e,!1),If=e=>_f(e,!0),Wm$1=(e,i)=>{let a={name:"Gemm",inputNames:e.length===3?["A","B","C"]:["A","B"],inputTypes:e.length===3?[0,0,0]:[0,0],key:i.cacheKey};return{...a,get:()=>Hm$1(a,e,i)}},Hm$1=(e,i,a)=>{let o=i[0].dims.slice(),c=i[1].dims.slice(),[s,d]=jn$1.getShapeOfGemmResult(o,a.transA,c,a.transB,i.length===3?i[2].dims:void 0),et=[s,d];if(!et)throw new Error("Can't use gemm on the given tensors");let $t=o[o.length-1],h="";a.transA&&($t=o[0]),a.transA&&a.transB?h="value += _A_T(a) * _B_T(b);":a.transA&&!a.transB?h="value += _A_T(a) * _B(b);":!a.transA&&a.transB?h="value += _A(a) * _B_T(b);":!a.transA&&!a.transB&&(h="value += _A(a) * _B(b);");let b=et.length,g=i.length===3?`int c[${i[2].dims.length}];`:"",jt=i.length===3?"bcastIndices_C(indices, c);":"",Ht=i.length===3?"value += beta * _C(c);":"",Kt=`
      float process(int indices[${b}]) {
          int a[${b}];
          int b[${b}];
          ${g}

          copyVec(indices, a);
          copyVec(indices, b);
          ${jt}

          float value = 0.0;
          for (int k=0; k<${$t}; ++k) {
              a[${b-1}] = k;
              b[${b-2}] = k;
              ${h}
          }

          value = value * alpha;
          ${Ht}
          return value;
      }`;return{...e,output:{dims:et,type:i[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:a.alpha},{name:"beta",type:"float",data:a.beta}],shaderSource:Kt}},qm$1=(e,i)=>{if(!e)throw new Error("Input is missing");if(i.isOptionalC&&(e.length<2||e.length>3))throw new Error("Invaid input shape.");if(!i.isOptionalC&&e.length!==3)throw new Error("Gemm requires 3 inputs");if(e.length===3&&e[2].dims.length!==1&&e[2].dims.length!==2)throw new Error("Invalid input shape of C");if(e[0].type!=="float32"&&e[0].type!=="float64"||e[1].type!=="float32"&&e[1].type!=="float64"||e.length===3&&e[2].type!=="float32"&&e[2].type!=="float64")throw new Error("Invalid input type.");if(e[0].type!==e[1].type||e.length===3&&e[0].type!==e[2].type)throw new Error("Input types are mismatched")}}),Af,Pf,jm$1,Ym$1,Xm$1,Km$1,Jm$1,Ef=L(()=>{Ue$1(),ae(),Af=(e,i,a)=>(Jm$1(i),[e.run(Xm$1(e,i,a),i)]),Pf=e=>{let i=e.attributes.getFloat("scale"),a=e.attributes.getFloats("bias");return Q({scale:i,bias:a})},jm$1={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},Ym$1=(e,i,a,o)=>{let c=a[0].dims.slice(),s=c.length,d=`
      ${Km$1(o.bias.length)}
      float process(int indices[${s}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{...i,output:{dims:c,type:a[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:o.bias.length,data:o.bias},{name:"scale",type:"float",data:o.scale}],shaderSource:d}},Xm$1=(e,i,a)=>{let o={...jm$1,cacheHint:a.cacheKey};return{...o,get:()=>Ym$1(e,o,i,a)}},Km$1=e=>{let i=[`float getBias(float bias[${e}], int channel) {`];for(let a=0;a<e;++a)a===0?i.push(`	if (channel == ${a}) { return bias[${a}]; }`):a===e-1?i.push(`	else { return bias[${a}]; }`):i.push(`	else if (channel == ${a}) { return bias[${a}]; }`);return i.push("	}"),i.join(`
`)},Jm$1=e=>{if(!e||e.length!==1)throw new Error("ImageScaler requires 1 input.");if(e[0].dims.length!==4)throw new Error("Invalid input shape.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type.")}}),Lf,Cf,Df,Zm$1,Qm$1,eb,tb,rb,nb,Ff=L(()=>{we$1(),ae(),Lf=(e,i,a)=>{nb(i);let o=e.run(Qm$1(i[0]),i);return[e.run(rb(e,i[0],a,o.dims),[i[0],o,i[1],i[2]])]},Cf=e=>e.attributes.getFloat("epsilon",1e-5),Df={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},Zm$1=(e,i)=>{let a=i.dims.slice(),o=a[1],c=a[2]*a[3],s=[a[0],o],d=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${a[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${a[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${c});
        temp = 0.0;
        for(int a2=0; a2<${a[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${a[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${c});

        return v;
      }`;return{...e,output:{dims:s,type:i.type,textureType:4},shaderSource:d}},Qm$1=e=>({...Df,get:()=>Zm$1(Df,e)}),eb={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},tb=(e,i,a,o,c)=>{let s=H(e.session.backend.glContext.version),[d,et]=e.calculateTextureWidthAndHeight(c,4),[$t,h]=[d/4,et],b=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${$t}, ${h});
        return ${s.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return{...i,output:{dims:a.dims,type:a.type,textureType:0},variables:[{name:"epsilon",type:"float",data:o}],shaderSource:b}},rb=(e,i,a,o)=>{let c={...eb,cacheHint:`${a}`};return{...c,get:()=>tb(e,c,i,a,o)}},nb=e=>{if(!e||e.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let i=e[0],a=e[1],o=e[2];if(i.dims.length<3||a.dims.length!==1||o.dims.length!==1)throw new Error("Invalid input shape.");if(a.dims[0]!==i.dims[1]||o.dims[0]!==i.dims[1])throw new Error("Input shapes are mismatched.");if(i.type!=="float32"&&i.type!=="float64"||a.type!=="float32"&&a.type!=="float64"||o.type!=="float32"&&o.type!=="float64")throw new Error("Invalid input type.");if(e[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function ob(e,i){let a=e[0].dims[1],o=e[0].dims.length,c=-Math.floor((i.size-1)/2),s=Math.ceil((i.size-1)/2),d=`float(${i.alpha}) / float(${i.size})`,et=`float(${i.bias})`,$t=`float(${i.beta})`,h=`
    float process(int indices[${o}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${c}; i <= ${s}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${a}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${et} + ${d} * square_sum, ${$t});
    }`;return{...Bf,cacheHint:i.cacheKey,output:{dims:e[0].dims,type:e[0].type,textureType:0},shaderSource:h}}function ib(e,i){return{...Bf,cacheHint:i.cacheKey,get:()=>ob(e,i)}}var $f,kf,Bf,ab,Nf=L(()=>{Ue$1(),ae(),$f=(e,i,a)=>(ab(i),[e.run(ib(i,a),i)]),kf=e=>{let i=e.attributes.getFloat("alpha",1e-4),a=e.attributes.getFloat("beta",.75),o=e.attributes.getFloat("bias",1),c=e.attributes.getInt("size");return Q({alpha:i,beta:a,bias:o,size:c})},Bf={name:"LRN",inputNames:["X"],inputTypes:[0]},ab=e=>{if(!e||e.length!==1)throw new Error("LRN requires 1 input.");if(e[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(e[0].type!=="float32")throw new Error("input should be float type")}}),sb,$i,Rf,Mf,Gf,ub,lb,fb,cb,pb,db,hb,mb,Uf=L(()=>{Ue$1(),fe$1(),we$1(),ae(),sb={name:"Pad",inputNames:["A"],inputTypes:[0]},$i=(e,i,a)=>(fb(i),[e.run({...sb,cacheHint:a.cacheKey,get:()=>lb(e,i[0],a)},i)]),Rf=e=>{let i=e.attributes.getString("mode","constant"),a=e.attributes.getFloat("value",0),o=e.attributes.getInts("pads");return Q({mode:i,value:a,pads:o})},Mf=(e,i,a)=>{cb(i);let o=ub(e,i,a);return $i(e,[i[0]],o)},Gf=e=>e.attributes.getString("mode","constant"),ub=(e,i,a)=>{if(!e.session.isInitializer(i[1].dataId)||i.length>=3&&!e.session.isInitializer(i[2].dataId))throw new Error("dynamic pad attributes are not allowed");let o=Array.from(i[1].integerData),c=i.length>=3?i[2].floatData[0]:0;return Q({mode:a,pads:o,value:c})},lb=(e,i,a)=>{let o=U$1.padShape(i.dims.slice(),a.pads),c=o.length,s=`
      ${pb(e,i,a)}
      float process(int[${c}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:o,type:i.type,textureType:0},shaderSource:s}},fb=e=>{if(!e||e.length!==1)throw new Error("Pad requires 1 input");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type.")},cb=e=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(e[1].type!=="int32")throw new Error("Invalid input type.");if(e.length>=3&&e[2].type==="string")throw new Error("Invalid input type.")},pb=(e,i,a)=>{let o=H(e.session.backend.glContext.version),[c,s]=e.calculateTextureWidthAndHeight(i.dims,0),d=U$1.computeStrides(i.dims);switch(a.mode){case"constant":return db(o,i.dims,d,c,s,a.pads,a.value);case"reflect":return hb(o,i.dims,d,c,s,a.pads);case"edge":return mb(o,i.dims,d,c,s,a.pads);default:throw new Error("Invalid mode")}},db=(e,i,a,o,c,s,d)=>{let et=i.length,$t="";for(let h=et-1;h>=0;--h)$t+=`
        k = m[${h}] - ${s[h]};
        if (k < 0)  return constant;
        if (k >= ${i[h]}) return constant;
        offset += k * ${a[h]};
        `;return`
      float padA(int m[${et}]) {
        const float constant = float(${d});
        int offset = 0;
        int k = 0;
        ${$t}
        vec2 coords = offsetToCoords(offset, ${o}, ${c});
        float value = getColorAsFloat(${e.texture2D}(A, coords));
        return value;
      }
      `},hb=(e,i,a,o,c,s)=>{let d=i.length,et="";for(let $t=d-1;$t>=0;--$t)et+=`
        k = m[${$t}] - ${s[$t]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(i[$t]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${i[$t]}) { k = _2n_1 - k; }
        }
        offset += k * ${a[$t]};
        `;return`
      float padA(int m[${d}]) {
        int offset = 0;
        int k = 0;
        ${et}
        vec2 coords = offsetToCoords(offset, ${o}, ${c});
        float value = getColorAsFloat(${e.texture2D}(A, coords));
        return value;
      }
      `},mb=(e,i,a,o,c,s)=>{let d=i.length,et="";for(let $t=d-1;$t>=0;--$t)et+=`
        k = m[${$t}] - ${s[$t]};
        if (k < 0)  k = 0;
        if (k >= ${i[$t]}) k = ${i[$t]-1};
        offset += k * ${a[$t]};
      `;return`
      float padA(int m[${d}]) {
        int offset = 0;
        int k = 0;
        ${et}
        vec2 coords = offsetToCoords(offset, ${o}, ${c});
        float value = getColorAsFloat(${e.texture2D}(A, coords));
        return value;
      }
      `}}),Vf,Wf,Hf,qf,jf,Yf,Xf,Kf,Jf,bb,zf,Zf,ao$1,Qf,io$1,gb,ec=L(()=>{Ue$1(),fe$1(),ae(),Vf=(e,i,a)=>{ao$1(i);let o={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:a.cacheKey};return[e.run({...o,get:()=>Hf(i,o,!1,a)},i)]},Wf=e=>{let i=e.attributes.getString("auto_pad","NOTSET"),a=e.attributes.getInt("ceil_mode",0),o=e.attributes.getInt("count_include_pad",0)!==0,c=e.attributes.getInts("kernel_shape"),s=e.attributes.getInts("strides",[]),d=e.attributes.getInts("pads",[]);if(a!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return Q({autoPad:i,ceilMode:a,countIncludePad:o,kernelShape:c,strides:s,pads:d})},Hf=(e,i,a,o)=>{let[c,s]=Jf(e,o,a),d=U$1.size(c.kernelShape),et="value += _X(x);",$t="";c.countIncludePad?$t+=`value /= float(${d});`:$t+=`value /= float(${d} - pad);`;let h=`
        ${Qf(e[0].dims,c,et,$t,"0.0")}
      `;return{...i,output:{dims:s,type:e[0].type,textureType:0},shaderSource:h}},qf=(e,i,a)=>{ao$1(i);let o={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${a.countIncludePad}`};return[e.run({...o,get:()=>Hf(i,o,!0,a)},i)]},jf=e=>{let i=e.attributes.getInt("count_include_pad",0)!==0;return Q({autoPad:"",ceilMode:0,countIncludePad:i,kernelShape:[],strides:[],pads:[]})},Yf=(e,i,a)=>{ao$1(i);let o={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:a.cacheKey};return[e.run({...o,get:()=>Kf(i,o,!1,a)},i)]},Xf=e=>{let i=e.attributes.getString("auto_pad","NOTSET"),a=e.attributes.getInt("ceil_mode",0),o=e.attributes.getInts("kernel_shape"),c=e.attributes.getInts("strides",[]),s=e.attributes.getInts("pads",[]),d=e.attributes.getInt("storage_order",0),et=e.attributes.getInts("dilations",[]);if(d!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(a!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return Q({autoPad:i,ceilMode:a,countIncludePad:!1,kernelShape:o,strides:c,pads:s,storageOrder:d,dilations:et})},Kf=(e,i,a,o)=>{let[c,s]=Jf(e,o,a),d=`
      value = max(_X(x), value);
    `,et="",$t=`
      ${Qf(e[0].dims,c,d,et,"-1e5")}
    `;return{...i,output:{dims:s,type:e[0].type,textureType:0},shaderSource:$t}},Jf=(e,i,a)=>{let o=e[0].dims.slice(),c=Object.hasOwnProperty.call(i,"dilations"),s=i.kernelShape.slice(),d=i.strides.slice(),et=c?i.dilations.slice():[],$t=i.pads.slice();mr$1.adjustPoolAttributes(a,o,s,d,et,$t);let h=mr$1.computePoolOutputShape(a,o,d,et,s,$t,i.autoPad),b=Object.assign({},i);return c?Object.assign(b,{kernelShape:s,strides:d,pads:$t,dilations:et,cacheKey:i.cacheKey}):Object.assign(b,{kernelShape:s,strides:d,pads:$t,cacheKey:i.cacheKey}),[b,h]},bb={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},zf={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},Zf=(e,i)=>(ao$1(i),[e.run({...zf,get:()=>Kf(i,zf,!0,bb)},i)]),ao$1=e=>{if(!e||e.length!==1)throw new Error("Pool ops requires 1 input.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type.")},Qf=(e,i,a,o,c)=>{let s=e.length;if(i.kernelShape.length<=2){let d=i.kernelShape[i.kernelShape.length-1],et=i.strides[i.strides.length-1],$t=i.pads[i.pads.length/2-1],h=i.pads[i.pads.length-1],b=e[s-1],g="",jt="",Ht="";if($t+h!==0?g=`
          for (int i = 0; i < ${d}; i++) {
            x[${s} - 1] = indices[${s} - 1] * ${et} - ${$t} + i;
            if (x[${s} - 1] < 0 || x[${s} - 1] >= ${b}) {
              pad++;
              continue;
            }
            ${a}
          }`:g=`
          for (int i = 0; i < ${d}; i++) {
            x[${s} - 1] = indices[${s} - 1] * ${et} - ${$t} + i;
            ${a}
          }`,i.kernelShape.length===2){let Kt=i.kernelShape[i.kernelShape.length-2],or=i.strides[i.strides.length-2],jr=i.pads[i.pads.length/2-2],Lr=i.pads[i.pads.length-2],ir=e[s-2];jr+Lr!==0?jt=`
            for (int j = 0; j < ${Kt}; j++) {
              x[${s} - 2] = indices[${s} - 2] * ${or} - ${jr} + j;
              if (x[${s} - 2] < 0 || x[${s} - 2] >= ${ir}) {
                pad+= ${d};
                continue;
              }
          `:jt=`
            for (int j = 0; j < ${Kt}; j++) {
              x[${s} - 2] = indices[${s} - 2] * ${or} - ${jr} + j;
            `,Ht=`
          }
        `}return`
        float process(int indices[${s}]) {
          int x[${s}];
          copyVec(indices, x);

          float value = ${c};
          int pad = 0;
          ${jt}
          ${g}
          ${Ht}
          ${o}
          return value;
        }
      `}else{let d=U$1.size(i.kernelShape),et=U$1.computeStrides(i.kernelShape),$t=et.length,h=i.pads.length,b=gb($t),g=io$1(e,"inputDims"),jt=io$1(i.pads,"pads"),Ht=io$1(et,"kernelStrides"),Kt=io$1(i.strides,"strides"),or=i.pads.reduce((Lr,ir)=>Lr+ir),jr="";return or?jr=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${a}
          }`:jr=`
          }
          ${a}
        `,`
        ${b}
        float process(int indices[${s}]) {
          int x[${s}];
          copyVec(indices, x);
          int offset[${$t}];
          int pads[${h}];
          int inputDims[${s}];
          int kernelStrides[${$t}];
          int strides[${$t}];
          ${jt}
          ${g}
          ${Kt}
          ${Ht}

          float value = ${c};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${d}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${s} - ${$t}; j < ${s}; j++) {
              x[j] = indices[j] * strides[j - ${s} + ${$t}]
                + offset[j - ${s} + ${$t}] - pads[j - 2];
              ${jr}
          }
          ${o}

          return value;
        }
      `}},io$1=(e,i)=>{let a="";for(let o=0;o<e.length;o++)a+=`
      ${i}[${o}] = ${e[o]};
    `;return a},gb=e=>`
  void offsetToIndices(int offset, int[${e}] strides, out int[${e}] indices) {
    if (${e} == 0) {
      return;
    }
    for (int i = 0; i < ${e} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${e} - 1] = offset;
  }`}),vr,er,yb,Tb,tc,rc,nc$1,oc$1,ic$1,ac$1,sc$1,uc$1=L(()=>{Ue$1(),pn(),fe$1(),ae(),vr=(e,i,a,o,c)=>{Tb(i);let s={name:o,inputNames:["A"],inputTypes:[0]};return[e.run({...s,cacheHint:a.cacheKey,get:()=>yb(e,i,a,o,c,s)},i)]},er=e=>{let i=e.attributes.getInts("axes",[]),a=e.attributes.getInt("keepdims",1)===1;return Q({axes:i,keepDims:a})},yb=(e,i,a,o,c,s)=>{let d=[],et=i[0].dims.length||1,$t=[],h=U$1.normalizeAxes(a.axes,i[0].dims.length),b=c(i,h),g=b[1];for(let Ht=0;Ht<i[0].dims.length;Ht++)h.indexOf(Ht)>=0||h.length===0?(a.keepDims&&d.push(1),g=`
          for(int j${Ht} = 0; j${Ht} < ${i[0].dims[Ht]}; j${Ht}++) {
            inputIdx[${Ht}] = j${Ht};
            ${g}
          }`):($t.push(`inputIdx[${Ht}] = outputIdx[${d.length}];`),d.push(i[0].dims[Ht]));let jt=`
      float process(int outputIdx[${d.length||1}]) {
        float value;                 // final result
        int inputIdx[${et}];      // addressing input data
        ${$t.join(`
`)}
        ${b[0]}       // init ops for reduce max/min
        ${g}
        ${b[2]}       // final computation for reduce mean
        return value;
      }`;return{...s,output:{dims:d,type:i[0].type,textureType:0},shaderSource:jt}},Tb=e=>{if(!e||e.length!==1)throw new Error("Reduce op requires 1 input.");if(Qt.indexOf(e[0].type)===-1)throw new Error("Invalid input type.")},tc=(e,i,a)=>vr(e,i,a,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),rc=(e,i,a)=>vr(e,i,a,"ReduceMean",(o,c)=>{let s=1;for(let d=0;d<o[0].dims.length;d++)(c.indexOf(d)>=0||c.length===0)&&(s*=o[0].dims[d]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${s}.;`]}),nc$1=(e,i,a)=>vr(e,i,a,"ReduceMax",(o,c)=>{let s=[];for(let d=0;d<o[0].dims.length;d++)(c.indexOf(d)>=0||c.length===0)&&s.push(`inputIdx[${d}] = 0;`);return[`${s.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),oc$1=(e,i,a)=>vr(e,i,a,"ReduceMin",(o,c)=>{let s=[];for(let d=0;d<o[0].dims.length;d++)(c.indexOf(d)>=0||c.length===0)&&s.push(`inputIdx[${d}] = 0;`);return[`${s.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),ic$1=(e,i,a)=>vr(e,i,a,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),ac$1=(e,i,a)=>vr(e,i,a,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),sc$1=(e,i,a)=>vr(e,i,a,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),lc$1,fc$1=L(()=>{fe$1(),lc$1=(e,i)=>{let a=U$1.calculateReshapedDims(i[0].dims,i[1].integerData);return e.session.pack?[e.reshapePacked(i[0],a)]:[e.reshapeUnpacked(i[0],a)]}}),cc$1,ki,pc$1,dc$1,dn,xb,Bi$1,so$1,Ni=L(()=>{Ue$1(),we$1(),ae(),cc$1={name:"Upsample",inputNames:["X"],inputTypes:[0]},ki=(e,i,a)=>(Bi$1(i,a),[e.run({...cc$1,cacheHint:a.cacheKey,get:()=>xb(e,i,a)},i)]),pc$1=e=>dn(e,7),dc$1=e=>dn(e,9),dn=(e,i)=>{let a=i>=10,o=e.attributes.getString("mode","nearest");if(o!=="nearest"&&o!=="linear"&&(i<11||o!=="cubic"))throw new Error(`unrecognized mode: ${o}`);let c=[];i<9&&(c=e.attributes.getFloats("scales"),so$1(c,o,a));let s=e.attributes.getFloat("extrapolation_value",0),d=i>10?e.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(d)===-1)throw new Error(`coordinate_transform_mode '${d}' is not supported`);let et=d==="tf_crop_and_resize",$t=et,h=o==="nearest"&&i>=11?e.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(h)===-1)throw new Error(`nearest_mode '${h}' is not supported`);let b=e.attributes.getFloat("cubic_coeff_a",-.75),g=e.attributes.getInt("exclude_outside",0)!==0;if(g&&o!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let jt=i<11?!0:o==="nearest"&&d==="asymmetric"&&h==="floor",Ht=0,Kt=0,or=0;return i>10?e.inputs.length>2?(Ht=1,Kt=2,or=3):(Kt=1,or=2):i===9&&(Kt=1),Q({opset:i,isResize:a,mode:o,scales:c,extrapolationValue:s,coordinateTransformMode:d,useExtrapolation:$t,needRoiInput:et,nearestMode:h,cubicCoefficientA:b,excludeOutside:g,useNearest2xOptimization:jt,roiInputIdx:Ht,scalesInputIdx:Kt,sizesInputIdx:or})},xb=(e,i,a)=>{let o=H(e.session.backend.glContext.version),[c,s]=e.calculateTextureWidthAndHeight(i[0].dims,0),d=i[0].dims.map((or,jr)=>Math.floor(or*a.scales[jr])),[et,$t]=e.calculateTextureWidthAndHeight(d,0),h=d.length,b=new Array(h),g=new Array(h),jt=`
      int output_pitches[${h}];
      int input_pitches[${h}];
      `;for(let or=h-1;or>=0;or--)b[or]=or===h-1?1:b[or+1]*d[or+1],g[or]=or===h-1?1:g[or+1]*i[0].dims[or+1],jt+=`
        output_pitches[${or}] = ${b[or]};
        input_pitches[${or}] = ${g[or]};
        `;let Ht=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${c}, ${s});
        float value = getColorAsFloat(${o.texture2D}(X, coords));
        return value;
      }
      `,Kt=a.mode==="nearest"?`
    ${Ht}
    float process(int indices[${h}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${et}, ${$t});

      ${jt}

      int d, m;
      for (int dim = 0; dim < ${h}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:h===4?`
    ${Ht}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${et}, ${$t});

      ${jt}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${i[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${Ht}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${et}, ${$t});

      ${jt}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${i[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return{...cc$1,output:{dims:d,type:i[0].type,textureType:0},shaderSource:Kt,variables:[{name:"scales",type:"int",arrayLength:a.scales.length,data:a.scales.map(or=>Math.ceil(or))}]}},Bi$1=(e,i)=>{if(!e||i.opset<9&&e.length!==1||i.opset>=9&&i.opset<11&&e.length!==2||i.opset>=11&&e.length<2)throw new Error("invalid inputs.");if(i.scales.length>0&&e[0].dims.length!==i.scales.length)throw new Error("Invalid input shape.");if(e[0].type==="string")throw new Error("Invalid input tensor types.")},so$1=(e,i,a)=>{if(a){for(let o of e)if(o<=0)throw new Error("Scale value should be greater than 0.")}else for(let o of e)if(o<1)throw new Error("Scale value should be greater than or equal to 1.");if((i==="linear"||i==="cubic")&&e.length!==2&&(e.length!==4||e[0]!==1||e[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${a?"Resize":"Upsample"} opeartor.`)}}),Ri$1,Mi$1,hc,mc$1,wb,vb,_b,Ob,bc$1=L(()=>{we$1(),ae(),Bt$1(),Tr(),Ni(),Ri$1={name:"Resize",inputNames:["A"],inputTypes:[2]},Mi$1=(e,i,a)=>(Bi$1(i,a),[e.run({...Ri$1,cacheHint:a.cacheKey,get:()=>wb(e,i,a)},i)]),hc=e=>dn(e,10),mc$1=e=>dn(e,11),wb=(e,i,a)=>{let o=H(e.session.backend.glContext.version),[c,s]=vb(i,a);if(c.every(ir=>ir===1)&&a.coordinateTransformMode!=="tf_crop_and_resize")return{...Ri$1,output:{dims:s,type:i[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${o.texture2D}(X, TexCoords);
                    ${o.output} = v;
                }`};let d=s.length;if(d<2)throw new Error(`output dimension should be at least 2, but got ${d}`);let et=s[d-2],$t=s[d-1],h=i[0].dims;if(d!==h.length)throw new Error(`output dimension should match input ${h.length}, but got ${d}`);let b=h[d-2],g=h[d-1],jt=c[d-2],Ht=c[d-1],Kt="";if(a.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${a.mode}'`);switch(a.coordinateTransformMode){case"asymmetric":Kt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":Kt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":Kt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${$t}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${et}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${$t}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${et}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":Kt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${$t}.0 - 1.0, ${et}.0 - 1.0, ${$t}.0 - 1.0,
                            ${et}.0 - 1.0);
                        vec4 original = vec4(${g}.0 - 1.0, ${b}.0 - 1.0, ${g}.0 - 1.0,
                            ${b}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${a.coordinateTransformMode}'`)}let or=Qe(d),jr=Nt(),Lr=`
            const vec2 inputWH = vec2(${b}.0, ${g}.0);
            const vec4 scaleWHWH = vec4(float(${jt}), float(${Ht}), float(${jt}), float(${Ht}));
            ${jr}
            ${Kt}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${or} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${et-1};
                bool hasNextCol = rc.z < ${$t-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${o.output} = vec4(newValue);
            }
        `;return{...Ri$1,output:{dims:s,type:i[0].type,textureType:2},hasMain:!0,shaderSource:Lr}},vb=(e,i)=>{let a=e[0].dims,o=i.scales,c;if(o.length===0){let d=e[i.scalesInputIdx];if(d&&d.size!==0){if(e[i.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");o=_b(d,i.mode,i.isResize)}else{let et=e[i.sizesInputIdx];if(!et||et.size===0)throw new Error("Either scales or sizes MUST be provided as input.");c=Array.from(et.integerData),o=Ob(c,a,i.mode,i.isResize)}}else if(e[i.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let s=c||a.map((d,et)=>Math.floor(d*o[et]));return[o,s]},_b=(e,i,a)=>{let o=Array.from(e.floatData);return so$1(o,i,a),o},Ob=(e,i,a,o)=>{let c=i.length,s=new Array(c);for(let d=0,et=c;d<et;d++)if(i[d]===0){if(e[d]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");s[d]=1}else s[d]=e[d]/i[d];return so$1(s,a,o),s}}),gc$1,Ib,yc$1=L(()=>{yr(),gc$1=(e,i)=>(Ib(i),[new $e([i[0].dims.length],"int32",void 0,void 0,new Int32Array(i[0].dims))]),Ib=e=>{if(!e||e.length!==1)throw new Error("Shape requires 1 input.")}}),Gi$1,Tc$1,xc$1,wc$1,Sb,vc$1,Ab,Pb,_c$1=L(()=>{Ue$1(),pn(),fe$1(),ae(),Gi$1={name:"Slice",inputNames:["A"],inputTypes:[0]},Tc$1=(e,i,a)=>(Sb(i),[e.run({...Gi$1,cacheHint:a.cacheKey,get:()=>wc$1(e,i[0],a)},i)]),xc$1=e=>{let i=e.attributes.getInts("starts"),a=e.attributes.getInts("ends"),o=e.attributes.getInts("axes",[]);return Q({starts:i,ends:a,axes:o})},wc$1=(e,i,a)=>{let o=a.axes.length===0?i.dims.slice(0).map((b,g)=>g):a.axes,c=U$1.normalizeAxes(o,i.dims.length),s=a.starts.map((b,g)=>b>i.dims[c[g]]-1?i.dims[c[g]]:U$1.normalizeAxis(b,i.dims[c[g]])),d=a.ends.map((b,g)=>b>i.dims[c[g]]-1?i.dims[c[g]]:U$1.normalizeAxis(b,i.dims[c[g]])),et=i.dims.slice(),$t=[];for(let b=0;b<c.length;b++)et[c[b]]=d[b]-s[b],s[b]>0&&$t.push(`outputIdx[${c[b]}] += ${s[b]};`);let h=`
      float process(int outputIdx[${et.length}]) {
        ${$t.join(`
      `)}
        return _A(outputIdx);
      }`;return{...Gi$1,output:{dims:et,type:i.type,textureType:0},shaderSource:h}},Sb=e=>{if(!e||e.length!==1)throw new Error("Slice requires 1 input.");if(Qt.indexOf(e[0].type)===-1)throw new Error("Invalid input type.")},vc$1=(e,i)=>{Pb(i);let a=Ab(e,i);return[e.run({...Gi$1,cacheHint:a.cacheKey,get:()=>wc$1(e,i[0],a)},[i[0]])]},Ab=(e,i)=>{if(!e.session.isInitializer(i[1].dataId)||!e.session.isInitializer(i[2].dataId)||i.length>=4&&!e.session.isInitializer(i[3].dataId)||i.length>=5&&!e.session.isInitializer(i[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(i.length>=5&&i[4].integerData.some(d=>d!==1))throw new Error("currently non-1 steps is not supported for Slice");let a=Array.from(i[1].integerData),o=Array.from(i[2].integerData),c=i.length>=4?Array.from(i[3].integerData):[],s=`${c};${a};${o}`;return{starts:a,ends:o,axes:c,cacheKey:s}},Pb=e=>{if(!e||e.length<3||e.length>5)throw new Error("Invalid input number.");if(e[1].type!=="int32"||e[1].dims.length!==1)throw new Error("Invalid input type.");if(e[2].type!=="int32"||e[2].dims.length!==1)throw new Error("Invalid input type.");if(e.length>=4&&(e[3].type!=="int32"||e[3].dims.length!==1))throw new Error("Invalid input type.");if(e.length>=5&&(e[4].type!=="int32"||e[4].dims.length!==1))throw new Error("Invalid input type.")}}),Oc$1,Ic$1,Sc$1,Ac$1,Pc$1,Ec$1,Dc$1,Lc$1,Eb,Db,Lb,Cc$1,Fc$1=L(()=>{Ue$1(),fe$1(),we$1(),ae(),oo$1(),Oc$1={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Ic$1={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Sc$1={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Ac$1=(e,i,a)=>{Cc$1(i);let o=i[0].dims.slice(),c=U$1.normalizeAxis(a.axis,o.length),s=U$1.sizeToDimension(o,c),d=U$1.sizeFromDimension(o,c);return Lc$1(e,i,a,s,d)},Pc$1=e=>Q({axis:e.attributes.getInt("axis",1)}),Ec$1=e=>Q({axis:e.attributes.getInt("axis",-1)}),Dc$1=(e,i,a)=>{Cc$1(i);let o=i[0].dims.slice(),c=U$1.normalizeAxis(a.axis,o.length),s=o.length,d=c!==s-1,et=[],$t=[],h=[],b;d&&($t=Array.from({length:s}).map((Kt,or)=>or),$t[c]=s-1,$t[s-1]=c,$t.map(Kt=>et.push(o[Kt])),b=Q({perm:$t}),h=wr(e,i,b));let g=d?U$1.sizeToDimension(et,s-1):U$1.sizeToDimension(o,s-1),jt=d?U$1.sizeFromDimension(et,s-1):U$1.sizeFromDimension(o,s-1),Ht=Lc$1(e,d?h:i,a,g,jt);return d?wr(e,Ht,b):Ht},Lc$1=(e,i,a,o,c)=>{let s=Eb(e,i[0],o,c,[o]),d=e.run({...Oc$1,cacheHint:a.cacheKey,get:()=>s},i),et=Db(e,i[0],o,c,s.output.dims,[o]),$t=e.run({...Ic$1,cacheHint:a.cacheKey,get:()=>et},[i[0],d]),h=Lb(e,i[0],o,c,s.output.dims,et.output.dims);return[e.run({...Sc$1,cacheHint:a.cacheKey,get:()=>h},[i[0],d,$t])]},Eb=(e,i,a,o,c)=>{let[s,d]=e.calculateTextureWidthAndHeight(i.dims,0),et=c.length;if(a<1||o<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(c.length!==1)throw new Error("Dimensionality of the output should be 1");if(c[0]!==a)throw new Error("Shape of the output should be equal to logical row count");let $t=H(e.session.backend.glContext.version),h=`
      float process(int[${et}] indices) {
        int logical_row_start_offset = indices[0] * ${o};

        float max = getColorAsFloat(${$t.texture2D}(A, offsetToCoords(logical_row_start_offset, ${s},
        ${d} )));
        for(int i=1; i<${o}; ++i)
        {
          float current = getColorAsFloat(${$t.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${s}, ${d})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return{...Oc$1,output:{dims:c,type:i.type,textureType:0},shaderSource:h}},Db=(e,i,a,o,c,s)=>{let[d,et]=e.calculateTextureWidthAndHeight(i.dims,0),$t=s.length;if(a<1||o<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(s.length!==1)throw new Error("Dimensionality of the output should be 1");if(s[0]!==a)throw new Error("Shape of the output should be equal to logical row count");if(c.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(c[0]!==a)throw new Error("Shape of the intermediate results should be equal to logical row count");let h=H(e.session.backend.glContext.version),b=`
      float process(int[${$t}] indices) {
        int logical_row_start_offset = indices[0] * ${o};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${o}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${h.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${d}, ${et}))) - max);
        }

        return norm_factor;
      }`;return{...Ic$1,output:{dims:s,type:i.type,textureType:0},shaderSource:b}},Lb=(e,i,a,o,c,s)=>{let[d,et]=e.calculateTextureWidthAndHeight(i.dims,0),$t=i.dims.length;if(a<1||o<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(c.length!==1||s.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(c[0]!==a||s[0]!==a)throw new Error("Shape of the intermediate results should be equal to logical row count");let h=`
      float process(int[${$t}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${d}, ${et});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${o};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{...Sc$1,output:{dims:i.dims,type:i.type,textureType:0},shaderSource:h}},Cc$1=e=>{if(!e||e.length!==1)throw new Error("Softmax requires 1 input.");if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type")}}),$c$1,kc$1,Bc$1,Cb,Fb,$b,Nc$1=L(()=>{Ue$1(),fe$1(),ae(),$c$1={name:"Split",inputNames:["A"],inputTypes:[0]},kc$1=(e,i,a)=>{$b(i);let o=U$1.normalizeAxis(a.axis,i[0].dims.length),c=Cb(e,i,o,a),s=[];for(let d=0;d<c;++d)s.push(e.run({...$c$1,cacheHint:`${a.cacheKey};${d}`,get:()=>Fb(e,i[0],a,o,d)},i));return s},Bc$1=e=>{let i=e.attributes.getInt("axis",0),a=e.attributes.getInts("split",[]),o=e.outputs.length;return Q({axis:i,split:a,numOutputs:o})},Cb=(e,i,a,o)=>{let[,c]=an$1.splitShape(i[0].dims,a,o.split,o.numOutputs);return c.length},Fb=(e,i,a,o,c)=>{let[s,d]=an$1.splitShape(i.dims,o,a.split,a.numOutputs),et=d[c],$t=s[c],h=`
      float process(int indices[${$t.length}]) {
        indices[${o}] += ${et};
        return _A(indices);
      }
    `;return{...$c$1,cacheHint:`${a.cacheKey}:${c}`,output:{dims:$t,type:i.type,textureType:0},shaderSource:h}},$b=e=>{if(!e||e.length!==1)throw new Error("Split requires one input.");if(e[0].type!=="int8"&&e[0].type!=="uint8"&&e[0].type!=="int16"&&e[0].type!=="uint16"&&e[0].type!=="int32"&&e[0].type!=="uint32"&&e[0].type!=="float32"&&e[0].type!=="float64"&&e[0].type!=="bool")throw new Error("Invalid input type.")}}),Ui$1,Rc$1,Mc$1,kb,Bb,Gc$1=L(()=>{fe$1(),Ui$1=(e,i,a)=>{kb(i);let o=U$1.squeezeShape(i[0].dims,a);return[e.reshapeUnpacked(i[0],o)]},Rc$1=(e,i)=>(Bb(i),Ui$1(e,[i[0]],Array.from(i[1].integerData))),Mc$1=e=>e.attributes.getInts("axes"),kb=e=>{if(!e||e.length!==1)throw new Error("Squeeze requires 1 input.");if(e[0].type==="string")throw new Error("invalid input tensor types.")},Bb=e=>{if(!e||e.length!==2)throw new Error("Squeeze requires 2 inputs.");if(e[1].type!=="int32")throw new Error("Invalid input type.")}}),Uc$1,Nb,Rb,zc$1=L(()=>{we$1(),ae(),Uc$1=(e,i)=>{Rb(i);let a={name:"Sum",inputNames:i.map((o,c)=>`X${c}`),inputTypes:new Array(i.length).fill(0)};return[e.run({...a,get:()=>Nb(e,i,a)},i)]},Nb=(e,i,a)=>{let o=H(e.session.backend.glContext.version),c=i[0].dims.slice(),s=`
      void main() {
        vec4 result = ${i.map((d,et)=>`${o.texture2D}(X${et},TexCoords)`).join(" + ")};
        ${o.output} = result;
      }
    `;return{...a,output:{dims:c,type:i[0].type,textureType:0},hasMain:!0,shaderSource:s}},Rb=e=>{if(!e||e.length===0)throw new Error("Sum requires inputs.");let i=e[0].dims.length;for(let a=1;a<e.length;a++){if(i!==e[a].dims.length)throw new Error("Input shapes are mismatched.");for(let o=0;o<i;o++)if(e[0].dims[o]!==e[a].dims[o])throw new Error("Input shapes are not matched.")}if(e[0].type!=="float32"&&e[0].type!=="float64")throw new Error("Invalid input type.");for(let a=1;a<e.length;a++)if(e[0].type!==e[a].type)throw new Error("Input types are not matched.")}}),Vc$1,Mb,Gb,Wc$1=L(()=>{pn(),ae(),Vc$1=(e,i)=>{Gb(i);let a={name:"Tile",inputNames:["A"],inputTypes:[0]};return[e.run({...a,get:()=>Mb(e,i,a)},i)]},Mb=(e,i,a)=>{let o=i[0].dims.slice(),c=new Array(o.length),s=[];for(let $t=0;$t<o.length;$t++)c[$t]=o[$t]*i[1].numberData[$t],s.push(`inputIdx[${$t}] = int(mod(float(outputIdx[${$t}]), ${o[$t]}.));`);let d=c.length,et=`
      float process(int outputIdx[${d}]) {
        int inputIdx[${d}];
        ${s.join(`
`)}
        return _A(inputIdx);
      }
    `;return{...a,output:{dims:c,type:i[0].type,textureType:0},shaderSource:et}},Gb=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 input.");if(e[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(e[1].dims[0]!==e[0].dims.length)throw new Error("Invalid input shape.");if(Qt.indexOf(e[0].type)===-1)throw new Error("Invalid input type.");if(e[1].type!=="int32"&&e[1].type!=="int16")throw new Error("Invalid repeat type.")}}),zi$1,Hc$1,qc$1,Ub,zb,jc$1=L(()=>{fe$1(),zi$1=(e,i,a)=>{Ub(i);let o=U$1.unsqueezeShape(i[0].dims,a);return[e.reshapeUnpacked(i[0],o)]},Hc$1=(e,i)=>(zb(i),zi$1(e,[i[0]],Array.from(i[1].integerData))),qc$1=e=>e.attributes.getInts("axes"),Ub=e=>{if(!e||e.length!==1)throw new Error("Unsqueeze requires 1 input.");if(e[0].type==="string")throw new Error("invalid input tensor types.")},zb=e=>{if(!e||e.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(e[1].type!=="int32")throw new Error("Invalid input type.")}}),Yc$1,Xc$1=L(()=>{ol$1(),gl$1(),xl$1(),Sl$1(),to$2(),ff$1(),bf(),Tf(),vf(),Sf(),Ef(),Ff(),Nf(),ro$1(),Uf(),ec(),uc$1(),fc$1(),bc$1(),yc$1(),_c$1(),Fc$1(),Nc$1(),Gc$1(),zc$1(),Wc$1(),oo$1(),Ii(),jc$1(),Ni(),Yc$1=[["Abs","","6+",Al$1],["Acos","","7+",Pl$1],["Add","","7+",il$1],["And","","7+",al$1],["Asin","","7+",El$1],["Atan","","7+",Dl$1],["AveragePool","","7+",Vf,Wf],["BatchNormalization","","7+",rl$1,nl$1],["Cast","","6+",yl$1,Tl$1],["Ceil","","6+",Fl$1],["Clip","","6-10",_i,Ll$1],["Clip","","11+",Cl$1],["Concat","","4+",_l$1,Il$1],["Conv","","1+",Li$1,Ci],["ConvTranspose","","1+",uf$1,lf$1],["Cos","","7+",$l$1],["Div","","7+",sl$1],["Dropout","","7+",Oi$1],["DepthToSpace","","1+",hf$1,mf$1],["Equal","","7+",ul$1],["Elu","","6+",kl$1,Bl$1],["Exp","","6+",Nl$1],["Flatten","","1+",gf,yf],["Floor","","6+",Rl$1],["FusedConv","com.microsoft","1+",Li$1,Ci],["Gather","","1+",xf,wf],["Gemm","","7-10",Fi$1,Of],["Gemm","","11+",Fi$1,If],["GlobalAveragePool","","1+",qf,jf],["GlobalMaxPool","","1+",Zf],["Greater","","7+",ll$1],["Identity","","1+",Oi$1],["ImageScaler","","1+",Af,Pf],["InstanceNormalization","","6+",Lf,Cf],["LeakyRelu","","6+",Ml$1,Gl$1],["Less","","7+",fl$1],["LRN","","1+",$f,kf],["Log","","6+",Ul$1],["MatMul","","1+",ef$1,tf$1],["MaxPool","","1+",Yf,Xf],["Mul","","7+",cl$1],["Neg","","6+",zl$1],["Not","","1+",Vl$1],["Or","","7+",pl$1],["Pad","","2-10",$i,Rf],["Pad","","11+",Mf,Gf],["Pow","","7+",dl$1],["PRelu","","7+",hl$1],["ReduceLogSum","","1+",ac$1,er],["ReduceMax","","1+",nc$1,er],["ReduceMean","","1+",rc,er],["ReduceMin","","1+",oc$1,er],["ReduceProd","","1+",ic$1,er],["ReduceSum","","1-12",tc,er],["ReduceSumSquare","","1+",sc$1,er],["Relu","","6+",Wl$1],["Reshape","","5+",lc$1],["Resize","","10",Mi$1,hc],["Resize","","11+",Mi$1,mc$1],["Shape","","1+",gc$1],["Sigmoid","","6+",Hl$1],["Sin","","7+",ql$1],["Slice","","10+",vc$1],["Slice","","1-9",Tc$1,xc$1],["Softmax","","1-12",Ac$1,Pc$1],["Softmax","","13+",Dc$1,Ec$1],["Split","","2-12",kc$1,Bc$1],["Sqrt","","6+",jl$1],["Squeeze","","1-12",Ui$1,Mc$1],["Squeeze","","13+",Rc$1],["Sub","","7+",ml$1],["Sum","","6+",Uc$1],["Tan","","7+",Yl$1],["Tanh","","6+",Xl$1],["Tile","","6+",Vc$1],["Transpose","","1+",wr,pf$1],["Upsample","","7-8",ki,pc$1],["Upsample","","9",ki,dc$1],["Unsqueeze","","1-12",zi$1,qc$1],["Unsqueeze","","13+",Hc$1],["Xor","","7+",bl$1]]});function Jc$1(e){let i={},a;for(;(a=Kc$1.exec(e))!==null;){let o=a[3].split(",").map(c=>{let s=c.trim().split(" ");return s&&s.length===2?{type:s[0],name:s[1]}:null}).filter(c=>c!==null);i[a[2]]={params:o,body:a[4]}}for(let o in i){let c=Vb.replace("__FUNC__",o),s=new RegExp(c,"gm");for(;(a=s.exec(e))!==null;){let d=a[1],et=a[2],$t=a[3].split(","),h=d?`${d} ${et};`:"",b=i[o].body,g="";i[o].params.forEach((Ht,Kt)=>{Ht&&(g+=`${Ht.type} ${Ht.name} = ${$t[Kt]};
`)}),b=`${g}
 ${b}`,b=b.replace("return",`${et} = `);let jt=`
      ${h}
      {
        ${b}
      }
      `;e=e.replace(a[0],jt)}}return e=e.replace(Kc$1,""),e}var Kc$1,Vb,Zc$1=L(()=>{Kc$1=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,Vb="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function Mr(e,i){let a=[],o=[],c=i!=null&&Array.isArray(i)&&i.length===0,s=i==null||c?null:Wb(i,e).sort(),d=0;for(let et=0;et<e.length;++et){if(s!=null){if(s[d]===et&&e[et]!==1)throw new Error(`Can't squeeze axis ${et} since its dim '${e[et]}' is not 1`);(s[d]==null||s[d]>et)&&e[et]===1&&(a.push(e[et]),o.push(et)),s[d]<=et&&d++}e[et]!==1&&(a.push(e[et]),o.push(et))}return{newShape:a,keptDims:o}}function Wb(e,i){let a=i.length;return e=e==null?i.map((o,c)=>c):[].concat(e),Fr(e.every(o=>o>=-a&&o<a),()=>`All values in axis param must be in range [-${a}, ${a}) but got axis ${e}`),Fr(e.every(Hb),()=>`All values in axis param must be integers but got axis ${e}`),e.map(o=>o<0?a+o:o)}function Hb(e){return e%1===0}function qb(e){if(e.length===0)return 1;let i=e[0];for(let a=1;a<e.length;a++)i*=e[a];return i}function Qc$1(e){let i=Math.ceil(Math.sqrt(e));return[i,Math.ceil(e/i)]}var uo$1,Vi=L(()=>{lt$1(),fe$1(),uo$1=class{constructor(e){this.maxTextureSize=e}computeTextureWH(e,i){let a=this.computeTexture(e,i);return i&&i.isPacked&&(a[0]/=2,a[1]/=2),i&&i.reverseWH?[a[1],a[0]]:a}computeTexture(e,i){let a=i&&i.isPacked;if(e.length===0)return a?[2,2]:[1,1];let o=this.maxTextureSize;if(i&&i.breakAxis!==void 0){let d=i.breakAxis>=e.length?1:e.slice(i.breakAxis).reduce(($t,h)=>$t*h),et=i.breakAxis<=0?1:e.slice(0,i.breakAxis).reduce(($t,h)=>$t*h);if(d>o||et>o)ce.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${e}, breakAxis:${i.breakAxis}`);else return[d,et]}let c=e.slice(0);a&&(o=o*2,c=c.map((d,et)=>et>=c.length-2?c[et]%2===0?c[et]:c[et]+1:c[et]),c.length===1&&(c=[2,c[0]])),c.length!==2&&(c=Mr(c).newShape);let s=qb(c);return c.length<=1&&s<=o?[1,s]:c.length===2&&c[0]<=o&&c[1]<=o?c:c.length===3&&c[0]*c[1]<=o&&c[2]<=o?[c[0]*c[1],c[2]]:c.length===3&&c[0]<=o&&c[1]*c[2]<=o?[c[0],c[1]*c[2]]:c.length===4&&c[0]*c[1]*c[2]<=o&&c[3]<=o?[c[0]*c[1]*c[2],c[3]]:c.length===4&&c[0]<=o&&c[1]*c[2]*c[3]<=o?[c[0],c[1]*c[2]*c[3]]:a?Qc$1(s/4).map(d=>d*2):Qc$1(s)}}}),lo$1,ep$1=L(()=>{fe$1(),Wt$1(),we$1(),Vi(),Bt$1(),lo$1=class extends dt{constructor(e){super(e)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){let e="offsetToCoords";return{offsetToCoords:new R(`
      vec2 ${e}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let e="coordsToOffset";return{coordsToOffset:new R(`
      int ${e}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let e=this.context.outputTextureLayout;return e.isPacked?this.getPackedOutputSamplingSnippet(e):this.getUnpackedOutputSamplingSnippet(e)}getPackedOutputSamplingSnippet(e){let i=e.unpackedShape,a=[e.width,e.height],o={},c="getOutputCoords";switch(i.length){case 0:o[c]=this.getOutputScalarCoords();break;case 1:o[c]=this.getOutputPacked1DCoords(i,a);break;case 2:o[c]=this.getOutputPacked2DCoords(i,a);break;case 3:o[c]=this.getOutputPacked3DCoords(i,a);break;default:o[c]=this.getOutputPackedNDCoords(i,a)}let s=`
      void setOutput(vec4 val) {
        ${H(this.context.glContext.version).output} = val;
      }
    `,d="floatTextureSetRGBA";return o[d]=new R(s),o}getUnpackedOutputSamplingSnippet(e){let i=e.unpackedShape,a=[e.width,e.height],o={},c="getOutputCoords";switch(i.length){case 0:o[c]=this.getOutputScalarCoords();break;case 1:o[c]=this.getOutputUnpacked1DCoords(i,a);break;case 2:o[c]=this.getOutputUnpacked2DCoords(i,a);break;case 3:o[c]=this.getOutputUnpacked3DCoords(i,a);break;case 4:o[c]=this.getOutputUnpacked4DCoords(i,a);break;case 5:o[c]=this.getOutputUnpacked5DCoords(i,a);break;case 6:o[c]=this.getOutputUnpacked6DCoords(i,a);break;default:throw new Error(`Unsupported output dimensionality: ${i.length}`)}let s=`
        void setOutput(float val) {
          ${H(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,d="floatTextureSetR";return o[d]=new R(s),o}getOutputScalarCoords(){return new R(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(e,i){let a=i,o="";return a[0]===1?(o=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${a[1]}.0);
          }
        `,new R(o)):a[1]===1?(o=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${a[0]}.0);
          }
        `,new R(o)):(o=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${a[0]}, ${a[1]}));
          return 2 * (resTexRC.y * ${a[0]} + resTexRC.x);
        }
      `,new R(o))}getOutputPacked2DCoords(e,i){let a="";if(hr$1.arraysEqual(e,i))return a=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${i[0]}, ${i[1]}));
        }
      `,new R(a);let o=i,c=Math.ceil(e[1]/2);return a=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${o[0]}, ${o[1]}));

          int index = resTexRC.y * ${o[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${c}) * 2;
          int c = 2 * (index / ${c});

          return ivec2(r, c);
        }
      `,new R(a)}getOutputPacked3DCoords(e,i){let a=[i[0],i[1]],o=Math.ceil(e[2]/2),c=o*Math.ceil(e[1]/2),s=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${a[0]}, ${a[1]}));
          int index = resTexRC.y * ${a[0]} + resTexRC.x;

          int b = index / ${c};
          index -= b * ${c};

          // reverse r and c order for packed texture
          int r = imod(index, ${o}) * 2;
          int c = 2 * (index / ${o});

          return ivec3(b, r, c);
        }
      `;return new R(s)}getOutputPackedNDCoords(e,i){let a=[i[0],i[1]],o=Math.ceil(e[e.length-1]/2),c=o*Math.ceil(e[e.length-2]/2),s=c,d="",et="b, r, c";for(let h=2;h<e.length-1;h++)s*=e[e.length-h-1],d=`
      int b${h} = index / ${s};
      index -= b${h} * ${s};
    `+d,et=`b${h}, `+et;let $t=`
      ivec${e.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${a[0]}, ${a[1]}));
        int index = resTexRC.y * ${a[0]} + resTexRC.x;

        ${d}

        int b = index / ${c};
        index -= b * ${c};

        // reverse r and c order for packed texture
        int r = imod(index, ${o}) * 2;
        int c = 2 * (index / ${o});

        return ivec${e.length}(${et});
      }
    `;return new R($t)}getOutputUnpacked1DCoords(e,i){let a=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${i[0]}, ${i[1]}));
          return resTexRC.y * ${i[0]} + resTexRC.x;
        }
      `;return new R(a)}getOutputUnpacked2DCoords(e,i){let a=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${i[0]}, ${i[1]}));
          int index = resTexRC.y * ${i[0]} + resTexRC.x;
          int r = index / ${e[1]};
          int c = index - r * ${e[1]};
          return ivec2(r, c);
        }
      `;return new R(a)}getOutputUnpacked3DCoords(e,i){let a="",o=e.length,c=null;o<2&&(c=[]),c=new Array(o-1),c[o-2]=e[o-1];for(let et=o-3;et>=0;--et)c[et]=c[et+1]*e[et+1];let s=["r","c","d"],d=c.map((et,$t)=>{let h=`int ${s[$t]} = index / ${et}`,b=$t===c.length-1?`int ${s[$t+1]} = index - ${s[$t]} * ${et}`:`index -= ${s[$t]} * ${et}`;return`${h}; ${b};`}).join("");return a=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${i[0]}, ${i[1]}));
          int index = resTexRC.y * ${i[0]} + resTexRC.x;
          ${d}
          return ivec3(r, c, d);
        }
      `,new R(a)}getOutputUnpacked4DCoords(e,i){let a="",o=e.length,c=null;o<2&&(c=[]),c=new Array(o-1),c[o-2]=e[o-1];for(let et=o-3;et>=0;--et)c[et]=c[et+1]*e[et+1];let s=["r","c","d","d2"],d=c.map((et,$t)=>{let h=`int ${s[$t]} = index / ${et}`,b=$t===c.length-1?`int ${s[$t+1]} = index - ${s[$t]} * ${et}`:`index -= ${s[$t]} * ${et}`;return`${h}; ${b};`}).join("");return a=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${i[0]}, ${i[1]}));
          int index = resTexRC.y * ${i[0]} + resTexRC.x;
          ${d}
          return ivec4(r, c, d, d2);
        }
      `,new R(a)}getOutputUnpacked5DCoords(e,i){let a="",o=e.length,c=null;o<2&&(c=[]),c=new Array(o-1),c[o-2]=e[o-1];for(let et=o-3;et>=0;--et)c[et]=c[et+1]*e[et+1];let s=["r","c","d","d2","d3"],d=c.map((et,$t)=>{let h=`int ${s[$t]} = index / ${et}`,b=$t===c.length-1?`int ${s[$t+1]} = index - ${s[$t]} * ${et}`:`index -= ${s[$t]} * ${et}`;return`${h}; ${b};`}).join("");return a=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${i[0]}, ${i[1]}));
          int index = resTexRC.y * ${i[0]} + resTexRC.x;
          ${d}
          return ivec5(r, c, d, d2, d3);
        }
      `,new R(a)}getOutputUnpacked6DCoords(e,i){let a="",o=e.length,c=null;o<2&&(c=[]),c=new Array(o-1),c[o-2]=e[o-1];for(let et=o-3;et>=0;--et)c[et]=c[et+1]*e[et+1];let s=["r","c","d","d2","d3","d4"],d=c.map((et,$t)=>{let h=`int ${s[$t]} = index / ${et}`,b=$t===c.length-1?`int ${s[$t+1]} = index - ${s[$t]} * ${et}`:`index -= ${s[$t]} * ${et}`;return`${h}; ${b};`}).join("");return a=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${i[0]}, ${i[1]}));
         int index = resTexRC.y * ${i[0]} + resTexRC.x;
         ${d}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new R(a)}getCommonUtilFuncs(){let e={},i="uvFromFlat";e[i]=new R(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),i="packedUVfrom1D",e[i]=new R(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),i="packedUVfrom2D",e[i]=new R(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),i="packedUVfrom3D",e[i]=new R(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),i="sampleTexture";let a=H(this.context.glContext.version);return e[i]=new R(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${a.texture2D}(textureSampler, uv).r;
        }`),e}getInputsSamplingSnippets(){let e={},i=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((a,o)=>{let c=this.context.inputTextureLayouts[o],s=Yn$1(a);c.isPacked?e[s]=this.getPackedSamplerFromInput(s,a,c):e[s]=this.getUnpackedSamplerFromInput(s,a,c);let d=Gu$1(a);c.unpackedShape.length<=i.unpackedShape.length&&(c.isPacked?e[d]=this.getPackedSamplerAtOutputCoords(d,c,i,a):e[d]=this.getUnpackedSamplerAtOutputCoords(d,c,i,a))}),e}getPackedSamplerAtOutputCoords(e,i,a,o){let c=i.unpackedShape,s=a.unpackedShape,d=Yn$1(o),et=c.length,$t=s.length,h=Ze$1.getBroadcastDims(c,s),b=Qe($t),g=$t-et,jt,Ht=Dt$1();et===0?jt="":$t<2&&h.length>=1?jt="coords = 0;":jt=h.map(vn=>`coords.${Ht[vn+g]} = 0;`).join(`
`);let Kt="";$t<2&&et>0?Kt="coords":Kt=c.map((vn,xn)=>`coords.${Ht[xn+g]}`).join(", ");let or="return outputValue;",jr=U$1.size(c)===1,Lr=U$1.size(s)===1;if(et===1&&!jr&&!Lr)or=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(jr&&!Lr)$t===1?or=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:or=`
          return vec4(outputValue.x);
        `;else if(h.length){let vn=et-2,xn=et-1;h.indexOf(vn)>-1&&h.indexOf(xn)>-1?or="return vec4(outputValue.x);":h.indexOf(vn)>-1?or="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":h.indexOf(xn)>-1&&(or="return vec4(outputValue.xx, outputValue.zz);")}let ir=`
        int lastDim = coords.${Ht[$t-1]};
        coords.${Ht[$t-1]} = coords.${Ht[$t-2]};
        coords.${Ht[$t-2]} = lastDim;
      `,qr=`
      vec4 ${e}() {
        ${b} coords = getOutputCoords();
        ${ir}
        ${jt}
        vec4 outputValue = ${d}(${Kt});
        ${or}
      }
    `;return new R(qr,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(e,i,a,o){let c=[a.width,a.height],s=[i.width,i.height],d=i.unpackedShape.length,et=a.unpackedShape.length,$t=i.unpackedShape,h=a.unpackedShape,b=Yn$1(o);if(d===et&&hr$1.arraysEqual(s,c)){let ir=`
          float ${e}() {
            return sampleTexture(${o}, TexCoords);
          }
        `;return new R(ir,["coordinates.sampleTexture"])}let g=Qe(et),jt=Ze$1.getBroadcastDims($t,h),Ht=et-d,Kt,or=Dt$1();d===0?Kt="":et<2&&jt.length>=1?Kt="coords = 0;":Kt=jt.map(ir=>`coords.${or[ir+Ht]} = 0;`).join(`
`);let jr="";et<2&&d>0?jr="coords":jr=i.unpackedShape.map((ir,qr)=>`coords.${or[qr+Ht]}`).join(", ");let Lr=`
        float ${e}() {
          ${g} coords = getOutputCoords();
          ${Kt}
          return ${b}(${jr});
        }
      `;return new R(Lr,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(e,i,a){switch(a.unpackedShape.length){case 0:return this.getPackedSamplerScalar(e,i);case 1:return this.getPackedSampler1D(e,i,a);case 2:return this.getPackedSampler2D(e,i,a);case 3:return this.getPackedSampler3D(e,i,a);default:return this.getPackedSamplerND(e,i,a)}}getUnpackedSamplerFromInput(e,i,a){let o=a.unpackedShape;switch(o.length){case 0:return this.getUnpackedSamplerScalar(e,i,a);case 1:return this.getUnpackedSampler1D(e,i,a);case 2:return this.getUnpackedSampler2D(e,i,a);case 3:return this.getUnpackedSampler3D(e,i,a);case 4:return this.getUnpackedSampler4D(e,i,a);case 5:return this.getUnpackedSampler5D(e,i,a);case 6:return this.getUnpackedSampler6D(e,i,a);default:throw new Error(`Unsupported dimension ${o.length}-D`)}}getPackedSamplerScalar(e,i){let a=H(this.context.glContext.version),o=`
          vec4 ${e}() {
            return ${a.texture2D}(${i}, halfCR);
          }
        `;return new R(o)}getPackedSampler1D(e,i,a){let o=[a.width,a.height],c=[o[1],o[0]],s=H(this.context.glContext.version),d=`vec4 ${e}(int index) {
      vec2 uv = packedUVfrom1D(
      ${c[0]}, ${c[1]}, index);
      return ${s.texture2D}(${i}, uv);
    }`;return new R(d,["coordinates.packedUVfrom1D"])}getPackedSampler2D(e,i,a){let o=a.unpackedShape,c=[a.width,a.height],s=H(this.context.glContext.version),d=c[0],et=c[1];if(c!=null&&hr$1.arraysEqual(o,c)){let g=`vec4 ${e}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${et}.0, ${d}.0);
        return ${s.texture2D}(${i}, uv);
      }`;return new R(g)}let $t=c,h=Math.ceil(o[1]/2),b=`vec4 ${e}(int row, int col) {
      vec2 uv = packedUVfrom2D(${$t[1]}, ${$t[0]}, ${h}, row, col);
      return ${s.texture2D}(${i}, uv);
    }`;return new R(b,["coordinates.packedUVfrom2D"])}getPackedSampler3D(e,i,a){let o=a.unpackedShape,c=[a.width,a.height],s=[c[0],c[1]],d=H(this.context.glContext.version);if(o[0]===1){let jt=o.slice(1),Ht=[1,2],Kt=$r(o,jt),or=["b","row","col"],jr=JSON.parse(JSON.stringify(a));jr.unpackedShape=Kt;let Lr=this.getPackedSamplerFromInput(e,i,jr),ir=`${Lr.routineBody}
      vec4 ${e}(int b, int row, int col) {
        return ${e}(${kr$1(or,Ht)});
      } `;return new R(ir,Lr.dependencies)}let et=s[0],$t=s[1],h=Math.ceil(o[2]/2),b=h*Math.ceil(o[1]/2),g=`vec4 ${e}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${$t}, ${et}, ${b}, ${h}, b, row, col);
      return ${d.texture2D}(${i}, uv);}`;return new R(g,["coordinates.packedUVfrom3D"])}getPackedSamplerND(e,i,a){let o=a.unpackedShape,c=o.length,s=[a.width,a.height],d=H(this.context.glContext.version),et=[s[0],s[1]],$t=et[1],h=et[0],b=Math.ceil(o[c-1]/2),g=b*Math.ceil(o[c-2]/2),jt="int b, int row, int col",Ht=`b * ${g} + (row / 2) * ${b} + (col / 2)`;for(let or=2;or<c-1;or++)jt=`int b${or}, `+jt,g*=o[c-or-1],Ht=`b${or} * ${g} + `+Ht;let Kt=`vec4 ${e}(${jt}) {
      int index = ${Ht};
      int texR = index / ${h};
      int texC = index - texR * ${h};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}, ${$t});
      return ${d.texture2D}(${i}, uv);
    }`;return new R(Kt)}getUnpackedSamplerScalar(e,i,a){let[o,c]=[a.width,a.height];if(o===1&&c===1){let d=`
          float ${e}() {
            return sampleTexture(${i}, halfCR);
          }
        `;return new R(d,["coordinates.sampleTexture"])}let s=`
        float ${e}() {
          int offset_${i} = coordsToOffset(TexCoords, ${o}, ${c});
          vec2 uv = uvFromFlat(${o}, ${c}, offset_${i});
          return sampleTexture(${i}, uv);
        }
      `;return new R(s,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(e,i,a){let o=a.width,c=a.height;if(c===1&&o===1){let d=`
        float ${e}(int index) {
          return sampleTexture(${i}, halfCR);
        }
      `;return new R(d,["coordinates.sampleTexture"])}if(c===1){let d=`
          float ${e}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${o}.0, 0.5);
            return sampleTexture(${i}, uv);
          }
        `;return new R(d,["coordinates.sampleTexture"])}if(o===1){let d=`
          float ${e}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${c}.0);
            return sampleTexture(${i}, uv);
          }
        `;return new R(d,["coordinates.sampleTexture"])}let s=`
        float ${e}(int index) {
          vec2 uv = uvFromFlat(${o}, ${c}, index);
          return sampleTexture(${i}, uv);
        }
      `;return new R(s,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(e,i,a){let o=a.unpackedShape,c=[a.height,a.width];if(c!=null&&hr$1.arraysEqual(o,c)){let g=c[1],jt=c[0],Ht=`
          float ${e}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${g}.0, ${jt}.0);
            return sampleTexture(${i}, uv);
          }
        `;return new R(Ht,["coordinates.sampleTexture"])}let{newShape:s,keptDims:d}=Mr(o),et=s;if(et.length<o.length){let g=$r(o,et),jt=JSON.parse(JSON.stringify(a));jt.unpackedShape=g;let Ht=["col","row"],Kt=`
          ${this.getUnpackedSamplerFromInput(e,i,jt).routineBody}
          float ${e}(int row, int col) {
            return ${e}(${kr$1(Ht,d)});
          }
        `;return new R(Kt,["coordinates.sampleTexture"])}let $t=c[1],h=c[0];if(h===1){let g=`
          float ${e}(int row, int col) {
            int offset_${i} = coordsToOffset(TexCoords, ${$t}, ${h});
            float index = dot(vec3(row, col, offset_${i}), vec3(${o[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${$t}.0);
            return sampleTexture(${i}, uv);
          }
        `;return new R(g,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if($t===1){let g=`
          float ${e}(int row, int col) {
            int offset_${i} = coordsToOffset(TexCoords, ${$t}, ${h});
            float index = dot(vec3(row, col, offset_${i}), vec3(${o[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${h}.0, 0.5);
            return sampleTexture(${i}, uv);
          }
        `;return new R(g,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let b=`
        float ${e}(int row, int col) {
          int index = col * ${o[1]} + row;
          vec2 uv = uvFromFlat(${$t}, ${h}, index);
          return sampleTexture(${i}, uv);
        }
      `;return new R(b,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(e,i,a){let o=a.unpackedShape,c=o[1]*o[2],s=o[2],{newShape:d,keptDims:et}=Mr(o),$t=d;if($t.length<o.length){let jt=$r(o,$t),Ht=["batch","col","row"],Kt=JSON.parse(JSON.stringify(a));Kt.unpackedShape=jt;let or=this.getUnpackedSamplerFromInput(e,i,Kt),jr=et.reverse(),Lr=`
          ${or.routineBody}
          float ${e}(int batch, int row, int col) {
            return ${e}(${kr$1(Ht,jr)});
          }
        `;return new R(Lr,or.dependencies)}let h=a.width,b=a.height,g=`
          float ${e}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${c} + col * ${s} + row;
            vec2 uv = uvFromFlat(${h}, ${b}, index);
            return sampleTexture(${i}, uv);
          }
      `;return new R(g,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(e,i,a){let o=a.unpackedShape,c=o[3],s=o[2]*c,d=o[1]*s,et=a.width,$t=a.height,h=`
        float ${e}(int row, int col, int depth, int depth2) {
          int index = row * ${d} + col * ${s} +
              depth2 * ${c} + depth;
          vec2 uv = uvFromFlat(${et}, ${$t}, index);
          return sampleTexture(${i}, uv);
        }
      `;return new R(h,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(e,i,a){let o=a.unpackedShape,c=o[4],s=o[3]*c,d=o[2]*s,et=o[1]*d,{newShape:$t,keptDims:h}=Mr(o);if($t.length<o.length){let Ht=$r(o,$t),Kt=["row","col","depth","depth2","depth3"],or=JSON.parse(JSON.stringify(a));or.unpackedShape=Ht;let jr=`
          ${this.getUnpackedSamplerFromInput(e,i,or).routineBody}
          float ${e}(int row, int col, int depth, int depth2, int depth3) {
            return ${e}(${kr$1(Kt,h)});
          }
        `;return new R(jr,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let b=a.width,g=a.height,jt=`
        float ${e}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${et} + col * ${d} + depth * ${s} +
          depth3 * ${c} + depth2;
          vec2 uv = uvFromFlat(${b}, ${g}, index);
          return sampleTexture(${i}, uv);
        }
      `;return new R(jt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(e,i,a){let o=a.unpackedShape,c=o[5],s=o[4]*c,d=o[3]*s,et=o[2]*d,$t=o[1]*et,{newShape:h,keptDims:b}=Mr(o);if(h.length<o.length){let Kt=$r(o,h),or=["row","col","depth","depth2","depth3","depth4"],jr=JSON.parse(JSON.stringify(a));jr.unpackedShape=Kt;let Lr=`
            ${this.getUnpackedSamplerFromInput(e,i,jr).routineBody}
            float ${e}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${e}(${kr$1(or,b)});
            }
          `;return new R(Lr,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let g=a.width,jt=a.height,Ht=`
          float ${e}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${$t} + col * ${et} + depth * ${d} +
            depth2 * ${s} + depth3 * ${c} + depth4;
            vec2 uv = uvFromFlat(${g}, ${jt}, index);
            return sampleTexture(${i}, uv);
          }
        `;return new R(Ht,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let e=this.context.outputTextureLayout,i=e.shape.length,a=e.strides,o=e.width,c=e.height,s=[];for(let et=0;et<i-1;++et)s.push(`
        c[${et}] = offset / ${a[et]};`),s.push(`
        offset -= c[${et}] * ${a[et]};`);s.push(`
        c[${i-1}] = offset;`);let d=`
      void toVec(vec2 texCoords, out int c[${i}]) {
        int offset = coordsToOffset(texCoords, ${o}, ${c});
        ${s.join("")}
      }
      void toVec(int offset, out int c[${i}]) {
        ${s.join("")}
      }
    `;return{toVec:new R(d,["coordinates.coordsToOffset"])}}valueFrom(){let e={};return this.context.programInfo.inputNames.forEach((i,a)=>{let o=this.context.inputTextureLayouts[a],c=(o.unpackedShape.length>0?o.unpackedShape:o.shape).length,s=`_${i}`;e[s]=new R(this.getValueFromSingle(i,c,o.width,o.height,!1),[`shapeUtils.indicesToOffset${s}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),s=s+"_T",e[s]=new R(this.getValueFromSingle(i,c,o.width,o.height,!0),[`shapeUtils.indicesToOffset${s}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),e}getValueFromSingle(e,i,a,o,c){let s=`_${e}`;c&&(s=s+"_T");let d=H(this.context.glContext.version);return`
        float ${s}(int m[${i}]) {
          int offset = indicesToOffset${s}(m);
          vec2 coords = offsetToCoords(offset, ${a}, ${o});
          float value = getColorAsFloat(${d.texture2D}(${e}, coords));
          return value;
        }
        `}getPackedValueFrom(e,i,a,o,c){let s=`_${e}_Pack`;c&&(s=s+"_T");let d=H(this.context.glContext.version);return`
        vec4 ${s}(int m[${i}]) {
          int offset = indicesToOffset_${e}(m);
          vec2 coords = offsetToCoords(offset, ${a}, ${o});
          return ${d.texture2D}(${e}, coords);
        }
        `}}}),fo$1,tp$1=L(()=>{Wt$1(),fo$1=class s_ extends dt{constructor(i){super(i)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new R(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new R(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let i=s_.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new R(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${i}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let i=s_.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new R(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${i}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let i=new ArrayBuffer(4),a=new Uint32Array(i),o=new Uint8Array(i);if(a[0]=3735928559,o[0]===239)return!0;if(o[0]===222)return!1;throw new Error("unknown endianness")}}}),co$1,rp$1=L(()=>{Wt$1(),we$1(),co$1=class extends dt{constructor(e){super(e)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let e=H(this.context.glContext.version);return{setFragColor:new R(`
        void setFragColor(float value) {
            ${e.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new R(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}),po$1,np$1=L(()=>{Wt$1(),po$1=class fw extends dt{constructor(i){super(i)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let i=this.context.outputTextureLayout.shape.length,a={};return this.context.programInfo.inputNames.forEach((o,c)=>{let s=this.context.inputTextureLayouts[c].unpackedShape;if(s.length<=i){let d=s.length,et=i-d,$t=`bcastIndices_${o}`,h="";for(let g=0;g<d;++g)h+=`
          realIndices[${g}] = int( mod(float(bcastedIndices[${et+g}]), ${s[g]}.0) );
          `;let b=`
        void ${$t} (int bcastedIndices[${i}], out int realIndices[${d}]) {
          ${h}
        }
        `;a[$t]=new R(b)}}),a}bcastMatmulIndex(){let i=this.context.outputTextureLayout.shape.length,a={};return this.context.programInfo.inputNames.forEach((o,c)=>{let s=this.context.inputTextureLayouts[c].shape;if(!(s.length<2||s.length>i)){let d=s.length,et=i-d,$t=`bcastMatmulIndices_${o}`,h="";for(let g=0;g<d-2;++g)h+=`
          realIndices[${g}] = int( mod(float(bcastedIndices[${et+g}]), ${s[g]}.0) );
          `;let b=`
        void ${$t}(int bcastedIndices[${i}], out int realIndices[${d}]) {
          ${h}
          realIndices[${d-1}] = bcastedIndices[${i-1}];
          realIndices[${d-2}] = bcastedIndices[${i-2}];
        }
        `;a[$t]=new R(b)}}),a}indicesToOffset(){let i={};return this.context.programInfo.inputNames.forEach((a,o)=>{let c=this.context.inputTextureLayouts[o].shape,s=this.context.inputTextureLayouts[o].strides,d=c.length,et=`indicesToOffset_${a}`;i[et]=new R(fw.indexToOffsetSingle(et,d,s)),et=`indicesToOffset_${a}_T`,i[et]=new R(fw.indexToOffsetSingle(et,d,s.slice().reverse()))}),i}static indexToOffsetSingle(i,a,o){let c="";for(let s=a-1;s>=0;--s)c+=`
        offset += indices[${s}] * ${o[s]};
        `;return`
      int ${i}(int indices[${a}]) {
        int offset = 0;
        ${c}
        return offset;
      }
      `}offsetToIndices(){let i={};return this.context.programInfo.inputNames.forEach((a,o)=>{let c=this.context.inputTextureLayouts[o].shape,s=this.context.inputTextureLayouts[o].strides,d=c.length,et=`offsetToIndices_${a}`;i[et]=new R(fw.offsetToIndicesSingle(et,d,s)),et=`offsetToIndices_${a}_T`,i[et]=new R(fw.offsetToIndicesSingle(et,d,s.slice().reverse()))}),i}static offsetToIndicesSingle(i,a,o){let c=[];for(let s=0;s<a-1;++s)c.push(`
      indices[${s}] = offset / ${o[s]};`),c.push(`
        offset -= indices[${s}] * ${o[s]};`);return c.push(`
      indices[${a-1}] = offset;`),`
      void ${i}(int offset, out int indices[${a}]) {
        ${c.join("")}
      }
      `}incrementIndices(){let i={};return this.context.programInfo.inputNames.forEach((a,o)=>{let c=this.context.inputTextureLayouts[o].shape,s=c.length,d=`incrementIndices_${a}`,et="";for(let h=0;h<s;++h)et+=`
        shape[${h}] = ${c[h]};`;let $t=`
        void ${d}(int axis, out int indices[${s}]) {
          int shape[${s}];
          ${et};
          for(int i = ${s} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;i[d]=new R($t)}),i}}}),ho$1,op$1=L(()=>{Wt$1(),ho$1=class extends dt{constructor(e){super(e)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let e=this.context.outputTextureLayout.shape.length,i={add:"+=",sub:"-=",mul:"*=",div:"/="},a={};for(let o in i){let c=`${o}Vec`,s="";for(let et=0;et<e;++et)s+=`
          dest[${et}] ${i[o]} src[${et}];
          `;let d=`
        void ${c}(int src[${e}], out int dest[${e}]) {
          ${s}
        }
        `;a[c]=new R(d)}return a}copyVec(){let e=this.context.outputTextureLayout.shape.length,i="";for(let o=0;o<e;++o)i+=`
        dest[${o}] = src[${o}];
        `;let a=`
      void copyVec(int src[${e}], out int dest[${e}]) {
        ${i}
      }
      `;return{copyVec:new R(a)}}setVecItem(){let e=this.context.outputTextureLayout.shape.length,i=`
        if(index < 0)
            index =${e} + index;
        if (index == 0)
            m[0] = value;
        `;for(let o=1;o<e-1;++o)i+=`
        else if (index == ${o})
            m[${o}] = value;
            `;i+=`
        else
            m[${e-1}] = value;
        `;let a=`
      void setVecItem(out int m[${e}], int index, int value) {
        ${i}
      }
        `;return{setVecItem:new R(a)}}getVecItem(){let e=this.context.outputTextureLayout.shape.length,i=`
        if(index < 0)
            index = ${e} + index;
        if (index == 0)
            return m[0];
      `;for(let o=1;o<e-1;++o)i+=`
        else if (index == ${o})
            return m[${o}];
      `;i+=`
        else
            return m[${e-1}];
        `;let a=`
      int getVecItem(int m[${e}], int index) {
        ${i}
      }
    `;return{getVecItem:new R(a)}}}}),Wi$1,ip$1=L(()=>{ep$1(),tp$1(),rp$1(),np$1(),op$1(),Wi$1={encoding:fo$1,fragcolor:co$1,vec:ho$1,shapeUtils:po$1,coordinates:lo$1}}),mo$1,ap$1=L(()=>{Wt$1(),Zc$1(),ip$1(),we$1(),mo$1=class{constructor(e,i,a,o){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new Zn$1(e,i,a,o),Object.keys(Wi$1).forEach(s=>{let d=new Wi$1[s](this.context);this.libs[s]=d});let c=this.glslLibRoutineDependencyGraph;for(let s in this.libs){let d=this.libs[s].getFunctions();for(let et in d){let $t=s+"."+et,h;c[$t]?(h=c[$t],h.routineBody=d[et].routineBody):(h=new cn($t,d[et].routineBody),c[$t]=h);let b=d[et].dependencies;if(b)for(let g=0;g<b.length;++g)if(c[b[g]])h.addDependency(c[b[g]]);else{let jt=new cn(b[g]);c[b[g]]=jt,h.addDependency(jt)}}}}preprocess(){let e=this.context.programInfo,i=e.shaderSource;return this.context.programInfo.hasMain||(i=`${i}
      ${Mu$1(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),i=Jc$1(i),`${Ru$1(this.context.glContext.version)}
    ${this.getUniforms(e.inputNames,e.variables)}
    ${this.getImports(i)}
    ${i}`}getImports(e){let i=this.selectGlslLibRoutinesToBeIncluded(e);if(i.length===0)return"";let a="";for(let o=0;o<i.length;++o)if(i[o].routineBody)a+=i[o].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${i[o].name}`);return a}selectGlslLibRoutinesToBeIncluded(e){let i=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(a=>{let o=a.split(".")[1];e.indexOf(o)!==-1&&i.push(this.glslLibRoutineDependencyGraph[a])}),Qn$1.returnOrderedNodes(i)}getUniforms(e,i){let a=[];if(e)for(let o of e)a.push(`uniform sampler2D ${o};`);if(i)for(let o of i)a.push(`uniform ${o.type} ${o.name}${o.arrayLength?`[${o.arrayLength}]`:""};`);return a.join(`
`)}}}),bo$1,sp$1=L(()=>{Ot$1(),lt$1(),ap$1(),we$1(),bo$1=class{constructor(e,i,a){this.profiler=e,this.glContext=i,this.textureLayoutStrategy=a,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,i){this.repo.set(e,i)}run(e,i,a){this.profiler.event("op",`ProgramManager.run ${e.programInfo.name??"unknown kernel"}`,()=>{let o=this.glContext.gl,c=e.program;o.useProgram(c);try{this.bindOutput(a),this.attributesBound||this.bindAttributes(e.attribLocations),this.bindUniforms(e.uniformLocations,e.programInfo.variables??[],i)}catch(s){throw ce.error("ProgramManager",e.programInfo.shaderSource),s}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(e=>this.glContext.deleteProgram(e.program))}build(e,i,a){return this.profiler.event("backend","ProgramManager.build",()=>{let o=new mo$1(this.glContext,e,i,a),c=o.preprocess(),s=this.compile(c);return{programInfo:e,program:s,uniformLocations:this.getUniformLocations(s,o.context.programInfo.inputNames,o.context.programInfo.variables),attribLocations:this.getAttribLocations(s)}})}compile(e){if(!this.vertexShader){ce.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let o=Nu$1(this.glContext.version);this.vertexShader=this.glContext.compileShader(o,this.glContext.gl.VERTEX_SHADER)}Z.debug&&ce.verbose("ProrgramManager",`FragShader:
${e}
`);let i=this.glContext.compileShader(e,this.glContext.gl.FRAGMENT_SHADER),a=this.glContext.createProgram(this.vertexShader,i);return this.glContext.deleteShader(i),a}bindOutput(e){let i=e.width,a=e.height;ce.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${i}/${a}, shape=${e.shape}, type=${e.tensor.type}`),this.glContext.attachFramebuffer(e.texture,i,a)}bindAttributes(e){let i=e.position,a=e.textureCoord;this.glContext.setVertexAttributes(i,a),this.attributesBound=!0}bindUniforms(e,i,a){var s;let o=this.glContext.gl,c=0;for(let{name:d,type:et,location:$t,arrayLength:h}of e){let b=(s=i.find(g=>g.name===d))==null?void 0:s.data;if(et!=="sampler2D"&&!b)throw new Error(`variable '${d}' does not have data defined in program info`);switch(et){case"sampler2D":this.bindTexture(a[c],$t,c),c++;break;case"float":h?o.uniform1fv($t,b):o.uniform1f($t,b);break;case"int":h?o.uniform1iv($t,b):o.uniform1i($t,b);break;default:throw new Error(`Uniform not implemented: ${et}`)}}}bindTexture(e,i,a){this.glContext.bindTextureToUniform(e.texture,a,i)}getAttribLocations(e){return{position:this.getAttribLocation(e,"position"),textureCoord:this.getAttribLocation(e,"textureCoord")}}getUniformLocations(e,i,a){let o=[];if(i)for(let c of i)o.push({name:c,type:"sampler2D",location:this.getUniformLocation(e,c)});if(a)for(let c of a)o.push({...c,location:this.getUniformLocation(e,c.name)});return o}getUniformLocation(e,i){let a=this.glContext.gl.getUniformLocation(e,i);if(a===null)throw new Error(`Uniform ${i} not found.`);return a}getAttribLocation(e,i){return this.glContext.gl.getAttribLocation(e,i)}}}),go$1,up$1=L(()=>{lt$1(),ln(),go$1=class{constructor(e,i,a,o){this.glContext=e,this.layoutStrategy=i,this.profiler=a,this.config=o,this.pendingRead=new Map,o.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(e,i,a,o){let c=this.toEncoderType(e),s=this.glContext.getEncoder(c,i.channels||1,o);if(i.isPacked&&o===1)throw new Error("not implemented");let d=i.width,et=i.height,$t,h;if(this.config.reuseTextures){$t=`${d}x${et}_${s.format}_${s.internalFormat}_${s.textureType}`,h=this.inUseTextures.get($t),h||(h=[],this.inUseTextures.set($t,h));let g=this.idleTextures.get($t);if(g&&g.length>0){let jt=g.pop();return h.push(jt),o===1&&this.glContext.updateTexture(jt,d,et,s,this.toTextureData(e,a)),jt}}ce.verbose("TextureManager",`Creating new texture of size ${i.width}x${i.height}`);let b=this.glContext.allocateTexture(d,et,s,this.toTextureData(e,a));return this.config.reuseTextures&&(h.push(b),this.textureLookup.set(b,$t)),b}readTexture(e,i,a){return a||(a=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let o=e.shape.reduce((s,d)=>s*d)*a,c=this.glContext.readTexture(e.texture,e.width,e.height,o,this.toEncoderType(i),a);return this.toTensorData(i,c)})}async readTextureAsync(e,i,a){let o=e.tensor.dataId;if(a||(a=1),this.pendingRead.has(o)){let c=this.pendingRead.get(o);return new Promise(s=>c==null?void 0:c.push(s))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(o,[]);let c=e.shape.reduce(($t,h)=>$t*h)*a;await this.glContext.createAndWaitForFence();let s=this.glContext.readTexture(e.texture,e.width,e.height,c,this.toEncoderType(i),a),d=this.toTensorData(i,s),et=this.pendingRead.get(o);return this.pendingRead.delete(o),et==null||et.forEach($t=>$t(d)),d})}readUint8TextureAsFloat(e){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let i=e.shape.reduce((o,c)=>o*c),a=this.glContext.readTexture(e.texture,e.width,e.height,i*4,"byte",4);return new Float32Array(a.buffer,a.byteOffset,i)})}releaseTexture(e,i){let a;if(this.config.reuseTextures&&(a=this.textureLookup.get(e.texture),a)){i&&this.textureLookup.delete(a);let o=this.inUseTextures.get(a);if(o){let c=o.indexOf(e.texture);if(c!==-1){o.splice(c,1);let s=this.idleTextures.get(a);s||(s=[],this.idleTextures.set(a,s)),s.push(e.texture)}}}(!a||i)&&(ce.verbose("TextureManager",`Deleting texture of size ${e.width}x${e.height}`),this.glContext.deleteTexture(e.texture))}toTensorData(e,i){switch(e){case"int16":return i instanceof Int16Array?i:Int16Array.from(i);case"int32":return i instanceof Int32Array?i:Int32Array.from(i);case"int8":return i instanceof Int8Array?i:Int8Array.from(i);case"uint16":return i instanceof Uint16Array?i:Uint16Array.from(i);case"uint32":return i instanceof Uint32Array?i:Uint32Array.from(i);case"uint8":case"bool":return i instanceof Uint8Array?i:Uint8Array.from(i);case"float32":return i instanceof Float32Array?i:Float32Array.from(i);case"float64":return i instanceof Float64Array?i:Float64Array.from(i);default:throw new Error(`TensorData type ${e} is not supported`)}}toTextureData(e,i){if(i)return i instanceof Float32Array?i:new Float32Array(i)}toEncoderType(e){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),yo$1,lp$1=L(()=>{lt$1(),_s$1(),el$1(),Xc$1(),sp$1(),Vi(),up$1(),yo$1=class{constructor(e,i){this.backend=e,this.context=i,this.layoutStrategy=new uo$1(e.glContext.maxTextureSize),this.programManager=new bo$1(this.context.profiler,e.glContext,this.layoutStrategy),this.textureManager=new go$1(e.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:e.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=e.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Jn$1(this)}onGraphInitialized(e){let i=e.getValues().filter(a=>a.from===-1&&a.tensor).map(a=>a.tensor.dataId);this.initializers=new Set(i)}isInitializer(e){return this.initializers?this.initializers.has(e):!1}addInitializer(e){this.initializers.add(e)}getTextureData(e,i){return i?this.packedTextureDataCache.get(e):this.unpackedTextureDataCache.get(e)}setTextureData(e,i,a=!1){ce.verbose("WebGLSessionHandler","Storing Texture data in cache"),a?this.packedTextureDataCache.set(e,i):this.unpackedTextureDataCache.set(e,i)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(e=>this.textureManager.releaseTexture(e,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(e=>this.textureManager.releaseTexture(e,!0)),this.unpackedTextureDataCache=new Map}resolve(e,i,a){let o=vs$1(e,i,Yc$1);return{impl:o.opImpl,context:o.opInit?o.opInit(e,a):e}}}});function jb(e){let i=0;for(;i<e.length&&e[i]();++i);return i-1}var hn,fp$1=L(()=>{Ot$1(),ln(),ln(),Bt$1(),hn=class{constructor(e,i){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=e,this.version=i,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(e,i,a,o){let c=this.gl,s=c.createTexture();c.bindTexture(c.TEXTURE_2D,s),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);let d=o?a.encode(o,e*i):null;return c.texImage2D(c.TEXTURE_2D,0,a.internalFormat,e,i,0,a.format,a.textureType,d),this.checkError(),s}updateTexture(e,i,a,o,c){let s=this.gl;s.bindTexture(s.TEXTURE_2D,e);let d=o.encode(c,i*a);s.texSubImage2D(s.TEXTURE_2D,0,0,0,i,a,o.format,o.textureType,d),this.checkError()}attachFramebuffer(e,i,a){let o=this.gl;o.bindTexture(o.TEXTURE_2D,e),o.bindFramebuffer(o.FRAMEBUFFER,this.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e,0),this.checkError(),o.viewport(0,0,i,a),o.scissor(0,0,i,a)}readTexture(e,i,a,o,c,s){let d=this.gl;s||(s=1),this.frameBufferBound||this.attachFramebuffer(e,i,a);let et=this.getEncoder(c,s),$t=et.allocate(i*a);return d.bindTexture(d.TEXTURE_2D,e),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,e,0),d.readPixels(0,0,i,a,d.RGBA,et.textureType,$t),this.checkError(),et.decode($t,o)}isFramebufferReady(){return!0}getActiveTexture(){let e=this.gl;return`TEXTURE${e.getParameter(this.gl.ACTIVE_TEXTURE)-e.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(e,i){let a=this.gl;a.vertexAttribPointer(e,3,a.FLOAT,!1,20,0),a.enableVertexAttribArray(e),i!==-1&&(a.vertexAttribPointer(i,2,a.FLOAT,!1,20,12),a.enableVertexAttribArray(i)),this.checkError()}createProgram(e,i){let a=this.gl,o=a.createProgram();return a.attachShader(o,e),a.attachShader(o,i),a.linkProgram(o),o}compileShader(e,i){let a=this.gl,o=a.createShader(i);if(!o)throw new Error(`createShader() returned null with type ${i}`);if(a.shaderSource(o,e),a.compileShader(o),a.getShaderParameter(o,a.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${a.getShaderInfoLog(o)}
Shader source:
${e}`);return o}deleteShader(e){this.gl.deleteShader(e)}bindTextureToUniform(e,i,a){let o=this.gl;o.activeTexture(o.TEXTURE0+i),this.checkError(),o.bindTexture(o.TEXTURE_2D,e),this.checkError(),o.uniform1i(a,i),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Z.debug){let e=this.gl,i=e.getError(),a="";switch(i){case e.NO_ERROR:return;case e.INVALID_ENUM:a="INVALID_ENUM";break;case e.INVALID_VALUE:a="INVALID_VALUE";break;case e.INVALID_OPERATION:a="INVALID_OPERATION";break;case e.INVALID_FRAMEBUFFER_OPERATION:a="INVALID_FRAMEBUFFER_OPERATION";break;case e.OUT_OF_MEMORY:a="OUT_OF_MEMORY";break;case e.CONTEXT_LOST_WEBGL:a="CONTEXT_LOST_WEBGL";break;default:a=`Unknown WebGL Error: ${i.toString(16)}`}throw new Error(a)}}deleteTexture(e){this.gl.deleteTexture(e)}deleteProgram(e){this.gl.deleteProgram(e)}getEncoder(e,i,a=0){if(this.version===2)return new Xn$1(this.gl,i);switch(e){case"float":return a===1||this.isRenderFloat32Supported?new un(this.gl,i):new un(this.gl,i,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Kn$1(this.gl,i);default:throw new Error(`Invalid dataType: ${e}`)}}clearActiveTextures(){let e=this.gl;for(let i=0;i<this.maxTextureImageUnits;++i)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(this.framebuffer),e.bindBuffer(e.ARRAY_BUFFER,null),e.deleteBuffer(this.vertexbuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let e=this.gl,i=e.createBuffer();if(!i)throw new Error("createBuffer() returned null");let a=this.createDefaultGeometry();return e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW),this.checkError(),i}createFramebuffer(){let e=this.gl.createFramebuffer();if(!e)throw new Error("createFramebuffer returned null");return e}queryVitalParameters(){let e=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let e=this.gl,i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);let a=this.version===2?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,a,1,1,0,e.RGBA,e.FLOAT,null);let o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0);let c=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(i),e.deleteFramebuffer(o),c}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let e=this.gl,i,a,o,c,s;try{i=e.createTexture(),a=e.createFramebuffer(),e.bindTexture(e.TEXTURE_2D,i);let d=this.version===2?e.RGBA32F:e.RGBA;return e.texImage2D(e.TEXTURE_2D,0,d,1,1,0,e.RGBA,e.FLOAT,null),e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.enable(e.BLEND),o=e.createShader(e.VERTEX_SHADER),!o||(e.shaderSource(o,"void main(){}"),e.compileShader(o),c=e.createShader(e.FRAGMENT_SHADER),!c)||(e.shaderSource(c,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),e.compileShader(c),s=e.createProgram(),!s)?!1:(e.attachShader(s,o),e.attachShader(s,c),e.linkProgram(s),e.useProgram(s),e.drawArrays(e.POINTS,0,1),e.getError()===e.NO_ERROR)}finally{e.disable(e.BLEND),s&&e.deleteProgram(s),o&&e.deleteShader(o),c&&e.deleteShader(c),a&&(e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(a)),i&&(e.bindTexture(e.TEXTURE_2D,null),e.deleteTexture(i))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let e=this.gl,i=this.disjointTimerQueryWebgl2Extension,a=e.createQuery();return e.beginQuery(i.TIME_ELAPSED_EXT,a),a}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let e=this.gl,i=this.disjointTimerQueryWebgl2Extension;e.endQuery(i.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(e){let i=!1,a=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let o=this.gl,c=this.disjointTimerQueryWebgl2Extension;i=o.getQueryParameter(e,o.QUERY_RESULT_AVAILABLE),a=o.getParameter(c.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return i&&!a}getTimerResult(e){let i=0;if(this.version===2){let a=this.gl;i=a.getQueryParameter(e,a.QUERY_RESULT),a.deleteQuery(e)}else throw new Error("WebGL1 profiling currently not supported");return i/1e6}async waitForQueryAndGetTime(e){return await mi$1(()=>this.isTimerResultAvailable(e)),this.getTimerResult(e)}async createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let i,a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),o===null?i=()=>!0:i=()=>{let c=a.clientWaitSync(o,0,0);return c===a.ALREADY_SIGNALED||c===a.CONDITION_SATISFIED},{query:o,isFencePassed:i}}async pollFence(e){return new Promise(i=>{this.addItemToPoll(()=>e.isFencePassed(),()=>i())})}pollItems(){let e=jb(this.itemsToPoll.map(i=>i.isDoneFn));for(let i=0;i<=e;++i){let{resolveFn:a}=this.itemsToPoll[i];a()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}async addItemToPoll(e,i){this.itemsToPoll.push({isDoneFn:e,resolveFn:i}),!(this.itemsToPoll.length>1)&&await mi$1(()=>(this.pollItems(),this.itemsToPoll.length===0))}}});function Hi$1(e){let i;if((!e||e==="webgl2")&&"webgl2"in Gr?i=Gr.webgl2:(!e||e==="webgl")&&"webgl"in Gr&&(i=Gr.webgl),!i)try{let o=Xb();i=cp$1(o,e)}catch{let o=Yb();i=cp$1(o,e)}e=e||i.version===1?"webgl":"webgl2";let a=i.gl;return Gr[e]=i,a.isContextLost()?(delete Gr[e],Hi$1(e)):(a.disable(a.DEPTH_TEST),a.disable(a.STENCIL_TEST),a.disable(a.BLEND),a.disable(a.DITHER),a.disable(a.POLYGON_OFFSET_FILL),a.disable(a.SAMPLE_COVERAGE),a.enable(a.SCISSOR_TEST),a.enable(a.CULL_FACE),a.cullFace(a.BACK),i)}function cp$1(e,i){let a={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},o,c=a;if((!i||i==="webgl2")&&(o=e.getContext("webgl2",c),o))try{return new hn(o,2)}catch(s){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${s}`)}if((!i||i==="webgl")&&(o=e.getContext("webgl",c)||e.getContext("experimental-webgl",c),o))try{return new hn(o,1)}catch(s){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${s}`)}throw new Error("WebGL is not supported")}function Yb(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let e=document.createElement("canvas");return e.width=1,e.height=1,e}function Xb(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var Gr,pp$1=L(()=>{lt$1(),fp$1(),Gr={}}),To$1,dp$1=L(()=>{Ot$1(),lt$1(),lp$1(),pp$1(),To$1=class{get contextId(){return Z.webgl.contextId}set contextId(e){Z.webgl.contextId=e}get matmulMaxBatchSize(){return Z.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(e){Z.webgl.matmulMaxBatchSize=e}get textureCacheMode(){return Z.webgl.textureCacheMode}set textureCacheMode(e){Z.webgl.textureCacheMode=e}get pack(){return Z.webgl.pack}set pack(e){Z.webgl.pack=e}get async(){return Z.webgl.async}set async(e){Z.webgl.async=e}initialize(){try{return this.glContext=Hi$1(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),ce.setWithEnv(Z),Z.webgl.context||Object.defineProperty(Z.webgl,"context",{value:this.glContext.gl}),ce.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(e){return ce.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${e}`),!1}}createSessionHandler(e){return new yo$1(this,e)}dispose(){this.glContext.dispose()}}});async function qi$1(e){if(e){let i=typeof e=="string"?[e]:e;for(let a of i){let o=hp$1.get(a);if(o)return o;let c=await Jb(a);if(c)return c}}else return qi$1(["webgl"]);throw new Error("no available backend to use")}async function Jb(e){let i=Kb;if(typeof i[e]<"u"&&Zb(i[e])){let a=i[e],o=a.initialize();if(typeof o=="object"&&"then"in o&&(o=await o),o)return hp$1.set(e,a),a}}function Zb(e){let i=e;return"initialize"in i&&typeof i.initialize=="function"&&"createSessionHandler"in i&&typeof i.createSessionHandler=="function"&&"dispose"in i&&typeof i.dispose=="function"}var hp$1,Kb,mp$1=L(()=>{dp$1(),hp$1=new Map,Kb={webgl:new To$1}}),ji$1,xo$1,bp=L(()=>{lt$1(),ji$1=class{constructor(e,i){this.op=e,this.node=i}},xo$1=class{constructor(e,i,a){this.graph=e,this.profiler=a,this.initialize(i)}initialize(e){this.profiler.event("session","ExecutionPlan.initialize",()=>{let i=this.graph.getNodes();if(i.length!==e.length)throw new Error("The size of nodes and OPs do not match.");this._ops=e.map((a,o)=>new ji$1(a,i[o])),this.reset(),this._starter=[],this._ops.forEach((a,o)=>{let c=!0;for(let s of a.node.inputs)if(!this._values[s]&&this.graph.getInputIndices().indexOf(s)===-1){c=!1;break}c&&this._starter.push(o)})})}reset(){this._values=this.graph.getValues().map(e=>e.tensor)}async execute(e,i){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let a=e.createInferenceHandler(),o=this.graph.getInputIndices();if(i.length!==o.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${i.length} expected: ${o.length}`);i.forEach((h,b)=>{let g=o[b];this._values[g]=h});let c=this._starter.slice(0),s=this.graph.getValues(),d=this.graph.getNodes(),et=0;for(;et<c.length;){let h=c[et++],b=this._ops[h],g=b.node.inputs.map(or=>this._values[or]);if(g.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${b.node}`);let jt=g;ce.verbose("ExecPlan",`Runing op:${b.node.name} (${jt.map((or,jr)=>`'${b.node.inputs[jr]}': ${or.type}[${or.dims.join(",")}]`).join(", ")})`);let Ht=await this.profiler.event("node",b.node.name,async()=>b.op.impl(a,jt,b.op.context));if(Ht.length!==b.node.outputs.length)throw new Error("the size of output does not match model definition.");Ht.forEach((or,jr)=>{let Lr=b.node.outputs[jr];if(this._values[Lr])throw new Error(`output [${Lr}] already has value: op:${b.node.name}`);this._values[Lr]=or});let Kt=new Set;Ht.forEach((or,jr)=>{let Lr=b.node.outputs[jr];for(let ir of s[Lr].to){let qr=d[ir],vn=!0;for(let xn of qr.inputs)if(!this._values[xn]){vn=!1;break}vn&&Kt.add(ir)}}),c.push(...Kt)}let $t=[];for(let h=0;h<this.graph.getOutputIndices().length;h++){let b=this.graph.getOutputIndices()[h],g=this._values[b];if(g===void 0)throw new Error(`required output [${b}] does not have value`);b===0?await g.getData():g.data,$t.push(g)}return ce.verbose("ExecPlan","disposing of inferenceHandler"),a.dispose(),$t})}}}),oe,bt,mn,gp$1=L(()=>{tn$1(),oe=Ar(Cr()),yr(),fe$1(),bt=V.experimental.fbs,mn=class hw{constructor(i){if(this._attributes=new Map,i!=null){for(let a of i)a instanceof oe.onnx.AttributeProto?this._attributes.set(a.name,[hw.getValue(a),hw.getType(a)]):a instanceof bt.Attribute&&this._attributes.set(a.name(),[hw.getValue(a),hw.getType(a)]);if(this._attributes.size<i.length)throw new Error("duplicated attribute names")}}set(i,a,o){this._attributes.set(i,[o,a])}delete(i){this._attributes.delete(i)}getFloat(i,a){return this.get(i,"float",a)}getInt(i,a){return this.get(i,"int",a)}getString(i,a){return this.get(i,"string",a)}getTensor(i,a){return this.get(i,"tensor",a)}getFloats(i,a){return this.get(i,"floats",a)}getInts(i,a){return this.get(i,"ints",a)}getStrings(i,a){return this.get(i,"strings",a)}getTensors(i,a){return this.get(i,"tensors",a)}get(i,a,o){let c=this._attributes.get(i);if(c===void 0){if(o!==void 0)return o;throw new Error(`required attribute not found: ${i}`)}if(c[1]!==a)throw new Error(`type mismatch: expected ${a} but got ${c[1]}`);return c[0]}static getType(i){let a=i instanceof oe.onnx.AttributeProto?i.type:i.type();switch(a){case oe.onnx.AttributeProto.AttributeType.FLOAT:return"float";case oe.onnx.AttributeProto.AttributeType.INT:return"int";case oe.onnx.AttributeProto.AttributeType.STRING:return"string";case oe.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case oe.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case oe.onnx.AttributeProto.AttributeType.INTS:return"ints";case oe.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case oe.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${oe.onnx.AttributeProto.AttributeType[a]}`)}}static getValue(i){let a=i instanceof oe.onnx.AttributeProto?i.type:i.type();if(a===oe.onnx.AttributeProto.AttributeType.GRAPH||a===oe.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let o=this.getValueNoCheck(i);if(a===oe.onnx.AttributeProto.AttributeType.INT&&it.isLong(o))return it.longToNumber(o);if(a===oe.onnx.AttributeProto.AttributeType.INTS){let c=o,s=new Array(c.length);for(let d=0;d<c.length;d++){let et=c[d];s[d]=it.longToNumber(et)}return s}if(a===oe.onnx.AttributeProto.AttributeType.TENSOR)return i instanceof oe.onnx.AttributeProto?$e.fromProto(o):$e.fromOrtTensor(o);if(a===oe.onnx.AttributeProto.AttributeType.TENSORS){if(i instanceof oe.onnx.AttributeProto)return o.map(c=>$e.fromProto(c));if(i instanceof bt.Attribute)return o.map(c=>$e.fromOrtTensor(c))}return a===oe.onnx.AttributeProto.AttributeType.STRING&&i instanceof oe.onnx.AttributeProto?sn$1(o):a===oe.onnx.AttributeProto.AttributeType.STRINGS&&i instanceof oe.onnx.AttributeProto?o.map(sn$1):o}static getValueNoCheck(i){return i instanceof oe.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(i):this.getValueNoCheckFromOrtFormat(i)}static getValueNoCheckFromOnnxFormat(i){switch(i.type){case oe.onnx.AttributeProto.AttributeType.FLOAT:return i.f;case oe.onnx.AttributeProto.AttributeType.INT:return i.i;case oe.onnx.AttributeProto.AttributeType.STRING:return i.s;case oe.onnx.AttributeProto.AttributeType.TENSOR:return i.t;case oe.onnx.AttributeProto.AttributeType.GRAPH:return i.g;case oe.onnx.AttributeProto.AttributeType.FLOATS:return i.floats;case oe.onnx.AttributeProto.AttributeType.INTS:return i.ints;case oe.onnx.AttributeProto.AttributeType.STRINGS:return i.strings;case oe.onnx.AttributeProto.AttributeType.TENSORS:return i.tensors;case oe.onnx.AttributeProto.AttributeType.GRAPHS:return i.graphs;default:throw new Error(`unsupported attribute type: ${oe.onnx.AttributeProto.AttributeType[i.type]}`)}}static getValueNoCheckFromOrtFormat(i){switch(i.type()){case bt.AttributeType.FLOAT:return i.f();case bt.AttributeType.INT:return i.i();case bt.AttributeType.STRING:return i.s();case bt.AttributeType.TENSOR:return i.t();case bt.AttributeType.GRAPH:return i.g();case bt.AttributeType.FLOATS:return i.floatsArray();case bt.AttributeType.INTS:{let a=[];for(let o=0;o<i.intsLength();o++)a.push(i.ints(o));return a}case bt.AttributeType.STRINGS:{let a=[];for(let o=0;o<i.stringsLength();o++)a.push(i.strings(o));return a}case bt.AttributeType.TENSORS:{let a=[];for(let o=0;o<i.tensorsLength();o++)a.push(i.tensors(o));return a}default:throw new Error(`unsupported attribute type: ${bt.AttributeType[i.type()]}`)}}}}),Xi$1,wo$1,Ki$1,Mt$1,vo$1,Yi$1,yp$1=L(()=>{gp$1(),tn$1(),Xi$1=Ar(Cr()),yr(),fe$1(),wo$1=V.experimental.fbs,Ki$1={from:(e,i)=>new Yi$1(e,i)},Mt$1=class{constructor(e){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,e&&(this.type=We$1.tensorValueTypeFromProto(e.type.tensorType))}get from(){return this._from}get to(){return this._to}},vo$1=class{constructor(e,i){e instanceof Xi$1.onnx.NodeProto?(this.name=e.name,this.opType=e.opType,this.attributes=new mn(e.attribute)):e instanceof wo$1.Node&&(this.name=i??e.name(),this.opType=e.opType(),this.attributes=new mn(We$1.tensorAttributesFromORTFormat(e))),this.inputs=[],this.outputs=[],this.executeNode=!0}},Yi$1=class{constructor(e,i){if(!e)throw new TypeError("graph is empty");this.buildGraph(e),this.transformGraph(i),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(e){if(e instanceof Xi$1.onnx.GraphProto)this.buildGraphFromOnnxFormat(e);else if(e instanceof wo$1.Graph)this.buildGraphFromOrtFormat(e);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(e){let i=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let a=new Map;if(!e.input)throw new Error("missing information in graph: input");let o=[];for(let c of e.input){if(i.has(c.name))throw new Error(`duplicated input name: ${c.name}`);let s=this._allData.push(new Mt$1(c))-1;i.set(c.name,s),o.push(c.name)}if(!e.initializer)throw new Error("missing information in graph: initializer");for(let c of e.initializer){let s=i.get(c.name);if(s===void 0){let d=new Mt$1;d.type={shape:{dims:We$1.tensorDimsFromProto(c.dims)},tensorType:We$1.tensorDataTypeFromProto(c.dataType)},s=this._allData.push(d)-1,i.set(c.name,s)}this._allData[s]._from=-1,this._allData[s].tensor=$e.fromProto(c)}for(let c=0;c<this._allData.length;c++)this._allData[c].tensor||(this._allInputIndices.push(c),this._allInputNames.push(o[c]));if(!e.output)throw new Error("missing information in graph: output");for(let c of e.output){if(i.has(c.name))throw new Error(`duplicated output name: ${c.name}`);let s=this._allData.push(new Mt$1(c))-1;i.set(c.name,s),this._allOutputIndices.push(s),this._allOutputNames.push(c.name)}if(!e.node)throw new Error("missing information in graph: node");for(let c of e.node){if(!c.name)for(let d=0;;d++){let et=`unnamed_${c.opType}_${d}`;if(!a.has(et)){c.name=et;break}}if(a.has(c.name))throw new Error(`duplicated node name: ${c.name}`);let s=this._nodes.push(new vo$1(c))-1;a.set(c.name,s)}for(let c=0;c<this._nodes.length;c++){let s=this._nodes[c],d=e.node[c];if(!d.output)throw new Error(`missing output for node: ${d.name}`);for(let et of d.output){let $t=i.get(et);if(typeof $t>"u"&&($t=this._allData.push(new Mt$1)-1,i.set(et,$t)),s.outputs.push($t),this._allData[$t]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${$t}`);if(this._allData[$t]._from=c,d.opType==="Constant"){if(!d.attribute||d.attribute.length!==1||!d.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!d.output||d.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");s.outputs.pop(),s.executeNode=!1,this._allData[$t]._from=-1,this._allData[$t].tensor=$e.fromProto(d.attribute[0].t)}}}for(let c=0;c<this._nodes.length;c++){let s=this._nodes[c],d=e.node[c];if(!d.input)throw new Error(`missing input for node: ${d.name}`);for(let et of d.input){let $t=i.get(et);if(typeof $t>"u"){if(et===""&&(d.input.length===3||d.input.length===4)&&d.opType==="Resize")continue;throw new Error(`unrecognized input '${et}' for node: ${d.name}`)}s.inputs.push($t),this._allData[$t]._to.push(c)}}return!0}buildGraphFromOrtFormat(e){var c,s,d;let i=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let a=new Map,o=[];for(let et=0;et<e.inputsLength();et++){let $t=e.inputs(et);if(i.has($t))throw new Error(`duplicated input name: ${$t}`);for(let h=0;h<e.nodeArgsLength();h++)if(((c=e.nodeArgs(h))==null?void 0:c.name())===$t){let b=new Mt$1;if(((d=(s=e.nodeArgs(h))==null?void 0:s.type())==null?void 0:d.valueType())!==wo$1.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let g=e.nodeArgs(h).type().value(new wo$1.TensorTypeAndShape),jt=We$1.tensorDataTypeFromProto(g.elemType()),Ht=g.shape(),Kt=[];for(let jr=0;jr<Ht.dimLength();jr++)Kt.push(it.longToNumber(Ht.dim(jr).value().dimValue()));b.type={shape:{dims:Kt},tensorType:jt};let or=this._allData.push(b)-1;i.set($t,or),o.push($t)}}for(let et=0;et<e.initializersLength();et++){let $t=e.initializers(et),h=i.get($t.name());if(h===void 0){let b=new Mt$1,g=We$1.tensorDimsFromORTFormat($t),jt=We$1.tensorDataTypeFromProto($t.dataType());b.type={shape:{dims:g},tensorType:jt},h=this._allData.push(b)-1,i.set($t.name(),h)}this._allData[h]._from=-1,this._allData[h].tensor=$e.fromOrtTensor($t)}for(let et=0;et<this._allData.length;et++)this._allData[et].tensor||(this._allInputIndices.push(et),this._allInputNames.push(o[et]));for(let et=0;et<e.outputsLength();et++){let $t=e.outputs(et);if(i.has($t))throw new Error(`duplicated output name: ${$t}`);let h=this._allData.push(new Mt$1)-1;i.set($t,h),this._allOutputIndices.push(h),this._allOutputNames.push($t)}if(!e.nodes)throw new Error("missing information in graph: node");for(let et=0;et<e.nodesLength();et++){let $t=e.nodes(et),h=$t.name();if(!h)for(let g=0;h=`unnamed_${$t.opType()}_${g}`,!!a.has(h);g++);if(a.has(h))throw new Error(`duplicated node name: ${h}`);let b=this._nodes.push(new vo$1($t,h))-1;a.set(h,b)}for(let et=0;et<this._nodes.length;et++){let $t=this._nodes[et],h=e.nodes(et);if(h==null)throw new Error(`No node exists at index ${et}`);if((h==null?void 0:h.outputsLength())===0)throw new Error(`missing output for node: ${h.name}`);for(let b=0;b<(h==null?void 0:h.outputsLength());b++){let g=h==null?void 0:h.outputs(b),jt=i.get(g);if(typeof jt>"u"&&(jt=this._allData.push(new Mt$1)-1,i.set(g,jt)),$t.outputs.push(jt),this._allData[jt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${jt}`);if(this._allData[jt]._from=et,h.opType()==="Constant"){if(h.attributesLength()!==1||!h.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(h.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");$t.outputs.pop(),$t.executeNode=!1,this._allData[jt]._from=-1,this._allData[jt].tensor=$e.fromOrtTensor(h.attributes(0).t())}}}for(let et=0;et<this._nodes.length;et++){let $t=this._nodes[et],h=e.nodes(et);if(h.inputsLength()===0)throw new Error(`missing input for node: ${h.name}`);for(let b=0;b<h.inputsLength();b++){let g=h.inputs(b),jt=i.get(g);if(typeof jt>"u")throw new Error(`unrecognized input '${g}' for node: ${h.name()}`);$t.inputs.push(jt),this._allData[jt]._to.push(et)}}}checkIsAcyclic(){let e=new Set;this._allInputIndices.forEach(o=>{this._allData[o]._to.forEach(c=>{e.add(c)})});let i=Array.from(e),a=new Array(this._nodes.length).fill("white");for(;i.length>0;){let o=i.pop();a[o]==="gray"?a[o]="black":(i.push(o),a[o]="gray",this._nodes[o].outputs.forEach(c=>{let s=this._allData[c];if(typeof s.tensor<"u")throw new Error("node outputs should not be initialized");if(s._from!==o)throw new Error("from property of the Value object doesn't match index of Node being processed");s._to.forEach(d=>{if(a[d]==="gray")throw new Error("model graph is cyclic");a[d]==="white"&&i.push(d)})}))}}transformGraph(e){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),e&&e.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let e=0,i=new Array(this._nodes.length,0),a=0;for(let o=0;o<this._nodes.length;o++)i[o]=a,this._nodes[o].executeNode?(a!==o&&(this._nodes[a]=this._nodes[o]),a++):this._nodes[o].outputs.forEach(c=>{this._allData[c]._from=-2});this._nodes.splice(a,this._nodes.length-a);for(let o=0;o<this._allData.length;o++){let c=this._allData[o];c._from!==void 0&&c._from!==-1&&c._from!==-2&&(c._from=i[c._from]);for(let s=0;s<c._to.length;s++)if(c._to[s]>=0)c._to[s]=i[c._to[s]];else throw new Error("Trying to update a removed node")}e=0;for(let o=0;o<this._allData.length;o++){if(this._allData[o].from===-2&&this._allOutputIndices.indexOf(o+e)===-1){e++,this._allData.splice(o,1),o--;continue}if(e>0){let c=-1;this._allData[o].from!==void 0&&this._allData[o].from!==-1?(c=this._nodes[this._allData[o].from].outputs.indexOf(o+e),c!==-1&&(this._nodes[this._allData[o].from].outputs[c]=o)):(c=this._allInputIndices.indexOf(o+e),c!==-1&&(this._allInputIndices[c]=o)),this._allData[o].to.forEach(s=>{c=this._nodes[s].inputs.indexOf(o+e),c!==-1&&(this._nodes[s].inputs[c]=o)}),this._allData[o].to.length===0&&(c=this._allOutputIndices.indexOf(o+e),c!==-1&&(this._allOutputIndices[c]=o))}}}deleteNode(e){let i=this._nodes[e];if(i.outputs.length>1){for(let d=1;d<i.outputs.length;d++)if(this._allData[i.outputs[d]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}i.executeNode=!1;let a=i.inputs[0],o=i.outputs[0],c=this._allData[o].to;for(let d=0;d<i.inputs.length;d++){let et=this._allData[i.inputs[d]].to.indexOf(e);if(et===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[i.inputs[d]].to.splice(et,1)}this._allData[o]._to=[];let s=this._allOutputIndices.indexOf(o);if(s!==-1&&(this._allOutputIndices[s]=a),c&&c.length>0)for(let d of c){let et=this._nodes[d].inputs.indexOf(o);if(et===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[d].inputs[et]=a,this._allData[a].to.push(d)}}removeAllDropoutNodes(){let e=0;for(let i of this._nodes){if(i.opType==="Dropout"){if(i.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(i.outputs.length!==1&&i.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(i.outputs.length===2&&this._allData[i.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(e)}e++}}removeAllIdentityNodes(){let e=0;for(let i of this._nodes)i.opType==="Identity"&&this.deleteNode(e),e++}isActivation(e){switch(e.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let e of this._nodes)if(e.opType==="Conv"){let i=this._allData[e.outputs[0]]._to;if(i.length===1&&this.isActivation(this._nodes[i[0]])){let a=this._nodes[i[0]];if(a.opType==="Clip")if(a.inputs.length===1)try{e.attributes.set("activation_params","floats",[a.attributes.getFloat("min"),a.attributes.getFloat("max")])}catch{e.attributes.set("activation_params","floats",[br,gr$1])}else if(a.inputs.length>=3&&this._allData[a.inputs[1]].tensor!==void 0&&this._allData[a.inputs[2]].tensor!==void 0)e.attributes.set("activation_params","floats",[this._allData[a.inputs[1]].tensor.floatData[0],this._allData[a.inputs[2]].tensor.floatData[0]]);else continue;e.attributes.set("activation","string",a.opType),this.deleteNode(i[0])}}}}}),Tp$1,Qb,_o$1,xp$1=L(()=>{zn$1(),yp$1(),tn$1(),Tp$1=Ar(Cr()),fe$1(),Qb=V.experimental.fbs,_o$1=class{constructor(){}load(e,i,a){let o;if(!a)try{this.loadFromOnnxFormat(e,i);return}catch(c){if(a!==void 0)throw c;o=c}try{this.loadFromOrtFormat(e,i)}catch(c){throw a!==void 0?c:new Error(`Failed to load model as ONNX format: ${o}
as ORT format: ${c}`)}}loadFromOnnxFormat(e,i){let a=Tp$1.onnx.ModelProto.decode(e);if(it.longToNumber(a.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=a.opsetImport.map(o=>({domain:o.domain,version:it.longToNumber(o.version)})),this._graph=Ki$1.from(a.graph,i)}loadFromOrtFormat(e,i){let a=new _.ByteBuffer(e),o=Qb.InferenceSession.getRootAsInferenceSession(a).model();if(it.longToNumber(o.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let c=0;c<o.opsetImportLength();c++){let s=o.opsetImport(c);this._opsets.push({domain:s==null?void 0:s.domain(),version:it.longToNumber(s.version())})}this._graph=Ki$1.from(o.graph(),i)}get graph(){return this._graph}get opsets(){return this._opsets}}}),Oo,wp$1=L(()=>{mp$1(),bp(),lt$1(),xp$1(),Oo=class{constructor(e={}){this._initialized=!1,this.backendHint=e.backendHint,this.profiler=Gn$1.create(e.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(e,i,a){await this.profiler.event("session","Session.loadModel",async()=>{let o=await qi$1(this.backendHint);if(this.sessionHandler=o.createSessionHandler(this.context),this._model=new _o$1,typeof e=="string"){let c=e.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let s=await(void 0)(e);this.initialize(s,c)}else{let s=await(await fetch(e)).arrayBuffer();this.initialize(new Uint8Array(s),c)}}else if(ArrayBuffer.isView(e))this.initialize(e);else{let c=new Uint8Array(e,i||0,a||e.byteLength);this.initialize(c)}})}initialize(e,i){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let a=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(e,a,i),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new xo$1(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(e){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let i=this.normalizeAndValidateInputs(e),a=await this._executionPlan.execute(this.sessionHandler,i);return this.createOutput(a)})}normalizeAndValidateInputs(e){let i=this._model.graph.getInputNames();if(Array.isArray(e)){if(e.length!==i.length)throw new Error(`incorrect input array length: expected ${i.length} but got ${e.length}`)}else{if(e.size!==i.length)throw new Error(`incorrect input map size: expected ${i.length} but got ${e.size}`);let a=new Array(e.size),o=0;for(let c=0;c<i.length;++c){let s=e.get(i[c]);if(!s)throw new Error(`missing input tensor for: '${name}'`);a[o++]=s}e=a}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let a=this._model.graph.getInputIndices(),o=this._model.graph.getValues(),c=new Array(a.length);for(let s=0;s<a.length;++s){let d=o[a[s]];c[s]=d.type.shape.dims,this.context.graphInputTypes.push(d.type.tensorType),this.context.graphInputDims.push(e[s].dims)}this.validateInputTensorDims(c,e,!0)}else this.validateInputTensorDims(this.context.graphInputDims,e,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,e),e}validateInputTensorTypes(e,i){for(let a=0;a<i.length;a++){let o=e[a],c=i[a].type;if(o!==c)throw new Error(`input tensor[${a}] check failed: expected type '${o}' but got ${c}`)}}validateInputTensorDims(e,i,a){for(let o=0;o<i.length;o++){let c=e[o],s=i[o].dims;if(!this.compareTensorDims(c,s,a))throw new Error(`input tensor[${o}] check failed: expected shape '[${c.join(",")}]' but got [${s.join(",")}]`)}}compareTensorDims(e,i,a){if(e.length!==i.length)return!1;for(let o=0;o<e.length;++o)if(e[o]!==i[o]&&(!a||e[o]!==0))return!1;return!0}createOutput(e){let i=this._model.graph.getOutputNames();if(e.length!==i.length)throw new Error("expected number of outputs do not match number of generated outputs");let a=new Map;for(let o=0;o<i.length;++o)a.set(i[o],e[o]);return a}initializeOps(e){let i=e.getNodes();this._ops=new Array(i.length);for(let a=0;a<i.length;a++)this._ops[a]=this.sessionHandler.resolve(i[a],this._model.opsets,e)}}}),Io$1,vp$1=L(()=>{Ot$1(),yr(),Io$1=class{constructor(e){this.session=e,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(e,i,a){let o=new Map;for(let d in e)if(Object.hasOwnProperty.call(e,d)){let et=e[d];o.set(d,new $e(et.dims,et.type,void 0,void 0,et.data))}let c=await this.session.run(o),s={};return c.forEach((d,et)=>{s[et]=new Me(d.type,d.data,d.dims)}),s}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),_p$1={};Sr(_p$1,{onnxjsBackend:()=>tg});var Ji$1,tg,Op$1=L(()=>{wp$1(),vp$1(),Ji$1=class{async init(){}async createInferenceSessionHandler(e,i){let a=new Oo(i);return typeof e=="string"?await a.loadModel(e):await a.loadModel(e),new Io$1(a)}},tg=new Ji$1}),Zi$1={};Sr(Zi$1,{createReadStream:()=>Ip$1,readFile:()=>rg,readFileSync:()=>ng});var rg,ng,Ip$1,Qi$1=L(()=>{rg=void 0,ng=void 0,Ip$1=void 0}),ea={};Sr(ea,{join:()=>og});var og,ta=L(()=>{og=void 0}),Pp$1=me((e,i)=>{var a=(()=>{var c;var o=typeof document<"u"?(c=document.currentScript)==null?void 0:c.src:void 0;return typeof __filename<"u"&&(o||(o=__filename)),function(s={}){var d=s,et,$t,h=new Promise((ko,r0)=>{et=ko,$t=r0}),b=Object.assign({},d),g="./this.program",jt=typeof window=="object",Ht=typeof importScripts=="function",Kt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",or="",jr,Lr,ir;if(Kt){var qr=(Qi$1(),ar(Zi$1)),vn=(ta(),ar(ea));or=Ht?vn.dirname(or)+"/":__dirname+"/",jr=(ko,r0)=>(ko=x0(ko)?new URL(ko):vn.normalize(ko),qr.readFileSync(ko,r0?void 0:"utf8")),ir=ko=>(ko=jr(ko,!0),ko.buffer||(ko=new Uint8Array(ko)),ko),Lr=(ko,r0,i0,g0=!0)=>{ko=x0(ko)?new URL(ko):vn.normalize(ko),qr.readFile(ko,g0?void 0:"utf8",(b0,F0)=>{b0?i0(b0):r0(g0?F0.buffer:F0)})},!d.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else(jt||Ht)&&(Ht?or=self.location.href:typeof document<"u"&&document.currentScript&&(or=document.currentScript.src),o&&(or=o),or.startsWith("blob:")?or="":or=or.substr(0,or.replace(/[?#].*/,"").lastIndexOf("/")+1),jr=ko=>{var r0=new XMLHttpRequest;return r0.open("GET",ko,!1),r0.send(null),r0.responseText},Ht&&(ir=ko=>{var r0=new XMLHttpRequest;return r0.open("GET",ko,!1),r0.responseType="arraybuffer",r0.send(null),new Uint8Array(r0.response)}),Lr=(ko,r0,i0)=>{var g0=new XMLHttpRequest;g0.open("GET",ko,!0),g0.responseType="arraybuffer",g0.onload=()=>{g0.status==200||g0.status==0&&g0.response?r0(g0.response):i0()},g0.onerror=i0,g0.send(null)});var xn=console.log.bind(console),No=console.error.bind(console);Object.assign(d,b),b=null;var Ro,Xo=!1,o0,s0,h0,E0,C0;function D0(){var ko=Ro.buffer;d.HEAP8=o0=new Int8Array(ko),d.HEAP16=new Int16Array(ko),d.HEAPU8=s0=new Uint8Array(ko),d.HEAPU16=new Uint16Array(ko),d.HEAP32=h0=new Int32Array(ko),d.HEAPU32=E0=new Uint32Array(ko),d.HEAPF32=new Float32Array(ko),d.HEAPF64=C0=new Float64Array(ko)}var N0=[],e0=[],l0=[],Uo=0,c0=null;function $0(ko){throw ko="Aborted("+ko+")",No(ko),Xo=!0,ko=new WebAssembly.RuntimeError(ko+". Build with -sASSERTIONS for more info."),$t(ko),ko}var Bo=ko=>ko.startsWith("data:application/octet-stream;base64,"),x0=ko=>ko.startsWith("file://"),A0;if(A0="ort-wasm.wasm",!Bo(A0)){var G0=A0;A0=d.locateFile?d.locateFile(G0,or):or+G0}function q0(ko){if(ir)return ir(ko);throw"both async and sync fetching of the wasm failed"}function ny(ko){if(jt||Ht){if(typeof fetch=="function"&&!x0(ko))return fetch(ko,{credentials:"same-origin"}).then(r0=>{if(!r0.ok)throw`failed to load wasm binary file at '${ko}'`;return r0.arrayBuffer()}).catch(()=>q0(ko));if(Lr)return new Promise((r0,i0)=>{Lr(ko,g0=>r0(new Uint8Array(g0)),i0)})}return Promise.resolve().then(()=>q0(ko))}function xy(ko,r0,i0){return ny(ko).then(g0=>WebAssembly.instantiate(g0,r0)).then(i0,g0=>{No(`failed to asynchronously prepare wasm: ${g0}`),$0(g0)})}function gy(ko,r0){var i0=A0;return typeof WebAssembly.instantiateStreaming!="function"||Bo(i0)||x0(i0)||Kt||typeof fetch!="function"?xy(i0,ko,r0):fetch(i0,{credentials:"same-origin"}).then(g0=>WebAssembly.instantiateStreaming(g0,ko).then(r0,function(b0){return No(`wasm streaming compile failed: ${b0}`),No("falling back to ArrayBuffer instantiation"),xy(i0,ko,r0)}))}var Ey,Ty={798088:(ko,r0,i0,g0)=>{if(typeof d>"u"||!d.ya)return 1;if(ko=Oy(ko>>>0),ko.startsWith("./")&&(ko=ko.substring(2)),ko=d.ya.get(ko),!ko)return 2;if(r0>>>=0,i0>>>=0,r0+i0>ko.byteLength)return 3;try{return s0.set(ko.subarray(r0,r0+i0),g0>>>0>>>0),0}catch{return 4}}};class ly{constructor(r0){this.wa=r0-24}}var ty=0,ky=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Iy=(ko,r0,i0)=>{r0>>>=0;var g0=r0+i0;for(i0=r0;ko[i0]&&!(i0>=g0);)++i0;if(16<i0-r0&&ko.buffer&&ky)return ky.decode(ko.subarray(r0,i0));for(g0="";r0<i0;){var b0=ko[r0++];if(b0&128){var F0=ko[r0++]&63;if((b0&224)==192)g0+=String.fromCharCode((b0&31)<<6|F0);else{var ry=ko[r0++]&63;b0=(b0&240)==224?(b0&15)<<12|F0<<6|ry:(b0&7)<<18|F0<<12|ry<<6|ko[r0++]&63,65536>b0?g0+=String.fromCharCode(b0):(b0-=65536,g0+=String.fromCharCode(55296|b0>>10,56320|b0&1023))}}else g0+=String.fromCharCode(b0)}return g0},Oy=(ko,r0)=>(ko>>>=0)?Iy(s0,ko,r0):"",g1=ko=>{for(var r0=0,i0=0;i0<ko.length;++i0){var g0=ko.charCodeAt(i0);127>=g0?r0++:2047>=g0?r0+=2:55296<=g0&&57343>=g0?(r0+=4,++i0):r0+=3}return r0},Py=(ko,r0,i0,g0)=>{if(i0>>>=0,!(0<g0))return 0;var b0=i0;g0=i0+g0-1;for(var F0=0;F0<ko.length;++F0){var ry=ko.charCodeAt(F0);if(55296<=ry&&57343>=ry){var By=ko.charCodeAt(++F0);ry=65536+((ry&1023)<<10)|By&1023}if(127>=ry){if(i0>=g0)break;r0[i0++>>>0]=ry}else{if(2047>=ry){if(i0+1>=g0)break;r0[i0++>>>0]=192|ry>>6}else{if(65535>=ry){if(i0+2>=g0)break;r0[i0++>>>0]=224|ry>>12}else{if(i0+3>=g0)break;r0[i0++>>>0]=240|ry>>18,r0[i0++>>>0]=128|ry>>12&63}r0[i0++>>>0]=128|ry>>6&63}r0[i0++>>>0]=128|ry&63}}return r0[i0>>>0]=0,i0-b0},r1=ko=>ko%4===0&&(ko%100!==0||ko%400===0),xv=[0,31,60,91,121,152,182,213,244,274,305,335],Yy=[0,31,59,90,120,151,181,212,243,273,304,334],zy=[],Gy={},_y=()=>{if(!f1){var ko={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"},r0;for(r0 in Gy)Gy[r0]===void 0?delete ko[r0]:ko[r0]=Gy[r0];var i0=[];for(r0 in ko)i0.push(`${r0}=${ko[r0]}`);f1=i0}return f1},f1,Uy=[null,[],[]],y1=[31,29,31,30,31,30,31,31,30,31,30,31],Ry=[31,28,31,30,31,30,31,31,30,31,30,31];function v1(ko){var r0=Array(g1(ko)+1);return Py(ko,r0,0,r0.length),r0}function my(ko,r0,i0,g0){function b0(d0,dy,cy){for(d0=typeof d0=="number"?d0.toString():d0||"";d0.length<dy;)d0=cy[0]+d0;return d0}function F0(d0,dy){return b0(d0,dy,"0")}function ry(d0,dy){function cy(W1){return 0>W1?-1:0<W1?1:0}var My;return(My=cy(d0.getFullYear()-dy.getFullYear()))===0&&(My=cy(d0.getMonth()-dy.getMonth()))===0&&(My=cy(d0.getDate()-dy.getDate())),My}function By(d0){switch(d0.getDay()){case 0:return new Date(d0.getFullYear()-1,11,29);case 1:return d0;case 2:return new Date(d0.getFullYear(),0,3);case 3:return new Date(d0.getFullYear(),0,2);case 4:return new Date(d0.getFullYear(),0,1);case 5:return new Date(d0.getFullYear()-1,11,31);case 6:return new Date(d0.getFullYear()-1,11,30)}}function Xy(d0){var dy=d0.sa;for(d0=new Date(new Date(d0.ta+1900,0,1).getTime());0<dy;){var cy=d0.getMonth(),My=(r1(d0.getFullYear())?y1:Ry)[cy];if(dy>My-d0.getDate())dy-=My-d0.getDate()+1,d0.setDate(1),11>cy?d0.setMonth(cy+1):(d0.setMonth(0),d0.setFullYear(d0.getFullYear()+1));else{d0.setDate(d0.getDate()+dy);break}}return cy=new Date(d0.getFullYear()+1,0,4),dy=By(new Date(d0.getFullYear(),0,4)),cy=By(cy),0>=ry(dy,d0)?0>=ry(cy,d0)?d0.getFullYear()+1:d0.getFullYear():d0.getFullYear()-1}ko>>>=0,r0>>>=0,i0>>>=0,g0>>>=0;var Wy=E0[g0+40>>>2>>>0];g0={Ba:h0[g0>>>2>>>0],Aa:h0[g0+4>>>2>>>0],ua:h0[g0+8>>>2>>>0],xa:h0[g0+12>>>2>>>0],va:h0[g0+16>>>2>>>0],ta:h0[g0+20>>>2>>>0],na:h0[g0+24>>>2>>>0],sa:h0[g0+28>>>2>>>0],Da:h0[g0+32>>>2>>>0],za:h0[g0+36>>>2>>>0],Ca:Wy?Oy(Wy):""},i0=Oy(i0),Wy={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Ly in Wy)i0=i0.replace(new RegExp(Ly,"g"),Wy[Ly]);var F1="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),n1="January February March April May June July August September October November December".split(" ");Wy={"%a":d0=>F1[d0.na].substring(0,3),"%A":d0=>F1[d0.na],"%b":d0=>n1[d0.va].substring(0,3),"%B":d0=>n1[d0.va],"%C":d0=>F0((d0.ta+1900)/100|0,2),"%d":d0=>F0(d0.xa,2),"%e":d0=>b0(d0.xa,2," "),"%g":d0=>Xy(d0).toString().substring(2),"%G":Xy,"%H":d0=>F0(d0.ua,2),"%I":d0=>(d0=d0.ua,d0==0?d0=12:12<d0&&(d0-=12),F0(d0,2)),"%j":d0=>{for(var dy=0,cy=0;cy<=d0.va-1;dy+=(r1(d0.ta+1900)?y1:Ry)[cy++]);return F0(d0.xa+dy,3)},"%m":d0=>F0(d0.va+1,2),"%M":d0=>F0(d0.Aa,2),"%n":()=>`
`,"%p":d0=>0<=d0.ua&&12>d0.ua?"AM":"PM","%S":d0=>F0(d0.Ba,2),"%t":()=>"	","%u":d0=>d0.na||7,"%U":d0=>F0(Math.floor((d0.sa+7-d0.na)/7),2),"%V":d0=>{var dy=Math.floor((d0.sa+7-(d0.na+6)%7)/7);if(2>=(d0.na+371-d0.sa-2)%7&&dy++,dy)dy==53&&(cy=(d0.na+371-d0.sa)%7,cy==4||cy==3&&r1(d0.ta)||(dy=1));else{dy=52;var cy=(d0.na+7-d0.sa-1)%7;(cy==4||cy==5&&r1(d0.ta%400-1))&&dy++}return F0(dy,2)},"%w":d0=>d0.na,"%W":d0=>F0(Math.floor((d0.sa+7-(d0.na+6)%7)/7),2),"%y":d0=>(d0.ta+1900).toString().substring(2),"%Y":d0=>d0.ta+1900,"%z":d0=>{d0=d0.za;var dy=0<=d0;return d0=Math.abs(d0)/60,(dy?"+":"-")+("0000"+(d0/60*100+d0%60)).slice(-4)},"%Z":d0=>d0.Ca,"%%":()=>"%"},i0=i0.replace(/%%/g,"\0\0");for(Ly in Wy)i0.includes(Ly)&&(i0=i0.replace(new RegExp(Ly,"g"),Wy[Ly](g0)));return i0=i0.replace(/\0\0/g,"%"),Ly=v1(i0),Ly.length>r0?0:(o0.set(Ly,ko>>>0),Ly.length-1)}var i1={a:function(ko,r0,i0){ko>>>=0;var g0=new ly(ko);throw E0[g0.wa+16>>>2>>>0]=0,E0[g0.wa+4>>>2>>>0]=r0>>>0,E0[g0.wa+8>>>2>>>0]=i0>>>0,ty=ko,ty},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(ko,r0,i0){return r0>>>=0,s0.copyWithin(ko>>>0>>>0,r0>>>0,r0+(i0>>>0)>>>0)},n:function(ko,r0,i0){ko=r0+2097152>>>0<4194305-!!ko?(ko>>>0)+4294967296*r0:NaN,i0>>>=0,ko=new Date(1e3*ko),h0[i0>>>2>>>0]=ko.getUTCSeconds(),h0[i0+4>>>2>>>0]=ko.getUTCMinutes(),h0[i0+8>>>2>>>0]=ko.getUTCHours(),h0[i0+12>>>2>>>0]=ko.getUTCDate(),h0[i0+16>>>2>>>0]=ko.getUTCMonth(),h0[i0+20>>>2>>>0]=ko.getUTCFullYear()-1900,h0[i0+24>>>2>>>0]=ko.getUTCDay(),h0[i0+28>>>2>>>0]=(ko.getTime()-Date.UTC(ko.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(ko,r0,i0){ko=r0+2097152>>>0<4194305-!!ko?(ko>>>0)+4294967296*r0:NaN,i0>>>=0,ko=new Date(1e3*ko),h0[i0>>>2>>>0]=ko.getSeconds(),h0[i0+4>>>2>>>0]=ko.getMinutes(),h0[i0+8>>>2>>>0]=ko.getHours(),h0[i0+12>>>2>>>0]=ko.getDate(),h0[i0+16>>>2>>>0]=ko.getMonth(),h0[i0+20>>>2>>>0]=ko.getFullYear()-1900,h0[i0+24>>>2>>>0]=ko.getDay(),h0[i0+28>>>2>>>0]=(r1(ko.getFullYear())?xv:Yy)[ko.getMonth()]+ko.getDate()-1|0,h0[i0+36>>>2>>>0]=-(60*ko.getTimezoneOffset()),r0=new Date(ko.getFullYear(),6,1).getTimezoneOffset();var g0=new Date(ko.getFullYear(),0,1).getTimezoneOffset();h0[i0+32>>>2>>>0]=(r0!=g0&&ko.getTimezoneOffset()==Math.min(g0,r0))|0},p:function(ko){ko>>>=0;var r0=new Date(h0[ko+20>>>2>>>0]+1900,h0[ko+16>>>2>>>0],h0[ko+12>>>2>>>0],h0[ko+8>>>2>>>0],h0[ko+4>>>2>>>0],h0[ko>>>2>>>0],0),i0=h0[ko+32>>>2>>>0],g0=r0.getTimezoneOffset(),b0=new Date(r0.getFullYear(),6,1).getTimezoneOffset(),F0=new Date(r0.getFullYear(),0,1).getTimezoneOffset(),ry=Math.min(F0,b0);return 0>i0?h0[ko+32>>>2>>>0]=+(b0!=F0&&ry==g0):0<i0!=(ry==g0)&&(b0=Math.max(F0,b0),r0.setTime(r0.getTime()+6e4*((0<i0?ry:b0)-g0))),h0[ko+24>>>2>>>0]=r0.getDay(),h0[ko+28>>>2>>>0]=(r1(r0.getFullYear())?xv:Yy)[r0.getMonth()]+r0.getDate()-1|0,h0[ko>>>2>>>0]=r0.getSeconds(),h0[ko+4>>>2>>>0]=r0.getMinutes(),h0[ko+8>>>2>>>0]=r0.getHours(),h0[ko+12>>>2>>>0]=r0.getDate(),h0[ko+16>>>2>>>0]=r0.getMonth(),h0[ko+20>>>2>>>0]=r0.getYear(),ko=r0.getTime(),ko=isNaN(ko)?-1:ko/1e3,Vy((Ey=ko,1<=+Math.abs(Ey)?0<Ey?+Math.floor(Ey/4294967296)>>>0:~~+Math.ceil((Ey-+(~~Ey>>>0))/4294967296)>>>0:0)),ko>>>0},l:function(){return-52},m:function(){},t:function(ko,r0,i0,g0){i0>>>=0,g0>>>=0;var b0=new Date().getFullYear(),F0=new Date(b0,0,1),ry=new Date(b0,6,1);b0=F0.getTimezoneOffset();var By=ry.getTimezoneOffset();E0[ko>>>0>>>2>>>0]=60*Math.max(b0,By),h0[r0>>>0>>>2>>>0]=+(b0!=By),ko=Xy=>Xy.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],F0=ko(F0),ry=ko(ry),By<b0?(Py(F0,s0,i0,17),Py(ry,s0,g0,17)):(Py(F0,s0,g0,17),Py(ry,s0,i0,17))},d:()=>{$0("")},B:function(ko,r0,i0){ko>>>=0,r0>>>=0,i0>>>=0,zy.length=0;for(var g0;g0=s0[r0++>>>0];){var b0=g0!=105;b0&=g0!=112,i0+=b0&&i0%8?4:0,zy.push(g0==112?E0[i0>>>2>>>0]:g0==105?h0[i0>>>2>>>0]:C0[i0>>>3>>>0]),i0+=b0?8:4}return Ty[ko](...zy)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(ko){ko>>>=0;var r0=s0.length;if(4294901760<ko)return!1;for(var i0=1;4>=i0;i0*=2){var g0=r0*(1+.2/i0);g0=Math.min(g0,ko+100663296);var b0=Math;g0=Math.max(ko,g0);e:{b0=(b0.min.call(b0,4294901760,g0+(65536-g0%65536)%65536)-Ro.buffer.byteLength+65535)/65536;try{Ro.grow(b0),D0();var F0=1;break e}catch{}F0=void 0}if(F0)return!0}return!1},C:function(ko,r0){ko>>>=0,r0>>>=0;var i0=0;return _y().forEach((g0,b0)=>{var F0=r0+i0;for(b0=E0[ko+4*b0>>>2>>>0]=F0,F0=0;F0<g0.length;++F0)o0[b0++>>>0]=g0.charCodeAt(F0);o0[b0>>>0]=0,i0+=g0.length+1}),0},D:function(ko,r0){ko>>>=0,r0>>>=0;var i0=_y();E0[ko>>>2>>>0]=i0.length;var g0=0;return i0.forEach(b0=>g0+=b0.length+1),E0[r0>>>2>>>0]=g0,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(ko,r0,i0,g0){r0>>>=0,i0>>>=0,g0>>>=0;for(var b0=0,F0=0;F0<i0;F0++){var ry=E0[r0>>>2>>>0],By=E0[r0+4>>>2>>>0];r0+=8;for(var Xy=0;Xy<By;Xy++){var Wy=s0[ry+Xy>>>0],Ly=Uy[ko];Wy===0||Wy===10?((ko===1?xn:No)(Iy(Ly,0)),Ly.length=0):Ly.push(Wy)}b0+=By}return E0[g0>>>2>>>0]=b0,0},r:my,c:function(ko,r0,i0,g0){return my(ko>>>0,r0>>>0,i0>>>0,g0>>>0)}},Y0=function(){function ko(i0){return Y0=i0.exports,Y0=$1(),Ro=Y0.K,D0(),e0.unshift(Y0.L),Uo--,Uo==0&&c0&&(i0=c0,c0=null,i0()),Y0}var r0={a:i1};if(Uo++,d.instantiateWasm)try{return d.instantiateWasm(r0,ko)}catch(i0){No(`Module.instantiateWasm callback failed with error: ${i0}`),$t(i0)}return gy(r0,function(i0){ko(i0.instance)}).catch($t),{}}();d._OrtInit=(ko,r0)=>(d._OrtInit=Y0.M)(ko,r0),d._OrtGetLastError=(ko,r0)=>(d._OrtGetLastError=Y0.N)(ko,r0),d._OrtCreateSessionOptions=(ko,r0,i0,g0,b0,F0,ry,By,Xy,Wy)=>(d._OrtCreateSessionOptions=Y0.O)(ko,r0,i0,g0,b0,F0,ry,By,Xy,Wy),d._OrtAppendExecutionProvider=(ko,r0)=>(d._OrtAppendExecutionProvider=Y0.P)(ko,r0),d._OrtAddFreeDimensionOverride=(ko,r0,i0)=>(d._OrtAddFreeDimensionOverride=Y0.Q)(ko,r0,i0),d._OrtAddSessionConfigEntry=(ko,r0,i0)=>(d._OrtAddSessionConfigEntry=Y0.R)(ko,r0,i0),d._OrtReleaseSessionOptions=ko=>(d._OrtReleaseSessionOptions=Y0.S)(ko),d._OrtCreateSession=(ko,r0,i0)=>(d._OrtCreateSession=Y0.T)(ko,r0,i0),d._OrtReleaseSession=ko=>(d._OrtReleaseSession=Y0.U)(ko),d._OrtGetInputOutputCount=(ko,r0,i0)=>(d._OrtGetInputOutputCount=Y0.V)(ko,r0,i0),d._OrtGetInputName=(ko,r0)=>(d._OrtGetInputName=Y0.W)(ko,r0),d._OrtGetOutputName=(ko,r0)=>(d._OrtGetOutputName=Y0.X)(ko,r0),d._OrtFree=ko=>(d._OrtFree=Y0.Y)(ko),d._OrtCreateTensor=(ko,r0,i0,g0,b0,F0)=>(d._OrtCreateTensor=Y0.Z)(ko,r0,i0,g0,b0,F0),d._OrtGetTensorData=(ko,r0,i0,g0,b0)=>(d._OrtGetTensorData=Y0._)(ko,r0,i0,g0,b0),d._OrtReleaseTensor=ko=>(d._OrtReleaseTensor=Y0.$)(ko),d._OrtCreateRunOptions=(ko,r0,i0,g0)=>(d._OrtCreateRunOptions=Y0.aa)(ko,r0,i0,g0),d._OrtAddRunConfigEntry=(ko,r0,i0)=>(d._OrtAddRunConfigEntry=Y0.ba)(ko,r0,i0),d._OrtReleaseRunOptions=ko=>(d._OrtReleaseRunOptions=Y0.ca)(ko),d._OrtCreateBinding=ko=>(d._OrtCreateBinding=Y0.da)(ko),d._OrtBindInput=(ko,r0,i0)=>(d._OrtBindInput=Y0.ea)(ko,r0,i0),d._OrtBindOutput=(ko,r0,i0,g0)=>(d._OrtBindOutput=Y0.fa)(ko,r0,i0,g0),d._OrtClearBoundOutputs=ko=>(d._OrtClearBoundOutputs=Y0.ga)(ko),d._OrtReleaseBinding=ko=>(d._OrtReleaseBinding=Y0.ha)(ko),d._OrtRunWithBinding=(ko,r0,i0,g0,b0)=>(d._OrtRunWithBinding=Y0.ia)(ko,r0,i0,g0,b0),d._OrtRun=(ko,r0,i0,g0,b0,F0,ry,By)=>(d._OrtRun=Y0.ja)(ko,r0,i0,g0,b0,F0,ry,By),d._OrtEndProfiling=ko=>(d._OrtEndProfiling=Y0.ka)(ko),d._malloc=ko=>(d._malloc=Y0.la)(ko),d._free=ko=>(d._free=Y0.ma)(ko);var Vy=ko=>(Vy=Y0.oa)(ko),b1=ko=>(b1=Y0.pa)(ko),E1=ko=>(E1=Y0.qa)(ko),M0=()=>(M0=Y0.ra)();function $1(){var ko=Y0;ko=Object.assign({},ko);var r0=i0=>g0=>i0(g0)>>>0;return ko.la=r0(ko.la),ko.qa=r0(ko.qa),ko.ra=(i0=>()=>i0()>>>0)(ko.ra),ko}d.stackSave=()=>M0(),d.stackRestore=ko=>b1(ko),d.stackAlloc=ko=>E1(ko),d.UTF8ToString=Oy,d.stringToUTF8=(ko,r0,i0)=>Py(ko,s0,r0,i0),d.lengthBytesUTF8=g1;var X0;c0=function ko(){X0||Fy(),X0||(c0=ko)};function Fy(){if(!(0<Uo)){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;){var ko=d.preRun.shift();N0.unshift(ko)}for(;0<N0.length;)N0.shift()(d);if(!(0<Uo||X0||(X0=!0,d.calledRun=!0,Xo))){for(;0<e0.length;)e0.shift()(d);for(et(d);0<l0.length;)l0.shift()(d)}}}return Fy(),h}})();typeof e=="object"&&typeof i=="object"?i.exports=a:typeof define=="function"&&define.amd&&define([],()=>a)}),Ep$1=me(()=>{}),Dp$1=me(()=>{}),Lp$1={};Sr(Lp$1,{cpus:()=>ig});var ig,Cp$1=L(()=>{ig=void 0}),kp$1=me((e,i)=>{var a=(()=>{var c;var o=typeof document<"u"?(c=document.currentScript)==null?void 0:c.src:void 0;return typeof __filename<"u"&&(o||(o=__filename)),function(s={}){function d(){return l0.buffer!=Bo.buffer&&ny(),Bo}function et(){return l0.buffer!=Bo.buffer&&ny(),x0}function $t(){return l0.buffer!=Bo.buffer&&ny(),A0}function h(){return l0.buffer!=Bo.buffer&&ny(),G0}function b(){return l0.buffer!=Bo.buffer&&ny(),q0}var g=s,jt,Ht,Kt=new Promise((Yr,tr)=>{jt=Yr,Ht=tr}),or=Object.assign({},g),jr="./this.program",Lr=(Yr,tr)=>{throw tr},ir=typeof window=="object",qr=typeof importScripts=="function",vn=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",xn=g.ENVIRONMENT_IS_PTHREAD||!1,No="";function Ro(Yr){return g.locateFile?g.locateFile(Yr,No):No+Yr}var Xo,o0,s0;if(vn){var h0=(Qi$1(),ar(Zi$1)),E0=(ta(),ar(ea));No=qr?E0.dirname(No)+"/":__dirname+"/",Xo=(Yr,tr)=>(Yr=g1(Yr)?new URL(Yr):E0.normalize(Yr),h0.readFileSync(Yr,tr?void 0:"utf8")),s0=Yr=>(Yr=Xo(Yr,!0),Yr.buffer||(Yr=new Uint8Array(Yr)),Yr),o0=(Yr,tr,Ir,Kr=!0)=>{Yr=g1(Yr)?new URL(Yr):E0.normalize(Yr),h0.readFile(Yr,Kr?void 0:"utf8",(wn,In)=>{wn?Ir(wn):tr(Kr?In.buffer:In)})},!g.thisProgram&&1<process.argv.length&&(jr=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),Lr=(Yr,tr)=>{throw process.exitCode=Yr,tr},global.Worker=Ep$1().Worker}else(ir||qr)&&(qr?No=self.location.href:typeof document<"u"&&document.currentScript&&(No=document.currentScript.src),typeof o<"u"&&o&&(No=o),No.startsWith("blob:")?No="":No=No.substr(0,No.replace(/[?#].*/,"").lastIndexOf("/")+1),vn||(Xo=Yr=>{var tr=new XMLHttpRequest;return tr.open("GET",Yr,!1),tr.send(null),tr.responseText},qr&&(s0=Yr=>{var tr=new XMLHttpRequest;return tr.open("GET",Yr,!1),tr.responseType="arraybuffer",tr.send(null),new Uint8Array(tr.response)}),o0=(Yr,tr,Ir)=>{var Kr=new XMLHttpRequest;Kr.open("GET",Yr,!0),Kr.responseType="arraybuffer",Kr.onload=()=>{Kr.status==200||Kr.status==0&&Kr.response?tr(Kr.response):Ir()},Kr.onerror=Ir,Kr.send(null)}));vn&&typeof performance>"u"&&(global.performance=Dp$1().performance);var C0=console.log.bind(console),D0=console.error.bind(console);vn&&(C0=(...Yr)=>h0.writeSync(1,Yr.join(" ")+`
`),D0=(...Yr)=>h0.writeSync(2,Yr.join(" ")+`
`));var N0=C0,e0=D0;Object.assign(g,or),or=null;var l0,Uo,c0=!1,$0,Bo,x0,A0,G0,q0;function ny(){var Yr=l0.buffer;g.HEAP8=Bo=new Int8Array(Yr),g.HEAP16=new Int16Array(Yr),g.HEAPU8=x0=new Uint8Array(Yr),g.HEAPU16=new Uint16Array(Yr),g.HEAP32=A0=new Int32Array(Yr),g.HEAPU32=G0=new Uint32Array(Yr),g.HEAPF32=new Float32Array(Yr),g.HEAPF64=q0=new Float64Array(Yr)}var xy=16777216;if(xn)l0=g.wasmMemory;else if(g.wasmMemory)l0=g.wasmMemory;else if(l0=new WebAssembly.Memory({initial:xy/65536,maximum:65536,shared:!0}),!(l0.buffer instanceof SharedArrayBuffer))throw e0("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),vn&&e0("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");ny(),xy=l0.buffer.byteLength;var gy=[],Ey=[],Ty=[],ly=0,ty=null;function ky(){if(ly--,ly==0&&ty){var Yr=ty;ty=null,Yr()}}function Iy(Yr){throw Yr="Aborted("+Yr+")",e0(Yr),c0=!0,$0=1,Yr=new WebAssembly.RuntimeError(Yr+". Build with -sASSERTIONS for more info."),Ht(Yr),Yr}var Oy=Yr=>Yr.startsWith("data:application/octet-stream;base64,"),g1=Yr=>Yr.startsWith("file://"),Py;Py="ort-wasm-threaded.wasm",Oy(Py)||(Py=Ro(Py));function r1(Yr){if(s0)return s0(Yr);throw"both async and sync fetching of the wasm failed"}function xv(Yr){if(ir||qr){if(typeof fetch=="function"&&!g1(Yr))return fetch(Yr,{credentials:"same-origin"}).then(tr=>{if(!tr.ok)throw`failed to load wasm binary file at '${Yr}'`;return tr.arrayBuffer()}).catch(()=>r1(Yr));if(o0)return new Promise((tr,Ir)=>{o0(Yr,Kr=>tr(new Uint8Array(Kr)),Ir)})}return Promise.resolve().then(()=>r1(Yr))}function Yy(Yr,tr,Ir){return xv(Yr).then(Kr=>WebAssembly.instantiate(Kr,tr)).then(Ir,Kr=>{e0(`failed to asynchronously prepare wasm: ${Kr}`),Iy(Kr)})}function zy(Yr,tr){var Ir=Py;return typeof WebAssembly.instantiateStreaming!="function"||Oy(Ir)||g1(Ir)||vn||typeof fetch!="function"?Yy(Ir,Yr,tr):fetch(Ir,{credentials:"same-origin"}).then(Kr=>WebAssembly.instantiateStreaming(Kr,Yr).then(tr,function(wn){return e0(`wasm streaming compile failed: ${wn}`),e0("falling back to ArrayBuffer instantiation"),Yy(Ir,Yr,tr)}))}var Gy,_y={799444:(Yr,tr,Ir,Kr)=>{if(typeof g>"u"||!g.bb)return 1;if(Yr=By(Yr>>>0),Yr.startsWith("./")&&(Yr=Yr.substring(2)),Yr=g.bb.get(Yr),!Yr)return 2;if(tr>>>=0,Ir>>>=0,Kr>>>=0,tr+Ir>Yr.byteLength)return 3;try{return et().set(Yr.subarray(tr,tr+Ir),Kr>>>0),0}catch{return 4}}};function f1(Yr){this.name="ExitStatus",this.message=`Program terminated with exit(${Yr})`,this.status=Yr}var Uy=Yr=>{Yr.terminate(),Yr.onmessage=()=>{}},y1=Yr=>{M0.Oa.length==0&&(b1(),M0.Xa(M0.Oa[0]));var tr=M0.Oa.pop();if(!tr)return 6;M0.Pa.push(tr),M0.La[Yr.Na]=tr,tr.Na=Yr.Na;var Ir={cmd:"run",start_routine:Yr.gb,arg:Yr.cb,pthread_ptr:Yr.Na};return vn&&tr.unref(),tr.postMessage(Ir,Yr.mb),0},Ry=0,v1=Yr=>{var tr=c1();return Yr=Yr(),o1(tr),Yr},my=(Yr,tr,...Ir)=>v1(()=>{for(var Kr=Ir.length,wn=gv(8*Kr),In=wn>>>3,Go=0;Go<Ir.length;Go++){var y0=Ir[Go];b()[In+Go>>>0]=y0}return mv(Yr,0,Kr,wn,tr)});function i1(Yr){var tr;if(xn)return my(0,1,Yr);$0=Yr,0<Ry||(M0.hb(),(tr=g.onExit)==null||tr.call(g,Yr),c0=!0),Lr(Yr,new f1(Yr))}var Y0=Yr=>{if($0=Yr,xn)throw X0(Yr),"unwind";i1(Yr)};function Vy(){for(var Yr=g.numThreads;Yr--;)b1();gy.unshift(()=>{ly++,E1(()=>ky())})}function b1(){var Yr=Ro("ort-wasm-threaded.worker.js");Yr=new Worker(Yr),M0.Oa.push(Yr)}function E1(Yr){xn?Yr():Promise.all(M0.Oa.map(M0.Xa)).then(Yr)}var M0={Oa:[],Pa:[],ab:[],La:{},Va(){xn?(M0.receiveObjectTransfer=M0.fb,M0.threadInitTLS=M0.$a,M0.setExitStatus=M0.Za):Vy()},Za:Yr=>$0=Yr,pb:["$terminateWorker"],hb:()=>{for(var Yr of M0.Pa)Uy(Yr);for(Yr of M0.Oa)Uy(Yr);M0.Oa=[],M0.Pa=[],M0.La=[]},Ya:Yr=>{var tr=Yr.Na;delete M0.La[tr],M0.Oa.push(Yr),M0.Pa.splice(M0.Pa.indexOf(Yr),1),Yr.Na=0,x1(tr)},fb(){},$a(){M0.ab.forEach(Yr=>Yr())},Xa:Yr=>new Promise(tr=>{Yr.onmessage=In=>{In=In.data;var Go=In.cmd;if(In.targetThread&&In.targetThread!=Cv()){var y0=M0.La[In.targetThread];y0?y0.postMessage(In,In.transferList):e0(`Internal error! Worker sent a message "${Go}" to target pthread ${In.targetThread}, but that thread no longer exists!`)}else Go==="checkMailbox"?lv():Go==="spawnThread"?y1(In):Go==="cleanupThread"?M0.Ya(M0.La[In.thread]):Go==="killThread"?(In=In.thread,Go=M0.La[In],delete M0.La[In],Uy(Go),x1(In),M0.Pa.splice(M0.Pa.indexOf(Go),1),Go.Na=0):Go==="cancelThread"?M0.La[In.thread].postMessage({cmd:"cancel"}):Go==="loaded"?(Yr.loaded=!0,vn&&!Yr.Na&&Yr.unref(),tr(Yr)):Go==="alert"?alert(`Thread ${In.threadId}: ${In.text}`):In.target==="setimmediate"?Yr.postMessage(In):Go==="callHandler"?g[In.handler](...In.args):Go&&e0(`worker sent an unknown command ${Go}`)},Yr.onerror=In=>{throw e0(`worker sent an error! ${In.filename}:${In.lineno}: ${In.message}`),In},vn&&(Yr.on("message",In=>Yr.onmessage({data:In})),Yr.on("error",In=>Yr.onerror(In)));var Ir=[],Kr=["onExit"],wn;for(wn of Kr)g.hasOwnProperty(wn)&&Ir.push(wn);Yr.postMessage({cmd:"load",handlers:Ir,urlOrBlob:g.mainScriptUrlOrBlob||o,wasmMemory:l0,wasmModule:Uo})})};g.PThread=M0;var $1=Yr=>{for(;0<Yr.length;)Yr.shift()(g)};g.establishStackSpace=()=>{var Yr=Cv(),tr=h()[Yr+52>>>2>>>0];Yr=h()[Yr+56>>>2>>>0],ev(tr,tr-Yr),o1(tr)};function X0(Yr){if(xn)return my(1,0,Yr);Y0(Yr)}var Fy=[],ko;g.invokeEntryPoint=(Yr,tr)=>{Ry=0;var Ir=Fy[Yr];Ir||(Yr>=Fy.length&&(Fy.length=Yr+1),Fy[Yr]=Ir=ko.get(Yr)),Yr=Ir(tr),0<Ry?M0.Za(Yr):Qy(Yr)};class r0{constructor(tr){this.Ua=tr-24}Va(tr,Ir){h()[this.Ua+16>>>2>>>0]=0,h()[this.Ua+4>>>2>>>0]=tr,h()[this.Ua+8>>>2>>>0]=Ir}}var i0=0;function g0(Yr,tr,Ir,Kr){return xn?my(2,1,Yr,tr,Ir,Kr):b0(Yr,tr,Ir,Kr)}function b0(Yr,tr,Ir,Kr){if(Yr>>>=0,tr>>>=0,Ir>>>=0,Kr>>>=0,typeof SharedArrayBuffer>"u")return e0("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var wn=[];return xn&&wn.length===0?g0(Yr,tr,Ir,Kr):(Yr={gb:Ir,Na:Yr,cb:Kr,mb:wn},xn?(Yr.ob="spawnThread",postMessage(Yr,wn),0):y1(Yr))}var F0=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ry=(Yr,tr,Ir)=>{tr>>>=0;var Kr=tr+Ir;for(Ir=tr;Yr[Ir]&&!(Ir>=Kr);)++Ir;if(16<Ir-tr&&Yr.buffer&&F0)return F0.decode(Yr.buffer instanceof SharedArrayBuffer?Yr.slice(tr,Ir):Yr.subarray(tr,Ir));for(Kr="";tr<Ir;){var wn=Yr[tr++];if(wn&128){var In=Yr[tr++]&63;if((wn&224)==192)Kr+=String.fromCharCode((wn&31)<<6|In);else{var Go=Yr[tr++]&63;wn=(wn&240)==224?(wn&15)<<12|In<<6|Go:(wn&7)<<18|In<<12|Go<<6|Yr[tr++]&63,65536>wn?Kr+=String.fromCharCode(wn):(wn-=65536,Kr+=String.fromCharCode(55296|wn>>10,56320|wn&1023))}}else Kr+=String.fromCharCode(wn)}return Kr},By=(Yr,tr)=>(Yr>>>=0)?ry(et(),Yr,tr):"";function Xy(Yr,tr,Ir){return xn?my(3,1,Yr,tr,Ir):0}function Wy(Yr,tr){if(xn)return my(4,1,Yr,tr)}var Ly=Yr=>{for(var tr=0,Ir=0;Ir<Yr.length;++Ir){var Kr=Yr.charCodeAt(Ir);127>=Kr?tr++:2047>=Kr?tr+=2:55296<=Kr&&57343>=Kr?(tr+=4,++Ir):tr+=3}return tr},F1=(Yr,tr,Ir,Kr)=>{if(Ir>>>=0,!(0<Kr))return 0;var wn=Ir;Kr=Ir+Kr-1;for(var In=0;In<Yr.length;++In){var Go=Yr.charCodeAt(In);if(55296<=Go&&57343>=Go){var y0=Yr.charCodeAt(++In);Go=65536+((Go&1023)<<10)|y0&1023}if(127>=Go){if(Ir>=Kr)break;tr[Ir++>>>0]=Go}else{if(2047>=Go){if(Ir+1>=Kr)break;tr[Ir++>>>0]=192|Go>>6}else{if(65535>=Go){if(Ir+2>=Kr)break;tr[Ir++>>>0]=224|Go>>12}else{if(Ir+3>=Kr)break;tr[Ir++>>>0]=240|Go>>18,tr[Ir++>>>0]=128|Go>>12&63}tr[Ir++>>>0]=128|Go>>6&63}tr[Ir++>>>0]=128|Go&63}}return tr[Ir>>>0]=0,Ir-wn},n1=(Yr,tr,Ir)=>F1(Yr,et(),tr,Ir);function d0(Yr,tr){if(xn)return my(5,1,Yr,tr)}function dy(Yr,tr,Ir){if(xn)return my(6,1,Yr,tr,Ir)}function cy(Yr,tr,Ir){return xn?my(7,1,Yr,tr,Ir):0}function My(Yr,tr){if(xn)return my(8,1,Yr,tr)}function W1(Yr,tr,Ir){if(xn)return my(9,1,Yr,tr,Ir)}function w1(Yr,tr,Ir,Kr){if(xn)return my(10,1,Yr,tr,Ir,Kr)}function Tv(Yr,tr,Ir,Kr){if(xn)return my(11,1,Yr,tr,Ir,Kr)}function Sv(Yr,tr,Ir,Kr){if(xn)return my(12,1,Yr,tr,Ir,Kr)}function jv(Yr){if(xn)return my(13,1,Yr)}function uv(Yr,tr){if(xn)return my(14,1,Yr,tr)}function Ev(Yr,tr,Ir){if(xn)return my(15,1,Yr,tr,Ir)}function kv(Yr){Yr>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb($t(),Yr>>>2,Yr).value.then(lv),Yr+=128,Atomics.store($t(),Yr>>>2,1))}g.__emscripten_thread_mailbox_await=kv;var lv=()=>{var Yr=Cv();if(Yr&&(kv(Yr),Yr=J1,!c0))try{if(Yr(),!(0<Ry))try{xn?Qy($0):Y0($0)}catch(tr){tr instanceof f1||tr=="unwind"||Lr(1,tr)}}catch(tr){tr instanceof f1||tr=="unwind"||Lr(1,tr)}};g.checkMailbox=lv;var Iv=[],D1=Yr=>Yr%4===0&&(Yr%100!==0||Yr%400===0),X1=[0,31,60,91,121,152,182,213,244,274,305,335],zv=[0,31,59,90,120,151,181,212,243,273,304,334];function N1(Yr,tr,Ir,Kr,wn,In,Go,y0){return xn?my(16,1,Yr,tr,Ir,Kr,wn,In,Go,y0):-52}function l1(Yr,tr,Ir,Kr,wn,In,Go){if(xn)return my(17,1,Yr,tr,Ir,Kr,wn,In,Go)}var M1=[],dv={},_1=()=>{if(!Bv){var Yr={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:jr||"./this.program"},tr;for(tr in dv)dv[tr]===void 0?delete Yr[tr]:Yr[tr]=dv[tr];var Ir=[];for(tr in Yr)Ir.push(`${tr}=${Yr[tr]}`);Bv=Ir}return Bv},Bv;function Zy(Yr,tr){if(xn)return my(18,1,Yr,tr);Yr>>>=0,tr>>>=0;var Ir=0;return _1().forEach((Kr,wn)=>{var In=tr+Ir;for(wn=h()[Yr+4*wn>>>2>>>0]=In,In=0;In<Kr.length;++In)d()[wn++>>>0]=Kr.charCodeAt(In);d()[wn>>>0]=0,Ir+=Kr.length+1}),0}function cv(Yr,tr){if(xn)return my(19,1,Yr,tr);Yr>>>=0,tr>>>=0;var Ir=_1();h()[Yr>>>2>>>0]=Ir.length;var Kr=0;return Ir.forEach(wn=>Kr+=wn.length+1),h()[tr>>>2>>>0]=Kr,0}function Q1(Yr){return xn?my(20,1,Yr):52}function d1(Yr,tr,Ir,Kr){return xn?my(21,1,Yr,tr,Ir,Kr):52}function pv(Yr,tr,Ir,Kr,wn){return xn?my(22,1,Yr,tr,Ir,Kr,wn):70}var qy=[null,[],[]];function a1(Yr,tr,Ir,Kr){if(xn)return my(23,1,Yr,tr,Ir,Kr);tr>>>=0,Ir>>>=0,Kr>>>=0;for(var wn=0,In=0;In<Ir;In++){var Go=h()[tr>>>2>>>0],y0=h()[tr+4>>>2>>>0];tr+=8;for(var T0=0;T0<y0;T0++){var O0=et()[Go+T0>>>0],I0=qy[Yr];O0===0||O0===10?((Yr===1?N0:e0)(ry(I0,0)),I0.length=0):I0.push(O0)}wn+=y0}return h()[Kr>>>2>>>0]=wn,0}var V1=[31,29,31,30,31,30,31,31,30,31,30,31],Lv=[31,28,31,30,31,30,31,31,30,31,30,31];function Uv(Yr){var tr=Array(Ly(Yr)+1);return F1(Yr,tr,0,tr.length),tr}var fv=(Yr,tr)=>{d().set(Yr,tr>>>0)};function Jv(Yr,tr,Ir,Kr){function wn(u0,a0,j0){for(u0=typeof u0=="number"?u0.toString():u0||"";u0.length<a0;)u0=j0[0]+u0;return u0}function In(u0,a0){return wn(u0,a0,"0")}function Go(u0,a0){function j0(fy){return 0>fy?-1:0<fy?1:0}var z0;return(z0=j0(u0.getFullYear()-a0.getFullYear()))===0&&(z0=j0(u0.getMonth()-a0.getMonth()))===0&&(z0=j0(u0.getDate()-a0.getDate())),z0}function y0(u0){switch(u0.getDay()){case 0:return new Date(u0.getFullYear()-1,11,29);case 1:return u0;case 2:return new Date(u0.getFullYear(),0,3);case 3:return new Date(u0.getFullYear(),0,2);case 4:return new Date(u0.getFullYear(),0,1);case 5:return new Date(u0.getFullYear()-1,11,31);case 6:return new Date(u0.getFullYear()-1,11,30)}}function T0(u0){var a0=u0.Qa;for(u0=new Date(new Date(u0.Ra+1900,0,1).getTime());0<a0;){var j0=u0.getMonth(),z0=(D1(u0.getFullYear())?V1:Lv)[j0];if(a0>z0-u0.getDate())a0-=z0-u0.getDate()+1,u0.setDate(1),11>j0?u0.setMonth(j0+1):(u0.setMonth(0),u0.setFullYear(u0.getFullYear()+1));else{u0.setDate(u0.getDate()+a0);break}}return j0=new Date(u0.getFullYear()+1,0,4),a0=y0(new Date(u0.getFullYear(),0,4)),j0=y0(j0),0>=Go(a0,u0)?0>=Go(j0,u0)?u0.getFullYear()+1:u0.getFullYear():u0.getFullYear()-1}Yr>>>=0,tr>>>=0,Ir>>>=0,Kr>>>=0;var O0=h()[Kr+40>>>2>>>0];Kr={kb:$t()[Kr>>>2>>>0],jb:$t()[Kr+4>>>2>>>0],Sa:$t()[Kr+8>>>2>>>0],Wa:$t()[Kr+12>>>2>>>0],Ta:$t()[Kr+16>>>2>>>0],Ra:$t()[Kr+20>>>2>>>0],Ma:$t()[Kr+24>>>2>>>0],Qa:$t()[Kr+28>>>2>>>0],qb:$t()[Kr+32>>>2>>>0],ib:$t()[Kr+36>>>2>>>0],lb:O0?By(O0):""},Ir=By(Ir),O0={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var I0 in O0)Ir=Ir.replace(new RegExp(I0,"g"),O0[I0]);var H0="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),py="January February March April May June July August September October November December".split(" ");O0={"%a":u0=>H0[u0.Ma].substring(0,3),"%A":u0=>H0[u0.Ma],"%b":u0=>py[u0.Ta].substring(0,3),"%B":u0=>py[u0.Ta],"%C":u0=>In((u0.Ra+1900)/100|0,2),"%d":u0=>In(u0.Wa,2),"%e":u0=>wn(u0.Wa,2," "),"%g":u0=>T0(u0).toString().substring(2),"%G":T0,"%H":u0=>In(u0.Sa,2),"%I":u0=>(u0=u0.Sa,u0==0?u0=12:12<u0&&(u0-=12),In(u0,2)),"%j":u0=>{for(var a0=0,j0=0;j0<=u0.Ta-1;a0+=(D1(u0.Ra+1900)?V1:Lv)[j0++]);return In(u0.Wa+a0,3)},"%m":u0=>In(u0.Ta+1,2),"%M":u0=>In(u0.jb,2),"%n":()=>`
`,"%p":u0=>0<=u0.Sa&&12>u0.Sa?"AM":"PM","%S":u0=>In(u0.kb,2),"%t":()=>"	","%u":u0=>u0.Ma||7,"%U":u0=>In(Math.floor((u0.Qa+7-u0.Ma)/7),2),"%V":u0=>{var a0=Math.floor((u0.Qa+7-(u0.Ma+6)%7)/7);if(2>=(u0.Ma+371-u0.Qa-2)%7&&a0++,a0)a0==53&&(j0=(u0.Ma+371-u0.Qa)%7,j0==4||j0==3&&D1(u0.Ra)||(a0=1));else{a0=52;var j0=(u0.Ma+7-u0.Qa-1)%7;(j0==4||j0==5&&D1(u0.Ra%400-1))&&a0++}return In(a0,2)},"%w":u0=>u0.Ma,"%W":u0=>In(Math.floor((u0.Qa+7-(u0.Ma+6)%7)/7),2),"%y":u0=>(u0.Ra+1900).toString().substring(2),"%Y":u0=>u0.Ra+1900,"%z":u0=>{u0=u0.ib;var a0=0<=u0;return u0=Math.abs(u0)/60,(a0?"+":"-")+("0000"+(u0/60*100+u0%60)).slice(-4)},"%Z":u0=>u0.lb,"%%":()=>"%"},Ir=Ir.replace(/%%/g,"\0\0");for(I0 in O0)Ir.includes(I0)&&(Ir=Ir.replace(new RegExp(I0,"g"),O0[I0](Kr)));return Ir=Ir.replace(/\0\0/g,"%"),I0=Uv(Ir),I0.length>tr?0:(fv(I0,Yr),I0.length-1)}M0.Va();var Fv=[i1,X0,g0,Xy,Wy,d0,dy,cy,My,W1,w1,Tv,Sv,jv,uv,Ev,N1,l1,Zy,cv,Q1,d1,pv,a1],hv={b:function(Yr,tr,Ir){throw Yr>>>=0,new r0(Yr).Va(tr>>>0,Ir>>>0),i0=Yr,i0},L:function(Yr){Z0(Yr>>>0,!qr,1,!ir,131072,!1),M0.$a()},j:function(Yr){Yr>>>=0,xn?postMessage({cmd:"cleanupThread",thread:Yr}):M0.Ya(M0.La[Yr])},H:b0,h:Xy,S:Wy,D:d0,F:dy,T:cy,Q:My,J:W1,P:w1,n:Tv,E:Sv,B:jv,R:uv,C:Ev,p:()=>1,z:function(Yr,tr){Yr>>>=0,Yr==tr>>>0?setTimeout(lv):xn?postMessage({targetThread:Yr,cmd:"checkMailbox"}):(Yr=M0.La[Yr])&&Yr.postMessage({cmd:"checkMailbox"})},I:function(Yr,tr,Ir,Kr,wn){tr>>>=0,Ir>>>=0,Iv.length=Kr,wn=wn>>>0>>>3;for(var In=0;In<Kr;In++)Iv[In]=b()[wn+In>>>0];return Yr=tr?_y[tr]:Fv[Yr],M0.eb=Ir,Ir=Yr(...Iv),M0.eb=0,Ir},K:kv,o:function(Yr){vn&&M0.La[Yr>>>0].ref()},s:function(Yr,tr,Ir){Yr=tr+2097152>>>0<4194305-!!Yr?(Yr>>>0)+4294967296*tr:NaN,Ir>>>=0,Yr=new Date(1e3*Yr),$t()[Ir>>>2>>>0]=Yr.getUTCSeconds(),$t()[Ir+4>>>2>>>0]=Yr.getUTCMinutes(),$t()[Ir+8>>>2>>>0]=Yr.getUTCHours(),$t()[Ir+12>>>2>>>0]=Yr.getUTCDate(),$t()[Ir+16>>>2>>>0]=Yr.getUTCMonth(),$t()[Ir+20>>>2>>>0]=Yr.getUTCFullYear()-1900,$t()[Ir+24>>>2>>>0]=Yr.getUTCDay(),Yr=(Yr.getTime()-Date.UTC(Yr.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,$t()[Ir+28>>>2>>>0]=Yr},t:function(Yr,tr,Ir){Yr=tr+2097152>>>0<4194305-!!Yr?(Yr>>>0)+4294967296*tr:NaN,Ir>>>=0,Yr=new Date(1e3*Yr),$t()[Ir>>>2>>>0]=Yr.getSeconds(),$t()[Ir+4>>>2>>>0]=Yr.getMinutes(),$t()[Ir+8>>>2>>>0]=Yr.getHours(),$t()[Ir+12>>>2>>>0]=Yr.getDate(),$t()[Ir+16>>>2>>>0]=Yr.getMonth(),$t()[Ir+20>>>2>>>0]=Yr.getFullYear()-1900,$t()[Ir+24>>>2>>>0]=Yr.getDay(),tr=(D1(Yr.getFullYear())?X1:zv)[Yr.getMonth()]+Yr.getDate()-1|0,$t()[Ir+28>>>2>>>0]=tr,$t()[Ir+36>>>2>>>0]=-(60*Yr.getTimezoneOffset()),tr=new Date(Yr.getFullYear(),6,1).getTimezoneOffset();var Kr=new Date(Yr.getFullYear(),0,1).getTimezoneOffset();Yr=(tr!=Kr&&Yr.getTimezoneOffset()==Math.min(Kr,tr))|0,$t()[Ir+32>>>2>>>0]=Yr},u:function(Yr){Yr>>>=0;var tr=new Date($t()[Yr+20>>>2>>>0]+1900,$t()[Yr+16>>>2>>>0],$t()[Yr+12>>>2>>>0],$t()[Yr+8>>>2>>>0],$t()[Yr+4>>>2>>>0],$t()[Yr>>>2>>>0],0),Ir=$t()[Yr+32>>>2>>>0],Kr=tr.getTimezoneOffset(),wn=new Date(tr.getFullYear(),6,1).getTimezoneOffset(),In=new Date(tr.getFullYear(),0,1).getTimezoneOffset(),Go=Math.min(In,wn);return 0>Ir?$t()[Yr+32>>>2>>>0]=+(wn!=In&&Go==Kr):0<Ir!=(Go==Kr)&&(wn=Math.max(In,wn),tr.setTime(tr.getTime()+6e4*((0<Ir?Go:wn)-Kr))),$t()[Yr+24>>>2>>>0]=tr.getDay(),Ir=(D1(tr.getFullYear())?X1:zv)[tr.getMonth()]+tr.getDate()-1|0,$t()[Yr+28>>>2>>>0]=Ir,$t()[Yr>>>2>>>0]=tr.getSeconds(),$t()[Yr+4>>>2>>>0]=tr.getMinutes(),$t()[Yr+8>>>2>>>0]=tr.getHours(),$t()[Yr+12>>>2>>>0]=tr.getDate(),$t()[Yr+16>>>2>>>0]=tr.getMonth(),$t()[Yr+20>>>2>>>0]=tr.getYear(),Yr=tr.getTime(),Yr=isNaN(Yr)?-1:Yr/1e3,H1((Gy=Yr,1<=+Math.abs(Gy)?0<Gy?+Math.floor(Gy/4294967296)>>>0:~~+Math.ceil((Gy-+(~~Gy>>>0))/4294967296)>>>0:0)),Yr>>>0},q:N1,r:l1,y:function(Yr,tr,Ir,Kr){Yr>>>=0,tr>>>=0,Ir>>>=0,Kr>>>=0;var wn=new Date().getFullYear(),In=new Date(wn,0,1),Go=new Date(wn,6,1);wn=In.getTimezoneOffset();var y0=Go.getTimezoneOffset(),T0=Math.max(wn,y0);h()[Yr>>>2>>>0]=60*T0,$t()[tr>>>2>>>0]=+(wn!=y0),Yr=O0=>O0.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],In=Yr(In),Go=Yr(Go),y0<wn?(n1(In,Ir,17),n1(Go,Kr,17)):(n1(In,Kr,17),n1(Go,Ir,17))},c:()=>{Iy("")},O:function(Yr,tr,Ir){Yr>>>=0,tr>>>=0,Ir>>>=0,M1.length=0;for(var Kr;Kr=et()[tr++>>>0];){var wn=Kr!=105;wn&=Kr!=112,Ir+=wn&&Ir%8?4:0,M1.push(Kr==112?h()[Ir>>>2>>>0]:Kr==105?$t()[Ir>>>2>>>0]:b()[Ir>>>3>>>0]),Ir+=wn?8:4}return _y[Yr](...M1)},k:()=>{},i:()=>Date.now(),U:()=>{throw Ry+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>vn?(Cp$1(),ar(Lp$1)).cpus().length:navigator.hardwareConcurrency,x:function(Yr){Yr>>>=0;var tr=et().length;if(Yr<=tr||4294901760<Yr)return!1;for(var Ir=1;4>=Ir;Ir*=2){var Kr=tr*(1+.2/Ir);Kr=Math.min(Kr,Yr+100663296);var wn=Math;Kr=Math.max(Yr,Kr);e:{wn=(wn.min.call(wn,4294901760,Kr+(65536-Kr%65536)%65536)-l0.buffer.byteLength+65535)/65536;try{l0.grow(wn),ny();var In=1;break e}catch{}In=void 0}if(In)return!0}return!1},M:Zy,N:cv,G:Y0,g:Q1,m:d1,v:pv,l:a1,a:l0||g.wasmMemory,w:Jv,d:function(Yr,tr,Ir,Kr){return Jv(Yr>>>0,tr>>>0,Ir>>>0,Kr>>>0)}},V0=function(){function Yr(Ir,Kr){return V0=Ir.exports,V0=h1(),M0.ab.push(V0.ya),ko=V0.za,Ey.unshift(V0.V),Uo=Kr,ky(),V0}var tr={a:hv};if(ly++,g.instantiateWasm)try{return g.instantiateWasm(tr,Yr)}catch(Ir){e0(`Module.instantiateWasm callback failed with error: ${Ir}`),Ht(Ir)}return zy(tr,function(Ir){Yr(Ir.instance,Ir.module)}).catch(Ht),{}}();g._OrtInit=(Yr,tr)=>(g._OrtInit=V0.W)(Yr,tr),g._OrtGetLastError=(Yr,tr)=>(g._OrtGetLastError=V0.X)(Yr,tr),g._OrtCreateSessionOptions=(Yr,tr,Ir,Kr,wn,In,Go,y0,T0,O0)=>(g._OrtCreateSessionOptions=V0.Y)(Yr,tr,Ir,Kr,wn,In,Go,y0,T0,O0),g._OrtAppendExecutionProvider=(Yr,tr)=>(g._OrtAppendExecutionProvider=V0.Z)(Yr,tr),g._OrtAddFreeDimensionOverride=(Yr,tr,Ir)=>(g._OrtAddFreeDimensionOverride=V0._)(Yr,tr,Ir),g._OrtAddSessionConfigEntry=(Yr,tr,Ir)=>(g._OrtAddSessionConfigEntry=V0.$)(Yr,tr,Ir),g._OrtReleaseSessionOptions=Yr=>(g._OrtReleaseSessionOptions=V0.aa)(Yr),g._OrtCreateSession=(Yr,tr,Ir)=>(g._OrtCreateSession=V0.ba)(Yr,tr,Ir),g._OrtReleaseSession=Yr=>(g._OrtReleaseSession=V0.ca)(Yr),g._OrtGetInputOutputCount=(Yr,tr,Ir)=>(g._OrtGetInputOutputCount=V0.da)(Yr,tr,Ir),g._OrtGetInputName=(Yr,tr)=>(g._OrtGetInputName=V0.ea)(Yr,tr),g._OrtGetOutputName=(Yr,tr)=>(g._OrtGetOutputName=V0.fa)(Yr,tr),g._OrtFree=Yr=>(g._OrtFree=V0.ga)(Yr),g._OrtCreateTensor=(Yr,tr,Ir,Kr,wn,In)=>(g._OrtCreateTensor=V0.ha)(Yr,tr,Ir,Kr,wn,In),g._OrtGetTensorData=(Yr,tr,Ir,Kr,wn)=>(g._OrtGetTensorData=V0.ia)(Yr,tr,Ir,Kr,wn),g._OrtReleaseTensor=Yr=>(g._OrtReleaseTensor=V0.ja)(Yr),g._OrtCreateRunOptions=(Yr,tr,Ir,Kr)=>(g._OrtCreateRunOptions=V0.ka)(Yr,tr,Ir,Kr),g._OrtAddRunConfigEntry=(Yr,tr,Ir)=>(g._OrtAddRunConfigEntry=V0.la)(Yr,tr,Ir),g._OrtReleaseRunOptions=Yr=>(g._OrtReleaseRunOptions=V0.ma)(Yr),g._OrtCreateBinding=Yr=>(g._OrtCreateBinding=V0.na)(Yr),g._OrtBindInput=(Yr,tr,Ir)=>(g._OrtBindInput=V0.oa)(Yr,tr,Ir),g._OrtBindOutput=(Yr,tr,Ir,Kr)=>(g._OrtBindOutput=V0.pa)(Yr,tr,Ir,Kr),g._OrtClearBoundOutputs=Yr=>(g._OrtClearBoundOutputs=V0.qa)(Yr),g._OrtReleaseBinding=Yr=>(g._OrtReleaseBinding=V0.ra)(Yr),g._OrtRunWithBinding=(Yr,tr,Ir,Kr,wn)=>(g._OrtRunWithBinding=V0.sa)(Yr,tr,Ir,Kr,wn),g._OrtRun=(Yr,tr,Ir,Kr,wn,In,Go,y0)=>(g._OrtRun=V0.ta)(Yr,tr,Ir,Kr,wn,In,Go,y0),g._OrtEndProfiling=Yr=>(g._OrtEndProfiling=V0.ua)(Yr);var Cv=g._pthread_self=()=>(Cv=g._pthread_self=V0.va)();g._malloc=Yr=>(g._malloc=V0.wa)(Yr),g._free=Yr=>(g._free=V0.xa)(Yr),g.__emscripten_tls_init=()=>(g.__emscripten_tls_init=V0.ya)();var Z0=g.__emscripten_thread_init=(Yr,tr,Ir,Kr,wn,In)=>(Z0=g.__emscripten_thread_init=V0.Aa)(Yr,tr,Ir,Kr,wn,In);g.__emscripten_thread_crashed=()=>(g.__emscripten_thread_crashed=V0.Ba)();var mv=(Yr,tr,Ir,Kr,wn)=>(mv=V0.Ca)(Yr,tr,Ir,Kr,wn),x1=Yr=>(x1=V0.Da)(Yr),Qy=g.__emscripten_thread_exit=Yr=>(Qy=g.__emscripten_thread_exit=V0.Ea)(Yr),J1=()=>(J1=V0.Fa)(),H1=Yr=>(H1=V0.Ga)(Yr),ev=(Yr,tr)=>(ev=V0.Ha)(Yr,tr),o1=Yr=>(o1=V0.Ia)(Yr),gv=Yr=>(gv=V0.Ja)(Yr),c1=()=>(c1=V0.Ka)();function h1(){var Yr=V0;Yr=Object.assign({},Yr);var tr=Kr=>()=>Kr()>>>0,Ir=Kr=>wn=>Kr(wn)>>>0;return Yr.va=tr(Yr.va),Yr.wa=Ir(Yr.wa),Yr.emscripten_main_runtime_thread_id=tr(Yr.emscripten_main_runtime_thread_id),Yr.Ja=Ir(Yr.Ja),Yr.Ka=tr(Yr.Ka),Yr}g.wasmMemory=l0,g.stackSave=()=>c1(),g.stackRestore=Yr=>o1(Yr),g.stackAlloc=Yr=>gv(Yr),g.keepRuntimeAlive=()=>0<Ry,g.UTF8ToString=By,g.stringToUTF8=n1,g.lengthBytesUTF8=Ly,g.ExitStatus=f1,g.PThread=M0;var tv;ty=function Yr(){tv||k1(),tv||(ty=Yr)};function k1(){if(!(0<ly))if(xn)jt(g),xn||$1(Ey),startWorker(g);else{if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)gy.unshift(g.preRun.shift());$1(gy),0<ly||tv||(tv=!0,g.calledRun=!0,c0||(xn||$1(Ey),jt(g),xn||$1(Ty)))}}return k1(),Kt}})();typeof e=="object"&&typeof i=="object"?i.exports=a:typeof define=="function"&&define.amd&&define([],()=>a)}),Bp$1=me((e,i)=>{i.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),Rp$1,sg,oa$1,ia$1,So$1,Np$1,ug,lg,fg,Mp$1,De$1,Ur=L(()=>{Rp$1=Pp$1(),sg=kp$1(),ia$1=!1,So$1=!1,Np$1=!1,ug=e=>{if(e===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},lg=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},fg=(e,i)=>e?i?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":i?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Mp$1=async e=>{if(ia$1)return Promise.resolve();if(So$1)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Np$1)throw new Error("previous call to 'initializeWebAssembly()' failed.");So$1=!0;let i=e.initTimeout,a=e.numThreads,o=e.simd,c=ug(a),s=o&&lg(),d=e.wasmPaths,et=typeof d=="string"?d:void 0,$t=fg(s,c),h=typeof d=="object"?d[$t]:void 0,b=!1,g=[];if(i>0&&g.push(new Promise(jt=>{setTimeout(()=>{b=!0,jt()},i)})),g.push(new Promise((jt,Ht)=>{let Kt=c?sg:Rp$1,or={locateFile:(jr,Lr)=>c&&jr.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Bp$1()],{type:"text/javascript"})):jr.endsWith(".wasm")?h||(et??Lr)+$t:Lr+jr};if(c)if(or.numThreads=a,typeof Blob>"u")or.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let jr=`var ortWasmThreaded=${Kt.toString()};`;or.mainScriptUrlOrBlob=new Blob([jr],{type:"text/javascript"})}Kt(or).then(jr=>{So$1=!1,ia$1=!0,oa$1=jr,jt()},jr=>{So$1=!1,Np$1=!0,Ht(jr)})})),await Promise.race(g),b)throw new Error(`WebAssembly backend initializing failed due to timeout: ${i}ms`)},De$1=()=>{if(ia$1&&oa$1)return oa$1;throw new Error("WebAssembly is not initialized yet.")}}),ve,bn,_e$1,Ao=L(()=>{Ur(),ve=(e,i)=>{let a=De$1(),o=a.lengthBytesUTF8(e)+1,c=a._malloc(o);return a.stringToUTF8(e,c,o),i.push(c),c},bn=(e,i,a,o)=>{if(typeof e=="object"&&e!==null){if(a.has(e))throw new Error("Circular reference in options");a.add(e)}Object.entries(e).forEach(([c,s])=>{let d=i?i+c:c;if(typeof s=="object")bn(s,d+".",a,o);else if(typeof s=="string"||typeof s=="number")o(d,s.toString());else if(typeof s=="boolean")o(d,s?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof s}`)})},_e$1=e=>{let i=De$1(),a=i.stackSave();try{let o=i.stackAlloc(8);i._OrtGetLastError(o,o+4);let c=i.HEAP32[o/4],s=i.HEAPU32[o/4+1],d=s?i.UTF8ToString(s):"";throw new Error(`${e} ERROR_CODE: ${c}, ERROR_MESSAGE: ${d}`)}finally{i.stackRestore(a)}}}),Gp$1,Up$1=L(()=>{Ur(),Ao(),Gp$1=e=>{let i=De$1(),a=0,o=[],c=e||{};try{if((e==null?void 0:e.logSeverityLevel)===void 0)c.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if((e==null?void 0:e.logVerbosityLevel)===void 0)c.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);(e==null?void 0:e.terminate)===void 0&&(c.terminate=!1);let s=0;return(e==null?void 0:e.tag)!==void 0&&(s=ve(e.tag,o)),a=i._OrtCreateRunOptions(c.logSeverityLevel,c.logVerbosityLevel,!!c.terminate,s),a===0&&_e$1("Can't create run options."),(e==null?void 0:e.extra)!==void 0&&bn(e.extra,"",new WeakSet,(d,et)=>{let $t=ve(d,o),h=ve(et,o);i._OrtAddRunConfigEntry(a,$t,h)!==0&&_e$1(`Can't set a run config entry: ${d} - ${et}.`)}),[a,o]}catch(s){throw a!==0&&i._OrtReleaseRunOptions(a),o.forEach(d=>i._free(d)),s}}}),cg,pg,dg,hg,zp$1,Vp$1=L(()=>{Ur(),Ao(),cg=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},pg=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},dg=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let i=e.extra.session;i.use_ort_model_bytes_directly||(i.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(e.enableMemPattern=!1)},hg=(e,i,a)=>{for(let o of i){let c=typeof o=="string"?o:o.name;switch(c){case"webnn":if(c="WEBNN",typeof o!="string"){let d=o;if(d!=null&&d.deviceType){let et=ve("deviceType",a),$t=ve(d.deviceType,a);De$1()._OrtAddSessionConfigEntry(e,et,$t)!==0&&_e$1(`Can't set a session config entry: 'deviceType' - ${d.deviceType}.`)}if(d!=null&&d.numThreads){let et=d.numThreads;(typeof et!="number"||!Number.isInteger(et)||et<0)&&(et=0);let $t=ve("numThreads",a),h=ve(et.toString(),a);De$1()._OrtAddSessionConfigEntry(e,$t,h)!==0&&_e$1(`Can't set a session config entry: 'numThreads' - ${d.numThreads}.`)}if(d!=null&&d.powerPreference){let et=ve("powerPreference",a),$t=ve(d.powerPreference,a);De$1()._OrtAddSessionConfigEntry(e,et,$t)!==0&&_e$1(`Can't set a session config entry: 'powerPreference' - ${d.powerPreference}.`)}}break;case"webgpu":if(c="JS",typeof o!="string"){let d=o;if(d!=null&&d.preferredLayout){if(d.preferredLayout!=="NCHW"&&d.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${d.preferredLayout}`);let et=ve("preferredLayout",a),$t=ve(d.preferredLayout,a);De$1()._OrtAddSessionConfigEntry(e,et,$t)!==0&&_e$1(`Can't set a session config entry: 'preferredLayout' - ${d.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${c}`)}let s=ve(c,a);De$1()._OrtAppendExecutionProvider(e,s)!==0&&_e$1(`Can't append execution provider: ${c}.`)}},zp$1=e=>{let i=De$1(),a=0,o=[],c=e||{};dg(c);try{let s=cg(c.graphOptimizationLevel??"all"),d=pg(c.executionMode??"sequential"),et=typeof c.logId=="string"?ve(c.logId,o):0,$t=c.logSeverityLevel??2;if(!Number.isInteger($t)||$t<0||$t>4)throw new Error(`log serverity level is not valid: ${$t}`);let h=c.logVerbosityLevel??0;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log verbosity level is not valid: ${h}`);let b=typeof c.optimizedModelFilePath=="string"?ve(c.optimizedModelFilePath,o):0;if(a=i._OrtCreateSessionOptions(s,!!c.enableCpuMemArena,!!c.enableMemPattern,d,!!c.enableProfiling,0,et,$t,h,b),a===0&&_e$1("Can't create session options."),c.executionProviders&&hg(a,c.executionProviders,o),c.enableGraphCapture!==void 0){if(typeof c.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${c.enableGraphCapture}`);let g=ve("enableGraphCapture",o),jt=ve(c.enableGraphCapture.toString(),o);i._OrtAddSessionConfigEntry(a,g,jt)!==0&&_e$1(`Can't set a session config entry: 'enableGraphCapture' - ${c.enableGraphCapture}.`)}if(c.freeDimensionOverrides)for(let[g,jt]of Object.entries(c.freeDimensionOverrides)){if(typeof g!="string")throw new Error(`free dimension override name must be a string: ${g}`);if(typeof jt!="number"||!Number.isInteger(jt)||jt<0)throw new Error(`free dimension override value must be a non-negative integer: ${jt}`);let Ht=ve(g,o);i._OrtAddFreeDimensionOverride(a,Ht,jt)!==0&&_e$1(`Can't set a free dimension override: ${g} - ${jt}.`)}return c.extra!==void 0&&bn(c.extra,"",new WeakSet,(g,jt)=>{let Ht=ve(g,o),Kt=ve(jt,o);i._OrtAddSessionConfigEntry(a,Ht,Kt)!==0&&_e$1(`Can't set a session config entry: ${g} - ${jt}.`)}),[a,o]}catch(s){throw a!==0&&i._OrtReleaseSessionOptions(a),o.forEach(d=>i._free(d)),s}}}),aa$1,Wp$1,sa$1,Hp$1,qp$1,Po,jp$1,ua$1=L(()=>{aa$1=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},Wp$1=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},sa$1=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],Hp$1=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},qp$1=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},Po=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool",jp$1=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e}`)}}}),gn,la$1=L(()=>{gn=async e=>{if(typeof e=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(e))}catch(i){if(i.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(e),o=[];for await(let c of a)o.push(c);return new Uint8Array(Buffer.concat(o))}throw i}else{let i=await fetch(e);if(!i.ok)throw new Error(`failed to load external data file: ${e}`);let a=i.headers.get("Content-Length"),o=a?parseInt(a,10):0;if(o<1073741824)return new Uint8Array(await i.arrayBuffer());{if(!i.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let c=i.body.getReader(),s;try{s=new ArrayBuffer(o)}catch(et){if(et instanceof RangeError){let $t=Math.ceil(o/65536);s=new WebAssembly.Memory({initial:$t,maximum:$t}).buffer}else throw et}let d=0;for(;;){let{done:et,value:$t}=await c.read();if(et)break;let h=$t.byteLength;new Uint8Array(s,d,h).set($t),d+=h}return new Uint8Array(s,0,o)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)}}),mg,Xp$1,Kp$1,zr$1,bg,fa$1,Jp$1,Zp$1,Yp$1,Qp$1,ed$1,td$1,rd$1=L(()=>{Up$1(),Vp$1(),ua$1(),Ur(),Ao(),la$1(),mg=(e,i)=>{De$1()._OrtInit(e,i)!==0&&_e$1("Can't initialize onnxruntime.")},Xp$1=async e=>{mg(e.wasm.numThreads,qp$1(e.logLevel))},Kp$1=async(e,i)=>{},zr$1=new Map,bg=e=>{let i=De$1(),a=i.stackSave();try{let o=i.stackAlloc(8);return i._OrtGetInputOutputCount(e,o,o+4)!==0&&_e$1("Can't get session input/output count."),[i.HEAP32[o/4],i.HEAP32[o/4+1]]}finally{i.stackRestore(a)}},fa$1=e=>{let i=De$1(),a=i._malloc(e.byteLength);if(a===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return i.HEAPU8.set(e,a),[a,e.byteLength]},Jp$1=async(e,i)=>{var b;let a,o,c=De$1();Array.isArray(e)?[a,o]=e:e.buffer===c.HEAPU8.buffer?[a,o]=[e.byteOffset,e.byteLength]:[a,o]=fa$1(e);let s=0,d=0,et=[],$t=[],h=[];try{if([d,et]=zp$1(i),(i==null?void 0:i.externalData)&&c.mountExternalData){let ir=[];for(let qr of i.externalData){let vn=typeof qr=="string"?qr:qr.path;ir.push(gn(typeof qr=="string"?qr:qr.data).then(xn=>{c.mountExternalData(vn,xn)}))}await Promise.all(ir)}s=await c._OrtCreateSession(a,o,d),s===0&&_e$1("Can't create a session.");let[g,jt]=bg(s),Ht=!!(i!=null&&i.enableGraphCapture),Kt=[],or=[],jr=[];for(let ir=0;ir<g;ir++){let qr=c._OrtGetInputName(s,ir);qr===0&&_e$1("Can't get an input name."),$t.push(qr),Kt.push(c.UTF8ToString(qr))}for(let ir=0;ir<jt;ir++){let qr=c._OrtGetOutputName(s,ir);qr===0&&_e$1("Can't get an output name."),h.push(qr);let vn=c.UTF8ToString(qr);or.push(vn)}let Lr=null;return zr$1.set(s,[s,$t,h,Lr,Ht,!1]),[s,Kt,or]}catch(g){throw $t.forEach(jt=>c._OrtFree(jt)),h.forEach(jt=>c._OrtFree(jt)),s!==0&&c._OrtReleaseSession(s),g}finally{c._free(a),d!==0&&c._OrtReleaseSessionOptions(d),et.forEach(g=>c._free(g)),(b=c.unmountExternalData)==null||b.call(c)}},Zp$1=e=>{var $t;let i=De$1(),a=zr$1.get(e);if(!a)throw new Error(`cannot release session. invalid session id: ${e}`);let[o,c,s,d,et]=a;d&&(et&&i._OrtClearBoundOutputs(d.handle),i._OrtReleaseBinding(d.handle)),($t=i.jsepOnReleaseSession)==null||$t.call(i,e),c.forEach(h=>i._OrtFree(h)),s.forEach(h=>i._OrtFree(h)),i._OrtReleaseSession(o),zr$1.delete(e)},Yp$1=(e,i,a,o,c,s=!1)=>{if(!e){i.push(0);return}let d=De$1(),et=e[0],$t=e[1],h=e[3],b,g;if(et==="string"&&h==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(s&&h!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${c} when enableGraphCapture is true.`);if(h==="gpu-buffer"){let Kt=e[2].gpuBuffer,or=sa$1(aa$1(et));g=$t.reduce((Lr,ir)=>Lr*ir,1)*or;let jr=d.jsepRegisterBuffer;if(!jr)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');b=jr(o,c,Kt,g)}else{let Kt=e[2];if(Array.isArray(Kt)){g=4*Kt.length,b=d._malloc(g),a.push(b);let or=b/4;for(let jr=0;jr<Kt.length;jr++){if(typeof Kt[jr]!="string")throw new TypeError(`tensor data at index ${jr} is not a string`);d.HEAPU32[or++]=ve(Kt[jr],a)}}else g=Kt.byteLength,b=d._malloc(g),a.push(b),d.HEAPU8.set(new Uint8Array(Kt.buffer,Kt.byteOffset,g),b)}let jt=d.stackSave(),Ht=d.stackAlloc(4*$t.length);try{let Kt=Ht/4;$t.forEach(jr=>d.HEAP32[Kt++]=jr);let or=d._OrtCreateTensor(aa$1(et),b,g,Ht,$t.length,jp$1(h));or===0&&_e$1(`Can't create tensor for input/output. session=${o}, index=${c}.`),i.push(or)}finally{d.stackRestore(jt)}},Qp$1=async(e,i,a,o,c,s)=>{var o0;let d=De$1(),et=zr$1.get(e);if(!et)throw new Error(`cannot run inference. invalid session id: ${e}`);let $t=et[0],h=et[1],b=et[2],g=et[3],jt=et[4];et[5];let Ht=i.length,Kt=o.length,or=0,jr=[],Lr=[],ir=[],qr=[],vn=d.stackSave(),xn=d.stackAlloc(Ht*4),No=d.stackAlloc(Ht*4),Ro=d.stackAlloc(Kt*4),Xo=d.stackAlloc(Kt*4);try{[or,jr]=Gp$1(s);for(let e0=0;e0<Ht;e0++)Yp$1(a[e0],Lr,qr,e,i[e0],jt);for(let e0=0;e0<Kt;e0++)Yp$1(c[e0],ir,qr,e,Ht+o[e0],jt);let s0=xn/4,h0=No/4,E0=Ro/4,C0=Xo/4;for(let e0=0;e0<Ht;e0++)d.HEAPU32[s0++]=Lr[e0],d.HEAPU32[h0++]=h[i[e0]];for(let e0=0;e0<Kt;e0++)d.HEAPU32[E0++]=ir[e0],d.HEAPU32[C0++]=b[o[e0]];(o0=d.jsepOnRunStart)==null||o0.call(d,$t);let D0;D0=await d._OrtRun($t,No,xn,Ht,Xo,Kt,Ro,or),D0!==0&&_e$1("failed to call OrtRun().");let N0=[];for(let e0=0;e0<Kt;e0++){let l0=d.HEAPU32[Ro/4+e0];if(l0===ir[e0]){N0.push(c[e0]);continue}let Uo=d.stackSave(),c0=d.stackAlloc(4*4),$0=!1,Bo,x0=0;try{d._OrtGetTensorData(l0,c0,c0+4,c0+8,c0+12)!==0&&_e$1(`Can't access output tensor data on index ${e0}.`);let A0=c0/4,G0=d.HEAPU32[A0++];x0=d.HEAPU32[A0++];let q0=d.HEAPU32[A0++],ny=d.HEAPU32[A0++],xy=[];for(let Ty=0;Ty<ny;Ty++)xy.push(d.HEAPU32[q0/4+Ty]);d._OrtFree(q0);let gy=xy.reduce((Ty,ly)=>Ty*ly,1);Bo=Wp$1(G0);let Ey=g==null?void 0:g.outputPreferredLocations[o[e0]];if(Bo==="string"){if(Ey==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Ty=[],ly=x0/4;for(let ty=0;ty<gy;ty++){let ky=d.HEAPU32[ly++],Iy=ty===gy-1?void 0:d.HEAPU32[ly]-ky;Ty.push(d.UTF8ToString(ky,Iy))}N0.push([Bo,xy,Ty,"cpu"])}else if(Ey==="gpu-buffer"&&gy>0){let Ty=d.jsepGetBuffer;if(!Ty)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let ly=Ty(x0),ty=sa$1(G0);if(ty===void 0||!Po(Bo))throw new Error(`Unsupported data type: ${Bo}`);$0=!0,N0.push([Bo,xy,{gpuBuffer:ly,download:d.jsepCreateDownloader(ly,gy*ty,Bo),dispose:()=>{d._OrtReleaseTensor(l0)}},"gpu-buffer"])}else{let Ty=Hp$1(Bo),ly=new Ty(gy);new Uint8Array(ly.buffer,ly.byteOffset,ly.byteLength).set(d.HEAPU8.subarray(x0,x0+ly.byteLength)),N0.push([Bo,xy,ly,"cpu"])}}finally{d.stackRestore(Uo),Bo==="string"&&x0&&d._free(x0),$0||d._OrtReleaseTensor(l0)}}return g&&!jt&&(d._OrtClearBoundOutputs(g.handle),zr$1.set(e,[$t,h,b,g,jt,!1])),N0}finally{d.stackRestore(vn),Lr.forEach(s0=>d._OrtReleaseTensor(s0)),ir.forEach(s0=>d._OrtReleaseTensor(s0)),qr.forEach(s0=>d._free(s0)),or!==0&&d._OrtReleaseRunOptions(or),jr.forEach(s0=>d._free(s0))}},ed$1=e=>{let i=De$1(),a=zr$1.get(e);if(!a)throw new Error("invalid session id");let o=a[0],c=i._OrtEndProfiling(o);c===0&&_e$1("Can't get an profile file name."),i._OrtFree(c)},td$1=e=>{let i=[];for(let a of e){let o=a[2];!Array.isArray(o)&&"buffer"in o&&i.push(o.buffer)}return i}}),nd$1=me((e,i)=>{i.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var vt=Object.defineProperty;var qr=Object.getOwnPropertyDescriptor;var Vr=Object.getOwnPropertyNames;var Jr=Object.prototype.hasOwnProperty;var _t=(i,c)=>()=>(i&&(c=i(i=0)),c);var Ke=(i,c)=>()=>(c||i((c={exports:{}}).exports,c),c.exports),Et=(i,c)=>{for(var a in c)vt(i,a,{get:c[a],enumerable:!0})},Xr=(i,c,a,h)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of Vr(c))!Jr.call(i,f)&&f!==a&&vt(i,f,{get:()=>c[f],enumerable:!(h=qr(c,f))||h.enumerable});return i};var et=i=>Xr(vt({},"__esModule",{value:!0}),i);var St={};Et(St,{createReadStream:()=>lr,readFile:()=>Qr,readFileSync:()=>Zr});var Qr,Zr,lr,At=_t(()=>{Qr=void 0,Zr=void 0,lr=void 0});var Tt={};Et(Tt,{join:()=>Kr});var Kr,Mt=_t(()=>{Kr=void 0});var pr=Ke((dr,Ct)=>{"use strict";var cr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){var a=c,h,f,w=new Promise((t,o)=>{h=t,f=o}),g=Object.assign({},a),s="./this.program",S=typeof window=="object",x=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="",I,V,R;if(H){var B=(At(),et(St)),D=(Mt(),et(Tt));A=x?D.dirname(A)+"/":__dirname+"/",I=(t,o)=>(t=ce(t)?new URL(t):D.normalize(t),B.readFileSync(t,o?void 0:"utf8")),R=t=>(t=I(t,!0),t.buffer||(t=new Uint8Array(t)),t),V=(t,o,u,m=!0)=>{t=ce(t)?new URL(t):D.normalize(t),B.readFile(t,m?void 0:"utf8",(O,E)=>{O?u(O):o(m?E.buffer:E)})},!a.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2)}else(S||x)&&(x?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),i&&(A=i),A.startsWith("blob:")?A="":A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1),I=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},x&&(R=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),V=(t,o,u)=>{var m=new XMLHttpRequest;m.open("GET",t,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):u()},m.onerror=u,m.send(null)});var T=console.log.bind(console),L=console.error.bind(console);Object.assign(a,g),g=null;var W,de=!1,pe,Z,_,J,Pe;function le(){var t=W.buffer;a.HEAP8=pe=new Int8Array(t),a.HEAP16=new Int16Array(t),a.HEAPU8=Z=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAP32=_=new Int32Array(t),a.HEAPU32=J=new Uint32Array(t),a.HEAPF32=new Float32Array(t),a.HEAPF64=Pe=new Float64Array(t)}var Ie=[],ne=[],X=[],we=0,me=null,F=null;function ie(t){throw t="Aborted("+t+")",L(t),de=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),f(t),t}var xe=t=>t.startsWith("data:application/octet-stream;base64,"),ce=t=>t.startsWith("file://"),be;if(be="ort-wasm.wasm",!xe(be)){var ae=be;be=a.locateFile?a.locateFile(ae,A):A+ae}function K(t){if(R)return R(t);throw"both async and sync fetching of the wasm failed"}function je(t){if(S||x){if(typeof fetch=="function"&&!ce(t))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw`failed to load wasm binary file at \'${t}\'`;return o.arrayBuffer()}).catch(()=>K(t));if(V)return new Promise((o,u)=>{V(t,m=>o(new Uint8Array(m)),u)})}return Promise.resolve().then(()=>K(t))}function Oe(t,o,u){return je(t).then(m=>WebAssembly.instantiate(m,o)).then(u,m=>{L(`failed to asynchronously prepare wasm: ${m}`),ie(m)})}function Ue(t,o){var u=be;return typeof WebAssembly.instantiateStreaming!="function"||xe(u)||ce(u)||H||typeof fetch!="function"?Oe(u,t,o):fetch(u,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,t).then(o,function(O){return L(`wasm streaming compile failed: ${O}`),L("falling back to ArrayBuffer instantiation"),Oe(u,t,o)}))}var ve,Ae={798088:(t,o,u,m)=>{if(typeof a>"u"||!a.ya)return 1;if(t=ue(t>>>0),t.startsWith("./")&&(t=t.substring(2)),t=a.ya.get(t),!t)return 2;if(o>>>=0,u>>>=0,o+u>t.byteLength)return 3;try{return Z.set(t.subarray(o,o+u),m>>>0>>>0),0}catch{return 4}}};class _e{constructor(o){this.wa=o-24}}var ge=0,Be=0,te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,re=(t,o,u)=>{o>>>=0;var m=o+u;for(u=o;t[u]&&!(u>=m);)++u;if(16<u-o&&t.buffer&&te)return te.decode(t.subarray(o,u));for(m="";o<u;){var O=t[o++];if(O&128){var E=t[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|E);else{var U=t[o++]&63;O=(O&240)==224?(O&15)<<12|E<<6|U:(O&7)<<18|E<<12|U<<6|t[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},ue=(t,o)=>(t>>>=0)?re(Z,t,o):"",Ee=t=>{for(var o=0,u=0;u<t.length;++u){var m=t.charCodeAt(u);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++u):o+=3}return o},Se=(t,o,u,m)=>{if(u>>>=0,!(0<m))return 0;var O=u;m=u+m-1;for(var E=0;E<t.length;++E){var U=t.charCodeAt(E);if(55296<=U&&57343>=U){var ee=t.charCodeAt(++E);U=65536+((U&1023)<<10)|ee&1023}if(127>=U){if(u>=m)break;o[u++>>>0]=U}else{if(2047>=U){if(u+1>=m)break;o[u++>>>0]=192|U>>6}else{if(65535>=U){if(u+2>=m)break;o[u++>>>0]=224|U>>12}else{if(u+3>=m)break;o[u++>>>0]=240|U>>18,o[u++>>>0]=128|U>>12&63}o[u++>>>0]=128|U>>6&63}o[u++>>>0]=128|U&63}}return o[u>>>0]=0,u-O},Le=t=>t%4===0&&(t%100!==0||t%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],rt=[0,31,59,90,120,151,181,212,243,273,304,334],Te=[],Ge={},ke=()=>{if(!We){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},o;for(o in Ge)Ge[o]===void 0?delete t[o]:t[o]=Ge[o];var u=[];for(o in t)u.push(`${o}=${t[o]}`);We=u}return We},We,nt=[null,[],[]],De=[31,29,31,30,31,30,31,31,30,31,30,31],at=[31,28,31,30,31,30,31,31,30,31,30,31];function G(t){var o=Array(Ee(t)+1);return Se(t,o,0,o.length),o}function qe(t,o,u,m){function O(d,k,$){for(d=typeof d=="number"?d.toString():d||"";d.length<k;)d=$[0]+d;return d}function E(d,k){return O(d,k,"0")}function U(d,k){function $(Ze){return 0>Ze?-1:0<Ze?1:0}var Me;return(Me=$(d.getFullYear()-k.getFullYear()))===0&&(Me=$(d.getMonth()-k.getMonth()))===0&&(Me=$(d.getDate()-k.getDate())),Me}function ee(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function ye(d){var k=d.sa;for(d=new Date(new Date(d.ta+1900,0,1).getTime());0<k;){var $=d.getMonth(),Me=(Le(d.getFullYear())?De:at)[$];if(k>Me-d.getDate())k-=Me-d.getDate()+1,d.setDate(1),11>$?d.setMonth($+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else{d.setDate(d.getDate()+k);break}}return $=new Date(d.getFullYear()+1,0,4),k=ee(new Date(d.getFullYear(),0,4)),$=ee($),0>=U(k,d)?0>=U($,d)?d.getFullYear()+1:d.getFullYear():d.getFullYear()-1}t>>>=0,o>>>=0,u>>>=0,m>>>=0;var oe=J[m+40>>>2>>>0];m={Ba:_[m>>>2>>>0],Aa:_[m+4>>>2>>>0],ua:_[m+8>>>2>>>0],xa:_[m+12>>>2>>>0],va:_[m+16>>>2>>>0],ta:_[m+20>>>2>>>0],na:_[m+24>>>2>>>0],sa:_[m+28>>>2>>>0],Da:_[m+32>>>2>>>0],za:_[m+36>>>2>>>0],Ca:oe?ue(oe):""},u=ue(u),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)u=u.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Re="January February March April May June July August September October November December".split(" ");oe={"%a":d=>Qe[d.na].substring(0,3),"%A":d=>Qe[d.na],"%b":d=>Re[d.va].substring(0,3),"%B":d=>Re[d.va],"%C":d=>E((d.ta+1900)/100|0,2),"%d":d=>E(d.xa,2),"%e":d=>O(d.xa,2," "),"%g":d=>ye(d).toString().substring(2),"%G":ye,"%H":d=>E(d.ua,2),"%I":d=>(d=d.ua,d==0?d=12:12<d&&(d-=12),E(d,2)),"%j":d=>{for(var k=0,$=0;$<=d.va-1;k+=(Le(d.ta+1900)?De:at)[$++]);return E(d.xa+k,3)},"%m":d=>E(d.va+1,2),"%M":d=>E(d.Aa,2),"%n":()=>`\n`,"%p":d=>0<=d.ua&&12>d.ua?"AM":"PM","%S":d=>E(d.Ba,2),"%t":()=>"	","%u":d=>d.na||7,"%U":d=>E(Math.floor((d.sa+7-d.na)/7),2),"%V":d=>{var k=Math.floor((d.sa+7-(d.na+6)%7)/7);if(2>=(d.na+371-d.sa-2)%7&&k++,k)k==53&&($=(d.na+371-d.sa)%7,$==4||$==3&&Le(d.ta)||(k=1));else{k=52;var $=(d.na+7-d.sa-1)%7;($==4||$==5&&Le(d.ta%400-1))&&k++}return E(k,2)},"%w":d=>d.na,"%W":d=>E(Math.floor((d.sa+7-(d.na+6)%7)/7),2),"%y":d=>(d.ta+1900).toString().substring(2),"%Y":d=>d.ta+1900,"%z":d=>{d=d.za;var k=0<=d;return d=Math.abs(d)/60,(k?"+":"-")+("0000"+(d/60*100+d%60)).slice(-4)},"%Z":d=>d.Ca,"%%":()=>"%"},u=u.replace(/%%/g,"\\0\\0");for(se in oe)u.includes(se)&&(u=u.replace(new RegExp(se,"g"),oe[se](m)));return u=u.replace(/\\0\\0/g,"%"),se=G(u),se.length>o?0:(pe.set(se,t>>>0),se.length-1)}var Ve={a:function(t,o,u){t>>>=0;var m=new _e(t);throw J[m.wa+16>>>2>>>0]=0,J[m.wa+4>>>2>>>0]=o>>>0,J[m.wa+8>>>2>>>0]=u>>>0,ge=t,Be++,ge},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(t,o,u){return o>>>=0,Z.copyWithin(t>>>0>>>0,o>>>0,o+(u>>>0)>>>0)},n:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getUTCSeconds(),_[u+4>>>2>>>0]=t.getUTCMinutes(),_[u+8>>>2>>>0]=t.getUTCHours(),_[u+12>>>2>>>0]=t.getUTCDate(),_[u+16>>>2>>>0]=t.getUTCMonth(),_[u+20>>>2>>>0]=t.getUTCFullYear()-1900,_[u+24>>>2>>>0]=t.getUTCDay(),_[u+28>>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getSeconds(),_[u+4>>>2>>>0]=t.getMinutes(),_[u+8>>>2>>>0]=t.getHours(),_[u+12>>>2>>>0]=t.getDate(),_[u+16>>>2>>>0]=t.getMonth(),_[u+20>>>2>>>0]=t.getFullYear()-1900,_[u+24>>>2>>>0]=t.getDay(),_[u+28>>>2>>>0]=(Le(t.getFullYear())?ze:rt)[t.getMonth()]+t.getDate()-1|0,_[u+36>>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var m=new Date(t.getFullYear(),0,1).getTimezoneOffset();_[u+32>>>2>>>0]=(o!=m&&t.getTimezoneOffset()==Math.min(m,o))|0},p:function(t){t>>>=0;var o=new Date(_[t+20>>>2>>>0]+1900,_[t+16>>>2>>>0],_[t+12>>>2>>>0],_[t+8>>>2>>>0],_[t+4>>>2>>>0],_[t>>>2>>>0],0),u=_[t+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),E=new Date(o.getFullYear(),0,1).getTimezoneOffset(),U=Math.min(E,O);return 0>u?_[t+32>>>2>>>0]=+(O!=E&&U==m):0<u!=(U==m)&&(O=Math.max(E,O),o.setTime(o.getTime()+6e4*((0<u?U:O)-m))),_[t+24>>>2>>>0]=o.getDay(),_[t+28>>>2>>>0]=(Le(o.getFullYear())?ze:rt)[o.getMonth()]+o.getDate()-1|0,_[t>>>2>>>0]=o.getSeconds(),_[t+4>>>2>>>0]=o.getMinutes(),_[t+8>>>2>>>0]=o.getHours(),_[t+12>>>2>>>0]=o.getDate(),_[t+16>>>2>>>0]=o.getMonth(),_[t+20>>>2>>>0]=o.getYear(),t=o.getTime(),t=isNaN(t)?-1:t/1e3,Je((ve=t,1<=+Math.abs(ve)?0<ve?+Math.floor(ve/4294967296)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)),t>>>0},l:function(){return-52},m:function(){},t:function(t,o,u,m){u>>>=0,m>>>=0;var O=new Date().getFullYear(),E=new Date(O,0,1),U=new Date(O,6,1);O=E.getTimezoneOffset();var ee=U.getTimezoneOffset();J[t>>>0>>>2>>>0]=60*Math.max(O,ee),_[o>>>0>>>2>>>0]=+(O!=ee),t=ye=>ye.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],E=t(E),U=t(U),ee<O?(Se(E,Z,u,17),Se(U,Z,m,17)):(Se(E,Z,m,17),Se(U,Z,u,17))},d:()=>{ie("")},B:function(t,o,u){t>>>=0,o>>>=0,u>>>=0,Te.length=0;for(var m;m=Z[o++>>>0];){var O=m!=105;O&=m!=112,u+=O&&u%8?4:0,Te.push(m==112?J[u>>>2>>>0]:m==105?_[u>>>2>>>0]:Pe[u>>>3>>>0]),u+=O?8:4}return Ae[t](...Te)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(t){t>>>=0;var o=Z.length;if(4294901760<t)return!1;for(var u=1;4>=u;u*=2){var m=o*(1+.2/u);m=Math.min(m,t+100663296);var O=Math;m=Math.max(t,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-W.buffer.byteLength+65535)/65536;try{W.grow(O),le();var E=1;break e}catch{}E=void 0}if(E)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var u=0;return ke().forEach((m,O)=>{var E=o+u;for(O=J[t+4*O>>>2>>>0]=E,E=0;E<m.length;++E)pe[O++>>>0]=m.charCodeAt(E);pe[O>>>0]=0,u+=m.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var u=ke();J[t>>>2>>>0]=u.length;var m=0;return u.forEach(O=>m+=O.length+1),J[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(t,o,u,m){o>>>=0,u>>>=0,m>>>=0;for(var O=0,E=0;E<u;E++){var U=J[o>>>2>>>0],ee=J[o+4>>>2>>>0];o+=8;for(var ye=0;ye<ee;ye++){var oe=Z[U+ye>>>0],se=nt[t];oe===0||oe===10?((t===1?T:L)(re(se,0)),se.length=0):se.push(oe)}O+=ee}return J[m>>>2>>>0]=O,0},r:qe,c:function(t,o,u,m){return qe(t>>>0,o>>>0,u>>>0,m>>>0)}},P=function(){function t(u){return P=u.exports,P=st(),W=P.K,le(),ne.unshift(P.L),we--,we==0&&(me!==null&&(clearInterval(me),me=null),F&&(u=F,F=null,u())),P}var o={a:Ve};if(we++,a.instantiateWasm)try{return a.instantiateWasm(o,t)}catch(u){L(`Module.instantiateWasm callback failed with error: ${u}`),f(u)}return Ue(o,function(u){t(u.instance)}).catch(f),{}}();a._OrtInit=(t,o)=>(a._OrtInit=P.M)(t,o),a._OrtGetLastError=(t,o)=>(a._OrtGetLastError=P.N)(t,o),a._OrtCreateSessionOptions=(t,o,u,m,O,E,U,ee,ye,oe)=>(a._OrtCreateSessionOptions=P.O)(t,o,u,m,O,E,U,ee,ye,oe),a._OrtAppendExecutionProvider=(t,o)=>(a._OrtAppendExecutionProvider=P.P)(t,o),a._OrtAddFreeDimensionOverride=(t,o,u)=>(a._OrtAddFreeDimensionOverride=P.Q)(t,o,u),a._OrtAddSessionConfigEntry=(t,o,u)=>(a._OrtAddSessionConfigEntry=P.R)(t,o,u),a._OrtReleaseSessionOptions=t=>(a._OrtReleaseSessionOptions=P.S)(t),a._OrtCreateSession=(t,o,u)=>(a._OrtCreateSession=P.T)(t,o,u),a._OrtReleaseSession=t=>(a._OrtReleaseSession=P.U)(t),a._OrtGetInputOutputCount=(t,o,u)=>(a._OrtGetInputOutputCount=P.V)(t,o,u),a._OrtGetInputName=(t,o)=>(a._OrtGetInputName=P.W)(t,o),a._OrtGetOutputName=(t,o)=>(a._OrtGetOutputName=P.X)(t,o),a._OrtFree=t=>(a._OrtFree=P.Y)(t),a._OrtCreateTensor=(t,o,u,m,O,E)=>(a._OrtCreateTensor=P.Z)(t,o,u,m,O,E),a._OrtGetTensorData=(t,o,u,m,O)=>(a._OrtGetTensorData=P._)(t,o,u,m,O),a._OrtReleaseTensor=t=>(a._OrtReleaseTensor=P.$)(t),a._OrtCreateRunOptions=(t,o,u,m)=>(a._OrtCreateRunOptions=P.aa)(t,o,u,m),a._OrtAddRunConfigEntry=(t,o,u)=>(a._OrtAddRunConfigEntry=P.ba)(t,o,u),a._OrtReleaseRunOptions=t=>(a._OrtReleaseRunOptions=P.ca)(t),a._OrtCreateBinding=t=>(a._OrtCreateBinding=P.da)(t),a._OrtBindInput=(t,o,u)=>(a._OrtBindInput=P.ea)(t,o,u),a._OrtBindOutput=(t,o,u,m)=>(a._OrtBindOutput=P.fa)(t,o,u,m),a._OrtClearBoundOutputs=t=>(a._OrtClearBoundOutputs=P.ga)(t),a._OrtReleaseBinding=t=>(a._OrtReleaseBinding=P.ha)(t),a._OrtRunWithBinding=(t,o,u,m,O)=>(a._OrtRunWithBinding=P.ia)(t,o,u,m,O),a._OrtRun=(t,o,u,m,O,E,U,ee)=>(a._OrtRun=P.ja)(t,o,u,m,O,E,U,ee),a._OrtEndProfiling=t=>(a._OrtEndProfiling=P.ka)(t),a._malloc=t=>(a._malloc=P.la)(t),a._free=t=>(a._free=P.ma)(t);var Je=t=>(Je=P.oa)(t),ot=t=>(ot=P.pa)(t),M=t=>(M=P.qa)(t),Ne=()=>(Ne=P.ra)();function st(){var t=P;t=Object.assign({},t);var o=u=>m=>u(m)>>>0;return t.la=o(t.la),t.qa=o(t.qa),t.ra=(u=>()=>u()>>>0)(t.ra),t}a.stackSave=()=>Ne(),a.stackRestore=t=>ot(t),a.stackAlloc=t=>M(t),a.UTF8ToString=ue,a.stringToUTF8=(t,o,u)=>Se(t,Z,o,u),a.lengthBytesUTF8=Ee;var Fe;F=function t(){Fe||Xe(),Fe||(F=t)};function Xe(){if(!(0<we)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var t=a.preRun.shift();Ie.unshift(t)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<we||Fe||(Fe=!0,a.calledRun=!0,de))){for(;0<ne.length;)ne.shift()(a);for(h(a);0<X.length;)X.shift()(a)}}}return Xe(),w}})();typeof dr=="object"&&typeof Ct=="object"?Ct.exports=cr:typeof define=="function"&&define.amd&&define([],()=>cr)});var mr=Ke(()=>{});var gr=Ke(()=>{});var hr={};Et(hr,{cpus:()=>en});var en,br=_t(()=>{en=void 0});var Or=Ke((wr,Dt)=>{"use strict";var yr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){function a(){return X.buffer!=ie.buffer&&K(),ie}function h(){return X.buffer!=ie.buffer&&K(),xe}function f(){return X.buffer!=ie.buffer&&K(),ce}function w(){return X.buffer!=ie.buffer&&K(),be}function g(){return X.buffer!=ie.buffer&&K(),ae}var s=c,S,x,H=new Promise((e,r)=>{S=e,x=r}),A=Object.assign({},s),I="./this.program",V=(e,r)=>{throw r},R=typeof window=="object",B=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",T=s.ENVIRONMENT_IS_PTHREAD||!1,L="";function W(e){return s.locateFile?s.locateFile(e,L):L+e}var de,pe,Z;if(D){var _=(At(),et(St)),J=(Mt(),et(Tt));L=B?J.dirname(L)+"/":__dirname+"/",de=(e,r)=>(e=ue(e)?new URL(e):J.normalize(e),_.readFileSync(e,r?void 0:"utf8")),Z=e=>(e=de(e,!0),e.buffer||(e=new Uint8Array(e)),e),pe=(e,r,n,l=!0)=>{e=ue(e)?new URL(e):J.normalize(e),_.readFile(e,l?void 0:"utf8",(y,b)=>{y?n(y):r(l?b.buffer:b)})},!s.thisProgram&&1<process.argv.length&&(I=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),V=(e,r)=>{throw process.exitCode=e,r},global.Worker=mr().Worker}else(R||B)&&(B?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),typeof i<"u"&&i&&(L=i),L.startsWith("blob:")?L="":L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),D||(de=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},B&&(Z=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),pe=(e,r,n)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?r(l.response):n()},l.onerror=n,l.send(null)}));D&&typeof performance>"u"&&(global.performance=gr().performance);var Pe=console.log.bind(console),le=console.error.bind(console);D&&(Pe=(...e)=>_.writeSync(1,e.join(" ")+`\n`),le=(...e)=>_.writeSync(2,e.join(" ")+`\n`));var Ie=Pe,ne=le;Object.assign(s,A),A=null;var X,we,me=!1,F,ie,xe,ce,be,ae;function K(){var e=X.buffer;s.HEAP8=ie=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=xe=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=ce=new Int32Array(e),s.HEAPU32=be=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=ae=new Float64Array(e)}var je=16777216;if(T)X=s.wasmMemory;else if(s.wasmMemory)X=s.wasmMemory;else if(X=new WebAssembly.Memory({initial:je/65536,maximum:65536,shared:!0}),!(X.buffer instanceof SharedArrayBuffer))throw ne("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),D&&ne("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");K(),je=X.buffer.byteLength;var Oe=[],Ue=[],ve=[],Ae=0,_e=null,ge=null;function Be(){if(Ae--,Ae==0&&(_e!==null&&(clearInterval(_e),_e=null),ge)){var e=ge;ge=null,e()}}function te(e){throw e="Aborted("+e+")",ne(e),me=!0,F=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),x(e),e}var re=e=>e.startsWith("data:application/octet-stream;base64,"),ue=e=>e.startsWith("file://"),Ee;Ee="ort-wasm-threaded.wasm",re(Ee)||(Ee=W(Ee));function Se(e){if(Z)return Z(e);throw"both async and sync fetching of the wasm failed"}function Le(e){if(R||B){if(typeof fetch=="function"&&!ue(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw`failed to load wasm binary file at \'${e}\'`;return r.arrayBuffer()}).catch(()=>Se(e));if(pe)return new Promise((r,n)=>{pe(e,l=>r(new Uint8Array(l)),n)})}return Promise.resolve().then(()=>Se(e))}function ze(e,r,n){return Le(e).then(l=>WebAssembly.instantiate(l,r)).then(n,l=>{ne(`failed to asynchronously prepare wasm: ${l}`),te(l)})}function rt(e,r){var n=Ee;return typeof WebAssembly.instantiateStreaming!="function"||re(n)||ue(n)||D||typeof fetch!="function"?ze(n,e,r):fetch(n,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(r,function(y){return ne(`wasm streaming compile failed: ${y}`),ne("falling back to ArrayBuffer instantiation"),ze(n,e,r)}))}var Te,Ge={799444:(e,r,n,l)=>{if(typeof s>"u"||!s.bb)return 1;if(e=ee(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.bb.get(e),!e)return 2;if(r>>>=0,n>>>=0,l>>>=0,r+n>e.byteLength)return 3;try{return h().set(e.subarray(r,r+n),l>>>0),0}catch{return 4}}};function ke(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var We=e=>{e.terminate(),e.onmessage=()=>{}},nt=e=>{M.Oa.length==0&&(Je(),M.Xa(M.Oa[0]));var r=M.Oa.pop();if(!r)return 6;M.Pa.push(r),M.La[e.Na]=r,r.Na=e.Na;var n={cmd:"run",start_routine:e.gb,arg:e.cb,pthread_ptr:e.Na};return D&&r.unref(),r.postMessage(n,e.mb),0},De=0,at=e=>{var r=Ot();return e=e(),ft(r),e},G=(e,r,...n)=>at(()=>{for(var l=n.length,y=wt(8*l),b=y>>>3,v=0;v<n.length;v++){var z=n[v];g()[b+v>>>0]=z}return rr(e,0,l,y,r)});function qe(e){if(T)return G(0,1,e);F=e,0<De||(M.hb(),s.onExit?.(e),me=!0),V(e,new ke(e))}var Ve=e=>{if(F=e,T)throw st(e),"unwind";qe(e)};function P(){for(var e=s.numThreads;e--;)Je();Oe.unshift(()=>{Ae++,ot(()=>Be())})}function Je(){var e=W("ort-wasm-threaded.worker.js");e=new Worker(e),M.Oa.push(e)}function ot(e){T?e():Promise.all(M.Oa.map(M.Xa)).then(e)}var M={Oa:[],Pa:[],ab:[],La:{},Va(){T?(M.receiveObjectTransfer=M.fb,M.threadInitTLS=M.$a,M.setExitStatus=M.Za):P()},Za:e=>F=e,pb:["$terminateWorker"],hb:()=>{for(var e of M.Pa)We(e);for(e of M.Oa)We(e);M.Oa=[],M.Pa=[],M.La=[]},Ya:e=>{var r=e.Na;delete M.La[r],M.Oa.push(e),M.Pa.splice(M.Pa.indexOf(e),1),e.Na=0,bt(r)},fb(){},$a(){M.ab.forEach(e=>e())},Xa:e=>new Promise(r=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=ut()){var z=M.La[b.targetThread];z?z.postMessage(b,b.transferList):ne(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?it():v==="spawnThread"?nt(b):v==="cleanupThread"?M.Ya(M.La[b.thread]):v==="killThread"?(b=b.thread,v=M.La[b],delete M.La[b],We(v),bt(b),M.Pa.splice(M.Pa.indexOf(v),1),v.Na=0):v==="cancelThread"?M.La[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,D&&!e.Na&&e.unref(),r(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?s[b.handler](...b.args):v&&ne(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ne(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},D&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],l=["onExit"],y;for(y of l)s.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:s.mainScriptUrlOrBlob||i,wasmMemory:X,wasmModule:we})})};s.PThread=M;var Ne=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=ut(),r=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],or(r,r-e),ft(r)};function st(e){if(T)return G(1,0,e);Ve(e)}var Fe=[],Xe;s.invokeEntryPoint=(e,r)=>{De=0;var n=Fe[e];n||(e>=Fe.length&&(Fe.length=e+1),Fe[e]=n=Xe.get(e)),e=n(r),0<De?M.Za(e):yt(e)};class t{constructor(r){this.Ua=r-24}Va(r,n){w()[this.Ua+16>>>2>>>0]=0,w()[this.Ua+4>>>2>>>0]=r,w()[this.Ua+8>>>2>>>0]=n}}var o=0,u=0;function m(e,r,n,l){return T?G(2,1,e,r,n,l):O(e,r,n,l)}function O(e,r,n,l){if(e>>>=0,r>>>=0,n>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return ne("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return T&&y.length===0?m(e,r,n,l):(e={gb:n,Na:e,cb:l,mb:y},T?(e.ob="spawnThread",postMessage(e,y),0):nt(e))}var E=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,U=(e,r,n)=>{r>>>=0;var l=r+n;for(n=r;e[n]&&!(n>=l);)++n;if(16<n-r&&e.buffer&&E)return E.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,n):e.subarray(r,n));for(l="";r<n;){var y=e[r++];if(y&128){var b=e[r++]&63;if((y&224)==192)l+=String.fromCharCode((y&31)<<6|b);else{var v=e[r++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[r++]&63,65536>y?l+=String.fromCharCode(y):(y-=65536,l+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else l+=String.fromCharCode(y)}return l},ee=(e,r)=>(e>>>=0)?U(h(),e,r):"";function ye(e,r,n){return T?G(3,1,e,r,n):0}function oe(e,r){if(T)return G(4,1,e,r)}var se=e=>{for(var r=0,n=0;n<e.length;++n){var l=e.charCodeAt(n);127>=l?r++:2047>=l?r+=2:55296<=l&&57343>=l?(r+=4,++n):r+=3}return r},Qe=(e,r,n,l)=>{if(n>>>=0,!(0<l))return 0;var y=n;l=n+l-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=l)break;r[n++>>>0]=v}else{if(2047>=v){if(n+1>=l)break;r[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=l)break;r[n++>>>0]=224|v>>12}else{if(n+3>=l)break;r[n++>>>0]=240|v>>18,r[n++>>>0]=128|v>>12&63}r[n++>>>0]=128|v>>6&63}r[n++>>>0]=128|v&63}}return r[n>>>0]=0,n-y},Re=(e,r,n)=>Qe(e,h(),r,n);function d(e,r){if(T)return G(5,1,e,r)}function k(e,r,n){if(T)return G(6,1,e,r,n)}function $(e,r,n){return T?G(7,1,e,r,n):0}function Me(e,r){if(T)return G(8,1,e,r)}function Ze(e,r,n){if(T)return G(9,1,e,r,n)}function Rt(e,r,n,l){if(T)return G(10,1,e,r,n,l)}function It(e,r,n,l){if(T)return G(11,1,e,r,n,l)}function Bt(e,r,n,l){if(T)return G(12,1,e,r,n,l)}function kt(e){if(T)return G(13,1,e)}function Wt(e,r){if(T)return G(14,1,e,r)}function Nt(e,r,n){if(T)return G(15,1,e,r,n)}function dt(e){e>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(f(),e>>>2,e).value.then(it),e+=128,Atomics.store(f(),e>>>2,1))}s.__emscripten_thread_mailbox_await=dt;var it=()=>{var e=ut();if(e&&(dt(e),e=nr,!me))try{if(e(),!(0<De))try{T?yt(F):Ve(F)}catch(r){r instanceof ke||r=="unwind"||V(1,r)}}catch(r){r instanceof ke||r=="unwind"||V(1,r)}};s.checkMailbox=it;var pt=[],$e=e=>e%4===0&&(e%100!==0||e%400===0),Ht=[0,31,60,91,121,152,182,213,244,274,305,335],Gt=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,r,n,l,y,b,v,z){return T?G(16,1,e,r,n,l,y,b,v,z):-52}function Yt(e,r,n,l,y,b,v){if(T)return G(17,1,e,r,n,l,y,b,v)}var mt=[],gt={},jt=()=>{if(!ht){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:I||"./this.program"},r;for(r in gt)gt[r]===void 0?delete e[r]:e[r]=gt[r];var n=[];for(r in e)n.push(`${r}=${e[r]}`);ht=n}return ht},ht;function zt(e,r){if(T)return G(18,1,e,r);e>>>=0,r>>>=0;var n=0;return jt().forEach((l,y)=>{var b=r+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<l.length;++b)a()[y++>>>0]=l.charCodeAt(b);a()[y>>>0]=0,n+=l.length+1}),0}function qt(e,r){if(T)return G(19,1,e,r);e>>>=0,r>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var l=0;return n.forEach(y=>l+=y.length+1),w()[r>>>2>>>0]=l,0}function Vt(e){return T?G(20,1,e):52}function Jt(e,r,n,l){return T?G(21,1,e,r,n,l):52}function Xt(e,r,n,l,y){return T?G(22,1,e,r,n,l,y):70}var Hr=[null,[],[]];function Qt(e,r,n,l){if(T)return G(23,1,e,r,n,l);r>>>=0,n>>>=0,l>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[r>>>2>>>0],z=w()[r+4>>>2>>>0];r+=8;for(var Ce=0;Ce<z;Ce++){var fe=h()[v+Ce>>>0],he=Hr[e];fe===0||fe===10?((e===1?Ie:ne)(U(he,0)),he.length=0):he.push(fe)}y+=z}return w()[l>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Gr(e){var r=Array(se(e)+1);return Qe(e,r,0,r.length),r}var $r=(e,r)=>{a().set(e,r>>>0)};function er(e,r,n,l){function y(p,N,q){for(p=typeof p=="number"?p.toString():p||"";p.length<N;)p=q[0]+p;return p}function b(p,N){return y(p,N,"0")}function v(p,N){function q(fr){return 0>fr?-1:0<fr?1:0}var He;return(He=q(p.getFullYear()-N.getFullYear()))===0&&(He=q(p.getMonth()-N.getMonth()))===0&&(He=q(p.getDate()-N.getDate())),He}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Ce(p){var N=p.Qa;for(p=new Date(new Date(p.Ra+1900,0,1).getTime());0<N;){var q=p.getMonth(),He=($e(p.getFullYear())?Zt:Kt)[q];if(N>He-p.getDate())N-=He-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+N);break}}return q=new Date(p.getFullYear()+1,0,4),N=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(N,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,r>>>=0,n>>>=0,l>>>=0;var fe=w()[l+40>>>2>>>0];l={kb:f()[l>>>2>>>0],jb:f()[l+4>>>2>>>0],Sa:f()[l+8>>>2>>>0],Wa:f()[l+12>>>2>>>0],Ta:f()[l+16>>>2>>>0],Ra:f()[l+20>>>2>>>0],Ma:f()[l+24>>>2>>>0],Qa:f()[l+28>>>2>>>0],qb:f()[l+32>>>2>>>0],ib:f()[l+36>>>2>>>0],lb:fe?ee(fe):""},n=ee(n),fe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var he in fe)n=n.replace(new RegExp(he,"g"),fe[he]);var ir="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ur="January February March April May June July August September October November December".split(" ");fe={"%a":p=>ir[p.Ma].substring(0,3),"%A":p=>ir[p.Ma],"%b":p=>ur[p.Ta].substring(0,3),"%B":p=>ur[p.Ta],"%C":p=>b((p.Ra+1900)/100|0,2),"%d":p=>b(p.Wa,2),"%e":p=>y(p.Wa,2," "),"%g":p=>Ce(p).toString().substring(2),"%G":Ce,"%H":p=>b(p.Sa,2),"%I":p=>(p=p.Sa,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var N=0,q=0;q<=p.Ta-1;N+=($e(p.Ra+1900)?Zt:Kt)[q++]);return b(p.Wa+N,3)},"%m":p=>b(p.Ta+1,2),"%M":p=>b(p.jb,2),"%n":()=>`\n`,"%p":p=>0<=p.Sa&&12>p.Sa?"AM":"PM","%S":p=>b(p.kb,2),"%t":()=>"	","%u":p=>p.Ma||7,"%U":p=>b(Math.floor((p.Qa+7-p.Ma)/7),2),"%V":p=>{var N=Math.floor((p.Qa+7-(p.Ma+6)%7)/7);if(2>=(p.Ma+371-p.Qa-2)%7&&N++,N)N==53&&(q=(p.Ma+371-p.Qa)%7,q==4||q==3&&$e(p.Ra)||(N=1));else{N=52;var q=(p.Ma+7-p.Qa-1)%7;(q==4||q==5&&$e(p.Ra%400-1))&&N++}return b(N,2)},"%w":p=>p.Ma,"%W":p=>b(Math.floor((p.Qa+7-(p.Ma+6)%7)/7),2),"%y":p=>(p.Ra+1900).toString().substring(2),"%Y":p=>p.Ra+1900,"%z":p=>{p=p.ib;var N=0<=p;return p=Math.abs(p)/60,(N?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.lb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(he in fe)n.includes(he)&&(n=n.replace(new RegExp(he,"g"),fe[he](l)));return n=n.replace(/\\0\\0/g,"%"),he=Gr(n),he.length>r?0:($r(he,e),he.length-1)}M.Va();var Yr=[qe,st,m,ye,oe,d,k,$,Me,Ze,Rt,It,Bt,kt,Wt,Nt,$t,Yt,zt,qt,Vt,Jt,Xt,Qt],jr={b:function(e,r,n){throw e>>>=0,new t(e).Va(r>>>0,n>>>0),o=e,u++,o},L:function(e){tr(e>>>0,!B,1,!R,131072,!1),M.$a()},j:function(e){e>>>=0,T?postMessage({cmd:"cleanupThread",thread:e}):M.Ya(M.La[e])},H:O,h:ye,S:oe,D:d,F:k,T:$,Q:Me,J:Ze,P:Rt,n:It,E:Bt,B:kt,R:Wt,C:Nt,p:()=>1,z:function(e,r){e>>>=0,e==r>>>0?setTimeout(it):T?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.La[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,r,n,l,y){r>>>=0,n>>>=0,pt.length=l,y=y>>>0>>>3;for(var b=0;b<l;b++)pt[b]=g()[y+b>>>0];return e=r?Ge[r]:Yr[e],M.eb=n,n=e(...pt),M.eb=0,n},K:dt,o:function(e){D&&M.La[e>>>0].ref()},s:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getUTCSeconds(),f()[n+4>>>2>>>0]=e.getUTCMinutes(),f()[n+8>>>2>>>0]=e.getUTCHours(),f()[n+12>>>2>>>0]=e.getUTCDate(),f()[n+16>>>2>>>0]=e.getUTCMonth(),f()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,f()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[n+28>>>2>>>0]=e},t:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getSeconds(),f()[n+4>>>2>>>0]=e.getMinutes(),f()[n+8>>>2>>>0]=e.getHours(),f()[n+12>>>2>>>0]=e.getDate(),f()[n+16>>>2>>>0]=e.getMonth(),f()[n+20>>>2>>>0]=e.getFullYear()-1900,f()[n+24>>>2>>>0]=e.getDay(),r=($e(e.getFullYear())?Ht:Gt)[e.getMonth()]+e.getDate()-1|0,f()[n+28>>>2>>>0]=r,f()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=l&&e.getTimezoneOffset()==Math.min(l,r))|0,f()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var r=new Date(f()[e+20>>>2>>>0]+1900,f()[e+16>>>2>>>0],f()[e+12>>>2>>>0],f()[e+8>>>2>>>0],f()[e+4>>>2>>>0],f()[e>>>2>>>0],0),n=f()[e+32>>>2>>>0],l=r.getTimezoneOffset(),y=new Date(r.getFullYear(),6,1).getTimezoneOffset(),b=new Date(r.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?f()[e+32>>>2>>>0]=+(y!=b&&v==l):0<n!=(v==l)&&(y=Math.max(b,y),r.setTime(r.getTime()+6e4*((0<n?v:y)-l))),f()[e+24>>>2>>>0]=r.getDay(),n=($e(r.getFullYear())?Ht:Gt)[r.getMonth()]+r.getDate()-1|0,f()[e+28>>>2>>>0]=n,f()[e>>>2>>>0]=r.getSeconds(),f()[e+4>>>2>>>0]=r.getMinutes(),f()[e+8>>>2>>>0]=r.getHours(),f()[e+12>>>2>>>0]=r.getDate(),f()[e+16>>>2>>>0]=r.getMonth(),f()[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),e=isNaN(e)?-1:e/1e3,ar((Te=e,1<=+Math.abs(Te)?0<Te?+Math.floor(Te/4294967296)>>>0:~~+Math.ceil((Te-+(~~Te>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Yt,y:function(e,r,n,l){e>>>=0,r>>>=0,n>>>=0,l>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Ce=Math.max(y,z);w()[e>>>2>>>0]=60*Ce,f()[r>>>2>>>0]=+(y!=z),e=fe=>fe.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],b=e(b),v=e(v),z<y?(Re(b,n,17),Re(v,l,17)):(Re(b,l,17),Re(v,n,17))},c:()=>{te("")},O:function(e,r,n){e>>>=0,r>>>=0,n>>>=0,mt.length=0;for(var l;l=h()[r++>>>0];){var y=l!=105;y&=l!=112,n+=y&&n%8?4:0,mt.push(l==112?w()[n>>>2>>>0]:l==105?f()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ge[e](...mt)},k:()=>{},i:()=>Date.now(),U:()=>{throw De+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>D?(br(),et(hr)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var r=h().length;if(e<=r||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var l=r*(1+.2/n);l=Math.min(l,e+100663296);var y=Math;l=Math.max(e,l);e:{y=(y.min.call(y,4294901760,l+(65536-l%65536)%65536)-X.buffer.byteLength+65535)/65536;try{X.grow(y),K();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ve,g:Vt,m:Jt,v:Xt,l:Qt,a:X||s.wasmMemory,w:er,d:function(e,r,n,l){return er(e>>>0,r>>>0,n>>>0,l>>>0)}},C=function(){function e(n,l){return C=n.exports,C=zr(),M.ab.push(C.ya),Xe=C.za,Ue.unshift(C.V),we=l,Be(),C}var r={a:jr};if(Ae++,s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(n){ne(`Module.instantiateWasm callback failed with error: ${n}`),x(n)}return rt(r,function(n){e(n.instance,n.module)}).catch(x),{}}();s._OrtInit=(e,r)=>(s._OrtInit=C.W)(e,r),s._OrtGetLastError=(e,r)=>(s._OrtGetLastError=C.X)(e,r),s._OrtCreateSessionOptions=(e,r,n,l,y,b,v,z,Ce,fe)=>(s._OrtCreateSessionOptions=C.Y)(e,r,n,l,y,b,v,z,Ce,fe),s._OrtAppendExecutionProvider=(e,r)=>(s._OrtAppendExecutionProvider=C.Z)(e,r),s._OrtAddFreeDimensionOverride=(e,r,n)=>(s._OrtAddFreeDimensionOverride=C._)(e,r,n),s._OrtAddSessionConfigEntry=(e,r,n)=>(s._OrtAddSessionConfigEntry=C.$)(e,r,n),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=C.aa)(e),s._OrtCreateSession=(e,r,n)=>(s._OrtCreateSession=C.ba)(e,r,n),s._OrtReleaseSession=e=>(s._OrtReleaseSession=C.ca)(e),s._OrtGetInputOutputCount=(e,r,n)=>(s._OrtGetInputOutputCount=C.da)(e,r,n),s._OrtGetInputName=(e,r)=>(s._OrtGetInputName=C.ea)(e,r),s._OrtGetOutputName=(e,r)=>(s._OrtGetOutputName=C.fa)(e,r),s._OrtFree=e=>(s._OrtFree=C.ga)(e),s._OrtCreateTensor=(e,r,n,l,y,b)=>(s._OrtCreateTensor=C.ha)(e,r,n,l,y,b),s._OrtGetTensorData=(e,r,n,l,y)=>(s._OrtGetTensorData=C.ia)(e,r,n,l,y),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=C.ja)(e),s._OrtCreateRunOptions=(e,r,n,l)=>(s._OrtCreateRunOptions=C.ka)(e,r,n,l),s._OrtAddRunConfigEntry=(e,r,n)=>(s._OrtAddRunConfigEntry=C.la)(e,r,n),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=C.ma)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=C.na)(e),s._OrtBindInput=(e,r,n)=>(s._OrtBindInput=C.oa)(e,r,n),s._OrtBindOutput=(e,r,n,l)=>(s._OrtBindOutput=C.pa)(e,r,n,l),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=C.qa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=C.ra)(e),s._OrtRunWithBinding=(e,r,n,l,y)=>(s._OrtRunWithBinding=C.sa)(e,r,n,l,y),s._OrtRun=(e,r,n,l,y,b,v,z)=>(s._OrtRun=C.ta)(e,r,n,l,y,b,v,z),s._OrtEndProfiling=e=>(s._OrtEndProfiling=C.ua)(e);var ut=s._pthread_self=()=>(ut=s._pthread_self=C.va)();s._malloc=e=>(s._malloc=C.wa)(e),s._free=e=>(s._free=C.xa)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=C.ya)();var tr=s.__emscripten_thread_init=(e,r,n,l,y,b)=>(tr=s.__emscripten_thread_init=C.Aa)(e,r,n,l,y,b);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=C.Ba)();var rr=(e,r,n,l,y)=>(rr=C.Ca)(e,r,n,l,y),bt=e=>(bt=C.Da)(e),yt=s.__emscripten_thread_exit=e=>(yt=s.__emscripten_thread_exit=C.Ea)(e),nr=()=>(nr=C.Fa)(),ar=e=>(ar=C.Ga)(e),or=(e,r)=>(or=C.Ha)(e,r),ft=e=>(ft=C.Ia)(e),wt=e=>(wt=C.Ja)(e),Ot=()=>(Ot=C.Ka)();function zr(){var e=C;e=Object.assign({},e);var r=l=>()=>l()>>>0,n=l=>y=>l(y)>>>0;return e.va=r(e.va),e.wa=n(e.wa),e.emscripten_main_runtime_thread_id=r(e.emscripten_main_runtime_thread_id),e.Ja=n(e.Ja),e.Ka=r(e.Ka),e}s.wasmMemory=X,s.stackSave=()=>Ot(),s.stackRestore=e=>ft(e),s.stackAlloc=e=>wt(e),s.keepRuntimeAlive=()=>0<De,s.UTF8ToString=ee,s.stringToUTF8=Re,s.lengthBytesUTF8=se,s.ExitStatus=ke,s.PThread=M;var lt;ge=function e(){lt||sr(),lt||(ge=e)};function sr(){if(!(0<Ae))if(T)S(s),T||Ne(Ue),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Oe.unshift(s.preRun.shift());Ne(Oe),0<Ae||lt||(lt=!0,s.calledRun=!0,me||(T||Ne(Ue),S(s),T||Ne(ve)))}}return sr(),H}})();typeof wr=="object"&&typeof Dt=="object"?Dt.exports=yr:typeof define=="function"&&define.amd&&define([],()=>yr)});var vr=Ke((yn,tn)=>{tn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var Er;Er=pr();var rn=Or(),Ft,Pt=!1,ct=!1,_r=!1,nn=i=>{if(i===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+i+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+i+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},an=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},on=(i,c)=>i?c?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":c?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Sr=async i=>{if(Pt)return Promise.resolve();if(ct)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(_r)throw new Error("previous call to \'initializeWebAssembly()\' failed.");ct=!0;let c=i.initTimeout,a=i.numThreads,h=i.simd,f=nn(a),w=h&&an(),g=i.wasmPaths,s=typeof g=="string"?g:void 0,S=on(w,f),x=typeof g=="object"?g[S]:void 0,H=!1,A=[];if(c>0&&A.push(new Promise(I=>{setTimeout(()=>{H=!0,I()},c)})),A.push(new Promise((I,V)=>{let R=f?rn:Er,B={locateFile:(D,T)=>f&&D.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([vr()],{type:"text/javascript"})):D.endsWith(".wasm")?x||(s??T)+S:T+D};if(f)if(B.numThreads=a,typeof Blob>"u")B.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let D=`var ortWasmThreaded=${R.toString()};`;B.mainScriptUrlOrBlob=new Blob([D],{type:"text/javascript"})}R(B).then(D=>{ct=!1,Pt=!0,Ft=D,I()},D=>{ct=!1,_r=!0,V(D)})})),await Promise.race(A),H)throw new Error(`WebAssembly backend initializing failed due to timeout: ${c}ms`)},Q=()=>{if(Pt&&Ft)return Ft;throw new Error("WebAssembly is not initialized yet.")};var Y=(i,c)=>{let a=Q(),h=a.lengthBytesUTF8(i)+1,f=a._malloc(h);return a.stringToUTF8(i,f,h),c.push(f),f},tt=(i,c,a,h)=>{if(typeof i=="object"&&i!==null){if(a.has(i))throw new Error("Circular reference in options");a.add(i)}Object.entries(i).forEach(([f,w])=>{let g=c?c+f:f;if(typeof w=="object")tt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},j=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);c._OrtGetLastError(h,h+4);let f=c.HEAP32[h/4],w=c.HEAPU32[h/4+1],g=w?c.UTF8ToString(w):"";throw new Error(`${i} ERROR_CODE: ${f}, ERROR_MESSAGE: ${g}`)}finally{c.stackRestore(a)}};var Ar=i=>{let c=Q(),a=0,h=[],f=i||{};try{if(i?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof i.logSeverityLevel!="number"||!Number.isInteger(i.logSeverityLevel)||i.logSeverityLevel<0||i.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${i.logSeverityLevel}`);if(i?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof i.logVerbosityLevel!="number"||!Number.isInteger(i.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${i.logVerbosityLevel}`);i?.terminate===void 0&&(f.terminate=!1);let w=0;return i?.tag!==void 0&&(w=Y(i.tag,h)),a=c._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,w),a===0&&j("Can\'t create run options."),i?.extra!==void 0&&tt(i.extra,"",new WeakSet,(g,s)=>{let S=Y(g,h),x=Y(s,h);c._OrtAddRunConfigEntry(a,S,x)!==0&&j(`Can\'t set a run config entry: ${g} - ${s}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseRunOptions(a),h.forEach(g=>c._free(g)),w}};var sn=i=>{switch(i){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${i}`)}},un=i=>{switch(i){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${i}`)}},fn=i=>{i.extra||(i.extra={}),i.extra.session||(i.extra.session={});let c=i.extra.session;c.use_ort_model_bytes_directly||(c.use_ort_model_bytes_directly="1"),i.executionProviders&&i.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(i.enableMemPattern=!1)},ln=(i,c,a)=>{for(let h of c){let f=typeof h=="string"?h:h.name;switch(f){case"webnn":if(f="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let s=Y("deviceType",a),S=Y(g.deviceType,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let s=g.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let S=Y("numThreads",a),x=Y(s.toString(),a);Q()._OrtAddSessionConfigEntry(i,S,x)!==0&&j(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let s=Y("powerPreference",a),S=Y(g.powerPreference,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let s=Y("preferredLayout",a),S=Y(g.preferredLayout,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let w=Y(f,a);Q()._OrtAppendExecutionProvider(i,w)!==0&&j(`Can\'t append execution provider: ${f}.`)}},Tr=i=>{let c=Q(),a=0,h=[],f=i||{};fn(f);try{let w=sn(f.graphOptimizationLevel??"all"),g=un(f.executionMode??"sequential"),s=typeof f.logId=="string"?Y(f.logId,h):0,S=f.logSeverityLevel??2;if(!Number.isInteger(S)||S<0||S>4)throw new Error(`log serverity level is not valid: ${S}`);let x=f.logVerbosityLevel??0;if(!Number.isInteger(x)||x<0||x>4)throw new Error(`log verbosity level is not valid: ${x}`);let H=typeof f.optimizedModelFilePath=="string"?Y(f.optimizedModelFilePath,h):0;if(a=c._OrtCreateSessionOptions(w,!!f.enableCpuMemArena,!!f.enableMemPattern,g,!!f.enableProfiling,0,s,S,x,H),a===0&&j("Can\'t create session options."),f.executionProviders&&ln(a,f.executionProviders,h),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let A=Y("enableGraphCapture",h),I=Y(f.enableGraphCapture.toString(),h);c._OrtAddSessionConfigEntry(a,A,I)!==0&&j(`Can\'t set a session config entry: \'enableGraphCapture\' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[A,I]of Object.entries(f.freeDimensionOverrides)){if(typeof A!="string")throw new Error(`free dimension override name must be a string: ${A}`);if(typeof I!="number"||!Number.isInteger(I)||I<0)throw new Error(`free dimension override value must be a non-negative integer: ${I}`);let V=Y(A,h);c._OrtAddFreeDimensionOverride(a,V,I)!==0&&j(`Can\'t set a free dimension override: ${A} - ${I}.`)}return f.extra!==void 0&&tt(f.extra,"",new WeakSet,(A,I)=>{let V=Y(A,h),R=Y(I,h);c._OrtAddSessionConfigEntry(a,V,R)!==0&&j(`Can\'t set a session config entry: ${A} - ${I}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseSessionOptions(a),h.forEach(g=>c._free(g)),w}};var xt=i=>{switch(i){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${i}`)}},Mr=i=>{switch(i){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${i}`)}},Ut=i=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][i],Cr=i=>{switch(i){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${i}`)}},Dr=i=>{switch(i){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${i}`)}},Fr=i=>i==="float32"||i==="float16"||i==="int32"||i==="int64"||i==="uint32"||i==="uint8"||i==="bool",Pr=i=>{switch(i){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${i}`)}};var xr=async i=>{if(typeof i=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(i))}catch(c){if(c.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(i),h=[];for await(let f of a)h.push(f);return new Uint8Array(Buffer.concat(h))}throw c}else{let c=await fetch(i);if(!c.ok)throw new Error(`failed to load external data file: ${i}`);let a=c.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await c.arrayBuffer());{if(!c.body)throw new Error(`failed to load external data file: ${i}, no response body.`);let f=c.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(s){if(s instanceof RangeError){let S=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:S,maximum:S}).buffer}else throw s}let g=0;for(;;){let{done:s,value:S}=await f.read();if(s)break;let x=S.byteLength;new Uint8Array(w,g,x).set(S),g+=x}return new Uint8Array(w,0,h)}}else return i instanceof Blob?new Uint8Array(await i.arrayBuffer()):i instanceof Uint8Array?i:new Uint8Array(i)};var cn=(i,c)=>{Q()._OrtInit(i,c)!==0&&j("Can\'t initialize onnxruntime.")},Lr=async i=>{cn(i.wasm.numThreads,Dr(i.logLevel))},Rr=async(i,c)=>{},Ye=new Map,dn=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);return c._OrtGetInputOutputCount(i,h,h+4)!==0&&j("Can\'t get session input/output count."),[c.HEAP32[h/4],c.HEAP32[h/4+1]]}finally{c.stackRestore(a)}},Lt=i=>{let c=Q(),a=c._malloc(i.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${i.byteLength}.`);return c.HEAPU8.set(i,a),[a,i.byteLength]},Ir=async(i,c)=>{let a,h,f=Q();Array.isArray(i)?[a,h]=i:i.buffer===f.HEAPU8.buffer?[a,h]=[i.byteOffset,i.byteLength]:[a,h]=Lt(i);let w=0,g=0,s=0,S=[],x=[],H=[];try{if([g,S]=Tr(c),c?.externalData&&f.mountExternalData){let L=[];for(let W of c.externalData){let de=typeof W=="string"?W:W.path;L.push(xr(typeof W=="string"?W:W.data).then(pe=>{f.mountExternalData(de,pe)}))}await Promise.all(L)}w=await f._OrtCreateSession(a,h,g),w===0&&j("Can\'t create a session.");let[A,I]=dn(w),V=!!c?.enableGraphCapture,R=[],B=[],D=[];for(let L=0;L<A;L++){let W=f._OrtGetInputName(w,L);W===0&&j("Can\'t get an input name."),x.push(W),R.push(f.UTF8ToString(W))}for(let L=0;L<I;L++){let W=f._OrtGetOutputName(w,L);W===0&&j("Can\'t get an output name."),H.push(W);let de=f.UTF8ToString(W);B.push(de)}let T=null;return Ye.set(w,[w,x,H,T,V,!1]),[w,R,B]}catch(A){throw x.forEach(I=>f._OrtFree(I)),H.forEach(I=>f._OrtFree(I)),s!==0&&f._OrtReleaseBinding(s),w!==0&&f._OrtReleaseSession(w),A}finally{f._free(a),g!==0&&f._OrtReleaseSessionOptions(g),S.forEach(A=>f._free(A)),f.unmountExternalData?.()}},Br=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error(`cannot release session. invalid session id: ${i}`);let[h,f,w,g,s]=a;g&&(s&&c._OrtClearBoundOutputs(g.handle),c._OrtReleaseBinding(g.handle)),c.jsepOnReleaseSession?.(i),f.forEach(S=>c._OrtFree(S)),w.forEach(S=>c._OrtFree(S)),c._OrtReleaseSession(h),Ye.delete(i)},Ur=(i,c,a,h,f,w=!1)=>{if(!i){c.push(0);return}let g=Q(),s=i[0],S=i[1],x=i[3],H,A;if(s==="string"&&x==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(w&&x!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(x==="gpu-buffer"){let R=i[2].gpuBuffer,B=Ut(xt(s));A=S.reduce((T,L)=>T*L,1)*B;let D=g.jsepRegisterBuffer;if(!D)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');H=D(h,f,R,A)}else{let R=i[2];if(Array.isArray(R)){A=4*R.length,H=g._malloc(A),a.push(H);let B=H/4;for(let D=0;D<R.length;D++){if(typeof R[D]!="string")throw new TypeError(`tensor data at index ${D} is not a string`);g.HEAPU32[B++]=Y(R[D],a)}}else A=R.byteLength,H=g._malloc(A),a.push(H),g.HEAPU8.set(new Uint8Array(R.buffer,R.byteOffset,A),H)}let I=g.stackSave(),V=g.stackAlloc(4*S.length);try{let R=V/4;S.forEach(D=>g.HEAP32[R++]=D);let B=g._OrtCreateTensor(xt(s),H,A,V,S.length,Pr(x));B===0&&j(`Can\'t create tensor for input/output. session=${h}, index=${f}.`),c.push(B)}finally{g.stackRestore(I)}},kr=async(i,c,a,h,f,w)=>{let g=Q(),s=Ye.get(i);if(!s)throw new Error(`cannot run inference. invalid session id: ${i}`);let S=s[0],x=s[1],H=s[2],A=s[3],I=s[4],V=s[5],R=c.length,B=h.length,D=0,T=[],L=[],W=[],de=[],pe=g.stackSave(),Z=g.stackAlloc(R*4),_=g.stackAlloc(R*4),J=g.stackAlloc(B*4),Pe=g.stackAlloc(B*4);try{[D,T]=Ar(w);for(let F=0;F<R;F++)Ur(a[F],L,de,i,c[F],I);for(let F=0;F<B;F++)Ur(f[F],W,de,i,R+h[F],I);let le=Z/4,Ie=_/4,ne=J/4,X=Pe/4;for(let F=0;F<R;F++)g.HEAPU32[le++]=L[F],g.HEAPU32[Ie++]=x[c[F]];for(let F=0;F<B;F++)g.HEAPU32[ne++]=W[F],g.HEAPU32[X++]=H[h[F]];g.jsepOnRunStart?.(S);let we;we=await g._OrtRun(S,_,Z,R,Pe,B,J,D),we!==0&&j("failed to call OrtRun().");let me=[];for(let F=0;F<B;F++){let ie=g.HEAPU32[J/4+F];if(ie===W[F]){me.push(f[F]);continue}let xe=g.stackSave(),ce=g.stackAlloc(4*4),be=!1,ae,K=0;try{g._OrtGetTensorData(ie,ce,ce+4,ce+8,ce+12)!==0&&j(`Can\'t access output tensor data on index ${F}.`);let Oe=ce/4,Ue=g.HEAPU32[Oe++];K=g.HEAPU32[Oe++];let ve=g.HEAPU32[Oe++],Ae=g.HEAPU32[Oe++],_e=[];for(let te=0;te<Ae;te++)_e.push(g.HEAPU32[ve/4+te]);g._OrtFree(ve);let ge=_e.reduce((te,re)=>te*re,1);ae=Mr(Ue);let Be=A?.outputPreferredLocations[h[F]];if(ae==="string"){if(Be==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let te=[],re=K/4;for(let ue=0;ue<ge;ue++){let Ee=g.HEAPU32[re++],Se=ue===ge-1?void 0:g.HEAPU32[re]-Ee;te.push(g.UTF8ToString(Ee,Se))}me.push([ae,_e,te,"cpu"])}else if(Be==="gpu-buffer"&&ge>0){let te=g.jsepGetBuffer;if(!te)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let re=te(K),ue=Ut(Ue);if(ue===void 0||!Fr(ae))throw new Error(`Unsupported data type: ${ae}`);be=!0,me.push([ae,_e,{gpuBuffer:re,download:g.jsepCreateDownloader(re,ge*ue,ae),dispose:()=>{g._OrtReleaseTensor(ie)}},"gpu-buffer"])}else{let te=Cr(ae),re=new te(ge);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(g.HEAPU8.subarray(K,K+re.byteLength)),me.push([ae,_e,re,"cpu"])}}finally{g.stackRestore(xe),ae==="string"&&K&&g._free(K),be||g._OrtReleaseTensor(ie)}}return A&&!I&&(g._OrtClearBoundOutputs(A.handle),Ye.set(i,[S,x,H,A,I,!1])),me}finally{g.stackRestore(pe),L.forEach(le=>g._OrtReleaseTensor(le)),W.forEach(le=>g._OrtReleaseTensor(le)),de.forEach(le=>g._free(le)),D!==0&&g._OrtReleaseRunOptions(D),T.forEach(le=>g._free(le))}},Wr=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error("invalid session id");let h=a[0],f=c._OrtEndProfiling(h);f===0&&j("Can\'t get an profile file name."),c._OrtFree(f)},Nr=i=>{let c=[];for(let a of i){let h=a[2];!Array.isArray(h)&&"buffer"in h&&c.push(h.buffer)}return c};self.onmessage=i=>{let{type:c,in:a}=i.data;try{switch(c){case"init-wasm":Sr(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:c})},h=>{postMessage({type:c,err:h})})},h=>{postMessage({type:c,err:h})});break;case"init-ep":{let{epName:h,env:f}=a;Rr(f,h).then(()=>{postMessage({type:c})},w=>{postMessage({type:c,err:w})});break}case"copy-from":{let{buffer:h}=a,f=Lt(h);postMessage({type:c,out:f});break}case"create":{let{model:h,options:f}=a;Ir(h,f).then(w=>{postMessage({type:c,out:w})},w=>{postMessage({type:c,err:w})});break}case"release":Br(a),postMessage({type:c});break;case"run":{let{sessionId:h,inputIndices:f,inputs:w,outputIndices:g,options:s}=a;kr(h,f,w,g,new Array(g.length).fill(null),s).then(S=>{S.some(x=>x[3]!=="cpu")?postMessage({type:c,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:c,out:S},Nr([...w,...S]))},S=>{postMessage({type:c,err:S})});break}case"end-profiling":Wr(a),postMessage({type:c});break;default:}}catch(h){postMessage({type:c,err:h})}};})();\n'}),_r,gt$1,yn,Do,Lo,ca$1,pa$1,Vr,Wr,Tg,Eo,od$1,id$2,ad$1,sd$1,ud$1,ld$1,fd$1,da$1=L(()=>{var e;Ot$1(),rd$1(),Ur(),_r=()=>!!Z.wasm.proxy&&typeof document<"u",yn=!1,Do=!1,Lo=!1,pa$1=new Map,Vr=(i,a)=>{let o=pa$1.get(i);o?o.push(a):pa$1.set(i,[a])},Wr=()=>{if(yn||!Do||Lo||!gt$1)throw new Error("worker not ready")},Tg=i=>{switch(i.data.type){case"init-wasm":yn=!1,i.data.err?(Lo=!0,ca$1[1](i.data.err)):(Do=!0,ca$1[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let a=pa$1.get(i.data.type);i.data.err?a.shift()[1](i.data.err):a.shift()[0](i.data.out);break}}},Eo=typeof document<"u"?(e=document==null?void 0:document.currentScript)==null?void 0:e.src:void 0,od$1=async()=>{if(!Do){if(yn)throw new Error("multiple calls to 'initWasm()' detected.");if(Lo)throw new Error("previous call to 'initWasm()' failed.");if(yn=!0,_r())return Z.wasm.wasmPaths===void 0&&Eo&&Eo.indexOf("blob:")!==0&&(Z.wasm.wasmPaths=Eo.substr(0,+Eo.lastIndexOf("/")+1)),new Promise((i,a)=>{gt$1==null||gt$1.terminate();let o=URL.createObjectURL(new Blob([nd$1()],{type:"text/javascript"}));gt$1=new Worker(o,{name:"ort-wasm-proxy-worker"}),gt$1.onerror=s=>a(s),gt$1.onmessage=Tg,URL.revokeObjectURL(o),ca$1=[i,a];let c={type:"init-wasm",in:Z};gt$1.postMessage(c)});try{await Mp$1(Z.wasm),await Xp$1(Z),Do=!0}catch(i){throw Lo=!0,i}finally{yn=!1}}},id$2=async i=>{if(_r())return Wr(),new Promise((a,o)=>{Vr("init-ep",[a,o]);let c={type:"init-ep",in:{epName:i,env:Z}};gt$1.postMessage(c)});await Kp$1(Z,i)},ad$1=async i=>_r()?(Wr(),new Promise((a,o)=>{Vr("copy-from",[a,o]);let c={type:"copy-from",in:{buffer:i}};gt$1.postMessage(c,[i.buffer])})):fa$1(i),sd$1=async(i,a)=>{if(_r()){if(a!=null&&a.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Wr(),new Promise((o,c)=>{Vr("create",[o,c]);let s={type:"create",in:{model:i,options:{...a}}},d=[];i instanceof Uint8Array&&d.push(i.buffer),gt$1.postMessage(s,d)})}else return Jp$1(i,a)},ud$1=async i=>{if(_r())return Wr(),new Promise((a,o)=>{Vr("release",[a,o]);let c={type:"release",in:i};gt$1.postMessage(c)});Zp$1(i)},ld$1=async(i,a,o,c,s,d)=>{if(_r()){if(o.some(et=>et[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(s.some(et=>et))throw new Error("pre-allocated output tensor is not supported for proxy.");return Wr(),new Promise((et,$t)=>{Vr("run",[et,$t]);let h=o,b={type:"run",in:{sessionId:i,inputIndices:a,inputs:h,outputIndices:c,options:d}};gt$1.postMessage(b,td$1(h))})}else return Qp$1(i,a,o,c,s,d)},fd$1=async i=>{if(_r())return Wr(),new Promise((a,o)=>{Vr("end-profiling",[a,o]);let c={type:"end-profiling",in:i};gt$1.postMessage(c)});ed$1(i)}}),cd$1,xg,Co$1,pd$1=L(()=>{Ot$1(),da$1(),ua$1(),la$1(),cd$1=(e,i)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${e.location} for ${i()}`)}},xg=e=>{switch(e[3]){case"cpu":return new Me(e[0],e[2],e[1]);case"gpu-buffer":{let i=e[0];if(!Po(i))throw new Error(`not supported data type: ${i} for deserializing GPU tensor`);let{gpuBuffer:a,download:o,dispose:c}=e[2];return Me.fromGpuBuffer(a,{dataType:i,dims:e[1],download:o,dispose:c})}default:throw new Error(`invalid data location: ${e[3]}`)}},Co$1=class{async fetchModelAndCopyToWasmMemory(e){return ad$1(await gn(e))}async loadModel(e,i){lr$1();let a;typeof e=="string"?typeof process<"u"&&process.versions&&process.versions.node?a=await gn(e):a=await this.fetchModelAndCopyToWasmMemory(e):a=e,[this.sessionId,this.inputNames,this.outputNames]=await sd$1(a,i),fr$1()}async dispose(){return ud$1(this.sessionId)}async run(e,i,a){lr$1();let o=[],c=[];Object.entries(e).forEach(g=>{let jt=g[0],Ht=g[1],Kt=this.inputNames.indexOf(jt);if(Kt===-1)throw new Error(`invalid input '${jt}'`);o.push(Ht),c.push(Kt)});let s=[],d=[];Object.entries(i).forEach(g=>{let jt=g[0],Ht=g[1],Kt=this.outputNames.indexOf(jt);if(Kt===-1)throw new Error(`invalid output '${jt}'`);s.push(Ht),d.push(Kt)});let et=o.map((g,jt)=>cd$1(g,()=>`input "${this.inputNames[c[jt]]}"`)),$t=s.map((g,jt)=>g?cd$1(g,()=>`output "${this.outputNames[d[jt]]}"`):null),h=await ld$1(this.sessionId,c,et,d,$t,a),b={};for(let g=0;g<h.length;g++)b[this.outputNames[d[g]]]=s[g]??xg(h[g]);return fr$1(),b}startProfiling(){}endProfiling(){fd$1(this.sessionId)}}}),wg,Fo,dd$1=L(()=>{Ot$1(),da$1(),pd$1(),wg=()=>{if((typeof Z.wasm.initTimeout!="number"||Z.wasm.initTimeout<0)&&(Z.wasm.initTimeout=0),typeof Z.wasm.simd!="boolean"&&(Z.wasm.simd=!0),typeof Z.wasm.proxy!="boolean"&&(Z.wasm.proxy=!1),typeof Z.wasm.trace!="boolean"&&(Z.wasm.trace=!1),typeof Z.wasm.numThreads!="number"||!Number.isInteger(Z.wasm.numThreads)||Z.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(Z.wasm.numThreads=1);let e=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;Z.wasm.numThreads=Math.min(4,Math.ceil((e||1)/2))}},Fo=class{async init(e){wg(),await od$1(),await id$2(e)}async createInferenceSessionHandler(e,i){let a=new Co$1;return await a.loadModel(e,i),Promise.resolve(a)}}}),hd$1={};Sr(hd$1,{wasmBackend:()=>vg});var vg,md$1=L(()=>{dd$1(),vg=new Fo});Ot$1();Ot$1();Ot$1();var Ts$1="1.18.0",jO=qo;{let e=(Op$1(),ar(_p$1)).onnxjsBackend;Pr$1("webgl",e,-10)}{let e=(md$1(),ar(hd$1)).wasmBackend;Pr$1("cpu",e,10),Pr$1("wasm",e,10)}Object.defineProperty(Z.versions,"web",{value:Ts$1,enumerable:!0});/*! Bundled license information:

long/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)
*/const ort_cpu=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return Pd$1},get TRACE(){return ls$1},get TRACE_FUNC_BEGIN(){return lr$1},get TRACE_FUNC_END(){return fr$1},get Tensor(){return Me},get TrainingSession(){return Dd$1},default:jO,get env(){return Z},get registerBackend(){return Pr$1}},Symbol.toStringTag,{value:"Module"}));/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var Oi=Object.defineProperty,nc=Object.getOwnPropertyDescriptor,ic=Object.getOwnPropertyNames,oc=Object.prototype.hasOwnProperty,j=(e,i)=>()=>(e&&(i=e(e=0)),i),Er=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports),kr=(e,i)=>{for(var a in i)Oi(e,a,{get:i[a],enumerable:!0})},ac=(e,i,a,o)=>{if(i&&typeof i=="object"||typeof i=="function")for(let c of ic(i))!oc.call(e,c)&&c!==a&&Oi(e,c,{get:()=>i[c],enumerable:!(o=nc(i,c))||o.enumerable});return e},sr=e=>ac(Oi({},"__esModule",{value:!0}),e),kn,ur,lr,sc,On,Pn=j(()=>{kn=new Map,ur=[],lr=(e,i,a)=>{if(i&&typeof i.init=="function"&&typeof i.createInferenceSessionHandler=="function"){let o=kn.get(e);if(o===void 0)kn.set(e,{backend:i,priority:a});else{if(o.priority>a)return;if(o.priority===a&&o.backend!==i)throw new Error(`cannot register backend "${e}" using priority ${a}`)}if(a>=0){let c=ur.indexOf(e);c!==-1&&ur.splice(c,1);for(let s=0;s<ur.length;s++)if(kn.get(ur[s]).priority<=a){ur.splice(s,0,e);return}ur.push(e)}return}throw new TypeError("not a valid backend")},sc=async e=>{let i=kn.get(e);if(!i)return"backend not found.";if(i.initialized)return i.backend;if(i.aborted)return i.error;{let a=!!i.initPromise;try{return a||(i.initPromise=i.backend.init(e)),await i.initPromise,i.initialized=!0,i.backend}catch(o){return a||(i.error=`${o}`,i.aborted=!0),i.error}finally{delete i.initPromise}}},On=async e=>{let i=e.executionProviders||[],a=i.map($t=>typeof $t=="string"?$t:$t.name),o=a.length===0?ur:a,c,s=[],d=new Set;for(let $t of o){let h=await sc($t);typeof h=="string"?s.push({name:$t,err:h}):(c||(c=h),c===h&&d.add($t))}if(!c)throw new Error(`no available backend found. ERR: ${s.map($t=>`[${$t.name}] ${$t.err}`).join(", ")}`);for(let{name:$t,err:h}of s)a.includes($t)&&console.warn(`removing requested execution provider "${$t}" from session options because it is not available: ${h}`);let et=i.filter($t=>d.has(typeof $t=="string"?$t:$t.name));return[c,new Proxy(e,{get:($t,h)=>h==="executionProviders"?et:Reflect.get($t,h)})]}}),ra=j(()=>{Pn()}),na,ia=j(()=>{na="1.18.0"}),oa,gt,Pi=j(()=>{ia(),oa="warning",gt={wasm:{},webgl:{},webgpu:{},versions:{common:na},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);oa=e}},get logLevel(){return oa}},Object.defineProperty(gt,"logLevel",{enumerable:!0})}),ke,aa=j(()=>{Pi(),ke=gt}),sa,ua,la=j(()=>{sa=(e,i)=>{let a=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);a.width=e.dims[3],a.height=e.dims[2];let o=a.getContext("2d");if(o!=null){let c,s;(i==null?void 0:i.tensorLayout)!==void 0&&i.tensorLayout==="NHWC"?(c=e.dims[2],s=e.dims[3]):(c=e.dims[3],s=e.dims[2]);let d=(i==null?void 0:i.format)!==void 0?i.format:"RGB",et=i==null?void 0:i.norm,$t,h;et===void 0||et.mean===void 0?$t=[255,255,255,255]:typeof et.mean=="number"?$t=[et.mean,et.mean,et.mean,et.mean]:($t=[et.mean[0],et.mean[1],et.mean[2],0],et.mean[3]!==void 0&&($t[3]=et.mean[3])),et===void 0||et.bias===void 0?h=[0,0,0,0]:typeof et.bias=="number"?h=[et.bias,et.bias,et.bias,et.bias]:(h=[et.bias[0],et.bias[1],et.bias[2],0],et.bias[3]!==void 0&&(h[3]=et.bias[3]));let b=s*c,g=0,jt=b,Ht=b*2,Kt=-1;d==="RGBA"?(g=0,jt=b,Ht=b*2,Kt=b*3):d==="RGB"?(g=0,jt=b,Ht=b*2):d==="RBG"&&(g=0,Ht=b,jt=b*2);for(let or=0;or<s;or++)for(let jr=0;jr<c;jr++){let Lr=(e.data[g++]-h[0])*$t[0],ir=(e.data[jt++]-h[1])*$t[1],qr=(e.data[Ht++]-h[2])*$t[2],vn=Kt===-1?255:(e.data[Kt++]-h[3])*$t[3];o.fillStyle="rgba("+Lr+","+ir+","+qr+","+vn+")",o.fillRect(jr,or,1,1)}if("toDataURL"in a)return a.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},ua=(e,i)=>{let a=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),o;if(a!=null){let c,s,d;(i==null?void 0:i.tensorLayout)!==void 0&&i.tensorLayout==="NHWC"?(c=e.dims[2],s=e.dims[1],d=e.dims[3]):(c=e.dims[3],s=e.dims[2],d=e.dims[1]);let et=i!==void 0&&i.format!==void 0?i.format:"RGB",$t=i==null?void 0:i.norm,h,b;$t===void 0||$t.mean===void 0?h=[255,255,255,255]:typeof $t.mean=="number"?h=[$t.mean,$t.mean,$t.mean,$t.mean]:(h=[$t.mean[0],$t.mean[1],$t.mean[2],255],$t.mean[3]!==void 0&&(h[3]=$t.mean[3])),$t===void 0||$t.bias===void 0?b=[0,0,0,0]:typeof $t.bias=="number"?b=[$t.bias,$t.bias,$t.bias,$t.bias]:(b=[$t.bias[0],$t.bias[1],$t.bias[2],0],$t.bias[3]!==void 0&&(b[3]=$t.bias[3]));let g=s*c;if(i!==void 0&&(i.format!==void 0&&d===4&&i.format!=="RGBA"||d===3&&i.format!=="RGB"&&i.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let jt=4,Ht=0,Kt=1,or=2,jr=3,Lr=0,ir=g,qr=g*2,vn=-1;et==="RGBA"?(Lr=0,ir=g,qr=g*2,vn=g*3):et==="RGB"?(Lr=0,ir=g,qr=g*2):et==="RBG"&&(Lr=0,qr=g,ir=g*2),o=a.createImageData(c,s);for(let xn=0;xn<s*c;Ht+=jt,Kt+=jt,or+=jt,jr+=jt,xn++)o.data[Ht]=(e.data[Lr++]-b[0])*h[0],o.data[Kt]=(e.data[ir++]-b[1])*h[1],o.data[or]=(e.data[qr++]-b[2])*h[2],o.data[jr]=vn===-1?255:(e.data[vn++]-b[3])*h[3]}else throw new Error("Can not access image data");return o}}),Ri,da,ca,pa,ma,fa=j(()=>{Rn(),Ri=(e,i)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(i.height===void 0||i.width===void 0)throw new Error("Image height and width must be defined");if(i.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:a,width:o}=i,c=i.norm??{mean:255,bias:0},s,d;typeof c.mean=="number"?s=[c.mean,c.mean,c.mean,c.mean]:s=[c.mean[0],c.mean[1],c.mean[2],c.mean[3]??255],typeof c.bias=="number"?d=[c.bias,c.bias,c.bias,c.bias]:d=[c.bias[0],c.bias[1],c.bias[2],c.bias[3]??0];let et=i.format!==void 0?i.format:"RGBA",$t=i.tensorFormat!==void 0&&i.tensorFormat!==void 0?i.tensorFormat:"RGB",h=a*o,b=$t==="RGBA"?new Float32Array(h*4):new Float32Array(h*3),g=4,jt=0,Ht=1,Kt=2,or=3,jr=0,Lr=h,ir=h*2,qr=-1;et==="RGB"&&(g=3,jt=0,Ht=1,Kt=2,or=-1),$t==="RGBA"?qr=h*3:$t==="RBG"?(jr=0,ir=h,Lr=h*2):$t==="BGR"&&(ir=0,Lr=h,jr=h*2);for(let vn=0;vn<h;vn++,jt+=g,Kt+=g,Ht+=g,or+=g)b[jr++]=(e[jt]+d[0])/s[0],b[Lr++]=(e[Ht]+d[1])/s[1],b[ir++]=(e[Kt]+d[2])/s[2],qr!==-1&&or!==-1&&(b[qr++]=(e[or]+d[3])/s[3]);return $t==="RGBA"?new ot("float32",b,[1,4,a,o]):new ot("float32",b,[1,3,a,o])},da=async(e,i)=>{let a=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,o=typeof ImageData<"u"&&e instanceof ImageData,c=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,s=typeof e=="string",d,et=i??{},$t=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},h=b=>b instanceof HTMLCanvasElement||b instanceof OffscreenCanvas?b.getContext("2d"):null;if(a){let b=$t();b.width=e.width,b.height=e.height;let g=h(b);if(g!=null){let jt=e.height,Ht=e.width;if(i!==void 0&&i.resizedHeight!==void 0&&i.resizedWidth!==void 0&&(jt=i.resizedHeight,Ht=i.resizedWidth),i!==void 0){if(et=i,i.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");et.tensorFormat="RGBA",et.height=jt,et.width=Ht}else et.tensorFormat="RGBA",et.height=jt,et.width=Ht;g.drawImage(e,0,0),d=g.getImageData(0,0,Ht,jt).data}else throw new Error("Can not access image data")}else if(o){let b,g;if(i!==void 0&&i.resizedWidth!==void 0&&i.resizedHeight!==void 0?(b=i.resizedHeight,g=i.resizedWidth):(b=e.height,g=e.width),i!==void 0&&(et=i),et.format="RGBA",et.height=b,et.width=g,i!==void 0){let jt=$t();jt.width=g,jt.height=b;let Ht=h(jt);if(Ht!=null)Ht.putImageData(e,0,0),d=Ht.getImageData(0,0,g,b).data;else throw new Error("Can not access image data")}else d=e.data}else if(c){if(i===void 0)throw new Error("Please provide image config with format for Imagebitmap");let b=$t();b.width=e.width,b.height=e.height;let g=h(b);if(g!=null){let jt=e.height,Ht=e.width;return g.drawImage(e,0,0,Ht,jt),d=g.getImageData(0,0,Ht,jt).data,et.height=jt,et.width=Ht,Ri(d,et)}else throw new Error("Can not access image data")}else{if(s)return new Promise((b,g)=>{let jt=$t(),Ht=h(jt);if(!e||!Ht)return g();let Kt=new Image;Kt.crossOrigin="Anonymous",Kt.src=e,Kt.onload=()=>{jt.width=Kt.width,jt.height=Kt.height,Ht.drawImage(Kt,0,0,jt.width,jt.height);let or=Ht.getImageData(0,0,jt.width,jt.height);et.height=jt.height,et.width=jt.width,b(Ri(or.data,et))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(d!==void 0)return Ri(d,et);throw new Error("Input data provided is not supported - aborted tensor creation")},ca=(e,i)=>{let{width:a,height:o,download:c,dispose:s}=i,d=[1,o,a,4];return new ot({location:"texture",type:"float32",texture:e,dims:d,download:c,dispose:s})},pa=(e,i)=>{let{dataType:a,dims:o,download:c,dispose:s}=i;return new ot({location:"gpu-buffer",type:a??"float32",gpuBuffer:e,dims:o,download:c,dispose:s})},ma=(e,i,a)=>new ot({location:"cpu-pinned",type:e,data:i,dims:a??[i.length]})}),dr,Qr,ha,ga,ya=j(()=>{dr=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Qr=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ha=!1,ga=()=>{if(!ha){ha=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,i=typeof BigUint64Array<"u"&&BigUint64Array.from,a=typeof Float16Array<"u"&&Float16Array.from;e&&(dr.set("int64",BigInt64Array),Qr.set(BigInt64Array,"int64")),i&&(dr.set("uint64",BigUint64Array),Qr.set(BigUint64Array,"uint64")),a?(dr.set("float16",Float16Array),Qr.set(Float16Array,"float16")):dr.set("float16",Uint16Array)}}}),ba,va,wa=j(()=>{Rn(),ba=e=>{let i=1;for(let a=0;a<e.length;a++){let o=e[a];if(typeof o!="number"||!Number.isSafeInteger(o))throw new TypeError(`dims[${a}] must be an integer, got: ${o}`);if(o<0)throw new RangeError(`dims[${a}] must be a non-negative integer, got: ${o}`);i*=o}return i},va=(e,i)=>{switch(e.location){case"cpu":return new ot(e.type,e.data,i);case"cpu-pinned":return new ot({location:"cpu-pinned",data:e.data,type:e.type,dims:i});case"texture":return new ot({location:"texture",texture:e.texture,type:e.type,dims:i});case"gpu-buffer":return new ot({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:i});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),ot,Rn=j(()=>{la(),fa(),ya(),wa(),ot=class{constructor(e,i,a){ga();let o,c;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,o=e.type,c=e.dims,e.location){case"cpu-pinned":{let d=dr.get(o);if(!d)throw new TypeError(`unsupported type "${o}" to create tensor from pinned buffer`);if(!(e.data instanceof d))throw new TypeError(`buffer should be of type ${d.name}`);this.cpuData=e.data;break}case"texture":{if(o!=="float32")throw new TypeError(`unsupported type "${o}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="uint8"&&o!=="bool")throw new TypeError(`unsupported type "${o}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let d,et;if(typeof e=="string")if(o=e,et=a,e==="string"){if(!Array.isArray(i))throw new TypeError("A string tensor's data must be a string array.");d=i}else{let $t=dr.get(e);if($t===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(i)){if(e==="float16"&&$t===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");e==="uint64"||e==="int64"?d=$t.from(i,BigInt):d=$t.from(i)}else if(i instanceof $t)d=i;else throw new TypeError(`A ${o} tensor's data must be type of ${$t}`)}else if(et=i,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let $t=typeof e[0];if($t==="string")o="string",d=e;else if($t==="boolean")o="bool",d=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${$t}.`)}else{let $t=Qr.get(e.constructor);if($t===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);o=$t,d=e}if(et===void 0)et=[d.length];else if(!Array.isArray(et))throw new TypeError("A tensor's dims must be a number array");c=et,this.cpuData=d,this.dataLocation="cpu"}let s=ba(c);if(this.cpuData&&s!==this.cpuData.length)throw new Error(`Tensor's size(${s}) does not match data length(${this.cpuData.length}).`);this.type=o,this.dims=c,this.size=s}static async fromImage(e,i){return da(e,i)}static fromTexture(e,i){return ca(e,i)}static fromGpuBuffer(e,i){return pa(e,i)}static fromPinnedBuffer(e,i,a){return ma(e,i,a)}toDataURL(e){return sa(this,e)}toImageData(e){return ua(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let i=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=i,e&&this.disposer&&(this.disposer(),this.disposer=void 0),i}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return va(this,e)}}}),tt,zn=j(()=>{Rn(),tt=ot}),Bn,$a,yt,ut,zi=j(()=>{Pi(),Bn=(e,i)=>{(typeof gt.trace>"u"?!gt.wasm.trace:!gt.trace)||console.timeStamp(`${e}::ORT::${i}`)},$a=(e,i)=>{var c;let a=((c=new Error().stack)==null?void 0:c.split(/\r\n|\r|\n/g))||[],o=!1;for(let s=0;s<a.length;s++){if(o&&!a[s].includes("TRACE_FUNC")){let d=`FUNC_${e}::${a[s].trim().split(" ")[1]}`;i&&(d+=`::${i}`),Bn("CPU",d);return}a[s].includes("TRACE_FUNC")&&(o=!0)}},yt=e=>{(typeof gt.trace>"u"?!gt.wasm.trace:!gt.trace)||$a("BEGIN",e)},ut=e=>{(typeof gt.trace>"u"?!gt.wasm.trace:!gt.trace)||$a("END",e)}}),Dn,_a=j(()=>{Pn(),zn(),zi(),Dn=class rT{constructor(i){this.handler=i}async run(i,a,o){yt();let c={},s={};if(typeof i!="object"||i===null||i instanceof tt||Array.isArray(i))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let d=!0;if(typeof a=="object"){if(a===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(a instanceof tt)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(a)){if(a.length===0)throw new TypeError("'fetches' cannot be an empty array.");d=!1;for(let h of a){if(typeof h!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(h)===-1)throw new RangeError(`'fetches' contains invalid output name: ${h}.`);c[h]=null}if(typeof o=="object"&&o!==null)s=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else{let h=!1,b=Object.getOwnPropertyNames(a);for(let g of this.outputNames)if(b.indexOf(g)!==-1){let jt=a[g];(jt===null||jt instanceof tt)&&(h=!0,d=!1,c[g]=jt)}if(h){if(typeof o=="object"&&o!==null)s=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else s=a}}else if(typeof a<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let h of this.inputNames)if(typeof i[h]>"u")throw new Error(`input '${h}' is missing in 'feeds'.`);if(d)for(let h of this.outputNames)c[h]=null;let et=await this.handler.run(i,c,s),$t={};for(let h in et)if(Object.hasOwnProperty.call(et,h)){let b=et[h];b instanceof tt?$t[h]=b:$t[h]=new tt(b.type,b.data,b.dims)}return ut(),$t}async release(){return this.handler.dispose()}static async create(i,a,o,c){yt();let s,d={};if(typeof i=="string"){if(s=i,typeof a=="object"&&a!==null)d=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else if(i instanceof Uint8Array){if(s=i,typeof a=="object"&&a!==null)d=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else if(i instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&i instanceof SharedArrayBuffer){let b=i,g=0,jt=i.byteLength;if(typeof a=="object"&&a!==null)d=a;else if(typeof a=="number"){if(g=a,!Number.isSafeInteger(g))throw new RangeError("'byteOffset' must be an integer.");if(g<0||g>=b.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${b.byteLength}).`);if(jt=i.byteLength-g,typeof o=="number"){if(jt=o,!Number.isSafeInteger(jt))throw new RangeError("'byteLength' must be an integer.");if(jt<=0||g+jt>b.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${b.byteLength-g}].`);if(typeof c=="object"&&c!==null)d=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(typeof o<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof a<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(b,g,jt)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[et,$t]=await On(d),h=await et.createInferenceSessionHandler(s,$t);return ut(),new rT(h)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),uc,xa=j(()=>{_a(),uc=Dn}),Sa=j(()=>{}),Ca=j(()=>{}),Ia=j(()=>{}),Ta=j(()=>{}),lc,Mn,Aa=j(()=>{Pn(),zn(),lc="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Mn=class nT{constructor(i,a,o){this.handler=i,this.hasOptimizerModel=a,this.hasEvalModel=o}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(i,a){let o=i.evalModel||"",c=i.optimizerModel||"",s=a||{},[d,et]=await On(s);if(d.createTrainingSessionHandler){let $t=await d.createTrainingSessionHandler(i.checkpointState,i.trainModel,o,c,et);return new nT($t,!!i.optimizerModel,!!i.evalModel)}else throw new Error(lc)}typeNarrowingForRunStep(i,a,o,c,s){let d={},et={};if(typeof o!="object"||o===null||o instanceof tt||Array.isArray(o))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let $t=!0;if(typeof c=="object"){if(c===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(c instanceof tt)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(c)){if(c.length===0)throw new TypeError("'fetches' cannot be an empty array.");$t=!1;for(let h of c){if(typeof h!="string")throw new TypeError("'fetches' must be a string array or an object.");if(a.indexOf(h)===-1)throw new RangeError(`'fetches' contains invalid output name: ${h}.`);d[h]=null}if(typeof s=="object"&&s!==null)et=s;else if(typeof s<"u")throw new TypeError("'options' must be an object.")}else{let h=!1,b=Object.getOwnPropertyNames(c);for(let g of a)if(b.indexOf(g)!==-1){let jt=c[g];(jt===null||jt instanceof tt)&&(h=!0,$t=!1,d[g]=jt)}if(h){if(typeof s=="object"&&s!==null)et=s;else if(typeof s<"u")throw new TypeError("'options' must be an object.")}else et=c}}else if(typeof c<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let h of i)if(typeof o[h]>"u")throw new Error(`input '${h}' is missing in 'feeds'.`);if($t)for(let h of a)d[h]=null;return[d,et]}convertHandlerReturnTypeToMapOfTensors(i){let a={};for(let o in i)if(Object.hasOwnProperty.call(i,o)){let c=i[o];c instanceof tt?a[o]=c:a[o]=new tt(c.type,c.data,c.dims)}return a}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(i,a,o){let[c,s]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,i,a,o),d=await this.handler.runTrainStep(i,c,s);return this.convertHandlerReturnTypeToMapOfTensors(d)}async runOptimizerStep(i){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(i||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(i,a,o){if(this.hasEvalModel){let[c,s]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,i,a,o),d=await this.handler.runEvalStep(i,c,s);return this.convertHandlerReturnTypeToMapOfTensors(d)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(i=!0){return this.handler.getParametersSize(i)}async loadParametersBuffer(i,a=!0){let o=await this.getParametersSize(a);if(i.length!==4*o)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(i,a)}async getContiguousParameters(i=!0){return this.handler.getContiguousParameters(i)}async release(){return this.handler.dispose()}}}),dc,Ea=j(()=>{Aa(),dc=Mn}),Bi={};kr(Bi,{InferenceSession:()=>uc,TRACE:()=>Bn,TRACE_FUNC_BEGIN:()=>yt,TRACE_FUNC_END:()=>ut,Tensor:()=>tt,TrainingSession:()=>dc,env:()=>ke,registerBackend:()=>lr});var _t=j(()=>{ra(),aa(),xa(),zn(),Sa(),Ca(),zi(),Ia(),Ta(),Ea()}),Di={};kr(Di,{createReadStream:()=>Oa,readFile:()=>cc,readFileSync:()=>pc});var cc,pc,Oa,Mi=j(()=>{cc=void 0,pc=void 0,Oa=void 0}),Ui={};kr(Ui,{join:()=>mc});var mc,Wi=j(()=>{mc=void 0}),za=Er((e,i)=>{var a=(()=>{var c;var o=typeof document<"u"?(c=document.currentScript)==null?void 0:c.src:void 0;return typeof __filename<"u"&&(o||(o=__filename)),function(s={}){var d=s,et,$t,h=new Promise((tr,Ir)=>{et=tr,$t=Ir});d.mountExternalData=(tr,Ir)=>{(d.eb||(d.eb=new Map)).set(tr,Ir)},d.unmountExternalData=()=>{delete d.eb};let b=()=>{let tr=(Kr,wn,In)=>(...Go)=>{let y0=My,T0=wn==null?void 0:wn();Go=Kr(...Go);let O0=wn==null?void 0:wn();return T0!==O0&&(Kr=O0,In(T0),wn=In=null),My!=y0?kv():Go},Ir=Kr=>async(...wn)=>{var In;try{if(d.cb)throw Error("Session already started");let Go=d.cb={xb:wn[0],errors:[]},y0=await Kr(...wn);if(d.cb!==Go)throw Error("Session mismatch");(In=d.kb)==null||In.flush();let T0=Go.errors;if(0<T0.length){let O0=await Promise.all(T0);if(O0=O0.filter(I0=>I0),0<O0.length)throw Error(O0.join(`
`))}return y0}finally{d.cb=null}};d._OrtCreateSession=tr(d._OrtCreateSession,()=>d._OrtCreateSession,Kr=>d._OrtCreateSession=Kr),d._OrtRun=Ir(tr(d._OrtRun,()=>d._OrtRun,Kr=>d._OrtRun=Kr)),d._OrtRunWithBinding=Ir(tr(d._OrtRunWithBinding,()=>d._OrtRunWithBinding,Kr=>d._OrtRunWithBinding=Kr)),d._OrtBindInput=tr(d._OrtBindInput,()=>d._OrtBindInput,Kr=>d._OrtBindInput=Kr),b=void 0};d.jsepInit=(tr,Ir)=>{if(b==null||b(),tr==="webgpu"){[d.kb,d.pb,d.tb,d.lb,d.sb,d.Ra,d.ub,d.wb,d.qb,d.rb,d.vb]=Ir;let Kr=d.kb;d.jsepRegisterBuffer=(wn,In,Go,y0)=>Kr.registerBuffer(wn,In,Go,y0),d.jsepGetBuffer=wn=>Kr.getBuffer(wn),d.jsepCreateDownloader=(wn,In,Go)=>Kr.createDownloader(wn,In,Go),d.jsepOnReleaseSession=wn=>{Kr.onReleaseSession(wn)},d.jsepOnRunStart=wn=>Kr.onRunStart(wn)}};var g=Object.assign({},d),jt="./this.program",Ht=(tr,Ir)=>{throw Ir},Kt=typeof window=="object",or=typeof importScripts=="function",jr=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Lr="",ir,qr,vn;if(jr){var xn=(Mi(),sr(Di)),No=(Wi(),sr(Ui));Lr=or?No.dirname(Lr)+"/":__dirname+"/",ir=(tr,Ir)=>(tr=Ty(tr)?new URL(tr):No.normalize(tr),xn.readFileSync(tr,Ir?void 0:"utf8")),vn=tr=>(tr=ir(tr,!0),tr.buffer||(tr=new Uint8Array(tr)),tr),qr=(tr,Ir,Kr,wn=!0)=>{tr=Ty(tr)?new URL(tr):No.normalize(tr),xn.readFile(tr,wn?void 0:"utf8",(In,Go)=>{In?Kr(In):Ir(wn?Go.buffer:Go)})},!d.thisProgram&&1<process.argv.length&&(jt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),Ht=(tr,Ir)=>{throw process.exitCode=tr,Ir}}else(Kt||or)&&(or?Lr=self.location.href:typeof document<"u"&&document.currentScript&&(Lr=document.currentScript.src),o&&(Lr=o),Lr.startsWith("blob:")?Lr="":Lr=Lr.substr(0,Lr.replace(/[?#].*/,"").lastIndexOf("/")+1),ir=tr=>{var Ir=new XMLHttpRequest;return Ir.open("GET",tr,!1),Ir.send(null),Ir.responseText},or&&(vn=tr=>{var Ir=new XMLHttpRequest;return Ir.open("GET",tr,!1),Ir.responseType="arraybuffer",Ir.send(null),new Uint8Array(Ir.response)}),qr=(tr,Ir,Kr)=>{var wn=new XMLHttpRequest;wn.open("GET",tr,!0),wn.responseType="arraybuffer",wn.onload=()=>{wn.status==200||wn.status==0&&wn.response?Ir(wn.response):Kr()},wn.onerror=Kr,wn.send(null)});var Ro=console.log.bind(console),Xo=console.error.bind(console);Object.assign(d,g),g=null;var o0,s0=!1,h0,E0,C0,D0,N0,e0,l0,Uo,c0,$0,Bo;function x0(){var tr=o0.buffer;d.HEAP8=E0=new Int8Array(tr),d.HEAP16=D0=new Int16Array(tr),d.HEAPU8=C0=new Uint8Array(tr),d.HEAPU16=N0=new Uint16Array(tr),d.HEAP32=e0=new Int32Array(tr),d.HEAPU32=l0=new Uint32Array(tr),d.HEAPF32=Uo=new Float32Array(tr),d.HEAPF64=Bo=new Float64Array(tr),d.HEAP64=c0=new BigInt64Array(tr),d.HEAPU64=$0=new BigUint64Array(tr)}var A0=[],G0=[],q0=[],ny=0,xy=null;function gy(tr){throw tr="Aborted("+tr+")",Xo(tr),s0=!0,h0=1,tr=new WebAssembly.RuntimeError(tr+". Build with -sASSERTIONS for more info."),$t(tr),tr}var Ey=tr=>tr.startsWith("data:application/octet-stream;base64,"),Ty=tr=>tr.startsWith("file://"),ly;if(ly="ort-wasm-simd.wasm",!Ey(ly)){var ty=ly;ly=d.locateFile?d.locateFile(ty,Lr):Lr+ty}function ky(tr){if(vn)return vn(tr);throw"both async and sync fetching of the wasm failed"}function Iy(tr){if(Kt||or){if(typeof fetch=="function"&&!Ty(tr))return fetch(tr,{credentials:"same-origin"}).then(Ir=>{if(!Ir.ok)throw`failed to load wasm binary file at '${tr}'`;return Ir.arrayBuffer()}).catch(()=>ky(tr));if(qr)return new Promise((Ir,Kr)=>{qr(tr,wn=>Ir(new Uint8Array(wn)),Kr)})}return Promise.resolve().then(()=>ky(tr))}function Oy(tr,Ir,Kr){return Iy(tr).then(wn=>WebAssembly.instantiate(wn,Ir)).then(Kr,wn=>{Xo(`failed to asynchronously prepare wasm: ${wn}`),gy(wn)})}function g1(tr,Ir){var Kr=ly;return typeof WebAssembly.instantiateStreaming!="function"||Ey(Kr)||Ty(Kr)||jr||typeof fetch!="function"?Oy(Kr,tr,Ir):fetch(Kr,{credentials:"same-origin"}).then(wn=>WebAssembly.instantiateStreaming(wn,tr).then(Ir,function(In){return Xo(`wasm streaming compile failed: ${In}`),Xo("falling back to ArrayBuffer instantiation"),Oy(Kr,tr,Ir)}))}var Py={824920:(tr,Ir,Kr,wn)=>{if(typeof d>"u"||!d.eb)return 1;if(tr=_y(tr>>>0),tr.startsWith("./")&&(tr=tr.substring(2)),tr=d.eb.get(tr),!tr)return 2;if(Ir>>>=0,Kr>>>=0,Ir+Kr>tr.byteLength)return 3;try{return C0.set(tr.subarray(Ir,Ir+Kr),wn>>>0>>>0),0}catch{return 4}},825421:()=>{d.qb()},825452:()=>{d.rb()},825481:()=>{d.vb()},825506:tr=>d.pb(tr),825539:tr=>d.tb(tr),825571:(tr,Ir,Kr)=>{d.lb(tr,Ir,Kr,!0)},825610:(tr,Ir,Kr)=>{d.lb(tr,Ir,Kr)},825643:tr=>{d.Ra("Abs",tr,void 0)},825694:tr=>{d.Ra("Neg",tr,void 0)},825745:tr=>{d.Ra("Floor",tr,void 0)},825798:tr=>{d.Ra("Ceil",tr,void 0)},825850:tr=>{d.Ra("Reciprocal",tr,void 0)},825908:tr=>{d.Ra("Sqrt",tr,void 0)},825960:tr=>{d.Ra("Exp",tr,void 0)},826011:tr=>{d.Ra("Erf",tr,void 0)},826062:tr=>{d.Ra("Sigmoid",tr,void 0)},826117:(tr,Ir,Kr)=>{d.Ra("HardSigmoid",tr,{alpha:Ir,beta:Kr})},826196:tr=>{d.Ra("Log",tr,void 0)},826247:tr=>{d.Ra("Sin",tr,void 0)},826298:tr=>{d.Ra("Cos",tr,void 0)},826349:tr=>{d.Ra("Tan",tr,void 0)},826400:tr=>{d.Ra("Asin",tr,void 0)},826452:tr=>{d.Ra("Acos",tr,void 0)},826504:tr=>{d.Ra("Atan",tr,void 0)},826556:tr=>{d.Ra("Sinh",tr,void 0)},826608:tr=>{d.Ra("Cosh",tr,void 0)},826660:tr=>{d.Ra("Asinh",tr,void 0)},826713:tr=>{d.Ra("Acosh",tr,void 0)},826766:tr=>{d.Ra("Atanh",tr,void 0)},826819:tr=>{d.Ra("Tanh",tr,void 0)},826871:tr=>{d.Ra("Not",tr,void 0)},826922:(tr,Ir,Kr)=>{d.Ra("Clip",tr,{min:Ir,max:Kr})},826991:tr=>{d.Ra("Clip",tr,void 0)},827043:(tr,Ir)=>{d.Ra("Elu",tr,{alpha:Ir})},827101:tr=>{d.Ra("Relu",tr,void 0)},827153:(tr,Ir)=>{d.Ra("LeakyRelu",tr,{alpha:Ir})},827217:(tr,Ir)=>{d.Ra("ThresholdedRelu",tr,{alpha:Ir})},827287:(tr,Ir)=>{d.Ra("Cast",tr,{to:Ir})},827345:tr=>{d.Ra("Add",tr,void 0)},827396:tr=>{d.Ra("Sub",tr,void 0)},827447:tr=>{d.Ra("Mul",tr,void 0)},827498:tr=>{d.Ra("Div",tr,void 0)},827549:tr=>{d.Ra("Pow",tr,void 0)},827600:tr=>{d.Ra("Equal",tr,void 0)},827653:tr=>{d.Ra("Greater",tr,void 0)},827708:tr=>{d.Ra("GreaterOrEqual",tr,void 0)},827770:tr=>{d.Ra("Less",tr,void 0)},827822:tr=>{d.Ra("LessOrEqual",tr,void 0)},827881:(tr,Ir,Kr,wn,In)=>{d.Ra("ReduceMean",tr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:wn?Array.from(e0.subarray(wn>>>0,In>>>0)):[]})},828040:(tr,Ir,Kr,wn,In)=>{d.Ra("ReduceMax",tr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:wn?Array.from(e0.subarray(wn>>>0,In>>>0)):[]})},828198:(tr,Ir,Kr,wn,In)=>{d.Ra("ReduceMin",tr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:wn?Array.from(e0.subarray(wn>>>0,In>>>0)):[]})},828356:(tr,Ir,Kr,wn,In)=>{d.Ra("ReduceProd",tr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:wn?Array.from(e0.subarray(wn>>>0,In>>>0)):[]})},828515:(tr,Ir,Kr,wn,In)=>{d.Ra("ReduceSum",tr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:wn?Array.from(e0.subarray(wn>>>0,In>>>0)):[]})},828673:(tr,Ir,Kr,wn,In)=>{d.Ra("ReduceL1",tr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:wn?Array.from(e0.subarray(wn>>>0,In>>>0)):[]})},828830:(tr,Ir,Kr,wn,In)=>{d.Ra("ReduceL2",tr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:wn?Array.from(e0.subarray(wn>>>0,In>>>0)):[]})},828987:(tr,Ir,Kr,wn,In)=>{d.Ra("ReduceLogSum",tr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:wn?Array.from(e0.subarray(wn>>>0,In>>>0)):[]})},829148:(tr,Ir,Kr,wn,In)=>{d.Ra("ReduceSumSquare",tr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:wn?Array.from(e0.subarray(wn>>>0,In>>>0)):[]})},829312:(tr,Ir,Kr,wn,In)=>{d.Ra("ReduceLogSumExp",tr,{keepDims:!!Ir,noopWithEmptyAxes:!!Kr,axes:wn?Array.from(e0.subarray(wn>>>0,In>>>0)):[]})},829476:tr=>{d.Ra("Where",tr,void 0)},829529:(tr,Ir,Kr)=>{d.Ra("Transpose",tr,{perm:Ir?Array.from(e0.subarray(Ir>>>0,Kr>>>0)):[]})},829637:(tr,Ir,Kr,wn)=>{d.Ra("DepthToSpace",tr,{blocksize:Ir,mode:_y(Kr),format:wn?"NHWC":"NCHW"})},829770:(tr,Ir,Kr,wn)=>{d.Ra("DepthToSpace",tr,{blocksize:Ir,mode:_y(Kr),format:wn?"NHWC":"NCHW"})},829903:(tr,Ir,Kr,wn,In,Go,y0,T0,O0,I0,H0,py,u0,a0,j0)=>{d.Ra("ConvTranspose",tr,{format:O0?"NHWC":"NCHW",autoPad:Ir,dilations:[Kr],group:wn,kernelShape:[In],pads:[Go,y0],strides:[T0],wIsConst:()=>!!E0[I0>>>0],outputPadding:H0?Array.from(e0.subarray(H0>>>0,py>>>0)):[],outputShape:u0?Array.from(e0.subarray(u0>>>0,a0>>>0)):[],activation:_y(j0)})},830304:(tr,Ir,Kr,wn,In,Go,y0,T0,O0,I0,H0,py,u0,a0)=>{d.Ra("ConvTranspose",tr,{format:T0?"NHWC":"NCHW",autoPad:Ir,dilations:Array.from(e0.subarray(Kr>>>0,(Kr>>>0)+2>>>0)),group:wn,kernelShape:Array.from(e0.subarray(In>>>0,(In>>>0)+2>>>0)),pads:Array.from(e0.subarray(Go>>>0,(Go>>>0)+4>>>0)),strides:Array.from(e0.subarray(y0>>>0,(y0>>>0)+2>>>0)),wIsConst:()=>!!E0[O0>>>0],outputPadding:I0?Array.from(e0.subarray(I0>>>0,H0>>>0)):[],outputShape:py?Array.from(e0.subarray(py>>>0,u0>>>0)):[],activation:_y(a0)})},830869:(tr,Ir,Kr,wn,In,Go,y0,T0,O0,I0,H0,py,u0,a0,j0)=>{d.Ra("ConvTranspose",tr,{format:O0?"NHWC":"NCHW",autoPad:Ir,dilations:[Kr],group:wn,kernelShape:[In],pads:[Go,y0],strides:[T0],wIsConst:()=>!!E0[I0>>>0],outputPadding:H0?Array.from(e0.subarray(H0>>>0,py>>>0)):[],outputShape:u0?Array.from(e0.subarray(u0>>>0,a0>>>0)):[],activation:_y(j0)})},831270:(tr,Ir,Kr,wn,In,Go,y0,T0,O0,I0,H0,py,u0,a0)=>{d.Ra("ConvTranspose",tr,{format:T0?"NHWC":"NCHW",autoPad:Ir,dilations:Array.from(e0.subarray(Kr>>>0,(Kr>>>0)+2>>>0)),group:wn,kernelShape:Array.from(e0.subarray(In>>>0,(In>>>0)+2>>>0)),pads:Array.from(e0.subarray(Go>>>0,(Go>>>0)+4>>>0)),strides:Array.from(e0.subarray(y0>>>0,(y0>>>0)+2>>>0)),wIsConst:()=>!!E0[O0>>>0],outputPadding:I0?Array.from(e0.subarray(I0>>>0,H0>>>0)):[],outputShape:py?Array.from(e0.subarray(py>>>0,u0>>>0)):[],activation:_y(a0)})},831835:(tr,Ir)=>{d.Ra("GlobalAveragePool",tr,{format:Ir?"NHWC":"NCHW"})},831926:(tr,Ir,Kr,wn,In,Go,y0,T0,O0,I0,H0,py,u0,a0,j0,z0)=>{d.Ra("AveragePool",tr,{format:z0?"NHWC":"NCHW",auto_pad:Ir,ceil_mode:Kr,count_include_pad:wn,storage_order:In,dilations:[Go,y0],kernel_shape:[T0,O0],pads:[I0,H0,py,u0],strides:[a0,j0]})},832210:(tr,Ir)=>{d.Ra("GlobalAveragePool",tr,{format:Ir?"NHWC":"NCHW"})},832301:(tr,Ir,Kr,wn,In,Go,y0,T0,O0,I0,H0,py,u0,a0,j0,z0)=>{d.Ra("AveragePool",tr,{format:z0?"NHWC":"NCHW",auto_pad:Ir,ceil_mode:Kr,count_include_pad:wn,storage_order:In,dilations:[Go,y0],kernel_shape:[T0,O0],pads:[I0,H0,py,u0],strides:[a0,j0]})},832585:(tr,Ir)=>{d.Ra("GlobalMaxPool",tr,{format:Ir?"NHWC":"NCHW"})},832672:(tr,Ir,Kr,wn,In,Go,y0,T0,O0,I0,H0,py,u0,a0,j0,z0)=>{d.Ra("MaxPool",tr,{format:z0?"NHWC":"NCHW",auto_pad:Ir,ceil_mode:Kr,count_include_pad:wn,storage_order:In,dilations:[Go,y0],kernel_shape:[T0,O0],pads:[I0,H0,py,u0],strides:[a0,j0]})},832952:(tr,Ir)=>{d.Ra("GlobalMaxPool",tr,{format:Ir?"NHWC":"NCHW"})},833039:(tr,Ir,Kr,wn,In,Go,y0,T0,O0,I0,H0,py,u0,a0,j0,z0)=>{d.Ra("MaxPool",tr,{format:z0?"NHWC":"NCHW",auto_pad:Ir,ceil_mode:Kr,count_include_pad:wn,storage_order:In,dilations:[Go,y0],kernel_shape:[T0,O0],pads:[I0,H0,py,u0],strides:[a0,j0]})},833319:(tr,Ir,Kr,wn,In)=>{d.Ra("Gemm",tr,{alpha:Ir,beta:Kr,transA:wn,transB:In})},833423:tr=>{d.Ra("MatMul",tr,void 0)},833477:(tr,Ir,Kr,wn)=>{d.Ra("ArgMax",tr,{keepDims:!!Ir,selectLastIndex:!!Kr,axis:wn})},833585:(tr,Ir,Kr,wn)=>{d.Ra("ArgMin",tr,{keepDims:!!Ir,selectLastIndex:!!Kr,axis:wn})},833693:(tr,Ir)=>{d.Ra("Softmax",tr,{axis:Ir})},833756:(tr,Ir)=>{d.Ra("Concat",tr,{axis:Ir})},833816:(tr,Ir,Kr,wn,In)=>{d.Ra("Split",tr,{axis:Ir,numOutputs:Kr,splitSizes:wn?Array.from(e0.subarray(wn>>>0,In>>>0)):[]})},833956:tr=>{d.Ra("Expand",tr,void 0)},834010:(tr,Ir)=>{d.Ra("Gather",tr,{axis:Number(Ir)})},834081:(tr,Ir)=>{d.Ra("GatherElements",tr,{axis:Number(Ir)})},834160:(tr,Ir,Kr,wn,In,Go,y0,T0,O0,I0,H0)=>{d.Ra("Resize",tr,{antialias:Ir,axes:Kr?Array.from(e0.subarray(Kr>>>0,wn>>>0)):[],coordinateTransformMode:_y(In),cubicCoeffA:Go,excludeOutside:y0,extrapolationValue:T0,keepAspectRatioPolicy:_y(O0),mode:_y(I0),nearestMode:_y(H0)})},834506:(tr,Ir,Kr,wn,In,Go,y0)=>{d.Ra("Slice",tr,{starts:Ir?Array.from(e0.subarray(Ir>>>0,Kr>>>0)):[],ends:wn?Array.from(e0.subarray(wn>>>0,In>>>0)):[],axes:Go?Array.from(e0.subarray(Go>>>0,y0>>>0)):[]})},834722:tr=>{d.Ra("Tile",tr,void 0)},834774:(tr,Ir,Kr,wn)=>{d.Ra("LayerNormalization",tr,{axis:Ir,epsilon:Kr,simplified:!!wn})},834885:(tr,Ir,Kr)=>{d.Ra("InstanceNormalization",tr,{epsilon:Ir,format:Kr?"NHWC":"NCHW"})},834999:(tr,Ir,Kr)=>{d.Ra("InstanceNormalization",tr,{epsilon:Ir,format:Kr?"NHWC":"NCHW"})},835113:tr=>{d.Ra("Range",tr,void 0)},835166:(tr,Ir)=>{d.Ra("Einsum",tr,{equation:_y(Ir)})},835247:(tr,Ir,Kr,wn,In)=>{d.Ra("Pad",tr,{mode:Ir,value:Kr,pads:wn?Array.from(e0.subarray(wn>>>0,In>>>0)):[]})},835374:(tr,Ir,Kr,wn,In,Go)=>{d.Ra("BatchNormalization",tr,{epsilon:Ir,momentum:Kr,spatial:!!In,trainingMode:!!wn,format:Go?"NHWC":"NCHW"})},835543:(tr,Ir,Kr,wn,In,Go)=>{d.Ra("BatchNormalization",tr,{epsilon:Ir,momentum:Kr,spatial:!!In,trainingMode:!!wn,format:Go?"NHWC":"NCHW"})},835712:(tr,Ir,Kr)=>{d.Ra("CumSum",tr,{exclusive:Number(Ir),reverse:Number(Kr)})},835809:(tr,Ir,Kr,wn,In,Go,y0,T0,O0)=>{d.Ra("Attention",tr,{numHeads:Ir,isUnidirectional:Kr,maskFilterValue:wn,scale:In,doRotary:Go,qkvHiddenSizes:y0?Array.from(e0.subarray(Number(T0)>>>0,Number(T0)+y0>>>0)):[],pastPresentShareBuffer:!!O0})},836081:tr=>{d.Ra("BiasAdd",tr,void 0)},836136:tr=>{d.Ra("BiasSplitGelu",tr,void 0)},836197:tr=>{d.Ra("FastGelu",tr,void 0)},836253:(tr,Ir,Kr,wn,In,Go,y0,T0,O0,I0,H0,py,u0)=>{d.Ra("Conv",tr,{format:O0?"NHWC":"NCHW",auto_pad:Ir,dilations:[Kr],group:wn,kernel_shape:[In],pads:Go?Array.from(e0.subarray(Go>>>0,y0>>>0)):[],strides:[T0],w_is_const:()=>!!E0[I0>>>0],activation:_y(H0),activation_params:py?Array.from(Uo.subarray(py>>>0,u0>>>0)):[]})},836623:(tr,Ir,Kr,wn,In,Go,y0,T0,O0,I0,H0,py,u0,a0,j0,z0)=>{d.Ra("Conv",tr,{format:py?"NHWC":"NCHW",auto_pad:Ir,dilations:[Kr,wn],group:In,kernel_shape:[Go,y0],pads:T0?Array.from(e0.subarray(T0>>>0,O0>>>0)):[],strides:[I0,H0],w_is_const:()=>!!E0[u0>>>0],activation:_y(a0),activation_params:j0?Array.from(Uo.subarray(j0>>>0,z0>>>0)):[]})},837014:tr=>{d.Ra("Gelu",tr,void 0)},837066:(tr,Ir,Kr,wn,In,Go)=>{d.Ra("MatMulNBits",tr,{k:Ir,n:Kr,accuracyLevel:wn,bits:In,blockSize:Go})},837193:(tr,Ir,Kr,wn,In,Go)=>{d.Ra("MultiHeadAttention",tr,{numHeads:Ir,isUnidirectional:Kr,maskFilterValue:wn,scale:In,doRotary:Go})},837352:(tr,Ir,Kr,wn,In)=>{d.Ra("RotaryEmbedding",tr,{interleaved:!!Ir,numHeads:Kr,rotaryEmbeddingDim:wn,scale:In})},837491:(tr,Ir,Kr)=>{d.Ra("SkipLayerNormalization",tr,{epsilon:Ir,simplified:!!Kr})},837593:(tr,Ir,Kr)=>{d.Ra("SkipLayerNormalization",tr,{epsilon:Ir,simplified:!!Kr})},837695:(tr,Ir,Kr,wn)=>{d.Ra("LayerNormalization",tr,{axis:Ir,epsilon:Kr,simplified:!!wn})},837806:tr=>{d.ub(tr)},837840:(tr,Ir)=>d.wb(tr,Ir,d.cb.xb,d.cb.errors)};function r1(tr){this.name="ExitStatus",this.message=`Program terminated with exit(${tr})`,this.status=tr}class xv{constructor(Ir){this.hb=Ir-24}}var Yy=0,zy=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Gy=(tr,Ir,Kr)=>{Ir>>>=0;var wn=Ir+Kr;for(Kr=Ir;tr[Kr]&&!(Kr>=wn);)++Kr;if(16<Kr-Ir&&tr.buffer&&zy)return zy.decode(tr.subarray(Ir,Kr));for(wn="";Ir<Kr;){var In=tr[Ir++];if(In&128){var Go=tr[Ir++]&63;if((In&224)==192)wn+=String.fromCharCode((In&31)<<6|Go);else{var y0=tr[Ir++]&63;In=(In&240)==224?(In&15)<<12|Go<<6|y0:(In&7)<<18|Go<<12|y0<<6|tr[Ir++]&63,65536>In?wn+=String.fromCharCode(In):(In-=65536,wn+=String.fromCharCode(55296|In>>10,56320|In&1023))}}else wn+=String.fromCharCode(In)}return wn},_y=(tr,Ir)=>(tr>>>=0)?Gy(C0,tr,Ir):"",f1=tr=>{for(var Ir=0,Kr=0;Kr<tr.length;++Kr){var wn=tr.charCodeAt(Kr);127>=wn?Ir++:2047>=wn?Ir+=2:55296<=wn&&57343>=wn?(Ir+=4,++Kr):Ir+=3}return Ir},Uy=(tr,Ir,Kr,wn)=>{if(Kr>>>=0,!(0<wn))return 0;var In=Kr;wn=Kr+wn-1;for(var Go=0;Go<tr.length;++Go){var y0=tr.charCodeAt(Go);if(55296<=y0&&57343>=y0){var T0=tr.charCodeAt(++Go);y0=65536+((y0&1023)<<10)|T0&1023}if(127>=y0){if(Kr>=wn)break;Ir[Kr++>>>0]=y0}else{if(2047>=y0){if(Kr+1>=wn)break;Ir[Kr++>>>0]=192|y0>>6}else{if(65535>=y0){if(Kr+2>=wn)break;Ir[Kr++>>>0]=224|y0>>12}else{if(Kr+3>=wn)break;Ir[Kr++>>>0]=240|y0>>18,Ir[Kr++>>>0]=128|y0>>12&63}Ir[Kr++>>>0]=128|y0>>6&63}Ir[Kr++>>>0]=128|y0&63}}return Ir[Kr>>>0]=0,Kr-In},y1,Ry=tr=>{for(var Ir="";C0[tr>>>0];)Ir+=y1[C0[tr++>>>0]];return Ir},v1={},my={},i1;function Y0(tr,Ir,Kr={}){var wn=Ir.name;if(!tr)throw new i1(`type "${wn}" must have a positive integer typeid pointer`);if(my.hasOwnProperty(tr)){if(Kr.nb)return;throw new i1(`Cannot register type '${wn}' twice`)}my[tr]=Ir,v1.hasOwnProperty(tr)&&(Ir=v1[tr],delete v1[tr],Ir.forEach(In=>In()))}function Vy(tr,Ir,Kr={}){if(!("argPackAdvance"in Ir))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Y0(tr,Ir,Kr)}var b1=(tr,Ir,Kr)=>{switch(Ir){case 1:return Kr?wn=>E0[wn>>>0]:wn=>C0[wn>>>0];case 2:return Kr?wn=>D0[wn>>>1>>>0]:wn=>N0[wn>>>1>>>0];case 4:return Kr?wn=>e0[wn>>>2>>>0]:wn=>l0[wn>>>2>>>0];case 8:return Kr?wn=>c0[wn>>>3]:wn=>$0[wn>>>3];default:throw new TypeError(`invalid integer width (${Ir}): ${tr}`)}},E1=[],M0=[];function $1(tr){tr>>>=0,9<tr&&--M0[tr+1]===0&&(M0[tr]=void 0,E1.push(tr))}var X0=tr=>{if(!tr)throw new i1("Cannot use deleted val. handle = "+tr);return M0[tr]},Fy=tr=>{switch(tr){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let Ir=E1.pop()||M0.length;return M0[Ir]=tr,M0[Ir+1]=1,Ir}};function ko(tr){return this.fromWireType(l0[tr>>>2>>>0])}var r0={name:"emscripten::val",fromWireType:tr=>{var Ir=X0(tr);return $1(tr),Ir},toWireType:(tr,Ir)=>Fy(Ir),argPackAdvance:8,readValueFromPointer:ko,bb:null},i0=(tr,Ir)=>{switch(Ir){case 4:return function(Kr){return this.fromWireType(Uo[Kr>>>2>>>0])};case 8:return function(Kr){return this.fromWireType(Bo[Kr>>>3>>>0])};default:throw new TypeError(`invalid float width (${Ir}): ${tr}`)}},g0=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,b0=(tr,Ir)=>{for(var Kr=tr>>1,wn=Kr+Ir/2;!(Kr>=wn)&&N0[Kr>>>0];)++Kr;if(Kr<<=1,32<Kr-tr&&g0)return g0.decode(C0.subarray(tr>>>0,Kr>>>0));for(Kr="",wn=0;!(wn>=Ir/2);++wn){var In=D0[tr+2*wn>>>1>>>0];if(In==0)break;Kr+=String.fromCharCode(In)}return Kr},F0=(tr,Ir,Kr)=>{if(Kr??(Kr=2147483647),2>Kr)return 0;Kr-=2;var wn=Ir;Kr=Kr<2*tr.length?Kr/2:tr.length;for(var In=0;In<Kr;++In)D0[Ir>>>1>>>0]=tr.charCodeAt(In),Ir+=2;return D0[Ir>>>1>>>0]=0,Ir-wn},ry=tr=>2*tr.length,By=(tr,Ir)=>{for(var Kr=0,wn="";!(Kr>=Ir/4);){var In=e0[tr+4*Kr>>>2>>>0];if(In==0)break;++Kr,65536<=In?(In-=65536,wn+=String.fromCharCode(55296|In>>10,56320|In&1023)):wn+=String.fromCharCode(In)}return wn},Xy=(tr,Ir,Kr)=>{if(Ir>>>=0,Kr??(Kr=2147483647),4>Kr)return 0;var wn=Ir;Kr=wn+Kr-4;for(var In=0;In<tr.length;++In){var Go=tr.charCodeAt(In);if(55296<=Go&&57343>=Go){var y0=tr.charCodeAt(++In);Go=65536+((Go&1023)<<10)|y0&1023}if(e0[Ir>>>2>>>0]=Go,Ir+=4,Ir+4>Kr)break}return e0[Ir>>>2>>>0]=0,Ir-wn},Wy=tr=>{for(var Ir=0,Kr=0;Kr<tr.length;++Kr){var wn=tr.charCodeAt(Kr);55296<=wn&&57343>=wn&&++Kr,Ir+=4}return Ir},Ly=(tr,Ir)=>{var Kr=my[tr];if(Kr===void 0)throw tr=mv(tr),Kr=Ry(tr),Qy(tr),new i1(`${Ir} has unknown type ${Kr}`);return Kr},F1=(tr,Ir,Kr)=>{var wn=[];return tr=tr.toWireType(wn,Kr),wn.length&&(l0[Ir>>>2>>>0]=Fy(wn)),tr},n1=tr=>{try{tr()}catch(Ir){gy(Ir)}},d0=tr=>{var Ir;if(!s0)try{tr();try{h0=h0=tr=h0,(Ir=d.onExit)==null||Ir.call(d,tr),s0=!0,Ht(tr,new r1(tr))}catch(Kr){Kr instanceof r1||Kr=="unwind"||Ht(1,Kr)}}catch(Kr){Kr instanceof r1||Kr=="unwind"||Ht(1,Kr)}};function dy(){var tr=Z0,Ir={};for(let[Kr,wn]of Object.entries(tr))Ir[Kr]=typeof wn=="function"?(...In)=>{w1.push(Kr);try{return wn(...In)}finally{s0||(w1.pop(),My&&cy===1&&w1.length===0&&(cy=0,n1(gv),typeof Fibers<"u"&&Fibers.Db()))}}:wn;return Ir}var cy=0,My=null,W1=0,w1=[],Tv={},Sv={},jv=0,uv=null,Ev=[];function kv(){return new Promise((tr,Ir)=>{uv={resolve:tr,reject:Ir}})}function lv(){var tr=x1(65548),Ir=tr+12;l0[tr>>>2>>>0]=Ir,l0[tr+4>>>2>>>0]=Ir+65536,Ir=w1[0];var Kr=Tv[Ir];return Kr===void 0&&(Kr=jv++,Tv[Ir]=Kr,Sv[Kr]=Ir),e0[tr+8>>>2>>>0]=Kr,tr}function Iv(tr){if(!s0){if(cy===0){var Ir=!1,Kr=!1;tr((wn=0)=>{if(!s0&&(W1=wn,Ir=!0,Kr)){cy=2,n1(()=>c1(My)),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.resume(),wn=!1;try{var In=(0,Z0[Sv[e0[My+8>>>2>>>0]]])()}catch(T0){In=T0,wn=!0}var Go=!1;if(!My){var y0=uv;y0&&(uv=null,(wn?y0.reject:y0.resolve)(In),Go=!0)}if(wn&&!Go)throw In}}),Kr=!0,Ir||(cy=1,My=lv(),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.pause(),n1(()=>o1(My)))}else cy===2?(cy=0,n1(h1),Qy(My),My=null,Ev.forEach(d0)):gy(`invalid state: ${cy}`);return W1}}function D1(tr){return Iv(Ir=>{tr().then(Ir)})}var X1=[],zv={},N1=tr=>{var Ir=zv[tr];return Ir===void 0?Ry(tr):Ir},l1=()=>typeof globalThis=="object"?globalThis:Function("return this")(),M1=tr=>{var Ir=X1.length;return X1.push(tr),Ir},dv=(tr,Ir)=>{for(var Kr=Array(tr),wn=0;wn<tr;++wn)Kr[wn]=Ly(l0[Ir+4*wn>>>2>>>0],"parameter "+wn);return Kr},_1=(tr,Ir)=>Object.defineProperty(Ir,"name",{value:tr});function Bv(tr){var Ir=Function;if(!(Ir instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof Ir} which is not a function`);var Kr=_1(Ir.name||"unknownFunctionName",function(){});return Kr.prototype=Ir.prototype,Kr=new Kr,tr=Ir.apply(Kr,tr),tr instanceof Object?tr:Kr}var Zy=tr=>tr%4===0&&(tr%100!==0||tr%400===0),cv=[0,31,60,91,121,152,182,213,244,274,305,335],Q1=[0,31,59,90,120,151,181,212,243,273,304,334],d1=[],pv=(tr,Ir)=>{d1.length=0;for(var Kr;Kr=C0[tr++>>>0];){var wn=Kr!=105;wn&=Kr!=112,Ir+=wn&&Ir%8?4:0,d1.push(Kr==112?l0[Ir>>>2>>>0]:Kr==106?c0[Ir>>>3]:Kr==105?e0[Ir>>>2>>>0]:Bo[Ir>>>3>>>0]),Ir+=wn?8:4}return d1},qy={},a1=()=>{if(!V1){var tr={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:jt||"./this.program"},Ir;for(Ir in qy)qy[Ir]===void 0?delete tr[Ir]:tr[Ir]=qy[Ir];var Kr=[];for(Ir in tr)Kr.push(`${Ir}=${tr[Ir]}`);V1=Kr}return V1},V1,Lv=[null,[],[]],Uv=[31,29,31,30,31,30,31,31,30,31,30,31],fv=[31,28,31,30,31,30,31,31,30,31,30,31];function Jv(tr){var Ir=Array(f1(tr)+1);return Uy(tr,Ir,0,Ir.length),Ir}function Fv(tr,Ir,Kr,wn){function In(a0,j0,z0){for(a0=typeof a0=="number"?a0.toString():a0||"";a0.length<j0;)a0=z0[0]+a0;return a0}function Go(a0,j0){return In(a0,j0,"0")}function y0(a0,j0){function z0(yv){return 0>yv?-1:0<yv?1:0}var fy;return(fy=z0(a0.getFullYear()-j0.getFullYear()))===0&&(fy=z0(a0.getMonth()-j0.getMonth()))===0&&(fy=z0(a0.getDate()-j0.getDate())),fy}function T0(a0){switch(a0.getDay()){case 0:return new Date(a0.getFullYear()-1,11,29);case 1:return a0;case 2:return new Date(a0.getFullYear(),0,3);case 3:return new Date(a0.getFullYear(),0,2);case 4:return new Date(a0.getFullYear(),0,1);case 5:return new Date(a0.getFullYear()-1,11,31);case 6:return new Date(a0.getFullYear()-1,11,30)}}function O0(a0){var j0=a0.$a;for(a0=new Date(new Date(a0.ab+1900,0,1).getTime());0<j0;){var z0=a0.getMonth(),fy=(Zy(a0.getFullYear())?Uv:fv)[z0];if(j0>fy-a0.getDate())j0-=fy-a0.getDate()+1,a0.setDate(1),11>z0?a0.setMonth(z0+1):(a0.setMonth(0),a0.setFullYear(a0.getFullYear()+1));else{a0.setDate(a0.getDate()+j0);break}}return z0=new Date(a0.getFullYear()+1,0,4),j0=T0(new Date(a0.getFullYear(),0,4)),z0=T0(z0),0>=y0(j0,a0)?0>=y0(z0,a0)?a0.getFullYear()+1:a0.getFullYear():a0.getFullYear()-1}tr>>>=0,Ir>>>=0,Kr>>>=0,wn>>>=0;var I0=l0[wn+40>>>2>>>0];wn={Ab:e0[wn>>>2>>>0],zb:e0[wn+4>>>2>>>0],fb:e0[wn+8>>>2>>>0],jb:e0[wn+12>>>2>>>0],gb:e0[wn+16>>>2>>>0],ab:e0[wn+20>>>2>>>0],Va:e0[wn+24>>>2>>>0],$a:e0[wn+28>>>2>>>0],Cb:e0[wn+32>>>2>>>0],yb:e0[wn+36>>>2>>>0],Bb:I0?_y(I0):""},Kr=_y(Kr),I0={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var H0 in I0)Kr=Kr.replace(new RegExp(H0,"g"),I0[H0]);var py="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),u0="January February March April May June July August September October November December".split(" ");I0={"%a":a0=>py[a0.Va].substring(0,3),"%A":a0=>py[a0.Va],"%b":a0=>u0[a0.gb].substring(0,3),"%B":a0=>u0[a0.gb],"%C":a0=>Go((a0.ab+1900)/100|0,2),"%d":a0=>Go(a0.jb,2),"%e":a0=>In(a0.jb,2," "),"%g":a0=>O0(a0).toString().substring(2),"%G":O0,"%H":a0=>Go(a0.fb,2),"%I":a0=>(a0=a0.fb,a0==0?a0=12:12<a0&&(a0-=12),Go(a0,2)),"%j":a0=>{for(var j0=0,z0=0;z0<=a0.gb-1;j0+=(Zy(a0.ab+1900)?Uv:fv)[z0++]);return Go(a0.jb+j0,3)},"%m":a0=>Go(a0.gb+1,2),"%M":a0=>Go(a0.zb,2),"%n":()=>`
`,"%p":a0=>0<=a0.fb&&12>a0.fb?"AM":"PM","%S":a0=>Go(a0.Ab,2),"%t":()=>"	","%u":a0=>a0.Va||7,"%U":a0=>Go(Math.floor((a0.$a+7-a0.Va)/7),2),"%V":a0=>{var j0=Math.floor((a0.$a+7-(a0.Va+6)%7)/7);if(2>=(a0.Va+371-a0.$a-2)%7&&j0++,j0)j0==53&&(z0=(a0.Va+371-a0.$a)%7,z0==4||z0==3&&Zy(a0.ab)||(j0=1));else{j0=52;var z0=(a0.Va+7-a0.$a-1)%7;(z0==4||z0==5&&Zy(a0.ab%400-1))&&j0++}return Go(j0,2)},"%w":a0=>a0.Va,"%W":a0=>Go(Math.floor((a0.$a+7-(a0.Va+6)%7)/7),2),"%y":a0=>(a0.ab+1900).toString().substring(2),"%Y":a0=>a0.ab+1900,"%z":a0=>{a0=a0.yb;var j0=0<=a0;return a0=Math.abs(a0)/60,(j0?"+":"-")+("0000"+(a0/60*100+a0%60)).slice(-4)},"%Z":a0=>a0.Bb,"%%":()=>"%"},Kr=Kr.replace(/%%/g,"\0\0");for(H0 in I0)Kr.includes(H0)&&(Kr=Kr.replace(new RegExp(H0,"g"),I0[H0](wn)));return Kr=Kr.replace(/\0\0/g,"%"),H0=Jv(Kr),H0.length>Ir?0:(E0.set(H0,tr>>>0),H0.length-1)}for(var hv=Array(256),V0=0;256>V0;++V0)hv[V0]=String.fromCharCode(V0);y1=hv,i1=d.BindingError=class extends Error{constructor(tr){super(tr),this.name="BindingError"}},d.InternalError=class extends Error{constructor(tr){super(tr),this.name="InternalError"}},M0.push(0,1,void 0,1,null,1,!0,1,!1,1),d.count_emval_handles=()=>M0.length/2-5-E1.length;var Cv={ia:function(tr,Ir,Kr){return D1(async()=>{await d.sb(tr,Ir,Kr)})},a:function(tr,Ir,Kr){tr>>>=0;var wn=new xv(tr);throw l0[wn.hb+16>>>2>>>0]=0,l0[wn.hb+4>>>2>>>0]=Ir>>>0,l0[wn.hb+8>>>2>>>0]=Kr>>>0,Yy=tr,Yy},y:function(){return 0},ea:function(){},R:function(){},T:function(){},ga:function(){return 0},ca:function(){},Z:function(){},ba:function(){},G:function(){},S:function(){},P:function(){},da:function(){},Q:function(){},C:function(tr,Ir,Kr){Ir=Ry(Ir>>>0),Vy(tr>>>0,{name:Ir,fromWireType:wn=>wn,toWireType:function(wn,In){if(typeof In!="bigint"&&typeof In!="number")throw In===null?In="null":(wn=typeof In,In=wn==="object"||wn==="array"||wn==="function"?In.toString():""+In),new TypeError(`Cannot convert "${In}" to ${this.name}`);return typeof In=="number"&&(In=BigInt(In)),In},argPackAdvance:8,readValueFromPointer:b1(Ir,Kr>>>0,Ir.indexOf("u")==-1),bb:null})},K:function(tr,Ir,Kr,wn){Ir=Ry(Ir>>>0),Vy(tr>>>0,{name:Ir,fromWireType:function(In){return!!In},toWireType:function(In,Go){return Go?Kr:wn},argPackAdvance:8,readValueFromPointer:function(In){return this.fromWireType(C0[In>>>0])},bb:null})},J:function(tr){return Vy(tr>>>0,r0)},B:function(tr,Ir,Kr){Ir=Ry(Ir>>>0),Vy(tr>>>0,{name:Ir,fromWireType:wn=>wn,toWireType:(wn,In)=>In,argPackAdvance:8,readValueFromPointer:i0(Ir,Kr>>>0),bb:null})},s:function(tr,Ir,Kr,wn,In){if(tr>>>=0,Kr>>>=0,Ir=Ry(Ir>>>0),In===-1&&(In=4294967295),In=T0=>T0,wn===0){var Go=32-8*Kr;In=T0=>T0<<Go>>>Go}var y0=Ir.includes("unsigned")?function(T0,O0){return O0>>>0}:function(T0,O0){return O0};Vy(tr,{name:Ir,fromWireType:In,toWireType:y0,argPackAdvance:8,readValueFromPointer:b1(Ir,Kr,wn!==0),bb:null})},o:function(tr,Ir,Kr){function wn(Go){return new In(E0.buffer,l0[Go+4>>>2>>>0],l0[Go>>>2>>>0])}var In=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][Ir];Kr=Ry(Kr>>>0),Vy(tr>>>0,{name:Kr,fromWireType:wn,argPackAdvance:8,readValueFromPointer:wn},{nb:!0})},D:function(tr,Ir){Ir=Ry(Ir>>>0);var Kr=Ir==="std::string";Vy(tr>>>0,{name:Ir,fromWireType:function(wn){var In=l0[wn>>>2>>>0],Go=wn+4;if(Kr)for(var y0=Go,T0=0;T0<=In;++T0){var O0=Go+T0;if(T0==In||C0[O0>>>0]==0){if(y0=_y(y0,O0-y0),I0===void 0)var I0=y0;else I0+=String.fromCharCode(0),I0+=y0;y0=O0+1}}else{for(I0=Array(In),T0=0;T0<In;++T0)I0[T0]=String.fromCharCode(C0[Go+T0>>>0]);I0=I0.join("")}return Qy(wn),I0},toWireType:function(wn,In){In instanceof ArrayBuffer&&(In=new Uint8Array(In));var Go=typeof In=="string";if(!(Go||In instanceof Uint8Array||In instanceof Uint8ClampedArray||In instanceof Int8Array))throw new i1("Cannot pass non-string to std::string");var y0=Kr&&Go?f1(In):In.length,T0=x1(4+y0+1),O0=T0+4;if(l0[T0>>>2>>>0]=y0,Kr&&Go)Uy(In,C0,O0,y0+1);else if(Go)for(Go=0;Go<y0;++Go){var I0=In.charCodeAt(Go);if(255<I0)throw Qy(O0),new i1("String has UTF-16 code units that do not fit in 8 bits");C0[O0+Go>>>0]=I0}else for(Go=0;Go<y0;++Go)C0[O0+Go>>>0]=In[Go];return wn!==null&&wn.push(Qy,T0),T0},argPackAdvance:8,readValueFromPointer:ko,bb(wn){Qy(wn)}})},x:function(tr,Ir,Kr){if(Ir>>>=0,Kr>>>=0,Kr=Ry(Kr),Ir===2)var wn=b0,In=F0,Go=ry,y0=T0=>N0[T0>>>1>>>0];else Ir===4&&(wn=By,In=Xy,Go=Wy,y0=T0=>l0[T0>>>2>>>0]);Vy(tr>>>0,{name:Kr,fromWireType:T0=>{for(var O0=l0[T0>>>2>>>0],I0,H0=T0+4,py=0;py<=O0;++py){var u0=T0+4+py*Ir;(py==O0||y0(u0)==0)&&(H0=wn(H0,u0-H0),I0===void 0?I0=H0:(I0+=String.fromCharCode(0),I0+=H0),H0=u0+Ir)}return Qy(T0),I0},toWireType:(T0,O0)=>{if(typeof O0!="string")throw new i1(`Cannot pass non-string to C++ string type ${Kr}`);var I0=Go(O0),H0=x1(4+I0+Ir);return l0[H0>>>2>>>0]=I0/Ir,In(O0,H0+4,I0+Ir),T0!==null&&T0.push(Qy,H0),H0},argPackAdvance:8,readValueFromPointer:ko,bb(T0){Qy(T0)}})},L:function(tr,Ir){Ir=Ry(Ir>>>0),Vy(tr>>>0,{ob:!0,name:Ir,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ha:()=>1,u:function(tr,Ir,Kr){return Ir>>>=0,Kr>>>=0,tr=X0(tr>>>0),Ir=Ly(Ir,"emval::as"),F1(Ir,Kr,tr)},w:function(tr){return tr>>>=0,D1(()=>(tr=X0(tr),tr.then(Fy)))},n:function(tr,Ir,Kr,wn){return Kr>>>=0,wn>>>=0,tr=X1[tr>>>0],Ir=X0(Ir>>>0),tr(null,Ir,Kr,wn)},j:function(tr,Ir,Kr,wn,In){return Kr>>>=0,wn>>>=0,In>>>=0,tr=X1[tr>>>0],Ir=X0(Ir>>>0),Kr=N1(Kr),tr(Ir,Ir[Kr],wn,In)},b:$1,A:function(tr,Ir){return Ir>>>=0,tr=X0(tr>>>0),Ir=X0(Ir),tr==Ir},m:function(tr){return tr>>>=0,tr===0?Fy(l1()):(tr=N1(tr),Fy(l1()[tr]))},i:function(tr,Ir,Kr){Ir=dv(tr,Ir>>>0);var wn=Ir.shift();tr--;var In=`return function (obj, func, destructorsRef, args) {
`,Go=0,y0=[];Kr===0&&y0.push("obj");for(var T0=["retType"],O0=[wn],I0=0;I0<tr;++I0)y0.push("arg"+I0),T0.push("argType"+I0),O0.push(Ir[I0]),In+=`  var arg${I0} = argType${I0}.readValueFromPointer(args${Go?"+"+Go:""});
`,Go+=Ir[I0].argPackAdvance;return In+=`  var rv = ${Kr===1?"new func":"func.call"}(${y0.join(", ")});
`,wn.ob||(T0.push("emval_returnValue"),O0.push(F1),In+=`  return emval_returnValue(retType, destructorsRef, rv);
`),T0.push(In+`};
`),tr=Bv(T0)(...O0),Kr=`methodCaller<(${Ir.map(H0=>H0.name).join(", ")}) => ${wn.name}>`,M1(_1(Kr,tr))},r:function(tr,Ir){return Ir>>>=0,tr=X0(tr>>>0),Ir=X0(Ir),Fy(tr[Ir])},e:function(tr){tr>>>=0,9<tr&&(M0[tr+1]+=1)},t:function(){return Fy([])},l:function(tr){tr=X0(tr>>>0);for(var Ir=Array(tr.length),Kr=0;Kr<tr.length;Kr++)Ir[Kr]=tr[Kr];return Fy(Ir)},f:function(tr){return Fy(N1(tr>>>0))},k:function(){return Fy({})},h:function(tr){tr>>>=0;for(var Ir=X0(tr);Ir.length;){var Kr=Ir.pop();Ir.pop()(Kr)}$1(tr)},g:function(tr,Ir,Kr){Ir>>>=0,Kr>>>=0,tr=X0(tr>>>0),Ir=X0(Ir),Kr=X0(Kr),tr[Ir]=Kr},c:function(tr,Ir){return Ir>>>=0,tr=Ly(tr>>>0,"_emval_take_value"),tr=tr.readValueFromPointer(Ir),Fy(tr)},W:function(tr,Ir){tr=-9007199254740992>tr||9007199254740992<tr?NaN:Number(tr),Ir>>>=0,tr=new Date(1e3*tr),e0[Ir>>>2>>>0]=tr.getUTCSeconds(),e0[Ir+4>>>2>>>0]=tr.getUTCMinutes(),e0[Ir+8>>>2>>>0]=tr.getUTCHours(),e0[Ir+12>>>2>>>0]=tr.getUTCDate(),e0[Ir+16>>>2>>>0]=tr.getUTCMonth(),e0[Ir+20>>>2>>>0]=tr.getUTCFullYear()-1900,e0[Ir+24>>>2>>>0]=tr.getUTCDay(),e0[Ir+28>>>2>>>0]=(tr.getTime()-Date.UTC(tr.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},X:function(tr,Ir){tr=-9007199254740992>tr||9007199254740992<tr?NaN:Number(tr),Ir>>>=0,tr=new Date(1e3*tr),e0[Ir>>>2>>>0]=tr.getSeconds(),e0[Ir+4>>>2>>>0]=tr.getMinutes(),e0[Ir+8>>>2>>>0]=tr.getHours(),e0[Ir+12>>>2>>>0]=tr.getDate(),e0[Ir+16>>>2>>>0]=tr.getMonth(),e0[Ir+20>>>2>>>0]=tr.getFullYear()-1900,e0[Ir+24>>>2>>>0]=tr.getDay(),e0[Ir+28>>>2>>>0]=(Zy(tr.getFullYear())?cv:Q1)[tr.getMonth()]+tr.getDate()-1|0,e0[Ir+36>>>2>>>0]=-(60*tr.getTimezoneOffset());var Kr=new Date(tr.getFullYear(),6,1).getTimezoneOffset(),wn=new Date(tr.getFullYear(),0,1).getTimezoneOffset();e0[Ir+32>>>2>>>0]=(Kr!=wn&&tr.getTimezoneOffset()==Math.min(wn,Kr))|0},Y:function(tr){tr>>>=0;var Ir=new Date(e0[tr+20>>>2>>>0]+1900,e0[tr+16>>>2>>>0],e0[tr+12>>>2>>>0],e0[tr+8>>>2>>>0],e0[tr+4>>>2>>>0],e0[tr>>>2>>>0],0),Kr=e0[tr+32>>>2>>>0],wn=Ir.getTimezoneOffset(),In=new Date(Ir.getFullYear(),6,1).getTimezoneOffset(),Go=new Date(Ir.getFullYear(),0,1).getTimezoneOffset(),y0=Math.min(Go,In);return 0>Kr?e0[tr+32>>>2>>>0]=+(In!=Go&&y0==wn):0<Kr!=(y0==wn)&&(In=Math.max(Go,In),Ir.setTime(Ir.getTime()+6e4*((0<Kr?y0:In)-wn))),e0[tr+24>>>2>>>0]=Ir.getDay(),e0[tr+28>>>2>>>0]=(Zy(Ir.getFullYear())?cv:Q1)[Ir.getMonth()]+Ir.getDate()-1|0,e0[tr>>>2>>>0]=Ir.getSeconds(),e0[tr+4>>>2>>>0]=Ir.getMinutes(),e0[tr+8>>>2>>>0]=Ir.getHours(),e0[tr+12>>>2>>>0]=Ir.getDate(),e0[tr+16>>>2>>>0]=Ir.getMonth(),e0[tr+20>>>2>>>0]=Ir.getYear(),tr=Ir.getTime(),BigInt(isNaN(tr)?-1:tr/1e3)},U:function(){return-52},V:function(){},N:function(tr,Ir,Kr,wn){Kr>>>=0,wn>>>=0;var In=new Date().getFullYear(),Go=new Date(In,0,1),y0=new Date(In,6,1);In=Go.getTimezoneOffset();var T0=y0.getTimezoneOffset();l0[tr>>>0>>>2>>>0]=60*Math.max(In,T0),e0[Ir>>>0>>>2>>>0]=+(In!=T0),tr=O0=>O0.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],Go=tr(Go),y0=tr(y0),T0<In?(Uy(Go,C0,Kr,17),Uy(y0,C0,wn,17)):(Uy(Go,C0,wn,17),Uy(y0,C0,Kr,17))},v:()=>{gy("")},d:function(tr,Ir,Kr){return tr>>>=0,Ir=pv(Ir>>>0,Kr>>>0),Py[tr](...Ir)},I:function(tr,Ir,Kr){return tr>>>=0,Ir=pv(Ir>>>0,Kr>>>0),Py[tr](...Ir)},H:()=>Date.now(),O:function(){return 4294901760},q:()=>performance.now(),M:function(tr){tr>>>=0;var Ir=C0.length;if(4294901760<tr)return!1;for(var Kr=1;4>=Kr;Kr*=2){var wn=Ir*(1+.2/Kr);wn=Math.min(wn,tr+100663296);var In=Math;wn=Math.max(tr,wn);e:{In=(In.min.call(In,4294901760,wn+(65536-wn%65536)%65536)-o0.buffer.byteLength+65535)/65536;try{o0.grow(In),x0();var Go=1;break e}catch{}Go=void 0}if(Go)return!0}return!1},$:function(tr,Ir){tr>>>=0,Ir>>>=0;var Kr=0;return a1().forEach((wn,In)=>{var Go=Ir+Kr;for(In=l0[tr+4*In>>>2>>>0]=Go,Go=0;Go<wn.length;++Go)E0[In++>>>0]=wn.charCodeAt(Go);E0[In>>>0]=0,Kr+=wn.length+1}),0},aa:function(tr,Ir){tr>>>=0,Ir>>>=0;var Kr=a1();l0[tr>>>2>>>0]=Kr.length;var wn=0;return Kr.forEach(In=>wn+=In.length+1),l0[Ir>>>2>>>0]=wn,0},z:()=>52,F:function(){return 52},_:function(){return 70},E:function(tr,Ir,Kr,wn){Ir>>>=0,Kr>>>=0,wn>>>=0;for(var In=0,Go=0;Go<Kr;Go++){var y0=l0[Ir>>>2>>>0],T0=l0[Ir+4>>>2>>>0];Ir+=8;for(var O0=0;O0<T0;O0++){var I0=C0[y0+O0>>>0],H0=Lv[tr];I0===0||I0===10?((tr===1?Ro:Xo)(Gy(H0,0)),H0.length=0):H0.push(I0)}In+=T0}return l0[wn>>>2>>>0]=In,0},fa:Fv,p:function(tr,Ir,Kr,wn){return Fv(tr>>>0,Ir>>>0,Kr>>>0,wn>>>0)}},Z0=function(){function tr(Kr){return Z0=Kr.exports,Z0=dy(),Z0=tv(),o0=Z0.ja,x0(),G0.unshift(Z0.ka),ny--,ny==0&&xy&&(Kr=xy,xy=null,Kr()),Z0}var Ir={a:Cv};if(ny++,d.instantiateWasm)try{return d.instantiateWasm(Ir,tr)}catch(Kr){Xo(`Module.instantiateWasm callback failed with error: ${Kr}`),$t(Kr)}return g1(Ir,function(Kr){tr(Kr.instance)}).catch($t),{}}(),mv=tr=>(mv=Z0.la)(tr);d._OrtInit=(tr,Ir)=>(d._OrtInit=Z0.ma)(tr,Ir),d._OrtGetLastError=(tr,Ir)=>(d._OrtGetLastError=Z0.na)(tr,Ir),d._OrtCreateSessionOptions=(tr,Ir,Kr,wn,In,Go,y0,T0,O0,I0)=>(d._OrtCreateSessionOptions=Z0.oa)(tr,Ir,Kr,wn,In,Go,y0,T0,O0,I0),d._OrtAppendExecutionProvider=(tr,Ir)=>(d._OrtAppendExecutionProvider=Z0.pa)(tr,Ir),d._OrtAddFreeDimensionOverride=(tr,Ir,Kr)=>(d._OrtAddFreeDimensionOverride=Z0.qa)(tr,Ir,Kr),d._OrtAddSessionConfigEntry=(tr,Ir,Kr)=>(d._OrtAddSessionConfigEntry=Z0.ra)(tr,Ir,Kr),d._OrtReleaseSessionOptions=tr=>(d._OrtReleaseSessionOptions=Z0.sa)(tr),d._OrtCreateSession=(tr,Ir,Kr)=>(d._OrtCreateSession=Z0.ta)(tr,Ir,Kr),d._OrtReleaseSession=tr=>(d._OrtReleaseSession=Z0.ua)(tr),d._OrtGetInputOutputCount=(tr,Ir,Kr)=>(d._OrtGetInputOutputCount=Z0.va)(tr,Ir,Kr),d._OrtGetInputName=(tr,Ir)=>(d._OrtGetInputName=Z0.wa)(tr,Ir),d._OrtGetOutputName=(tr,Ir)=>(d._OrtGetOutputName=Z0.xa)(tr,Ir),d._OrtFree=tr=>(d._OrtFree=Z0.ya)(tr),d._OrtCreateTensor=(tr,Ir,Kr,wn,In,Go)=>(d._OrtCreateTensor=Z0.za)(tr,Ir,Kr,wn,In,Go),d._OrtGetTensorData=(tr,Ir,Kr,wn,In)=>(d._OrtGetTensorData=Z0.Aa)(tr,Ir,Kr,wn,In),d._OrtReleaseTensor=tr=>(d._OrtReleaseTensor=Z0.Ba)(tr),d._OrtCreateRunOptions=(tr,Ir,Kr,wn)=>(d._OrtCreateRunOptions=Z0.Ca)(tr,Ir,Kr,wn),d._OrtAddRunConfigEntry=(tr,Ir,Kr)=>(d._OrtAddRunConfigEntry=Z0.Da)(tr,Ir,Kr),d._OrtReleaseRunOptions=tr=>(d._OrtReleaseRunOptions=Z0.Ea)(tr),d._OrtCreateBinding=tr=>(d._OrtCreateBinding=Z0.Fa)(tr),d._OrtBindInput=(tr,Ir,Kr)=>(d._OrtBindInput=Z0.Ga)(tr,Ir,Kr),d._OrtBindOutput=(tr,Ir,Kr,wn)=>(d._OrtBindOutput=Z0.Ha)(tr,Ir,Kr,wn),d._OrtClearBoundOutputs=tr=>(d._OrtClearBoundOutputs=Z0.Ia)(tr),d._OrtReleaseBinding=tr=>(d._OrtReleaseBinding=Z0.Ja)(tr),d._OrtRunWithBinding=(tr,Ir,Kr,wn,In)=>(d._OrtRunWithBinding=Z0.Ka)(tr,Ir,Kr,wn,In),d._OrtRun=(tr,Ir,Kr,wn,In,Go,y0,T0)=>(d._OrtRun=Z0.La)(tr,Ir,Kr,wn,In,Go,y0,T0),d._OrtEndProfiling=tr=>(d._OrtEndProfiling=Z0.Ma)(tr),d._JsepOutput=(tr,Ir,Kr)=>(d._JsepOutput=Z0.Na)(tr,Ir,Kr),d._JsepGetNodeName=tr=>(d._JsepGetNodeName=Z0.Oa)(tr);var x1=d._malloc=tr=>(x1=d._malloc=Z0.Pa)(tr),Qy=d._free=tr=>(Qy=d._free=Z0.Qa)(tr),J1=tr=>(J1=Z0.Sa)(tr),H1=tr=>(H1=Z0.Ta)(tr),ev=()=>(ev=Z0.Ua)(),o1=tr=>(o1=Z0.Wa)(tr),gv=()=>(gv=Z0.Xa)(),c1=tr=>(c1=Z0.Ya)(tr),h1=()=>(h1=Z0.Za)();d.___start_em_js=837952,d.___stop_em_js=838113;function tv(){var tr=Z0;tr=Object.assign({},tr);var Ir=Kr=>wn=>Kr(wn)>>>0;return tr.la=Ir(tr.la),tr.Pa=Ir(tr.Pa),tr.Ta=Ir(tr.Ta),tr.Ua=(Kr=>()=>Kr()>>>0)(tr.Ua),tr}d.stackSave=()=>ev(),d.stackRestore=tr=>J1(tr),d.stackAlloc=tr=>H1(tr),d.UTF8ToString=_y,d.stringToUTF8=(tr,Ir,Kr)=>Uy(tr,C0,Ir,Kr),d.lengthBytesUTF8=f1;var k1;xy=function tr(){k1||Yr(),k1||(xy=tr)};function Yr(){if(!(0<ny)){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;){var tr=d.preRun.shift();A0.unshift(tr)}for(;0<A0.length;)A0.shift()(d);if(!(0<ny||k1||(k1=!0,d.calledRun=!0,s0))){for(;0<G0.length;)G0.shift()(d);for(et(d);0<q0.length;)q0.shift()(d)}}}return Yr(),h}})();typeof e=="object"&&typeof i=="object"?i.exports=a:typeof define=="function"&&define.amd&&define([],()=>a)}),Ba=Er(()=>{}),Da=Er(()=>{}),Ma={};kr(Ma,{cpus:()=>fc});var fc,Ua=j(()=>{fc=void 0}),Va=Er((e,i)=>{var a=(()=>{var c;var o=typeof document<"u"?(c=document.currentScript)==null?void 0:c.src:void 0;return typeof __filename<"u"&&(o||(o=__filename)),function(s={}){function d(){return Bo.buffer!=q0.buffer&&Oy(),q0}function et(){return Bo.buffer!=q0.buffer&&Oy(),ny}function $t(){return Bo.buffer!=q0.buffer&&Oy(),xy}function h(){return Bo.buffer!=q0.buffer&&Oy(),gy}function b(){return Bo.buffer!=q0.buffer&&Oy(),Ey}function g(){return Bo.buffer!=q0.buffer&&Oy(),Ty}function jt(){return Bo.buffer!=q0.buffer&&Oy(),ly}function Ht(){return Bo.buffer!=q0.buffer&&Oy(),Iy}var Kt=s,or,jr,Lr=new Promise((nr,Hr)=>{or=nr,jr=Hr});Kt.mountExternalData=(nr,Hr)=>{(Kt.Db||(Kt.Db=new Map)).set(nr,Hr)},Kt.unmountExternalData=()=>{delete Kt.Db};let ir=()=>{let nr=(Xr,Tn,Mo)=>(..._g)=>{let m0=h1,k0=Tn==null?void 0:Tn();_g=Xr(..._g);let B0=Tn==null?void 0:Tn();return k0!==B0&&(Xr=B0,Mo(k0),Tn=Mo=null),h1!=m0?In():_g},Hr=Xr=>async(...Tn)=>{var Mo;try{if(Kt.Cb)throw Error("Session already started");let _g=Kt.Cb={ec:Tn[0],errors:[]},m0=await Xr(...Tn);if(Kt.Cb!==_g)throw Error("Session mismatch");(Mo=Kt.Kb)==null||Mo.flush();let k0=_g.errors;if(0<k0.length){let B0=await Promise.all(k0);if(B0=B0.filter(P0=>P0),0<B0.length)throw Error(B0.join(`
`))}return m0}finally{Kt.Cb=null}};Kt._OrtCreateSession=nr(Kt._OrtCreateSession,()=>Kt._OrtCreateSession,Xr=>Kt._OrtCreateSession=Xr),Kt._OrtRun=Hr(nr(Kt._OrtRun,()=>Kt._OrtRun,Xr=>Kt._OrtRun=Xr)),Kt._OrtRunWithBinding=Hr(nr(Kt._OrtRunWithBinding,()=>Kt._OrtRunWithBinding,Xr=>Kt._OrtRunWithBinding=Xr)),Kt._OrtBindInput=nr(Kt._OrtBindInput,()=>Kt._OrtBindInput,Xr=>Kt._OrtBindInput=Xr),ir=void 0};Kt.jsepInit=(nr,Hr)=>{if(ir==null||ir(),nr==="webgpu"){[Kt.Kb,Kt.Wb,Kt.$b,Kt.Lb,Kt.Zb,Kt.ob,Kt.ac,Kt.cc,Kt.Xb,Kt.Yb,Kt.bc]=Hr;let Xr=Kt.Kb;Kt.jsepRegisterBuffer=(Tn,Mo,_g,m0)=>Xr.registerBuffer(Tn,Mo,_g,m0),Kt.jsepGetBuffer=Tn=>Xr.getBuffer(Tn),Kt.jsepCreateDownloader=(Tn,Mo,_g)=>Xr.createDownloader(Tn,Mo,_g),Kt.jsepOnReleaseSession=Tn=>{Xr.onReleaseSession(Tn)},Kt.jsepOnRunStart=Tn=>Xr.onRunStart(Tn)}};var qr=Object.assign({},Kt),vn="./this.program",xn=(nr,Hr)=>{throw Hr},No=typeof window=="object",Ro=typeof importScripts=="function",Xo=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",o0=Kt.ENVIRONMENT_IS_PTHREAD||!1,s0="";function h0(nr){return Kt.locateFile?Kt.locateFile(nr,s0):s0+nr}var E0,C0,D0;if(Xo){var N0=(Mi(),sr(Di)),e0=(Wi(),sr(Ui));s0=Ro?e0.dirname(s0)+"/":__dirname+"/",E0=(nr,Hr)=>(nr=Uy(nr)?new URL(nr):e0.normalize(nr),N0.readFileSync(nr,Hr?void 0:"utf8")),D0=nr=>(nr=E0(nr,!0),nr.buffer||(nr=new Uint8Array(nr)),nr),C0=(nr,Hr,Xr,Tn=!0)=>{nr=Uy(nr)?new URL(nr):e0.normalize(nr),N0.readFile(nr,Tn?void 0:"utf8",(Mo,_g)=>{Mo?Xr(Mo):Hr(Tn?_g.buffer:_g)})},!Kt.thisProgram&&1<process.argv.length&&(vn=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),xn=(nr,Hr)=>{throw process.exitCode=nr,Hr},global.Worker=Ba().Worker}else(No||Ro)&&(Ro?s0=self.location.href:typeof document<"u"&&document.currentScript&&(s0=document.currentScript.src),typeof o<"u"&&o&&(s0=o),s0.startsWith("blob:")?s0="":s0=s0.substr(0,s0.replace(/[?#].*/,"").lastIndexOf("/")+1),Xo||(E0=nr=>{var Hr=new XMLHttpRequest;return Hr.open("GET",nr,!1),Hr.send(null),Hr.responseText},Ro&&(D0=nr=>{var Hr=new XMLHttpRequest;return Hr.open("GET",nr,!1),Hr.responseType="arraybuffer",Hr.send(null),new Uint8Array(Hr.response)}),C0=(nr,Hr,Xr)=>{var Tn=new XMLHttpRequest;Tn.open("GET",nr,!0),Tn.responseType="arraybuffer",Tn.onload=()=>{Tn.status==200||Tn.status==0&&Tn.response?Hr(Tn.response):Xr()},Tn.onerror=Xr,Tn.send(null)}));Xo&&typeof performance>"u"&&(global.performance=Da().performance);var l0=console.log.bind(console),Uo=console.error.bind(console);Xo&&(l0=(...nr)=>N0.writeSync(1,nr.join(" ")+`
`),Uo=(...nr)=>N0.writeSync(2,nr.join(" ")+`
`));var c0=l0,$0=Uo;Object.assign(Kt,qr),qr=null;var Bo,x0,A0=!1,G0,q0,ny,xy,gy,Ey,Ty,ly,ty,ky,Iy;function Oy(){var nr=Bo.buffer;Kt.HEAP8=q0=new Int8Array(nr),Kt.HEAP16=xy=new Int16Array(nr),Kt.HEAPU8=ny=new Uint8Array(nr),Kt.HEAPU16=gy=new Uint16Array(nr),Kt.HEAP32=Ey=new Int32Array(nr),Kt.HEAPU32=Ty=new Uint32Array(nr),Kt.HEAPF32=ly=new Float32Array(nr),Kt.HEAPF64=Iy=new Float64Array(nr),Kt.HEAP64=ty=new BigInt64Array(nr),Kt.HEAPU64=ky=new BigUint64Array(nr)}var g1=16777216;if(o0)Bo=Kt.wasmMemory;else if(Kt.wasmMemory)Bo=Kt.wasmMemory;else if(Bo=new WebAssembly.Memory({initial:g1/65536,maximum:65536,shared:!0}),!(Bo.buffer instanceof SharedArrayBuffer))throw $0("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),Xo&&$0("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Oy(),g1=Bo.buffer.byteLength;var Py=[],r1=[],xv=[],Yy=0,zy=null;function Gy(){if(Yy--,Yy==0&&zy){var nr=zy;zy=null,nr()}}function _y(nr){throw nr="Aborted("+nr+")",$0(nr),A0=!0,G0=1,nr=new WebAssembly.RuntimeError(nr+". Build with -sASSERTIONS for more info."),jr(nr),nr}var f1=nr=>nr.startsWith("data:application/octet-stream;base64,"),Uy=nr=>nr.startsWith("file://"),y1;y1="ort-wasm-simd-threaded.wasm",f1(y1)||(y1=h0(y1));function Ry(nr){if(D0)return D0(nr);throw"both async and sync fetching of the wasm failed"}function v1(nr){if(No||Ro){if(typeof fetch=="function"&&!Uy(nr))return fetch(nr,{credentials:"same-origin"}).then(Hr=>{if(!Hr.ok)throw`failed to load wasm binary file at '${nr}'`;return Hr.arrayBuffer()}).catch(()=>Ry(nr));if(C0)return new Promise((Hr,Xr)=>{C0(nr,Tn=>Hr(new Uint8Array(Tn)),Xr)})}return Promise.resolve().then(()=>Ry(nr))}function my(nr,Hr,Xr){return v1(nr).then(Tn=>WebAssembly.instantiate(Tn,Hr)).then(Xr,Tn=>{$0(`failed to asynchronously prepare wasm: ${Tn}`),_y(Tn)})}function i1(nr,Hr){var Xr=y1;return typeof WebAssembly.instantiateStreaming!="function"||f1(Xr)||Uy(Xr)||Xo||typeof fetch!="function"?my(Xr,nr,Hr):fetch(Xr,{credentials:"same-origin"}).then(Tn=>WebAssembly.instantiateStreaming(Tn,nr).then(Hr,function(Mo){return $0(`wasm streaming compile failed: ${Mo}`),$0("falling back to ArrayBuffer instantiation"),my(Xr,nr,Hr)}))}var Y0={826468:(nr,Hr,Xr,Tn)=>{if(typeof Kt>"u"||!Kt.Db)return 1;if(nr=d0(nr>>>0),nr.startsWith("./")&&(nr=nr.substring(2)),nr=Kt.Db.get(nr),!nr)return 2;if(Hr>>>=0,Xr>>>=0,Tn>>>=0,Hr+Xr>nr.byteLength)return 3;try{return et().set(nr.subarray(Hr,Hr+Xr),Tn>>>0),0}catch{return 4}},826969:()=>{Kt.Xb()},827e3:()=>{Kt.Yb()},827029:()=>{Kt.bc()},827054:nr=>Kt.Wb(nr),827087:nr=>Kt.$b(nr),827119:(nr,Hr,Xr)=>{Kt.Lb(nr,Hr,Xr,!0)},827158:(nr,Hr,Xr)=>{Kt.Lb(nr,Hr,Xr)},827191:nr=>{Kt.ob("Abs",nr,void 0)},827242:nr=>{Kt.ob("Neg",nr,void 0)},827293:nr=>{Kt.ob("Floor",nr,void 0)},827346:nr=>{Kt.ob("Ceil",nr,void 0)},827398:nr=>{Kt.ob("Reciprocal",nr,void 0)},827456:nr=>{Kt.ob("Sqrt",nr,void 0)},827508:nr=>{Kt.ob("Exp",nr,void 0)},827559:nr=>{Kt.ob("Erf",nr,void 0)},827610:nr=>{Kt.ob("Sigmoid",nr,void 0)},827665:(nr,Hr,Xr)=>{Kt.ob("HardSigmoid",nr,{alpha:Hr,beta:Xr})},827744:nr=>{Kt.ob("Log",nr,void 0)},827795:nr=>{Kt.ob("Sin",nr,void 0)},827846:nr=>{Kt.ob("Cos",nr,void 0)},827897:nr=>{Kt.ob("Tan",nr,void 0)},827948:nr=>{Kt.ob("Asin",nr,void 0)},828e3:nr=>{Kt.ob("Acos",nr,void 0)},828052:nr=>{Kt.ob("Atan",nr,void 0)},828104:nr=>{Kt.ob("Sinh",nr,void 0)},828156:nr=>{Kt.ob("Cosh",nr,void 0)},828208:nr=>{Kt.ob("Asinh",nr,void 0)},828261:nr=>{Kt.ob("Acosh",nr,void 0)},828314:nr=>{Kt.ob("Atanh",nr,void 0)},828367:nr=>{Kt.ob("Tanh",nr,void 0)},828419:nr=>{Kt.ob("Not",nr,void 0)},828470:(nr,Hr,Xr)=>{Kt.ob("Clip",nr,{min:Hr,max:Xr})},828539:nr=>{Kt.ob("Clip",nr,void 0)},828591:(nr,Hr)=>{Kt.ob("Elu",nr,{alpha:Hr})},828649:nr=>{Kt.ob("Relu",nr,void 0)},828701:(nr,Hr)=>{Kt.ob("LeakyRelu",nr,{alpha:Hr})},828765:(nr,Hr)=>{Kt.ob("ThresholdedRelu",nr,{alpha:Hr})},828835:(nr,Hr)=>{Kt.ob("Cast",nr,{to:Hr})},828893:nr=>{Kt.ob("Add",nr,void 0)},828944:nr=>{Kt.ob("Sub",nr,void 0)},828995:nr=>{Kt.ob("Mul",nr,void 0)},829046:nr=>{Kt.ob("Div",nr,void 0)},829097:nr=>{Kt.ob("Pow",nr,void 0)},829148:nr=>{Kt.ob("Equal",nr,void 0)},829201:nr=>{Kt.ob("Greater",nr,void 0)},829256:nr=>{Kt.ob("GreaterOrEqual",nr,void 0)},829318:nr=>{Kt.ob("Less",nr,void 0)},829370:nr=>{Kt.ob("LessOrEqual",nr,void 0)},829429:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("ReduceMean",nr,{keepDims:!!Hr,noopWithEmptyAxes:!!Xr,axes:Tn?Array.from(b().subarray(Tn>>>0,Mo>>>0)):[]})},829588:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("ReduceMax",nr,{keepDims:!!Hr,noopWithEmptyAxes:!!Xr,axes:Tn?Array.from(b().subarray(Tn>>>0,Mo>>>0)):[]})},829746:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("ReduceMin",nr,{keepDims:!!Hr,noopWithEmptyAxes:!!Xr,axes:Tn?Array.from(b().subarray(Tn>>>0,Mo>>>0)):[]})},829904:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("ReduceProd",nr,{keepDims:!!Hr,noopWithEmptyAxes:!!Xr,axes:Tn?Array.from(b().subarray(Tn>>>0,Mo>>>0)):[]})},830063:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("ReduceSum",nr,{keepDims:!!Hr,noopWithEmptyAxes:!!Xr,axes:Tn?Array.from(b().subarray(Tn>>>0,Mo>>>0)):[]})},830221:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("ReduceL1",nr,{keepDims:!!Hr,noopWithEmptyAxes:!!Xr,axes:Tn?Array.from(b().subarray(Tn>>>0,Mo>>>0)):[]})},830378:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("ReduceL2",nr,{keepDims:!!Hr,noopWithEmptyAxes:!!Xr,axes:Tn?Array.from(b().subarray(Tn>>>0,Mo>>>0)):[]})},830535:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("ReduceLogSum",nr,{keepDims:!!Hr,noopWithEmptyAxes:!!Xr,axes:Tn?Array.from(b().subarray(Tn>>>0,Mo>>>0)):[]})},830696:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("ReduceSumSquare",nr,{keepDims:!!Hr,noopWithEmptyAxes:!!Xr,axes:Tn?Array.from(b().subarray(Tn>>>0,Mo>>>0)):[]})},830860:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("ReduceLogSumExp",nr,{keepDims:!!Hr,noopWithEmptyAxes:!!Xr,axes:Tn?Array.from(b().subarray(Tn>>>0,Mo>>>0)):[]})},831024:nr=>{Kt.ob("Where",nr,void 0)},831077:(nr,Hr,Xr)=>{Kt.ob("Transpose",nr,{perm:Hr?Array.from(b().subarray(Hr>>>0,Xr>>>0)):[]})},831185:(nr,Hr,Xr,Tn)=>{Kt.ob("DepthToSpace",nr,{blocksize:Hr,mode:d0(Xr),format:Tn?"NHWC":"NCHW"})},831318:(nr,Hr,Xr,Tn)=>{Kt.ob("DepthToSpace",nr,{blocksize:Hr,mode:d0(Xr),format:Tn?"NHWC":"NCHW"})},831451:(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0,P0,K0,Sy,$y,f0,iy)=>{Kt.ob("ConvTranspose",nr,{format:B0?"NHWC":"NCHW",autoPad:Hr,dilations:[Xr],group:Tn,kernelShape:[Mo],pads:[_g,m0],strides:[k0],wIsConst:()=>!!d()[P0>>>0],outputPadding:K0?Array.from(b().subarray(K0>>>0,Sy>>>0)):[],outputShape:$y?Array.from(b().subarray($y>>>0,f0>>>0)):[],activation:d0(iy)})},831852:(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0,P0,K0,Sy,$y,f0)=>{Kt.ob("ConvTranspose",nr,{format:k0?"NHWC":"NCHW",autoPad:Hr,dilations:Array.from(b().subarray(Xr>>>0,(Xr>>>0)+2>>>0)),group:Tn,kernelShape:Array.from(b().subarray(Mo>>>0,(Mo>>>0)+2>>>0)),pads:Array.from(b().subarray(_g>>>0,(_g>>>0)+4>>>0)),strides:Array.from(b().subarray(m0>>>0,(m0>>>0)+2>>>0)),wIsConst:()=>!!d()[B0>>>0],outputPadding:P0?Array.from(b().subarray(P0>>>0,K0>>>0)):[],outputShape:Sy?Array.from(b().subarray(Sy>>>0,$y>>>0)):[],activation:d0(f0)})},832417:(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0,P0,K0,Sy,$y,f0,iy)=>{Kt.ob("ConvTranspose",nr,{format:B0?"NHWC":"NCHW",autoPad:Hr,dilations:[Xr],group:Tn,kernelShape:[Mo],pads:[_g,m0],strides:[k0],wIsConst:()=>!!d()[P0>>>0],outputPadding:K0?Array.from(b().subarray(K0>>>0,Sy>>>0)):[],outputShape:$y?Array.from(b().subarray($y>>>0,f0>>>0)):[],activation:d0(iy)})},832818:(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0,P0,K0,Sy,$y,f0)=>{Kt.ob("ConvTranspose",nr,{format:k0?"NHWC":"NCHW",autoPad:Hr,dilations:Array.from(b().subarray(Xr>>>0,(Xr>>>0)+2>>>0)),group:Tn,kernelShape:Array.from(b().subarray(Mo>>>0,(Mo>>>0)+2>>>0)),pads:Array.from(b().subarray(_g>>>0,(_g>>>0)+4>>>0)),strides:Array.from(b().subarray(m0>>>0,(m0>>>0)+2>>>0)),wIsConst:()=>!!d()[B0>>>0],outputPadding:P0?Array.from(b().subarray(P0>>>0,K0>>>0)):[],outputShape:Sy?Array.from(b().subarray(Sy>>>0,$y>>>0)):[],activation:d0(f0)})},833383:(nr,Hr)=>{Kt.ob("GlobalAveragePool",nr,{format:Hr?"NHWC":"NCHW"})},833474:(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0,P0,K0,Sy,$y,f0,iy,vy)=>{Kt.ob("AveragePool",nr,{format:vy?"NHWC":"NCHW",auto_pad:Hr,ceil_mode:Xr,count_include_pad:Tn,storage_order:Mo,dilations:[_g,m0],kernel_shape:[k0,B0],pads:[P0,K0,Sy,$y],strides:[f0,iy]})},833758:(nr,Hr)=>{Kt.ob("GlobalAveragePool",nr,{format:Hr?"NHWC":"NCHW"})},833849:(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0,P0,K0,Sy,$y,f0,iy,vy)=>{Kt.ob("AveragePool",nr,{format:vy?"NHWC":"NCHW",auto_pad:Hr,ceil_mode:Xr,count_include_pad:Tn,storage_order:Mo,dilations:[_g,m0],kernel_shape:[k0,B0],pads:[P0,K0,Sy,$y],strides:[f0,iy]})},834133:(nr,Hr)=>{Kt.ob("GlobalMaxPool",nr,{format:Hr?"NHWC":"NCHW"})},834220:(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0,P0,K0,Sy,$y,f0,iy,vy)=>{Kt.ob("MaxPool",nr,{format:vy?"NHWC":"NCHW",auto_pad:Hr,ceil_mode:Xr,count_include_pad:Tn,storage_order:Mo,dilations:[_g,m0],kernel_shape:[k0,B0],pads:[P0,K0,Sy,$y],strides:[f0,iy]})},834500:(nr,Hr)=>{Kt.ob("GlobalMaxPool",nr,{format:Hr?"NHWC":"NCHW"})},834587:(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0,P0,K0,Sy,$y,f0,iy,vy)=>{Kt.ob("MaxPool",nr,{format:vy?"NHWC":"NCHW",auto_pad:Hr,ceil_mode:Xr,count_include_pad:Tn,storage_order:Mo,dilations:[_g,m0],kernel_shape:[k0,B0],pads:[P0,K0,Sy,$y],strides:[f0,iy]})},834867:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("Gemm",nr,{alpha:Hr,beta:Xr,transA:Tn,transB:Mo})},834971:nr=>{Kt.ob("MatMul",nr,void 0)},835025:(nr,Hr,Xr,Tn)=>{Kt.ob("ArgMax",nr,{keepDims:!!Hr,selectLastIndex:!!Xr,axis:Tn})},835133:(nr,Hr,Xr,Tn)=>{Kt.ob("ArgMin",nr,{keepDims:!!Hr,selectLastIndex:!!Xr,axis:Tn})},835241:(nr,Hr)=>{Kt.ob("Softmax",nr,{axis:Hr})},835304:(nr,Hr)=>{Kt.ob("Concat",nr,{axis:Hr})},835364:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("Split",nr,{axis:Hr,numOutputs:Xr,splitSizes:Tn?Array.from(b().subarray(Tn>>>0,Mo>>>0)):[]})},835504:nr=>{Kt.ob("Expand",nr,void 0)},835558:(nr,Hr)=>{Kt.ob("Gather",nr,{axis:Number(Hr)})},835629:(nr,Hr)=>{Kt.ob("GatherElements",nr,{axis:Number(Hr)})},835708:(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0,P0,K0)=>{Kt.ob("Resize",nr,{antialias:Hr,axes:Xr?Array.from(b().subarray(Xr>>>0,Tn>>>0)):[],coordinateTransformMode:d0(Mo),cubicCoeffA:_g,excludeOutside:m0,extrapolationValue:k0,keepAspectRatioPolicy:d0(B0),mode:d0(P0),nearestMode:d0(K0)})},836054:(nr,Hr,Xr,Tn,Mo,_g,m0)=>{Kt.ob("Slice",nr,{starts:Hr?Array.from(b().subarray(Hr>>>0,Xr>>>0)):[],ends:Tn?Array.from(b().subarray(Tn>>>0,Mo>>>0)):[],axes:_g?Array.from(b().subarray(_g>>>0,m0>>>0)):[]})},836270:nr=>{Kt.ob("Tile",nr,void 0)},836322:(nr,Hr,Xr,Tn)=>{Kt.ob("LayerNormalization",nr,{axis:Hr,epsilon:Xr,simplified:!!Tn})},836433:(nr,Hr,Xr)=>{Kt.ob("InstanceNormalization",nr,{epsilon:Hr,format:Xr?"NHWC":"NCHW"})},836547:(nr,Hr,Xr)=>{Kt.ob("InstanceNormalization",nr,{epsilon:Hr,format:Xr?"NHWC":"NCHW"})},836661:nr=>{Kt.ob("Range",nr,void 0)},836714:(nr,Hr)=>{Kt.ob("Einsum",nr,{equation:d0(Hr)})},836795:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("Pad",nr,{mode:Hr,value:Xr,pads:Tn?Array.from(b().subarray(Tn>>>0,Mo>>>0)):[]})},836922:(nr,Hr,Xr,Tn,Mo,_g)=>{Kt.ob("BatchNormalization",nr,{epsilon:Hr,momentum:Xr,spatial:!!Mo,trainingMode:!!Tn,format:_g?"NHWC":"NCHW"})},837091:(nr,Hr,Xr,Tn,Mo,_g)=>{Kt.ob("BatchNormalization",nr,{epsilon:Hr,momentum:Xr,spatial:!!Mo,trainingMode:!!Tn,format:_g?"NHWC":"NCHW"})},837260:(nr,Hr,Xr)=>{Kt.ob("CumSum",nr,{exclusive:Number(Hr),reverse:Number(Xr)})},837357:(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0)=>{Kt.ob("Attention",nr,{numHeads:Hr,isUnidirectional:Xr,maskFilterValue:Tn,scale:Mo,doRotary:_g,qkvHiddenSizes:m0?Array.from(b().subarray(Number(k0)>>>0,Number(k0)+m0>>>0)):[],pastPresentShareBuffer:!!B0})},837629:nr=>{Kt.ob("BiasAdd",nr,void 0)},837684:nr=>{Kt.ob("BiasSplitGelu",nr,void 0)},837745:nr=>{Kt.ob("FastGelu",nr,void 0)},837801:(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0,P0,K0,Sy,$y)=>{Kt.ob("Conv",nr,{format:B0?"NHWC":"NCHW",auto_pad:Hr,dilations:[Xr],group:Tn,kernel_shape:[Mo],pads:_g?Array.from(b().subarray(_g>>>0,m0>>>0)):[],strides:[k0],w_is_const:()=>!!d()[P0>>>0],activation:d0(K0),activation_params:Sy?Array.from(jt().subarray(Sy>>>0,$y>>>0)):[]})},838171:(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0,P0,K0,Sy,$y,f0,iy,vy)=>{Kt.ob("Conv",nr,{format:Sy?"NHWC":"NCHW",auto_pad:Hr,dilations:[Xr,Tn],group:Mo,kernel_shape:[_g,m0],pads:k0?Array.from(b().subarray(k0>>>0,B0>>>0)):[],strides:[P0,K0],w_is_const:()=>!!d()[$y>>>0],activation:d0(f0),activation_params:iy?Array.from(jt().subarray(iy>>>0,vy>>>0)):[]})},838562:nr=>{Kt.ob("Gelu",nr,void 0)},838614:(nr,Hr,Xr,Tn,Mo,_g)=>{Kt.ob("MatMulNBits",nr,{k:Hr,n:Xr,accuracyLevel:Tn,bits:Mo,blockSize:_g})},838741:(nr,Hr,Xr,Tn,Mo,_g)=>{Kt.ob("MultiHeadAttention",nr,{numHeads:Hr,isUnidirectional:Xr,maskFilterValue:Tn,scale:Mo,doRotary:_g})},838900:(nr,Hr,Xr,Tn,Mo)=>{Kt.ob("RotaryEmbedding",nr,{interleaved:!!Hr,numHeads:Xr,rotaryEmbeddingDim:Tn,scale:Mo})},839039:(nr,Hr,Xr)=>{Kt.ob("SkipLayerNormalization",nr,{epsilon:Hr,simplified:!!Xr})},839141:(nr,Hr,Xr)=>{Kt.ob("SkipLayerNormalization",nr,{epsilon:Hr,simplified:!!Xr})},839243:(nr,Hr,Xr,Tn)=>{Kt.ob("LayerNormalization",nr,{axis:Hr,epsilon:Xr,simplified:!!Tn})},839354:nr=>{Kt.ac(nr)},839388:(nr,Hr)=>Kt.cc(nr,Hr,Kt.Cb.ec,Kt.Cb.errors)};function Vy(nr){this.name="ExitStatus",this.message=`Program terminated with exit(${nr})`,this.status=nr}var b1=nr=>{nr.terminate(),nr.onmessage=()=>{}},E1=nr=>{b0.xb.length==0&&(i0(),b0.Mb(b0.xb[0]));var Hr=b0.xb.pop();if(!Hr)return 6;b0.yb.push(Hr),b0.ub[nr.wb]=Hr,Hr.wb=nr.wb;var Xr={cmd:"run",start_routine:nr.fc,arg:nr.Rb,pthread_ptr:nr.wb};return Xo&&Hr.unref(),Hr.postMessage(Xr,nr.mc),0},M0=0,$1=nr=>{var Hr=Z$();return nr=nr(),Wv(Hr),nr},X0=(nr,Hr,...Xr)=>$1(()=>{for(var Tn=2*Xr.length,Mo=Pv(8*Tn),_g=Mo>>>3,m0=0;m0<Xr.length;m0++){var k0=Xr[m0];typeof k0=="bigint"?(ty[_g+2*m0]=1n,ty[_g+2*m0+1]=k0):(ty[_g+2*m0]=0n,Ht()[_g+2*m0+1>>>0]=k0)}return _$(nr,0,Tn,Mo,Hr)});function Fy(nr){var Hr;if(o0)return X0(0,1,nr);G0=nr,0<M0||(b0.hc(),(Hr=Kt.onExit)==null||Hr.call(Kt,nr),A0=!0),xn(nr,new Vy(nr))}var ko=nr=>{if(G0=nr,o0)throw ry(nr),"unwind";Fy(nr)};function r0(){for(var nr=Kt.numThreads;nr--;)i0();Py.unshift(()=>{Yy++,g0(()=>Gy())})}function i0(){var nr=h0("ort-wasm-simd-threaded.worker.js");nr=new Worker(nr),b0.xb.push(nr)}function g0(nr){o0?nr():Promise.all(b0.xb.map(b0.Mb)).then(nr)}var b0={xb:[],yb:[],Qb:[],ub:{},Gb(){o0?(b0.receiveObjectTransfer=b0.dc,b0.threadInitTLS=b0.Pb,b0.setExitStatus=b0.Ob):r0()},Ob:nr=>G0=nr,pc:["$terminateWorker"],hc:()=>{for(var nr of b0.yb)b1(nr);for(nr of b0.xb)b1(nr);b0.xb=[],b0.yb=[],b0.ub=[]},Nb:nr=>{var Hr=nr.wb;delete b0.ub[Hr],b0.xb.push(nr),b0.yb.splice(b0.yb.indexOf(nr),1),nr.wb=0,V$(Hr)},dc(){},Pb(){b0.Qb.forEach(nr=>nr())},Mb:nr=>new Promise(Hr=>{nr.onmessage=_g=>{_g=_g.data;var m0=_g.cmd;if(_g.targetThread&&_g.targetThread!=Dy()){var k0=b0.ub[_g.targetThread];k0?k0.postMessage(_g,_g.transferList):$0(`Internal error! Worker sent a message "${m0}" to target pthread ${_g.targetThread}, but that thread no longer exists!`)}else m0==="checkMailbox"?Qy():m0==="spawnThread"?E1(_g):m0==="cleanupThread"?b0.Nb(b0.ub[_g.thread]):m0==="killThread"?(_g=_g.thread,m0=b0.ub[_g],delete b0.ub[_g],b1(m0),V$(_g),b0.yb.splice(b0.yb.indexOf(m0),1),m0.wb=0):m0==="cancelThread"?b0.ub[_g.thread].postMessage({cmd:"cancel"}):m0==="loaded"?(nr.loaded=!0,Xo&&!nr.wb&&nr.unref(),Hr(nr)):m0==="alert"?alert(`Thread ${_g.threadId}: ${_g.text}`):_g.target==="setimmediate"?nr.postMessage(_g):m0==="callHandler"?Kt[_g.handler](..._g.args):m0&&$0(`worker sent an unknown command ${m0}`)},nr.onerror=_g=>{throw $0(`worker sent an error! ${_g.filename}:${_g.lineno}: ${_g.message}`),_g},Xo&&(nr.on("message",_g=>nr.onmessage({data:_g})),nr.on("error",_g=>nr.onerror(_g)));var Xr=[],Tn=["onExit"],Mo;for(Mo of Tn)Kt.hasOwnProperty(Mo)&&Xr.push(Mo);nr.postMessage({cmd:"load",handlers:Xr,urlOrBlob:Kt.mainScriptUrlOrBlob||o,wasmMemory:Bo,wasmModule:x0})})};Kt.PThread=b0;var F0=nr=>{for(;0<nr.length;)nr.shift()(Kt)};Kt.establishStackSpace=()=>{var nr=Dy(),Hr=g()[nr+52>>>2>>>0];nr=g()[nr+56>>>2>>>0],G$(Hr,Hr-nr),Wv(Hr)};function ry(nr){if(o0)return X0(1,0,nr);ko(nr)}Kt.invokeEntryPoint=(nr,Hr)=>{M0=0,nr=q$(nr,Hr),0<M0?b0.Ob(nr):H$(nr)};class By{constructor(Hr){this.Ib=Hr-24}Gb(Hr,Xr){g()[this.Ib+16>>>2>>>0]=0,g()[this.Ib+4>>>2>>>0]=Hr,g()[this.Ib+8>>>2>>>0]=Xr}}var Xy=0;function Wy(nr,Hr,Xr,Tn){return o0?X0(2,1,nr,Hr,Xr,Tn):Ly(nr,Hr,Xr,Tn)}function Ly(nr,Hr,Xr,Tn){if(nr>>>=0,Hr>>>=0,Xr>>>=0,Tn>>>=0,typeof SharedArrayBuffer>"u")return $0("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Mo=[];return o0&&Mo.length===0?Wy(nr,Hr,Xr,Tn):(nr={fc:Xr,wb:nr,Rb:Tn,mc:Mo},o0?(nr.oc="spawnThread",postMessage(nr,Mo),0):E1(nr))}var F1=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,n1=(nr,Hr,Xr)=>{Hr>>>=0;var Tn=Hr+Xr;for(Xr=Hr;nr[Xr]&&!(Xr>=Tn);)++Xr;if(16<Xr-Hr&&nr.buffer&&F1)return F1.decode(nr.buffer instanceof SharedArrayBuffer?nr.slice(Hr,Xr):nr.subarray(Hr,Xr));for(Tn="";Hr<Xr;){var Mo=nr[Hr++];if(Mo&128){var _g=nr[Hr++]&63;if((Mo&224)==192)Tn+=String.fromCharCode((Mo&31)<<6|_g);else{var m0=nr[Hr++]&63;Mo=(Mo&240)==224?(Mo&15)<<12|_g<<6|m0:(Mo&7)<<18|_g<<12|m0<<6|nr[Hr++]&63,65536>Mo?Tn+=String.fromCharCode(Mo):(Mo-=65536,Tn+=String.fromCharCode(55296|Mo>>10,56320|Mo&1023))}}else Tn+=String.fromCharCode(Mo)}return Tn},d0=(nr,Hr)=>(nr>>>=0)?n1(et(),nr,Hr):"";function dy(nr,Hr,Xr){return o0?X0(3,1,nr,Hr,Xr):0}function cy(nr,Hr){if(o0)return X0(4,1,nr,Hr)}var My=nr=>{for(var Hr=0,Xr=0;Xr<nr.length;++Xr){var Tn=nr.charCodeAt(Xr);127>=Tn?Hr++:2047>=Tn?Hr+=2:55296<=Tn&&57343>=Tn?(Hr+=4,++Xr):Hr+=3}return Hr},W1=(nr,Hr,Xr,Tn)=>{if(Xr>>>=0,!(0<Tn))return 0;var Mo=Xr;Tn=Xr+Tn-1;for(var _g=0;_g<nr.length;++_g){var m0=nr.charCodeAt(_g);if(55296<=m0&&57343>=m0){var k0=nr.charCodeAt(++_g);m0=65536+((m0&1023)<<10)|k0&1023}if(127>=m0){if(Xr>=Tn)break;Hr[Xr++>>>0]=m0}else{if(2047>=m0){if(Xr+1>=Tn)break;Hr[Xr++>>>0]=192|m0>>6}else{if(65535>=m0){if(Xr+2>=Tn)break;Hr[Xr++>>>0]=224|m0>>12}else{if(Xr+3>=Tn)break;Hr[Xr++>>>0]=240|m0>>18,Hr[Xr++>>>0]=128|m0>>12&63}Hr[Xr++>>>0]=128|m0>>6&63}Hr[Xr++>>>0]=128|m0&63}}return Hr[Xr>>>0]=0,Xr-Mo},w1=(nr,Hr,Xr)=>W1(nr,et(),Hr,Xr);function Tv(nr,Hr){if(o0)return X0(5,1,nr,Hr)}function Sv(nr,Hr,Xr){if(o0)return X0(6,1,nr,Hr,Xr)}function jv(nr,Hr,Xr){return o0?X0(7,1,nr,Hr,Xr):0}function uv(nr,Hr){if(o0)return X0(8,1,nr,Hr)}function Ev(nr,Hr,Xr){if(o0)return X0(9,1,nr,Hr,Xr)}function kv(nr,Hr,Xr,Tn){if(o0)return X0(10,1,nr,Hr,Xr,Tn)}function lv(nr,Hr,Xr,Tn){if(o0)return X0(11,1,nr,Hr,Xr,Tn)}function Iv(nr,Hr,Xr,Tn){if(o0)return X0(12,1,nr,Hr,Xr,Tn)}function D1(nr){if(o0)return X0(13,1,nr)}function X1(nr,Hr){if(o0)return X0(14,1,nr,Hr)}function zv(nr,Hr,Xr){if(o0)return X0(15,1,nr,Hr,Xr)}var N1,l1=nr=>{for(var Hr="";et()[nr>>>0];)Hr+=N1[et()[nr++>>>0]];return Hr},M1={},dv={},_1;function Bv(nr,Hr,Xr={}){var Tn=Hr.name;if(!nr)throw new _1(`type "${Tn}" must have a positive integer typeid pointer`);if(dv.hasOwnProperty(nr)){if(Xr.Ub)return;throw new _1(`Cannot register type '${Tn}' twice`)}dv[nr]=Hr,M1.hasOwnProperty(nr)&&(Hr=M1[nr],delete M1[nr],Hr.forEach(Mo=>Mo()))}function Zy(nr,Hr,Xr={}){if(!("argPackAdvance"in Hr))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Bv(nr,Hr,Xr)}var cv=(nr,Hr,Xr)=>{switch(Hr){case 1:return Xr?Tn=>d()[Tn>>>0]:Tn=>et()[Tn>>>0];case 2:return Xr?Tn=>$t()[Tn>>>1>>>0]:Tn=>h()[Tn>>>1>>>0];case 4:return Xr?Tn=>b()[Tn>>>2>>>0]:Tn=>g()[Tn>>>2>>>0];case 8:return Xr?Tn=>ty[Tn>>>3]:Tn=>ky[Tn>>>3];default:throw new TypeError(`invalid integer width (${Hr}): ${nr}`)}},Q1=[],d1=[];function pv(nr){nr>>>=0,9<nr&&--d1[nr+1]===0&&(d1[nr]=void 0,Q1.push(nr))}var qy=nr=>{if(!nr)throw new _1("Cannot use deleted val. handle = "+nr);return d1[nr]},a1=nr=>{switch(nr){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let Hr=Q1.pop()||d1.length;return d1[Hr]=nr,d1[Hr+1]=1,Hr}};function V1(nr){return this.fromWireType(g()[nr>>>2>>>0])}var Lv={name:"emscripten::val",fromWireType:nr=>{var Hr=qy(nr);return pv(nr),Hr},toWireType:(nr,Hr)=>a1(Hr),argPackAdvance:8,readValueFromPointer:V1,Bb:null},Uv=(nr,Hr)=>{switch(Hr){case 4:return function(Xr){return this.fromWireType(jt()[Xr>>>2>>>0])};case 8:return function(Xr){return this.fromWireType(Ht()[Xr>>>3>>>0])};default:throw new TypeError(`invalid float width (${Hr}): ${nr}`)}},fv=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Jv=(nr,Hr)=>{for(var Xr=nr>>1,Tn=Xr+Hr/2;!(Xr>=Tn)&&h()[Xr>>>0];)++Xr;if(Xr<<=1,32<Xr-nr&&fv)return fv.decode(et().slice(nr,Xr));for(Xr="",Tn=0;!(Tn>=Hr/2);++Tn){var Mo=$t()[nr+2*Tn>>>1>>>0];if(Mo==0)break;Xr+=String.fromCharCode(Mo)}return Xr},Fv=(nr,Hr,Xr)=>{if(Xr??(Xr=2147483647),2>Xr)return 0;Xr-=2;var Tn=Hr;Xr=Xr<2*nr.length?Xr/2:nr.length;for(var Mo=0;Mo<Xr;++Mo){var _g=nr.charCodeAt(Mo);$t()[Hr>>>1>>>0]=_g,Hr+=2}return $t()[Hr>>>1>>>0]=0,Hr-Tn},hv=nr=>2*nr.length,V0=(nr,Hr)=>{for(var Xr=0,Tn="";!(Xr>=Hr/4);){var Mo=b()[nr+4*Xr>>>2>>>0];if(Mo==0)break;++Xr,65536<=Mo?(Mo-=65536,Tn+=String.fromCharCode(55296|Mo>>10,56320|Mo&1023)):Tn+=String.fromCharCode(Mo)}return Tn},Cv=(nr,Hr,Xr)=>{if(Hr>>>=0,Xr??(Xr=2147483647),4>Xr)return 0;var Tn=Hr;Xr=Tn+Xr-4;for(var Mo=0;Mo<nr.length;++Mo){var _g=nr.charCodeAt(Mo);if(55296<=_g&&57343>=_g){var m0=nr.charCodeAt(++Mo);_g=65536+((_g&1023)<<10)|m0&1023}if(b()[Hr>>>2>>>0]=_g,Hr+=4,Hr+4>Xr)break}return b()[Hr>>>2>>>0]=0,Hr-Tn},Z0=nr=>{for(var Hr=0,Xr=0;Xr<nr.length;++Xr){var Tn=nr.charCodeAt(Xr);55296<=Tn&&57343>=Tn&&++Xr,Hr+=4}return Hr},mv=nr=>{if(!A0)try{if(nr(),!(0<M0))try{o0?H$(G0):ko(G0)}catch(Hr){Hr instanceof Vy||Hr=="unwind"||xn(1,Hr)}}catch(Hr){Hr instanceof Vy||Hr=="unwind"||xn(1,Hr)}};function x1(nr){nr>>>=0,typeof Atomics.nc=="function"&&(Atomics.nc(b(),nr>>>2,nr).value.then(Qy),nr+=128,Atomics.store(b(),nr>>>2,1))}Kt.__emscripten_thread_mailbox_await=x1;var Qy=()=>{var nr=Dy();nr&&(x1(nr),mv(Sw))};Kt.checkMailbox=Qy;var J1=[],H1=(nr,Hr)=>{var Xr=dv[nr];if(Xr===void 0)throw nr=w$(nr),Xr=l1(nr),j1(nr),new _1(`${Hr} has unknown type ${Xr}`);return Xr},ev=(nr,Hr,Xr)=>{var Tn=[];return nr=nr.toWireType(Tn,Xr),Tn.length&&(g()[Hr>>>2>>>0]=a1(Tn)),nr},o1=nr=>{try{nr()}catch(Hr){_y(Hr)}};function gv(){var nr=U0,Hr={};for(let[Xr,Tn]of Object.entries(nr))Hr[Xr]=typeof Tn=="function"?(...Mo)=>{k1.push(Xr);try{return Tn(...Mo)}finally{A0||(k1.pop(),h1&&c1===1&&k1.length===0&&(c1=0,M0+=1,o1(x$),typeof Fibers<"u"&&Fibers.rc()))}}:Tn;return Hr}var c1=0,h1=null,tv=0,k1=[],Yr={},tr={},Ir=0,Kr=null,wn=[];function In(){return new Promise((nr,Hr)=>{Kr={resolve:nr,reject:Hr}})}function Go(){var nr=G1(65548),Hr=nr+12;g()[nr>>>2>>>0]=Hr,g()[nr+4>>>2>>>0]=Hr+65536,Hr=k1[0];var Xr=Yr[Hr];return Xr===void 0&&(Xr=Ir++,Yr[Hr]=Xr,tr[Xr]=Hr),Hr=Xr,b()[nr+8>>>2>>>0]=Hr,nr}function y0(){var nr=b()[h1+8>>>2>>>0];return nr=U0[tr[nr]],--M0,nr()}function T0(nr){if(!A0){if(c1===0){var Hr=!1,Xr=!1;nr((Tn=0)=>{if(!A0&&(tv=Tn,Hr=!0,Xr)){c1=2,o1(()=>T$(h1)),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.resume(),Tn=!1;try{var Mo=y0()}catch(k0){Mo=k0,Tn=!0}var _g=!1;if(!h1){var m0=Kr;m0&&(Kr=null,(Tn?m0.reject:m0.resolve)(Mo),_g=!0)}if(Tn&&!_g)throw Mo}}),Xr=!0,Hr||(c1=1,h1=Go(),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.pause(),o1(()=>K$(h1)))}else c1===2?(c1=0,o1(Y$),j1(h1),h1=null,wn.forEach(mv)):_y(`invalid state: ${c1}`);return tv}}function O0(nr){return T0(Hr=>{nr().then(Hr)})}var I0=[],H0={},py=nr=>{var Hr=H0[nr];return Hr===void 0?l1(nr):Hr},u0=()=>typeof globalThis=="object"?globalThis:Function("return this")(),a0=nr=>{var Hr=I0.length;return I0.push(nr),Hr},j0=(nr,Hr)=>{for(var Xr=Array(nr),Tn=0;Tn<nr;++Tn)Xr[Tn]=H1(g()[Hr+4*Tn>>>2>>>0],"parameter "+Tn);return Xr},z0=(nr,Hr)=>Object.defineProperty(Hr,"name",{value:nr});function fy(nr){var Hr=Function;if(!(Hr instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof Hr} which is not a function`);var Xr=z0(Hr.name||"unknownFunctionName",function(){});return Xr.prototype=Hr.prototype,Xr=new Xr,nr=Hr.apply(Xr,nr),nr instanceof Object?nr:Xr}var yv=nr=>nr%4===0&&(nr%100!==0||nr%400===0),gw=[0,31,60,91,121,152,182,213,244,274,305,335],yw=[0,31,59,90,120,151,181,212,243,273,304,334];function vw(nr,Hr,Xr,Tn,Mo,_g,m0){return o0?X0(16,1,nr,Hr,Xr,Tn,Mo,_g,m0):-52}function bw(nr,Hr,Xr,Tn,Mo,_g){if(o0)return X0(17,1,nr,Hr,Xr,Tn,Mo,_g)}var M$=[],j$=(nr,Hr)=>{M$.length=0;for(var Xr;Xr=et()[nr++>>>0];){var Tn=Xr!=105;Tn&=Xr!=112,Hr+=Tn&&Hr%8?4:0,M$.push(Xr==112?g()[Hr>>>2>>>0]:Xr==106?ty[Hr>>>3]:Xr==105?b()[Hr>>>2>>>0]:Ht()[Hr>>>3>>>0]),Hr+=Tn?8:4}return M$},z$={},Jy=()=>{if(!l$){var nr={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:vn||"./this.program"},Hr;for(Hr in z$)z$[Hr]===void 0?delete nr[Hr]:nr[Hr]=z$[Hr];var Xr=[];for(Hr in nr)Xr.push(`${Hr}=${nr[Hr]}`);l$=Xr}return l$},l$;function Ov(nr,Hr){if(o0)return X0(18,1,nr,Hr);nr>>>=0,Hr>>>=0;var Xr=0;return Jy().forEach((Tn,Mo)=>{var _g=Hr+Xr;for(Mo=g()[nr+4*Mo>>>2>>>0]=_g,_g=0;_g<Tn.length;++_g)d()[Mo++>>>0]=Tn.charCodeAt(_g);d()[Mo>>>0]=0,Xr+=Tn.length+1}),0}function B$(nr,Hr){if(o0)return X0(19,1,nr,Hr);nr>>>=0,Hr>>>=0;var Xr=Jy();g()[nr>>>2>>>0]=Xr.length;var Tn=0;return Xr.forEach(Mo=>Tn+=Mo.length+1),g()[Hr>>>2>>>0]=Tn,0}function b$(nr){return o0?X0(20,1,nr):52}function I1(nr,Hr,Xr,Tn){return o0?X0(21,1,nr,Hr,Xr,Tn):52}function L$(nr,Hr,Xr,Tn){return o0?X0(22,1,nr,Hr,Xr,Tn):70}var $w=[null,[],[]];function U$(nr,Hr,Xr,Tn){if(o0)return X0(23,1,nr,Hr,Xr,Tn);Hr>>>=0,Xr>>>=0,Tn>>>=0;for(var Mo=0,_g=0;_g<Xr;_g++){var m0=g()[Hr>>>2>>>0],k0=g()[Hr+4>>>2>>>0];Hr+=8;for(var B0=0;B0<k0;B0++){var P0=et()[m0+B0>>>0],K0=$w[nr];P0===0||P0===10?((nr===1?c0:$0)(n1(K0,0)),K0.length=0):K0.push(P0)}Mo+=k0}return g()[Tn>>>2>>>0]=Mo,0}var F$=[31,29,31,30,31,30,31,31,30,31,30,31],W$=[31,28,31,30,31,30,31,31,30,31,30,31];function ww(nr){var Hr=Array(My(nr)+1);return W1(nr,Hr,0,Hr.length),Hr}var C1=(nr,Hr)=>{d().set(nr,Hr>>>0)};function _w(nr,Hr,Xr,Tn){function Mo(f0,iy,vy){for(f0=typeof f0=="number"?f0.toString():f0||"";f0.length<iy;)f0=vy[0]+f0;return f0}function _g(f0,iy){return Mo(f0,iy,"0")}function m0(f0,iy){function vy(vv){return 0>vv?-1:0<vv?1:0}var Rv;return(Rv=vy(f0.getFullYear()-iy.getFullYear()))===0&&(Rv=vy(f0.getMonth()-iy.getMonth()))===0&&(Rv=vy(f0.getDate()-iy.getDate())),Rv}function k0(f0){switch(f0.getDay()){case 0:return new Date(f0.getFullYear()-1,11,29);case 1:return f0;case 2:return new Date(f0.getFullYear(),0,3);case 3:return new Date(f0.getFullYear(),0,2);case 4:return new Date(f0.getFullYear(),0,1);case 5:return new Date(f0.getFullYear()-1,11,31);case 6:return new Date(f0.getFullYear()-1,11,30)}}function B0(f0){var iy=f0.zb;for(f0=new Date(new Date(f0.Ab+1900,0,1).getTime());0<iy;){var vy=f0.getMonth(),Rv=(yv(f0.getFullYear())?F$:W$)[vy];if(iy>Rv-f0.getDate())iy-=Rv-f0.getDate()+1,f0.setDate(1),11>vy?f0.setMonth(vy+1):(f0.setMonth(0),f0.setFullYear(f0.getFullYear()+1));else{f0.setDate(f0.getDate()+iy);break}}return vy=new Date(f0.getFullYear()+1,0,4),iy=k0(new Date(f0.getFullYear(),0,4)),vy=k0(vy),0>=m0(iy,f0)?0>=m0(vy,f0)?f0.getFullYear()+1:f0.getFullYear():f0.getFullYear()-1}nr>>>=0,Hr>>>=0,Xr>>>=0,Tn>>>=0;var P0=g()[Tn+40>>>2>>>0];Tn={kc:b()[Tn>>>2>>>0],jc:b()[Tn+4>>>2>>>0],Eb:b()[Tn+8>>>2>>>0],Jb:b()[Tn+12>>>2>>>0],Fb:b()[Tn+16>>>2>>>0],Ab:b()[Tn+20>>>2>>>0],vb:b()[Tn+24>>>2>>>0],zb:b()[Tn+28>>>2>>>0],qc:b()[Tn+32>>>2>>>0],ic:b()[Tn+36>>>2>>>0],lc:P0?d0(P0):""},Xr=d0(Xr),P0={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var K0 in P0)Xr=Xr.replace(new RegExp(K0,"g"),P0[K0]);var Sy="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),$y="January February March April May June July August September October November December".split(" ");P0={"%a":f0=>Sy[f0.vb].substring(0,3),"%A":f0=>Sy[f0.vb],"%b":f0=>$y[f0.Fb].substring(0,3),"%B":f0=>$y[f0.Fb],"%C":f0=>_g((f0.Ab+1900)/100|0,2),"%d":f0=>_g(f0.Jb,2),"%e":f0=>Mo(f0.Jb,2," "),"%g":f0=>B0(f0).toString().substring(2),"%G":B0,"%H":f0=>_g(f0.Eb,2),"%I":f0=>(f0=f0.Eb,f0==0?f0=12:12<f0&&(f0-=12),_g(f0,2)),"%j":f0=>{for(var iy=0,vy=0;vy<=f0.Fb-1;iy+=(yv(f0.Ab+1900)?F$:W$)[vy++]);return _g(f0.Jb+iy,3)},"%m":f0=>_g(f0.Fb+1,2),"%M":f0=>_g(f0.jc,2),"%n":()=>`
`,"%p":f0=>0<=f0.Eb&&12>f0.Eb?"AM":"PM","%S":f0=>_g(f0.kc,2),"%t":()=>"	","%u":f0=>f0.vb||7,"%U":f0=>_g(Math.floor((f0.zb+7-f0.vb)/7),2),"%V":f0=>{var iy=Math.floor((f0.zb+7-(f0.vb+6)%7)/7);if(2>=(f0.vb+371-f0.zb-2)%7&&iy++,iy)iy==53&&(vy=(f0.vb+371-f0.zb)%7,vy==4||vy==3&&yv(f0.Ab)||(iy=1));else{iy=52;var vy=(f0.vb+7-f0.zb-1)%7;(vy==4||vy==5&&yv(f0.Ab%400-1))&&iy++}return _g(iy,2)},"%w":f0=>f0.vb,"%W":f0=>_g(Math.floor((f0.zb+7-(f0.vb+6)%7)/7),2),"%y":f0=>(f0.Ab+1900).toString().substring(2),"%Y":f0=>f0.Ab+1900,"%z":f0=>{f0=f0.ic;var iy=0<=f0;return f0=Math.abs(f0)/60,(iy?"+":"-")+("0000"+(f0/60*100+f0%60)).slice(-4)},"%Z":f0=>f0.lc,"%%":()=>"%"},Xr=Xr.replace(/%%/g,"\0\0");for(K0 in P0)Xr.includes(K0)&&(Xr=Xr.replace(new RegExp(K0,"g"),P0[K0](Tn)));return Xr=Xr.replace(/\0\0/g,"%"),K0=ww(Xr),K0.length>Hr?0:(C1(K0,nr),K0.length-1)}b0.Gb();for(var O1=Array(256),$$=0;256>$$;++$$)O1[$$]=String.fromCharCode($$);N1=O1,_1=Kt.BindingError=class extends Error{constructor(nr){super(nr),this.name="BindingError"}},Kt.InternalError=class extends Error{constructor(nr){super(nr),this.name="InternalError"}},d1.push(0,1,void 0,1,null,1,!0,1,!1,1),Kt.count_emval_handles=()=>d1.length/2-5-Q1.length;var xw=[Fy,ry,Wy,dy,cy,Tv,Sv,jv,uv,Ev,kv,lv,Iv,D1,X1,zv,vw,bw,Ov,B$,b$,I1,L$,U$],Av={ua:function(nr,Hr,Xr){return O0(async()=>{await Kt.Zb(nr,Hr,Xr)})},b:function(nr,Hr,Xr){throw nr>>>=0,new By(nr).Gb(Hr>>>0,Xr>>>0),Xy=nr,Xy},ia:function(nr){Tw(nr>>>0,!Ro,1,!No,131072,!1),b0.Pb()},G:function(nr){nr>>>=0,o0?postMessage({cmd:"cleanupThread",thread:nr}):b0.Nb(b0.ub[nr])},_:Ly,A:dy,pa:cy,W:Tv,Y:Sv,qa:jv,na:uv,fa:Ev,ma:kv,K:lv,X:Iv,U:D1,oa:X1,V:zv,E:function(nr,Hr,Xr){nr>>>=0,Xr>>>=0,Hr=l1(Hr>>>0),Zy(nr,{name:Hr,fromWireType:Tn=>Tn,toWireType:function(Tn,Mo){if(typeof Mo!="bigint"&&typeof Mo!="number")throw Mo===null?Mo="null":(Tn=typeof Mo,Mo=Tn==="object"||Tn==="array"||Tn==="function"?Mo.toString():""+Mo),new TypeError(`Cannot convert "${Mo}" to ${this.name}`);return typeof Mo=="number"&&(Mo=BigInt(Mo)),Mo},argPackAdvance:8,readValueFromPointer:cv(Hr,Xr,Hr.indexOf("u")==-1),Bb:null})},O:function(nr,Hr,Xr,Tn){nr>>>=0,Hr=l1(Hr>>>0),Zy(nr,{name:Hr,fromWireType:function(Mo){return!!Mo},toWireType:function(Mo,_g){return _g?Xr:Tn},argPackAdvance:8,readValueFromPointer:function(Mo){return this.fromWireType(et()[Mo>>>0])},Bb:null})},N:function(nr){return Zy(nr>>>0,Lv)},D:function(nr,Hr,Xr){nr>>>=0,Xr>>>=0,Hr=l1(Hr>>>0),Zy(nr,{name:Hr,fromWireType:Tn=>Tn,toWireType:(Tn,Mo)=>Mo,argPackAdvance:8,readValueFromPointer:Uv(Hr,Xr),Bb:null})},t:function(nr,Hr,Xr,Tn,Mo){if(nr>>>=0,Xr>>>=0,Hr=l1(Hr>>>0),Mo===-1&&(Mo=4294967295),Mo=k0=>k0,Tn===0){var _g=32-8*Xr;Mo=k0=>k0<<_g>>>_g}var m0=Hr.includes("unsigned")?function(k0,B0){return B0>>>0}:function(k0,B0){return B0};Zy(nr,{name:Hr,fromWireType:Mo,toWireType:m0,argPackAdvance:8,readValueFromPointer:cv(Hr,Xr,Tn!==0),Bb:null})},p:function(nr,Hr,Xr){function Tn(_g){var m0=g()[_g>>>2>>>0];return _g=g()[_g+4>>>2>>>0],new Mo(d().buffer,_g,m0)}nr>>>=0;var Mo=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][Hr];Xr=l1(Xr>>>0),Zy(nr,{name:Xr,fromWireType:Tn,argPackAdvance:8,readValueFromPointer:Tn},{Ub:!0})},F:function(nr,Hr){nr>>>=0,Hr=l1(Hr>>>0);var Xr=Hr==="std::string";Zy(nr,{name:Hr,fromWireType:function(Tn){var Mo=g()[Tn>>>2>>>0],_g=Tn+4;if(Xr)for(var m0=_g,k0=0;k0<=Mo;++k0){var B0=_g+k0;if(k0==Mo||et()[B0>>>0]==0){if(m0=d0(m0,B0-m0),P0===void 0)var P0=m0;else P0+=String.fromCharCode(0),P0+=m0;m0=B0+1}}else{for(P0=Array(Mo),k0=0;k0<Mo;++k0)P0[k0]=String.fromCharCode(et()[_g+k0>>>0]);P0=P0.join("")}return j1(Tn),P0},toWireType:function(Tn,Mo){Mo instanceof ArrayBuffer&&(Mo=new Uint8Array(Mo));var _g=typeof Mo=="string";if(!(_g||Mo instanceof Uint8Array||Mo instanceof Uint8ClampedArray||Mo instanceof Int8Array))throw new _1("Cannot pass non-string to std::string");var m0=Xr&&_g?My(Mo):Mo.length,k0=G1(4+m0+1),B0=k0+4;if(g()[k0>>>2>>>0]=m0,Xr&&_g)w1(Mo,B0,m0+1);else if(_g)for(_g=0;_g<m0;++_g){var P0=Mo.charCodeAt(_g);if(255<P0)throw j1(B0),new _1("String has UTF-16 code units that do not fit in 8 bits");et()[B0+_g>>>0]=P0}else for(_g=0;_g<m0;++_g)et()[B0+_g>>>0]=Mo[_g];return Tn!==null&&Tn.push(j1,k0),k0},argPackAdvance:8,readValueFromPointer:V1,Bb(Tn){j1(Tn)}})},z:function(nr,Hr,Xr){if(nr>>>=0,Hr>>>=0,Xr>>>=0,Xr=l1(Xr),Hr===2)var Tn=Jv,Mo=Fv,_g=hv,m0=k0=>h()[k0>>>1>>>0];else Hr===4&&(Tn=V0,Mo=Cv,_g=Z0,m0=k0=>g()[k0>>>2>>>0]);Zy(nr,{name:Xr,fromWireType:k0=>{for(var B0=g()[k0>>>2>>>0],P0,K0=k0+4,Sy=0;Sy<=B0;++Sy){var $y=k0+4+Sy*Hr;(Sy==B0||m0($y)==0)&&(K0=Tn(K0,$y-K0),P0===void 0?P0=K0:(P0+=String.fromCharCode(0),P0+=K0),K0=$y+Hr)}return j1(k0),P0},toWireType:(k0,B0)=>{if(typeof B0!="string")throw new _1(`Cannot pass non-string to C++ string type ${Xr}`);var P0=_g(B0),K0=G1(4+P0+Hr);return g()[K0>>>2>>>0]=P0/Hr,Mo(B0,K0+4,P0+Hr),k0!==null&&k0.push(j1,K0),K0},argPackAdvance:8,readValueFromPointer:V1,Bb(k0){j1(k0)}})},P:function(nr,Hr){nr>>>=0,Hr=l1(Hr>>>0),Zy(nr,{Vb:!0,name:Hr,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ta:()=>1,S:function(nr,Hr){nr>>>=0,nr==Hr>>>0?setTimeout(Qy):o0?postMessage({targetThread:nr,cmd:"checkMailbox"}):(nr=b0.ub[nr])&&nr.postMessage({cmd:"checkMailbox"})},$:function(nr,Hr,Xr,Tn,Mo){Hr>>>=0,Xr>>>=0,Tn/=2,J1.length=Tn,Mo=Mo>>>0>>>3;for(var _g=0;_g<Tn;_g++)J1[_g]=ty[Mo+2*_g]?ty[Mo+2*_g+1]:Ht()[Mo+2*_g+1>>>0];return nr=Hr?Y0[Hr]:xw[nr],b0.Sb=Xr,Xr=nr(...J1),b0.Sb=0,Xr},ha:x1,sa:function(nr){Xo&&b0.ub[nr>>>0].ref()},w:function(nr,Hr,Xr){return Hr>>>=0,Xr>>>=0,nr=qy(nr>>>0),Hr=H1(Hr,"emval::as"),ev(Hr,Xr,nr)},y:function(nr){return nr>>>=0,O0(()=>(nr=qy(nr),nr.then(a1)))},o:function(nr,Hr,Xr,Tn){return Xr>>>=0,Tn>>>=0,nr=I0[nr>>>0],Hr=qy(Hr>>>0),nr(null,Hr,Xr,Tn)},k:function(nr,Hr,Xr,Tn,Mo){return Xr>>>=0,Tn>>>=0,Mo>>>=0,nr=I0[nr>>>0],Hr=qy(Hr>>>0),Xr=py(Xr),nr(Hr,Hr[Xr],Tn,Mo)},c:pv,C:function(nr,Hr){return Hr>>>=0,nr=qy(nr>>>0),Hr=qy(Hr),nr==Hr},n:function(nr){return nr>>>=0,nr===0?a1(u0()):(nr=py(nr),a1(u0()[nr]))},j:function(nr,Hr,Xr){Hr=j0(nr,Hr>>>0);var Tn=Hr.shift();nr--;var Mo=`return function (obj, func, destructorsRef, args) {
`,_g=0,m0=[];Xr===0&&m0.push("obj");for(var k0=["retType"],B0=[Tn],P0=0;P0<nr;++P0)m0.push("arg"+P0),k0.push("argType"+P0),B0.push(Hr[P0]),Mo+=`  var arg${P0} = argType${P0}.readValueFromPointer(args${_g?"+"+_g:""});
`,_g+=Hr[P0].argPackAdvance;return Mo+=`  var rv = ${Xr===1?"new func":"func.call"}(${m0.join(", ")});
`,Tn.Vb||(k0.push("emval_returnValue"),B0.push(ev),Mo+=`  return emval_returnValue(retType, destructorsRef, rv);
`),k0.push(Mo+`};
`),nr=fy(k0)(...B0),Xr=`methodCaller<(${Hr.map(K0=>K0.name).join(", ")}) => ${Tn.name}>`,a0(z0(Xr,nr))},s:function(nr,Hr){return Hr>>>=0,nr=qy(nr>>>0),Hr=qy(Hr),a1(nr[Hr])},d:function(nr){nr>>>=0,9<nr&&(d1[nr+1]+=1)},v:function(){return a1([])},m:function(nr){nr=qy(nr>>>0);for(var Hr=Array(nr.length),Xr=0;Xr<nr.length;Xr++)Hr[Xr]=nr[Xr];return a1(Hr)},g:function(nr){return a1(py(nr>>>0))},l:function(){return a1({})},i:function(nr){nr>>>=0;for(var Hr=qy(nr);Hr.length;){var Xr=Hr.pop();Hr.pop()(Xr)}pv(nr)},h:function(nr,Hr,Xr){Hr>>>=0,Xr>>>=0,nr=qy(nr>>>0),Hr=qy(Hr),Xr=qy(Xr),nr[Hr]=Xr},e:function(nr,Hr){return Hr>>>=0,nr=H1(nr>>>0,"_emval_take_value"),nr=nr.readValueFromPointer(Hr),a1(nr)},ca:function(nr,Hr){nr=-9007199254740992>nr||9007199254740992<nr?NaN:Number(nr),Hr>>>=0,nr=new Date(1e3*nr),b()[Hr>>>2>>>0]=nr.getUTCSeconds(),b()[Hr+4>>>2>>>0]=nr.getUTCMinutes(),b()[Hr+8>>>2>>>0]=nr.getUTCHours(),b()[Hr+12>>>2>>>0]=nr.getUTCDate(),b()[Hr+16>>>2>>>0]=nr.getUTCMonth(),b()[Hr+20>>>2>>>0]=nr.getUTCFullYear()-1900,b()[Hr+24>>>2>>>0]=nr.getUTCDay(),nr=(nr.getTime()-Date.UTC(nr.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,b()[Hr+28>>>2>>>0]=nr},da:function(nr,Hr){nr=-9007199254740992>nr||9007199254740992<nr?NaN:Number(nr),Hr>>>=0,nr=new Date(1e3*nr),b()[Hr>>>2>>>0]=nr.getSeconds(),b()[Hr+4>>>2>>>0]=nr.getMinutes(),b()[Hr+8>>>2>>>0]=nr.getHours(),b()[Hr+12>>>2>>>0]=nr.getDate(),b()[Hr+16>>>2>>>0]=nr.getMonth(),b()[Hr+20>>>2>>>0]=nr.getFullYear()-1900,b()[Hr+24>>>2>>>0]=nr.getDay();var Xr=(yv(nr.getFullYear())?gw:yw)[nr.getMonth()]+nr.getDate()-1|0;b()[Hr+28>>>2>>>0]=Xr,b()[Hr+36>>>2>>>0]=-(60*nr.getTimezoneOffset()),Xr=new Date(nr.getFullYear(),6,1).getTimezoneOffset();var Tn=new Date(nr.getFullYear(),0,1).getTimezoneOffset();nr=(Xr!=Tn&&nr.getTimezoneOffset()==Math.min(Tn,Xr))|0,b()[Hr+32>>>2>>>0]=nr},ea:function(nr){nr>>>=0;var Hr=new Date(b()[nr+20>>>2>>>0]+1900,b()[nr+16>>>2>>>0],b()[nr+12>>>2>>>0],b()[nr+8>>>2>>>0],b()[nr+4>>>2>>>0],b()[nr>>>2>>>0],0),Xr=b()[nr+32>>>2>>>0],Tn=Hr.getTimezoneOffset(),Mo=new Date(Hr.getFullYear(),6,1).getTimezoneOffset(),_g=new Date(Hr.getFullYear(),0,1).getTimezoneOffset(),m0=Math.min(_g,Mo);return 0>Xr?b()[nr+32>>>2>>>0]=+(Mo!=_g&&m0==Tn):0<Xr!=(m0==Tn)&&(Mo=Math.max(_g,Mo),Hr.setTime(Hr.getTime()+6e4*((0<Xr?m0:Mo)-Tn))),b()[nr+24>>>2>>>0]=Hr.getDay(),Xr=(yv(Hr.getFullYear())?gw:yw)[Hr.getMonth()]+Hr.getDate()-1|0,b()[nr+28>>>2>>>0]=Xr,b()[nr>>>2>>>0]=Hr.getSeconds(),b()[nr+4>>>2>>>0]=Hr.getMinutes(),b()[nr+8>>>2>>>0]=Hr.getHours(),b()[nr+12>>>2>>>0]=Hr.getDate(),b()[nr+16>>>2>>>0]=Hr.getMonth(),b()[nr+20>>>2>>>0]=Hr.getYear(),nr=Hr.getTime(),BigInt(isNaN(nr)?-1:nr/1e3)},aa:vw,ba:bw,R:function(nr,Hr,Xr,Tn){nr>>>=0,Hr>>>=0,Xr>>>=0,Tn>>>=0;var Mo=new Date().getFullYear(),_g=new Date(Mo,0,1),m0=new Date(Mo,6,1);Mo=_g.getTimezoneOffset();var k0=m0.getTimezoneOffset(),B0=Math.max(Mo,k0);g()[nr>>>2>>>0]=60*B0,b()[Hr>>>2>>>0]=+(Mo!=k0),nr=P0=>P0.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],_g=nr(_g),m0=nr(m0),k0<Mo?(w1(_g,Xr,17),w1(m0,Tn,17)):(w1(_g,Tn,17),w1(m0,Xr,17))},q:()=>{_y("")},f:function(nr,Hr,Xr){return nr>>>=0,Hr=j$(Hr>>>0,Xr>>>0),Y0[nr](...Hr)},M:function(nr,Hr,Xr){return nr>>>=0,Hr=j$(Hr>>>0,Xr>>>0),Y0[nr](...Hr)},H:()=>{},L:()=>Date.now(),ra:()=>{throw M0+=1,"unwind"},T:function(){return 4294901760},u:()=>performance.timeOrigin+performance.now(),x:()=>Xo?(Ua(),sr(Ma)).cpus().length:navigator.hardwareConcurrency,Q:function(nr){nr>>>=0;var Hr=et().length;if(nr<=Hr||4294901760<nr)return!1;for(var Xr=1;4>=Xr;Xr*=2){var Tn=Hr*(1+.2/Xr);Tn=Math.min(Tn,nr+100663296);var Mo=Math;Tn=Math.max(nr,Tn);e:{Mo=(Mo.min.call(Mo,4294901760,Tn+(65536-Tn%65536)%65536)-Bo.buffer.byteLength+65535)/65536;try{Bo.grow(Mo),Oy();var _g=1;break e}catch{}_g=void 0}if(_g)return!0}return!1},ja:Ov,la:B$,Z:ko,B:b$,J:I1,ga:L$,I:U$,a:Bo||Kt.wasmMemory,ka:_w,r:function(nr,Hr,Xr,Tn){return _w(nr>>>0,Hr>>>0,Xr>>>0,Tn>>>0)}},U0=function(){function nr(Xr,Tn){return U0=Xr.exports,U0=gv(),U0=c2(),b0.Qb.push(U0.cb),r1.unshift(U0.va),x0=Tn,Gy(),U0}var Hr={a:Av};if(Yy++,Kt.instantiateWasm)try{return Kt.instantiateWasm(Hr,nr)}catch(Xr){$0(`Module.instantiateWasm callback failed with error: ${Xr}`),jr(Xr)}return i1(Hr,function(Xr){nr(Xr.instance,Xr.module)}).catch(jr),{}}(),w$=nr=>(w$=U0.wa)(nr);Kt.__embind_initialize_bindings=()=>(Kt.__embind_initialize_bindings=U0.xa)(),Kt._OrtInit=(nr,Hr)=>(Kt._OrtInit=U0.ya)(nr,Hr),Kt._OrtGetLastError=(nr,Hr)=>(Kt._OrtGetLastError=U0.za)(nr,Hr),Kt._OrtCreateSessionOptions=(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0,P0)=>(Kt._OrtCreateSessionOptions=U0.Aa)(nr,Hr,Xr,Tn,Mo,_g,m0,k0,B0,P0),Kt._OrtAppendExecutionProvider=(nr,Hr)=>(Kt._OrtAppendExecutionProvider=U0.Ba)(nr,Hr),Kt._OrtAddFreeDimensionOverride=(nr,Hr,Xr)=>(Kt._OrtAddFreeDimensionOverride=U0.Ca)(nr,Hr,Xr),Kt._OrtAddSessionConfigEntry=(nr,Hr,Xr)=>(Kt._OrtAddSessionConfigEntry=U0.Da)(nr,Hr,Xr),Kt._OrtReleaseSessionOptions=nr=>(Kt._OrtReleaseSessionOptions=U0.Ea)(nr),Kt._OrtCreateSession=(nr,Hr,Xr)=>(Kt._OrtCreateSession=U0.Fa)(nr,Hr,Xr),Kt._OrtReleaseSession=nr=>(Kt._OrtReleaseSession=U0.Ga)(nr),Kt._OrtGetInputOutputCount=(nr,Hr,Xr)=>(Kt._OrtGetInputOutputCount=U0.Ha)(nr,Hr,Xr),Kt._OrtGetInputName=(nr,Hr)=>(Kt._OrtGetInputName=U0.Ia)(nr,Hr),Kt._OrtGetOutputName=(nr,Hr)=>(Kt._OrtGetOutputName=U0.Ja)(nr,Hr),Kt._OrtFree=nr=>(Kt._OrtFree=U0.Ka)(nr),Kt._OrtCreateTensor=(nr,Hr,Xr,Tn,Mo,_g)=>(Kt._OrtCreateTensor=U0.La)(nr,Hr,Xr,Tn,Mo,_g),Kt._OrtGetTensorData=(nr,Hr,Xr,Tn,Mo)=>(Kt._OrtGetTensorData=U0.Ma)(nr,Hr,Xr,Tn,Mo),Kt._OrtReleaseTensor=nr=>(Kt._OrtReleaseTensor=U0.Na)(nr),Kt._OrtCreateRunOptions=(nr,Hr,Xr,Tn)=>(Kt._OrtCreateRunOptions=U0.Oa)(nr,Hr,Xr,Tn),Kt._OrtAddRunConfigEntry=(nr,Hr,Xr)=>(Kt._OrtAddRunConfigEntry=U0.Pa)(nr,Hr,Xr),Kt._OrtReleaseRunOptions=nr=>(Kt._OrtReleaseRunOptions=U0.Qa)(nr),Kt._OrtCreateBinding=nr=>(Kt._OrtCreateBinding=U0.Ra)(nr),Kt._OrtBindInput=(nr,Hr,Xr)=>(Kt._OrtBindInput=U0.Sa)(nr,Hr,Xr),Kt._OrtBindOutput=(nr,Hr,Xr,Tn)=>(Kt._OrtBindOutput=U0.Ta)(nr,Hr,Xr,Tn),Kt._OrtClearBoundOutputs=nr=>(Kt._OrtClearBoundOutputs=U0.Ua)(nr),Kt._OrtReleaseBinding=nr=>(Kt._OrtReleaseBinding=U0.Va)(nr),Kt._OrtRunWithBinding=(nr,Hr,Xr,Tn,Mo)=>(Kt._OrtRunWithBinding=U0.Wa)(nr,Hr,Xr,Tn,Mo),Kt._OrtRun=(nr,Hr,Xr,Tn,Mo,_g,m0,k0)=>(Kt._OrtRun=U0.Xa)(nr,Hr,Xr,Tn,Mo,_g,m0,k0),Kt._OrtEndProfiling=nr=>(Kt._OrtEndProfiling=U0.Ya)(nr),Kt._JsepOutput=(nr,Hr,Xr)=>(Kt._JsepOutput=U0.Za)(nr,Hr,Xr),Kt._JsepGetNodeName=nr=>(Kt._JsepGetNodeName=U0._a)(nr);var Dy=Kt._pthread_self=()=>(Dy=Kt._pthread_self=U0.$a)(),G1=Kt._malloc=nr=>(G1=Kt._malloc=U0.ab)(nr),j1=Kt._free=nr=>(j1=Kt._free=U0.bb)(nr);Kt.__emscripten_tls_init=()=>(Kt.__emscripten_tls_init=U0.cb)();var Tw=Kt.__emscripten_thread_init=(nr,Hr,Xr,Tn,Mo,_g)=>(Tw=Kt.__emscripten_thread_init=U0.eb)(nr,Hr,Xr,Tn,Mo,_g);Kt.__emscripten_thread_crashed=()=>(Kt.__emscripten_thread_crashed=U0.fb)();var _$=(nr,Hr,Xr,Tn,Mo)=>(_$=U0.gb)(nr,Hr,Xr,Tn,Mo),V$=nr=>(V$=U0.hb)(nr),H$=Kt.__emscripten_thread_exit=nr=>(H$=Kt.__emscripten_thread_exit=U0.ib)(nr),Sw=()=>(Sw=U0.jb)(),G$=(nr,Hr)=>(G$=U0.kb)(nr,Hr),Wv=nr=>(Wv=U0.lb)(nr),Pv=nr=>(Pv=U0.mb)(nr),Z$=()=>(Z$=U0.nb)(),q$=Kt.dynCall_ii=(nr,Hr)=>(q$=Kt.dynCall_ii=U0.pb)(nr,Hr),K$=nr=>(K$=U0.qb)(nr),x$=()=>(x$=U0.rb)(),T$=nr=>(T$=U0.sb)(nr),Y$=()=>(Y$=U0.tb)();Kt.___start_em_js=839500,Kt.___stop_em_js=839661;function c2(){var nr=U0;nr=Object.assign({},nr);var Hr=Tn=>Mo=>Tn(Mo)>>>0,Xr=Tn=>()=>Tn()>>>0;return nr.wa=Hr(nr.wa),nr.$a=Xr(nr.$a),nr.ab=Hr(nr.ab),nr.emscripten_main_runtime_thread_id=Xr(nr.emscripten_main_runtime_thread_id),nr.mb=Hr(nr.mb),nr.nb=Xr(nr.nb),nr}Kt.wasmMemory=Bo,Kt.stackSave=()=>Z$(),Kt.stackRestore=nr=>Wv(nr),Kt.stackAlloc=nr=>Pv(nr),Kt.keepRuntimeAlive=()=>0<M0,Kt.UTF8ToString=d0,Kt.stringToUTF8=w1,Kt.lengthBytesUTF8=My,Kt.ExitStatus=Vy,Kt.PThread=b0;var e$;zy=function nr(){e$||S$(),e$||(zy=nr)};function S$(){if(!(0<Yy))if(o0)or(Kt),o0||F0(r1),startWorker(Kt);else{if(Kt.preRun)for(typeof Kt.preRun=="function"&&(Kt.preRun=[Kt.preRun]);Kt.preRun.length;)Py.unshift(Kt.preRun.shift());F0(Py),0<Yy||e$||(e$=!0,Kt.calledRun=!0,A0||(o0||F0(r1),or(Kt),o0||F0(xv)))}}return S$(),Lr}})();typeof e=="object"&&typeof i=="object"?i.exports=a:typeof define=="function"&&define.amd&&define([],()=>a)}),Ha=Er((e,i)=>{i.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),La,gc,Hi,Gi,Un,Ga,yc,bc,vc,Fa,Fe,Or=j(()=>{La=za(),gc=Va(),Gi=!1,Un=!1,Ga=!1,yc=e=>{if(e===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},bc=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},vc=(e,i)=>e?i?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":i?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Fa=async e=>{if(Gi)return Promise.resolve();if(Un)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Ga)throw new Error("previous call to 'initializeWebAssembly()' failed.");Un=!0;let i=e.initTimeout,a=e.numThreads,o=e.simd,c=yc(a),s=o&&bc(),d=e.wasmPaths,et=typeof d=="string"?d:void 0,$t=vc(s,c),h=typeof d=="object"?d[$t]:void 0,b=!1,g=[];if(i>0&&g.push(new Promise(jt=>{setTimeout(()=>{b=!0,jt()},i)})),g.push(new Promise((jt,Ht)=>{let Kt=c?gc:La,or={locateFile:(jr,Lr)=>{if(c&&jr.endsWith(".worker.js")&&typeof Blob<"u")return URL.createObjectURL(new Blob([Ha()],{type:"text/javascript"}));if(jr.endsWith(".wasm")){if(h)return h;let ir=et??Lr;return $t==="ort-wasm-simd.wasm"?ir+"ort-wasm-simd.jsep.wasm":$t==="ort-wasm-simd-threaded.wasm"?ir+"ort-wasm-simd-threaded.jsep.wasm":ir+$t}return Lr+jr}};if(c)if(or.numThreads=a,typeof Blob>"u")or.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let jr=`var ortWasmThreaded=${Kt.toString()};`;or.mainScriptUrlOrBlob=new Blob([jr],{type:"text/javascript"})}Kt(or).then(jr=>{Un=!1,Gi=!0,Hi=jr,jt()},jr=>{Un=!1,Ga=!0,Ht(jr)})})),await Promise.race(g),b)throw new Error(`WebAssembly backend initializing failed due to timeout: ${i}ms`)},Fe=()=>{if(Gi&&Hi)return Hi;throw new Error("WebAssembly is not initialized yet.")}}),qe,Jr,We,Wn=j(()=>{Or(),qe=(e,i)=>{let a=Fe(),o=a.lengthBytesUTF8(e)+1,c=a._malloc(o);return a.stringToUTF8(e,c,o),i.push(c),c},Jr=(e,i,a,o)=>{if(typeof e=="object"&&e!==null){if(a.has(e))throw new Error("Circular reference in options");a.add(e)}Object.entries(e).forEach(([c,s])=>{let d=i?i+c:c;if(typeof s=="object")Jr(s,d+".",a,o);else if(typeof s=="string"||typeof s=="number")o(d,s.toString());else if(typeof s=="boolean")o(d,s?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof s}`)})},We=e=>{let i=Fe(),a=i.stackSave();try{let o=i.stackAlloc(8);i._OrtGetLastError(o,o+4);let c=i.HEAP32[o/4],s=i.HEAPU32[o/4+1],d=s?i.UTF8ToString(s):"";throw new Error(`${e} ERROR_CODE: ${c}, ERROR_MESSAGE: ${d}`)}finally{i.stackRestore(a)}}}),qa,ja=j(()=>{Or(),Wn(),qa=e=>{let i=Fe(),a=0,o=[],c=e||{};try{if((e==null?void 0:e.logSeverityLevel)===void 0)c.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if((e==null?void 0:e.logVerbosityLevel)===void 0)c.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);(e==null?void 0:e.terminate)===void 0&&(c.terminate=!1);let s=0;return(e==null?void 0:e.tag)!==void 0&&(s=qe(e.tag,o)),a=i._OrtCreateRunOptions(c.logSeverityLevel,c.logVerbosityLevel,!!c.terminate,s),a===0&&We("Can't create run options."),(e==null?void 0:e.extra)!==void 0&&Jr(e.extra,"",new WeakSet,(d,et)=>{let $t=qe(d,o),h=qe(et,o);i._OrtAddRunConfigEntry(a,$t,h)!==0&&We(`Can't set a run config entry: ${d} - ${et}.`)}),[a,o]}catch(s){throw a!==0&&i._OrtReleaseRunOptions(a),o.forEach(d=>i._free(d)),s}}}),wc,$c,_c,xc,Ka,Ya=j(()=>{Or(),Wn(),wc=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},$c=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},_c=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let i=e.extra.session;i.use_ort_model_bytes_directly||(i.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(e.enableMemPattern=!1)},xc=(e,i,a)=>{for(let o of i){let c=typeof o=="string"?o:o.name;switch(c){case"webnn":if(c="WEBNN",typeof o!="string"){let d=o;if(d!=null&&d.deviceType){let et=qe("deviceType",a),$t=qe(d.deviceType,a);Fe()._OrtAddSessionConfigEntry(e,et,$t)!==0&&We(`Can't set a session config entry: 'deviceType' - ${d.deviceType}.`)}if(d!=null&&d.numThreads){let et=d.numThreads;(typeof et!="number"||!Number.isInteger(et)||et<0)&&(et=0);let $t=qe("numThreads",a),h=qe(et.toString(),a);Fe()._OrtAddSessionConfigEntry(e,$t,h)!==0&&We(`Can't set a session config entry: 'numThreads' - ${d.numThreads}.`)}if(d!=null&&d.powerPreference){let et=qe("powerPreference",a),$t=qe(d.powerPreference,a);Fe()._OrtAddSessionConfigEntry(e,et,$t)!==0&&We(`Can't set a session config entry: 'powerPreference' - ${d.powerPreference}.`)}}break;case"webgpu":if(c="JS",typeof o!="string"){let d=o;if(d!=null&&d.preferredLayout){if(d.preferredLayout!=="NCHW"&&d.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${d.preferredLayout}`);let et=qe("preferredLayout",a),$t=qe(d.preferredLayout,a);Fe()._OrtAddSessionConfigEntry(e,et,$t)!==0&&We(`Can't set a session config entry: 'preferredLayout' - ${d.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${c}`)}let s=qe(c,a);Fe()._OrtAppendExecutionProvider(e,s)!==0&&We(`Can't append execution provider: ${c}.`)}},Ka=e=>{let i=Fe(),a=0,o=[],c=e||{};_c(c);try{let s=wc(c.graphOptimizationLevel??"all"),d=$c(c.executionMode??"sequential"),et=typeof c.logId=="string"?qe(c.logId,o):0,$t=c.logSeverityLevel??2;if(!Number.isInteger($t)||$t<0||$t>4)throw new Error(`log serverity level is not valid: ${$t}`);let h=c.logVerbosityLevel??0;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log verbosity level is not valid: ${h}`);let b=typeof c.optimizedModelFilePath=="string"?qe(c.optimizedModelFilePath,o):0;if(a=i._OrtCreateSessionOptions(s,!!c.enableCpuMemArena,!!c.enableMemPattern,d,!!c.enableProfiling,0,et,$t,h,b),a===0&&We("Can't create session options."),c.executionProviders&&xc(a,c.executionProviders,o),c.enableGraphCapture!==void 0){if(typeof c.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${c.enableGraphCapture}`);let g=qe("enableGraphCapture",o),jt=qe(c.enableGraphCapture.toString(),o);i._OrtAddSessionConfigEntry(a,g,jt)!==0&&We(`Can't set a session config entry: 'enableGraphCapture' - ${c.enableGraphCapture}.`)}if(c.freeDimensionOverrides)for(let[g,jt]of Object.entries(c.freeDimensionOverrides)){if(typeof g!="string")throw new Error(`free dimension override name must be a string: ${g}`);if(typeof jt!="number"||!Number.isInteger(jt)||jt<0)throw new Error(`free dimension override value must be a non-negative integer: ${jt}`);let Ht=qe(g,o);i._OrtAddFreeDimensionOverride(a,Ht,jt)!==0&&We(`Can't set a free dimension override: ${g} - ${jt}.`)}return c.extra!==void 0&&Jr(c.extra,"",new WeakSet,(g,jt)=>{let Ht=qe(g,o),Kt=qe(jt,o);i._OrtAddSessionConfigEntry(a,Ht,Kt)!==0&&We(`Can't set a session config entry: ${g} - ${jt}.`)}),[a,o]}catch(s){throw a!==0&&i._OrtReleaseSessionOptions(a),o.forEach(d=>i._free(d)),s}}}),Li,Yt,cr,Nn,en,Vn,Fi,ye=j(()=>{Li=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},Yt=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},cr=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],Nn=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},en=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},Vn=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool",Fi=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e}`)}}}),tn,qi=j(()=>{tn=async e=>{if(typeof e=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(e))}catch(i){if(i.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(e),o=[];for await(let c of a)o.push(c);return new Uint8Array(Buffer.concat(o))}throw i}else{let i=await fetch(e);if(!i.ok)throw new Error(`failed to load external data file: ${e}`);let a=i.headers.get("Content-Length"),o=a?parseInt(a,10):0;if(o<1073741824)return new Uint8Array(await i.arrayBuffer());{if(!i.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let c=i.body.getReader(),s;try{s=new ArrayBuffer(o)}catch(et){if(et instanceof RangeError){let $t=Math.ceil(o/65536);s=new WebAssembly.Memory({initial:$t,maximum:$t}).buffer}else throw et}let d=0;for(;;){let{done:et,value:$t}=await c.read();if(et)break;let h=$t.byteLength;new Uint8Array(s,d,h).set($t),d+=h}return new Uint8Array(s,0,o)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)}}),Sc,Cc,Xa,Za,Qa,Ic,Ne,Xt=j(()=>{ye(),Sc=["V","I","W","E","F"],Cc=(e,i)=>{console.log(`[${Sc[e]},${new Date().toISOString()}]${i}`)},Qa=(e,i)=>{Xa=e,Za=i},Ic=(e,i)=>{let a=en(e),o=en(Xa);a>=o&&Cc(a,typeof i=="function"?i():i)},Ne=(...e)=>{Za&&Ic(...e)}}),Ja,es=j(()=>{ye(),Ja=(e,i)=>new(Nn(i))(e)}),Hn=j(()=>{}),ts,ji,Ki,Tc,Ac,rs,Xi,Yi,is,os=j(()=>{Xt(),Hn(),ts=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),ji=[],Ki=e=>Math.ceil(e/16)*16,Tc=e=>{for(let i=0;i<ji.length;i++){let a=ji[i];if(e<=a)return a}return Math.ceil(e/16)*16},Ac=1,rs=()=>Ac++,Xi=async(e,i,a,o)=>{let c=Ki(a),s=e.device.createBuffer({size:c,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let d=e.getCommandEncoder();e.endComputePass(),d.copyBufferToBuffer(i,0,s,0,c),e.flush(),await s.mapAsync(GPUMapMode.READ);let et=s.getMappedRange();if(o){let $t=o();return $t.set(new Uint8Array(et,0,a)),$t}else return new Uint8Array(et.slice(0,a))}finally{s.destroy()}},Yi=class{constructor(e){this.backend=e,this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[],this.externalBuffers=new Map,this.capturedPendingBuffers=new Map;for(let[i]of ts)ji.push(i),this.freeBuffers.set(i,[]),this.freeUniformBuffers.set(i,[])}upload(e,i){let a=i.buffer,o=i.byteOffset,c=i.byteLength,s=Ki(c),d=this.storageCache.get(e);if(!d)throw new Error("gpu data for uploading does not exist");if(d.originalSize!==c)throw new Error(`inconsistent data size. gpu data size=${d.originalSize}, data size=${c}`);let et=this.backend.device.createBuffer({mappedAtCreation:!0,size:s,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),$t=et.getMappedRange();new Uint8Array($t).set(new Uint8Array(a,o,c)),et.unmap();let h=this.backend.getCommandEncoder();this.backend.endComputePass(),h.copyBufferToBuffer(et,0,d.gpuData.buffer,0,s),Ne("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${e})`),this.buffersForUploadingPending.push(et)}memcpy(e,i){let a=this.storageCache.get(e);if(!a)throw new Error("source gpu data for memcpy does not exist");let o=this.storageCache.get(i);if(!o)throw new Error("destination gpu data for memcpy does not exist");if(a.originalSize!==o.originalSize)throw new Error("inconsistent source and destination gpu data size");let c=Ki(a.originalSize),s=this.backend.getCommandEncoder();this.backend.endComputePass(),s.copyBufferToBuffer(a.gpuData.buffer,0,o.gpuData.buffer,0,c)}registerExternalBuffer(e,i,a){let o;if(a){if(o=this.externalBuffers.get(a),o===void 0)throw new Error("previous buffer is not registered");if(e===a)return Ne("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${i}) => id=${o}, buffer is the same, skip.`),o;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.
             Please use the previous external buffer!`);this.externalBuffers.delete(a)}else o=rs();return this.storageCache.set(o,{gpuData:{id:o,type:0,buffer:e},originalSize:i}),this.externalBuffers.set(e,o),Ne("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${i}) => id=${o}, registered.`),o}unregisterExternalBuffer(e){let i=this.externalBuffers.get(e);i!==void 0&&(this.storageCache.delete(i),this.externalBuffers.delete(e),Ne("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${i}`))}create(e,i=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let a=Tc(e),o,c=(i&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,s=(i&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(c||s){let et=(c?this.freeBuffers:this.freeUniformBuffers).get(a);et?et.length>0?o=et.pop():o=this.backend.device.createBuffer({size:a,usage:i}):o=this.backend.device.createBuffer({size:a,usage:i})}else o=this.backend.device.createBuffer({size:a,usage:i});let d={id:rs(),type:0,buffer:o};return this.storageCache.set(d.id,{gpuData:d,originalSize:e}),Ne("verbose",()=>`[WebGPU] GpuDataManager.create(size=${e}) => id=${d.id}`),d}get(e){var i;return(i=this.storageCache.get(e))==null?void 0:i.gpuData}release(e){let i=this.storageCache.get(e);if(!i)throw new Error("releasing data does not exist");return Ne("verbose",()=>`[WebGPU] GpuDataManager.release(id=${e}), gpuDataId=${i.gpuData.id}`),this.storageCache.delete(e),this.buffersPending.push(i.gpuData.buffer),i.originalSize}async download(e,i){let a=this.storageCache.get(e);if(!a)throw new Error("data does not exist");await Xi(this.backend,a.gpuData.buffer,a.originalSize,i)}refreshPendingBuffers(){for(let e of this.buffersForUploadingPending)e.destroy();if(this.buffersForUploadingPending=[],this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let e of this.buffersPending){let i=ts.get(e.size);if((e.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let a=this.freeBuffers.get(e.size)||[];i===void 0||a.length>=i?e.destroy():a.push(e)}else if((e.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let a=this.freeUniformBuffers.get(e.size)||[];i===void 0||a.length>=i?e.destroy():a.push(e)}else e.destroy()}this.buffersPending=[]}else{let e=this.capturedPendingBuffers.get(this.backend.currentSessionId);e||(e=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,e));for(let i of this.buffersPending)e.push(i);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(e=>{e.forEach(i=>{i.destroy()})}),this.freeUniformBuffers.forEach(e=>{e.forEach(i=>{i.destroy()})}),this.storageCache.forEach(e=>{e.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(e=>{e.forEach(i=>{i.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onReleaseSession(e){let i=this.capturedPendingBuffers.get(e);i&&(i.forEach(a=>{a.destroy()}),this.capturedPendingBuffers.delete(e))}},is=(...e)=>new Yi(...e)}),Zi,we,Ze=j(()=>{Zi=class{constructor(e){Object.assign(this,e)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this.key}},we=e=>new Zi(e)}),Qi,zt,M,pr,Gn,Ln,Fn,xe=j(()=>{Qi=class{static calcMatMulShape(e,i){return e[1]!==i[0]?void 0:[e[0],i[1]]}},zt=class{static calcShape(e,i,a=!1){let o=e.length,c=i.length;if(o===0)return i;if(c===0)return e;let s=Math.max(e.length,i.length),d=new Array(s);if(a){if(o<2||c<2)return;let et=Qi.calcMatMulShape([e[o-2],e[o-1]],[i[c-2],i[c-1]]);if(et===void 0)return;[d[s-2],d[s-1]]=et}for(let et=a?3:1;et<=s;et++){let $t=o-et<0?1:e[o-et],h=c-et<0?1:i[c-et];if($t!==h&&$t>1&&h>1)return;let b=Math.max($t,h);if($t&&h)d[s-et]=Math.max($t,h);else{if(b>1)return;d[s-et]=0}}return d}static isValidBroadcast(e,i){let a=e.length,o=i.length;if(a>o)return!1;for(let c=1;c<=a;c++)if(e[a-c]!==1&&e[a-c]!==i[o-c])return!1;return!0}},M=class d2{static size(i){return d2.getSizeFromDimensionRange(i,0,i.length)}static convertShape(i,a=4){let o=i.length;if(o===0)return[];let c=new Array(o),s=o-1;for(;s>=0;){if(i[s]%a===0){c[s]=i[s]/a;break}if(a%i[s]!==0)throw new Error("cannot convert shape");c[s]=1,a/=i[s],s--}for(s--;s>=0;s--)c[s]=i[s];return c}static sizeFromDimension(i,a){if(a<0||a>i.length)throw new Error(`invalid dimension of ${a} for sizeFromDimension as Tensor has ${i.length} dimensions.`);return d2.getSizeFromDimensionRange(i,a,i.length)}static sizeToDimension(i,a){if(a<0||a>i.length)throw new Error(`invalid dimension of ${a} for sizeToDimension as Tensor has ${i.length} dimensions.`);return d2.getSizeFromDimensionRange(i,0,a)}static getSizeFromDimensionRange(i,a,o){let c=1;for(let s=a;s<o;s++){if(i[s]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");c*=i[s]}return c}static computeStrides(i){let a=i.length;if(a===0)return[];if(a===1)return[1];let o=new Array(a);o[a-1]=1,o[a-2]=i[a-1];for(let c=a-3;c>=0;--c)o[c]=o[c+1]*i[c+1];return o}static normalizeAxis(i,a){if(i<-a&&i>=a)throw new Error("unsupported axis for this operation.");return i<0?i+a:i}static normalizeAxes(i,a){return i.map(o=>this.normalizeAxis(o,a??i.length))}static sortBasedOnPerm(i,a){return a?a.map(o=>i[o]):i.slice().reverse()}static padShape(i,a){let o=i.length;return i.map((c,s)=>c+a[s]+a[s+o])}static areEqual(i,a){return i.length!==a.length?!1:i.every((o,c)=>o===a[c])}},pr=class mw{static adjustPoolAttributes(i,a,o,c,s,d){if(!i&&o.length!==a.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(i)for(let et=0;et<a.length-2;et++)et>=o.length?o.push(a[et+2]):o[et]=a[et+2];for(let et=0;et<o.length;et++)if(et<c.length){if(c[et]<0)throw new Error("strides should be greater than or equal to 1")}else c.push(1);for(let et=0;et<o.length;et++)if(et<s.length){if(s[et]<0)throw new Error("dilations should be greater than or equal to 1")}else s.push(1);for(let et=0;et<o.length*2;et++)if(et<d.length){if(d[et]<0)throw new Error("pad should be greater than or equal to 1")}else d.push(0);for(let et=0;et<o.length;et++){if(o[et]<=0)throw new Error("kernel shapes need to be greater than 0");if(d[et]>=o[et]||d[et+o.length]>=o[et])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(i,a,o,c,s,d,et){if(et){if(s.length!==2*(i.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(a.length!==i.length-2)throw new Error("length of strides should be the length of data dimensions");if(c.length!==i.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let $t=0;$t<i.length-2;$t++)mw.adjustPadAndReturnShape(i[$t+(d?1:2)],a[$t],o[$t],c[$t],s,$t,$t+i.length-2,et)}}static computePoolOutputShape(i,a,o,c,s,d,et){if(a.length<=0)throw new Error("input shape must be of size greater than 0");let $t=[a[0],a[1]];return mw.computeShapeHelper(i,a,$t,o,c,s,d,et),$t}static computeConvOutputShape(i,a,o,c,s,d,et){if(i.length<=0||a.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let $t=[i[0],a[0]];return mw.computeShapeHelper(!1,i,$t,o,c,s,d,et),$t}static computeShapeHelper(i,a,o,c,s,d,et,$t){if(i)for(let h=0;h<a.length-2;h++)o.push(1);else for(let h=0;h<a.length-2;h++)o.push(mw.adjustPadAndReturnShape(a[h+2],c[h],s[h],d[h],et,h,h+a.length-2,$t))}static adjustPadAndReturnShape(i,a,o,c,s,d,et,$t){let h=o*(c-1)+1;if($t&&$t!=="NOTSET")switch($t){case"VALID":return s[d]=0,s[et]=0,Math.floor((i-h)/a+1);case"SAME_LOWER":case"SAME_UPPER":if(o!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let b=((i+a-1)/a-1)*a+c-i;return s[d]=Math.floor($t==="SAME_LOWER"?(b+1)/2:b/2),s[et]=b-s[d],Math.floor((i+b-c)/a+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((i+s[d]+s[et]-h)/a+1)}},Gn=class{static getShapeOfGemmResult(e,i,a,o,c){if(e.length!==2||a.length!==2)throw new Error("shape need to be of size 2");let s,d,et;i?(s=e[1],d=e[0]):(s=e[0],d=e[1]);let $t=-1;if(o?(et=a[0],$t=1):(et=a[1],$t=0),a[$t]!==d)throw new Error("dimension mismatch");if(s<=0||et<=0||d<=0)throw new Error("invalid shape specified");if(c&&!zt.isValidBroadcast(c,[s,et]))throw new Error("gemm: invalid bias shape for broadcast");return[s,et,d]}},Ln=-34028234663852886e22,Fn=34028234663852886e22}),mr,eo,De,rt,X,Ue,At,fr,Et,fe,to$1,U,K,qn,Ji,as,Pr,_e=j(()=>{ye(),xe(),mr=64,eo=(e,i)=>{if(i===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(e){case 10:return i>1?`vec${i}<f16>`:"f16";case 1:return i>1?`vec${i}<f32>`:"f32";case 6:return i>1?`vec${i}<i32>`:"i32";case 12:return i>1?`vec${i}<u32>`:"u32";case 7:if(i>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(i>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(i!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error(`Unknown data type: ${e}`)}},De=(e,i=1)=>{let a=eo(e,i);return typeof a=="string"?a:a[0]},rt=(e,i=1)=>{let a=eo(e,i);return typeof a=="string"?a:a[1]},X=(...e)=>{let i=[];return e.forEach(a=>{a.length!==0&&i.push({type:12,data:a},{type:12,data:M.computeStrides(a)})}),i},Ue=e=>e%4===0?4:e%2===0?2:1,At=(e="f32",i,a="0")=>!i||i===1?`${e}(${a})`:`vec${i}<${e}>(${a})`,fr=(e,i,a)=>e==="f32"?a:i===1?`f32(${a})`:`vec${i}<f32>(${a})`,Et=(e,i)=>i===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:i===2?`(${e}.x + ${e}.y)`:i===3?`(${e}.x + ${e}.y + ${e}.z)`:e,fe=(e,i,a,o)=>e.startsWith("uniforms.")&&a>4?typeof i=="string"?o==="f16"?`${e}[(${i}) / 8][(${i}) % 8 / 4][(${i}) % 8 % 4]`:`${e}[(${i}) / 4][(${i}) % 4]`:o==="f16"?`${e}[${Math.floor(i/8)}][${Math.floor(i%8/4)}][${i%8%4}]`:`${e}[${Math.floor(i/4)}][${i%4}]`:a>1?`${e}[${i}]`:e,to$1=(e,i,a,o,c)=>{let s=typeof a=="number",d=s?a:a.length,et=[...new Array(d).keys()],$t=d<2?"u32":d<=4?`vec${d}<u32>`:`array<u32, ${d}>`,h=eo(i,c),b=typeof h=="string"?h:h[1],g=typeof h=="string"?h:h[0],jt={indices:$t,value:b,storage:g,tensor:i},Ht=Bo=>typeof Bo=="string"?Bo:`${Bo}u`,Kt={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},or=s?"uniforms.":"",jr=`${or}${e}_shape`,Lr=`${or}${e}_strides`,ir="";for(let Bo=0;Bo<d-1;Bo++)ir+=`
    let dim${Bo} = current / ${fe(Lr,Bo,d)};
    let rest${Bo} = current % ${fe(Lr,Bo,d)};
    indices[${Bo}] = dim${Bo};
    current = rest${Bo};
    `;ir+=`indices[${d-1}] = current;`;let qr=d<2?"":`
  fn o2i_${e}(offset: u32) -> ${jt.indices} {
    var indices: ${jt.indices};
    var current = offset;
    ${ir}
    return indices;
  }`,vn=Bo=>(Kt.offsetToIndices=!0,d<2?Bo:`o2i_${e}(${Bo})`),xn=[];if(d>=2)for(let Bo=d-1;Bo>=0;Bo--)xn.push(`${fe(Lr,Bo,d)} * (indices[${Bo}])`);let No=d<2?"":`
  fn i2o_${e}(indices: ${jt.indices}) -> u32 {
    return ${xn.join("+")};
  }`,Ro=Bo=>(Kt.indicesToOffset=!0,d<2?Bo:`i2o_${e}(${Bo})`),Xo=(...Bo)=>d===0?"0u":`${jt.indices}(${Bo.map(Ht).join(",")})`,o0=(Bo,x0)=>d<2?`${Bo}`:`${fe(Bo,x0,d)}`,s0=(Bo,x0,A0)=>d<2?`${Bo}=${A0};`:`${fe(Bo,x0,d)}=${A0};`,h0={},E0=(Bo,x0)=>{Kt.broadcastedIndicesToOffset=!0;let A0=`${x0.name}broadcastedIndicesTo${e}Offset`;if(A0 in h0)return`${A0}(${Bo})`;let G0=[];for(let q0=d-1;q0>=0;q0--){let ny=x0.indicesGet("outputIndices",q0+x0.rank-d);G0.push(`${o0(Lr,q0)} * (${ny} % ${o0(jr,q0)})`)}return h0[A0]=`fn ${A0}(outputIndices: ${x0.type.indices}) -> u32 {
             return ${G0.length>0?G0.join("+"):"0u"};
           }`,`${A0}(${Bo})`},C0=(Bo,x0)=>(()=>{if(jt.storage===jt.value)return`${e}[${Bo}]=${x0};`;if(jt.storage==="vec2<u32>"&&jt.value==="i32")return`${e}[${Bo}]=vec2<u32>(u32(${x0}), select(0u, 0xFFFFFFFFu, ${x0} < 0));`;if(jt.storage==="vec2<u32>"&&jt.value==="u32")return`${e}[${Bo}]=vec2<u32>(u32(${x0}), 0u);`;if(jt.storage==="u32"&&jt.value==="vec4<bool>")return`${e}[${Bo}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${x0}));`;throw new Error(`not supported combination of storage type ${jt.storage} and value type ${jt.value} yet`)})(),D0=Bo=>(()=>{if(jt.storage===jt.value)return`${e}[${Bo}]`;if(jt.storage==="vec2<u32>"&&jt.value==="i32")return`i32(${e}[${Bo}].x)`;if(jt.storage==="vec2<u32>"&&jt.value==="u32")return`u32(${e}[${Bo}].x)`;if(jt.storage==="u32"&&jt.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${Bo}] & 0xFFu), bool(${e}[${Bo}] & 0xFF00u), bool(${e}[${Bo}] & 0xFF0000u), bool(${e}[${Bo}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${jt.storage} and value type ${jt.value} yet`)})(),N0=d<2?"":`
  fn get_${e}ByIndices(indices: ${jt.indices}) -> ${b} {
    return ${D0(`i2o_${e}(indices)`)};
  }`,e0=d<2?"":(()=>{let Bo=et.map(A0=>`d${A0}: u32`).join(", "),x0=et.map(A0=>`d${A0}`).join(", ");return`
  fn get_${e}(${Bo}) -> ${b} {
    return get_${e}ByIndices(${Xo(x0)});
  }`})(),l0=(...Bo)=>{if(Bo.length!==d)throw new Error(`indices length must be ${d}`);let x0=Bo.map(Ht).join(",");return d===0?D0("0u"):d===1?D0(x0[0]):(Kt.get=!0,Kt.getByIndices=!0,Kt.indicesToOffset=!0,`get_${e}(${x0})`)},Uo=Bo=>d<2?D0(Bo):(Kt.getByIndices=!0,Kt.indicesToOffset=!0,`get_${e}ByIndices(${Bo})`),c0=d<2?"":`
  fn set_${e}ByIndices(indices: ${jt.indices}, value: ${b}) {
    ${C0(`i2o_${e}(indices)`,"value")}
  }`,$0=d<2?"":(()=>{let Bo=et.map(A0=>`d${A0}: u32`).join(", "),x0=et.map(A0=>`d${A0}`).join(", ");return`
  fn set_${e}(${Bo}, value: ${b}) {
    set_${e}ByIndices(${Xo(x0)}, value);
  }`})();return{impl:()=>{let Bo=[],x0=!1;return Kt.offsetToIndices&&(Bo.push(qr),x0=!0),Kt.indicesToOffset&&(Bo.push(No),x0=!0),Kt.broadcastedIndicesToOffset&&(Object.values(h0).forEach(A0=>Bo.push(A0)),x0=!0),Kt.set&&(Bo.push($0),x0=!0),Kt.setByIndices&&(Bo.push(c0),x0=!0),Kt.get&&(Bo.push(e0),x0=!0),Kt.getByIndices&&(Bo.push(N0),x0=!0),!s&&x0&&Bo.unshift(`const ${jr} = ${jt.indices}(${a.join(",")});`,`const ${Lr} = ${jt.indices}(${M.computeStrides(a).join(",")});`),Bo.join(`
`)},type:jt,offsetToIndices:vn,indicesToOffset:Ro,broadcastedIndicesToOffset:E0,indices:Xo,indicesGet:o0,indicesSet:s0,set:(...Bo)=>{if(Bo.length!==d+1)throw new Error(`indices length must be ${d}`);let x0=Bo[d];if(typeof x0!="string")throw new Error("value must be string");let A0=Bo.slice(0,d).map(Ht).join(",");return d===0?C0("0u",x0):d===1?C0(A0[0],x0):(Kt.set=!0,Kt.setByIndices=!0,Kt.indicesToOffset=!0,`set_${e}(${A0}, ${x0})`)},setByOffset:C0,setByIndices:(Bo,x0)=>d<2?C0(Bo,x0):(Kt.setByIndices=!0,Kt.indicesToOffset=!0,`set_${e}ByIndices(${Bo}, ${x0});`),get:l0,getByOffset:D0,getByIndices:Uo,usage:o,name:e,strides:Lr,shape:jr,rank:d}},U=(e,i,a,o=1)=>to$1(e,i,a,"input",o),K=(e,i,a,o=1)=>to$1(e,i,a,"output",o),qn=(e,i,a,o=1)=>to$1(e,i,a,"internal",o),Ji=class{constructor(e,i){this.normalizedDispatchGroup=e,this.limits=i,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(e){return`if (global_idx >= ${typeof e=="number"?`${e}u`:e}) { return; }`}mainStart(e=mr){let i=typeof e=="number"?e:e[0],a=typeof e=="number"?1:e[1],o=typeof e=="number"?1:e[2];if(i>this.limits.maxComputeWorkgroupSizeX||a>this.limits.maxComputeWorkgroupSizeY||o>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${i}, ${a}, ${o}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(i*a*o>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${i}, ${a}, ${o}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let c=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,s=c?`@builtin(global_invocation_id) global_id : vec3<u32>,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,
                                             @builtin(local_invocation_id) local_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(num_workgroups) num_workgroups : vec3<u32>`,d=c?"let global_idx = global_id.x; let local_idx = local_id.x;":`let global_idx = (workgroup_id.z * num_workgroups[0] * num_workgroups[1] +
          workgroup_id.y * num_workgroups[0] + workgroup_id.x) * ${i*a*o}u + local_idx;`;return`@compute @workgroup_size(${i}, ${a}, ${o})
  fn main(${s}) {
    ${d}
  `}appendVariableUniforms(e){e.rank!==0&&(e.shape.startsWith("uniforms.")&&this.uniforms.push({name:e.shape.replace("uniforms.",""),type:"u32",length:e.rank}),e.strides.startsWith("uniforms.")&&this.uniforms.push({name:e.strides.replace("uniforms.",""),type:"u32",length:e.rank}))}declareVariable(e,i){if(e.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(e),this.appendVariableUniforms(e);let a=e.usage==="input"?"read":"read_write",o=e.type.storage;return`@group(0) @binding(${i}) var<storage, ${a}> ${e.name}: array<${o}>;`}declareVariables(...e){return e.map(i=>this.declareVariable(i,this.variableIndex++)).join(`
`)}registerInternalVariable(e){if(e.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(e),this.appendVariableUniforms(e)}registerInternalVariables(...e){return e.forEach(i=>this.registerInternalVariable(i)),this}registerUniform(e,i,a=1){return this.uniforms.push({name:e,type:i,length:a}),this}registerUniforms(e){return this.uniforms=this.uniforms.concat(e),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let e=[];for(let{name:i,type:a,length:o}of this.uniforms)if(o&&o>4)a==="f16"?e.push(`@align(16) ${i}:array<mat2x4<${a}>, ${Math.ceil(o/8)}>`):e.push(`${i}:array<vec4<${a}>, ${Math.ceil(o/4)}>`);else{let c=o==null||o===1?a:`vec${o}<${a}>`;e.push(`${i}:${c}`)}return`
      struct Uniforms { ${e.join(", ")} };
      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(e=>e.impl()).join(`
`)+this.internalVariables.map(e=>e.impl()).join(`
`)}get variablesInfo(){if(this.uniforms.length===0)return;let e=i=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(i)];return this.uniforms.map(i=>[e(i.type),i.length??1])}},as=(e,i)=>new Ji(e,i),Pr=(e,i)=>{let a=e.length,o=[];for(let c=0;c<a;c++){let s=a-1-c,d=e[s]||1;(i[i.length-1-c]||1)>1&&d===1&&o.unshift(s)}return o}}),Ec,ss,kc,Oc,xt,us,ls,Rr=j(()=>{ye(),xe(),Ze(),_e(),Ec=e=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.")},ss=(e,i)=>i&&i.length!==e?[...new Array(e).keys()].reverse():i,kc=(e,i)=>M.sortBasedOnPerm(e,ss(e.length,i)),Oc=(e,i,a,o)=>{let c=[];c.push(`fn perm(i: ${o.type.indices}) -> ${a.type.indices} {
    var a: ${a.type.indices};`);for(let s=0;s<i;++s)c.push(a.indicesSet("a",e[s],`i[${s}]`));return c.push("return a;}"),c.join(`
`)},xt=(e,i)=>{let a=e.dataType,o=e.dims.length,c=ss(o,i),s=kc(e.dims,c),d=K("output",a,s.length),et=U("a",a,o),$t=h=>`
  ${h.registerUniform("output_size","u32").declareVariables(et,d)}

  ${Oc(c,o,et,d)}

  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${d.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${d.setByOffset("global_idx",et.getByIndices("aIndices"))}
  }`;return{name:"Transpose",shaderCache:{hint:`${i}`,inputDependencies:["rank"]},getRunData:h=>{let b=M.size(s);return{outputs:[{dims:s,dataType:h[0].dataType}],dispatchGroup:{x:Math.ceil(b/64)},programUniforms:[{type:12,data:b},...X(h[0].dims,s)]}},getShaderSource:$t}},us=(e,i)=>{Ec(e.inputs),e.compute(xt(e.inputs[0],i.perm))},ls=e=>we({perm:e.perm})}),Pc,Rc,zc,Bc,Dc,Mc,Uc,Wc,Nc,Vc,Bt,ds,cs,ps,ms,fs,hs,gs,ys,bs,vs,ws=j(()=>{ye(),xe(),_e(),jn(),Rr(),Pc={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},Rc={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},zc={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},Bc={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Dc=(e,i)=>{let a=[];for(let o=i-e;o<i;++o)a.push(o);return a},Mc=(e,i)=>{let a=[],o=e.length;for(let s=0;s<o;s++)i.indexOf(s)===-1&&a.push(e[s]);let c=i.map(s=>e[s]);return[a,c]},Uc=(e,i)=>{let a=e.length+i.length,o=[],c=0;for(let s=0;s<a;s++)i.indexOf(s)===-1?o.push(e[c++]):o.push(1);return o},Wc=(e,i)=>{for(let a=0;a<e.length;++a)if(e[e.length-a-1]!==i-1-a)return!1;return!0},Nc=(e,i)=>{let a=[];if(!Wc(e,i)){for(let o=0;o<i;++o)e.indexOf(o)===-1&&a.push(o);e.forEach(o=>a.push(o))}return a},Vc=(e,i,a,o,c,s,d)=>{let et=a[0].dims,$t=M.size(s),h=M.size(d),b=U("_A",a[0].dataType,et),g=K("output",c,s),jt=32,Ht=`
          var<workgroup> aBestValues : array<f32, ${jt}>;
       `;return{name:e,shaderCache:i,getShaderSource:Kt=>`
        ${Kt.registerUniform("reduceSize","u32").declareVariables(b,g)}
        ${Ht}
        fn DIV_CEIL(a : u32, b : u32) -> u32 {
          return ((a - 1u) / b + 1u);
         }
         ${Kt.mainStart(jt)}

          let outputIndex = global_idx / ${jt};
          let offset = outputIndex * uniforms.reduceSize;

          var bestValue = f32(${zc[o]});
          let Length = uniforms.reduceSize;
          for (var k = local_idx; k < Length; k = k + ${jt}) {
           let candidate = f32(${b.getByOffset("offset + k")});
           bestValue = ${Pc[o]};
          }
          aBestValues[local_idx] = bestValue;
          workgroupBarrier();

         var reduceSize = min(Length, ${jt}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (local_idx < currentSize) {
            let candidate = aBestValues[local_idx + interval];
            bestValue = ${Rc[o]};
            aBestValues[local_idx] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (local_idx == 0u) {
          ${g.setByOffset("outputIndex",`${o==="mean"?`${g.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${g.type.storage}(${Bc[o]})`}`)};
         }
        }`,getRunData:()=>({outputs:[{dims:s,dataType:c}],dispatchGroup:{x:$t},programUniforms:[{type:12,data:h}]})}},Bt=(e,i,a,o)=>{let c=e.inputs.length===1?a:ro(e.inputs,a),s=c.axes;s.length===0&&!c.noopWithEmptyAxes&&(s=e.inputs[0].dims.map((Ht,Kt)=>Kt));let d=M.normalizeAxes(s,e.inputs[0].dims.length),et=d,$t=e.inputs[0],h=Nc(et,e.inputs[0].dims.length);h.length>0&&($t=e.compute(xt(e.inputs[0],h),{inputs:[0],outputs:[-1]})[0],et=Dc(et.length,$t.dims.length));let[b,g]=Mc($t.dims,et),jt=b;c.keepDims&&(jt=Uc(b,d)),e.compute(Vc(i,{hint:c.cacheKey,inputDependencies:["type"]},[$t],o,e.inputs[0].dataType,jt,g),{inputs:[$t]})},ds=(e,i)=>{Bt(e,"ReduceMeanShared",i,"mean")},cs=(e,i)=>{Bt(e,"ReduceL1Shared",i,"l1")},ps=(e,i)=>{Bt(e,"ReduceL2Shared",i,"l2")},ms=(e,i)=>{Bt(e,"ReduceLogSumExpShared",i,"logSumExp")},fs=(e,i)=>{Bt(e,"ReduceMaxShared",i,"max")},hs=(e,i)=>{Bt(e,"ReduceMinShared",i,"min")},gs=(e,i)=>{Bt(e,"ReduceProdShared",i,"prod")},ys=(e,i)=>{Bt(e,"ReduceSumShared",i,"sum")},bs=(e,i)=>{Bt(e,"ReduceSumSquareShared",i,"sumSquare")},vs=(e,i)=>{Bt(e,"ReduceLogSumShared",i,"logSum")}}),Dt,Hc,Kn,ro,Mt,Gc,Lc,Fc,qc,jc,Kc,Yc,Xc,Zc,Qc,Ut,$s,_s,xs,Ss,Cs,Is,Ts,As,Es,ks,jn=j(()=>{ye(),xe(),Ze(),_e(),ws(),Dt=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Hc=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],Kn=(e,i,a,o,c,s,d=!1,et=!1)=>{let $t=[],h=a[0].dims,b=h.length,g=M.normalizeAxes(c,b),jt=!et&&g.length===0;h.forEach((or,jr)=>{jt||g.indexOf(jr)>=0?d&&$t.push(1):$t.push(or)});let Ht=$t.length,Kt=M.size($t);return{name:e,shaderCache:i,getShaderSource:or=>{let jr=[],Lr=U("_A",a[0].dataType,b),ir=K("output",s,Ht),qr=o(Lr,ir,g),vn=qr[2];for(let xn=0,No=0;xn<b;xn++)jt||g.indexOf(xn)>=0?(d&&No++,vn=`for(var j${xn}: u32 = 0; j${xn} < ${h[xn]}; j${xn}++) {
                  ${qr[2].includes("last_index")?`let last_index = j${xn};`:""}
                  ${Lr.indicesSet("input_indices",xn,`j${xn}`)}
                  ${vn}
                }`):(jr.push(`${Lr.indicesSet("input_indices",xn,ir.indicesGet("output_indices",No))};`),No++);return`

        ${or.registerUniform("output_size","u32").declareVariables(Lr,ir)}

        ${or.mainStart()}
          ${or.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var input_indices: ${Lr.type.indices};
          let output_indices = ${ir.offsetToIndices("global_idx")};

          ${jr.join(`
`)}
          ${qr[0]}       // init ops for reduce max/min
          ${qr[1]}
          ${vn}
          ${qr[3]}
          ${qr.length===4?ir.setByOffset("global_idx","value"):qr.slice(4).join(`
`)}
        }`},getRunData:()=>({outputs:[{dims:$t,dataType:s}],dispatchGroup:{x:Math.ceil(Kt/64)},programUniforms:[{type:12,data:Kt},...X(h,$t)]})}},ro=(e,i)=>{let a=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(o=>a.push(Number(o))),we({axes:a,keepDims:i.keepDims,noopWithEmptyAxes:i.noopWithEmptyAxes})},Mt=(e,i,a,o)=>{let c=e.inputs,s=c.length===1?a:ro(c,a);e.compute(Kn(i,{hint:s.cacheKey,inputDependencies:["rank"]},[c[0]],s.noopWithEmptyAxes&&s.axes.length===0?Hc:o,s.axes,c[0].dataType,s.keepDims,s.noopWithEmptyAxes),{inputs:[0]})},Gc=(e,i)=>{Dt(e.inputs),Mt(e,"ReduceLogSum",i,(a,o)=>[`var value = ${o.type.storage}(0);`,"",`value += ${a.getByIndices("input_indices")};`,"value = log(value);"])},Lc=(e,i)=>{Dt(e.inputs),Mt(e,"ReduceL1",i,(a,o)=>[`var value = ${o.type.storage}(0);`,"",`value += abs(${a.getByIndices("input_indices")});`,""])},Fc=(e,i)=>{Dt(e.inputs),Mt(e,"ReduceL2",i,(a,o)=>[`var t = ${o.type.value}(0); var value = ${o.type.value}(0);`,"",`t = ${a.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},qc=(e,i)=>{Dt(e.inputs),Mt(e,"ReduceLogSumExp",i,(a,o)=>[`var value = ${o.type.storage}(0);`,"",`value += exp(${a.getByIndices("input_indices")});`,"value = log(value);"])},jc=(e,i)=>{Dt(e.inputs),Mt(e,"ReduceMax",i,(a,o,c)=>{let s=[];for(let d=0;d<a.rank;d++)(c.indexOf(d)>=0||c.length===0)&&s.push(a.indicesSet("input_indices",d,0));return[`${s.join(`
`)}`,`var value = ${a.getByIndices("input_indices")};`,`value = max(value, ${a.getByIndices("input_indices")});`,""]})},Kc=(e,i)=>{Dt(e.inputs),Mt(e,"ReduceMean",i,(a,o,c)=>{let s=1;for(let d=0;d<a.rank;d++)(c.indexOf(d)>=0||c.length===0)&&(s*=e.inputs[0].dims[d]);return["var sum = f32(0);","",`sum += f32(${a.getByIndices("input_indices")});`,`let value = ${o.type.value}(sum / ${s});`]})},Yc=(e,i)=>{Dt(e.inputs),Mt(e,"ReduceMin",i,(a,o,c)=>{let s=[];for(let d=0;d<a.rank;d++)(c.indexOf(d)>=0||c.length===0)&&s.push(`input_indices[${d}] = 0;`);return[`${s.join(`
`)}`,`var value = ${a.getByIndices("input_indices")};`,`value = min(value, ${a.getByIndices("input_indices")});`,""]})},Xc=(e,i)=>{Dt(e.inputs),Mt(e,"ReduceProd",i,(a,o)=>[`var value = ${o.type.storage}(1);`,"",`value *= ${a.getByIndices("input_indices")};`,""])},Zc=(e,i)=>{Dt(e.inputs),Mt(e,"ReduceSum",i,(a,o)=>[`var value = ${o.type.storage}(0);`,"",`value += ${a.getByIndices("input_indices")};`,""])},Qc=(e,i)=>{Dt(e.inputs),Mt(e,"ReduceSumSquare",i,(a,o)=>[`var t = ${o.type.value}(0); var value = ${o.type.value}(0);`,"",`t = ${a.getByIndices("input_indices")}; value += t * t;`,""])},Ut=(e,i,a)=>{if(i.length===0)return a;let o=1,c=1;for(let s=0;s<i.length;s++)i.indexOf(s)===-1?o*=e[s]:c*=e[s];return c<32&&o>1024},$s=(e,i)=>{Ut(e.inputs[0].dims,i.axes,i.noopWithEmptyAxes)?Kc(e,i):ds(e,i)},_s=(e,i)=>{Ut(e.inputs[0].dims,i.axes,i.noopWithEmptyAxes)?Lc(e,i):cs(e,i)},xs=(e,i)=>{Ut(e.inputs[0].dims,i.axes,i.noopWithEmptyAxes)?Fc(e,i):ps(e,i)},Ss=(e,i)=>{Ut(e.inputs[0].dims,i.axes,i.noopWithEmptyAxes)?qc(e,i):ms(e,i)},Cs=(e,i)=>{Ut(e.inputs[0].dims,i.axes,i.noopWithEmptyAxes)?jc(e,i):fs(e,i)},Is=(e,i)=>{Ut(e.inputs[0].dims,i.axes,i.noopWithEmptyAxes)?Yc(e,i):hs(e,i)},Ts=(e,i)=>{Ut(e.inputs[0].dims,i.axes,i.noopWithEmptyAxes)?Xc(e,i):gs(e,i)},As=(e,i)=>{Ut(e.inputs[0].dims,i.axes,i.noopWithEmptyAxes)?Zc(e,i):ys(e,i)},Es=(e,i)=>{Ut(e.inputs[0].dims,i.axes,i.noopWithEmptyAxes)?Qc(e,i):bs(e,i)},ks=(e,i)=>{Ut(e.inputs[0].dims,i.axes,i.noopWithEmptyAxes)?Gc(e,i):vs(e,i)}}),Os,Ps,Rs,no,zs=j(()=>{ye(),Ze(),jn(),Os=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},Ps=(e,i)=>{Os(e.inputs);let a=(o,c,s)=>{let d=[];for(let et=0;et<o.rank;et++)(s.indexOf(et)>=0||s.length===0)&&d.push(`input_indices[${et}] = 0;`);return[`${d.join(`
`)}`,`var value = ${o.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${i.selectLastIndex>0?"<=":"<"} value) {
         value = ${o.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",c.setByOffset("global_idx","best_index")]};e.compute(Kn("ArgMin",{hint:i.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],a,[i.axis],7,i.keepDims),{inputs:[0]})},Rs=(e,i)=>{Os(e.inputs);let a=(o,c,s)=>{let d=[];for(let et=0;et<o.rank;et++)(s.indexOf(et)>=0||s.length===0)&&d.push(`input_indices[${et}] = 0;`);return[`${d.join(`
`)}`,`var value = ${o.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${i.selectLastIndex>0?">=":">"} value) {
         value = ${o.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",c.setByOffset("global_idx","best_index")]};e.compute(Kn("argMax",{hint:i.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],a,[i.axis],7,i.keepDims),{inputs:[0]})},no=e=>we(e)}),Jc,ep,tp,Yn,Bs,Ds,io=j(()=>{ye(),xe(),Ze(),_e(),Jc=(e,i)=>{if(!e||e.length<1)throw new Error("too few inputs");let a=0,o=e[a],c=o.dataType,s=o.dims.length;e.forEach((d,et)=>{if(et!==a){if(d.dataType!==c)throw new Error("input tensors should be one type");if(d.dims.length!==s)throw new Error("input tensors should have the same shape");d.dims.forEach(($t,h)=>{if(h!==i&&$t!==o.dims[h])throw new Error("non concat dimensions must match")})}})},ep=(e,i)=>`
  fn calculateInputIndex(index: u32) -> u32 {
    let sizeInConcatAxis = array<u32, ${e}u>(${i});
    for (var i: u32 = 0u; i < ${e}; i += 1u ) {
      if (index < sizeInConcatAxis[i]) {
        return i;
      }
    }
    return ${e}u;
  }`,tp=(e,i)=>{let a=e.length,o=[];for(let c=0;c<a;++c){let s=i.setByOffset("global_idx",e[c].getByIndices("indices"));a===1?o.push(s):c===0?o.push(`if (inputIndex == ${c}u) { ${s} }`):c===a-1?o.push(`else { ${s} }`):o.push(`else if (inputIndex == ${c}) { ${s} }`)}return o.join(`
`)},Yn=(e,i,a,o)=>{let c=M.size(a),s=new Array(e.length),d=new Array(e.length),et=0,$t=[],h=[],b=[{type:12,data:c}];for(let or=0;or<e.length;++or)et+=e[or].dims[i],s[or]=et,h.push(e[or].dims.length),d[or]=U(`input${or}`,o,h[or]),$t.push("rank"),b.push({type:12,data:s[or]});for(let or=0;or<e.length;++or)b.push(...X(e[or].dims));b.push(...X(a));let g=K("output",o,a.length),jt=g.indicesGet("indices",i),Ht=Array.from(Array(s.length).keys()).map(or=>`uniforms.sizeInConcatAxis${or}`).join(","),Kt=or=>`

  ${(()=>{or.registerUniform("outputSize","u32");for(let jr=0;jr<e.length;jr++)or.registerUniform(`sizeInConcatAxis${jr}`,"u32");return or.declareVariables(...d,g)})()}

  ${ep(s.length,Ht)}

  ${or.mainStart()}
    ${or.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

    var indices = ${g.offsetToIndices("global_idx")};

    let inputIndex = calculateInputIndex(${jt});
    if (inputIndex != 0u) {
      let sizeInConcatAxis = array<u32, ${s.length}u>(${Ht});
      ${jt} -= sizeInConcatAxis[inputIndex - 1u];
    }

    ${tp(d,g)}
  }`;return{name:"Concat",shaderCache:{hint:`${i}`,inputDependencies:$t},getRunData:()=>({outputs:[{dims:a,dataType:o}],dispatchGroup:{x:Math.ceil(c/64)},programUniforms:b}),getShaderSource:Kt}},Bs=(e,i)=>{let a=e.inputs,o=a[0].dims,c=M.normalizeAxis(i.axis,o.length);Jc(a,c);let s=o.slice();s[c]=a.reduce((et,$t)=>et+($t.dims.length>c?$t.dims[c]:0),0);let d=a.filter(et=>M.size(et.dims)>0);e.compute(Yn(d,c,s,a[0].dataType),{inputs:d})},Ds=e=>we({axis:e.axis})}),rp,np,ip,op,Xn,ap,Ms,oo=j(()=>{ye(),Hn(),_e(),io(),rp=(e,i)=>{let a=e[0],o=e[1],c=e[2],s=e[3],d=e[4],et=e[5];if(d&&et)throw new Error("Attention cannot have both past and relative_position_bias");if(a.dims.length!==3)throw new Error('Input "input" must have 3 dimensions');let $t=a.dims[0],h=a.dims[1],b=a.dims[2];if(c.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimensions');if(o.dims.length!==2)throw new Error('Input "weights" is expected to have 2 dimensions');if(o.dims[0]!==b)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(c.dims[0]!==o.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');let g=c.dims[0]/3,jt=g,Ht=jt;if(i.qkvHiddenSizes.length>0){if(i.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let qr of i.qkvHiddenSizes)if(qr%i.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");g=i.qkvHiddenSizes[0],jt=i.qkvHiddenSizes[1],Ht=i.qkvHiddenSizes[2]}let Kt=h;if(g!==jt)throw new Error("qkv_hidden_sizes first element should be same as the second");if(c.dims[0]!==g+jt+Ht)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');let or=0;if(d){if(jt!==Ht)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(d.dims.length!==5)throw new Error('Input "past" must have 5 dimensions');if(d.dims[0]!==2)throw new Error('Input "past" first dimension must be 2');if(d.dims[1]!==$t)throw new Error('Input "past" second dimension must be batch_size');if(d.dims[2]!==i.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(d.dims[4]!==jt/i.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');i.pastPresentShareBuffer||(or=d.dims[3])}let jr=Kt+or,Lr=-1,ir=0;if(s)throw new Error("Mask not supported");if(d)throw new Error("past is not supported");return{batchSize:$t,sequenceLength:h,pastSequenceLength:or,kvSequenceLength:Kt,totalSequenceLength:jr,maxSequenceLength:Lr,inputHiddenSize:b,hiddenSize:g,vHiddenSize:Ht,headSize:Math.floor(g/i.numHeads),vHeadSize:Math.floor(Ht/i.numHeads),numHeads:i.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:i.maskFilterValue,maskType:ir,scale:i.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},np=(e,i,a,o)=>{let c=Ue(o),s=64,d=o/c;d<s?s=1:d/8<64&&(s=Math.ceil(d/8));let et=Math.ceil(o/c/s),$t=[{type:i.dataType,data:1/o},{type:12,data:d},{type:12,data:et}],h=De(i.dataType,c),b=rt(1,c),g=jt=>{let Ht=K("x",i.dataType,i.dims,c),Kt=[{name:"d_inv",type:rt(i.dataType)},{name:"d_comp",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`
  var<workgroup> thread_max: array<f32, ${s}>;
  var<workgroup> thread_sum: array<f32, ${s}>;
  ${jt.registerUniforms(Kt).declareVariables(Ht)}
  ${jt.mainStart([s,1,1])}
    let local_offset = local_idx * uniforms.elements_per_thread;
    let offset = workgroup_id.x * uniforms.d_comp + local_offset;

    var thread_max_vector = ${b}(-3.402823e+38f);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
      thread_max_vector = max(${b}(x[offset + i]), thread_max_vector);
    }
    thread_max[local_idx] = ${(()=>{switch(c){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${c}`)}})()};
    workgroupBarrier();

    var max_value =  f32(-3.402823e+38f);
    for (var i = 0u; i < ${s}; i++) {
      max_value = max(thread_max[i], max_value);
    }

    var sum_vector = ${b}(0);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
      sum_vector += exp(${b}(x[offset + i]) - max_value);
    }
    thread_sum[local_idx] = ${(()=>{switch(c){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${c}`)}})()};
    workgroupBarrier();

    var sum: f32 = 0;
    for (var i = 0u; i < ${s}; i++) {
      sum += thread_sum[i];
    }

    if (sum == 0) {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
        x[offset + i] = ${Ht.type.value}(uniforms.d_inv);
      }
    } else {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
        var f32input = ${b}(x[offset + i]);
        x[offset + i] = ${Ht.type.value}(exp(f32input - max_value) / sum);
      }
    }
  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${s};${h};${c}`},getShaderSource:g,getRunData:()=>({outputs:[],dispatchGroup:{x:a},programUniforms:$t})}},ip=(e,i,a,o,c,s,d)=>{let et=d+c.kvSequenceLength,$t=[c.batchSize,c.numHeads,c.sequenceLength,et],h=s.scale===0?1/Math.sqrt(c.headSize):s.scale,b=Ue(c.headSize),g=c.headSize/b,jt=12,Ht={x:Math.ceil(et/jt),y:Math.ceil(c.sequenceLength/jt),z:c.batchSize*c.numHeads},Kt=[{type:12,data:c.sequenceLength},{type:12,data:g},{type:12,data:et},{type:12,data:c.numHeads},{type:1,data:h}],or=o?["type","type","type"]:["type","type"],jr=Lr=>{let ir=U("q",i.dataType,i.dims,b),qr=U("key",a.dataType,a.dims,b),vn=[ir,qr];o&&vn.push(U("relative_position_bias",o.dataType,o.dims));let xn=K("output",i.dataType,$t),No=rt(1,b),Ro=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"alpha",type:"f32"}];return`
  const TILE_SIZE = ${jt}u;

  var<workgroup> tileQ: array<${ir.type.storage}, ${jt*jt}>;
  var<workgroup> tileK: array<${ir.type.storage}, ${jt*jt}>;
  ${Lr.registerUniforms(Ro).declareVariables(...vn,xn)}
  ${Lr.mainStart([jt,jt,1])}
    // x holds the N and y holds the M
    let headIdx = workgroup_id.z;
    let m = workgroup_id.y * TILE_SIZE;
    let n = workgroup_id.x * TILE_SIZE;
    let qOffset = uniforms.M * uniforms.K * headIdx + m * uniforms.K;
    let kOffset = uniforms.N * uniforms.K * headIdx + n * uniforms.K;

    var value = ${No}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {
        tileK[TILE_SIZE * local_id.y + local_id.x] = key[kOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      workgroupBarrier();

      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
        value += ${No}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);
      }

      workgroupBarrier();
    }

    let headOffset = headIdx * uniforms.M * uniforms.N;
    if (global_id.y < uniforms.M && global_id.x < uniforms.N) {
      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;
      var sum: f32 = ${(()=>{switch(b){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${b}`)}})()};
        output[outputIdx] = ${xn.type.value} (sum * uniforms.alpha) + ${o?"relative_position_bias[outputIdx]":"0.0"};
    }
  }`};return{name:"AttentionProbs",shaderCache:{hint:`${b}`,inputDependencies:or},getRunData:()=>({outputs:[{dims:$t,dataType:i.dataType,gpuDataType:0}],dispatchGroup:Ht,programUniforms:Kt}),getShaderSource:jr}},op=(e,i,a,o,c)=>{let s=c+o.kvSequenceLength,d=[o.batchSize,o.sequenceLength,o.vHiddenSize],et=12,$t={x:Math.ceil(o.vHeadSize/et),y:Math.ceil(o.sequenceLength/et),z:o.batchSize*o.numHeads},h=[{type:12,data:o.sequenceLength},{type:12,data:s},{type:12,data:o.vHeadSize},{type:12,data:o.numHeads},{type:12,data:o.vHiddenSize}];return{name:"AttentionScore",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:d,dataType:i.dataType,gpuDataType:0}],dispatchGroup:$t,programUniforms:h}),getShaderSource:b=>{let g=U("probs",i.dataType,i.dims),jt=U("v",a.dataType,a.dims),Ht=K("output",i.dataType,d),Kt=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"v_hidden_size",type:"u32"}];return`
  const TILE_SIZE = ${et}u;
  var<workgroup> tileQ: array<${g.type.value}, ${et*et}>;
  var<workgroup> tileK: array<${g.type.value}, ${et*et}>;
  ${b.registerUniforms(Kt).declareVariables(g,jt,Ht)}
  ${b.mainStart([et,et,1])}
   let headIdx = workgroup_id.z;
   let m = global_id.y;
   let n = global_id.x;

   let offsetA = headIdx * (uniforms.M * uniforms.K) + m * uniforms.K;
   let offsetB = headIdx * (uniforms.N * uniforms.K) + n;

   var value = ${g.type.storage}(0);
   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
     if (m < uniforms.M && w + local_id.x < uniforms.K) {
       tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];
     }
     if (n < uniforms.N && w + local_id.y < uniforms.K) {
       tileK[TILE_SIZE * local_id.y + local_id.x] = v[offsetB + (w + local_id.y) * uniforms.N];
     }
     workgroupBarrier();
     for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
       value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * k + local_id.x];
     }
     workgroupBarrier();
   }

   // we need to transpose output from BNSH_v to BSND_v
   let batchIdx = workgroup_id.z / uniforms.num_heads;
   let currentBatchHeadNumber = workgroup_id.z % uniforms.num_heads;
   if (m < uniforms.M && n < uniforms.N) {
     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size
       + currentBatchHeadNumber * uniforms.N + n;
     output[outputIdx] = value;
   }
  }`}}},Xn=(e,i,a,o,c,s,d,et,$t,h,b)=>{let g=e.outputCount>1,jt=e.outputCount>2,Ht=g&&jt?h.pastSequenceLength:0,Kt=Ht+h.kvSequenceLength,or=[h.batchSize,h.numHeads,Kt,h.headSize],jr=d?[d,a]:[a],Lr=g?e.compute(Yn(jr,2,or,a.dataType),{inputs:jr,outputs:[1]})[0]:a,ir=[h.batchSize,h.numHeads,Kt,h.headSize],qr=et?[et,o]:[o],vn=jt?e.compute(Yn(qr,2,ir,o.dataType),{inputs:qr,outputs:[2]})[0]:o,xn=[i,Lr];$t&&xn.push($t);let No=e.compute(ip(e,i,Lr,$t,h,b,Ht),{inputs:xn,outputs:[-1]})[0];e.compute(np(e,No,h.batchSize*h.numHeads*h.sequenceLength,Kt),{inputs:[No],outputs:[]});let Ro=[No,vn];e.compute(op(e,No,vn,h,Ht),{inputs:Ro,outputs:[0]})},ap=(e,i)=>{let a=[i.batchSize,i.numHeads,i.sequenceLength,i.headSize],o=i.sequenceLength,c=i.inputHiddenSize,s=i.headSize,d=12,et={x:Math.ceil(i.headSize/d),y:Math.ceil(i.sequenceLength/d),z:i.batchSize*i.numHeads},$t=[e.inputs[0],e.inputs[1],e.inputs[2]],h=[{type:12,data:o},{type:12,data:c},{type:12,data:s},{type:12,data:i.numHeads},{type:12,data:i.headSize},{type:12,data:i.hiddenSize},{type:12,data:i.hiddenSize+i.hiddenSize+i.vHiddenSize}],b=g=>{let jt=K("output_q",$t[0].dataType,a),Ht=K("output_k",$t[0].dataType,a),Kt=K("output_v",$t[0].dataType,a),or=U("input",$t[0].dataType,$t[0].dims),jr=U("weight",$t[1].dataType,$t[1].dims),Lr=U("bias",$t[2].dataType,$t[2].dims),ir=or.type.storage,qr=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`
  const TILE_SIZE = ${d}u;
  var<workgroup> tileInput: array<${ir}, ${d*d}>;
  var<workgroup> tileWeightQ: array<${ir}, ${d*d}>;
  var<workgroup> tileWeightK: array<${ir}, ${d*d}>;
  var<workgroup> tileWeightV: array<${ir}, ${d*d}>;
  ${g.registerUniforms(qr).declareVariables(or,jr,Lr,jt,Ht,Kt)}
  ${g.mainStart([d,d,1])}
    let batchIndex = workgroup_id.z / uniforms.num_heads;
    let headNumber = workgroup_id.z % uniforms.num_heads;
    let m = global_id.y;
    let n = global_id.x;

    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;
    let biasOffsetQ = headNumber * uniforms.head_size;
    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;
    let biasOffsetV = uniforms.hidden_size + biasOffsetK;

    var valueQ = ${ir}(0);
    var valueK = ${ir}(0);
    var valueV = ${ir}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        let offset = n + (w + local_id.y) * uniforms.ldb;
        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];
        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];
        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];
      }
      workgroupBarrier();
      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {
        let inputTileOffset = TILE_SIZE * local_id.y + k;
        let weightTileOffset = TILE_SIZE * k + local_id.x;
        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];
        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];
        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];
      }

      workgroupBarrier();
    }

    let headOffset = (m * uniforms.N + n) % uniforms.head_size;
    valueQ += bias[headOffset + biasOffsetQ];
    valueK += bias[headOffset + biasOffsetK];
    valueV += bias[headOffset + biasOffsetV];

    let offset = workgroup_id.z * uniforms.M * uniforms.N;
    if (m < uniforms.M && n < uniforms.N) {
      let outputIdx = offset + m * uniforms.N + n;
      output_q[outputIdx] = valueQ;
      output_k[outputIdx] = valueK;
      output_v[outputIdx] = valueV;
    }
  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:a,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:a,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:a,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:et,programUniforms:h}),getShaderSource:b},{inputs:$t,outputs:[-1,-1,-1]})},Ms=(e,i)=>{let a=rp(e.inputs,i),[o,c,s]=ap(e,a);return Xn(e,o,c,s,e.inputs[4],void 0,void 0,void 0,e.inputs[5],a,i)}}),sp,up,lp,Us,Ws=j(()=>{_t(),ye(),xe(),Ze(),_e(),sp=(e,i)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let a=(o,c,s)=>{let d=c.length;if(d!==o.length)throw new Error(`${s}: num dimensions != ${d}`);c.forEach((et,$t)=>{if(et!==o[$t])throw new Error(`${s}: dim[${$t}] do not match`)})};if(e[0].dims.length>1){let o=i.format==="NHWC"?i.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,i.spatial?2:void 0);a(e[1].dims,o,"Invalid input scale"),a(e[2].dims,o,"Invalid input B"),a(e[3].dims,o,"Invalid input mean"),a(e[4].dims,o,"Invalid input var")}else a(e[1].dims,[1],"Invalid input scale"),a(e[2].dims,[1],"Invalid input B"),a(e[3].dims,[1],"Invalid input mean"),a(e[4].dims,[1],"Invalid input var")},up=(e,i)=>{let{epsilon:a,spatial:o,format:c}=i,s=e[0].dims,d=o?Ue(s[s.length-1]):1,et=c==="NHWC"&&s.length>1?d:1,$t=M.size(s)/d,h=o,b=h?s.length:s,g=U("x",e[0].dataType,e[0].dims,d),jt=U("scale",e[1].dataType,e[1].dims,et),Ht=U("bias",e[2].dataType,e[2].dims,et),Kt=U("inputMean",e[3].dataType,e[3].dims,et),or=U("inputVar",e[4].dataType,e[4].dims,et),jr=K("y",e[0].dataType,b,d),Lr=()=>{let qr="";if(o)qr=`let cOffset = ${s.length===1?"0u":c==="NHWC"?`outputIndices[${s.length-1}] / ${d}`:"outputIndices[1]"};`;else if(c==="NCHW")qr=`
            ${jr.indicesSet("outputIndices","0","0")}
            let cOffset = ${jr.indicesToOffset("outputIndices")};`;else{qr=`var cIndices = ${jt.type.indices}(0);
                       cIndices[0] = outputIndices[${s.length-1}];`;for(let vn=1;vn<jt.rank;vn++)qr+=`cIndices[${vn}] = outputIndices[${vn}];`;qr+=`let cOffset = ${jt.indicesToOffset("cIndices")};`}return qr},ir=qr=>`
  const epsilon = ${a};
  ${qr.registerUniform("outputSize","u32").declareVariables(g,jt,Ht,Kt,or,jr)}
  ${qr.mainStart()}
  ${qr.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
    var outputIndices = ${jr.offsetToIndices(`global_idx * ${d}`)};
    ${Lr()}
    let scale = ${jt.getByOffset("cOffset")};
    let bias = ${Ht.getByOffset("cOffset")};
    let inputMean = ${Kt.getByOffset("cOffset")};
    let inputVar = ${or.getByOffset("cOffset")};
    let x = ${g.getByOffset("global_idx")};
    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;
    ${jr.setByOffset("global_idx","value")}
  }`;return{name:"BatchNormalization",shaderCache:{hint:`${i.epsilon}_${i.format}_${o}_${d}`,inputDependencies:h?["rank","type","type","type","type"]:void 0},getShaderSource:ir,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil($t/64)},programUniforms:h?[{type:12,data:$t},...X(s)]:[{type:12,data:$t}]})}},lp=e=>we(e),Us=(e,i)=>{let{inputs:a,outputCount:o}=e,c=lp({...i,outputCount:o});if(ke.webgpu.validateInputContent&&sp(a,c),i.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(up(a,c))}}),dp,cp,Ns,Vs=j(()=>{xe(),_e(),dp=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},cp=e=>{let i=e[0].dims,a=e[0].dims[2],o=M.size(i)/4,c=e[0].dataType,s=U("input",c,i,4),d=U("bias",c,[a],4),et=U("residual",c,i,4),$t=K("output",c,i,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)}}),getShaderSource:h=>`
  const channels = ${a}u / 4;
  ${h.declareVariables(s,d,et,$t)}

  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes(o)}
    let value = ${s.getByOffset("global_idx")}
      + ${d.getByOffset("global_idx % channels")} + ${et.getByOffset("global_idx")};
    ${$t.setByOffset("global_idx","value")}
  }`}},Ns=e=>{dp(e.inputs),e.compute(cp(e.inputs))}}),pp,Pe,Hs,Gs,Ls,Fs,qs,js,Ks,Ys,Xs,mp,Zs,Qs,Js,eu,Zn,tu,Qn,ru,nu,iu,ou,au,su,uu,lu,du,cu,pu,mu,fu,hu,gu,yu,bu,vu,ao,so,wu,$u,_u,Jn=j(()=>{ye(),xe(),Ze(),_e(),pp=(e,i,a,o,c,s)=>{let d=Math.ceil(i/4),et="";typeof c=="string"?et=`${c}(a)`:et=c("a");let $t=U("inputData",a,[d],4),h=K("outputData",o,[d],4);return`
      ${e.registerUniform("vec_size","u32").declareVariables($t,h)}

  ${s??""}

  ${e.mainStart()}
    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}

    let a = ${$t.getByOffset("global_idx")};
    ${h.setByOffset("global_idx",et)}
  }`},Pe=(e,i,a,o,c,s=e.dataType)=>({name:i,shaderCache:{hint:c,inputDependencies:["type"]},getShaderSource:d=>pp(d,M.size(e.dims),e.dataType,s,a,o),getRunData:d=>({outputs:[{dims:e.dims,dataType:s}],dispatchGroup:{x:Math.ceil(M.size(d[0].dims)/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size(e.dims)/4)}]})}),Hs=e=>{e.compute(Pe(e.inputs[0],"Abs","abs"))},Gs=e=>{e.compute(Pe(e.inputs[0],"Acos","acos"))},Ls=e=>{e.compute(Pe(e.inputs[0],"Acosh","acosh"))},Fs=e=>{e.compute(Pe(e.inputs[0],"Asin","asin"))},qs=e=>{e.compute(Pe(e.inputs[0],"Asinh","asinh"))},js=e=>{e.compute(Pe(e.inputs[0],"Atan","atan"))},Ks=e=>{e.compute(Pe(e.inputs[0],"Atanh","atanh"))},Ys=e=>we(e),Xs=(e,i)=>{let a;switch(i.to){case 10:a="vec4<f16>";break;case 1:a="vec4<f32>";break;case 12:a="vec4<u32>";break;case 6:a="vec4<i32>";break;case 9:a="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute 'to' from 'Cast' operator): ${i.to}`)}e.compute(Pe(e.inputs[0],"Cast",a,void 0,i.cacheKey,i.to))},mp=e=>{let i=e.length>=2&&e[1].data!==0?e[1].getFloat32Array()[0]:Ln,a=e.length>=3&&e[2].data!==0?e[2].getFloat32Array()[0]:Fn;return we({min:i,max:a})},Zs=(e,i)=>{let a=e.inputs.length===1?i:mp(e.inputs),o=rt(e.inputs[0].dataType);e.compute(Pe(e.inputs[0],"Clip",c=>`clamp(${c}, clip_min_, clip_max_)`,`
    const clip_min_: vec4<${o}> = vec4(${o}(${a.min}));
    const clip_max_: vec4<${o}> = vec4(${o}(${a.max}));
`,a.cacheKey),{inputs:[0]})},Qs=e=>{e.compute(Pe(e.inputs[0],"Ceil","ceil"))},Js=e=>{e.compute(Pe(e.inputs[0],"Cos","cos"))},eu=e=>{e.compute(Pe(e.inputs[0],"Cosh","cosh"))},Zn=e=>we(e),tu=(e,i)=>{let a=rt(e.inputs[0].dataType);e.compute(Pe(e.inputs[0],"Elu",o=>`elu_vf32(${o})`,`
  const elu_alpha_ = ${a}(${i.alpha});

  fn elu_f32(a: ${a}) -> ${a} {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<${a}>) -> vec4<${a}> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,i.cacheKey))},Qn=(e="f32")=>`
const r0: ${e} = 0.3275911;
const r1: ${e} = 0.254829592;
const r2: ${e} = -0.284496736;
const r3: ${e} = 1.421413741;
const r4: ${e} = -1.453152027;
const r5: ${e} = 1.061405429;

fn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {
  let absv = abs(v);
  let x = 1.0 / (1.0 + r0 * absv);
  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
}`,ru=e=>{let i=rt(e.inputs[0].dataType);e.compute(Pe(e.inputs[0],"Erf",a=>`erf_vf32(${a})`,Qn(i)))},nu=e=>{e.compute(Pe(e.inputs[0],"Exp","exp"))},iu=e=>{e.compute(Pe(e.inputs[0],"Floor","floor"))},ou=e=>{let i=rt(e.inputs[0].dataType);e.compute(Pe(e.inputs[0],"Gelu",a=>`0.5 * ${a} * (1.0 + erf_vf32(${a} * 0.7071067811865475))`,Qn(i)))},au=(e,i)=>{let a=rt(e.inputs[0].dataType);e.compute(Pe(e.inputs[0],"LeakyRelu",o=>`select(leaky_relu_alpha_ * ${o}, ${o}, ${o} >= vec4<${a}>(0.0))`,`const leaky_relu_alpha_ = ${a}(${i.alpha});`,i.cacheKey))},su=e=>{e.compute(Pe(e.inputs[0],"Not",i=>`!${i}`))},uu=e=>{e.compute(Pe(e.inputs[0],"Neg",i=>`-${i}`))},lu=e=>{e.compute(Pe(e.inputs[0],"Reciprocal",i=>`1.0/${i}`))},du=e=>{let i=rt(e.inputs[0].dataType);e.compute(Pe(e.inputs[0],"Relu",a=>`select(vec4<${i}>(0.0), ${a}, ${a} > vec4<${i}>(0.0))`))},cu=e=>{e.compute(Pe(e.inputs[0],"Sigmoid",i=>`(1.0 / (1.0 + exp(-${i})))`))},pu=e=>we(e),mu=(e,i)=>{let a=rt(e.inputs[0].dataType);e.compute(Pe(e.inputs[0],"HardSigmoid",o=>`max(vec4<${a}>(0.0), min(vec4<${a}>(1.0), ${i.alpha} * ${o} + vec4<${a}>(${i.beta})))`,void 0,i.cacheKey))},fu=e=>{e.compute(Pe(e.inputs[0],"Sin","sin"))},hu=e=>{e.compute(Pe(e.inputs[0],"Sinh","sinh"))},gu=e=>{e.compute(Pe(e.inputs[0],"Sqrt","sqrt"))},yu=e=>{e.compute(Pe(e.inputs[0],"Tan","tan"))},bu=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,vu=e=>{e.compute(Pe(e.inputs[0],"Tanh",bu))},ao=(e="f32")=>`
const fast_gelu_a: ${e} = 0.5;
const fast_gelu_b: ${e} = 0.7978845608028654;
const fast_gelu_c: ${e} = 0.035677408136300125;

fn tanh_v(v: vec4<${e}>) -> vec4<${e}> {
  return ${bu("v")};
}
`,so=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,wu=e=>{let i=rt(e.inputs[0].dataType);e.compute(Pe(e.inputs[0],"FastGelu",so,ao(i),void 0,e.inputs[0].dataType))},$u=(e,i)=>{let a=rt(e.inputs[0].dataType);return e.compute(Pe(e.inputs[0],"ThresholdedRelu",o=>`select(vec4<${a}>(0.0), ${o}, ${o} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${a}>(${i.alpha});`,i.cacheKey)),0},_u=e=>{e.compute(Pe(e.inputs[0],"Log","log"))}}),fp,hp,Su,Cu=j(()=>{xe(),_e(),Jn(),fp=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},hp=e=>{let i=e[0].dims.slice();i[2]=i[2]/2;let a=U("input",e[0].dataType,e[0].dims,4),o=U("bias",e[0].dataType,[e[0].dims[2]],4),c=K("output",e[0].dataType,i,4),s=M.size(i)/4,d=De(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)}}),getShaderSource:et=>`
  const M_SQRT2 = sqrt(2.0);
  const halfChannels = ${e[0].dims[2]/4/2}u;

  ${et.declareVariables(a,o,c)}

  ${Qn(d)}

  ${et.mainStart()}
    ${et.guardAgainstOutOfBoundsWorkgroupSizes(s)}
    let biasIdx = global_idx % halfChannels;
    let batchIndex = global_idx / halfChannels;
    let inputOffset = biasIdx + batchIndex * halfChannels * 2;
    let valueLeft = input[inputOffset] + bias[biasIdx];
    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];
    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);

    ${c.setByOffset("global_idx","valueLeft * geluRight")}
  }`}},Su=e=>{fp(e.inputs),e.compute(hp(e.inputs))}}),gp,yp,Wt,Iu,Tu,Au,Eu,ku,Ou,Pu,Ru,zu,Bu,Du=j(()=>{ye(),xe(),_e(),gp=(e,i,a,o,c,s,d,et,$t,h,b,g)=>{let jt,Ht;typeof et=="string"?jt=Ht=(ir,qr)=>`${et}((${ir}),(${qr}))`:typeof et=="function"?jt=Ht=et:(jt=et.scalar,Ht=et.vector);let Kt=K("outputData",b,o.length,4),or=U("aData",$t,i.length,4),jr=U("bData",h,a.length,4),Lr;if(c)if(s){let ir=M.size(i)===1,qr=M.size(a)===1,vn=i.length>0&&i[i.length-1]%4===0,xn=a.length>0&&a[a.length-1]%4===0;ir||qr?Lr=Kt.setByOffset("global_idx",Ht(ir?`${or.type.value}(${or.getByOffset("0")}.x)`:or.getByOffset("global_idx"),qr?`${jr.type.value}(${jr.getByOffset("0")}.x)`:jr.getByOffset("global_idx"))):Lr=`
            let outputIndices = ${Kt.offsetToIndices("global_idx * 4u")};
            let offsetA = ${or.broadcastedIndicesToOffset("outputIndices",Kt)};
            let offsetB = ${jr.broadcastedIndicesToOffset("outputIndices",Kt)};
            ${Kt.setByOffset("global_idx",Ht(d||vn?or.getByOffset("offsetA / 4u"):`${or.type.value}(${or.getByOffset("offsetA / 4u")}[offsetA % 4u])`,d||xn?jr.getByOffset("offsetB / 4u"):`${jr.type.value}(${jr.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}
          `}else Lr=Kt.setByOffset("global_idx",Ht(or.getByOffset("global_idx"),jr.getByOffset("global_idx")));else{if(!s)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let ir=(qr,vn,xn="")=>{let No=`aData[indexA${vn}][componentA${vn}]`,Ro=`bData[indexB${vn}][componentB${vn}]`;return`
            let outputIndices${vn} = ${Kt.offsetToIndices(`global_idx * 4u + ${vn}u`)};
            let offsetA${vn} = ${or.broadcastedIndicesToOffset(`outputIndices${vn}`,Kt)};
            let offsetB${vn} = ${jr.broadcastedIndicesToOffset(`outputIndices${vn}`,Kt)};
            let indexA${vn} = offsetA${vn} / 4u;
            let indexB${vn} = offsetB${vn} / 4u;
            let componentA${vn} = offsetA${vn} % 4u;
            let componentB${vn} = offsetB${vn} % 4u;
            ${qr}[${vn}] = ${xn}(${jt(No,Ro)});
          `};b===9?Lr=`
            var data = vec4<u32>(0);
            ${ir("data",0,"u32")}
            ${ir("data",1,"u32")}
            ${ir("data",2,"u32")}
            ${ir("data",3,"u32")}
            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:Lr=`
            ${ir("outputData[global_idx]",0)}
            ${ir("outputData[global_idx]",1)}
            ${ir("outputData[global_idx]",2)}
            ${ir("outputData[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(or,jr,Kt)}

        ${g??""}

        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${Lr}
      }`},yp=(e,i,a,o,c,s,d=a.dataType)=>{let et=!M.areEqual(a.dims,o.dims),$t=a.dims,h=M.size(a.dims),b=!1,g=!1,jt=[et];if(et){let Ht=zt.calcShape(a.dims,o.dims,!1);if(!Ht)throw new Error("Can't perform binary op on the given tensors");$t=Ht,h=M.size($t);let Kt=M.size(a.dims)===1,or=M.size(o.dims)===1,jr=a.dims.length>0&&a.dims[a.dims.length-1]%4===0,Lr=o.dims.length>0&&o.dims[o.dims.length-1]%4===0;jt.push(Kt),jt.push(or),jt.push(jr),jt.push(Lr);let ir=1;for(let qr=1;qr<$t.length;qr++){let vn=a.dims[a.dims.length-qr]??1,xn=o.dims[o.dims.length-qr]??1;if(vn===xn)ir*=vn;else break}ir%4===0?(g=!0,b=!0):(Kt||or||jr||Lr)&&(b=!0)}else b=!0;return jt.push(b),{name:e,shaderCache:{hint:i+jt.map(Ht=>Ht.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:Ht=>gp(Ht,a.dims,o.dims,$t,b,et,g,c,a.dataType,o.dataType,d,s),getRunData:()=>({outputs:[{dims:$t,dataType:d}],dispatchGroup:{x:Math.ceil(h/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size($t)/4)},...X(a.dims,o.dims,$t)]})}},Wt=(e,i,a,o,c,s)=>{e.compute(yp(i,c??"",e.inputs[0],e.inputs[1],a,o,s))},Iu=e=>{Wt(e,"Add",(i,a)=>`${i}+${a}`)},Tu=e=>{Wt(e,"Div",(i,a)=>`${i}/${a}`)},Au=e=>{Wt(e,"Equal",{scalar:(i,a)=>`u32(${i}==${a})`,vector:(i,a)=>`vec4<u32>(${i}==${a})`},void 0,void 0,9)},Eu=e=>{Wt(e,"Mul",(i,a)=>`${i}*${a}`)},ku=e=>{let i=U("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;Wt(e,"Pow",{scalar:(a,o)=>`pow_custom(${a},${o})`,vector:(a,o)=>`pow_vector_custom(${a},${o})`},`
    fn pow_custom(a : ${i}, b : ${i}) -> ${i} {
      if (b == ${i}(0.0)) {
        return ${i}(1.0);
      } else if (a < ${i}(0.0) && f32(b) != floor(f32(b))) {
        return ${i}(pow(f32(a), f32(b))); // NaN
      }
      return select(sign(a), ${i}(1.0), round(f32(abs(b) % ${i}(2.0))) != 1.0) * ${i}(${i==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));
    }
    fn pow_vector_custom(a : vec4<${i}>, b : vec4<${i}>) -> vec4<${i}> {
      // TODO: implement vectorized pow
      return vec4<${i}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));
    }
      `)},Ou=e=>{Wt(e,"Sub",(i,a)=>`${i}-${a}`)},Pu=e=>{Wt(e,"Greater",{scalar:(i,a)=>`u32(${i}>${a})`,vector:(i,a)=>`vec4<u32>(${i}>${a})`},void 0,void 0,9)},Ru=e=>{Wt(e,"Less",{scalar:(i,a)=>`u32(${i}<${a})`,vector:(i,a)=>`vec4<u32>(${i}<${a})`},void 0,void 0,9)},zu=e=>{Wt(e,"GreaterOrEqual",{scalar:(i,a)=>`u32(${i}>=${a})`,vector:(i,a)=>`vec4<u32>(${i}>=${a})`},void 0,void 0,9)},Bu=e=>{Wt(e,"LessOrEqual",{scalar:(i,a)=>`u32(${i}<=${a})`,vector:(i,a)=>`vec4<u32>(${i}<=${a})`},void 0,void 0,9)}}),kt,Ot,Pt,ei,Zt=j(()=>{ye(),xe(),kt=(e,i,a="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${i}(0.0));`;case"Sigmoid":return`value = (${i}(1.0) / (${i}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${i}(${a}(uniforms.clip_min)), ${i}(${a}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${i}(0.0), min(${i}(1.0), ${a}(uniforms.alpha) * value + ${a}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${a}(uniforms.alpha) * value, value, value >= ${i}(0.0));`;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},Ot=(e,i)=>{e.activation==="Clip"?i.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?i.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&i.push({type:1,data:e.alpha})},Pt=(e,i)=>{e.activation==="Clip"?i.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?i.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&i.push({name:"alpha",type:"f32"})},ei=e=>{let i=(e==null?void 0:e.activation)||"";if(i==="HardSigmoid"){let[a,o]=(e==null?void 0:e.activation_params)||[.2,.5];return{activation:i,alpha:a,beta:o}}else if(i==="Clip"){let[a,o]=(e==null?void 0:e.activation_params)||[Ln,Fn];return{activation:i,clipMax:o,clipMin:a}}else if(i==="LeakyRelu"){let[a]=(e==null?void 0:e.activation_params)||[.01];return{activation:i,alpha:a}}return{activation:i}}}),nt,ti,ri=j(()=>{nt=(e,i)=>{switch(e){case 1:return i;case 2:return`vec2<${i}>`;case 3:return`vec3<${i}>`;case 4:return`vec4<${i}>`;default:throw new Error(`${e}-component is not supported.`)}},ti=e=>`
      ${e?"value = value + getBiasByOutputCoords(coords);":""}
      `}),ni,uo=j(()=>{ni=e=>`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));
}
`}),vp,wp,rn,Mu,$p,nn,_p,ii,on=j(()=>{ye(),xe(),_e(),Zt(),ri(),vp=(e,i)=>e?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol${i?", batchIndices":""});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol${i?", batchIndices":""});
        `,wp=(e,i)=>e?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${i===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${i===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${i===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`,rn=(e,i,a="f32",o,c=!1,s=32,d=!1,et=32)=>{let $t=i[1]*e[1],h=i[0]*e[0],b=c?$t:s,g=c?s:$t,jt=b/i[0],Ht=s/i[1];if(!((c&&jt===4&&e[1]===4||!c&&(jt===3||jt===4))&&b%i[0]===0&&s%i[1]===0&&e[0]===4))throw new Error(`If transposeA ${c} is true, innerElementSize ${jt} and workPerThread[1] ${e[1]} must be 4.
      Otherwise, innerElementSize ${jt} must be 3 or 4.
  tileAWidth ${b} must be divisible by workgroupSize[0]${i[0]}. tileInner ${s} must be divisible by workgroupSize[1] ${i[1]}. colPerThread ${e[0]} must be 4.`);return`
var<workgroup> mm_Asub: array<array<vec${jt}<${a}>, ${b/jt}>, ${g}>;
var<workgroup> mm_Bsub: array<array<vec4<${a}>, ${h/e[0]}>, ${s}>;

const rowPerThread = ${e[1]};
const colPerThread = ${e[0]};
const innerElementSize = ${jt};
const tileInner = ${s};

@compute @workgroup_size(${i[0]}, ${i[1]}, ${i[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = localRow * rowPerThread;
  let tileCol = i32(localId.x);

  let globalRow =i32(globalId.y) * rowPerThread;
  let globalCol = i32(globalId.x);
  let batch = ${d?"0":"i32(globalId.z)"};
  ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}
  let globalRowStart = i32(workgroupId.y) * ${$t};

  let num_tiles = ${d?`${Math.ceil(et/s)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
  var kStart = ${d?`i32(globalId.z) * ${et}`:"0"};

  var acc: array<vec4<${a}>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${Ht};
  for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${vp(c,o)}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${Ht}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${o?", batchIndices":""});
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${jt===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${wp(c,jt)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`},Mu=(e,i)=>e?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol${i?", batchIndices":""});
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol${i?", batchIndices":""});
            `,$p=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",nn=(e,i,a="f32",o,c=!1,s=32,d=!1,et=32,$t=!1)=>{let h=e[1]*i[1],b=e[0]*i[0],g=c?h:s,jt=c?s:h;if(!(jt%i[1]===0&&g%i[0]===0&&s%i[1]===0))throw new Error(`tileAHight ${jt} must be divisible by workgroupSize[1]${i[1]}, tileAWidth ${g} must be divisible by workgroupSize[0]${i[0]}, tileInner ${s} must be divisible by workgroupSize[1]${i[1]}`);let Ht=jt/i[1],Kt=g/i[0],or=s/i[1],jr=$t?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${h};
    let globalColStart = i32(workgroupId.x) * ${b};

    // Loop over shared dimension.
    for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${jt}; inputRow = inputRow + ${i[1]}) {
        for (var inputCol = localCol; inputCol < ${g}; inputCol = inputCol + ${i[0]}) {
          ${Mu(c,o)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${s}; inputRow = inputRow + ${i[1]}) {
            for (var inputCol = localCol; inputCol < ${b}; inputCol = inputCol + ${i[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol${o?", batchIndices":""});
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<${a}, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${i[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${c?`mm_Asub[k][localRow + innerRow * ${i[1]}];`:`mm_Asub[localRow + innerRow * ${i[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${i[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${i[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${h};

let tileRowA = i32(localId.y) * ${Ht};
let tileColA = i32(localId.x) * ${Kt};
let tileRowB = i32(localId.y) * ${or};
// Loop over shared dimension.
for (var t = 0; t < num_tiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${Ht}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${Kt}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${Mu(c,o)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${or}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol${o?", batchIndices":""});
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<${a}, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${$p(c)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<${a}, ${g}>, ${jt}>;
  var<workgroup> mm_Bsub : array<array<${a}, ${b}>, ${s}>;
  const rowPerThread = ${e[1]};
  const colPerThread = ${e[0]};
  const tileInner = ${s};

@compute @workgroup_size(${i[0]}, ${i[1]}, ${i[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${d?"0":"i32(globalId.z)"};
    ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}
    let num_tiles = ${d?`${Math.ceil(et/s)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
    var kStart = ${d?`i32(globalId.z) * ${et}`:"0"};

    var acc : array<array<${a}, colPerThread>, rowPerThread>;

    // Without this initialization strange values show up in acc.
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = 0.0;
      }
    }
    ${jr}
  }
`},_p=(e,i,a,o,c,s=!1)=>{let[d,et,$t]=c,[h,b,g,jt]=o,Ht=Pr(d,$t),Kt=Pr(et,$t),or=De(o[0].type.tensor),jr=()=>{let ir=b.rank,qr=h.rank,vn=`var aIndices: ${b.type.indices};`;for(let xn=ir-2-1,No=qr-1;xn>=0;xn--,No--)vn+=`
aIndices[${xn}] = ${qr>1?`batchIndices[${No}]`:"batchIndices"};`;return Ht.forEach(xn=>{vn+=`
aIndices[${xn}] = 0;`}),vn+=`
aIndices[${ir-2}] = u32(row);
                   aIndices[${ir-1}] = u32(colIn);`,vn},Lr=()=>{let ir=g.rank,qr=h.rank,vn=`var bIndices: ${g.type.indices};`;for(let xn=ir-2-1,No=qr-1;xn>=0;xn--,No--)vn+=`
bIndices[${xn}] = ${qr>1?`batchIndices[${No}]`:"batchIndices"};`;return Kt.forEach(xn=>{vn+=`
bIndices[${xn}] = 0;`}),vn+=`
bIndices[${ir-2}] = u32(row);
                   bIndices[${ir-1}] = u32(colIn);`,vn};return`
    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${h.type.indices}) -> ${nt(e,or)} {
      var value = ${nt(e,or)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)
      {
        ${jr()}
        value = ${b.getByIndices("aIndices")};
      }
      return value;
    }

    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${h.type.indices}) -> ${nt(e,or)} {
      var value = ${nt(e,or)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)
      {
        ${Lr()}
        value = ${g.getByIndices("bIndices")};
      }
      return value;
    }

    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${nt(e,or)}) {
      let col = colIn * ${e};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
        var value = valueIn;
        let coords = vec3<i32>(batch, row, colIn);
        ${i?`value = value + ${s?"bias[colIn]":`${nt(e,or)}(bias[row])`};`:""}
        ${a}
        ${jt.setByIndices("vec3<u32>(coords)","value")}
      }
    }
    `},ii=(e,i,a,o,c=!1)=>{let s=e[0].dims,d=e[1].dims,et=s.slice(0,-2),$t=d.slice(0,-2),h=o?o.slice(0,-2):a.slice(0,-2),b=M.size(h),g=s[s.length-2],jt=s[s.length-1],Ht=d[d.length-1],Kt=jt%4===0&&Ht%4===0,or=g<=8?[4,1,1]:[4,4,1],jr=[8,8,1],Lr=[Math.ceil(Ht/jr[0]/or[0]),Math.ceil(g/jr[1]/or[1]),Math.ceil(b/jr[2]/or[2])],ir=Kt?4:1,qr=[...et,g,jt/ir],vn=qr.length,xn=[...$t,jt,Ht/ir],No=xn.length,Ro=[b,g,Ht/ir],Xo=[{type:6,data:g},{type:6,data:Ht},{type:6,data:jt}];Ot(i,Xo),Xo.push(...X(h,qr,xn));let o0=["rank","rank"],s0=e.length>2;s0&&(Xo.push(...X(e[2].dims)),o0.push("rank")),Xo.push(...X(Ro));let h0=E0=>{let C0=h.length,D0=qn("batchDims",e[0].dataType,C0,1),N0=De(e[0].dataType),e0=U("a",e[0].dataType,vn,ir),l0=U("b",e[1].dataType,No,ir),Uo=K("result",e[0].dataType,Ro.length,ir),c0=[e0,l0];if(s0){let G0=c?ir:1;c0.push(U("bias",e[2].dataType,e[2].dims.length,G0))}let $0=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Pt(i,$0);let Bo=De(Uo.type.tensor),x0=kt(i,Uo.type.value,Bo),A0=_p(ir,s0,x0,[D0,e0,l0,Uo],[et,$t,h],c);return`
  ${E0.registerUniforms($0).registerInternalVariables(D0).declareVariables(...c0,Uo)}
  ${A0}
  ${Kt?rn(or,jr,N0,D0):nn(or,jr,N0,D0)}
                   `};return{name:"MatMul",shaderCache:{hint:`${or};${i.activation};${Kt};${c}`,inputDependencies:o0},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Lr[0],y:Lr[1],z:Lr[2]},programUniforms:Xo}),getShaderSource:h0}}}),xp,Uu,Wu=j(()=>{ye(),Xt(),_e(),Zt(),ri(),uo(),on(),xp=(e,i,a,o,c=!1,s,d=4,et=4,$t=4,h="f32")=>{let b=o0=>{switch(o0){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${h}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${o0} is not supported.`)}},g=o0=>{switch(o0){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${o0} is not supported.`)}},jt=e?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,Ht=e?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,Kt=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",or=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",jr=e?"row":"col",Lr=e?"col":"row",ir=`
    let inChannels = i32(uniforms.w_shape[2]);
    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
    let outRow = ${jr} / outWidth;
    let outCol = ${jr} % outWidth;

    let WRow = ${Lr} / (i32(uniforms.w_shape[1]) * inChannels);
    let WCol = ${Lr} / inChannels % i32(uniforms.w_shape[1]);
    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];
    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];
    let xCh = ${Lr} % inChannels;
    var resData = ${nt(d,h)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${Kt} && xCol >= 0 && xCol < ${or}) {
      ${jt}
      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));
      ${b(d)}
    }
    return resData;`,qr=e?i&&o?`
    let col = colIn * ${d};
    ${ir}`:`
    let col = colIn * ${d};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
      ${ir}
    }
    return ${nt(d,h)}(0.0);`:o&&a?`
    let col = colIn * ${d};
    ${ir}`:`
    let col = colIn * ${d};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${ir}
    }
    return ${nt(d,h)}(0.0);`,vn=`${g(et)}`,xn=nt($t,h),No=nt(e?d:et,h),Ro=nt(e?et:d,h),Xo=kt(s,xn,h);return`
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${No} {
      ${e?qr:vn}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${Ro} {
      ${e?vn:qr}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${xn}) {
      let col = colIn * ${$t};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)
      {
      var value = valueIn;
      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${Ht}
      ${ti(c)}
      ${Xo}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`},Uu=(e,i,a,o,c,s,d,et)=>{let $t=i.format==="NHWC",h=$t?e[0].dims[3]:e[0].dims[1],b=a[0],g=$t?a[2]:a[3],jt=$t?a[1]:a[2],Ht=$t?a[3]:a[1],Kt=$t&&(h%4===0||h%3===0)&&Ht%4===0,or=$t?Ht:g*jt,jr=$t?g*jt:Ht,Lr=[8,8,1],ir=o<=8?[4,1,1]:[4,4,1],qr=[Math.ceil(or/Lr[0]/ir[0]),Math.ceil(jr/Lr[1]/ir[1]),Math.ceil(b/Lr[2]/ir[2])];Ne("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${qr}`);let vn=Kt?$t&&h%4!==0?3:4:1,xn=Lr[1]*ir[1],No=Lr[0]*ir[0],Ro=Math.max(Lr[0]*vn,Lr[1]),Xo=o%xn===0,o0=c%No===0,s0=s%Ro===0,h0=Kt?[vn,4,4]:[1,1,1],E0=[{type:6,data:o},{type:6,data:c},{type:6,data:s},{type:6,data:[i.pads[0],i.pads[1]]},{type:6,data:i.strides},{type:6,data:i.dilations}];Ot(i,E0),E0.push(...X(e[0].dims,e[1].dims));let C0=["rank","rank"];d&&(E0.push(...X(e[2].dims)),C0.push("rank")),E0.push(...X(a));let D0=N0=>{let e0=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Pt(i,e0);let l0=Kt?4:1,Uo=De(e[0].dataType),c0=`
      fn setOutputAtIndex(flatIndex : i32, value : ${Kt?`vec4<${Uo}>`:Uo}) {
        result[flatIndex] = ${Kt?`vec4<${Uo}>`:Uo}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${Kt?`vec4<${Uo}>`:Uo}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${Kt?"/ 4":""}, value);
      }`,$0=U("x",e[0].dataType,e[0].dims.length,vn===3?1:vn),Bo=U("w",e[1].dataType,e[1].dims.length,l0),x0=[$0,Bo],A0=K("result",e[0].dataType,a.length,l0);if(d){let G0=U("bias",e[2].dataType,e[2].dims.length,l0);x0.push(G0),c0+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${Kt?`vec4<${Uo}>`:Uo} {
          return bias[coords.${$t?"w":"y"}${Kt?"/ 4":""}];
        }`}return`
        ${ni("uniforms.result_strides")}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${N0.registerUniforms(e0).declareVariables(...x0,A0)}
        ${c0}
        ${xp($t,Xo,o0,s0,d,i,h0[0],h0[1],h0[2],Uo)}
        ${Kt?rn(ir,Lr,Uo,void 0,!$t,Ro):nn(ir,Lr,Uo,void 0,!$t,Ro,!1,void 0,et)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${i.cacheKey};${vn};${Kt};${Xo};${o0};${s0};${xn};${No};${Ro}`,inputDependencies:C0},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:qr[0],y:qr[1],z:qr[2]},programUniforms:E0}),getShaderSource:D0}}}),lo,Nu,Vu=j(()=>{ye(),xe(),_e(),co(),Zt(),lo=(e,i,a)=>{let o=e.length>2,c=o?"value += b[output_channel];":"",s=e[0].dims,d=e[1].dims,et=d[0]/i.group,$t=i.format==="NHWC",h=oi(s,d,i.dilations,i.pads,i.strides,$t),b=M.size(h),g=[{type:12,data:b},{type:12,data:i.dilations},{type:12,data:[i.strides[0],i.strides[1]]},{type:12,data:[i.pads[0],i.pads[1]]},{type:12,data:et}];Ot(i,g),g.push(...X(s,d));let jt=["rank","rank"];o&&(g.push(...X(e[2].dims)),jt.push("rank")),g.push(...X(h));let Ht=Kt=>{let or=K("output",e[0].dataType,h.length),jr=De(or.type.tensor),Lr=kt(i,or.type.value,jr),ir=U("x",e[0].dataType,s.length),qr=U("w",e[1].dataType,d.length),vn=[ir,qr];o&&vn.push(U("b",e[2].dataType,e[2].dims.length));let xn=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:i.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];return Pt(i,xn),`
  ${Kt.registerUniforms(xn).declareVariables(...vn,or)}

  ${Kt.mainStart()}
    ${Kt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let outputIndices = ${or.offsetToIndices("global_idx")};
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${$t?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${$t?1:2}], outputIndices[${$t?2:3}]) * uniforms.strides - uniforms.pads;
    let group_id: u32 = output_channel / uniforms.output_channels_per_group;

    var value: ${or.type.value} = ${or.type.value}(0);
    for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {
      let input_channel = group_id * uniforms.w_shape[1] + wInChannel;
      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

        if (xHeight < 0u || xHeight >= uniforms.x_shape[${$t?1:2}]) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
          if (xWidth < 0u || xWidth >= uniforms.x_shape[${$t?2:3}]) {
            continue;
          }

          let xVal = ${$t?ir.get("batch","xHeight","xWidth","input_channel"):ir.get("batch","input_channel","xHeight","xWidth")};
          let wVal = ${qr.get("output_channel","wInChannel","wHeight","wWidth")};
          value += xVal*wVal;
        }
      }
    }
    ${c}
    ${Lr}
    ${or.setByOffset("global_idx","value")}
  }`};return{name:"GroupedConv",shaderCache:{hint:i.cacheKey,inputDependencies:jt},getRunData:()=>({outputs:[{dims:a?a(h):h,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(b/64)},programUniforms:g}),getShaderSource:Ht}},Nu=(e,i,a)=>{let o=e.length>2,c=Ue(a[3]),s=Ue(a[2]),d=M.size(a)/c/s,et=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/c],$t=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/c],h=[a[0],a[1],a[2],a[3]/c],b=[{type:12,data:d},{type:6,data:[i.strides[0],i.strides[1]]},{type:6,data:[i.pads[0],i.pads[1]]}];Ot(i,b),b.push(...X(et,$t,h));let g=(s-1)*i.strides[1]+$t[1],jt=Ht=>{let Kt=K("output",e[0].dataType,h.length,c),or=De(Kt.type.tensor),jr=kt(i,Kt.type.value,or),Lr=U("x",e[0].dataType,et.length,c),ir=U("w",e[1].dataType,$t.length,c),qr=[Lr,ir];o&&qr.push(U("b",e[2].dataType,e[2].dims,c));let vn=o?"value += b[output_channel];":"",xn=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Pt(i,xn),`
  ${Ht.registerUniforms(xn).declareVariables(...qr,Kt)}
  ${Ht.mainStart()}
    ${Ht.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let width0 = uniforms.output_shape[3];
    let output_channel = global_idx % width0;
    var index1 = global_idx / width0;
    let width1 = uniforms.output_shape[2] / ${s}u;
    let col = (index1 % width1) * ${s}u;
    index1 = index1 / width1;
    let row = index1 % uniforms.output_shape[1];
    let batch = index1 / uniforms.output_shape[1];

    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;

    var x_vals: array<${Lr.type.value}, ${g}>;
    var values: array<${Kt.type.value}, ${s}>;
    let input_channel = output_channel;
    // Use constant instead of uniform can give better performance for w's height/width.
    for (var w_height: u32 = 0u; w_height < ${$t[0]}; w_height++) {
      let x_height = x_corner.x + i32(w_height);
      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {
        for (var i = 0; i < ${g}; i++) {
          let x_width = x_corner.y + i;
          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {
            x_vals[i] = ${Lr.get("batch","u32(x_height)","u32(x_width)","input_channel")};
          } else {
            x_vals[i] = ${Lr.type.value}(0);
          }
        }
        for (var w_width: u32 = 0u; w_width < ${$t[1]}; w_width++) {
          let w_val = ${ir.get("w_height","w_width","0","output_channel")};
          for (var i = 0u; i < ${s}u; i++) {
            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);
          }
        }
      }
    }

    for (var i = 0u; i < ${s}u; i++) {
      var value = values[i];
      ${vn}
      ${jr}
      ${Kt.set("batch","row","col + i","output_channel","value")};
    }
  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${i.cacheKey};${c};${s};${g};${$t[0]};${$t[1]}`,inputDependencies:o?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:b}),getShaderSource:jt}}}),po,Sp,Hu,mo=j(()=>{ye(),xe(),on(),_e(),Zt(),po=(e,i,a,o,c=!1)=>{let s=e[0].dims,d=e[1].dims,et=s[s.length-2],$t=d[d.length-1],h=s[s.length-1],b=Ue($t),g=Ue(h),jt=Ue(et),Ht=M.size(a)/b/jt,Kt=e.length>2,or=o?o.slice(0,-2):a.slice(0,-2),jr=[M.size(or),et,$t],Lr=[{type:12,data:Ht},{type:12,data:et},{type:12,data:$t},{type:12,data:h}];Ot(i,Lr),Lr.push(...X(or,s,d)),Kt&&Lr.push(...X(e[2].dims)),Lr.push(...X(jr));let ir=qr=>{let vn=qn("batch_dims",e[0].dataType,or.length),xn=U("a",e[0].dataType,s.length,g),No=U("b",e[1].dataType,d.length,b),Ro=K("output",e[0].dataType,jr.length,b),Xo=De(Ro.type.tensor),o0=kt(i,Ro.type.value,Xo),s0=[xn,No],h0="";if(Kt){let c0=c?b:1;s0.push(U("bias",e[2].dataType,e[2].dims.length,c0)),h0=`${c?`value += bias[col / ${c0}];`:`value += ${Ro.type.value}(bias[row + i]);`}`}let E0=s.slice(0,-2),C0=d.slice(0,-2),D0=Pr(E0,or),N0=Pr(C0,or),e0=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Pt(i,e0);let l0=(c0,$0)=>{let Bo=c0.rank,x0=c0.name;if(Bo===2)return`var ${x0}_indices = ${c0.type.indices}(0u, 0u);`;let A0=vn.rank,G0=`var ${x0}_indices: ${c0.type.indices};`;for(let q0=Bo-2-1,ny=A0-1;q0>=0;q0--,ny--)G0+=`
${x0}_indices[${q0}] = ${A0>1?`batch_indices[${ny}]`:"batch_indices"};`;return $0.forEach(q0=>{G0+=`
${x0}_indices[${q0}] = 0;`}),G0+=`${x0}_indices[${Bo-2}] = 0u;
                     ${x0}_indices[${Bo-1}] = 0u;`,G0},Uo=()=>{let c0=`var a_data: ${xn.type.value};`;for(let $0=0;$0<g;$0++)c0+=`
              let b_data${$0} = b[(b_offset + (k + ${$0}) * uniforms.N + col) / ${b}];`;for(let $0=0;$0<jt;$0++){c0+=`a_data = a[(a_offset + (row + ${$0}) * uniforms.K + k) / ${g}];`;for(let Bo=0;Bo<g;Bo++)c0+=`
            values[${$0}] = fma(${No.type.value}(a_data${g===1?"":`[${Bo}]`}), b_data${Bo}, values[${$0}]);
`}return c0};return`
  ${qr.registerUniforms(e0).registerInternalVariables(vn).declareVariables(...s0,Ro)}
  ${qr.mainStart()}
    ${qr.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let col = (global_idx % (uniforms.N / ${b})) * ${b};
    var index1 = global_idx / (uniforms.N / ${b});
    let stride1 = uniforms.M / ${jt};
    let row = (index1 % stride1) * ${jt};
    let batch = index1 / stride1;

    ${a.length===2?"":`let batch_indices = ${vn.offsetToIndices("batch")};`}
    ${l0(xn,D0)}
    let a_offset = ${xn.indicesToOffset("a_indices")};
    ${l0(No,N0)}
    let b_offset = ${No.indicesToOffset("b_indices")};
    var values: array<${Ro.type.value}, ${jt}>;
    for (var k: u32 = 0u; k < uniforms.K; k = k + ${g}) {
      ${Uo()}
    }
    for (var i = 0u; i < ${jt}u; i++) {
      var value = values[i];
      ${h0}
      ${o0}
      let cur_indices = ${Ro.type.indices}(batch, row + i, col);
      let offset = ${Ro.indicesToOffset("cur_indices")};
      ${Ro.setByOffset(`offset / ${b}`,"value")};
    }
  }
  `};return{name:"MatMulNaive",shaderCache:{hint:`${i.activation};${b};${g};${jt};${c}`,inputDependencies:Kt?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(Ht/64)},programUniforms:Lr}),getShaderSource:ir}},Sp=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},Hu=e=>{Sp(e.inputs);let i=zt.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!i)throw new Error("Can't use matmul on the given tensors");let a=i[i.length-1],o=e.inputs[0].dims[e.inputs[0].dims.length-1];a<8&&o<8?e.compute(po(e.inputs,{activation:""},i)):e.compute(ii(e.inputs,{activation:""},i))}}),oi,fo,Cp,Gu,ho,Ip,Tp,go,co=j(()=>{xe(),Wu(),on(),Vu(),Zt(),mo(),Rr(),oi=(e,i,a,o,c,s)=>{let d=e[0],et=e.slice(s?1:2,s?3:4),$t=et.length,h=i[0],b=i.slice(2).map((jt,Ht)=>jt+(jt-1)*(a[Ht]-1)),g=et.map((jt,Ht)=>jt+o[Ht]+o[Ht+$t]).map((jt,Ht)=>Math.floor((jt-b[Ht]+c[Ht])/c[Ht]));return g.splice(0,0,d),g.splice(s?3:1,0,h),g},fo=[2,3,1,0],Cp=(e,i)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support conv 1D and 2D");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let a=e[0].dims[i.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[1]*i.group;if(a!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let c=e[0].dims.length-2;if(i.dilations.length!==c)throw new Error(`dilations should be ${c}D`);if(i.strides.length!==c)throw new Error(`strides should be ${c}D`);if(i.pads.length!==c*2)throw new Error(`pads should be ${c*2}D`);if(i.kernelShape.length!==0&&i.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},Gu=(e,i)=>{let a=e.kernelShape.slice();for(let s=2;s<i[1].dims.length;++s)a[s-2]===0&&(a[s-2]=i[1].dims[s]);let o=e.pads.slice();pr.adjustPadsBasedOnAutoPad(i[0].dims,e.strides,e.dilations,a,o,e.format==="NHWC",e.autoPad);let c=Object.assign({},e);return Object.assign(c,{kernelShape:a,pads:o}),c},ho=e=>{let i=ei(e),a=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],c=e.dilations,s=e.group,d=e.kernel_shape,et=e.pads,$t=e.strides,h=e.w_is_const();return{autoPad:o,format:a,dilations:c,group:s,kernelShape:d,pads:et,strides:$t,wIsConst:h,...i,cacheKey:`${e.format};${i.activation};`}},Ip=(e,i,a)=>{let o=Gu(a,i),c=a.format==="NHWC";if(a.group!==1){if(!e.adapterInfo.isArchitecture("ampere")&&c&&i[1].dims[0]===a.group&&i[1].dims[1]===1&&a.dilations[0]===1&&a.dilations[1]===1){let No=oi(i[0].dims,i[1].dims,a.dilations,o.pads,a.strides,c),Ro=e.kernelCustomData.wT??e.compute(xt(i[1],fo),{inputs:[1],outputs:[a.wIsConst?-2:-1]})[0];a.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=Ro);let Xo=[i[0],Ro];i.length===3&&Xo.push(i[2]),e.compute(Nu(Xo,o,No),{inputs:Xo})}else e.compute(lo(i,o));return}let s=i.length===3,d=i[0].dims[c?1:2],et=i[0].dims[c?2:3],$t=i[0].dims[c?3:1],h=i[1].dims[2],b=i[1].dims[3],g=oi(i[0].dims,i[1].dims,a.dilations,o.pads,a.strides,c),jt=g[c?1:2],Ht=g[c?2:3],Kt=g[c?3:1],or=c&&h===d&&b===et&&a.pads[0]===0&&a.pads[1]===0;if(or||h===1&&b===1&&a.dilations[0]===1&&a.dilations[1]===1&&a.strides[0]===1&&a.strides[1]===1&&a.pads[0]===0&&a.pads[1]===0){let No=g[0],Ro,Xo,o0,s0=[];if(c){let C0=e.kernelCustomData.wT??e.compute(xt(i[1],fo),{inputs:[1],outputs:[a.wIsConst?-2:-1]})[0];if(a.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=C0),or){let D0=d*et*$t;Ro=i[0].reshape([1,No,D0]),Xo=C0.reshape([1,D0,Kt]),o0=[1,No,Kt]}else Ro=i[0].reshape([No,d*et,$t]),Xo=C0.reshape([1,$t,Kt]),o0=[No,jt*Ht,Kt];s0.push(Ro),s0.push(Xo)}else Ro=i[0].reshape([No,$t,d*et]),Xo=i[1].reshape([1,Kt,$t]),o0=[No,Kt,jt*Ht],s0.push(Xo),s0.push(Ro);s&&s0.push(i[2]);let h0=o0[2],E0=s0[0].dims[s0[0].dims.length-1];h0<8&&E0<8?e.compute(po(s0,o,g,o0,c),{inputs:s0}):e.compute(ii(s0,o,g,o0,c),{inputs:s0});return}let jr=!0,Lr=e.kernelCustomData.wT??e.compute(xt(i[1],fo),{inputs:[1],outputs:[a.wIsConst?-2:-1]})[0];a.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=Lr);let ir=[i[0],Lr];s&&ir.push(i[2]);let qr=c?jt*Ht:Kt,vn=c?Kt:jt*Ht,xn=h*b*$t;e.compute(Uu(ir,o,g,qr,vn,xn,s,jr),{inputs:ir})},Tp=(e,i)=>{let a=i.format==="NHWC",o=[e.inputs[0].reshape(a?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&o.push(e.inputs[2]);let c=[0,i.pads[0],0,i.pads[1]],s=[1].concat(i.strides),d=[1].concat(i.dilations),et=[1].concat(i.kernelShape),$t=Gu({...i,pads:c,strides:s,dilations:d,kernelShape:et},o);e.compute(lo(o,$t,h=>a?[h[0],h[2],h[3]]:[]))},go=(e,i)=>{Cp(e.inputs,i),e.inputs[0].dims.length===3?Tp(e,i):Ip(e,e.inputs,i)}}),Ap,Lu,Fu=j(()=>{ye(),Xt(),_e(),Zt(),ri(),uo(),on(),Ap=(e,i=!1,a,o,c=4)=>{let s=jr=>{switch(jr){case 1:return"return w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];";case 4:return`
            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);
            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);
            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);
            let v0 = w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];
            let v1 = w[getIndexFromCoords4D(coord1, vec4<i32>(uniforms.w_shape))];
            let v2 = w[getIndexFromCoords4D(coord2, vec4<i32>(uniforms.w_shape))];
            let v3 = w[getIndexFromCoords4D(coord3, vec4<i32>(uniforms.w_shape))];
            return ${o}(v0, v1, v2, v3);
            `;default:throw new Error(`innerElementSize ${jr} is not supported.`)}},d=e?`
      let coord = vec4<i32>(batch, iXR, iXC, xCh);
      `:`
      let coord = vec4<i32>(batch, xCh, iXR, iXC);
      `,et=e?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,$t=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",h=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",b=e?"row":"col",g=e?"col":"row",jt=`
      let inChannels = ${e?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};
      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      let outRow = ${b} / outWidth;
      let outCol = ${b} % outWidth;

      let WRow = ${g} / (uniforms.filter_dims[1] * inChannels);
      let WCol = ${g} / inChannels % uniforms.filter_dims[1];
      let xR = f32(outRow - uniforms.pads[0] + uniforms.dilations[0] * WRow) / f32(uniforms.strides[0]);
      let xC = f32(outCol - uniforms.pads[1] + uniforms.dilations[1] * WCol) / f32(uniforms.strides[1]);
      if (xR < 0.0 || xR >= f32(${$t}) || fract(xR) > 0.0) {
        return ${o}(0.0);
      }
      if (xC < 0.0 || xC >= f32(${h}) || fract(xC) > 0.0) {
        return ${o}(0.0);
      }
      let iXR = i32(xR);
      let iXC = i32(xC);
      let xCh = ${g} % inChannels;
      ${d}
      return x[getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape))/${c}];`,Ht=e?`
      let col = colIn * ${c};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
        ${jt}
      }
      return ${o}(0.0);`:`
      let col = colIn * ${c};
      if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
        ${jt}
      }
      return ${o}(0.0);`,Kt=`
      let col = colIn * ${c};
      let inChannels = ${e?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};
      let coordX = uniforms.filter_dims[0] - 1 - row / (uniforms.filter_dims[1] * inChannels);
      let coordY = uniforms.filter_dims[1] - 1 - (row / inChannels) % uniforms.filter_dims[1];
      if (${e?"row < uniforms.dim_inner && col < uniforms.dim_b_outer":"row < uniforms.dim_inner && col < uniforms.dim_a_outer"}  && coordX >= 0 && coordY >= 0) {
        let rowInner = row % inChannels;
        let coord = vec4<i32>(coordX, coordY, col, rowInner);
        ${s(c)}
      }
      return ${o}(0.0);
      `,or=kt(a,o);return`
  fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${o} {
    ${e?Ht:Kt}
  }

  fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${o} {
    ${e?Kt:Ht}
  }

  fn mm_write(batch: i32, row : i32, colIn : i32, valueInput : ${o}) {
    let col = colIn * ${c};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
      var value = valueInput;
      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${et}
      ${ti(i)}
      ${or}
      result[getIndexFromCoords4D(coords, vec4<i32>(uniforms.result_shape))/${c}] = value;
    }
  }`},Lu=(e,i,a,o,c,s,d,et)=>{let $t=i.format==="NHWC",h=$t?e[0].dims[3]:e[0].dims[1],b=a[0],g=$t?a[2]:a[3],jt=$t?a[1]:a[2],Ht=$t?a[3]:a[1],Kt=$t&&h%4===0&&h%3&&Ht%4===0,or=$t?Ht:g*jt,jr=$t?g*jt:Ht,Lr=[8,8,1],ir=o<=8?[4,1,1]:[4,4,1],qr=[Math.ceil(or/Lr[0]/ir[0]),Math.ceil(jr/Lr[1]/ir[1]),Math.ceil(b/Lr[2]/ir[2])];Ne("verbose",()=>`[conv_backprop_mm_webgpu] dispatch = ${qr}`);let vn=Kt?4:1,xn=Math.max(Lr[0]*vn,Lr[1]),No=Kt?4:1,Ro=[i.kernelShape[$t?1:2],i.kernelShape[$t?2:3]],Xo=[Ro[0]+(i.dilations[0]<=1?0:(Ro[0]-1)*(i.dilations[0]-1)),Ro[1]+(i.dilations[1]<=1?0:(Ro[1]-1)*(i.dilations[1]-1))],o0=[Xo[0]-1-Math.floor((i.pads[0]+i.pads[2])/2),Xo[1]-1-Math.floor((i.pads[1]+i.pads[3])/2)],s0=[{type:6,data:o},{type:6,data:c},{type:6,data:s},{type:6,data:i.strides},{type:6,data:i.dilations},{type:6,data:Ro},{type:6,data:o0}];Ot(i,s0),s0.push(...X(e[0].dims,e[1].dims));let h0=["rank","rank"];d&&(s0.push(...X(e[2].dims)),h0.push("rank")),s0.push(...X(a));let E0=C0=>{let D0=U("x",e[0].dataType,e[0].dims.length,No),N0=U("w",e[1].dataType,e[1].dims.length,1),e0=K("result",e[0].dataType,a.length,No),l0=[D0,N0],Uo="";if(d){let Bo=U("bias",e[2].dataType,e[2].dims.length,No);l0.push(Bo),Uo+=`
          fn getBiasByOutputCoords(coords : vec4<i32>) -> ${Bo.type.value} {
            return bias[coords.${$t?"w":"y"}${Kt?"/ 4":""}];
          }`}let c0=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"strides",type:"i32",length:2},{name:"dilations",type:"i32",length:2},{name:"filter_dims",type:"i32",length:Ro.length},{name:"pads",type:"i32",length:o0.length}];Pt(i,c0);let $0=De(e[0].dataType,1);if($0!=="f16"&&$0!=="f32")throw new Error(`elemType ${$0} is not supported.`);return`
        ${ni("uniforms.result_strides")}
        ${C0.registerUniforms(c0).declareVariables(...l0,e0)};
        ${Uo}
        ${Ap($t,d,i,D0.type.value,vn)}
        ${Kt?rn(ir,Lr,$0,void 0,!$t,xn):nn(ir,Lr,$0,void 0,!$t,xn,!1,void 0,et)}`};return{name:"Conv2DTransposeMatMul",shaderCache:{hint:`${i.cacheKey};${ir};${Lr};${Kt}`,inputDependencies:h0},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:qr[0],y:qr[1],z:qr[2]},programUniforms:s0}),getShaderSource:E0}}}),Ep,yo,qu=j(()=>{ye(),Xt(),xe(),_e(),Ep=(e,i,a,o,c,s=!1,d,et,$t=!1)=>{let h=$t?1:2,b=$t?2:3,g=$t?3:1,jt=s?2:1,Ht=`
  fn setOutputAtIndex(flatIndex : u32, value : ${s?`vec4<${d}>`:d}) {
    result[flatIndex] = ${s?`vec4<${d}>`:d}(value);
  }`;o&&(Ht+=`
    fn getBiasByOutputCoords(coords : vec4<u32>) -> ${s?`vec4<${d}>`:d} {
      return bias[coords.${$t?"w":"y"}${s?"/ 4":""}];
    }`);let Kt=s?4:1,or=U("W",i[1].dataType,i[1].dims.length,Kt),jr=U("Dy",i[0].dataType,i[0].dims.length,Kt),Lr=[jr,or];o&&Lr.push(U("bias",i[2].dataType,[a[g]].length,Kt));let ir=K("result",i[0].dataType,a.length,Kt),qr=`{
        let batch: u32 = ${c?"global_id.z":"workgroup_id.z"} / uniforms.result_shape[1];
        let r = ${c?"global_id.z":"workgroup_id.z"} % uniforms.result_shape[1];
        let c = ${c?"global_id.y":"workgroup_id.y"} * ${jt};
        let d1: u32 = ${c?"global_id.x":"workgroup_id.x"} * 4;

        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(uniforms.pads);

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        var dotProd: array<vec4<${d}>, ${jt}>;
        for (var i = 0; i < ${jt}; i++) {
          dotProd[i] = vec4<${d}>(0.0);
        }
        for (var wR: u32 = 0; wR < uniforms.filter_dims[0]; wR = wR + 1) {
          var dyR = (${d}(dyCorner.x) + ${d}(wR)) / ${d}(uniforms.strides.x);
          let wRPerm = uniforms.filter_dims[0] - 1 - wR;
          if (dyR < 0.0 || dyR >= ${d}(uniforms.Dy_shape[1]) ||
              fract(dyR) > 0.0 || wRPerm < 0) {
            continue;
          }
          let idyR: u32 = u32(dyR);

          for (var wC: u32 = 0; wC < uniforms.filter_dims[1]; wC = wC + 1) {
            let dyC = (${d}(dyCorner.y) + ${d}(wC)) / ${d}(uniforms.strides.y);
            let dyC2 = (${d}(dyCorner.y) + 1.0 + ${d}(wC)) / ${d}(uniforms.strides.y);
            let wCPerm = uniforms.filter_dims[1] - 1 - wC;
            if (wCPerm < 0) {
              continue;
            }
            var bDyCVal = true;
            var bDyCVal2 = true;
            if (dyC < 0.0 || dyC >= ${d}(uniforms.Dy_shape[2]) ||
                fract(dyC) > 0.0) {
              bDyCVal = false;
            }
            if (dyC2 < 0.0 || dyC2 >= ${d}(uniforms.Dy_shape[2]) ||
                fract(dyC2) > 0.0) {
              bDyCVal2 = false;
            }

            let idyC: u32 = u32(dyC);
            let idyC2: u32 = u32(dyC2);
            if (bDyCVal && bDyCVal2) {
              let d2Length = uniforms.Dy_shape[3];
              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${or.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${or.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${or.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${or.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${jr.get("batch","idyR","idyC","d2")};
                let tmpval = vec4<${d}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[0] = dotProd[0] + tmpval;

                xValue =  ${jr.get("batch","idyR","idyC2","d2")};

                dotProd[1] = dotProd[1] + vec4<${d}>(dot(xValue, wValue0),
                                                    dot(xValue, wValue1),
                                                    dot(xValue, wValue2),
                                                    dot(xValue, wValue3));
              }
            } else if (bDyCVal) {
              let d2Length = uniforms.Dy_shape[${g}];
              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${or.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${or.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${or.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${or.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${jr.get("batch","idyR","idyC","d2")};
                let tmpval = vec4<${d}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[0] = dotProd[0] + tmpval;
              }
            } else if (bDyCVal2) {
              let d2Length = uniforms.Dy_shape[3];
              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${or.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${or.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${or.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${or.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${jr.get("batch","idyR","idyC2","d2")};
                let tmpval = vec4<${d}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[1] = dotProd[1] + tmpval;
              }
            }
          }
        }

        for (var i: u32 = 0; i < ${jt}; i = i + 1) {
          let value = dotProd[i] + ${o?"bias[c+i]":`vec4<${d}>(0.0)`};
          ${ir.set("batch","r","c + i","d1","value")};
        }
      }`,vn=`
          let outputIndices = ${ir.offsetToIndices("global_idx")};
          let batch = ${ir.indicesGet("outputIndices",0)};
          let d1 = ${ir.indicesGet("outputIndices",g)};
          let r = ${ir.indicesGet("outputIndices",h)};
          let c = ${ir.indicesGet("outputIndices",b)};
          let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;
          let dyRCorner = dyCorner.x;
          let dyCCorner = dyCorner.y;
          let groupId = d1 / uniforms.output_channels_per_group;
          let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;
          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
          // ? = to be determined. : = across all values in that axis.
          var dotProd = ${d}(0.0);
          for (var wR: u32 = 0; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {
            if (wR % uniforms.dilations.x != 0) {
              continue;
            }
            let dyR = (${d}(dyRCorner) + ${d}(wR)) / ${d}(uniforms.strides[0]);
            let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;
            if (dyR < 0.0 || dyR >= ${d}(uniforms.Dy_shape[${h}]) || fract(dyR) > 0.0 ||
                wRPerm < 0) {
              continue;
            }
            let idyR: u32 = u32(dyR);

            for (var wC: u32 = 0; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {
              if (wC % uniforms.dilations.y != 0) {
                continue;
              }
              let dyC = (${d}(dyCCorner) + ${d}(wC)) / ${d}(uniforms.strides.y);
              let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;
              if (dyC < 0.0 || dyC >= ${d}(uniforms.Dy_shape[${b}]) ||
                  fract(dyC) > 0.0 || wCPerm < 0) {
                continue;
              }
              let idyC: u32 = u32(dyC);
              var inputChannel = groupId * uniforms.input_channels_per_group;
              for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group; d2 = d2 + 1) {
                let xValue = ${$t?jr.get("batch","idyR","idyC","inputChannel"):jr.get("batch","inputChannel","idyR","idyC")};
                let wValue = ${or.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)")};
                dotProd = dotProd + xValue * wValue;
                inputChannel = inputChannel + 1;
              }
            }
          }
          let value = dotProd + ${o?"bias[d1]":`${d}(0.0)`};
          ${ir.setByOffset("global_idx","value")};
        `;return`
  ${e.registerUniforms(et).declareVariables(...Lr,ir)}
  ${Ht}

    ${e.mainStart()}
    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};
  ${s?qr:vn}}`},yo=(e,i,a)=>{let o=e.length>2,c=i.outputShape,s=M.size(c),d=[Math.ceil(s/64),1,1];Ne("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${d}`);let et=i.format==="NHWC",$t=["rank","rank"],h=[i.strides[0],i.strides[1]],b=[i.kernelShape[et?1:2],i.kernelShape[et?2:3]],g=[i.dilations[0],i.dilations[1]],jt=[b[0]+(i.dilations[0]<=1?0:(i.kernelShape[et?1:2]-1)*(i.dilations[0]-1)),b[1]+(i.dilations[1]<=1?0:(i.kernelShape[et?2:3]-1)*(i.dilations[1]-1))],Ht=[jt[0]-1-Math.floor((i.pads[0]+i.pads[2])/2),jt[1]-1-Math.floor(i.pads[1]+i.pads[3])/2],Kt=!1,or=i.group,jr=e[1].dims,Lr=jr[0]/or,ir=jr[1],qr=[{type:12,data:s},{type:12,data:h},{type:12,data:b},{type:12,data:g},{type:12,data:jt},{type:6,data:Ht},{type:12,data:Lr},{type:12,data:ir},...X(e[0].dims,e[1].dims)];o&&(qr.push(...X(e[2].dims)),$t.push("rank")),qr.push(...X(c));let vn=d[1]===1&&d[2]===1,xn=No=>{let Ro=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:h.length},{name:"filter_dims",type:"u32",length:b.length},{name:"dilations",type:"u32",length:b.length},{name:"effective_filter_dims",type:"u32",length:jt.length},{name:"pads",type:"i32",length:Ht.length},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],Xo=De(e[0].dataType);return`${Ep(No,e,c,o,vn,Kt,Xo,Ro,et)}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${i.cacheKey};`,inputDependencies:$t},getRunData:()=>({dispatchGroup:{x:d[0],y:d[1],z:d[2]},outputs:[{dims:a?a(c):c,dataType:e[0].dataType}],programUniforms:qr}),getShaderSource:xn}}}),kp,Op,Pp,ju,Ku,Rp,zp,Bp,Dp,Yu,Xu=j(()=>{Fu(),qu(),Zt(),Rr(),kp=(e,i,a,o,c,s)=>(e-1)*i+a+(o-1)*c+1-s,Op=(e,i,a,o,c)=>{let s=Math.floor(e/2);i==="SAME_UPPER"?(a[o]=s,a[c]=e-s):i==="SAME_LOWER"&&(a[o]=e-s,a[c]=s)},Pp=(e,i,a,o,c,s,d,et,$t,h)=>{let b=e.length-2,g=h.length===0;if($t.length===0)for(let Kt=0;Kt<b;++Kt)$t.push(0);let jt=e[0],Ht=i[et?3:1]*c;for(let Kt=0,or=e.length-b-(et?1:0);Kt<b;++Kt,++or){let jr=e[or],Lr=g?jr*d[Kt]:h[Kt],ir=kp(jr,d[Kt],s[Kt],i[or],a[Kt],Lr);Op(ir,o,s,Kt,Kt+b),g&&h.push(d[Kt]*(jr-1)+$t[Kt]+(i[or]-1)*a[Kt]+1-s[Kt]-s[Kt+b])}h.splice(0,0,jt),h.splice(et?3:1,0,Ht)},ju=(e,i)=>{let a=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((g,jt)=>g*jt,1)===0){a.length=0;for(let g=2;g<i[1].dims.length;++g)a.push(i[1].dims[g])}let o=e.format==="NHWC";a.splice(0,0,i[1].dims[0]),a.splice(o?3:1,0,i[1].dims[1]);let c=e.pads.slice(),s=e.outputShape.slice(),d=e.outputPadding.slice(),et=i[0].dims,$t=e.dilations.slice();if($t.reduce((g,jt)=>g+jt,0)===0){let g=i[0].dims.length-2;$t=new Array(g).fill(1)}let h=e.strides.slice();if(h.reduce((g,jt)=>g+jt,0)===0){let g=i[0].dims.length-2;h=new Array(g).fill(1)}Pp(et,a,$t,e.autoPad,e.group,c,h,o,d,s);let b=Object.assign({},e);return Object.assign(b,{kernelShape:a,pads:c,outputPadding:d,outputShape:s,dilations:$t,strides:h}),b},Ku=e=>{let i=ei(e),a=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],c=e.dilations,s=e.group,d=e.kernelShape,et=e.pads,$t=e.strides,h=e.wIsConst(),b=e.outputPadding,g=e.outputShape;return{autoPad:o,format:a,dilations:c,group:s,kernelShape:d,outputPadding:b,outputShape:g,pads:et,strides:$t,wIsConst:h,...i,cacheKey:`${e.format};${i.activation};`}},Rp=(e,i)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let a=e[0].dims[i.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[0];if(a!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let c=e[1].dims[1]*i.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==c))throw new Error("invalid bias");let s=e[0].dims.length-2;if(i.dilations.reduce((d,et)=>d+et,0)>0&&i.dilations.length!==s)throw new Error(`dilations should be ${s}D`);if(i.strides.reduce((d,et)=>d+et,0)>0&&i.strides.length!==s)throw new Error(`strides should be ${s}D`);if(i.pads.reduce((d,et)=>d+et,0)>0&&i.pads.length!==s*2)throw new Error(`pads should be ${s*2}D`);if(i.outputPadding.length!==s&&i.outputPadding.length!==0)throw new Error(`output_padding should be ${s}D`);if(i.kernelShape.reduce((d,et)=>d+et,0)>0&&i.kernelShape.length!==0&&i.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(i.outputShape.length!==0&&i.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},zp=[2,3,1,0],Bp=(e,i,a)=>{let o=ju(a,i),c=a.format==="NHWC",s=o.outputShape,d=s[c?3:1],et=i[0].dims[c?3:1];if(o.group!==1||d===1&&et===1){e.compute(yo(i,o));return}let $t=s[c?1:2],h=s[c?2:3],b=i[1].dims[2],g=i[1].dims[3],jt=c?$t*h:d,Ht=c?d:$t*h,Kt=b*g*et,or=!0,jr=e.kernelCustomData.wT??e.compute(xt(i[1],zp),{inputs:[1],outputs:[a.wIsConst?-2:-1]})[0];a.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=jr);let Lr=[i[0],jr],ir=i.length===3;ir&&(!c&&i[2].dims.length===1?Lr.push(i[2].reshape([i[2].dims[0],1,1])):Lr.push(i[2])),e.compute(Lu(Lr,o,s,jt,Ht,Kt,ir,or),{inputs:Lr})},Dp=(e,i)=>{let a=i.format==="NHWC",o=[e.inputs[0].reshape(a?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&o.push(e.inputs[2]);let c=i.kernelShape;(c.length===0||c[0]===0)&&(c=[e.inputs[1].dims[2]]);let s=i.dilations;(s.length===0||s[0]===0)&&(s=[1]);let d=i.strides;(d.length===0||d[0]===0)&&(d=[1]);let et=i.pads;et.length===0&&(et=[0,0]),et=[0,et[0],0,et[1]],d=[1].concat(d),s=[1].concat(s),c=[1].concat(c);let $t=ju({...i,pads:et,strides:d,dilations:s,kernelShape:c},o);e.compute(yo(o,$t,h=>a?[h[0],h[2],h[3]]:[h[0],h[1],h[3]]))},Yu=(e,i)=>{Rp(e.inputs,i),e.inputs[0].dims.length===3?Dp(e,i):Bp(e,e.inputs,i)}}),Mp,Zu,Qu,Ju=j(()=>{ye(),xe(),Ze(),_e(),Mp=(e,i,a,o)=>{let c=M.size(i),s=i.length,d=U("input",e,s),et=K("output",e,s),$t=a.dataType===6?a.getInt32Array()[0]:Number(a.getBigInt64Array()[0]),h=M.normalizeAxis($t,s),b=g=>{let jt=` i32(${d.indicesGet("inputIndices","uniforms.axis")}) `,Ht=fe("uniforms.input_shape","uniforms.axis",s),Kt=o.reverse?jt+(o.exclusive?" + 1":""):"0",or=o.reverse?Ht:jt+(o.exclusive?"":" + 1");return`
                ${g.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(d,et)}
                ${g.mainStart()}
                  ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
                  var inputIndices = ${et.offsetToIndices("global_idx")};
                  var sum = ${et.type.value}(0);
                  let first : i32 = ${Kt};
                  let last : i32 = ${or};
                  for (var i : i32 = first; i < last; i++) {
                    ${d.indicesSet("inputIndices","uniforms.axis","u32(i)")};
                    sum = sum + ${d.getByIndices("inputIndices")};
                  }
                  ${et.setByOffset("global_idx","sum")};
                }`};return{name:"CumSum",shaderCache:{hint:o.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:i,dataType:e}],dispatchGroup:{x:Math.ceil(c/64)},programUniforms:[{type:12,data:c},{type:12,data:h},...X(i,i)]}),getShaderSource:b}},Zu=(e,i)=>{let a=e.inputs[0].dims,o=e.inputs[0].dataType,c=e.inputs[1];e.compute(Mp(o,a,c,i),{inputs:[0]})},Qu=e=>{let i=e.exclusive===1,a=e.reverse===1;return we({exclusive:i,reverse:a})}}),Up,Wp,Np,el,tl,rl=j(()=>{ye(),xe(),Ze(),_e(),Up=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},Wp=(e,i,a,o)=>{let c=[];c.push(`fn perm(i: ${o.type.indices}) -> ${a.type.indices} {
    var a: ${a.type.indices};`);for(let s=0;s<i;++s)c.push(a.indicesSet("a",e[s],`i[${s}]`));return c.push("return a;}"),c.join(`
`)},Np=(e,i)=>{let a,o,c,s,d,et,$t=i.format==="NHWC",h=i.blocksize,b=i.mode==="DCR";$t?([a,o,c,s]=e.dims,d=b?[a,o,c,h,h,s/h**2]:[a,o,c,s/h**2,h,h],et=b?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([a,o,c,s]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],d=b?[a,h,h,s/h**2,o,c]:[a,s/h**2,h,h,o,c],et=b?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let g=e.reshape(d),jt=g.dims.length,Ht=e.dataType,Kt=U("a",Ht,jt),or=K("output",Ht,jt),jr=Lr=>`
  ${Lr.registerUniform("output_size","u32").declareVariables(Kt,or)}

  ${Wp(et,jt,Kt,or)}

  ${Lr.mainStart()}
    ${Lr.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${or.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${or.setByOffset("global_idx",Kt.getByIndices("aIndices"))}
  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${i.blocksize};${i.mode}`,inputDependencies:["rank"]},getRunData:Lr=>{let ir=$t?[a,o*h,c*h,s/h**2]:[a,s/h**2,o*h,c*h],qr=M.size(ir),vn=g.dims,xn=M.sortBasedOnPerm(vn,et);return{outputs:[{dims:ir,dataType:Lr[0].dataType}],dispatchGroup:{x:Math.ceil(qr/64)},programUniforms:[{type:12,data:qr},...X(vn,xn)]}},getShaderSource:jr}},el=(e,i)=>{Up(e.inputs),e.compute(Np(e.inputs[0],i))},tl=e=>we({blocksize:e.blocksize,mode:e.mode,format:e.format})}),bo,ai,nl,Vp,Hp,vo,wo,il,Gp,ol,al,sl=j(()=>{ye(),xe(),Ze(),_e(),bo="[a-zA-Z]|\\.\\.\\.",ai="("+bo+")+",nl="^"+ai+"$",Vp="("+ai+",)*"+ai,Hp="^"+Vp+"$",vo=class{constructor(e=-1){this.symbolToIndices=new Map,this.inputIndex=e}addSymbol(e,i){let a=this.symbolToIndices.get(e);a===void 0?a=[i]:a.push(i),this.symbolToIndices.set(e,a)}},wo=class{constructor(e,i){var c;this.equation=i,this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[a,o]=i.includes("->")?i.split("->",2):[i,""];if(!a.match(RegExp(Hp)))throw new Error("Invalid LHS term");if(a.split(",").forEach((s,d)=>{let et=e[d].dims.slice();if(!s.match(RegExp(nl)))throw new Error("Invalid LHS term");let $t=this.processTerm(s,!0,et,d);this.lhs.push($t)}),o==="")o+=[...this.symbolToInfo.entries()].filter(([s,d])=>d.count===1||s==="...").map(([s])=>s).join("");else if(!o.match(RegExp(ai)))throw new Error("Invalid RHS");(c=o.match(RegExp(bo,"g")))==null||c.forEach(s=>{if(s==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let d=this.symbolToInfo.get(s);if(d===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(d.dimValue)}}),this.rhs=this.processTerm(o,!1,this.outputDims)}addSymbol(e,i,a){let o=this.symbolToInfo.get(e);if(o!==void 0){if(o.dimValue!==i&&o.count!==1)throw new Error("Dimension mismatch");o.count++,o.inputIndices.push(a)}else o={count:1,dimValue:i,inputIndices:[a]};this.symbolToInfo.set(e,o)}processTerm(e,i,a,o=-1){let c=a.length,s=!1,d=[],et=0;if(!e.match(RegExp(nl))&&!i&&e!=="")throw new Error("Invalid LHS term");let $t=e.match(RegExp(bo,"g")),h=new vo(o);return $t==null||$t.forEach((b,g)=>{if(b==="..."){if(s)throw new Error("Only one ellipsis is allowed per input term");s=!0;let jt=c-$t.length+1;if(jt<0)throw new Error("Ellipsis out of bounds");if(d=a.slice(et,et+jt),this.hasEllipsis){if(this.ellipsisDims.length!==d.length||this.ellipsisDims.toString()!==d.toString())throw new Error("Ellipsis dimensions mismatch")}else if(i)this.hasEllipsis=!0,this.ellipsisDims=d;else throw new Error("Ellipsis must be specified in the LHS");for(let Ht=0;Ht<d.length;Ht++){let Kt=String.fromCharCode("0".charCodeAt(0)+Ht);h.addSymbol(Kt,g+Ht),this.addSymbol(Kt,a[et++],o)}}else h.addSymbol(b,g+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(b,a[et++],o)}),h}},il=e=>e+"_max",Gp=(e,i,a,o)=>{let c=e.map(h=>h.length).map((h,b)=>U(`input${b}`,i,h)),s=M.size(o),d=K("output",i,o.length),et=[...a.symbolToInfo.keys()].filter(h=>!a.rhs.symbolToIndices.has(h)),$t=h=>{let b=[],g="var prod = 1.0;",jt="var sum = 0.0;",Ht="sum += prod;",Kt=[],or=[],jr=[],Lr=[],ir=a.symbolToInfo.size===a.rhs.symbolToIndices.size;a.symbolToInfo.forEach((vn,xn)=>{var No;if(a.rhs.symbolToIndices.has(xn)){let Ro=(No=a.rhs.symbolToIndices.get(xn))==null?void 0:No[0];Ro!==void 0&&a.lhs.forEach((Xo,o0)=>{if(vn.inputIndices.includes(o0)){let s0=Xo.symbolToIndices.get(xn);if(s0===void 0)throw new Error("Invalid symbol error");s0.forEach(h0=>{b.push(`${c[o0].indicesSet(`input${o0}Indices`,h0,d.indicesGet("outputIndices",Ro))}`)})}})}else a.lhs.forEach((Ro,Xo)=>{if(vn.inputIndices.includes(Xo)){let o0=Ro.symbolToIndices.get(xn);if(o0===void 0)throw new Error("Invalid symbol error");o0.forEach(s0=>{Kt.push(`${c[Xo].indicesSet(`input${Xo}Indices`,s0,`${xn}`)}`)}),Lr.push(`prod *= ${c[Xo].getByIndices(`input${Xo}Indices`)};`)}}),or.push(`for(var ${xn}: u32 = 0; ${xn} < uniforms.${il(xn)}; ${xn}++) {`),jr.push("}")});let qr=ir?[...b,`let sum = ${c.map((vn,xn)=>vn.getByIndices(`input${xn}Indices`)).join(" * ")};`]:[...b,jt,...or,...Kt,g,...Lr,Ht,...jr];return`
            ${h.registerUniforms(et.map(vn=>({name:`${il(vn)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...c,d)}

            ${h.mainStart()}
            ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
            var outputIndices = ${d.offsetToIndices("global_idx")};
            ${c.map((vn,xn)=>`var input${xn}Indices: ${c[xn].type.indices};`).join(`
`)}
            ${qr.join(`
`)};
            ${d.setByOffset("global_idx","sum")};
          }`};return{name:"Einsum",shaderCache:{hint:a.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let h=et.filter(g=>a.symbolToInfo.has(g)).map(g=>{var jt;return{type:12,data:((jt=a.symbolToInfo.get(g))==null?void 0:jt.dimValue)||0}});h.push({type:12,data:s});let b=e.map((g,jt)=>[...X(g)]).reduce((g,jt)=>g.concat(jt),h);return b.push(...X(o)),{outputs:[{dims:o,dataType:i}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:b}},getShaderSource:$t}},ol=(e,i)=>{let a=new wo(e.inputs,i.equation),o=a.outputDims,c=e.inputs.map((s,d)=>s.dims);e.compute(Gp(c,e.inputs[0].dataType,a,o))},al=e=>{let i=e.equation.replace(/\s+/g,"");return we({equation:i})}}),Lp,ul,Fp,qp,ll,dl=j(()=>{ye(),xe(),_e(),Lp=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let i=e[0].dims,a=Array.from(e[1].getBigInt64Array(),Number),o=a.length<i.length?0:a.length-i.length,c=i.length<a.length?0:i.length-a.length;for(;o<a.length&&c<i.length;++o,++c)if(a[o]!==i[c]&&a[o]!==1&&i[c]!==1)throw new Error("Expand requires shape to be broadcastable to input")},ul=(e,i)=>{let a=e.length-i.length,o=[];for(let c=0;c<a;++c)o.push(e[c]);for(let c=0;c<i.length;++c)o.push(i[c]===1?e[c+a]:i[c]);return o},Fp=(e,i)=>e.length>i.length?ul(e,i):ul(i,e),qp=e=>{let i=e[0].dims,a=Array.from(e[1].getBigInt64Array(),Number),o=Fp(i,a),c=e[0].dataType,s=c===9?4:1,d=Math.ceil(M.size(o)/s),et=h=>{let b=U("input",c,i.length,s),g=K("output",c,o.length,s),jt;if(c===9){let Ht=(Kt,or,jr="")=>`
          let outputIndices${or} = ${g.offsetToIndices(`outputOffset + ${or}u`)};
          let offset${or} = ${b.broadcastedIndicesToOffset(`outputIndices${or}`,g)};
          let index${or} = offset${or} / 4u;
          let component${or} = offset${or} % 4u;
          ${Kt}[${or}] = ${jr}(${b.getByOffset(`index${or}`)}[component${or}]);
        `;jt=`
        let outputOffset = global_idx * ${s};
        var data = vec4<u32>(0);
        ${Ht("data",0,"u32")}
        ${Ht("data",1,"u32")}
        ${Ht("data",2,"u32")}
        ${Ht("data",3,"u32")}
        ${g.setByOffset("global_idx","data")}
      }`}else jt=`
        let outputIndices = ${g.offsetToIndices("global_idx")};
        let inputOffset = ${b.broadcastedIndicesToOffset("outputIndices",g)};
        ${g.setByOffset("global_idx",b.getByOffset("inputOffset"))}
      }`;return`
    ${h.registerUniform("vec_size","u32").declareVariables(b,g)}
    ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
    ${jt}`},$t=[{type:12,data:d},...X(i,o)];return{name:"Expand",shaderCache:{hint:`${o.length}`,inputDependencies:["rank"]},getShaderSource:et,getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:$t})}},ll=e=>{Lp(e.inputs),e.compute(qp(e.inputs),{inputs:[0]})}}),jp,cl,pl=j(()=>{ye(),xe(),_e(),Jn(),jp=e=>{let i=e[0].dataType,a=M.size(e[0].dims),o=M.size(e[1].dims),c=o%4===0,s=d=>{let et=U("x",i,[1],4),$t=U("bias",i,[1],4),h=K("y",i,[1],4),b=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],g=Ht=>`
      let bias${Ht}_offset: u32 = (global_idx * 4 + ${Ht}) % uniforms.bias_size;
      let bias${Ht} = ${$t.getByOffset(`bias${Ht}_offset / 4`)}[bias${Ht}_offset % 4];`,jt=c?`
      let bias = ${$t.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${g(0)}${g(1)}${g(2)}${g(3)}
      let bias = ${et.type.value}(bias0, bias1, bias2, bias3);`;return`${d.registerUniforms(b).declareVariables(et,$t,h)}

    ${ao(rt(i))}

    ${d.mainStart(mr)}
      ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}

      let x = ${et.getByOffset("global_idx")};
      ${jt}
      let x_in = x + bias;
      ${h.setByOffset("global_idx",so("x_in"))}
    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${c}`,inputDependencies:["type","type"]},getShaderSource:s,getRunData:d=>({outputs:[{dims:d[0].dims,dataType:d[0].dataType}],programUniforms:[{type:12,data:Math.ceil(a/4)},{type:12,data:o}],dispatchGroup:{x:Math.ceil(a/mr/4)}})}},cl=e=>{e.inputs.length<2||M.size(e.inputs[1].dims)===0?wu(e):e.compute(jp(e.inputs))}}),Kp,Yp,ml,fl,hl=j(()=>{ye(),xe(),Ze(),_e(),Kp=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},Yp=(e,i)=>{let a=e[0].dims,o=e[1].dims,c=a.length,s=M.normalizeAxis(i.axis,c),d=a.slice(0);d.splice(s,1,...o);let et=a[s],$t=e[0].dataType===9?4:1,h=Math.ceil(M.size(d)/$t),b=[{type:12,data:h},{type:6,data:et},{type:12,data:s},...X(e[0].dims,e[1].dims,d)],g=jt=>{let Ht=U("data",e[0].dataType,e[0].dims.length,$t),Kt=U("inputIndices",e[1].dataType,e[1].dims.length),or=K("output",e[0].dataType,d.length,$t),jr=ir=>{let qr=o.length,vn=`var indicesIndices${ir}  = ${Kt.type.indices}(0);`;for(let xn=0;xn<qr;xn++)vn+=`${qr>1?`indicesIndices${ir}[${xn}]`:`indicesIndices${ir}`} = ${d.length>1?`outputIndices${ir}[uniforms.axis + ${xn}]`:`outputIndices${ir}`};`;vn+=`
          var idx${ir} = ${Kt.getByIndices(`indicesIndices${ir}`)};
          if (idx${ir} < 0) {
            idx${ir} = idx${ir} + uniforms.axisDimLimit;
          }
          var dataIndices${ir} : ${Ht.type.indices};
        `;for(let xn=0,No=0;xn<c;xn++)xn===s?(vn+=`${c>1?`dataIndices${ir}[${xn}]`:`dataIndices${ir}`} = u32(idx${ir});`,No+=qr):(vn+=`${c>1?`dataIndices${ir}[${xn}]`:`dataIndices${ir}`} = ${d.length>1?`outputIndices${ir}[${No}]`:`outputIndices${ir}`};`,No++);return vn},Lr;if(e[0].dataType===9){let ir=(qr,vn,xn="")=>`
          let outputIndices${vn} = ${or.offsetToIndices(`outputOffset + ${vn}u`)};
          ${jr(vn)};
          let offset${vn} = ${Ht.indicesToOffset(`dataIndices${vn}`)};
          let index${vn} = offset${vn} / 4u;
          let component${vn} = offset${vn} % 4u;
          ${qr}[${vn}] = ${xn}(${Ht.getByOffset(`index${vn}`)}[component${vn}]);
        `;Lr=`
        let outputOffset = global_idx * ${$t};
        var value = vec4<u32>(0);
        ${ir("value",0,"u32")}
        ${ir("value",1,"u32")}
        ${ir("value",2,"u32")}
        ${ir("value",3,"u32")}
        ${or.setByOffset("global_idx","value")}
      `}else Lr=`
      let outputIndices = ${or.offsetToIndices("global_idx")};
      ${jr("")};
      let value = ${Ht.getByIndices("dataIndices")};
      ${or.setByOffset("global_idx","value")};
      `;return`
      ${jt.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(Ht,Kt,or)}
      ${jt.mainStart()}
        ${jt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        ${Lr}
      }`};return{name:"Gather",shaderCache:{hint:i.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:d,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:b}),getShaderSource:g}},ml=e=>we({axis:e.axis}),fl=(e,i)=>{let a=e.inputs;Kp(a),e.compute(Yp(e.inputs,i))}}),Xp,Zp,gl,yl,bl=j(()=>{ye(),xe(),Ze(),_e(),Xp=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and
                     indices input tensors be of same rank.`)},Zp=(e,i)=>{let a=e[0].dims,o=e[0].dataType,c=a.length,s=e[1].dims,d=e[1].dataType,et=M.normalizeAxis(i.axis,c),$t=a[et],h=s.slice(0),b=M.size(h),g=U("input",o,c),jt=U("indicesInput",d,s.length),Ht=K("output",o,h.length),Kt=[{type:12,data:b},{type:6,data:$t},{type:12,data:et}];return Kt.push(...X(a,s,h)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:h,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(b/64)},programUniforms:Kt}),getShaderSource:or=>`
      ${or.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(g,jt,Ht)}
      ${or.mainStart()}
      ${or.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

      let outputIndices = ${Ht.offsetToIndices("global_idx")};

      var idx = ${jt.getByOffset("global_idx")};
      if (idx < 0) {
        idx = idx + uniforms.axisDimLimit;
      }
      var inputIndices = ${g.type.indices}(outputIndices);
      ${g.indicesSet("inputIndices","uniforms.axis","u32(idx)")};
      let value = ${g.getByIndices("inputIndices")};

      ${Ht.setByOffset("global_idx","value")};
  }`}},gl=e=>we({axis:e.axis}),yl=(e,i)=>{let a=e.inputs;Xp(a),e.compute(Zp(e.inputs,i))}}),Qp,Jp,vl,wl,$l=j(()=>{ye(),xe(),_e(),Qp=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},Jp=(e,i)=>{let a=e[0].dims.slice(),o=e[1].dims.slice(),[c,s,d]=Gn.getShapeOfGemmResult(a,i.transA,o,i.transB,e.length===3?e[2].dims:void 0),et=[c,s];if(!et)throw new Error("Can't use gemm on the given tensors");let $t=M.size(et),h=[{type:12,data:$t},{type:12,data:c},{type:12,data:s},{type:12,data:d},{type:1,data:i.alpha},{type:1,data:i.beta}],b=["type","type"];e.length===3&&(h.push(...X(e[2].dims)),b.push("rank")),h.push(...X(et));let g=jt=>{let Ht="";i.transA&&i.transB?Ht="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":i.transA&&!i.transB?Ht="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!i.transA&&i.transB?Ht="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!i.transA&&!i.transB&&(Ht="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let Kt=i.alpha===1?"":"value *= uniforms.alpha;",or=U("a",e[0].dataType,e[0].dims),jr=U("b",e[1].dataType,e[1].dims),Lr=or.type.value,ir=null,qr=[or,jr];e.length===3&&(ir=U("c",e[2].dataType,e[2].dims.length),qr.push(ir));let vn=K("output",e[0].dataType,et.length);qr.push(vn);let xn=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`
  ${jt.registerUniforms(xn).declareVariables(...qr)}

  ${jt.mainStart()}
    ${jt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let m = global_idx / uniforms.N;
    let n = global_idx % uniforms.N;

    var value = ${Lr}(0);
    for (var k: u32 = 0u; k < uniforms.K; k++) {
      ${Ht}
    }

    ${Kt}
    ${(()=>ir!=null?`let cOffset = ${ir.broadcastedIndicesToOffset("vec2(m, n)",vn)}; value += ${Lr}(uniforms.beta) * ${ir.getByOffset("cOffset")};`:"")()}
    output[global_idx] = value;
  }`};return{name:"Gemm",shaderCache:{hint:`${i.cacheKey}`,inputDependencies:b},getRunData:()=>({outputs:[{dims:et,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil($t/64)},programUniforms:h}),getShaderSource:g}},vl=e=>{let i=e.transA,a=e.transB,o=e.alpha,c=e.beta;return{transA:i,transB:a,alpha:o,beta:c,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},wl=(e,i)=>{Qp(e.inputs),e.compute(Jp(e.inputs,i))}}),em,tm,rm,_l,xl=j(()=>{ye(),xe(),_e(),em=(e,i)=>{let a=e[0].dims,o=a,c=2,s=M.sizeToDimension(a,c),d=M.sizeFromDimension(a,c),et=Ue(d),$t=d/et,h=[a[0],a[1],$t],b=["rank","type","type"],g=[{type:12,data:d},{type:12,data:$t}];g.push(...X(h,h));let jt=Ht=>{let Kt=U("x",e[0].dataType,h.length,et),or=U("scale",e[1].dataType,e[1].dims),jr=U("bias",e[2].dataType,e[2].dims),Lr=K("output",e[0].dataType,h.length,et),ir=[Kt,or,jr,Lr],qr=Kt.type.value,vn=et===1?"f32":`vec${et}<f32>`,xn=64,No=[{name:"normSize",type:"u32"},{name:"normPackedSize",type:"u32"}];return`
  var<workgroup> meanShared : f32;
  var<workgroup> squaredNormShared : f32;
  var<workgroup> workgroupShared : array<${vn}, ${xn}>;
  const workgroupSize = ${xn}u;
  ${Ht.registerUniforms(No).declareVariables(...ir)}
  ${Ht.mainStart(xn)}
    let norm = global_idx / workgroupSize;
    let batch = norm / uniforms.x_shape[1];
    let channel = norm % uniforms.x_shape[1];
    let localIndex = local_id.x;

    // initialize workgroup memory
    var initial = ${vn}(0);
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      initial = initial + ${vn}(${Kt.get("batch","channel","h")});
    }
    workgroupShared[localIndex] = initial;
    workgroupBarrier();

    // Calculate the mean of current channel data.
    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (localIndex < currSize) {
        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];
      }
      workgroupBarrier();
    }
    if (localIndex == 0) {
      meanShared = ${Et("workgroupShared[0]",et)} / f32(uniforms.normSize);
    }
    workgroupBarrier();

    // reinitialize workgroup memory.
    initial = ${vn}(0);
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      let deviation =  ${vn}(${Kt.get("batch","channel","h")}) - ${vn}(meanShared);
      initial = initial + deviation * deviation;
    }
    workgroupShared[localIndex] = initial;
    workgroupBarrier();

    // Calculate the sum of square of deviation of current channel data.
    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (localIndex < currSize) {
        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];
      }
      workgroupBarrier();
    }
    if (localIndex == 0) {
      squaredNormShared = ${Et("workgroupShared[0]",et)};
    }
    workgroupBarrier();

    let invStdDev = inverseSqrt(squaredNormShared / f32(uniforms.normSize) + f32(${i.epsilon}));
    let channelScale = invStdDev * f32(${or.getByOffset("channel")});
    let channelShift = f32(${jr.getByOffset("channel")}) - meanShared * channelScale;
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      let value = ${Kt.get("batch","channel","h")} * ${qr}(${vn}(channelScale)) + ${qr}(${vn}(channelShift));
      ${Lr.set("batch","channel","h","value")};
    }
  }`};return{name:"InstanceNormalization",shaderCache:{hint:`${i.epsilon};${et}`,inputDependencies:b},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:s},programUniforms:g}),getShaderSource:jt}},tm=(e,i,a,o,c,s,d,et)=>{let $t=Ue(d),h=64,b=$t===1?"vec2f":`mat2x${$t}f`,g=$t===1?"f32":`vec${$t}f`,jt=(No,Ro)=>`${b}(${No}, ${Ro})`,Ht=c*d/$t,Kt=Math.ceil(s/h),or=["type"],jr=[{type:12,data:Kt},{type:12,data:s},{type:12,data:Math.floor(d/$t)},{type:12,data:Math.floor(s*d/$t)}],Lr=No=>{let Ro=U("input",i.dataType,i.dims,$t);return`
  ${No.declareVariables(Ro)}
  @group(0) @binding(1) var<storage, read_write> output : array<${b}>;
  struct Uniforms {wg_size:u32, H:u32, C:u32, image_size:u32};
  @group(0) @binding(2) var<uniform> uniforms: Uniforms;

  ${No.mainStart(h)}
    let currentImageNumber = global_idx / ${h} / uniforms.C;
    let currentChannelNumber = (global_idx / ${h}) % uniforms.C;
    let wgOffset = local_id.x * uniforms.wg_size;
    if (wgOffset >= uniforms.H) {
        return;
    }
    let wgMax = min(wgOffset + uniforms.wg_size, uniforms.H);

    let offset = currentImageNumber * uniforms.image_size + currentChannelNumber;
    var sum = ${At("f32",$t)};
    var squaredSum = ${At("f32",$t)};
    for (var i: u32 = wgOffset; i < wgMax; i++) {
        let value = ${g}(input[offset + i * uniforms.C]);
        sum += value;
        squaredSum += value * value;
    }
    output[global_idx] = ${jt("sum","squaredSum")};
  }`},ir=e.compute({name:"InstanceNormComputeMean",shaderCache:{hint:`${$t}`,inputDependencies:or},getRunData:()=>({outputs:[{dims:[c,d,h,2],dataType:1}],dispatchGroup:{x:c*d/$t},programUniforms:jr}),getShaderSource:Lr},{inputs:[i],outputs:[-1]})[0],qr=[{type:12,data:Ht},{type:12,data:s},{type:12,data:Math.floor(d/$t)},{type:12,data:Math.floor(h*d/$t)}],vn=["type","type","type"],xn=No=>{let Ro=U("scale",a.dataType,a.dims,$t),Xo=U("bias",o.dataType,o.dims,$t);return`
  @group(0) @binding(0) var<storage, read> input : array<${b}>;
  @group(0) @binding(1) var<storage, read> scale : array<${Ro.type.storage}>;
  @group(0) @binding(2) var<storage, read> bias : array<${Xo.type.storage}>;
  @group(0) @binding(3) var<storage, read_write> output : array<${b}>;
  struct Uniforms {units_of_work : u32, H: u32, C : u32, image_size : u32};
  @group(0) @binding(4) var<uniform> uniforms: Uniforms;

  ${No.mainStart()}
    ${No.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.units_of_work")}
    let currentImageNumber = global_idx / uniforms.C;
    let currentChannelNumber = global_idx % uniforms.C;

    let offset = currentImageNumber * uniforms.image_size;
    var sum = ${At("f32",$t)};
    var squaredSum = ${At("f32",$t)};
    for (var i: u32 = 0; i < min(${h}, uniforms.H); i++) {
        let value = input[offset + i + currentChannelNumber * ${h}];
        sum += value[0];
        squaredSum += value[1];
    }
    sum = sum / f32(uniforms.H);
    squaredSum = squaredSum / f32(uniforms.H);
    let invStdDev = inverseSqrt(squaredSum - sum * sum + f32(${et}));
    let channelScale = invStdDev * ${g}(scale[currentChannelNumber]);
    let channelShift = ${g}(bias[currentChannelNumber]) - sum * channelScale;

    output[global_idx] = ${jt("channelScale","channelShift")};
  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${$t};${et}`,inputDependencies:vn},getRunData:()=>({outputs:[{dims:[c,d,2],dataType:1}],dispatchGroup:{x:Math.ceil(Ht/64)},programUniforms:qr}),getShaderSource:xn},{inputs:[ir,a,o],outputs:[-1]})[0]},rm=(e,i,a)=>{let o=i[0].dims,c=o,s=o[0],d=o[o.length-1],et=M.sizeFromDimension(o,1)/d,$t=Ue(d),h=M.size(c)/$t,b=[{type:12,data:et},{type:12,data:Math.floor(d/$t)}],g=["type","type"],jt=tm(e,i[0],i[1],i[2],s,et,d,a.epsilon),Ht=Kt=>{let or=De(i[0].dataType),jr=$t===1?"vec2f":`mat2x${$t}f`,Lr=$t===1?or:`vec${$t}<${or}>`,ir=U("input",i[0].dataType,i[0].dims,$t),qr=K("output",i[0].dataType,c,$t);return`
  @group(0) @binding(0) var<storage, read> input : array<${ir.type.storage}>;
  @group(0) @binding(1) var<storage, read> scaleInput : array<${jr}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${qr.type.storage}>;
  struct Uniforms {H: u32, C : u32};
  @group(0) @binding(3) var<uniform> uniforms: Uniforms;

  ${Kt.mainStart()}
    let currentImageNumber = global_idx / (uniforms.C * uniforms.H);
    let currentChannelNumber = global_idx % uniforms.C;

    let scaleOffset = currentImageNumber * uniforms.C + currentChannelNumber;
    let scale = scaleInput[scaleOffset];
    output[global_idx] = fma(input[global_idx], ${Lr}(scale[0]), ${Lr}(scale[1]));
  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${$t}`,inputDependencies:g},getRunData:()=>({outputs:[{dims:c,dataType:i[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:b}),getShaderSource:Ht},{inputs:[i[0],jt]})},_l=(e,i)=>{i.format==="NHWC"?rm(e,e.inputs,i):e.compute(em(e.inputs,i))}}),nm,im,Sl,Cl=j(()=>{ye(),xe(),_e(),nm=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},im=(e,i,a)=>{let o=i.simplified,c=e[0].dims,s=e[1],d=!o&&e[2],et=c,$t=M.normalizeAxis(i.axis,c.length),h=M.sizeToDimension(c,$t),b=M.sizeFromDimension(c,$t),g=M.size(s.dims),jt=d?M.size(d.dims):0;if(g!==b||d&&jt!==b)throw new Error(`Size of X.shape()[axis:] == ${b}.
       Size of scale and bias (if provided) must match this.
       Got scale size of ${g} and bias size of ${jt}`);let Ht=[];for(let xn=0;xn<c.length;++xn)xn<$t?Ht.push(c[xn]):Ht.push(1);let Kt=Ue(b),or=["type","type"],jr=[{type:12,data:h},{type:1,data:b},{type:12,data:Math.floor(b/Kt)},{type:1,data:i.epsilon}];d&&or.push("type");let Lr=a>1,ir=a>2,qr=xn=>{let No=De(e[0].dataType),Ro=[U("x",e[0].dataType,e[0].dims,Kt),U("scale",s.dataType,s.dims,Kt)];d&&Ro.push(U("bias",d.dataType,d.dims,Kt)),Ro.push(K("output",e[0].dataType,et,Kt)),Lr&&Ro.push(K("mean_data_output",1,Ht)),ir&&Ro.push(K("inv_std_output",1,Ht));let Xo=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`
  ${xn.registerUniforms(Xo).declareVariables(...Ro)}
  ${xn.mainStart()}
    ${xn.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}
    let offset = global_idx * uniforms.norm_size_vectorized;
    var mean_vector = ${At("f32",Kt)};
    var mean_square_vector = ${At("f32",Kt)};

    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {
      let value = ${fr(No,Kt,"x[h + offset]")};
      mean_vector += value;
      mean_square_vector += value * value;
    }
    let mean = ${Et("mean_vector",Kt)} / uniforms.norm_size;
    let inv_std_dev = inverseSqrt(${Et("mean_square_vector",Kt)} / uniforms.norm_size ${o?"":"- mean * mean"} + uniforms.epsilon);

    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {
      let f32input = ${fr(No,Kt,"x[j + offset]")};
      let f32scale = ${fr(No,Kt,"scale[j]")};
      output[j + offset] = ${Ro[0].type.value}((f32input ${o?"":"- mean"}) * inv_std_dev * f32scale
        ${d?`+ ${fr(No,Kt,"bias[j]")}`:""}
      );
    }

    ${Lr?"mean_data_output[global_idx] = mean":""};
    ${ir?"inv_std_output[global_idx] = inv_std_dev":""};
  }`},vn=[{dims:et,dataType:e[0].dataType}];return Lr&&vn.push({dims:Ht,dataType:1}),ir&&vn.push({dims:Ht,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${Kt};${a};${o}`,inputDependencies:or},getRunData:()=>({outputs:vn,dispatchGroup:{x:Math.ceil(h/64)},programUniforms:jr}),getShaderSource:qr}},Sl=(e,i)=>{nm(e.inputs),e.compute(im(e.inputs,i,e.outputCount))}}),om,am,Il,Tl,Al=j(()=>{ye(),xe(),Ze(),_e(),om=(e,i)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let a=e[0],o=a.dims.length;if(a.dims[o-1]!==i.k)throw new Error("The last dim of input shape does not match the k value");let c=Math.floor((i.k+i.blockSize-1)/i.blockSize),s=i.blockSize/8*i.bits,d=e[1];if(!M.areEqual(d.dims,[i.n,c,s]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let et=e[2].dims;if(M.size(et)!==i.n*c)throw new Error("scales input size error.");if(e.length===4){let $t=e[3].dims,h=i.bits>4?i.n*c:i.n*Math.floor((c+1)/2);if(M.size($t)!==h)throw new Error("zeroPoints input size error.")}},am=(e,i,a,o)=>{let c=e[0].dims,s=c.length,d=Math.floor((i.k+i.blockSize-1)/i.blockSize),et=c[s-2],$t=i.k,h=i.n,b=c.slice(0,s-2),g=M.size(b),jt=i.blockSize/8*i.bits/4,Ht=e[0].dataType,Kt=Ue(et),or=Ue(i.k),jr=Ue(jt),Lr=cr(Ht),ir=et*d*Lr,qr=Math.floor(o/ir),vn=d<=a[0]&&qr>0,xn=!vn||qr>=4?Ue(h):qr>=2&&Ue(h)>=2?2:1,No=b.concat([et,h]),Ro=M.size(No)/xn/Kt,Xo=vn?[]:[{type:12,data:Ro},{type:12,data:i.blockSize}],o0=[g,et,$t/or],s0=M.convertShape(e[1].dims).slice();s0.splice(-1,1,jt/jr),Xo.push(...X(o0)),Xo.push(...X(s0)),Xo.push(...X(e[2].dims)),e.length===4&&Xo.push(...X(M.convertShape(e[3].dims)));let h0=[g,et,h/xn];Xo.push(...X(h0));let E0=C0=>{let D0=o0.length,N0=U("a",e[0].dataType,D0,or),e0=U("b",12,s0.length,jr),l0=U("scales",e[2].dataType,e[2].dims.length),Uo=[N0,e0,l0],c0=e.length===4?U("zero_points",12,e[3].dims.length):void 0;c0&&Uo.push(c0);let $0=h0.length,Bo=K("output",e[0].dataType,$0,xn),x0=[{name:"output_size",type:"u32"},{name:"block_size",type:"u32"}],A0=De(e[0].dataType),G0=(()=>{switch(or){case 1:return`array<${A0}, 8>`;case 2:return`mat4x2<${A0}>`;case 4:return`mat2x4<${A0}>`;default:throw new Error(`${or}-component is not supported.`)}})(),q0=`
        for (var word: u32 = 0; word < ${jt}; word += ${jr}) {
          ${e0.indicesSet("b_indices","2","word")};
          let b_data = ${e0.getByIndices("b_indices")};
          for (var i: u32 = 0; i < ${jr}; i++) {
            let b_value: u32 = ${jr===1?"b_data":"b_data[word + i]"};
            let b_mask: u32 = 0x0F0F0F0Fu;
            let b_value_lower: vec4<u32> = unpack4xU8(b_value & b_mask);
            let b_value_upper: vec4<u32> = unpack4xU8((b_value >> 4) & b_mask);
            let b_quantized_values = ${G0}(${Array.from({length:4},(xy,gy)=>`${A0}(b_value_lower[${gy}]), ${A0}(b_value_upper[${gy}])`).join(", ")});
            let b_dequantized_values = ${(()=>or===1?`${G0}(${Array.from({length:8},(xy,gy)=>`(b_quantized_values[${gy}] - zero_point) * scale`).join(", ")});`:`(b_quantized_values - ${G0}(${Array(8).fill("zero_point").join(",")})) * scale;`)()};
            // Number of B elements per 32-bit word is 32/bits = 32/4 = 8
            for (var m: u32 = 0; m < ${vn?et:Kt}u; m++) {
              ${N0.indicesSet("a_indices",D0-2,vn?"m":`row * ${Kt} + m`)};
              ${N0.indicesSet("a_indices",D0-1,"word_offset")};
              var input_offset = ${N0.indicesToOffset("a_indices")};
              var a_data: ${G0};
              for (var j: u32 = 0; j < ${8/or}; j++) {
                a_data[j] = ${N0.getByOffset("input_offset")};
                input_offset++;
              }
              ${vn?"workgroup_shared[workgroup_shared_offset + m]":"output_values[m]"}${xn>1?"[c]":""} += ${Array.from({length:8/or},(xy,gy)=>`${or===1?`a_data[${gy}] * b_dequantized_values[${gy}]`:`dot(a_data[${gy}], b_dequantized_values[${gy}])`}`).join(" + ")};
            }
            word_offset += ${8/or};
          }
        }`,ny=c0?`
          zero_point_offset += 4;
          if (zero_point_offset == 32) {
            zero_point_offset = 0;
            zero_point_index++;
            zero_point_word = ${c0.getByOffset("zero_point_index")};
          }`:"";return vn?`
        var<workgroup> workgroup_shared: array<${Bo.type.value}, ${et*d}>;
        ${C0.declareVariables(...Uo,Bo)}
        ${C0.mainStart([d,1,1])}
          var a_indices: ${N0.type.indices};
          var block = local_id.x;
          var col = workgroup_id.y;
          var batch = workgroup_id.z;
          ${N0.indicesSet("a_indices","0","batch")};
          // Two zero points are packed into one byte when uniforms.bits is 4.
          for (var c: u32 = 0; c < ${xn}; c++) {
            let col_times_components_plus_c = col * ${xn} + c;
              ${c0?`
            var zero_point_bytes_per_col: u32 = (${d} + 1) / 2;
            var zero_point_byte_count: u32 = col_times_components_plus_c * zero_point_bytes_per_col + (block >> 0x1u);
            var zero_point_word_index: u32 = zero_point_byte_count >> 0x2u;
            var zero_point_byte_offset: u32 = zero_point_byte_count & 0x3u;
            var zero_point_nibble_offset: u32 = block & 0x1u;
            var zero_point_bits_offset: u32 = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            var zero_point_word: u32 = ${c0.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;`:""}
            var b_indices: ${e0.type.indices};
            ${e0.indicesSet("b_indices","0","col_times_components_plus_c")};
            // The scale and zero points are computed per block.
            var scales_index = col_times_components_plus_c * ${d} + block;
            let scale = ${l0.getByOffset("scales_index")};
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${A0}(${c0?"(zero_point_word) & 0xFu":8});
            ${e0.indicesSet("b_indices","1","block")};
            var word_offset: u32 = block * ${i.blockSize/or};
            var workgroup_shared_offset: u32 = block * ${et};
            ${q0}
          }
          workgroupBarrier();
          if (local_id.x == 0u) {
            var output_indices: ${Bo.type.indices};
            ${Bo.indicesSet("output_indices","0","batch")};
            ${Bo.indicesSet("output_indices",$0-1,"col")};
            ${Bo.indicesSet("output_indices",$0-2,"0")};
            var output_offset = ${Bo.indicesToOffset("output_indices")};
            for (var m: u32 = 0u; m < ${et}u; m++) {
              var output_value: ${Bo.type.value} = ${Bo.type.value}(0);
              var workgroup_shared_offset: u32 = m;
              for (var b: u32 = 0u; b < ${d}u; b++) {
                output_value += workgroup_shared[workgroup_shared_offset];
                workgroup_shared_offset += ${et};
              }
              ${Bo.setByOffset("output_offset","output_value")};
              output_offset += ${h/xn};
            }
          }
        }`:`
        ${C0.registerUniforms(x0).declareVariables(...Uo,Bo)}
        ${C0.mainStart()}
          ${C0.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var output_values: array<${Bo.type.value}, ${Kt}>;
          var output_indices = ${Bo.offsetToIndices("global_idx")};
          var col = ${Bo.indicesGet("output_indices",$0-1)};
          var row = ${Bo.indicesGet("output_indices",$0-2)};
          var a_indices: ${N0.type.indices} = output_indices;
          // Two zero points are packed into one byte because uniforms.bits <= 4.
          // zero_point_offset is either 0 or 4. It is bit offset within one byte.
          // TODO support zero_point_offset for bits > 4
          ${c0?`
          var zero_point_abs_offset = col * ${xn} * ((${d} + 1) / 2);
          var zero_point_index: u32 = zero_point_abs_offset / 4;
          var zero_point_word: u32 = ${c0.getByOffset("zero_point_index")};
          var zero_point_offset: u32 = (zero_point_abs_offset % 4) * 8;`:""}
          var scale_index = col * ${d*xn};
          var b_indices: ${e0.type.indices};
          for (var c: u32 = 0; c < ${xn}; c++) {
            ${e0.indicesSet("b_indices","0",`col * ${xn} + c`)};
            var block_offset: u32 = 0;
            for (var block: u32 = 0; block < ${d}; block++) {
              // The scale and zero points are computed per block.
              let scale = ${l0.getByOffset("scale_index")};
              // The default zero point is 8 for unsigned 4-bit quantization.
              let zero_point = ${A0}(${c0?"extractBits(zero_point_word, zero_point_offset, 4)":8});
              ${e0.indicesSet("b_indices","1","block")};
              var word_offset: u32 = block_offset;
              ${q0}
              scale_index++;
              ${ny}
              block_offset += uniforms.block_size / ${or};
            }
            // Drop the trailing 4 bits if the zero_poit_offset is not a byte boundary to align with the next byte.
            ${c0?`if (zero_point_offset % 8 > 0) {
                ${ny}
              }`:""}
            }
            for (var k: u32 = 0u; k < ${Kt}u; k++) {
              ${Bo.indicesSet("output_indices",$0-2,`${Kt} * row + k`)};
              ${Bo.setByIndices("output_indices","output_values[k]")}
            }
        }`};return{name:vn?"BlockwiseMatMulNBits":"MatMulNBits",shaderCache:{hint:`${i.cacheKey};${et};${Ht};${e.length}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:No,dataType:Ht}],name:vn?"BlockwiseMatMulNBits":"MatMulNBits",dispatchGroup:vn?{x:1,y:Math.ceil(h/xn),z:g}:{x:Math.ceil(Ro/64)},programUniforms:Xo}),getShaderSource:E0}},Il=(e,i)=>{om(e.inputs,i);let a=e.getMaxComputeWorkgroupSizes(),o=e.getMaxComputeWorkgroupStoragesize();e.compute(am(e.inputs,i,a,o))},Tl=e=>we(e)}),lt,sm,kl,El,um,$o,Ol,Pl=j(()=>{ye(),xe(),Ze(),Hn(),oo(),_e(),Rr(),lt=(e,i)=>e.length>i&&e[i].dims.length>0&&M.size(e[i].dims)>0?e[i]:void 0,sm=(e,i)=>{let a=e[0],o=lt(e,1),c=lt(e,2),s=lt(e,3),d=lt(e,4),et=lt(e,5),$t=lt(e,6),h=lt(e,7);if(a.dims.length!==3&&a.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let b=!1,g=a.dims[0],jt=a.dims[1],Ht=a.dims.length===3?b?a.dims[2]/3:a.dims[2]:i.numHeads*a.dims[4],Kt=jt,or=0,jr=0,Lr=Math.floor(Ht/i.numHeads);if($t&&h){if($t.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if($t.dims[0]!==g||$t.dims[1]!==i.numHeads||$t.dims[3]!==Lr)throw new Error('Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)');if(h.dims[0]!==g||h.dims[1]!==i.numHeads||h.dims[3]!==Lr)throw new Error('Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)');if($t.dims[2]!==h.dims[2])throw new Error('Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)');if(h.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');or=$t.dims[2],jr=$t.dims[2]}else if($t||h)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let ir;if(o){if(a.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(o.dims.length<3||o.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(a.dims[0]!==o.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(o.dims.length===3){if(o.dims[2]!==a.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');ir=2,Kt=o.dims[1]}else if(o.dims.length===5){if(o.dims[2]!==i.numHeads||o.dims[3]!==2||o.dims[4]!==Lr)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(c)throw new Error('Expect "value" be none when "key" has packed kv format.');ir=5,Kt=o.dims[1]}else{if(o.dims[1]!==i.numHeads||o.dims[3]!==Lr)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');ir=0,Kt=o.dims[2]}}else{if(a.dims.length!==3&&a.dims.length!==5)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(a.dims.length===5&&(a.dims[2]!==i.numHeads||a.dims[3]!==3))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');ir=3}if(s){if(s.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimension');if(c&&a.dims.length===5&&a.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let qr=0;if(d){qr=8;let Xo=d.dims;throw Xo.length===1?Xo[0]===g?qr=1:Xo[0]===3*g+2&&(qr=3):Xo.length===2&&Xo[0]===g&&Xo[1]===Kt&&(qr=5),qr===8?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, kv_sequence_length)'):new Error("Mask not supported")}let vn=!1,xn=Ht;if(c){if(c.dims.length!==3&&c.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(a.dims[0]!==c.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(c.dims.length===3){if(Kt!==c.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');xn=c.dims[2]}else{if(Kt!==c.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');xn=c.dims[1]*c.dims[3],vn=!0}}let No=or+Kt,Ro=!1;if(d)throw new Error("Key padding mask is not supported");if(et){if(et.dims.length!==4)throw new Error('Input "relative_position_bias" is expected to have 4 dimensions');if(et.dims[0]!==g&&et.dims[0]!==1||et.dims[1]!==i.numHeads||et.dims[2]!==jt||et.dims[3]!==No)throw new Error('Input "relative_position_bias" shape (batch_size, 1, sequence_length, kv_sequence_length)')}return{batchSize:g,sequenceLength:jt,pastSequenceLength:or,kvSequenceLength:Kt,totalSequenceLength:No,maxSequenceLength:jr,inputHiddenSize:0,hiddenSize:Ht,vHiddenSize:xn,headSize:Lr,vHeadSize:Math.floor(xn/i.numHeads),numHeads:i.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:i.maskFilterValue,maskType:qr,scale:i.scale,broadcastResPosBias:Ro,passPastInKv:vn,qkvFormat:ir}},kl=e=>we({...e}),El=we({perm:[0,2,1,3]}),um=(e,i,a,o,c,s,d)=>{let et=[o,c,s],$t=M.size(et),h=[{type:12,data:$t},{type:12,data:d},{type:12,data:s}],b=g=>{let jt=K("qkv_with_bias",i.dataType,et),Ht=U("qkv",i.dataType,et),Kt=U("bias",a.dataType,et),or=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`
  ${g.registerUniforms(or).declareVariables(Ht,Kt,jt)}
  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;

    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];
  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:et,dataType:i.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil($t/64)},programUniforms:h}),getShaderSource:b},{inputs:[i,a],outputs:[-1]})[0]},$o=(e,i,a,o,c,s,d,et)=>{let $t=s;if(d){if(o===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return $t=um(e,s,d,i,o,a*c,et),$t=$t.reshape([i,o,a,c]),e.compute(xt($t,El.perm),{inputs:[$t],outputs:[-1]})[0]}else return s.dims.length===3&&($t=s.reshape([i,o,a,c])),e.compute(xt($t,El.perm),{inputs:[$t],outputs:[-1]})[0]},Ol=(e,i)=>{let a=sm(e.inputs,i),o=e.inputs[0],c=lt(e.inputs,1),s=lt(e.inputs,2),d=lt(e.inputs,3),et=lt(e.inputs,4),$t=lt(e.inputs,5),h=lt(e.inputs,6),b=lt(e.inputs,7);if(o.dims.length===5)throw new Error("Packed QKV is not implemented");if((c==null?void 0:c.dims.length)===5)throw new Error("Packed KV is not implemented");let g=c&&s&&c.dims.length===4&&s.dims.length===4,jt=$o(e,a.batchSize,a.numHeads,a.sequenceLength,a.headSize,o,d,0);if(g)return Xn(e,jt,c,s,et,void 0,h,b,$t,a,i);if(!c||!s)throw new Error("key and value must be provided");let Ht=$o(e,a.batchSize,a.numHeads,a.kvSequenceLength,a.headSize,c,d,a.hiddenSize),Kt=$o(e,a.batchSize,a.numHeads,a.kvSequenceLength,a.vHeadSize,s,d,2*a.hiddenSize);Xn(e,jt,Ht,Kt,et,void 0,h,b,$t,a,i)}}),lm,dm,cm,pm,mm,fm,hm,gm,Rl,zl=j(()=>{ye(),xe(),_e(),lm=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let i=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(i=e[3].dims[0]*2===e[1].dims[0]),!i)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},dm=(e,i,a)=>{let o="";for(let c=i-1;c>=0;--c)o+=`
            k = i32(${e.indicesGet("indices",c)}) - ${fe("uniforms.pads",c,a)};
            if (k < 0) {
              break;
            }
            if (k >= i32(${fe("uniforms.x_shape",c,i)})) {
              break;
            }
            offset += k * i32(${fe("uniforms.x_strides",c,i)});
        `;return`
          value = ${e.type.value}(uniforms.constant_value);
          for (var i = 0; i < 1; i++) {
            var offset = 0;
            var k = 0;
            ${o}
            value = x[offset];
          }
      `},cm=(e,i,a)=>{let o="";for(let c=i-1;c>=0;--c)o+=`
                k = i32(${e.indicesGet("indices",c)}) - ${fe("uniforms.pads",c,a)};
                if (k < 0) {
                  k = -k;
                }
                {
                  let _2n_1 = 2 * (i32(${fe("uniforms.x_shape",c,i)}) - 1);
                  k = k % _2n_1;
                  if(k >= i32(${fe("uniforms.x_shape",c,i)})) {
                    k = _2n_1 - k;
                  }
                }
                offset += k * i32(${fe("uniforms.x_strides",c,i)});
            `;return`
              var offset = 0;
              var k = 0;
              ${o}
              value = x[offset];
          `},pm=(e,i,a)=>{let o="";for(let c=i-1;c>=0;--c)o+=`
                k = i32(${e.indicesGet("indices",c)}) - ${fe("uniforms.pads",c,a)};
                if (k < 0) {
                  k = 0;
                }
                if (k >= i32(${fe("uniforms.x_shape",c,i)})) {
                  k = i32(${fe("uniforms.x_shape",c,i)}) - 1;
                }
                offset += k * i32(${fe("uniforms.x_strides",c,i)});
            `;return`
              var offset = 0;
              var k = 0;
              ${o}
              value = x[offset];
          `},mm=(e,i,a)=>{let o="";for(let c=i-1;c>=0;--c)o+=`
                k = i32(${e.indicesGet("indices",c)}) - ${fe("uniforms.pads",c,a)};
                if (k < 0)  {
                  k += i32(${fe("uniforms.x_shape",c,i)}]);
                }
                if (k >= i32(${fe("uniforms.x_shape",c,i)})) {
                  k -= i32(${fe("uniforms.x_shape",c,i)});
                }
                offset += k * i32(${fe("uniforms.x_strides",c,i)});
            `;return`
              var offset = 0;
              var k = 0;
              ${o}
              value = x[offset];
          `},fm=(e,i,a)=>{switch(a.mode){case 0:return dm(e,i,a.pads.length);case 1:return cm(e,i,a.pads.length);case 2:return pm(e,i,a.pads.length);case 3:return mm(e,i,a.pads.length);default:throw new Error("Invalid mode")}},hm=(e,i)=>{let a=M.padShape(e[0].dims.slice(),i.pads),o=e[0].dims,c=M.size(a),s=[{type:12,data:c},{type:6,data:i.pads}];i.mode===0&&s.push({type:e[0].dataType,data:i.value}),s.push(...X(e[0].dims,a));let d=["rank"],et=$t=>{let h=K("output",e[0].dataType,a.length),b=U("x",e[0].dataType,o.length),g=b.type.value,jt=fm(h,o.length,i),Ht=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:i.pads.length}];return i.mode===0&&Ht.push({name:"constant_value",type:g}),`
            ${$t.registerUniforms(Ht).declareVariables(b,h)}
            ${$t.mainStart()}
            ${$t.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

            let indices = ${h.offsetToIndices("global_idx")};

            var value = ${g}(0);
            ${jt}
            output[global_idx] = value;
        }`};return{name:"Pad",shaderCache:{hint:`${i.mode}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(a)/64)},programUniforms:s}),getShaderSource:et}},gm=(e,i)=>{if(e.length>1){let a=e[1].getBigInt64Array(),o=e.length>=3&&e[2].data?e[2].getFloat32Array()[0]:0,c=e[0].dims.length,s=new Int32Array(2*c).fill(0);if(e.length>=4){let et=e[3].getBigInt64Array();for(let $t=0;$t<et.length;$t++)s[Number(et[$t])]=Number(a[$t]),s[Number(et[$t])+c]=Number(a[$t+et.length])}else a.forEach((et,$t)=>s[Number($t)]=Number(et));let d=[];return s.forEach(et=>d.push(et)),{mode:i.mode,value:o,pads:d}}else return i},Rl=(e,i)=>{lm(e.inputs);let a=gm(e.inputs,i);e.compute(hm(e.inputs,a),{inputs:[0]})}}),si,Bl,Dl,Ml,Ul,ym,bm,Wl,Nl,Vl,Hl,Gl,Ll,Fl,ql,jl,Kl,Yl,Xl,Zl=j(()=>{_t(),ye(),xe(),_e(),si=e=>{if(ke.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},Bl=(e,i,a)=>{let o=i.format==="NHWC",c=e.dims.slice();o&&c.splice(1,0,c.pop());let s=Object.hasOwnProperty.call(i,"dilations"),d=i.kernelShape.slice(),et=i.strides.slice(),$t=s?i.dilations.slice():[],h=i.pads.slice();pr.adjustPoolAttributes(a,c,d,et,$t,h);let b=pr.computePoolOutputShape(a,c,et,$t,d,h,i.autoPad),g=Object.assign({},i);s?Object.assign(g,{kernelShape:d,strides:et,pads:h,dilations:$t,cacheKey:i.cacheKey}):Object.assign(g,{kernelShape:d,strides:et,pads:h,cacheKey:i.cacheKey});let jt=b.slice();return jt.push(jt.splice(1,1)[0]),[g,o?jt:b]},Dl=(e,i)=>{let a=i.format==="NHWC",o=M.size(e),c=M.size(i.kernelShape),s=[{type:12,data:o},{type:12,data:c}],d=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(i.kernelShape.length<=2){let et=i.kernelShape[i.kernelShape.length-1],$t=i.strides[i.strides.length-1],h=i.pads[i.pads.length/2-1],b=i.pads[i.pads.length-1],g=!!(h+b);s.push({type:12,data:et},{type:12,data:$t},{type:12,data:h},{type:12,data:b}),d.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let jt=!1;if(i.kernelShape.length===2){let Ht=i.kernelShape[i.kernelShape.length-2],Kt=i.strides[i.strides.length-2],or=i.pads[i.pads.length/2-2],jr=i.pads[i.pads.length-2];jt=!!(or+jr),s.push({type:12,data:Ht},{type:12,data:Kt},{type:12,data:or},{type:12,data:jr}),d.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[s,d,!0,g,jt]}else{if(a)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let et=M.computeStrides(i.kernelShape);s.push({type:12,data:et},{type:12,data:i.pads},{type:12,data:i.strides}),d.push({name:"kernelStrides",type:"u32",length:et.length},{name:"pads",type:"u32",length:i.pads.length},{name:"strides",type:"u32",length:i.strides.length});let $t=i.pads.reduce((h,b)=>h+b);return[s,d,!!$t,!1,!1]}},Ml=(e,i,a,o,c,s,d,et,$t,h,b,g)=>{let jt=c.format==="NHWC",Ht=i.type.value,Kt=K("output",i.type.tensor,o);if(c.kernelShape.length<=2){let or="",jr="",Lr="",ir=a-(jt?2:1);if(b?or=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${ir}] = indices[${ir}] * uniforms.sw - uniforms.pwStart + i;
                  if (xIndices[${ir}] < 0 || xIndices[${ir}]
                      >= uniforms.x_shape[${ir}]) {
                    pad++;
                    continue;
                  }
                  let x_val = x[${i.indicesToOffset("xIndices")}];
                  ${s}
                }`:or=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${ir}] = indices[${ir}] * uniforms.sw - uniforms.pwStart + i;
                  let x_val = x[${i.indicesToOffset("xIndices")}];
                  ${s}
                }`,c.kernelShape.length===2){let qr=a-(jt?3:2);g?jr=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${qr}] = indices[${qr}] * uniforms.sh - uniforms.phStart + j;
                  if (xIndices[${qr}] < 0 || xIndices[${qr}] >= uniforms.x_shape[${qr}]) {
                    pad += i32(uniforms.kw);
                    continue;
                  }
              `:jr=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${qr}] = indices[${qr}] * uniforms.sh - uniforms.phStart + j;
                `,Lr=`
              }
            `}return`
            ${e.registerUniforms($t).declareVariables(i,Kt)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

              let indices = ${Kt.offsetToIndices("global_idx")};
              var xIndices = ${Kt.offsetToIndices("global_idx")};

              var value = ${Ht}(${et});
              var pad = 0;
              ${jr}
              ${or}
              ${Lr}
              ${d}

              output[global_idx] = value;
            }`}else{if(jt)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let or=c.kernelShape.length,jr=c.pads.length,Lr="";return h?Lr=`
                if (xIndices[j] >= uniforms.x_shape[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${i.indicesToOffset("xIndices")}];
                ${s}
              }`:Lr=`
              }
              let x_val = x[${i.indicesToOffset("xIndices")}];
              ${s}
            `,`
            ${e.registerUniforms($t).declareVariables(i,Kt)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
              let indices = ${Kt.offsetToIndices("global_idx")};
              var xIndices = ${Kt.offsetToIndices("global_idx")};

              var offsets: array<u32, ${or}>;

              var value = ${Ht}(${et});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {
                var offset = i;
                for (var j = 0u; j < ${or-1}u; j++) {
                  offsets[j] = offset / ${fe("uniforms.kernelStrides","j",or)};
                  offset -= offsets[j] * ${fe("uniforms.kernelStrides","j",or)};
                }
                offsets[${or-1}] = offset;

                isPad = false;
                for (var j = ${a-or}u; j < ${a}u; j++) {
                  xIndices[j] = indices[j] * ${fe("uniforms.strides",`j - ${a-or}u`,or)}
                    + offsets[j - ${a-or}u] - ${fe("uniforms.pads","j - 2u",jr)};
                  ${Lr}
              }
              ${d}

              output[global_idx] = value;
            }`}},Ul=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,ym=e=>`${Ul(e)};${e.countIncludePad}`,bm=e=>`${Ul(e)};${e.storageOrder};${e.dilations}`,Wl=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),Nl=(e,i,a,o)=>{let[c,s]=Bl(i,o,a),d=U("x",i.dataType,i.dims.length),et=d.type.value,$t="value += x_val;",h="";c.countIncludePad?h+=`value /= ${et}(uniforms.kernelSize);`:h+=`value /= ${et}(i32(uniforms.kernelSize) - pad);`;let[b,g,jt,Ht,Kt]=Dl(s,c);b.push(...X(i.dims,s));let or=["rank"];return{name:e,shaderCache:{hint:`${o.cacheKey};${jt};${Ht};${Kt}`,inputDependencies:or},getRunData:()=>({outputs:[{dims:s,dataType:i.dataType}],dispatchGroup:{x:Math.ceil(M.size(s)/64)},programUniforms:b}),getShaderSource:jr=>Ml(jr,d,i.dims.length,s.length,c,$t,h,0,g,jt,Ht,Kt)}},Vl=e=>{let i=e.count_include_pad!==0,a=Wl(e);if(a.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let o={countIncludePad:i,...a,cacheKey:""};return{...o,cacheKey:ym(o)}},Hl=(e,i)=>{si(e.inputs),e.compute(Nl("AveragePool",e.inputs[0],!1,i))},Gl={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},Ll=e=>{let i=e.format;return{format:i,...Gl,cacheKey:i}},Fl=(e,i)=>{si(e.inputs),e.compute(Nl("GlobalAveragePool",e.inputs[0],!0,i))},ql=(e,i,a,o)=>{let[c,s]=Bl(i,o,a),d=`
      value = max(x_val, value);
    `,et="",$t=U("x",i.dataType,i.dims.length),h=["rank"],[b,g,jt,Ht,Kt]=Dl(s,c);return b.push(...X(i.dims,s)),{name:e,shaderCache:{hint:`${o.cacheKey};${jt};${Ht};${Kt}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:s,dataType:i.dataType}],dispatchGroup:{x:Math.ceil(M.size(s)/64)},programUniforms:b}),getShaderSource:or=>Ml(or,$t,i.dims.length,s.length,c,d,et,i.dataType===10?-65504:-1e5,g,jt,Ht,Kt)}},jl=(e,i)=>{si(e.inputs),e.compute(ql("MaxPool",e.inputs[0],!1,i))},Kl=e=>{let i=e.storage_order,a=e.dilations,o=Wl(e);if(i!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(o.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let c={storageOrder:i,dilations:a,...o,cacheKey:""};return{...c,cacheKey:bm(c)}},Yl=e=>{let i=e.format;return{format:i,...Gl,cacheKey:i}},Xl=(e,i)=>{si(e.inputs),e.compute(ql("GlobalMaxPool",e.inputs[0],!0,i))}}),wm,$m,Ql,Jl=j(()=>{_t(),ye(),_e(),wm=(e,i,a)=>{let o=e===i,c=e<i&&a<0,s=e>i&&a>0;if(o||c||s)throw new Error("Range these inputs' contents are invalid.")},$m=(e,i,a,o)=>{let c=Math.abs(Math.ceil((i-e)/a)),s=[c],d=c,et=[{type:12,data:d},{type:o,data:e},{type:o,data:a},...X(s)],$t=h=>{let b=K("output",o,s.length),g=b.type.value,jt=[{name:"outputSize",type:"u32"},{name:"start",type:g},{name:"delta",type:g}];return`
        ${h.registerUniforms(jt).declareVariables(b)}
        ${h.mainStart()}
        ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        output[global_idx] = uniforms.start + ${g}(global_idx) * uniforms.delta;
      }`};return{name:"Range",shaderCache:{hint:`${o}`},getShaderSource:$t,getRunData:()=>({outputs:[{dims:s,dataType:o}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:et})}},Ql=e=>{let i=0,a=0,o=0;e.inputs[0].dataType===6?(i=e.inputs[0].getInt32Array()[0],a=e.inputs[1].getInt32Array()[0],o=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(i=e.inputs[0].getFloat32Array()[0],a=e.inputs[1].getFloat32Array()[0],o=e.inputs[2].getFloat32Array()[0]),ke.webgpu.validateInputContent&&wm(i,a,o),e.compute($m(i,a,o,e.inputs[0].dataType),{inputs:[]})}}),_m,xm,Sm,Cm,Im,Tm,Am,Em,km,Om,Pm,ed,Rm,zm,Bm,Dm,Mm,td,rd,nd=j(()=>{ye(),xe(),Ze(),_e(),_m=(e,i)=>{if(e.every(a=>a>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(i.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and
            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(i.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},xm=(e,i,a)=>{i.every(c=>c>=0&&c<a||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let o=new Array(a).fill(1);return i.forEach((c,s)=>o[c]=e[s]),o},Sm=(e,i,a,o,c,s)=>{let[d,et,$t]=a>10?[1,2,3]:[-1,e.length>1?1:-1,-1],h=e[0].dims.length;if(d>0&&e.length>d&&e[d].dims.length>0)e[d].getFloat32Array().forEach(b=>s.push(b));else if(i.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(et>0&&e.length>et&&e[et].dims.length>0){if(e[et].getFloat32Array().forEach(b=>o.push(b)),o.length!==0&&o.length!==h&&a>=18&&o.length!==i.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");_m(o,i),i.axes.length>0&&xm(o,i.axes,h).forEach((b,g)=>o[g]=b)}if($t>0&&e.length>$t&&(e[$t].getBigInt64Array().forEach(b=>c.push(Number(b))),c.length!==h||a>=18&&c.length===i.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(i.axes.length>0){if(o.length!==i.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(c.length!==i.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(typeof o<"u"&&typeof c<"u"&&o.length>0&&c.length>h)throw new Error("Resize requires only of scales or sizes to be specified")},Cm=(e,i)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,
     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${i} { `+(()=>{switch(e){case"asymmetric":return`return ${i}(xResized) / ${i}(xScale);`;case"pytorch_half_pixel":return`if (lengthResized > 1) {
                    return (${i}(xResized) + 0.5) / ${i}(xScale) - 0.5;
                  } else {
                    return 0.0;
                  }`;case"tf_half_pixel_for_nn":return`return (${i}(xResized) + 0.5) / ${i}(xScale);`;case"align_corners":return`if (lengthResized == 1) {
                    return 0.0;
                  } else {
                    // The whole part and the fractional part are calculated separately due to inaccuracy of floating
                    // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an
                    // offset-by-one error later in floor().
                    let whole = ${i}(xResized * (lengthOriginal - 1) / (lengthResized - 1));
                    let fract =
                        ${i}(xResized * (lengthOriginal - 1) % (lengthResized - 1)) / ${i}(lengthResized - 1);
                    return whole + fract;
                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {
                    return ${i}(roiStart) * ${i}(lengthOriginal - 1) +
                        (${i}(xResized) * ${i}(roiEnd - roiStart) * ${i}(lengthOriginal - 1)) /
                        ${i}(lengthResized - 1);
                  } else {
                    return 0.5 * ${i}(roiStart + roiEnd) * ${i}(lengthOriginal - 1);
                  }`;case"half_pixel_symmetric":return`const outputWidth = ${i}xScale * ${i}(lengthResized);
                  const adjustment = ${i}(lengthResized) / outputWidth;
                  const center = ${i}(lengthOriginal) / 2;
                  const offset = center * (1 - adjustment);
                  return offset + ((${i}(xResized) + 0.5) / ${i}(xScale)) - 0.5;`;case"half_pixel":return`return ((${i}(xResized) + 0.5) / ${i}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",Im=(e,i,a)=>`fn getNearestPixelFromOriginal(xOriginal: ${a}, isDownSample: bool) -> ${a} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(i<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",Tm=(e,i,a)=>{let o=new Array(a).fill(0).concat(new Array(a).fill(1)),c=e.length===0?o:e.slice();return i.length>0?(i.forEach((s,d)=>{o[s]=c[d],o[d+a]=c[i.length+d]}),o):c},Am=(e,i,a,o)=>{let c=[];if(a.length>0)if(o.length>0){if(e.forEach(s=>c.push(s)),Math.max(...o)>e.length)throw new Error("axes is out of bound");o.forEach((s,d)=>c[s]=a[d])}else a.forEach(s=>c.push(s));else{if(i.length===0)throw new Error("Resize requires either scales or sizes.");c=e.map((s,d)=>Math.round(s*i[d]))}return c},Em=(e,i,a)=>{let o=(()=>{switch(a.keepAspectRatioPolicy){case"not_larger":return a.axes.length>0?Math.min(...a.axes.map(s=>i[s]),Number.MAX_VALUE):Math.min(...i,Number.MAX_VALUE);case"not_smaller":return a.axes.length>0?Math.max(...a.axes.map(s=>i[s]),Number.MIN_VALUE):Math.max(...i,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${a.keepAspectRatioPolicy} is not supported`)}})();i.fill(1,0,i.length);let c=e.slice();return a.axes.length>0?(a.axes.forEach(s=>i[s]=o),a.axes.forEach(s=>c[s]=Math.round(e[s]*i[s]))):(i.fill(o,0,i.length),c.forEach((s,d)=>c[d]=Math.round(s*i[d]))),c},km=(e,i,a,o,c)=>`
    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${a.length}> {
      var original_indices: array<${e.type.value}, ${a.length}>;
      for (var i:u32 = 0; i < ${a.length}; i++) {
        var output_index = ${e.indicesGet("output_indices","i")};
        var scale = ${fe("uniforms.scales","i",o)};
        var roi_low = ${fe("uniforms.roi","i",c)};
        var roi_hi = ${fe("uniforms.roi",`i + ${i.length}`,c)};
        if (scale == 1.0) {
          original_indices[i] = ${e.type.value}(output_index);
        } else {
          var input_shape_i = ${fe("uniforms.input_shape","i",i.length)};
          var output_shape_i = ${fe("uniforms.output_shape","i",a.length)};
          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                           input_shape_i, roi_low, roi_hi);
        }
      }
      return original_indices;
    }`,Om=(e,i,a,o,c,s,d)=>`
    fn calculateInputIndicesFromOutputIndices(output_indices: ${i.type.indices}) -> ${e.type.indices} {
      var input_indices: ${e.type.indices};
      for (var i:u32 = 0; i < ${o.length}; i++) {
        var output_index = ${i.indicesGet("output_indices","i")};
        var input_index: u32;
        var scale = ${fe("uniforms.scales","i",c)};
        if (scale == 1.0) {
          input_index = output_index;
        } else {
          var roi_low = ${fe("uniforms.roi","i",s)};
          var roi_hi = ${fe("uniforms.roi",`i + ${a.length}`,s)};
          var input_shape_i = ${fe("uniforms.input_shape","i",a.length)};
          var output_shape_i = ${fe("uniforms.output_shape","i",o.length)};
          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                        input_shape_i, roi_low, roi_hi);
          if (!${d} || (original_idx >= 0 && original_idx < ${i.type.value}(input_shape_i))) {
            if (original_idx < 0) {
              input_index = 0;
            } else if (original_idx > ${i.type.value}(input_shape_i - 1)) {
              input_index = input_shape_i - 1;
            } else {
              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));
            }
          } else {
            input_index = u32(original_idx);
          }
        }
        ${e.indicesSet("input_indices","i"," input_index")}
      }
      return input_indices;
    }`,Pm=(e,i)=>`
    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {
      for (var i:u32 = 0; i < ${i.length}; i++) {
        var input_index = ${e.indicesGet("input_indices","i")};
        if (input_index < 0 || input_index >= ${fe("uniforms.input_shape","i",i.length)}) {
          return false;
        }
      }
      return true;
    }`,ed=(e,i,a,o)=>e.rank>o?`
    ${e.indicesSet("input_indices",i,"channel")};
    ${e.indicesSet("input_indices",a,"batch")};
`:"",Rm=(e,i,a,o,c)=>{let[s,d,et,$t]=a.length===2?[-1,0,1,-1]:[0,2,3,1],h=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${h} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",d,`max(0, min(row, ${a[d]} - 1))`)};
      ${e.indicesSet("input_indices",et,`max(0, min(col, ${a[et]} - 1))`)};
      ${ed(e,$t,s,2)}
      return ${e.getByIndices("input_indices")};
    }

    fn bilinearInterpolation(output_indices: ${i.type.indices}) -> ${h} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var row:${h} = originalIndices[${d}];
      var col:${h} = originalIndices[${et}];
      ${o?`if (row < 0 || row > (${a[d]} - 1) || col < 0 || col > (${a[et]} - 1)) {
        return ${c};
      }`:""};
      row = max(0, min(row, ${a[d]} - 1));
      col = max(0, min(col, ${a[et]} - 1));
      var row1: u32 = u32(row);
      var col1: u32 = u32(col);
      var row2: u32 = u32(row + 1);
      var col2: u32 = u32(col + 1);
      var channel: u32 = ${a.length>2?`u32(originalIndices[${$t}])`:"0"};
      var batch: u32 =  ${a.length>2?`u32(originalIndices[${s}])`:"0"};
      var x11: ${h} = getInputValue(batch, channel, row1, col1);
      var x12: ${h} = getInputValue(batch, channel, row1, col2);
      var x21: ${h} = getInputValue(batch, channel, row2, col1);
      var x22: ${h} = getInputValue(batch, channel, row2, col2);
      var dx1: ${h} = abs(row - ${h}(row1));
      var dx2: ${h} = abs(${h}(row2) - row);
      var dy1: ${h} = abs(col - ${h}(col1));
      var dy2: ${h} = abs(${h}(col2) - col);
      if (row1 == row2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (col1 == col2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);
    }`},zm=(e,i,a,o,c,s,d,et,$t,h)=>{let b=a.length===2,[g,jt]=b?[0,1]:[2,3],Ht=e.type.value,Kt=or=>{let jr=or===g?"row":"col";return`
      fn ${jr}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${i.type.indices}) -> ${Ht} {
        var output_index = ${i.indicesGet("output_indices",or)};
        var originalIdx: ${Ht} = getOriginalCoordinateFromResizedCoordinate(output_index, ${c[or]},
        ${o[or]}, ${a[or]}, ${s[or]}, ${s[or]} + ${a.length});
        var fractOriginalIdx: ${Ht} = originalIdx - floor(originalIdx);
        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);

        if (${et} && (originalIdx < 0 || originalIdx > (${a[or]} - 1))) {
          return ${$t};
        }
        var data: array<${Ht}, 4> = array<${Ht}, 4>(0.0, 0.0, 0.0, 0.0);
        for (var i: i32 = -1; i < 3; i++) {
          var ${jr}: ${Ht} = originalIdx + ${Ht}(i);
          if (${jr} < 0 || ${jr} >= ${a[or]}) {
            ${(()=>h?`coefs[i + 1] = 0.0;
                        continue;`:et?`return ${$t};`:`${jr} = max(0, min(${jr}, ${a[or]} - 1));`)()};
          }
        var input_indices_copy: ${e.type.indices} = input_indices;
          ${e.indicesSet("input_indices_copy",or,`u32(${jr})`)};
          data[i + 1] = ${or===g?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};
        }
        return cubicInterpolation1D(data, coefs);
      }`};return`
    ${Kt(g)};
    ${Kt(jt)};
  fn getCubicInterpolationCoefs(s: ${Ht}) -> array<${Ht}, 4> {
    var absS = abs(s);
    var coeffs: array<${Ht}, 4> = array<${Ht}, 4>(0.0, 0.0, 0.0, 0.0);
    var oneMinusAbsS: ${Ht} = 1.0 - absS;
    var twoMinusAbsS: ${Ht} = 2.0 - absS;
    var onePlusAbsS: ${Ht} = 1.0 + absS;
    coeffs[0] = ((${d} * onePlusAbsS - 5 * ${d}) * onePlusAbsS + 8 * ${d}) * onePlusAbsS - 4 * ${d};
    coeffs[1] = ((${d} + 2) * absS - (${d} + 3)) * absS * absS + 1;
    coeffs[2] = ((${d} + 2) * oneMinusAbsS - (${d} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;
    coeffs[3] = ((${d} * twoMinusAbsS - 5 * ${d}) * twoMinusAbsS + 8 * ${d}) * twoMinusAbsS - 4 * ${d};
    return coeffs;
  }

  fn cubicInterpolation1D(x: array<${Ht}, 4>, coefs: array<${Ht}, 4>) -> ${Ht} {
    var coefsSum: ${Ht} = coefs[0] + coefs[1] + coefs[2] + coefs[3];
    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;
  }

  fn bicubicInterpolation(output_indices: ${i.type.indices}) -> ${Ht} {
    var input_indices: ${e.type.indices} = output_indices;
    return colCubicInterpolation(input_indices, output_indices);
  }
    `},Bm=(e,i,a,o,c)=>{let[s,d,et,$t,h]=a.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],b=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${b} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",d,`max(0, min(depth, ${a[d]} - 1))`)};
      ${e.indicesSet("input_indices",et,`max(0, min(height, ${a[et]} - 1))`)};
      ${e.indicesSet("input_indices",$t,`max(0, min(width, ${a[$t]} - 1))`)};
      ${ed(e,h,s,3)}
      return ${e.getByIndices("input_indices")};
    }

    fn trilinearInterpolation(output_indices: ${i.type.indices}) -> ${b} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var depth:${b} = originalIndices[${d}];
      var height:${b} = originalIndices[${et}];
      var width:${b} = originalIndices[${$t}];
      ${o?`if (depth < 0 || depth > (${a[d]} - 1) || height < 0 || height > (${a[et]} - 1) || width < 0 || (width > ${a[$t]} - 1)) {
      return ${c};
        }`:""};

    depth = max(0, min(depth, ${a[d]} - 1));
      height = max(0, min(height, ${a[et]} - 1));
      width = max(0, min(width, ${a[$t]} - 1));
      var depth1: u32 = u32(depth);
      var height1: u32 = u32(height);
      var width1: u32 = u32(width);
      var depth2: u32 = u32(depth + 1);
      var height2: u32 = u32(height + 1);
      var width2: u32 = u32(width + 1);
      var channel: u32 = ${a.length>3?`u32(originalIndices[${h}])`:"0"};
      var batch: u32 =  ${a.length>3?`u32(originalIndices[${s}])`:"0"};

      var x111: ${b} = getInputValue(batch, channel, depth1, height1, width1);
      var x112: ${b} = getInputValue(batch, channel, depth1, height1, width2);
      var x121: ${b} = getInputValue(batch, channel, depth1, height2, width1);
      var x122: ${b} = getInputValue(batch, channel, depth1, height2, width2);
      var x211: ${b} = getInputValue(batch, channel, depth2, height1, width1);
      var x212: ${b} = getInputValue(batch, channel, depth2, height1, width2);
      var x221: ${b} = getInputValue(batch, channel, depth2, height2, width1);
      var x222: ${b} = getInputValue(batch, channel, depth2, height2, width2);
      var dx1: ${b} = abs(depth - ${b}(depth1));
      var dx2: ${b} = abs(${b}(depth2) - depth);
      var dy1: ${b} = abs(height - ${b}(height1));
      var dy2: ${b} = abs(${b}(height2) - height);
      var dz1: ${b} = abs(width - ${b}(width1));
      var dz2: ${b} = abs(${b}(width2) - width);
      if (depth1 == depth2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (height1 == height2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      if (width1 == width2) {
        dz1 = 0.5;
        dz2 = 0.5;
      }
      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +
              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);
    }`},Dm=(e,i,a,o,c,s)=>{let d=e.dims,et=Tm(s,i.axes,d.length),$t=Am(d,o,c,i.axes),h=o.slice();o.length===0&&(h=d.map((ir,qr)=>ir===0?1:$t[qr]/ir),i.keepAspectRatioPolicy!=="stretch"&&($t=Em(d,h,i)));let b=K("output",e.dataType,$t.length),g=U("input",e.dataType,d.length),jt=M.size($t),Ht=d.length===$t.length&&d.every((ir,qr)=>ir===$t[qr]),Kt=i.coordinateTransformMode==="tf_crop_and_resize",or=i.extrapolationValue,jr=g.type.value,Lr=ir=>`
      ${Ht?"":`
      ${Cm(i.coordinateTransformMode,jr)};
      ${(()=>{switch(i.mode){case"nearest":return`
              ${Pm(g,d)};
              ${Im(i.nearestMode,a,jr)};
              ${Om(g,b,d,$t,h.length,et.length,Kt)};
              `;case"linear":return`
              ${km(b,d,$t,h.length,et.length)};
              ${(()=>{if(d.length===2||d.length===4)return`${Rm(g,b,d,Kt,or)}`;if(d.length===3||d.length===5)return`${Bm(g,b,d,Kt,or)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};
            `;case"cubic":return`
            ${(()=>{if(d.length===2||d.length===4)return`${zm(g,b,d,$t,h,et,i.cubicCoeffA,Kt,i.extrapolationValue,i.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};
            `;default:throw Error("Invalid resize mode")}})()};
      `}
      ${ir.registerUniform("output_size","u32").registerUniform("scales","f32",h.length).registerUniform("roi","f32",et.length).declareVariables(g,b)}
      ${ir.mainStart()}
        ${ir.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
        ${Ht?"output[global_idx] = input[global_idx];":`
        let output_indices = ${b.offsetToIndices("global_idx")};
        var input_indices: ${g.type.indices};
        ${(()=>{switch(i.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);
                if (checkInputIndices(input_indices)) {
                  output[global_idx] = ${g.getByIndices("input_indices")};
                } else {
                  output[global_idx] = ${i.extrapolationValue};
                }`;case"linear":return`output[global_idx] = ${d.length===2||d.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${i.mode}`)}})()};
`}
      }`;return{name:"Resize",shaderCache:{hint:`${i.cacheKey}|${a}|${h.length>0?h:""}|${c.length>0?c:""}|${et.length>0?et:""}|${Ht}|${d}`,inputDependencies:["rank"]},getShaderSource:Lr,getRunData:()=>({outputs:[{dims:$t,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(jt/64)},programUniforms:[{type:12,data:jt},{type:1,data:h},{type:1,data:et},...X(d,$t)]})}},Mm=e=>{let i=e.customDataBuffer;return new Uint32Array(i,i.byteOffset,1)[0]},td=(e,i)=>{let a=[],o=[],c=[],s=Mm(e);if(i.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");Sm(e.inputs,i,s,a,o,c),e.compute(Dm(e.inputs[0],i,s,a,o,c),{inputs:[0]})},rd=e=>{let i=e.antialias,a=e.axes,o=e.coordinateTransformMode,c=e.cubicCoeffA,s=e.excludeOutside!==0,d=e.extrapolationValue,et=e.keepAspectRatioPolicy,$t=e.mode,h=e.nearestMode===""?"simple":e.nearestMode;return we({antialias:i,axes:a,coordinateTransformMode:o,cubicCoeffA:c,excludeOutside:s,extrapolationValue:d,keepAspectRatioPolicy:et,mode:$t,nearestMode:h})}}),Um,Wm,id$1,od=j(()=>{ye(),xe(),Ze(),_e(),Um=(e,i)=>{let[a,o,c,s]=e,{numHeads:d,rotaryEmbeddingDim:et}=i;if(a.dims.length!==3&&a.dims.length!==4)throw new Error(`Input 'x' is expected to have 3 or 4 dimensions, got ${a.dims.length}`);if(!M.areEqual(o.dims,[])&&!M.areEqual(o.dims,[1])&&o.dims.length!==2)throw new Error(`Input 'position_ids' is expected to have 0, 1, or 2 dimensions, got ${o.dims.length}`);if(c.dims.length!==2)throw new Error(`Input 'cos_cache' is expected to have 2 dimensions, got ${c.dims.length}`);if(s.dims.length!==2)throw new Error(`Input 'sin_cache' is expected to have 2 dimensions, got ${s.dims.length}`);if(!M.areEqual(c.dims,s.dims))throw new Error("Inputs 'cos_cache' and 'sin_cache' are expected to have the same shape");if(et>0&&d===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let $t=a.dims[0],h=a.dims[a.dims.length-2],b=c.dims[0],g=M.sizeFromDimension(a.dims,1)/h,jt=et===0?c.dims[1]*2:g/d;if(et>jt)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(o.dims.length===2){if($t!==o.dims[0])throw new Error(`Input 'position_ids' dimension 0 should be of size batch_size, got ${o.dims[0]}`);if(h!==o.dims[1])throw new Error(`Input 'position_ids' dimension 1 should be of size sequence_length, got ${o.dims[1]}`)}if(jt/2!==c.dims[1]&&et/2!==c.dims[1])throw new Error(`Input 'cos_cache' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${c.dims[1]}`);if(h>b)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Wm=(e,i)=>{let{interleaved:a,numHeads:o,rotaryEmbeddingDim:c,scale:s}=i,d=e[0].dims[0],et=M.sizeFromDimension(e[0].dims,1),$t=e[0].dims[e[0].dims.length-2],h=et/$t,b=e[2].dims[1],g=c===0?b*2:h/o,jt=new Array(d,$t,h/g,g-b),Ht=M.computeStrides(jt),Kt=[{type:1,data:s},{type:12,data:jt},{type:12,data:Ht},...e[0].dims.length===3?new Array({type:12,data:[et,h,g,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[et,g,$t*g,1]}):[],...X(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],or=jr=>{let Lr=U("input",e[0].dataType,e[0].dims.length),ir=U("position_ids",e[1].dataType,e[1].dims.length),qr=U("cos_cache",e[2].dataType,e[2].dims.length),vn=U("sin_cache",e[3].dataType,e[3].dims.length),xn=K("output",e[0].dataType,e[0].dims.length);return jr.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:jt.length},{name:"global_strides",type:"u32",length:Ht.length},{name:"input_output_strides",type:"u32",length:Ht.length}]),`
        ${jr.declareVariables(Lr,ir,qr,vn,xn)}

        ${jr.mainStart(mr)}
          let half_rotary_emb_dim = uniforms.${qr.name}_shape[1];
          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;
          let size = uniforms.global_shape[0] * uniforms.global_strides[0];
          ${jr.guardAgainstOutOfBoundsWorkgroupSizes("size")}

          if (bsnh[3] < half_rotary_emb_dim) {
            let position_ids_idx =
                ${ir.broadcastedIndicesToOffset("bsnh.xy",K("",ir.type.tensor,2))};
            let position_id =
                u32(${ir.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);
            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${a});
            let j = i + select(half_rotary_emb_dim, 1, ${a});
            let re = ${Lr.getByOffset("i")} * ${qr.get("position_id","bsnh[3]")} -
                ${Lr.getByOffset("j")} * ${vn.get("position_id","bsnh[3]")};
            ${xn.setByOffset("i","re")}
            let im = ${Lr.getByOffset("i")} * ${vn.get("position_id","bsnh[3]")} +
                ${Lr.getByOffset("j")} * ${qr.get("position_id","bsnh[3]")};
            ${xn.setByOffset("j","im")}
          } else {
            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;
            ${xn.setByOffset("k",Lr.getByOffset("k"))}
          }
        }`};return{name:"RotaryEmbedding",shaderCache:{hint:we({interleaved:a}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:or,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(jt)/mr)},programUniforms:Kt})}},id$1=(e,i)=>{Um(e.inputs,i),e.compute(Wm(e.inputs,i))}}),Nm,Vm,ad,sd=j(()=>{ye(),xe(),_e(),Nm=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let i=e[0],a=e[1],o=e[2];if(i.dataType!==a.dataType||i.dataType!==o.dataType)throw new Error("All inputs must have the same data type");if(i.dims.length!==3&&i.dims.length!==2)throw new Error("Input must be 2D or 3D");if(a.dims.length!==3&&a.dims.length!==2)throw new Error("Skip must be 2D or 3D");let c=i.dims[i.dims.length-1],s=i.dims[i.dims.length-2];if(a.dims[a.dims.length-1]!==c)throw new Error("Skip must have the same hidden size as input");if(a.dims[a.dims.length-2]!==s)throw new Error("Skip must have the same sequence length as input");if(o.dims.length!==1)throw new Error("Gamma must be 1D");if(o.dims[o.dims.length-1]!==c)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let d=e[3];if(d.dims.length!==1)throw new Error("Beta must be 1D");if(d.dims[d.dims.length-1]!==c)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let d=e[4];if(d.dims.length!==1)throw new Error("Bias must be 1D");if(d.dims[d.dims.length-1]!==c)throw new Error("Bias must have the same hidden size as input")}},Vm=(e,i,a,o)=>{let c=i.simplified,s=e[0].dims,d=M.size(s),et=s,$t=d,h=s.slice(-1)[0],b=o?s.slice(0,-1).concat(1):[],g=!c&&e.length>3,jt=e.length>4,Ht=o&&a>1,Kt=o&&a>2,or=a>3,jr=Ue(h),Lr=[{type:12,data:$t},{type:12,data:jr},{type:12,data:h},{type:1,data:i.epsilon}],ir=vn=>{let xn=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],No=[U("x",e[0].dataType,e[0].dims,jr),U("skip",e[1].dataType,e[1].dims,jr),U("gamma",e[2].dataType,e[2].dims,jr)];g&&No.push(U("beta",e[3].dataType,e[3].dims,jr)),jt&&No.push(U("bias",e[4].dataType,e[4].dims,jr)),No.push(K("output",e[0].dataType,et,jr)),Ht&&No.push(K("mean_output",1,b)),Kt&&No.push(K("inv_std_output",1,b)),or&&No.push(K("input_skip_bias_sum",e[0].dataType,et,jr));let Ro=De(e[0].dataType);return`

      ${vn.registerUniforms(xn).declareVariables(...No)}

      ${vn.mainStart()}
        ${vn.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size / uniforms.hidden_size")}
        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;
        let offset = global_idx * hidden_size_vectorized;
        var sum = ${At("f32",jr)};
        var squareSum = ${At("f32",jr)};
        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {
          let skip_value = skip[offset + i];
          let bias_value = ${jt?"bias[i]":Ro+"(0.0)"};
          let input_value = x[offset + i];
          let value = input_value + skip_value + bias_value;
          ${or?"input_skip_bias_sum[offset + i] = value;":""}
          output[offset + i] = value;
          let f32_value = ${fr(Ro,jr,"value")};
          sum += f32_value;
          squareSum += f32_value * f32_value;
        }
        let mean = ${Et("sum",jr)} / f32(uniforms.hidden_size);
        let inv_std_dev = inverseSqrt(${Et("squareSum",jr)} / f32(uniforms.hidden_size) ${c?"":"- mean * mean"} + uniforms.epsilon);
        ${Ht?"mean_output[global_idx] = mean;":""}
        ${Kt?"inv_std_output[global_idx] = inv_std_dev;":""}
        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {
          output[offset + i] = (output[offset + i] ${c?"":`- ${Ro}(mean)`}) * ${Ro}(inv_std_dev) * gamma[i] ${g?"+ beta[i]":""};
        }
      }`},qr=[{dims:et,dataType:e[0].dataType}];return a>1&&qr.push({dims:b,dataType:1}),a>2&&qr.push({dims:b,dataType:1}),a>3&&qr.push({dims:s,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${jr};${Ht};${Kt};${or}`,inputDependencies:e.map((vn,xn)=>"type")},getShaderSource:ir,getRunData:()=>({outputs:qr,dispatchGroup:{x:Math.ceil($t/h/64)},programUniforms:Lr})}},ad=(e,i)=>{Nm(e.inputs);let a=[0];e.outputCount>1&&a.push(-3),e.outputCount>2&&a.push(-3),e.outputCount>3&&a.push(3),e.compute(Vm(e.inputs,i,e.outputCount,!1),{outputs:a})}}),Hm,ui,Gm,ud,Lm,Fm,ld,dd,cd=j(()=>{ye(),xe(),Ze(),_e(),Hm=(e,i)=>{if(!e||e.length<1)throw new Error("too few inputs");if(i.axes.length!==0){if(i.axes.length!==i.starts.length||i.axes.length!==i.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(i.starts.length!==i.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((a,o)=>{if(e[o+1].dataType!==6&&e[o+1].dataType!==7)throw new Error(`Input ${o} must be an array of int32 or int64`)})},ui=(e,i)=>{let a=[];if(e.length>i)if(e[i].dataType===7)e[i].getBigInt64Array().forEach(o=>a.push(Number(o)));else if(e[i].dataType===6)e[i].getInt32Array().forEach(o=>a.push(Number(o)));else throw new Error(`Input ${i} must be an array of int32 or int64`);return a},Gm=(e,i)=>{if(e.length>1){let a=ui(e,1),o=ui(e,2),c=ui(e,3);return c.length===0&&(c=[...Array(e[0].dims.length).keys()]),we({starts:a,ends:o,axes:c})}else return i},ud=(e,i,a,o,c)=>{let s=e;return e<0&&(s+=a[o[i]]),c[i]<0?Math.max(0,Math.min(s,a[o[i]]-1)):Math.max(0,Math.min(s,a[o[i]]))},Lm=(e,i,a)=>`fn calculateInputIndices(output_indices: ${i.type.indices}) -> ${e.type.indices} {
          var input_indices: ${e.type.indices};
          var carry = 0u;
          for (var i = ${a.length}; i >= 0; i--) {
            let input_shape_i = ${fe("uniforms.input_shape","i",a.length)};
            let steps_i = ${fe("uniforms.steps","i",a.length)};
            let signs_i = ${fe("uniforms.signs","i",a.length)};
            let starts_i = ${fe("uniforms.starts","i",a.length)};
            var output_index = ${i.indicesGet("output_indices","i")};
            var input_index = output_index * steps_i + starts_i + carry;
            carry = input_index / input_shape_i;
            input_index = input_index % input_shape_i;
            if (signs_i < 0) {
              input_index = input_shape_i - input_index - 1u + starts_i;
            }
            ${e.indicesSet("input_indices","i","input_index")};
          }
          return input_indices;
      }`,Fm=(e,i)=>{let a=e[0].dims,o=M.size(a),c=i.axes.length>0?M.normalizeAxes(i.axes,a.length):[...Array(a.length).keys()],s=ui(e,4);s.forEach(Lr=>Lr!==0||(()=>{throw new Error("step cannot be 0")})),s.length===0&&(s=Array(c.length).fill(1));let d=i.starts.map((Lr,ir)=>ud(Lr,ir,a,c,s)),et=i.ends.map((Lr,ir)=>ud(Lr,ir,a,c,s));if(c.length!==d.length||c.length!==et.length)throw new Error("start, ends and axes should have the same number of elements");if(c.length!==a.length)for(let Lr=0;Lr<a.length;++Lr)c.includes(Lr)||(d.splice(Lr,0,0),et.splice(Lr,0,a[Lr]),s.splice(Lr,0,1));let $t=s.map(Lr=>Math.sign(Lr));s.forEach((Lr,ir,qr)=>{if(Lr<0){let vn=(et[ir]-d[ir])/Lr,xn=d[ir],No=xn+vn*s[ir];d[ir]=No,et[ir]=xn,qr[ir]=-Lr}});let h=a.slice(0);c.forEach((Lr,ir)=>{h[Lr]=Math.ceil((et[Lr]-d[Lr])/s[Lr])});let b={dims:h,dataType:e[0].dataType},g=K("output",e[0].dataType,h.length),jt=U("input",e[0].dataType,e[0].dims.length),Ht=M.size(h),Kt=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:d.length},{name:"signs",type:"i32",length:$t.length},{name:"steps",type:"u32",length:s.length}],or=[{type:12,data:Ht},{type:12,data:d},{type:6,data:$t},{type:12,data:s},...X(e[0].dims,h)],jr=Lr=>`
      ${Lr.registerUniforms(Kt).declareVariables(jt,g)}
        ${Lm(jt,g,a)}
        ${Lr.mainStart()}
          ${Lr.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
          let output_indices = ${g.offsetToIndices("global_idx")};
          let input_indices = calculateInputIndices(output_indices);
          ${g.setByOffset("global_idx",jt.getByIndices("input_indices"))}
      }`;return{name:"Slice",shaderCache:{hint:`${$t.length}_${d.length}_${s.length}`,inputDependencies:["rank"]},getShaderSource:jr,getRunData:()=>({outputs:[b],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:or})}},ld=(e,i)=>{Hm(e.inputs,i);let a=Gm(e.inputs,i);e.compute(Fm(e.inputs,a),{inputs:[0]})},dd=e=>{let i=e.starts,a=e.ends,o=e.axes;return we({starts:i,ends:a,axes:o})}}),qm,jm,pd,md,fd=j(()=>{ye(),xe(),Ze(),_e(),qm=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},jm=(e,i)=>{let a=e.dims,o=M.size(a),c=64,s=i.axis;if(s<0&&(s=a.length+s),s<a.length-1)throw new Error("softmax only supports last axis for now.");let d=a[s],et=o/d,$t=Ue(d),h=d/$t,b=(jr,Lr)=>Lr===4?`max(max(${jr}.x, ${jr}.y), max(${jr}.z, ${jr}.w))`:Lr===2?`max(${jr}.x, ${jr}.y)`:Lr===3?`max(max(${jr}.x, ${jr}.y), ${jr}.z)`:jr,g=U("x",e.dataType,e.dims,$t),jt=K("result",e.dataType,e.dims,$t),Ht=g.type.value,Kt=De(e.dataType)==="f32"?`var threadMax = ${Ht}(-3.402823e+38f);`:`var threadMax = ${Ht}(-65504.0h);`,or=jr=>`
      var<workgroup> rowMaxShared : ${Ht};
      var<workgroup> rowSumShared : ${Ht};
      var<workgroup> threadShared : array<${Ht}, ${c}>;

      fn getValue(row: i32, col: i32, row_stride: i32) -> ${Ht} {
        let index = row * row_stride + col;
        return x[index];
      }

      fn setValue(row: i32, col: i32, row_stride: i32, value: ${Ht}) {
        let index = row * row_stride + col;
        result[index] = value;
      }
      ${jr.registerUniform("packedCols","i32").declareVariables(g,jt)}
      ${jr.mainStart()}
        let gindex = i32(global_idx);
        let lindex = i32(local_idx);
        const wg = ${c};
        let row = gindex / wg;
        let cols = uniforms.packedCols;
        let row_stride : i32 = uniforms.packedCols;

        // find the rows max
        ${Kt}
        for (var col = lindex; col < cols; col += wg) {
          let value = getValue(row, col, row_stride);
          threadMax = max(threadMax, value);
        }
        if (lindex < cols) {
          threadShared[lindex] = threadMax;
        }
        workgroupBarrier();

        var reduceSize = min(cols, wg);
        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
          reduceSize = currSize + (reduceSize & 1);
          if (lindex < currSize) {
            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowMaxShared = ${Ht}(${b("threadShared[0]",$t)});
        }
        workgroupBarrier();

        // find the rows sum
        var threadSum = ${Ht}(0.0);
        for (var col = lindex; col < cols; col += wg) {
          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);
          threadSum += subExp;
        }
        threadShared[lindex] = threadSum;
        workgroupBarrier();

        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {
          if (lindex < currSize) {
            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowSumShared = ${Ht}(${Et("threadShared[0]",$t)});
        }
        workgroupBarrier();

        // calculate final value for each element in the row
        for (var col = lindex; col < cols; col += wg) {
          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;
          setValue(row, col, row_stride, value);
        }
      }`;return{name:"Softmax",shaderCache:{hint:`${$t}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:a,dataType:e.dataType}],dispatchGroup:{x:et},programUniforms:[{type:6,data:h}]}),getShaderSource:or}},pd=(e,i)=>{qm(e.inputs),e.compute(jm(e.inputs[0],i))},md=e=>we({axis:e.axis})}),Km,Ym,Xm,Zm,Qm,hd,gd,yd=j(()=>{ye(),xe(),Ze(),_e(),Km=e=>{if(!e||e.length<1)throw new Error("too few inputs")},Ym=(e,i)=>{let a=[],o=i.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(c=>a.push(Number(c))),o=a.length),we({numOutputs:o,axis:i.axis,splitSizes:a})},Xm=e=>`
fn calculateOutputIndex(index: u32) -> u32 {
    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {
    if (index < ${fe("uniforms.size_in_split_axis","i",e)}) {
        return i;
    }
    }
    return ${e}u;
}`,Zm=e=>{let i=e.length,a=[];for(let o=0;o<i;++o){let c=e[o].setByIndices("indices","input[global_idx]");i===1?a.push(c):o===0?a.push(`if (output_number == ${o}u) { ${c} }`):o===i-1?a.push(`else { ${c} }`):a.push(`else if (output_number == ${o}) { ${c} }`)}return`
      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {
        ${a.join(`
`)}
      }`},Qm=(e,i)=>{let a=e[0].dims,o=M.size(a),c=e[0].dataType,s=M.normalizeAxis(i.axis,a.length),d=new Array(i.numOutputs),et=U("input",c,a.length),$t=new Array(i.numOutputs),h=[],b=[],g=0,jt=[{type:12,data:o}];for(let Kt=0;Kt<i.numOutputs;Kt++){g+=i.splitSizes[Kt],$t[Kt]=g;let or=a.slice();or[i.axis]=i.splitSizes[Kt],b.push(or),d[Kt]=K(`output${Kt}`,c,or.length),h.push({dims:b[Kt],dataType:e[0].dataType})}jt.push({type:12,data:$t},...X(a,...b));let Ht=Kt=>`
  ${Kt.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",$t.length).declareVariables(et,...d)}
  ${Xm($t.length)}
  ${Zm(d)}

  ${Kt.mainStart()}
    ${Kt.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}

    var indices = ${et.offsetToIndices("global_idx")};
    var index = ${et.indicesGet("indices",s)};
    let output_number = calculateOutputIndex(index);
    if (output_number != 0) {
      index -= ${fe("uniforms.size_in_split_axis","output_number - 1u",$t.length)};
      ${et.indicesSet("indices",s,"index")};
    }
    writeBufferData(output_number, indices, global_idx);
  }`;return{name:"Split",shaderCache:{hint:i.cacheKey,inputDependencies:["rank"]},getShaderSource:Ht,getRunData:()=>({outputs:h,dispatchGroup:{x:Math.ceil(o/64)},programUniforms:jt})}},hd=(e,i)=>{Km(e.inputs);let a=e.inputs.length===1?i:Ym(e.inputs,i);e.compute(Qm(e.inputs,a),{inputs:[0]})},gd=e=>{let i=e.axis,a=e.splitSizes,o=e.numOutputs<0?a.length:e.numOutputs;if(o!==a.length)throw new Error("numOutputs and splitSizes lengh must be equal");return we({axis:i,numOutputs:o,splitSizes:a})}}),bd,Jm,ef,tf,vd,wd=j(()=>{ye(),xe(),_e(),bd=e=>Array.from(e.getBigInt64Array(),Number),Jm=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(bd(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},ef=(e,i)=>{let a=[];for(let o=0;o<e.length;++o)a.push(e[o]*i[o]);return a},tf=e=>{let i=e[0].dims,a=bd(e[1]),o=ef(i,a),c=M.size(o),s=e[0].dataType,d=U("input",s,i.length),et=K("output",s,o.length),$t=h=>`
      const inputShape = ${d.indices(...i)};
      ${h.registerUniform("output_size","u32").declareVariables(d,et)}
      ${h.mainStart()}
      ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let output_indices = ${et.offsetToIndices("global_idx")};
      var input_indices: ${d.type.indices};
      for (var i = 0; i < ${i.length}; i++) {
        let input_dim_i = ${d.indicesGet("uniforms.input_shape","i")};
        let input_dim_value = ${et.indicesGet("output_indices","i")}  % input_dim_i;

        ${d.indicesSet("input_indices","i","input_dim_value")}
      }
      ${et.setByOffset("global_idx",d.getByIndices("input_indices"))}
    }`;return{name:"Tile",shaderCache:{hint:`${a}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(c/64)},programUniforms:[{type:12,data:c},...X(e[0].dims,o)]}),getShaderSource:$t}},vd=e=>{Jm(e.inputs),e.compute(tf(e.inputs),{inputs:[0]})}}),rf,nf,$d,_d=j(()=>{ye(),xe(),_e(),rf=(e,i,a,o,c)=>{let s=K("output_data",c,a.length,4),d=U("a_data",i[1].dataType,i[1].dims.length,4),et=U("b_data",i[2].dataType,i[2].dims.length,4),$t=U("c_data",i[0].dataType,i[0].dims.length,4),h,b=(g,jt,Ht)=>`select(${jt}, ${g}, ${Ht})`;if(!o)h=s.setByOffset("global_idx",b(d.getByOffset("global_idx"),et.getByOffset("global_idx"),$t.getByOffset("global_idx")));else{let g=(jt,Ht,Kt="")=>{let or=`a_data[index_a${Ht}][component_a${Ht}]`,jr=`b_data[index_b${Ht}][component_b${Ht}]`,Lr=`bool(c_data[index_c${Ht}] & (0xffu << (component_c${Ht} * 8)))`;return`
            let output_indices${Ht} = ${s.offsetToIndices(`global_idx * 4u + ${Ht}u`)};
            let offset_a${Ht} = ${d.broadcastedIndicesToOffset(`output_indices${Ht}`,s)};
            let offset_b${Ht} = ${et.broadcastedIndicesToOffset(`output_indices${Ht}`,s)};
            let offset_c${Ht} = ${$t.broadcastedIndicesToOffset(`output_indices${Ht}`,s)};
            let index_a${Ht} = offset_a${Ht} / 4u;
            let index_b${Ht} = offset_b${Ht} / 4u;
            let index_c${Ht} = offset_c${Ht} / 4u;
            let component_a${Ht} = offset_a${Ht} % 4u;
            let component_b${Ht} = offset_b${Ht} % 4u;
            let component_c${Ht} = offset_c${Ht} % 4u;
            ${jt}[${Ht}] = ${Kt}(${b(or,jr,Lr)});
          `};c===9?h=`
            var data = vec4<u32>(0);
            ${g("data",0,"u32")}
            ${g("data",1,"u32")}
            ${g("data",2,"u32")}
            ${g("data",3,"u32")}
            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:h=`
            ${g("output_data[global_idx]",0)}
            ${g("output_data[global_idx]",1)}
            ${g("output_data[global_idx]",2)}
            ${g("output_data[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables($t,d,et,s)}
        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${h}
      }`},nf=e=>{let i=e[1].dims,a=e[2].dims,o=e[0].dims,c=e[1].dataType,s=!(M.areEqual(i,a)&&M.areEqual(a,o)),d=i,et=M.size(i);if(s){let h=zt.calcShape(zt.calcShape(i,a,!1),o,!1);if(!h)throw new Error("Can't perform where op on the given tensors");d=h,et=M.size(d)}let $t=Math.ceil(et/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:h=>rf(h,e,d,s,c),getRunData:()=>({outputs:[{dims:d,dataType:c}],dispatchGroup:{x:Math.ceil(et/64/4)},programUniforms:[{type:12,data:$t},...X(o,i,a,d)]})}},$d=e=>{e.compute(nf(e.inputs))}}),xd,Sd=j(()=>{zs(),oo(),Ws(),Vs(),Cu(),Du(),io(),co(),Xu(),Ju(),rl(),sl(),dl(),pl(),hl(),bl(),$l(),xl(),Cl(),mo(),Al(),Pl(),zl(),Zl(),Jl(),jn(),nd(),od(),sd(),cd(),fd(),yd(),wd(),Rr(),Jn(),_d(),xd=new Map([["Abs",[Hs]],["Acos",[Gs]],["Acosh",[Ls]],["Add",[Iu]],["ArgMax",[Rs,no]],["ArgMin",[Ps,no]],["Asin",[Fs]],["Asinh",[qs]],["Atan",[js]],["Atanh",[Ks]],["Attention",[Ms]],["AveragePool",[Hl,Vl]],["BatchNormalization",[Us]],["BiasAdd",[Ns]],["BiasSplitGelu",[Su]],["Cast",[Xs,Ys]],["Ceil",[Qs]],["Clip",[Zs]],["Concat",[Bs,Ds]],["Conv",[go,ho]],["ConvTranspose",[Yu,Ku]],["Cos",[Js]],["Cosh",[eu]],["CumSum",[Zu,Qu]],["DepthToSpace",[el,tl]],["Div",[Tu]],["Einsum",[ol,al]],["Elu",[tu,Zn]],["Equal",[Au]],["Erf",[ru]],["Exp",[nu]],["Expand",[ll]],["FastGelu",[cl]],["Floor",[iu]],["FusedConv",[go,ho]],["Gather",[fl,ml]],["GatherElements",[yl,gl]],["Gelu",[ou]],["Gemm",[wl,vl]],["GlobalAveragePool",[Fl,Ll]],["GlobalMaxPool",[Xl,Yl]],["Greater",[Pu]],["GreaterOrEqual",[zu]],["HardSigmoid",[mu,pu]],["InstanceNormalization",[_l]],["LayerNormalization",[Sl]],["LeakyRelu",[au,Zn]],["Less",[Ru]],["LessOrEqual",[Bu]],["Log",[_u]],["MatMul",[Hu]],["MatMulNBits",[Il,Tl]],["MaxPool",[jl,Kl]],["Mul",[Eu]],["MultiHeadAttention",[Ol,kl]],["Neg",[uu]],["Not",[su]],["Pad",[Rl]],["Pow",[ku]],["Range",[Ql]],["Reciprocal",[lu]],["ReduceMin",[Is]],["ReduceMean",[$s]],["ReduceMax",[Cs]],["ReduceSum",[As]],["ReduceProd",[Ts]],["ReduceL1",[_s]],["ReduceL2",[xs]],["ReduceLogSum",[ks]],["ReduceLogSumExp",[Ss]],["ReduceSumSquare",[Es]],["Relu",[du]],["Resize",[td,rd]],["RotaryEmbedding",[id$1]],["Sigmoid",[cu]],["Sin",[fu]],["Sinh",[hu]],["Slice",[ld,dd]],["SkipLayerNormalization",[ad]],["Split",[hd,gd]],["Sqrt",[gu]],["Softmax",[pd,md]],["Sub",[Ou]],["Tan",[yu]],["Tanh",[vu]],["ThresholdedRelu",[$u,Zn]],["Tile",[vd]],["Transpose",[us,ls]],["Where",[$d]]])}),li,Cd=j(()=>{_t(),Xt(),_e(),li=class{constructor(e){this.backend=e,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,i){this.repo.set(e,i)}run(e,i,a,o,c){yt(e.programInfo.name);let s=this.backend.device,d=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let et=[];for(let h of i)et.push({binding:et.length,resource:{buffer:h.buffer}});for(let h of a)et.push({binding:et.length,resource:{buffer:h.buffer}});c&&et.push({binding:et.length,resource:c});let $t=s.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:et,label:e.programInfo.name});if(this.backend.sessionStatus==="capturing"){let h={kernelId:this.backend.currentKernelId,computePipeline:e.computePipeline,bindGroup:$t,dispatchGroup:o};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(h)}d.setPipeline(e.computePipeline),d.setBindGroup(0,$t),d.dispatchWorkgroups(...o),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),ut(e.programInfo.name)}dispose(){}build(e,i){yt(e.name);let a=this.backend.device,o=[];a.features.has("shader-f16")&&o.push("enable f16;");let c=as(i,this.backend.device.limits),s=e.getShaderSource(c),d=`${o.join(`
`)}
${c.additionalImplementations}
${s}`,et=a.createShaderModule({code:d,label:e.name});Ne("verbose",()=>`[WebGPU] ${e.name} shader code: ${d}`);let $t=a.createComputePipeline({compute:{module:et,entryPoint:"main"},layout:"auto",label:e.name});return ut(e.name),{programInfo:e,computePipeline:$t,uniformVariablesInfo:c.variablesInfo}}normalizeDispatchGroupSize(e){let i=typeof e=="number"?e:e.x,a=typeof e=="number"?1:e.y||1,o=typeof e=="number"?1:e.z||1,c=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(i<=c&&a<=c&&o<=c)return[i,a,o];let s=i*a*o,d=Math.ceil(Math.sqrt(s));if(d>c){if(d=Math.ceil(Math.cbrt(s)),d>c)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[d,d,d]}else return[d,d,1]}}}),of,af,_o,di,Id=j(()=>{_t(),ye(),Xt(),es(),os(),Sd(),Cd(),of=(e,i)=>{if(i.length!==e.length)throw new Error(`inputDependencies length ${i.length} is not equal to inputTensors length ${e.length}.`);let a=[];for(let o=0;o<e.length;++o){let c=e[o].dataType;switch(i[o]){case"none":{a.push("");break}case"type":{a.push(`${c}`);break}case"rank":{let s=e[o].dims.length;a.push(`${c};${s}`);break}case"dims":{let s=e[o].dims.join(",");a.push(`${c};${s}`);break}default:throw new Error(`unsupported input dependency: ${i[o]}`)}}return a.join("|")},af=(e,i,a)=>{var c,s;let o=e.name;return(c=e.shaderCache)!=null&&c.hint&&(o+="["+e.shaderCache.hint+"]"),o+=":"+a+`:${of(i,((s=e.shaderCache)==null?void 0:s.inputDependencies)??new Array(i.length).fill("dims"))}`,o},_o=class{constructor(e){e&&(this.architecture=e.architecture,this.vendor=e.vendor)}isArchitecture(e){return this.architecture===e}isVendor(e){return this.vendor===e}},di=class{constructor(){this.currentSessionId=null,this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map,this.sessionStatus="default",this.capturedCommandList=new Map,this.capturedPendingKernels=new Map,this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e}async initialize(e,i){this.env=e;let a=[],o={requiredLimits:{maxComputeWorkgroupStorageSize:i.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:i.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:i.limits.maxStorageBufferBindingSize,maxBufferSize:i.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:i.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:i.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:i.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:i.limits.maxComputeWorkgroupSizeZ},requiredFeatures:a};i.features.has("chromium-experimental-timestamp-query-inside-passes")?a.push("chromium-experimental-timestamp-query-inside-passes"):i.features.has("timestamp-query")&&a.push("timestamp-query"),i.features.has("shader-f16")&&a.push("shader-f16"),this.device=await i.requestDevice(o),this.adapterInfo=new _o(await i.requestAdapterInfo()),this.gpuDataManager=is(this),this.programManager=new li(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,Qa(e.logLevel,!!e.debug),this.device.onuncapturederror=c=>{c.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${c.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:i,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let e=this.getCommandEncoder(),i={};this.queryType==="at-passes"&&(i.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=e.beginComputePass(i)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;yt(),this.endComputePass();let e;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),e=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(e,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&e.mapAsync(GPUMapMode.READ).then(()=>{var o;let i=new BigUint64Array(e.getMappedRange()),a=this.pendingQueries.get(e);for(let c=0;c<i.length/2;c++){let s=a[c],d=s.kernelId,et=this.kernels.get(d),$t=et.kernelType,h=et.kernelName,b=s.programName,g=s.inputTensorViews,jt=s.outputTensorViews,Ht=i[c*2],Kt=i[c*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=Ht);let or=Number(Ht-this.queryTimeBase),jr=Number(Kt-this.queryTimeBase);if(!Number.isSafeInteger(or)||!Number.isSafeInteger(jr))throw new RangeError("incorrect timestamp range");if((o=this.env.webgpu.profiling)!=null&&o.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:g.map(Lr=>({dims:Lr.dims,dataType:Yt(Lr.dataType)})),outputsMetadata:jt.map(Lr=>({dims:Lr.dims,dataType:Yt(Lr.dataType)})),kernelId:d,kernelType:$t,kernelName:h,programName:b,startTime:or,endTime:jr});else{let Lr="";g.forEach((qr,vn)=>{Lr+=`input[${vn}]: [${qr.dims}] | ${Yt(qr.dataType)}, `});let ir="";jt.forEach((qr,vn)=>{ir+=`output[${vn}]: [${qr.dims}] | ${Yt(qr.dataType)}, `}),console.log(`[profiling] kernel "${d}|${$t}|${h}|${b}" ${Lr}${ir}execution time: ${jr-or} ns`)}Bn("GPU",`${b}::${Ht}::${Kt}`)}e.unmap(),this.pendingQueries.delete(e)}),ut()}run(e,i,a,o,c,s){yt(e.name);let d=[];for(let ir=0;ir<i.length;++ir){let qr=i[ir].data;if(qr===0)continue;let vn=this.gpuDataManager.get(qr);if(!vn)throw new Error(`no GPU data for input: ${qr}`);d.push(vn)}let{outputs:et,dispatchGroup:$t,programUniforms:h}=e.getRunData(i),b=a.length===0?et.map((ir,qr)=>qr):a;if(b.length!==et.length)throw new Error(`Output size ${b.length} must be equal to ${et.length}.`);let g=[],jt=[];for(let ir=0;ir<et.length;++ir){if(!Number.isInteger(b[ir])||b[ir]<-3||b[ir]>=s)throw new Error(`Invalid output index: ${b[ir]}`);if(b[ir]===-3)continue;let qr=b[ir]===-1,vn=b[ir]===-2,xn=qr||vn?c(et[ir].dataType,et[ir].dims):o(b[ir],et[ir].dataType,et[ir].dims);if(g.push(xn),xn.data===0)continue;let No=this.gpuDataManager.get(xn.data);if(!No)throw new Error(`no GPU data for output: ${xn.data}`);if(qr&&this.temporaryData.push(No),vn){let Ro=this.kernelPersistentData.get(this.currentKernelId);Ro||(Ro=[],this.kernelPersistentData.set(this.currentKernelId,Ro)),Ro.push(No)}jt.push(No)}if(d.length!==i.length||jt.length!==g.length){if(jt.length===0)return ut(e.name),g;throw new Error(`Program ${e.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let Ht;if(h){let ir=0,qr=[];h.forEach(Ro=>{let Xo=typeof Ro.data=="number"?[Ro.data]:Ro.data;if(Xo.length===0)return;let o0=Ro.type===10?2:4,s0,h0;Ro.type===10?(h0=Xo.length>4?16:Xo.length>2?8:Xo.length*o0,s0=Xo.length>4?16:o0*Xo.length):(h0=Xo.length<=2?Xo.length*o0:16,s0=16),ir=Math.ceil(ir/h0)*h0,qr.push(ir);let E0=Ro.type===10?8:4;ir+=Xo.length>4?Math.ceil(Xo.length/E0)*s0:Xo.length*o0});let vn=16;ir=Math.ceil(ir/vn)*vn;let xn=new ArrayBuffer(ir);h.forEach((Ro,Xo)=>{let o0=qr[Xo],s0=typeof Ro.data=="number"?[Ro.data]:Ro.data;if(Ro.type===6)new Int32Array(xn,o0,s0.length).set(s0);else if(Ro.type===12)new Uint32Array(xn,o0,s0.length).set(s0);else if(Ro.type===10)new Uint16Array(xn,o0,s0.length).set(s0);else if(Ro.type===1)new Float32Array(xn,o0,s0.length).set(s0);else throw new Error(`Unsupported uniform type: ${Yt(Ro.type)}`)});let No=this.gpuDataManager.create(ir,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(No.buffer,0,xn,0,ir),this.gpuDataManager.release(No.id),Ht={offset:0,size:ir,buffer:No.buffer}}let Kt=this.programManager.normalizeDispatchGroupSize($t),or=Kt[1]===1&&Kt[2]===1,jr=af(e,i,or),Lr=this.programManager.getArtifact(jr);if(Lr||(Lr=this.programManager.build(e,Kt),this.programManager.setArtifact(jr,Lr),Ne("info",()=>`[artifact] key: ${jr}, programName: ${e.name}`)),h&&Lr.uniformVariablesInfo){if(h.length!==Lr.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${Lr.uniformVariablesInfo.length}, got ${h.length} in program "${Lr.programInfo.name}".`);for(let ir=0;ir<h.length;ir++){let qr=h[ir],vn=qr.type,xn=typeof qr.data=="number"?1:qr.data.length,[No,Ro]=Lr.uniformVariablesInfo[ir];if(vn!==No||xn!==Ro)throw new Error(`Uniform variable ${ir} mismatch: expect type ${No} with size ${Ro}, got type ${vn} with size ${xn} in program "${Lr.programInfo.name}".`)}}if(Ne("info",()=>`[ProgramManager] run "${e.name}" (key=${jr}) with ${Kt[0]}x${Kt[1]}x${Kt[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let ir={kernelId:this.currentKernelId,programName:Lr.programInfo.name,inputTensorViews:i,outputTensorViews:g};this.pendingKernels.push(ir),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(ir)}return this.programManager.run(Lr,d,jt,Kt,Ht),ut(e.name),g}upload(e,i){this.gpuDataManager.upload(e,i)}memcpy(e,i){this.gpuDataManager.memcpy(e,i)}async download(e,i){await this.gpuDataManager.download(e,i)}alloc(e){return this.gpuDataManager.create(e).id}free(e){return this.gpuDataManager.release(e)}createKernel(e,i,a,o){let c=xd.get(e);if(!c)throw new Error(`kernel not implemented: ${e}`);let s={kernelType:e,kernelName:o,kernelEntry:c[0],attributes:[c[1],a]};this.kernels.set(i,s)}releaseKernel(e){let i=this.kernelPersistentData.get(e);if(i){for(let a of i)this.gpuDataManager.release(a.id);this.kernelPersistentData.delete(e)}this.kernelCustomData.delete(e),this.kernels.delete(e)}computeKernel(e,i,a){let o=this.kernels.get(e);if(!o)throw new Error(`kernel not created: ${e}`);let c=o.kernelType,s=o.kernelName,d=o.kernelEntry,et=o.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${c}] ${s}" is not allowed to be called recursively`);this.currentKernelId=e,et[0]&&(et[1]=et[0](et[1]),et[0]=void 0),Ne("info",()=>`[WebGPU] Start to run kernel "[${c}] ${s}"...`);let $t=this.env.debug;this.temporaryData=[];try{return $t&&this.device.pushErrorScope("validation"),d(i,et[1]),0}catch(h){return a.push(Promise.resolve(`[WebGPU] Kernel "[${c}] ${s}" failed. ${h}`)),1}finally{$t&&a.push(this.device.popErrorScope().then(h=>h?`GPU validation error for kernel "[${c}] ${s}": ${h.message}`:null));for(let h of this.temporaryData)this.gpuDataManager.release(h.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(e,i,a,o){let c=this.sessionExternalDataMapping.get(e);c||(c=new Map,this.sessionExternalDataMapping.set(e,c));let s=c.get(i),d=this.gpuDataManager.registerExternalBuffer(a,o,s==null?void 0:s[1]);return c.set(i,[d,a]),d}unregisterBuffers(e){let i=this.sessionExternalDataMapping.get(e);i&&(i.forEach(a=>this.gpuDataManager.unregisterExternalBuffer(a[1])),this.sessionExternalDataMapping.delete(e))}getBuffer(e){let i=this.gpuDataManager.get(e);if(!i)throw new Error(`no GPU data for buffer: ${e}`);return i.buffer}createDownloader(e,i,a){return async()=>{let o=await Xi(this,e,i);return Ja(o.buffer,a)}}writeTimestamp(e){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,e)}setQueryType(){var e;this.queryType="none",(((e=this.env.webgpu.profiling)==null?void 0:e.mode)==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){Ne("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){Ne("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){Ne("info","replay"),this.sessionStatus="replaying";let e=this.capturedCommandList.get(this.currentSessionId),i=this.capturedPendingKernels.get(this.currentSessionId),a=e.length;this.pendingKernels=[];for(let o=0;o<a;o++){let c=this.getComputePassEncoder(),s=e[o];this.writeTimestamp(this.pendingDispatchNumber*2),c.setPipeline(s.computePipeline),c.setBindGroup(0,s.bindGroup),c.dispatchWorkgroups(...s.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(i[o]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onReleaseSession(e){this.unregisterBuffers(e),this.capturedCommandList.has(e)&&this.capturedCommandList.delete(e),this.capturedPendingKernels.has(e)&&this.capturedPendingKernels.delete(e),this.gpuDataManager.onReleaseSession(e)}onRunStart(e){this.currentSessionId=e,this.setQueryType()}}}),Td={};kr(Td,{init:()=>sf});var an,xo,sf,Ad=j(()=>{ye(),Id(),Xt(),xe(),an=class iT{constructor(i,a,o,c){this.module=i,this.dataType=a,this.data=o,this.dims=c}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let i=M.size(this.dims);return i===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,i)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let i=M.size(this.dims);return i===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,i)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let i=M.size(this.dims);return i===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,i)}reshape(i){if(M.size(i)!==M.size(this.dims))throw new Error("Invalid new shape");return new iT(this.module,this.dataType,this.data,i)}},xo=class{constructor(e,i,a){this.module=e,this.backend=i,this.customDataOffset=0,this.customDataSize=0,this.adapterInfo=i.adapterInfo;let o=e.HEAPU32,c=a>>>2;this.opKernelContext=o[c++];let s=o[c++];this.outputCount=o[c++],this.customDataOffset=o[c++],this.customDataSize=o[c++];let d=[];for(let et=0;et<s;et++){let $t=o[c++],h=o[c++],b=o[c++],g=[];for(let jt=0;jt<b;jt++)g.push(o[c++]);d.push(new an(e,$t,h,g))}this.inputs=d}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}getMaxComputeWorkgroupSizes(){return[this.backend.device.limits.maxComputeWorkgroupSizeX,this.backend.device.limits.maxComputeWorkgroupSizeY,this.backend.device.limits.maxComputeWorkgroupSizeZ]}getMaxComputeWorkgroupStoragesize(){return this.backend.device.limits.maxComputeWorkgroupStorageSize}compute(e,i){var d;let a=((d=i==null?void 0:i.inputs)==null?void 0:d.map(et=>typeof et=="number"?this.inputs[et]:et))??this.inputs,o=(i==null?void 0:i.outputs)??[],c=(et,$t,h)=>new an(this.module,$t,this.output(et,h),h),s=(et,$t)=>{let h=cr(et);if(!h)throw new Error(`Unsupported data type: ${et}`);let b=h*M.size($t),g=b>0?this.backend.gpuDataManager.create(b).id:0;return new an(this.module,et,g,$t)};return this.backend.run(e,a,o,c,s,this.outputCount)}output(e,i){let a=this.module.stackSave();try{let o=this.module.stackAlloc((1+i.length)*4),c=o>>2;this.module.HEAPU32[c++]=i.length;for(let s=0;s<i.length;s++)this.module.HEAPU32[c++]=i[s];return this.module._JsepOutput(this.opKernelContext,e,o)}catch(o){throw new Error(`Failed to generate kernel's output[${e}] with dims [${i}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${o}`)}finally{this.module.stackRestore(a)}}},sf=async(e,i,a,o)=>{let c=i.jsepInit;if(!c)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let s=new di;await s.initialize(a,o),c("webgpu",[s,d=>s.alloc(d),d=>s.free(d),(d,et,$t,h=!1)=>{if(h)Ne("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${d}, dst=${et}, size=${$t}`),s.memcpy(d,et);else{Ne("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${d}, gpuDataId=${et}, size=${$t}`);let b=i.HEAPU8.subarray(d>>>0,(d>>>0)+$t);s.upload(et,b)}},async(d,et,$t)=>{Ne("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${d}, dataOffset=${et}, size=${$t}`),await s.download(d,()=>i.HEAPU8.subarray(et>>>0,(et>>>0)+$t))},(d,et,$t)=>s.createKernel(d,et,$t,i.UTF8ToString(i._JsepGetNodeName(et))),d=>s.releaseKernel(d),(d,et,$t,h)=>{Ne("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${$t}, kernel=${d}, contextDataOffset=${et}`);let b=new xo(i,s,et);return s.computeKernel(d,b,h)},()=>s.captureBegin(),()=>s.captureEnd(),()=>s.replay()])}else c("webnn")}}),uf,kd,Od,hr,lf,So,Pd,Rd,Ed,zd,Bd,Dd,Md=j(()=>{ja(),Ya(),ye(),Or(),Wn(),qi(),uf=(e,i)=>{Fe()._OrtInit(e,i)!==0&&We("Can't initialize onnxruntime.")},kd=async e=>{uf(e.wasm.numThreads,en(e.logLevel))},Od=async(e,i)=>{{let a=(Ad(),sr(Td)).init;if(i==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let o=e.webgpu.adapter;if(o){if(typeof o.limits!="object"||typeof o.features!="object"||typeof o.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let c=e.webgpu.powerPreference;if(c!==void 0&&c!=="low-power"&&c!=="high-performance")throw new Error(`Invalid powerPreference setting: "${c}"`);let s=e.webgpu.forceFallbackAdapter;if(s!==void 0&&typeof s!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${s}"`);if(o=await navigator.gpu.requestAdapter({powerPreference:c,forceFallbackAdapter:s}),!o)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}if(!e.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using `webgpu` EP");await a("webgpu",Fe(),e,o)}if(i==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await a("webnn",Fe(),e)}}},hr=new Map,lf=e=>{let i=Fe(),a=i.stackSave();try{let o=i.stackAlloc(8);return i._OrtGetInputOutputCount(e,o,o+4)!==0&&We("Can't get session input/output count."),[i.HEAP32[o/4],i.HEAP32[o/4+1]]}finally{i.stackRestore(a)}},So=e=>{let i=Fe(),a=i._malloc(e.byteLength);if(a===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return i.HEAPU8.set(e,a),[a,e.byteLength]},Pd=async(e,i)=>{var g,jt;let a,o,c=Fe();Array.isArray(e)?[a,o]=e:e.buffer===c.HEAPU8.buffer?[a,o]=[e.byteOffset,e.byteLength]:[a,o]=So(e);let s=0,d=0,et=0,$t=[],h=[],b=[];try{if([d,$t]=Ka(i),(i==null?void 0:i.externalData)&&c.mountExternalData){let vn=[];for(let xn of i.externalData){let No=typeof xn=="string"?xn:xn.path;vn.push(tn(typeof xn=="string"?xn:xn.data).then(Ro=>{c.mountExternalData(No,Ro)}))}await Promise.all(vn)}s=await c._OrtCreateSession(a,o,d),s===0&&We("Can't create a session.");let[Ht,Kt]=lf(s),or=!!(i!=null&&i.enableGraphCapture),jr=[],Lr=[],ir=[];for(let vn=0;vn<Ht;vn++){let xn=c._OrtGetInputName(s,vn);xn===0&&We("Can't get an input name."),h.push(xn),jr.push(c.UTF8ToString(xn))}for(let vn=0;vn<Kt;vn++){let xn=c._OrtGetOutputName(s,vn);xn===0&&We("Can't get an output name."),b.push(xn);let No=c.UTF8ToString(xn);Lr.push(No);{if(or&&(i==null?void 0:i.preferredOutputLocation)===void 0){ir.push("gpu-buffer");continue}let Ro=typeof(i==null?void 0:i.preferredOutputLocation)=="string"?i.preferredOutputLocation:((g=i==null?void 0:i.preferredOutputLocation)==null?void 0:g[No])??"cpu";if(Ro!=="cpu"&&Ro!=="cpu-pinned"&&Ro!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${Ro}.`);if(or&&Ro!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${Ro}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);ir.push(Ro)}}let qr=null;return ir.some(vn=>vn==="gpu-buffer")&&(et=c._OrtCreateBinding(s),et===0&&We("Can't create IO binding."),qr={handle:et,outputPreferredLocations:ir,outputPreferredLocationsEncoded:ir.map(vn=>Fi(vn))}),hr.set(s,[s,h,b,qr,or,!1]),[s,jr,Lr]}catch(Ht){throw h.forEach(Kt=>c._OrtFree(Kt)),b.forEach(Kt=>c._OrtFree(Kt)),et!==0&&c._OrtReleaseBinding(et),s!==0&&c._OrtReleaseSession(s),Ht}finally{c._free(a),d!==0&&c._OrtReleaseSessionOptions(d),$t.forEach(Ht=>c._free(Ht)),(jt=c.unmountExternalData)==null||jt.call(c)}},Rd=e=>{var $t;let i=Fe(),a=hr.get(e);if(!a)throw new Error(`cannot release session. invalid session id: ${e}`);let[o,c,s,d,et]=a;d&&(et&&i._OrtClearBoundOutputs(d.handle),i._OrtReleaseBinding(d.handle)),($t=i.jsepOnReleaseSession)==null||$t.call(i,e),c.forEach(h=>i._OrtFree(h)),s.forEach(h=>i._OrtFree(h)),i._OrtReleaseSession(o),hr.delete(e)},Ed=(e,i,a,o,c,s=!1)=>{if(!e){i.push(0);return}let d=Fe(),et=e[0],$t=e[1],h=e[3],b,g;if(et==="string"&&h==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(s&&h!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${c} when enableGraphCapture is true.`);if(h==="gpu-buffer"){let Kt=e[2].gpuBuffer,or=cr(Li(et));g=$t.reduce((Lr,ir)=>Lr*ir,1)*or;let jr=d.jsepRegisterBuffer;if(!jr)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');b=jr(o,c,Kt,g)}else{let Kt=e[2];if(Array.isArray(Kt)){g=4*Kt.length,b=d._malloc(g),a.push(b);let or=b/4;for(let jr=0;jr<Kt.length;jr++){if(typeof Kt[jr]!="string")throw new TypeError(`tensor data at index ${jr} is not a string`);d.HEAPU32[or++]=qe(Kt[jr],a)}}else g=Kt.byteLength,b=d._malloc(g),a.push(b),d.HEAPU8.set(new Uint8Array(Kt.buffer,Kt.byteOffset,g),b)}let jt=d.stackSave(),Ht=d.stackAlloc(4*$t.length);try{let Kt=Ht/4;$t.forEach(jr=>d.HEAP32[Kt++]=jr);let or=d._OrtCreateTensor(Li(et),b,g,Ht,$t.length,Fi(h));or===0&&We(`Can't create tensor for input/output. session=${o}, index=${c}.`),i.push(or)}finally{d.stackRestore(jt)}},zd=async(e,i,a,o,c,s)=>{var s0,h0;let d=Fe(),et=hr.get(e);if(!et)throw new Error(`cannot run inference. invalid session id: ${e}`);let $t=et[0],h=et[1],b=et[2],g=et[3],jt=et[4],Ht=et[5],Kt=i.length,or=o.length,jr=0,Lr=[],ir=[],qr=[],vn=[],xn=d.stackSave(),No=d.stackAlloc(Kt*4),Ro=d.stackAlloc(Kt*4),Xo=d.stackAlloc(or*4),o0=d.stackAlloc(or*4);try{[jr,Lr]=qa(s);for(let Uo=0;Uo<Kt;Uo++)Ed(a[Uo],ir,vn,e,i[Uo],jt);for(let Uo=0;Uo<or;Uo++)Ed(c[Uo],qr,vn,e,Kt+o[Uo],jt);let E0=No/4,C0=Ro/4,D0=Xo/4,N0=o0/4;for(let Uo=0;Uo<Kt;Uo++)d.HEAPU32[E0++]=ir[Uo],d.HEAPU32[C0++]=h[i[Uo]];for(let Uo=0;Uo<or;Uo++)d.HEAPU32[D0++]=qr[Uo],d.HEAPU32[N0++]=b[o[Uo]];if(g&&!Ht){let{handle:Uo,outputPreferredLocations:c0,outputPreferredLocationsEncoded:$0}=g;if(h.length!==Kt)throw new Error(`input count from feeds (${Kt}) is expected to be always equal to model's input count (${h.length}).`);for(let Bo=0;Bo<Kt;Bo++){let x0=i[Bo];await d._OrtBindInput(Uo,h[x0],ir[Bo])!==0&&We(`Can't bind input[${Bo}] for session=${e}.`)}for(let Bo=0;Bo<or;Bo++){let x0=o[Bo];(s0=c[Bo])!=null&&s0[3]?d._OrtBindOutput(Uo,b[x0],qr[Bo],0)!==0&&We(`Can't bind pre-allocated output[${Bo}] for session=${e}.`):d._OrtBindOutput(Uo,b[x0],0,$0[x0])!==0&&We(`Can't bind output[${Bo}] to ${c0[Bo]} for session=${e}.`)}hr.set(e,[$t,h,b,g,jt,!0])}(h0=d.jsepOnRunStart)==null||h0.call(d,$t);let e0;g?e0=await d._OrtRunWithBinding($t,g.handle,or,Xo,jr):e0=await d._OrtRun($t,Ro,No,Kt,o0,or,Xo,jr),e0!==0&&We("failed to call OrtRun().");let l0=[];for(let Uo=0;Uo<or;Uo++){let c0=d.HEAPU32[Xo/4+Uo];if(c0===qr[Uo]){l0.push(c[Uo]);continue}let $0=d.stackSave(),Bo=d.stackAlloc(4*4),x0=!1,A0,G0=0;try{d._OrtGetTensorData(c0,Bo,Bo+4,Bo+8,Bo+12)!==0&&We(`Can't access output tensor data on index ${Uo}.`);let q0=Bo/4,ny=d.HEAPU32[q0++];G0=d.HEAPU32[q0++];let xy=d.HEAPU32[q0++],gy=d.HEAPU32[q0++],Ey=[];for(let ty=0;ty<gy;ty++)Ey.push(d.HEAPU32[xy/4+ty]);d._OrtFree(xy);let Ty=Ey.reduce((ty,ky)=>ty*ky,1);A0=Yt(ny);let ly=g==null?void 0:g.outputPreferredLocations[o[Uo]];if(A0==="string"){if(ly==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let ty=[],ky=G0/4;for(let Iy=0;Iy<Ty;Iy++){let Oy=d.HEAPU32[ky++],g1=Iy===Ty-1?void 0:d.HEAPU32[ky]-Oy;ty.push(d.UTF8ToString(Oy,g1))}l0.push([A0,Ey,ty,"cpu"])}else if(ly==="gpu-buffer"&&Ty>0){let ty=d.jsepGetBuffer;if(!ty)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let ky=ty(G0),Iy=cr(ny);if(Iy===void 0||!Vn(A0))throw new Error(`Unsupported data type: ${A0}`);x0=!0,l0.push([A0,Ey,{gpuBuffer:ky,download:d.jsepCreateDownloader(ky,Ty*Iy,A0),dispose:()=>{d._OrtReleaseTensor(c0)}},"gpu-buffer"])}else{let ty=Nn(A0),ky=new ty(Ty);new Uint8Array(ky.buffer,ky.byteOffset,ky.byteLength).set(d.HEAPU8.subarray(G0,G0+ky.byteLength)),l0.push([A0,Ey,ky,"cpu"])}}finally{d.stackRestore($0),A0==="string"&&G0&&d._free(G0),x0||d._OrtReleaseTensor(c0)}}return g&&!jt&&(d._OrtClearBoundOutputs(g.handle),hr.set(e,[$t,h,b,g,jt,!1])),l0}finally{d.stackRestore(xn),ir.forEach(E0=>d._OrtReleaseTensor(E0)),qr.forEach(E0=>d._OrtReleaseTensor(E0)),vn.forEach(E0=>d._free(E0)),jr!==0&&d._OrtReleaseRunOptions(jr),Lr.forEach(E0=>d._free(E0))}},Bd=e=>{let i=Fe(),a=hr.get(e);if(!a)throw new Error("invalid session id");let o=a[0],c=i._OrtEndProfiling(o);c===0&&We("Can't get an profile file name."),i._OrtFree(c)},Dd=e=>{let i=[];for(let a of e){let o=a[2];!Array.isArray(o)&&"buffer"in o&&i.push(o.buffer)}return i}}),Ud=Er((e,i)=>{i.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var ao=Object.defineProperty;var nl=Object.getOwnPropertyDescriptor;var ol=Object.getOwnPropertyNames;var il=Object.prototype.hasOwnProperty;var Y=(e,t)=>()=>(e&&(t=e(e=0)),t);var Wr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),gn=(e,t)=>{for(var r in t)ao(e,r,{get:t[r],enumerable:!0})},al=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ol(t))!il.call(e,i)&&i!==r&&ao(e,i,{get:()=>t[i],enumerable:!(o=nl(t,i))||o.enumerable});return e};var wr=e=>al(ao({},"__esModule",{value:!0}),e);var so={};gn(so,{createReadStream:()=>Ai,readFile:()=>sl,readFileSync:()=>ul});var sl,ul,Ai,uo=Y(()=>{sl=void 0,ul=void 0,Ai=void 0});var lo={};gn(lo,{join:()=>dl});var dl,co=Y(()=>{dl=void 0});var Ei=Wr((Ti,po)=>{"use strict";var Ii=(()=>{var e=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(e||=__filename),function(t={}){var r=t,o,i,u=new Promise((s,m)=>{o=s,i=m});r.mountExternalData=(s,m)=>{(r.eb||(r.eb=new Map)).set(s,m)},r.unmountExternalData=()=>{delete r.eb};let a=()=>{let s=(g,$,T)=>(...B)=>{let H=dt,q=$?.();B=g(...B);let te=$?.();return q!==te&&(g=te,T(q),$=T=null),dt!=H?tn():B},m=g=>async(...$)=>{try{if(r.cb)throw Error("Session already started");let T=r.cb={xb:$[0],errors:[]},B=await g(...$);if(r.cb!==T)throw Error("Session mismatch");r.kb?.flush();let H=T.errors;if(0<H.length){let q=await Promise.all(H);if(q=q.filter(te=>te),0<q.length)throw Error(q.join(`\n`))}return B}finally{r.cb=null}};r._OrtCreateSession=s(r._OrtCreateSession,()=>r._OrtCreateSession,g=>r._OrtCreateSession=g),r._OrtRun=m(s(r._OrtRun,()=>r._OrtRun,g=>r._OrtRun=g)),r._OrtRunWithBinding=m(s(r._OrtRunWithBinding,()=>r._OrtRunWithBinding,g=>r._OrtRunWithBinding=g)),r._OrtBindInput=s(r._OrtBindInput,()=>r._OrtBindInput,g=>r._OrtBindInput=g),a=void 0};r.jsepInit=(s,m)=>{if(a?.(),s==="webgpu"){[r.kb,r.pb,r.tb,r.lb,r.sb,r.Ra,r.ub,r.wb,r.qb,r.rb,r.vb]=m;let g=r.kb;r.jsepRegisterBuffer=($,T,B,H)=>g.registerBuffer($,T,B,H),r.jsepGetBuffer=$=>g.getBuffer($),r.jsepCreateDownloader=($,T,B)=>g.createDownloader($,T,B),r.jsepOnReleaseSession=$=>{g.onReleaseSession($)},r.jsepOnRunStart=$=>g.onRunStart($)}};var c=Object.assign({},r),p="./this.program",h=(s,m)=>{throw m},d=typeof window=="object",y=typeof importScripts=="function",w=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_="",v,S,A;if(w){var I=(uo(),wr(so)),x=(co(),wr(lo));_=y?x.dirname(_)+"/":__dirname+"/",v=(s,m)=>(s=Ke(s)?new URL(s):x.normalize(s),I.readFileSync(s,m?void 0:"utf8")),A=s=>(s=v(s,!0),s.buffer||(s=new Uint8Array(s)),s),S=(s,m,g,$=!0)=>{s=Ke(s)?new URL(s):x.normalize(s),I.readFile(s,$?void 0:"utf8",(T,B)=>{T?g(T):m($?B.buffer:B)})},!r.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),h=(s,m)=>{throw process.exitCode=s,m}}else(d||y)&&(y?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),e&&(_=e),_.startsWith("blob:")?_="":_=_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1),v=s=>{var m=new XMLHttpRequest;return m.open("GET",s,!1),m.send(null),m.responseText},y&&(A=s=>{var m=new XMLHttpRequest;return m.open("GET",s,!1),m.responseType="arraybuffer",m.send(null),new Uint8Array(m.response)}),S=(s,m,g)=>{var $=new XMLHttpRequest;$.open("GET",s,!0),$.responseType="arraybuffer",$.onload=()=>{$.status==200||$.status==0&&$.response?m($.response):g()},$.onerror=g,$.send(null)});var E=console.log.bind(console),P=console.error.bind(console);Object.assign(r,c),c=null;var O,R=!1,L,N,K,Q,he,W,se,Ce,We,ee,ae;function Ae(){var s=O.buffer;r.HEAP8=N=new Int8Array(s),r.HEAP16=Q=new Int16Array(s),r.HEAPU8=K=new Uint8Array(s),r.HEAPU16=he=new Uint16Array(s),r.HEAP32=W=new Int32Array(s),r.HEAPU32=se=new Uint32Array(s),r.HEAPF32=Ce=new Float32Array(s),r.HEAPF64=ae=new Float64Array(s),r.HEAP64=We=new BigInt64Array(s),r.HEAPU64=ee=new BigUint64Array(s)}var me=[],ie=[],ue=[],le=0,qe=null,G=null;function ne(s){throw s="Aborted("+s+")",P(s),R=!0,L=1,s=new WebAssembly.RuntimeError(s+". Build with -sASSERTIONS for more info."),i(s),s}var xe=s=>s.startsWith("data:application/octet-stream;base64,"),Ke=s=>s.startsWith("file://"),Be;if(Be="ort-wasm-simd.wasm",!xe(Be)){var Ge=Be;Be=r.locateFile?r.locateFile(Ge,_):_+Ge}function Ut(s){if(A)return A(s);throw"both async and sync fetching of the wasm failed"}function Ne(s){if(d||y){if(typeof fetch=="function"&&!Ke(s))return fetch(s,{credentials:"same-origin"}).then(m=>{if(!m.ok)throw`failed to load wasm binary file at \'${s}\'`;return m.arrayBuffer()}).catch(()=>Ut(s));if(S)return new Promise((m,g)=>{S(s,$=>m(new Uint8Array($)),g)})}return Promise.resolve().then(()=>Ut(s))}function Ye(s,m,g){return Ne(s).then($=>WebAssembly.instantiate($,m)).then(g,$=>{P(`failed to asynchronously prepare wasm: ${$}`),ne($)})}function mt(s,m){var g=Be;return typeof WebAssembly.instantiateStreaming!="function"||xe(g)||Ke(g)||w||typeof fetch!="function"?Ye(g,s,m):fetch(g,{credentials:"same-origin"}).then($=>WebAssembly.instantiateStreaming($,s).then(m,function(T){return P(`wasm streaming compile failed: ${T}`),P("falling back to ArrayBuffer instantiation"),Ye(g,s,m)}))}var Rt={824920:(s,m,g,$)=>{if(typeof r>"u"||!r.eb)return 1;if(s=je(s>>>0),s.startsWith("./")&&(s=s.substring(2)),s=r.eb.get(s),!s)return 2;if(m>>>=0,g>>>=0,m+g>s.byteLength)return 3;try{return K.set(s.subarray(m,m+g),$>>>0>>>0),0}catch{return 4}},825421:()=>{r.qb()},825452:()=>{r.rb()},825481:()=>{r.vb()},825506:s=>r.pb(s),825539:s=>r.tb(s),825571:(s,m,g)=>{r.lb(s,m,g,!0)},825610:(s,m,g)=>{r.lb(s,m,g)},825643:s=>{r.Ra("Abs",s,void 0)},825694:s=>{r.Ra("Neg",s,void 0)},825745:s=>{r.Ra("Floor",s,void 0)},825798:s=>{r.Ra("Ceil",s,void 0)},825850:s=>{r.Ra("Reciprocal",s,void 0)},825908:s=>{r.Ra("Sqrt",s,void 0)},825960:s=>{r.Ra("Exp",s,void 0)},826011:s=>{r.Ra("Erf",s,void 0)},826062:s=>{r.Ra("Sigmoid",s,void 0)},826117:(s,m,g)=>{r.Ra("HardSigmoid",s,{alpha:m,beta:g})},826196:s=>{r.Ra("Log",s,void 0)},826247:s=>{r.Ra("Sin",s,void 0)},826298:s=>{r.Ra("Cos",s,void 0)},826349:s=>{r.Ra("Tan",s,void 0)},826400:s=>{r.Ra("Asin",s,void 0)},826452:s=>{r.Ra("Acos",s,void 0)},826504:s=>{r.Ra("Atan",s,void 0)},826556:s=>{r.Ra("Sinh",s,void 0)},826608:s=>{r.Ra("Cosh",s,void 0)},826660:s=>{r.Ra("Asinh",s,void 0)},826713:s=>{r.Ra("Acosh",s,void 0)},826766:s=>{r.Ra("Atanh",s,void 0)},826819:s=>{r.Ra("Tanh",s,void 0)},826871:s=>{r.Ra("Not",s,void 0)},826922:(s,m,g)=>{r.Ra("Clip",s,{min:m,max:g})},826991:s=>{r.Ra("Clip",s,void 0)},827043:(s,m)=>{r.Ra("Elu",s,{alpha:m})},827101:s=>{r.Ra("Relu",s,void 0)},827153:(s,m)=>{r.Ra("LeakyRelu",s,{alpha:m})},827217:(s,m)=>{r.Ra("ThresholdedRelu",s,{alpha:m})},827287:(s,m)=>{r.Ra("Cast",s,{to:m})},827345:s=>{r.Ra("Add",s,void 0)},827396:s=>{r.Ra("Sub",s,void 0)},827447:s=>{r.Ra("Mul",s,void 0)},827498:s=>{r.Ra("Div",s,void 0)},827549:s=>{r.Ra("Pow",s,void 0)},827600:s=>{r.Ra("Equal",s,void 0)},827653:s=>{r.Ra("Greater",s,void 0)},827708:s=>{r.Ra("GreaterOrEqual",s,void 0)},827770:s=>{r.Ra("Less",s,void 0)},827822:s=>{r.Ra("LessOrEqual",s,void 0)},827881:(s,m,g,$,T)=>{r.Ra("ReduceMean",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828040:(s,m,g,$,T)=>{r.Ra("ReduceMax",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828198:(s,m,g,$,T)=>{r.Ra("ReduceMin",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828356:(s,m,g,$,T)=>{r.Ra("ReduceProd",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828515:(s,m,g,$,T)=>{r.Ra("ReduceSum",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828673:(s,m,g,$,T)=>{r.Ra("ReduceL1",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828830:(s,m,g,$,T)=>{r.Ra("ReduceL2",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828987:(s,m,g,$,T)=>{r.Ra("ReduceLogSum",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829148:(s,m,g,$,T)=>{r.Ra("ReduceSumSquare",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829312:(s,m,g,$,T)=>{r.Ra("ReduceLogSumExp",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829476:s=>{r.Ra("Where",s,void 0)},829529:(s,m,g)=>{r.Ra("Transpose",s,{perm:m?Array.from(W.subarray(m>>>0,g>>>0)):[]})},829637:(s,m,g,$)=>{r.Ra("DepthToSpace",s,{blocksize:m,mode:je(g),format:$?"NHWC":"NCHW"})},829770:(s,m,g,$)=>{r.Ra("DepthToSpace",s,{blocksize:m,mode:je(g),format:$?"NHWC":"NCHW"})},829903:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be)=>{r.Ra("ConvTranspose",s,{format:te?"NHWC":"NCHW",autoPad:m,dilations:[g],group:$,kernelShape:[T],pads:[B,H],strides:[q],wIsConst:()=>!!N[X>>>0],outputPadding:de?Array.from(W.subarray(de>>>0,Ee>>>0)):[],outputShape:Oe?Array.from(W.subarray(Oe>>>0,D>>>0)):[],activation:je(be)})},830304:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D)=>{r.Ra("ConvTranspose",s,{format:q?"NHWC":"NCHW",autoPad:m,dilations:Array.from(W.subarray(g>>>0,(g>>>0)+2>>>0)),group:$,kernelShape:Array.from(W.subarray(T>>>0,(T>>>0)+2>>>0)),pads:Array.from(W.subarray(B>>>0,(B>>>0)+4>>>0)),strides:Array.from(W.subarray(H>>>0,(H>>>0)+2>>>0)),wIsConst:()=>!!N[te>>>0],outputPadding:X?Array.from(W.subarray(X>>>0,de>>>0)):[],outputShape:Ee?Array.from(W.subarray(Ee>>>0,Oe>>>0)):[],activation:je(D)})},830869:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be)=>{r.Ra("ConvTranspose",s,{format:te?"NHWC":"NCHW",autoPad:m,dilations:[g],group:$,kernelShape:[T],pads:[B,H],strides:[q],wIsConst:()=>!!N[X>>>0],outputPadding:de?Array.from(W.subarray(de>>>0,Ee>>>0)):[],outputShape:Oe?Array.from(W.subarray(Oe>>>0,D>>>0)):[],activation:je(be)})},831270:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D)=>{r.Ra("ConvTranspose",s,{format:q?"NHWC":"NCHW",autoPad:m,dilations:Array.from(W.subarray(g>>>0,(g>>>0)+2>>>0)),group:$,kernelShape:Array.from(W.subarray(T>>>0,(T>>>0)+2>>>0)),pads:Array.from(W.subarray(B>>>0,(B>>>0)+4>>>0)),strides:Array.from(W.subarray(H>>>0,(H>>>0)+2>>>0)),wIsConst:()=>!!N[te>>>0],outputPadding:X?Array.from(W.subarray(X>>>0,de>>>0)):[],outputShape:Ee?Array.from(W.subarray(Ee>>>0,Oe>>>0)):[],activation:je(D)})},831835:(s,m)=>{r.Ra("GlobalAveragePool",s,{format:m?"NHWC":"NCHW"})},831926:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("AveragePool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832210:(s,m)=>{r.Ra("GlobalAveragePool",s,{format:m?"NHWC":"NCHW"})},832301:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("AveragePool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832585:(s,m)=>{r.Ra("GlobalMaxPool",s,{format:m?"NHWC":"NCHW"})},832672:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("MaxPool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832952:(s,m)=>{r.Ra("GlobalMaxPool",s,{format:m?"NHWC":"NCHW"})},833039:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("MaxPool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},833319:(s,m,g,$,T)=>{r.Ra("Gemm",s,{alpha:m,beta:g,transA:$,transB:T})},833423:s=>{r.Ra("MatMul",s,void 0)},833477:(s,m,g,$)=>{r.Ra("ArgMax",s,{keepDims:!!m,selectLastIndex:!!g,axis:$})},833585:(s,m,g,$)=>{r.Ra("ArgMin",s,{keepDims:!!m,selectLastIndex:!!g,axis:$})},833693:(s,m)=>{r.Ra("Softmax",s,{axis:m})},833756:(s,m)=>{r.Ra("Concat",s,{axis:m})},833816:(s,m,g,$,T)=>{r.Ra("Split",s,{axis:m,numOutputs:g,splitSizes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},833956:s=>{r.Ra("Expand",s,void 0)},834010:(s,m)=>{r.Ra("Gather",s,{axis:Number(m)})},834081:(s,m)=>{r.Ra("GatherElements",s,{axis:Number(m)})},834160:(s,m,g,$,T,B,H,q,te,X,de)=>{r.Ra("Resize",s,{antialias:m,axes:g?Array.from(W.subarray(g>>>0,$>>>0)):[],coordinateTransformMode:je(T),cubicCoeffA:B,excludeOutside:H,extrapolationValue:q,keepAspectRatioPolicy:je(te),mode:je(X),nearestMode:je(de)})},834506:(s,m,g,$,T,B,H)=>{r.Ra("Slice",s,{starts:m?Array.from(W.subarray(m>>>0,g>>>0)):[],ends:$?Array.from(W.subarray($>>>0,T>>>0)):[],axes:B?Array.from(W.subarray(B>>>0,H>>>0)):[]})},834722:s=>{r.Ra("Tile",s,void 0)},834774:(s,m,g,$)=>{r.Ra("LayerNormalization",s,{axis:m,epsilon:g,simplified:!!$})},834885:(s,m,g)=>{r.Ra("InstanceNormalization",s,{epsilon:m,format:g?"NHWC":"NCHW"})},834999:(s,m,g)=>{r.Ra("InstanceNormalization",s,{epsilon:m,format:g?"NHWC":"NCHW"})},835113:s=>{r.Ra("Range",s,void 0)},835166:(s,m)=>{r.Ra("Einsum",s,{equation:je(m)})},835247:(s,m,g,$,T)=>{r.Ra("Pad",s,{mode:m,value:g,pads:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},835374:(s,m,g,$,T,B)=>{r.Ra("BatchNormalization",s,{epsilon:m,momentum:g,spatial:!!T,trainingMode:!!$,format:B?"NHWC":"NCHW"})},835543:(s,m,g,$,T,B)=>{r.Ra("BatchNormalization",s,{epsilon:m,momentum:g,spatial:!!T,trainingMode:!!$,format:B?"NHWC":"NCHW"})},835712:(s,m,g)=>{r.Ra("CumSum",s,{exclusive:Number(m),reverse:Number(g)})},835809:(s,m,g,$,T,B,H,q,te)=>{r.Ra("Attention",s,{numHeads:m,isUnidirectional:g,maskFilterValue:$,scale:T,doRotary:B,qkvHiddenSizes:H?Array.from(W.subarray(Number(q)>>>0,Number(q)+H>>>0)):[],pastPresentShareBuffer:!!te})},836081:s=>{r.Ra("BiasAdd",s,void 0)},836136:s=>{r.Ra("BiasSplitGelu",s,void 0)},836197:s=>{r.Ra("FastGelu",s,void 0)},836253:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe)=>{r.Ra("Conv",s,{format:te?"NHWC":"NCHW",auto_pad:m,dilations:[g],group:$,kernel_shape:[T],pads:B?Array.from(W.subarray(B>>>0,H>>>0)):[],strides:[q],w_is_const:()=>!!N[X>>>0],activation:je(de),activation_params:Ee?Array.from(Ce.subarray(Ee>>>0,Oe>>>0)):[]})},836623:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("Conv",s,{format:Ee?"NHWC":"NCHW",auto_pad:m,dilations:[g,$],group:T,kernel_shape:[B,H],pads:q?Array.from(W.subarray(q>>>0,te>>>0)):[],strides:[X,de],w_is_const:()=>!!N[Oe>>>0],activation:je(D),activation_params:be?Array.from(Ce.subarray(be>>>0,Ie>>>0)):[]})},837014:s=>{r.Ra("Gelu",s,void 0)},837066:(s,m,g,$,T,B)=>{r.Ra("MatMulNBits",s,{k:m,n:g,accuracyLevel:$,bits:T,blockSize:B})},837193:(s,m,g,$,T,B)=>{r.Ra("MultiHeadAttention",s,{numHeads:m,isUnidirectional:g,maskFilterValue:$,scale:T,doRotary:B})},837352:(s,m,g,$,T)=>{r.Ra("RotaryEmbedding",s,{interleaved:!!m,numHeads:g,rotaryEmbeddingDim:$,scale:T})},837491:(s,m,g)=>{r.Ra("SkipLayerNormalization",s,{epsilon:m,simplified:!!g})},837593:(s,m,g)=>{r.Ra("SkipLayerNormalization",s,{epsilon:m,simplified:!!g})},837695:(s,m,g,$)=>{r.Ra("LayerNormalization",s,{axis:m,epsilon:g,simplified:!!$})},837806:s=>{r.ub(s)},837840:(s,m)=>r.wb(s,m,r.cb.xb,r.cb.errors)};function qt(s){this.name="ExitStatus",this.message=`Program terminated with exit(${s})`,this.status=s}class Vt{constructor(m){this.hb=m-24}}var sr=0,jt=0,xr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Kt=(s,m,g)=>{m>>>=0;var $=m+g;for(g=m;s[g]&&!(g>=$);)++g;if(16<g-m&&s.buffer&&xr)return xr.decode(s.subarray(m,g));for($="";m<g;){var T=s[m++];if(T&128){var B=s[m++]&63;if((T&224)==192)$+=String.fromCharCode((T&31)<<6|B);else{var H=s[m++]&63;T=(T&240)==224?(T&15)<<12|B<<6|H:(T&7)<<18|B<<12|H<<6|s[m++]&63,65536>T?$+=String.fromCharCode(T):(T-=65536,$+=String.fromCharCode(55296|T>>10,56320|T&1023))}}else $+=String.fromCharCode(T)}return $},je=(s,m)=>(s>>>=0)?Kt(K,s,m):"",Wt=s=>{for(var m=0,g=0;g<s.length;++g){var $=s.charCodeAt(g);127>=$?m++:2047>=$?m+=2:55296<=$&&57343>=$?(m+=4,++g):m+=3}return m},at=(s,m,g,$)=>{if(g>>>=0,!(0<$))return 0;var T=g;$=g+$-1;for(var B=0;B<s.length;++B){var H=s.charCodeAt(B);if(55296<=H&&57343>=H){var q=s.charCodeAt(++B);H=65536+((H&1023)<<10)|q&1023}if(127>=H){if(g>=$)break;m[g++>>>0]=H}else{if(2047>=H){if(g+1>=$)break;m[g++>>>0]=192|H>>6}else{if(65535>=H){if(g+2>=$)break;m[g++>>>0]=224|H>>12}else{if(g+3>=$)break;m[g++>>>0]=240|H>>18,m[g++>>>0]=128|H>>12&63}m[g++>>>0]=128|H>>6&63}m[g++>>>0]=128|H&63}}return m[g>>>0]=0,g-T},Cr,ft=s=>{for(var m="";K[s>>>0];)m+=Cr[K[s++>>>0]];return m},ur={},Ar={},Ir={},st;function Tr(s,m,g={}){var $=m.name;if(!s)throw new st(`type "${$}" must have a positive integer typeid pointer`);if(Ar.hasOwnProperty(s)){if(g.nb)return;throw new st(`Cannot register type \'${$}\' twice`)}Ar[s]=m,delete Ir[s],ur.hasOwnProperty(s)&&(m=ur[s],delete ur[s],m.forEach(T=>T()))}function ht(s,m,g={}){if(!("argPackAdvance"in m))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Tr(s,m,g)}var bt=(s,m,g)=>{switch(m){case 1:return g?$=>N[$>>>0]:$=>K[$>>>0];case 2:return g?$=>Q[$>>>1>>>0]:$=>he[$>>>1>>>0];case 4:return g?$=>W[$>>>2>>>0]:$=>se[$>>>2>>>0];case 8:return g?$=>We[$>>>3]:$=>ee[$>>>3];default:throw new TypeError(`invalid integer width (${m}): ${s}`)}},Er=[],Te=[];function dr(s){s>>>=0,9<s&&--Te[s+1]===0&&(Te[s]=void 0,Er.push(s))}var Xe=s=>{if(!s)throw new st("Cannot use deleted val. handle = "+s);return Te[s]},ut=s=>{switch(s){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let m=Er.pop()||Te.length;return Te[m]=s,Te[m+1]=1,m}};function lr(s){return this.fromWireType(se[s>>>2>>>0])}var Fn={name:"emscripten::val",fromWireType:s=>{var m=Xe(s);return dr(s),m},toWireType:(s,m)=>ut(m),argPackAdvance:8,readValueFromPointer:lr,bb:null},ge=(s,m)=>{switch(m){case 4:return function(g){return this.fromWireType(Ce[g>>>2>>>0])};case 8:return function(g){return this.fromWireType(ae[g>>>3>>>0])};default:throw new TypeError(`invalid float width (${m}): ${s}`)}},Yt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,jr=(s,m)=>{for(var g=s>>1,$=g+m/2;!(g>=$)&&he[g>>>0];)++g;if(g<<=1,32<g-s&&Yt)return Yt.decode(K.subarray(s>>>0,g>>>0));for(g="",$=0;!($>=m/2);++$){var T=Q[s+2*$>>>1>>>0];if(T==0)break;g+=String.fromCharCode(T)}return g},qn=(s,m,g)=>{if(g??=2147483647,2>g)return 0;g-=2;var $=m;g=g<2*s.length?g/2:s.length;for(var T=0;T<g;++T)Q[m>>>1>>>0]=s.charCodeAt(T),m+=2;return Q[m>>>1>>>0]=0,m-$},Kr=s=>2*s.length,jn=(s,m)=>{for(var g=0,$="";!(g>=m/4);){var T=W[s+4*g>>>2>>>0];if(T==0)break;++g,65536<=T?(T-=65536,$+=String.fromCharCode(55296|T>>10,56320|T&1023)):$+=String.fromCharCode(T)}return $},Yr=(s,m,g)=>{if(m>>>=0,g??=2147483647,4>g)return 0;var $=m;g=$+g-4;for(var T=0;T<s.length;++T){var B=s.charCodeAt(T);if(55296<=B&&57343>=B){var H=s.charCodeAt(++T);B=65536+((B&1023)<<10)|H&1023}if(W[m>>>2>>>0]=B,m+=4,m+4>g)break}return W[m>>>2>>>0]=0,m-$},Zr=s=>{for(var m=0,g=0;g<s.length;++g){var $=s.charCodeAt(g);55296<=$&&57343>=$&&++g,m+=4}return m},cr=(s,m)=>{var g=Ar[s];if(g===void 0)throw s=Mr(s),g=ft(s),rt(s),new st(`${m} has unknown type ${g}`);return g},Pr=(s,m,g)=>{var $=[];return s=s.toWireType($,g),$.length&&(se[m>>>2>>>0]=ut($)),s},He=s=>{try{s()}catch(m){ne(m)}},Xr=s=>{if(!R)try{s();try{L=L=s=L,r.onExit?.(s),R=!0,h(s,new qt(s))}catch(m){m instanceof qt||m=="unwind"||h(1,m)}}catch(m){m instanceof qt||m=="unwind"||h(1,m)}};function Qr(){var s=pe,m={};for(let[g,$]of Object.entries(s))m[g]=typeof $=="function"?(...T)=>{Zt.push(g);try{return $(...T)}finally{R||(Zt.pop(),dt&&gt===1&&Zt.length===0&&(gt=0,He(dn),typeof Fibers<"u"&&Fibers.Db()))}}:$;return m}var gt=0,dt=null,Bt=0,Zt=[],kr={},Or={},Jr=0,pr=null,en=[];function tn(){return new Promise((s,m)=>{pr={resolve:s,reject:m}})}function rn(){var s=Nt(65548),m=s+12;se[s>>>2>>>0]=m,se[s+4>>>2>>>0]=m+65536,m=Zt[0];var g=kr[m];return g===void 0&&(g=Jr++,kr[m]=g,Or[g]=m),W[s+8>>>2>>>0]=g,s}function nn(s){if(!R){if(gt===0){var m=!1,g=!1;s(($=0)=>{if(!R&&(Bt=$,m=!0,g)){gt=2,He(()=>vt(dt)),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.resume(),$=!1;try{var T=(0,pe[Or[W[dt+8>>>2>>>0]]])()}catch(q){T=q,$=!0}var B=!1;if(!dt){var H=pr;H&&(pr=null,($?H.reject:H.resolve)(T),B=!0)}if($&&!B)throw T}}),g=!0,m||(gt=1,dt=rn(),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.pause(),He(()=>Jt(dt)))}else gt===2?(gt=0,He(ct),rt(dt),dt=null,en.forEach(Xr)):ne(`invalid state: ${gt}`);return Bt}}function Rr(s){return nn(m=>{s().then(m)})}var Xt=[],on={},nt=s=>{var m=on[s];return m===void 0?ft(s):m},mr=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Br=s=>{var m=Xt.length;return Xt.push(s),m},Kn=(s,m)=>{for(var g=Array(s),$=0;$<s;++$)g[$]=cr(se[m+4*$>>>2>>>0],"parameter "+$);return g},wt=(s,m)=>Object.defineProperty(m,"name",{value:s});function Yn(s){var m=Function;if(!(m instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof m} which is not a function`);var g=wt(m.name||"unknownFunctionName",function(){});return g.prototype=m.prototype,g=new g,s=m.apply(g,s),s instanceof Object?s:g}var Je=s=>s%4===0&&(s%100!==0||s%400===0),Dr=[0,31,60,91,121,152,182,213,244,274,305,335],fr=[0,31,59,90,120,151,181,212,243,273,304,334],lt=[],hr=(s,m)=>{lt.length=0;for(var g;g=K[s++>>>0];){var $=g!=105;$&=g!=112,m+=$&&m%8?4:0,lt.push(g==112?se[m>>>2>>>0]:g==106?We[m>>>3]:g==105?W[m>>>2>>>0]:ae[m>>>3>>>0]),m+=$?8:4}return lt},Qe={},ot=()=>{if(!Qt){var s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},m;for(m in Qe)Qe[m]===void 0?delete s[m]:s[m]=Qe[m];var g=[];for(m in s)g.push(`${m}=${s[m]}`);Qt=g}return Qt},Qt,Zn=[null,[],[]],an=[31,29,31,30,31,30,31,31,30,31,30,31],zr=[31,28,31,30,31,30,31,31,30,31,30,31];function Xn(s){var m=Array(Wt(s)+1);return at(s,m,0,m.length),m}function sn(s,m,g,$){function T(D,be,Ie){for(D=typeof D=="number"?D.toString():D||"";D.length<be;)D=Ie[0]+D;return D}function B(D,be){return T(D,be,"0")}function H(D,be){function Ie(Mt){return 0>Mt?-1:0<Mt?1:0}var zt;return(zt=Ie(D.getFullYear()-be.getFullYear()))===0&&(zt=Ie(D.getMonth()-be.getMonth()))===0&&(zt=Ie(D.getDate()-be.getDate())),zt}function q(D){switch(D.getDay()){case 0:return new Date(D.getFullYear()-1,11,29);case 1:return D;case 2:return new Date(D.getFullYear(),0,3);case 3:return new Date(D.getFullYear(),0,2);case 4:return new Date(D.getFullYear(),0,1);case 5:return new Date(D.getFullYear()-1,11,31);case 6:return new Date(D.getFullYear()-1,11,30)}}function te(D){var be=D.$a;for(D=new Date(new Date(D.ab+1900,0,1).getTime());0<be;){var Ie=D.getMonth(),zt=(Je(D.getFullYear())?an:zr)[Ie];if(be>zt-D.getDate())be-=zt-D.getDate()+1,D.setDate(1),11>Ie?D.setMonth(Ie+1):(D.setMonth(0),D.setFullYear(D.getFullYear()+1));else{D.setDate(D.getDate()+be);break}}return Ie=new Date(D.getFullYear()+1,0,4),be=q(new Date(D.getFullYear(),0,4)),Ie=q(Ie),0>=H(be,D)?0>=H(Ie,D)?D.getFullYear()+1:D.getFullYear():D.getFullYear()-1}s>>>=0,m>>>=0,g>>>=0,$>>>=0;var X=se[$+40>>>2>>>0];$={Ab:W[$>>>2>>>0],zb:W[$+4>>>2>>>0],fb:W[$+8>>>2>>>0],jb:W[$+12>>>2>>>0],gb:W[$+16>>>2>>>0],ab:W[$+20>>>2>>>0],Va:W[$+24>>>2>>>0],$a:W[$+28>>>2>>>0],Cb:W[$+32>>>2>>>0],yb:W[$+36>>>2>>>0],Bb:X?je(X):""},g=je(g),X={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var de in X)g=g.replace(new RegExp(de,"g"),X[de]);var Ee="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Oe="January February March April May June July August September October November December".split(" ");X={"%a":D=>Ee[D.Va].substring(0,3),"%A":D=>Ee[D.Va],"%b":D=>Oe[D.gb].substring(0,3),"%B":D=>Oe[D.gb],"%C":D=>B((D.ab+1900)/100|0,2),"%d":D=>B(D.jb,2),"%e":D=>T(D.jb,2," "),"%g":D=>te(D).toString().substring(2),"%G":te,"%H":D=>B(D.fb,2),"%I":D=>(D=D.fb,D==0?D=12:12<D&&(D-=12),B(D,2)),"%j":D=>{for(var be=0,Ie=0;Ie<=D.gb-1;be+=(Je(D.ab+1900)?an:zr)[Ie++]);return B(D.jb+be,3)},"%m":D=>B(D.gb+1,2),"%M":D=>B(D.zb,2),"%n":()=>`\n`,"%p":D=>0<=D.fb&&12>D.fb?"AM":"PM","%S":D=>B(D.Ab,2),"%t":()=>"	","%u":D=>D.Va||7,"%U":D=>B(Math.floor((D.$a+7-D.Va)/7),2),"%V":D=>{var be=Math.floor((D.$a+7-(D.Va+6)%7)/7);if(2>=(D.Va+371-D.$a-2)%7&&be++,be)be==53&&(Ie=(D.Va+371-D.$a)%7,Ie==4||Ie==3&&Je(D.ab)||(be=1));else{be=52;var Ie=(D.Va+7-D.$a-1)%7;(Ie==4||Ie==5&&Je(D.ab%400-1))&&be++}return B(be,2)},"%w":D=>D.Va,"%W":D=>B(Math.floor((D.$a+7-(D.Va+6)%7)/7),2),"%y":D=>(D.ab+1900).toString().substring(2),"%Y":D=>D.ab+1900,"%z":D=>{D=D.yb;var be=0<=D;return D=Math.abs(D)/60,(be?"+":"-")+("0000"+(D/60*100+D%60)).slice(-4)},"%Z":D=>D.Bb,"%%":()=>"%"},g=g.replace(/%%/g,"\\0\\0");for(de in X)g.includes(de)&&(g=g.replace(new RegExp(de,"g"),X[de]($)));return g=g.replace(/\\0\\0/g,"%"),de=Xn(g),de.length>m?0:(N.set(de,s>>>0),de.length-1)}for(var un=Array(256),gr=0;256>gr;++gr)un[gr]=String.fromCharCode(gr);Cr=un,st=r.BindingError=class extends Error{constructor(s){super(s),this.name="BindingError"}},r.InternalError=class extends Error{constructor(s){super(s),this.name="InternalError"}},Te.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=()=>Te.length/2-5-Er.length;var Qn={ia:function(s,m,g){return Rr(async()=>{await r.sb(s,m,g)})},a:function(s,m,g){s>>>=0;var $=new Vt(s);throw se[$.hb+16>>>2>>>0]=0,se[$.hb+4>>>2>>>0]=m>>>0,se[$.hb+8>>>2>>>0]=g>>>0,sr=s,jt++,sr},y:function(){return 0},ea:function(){},R:function(){},T:function(){},ga:function(){return 0},ca:function(){},Z:function(){},ba:function(){},G:function(){},S:function(){},P:function(){},da:function(){},Q:function(){},C:function(s,m,g){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:$=>$,toWireType:function($,T){if(typeof T!="bigint"&&typeof T!="number")throw T===null?T="null":($=typeof T,T=$==="object"||$==="array"||$==="function"?T.toString():""+T),new TypeError(`Cannot convert "${T}" to ${this.name}`);return typeof T=="number"&&(T=BigInt(T)),T},argPackAdvance:8,readValueFromPointer:bt(m,g>>>0,m.indexOf("u")==-1),bb:null})},K:function(s,m,g,$){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:function(T){return!!T},toWireType:function(T,B){return B?g:$},argPackAdvance:8,readValueFromPointer:function(T){return this.fromWireType(K[T>>>0])},bb:null})},J:function(s){return ht(s>>>0,Fn)},B:function(s,m,g){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:$=>$,toWireType:($,T)=>T,argPackAdvance:8,readValueFromPointer:ge(m,g>>>0),bb:null})},s:function(s,m,g,$,T){if(s>>>=0,g>>>=0,m=ft(m>>>0),T===-1&&(T=4294967295),T=q=>q,$===0){var B=32-8*g;T=q=>q<<B>>>B}var H=m.includes("unsigned")?function(q,te){return te>>>0}:function(q,te){return te};ht(s,{name:m,fromWireType:T,toWireType:H,argPackAdvance:8,readValueFromPointer:bt(m,g,$!==0),bb:null})},o:function(s,m,g){function $(B){return new T(N.buffer,se[B+4>>>2>>>0],se[B>>>2>>>0])}var T=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][m];g=ft(g>>>0),ht(s>>>0,{name:g,fromWireType:$,argPackAdvance:8,readValueFromPointer:$},{nb:!0})},D:function(s,m){m=ft(m>>>0);var g=m==="std::string";ht(s>>>0,{name:m,fromWireType:function($){var T=se[$>>>2>>>0],B=$+4;if(g)for(var H=B,q=0;q<=T;++q){var te=B+q;if(q==T||K[te>>>0]==0){if(H=je(H,te-H),X===void 0)var X=H;else X+=String.fromCharCode(0),X+=H;H=te+1}}else{for(X=Array(T),q=0;q<T;++q)X[q]=String.fromCharCode(K[B+q>>>0]);X=X.join("")}return rt($),X},toWireType:function($,T){T instanceof ArrayBuffer&&(T=new Uint8Array(T));var B=typeof T=="string";if(!(B||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int8Array))throw new st("Cannot pass non-string to std::string");var H=g&&B?Wt(T):T.length,q=Nt(4+H+1),te=q+4;if(se[q>>>2>>>0]=H,g&&B)at(T,K,te,H+1);else if(B)for(B=0;B<H;++B){var X=T.charCodeAt(B);if(255<X)throw rt(te),new st("String has UTF-16 code units that do not fit in 8 bits");K[te+B>>>0]=X}else for(B=0;B<H;++B)K[te+B>>>0]=T[B];return $!==null&&$.push(rt,q),q},argPackAdvance:8,readValueFromPointer:lr,bb($){rt($)}})},x:function(s,m,g){if(m>>>=0,g>>>=0,g=ft(g),m===2)var $=jr,T=qn,B=Kr,H=q=>he[q>>>1>>>0];else m===4&&($=jn,T=Yr,B=Zr,H=q=>se[q>>>2>>>0]);ht(s>>>0,{name:g,fromWireType:q=>{for(var te=se[q>>>2>>>0],X,de=q+4,Ee=0;Ee<=te;++Ee){var Oe=q+4+Ee*m;(Ee==te||H(Oe)==0)&&(de=$(de,Oe-de),X===void 0?X=de:(X+=String.fromCharCode(0),X+=de),de=Oe+m)}return rt(q),X},toWireType:(q,te)=>{if(typeof te!="string")throw new st(`Cannot pass non-string to C++ string type ${g}`);var X=B(te),de=Nt(4+X+m);return se[de>>>2>>>0]=X/m,T(te,de+4,X+m),q!==null&&q.push(rt,de),de},argPackAdvance:8,readValueFromPointer:lr,bb(q){rt(q)}})},L:function(s,m){m=ft(m>>>0),ht(s>>>0,{ob:!0,name:m,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ha:()=>1,u:function(s,m,g){return m>>>=0,g>>>=0,s=Xe(s>>>0),m=cr(m,"emval::as"),Pr(m,g,s)},w:function(s){return s>>>=0,Rr(()=>(s=Xe(s),s.then(ut)))},n:function(s,m,g,$){return g>>>=0,$>>>=0,s=Xt[s>>>0],m=Xe(m>>>0),s(null,m,g,$)},j:function(s,m,g,$,T){return g>>>=0,$>>>=0,T>>>=0,s=Xt[s>>>0],m=Xe(m>>>0),g=nt(g),s(m,m[g],$,T)},b:dr,A:function(s,m){return m>>>=0,s=Xe(s>>>0),m=Xe(m),s==m},m:function(s){return s>>>=0,s===0?ut(mr()):(s=nt(s),ut(mr()[s]))},i:function(s,m,g){m=Kn(s,m>>>0);var $=m.shift();s--;var T=`return function (obj, func, destructorsRef, args) {\n`,B=0,H=[];g===0&&H.push("obj");for(var q=["retType"],te=[$],X=0;X<s;++X)H.push("arg"+X),q.push("argType"+X),te.push(m[X]),T+=`  var arg${X} = argType${X}.readValueFromPointer(args${B?"+"+B:""});\n`,B+=m[X].argPackAdvance;return T+=`  var rv = ${g===1?"new func":"func.call"}(${H.join(", ")});\n`,$.ob||(q.push("emval_returnValue"),te.push(Pr),T+=`  return emval_returnValue(retType, destructorsRef, rv);\n`),q.push(T+`};\n`),s=Yn(q)(...te),g=`methodCaller<(${m.map(de=>de.name).join(", ")}) => ${$.name}>`,Br(wt(g,s))},r:function(s,m){return m>>>=0,s=Xe(s>>>0),m=Xe(m),ut(s[m])},e:function(s){s>>>=0,9<s&&(Te[s+1]+=1)},t:function(){return ut([])},l:function(s){s=Xe(s>>>0);for(var m=Array(s.length),g=0;g<s.length;g++)m[g]=s[g];return ut(m)},f:function(s){return ut(nt(s>>>0))},k:function(){return ut({})},h:function(s){s>>>=0;for(var m=Xe(s);m.length;){var g=m.pop();m.pop()(g)}dr(s)},g:function(s,m,g){m>>>=0,g>>>=0,s=Xe(s>>>0),m=Xe(m),g=Xe(g),s[m]=g},c:function(s,m){return m>>>=0,s=cr(s>>>0,"_emval_take_value"),s=s.readValueFromPointer(m),ut(s)},W:function(s,m){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s),m>>>=0,s=new Date(1e3*s),W[m>>>2>>>0]=s.getUTCSeconds(),W[m+4>>>2>>>0]=s.getUTCMinutes(),W[m+8>>>2>>>0]=s.getUTCHours(),W[m+12>>>2>>>0]=s.getUTCDate(),W[m+16>>>2>>>0]=s.getUTCMonth(),W[m+20>>>2>>>0]=s.getUTCFullYear()-1900,W[m+24>>>2>>>0]=s.getUTCDay(),W[m+28>>>2>>>0]=(s.getTime()-Date.UTC(s.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},X:function(s,m){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s),m>>>=0,s=new Date(1e3*s),W[m>>>2>>>0]=s.getSeconds(),W[m+4>>>2>>>0]=s.getMinutes(),W[m+8>>>2>>>0]=s.getHours(),W[m+12>>>2>>>0]=s.getDate(),W[m+16>>>2>>>0]=s.getMonth(),W[m+20>>>2>>>0]=s.getFullYear()-1900,W[m+24>>>2>>>0]=s.getDay(),W[m+28>>>2>>>0]=(Je(s.getFullYear())?Dr:fr)[s.getMonth()]+s.getDate()-1|0,W[m+36>>>2>>>0]=-(60*s.getTimezoneOffset());var g=new Date(s.getFullYear(),6,1).getTimezoneOffset(),$=new Date(s.getFullYear(),0,1).getTimezoneOffset();W[m+32>>>2>>>0]=(g!=$&&s.getTimezoneOffset()==Math.min($,g))|0},Y:function(s){s>>>=0;var m=new Date(W[s+20>>>2>>>0]+1900,W[s+16>>>2>>>0],W[s+12>>>2>>>0],W[s+8>>>2>>>0],W[s+4>>>2>>>0],W[s>>>2>>>0],0),g=W[s+32>>>2>>>0],$=m.getTimezoneOffset(),T=new Date(m.getFullYear(),6,1).getTimezoneOffset(),B=new Date(m.getFullYear(),0,1).getTimezoneOffset(),H=Math.min(B,T);return 0>g?W[s+32>>>2>>>0]=+(T!=B&&H==$):0<g!=(H==$)&&(T=Math.max(B,T),m.setTime(m.getTime()+6e4*((0<g?H:T)-$))),W[s+24>>>2>>>0]=m.getDay(),W[s+28>>>2>>>0]=(Je(m.getFullYear())?Dr:fr)[m.getMonth()]+m.getDate()-1|0,W[s>>>2>>>0]=m.getSeconds(),W[s+4>>>2>>>0]=m.getMinutes(),W[s+8>>>2>>>0]=m.getHours(),W[s+12>>>2>>>0]=m.getDate(),W[s+16>>>2>>>0]=m.getMonth(),W[s+20>>>2>>>0]=m.getYear(),s=m.getTime(),BigInt(isNaN(s)?-1:s/1e3)},U:function(){return-52},V:function(){},N:function(s,m,g,$){g>>>=0,$>>>=0;var T=new Date().getFullYear(),B=new Date(T,0,1),H=new Date(T,6,1);T=B.getTimezoneOffset();var q=H.getTimezoneOffset();se[s>>>0>>>2>>>0]=60*Math.max(T,q),W[m>>>0>>>2>>>0]=+(T!=q),s=te=>te.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],B=s(B),H=s(H),q<T?(at(B,K,g,17),at(H,K,$,17)):(at(B,K,$,17),at(H,K,g,17))},v:()=>{ne("")},d:function(s,m,g){return s>>>=0,m=hr(m>>>0,g>>>0),Rt[s](...m)},I:function(s,m,g){return s>>>=0,m=hr(m>>>0,g>>>0),Rt[s](...m)},H:()=>Date.now(),O:function(){return 4294901760},q:()=>performance.now(),M:function(s){s>>>=0;var m=K.length;if(4294901760<s)return!1;for(var g=1;4>=g;g*=2){var $=m*(1+.2/g);$=Math.min($,s+100663296);var T=Math;$=Math.max(s,$);e:{T=(T.min.call(T,4294901760,$+(65536-$%65536)%65536)-O.buffer.byteLength+65535)/65536;try{O.grow(T),Ae();var B=1;break e}catch{}B=void 0}if(B)return!0}return!1},$:function(s,m){s>>>=0,m>>>=0;var g=0;return ot().forEach(($,T)=>{var B=m+g;for(T=se[s+4*T>>>2>>>0]=B,B=0;B<$.length;++B)N[T++>>>0]=$.charCodeAt(B);N[T>>>0]=0,g+=$.length+1}),0},aa:function(s,m){s>>>=0,m>>>=0;var g=ot();se[s>>>2>>>0]=g.length;var $=0;return g.forEach(T=>$+=T.length+1),se[m>>>2>>>0]=$,0},z:()=>52,F:function(){return 52},_:function(){return 70},E:function(s,m,g,$){m>>>=0,g>>>=0,$>>>=0;for(var T=0,B=0;B<g;B++){var H=se[m>>>2>>>0],q=se[m+4>>>2>>>0];m+=8;for(var te=0;te<q;te++){var X=K[H+te>>>0],de=Zn[s];X===0||X===10?((s===1?E:P)(Kt(de,0)),de.length=0):de.push(X)}T+=q}return se[$>>>2>>>0]=T,0},fa:sn,p:function(s,m,g,$){return sn(s>>>0,m>>>0,g>>>0,$>>>0)}},pe=function(){function s(g){return pe=g.exports,pe=Qr(),pe=ln(),O=pe.ja,Ae(),ie.unshift(pe.ka),le--,le==0&&(qe!==null&&(clearInterval(qe),qe=null),G&&(g=G,G=null,g())),pe}var m={a:Qn};if(le++,r.instantiateWasm)try{return r.instantiateWasm(m,s)}catch(g){P(`Module.instantiateWasm callback failed with error: ${g}`),i(g)}return mt(m,function(g){s(g.instance)}).catch(i),{}}(),Mr=s=>(Mr=pe.la)(s);r._OrtInit=(s,m)=>(r._OrtInit=pe.ma)(s,m),r._OrtGetLastError=(s,m)=>(r._OrtGetLastError=pe.na)(s,m),r._OrtCreateSessionOptions=(s,m,g,$,T,B,H,q,te,X)=>(r._OrtCreateSessionOptions=pe.oa)(s,m,g,$,T,B,H,q,te,X),r._OrtAppendExecutionProvider=(s,m)=>(r._OrtAppendExecutionProvider=pe.pa)(s,m),r._OrtAddFreeDimensionOverride=(s,m,g)=>(r._OrtAddFreeDimensionOverride=pe.qa)(s,m,g),r._OrtAddSessionConfigEntry=(s,m,g)=>(r._OrtAddSessionConfigEntry=pe.ra)(s,m,g),r._OrtReleaseSessionOptions=s=>(r._OrtReleaseSessionOptions=pe.sa)(s),r._OrtCreateSession=(s,m,g)=>(r._OrtCreateSession=pe.ta)(s,m,g),r._OrtReleaseSession=s=>(r._OrtReleaseSession=pe.ua)(s),r._OrtGetInputOutputCount=(s,m,g)=>(r._OrtGetInputOutputCount=pe.va)(s,m,g),r._OrtGetInputName=(s,m)=>(r._OrtGetInputName=pe.wa)(s,m),r._OrtGetOutputName=(s,m)=>(r._OrtGetOutputName=pe.xa)(s,m),r._OrtFree=s=>(r._OrtFree=pe.ya)(s),r._OrtCreateTensor=(s,m,g,$,T,B)=>(r._OrtCreateTensor=pe.za)(s,m,g,$,T,B),r._OrtGetTensorData=(s,m,g,$,T)=>(r._OrtGetTensorData=pe.Aa)(s,m,g,$,T),r._OrtReleaseTensor=s=>(r._OrtReleaseTensor=pe.Ba)(s),r._OrtCreateRunOptions=(s,m,g,$)=>(r._OrtCreateRunOptions=pe.Ca)(s,m,g,$),r._OrtAddRunConfigEntry=(s,m,g)=>(r._OrtAddRunConfigEntry=pe.Da)(s,m,g),r._OrtReleaseRunOptions=s=>(r._OrtReleaseRunOptions=pe.Ea)(s),r._OrtCreateBinding=s=>(r._OrtCreateBinding=pe.Fa)(s),r._OrtBindInput=(s,m,g)=>(r._OrtBindInput=pe.Ga)(s,m,g),r._OrtBindOutput=(s,m,g,$)=>(r._OrtBindOutput=pe.Ha)(s,m,g,$),r._OrtClearBoundOutputs=s=>(r._OrtClearBoundOutputs=pe.Ia)(s),r._OrtReleaseBinding=s=>(r._OrtReleaseBinding=pe.Ja)(s),r._OrtRunWithBinding=(s,m,g,$,T)=>(r._OrtRunWithBinding=pe.Ka)(s,m,g,$,T),r._OrtRun=(s,m,g,$,T,B,H,q)=>(r._OrtRun=pe.La)(s,m,g,$,T,B,H,q),r._OrtEndProfiling=s=>(r._OrtEndProfiling=pe.Ma)(s),r._JsepOutput=(s,m,g)=>(r._JsepOutput=pe.Na)(s,m,g),r._JsepGetNodeName=s=>(r._JsepGetNodeName=pe.Oa)(s);var Nt=r._malloc=s=>(Nt=r._malloc=pe.Pa)(s),rt=r._free=s=>(rt=r._free=pe.Qa)(s),yr=s=>(yr=pe.Sa)(s),br=s=>(br=pe.Ta)(s),Ur=()=>(Ur=pe.Ua)(),Jt=s=>(Jt=pe.Wa)(s),dn=()=>(dn=pe.Xa)(),vt=s=>(vt=pe.Ya)(s),ct=()=>(ct=pe.Za)();r.___start_em_js=837952,r.___stop_em_js=838113;function ln(){var s=pe;s=Object.assign({},s);var m=g=>$=>g($)>>>0;return s.la=m(s.la),s.Pa=m(s.Pa),s.Ta=m(s.Ta),s.Ua=(g=>()=>g()>>>0)(s.Ua),s}r.stackSave=()=>Ur(),r.stackRestore=s=>yr(s),r.stackAlloc=s=>br(s),r.UTF8ToString=je,r.stringToUTF8=(s,m,g)=>at(s,K,m,g),r.lengthBytesUTF8=Wt;var Dt;G=function s(){Dt||Vr(),Dt||(G=s)};function Vr(){if(!(0<le)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;){var s=r.preRun.shift();me.unshift(s)}for(;0<me.length;)me.shift()(r);if(!(0<le||Dt||(Dt=!0,r.calledRun=!0,R))){for(;0<ie.length;)ie.shift()(r);for(o(r);0<ue.length;)ue.shift()(r)}}}return Vr(),u}})();typeof Ti=="object"&&typeof po=="object"?po.exports=Ii:typeof define=="function"&&define.amd&&define([],()=>Ii)});var Pi=Wr(()=>{});var ki=Wr(()=>{});var Oi={};gn(Oi,{cpus:()=>ll});var ll,Ri=Y(()=>{ll=void 0});var zi=Wr((Di,mo)=>{"use strict";var Bi=(()=>{var e=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(e||=__filename),function(t={}){function r(){return ae.buffer!=ue.buffer&&Ne(),ue}function o(){return ae.buffer!=ue.buffer&&Ne(),le}function i(){return ae.buffer!=ue.buffer&&Ne(),qe}function u(){return ae.buffer!=ue.buffer&&Ne(),G}function a(){return ae.buffer!=ue.buffer&&Ne(),ne}function c(){return ae.buffer!=ue.buffer&&Ne(),xe}function p(){return ae.buffer!=ue.buffer&&Ne(),Ke}function h(){return ae.buffer!=ue.buffer&&Ne(),Ut}var d=t,y,w,_=new Promise((n,l)=>{y=n,w=l});d.mountExternalData=(n,l)=>{(d.Db||(d.Db=new Map)).set(n,l)},d.unmountExternalData=()=>{delete d.Db};let v=()=>{let n=(f,b,C)=>(...k)=>{let V=ct,F=b?.();k=f(...k);let re=b?.();return F!==re&&(f=re,C(F),b=C=null),ct!=V?T():k},l=f=>async(...b)=>{try{if(d.Cb)throw Error("Session already started");let C=d.Cb={ec:b[0],errors:[]},k=await f(...b);if(d.Cb!==C)throw Error("Session mismatch");d.Kb?.flush();let V=C.errors;if(0<V.length){let F=await Promise.all(V);if(F=F.filter(re=>re),0<F.length)throw Error(F.join(`\n`))}return k}finally{d.Cb=null}};d._OrtCreateSession=n(d._OrtCreateSession,()=>d._OrtCreateSession,f=>d._OrtCreateSession=f),d._OrtRun=l(n(d._OrtRun,()=>d._OrtRun,f=>d._OrtRun=f)),d._OrtRunWithBinding=l(n(d._OrtRunWithBinding,()=>d._OrtRunWithBinding,f=>d._OrtRunWithBinding=f)),d._OrtBindInput=n(d._OrtBindInput,()=>d._OrtBindInput,f=>d._OrtBindInput=f),v=void 0};d.jsepInit=(n,l)=>{if(v?.(),n==="webgpu"){[d.Kb,d.Wb,d.$b,d.Lb,d.Zb,d.ob,d.ac,d.cc,d.Xb,d.Yb,d.bc]=l;let f=d.Kb;d.jsepRegisterBuffer=(b,C,k,V)=>f.registerBuffer(b,C,k,V),d.jsepGetBuffer=b=>f.getBuffer(b),d.jsepCreateDownloader=(b,C,k)=>f.createDownloader(b,C,k),d.jsepOnReleaseSession=b=>{f.onReleaseSession(b)},d.jsepOnRunStart=b=>f.onRunStart(b)}};var S=Object.assign({},d),A="./this.program",I=(n,l)=>{throw l},x=typeof window=="object",E=typeof importScripts=="function",P=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",O=d.ENVIRONMENT_IS_PTHREAD||!1,R="";function L(n){return d.locateFile?d.locateFile(n,R):R+n}var N,K,Q;if(P){var he=(uo(),wr(so)),W=(co(),wr(lo));R=E?W.dirname(R)+"/":__dirname+"/",N=(n,l)=>(n=Wt(n)?new URL(n):W.normalize(n),he.readFileSync(n,l?void 0:"utf8")),Q=n=>(n=N(n,!0),n.buffer||(n=new Uint8Array(n)),n),K=(n,l,f,b=!0)=>{n=Wt(n)?new URL(n):W.normalize(n),he.readFile(n,b?void 0:"utf8",(C,k)=>{C?f(C):l(b?k.buffer:k)})},!d.thisProgram&&1<process.argv.length&&(A=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),I=(n,l)=>{throw process.exitCode=n,l},global.Worker=Pi().Worker}else(x||E)&&(E?R=self.location.href:typeof document<"u"&&document.currentScript&&(R=document.currentScript.src),typeof e<"u"&&e&&(R=e),R.startsWith("blob:")?R="":R=R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1),P||(N=n=>{var l=new XMLHttpRequest;return l.open("GET",n,!1),l.send(null),l.responseText},E&&(Q=n=>{var l=new XMLHttpRequest;return l.open("GET",n,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),K=(n,l,f)=>{var b=new XMLHttpRequest;b.open("GET",n,!0),b.responseType="arraybuffer",b.onload=()=>{b.status==200||b.status==0&&b.response?l(b.response):f()},b.onerror=f,b.send(null)}));P&&typeof performance>"u"&&(global.performance=ki().performance);var se=console.log.bind(console),Ce=console.error.bind(console);P&&(se=(...n)=>he.writeSync(1,n.join(" ")+`\n`),Ce=(...n)=>he.writeSync(2,n.join(" ")+`\n`));var We=se,ee=Ce;Object.assign(d,S),S=null;var ae,Ae,me=!1,ie,ue,le,qe,G,ne,xe,Ke,Be,Ge,Ut;function Ne(){var n=ae.buffer;d.HEAP8=ue=new Int8Array(n),d.HEAP16=qe=new Int16Array(n),d.HEAPU8=le=new Uint8Array(n),d.HEAPU16=G=new Uint16Array(n),d.HEAP32=ne=new Int32Array(n),d.HEAPU32=xe=new Uint32Array(n),d.HEAPF32=Ke=new Float32Array(n),d.HEAPF64=Ut=new Float64Array(n),d.HEAP64=Be=new BigInt64Array(n),d.HEAPU64=Ge=new BigUint64Array(n)}var Ye=16777216;if(O)ae=d.wasmMemory;else if(d.wasmMemory)ae=d.wasmMemory;else if(ae=new WebAssembly.Memory({initial:Ye/65536,maximum:65536,shared:!0}),!(ae.buffer instanceof SharedArrayBuffer))throw ee("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),P&&ee("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Ne(),Ye=ae.buffer.byteLength;var mt=[],Rt=[],qt=[],Vt=0,sr=null,jt=null;function xr(){if(Vt--,Vt==0&&(sr!==null&&(clearInterval(sr),sr=null),jt)){var n=jt;jt=null,n()}}function Kt(n){throw n="Aborted("+n+")",ee(n),me=!0,ie=1,n=new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info."),w(n),n}var je=n=>n.startsWith("data:application/octet-stream;base64,"),Wt=n=>n.startsWith("file://"),at;at="ort-wasm-simd-threaded.wasm",je(at)||(at=L(at));function Cr(n){if(Q)return Q(n);throw"both async and sync fetching of the wasm failed"}function ft(n){if(x||E){if(typeof fetch=="function"&&!Wt(n))return fetch(n,{credentials:"same-origin"}).then(l=>{if(!l.ok)throw`failed to load wasm binary file at \'${n}\'`;return l.arrayBuffer()}).catch(()=>Cr(n));if(K)return new Promise((l,f)=>{K(n,b=>l(new Uint8Array(b)),f)})}return Promise.resolve().then(()=>Cr(n))}function ur(n,l,f){return ft(n).then(b=>WebAssembly.instantiate(b,l)).then(f,b=>{ee(`failed to asynchronously prepare wasm: ${b}`),Kt(b)})}function Ar(n,l){var f=at;return typeof WebAssembly.instantiateStreaming!="function"||je(f)||Wt(f)||P||typeof fetch!="function"?ur(f,n,l):fetch(f,{credentials:"same-origin"}).then(b=>WebAssembly.instantiateStreaming(b,n).then(l,function(C){return ee(`wasm streaming compile failed: ${C}`),ee("falling back to ArrayBuffer instantiation"),ur(f,n,l)}))}var Ir={826468:(n,l,f,b)=>{if(typeof d>"u"||!d.Db)return 1;if(n=He(n>>>0),n.startsWith("./")&&(n=n.substring(2)),n=d.Db.get(n),!n)return 2;if(l>>>=0,f>>>=0,b>>>=0,l+f>n.byteLength)return 3;try{return o().set(n.subarray(l,l+f),b>>>0),0}catch{return 4}},826969:()=>{d.Xb()},827e3:()=>{d.Yb()},827029:()=>{d.bc()},827054:n=>d.Wb(n),827087:n=>d.$b(n),827119:(n,l,f)=>{d.Lb(n,l,f,!0)},827158:(n,l,f)=>{d.Lb(n,l,f)},827191:n=>{d.ob("Abs",n,void 0)},827242:n=>{d.ob("Neg",n,void 0)},827293:n=>{d.ob("Floor",n,void 0)},827346:n=>{d.ob("Ceil",n,void 0)},827398:n=>{d.ob("Reciprocal",n,void 0)},827456:n=>{d.ob("Sqrt",n,void 0)},827508:n=>{d.ob("Exp",n,void 0)},827559:n=>{d.ob("Erf",n,void 0)},827610:n=>{d.ob("Sigmoid",n,void 0)},827665:(n,l,f)=>{d.ob("HardSigmoid",n,{alpha:l,beta:f})},827744:n=>{d.ob("Log",n,void 0)},827795:n=>{d.ob("Sin",n,void 0)},827846:n=>{d.ob("Cos",n,void 0)},827897:n=>{d.ob("Tan",n,void 0)},827948:n=>{d.ob("Asin",n,void 0)},828e3:n=>{d.ob("Acos",n,void 0)},828052:n=>{d.ob("Atan",n,void 0)},828104:n=>{d.ob("Sinh",n,void 0)},828156:n=>{d.ob("Cosh",n,void 0)},828208:n=>{d.ob("Asinh",n,void 0)},828261:n=>{d.ob("Acosh",n,void 0)},828314:n=>{d.ob("Atanh",n,void 0)},828367:n=>{d.ob("Tanh",n,void 0)},828419:n=>{d.ob("Not",n,void 0)},828470:(n,l,f)=>{d.ob("Clip",n,{min:l,max:f})},828539:n=>{d.ob("Clip",n,void 0)},828591:(n,l)=>{d.ob("Elu",n,{alpha:l})},828649:n=>{d.ob("Relu",n,void 0)},828701:(n,l)=>{d.ob("LeakyRelu",n,{alpha:l})},828765:(n,l)=>{d.ob("ThresholdedRelu",n,{alpha:l})},828835:(n,l)=>{d.ob("Cast",n,{to:l})},828893:n=>{d.ob("Add",n,void 0)},828944:n=>{d.ob("Sub",n,void 0)},828995:n=>{d.ob("Mul",n,void 0)},829046:n=>{d.ob("Div",n,void 0)},829097:n=>{d.ob("Pow",n,void 0)},829148:n=>{d.ob("Equal",n,void 0)},829201:n=>{d.ob("Greater",n,void 0)},829256:n=>{d.ob("GreaterOrEqual",n,void 0)},829318:n=>{d.ob("Less",n,void 0)},829370:n=>{d.ob("LessOrEqual",n,void 0)},829429:(n,l,f,b,C)=>{d.ob("ReduceMean",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829588:(n,l,f,b,C)=>{d.ob("ReduceMax",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829746:(n,l,f,b,C)=>{d.ob("ReduceMin",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829904:(n,l,f,b,C)=>{d.ob("ReduceProd",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830063:(n,l,f,b,C)=>{d.ob("ReduceSum",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830221:(n,l,f,b,C)=>{d.ob("ReduceL1",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830378:(n,l,f,b,C)=>{d.ob("ReduceL2",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830535:(n,l,f,b,C)=>{d.ob("ReduceLogSum",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830696:(n,l,f,b,C)=>{d.ob("ReduceSumSquare",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830860:(n,l,f,b,C)=>{d.ob("ReduceLogSumExp",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},831024:n=>{d.ob("Where",n,void 0)},831077:(n,l,f)=>{d.ob("Transpose",n,{perm:l?Array.from(a().subarray(l>>>0,f>>>0)):[]})},831185:(n,l,f,b)=>{d.ob("DepthToSpace",n,{blocksize:l,mode:He(f),format:b?"NHWC":"NCHW"})},831318:(n,l,f,b)=>{d.ob("DepthToSpace",n,{blocksize:l,mode:He(f),format:b?"NHWC":"NCHW"})},831451:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we)=>{d.ob("ConvTranspose",n,{format:re?"NHWC":"NCHW",autoPad:l,dilations:[f],group:b,kernelShape:[C],pads:[k,V],strides:[F],wIsConst:()=>!!r()[J>>>0],outputPadding:ce?Array.from(a().subarray(ce>>>0,Re>>>0)):[],outputShape:ze?Array.from(a().subarray(ze>>>0,z>>>0)):[],activation:He(we)})},831852:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z)=>{d.ob("ConvTranspose",n,{format:F?"NHWC":"NCHW",autoPad:l,dilations:Array.from(a().subarray(f>>>0,(f>>>0)+2>>>0)),group:b,kernelShape:Array.from(a().subarray(C>>>0,(C>>>0)+2>>>0)),pads:Array.from(a().subarray(k>>>0,(k>>>0)+4>>>0)),strides:Array.from(a().subarray(V>>>0,(V>>>0)+2>>>0)),wIsConst:()=>!!r()[re>>>0],outputPadding:J?Array.from(a().subarray(J>>>0,ce>>>0)):[],outputShape:Re?Array.from(a().subarray(Re>>>0,ze>>>0)):[],activation:He(z)})},832417:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we)=>{d.ob("ConvTranspose",n,{format:re?"NHWC":"NCHW",autoPad:l,dilations:[f],group:b,kernelShape:[C],pads:[k,V],strides:[F],wIsConst:()=>!!r()[J>>>0],outputPadding:ce?Array.from(a().subarray(ce>>>0,Re>>>0)):[],outputShape:ze?Array.from(a().subarray(ze>>>0,z>>>0)):[],activation:He(we)})},832818:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z)=>{d.ob("ConvTranspose",n,{format:F?"NHWC":"NCHW",autoPad:l,dilations:Array.from(a().subarray(f>>>0,(f>>>0)+2>>>0)),group:b,kernelShape:Array.from(a().subarray(C>>>0,(C>>>0)+2>>>0)),pads:Array.from(a().subarray(k>>>0,(k>>>0)+4>>>0)),strides:Array.from(a().subarray(V>>>0,(V>>>0)+2>>>0)),wIsConst:()=>!!r()[re>>>0],outputPadding:J?Array.from(a().subarray(J>>>0,ce>>>0)):[],outputShape:Re?Array.from(a().subarray(Re>>>0,ze>>>0)):[],activation:He(z)})},833383:(n,l)=>{d.ob("GlobalAveragePool",n,{format:l?"NHWC":"NCHW"})},833474:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("AveragePool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},833758:(n,l)=>{d.ob("GlobalAveragePool",n,{format:l?"NHWC":"NCHW"})},833849:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("AveragePool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834133:(n,l)=>{d.ob("GlobalMaxPool",n,{format:l?"NHWC":"NCHW"})},834220:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("MaxPool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834500:(n,l)=>{d.ob("GlobalMaxPool",n,{format:l?"NHWC":"NCHW"})},834587:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("MaxPool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834867:(n,l,f,b,C)=>{d.ob("Gemm",n,{alpha:l,beta:f,transA:b,transB:C})},834971:n=>{d.ob("MatMul",n,void 0)},835025:(n,l,f,b)=>{d.ob("ArgMax",n,{keepDims:!!l,selectLastIndex:!!f,axis:b})},835133:(n,l,f,b)=>{d.ob("ArgMin",n,{keepDims:!!l,selectLastIndex:!!f,axis:b})},835241:(n,l)=>{d.ob("Softmax",n,{axis:l})},835304:(n,l)=>{d.ob("Concat",n,{axis:l})},835364:(n,l,f,b,C)=>{d.ob("Split",n,{axis:l,numOutputs:f,splitSizes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},835504:n=>{d.ob("Expand",n,void 0)},835558:(n,l)=>{d.ob("Gather",n,{axis:Number(l)})},835629:(n,l)=>{d.ob("GatherElements",n,{axis:Number(l)})},835708:(n,l,f,b,C,k,V,F,re,J,ce)=>{d.ob("Resize",n,{antialias:l,axes:f?Array.from(a().subarray(f>>>0,b>>>0)):[],coordinateTransformMode:He(C),cubicCoeffA:k,excludeOutside:V,extrapolationValue:F,keepAspectRatioPolicy:He(re),mode:He(J),nearestMode:He(ce)})},836054:(n,l,f,b,C,k,V)=>{d.ob("Slice",n,{starts:l?Array.from(a().subarray(l>>>0,f>>>0)):[],ends:b?Array.from(a().subarray(b>>>0,C>>>0)):[],axes:k?Array.from(a().subarray(k>>>0,V>>>0)):[]})},836270:n=>{d.ob("Tile",n,void 0)},836322:(n,l,f,b)=>{d.ob("LayerNormalization",n,{axis:l,epsilon:f,simplified:!!b})},836433:(n,l,f)=>{d.ob("InstanceNormalization",n,{epsilon:l,format:f?"NHWC":"NCHW"})},836547:(n,l,f)=>{d.ob("InstanceNormalization",n,{epsilon:l,format:f?"NHWC":"NCHW"})},836661:n=>{d.ob("Range",n,void 0)},836714:(n,l)=>{d.ob("Einsum",n,{equation:He(l)})},836795:(n,l,f,b,C)=>{d.ob("Pad",n,{mode:l,value:f,pads:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},836922:(n,l,f,b,C,k)=>{d.ob("BatchNormalization",n,{epsilon:l,momentum:f,spatial:!!C,trainingMode:!!b,format:k?"NHWC":"NCHW"})},837091:(n,l,f,b,C,k)=>{d.ob("BatchNormalization",n,{epsilon:l,momentum:f,spatial:!!C,trainingMode:!!b,format:k?"NHWC":"NCHW"})},837260:(n,l,f)=>{d.ob("CumSum",n,{exclusive:Number(l),reverse:Number(f)})},837357:(n,l,f,b,C,k,V,F,re)=>{d.ob("Attention",n,{numHeads:l,isUnidirectional:f,maskFilterValue:b,scale:C,doRotary:k,qkvHiddenSizes:V?Array.from(a().subarray(Number(F)>>>0,Number(F)+V>>>0)):[],pastPresentShareBuffer:!!re})},837629:n=>{d.ob("BiasAdd",n,void 0)},837684:n=>{d.ob("BiasSplitGelu",n,void 0)},837745:n=>{d.ob("FastGelu",n,void 0)},837801:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze)=>{d.ob("Conv",n,{format:re?"NHWC":"NCHW",auto_pad:l,dilations:[f],group:b,kernel_shape:[C],pads:k?Array.from(a().subarray(k>>>0,V>>>0)):[],strides:[F],w_is_const:()=>!!r()[J>>>0],activation:He(ce),activation_params:Re?Array.from(p().subarray(Re>>>0,ze>>>0)):[]})},838171:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("Conv",n,{format:Re?"NHWC":"NCHW",auto_pad:l,dilations:[f,b],group:C,kernel_shape:[k,V],pads:F?Array.from(a().subarray(F>>>0,re>>>0)):[],strides:[J,ce],w_is_const:()=>!!r()[ze>>>0],activation:He(z),activation_params:we?Array.from(p().subarray(we>>>0,Pe>>>0)):[]})},838562:n=>{d.ob("Gelu",n,void 0)},838614:(n,l,f,b,C,k)=>{d.ob("MatMulNBits",n,{k:l,n:f,accuracyLevel:b,bits:C,blockSize:k})},838741:(n,l,f,b,C,k)=>{d.ob("MultiHeadAttention",n,{numHeads:l,isUnidirectional:f,maskFilterValue:b,scale:C,doRotary:k})},838900:(n,l,f,b,C)=>{d.ob("RotaryEmbedding",n,{interleaved:!!l,numHeads:f,rotaryEmbeddingDim:b,scale:C})},839039:(n,l,f)=>{d.ob("SkipLayerNormalization",n,{epsilon:l,simplified:!!f})},839141:(n,l,f)=>{d.ob("SkipLayerNormalization",n,{epsilon:l,simplified:!!f})},839243:(n,l,f,b)=>{d.ob("LayerNormalization",n,{axis:l,epsilon:f,simplified:!!b})},839354:n=>{d.ac(n)},839388:(n,l)=>d.cc(n,l,d.Cb.ec,d.Cb.errors)};function st(n){this.name="ExitStatus",this.message=`Program terminated with exit(${n})`,this.status=n}var Tr=n=>{n.terminate(),n.onmessage=()=>{}},ht=n=>{ge.xb.length==0&&(lr(),ge.Mb(ge.xb[0]));var l=ge.xb.pop();if(!l)return 6;ge.yb.push(l),ge.ub[n.wb]=l,l.wb=n.wb;var f={cmd:"run",start_routine:n.fc,arg:n.Rb,pthread_ptr:n.wb};return P&&l.unref(),l.postMessage(f,n.mc),0},bt=0,Er=n=>{var l=io();return n=n(),fn(l),n},Te=(n,l,...f)=>Er(()=>{for(var b=2*f.length,C=oo(8*b),k=C>>>3,V=0;V<f.length;V++){var F=f[V];typeof F=="bigint"?(Be[k+2*V]=1n,Be[k+2*V+1]=F):(Be[k+2*V]=0n,h()[k+2*V+1>>>0]=F)}return gi(n,0,b,C,l)});function dr(n){if(O)return Te(0,1,n);ie=n,0<bt||(ge.hc(),d.onExit?.(n),me=!0),I(n,new st(n))}var Xe=n=>{if(ie=n,O)throw jr(n),"unwind";dr(n)};function ut(){for(var n=d.numThreads;n--;)lr();mt.unshift(()=>{Vt++,Fn(()=>xr())})}function lr(){var n=L("ort-wasm-simd-threaded.worker.js");n=new Worker(n),ge.xb.push(n)}function Fn(n){O?n():Promise.all(ge.xb.map(ge.Mb)).then(n)}var ge={xb:[],yb:[],Qb:[],ub:{},Gb(){O?(ge.receiveObjectTransfer=ge.dc,ge.threadInitTLS=ge.Pb,ge.setExitStatus=ge.Ob):ut()},Ob:n=>ie=n,pc:["$terminateWorker"],hc:()=>{for(var n of ge.yb)Tr(n);for(n of ge.xb)Tr(n);ge.xb=[],ge.yb=[],ge.ub=[]},Nb:n=>{var l=n.wb;delete ge.ub[l],ge.xb.push(n),ge.yb.splice(ge.yb.indexOf(n),1),n.wb=0,ro(l)},dc(){},Pb(){ge.Qb.forEach(n=>n())},Mb:n=>new Promise(l=>{n.onmessage=k=>{k=k.data;var V=k.cmd;if(k.targetThread&&k.targetThread!=pn()){var F=ge.ub[k.targetThread];F?F.postMessage(k,k.transferList):ee(`Internal error! Worker sent a message "${V}" to target pthread ${k.targetThread}, but that thread no longer exists!`)}else V==="checkMailbox"?rt():V==="spawnThread"?ht(k):V==="cleanupThread"?ge.Nb(ge.ub[k.thread]):V==="killThread"?(k=k.thread,V=ge.ub[k],delete ge.ub[k],Tr(V),ro(k),ge.yb.splice(ge.yb.indexOf(V),1),V.wb=0):V==="cancelThread"?ge.ub[k.thread].postMessage({cmd:"cancel"}):V==="loaded"?(n.loaded=!0,P&&!n.wb&&n.unref(),l(n)):V==="alert"?alert(`Thread ${k.threadId}: ${k.text}`):k.target==="setimmediate"?n.postMessage(k):V==="callHandler"?d[k.handler](...k.args):V&&ee(`worker sent an unknown command ${V}`)},n.onerror=k=>{throw ee(`worker sent an error! ${k.filename}:${k.lineno}: ${k.message}`),k},P&&(n.on("message",k=>n.onmessage({data:k})),n.on("error",k=>n.onerror(k)));var f=[],b=["onExit"],C;for(C of b)d.hasOwnProperty(C)&&f.push(C);n.postMessage({cmd:"load",handlers:f,urlOrBlob:d.mainScriptUrlOrBlob||e,wasmMemory:ae,wasmModule:Ae})})};d.PThread=ge;var Yt=n=>{for(;0<n.length;)n.shift()(d)};d.establishStackSpace=()=>{var n=pn(),l=c()[n+52>>>2>>>0];n=c()[n+56>>>2>>>0],bi(l,l-n),fn(l)};function jr(n){if(O)return Te(1,0,n);Xe(n)}d.invokeEntryPoint=(n,l)=>{bt=0,n=wi(n,l),0<bt?ge.Ob(n):no(n)};class qn{constructor(l){this.Ib=l-24}Gb(l,f){c()[this.Ib+16>>>2>>>0]=0,c()[this.Ib+4>>>2>>>0]=l,c()[this.Ib+8>>>2>>>0]=f}}var Kr=0,jn=0;function Yr(n,l,f,b){return O?Te(2,1,n,l,f,b):Zr(n,l,f,b)}function Zr(n,l,f,b){if(n>>>=0,l>>>=0,f>>>=0,b>>>=0,typeof SharedArrayBuffer>"u")return ee("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var C=[];return O&&C.length===0?Yr(n,l,f,b):(n={fc:f,wb:n,Rb:b,mc:C},O?(n.oc="spawnThread",postMessage(n,C),0):ht(n))}var cr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Pr=(n,l,f)=>{l>>>=0;var b=l+f;for(f=l;n[f]&&!(f>=b);)++f;if(16<f-l&&n.buffer&&cr)return cr.decode(n.buffer instanceof SharedArrayBuffer?n.slice(l,f):n.subarray(l,f));for(b="";l<f;){var C=n[l++];if(C&128){var k=n[l++]&63;if((C&224)==192)b+=String.fromCharCode((C&31)<<6|k);else{var V=n[l++]&63;C=(C&240)==224?(C&15)<<12|k<<6|V:(C&7)<<18|k<<12|V<<6|n[l++]&63,65536>C?b+=String.fromCharCode(C):(C-=65536,b+=String.fromCharCode(55296|C>>10,56320|C&1023))}}else b+=String.fromCharCode(C)}return b},He=(n,l)=>(n>>>=0)?Pr(o(),n,l):"";function Xr(n,l,f){return O?Te(3,1,n,l,f):0}function Qr(n,l){if(O)return Te(4,1,n,l)}var gt=n=>{for(var l=0,f=0;f<n.length;++f){var b=n.charCodeAt(f);127>=b?l++:2047>=b?l+=2:55296<=b&&57343>=b?(l+=4,++f):l+=3}return l},dt=(n,l,f,b)=>{if(f>>>=0,!(0<b))return 0;var C=f;b=f+b-1;for(var k=0;k<n.length;++k){var V=n.charCodeAt(k);if(55296<=V&&57343>=V){var F=n.charCodeAt(++k);V=65536+((V&1023)<<10)|F&1023}if(127>=V){if(f>=b)break;l[f++>>>0]=V}else{if(2047>=V){if(f+1>=b)break;l[f++>>>0]=192|V>>6}else{if(65535>=V){if(f+2>=b)break;l[f++>>>0]=224|V>>12}else{if(f+3>=b)break;l[f++>>>0]=240|V>>18,l[f++>>>0]=128|V>>12&63}l[f++>>>0]=128|V>>6&63}l[f++>>>0]=128|V&63}}return l[f>>>0]=0,f-C},Bt=(n,l,f)=>dt(n,o(),l,f);function Zt(n,l){if(O)return Te(5,1,n,l)}function kr(n,l,f){if(O)return Te(6,1,n,l,f)}function Or(n,l,f){return O?Te(7,1,n,l,f):0}function Jr(n,l){if(O)return Te(8,1,n,l)}function pr(n,l,f){if(O)return Te(9,1,n,l,f)}function en(n,l,f,b){if(O)return Te(10,1,n,l,f,b)}function tn(n,l,f,b){if(O)return Te(11,1,n,l,f,b)}function rn(n,l,f,b){if(O)return Te(12,1,n,l,f,b)}function nn(n){if(O)return Te(13,1,n)}function Rr(n,l){if(O)return Te(14,1,n,l)}function Xt(n,l,f){if(O)return Te(15,1,n,l,f)}var on,nt=n=>{for(var l="";o()[n>>>0];)l+=on[o()[n++>>>0]];return l},mr={},Br={},Kn={},wt;function Yn(n,l,f={}){var b=l.name;if(!n)throw new wt(`type "${b}" must have a positive integer typeid pointer`);if(Br.hasOwnProperty(n)){if(f.Ub)return;throw new wt(`Cannot register type \'${b}\' twice`)}Br[n]=l,delete Kn[n],mr.hasOwnProperty(n)&&(l=mr[n],delete mr[n],l.forEach(C=>C()))}function Je(n,l,f={}){if(!("argPackAdvance"in l))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Yn(n,l,f)}var Dr=(n,l,f)=>{switch(l){case 1:return f?b=>r()[b>>>0]:b=>o()[b>>>0];case 2:return f?b=>i()[b>>>1>>>0]:b=>u()[b>>>1>>>0];case 4:return f?b=>a()[b>>>2>>>0]:b=>c()[b>>>2>>>0];case 8:return f?b=>Be[b>>>3]:b=>Ge[b>>>3];default:throw new TypeError(`invalid integer width (${l}): ${n}`)}},fr=[],lt=[];function hr(n){n>>>=0,9<n&&--lt[n+1]===0&&(lt[n]=void 0,fr.push(n))}var Qe=n=>{if(!n)throw new wt("Cannot use deleted val. handle = "+n);return lt[n]},ot=n=>{switch(n){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let l=fr.pop()||lt.length;return lt[l]=n,lt[l+1]=1,l}};function Qt(n){return this.fromWireType(c()[n>>>2>>>0])}var Zn={name:"emscripten::val",fromWireType:n=>{var l=Qe(n);return hr(n),l},toWireType:(n,l)=>ot(l),argPackAdvance:8,readValueFromPointer:Qt,Bb:null},an=(n,l)=>{switch(l){case 4:return function(f){return this.fromWireType(p()[f>>>2>>>0])};case 8:return function(f){return this.fromWireType(h()[f>>>3>>>0])};default:throw new TypeError(`invalid float width (${l}): ${n}`)}},zr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Xn=(n,l)=>{for(var f=n>>1,b=f+l/2;!(f>=b)&&u()[f>>>0];)++f;if(f<<=1,32<f-n&&zr)return zr.decode(o().slice(n,f));for(f="",b=0;!(b>=l/2);++b){var C=i()[n+2*b>>>1>>>0];if(C==0)break;f+=String.fromCharCode(C)}return f},sn=(n,l,f)=>{if(f??=2147483647,2>f)return 0;f-=2;var b=l;f=f<2*n.length?f/2:n.length;for(var C=0;C<f;++C){var k=n.charCodeAt(C);i()[l>>>1>>>0]=k,l+=2}return i()[l>>>1>>>0]=0,l-b},un=n=>2*n.length,gr=(n,l)=>{for(var f=0,b="";!(f>=l/4);){var C=a()[n+4*f>>>2>>>0];if(C==0)break;++f,65536<=C?(C-=65536,b+=String.fromCharCode(55296|C>>10,56320|C&1023)):b+=String.fromCharCode(C)}return b},Qn=(n,l,f)=>{if(l>>>=0,f??=2147483647,4>f)return 0;var b=l;f=b+f-4;for(var C=0;C<n.length;++C){var k=n.charCodeAt(C);if(55296<=k&&57343>=k){var V=n.charCodeAt(++C);k=65536+((k&1023)<<10)|V&1023}if(a()[l>>>2>>>0]=k,l+=4,l+4>f)break}return a()[l>>>2>>>0]=0,l-b},pe=n=>{for(var l=0,f=0;f<n.length;++f){var b=n.charCodeAt(f);55296<=b&&57343>=b&&++f,l+=4}return l},Mr=n=>{if(!me)try{if(n(),!(0<bt))try{O?no(ie):Xe(ie)}catch(l){l instanceof st||l=="unwind"||I(1,l)}}catch(l){l instanceof st||l=="unwind"||I(1,l)}};function Nt(n){n>>>=0,typeof Atomics.nc=="function"&&(Atomics.nc(a(),n>>>2,n).value.then(rt),n+=128,Atomics.store(a(),n>>>2,1))}d.__emscripten_thread_mailbox_await=Nt;var rt=()=>{var n=pn();n&&(Nt(n),Mr(yi))};d.checkMailbox=rt;var yr=[],br=(n,l)=>{var f=Br[n];if(f===void 0)throw n=fi(n),f=nt(n),At(n),new wt(`${l} has unknown type ${f}`);return f},Ur=(n,l,f)=>{var b=[];return n=n.toWireType(b,f),b.length&&(c()[l>>>2>>>0]=ot(b)),n},Jt=n=>{try{n()}catch(l){Kt(l)}};function dn(){var n=oe,l={};for(let[f,b]of Object.entries(n))l[f]=typeof b=="function"?(...C)=>{Dt.push(f);try{return b(...C)}finally{me||(Dt.pop(),ct&&vt===1&&Dt.length===0&&(vt=0,bt+=1,Jt($i),typeof Fibers<"u"&&Fibers.rc()))}}:b;return l}var vt=0,ct=null,ln=0,Dt=[],Vr={},s={},m=0,g=null,$=[];function T(){return new Promise((n,l)=>{g={resolve:n,reject:l}})}function B(){var n=mn(65548),l=n+12;c()[n>>>2>>>0]=l,c()[n+4>>>2>>>0]=l+65536,l=Dt[0];var f=Vr[l];return f===void 0&&(f=m++,Vr[l]=f,s[f]=l),l=f,a()[n+8>>>2>>>0]=l,n}function H(){var n=a()[ct+8>>>2>>>0];return n=oe[s[n]],--bt,n()}function q(n){if(!me){if(vt===0){var l=!1,f=!1;n((b=0)=>{if(!me&&(ln=b,l=!0,f)){vt=2,Jt(()=>_i(ct)),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.resume(),b=!1;try{var C=H()}catch(F){C=F,b=!0}var k=!1;if(!ct){var V=g;V&&(g=null,(b?V.reject:V.resolve)(C),k=!0)}if(b&&!k)throw C}}),f=!0,l||(vt=1,ct=B(),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.pause(),Jt(()=>vi(ct)))}else vt===2?(vt=0,Jt(Si),At(ct),ct=null,$.forEach(Mr)):Kt(`invalid state: ${vt}`);return ln}}function te(n){return q(l=>{n().then(l)})}var X=[],de={},Ee=n=>{var l=de[n];return l===void 0?nt(n):l},Oe=()=>typeof globalThis=="object"?globalThis:Function("return this")(),D=n=>{var l=X.length;return X.push(n),l},be=(n,l)=>{for(var f=Array(n),b=0;b<n;++b)f[b]=br(c()[l+4*b>>>2>>>0],"parameter "+b);return f},Ie=(n,l)=>Object.defineProperty(l,"name",{value:n});function zt(n){var l=Function;if(!(l instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof l} which is not a function`);var f=Ie(l.name||"unknownFunctionName",function(){});return f.prototype=l.prototype,f=new f,n=l.apply(f,n),n instanceof Object?n:f}var Mt=n=>n%4===0&&(n%100!==0||n%400===0),Qo=[0,31,60,91,121,152,182,213,244,274,305,335],Jo=[0,31,59,90,120,151,181,212,243,273,304,334];function ei(n,l,f,b,C,k,V){return O?Te(16,1,n,l,f,b,C,k,V):-52}function ti(n,l,f,b,C,k){if(O)return Te(17,1,n,l,f,b,C,k)}var Jn=[],ri=(n,l)=>{Jn.length=0;for(var f;f=o()[n++>>>0];){var b=f!=105;b&=f!=112,l+=b&&l%8?4:0,Jn.push(f==112?c()[l>>>2>>>0]:f==106?Be[l>>>3]:f==105?a()[l>>>2>>>0]:h()[l>>>3>>>0]),l+=b?8:4}return Jn},eo={},ni=()=>{if(!to){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:A||"./this.program"},l;for(l in eo)eo[l]===void 0?delete n[l]:n[l]=eo[l];var f=[];for(l in n)f.push(`${l}=${n[l]}`);to=f}return to},to;function oi(n,l){if(O)return Te(18,1,n,l);n>>>=0,l>>>=0;var f=0;return ni().forEach((b,C)=>{var k=l+f;for(C=c()[n+4*C>>>2>>>0]=k,k=0;k<b.length;++k)r()[C++>>>0]=b.charCodeAt(k);r()[C>>>0]=0,f+=b.length+1}),0}function ii(n,l){if(O)return Te(19,1,n,l);n>>>=0,l>>>=0;var f=ni();c()[n>>>2>>>0]=f.length;var b=0;return f.forEach(C=>b+=C.length+1),c()[l>>>2>>>0]=b,0}function ai(n){return O?Te(20,1,n):52}function si(n,l,f,b){return O?Te(21,1,n,l,f,b):52}function ui(n,l,f,b){return O?Te(22,1,n,l,f,b):70}var Xd=[null,[],[]];function di(n,l,f,b){if(O)return Te(23,1,n,l,f,b);l>>>=0,f>>>=0,b>>>=0;for(var C=0,k=0;k<f;k++){var V=c()[l>>>2>>>0],F=c()[l+4>>>2>>>0];l+=8;for(var re=0;re<F;re++){var J=o()[V+re>>>0],ce=Xd[n];J===0||J===10?((n===1?We:ee)(Pr(ce,0)),ce.length=0):ce.push(J)}C+=F}return c()[b>>>2>>>0]=C,0}var li=[31,29,31,30,31,30,31,31,30,31,30,31],ci=[31,28,31,30,31,30,31,31,30,31,30,31];function Qd(n){var l=Array(gt(n)+1);return dt(n,l,0,l.length),l}var Jd=(n,l)=>{r().set(n,l>>>0)};function pi(n,l,f,b){function C(z,we,Pe){for(z=typeof z=="number"?z.toString():z||"";z.length<we;)z=Pe[0]+z;return z}function k(z,we){return C(z,we,"0")}function V(z,we){function Pe(Ci){return 0>Ci?-1:0<Ci?1:0}var er;return(er=Pe(z.getFullYear()-we.getFullYear()))===0&&(er=Pe(z.getMonth()-we.getMonth()))===0&&(er=Pe(z.getDate()-we.getDate())),er}function F(z){switch(z.getDay()){case 0:return new Date(z.getFullYear()-1,11,29);case 1:return z;case 2:return new Date(z.getFullYear(),0,3);case 3:return new Date(z.getFullYear(),0,2);case 4:return new Date(z.getFullYear(),0,1);case 5:return new Date(z.getFullYear()-1,11,31);case 6:return new Date(z.getFullYear()-1,11,30)}}function re(z){var we=z.zb;for(z=new Date(new Date(z.Ab+1900,0,1).getTime());0<we;){var Pe=z.getMonth(),er=(Mt(z.getFullYear())?li:ci)[Pe];if(we>er-z.getDate())we-=er-z.getDate()+1,z.setDate(1),11>Pe?z.setMonth(Pe+1):(z.setMonth(0),z.setFullYear(z.getFullYear()+1));else{z.setDate(z.getDate()+we);break}}return Pe=new Date(z.getFullYear()+1,0,4),we=F(new Date(z.getFullYear(),0,4)),Pe=F(Pe),0>=V(we,z)?0>=V(Pe,z)?z.getFullYear()+1:z.getFullYear():z.getFullYear()-1}n>>>=0,l>>>=0,f>>>=0,b>>>=0;var J=c()[b+40>>>2>>>0];b={kc:a()[b>>>2>>>0],jc:a()[b+4>>>2>>>0],Eb:a()[b+8>>>2>>>0],Jb:a()[b+12>>>2>>>0],Fb:a()[b+16>>>2>>>0],Ab:a()[b+20>>>2>>>0],vb:a()[b+24>>>2>>>0],zb:a()[b+28>>>2>>>0],qc:a()[b+32>>>2>>>0],ic:a()[b+36>>>2>>>0],lc:J?He(J):""},f=He(f),J={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ce in J)f=f.replace(new RegExp(ce,"g"),J[ce]);var Re="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ze="January February March April May June July August September October November December".split(" ");J={"%a":z=>Re[z.vb].substring(0,3),"%A":z=>Re[z.vb],"%b":z=>ze[z.Fb].substring(0,3),"%B":z=>ze[z.Fb],"%C":z=>k((z.Ab+1900)/100|0,2),"%d":z=>k(z.Jb,2),"%e":z=>C(z.Jb,2," "),"%g":z=>re(z).toString().substring(2),"%G":re,"%H":z=>k(z.Eb,2),"%I":z=>(z=z.Eb,z==0?z=12:12<z&&(z-=12),k(z,2)),"%j":z=>{for(var we=0,Pe=0;Pe<=z.Fb-1;we+=(Mt(z.Ab+1900)?li:ci)[Pe++]);return k(z.Jb+we,3)},"%m":z=>k(z.Fb+1,2),"%M":z=>k(z.jc,2),"%n":()=>`\n`,"%p":z=>0<=z.Eb&&12>z.Eb?"AM":"PM","%S":z=>k(z.kc,2),"%t":()=>"	","%u":z=>z.vb||7,"%U":z=>k(Math.floor((z.zb+7-z.vb)/7),2),"%V":z=>{var we=Math.floor((z.zb+7-(z.vb+6)%7)/7);if(2>=(z.vb+371-z.zb-2)%7&&we++,we)we==53&&(Pe=(z.vb+371-z.zb)%7,Pe==4||Pe==3&&Mt(z.Ab)||(we=1));else{we=52;var Pe=(z.vb+7-z.zb-1)%7;(Pe==4||Pe==5&&Mt(z.Ab%400-1))&&we++}return k(we,2)},"%w":z=>z.vb,"%W":z=>k(Math.floor((z.zb+7-(z.vb+6)%7)/7),2),"%y":z=>(z.Ab+1900).toString().substring(2),"%Y":z=>z.Ab+1900,"%z":z=>{z=z.ic;var we=0<=z;return z=Math.abs(z)/60,(we?"+":"-")+("0000"+(z/60*100+z%60)).slice(-4)},"%Z":z=>z.lc,"%%":()=>"%"},f=f.replace(/%%/g,"\\0\\0");for(ce in J)f.includes(ce)&&(f=f.replace(new RegExp(ce,"g"),J[ce](b)));return f=f.replace(/\\0\\0/g,"%"),ce=Qd(f),ce.length>l?0:(Jd(ce,n),ce.length-1)}ge.Gb();for(var mi=Array(256),cn=0;256>cn;++cn)mi[cn]=String.fromCharCode(cn);on=mi,wt=d.BindingError=class extends Error{constructor(n){super(n),this.name="BindingError"}},d.InternalError=class extends Error{constructor(n){super(n),this.name="InternalError"}},lt.push(0,1,void 0,1,null,1,!0,1,!1,1),d.count_emval_handles=()=>lt.length/2-5-fr.length;var el=[dr,jr,Yr,Xr,Qr,Zt,kr,Or,Jr,pr,en,tn,rn,nn,Rr,Xt,ei,ti,oi,ii,ai,si,ui,di],tl={ua:function(n,l,f){return te(async()=>{await d.Zb(n,l,f)})},b:function(n,l,f){throw n>>>=0,new qn(n).Gb(l>>>0,f>>>0),Kr=n,jn++,Kr},ia:function(n){hi(n>>>0,!E,1,!x,131072,!1),ge.Pb()},G:function(n){n>>>=0,O?postMessage({cmd:"cleanupThread",thread:n}):ge.Nb(ge.ub[n])},_:Zr,A:Xr,pa:Qr,W:Zt,Y:kr,qa:Or,na:Jr,fa:pr,ma:en,K:tn,X:rn,U:nn,oa:Rr,V:Xt,E:function(n,l,f){n>>>=0,f>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:b=>b,toWireType:function(b,C){if(typeof C!="bigint"&&typeof C!="number")throw C===null?C="null":(b=typeof C,C=b==="object"||b==="array"||b==="function"?C.toString():""+C),new TypeError(`Cannot convert "${C}" to ${this.name}`);return typeof C=="number"&&(C=BigInt(C)),C},argPackAdvance:8,readValueFromPointer:Dr(l,f,l.indexOf("u")==-1),Bb:null})},O:function(n,l,f,b){n>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:function(C){return!!C},toWireType:function(C,k){return k?f:b},argPackAdvance:8,readValueFromPointer:function(C){return this.fromWireType(o()[C>>>0])},Bb:null})},N:function(n){return Je(n>>>0,Zn)},D:function(n,l,f){n>>>=0,f>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:b=>b,toWireType:(b,C)=>C,argPackAdvance:8,readValueFromPointer:an(l,f),Bb:null})},t:function(n,l,f,b,C){if(n>>>=0,f>>>=0,l=nt(l>>>0),C===-1&&(C=4294967295),C=F=>F,b===0){var k=32-8*f;C=F=>F<<k>>>k}var V=l.includes("unsigned")?function(F,re){return re>>>0}:function(F,re){return re};Je(n,{name:l,fromWireType:C,toWireType:V,argPackAdvance:8,readValueFromPointer:Dr(l,f,b!==0),Bb:null})},p:function(n,l,f){function b(k){var V=c()[k>>>2>>>0];return k=c()[k+4>>>2>>>0],new C(r().buffer,k,V)}n>>>=0;var C=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][l];f=nt(f>>>0),Je(n,{name:f,fromWireType:b,argPackAdvance:8,readValueFromPointer:b},{Ub:!0})},F:function(n,l){n>>>=0,l=nt(l>>>0);var f=l==="std::string";Je(n,{name:l,fromWireType:function(b){var C=c()[b>>>2>>>0],k=b+4;if(f)for(var V=k,F=0;F<=C;++F){var re=k+F;if(F==C||o()[re>>>0]==0){if(V=He(V,re-V),J===void 0)var J=V;else J+=String.fromCharCode(0),J+=V;V=re+1}}else{for(J=Array(C),F=0;F<C;++F)J[F]=String.fromCharCode(o()[k+F>>>0]);J=J.join("")}return At(b),J},toWireType:function(b,C){C instanceof ArrayBuffer&&(C=new Uint8Array(C));var k=typeof C=="string";if(!(k||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Int8Array))throw new wt("Cannot pass non-string to std::string");var V=f&&k?gt(C):C.length,F=mn(4+V+1),re=F+4;if(c()[F>>>2>>>0]=V,f&&k)Bt(C,re,V+1);else if(k)for(k=0;k<V;++k){var J=C.charCodeAt(k);if(255<J)throw At(re),new wt("String has UTF-16 code units that do not fit in 8 bits");o()[re+k>>>0]=J}else for(k=0;k<V;++k)o()[re+k>>>0]=C[k];return b!==null&&b.push(At,F),F},argPackAdvance:8,readValueFromPointer:Qt,Bb(b){At(b)}})},z:function(n,l,f){if(n>>>=0,l>>>=0,f>>>=0,f=nt(f),l===2)var b=Xn,C=sn,k=un,V=F=>u()[F>>>1>>>0];else l===4&&(b=gr,C=Qn,k=pe,V=F=>c()[F>>>2>>>0]);Je(n,{name:f,fromWireType:F=>{for(var re=c()[F>>>2>>>0],J,ce=F+4,Re=0;Re<=re;++Re){var ze=F+4+Re*l;(Re==re||V(ze)==0)&&(ce=b(ce,ze-ce),J===void 0?J=ce:(J+=String.fromCharCode(0),J+=ce),ce=ze+l)}return At(F),J},toWireType:(F,re)=>{if(typeof re!="string")throw new wt(`Cannot pass non-string to C++ string type ${f}`);var J=k(re),ce=mn(4+J+l);return c()[ce>>>2>>>0]=J/l,C(re,ce+4,J+l),F!==null&&F.push(At,ce),ce},argPackAdvance:8,readValueFromPointer:Qt,Bb(F){At(F)}})},P:function(n,l){n>>>=0,l=nt(l>>>0),Je(n,{Vb:!0,name:l,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ta:()=>1,S:function(n,l){n>>>=0,n==l>>>0?setTimeout(rt):O?postMessage({targetThread:n,cmd:"checkMailbox"}):(n=ge.ub[n])&&n.postMessage({cmd:"checkMailbox"})},$:function(n,l,f,b,C){l>>>=0,f>>>=0,b/=2,yr.length=b,C=C>>>0>>>3;for(var k=0;k<b;k++)yr[k]=Be[C+2*k]?Be[C+2*k+1]:h()[C+2*k+1>>>0];return n=l?Ir[l]:el[n],ge.Sb=f,f=n(...yr),ge.Sb=0,f},ha:Nt,sa:function(n){P&&ge.ub[n>>>0].ref()},w:function(n,l,f){return l>>>=0,f>>>=0,n=Qe(n>>>0),l=br(l,"emval::as"),Ur(l,f,n)},y:function(n){return n>>>=0,te(()=>(n=Qe(n),n.then(ot)))},o:function(n,l,f,b){return f>>>=0,b>>>=0,n=X[n>>>0],l=Qe(l>>>0),n(null,l,f,b)},k:function(n,l,f,b,C){return f>>>=0,b>>>=0,C>>>=0,n=X[n>>>0],l=Qe(l>>>0),f=Ee(f),n(l,l[f],b,C)},c:hr,C:function(n,l){return l>>>=0,n=Qe(n>>>0),l=Qe(l),n==l},n:function(n){return n>>>=0,n===0?ot(Oe()):(n=Ee(n),ot(Oe()[n]))},j:function(n,l,f){l=be(n,l>>>0);var b=l.shift();n--;var C=`return function (obj, func, destructorsRef, args) {\n`,k=0,V=[];f===0&&V.push("obj");for(var F=["retType"],re=[b],J=0;J<n;++J)V.push("arg"+J),F.push("argType"+J),re.push(l[J]),C+=`  var arg${J} = argType${J}.readValueFromPointer(args${k?"+"+k:""});\n`,k+=l[J].argPackAdvance;return C+=`  var rv = ${f===1?"new func":"func.call"}(${V.join(", ")});\n`,b.Vb||(F.push("emval_returnValue"),re.push(Ur),C+=`  return emval_returnValue(retType, destructorsRef, rv);\n`),F.push(C+`};\n`),n=zt(F)(...re),f=`methodCaller<(${l.map(ce=>ce.name).join(", ")}) => ${b.name}>`,D(Ie(f,n))},s:function(n,l){return l>>>=0,n=Qe(n>>>0),l=Qe(l),ot(n[l])},d:function(n){n>>>=0,9<n&&(lt[n+1]+=1)},v:function(){return ot([])},m:function(n){n=Qe(n>>>0);for(var l=Array(n.length),f=0;f<n.length;f++)l[f]=n[f];return ot(l)},g:function(n){return ot(Ee(n>>>0))},l:function(){return ot({})},i:function(n){n>>>=0;for(var l=Qe(n);l.length;){var f=l.pop();l.pop()(f)}hr(n)},h:function(n,l,f){l>>>=0,f>>>=0,n=Qe(n>>>0),l=Qe(l),f=Qe(f),n[l]=f},e:function(n,l){return l>>>=0,n=br(n>>>0,"_emval_take_value"),n=n.readValueFromPointer(l),ot(n)},ca:function(n,l){n=-9007199254740992>n||9007199254740992<n?NaN:Number(n),l>>>=0,n=new Date(1e3*n),a()[l>>>2>>>0]=n.getUTCSeconds(),a()[l+4>>>2>>>0]=n.getUTCMinutes(),a()[l+8>>>2>>>0]=n.getUTCHours(),a()[l+12>>>2>>>0]=n.getUTCDate(),a()[l+16>>>2>>>0]=n.getUTCMonth(),a()[l+20>>>2>>>0]=n.getUTCFullYear()-1900,a()[l+24>>>2>>>0]=n.getUTCDay(),n=(n.getTime()-Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[l+28>>>2>>>0]=n},da:function(n,l){n=-9007199254740992>n||9007199254740992<n?NaN:Number(n),l>>>=0,n=new Date(1e3*n),a()[l>>>2>>>0]=n.getSeconds(),a()[l+4>>>2>>>0]=n.getMinutes(),a()[l+8>>>2>>>0]=n.getHours(),a()[l+12>>>2>>>0]=n.getDate(),a()[l+16>>>2>>>0]=n.getMonth(),a()[l+20>>>2>>>0]=n.getFullYear()-1900,a()[l+24>>>2>>>0]=n.getDay();var f=(Mt(n.getFullYear())?Qo:Jo)[n.getMonth()]+n.getDate()-1|0;a()[l+28>>>2>>>0]=f,a()[l+36>>>2>>>0]=-(60*n.getTimezoneOffset()),f=new Date(n.getFullYear(),6,1).getTimezoneOffset();var b=new Date(n.getFullYear(),0,1).getTimezoneOffset();n=(f!=b&&n.getTimezoneOffset()==Math.min(b,f))|0,a()[l+32>>>2>>>0]=n},ea:function(n){n>>>=0;var l=new Date(a()[n+20>>>2>>>0]+1900,a()[n+16>>>2>>>0],a()[n+12>>>2>>>0],a()[n+8>>>2>>>0],a()[n+4>>>2>>>0],a()[n>>>2>>>0],0),f=a()[n+32>>>2>>>0],b=l.getTimezoneOffset(),C=new Date(l.getFullYear(),6,1).getTimezoneOffset(),k=new Date(l.getFullYear(),0,1).getTimezoneOffset(),V=Math.min(k,C);return 0>f?a()[n+32>>>2>>>0]=+(C!=k&&V==b):0<f!=(V==b)&&(C=Math.max(k,C),l.setTime(l.getTime()+6e4*((0<f?V:C)-b))),a()[n+24>>>2>>>0]=l.getDay(),f=(Mt(l.getFullYear())?Qo:Jo)[l.getMonth()]+l.getDate()-1|0,a()[n+28>>>2>>>0]=f,a()[n>>>2>>>0]=l.getSeconds(),a()[n+4>>>2>>>0]=l.getMinutes(),a()[n+8>>>2>>>0]=l.getHours(),a()[n+12>>>2>>>0]=l.getDate(),a()[n+16>>>2>>>0]=l.getMonth(),a()[n+20>>>2>>>0]=l.getYear(),n=l.getTime(),BigInt(isNaN(n)?-1:n/1e3)},aa:ei,ba:ti,R:function(n,l,f,b){n>>>=0,l>>>=0,f>>>=0,b>>>=0;var C=new Date().getFullYear(),k=new Date(C,0,1),V=new Date(C,6,1);C=k.getTimezoneOffset();var F=V.getTimezoneOffset(),re=Math.max(C,F);c()[n>>>2>>>0]=60*re,a()[l>>>2>>>0]=+(C!=F),n=J=>J.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],k=n(k),V=n(V),F<C?(Bt(k,f,17),Bt(V,b,17)):(Bt(k,b,17),Bt(V,f,17))},q:()=>{Kt("")},f:function(n,l,f){return n>>>=0,l=ri(l>>>0,f>>>0),Ir[n](...l)},M:function(n,l,f){return n>>>=0,l=ri(l>>>0,f>>>0),Ir[n](...l)},H:()=>{},L:()=>Date.now(),ra:()=>{throw bt+=1,"unwind"},T:function(){return 4294901760},u:()=>performance.timeOrigin+performance.now(),x:()=>P?(Ri(),wr(Oi)).cpus().length:navigator.hardwareConcurrency,Q:function(n){n>>>=0;var l=o().length;if(n<=l||4294901760<n)return!1;for(var f=1;4>=f;f*=2){var b=l*(1+.2/f);b=Math.min(b,n+100663296);var C=Math;b=Math.max(n,b);e:{C=(C.min.call(C,4294901760,b+(65536-b%65536)%65536)-ae.buffer.byteLength+65535)/65536;try{ae.grow(C),Ne();var k=1;break e}catch{}k=void 0}if(k)return!0}return!1},ja:oi,la:ii,Z:Xe,B:ai,J:si,ga:ui,I:di,a:ae||d.wasmMemory,ka:pi,r:function(n,l,f,b){return pi(n>>>0,l>>>0,f>>>0,b>>>0)}},oe=function(){function n(f,b){return oe=f.exports,oe=dn(),oe=rl(),ge.Qb.push(oe.cb),Rt.unshift(oe.va),Ae=b,xr(),oe}var l={a:tl};if(Vt++,d.instantiateWasm)try{return d.instantiateWasm(l,n)}catch(f){ee(`Module.instantiateWasm callback failed with error: ${f}`),w(f)}return Ar(l,function(f){n(f.instance,f.module)}).catch(w),{}}(),fi=n=>(fi=oe.wa)(n);d.__embind_initialize_bindings=()=>(d.__embind_initialize_bindings=oe.xa)(),d._OrtInit=(n,l)=>(d._OrtInit=oe.ya)(n,l),d._OrtGetLastError=(n,l)=>(d._OrtGetLastError=oe.za)(n,l),d._OrtCreateSessionOptions=(n,l,f,b,C,k,V,F,re,J)=>(d._OrtCreateSessionOptions=oe.Aa)(n,l,f,b,C,k,V,F,re,J),d._OrtAppendExecutionProvider=(n,l)=>(d._OrtAppendExecutionProvider=oe.Ba)(n,l),d._OrtAddFreeDimensionOverride=(n,l,f)=>(d._OrtAddFreeDimensionOverride=oe.Ca)(n,l,f),d._OrtAddSessionConfigEntry=(n,l,f)=>(d._OrtAddSessionConfigEntry=oe.Da)(n,l,f),d._OrtReleaseSessionOptions=n=>(d._OrtReleaseSessionOptions=oe.Ea)(n),d._OrtCreateSession=(n,l,f)=>(d._OrtCreateSession=oe.Fa)(n,l,f),d._OrtReleaseSession=n=>(d._OrtReleaseSession=oe.Ga)(n),d._OrtGetInputOutputCount=(n,l,f)=>(d._OrtGetInputOutputCount=oe.Ha)(n,l,f),d._OrtGetInputName=(n,l)=>(d._OrtGetInputName=oe.Ia)(n,l),d._OrtGetOutputName=(n,l)=>(d._OrtGetOutputName=oe.Ja)(n,l),d._OrtFree=n=>(d._OrtFree=oe.Ka)(n),d._OrtCreateTensor=(n,l,f,b,C,k)=>(d._OrtCreateTensor=oe.La)(n,l,f,b,C,k),d._OrtGetTensorData=(n,l,f,b,C)=>(d._OrtGetTensorData=oe.Ma)(n,l,f,b,C),d._OrtReleaseTensor=n=>(d._OrtReleaseTensor=oe.Na)(n),d._OrtCreateRunOptions=(n,l,f,b)=>(d._OrtCreateRunOptions=oe.Oa)(n,l,f,b),d._OrtAddRunConfigEntry=(n,l,f)=>(d._OrtAddRunConfigEntry=oe.Pa)(n,l,f),d._OrtReleaseRunOptions=n=>(d._OrtReleaseRunOptions=oe.Qa)(n),d._OrtCreateBinding=n=>(d._OrtCreateBinding=oe.Ra)(n),d._OrtBindInput=(n,l,f)=>(d._OrtBindInput=oe.Sa)(n,l,f),d._OrtBindOutput=(n,l,f,b)=>(d._OrtBindOutput=oe.Ta)(n,l,f,b),d._OrtClearBoundOutputs=n=>(d._OrtClearBoundOutputs=oe.Ua)(n),d._OrtReleaseBinding=n=>(d._OrtReleaseBinding=oe.Va)(n),d._OrtRunWithBinding=(n,l,f,b,C)=>(d._OrtRunWithBinding=oe.Wa)(n,l,f,b,C),d._OrtRun=(n,l,f,b,C,k,V,F)=>(d._OrtRun=oe.Xa)(n,l,f,b,C,k,V,F),d._OrtEndProfiling=n=>(d._OrtEndProfiling=oe.Ya)(n),d._JsepOutput=(n,l,f)=>(d._JsepOutput=oe.Za)(n,l,f),d._JsepGetNodeName=n=>(d._JsepGetNodeName=oe._a)(n);var pn=d._pthread_self=()=>(pn=d._pthread_self=oe.$a)(),mn=d._malloc=n=>(mn=d._malloc=oe.ab)(n),At=d._free=n=>(At=d._free=oe.bb)(n);d.__emscripten_tls_init=()=>(d.__emscripten_tls_init=oe.cb)();var hi=d.__emscripten_thread_init=(n,l,f,b,C,k)=>(hi=d.__emscripten_thread_init=oe.eb)(n,l,f,b,C,k);d.__emscripten_thread_crashed=()=>(d.__emscripten_thread_crashed=oe.fb)();var gi=(n,l,f,b,C)=>(gi=oe.gb)(n,l,f,b,C),ro=n=>(ro=oe.hb)(n),no=d.__emscripten_thread_exit=n=>(no=d.__emscripten_thread_exit=oe.ib)(n),yi=()=>(yi=oe.jb)(),bi=(n,l)=>(bi=oe.kb)(n,l),fn=n=>(fn=oe.lb)(n),oo=n=>(oo=oe.mb)(n),io=()=>(io=oe.nb)(),wi=d.dynCall_ii=(n,l)=>(wi=d.dynCall_ii=oe.pb)(n,l),vi=n=>(vi=oe.qb)(n),$i=()=>($i=oe.rb)(),_i=n=>(_i=oe.sb)(n),Si=()=>(Si=oe.tb)();d.___start_em_js=839500,d.___stop_em_js=839661;function rl(){var n=oe;n=Object.assign({},n);var l=b=>C=>b(C)>>>0,f=b=>()=>b()>>>0;return n.wa=l(n.wa),n.$a=f(n.$a),n.ab=l(n.ab),n.emscripten_main_runtime_thread_id=f(n.emscripten_main_runtime_thread_id),n.mb=l(n.mb),n.nb=f(n.nb),n}d.wasmMemory=ae,d.stackSave=()=>io(),d.stackRestore=n=>fn(n),d.stackAlloc=n=>oo(n),d.keepRuntimeAlive=()=>0<bt,d.UTF8ToString=He,d.stringToUTF8=Bt,d.lengthBytesUTF8=gt,d.ExitStatus=st,d.PThread=ge;var hn;jt=function n(){hn||xi(),hn||(jt=n)};function xi(){if(!(0<Vt))if(O)y(d),O||Yt(Rt),startWorker(d);else{if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)mt.unshift(d.preRun.shift());Yt(mt),0<Vt||hn||(hn=!0,d.calledRun=!0,me||(O||Yt(Rt),y(d),O||Yt(qt)))}}return xi(),_}})();typeof Di=="object"&&typeof mo=="object"?mo.exports=Bi:typeof define=="function"&&define.amd&&define([],()=>Bi)});var Mi=Wr((gm,cl)=>{cl.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var go,Gt,tr,bn,Gr,Hi,yo,ye=Y(()=>{"use strict";go=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},Gt=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},tr=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],bn=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},Gr=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},Hi=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool",yo=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e}`)}}});var wn=Y(()=>{"use strict"});var Fi=Y(()=>{"use strict";wn()});var qi,ji=Y(()=>{"use strict";qi="1.18.0"});var Ki,pt,bo=Y(()=>{"use strict";ji();Ki="warning",pt={wasm:{},webgl:{},webgpu:{},versions:{common:qi},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);Ki=e}},get logLevel(){return Ki}};Object.defineProperty(pt,"logLevel",{enumerable:!0})});var vr,Yi=Y(()=>{"use strict";bo();vr=pt});var Zi=Y(()=>{"use strict"});var Xi=Y(()=>{"use strict";vn()});var Ji=Y(()=>{"use strict"});var ea=Y(()=>{"use strict";vn()});var vn=Y(()=>{"use strict";Zi();Xi();Ji();ea()});var $n=Y(()=>{"use strict";vn()});var wo,ta,rr,Ht,vo=Y(()=>{"use strict";bo();wo=(e,t)=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||console.timeStamp(`${e}::ORT::${t}`)},ta=(e,t)=>{let r=new Error().stack?.split(/\\r\\n|\\r|\\n/g)||[],o=!1;for(let i=0;i<r.length;i++){if(o&&!r[i].includes("TRACE_FUNC")){let u=`FUNC_${e}::${r[i].trim().split(" ")[1]}`;t&&(u+=`::${t}`),wo("CPU",u);return}r[i].includes("TRACE_FUNC")&&(o=!0)}},rr=e=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||ta("BEGIN",e)},Ht=e=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||ta("END",e)}});var ra=Y(()=>{"use strict";wn();$n();vo()});var na=Y(()=>{"use strict";ra()});var oa=Y(()=>{"use strict"});var ia=Y(()=>{"use strict"});var aa=Y(()=>{"use strict"});var sa=Y(()=>{"use strict"});var ua=Y(()=>{"use strict";wn();$n()});var da=Y(()=>{"use strict";ua()});var $r=Y(()=>{"use strict";Fi();Yi();na();$n();oa();ia();vo();aa();sa();da()});var _l,Sl,la,ca,pa,xl,Ve,Lt=Y(()=>{"use strict";ye();_l=["V","I","W","E","F"],Sl=(e,t)=>{console.log(`[${_l[e]},${new Date().toISOString()}]${t}`)},pa=(e,t)=>{la=e,ca=t},xl=(e,t)=>{let r=Gr(e),o=Gr(la);r>=o&&Sl(r,typeof t=="function"?t():t)},Ve=(...e)=>{ca&&xl(...e)}});var ma,fa=Y(()=>{"use strict";ye();ma=(e,t)=>new(bn(t))(e)});var _n=Y(()=>{"use strict"});var ha,$o,_o,Cl,Al,ga,xo,So,ba,wa=Y(()=>{"use strict";Lt();_n();ha=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),$o=[],_o=e=>Math.ceil(e/16)*16,Cl=e=>{for(let t=0;t<$o.length;t++){let r=$o[t];if(e<=r)return r}return Math.ceil(e/16)*16},Al=1,ga=()=>Al++,xo=async(e,t,r,o)=>{let i=_o(r),u=e.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let a=e.getCommandEncoder();e.endComputePass(),a.copyBufferToBuffer(t,0,u,0,i),e.flush(),await u.mapAsync(GPUMapMode.READ);let c=u.getMappedRange();if(o){let p=o();return p.set(new Uint8Array(c,0,r)),p}else return new Uint8Array(c.slice(0,r))}finally{u.destroy()}},So=class{constructor(t){this.backend=t;this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[],this.externalBuffers=new Map,this.capturedPendingBuffers=new Map;for(let[r]of ha)$o.push(r),this.freeBuffers.set(r,[]),this.freeUniformBuffers.set(r,[])}upload(t,r){let o=r.buffer,i=r.byteOffset,u=r.byteLength,a=_o(u),c=this.storageCache.get(t);if(!c)throw new Error("gpu data for uploading does not exist");if(c.originalSize!==u)throw new Error(`inconsistent data size. gpu data size=${c.originalSize}, data size=${u}`);let p=this.backend.device.createBuffer({mappedAtCreation:!0,size:a,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),h=p.getMappedRange();new Uint8Array(h).set(new Uint8Array(o,i,u)),p.unmap();let d=this.backend.getCommandEncoder();this.backend.endComputePass(),d.copyBufferToBuffer(p,0,c.gpuData.buffer,0,a),Ve("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${t})`),this.buffersForUploadingPending.push(p)}memcpy(t,r){let o=this.storageCache.get(t);if(!o)throw new Error("source gpu data for memcpy does not exist");let i=this.storageCache.get(r);if(!i)throw new Error("destination gpu data for memcpy does not exist");if(o.originalSize!==i.originalSize)throw new Error("inconsistent source and destination gpu data size");let u=_o(o.originalSize),a=this.backend.getCommandEncoder();this.backend.endComputePass(),a.copyBufferToBuffer(o.gpuData.buffer,0,i.gpuData.buffer,0,u)}registerExternalBuffer(t,r,o){let i;if(o){if(i=this.externalBuffers.get(o),i===void 0)throw new Error("previous buffer is not registered");if(t===o)return Ve("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${r}) => id=${i}, buffer is the same, skip.`),i;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.\n             Please use the previous external buffer!`);this.externalBuffers.delete(o)}else i=ga();return this.storageCache.set(i,{gpuData:{id:i,type:0,buffer:t},originalSize:r}),this.externalBuffers.set(t,i),Ve("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${r}) => id=${i}, registered.`),i}unregisterExternalBuffer(t){let r=this.externalBuffers.get(t);r!==void 0&&(this.storageCache.delete(r),this.externalBuffers.delete(t),Ve("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${r}`))}create(t,r=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let o=Cl(t),i,u=(r&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,a=(r&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(u||a){let h=(u?this.freeBuffers:this.freeUniformBuffers).get(o);h?h.length>0?i=h.pop():i=this.backend.device.createBuffer({size:o,usage:r}):i=this.backend.device.createBuffer({size:o,usage:r})}else i=this.backend.device.createBuffer({size:o,usage:r});let c={id:ga(),type:0,buffer:i};return this.storageCache.set(c.id,{gpuData:c,originalSize:t}),Ve("verbose",()=>`[WebGPU] GpuDataManager.create(size=${t}) => id=${c.id}`),c}get(t){return this.storageCache.get(t)?.gpuData}release(t){let r=this.storageCache.get(t);if(!r)throw new Error("releasing data does not exist");return Ve("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${r.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(r.gpuData.buffer),r.originalSize}async download(t,r){let o=this.storageCache.get(t);if(!o)throw new Error("data does not exist");await xo(this.backend,o.gpuData.buffer,o.originalSize,r)}refreshPendingBuffers(){for(let t of this.buffersForUploadingPending)t.destroy();if(this.buffersForUploadingPending=[],this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let t of this.buffersPending){let r=ha.get(t.size);if((t.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let o=this.freeBuffers.get(t.size)||[];r===void 0||o.length>=r?t.destroy():o.push(t)}else if((t.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let o=this.freeUniformBuffers.get(t.size)||[];r===void 0||o.length>=r?t.destroy():o.push(t)}else t.destroy()}this.buffersPending=[]}else{let t=this.capturedPendingBuffers.get(this.backend.currentSessionId);t||(t=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,t));for(let r of this.buffersPending)t.push(r);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.freeUniformBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.storageCache.forEach(t=>{t.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onReleaseSession(t){let r=this.capturedPendingBuffers.get(t);r&&(r.forEach(o=>{o.destroy()}),this.capturedPendingBuffers.delete(t))}},ba=(...e)=>new So(...e)});var Co,ve,Ze=Y(()=>{"use strict";Co=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},ve=e=>new Co(e)});var Ao,It,M,nr,Sn,xn,Cn,Se=Y(()=>{"use strict";Ao=class{static calcMatMulShape(t,r){return t[1]!==r[0]?void 0:[t[0],r[1]]}},It=class{static calcShape(t,r,o=!1){let i=t.length,u=r.length;if(i===0)return r;if(u===0)return t;let a=Math.max(t.length,r.length),c=new Array(a);if(o){if(i<2||u<2)return;let p=Ao.calcMatMulShape([t[i-2],t[i-1]],[r[u-2],r[u-1]]);if(p===void 0)return;[c[a-2],c[a-1]]=p}for(let p=o?3:1;p<=a;p++){let h=i-p<0?1:t[i-p],d=u-p<0?1:r[u-p];if(h!==d&&h>1&&d>1)return;let y=Math.max(h,d);if(h&&d)c[a-p]=Math.max(h,d);else{if(y>1)return;c[a-p]=0}}return c}static isValidBroadcast(t,r){let o=t.length,i=r.length;if(o>i)return!1;for(let u=1;u<=o;u++)if(t[o-u]!==1&&t[o-u]!==r[i-u])return!1;return!0}},M=class e{static size(t){return e.getSizeFromDimensionRange(t,0,t.length)}static convertShape(t,r=4){let o=t.length;if(o===0)return[];let i=new Array(o),u=o-1;for(;u>=0;){if(t[u]%r===0){i[u]=t[u]/r;break}if(r%t[u]!==0)throw new Error("cannot convert shape");i[u]=1,r/=t[u],u--}for(u--;u>=0;u--)i[u]=t[u];return i}static sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,r,t.length)}static sizeToDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,0,r)}static getSizeFromDimensionRange(t,r,o){let i=1;for(let u=r;u<o;u++){if(t[u]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");i*=t[u]}return i}static computeStrides(t){let r=t.length;if(r===0)return[];if(r===1)return[1];let o=new Array(r);o[r-1]=1,o[r-2]=t[r-1];for(let i=r-3;i>=0;--i)o[i]=o[i+1]*t[i+1];return o}static normalizeAxis(t,r){if(t<-r&&t>=r)throw new Error("unsupported axis for this operation.");return t<0?t+r:t}static normalizeAxes(t,r){return t.map(o=>this.normalizeAxis(o,r??t.length))}static sortBasedOnPerm(t,r){return r?r.map(o=>t[o]):t.slice().reverse()}static padShape(t,r){let o=t.length;return t.map((i,u)=>i+r[u]+r[u+o])}static areEqual(t,r){return t.length!==r.length?!1:t.every((o,i)=>o===r[i])}},nr=class e{static adjustPoolAttributes(t,r,o,i,u,a){if(!t&&o.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let c=0;c<r.length-2;c++)c>=o.length?o.push(r[c+2]):o[c]=r[c+2];for(let c=0;c<o.length;c++)if(c<i.length){if(i[c]<0)throw new Error("strides should be greater than or equal to 1")}else i.push(1);for(let c=0;c<o.length;c++)if(c<u.length){if(u[c]<0)throw new Error("dilations should be greater than or equal to 1")}else u.push(1);for(let c=0;c<o.length*2;c++)if(c<a.length){if(a[c]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(let c=0;c<o.length;c++){if(o[c]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[c]>=o[c]||a[c+o.length]>=o[c])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,r,o,i,u,a,c){if(c){if(u.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let p=0;p<t.length-2;p++)e.adjustPadAndReturnShape(t[p+(a?1:2)],r[p],o[p],i[p],u,p,p+t.length-2,c)}}static computePoolOutputShape(t,r,o,i,u,a,c){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let p=[r[0],r[1]];return e.computeShapeHelper(t,r,p,o,i,u,a,c),p}static computeConvOutputShape(t,r,o,i,u,a,c){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let p=[t[0],r[0]];return e.computeShapeHelper(!1,t,p,o,i,u,a,c),p}static computeShapeHelper(t,r,o,i,u,a,c,p){if(t)for(let h=0;h<r.length-2;h++)o.push(1);else for(let h=0;h<r.length-2;h++)o.push(e.adjustPadAndReturnShape(r[h+2],i[h],u[h],a[h],c,h,h+r.length-2,p))}static adjustPadAndReturnShape(t,r,o,i,u,a,c,p){let h=o*(i-1)+1;if(p&&p!=="NOTSET")switch(p){case"VALID":return u[a]=0,u[c]=0,Math.floor((t-h)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(o!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let y=((t+r-1)/r-1)*r+i-t;return u[a]=Math.floor(p==="SAME_LOWER"?(y+1)/2:y/2),u[c]=y-u[a],Math.floor((t+y-i)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+u[a]+u[c]-h)/r+1)}},Sn=class{static getShapeOfGemmResult(t,r,o,i,u){if(t.length!==2||o.length!==2)throw new Error("shape need to be of size 2");let a,c,p;r?(a=t[1],c=t[0]):(a=t[0],c=t[1]);let h=-1;if(i?(p=o[0],h=1):(p=o[1],h=0),o[h]!==c)throw new Error("dimension mismatch");if(a<=0||p<=0||c<=0)throw new Error("invalid shape specified");if(u&&!It.isValidBroadcast(u,[a,p]))throw new Error("gemm: invalid bias shape for broadcast");return[a,p,c]}},xn=-34028234663852886e22,Cn=34028234663852886e22});var or,To,De,et,Z,Me,$t,ir,_t,fe,Eo,U,j,An,Io,va,_r,_e=Y(()=>{"use strict";ye();Se();or=64,To=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(e){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error(`Unknown data type: ${e}`)}},De=(e,t=1)=>{let r=To(e,t);return typeof r=="string"?r:r[0]},et=(e,t=1)=>{let r=To(e,t);return typeof r=="string"?r:r[1]},Z=(...e)=>{let t=[];return e.forEach(r=>{r.length!==0&&t.push({type:12,data:r},{type:12,data:M.computeStrides(r)})}),t},Me=e=>e%4===0?4:e%2===0?2:1,$t=(e="f32",t,r="0")=>!t||t===1?`${e}(${r})`:`vec${t}<${e}>(${r})`,ir=(e,t,r)=>e==="f32"?r:t===1?`f32(${r})`:`vec${t}<f32>(${r})`,_t=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,fe=(e,t,r,o)=>e.startsWith("uniforms.")&&r>4?typeof t=="string"?o==="f16"?`${e}[(${t}) / 8][(${t}) % 8 / 4][(${t}) % 8 % 4]`:`${e}[(${t}) / 4][(${t}) % 4]`:o==="f16"?`${e}[${Math.floor(t/8)}][${Math.floor(t%8/4)}][${t%8%4}]`:`${e}[${Math.floor(t/4)}][${t%4}]`:r>1?`${e}[${t}]`:e,Eo=(e,t,r,o,i)=>{let u=typeof r=="number",a=u?r:r.length,c=[...new Array(a).keys()],p=a<2?"u32":a<=4?`vec${a}<u32>`:`array<u32, ${a}>`,h=To(t,i),d=typeof h=="string"?h:h[1],y=typeof h=="string"?h:h[0],w={indices:p,value:d,storage:y,tensor:t},_=G=>typeof G=="string"?G:`${G}u`,v={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},S=u?"uniforms.":"",A=`${S}${e}_shape`,I=`${S}${e}_strides`,x="";for(let G=0;G<a-1;G++)x+=`\n    let dim${G} = current / ${fe(I,G,a)};\n    let rest${G} = current % ${fe(I,G,a)};\n    indices[${G}] = dim${G};\n    current = rest${G};\n    `;x+=`indices[${a-1}] = current;`;let E=a<2?"":`\n  fn o2i_${e}(offset: u32) -> ${w.indices} {\n    var indices: ${w.indices};\n    var current = offset;\n    ${x}\n    return indices;\n  }`,P=G=>(v.offsetToIndices=!0,a<2?G:`o2i_${e}(${G})`),O=[];if(a>=2)for(let G=a-1;G>=0;G--)O.push(`${fe(I,G,a)} * (indices[${G}])`);let R=a<2?"":`\n  fn i2o_${e}(indices: ${w.indices}) -> u32 {\n    return ${O.join("+")};\n  }`,L=G=>(v.indicesToOffset=!0,a<2?G:`i2o_${e}(${G})`),N=(...G)=>a===0?"0u":`${w.indices}(${G.map(_).join(",")})`,K=(G,ne)=>a<2?`${G}`:`${fe(G,ne,a)}`,Q=(G,ne,xe)=>a<2?`${G}=${xe};`:`${fe(G,ne,a)}=${xe};`,he={},W=(G,ne)=>{v.broadcastedIndicesToOffset=!0;let xe=`${ne.name}broadcastedIndicesTo${e}Offset`;if(xe in he)return`${xe}(${G})`;let Ke=[];for(let Be=a-1;Be>=0;Be--){let Ge=ne.indicesGet("outputIndices",Be+ne.rank-a);Ke.push(`${K(I,Be)} * (${Ge} % ${K(A,Be)})`)}return he[xe]=`fn ${xe}(outputIndices: ${ne.type.indices}) -> u32 {\n             return ${Ke.length>0?Ke.join("+"):"0u"};\n           }`,`${xe}(${G})`},se=(G,ne)=>(()=>{if(w.storage===w.value)return`${e}[${G}]=${ne};`;if(w.storage==="vec2<u32>"&&w.value==="i32")return`${e}[${G}]=vec2<u32>(u32(${ne}), select(0u, 0xFFFFFFFFu, ${ne} < 0));`;if(w.storage==="vec2<u32>"&&w.value==="u32")return`${e}[${G}]=vec2<u32>(u32(${ne}), 0u);`;if(w.storage==="u32"&&w.value==="vec4<bool>")return`${e}[${G}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${ne}));`;throw new Error(`not supported combination of storage type ${w.storage} and value type ${w.value} yet`)})(),Ce=G=>(()=>{if(w.storage===w.value)return`${e}[${G}]`;if(w.storage==="vec2<u32>"&&w.value==="i32")return`i32(${e}[${G}].x)`;if(w.storage==="vec2<u32>"&&w.value==="u32")return`u32(${e}[${G}].x)`;if(w.storage==="u32"&&w.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${G}] & 0xFFu), bool(${e}[${G}] & 0xFF00u), bool(${e}[${G}] & 0xFF0000u), bool(${e}[${G}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${w.storage} and value type ${w.value} yet`)})(),We=a<2?"":`\n  fn get_${e}ByIndices(indices: ${w.indices}) -> ${d} {\n    return ${Ce(`i2o_${e}(indices)`)};\n  }`,ee=a<2?"":(()=>{let G=c.map(xe=>`d${xe}: u32`).join(", "),ne=c.map(xe=>`d${xe}`).join(", ");return`\n  fn get_${e}(${G}) -> ${d} {\n    return get_${e}ByIndices(${N(ne)});\n  }`})(),ae=(...G)=>{if(G.length!==a)throw new Error(`indices length must be ${a}`);let ne=G.map(_).join(",");return a===0?Ce("0u"):a===1?Ce(ne[0]):(v.get=!0,v.getByIndices=!0,v.indicesToOffset=!0,`get_${e}(${ne})`)},Ae=G=>a<2?Ce(G):(v.getByIndices=!0,v.indicesToOffset=!0,`get_${e}ByIndices(${G})`),me=a<2?"":`\n  fn set_${e}ByIndices(indices: ${w.indices}, value: ${d}) {\n    ${se(`i2o_${e}(indices)`,"value")}\n  }`,ie=a<2?"":(()=>{let G=c.map(xe=>`d${xe}: u32`).join(", "),ne=c.map(xe=>`d${xe}`).join(", ");return`\n  fn set_${e}(${G}, value: ${d}) {\n    set_${e}ByIndices(${N(ne)}, value);\n  }`})();return{impl:()=>{let G=[],ne=!1;return v.offsetToIndices&&(G.push(E),ne=!0),v.indicesToOffset&&(G.push(R),ne=!0),v.broadcastedIndicesToOffset&&(Object.values(he).forEach(xe=>G.push(xe)),ne=!0),v.set&&(G.push(ie),ne=!0),v.setByIndices&&(G.push(me),ne=!0),v.get&&(G.push(ee),ne=!0),v.getByIndices&&(G.push(We),ne=!0),!u&&ne&&G.unshift(`const ${A} = ${w.indices}(${r.join(",")});`,`const ${I} = ${w.indices}(${M.computeStrides(r).join(",")});`),G.join(`\n`)},type:w,offsetToIndices:P,indicesToOffset:L,broadcastedIndicesToOffset:W,indices:N,indicesGet:K,indicesSet:Q,set:(...G)=>{if(G.length!==a+1)throw new Error(`indices length must be ${a}`);let ne=G[a];if(typeof ne!="string")throw new Error("value must be string");let xe=G.slice(0,a).map(_).join(",");return a===0?se("0u",ne):a===1?se(xe[0],ne):(v.set=!0,v.setByIndices=!0,v.indicesToOffset=!0,`set_${e}(${xe}, ${ne})`)},setByOffset:se,setByIndices:(G,ne)=>a<2?se(G,ne):(v.setByIndices=!0,v.indicesToOffset=!0,`set_${e}ByIndices(${G}, ${ne});`),get:ae,getByOffset:Ce,getByIndices:Ae,usage:o,name:e,strides:I,shape:A,rank:a}},U=(e,t,r,o=1)=>Eo(e,t,r,"input",o),j=(e,t,r,o=1)=>Eo(e,t,r,"output",o),An=(e,t,r,o=1)=>Eo(e,t,r,"internal",o),Io=class{constructor(t,r){this.normalizedDispatchGroup=t;this.limits=r;this.internalVariables=[];this.variables=[];this.uniforms=[];this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(t){return`if (global_idx >= ${typeof t=="number"?`${t}u`:t}) { return; }`}mainStart(t=or){let r=typeof t=="number"?t:t[0],o=typeof t=="number"?1:t[1],i=typeof t=="number"?1:t[2];if(r>this.limits.maxComputeWorkgroupSizeX||o>this.limits.maxComputeWorkgroupSizeY||i>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${r}, ${o}, ${i}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(r*o*i>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${r}, ${o}, ${i}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let u=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,a=u?`@builtin(global_invocation_id) global_id : vec3<u32>,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,\n                                             @builtin(local_invocation_id) local_id : vec3<u32>,\n    @builtin(local_invocation_index) local_idx : u32,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(num_workgroups) num_workgroups : vec3<u32>`,c=u?"let global_idx = global_id.x; let local_idx = local_id.x;":`let global_idx = (workgroup_id.z * num_workgroups[0] * num_workgroups[1] +\n          workgroup_id.y * num_workgroups[0] + workgroup_id.x) * ${r*o*i}u + local_idx;`;return`@compute @workgroup_size(${r}, ${o}, ${i})\n  fn main(${a}) {\n    ${c}\n  `}appendVariableUniforms(t){t.rank!==0&&(t.shape.startsWith("uniforms.")&&this.uniforms.push({name:t.shape.replace("uniforms.",""),type:"u32",length:t.rank}),t.strides.startsWith("uniforms.")&&this.uniforms.push({name:t.strides.replace("uniforms.",""),type:"u32",length:t.rank}))}declareVariable(t,r){if(t.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(t),this.appendVariableUniforms(t);let o=t.usage==="input"?"read":"read_write",i=t.type.storage;return`@group(0) @binding(${r}) var<storage, ${o}> ${t.name}: array<${i}>;`}declareVariables(...t){return t.map(r=>this.declareVariable(r,this.variableIndex++)).join(`\n`)}registerInternalVariable(t){if(t.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(t),this.appendVariableUniforms(t)}registerInternalVariables(...t){return t.forEach(r=>this.registerInternalVariable(r)),this}registerUniform(t,r,o=1){return this.uniforms.push({name:t,type:r,length:o}),this}registerUniforms(t){return this.uniforms=this.uniforms.concat(t),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let t=[];for(let{name:r,type:o,length:i}of this.uniforms)if(i&&i>4)o==="f16"?t.push(`@align(16) ${r}:array<mat2x4<${o}>, ${Math.ceil(i/8)}>`):t.push(`${r}:array<vec4<${o}>, ${Math.ceil(i/4)}>`);else{let u=i==null||i===1?o:`vec${i}<${o}>`;t.push(`${r}:${u}`)}return`\n      struct Uniforms { ${t.join(", ")} };\n      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(t=>t.impl()).join(`\n`)+this.internalVariables.map(t=>t.impl()).join(`\n`)}get variablesInfo(){if(this.uniforms.length===0)return;let t=r=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(r)];return this.uniforms.map(r=>[t(r.type),r.length??1])}},va=(e,t)=>new Io(e,t),_r=(e,t)=>{let r=e.length,o=[];for(let i=0;i<r;i++){let u=r-1-i,a=e[u]||1;(t[t.length-1-i]||1)>1&&a===1&&o.unshift(u)}return o}});var Il,$a,Tl,El,yt,_a,Sa,Sr=Y(()=>{"use strict";ye();Se();Ze();_e();Il=e=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.")},$a=(e,t)=>t&&t.length!==e?[...new Array(e).keys()].reverse():t,Tl=(e,t)=>M.sortBasedOnPerm(e,$a(e.length,t)),El=(e,t,r,o)=>{let i=[];i.push(`fn perm(i: ${o.type.indices}) -> ${r.type.indices} {\n    var a: ${r.type.indices};`);for(let u=0;u<t;++u)i.push(r.indicesSet("a",e[u],`i[${u}]`));return i.push("return a;}"),i.join(`\n`)},yt=(e,t)=>{let r=e.dataType,o=e.dims.length,i=$a(o,t),u=Tl(e.dims,i),a=j("output",r,u.length),c=U("a",r,o),p=h=>`\n  ${h.registerUniform("output_size","u32").declareVariables(c,a)}\n\n  ${El(i,o,c,a)}\n\n  ${h.mainStart()}\n    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let indices = ${a.offsetToIndices("global_idx")};\n    let aIndices = perm(indices);\n\n    ${a.setByOffset("global_idx",c.getByIndices("aIndices"))}\n  }`;return{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:["rank"]},getRunData:h=>{let d=M.size(u);return{outputs:[{dims:u,dataType:h[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:[{type:12,data:d},...Z(h[0].dims,u)]}},getShaderSource:p}},_a=(e,t)=>{Il(e.inputs),e.compute(yt(e.inputs[0],t.perm))},Sa=e=>ve({perm:e.perm})});var Pl,kl,Ol,Rl,Bl,Dl,zl,Ml,Ul,Vl,Tt,xa,Ca,Aa,Ia,Ta,Ea,Pa,ka,Oa,Ra,Ba=Y(()=>{"use strict";ye();Se();_e();In();Sr();Pl={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},kl={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},Ol={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},Rl={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Bl=(e,t)=>{let r=[];for(let o=t-e;o<t;++o)r.push(o);return r},Dl=(e,t)=>{let r=[],o=e.length;for(let u=0;u<o;u++)t.indexOf(u)===-1&&r.push(e[u]);let i=t.map(u=>e[u]);return[r,i]},zl=(e,t)=>{let r=e.length+t.length,o=[],i=0;for(let u=0;u<r;u++)t.indexOf(u)===-1?o.push(e[i++]):o.push(1);return o},Ml=(e,t)=>{for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0},Ul=(e,t)=>{let r=[];if(!Ml(e,t)){for(let o=0;o<t;++o)e.indexOf(o)===-1&&r.push(o);e.forEach(o=>r.push(o))}return r},Vl=(e,t,r,o,i,u,a)=>{let c=r[0].dims,p=M.size(u),h=M.size(a),d=U("_A",r[0].dataType,c),y=j("output",i,u),w=32,_=`\n          var<workgroup> aBestValues : array<f32, ${w}>;\n       `;return{name:e,shaderCache:t,getShaderSource:S=>`\n        ${S.registerUniform("reduceSize","u32").declareVariables(d,y)}\n        ${_}\n        fn DIV_CEIL(a : u32, b : u32) -> u32 {\n          return ((a - 1u) / b + 1u);\n         }\n         ${S.mainStart(w)}\n\n          let outputIndex = global_idx / ${w};\n          let offset = outputIndex * uniforms.reduceSize;\n\n          var bestValue = f32(${Ol[o]});\n          let Length = uniforms.reduceSize;\n          for (var k = local_idx; k < Length; k = k + ${w}) {\n           let candidate = f32(${d.getByOffset("offset + k")});\n           bestValue = ${Pl[o]};\n          }\n          aBestValues[local_idx] = bestValue;\n          workgroupBarrier();\n\n         var reduceSize = min(Length, ${w}u);\n         for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n             currentSize = reduceSize / 2u) {\n           let interval = DIV_CEIL(reduceSize, 2u);\n           if (local_idx < currentSize) {\n            let candidate = aBestValues[local_idx + interval];\n            bestValue = ${kl[o]};\n            aBestValues[local_idx] = bestValue;\n           }\n           reduceSize = interval;\n           workgroupBarrier();\n         }\n\n         if (local_idx == 0u) {\n          ${y.setByOffset("outputIndex",`${o==="mean"?`${y.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${y.type.storage}(${Rl[o]})`}`)};\n         }\n        }`,getRunData:()=>({outputs:[{dims:u,dataType:i}],dispatchGroup:{x:p},programUniforms:[{type:12,data:h}]})}},Tt=(e,t,r,o)=>{let i=e.inputs.length===1?r:Po(e.inputs,r),u=i.axes;u.length===0&&!i.noopWithEmptyAxes&&(u=e.inputs[0].dims.map((_,v)=>v));let a=M.normalizeAxes(u,e.inputs[0].dims.length),c=a,p=e.inputs[0],h=Ul(c,e.inputs[0].dims.length);h.length>0&&(p=e.compute(yt(e.inputs[0],h),{inputs:[0],outputs:[-1]})[0],c=Bl(c.length,p.dims.length));let[d,y]=Dl(p.dims,c),w=d;i.keepDims&&(w=zl(d,a)),e.compute(Vl(t,{hint:i.cacheKey,inputDependencies:["type"]},[p],o,e.inputs[0].dataType,w,y),{inputs:[p]})},xa=(e,t)=>{Tt(e,"ReduceMeanShared",t,"mean")},Ca=(e,t)=>{Tt(e,"ReduceL1Shared",t,"l1")},Aa=(e,t)=>{Tt(e,"ReduceL2Shared",t,"l2")},Ia=(e,t)=>{Tt(e,"ReduceLogSumExpShared",t,"logSumExp")},Ta=(e,t)=>{Tt(e,"ReduceMaxShared",t,"max")},Ea=(e,t)=>{Tt(e,"ReduceMinShared",t,"min")},Pa=(e,t)=>{Tt(e,"ReduceProdShared",t,"prod")},ka=(e,t)=>{Tt(e,"ReduceSumShared",t,"sum")},Oa=(e,t)=>{Tt(e,"ReduceSumSquareShared",t,"sumSquare")},Ra=(e,t)=>{Tt(e,"ReduceLogSumShared",t,"logSum")}});var Et,Wl,Tn,Po,Pt,Nl,Gl,Hl,Ll,Fl,ql,jl,Kl,Yl,Zl,kt,Da,za,Ma,Ua,Va,Wa,Na,Ga,Ha,La,In=Y(()=>{"use strict";ye();Se();Ze();_e();Ba();Et=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Wl=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],Tn=(e,t,r,o,i,u,a=!1,c=!1)=>{let p=[],h=r[0].dims,d=h.length,y=M.normalizeAxes(i,d),w=!c&&y.length===0;h.forEach((A,I)=>{w||y.indexOf(I)>=0?a&&p.push(1):p.push(A)});let _=p.length,v=M.size(p);return{name:e,shaderCache:t,getShaderSource:A=>{let I=[],x=U("_A",r[0].dataType,d),E=j("output",u,_),P=o(x,E,y),O=P[2];for(let R=0,L=0;R<d;R++)w||y.indexOf(R)>=0?(a&&L++,O=`for(var j${R}: u32 = 0; j${R} < ${h[R]}; j${R}++) {\n                  ${P[2].includes("last_index")?`let last_index = j${R};`:""}\n                  ${x.indicesSet("input_indices",R,`j${R}`)}\n                  ${O}\n                }`):(I.push(`${x.indicesSet("input_indices",R,E.indicesGet("output_indices",L))};`),L++);return`\n\n        ${A.registerUniform("output_size","u32").declareVariables(x,E)}\n\n        ${A.mainStart()}\n          ${A.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n          var input_indices: ${x.type.indices};\n          let output_indices = ${E.offsetToIndices("global_idx")};\n\n          ${I.join(`\n`)}\n          ${P[0]}       // init ops for reduce max/min\n          ${P[1]}\n          ${O}\n          ${P[3]}\n          ${P.length===4?E.setByOffset("global_idx","value"):P.slice(4).join(`\n`)}\n        }`},getRunData:()=>({outputs:[{dims:p,dataType:u}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:[{type:12,data:v},...Z(h,p)]})}},Po=(e,t)=>{let r=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(o=>r.push(Number(o))),ve({axes:r,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},Pt=(e,t,r,o)=>{let i=e.inputs,u=i.length===1?r:Po(i,r);e.compute(Tn(t,{hint:u.cacheKey,inputDependencies:["rank"]},[i[0]],u.noopWithEmptyAxes&&u.axes.length===0?Wl:o,u.axes,i[0].dataType,u.keepDims,u.noopWithEmptyAxes),{inputs:[0]})},Nl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceLogSum",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${o.getByIndices("input_indices")};`,"value = log(value);"])},Gl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceL1",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += abs(${o.getByIndices("input_indices")});`,""])},Hl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceL2",t,(o,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${o.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},Ll=(e,t)=>{Et(e.inputs),Pt(e,"ReduceLogSumExp",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += exp(${o.getByIndices("input_indices")});`,"value = log(value);"])},Fl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMax",t,(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(o.indicesSet("input_indices",c,0));return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};`,`value = max(value, ${o.getByIndices("input_indices")});`,""]})},ql=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMean",t,(o,i,u)=>{let a=1;for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&(a*=e.inputs[0].dims[c]);return["var sum = f32(0);","",`sum += f32(${o.getByIndices("input_indices")});`,`let value = ${i.type.value}(sum / ${a});`]})},jl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMin",t,(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};`,`value = min(value, ${o.getByIndices("input_indices")});`,""]})},Kl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceProd",t,(o,i)=>[`var value = ${i.type.storage}(1);`,"",`value *= ${o.getByIndices("input_indices")};`,""])},Yl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceSum",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${o.getByIndices("input_indices")};`,""])},Zl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceSumSquare",t,(o,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${o.getByIndices("input_indices")}; value += t * t;`,""])},kt=(e,t,r)=>{if(t.length===0)return r;let o=1,i=1;for(let u=0;u<t.length;u++)t.indexOf(u)===-1?o*=e[u]:i*=e[u];return i<32&&o>1024},Da=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?ql(e,t):xa(e,t)},za=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Gl(e,t):Ca(e,t)},Ma=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Hl(e,t):Aa(e,t)},Ua=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Ll(e,t):Ia(e,t)},Va=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Fl(e,t):Ta(e,t)},Wa=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?jl(e,t):Ea(e,t)},Na=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Kl(e,t):Pa(e,t)},Ga=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Yl(e,t):ka(e,t)},Ha=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Zl(e,t):Oa(e,t)},La=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Nl(e,t):Ra(e,t)}});var Fa,qa,ja,ko,Ka=Y(()=>{"use strict";ye();Ze();In();Fa=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},qa=(e,t)=>{Fa(e.inputs);let r=(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};\nvar best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {\n         value = ${o.getByIndices("input_indices")};\n         best_index = i32(last_index);\n       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Tn("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},ja=(e,t)=>{Fa(e.inputs);let r=(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};\nvar best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {\n         value = ${o.getByIndices("input_indices")};\n         best_index = i32(last_index);\n       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Tn("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},ko=e=>ve(e)});var Xl,Ql,Jl,En,Ya,Za,Oo=Y(()=>{"use strict";ye();Se();Ze();_e();Xl=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");let r=0,o=e[r],i=o.dataType,u=o.dims.length;e.forEach((a,c)=>{if(c!==r){if(a.dataType!==i)throw new Error("input tensors should be one type");if(a.dims.length!==u)throw new Error("input tensors should have the same shape");a.dims.forEach((p,h)=>{if(h!==t&&p!==o.dims[h])throw new Error("non concat dimensions must match")})}})},Ql=(e,t)=>`\n  fn calculateInputIndex(index: u32) -> u32 {\n    let sizeInConcatAxis = array<u32, ${e}u>(${t});\n    for (var i: u32 = 0u; i < ${e}; i += 1u ) {\n      if (index < sizeInConcatAxis[i]) {\n        return i;\n      }\n    }\n    return ${e}u;\n  }`,Jl=(e,t)=>{let r=e.length,o=[];for(let i=0;i<r;++i){let u=t.setByOffset("global_idx",e[i].getByIndices("indices"));r===1?o.push(u):i===0?o.push(`if (inputIndex == ${i}u) { ${u} }`):i===r-1?o.push(`else { ${u} }`):o.push(`else if (inputIndex == ${i}) { ${u} }`)}return o.join(`\n`)},En=(e,t,r,o)=>{let i=M.size(r),u=new Array(e.length),a=new Array(e.length),c=0,p=[],h=[],d=[{type:12,data:i}];for(let S=0;S<e.length;++S)c+=e[S].dims[t],u[S]=c,h.push(e[S].dims.length),a[S]=U(`input${S}`,o,h[S]),p.push("rank"),d.push({type:12,data:u[S]});for(let S=0;S<e.length;++S)d.push(...Z(e[S].dims));d.push(...Z(r));let y=j("output",o,r.length),w=y.indicesGet("indices",t),_=Array.from(Array(u.length).keys()).map(S=>`uniforms.sizeInConcatAxis${S}`).join(","),v=S=>`\n\n  ${(()=>{S.registerUniform("outputSize","u32");for(let A=0;A<e.length;A++)S.registerUniform(`sizeInConcatAxis${A}`,"u32");return S.declareVariables(...a,y)})()}\n\n  ${Ql(u.length,_)}\n\n  ${S.mainStart()}\n    ${S.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n    var indices = ${y.offsetToIndices("global_idx")};\n\n    let inputIndex = calculateInputIndex(${w});\n    if (inputIndex != 0u) {\n      let sizeInConcatAxis = array<u32, ${u.length}u>(${_});\n      ${w} -= sizeInConcatAxis[inputIndex - 1u];\n    }\n\n    ${Jl(a,y)}\n  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:p},getRunData:()=>({outputs:[{dims:r,dataType:o}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:d}),getShaderSource:v}},Ya=(e,t)=>{let r=e.inputs,o=r[0].dims,i=M.normalizeAxis(t.axis,o.length);Xl(r,i);let u=o.slice();u[i]=r.reduce((c,p)=>c+(p.dims.length>i?p.dims[i]:0),0);let a=r.filter(c=>M.size(c.dims)>0);e.compute(En(a,i,u,r[0].dataType),{inputs:a})},Za=e=>ve({axis:e.axis})});var ec,tc,rc,nc,Pn,oc,Xa,Ro=Y(()=>{"use strict";ye();_n();_e();Oo();ec=(e,t)=>{let r=e[0],o=e[1],i=e[2],u=e[3],a=e[4],c=e[5];if(a&&c)throw new Error("Attention cannot have both past and relative_position_bias");if(r.dims.length!==3)throw new Error(\'Input "input" must have 3 dimensions\');let p=r.dims[0],h=r.dims[1],d=r.dims[2];if(i.dims.length!==1)throw new Error(\'Input "bias" is expected to have 1 dimensions\');if(o.dims.length!==2)throw new Error(\'Input "weights" is expected to have 2 dimensions\');if(o.dims[0]!==d)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(i.dims[0]!==o.dims[1])throw new Error(\'Input "bias" dimension 0 should have same length as dimension 1 of input "weights"\');let y=i.dims[0]/3,w=y,_=w;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let E of t.qkvHiddenSizes)if(E%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");y=t.qkvHiddenSizes[0],w=t.qkvHiddenSizes[1],_=t.qkvHiddenSizes[2]}let v=h;if(y!==w)throw new Error("qkv_hidden_sizes first element should be same as the second");if(i.dims[0]!==y+w+_)throw new Error(\'Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes\');let S=0;if(a){if(w!==_)throw new Error(\'Input "past" expect k_hidden_size == v_hidden_size\');if(a.dims.length!==5)throw new Error(\'Input "past" must have 5 dimensions\');if(a.dims[0]!==2)throw new Error(\'Input "past" first dimension must be 2\');if(a.dims[1]!==p)throw new Error(\'Input "past" second dimension must be batch_size\');if(a.dims[2]!==t.numHeads)throw new Error(\'Input "past" third dimension must be num_heads\');if(a.dims[4]!==w/t.numHeads)throw new Error(\'Input "past" fifth dimension must be k_hidden_size / num_heads\');t.pastPresentShareBuffer||(S=a.dims[3])}let A=v+S,I=-1,x=0;if(u)throw new Error("Mask not supported");if(a)throw new Error("past is not supported");return{batchSize:p,sequenceLength:h,pastSequenceLength:S,kvSequenceLength:v,totalSequenceLength:A,maxSequenceLength:I,inputHiddenSize:d,hiddenSize:y,vHiddenSize:_,headSize:Math.floor(y/t.numHeads),vHeadSize:Math.floor(_/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:x,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},tc=(e,t,r,o)=>{let i=Me(o),u=64,a=o/i;a<u?u=1:a/8<64&&(u=Math.ceil(a/8));let c=Math.ceil(o/i/u),p=[{type:t.dataType,data:1/o},{type:12,data:a},{type:12,data:c}],h=De(t.dataType,i),d=et(1,i),y=w=>{let _=j("x",t.dataType,t.dims,i),S=[{name:"d_inv",type:et(t.dataType)},{name:"d_comp",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`\n  var<workgroup> thread_max: array<f32, ${u}>;\n  var<workgroup> thread_sum: array<f32, ${u}>;\n  ${w.registerUniforms(S).declareVariables(_)}\n  ${w.mainStart([u,1,1])}\n    let local_offset = local_idx * uniforms.elements_per_thread;\n    let offset = workgroup_id.x * uniforms.d_comp + local_offset;\n\n    var thread_max_vector = ${d}(-3.402823e+38f);\n    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n      thread_max_vector = max(${d}(x[offset + i]), thread_max_vector);\n    }\n    thread_max[local_idx] = ${(()=>{switch(i){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${i}`)}})()};\n    workgroupBarrier();\n\n    var max_value =  f32(-3.402823e+38f);\n    for (var i = 0u; i < ${u}; i++) {\n      max_value = max(thread_max[i], max_value);\n    }\n\n    var sum_vector = ${d}(0);\n    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n      sum_vector += exp(${d}(x[offset + i]) - max_value);\n    }\n    thread_sum[local_idx] = ${(()=>{switch(i){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${i}`)}})()};\n    workgroupBarrier();\n\n    var sum: f32 = 0;\n    for (var i = 0u; i < ${u}; i++) {\n      sum += thread_sum[i];\n    }\n\n    if (sum == 0) {\n      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n        x[offset + i] = ${_.type.value}(uniforms.d_inv);\n      }\n    } else {\n      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n        var f32input = ${d}(x[offset + i]);\n        x[offset + i] = ${_.type.value}(exp(f32input - max_value) / sum);\n      }\n    }\n  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${u};${h};${i}`},getShaderSource:y,getRunData:()=>({outputs:[],dispatchGroup:{x:r},programUniforms:p})}},rc=(e,t,r,o,i,u,a)=>{let c=a+i.kvSequenceLength,p=[i.batchSize,i.numHeads,i.sequenceLength,c],h=u.scale===0?1/Math.sqrt(i.headSize):u.scale,d=Me(i.headSize),y=i.headSize/d,w=12,_={x:Math.ceil(c/w),y:Math.ceil(i.sequenceLength/w),z:i.batchSize*i.numHeads},v=[{type:12,data:i.sequenceLength},{type:12,data:y},{type:12,data:c},{type:12,data:i.numHeads},{type:1,data:h}],S=o?["type","type","type"]:["type","type"],A=I=>{let x=U("q",t.dataType,t.dims,d),E=U("key",r.dataType,r.dims,d),P=[x,E];o&&P.push(U("relative_position_bias",o.dataType,o.dims));let O=j("output",t.dataType,p),R=et(1,d),L=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"alpha",type:"f32"}];return`\n  const TILE_SIZE = ${w}u;\n\n  var<workgroup> tileQ: array<${x.type.storage}, ${w*w}>;\n  var<workgroup> tileK: array<${x.type.storage}, ${w*w}>;\n  ${I.registerUniforms(L).declareVariables(...P,O)}\n  ${I.mainStart([w,w,1])}\n    // x holds the N and y holds the M\n    let headIdx = workgroup_id.z;\n    let m = workgroup_id.y * TILE_SIZE;\n    let n = workgroup_id.x * TILE_SIZE;\n    let qOffset = uniforms.M * uniforms.K * headIdx + m * uniforms.K;\n    let kOffset = uniforms.N * uniforms.K * headIdx + n * uniforms.K;\n\n    var value = ${R}(0);\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {\n        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {\n        tileK[TILE_SIZE * local_id.y + local_id.x] = key[kOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      workgroupBarrier();\n\n      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {\n        value += ${R}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = headIdx * uniforms.M * uniforms.N;\n    if (global_id.y < uniforms.M && global_id.x < uniforms.N) {\n      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;\n      var sum: f32 = ${(()=>{switch(d){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${d}`)}})()};\n        output[outputIdx] = ${O.type.value} (sum * uniforms.alpha) + ${o?"relative_position_bias[outputIdx]":"0.0"};\n    }\n  }`};return{name:"AttentionProbs",shaderCache:{hint:`${d}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:p,dataType:t.dataType,gpuDataType:0}],dispatchGroup:_,programUniforms:v}),getShaderSource:A}},nc=(e,t,r,o,i)=>{let u=i+o.kvSequenceLength,a=[o.batchSize,o.sequenceLength,o.vHiddenSize],c=12,p={x:Math.ceil(o.vHeadSize/c),y:Math.ceil(o.sequenceLength/c),z:o.batchSize*o.numHeads},h=[{type:12,data:o.sequenceLength},{type:12,data:u},{type:12,data:o.vHeadSize},{type:12,data:o.numHeads},{type:12,data:o.vHiddenSize}];return{name:"AttentionScore",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:a,dataType:t.dataType,gpuDataType:0}],dispatchGroup:p,programUniforms:h}),getShaderSource:w=>{let _=U("probs",t.dataType,t.dims),v=U("v",r.dataType,r.dims),S=j("output",t.dataType,a),A=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"v_hidden_size",type:"u32"}];return`\n  const TILE_SIZE = ${c}u;\n  var<workgroup> tileQ: array<${_.type.value}, ${c*c}>;\n  var<workgroup> tileK: array<${_.type.value}, ${c*c}>;\n  ${w.registerUniforms(A).declareVariables(_,v,S)}\n  ${w.mainStart([c,c,1])}\n   let headIdx = workgroup_id.z;\n   let m = global_id.y;\n   let n = global_id.x;\n\n   let offsetA = headIdx * (uniforms.M * uniforms.K) + m * uniforms.K;\n   let offsetB = headIdx * (uniforms.N * uniforms.K) + n;\n\n   var value = ${_.type.storage}(0);\n   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n     if (m < uniforms.M && w + local_id.x < uniforms.K) {\n       tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];\n     }\n     if (n < uniforms.N && w + local_id.y < uniforms.K) {\n       tileK[TILE_SIZE * local_id.y + local_id.x] = v[offsetB + (w + local_id.y) * uniforms.N];\n     }\n     workgroupBarrier();\n     for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {\n       value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * k + local_id.x];\n     }\n     workgroupBarrier();\n   }\n\n   // we need to transpose output from BNSH_v to BSND_v\n   let batchIdx = workgroup_id.z / uniforms.num_heads;\n   let currentBatchHeadNumber = workgroup_id.z % uniforms.num_heads;\n   if (m < uniforms.M && n < uniforms.N) {\n     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size\n       + currentBatchHeadNumber * uniforms.N + n;\n     output[outputIdx] = value;\n   }\n  }`}}},Pn=(e,t,r,o,i,u,a,c,p,h,d)=>{let y=e.outputCount>1,w=e.outputCount>2,_=y&&w?h.pastSequenceLength:0,v=_+h.kvSequenceLength,S=[h.batchSize,h.numHeads,v,h.headSize],A=a?[a,r]:[r],I=y?e.compute(En(A,2,S,r.dataType),{inputs:A,outputs:[1]})[0]:r,x=[h.batchSize,h.numHeads,v,h.headSize],E=c?[c,o]:[o],P=w?e.compute(En(E,2,x,o.dataType),{inputs:E,outputs:[2]})[0]:o,O=[t,I];p&&O.push(p);let R=e.compute(rc(e,t,I,p,h,d,_),{inputs:O,outputs:[-1]})[0];e.compute(tc(e,R,h.batchSize*h.numHeads*h.sequenceLength,v),{inputs:[R],outputs:[]});let L=[R,P];e.compute(nc(e,R,P,h,_),{inputs:L,outputs:[0]})},oc=(e,t)=>{let r=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],o=t.sequenceLength,i=t.inputHiddenSize,u=t.headSize,a=12,c={x:Math.ceil(t.headSize/a),y:Math.ceil(t.sequenceLength/a),z:t.batchSize*t.numHeads},p=[e.inputs[0],e.inputs[1],e.inputs[2]],h=[{type:12,data:o},{type:12,data:i},{type:12,data:u},{type:12,data:t.numHeads},{type:12,data:t.headSize},{type:12,data:t.hiddenSize},{type:12,data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],d=y=>{let w=j("output_q",p[0].dataType,r),_=j("output_k",p[0].dataType,r),v=j("output_v",p[0].dataType,r),S=U("input",p[0].dataType,p[0].dims),A=U("weight",p[1].dataType,p[1].dims),I=U("bias",p[2].dataType,p[2].dims),x=S.type.storage,E=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`\n  const TILE_SIZE = ${a}u;\n  var<workgroup> tileInput: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightQ: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightK: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightV: array<${x}, ${a*a}>;\n  ${y.registerUniforms(E).declareVariables(S,A,I,w,_,v)}\n  ${y.mainStart([a,a,1])}\n    let batchIndex = workgroup_id.z / uniforms.num_heads;\n    let headNumber = workgroup_id.z % uniforms.num_heads;\n    let m = global_id.y;\n    let n = global_id.x;\n\n    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;\n    let biasOffsetQ = headNumber * uniforms.head_size;\n    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;\n    let biasOffsetV = uniforms.hidden_size + biasOffsetK;\n\n    var valueQ = ${x}(0);\n    var valueK = ${x}(0);\n    var valueV = ${x}(0);\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (m < uniforms.M && w + local_id.x < uniforms.K) {\n        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];\n      }\n      if (n < uniforms.N && w + local_id.y < uniforms.K) {\n        let offset = n + (w + local_id.y) * uniforms.ldb;\n        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];\n        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];\n        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];\n      }\n      workgroupBarrier();\n      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {\n        let inputTileOffset = TILE_SIZE * local_id.y + k;\n        let weightTileOffset = TILE_SIZE * k + local_id.x;\n        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];\n        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];\n        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = (m * uniforms.N + n) % uniforms.head_size;\n    valueQ += bias[headOffset + biasOffsetQ];\n    valueK += bias[headOffset + biasOffsetK];\n    valueV += bias[headOffset + biasOffsetV];\n\n    let offset = workgroup_id.z * uniforms.M * uniforms.N;\n    if (m < uniforms.M && n < uniforms.N) {\n      let outputIdx = offset + m * uniforms.N + n;\n      output_q[outputIdx] = valueQ;\n      output_k[outputIdx] = valueK;\n      output_v[outputIdx] = valueV;\n    }\n  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:c,programUniforms:h}),getShaderSource:d},{inputs:p,outputs:[-1,-1,-1]})},Xa=(e,t)=>{let r=ec(e.inputs,t),[o,i,u]=oc(e,r);return Pn(e,o,i,u,e.inputs[4],void 0,void 0,void 0,e.inputs[5],r,t)}});var ic,ac,sc,Qa,Ja=Y(()=>{"use strict";$r();ye();Se();Ze();_e();ic=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let r=(o,i,u)=>{let a=i.length;if(a!==o.length)throw new Error(`${u}: num dimensions != ${a}`);i.forEach((c,p)=>{if(c!==o[p])throw new Error(`${u}: dim[${p}] do not match`)})};if(e[0].dims.length>1){let o=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);r(e[1].dims,o,"Invalid input scale"),r(e[2].dims,o,"Invalid input B"),r(e[3].dims,o,"Invalid input mean"),r(e[4].dims,o,"Invalid input var")}else r(e[1].dims,[1],"Invalid input scale"),r(e[2].dims,[1],"Invalid input B"),r(e[3].dims,[1],"Invalid input mean"),r(e[4].dims,[1],"Invalid input var")},ac=(e,t)=>{let{epsilon:r,spatial:o,format:i}=t,u=e[0].dims,a=o?Me(u[u.length-1]):1,c=i==="NHWC"&&u.length>1?a:1,p=M.size(u)/a,h=o,d=h?u.length:u,y=U("x",e[0].dataType,e[0].dims,a),w=U("scale",e[1].dataType,e[1].dims,c),_=U("bias",e[2].dataType,e[2].dims,c),v=U("inputMean",e[3].dataType,e[3].dims,c),S=U("inputVar",e[4].dataType,e[4].dims,c),A=j("y",e[0].dataType,d,a),I=()=>{let E="";if(o)E=`let cOffset = ${u.length===1?"0u":i==="NHWC"?`outputIndices[${u.length-1}] / ${a}`:"outputIndices[1]"};`;else if(i==="NCHW")E=`\n            ${A.indicesSet("outputIndices","0","0")}\n            let cOffset = ${A.indicesToOffset("outputIndices")};`;else{E=`var cIndices = ${w.type.indices}(0);\n                       cIndices[0] = outputIndices[${u.length-1}];`;for(let P=1;P<w.rank;P++)E+=`cIndices[${P}] = outputIndices[${P}];`;E+=`let cOffset = ${w.indicesToOffset("cIndices")};`}return E},x=E=>`\n  const epsilon = ${r};\n  ${E.registerUniform("outputSize","u32").declareVariables(y,w,_,v,S,A)}\n  ${E.mainStart()}\n  ${E.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n    var outputIndices = ${A.offsetToIndices(`global_idx * ${a}`)};\n    ${I()}\n    let scale = ${w.getByOffset("cOffset")};\n    let bias = ${_.getByOffset("cOffset")};\n    let inputMean = ${v.getByOffset("cOffset")};\n    let inputVar = ${S.getByOffset("cOffset")};\n    let x = ${y.getByOffset("global_idx")};\n    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;\n    ${A.setByOffset("global_idx","value")}\n  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${o}_${a}`,inputDependencies:h?["rank","type","type","type","type"]:void 0},getShaderSource:x,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h?[{type:12,data:p},...Z(u)]:[{type:12,data:p}]})}},sc=e=>ve(e),Qa=(e,t)=>{let{inputs:r,outputCount:o}=e,i=sc({...t,outputCount:o});if(vr.webgpu.validateInputContent&&ic(r,i),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(ac(r,i))}});var uc,dc,es,ts=Y(()=>{"use strict";Se();_e();uc=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},dc=e=>{let t=e[0].dims,r=e[0].dims[2],o=M.size(t)/4,i=e[0].dataType,u=U("input",i,t,4),a=U("bias",i,[r],4),c=U("residual",i,t,4),p=j("output",i,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)}}),getShaderSource:d=>`\n  const channels = ${r}u / 4;\n  ${d.declareVariables(u,a,c,p)}\n\n  ${d.mainStart()}\n    ${d.guardAgainstOutOfBoundsWorkgroupSizes(o)}\n    let value = ${u.getByOffset("global_idx")}\n      + ${a.getByOffset("global_idx % channels")} + ${c.getByOffset("global_idx")};\n    ${p.setByOffset("global_idx","value")}\n  }`}},es=e=>{uc(e.inputs),e.compute(dc(e.inputs))}});var lc,ke,rs,ns,os,is,as,ss,us,ds,ls,cc,cs,ps,ms,fs,kn,hs,On,gs,ys,bs,ws,vs,$s,_s,Ss,xs,Cs,As,Is,Ts,Es,Ps,ks,Os,Rs,Bo,Do,Bs,Ds,zs,Rn=Y(()=>{"use strict";ye();Se();Ze();_e();lc=(e,t,r,o,i,u)=>{let a=Math.ceil(t/4),c="";typeof i=="string"?c=`${i}(a)`:c=i("a");let p=U("inputData",r,[a],4),h=j("outputData",o,[a],4);return`\n      ${e.registerUniform("vec_size","u32").declareVariables(p,h)}\n\n  ${u??""}\n\n  ${e.mainStart()}\n    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n\n    let a = ${p.getByOffset("global_idx")};\n    ${h.setByOffset("global_idx",c)}\n  }`},ke=(e,t,r,o,i,u=e.dataType)=>({name:t,shaderCache:{hint:i,inputDependencies:["type"]},getShaderSource:a=>lc(a,M.size(e.dims),e.dataType,u,r,o),getRunData:a=>({outputs:[{dims:e.dims,dataType:u}],dispatchGroup:{x:Math.ceil(M.size(a[0].dims)/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size(e.dims)/4)}]})}),rs=e=>{e.compute(ke(e.inputs[0],"Abs","abs"))},ns=e=>{e.compute(ke(e.inputs[0],"Acos","acos"))},os=e=>{e.compute(ke(e.inputs[0],"Acosh","acosh"))},is=e=>{e.compute(ke(e.inputs[0],"Asin","asin"))},as=e=>{e.compute(ke(e.inputs[0],"Asinh","asinh"))},ss=e=>{e.compute(ke(e.inputs[0],"Atan","atan"))},us=e=>{e.compute(ke(e.inputs[0],"Atanh","atanh"))},ds=e=>ve(e),ls=(e,t)=>{let r;switch(t.to){case 10:r="vec4<f16>";break;case 1:r="vec4<f32>";break;case 12:r="vec4<u32>";break;case 6:r="vec4<i32>";break;case 9:r="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute \'to\' from \'Cast\' operator): ${t.to}`)}e.compute(ke(e.inputs[0],"Cast",r,void 0,t.cacheKey,t.to))},cc=e=>{let t=e.length>=2&&e[1].data!==0?e[1].getFloat32Array()[0]:xn,r=e.length>=3&&e[2].data!==0?e[2].getFloat32Array()[0]:Cn;return ve({min:t,max:r})},cs=(e,t)=>{let r=e.inputs.length===1?t:cc(e.inputs),o=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Clip",i=>`clamp(${i}, clip_min_, clip_max_)`,`\n    const clip_min_: vec4<${o}> = vec4(${o}(${r.min}));\n    const clip_max_: vec4<${o}> = vec4(${o}(${r.max}));\n`,r.cacheKey),{inputs:[0]})},ps=e=>{e.compute(ke(e.inputs[0],"Ceil","ceil"))},ms=e=>{e.compute(ke(e.inputs[0],"Cos","cos"))},fs=e=>{e.compute(ke(e.inputs[0],"Cosh","cosh"))},kn=e=>ve(e),hs=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Elu",o=>`elu_vf32(${o})`,`\n  const elu_alpha_ = ${r}(${t.alpha});\n\n  fn elu_f32(a: ${r}) -> ${r} {\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\n  }\n\n  fn elu_vf32(v: vec4<${r}>) -> vec4<${r}> {\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\n  }`,t.cacheKey))},On=(e="f32")=>`\nconst r0: ${e} = 0.3275911;\nconst r1: ${e} = 0.254829592;\nconst r2: ${e} = -0.284496736;\nconst r3: ${e} = 1.421413741;\nconst r4: ${e} = -1.453152027;\nconst r5: ${e} = 1.061405429;\n\nfn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {\n  let absv = abs(v);\n  let x = 1.0 / (1.0 + r0 * absv);\n  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\n}`,gs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Erf",r=>`erf_vf32(${r})`,On(t)))},ys=e=>{e.compute(ke(e.inputs[0],"Exp","exp"))},bs=e=>{e.compute(ke(e.inputs[0],"Floor","floor"))},ws=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Gelu",r=>`0.5 * ${r} * (1.0 + erf_vf32(${r} * 0.7071067811865475))`,On(t)))},vs=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"LeakyRelu",o=>`select(leaky_relu_alpha_ * ${o}, ${o}, ${o} >= vec4<${r}>(0.0))`,`const leaky_relu_alpha_ = ${r}(${t.alpha});`,t.cacheKey))},$s=e=>{e.compute(ke(e.inputs[0],"Not",t=>`!${t}`))},_s=e=>{e.compute(ke(e.inputs[0],"Neg",t=>`-${t}`))},Ss=e=>{e.compute(ke(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},xs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Relu",r=>`select(vec4<${t}>(0.0), ${r}, ${r} > vec4<${t}>(0.0))`))},Cs=e=>{e.compute(ke(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},As=e=>ve(e),Is=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"HardSigmoid",o=>`max(vec4<${r}>(0.0), min(vec4<${r}>(1.0), ${t.alpha} * ${o} + vec4<${r}>(${t.beta})))`,void 0,t.cacheKey))},Ts=e=>{e.compute(ke(e.inputs[0],"Sin","sin"))},Es=e=>{e.compute(ke(e.inputs[0],"Sinh","sinh"))},Ps=e=>{e.compute(ke(e.inputs[0],"Sqrt","sqrt"))},ks=e=>{e.compute(ke(e.inputs[0],"Tan","tan"))},Os=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,Rs=e=>{e.compute(ke(e.inputs[0],"Tanh",Os))},Bo=(e="f32")=>`\nconst fast_gelu_a: ${e} = 0.5;\nconst fast_gelu_b: ${e} = 0.7978845608028654;\nconst fast_gelu_c: ${e} = 0.035677408136300125;\n\nfn tanh_v(v: vec4<${e}>) -> vec4<${e}> {\n  return ${Os("v")};\n}\n`,Do=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,Bs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"FastGelu",Do,Bo(t),void 0,e.inputs[0].dataType))},Ds=(e,t)=>{let r=et(e.inputs[0].dataType);return e.compute(ke(e.inputs[0],"ThresholdedRelu",o=>`select(vec4<${r}>(0.0), ${o}, ${o} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${r}>(${t.alpha});`,t.cacheKey)),0},zs=e=>{e.compute(ke(e.inputs[0],"Log","log"))}});var pc,mc,Us,Vs=Y(()=>{"use strict";Se();_e();Rn();pc=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},mc=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let r=U("input",e[0].dataType,e[0].dims,4),o=U("bias",e[0].dataType,[e[0].dims[2]],4),i=j("output",e[0].dataType,t,4),u=M.size(t)/4,a=De(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)}}),getShaderSource:p=>`\n  const M_SQRT2 = sqrt(2.0);\n  const halfChannels = ${e[0].dims[2]/4/2}u;\n\n  ${p.declareVariables(r,o,i)}\n\n  ${On(a)}\n\n  ${p.mainStart()}\n    ${p.guardAgainstOutOfBoundsWorkgroupSizes(u)}\n    let biasIdx = global_idx % halfChannels;\n    let batchIndex = global_idx / halfChannels;\n    let inputOffset = biasIdx + batchIndex * halfChannels * 2;\n    let valueLeft = input[inputOffset] + bias[biasIdx];\n    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];\n    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);\n\n    ${i.setByOffset("global_idx","valueLeft * geluRight")}\n  }`}},Us=e=>{pc(e.inputs),e.compute(mc(e.inputs))}});var fc,hc,Ot,Ws,Ns,Gs,Hs,Ls,Fs,qs,js,Ks,Ys,Zs=Y(()=>{"use strict";ye();Se();_e();fc=(e,t,r,o,i,u,a,c,p,h,d,y)=>{let w,_;typeof c=="string"?w=_=(x,E)=>`${c}((${x}),(${E}))`:typeof c=="function"?w=_=c:(w=c.scalar,_=c.vector);let v=j("outputData",d,o.length,4),S=U("aData",p,t.length,4),A=U("bData",h,r.length,4),I;if(i)if(u){let x=M.size(t)===1,E=M.size(r)===1,P=t.length>0&&t[t.length-1]%4===0,O=r.length>0&&r[r.length-1]%4===0;x||E?I=v.setByOffset("global_idx",_(x?`${S.type.value}(${S.getByOffset("0")}.x)`:S.getByOffset("global_idx"),E?`${A.type.value}(${A.getByOffset("0")}.x)`:A.getByOffset("global_idx"))):I=`\n            let outputIndices = ${v.offsetToIndices("global_idx * 4u")};\n            let offsetA = ${S.broadcastedIndicesToOffset("outputIndices",v)};\n            let offsetB = ${A.broadcastedIndicesToOffset("outputIndices",v)};\n            ${v.setByOffset("global_idx",_(a||P?S.getByOffset("offsetA / 4u"):`${S.type.value}(${S.getByOffset("offsetA / 4u")}[offsetA % 4u])`,a||O?A.getByOffset("offsetB / 4u"):`${A.type.value}(${A.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}\n          `}else I=v.setByOffset("global_idx",_(S.getByOffset("global_idx"),A.getByOffset("global_idx")));else{if(!u)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let x=(E,P,O="")=>{let R=`aData[indexA${P}][componentA${P}]`,L=`bData[indexB${P}][componentB${P}]`;return`\n            let outputIndices${P} = ${v.offsetToIndices(`global_idx * 4u + ${P}u`)};\n            let offsetA${P} = ${S.broadcastedIndicesToOffset(`outputIndices${P}`,v)};\n            let offsetB${P} = ${A.broadcastedIndicesToOffset(`outputIndices${P}`,v)};\n            let indexA${P} = offsetA${P} / 4u;\n            let indexB${P} = offsetB${P} / 4u;\n            let componentA${P} = offsetA${P} % 4u;\n            let componentB${P} = offsetB${P} % 4u;\n            ${E}[${P}] = ${O}(${w(R,L)});\n          `};d===9?I=`\n            var data = vec4<u32>(0);\n            ${x("data",0,"u32")}\n            ${x("data",1,"u32")}\n            ${x("data",2,"u32")}\n            ${x("data",3,"u32")}\n            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:I=`\n            ${x("outputData[global_idx]",0)}\n            ${x("outputData[global_idx]",1)}\n            ${x("outputData[global_idx]",2)}\n            ${x("outputData[global_idx]",3)}\n          `}return`\n        ${e.registerUniform("vec_size","u32").declareVariables(S,A,v)}\n\n        ${y??""}\n\n        ${e.mainStart()}\n        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n        ${I}\n      }`},hc=(e,t,r,o,i,u,a=r.dataType)=>{let c=!M.areEqual(r.dims,o.dims),p=r.dims,h=M.size(r.dims),d=!1,y=!1,w=[c];if(c){let _=It.calcShape(r.dims,o.dims,!1);if(!_)throw new Error("Can\'t perform binary op on the given tensors");p=_,h=M.size(p);let v=M.size(r.dims)===1,S=M.size(o.dims)===1,A=r.dims.length>0&&r.dims[r.dims.length-1]%4===0,I=o.dims.length>0&&o.dims[o.dims.length-1]%4===0;w.push(v),w.push(S),w.push(A),w.push(I);let x=1;for(let E=1;E<p.length;E++){let P=r.dims[r.dims.length-E]??1,O=o.dims[o.dims.length-E]??1;if(P===O)x*=P;else break}x%4===0?(y=!0,d=!0):(v||S||A||I)&&(d=!0)}else d=!0;return w.push(d),{name:e,shaderCache:{hint:t+w.map(_=>_.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:_=>fc(_,r.dims,o.dims,p,d,c,y,i,r.dataType,o.dataType,a,u),getRunData:()=>({outputs:[{dims:p,dataType:a}],dispatchGroup:{x:Math.ceil(h/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size(p)/4)},...Z(r.dims,o.dims,p)]})}},Ot=(e,t,r,o,i,u)=>{e.compute(hc(t,i??"",e.inputs[0],e.inputs[1],r,o,u))},Ws=e=>{Ot(e,"Add",(t,r)=>`${t}+${r}`)},Ns=e=>{Ot(e,"Div",(t,r)=>`${t}/${r}`)},Gs=e=>{Ot(e,"Equal",{scalar:(t,r)=>`u32(${t}==${r})`,vector:(t,r)=>`vec4<u32>(${t}==${r})`},void 0,void 0,9)},Hs=e=>{Ot(e,"Mul",(t,r)=>`${t}*${r}`)},Ls=e=>{let t=U("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;Ot(e,"Pow",{scalar:(o,i)=>`pow_custom(${o},${i})`,vector:(o,i)=>`pow_vector_custom(${o},${i})`},`\n    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {\n      if (b == ${t}(0.0)) {\n        return ${t}(1.0);\n      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {\n        return ${t}(pow(f32(a), f32(b))); // NaN\n      }\n      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));\n    }\n    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {\n      // TODO: implement vectorized pow\n      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));\n    }\n      `)},Fs=e=>{Ot(e,"Sub",(t,r)=>`${t}-${r}`)},qs=e=>{Ot(e,"Greater",{scalar:(t,r)=>`u32(${t}>${r})`,vector:(t,r)=>`vec4<u32>(${t}>${r})`},void 0,void 0,9)},js=e=>{Ot(e,"Less",{scalar:(t,r)=>`u32(${t}<${r})`,vector:(t,r)=>`vec4<u32>(${t}<${r})`},void 0,void 0,9)},Ks=e=>{Ot(e,"GreaterOrEqual",{scalar:(t,r)=>`u32(${t}>=${r})`,vector:(t,r)=>`vec4<u32>(${t}>=${r})`},void 0,void 0,9)},Ys=e=>{Ot(e,"LessOrEqual",{scalar:(t,r)=>`u32(${t}<=${r})`,vector:(t,r)=>`vec4<u32>(${t}<=${r})`},void 0,void 0,9)}});var St,xt,Ct,Bn,Ft=Y(()=>{"use strict";ye();Se();St=(e,t,r="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${t}(0.0));`;case"Sigmoid":return`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${t}(${r}(uniforms.clip_min)), ${t}(${r}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${t}(0.0), min(${t}(1.0), ${r}(uniforms.alpha) * value + ${r}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${r}(uniforms.alpha) * value, value, value >= ${t}(0.0));`;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},xt=(e,t)=>{e.activation==="Clip"?t.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?t.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&t.push({type:1,data:e.alpha})},Ct=(e,t)=>{e.activation==="Clip"?t.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?t.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&t.push({name:"alpha",type:"f32"})},Bn=e=>{let t=e?.activation||"";if(t==="HardSigmoid"){let[r,o]=e?.activation_params||[.2,.5];return{activation:t,alpha:r,beta:o}}else if(t==="Clip"){let[r,o]=e?.activation_params||[xn,Cn];return{activation:t,clipMax:o,clipMin:r}}else if(t==="LeakyRelu"){let[r]=e?.activation_params||[.01];return{activation:t,alpha:r}}return{activation:t}}});var tt,Dn,zn=Y(()=>{"use strict";tt=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},Dn=e=>`\n      ${e?"value = value + getBiasByOutputCoords(coords);":""}\n      `});var Mn,zo=Y(()=>{"use strict";Mn=e=>`\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n}\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));\n}\n`});var yc,bc,Hr,Xs,wc,Lr,vc,Un,Fr=Y(()=>{"use strict";ye();Se();_e();Ft();zn();yc=(e,t)=>e?`\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          kStart + inputRow,\n          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});\n        `:`\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          globalRow + innerRow,\n          kStart / innerElementSize + inputCol${t?", batchIndices":""});\n        `,bc=(e,t)=>e?`\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\n        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          acc[i] = BCached0 * ACached0[i] + acc[i];\n          acc[i] = BCached1 * ACached1[i] + acc[i];\n          acc[i] = BCached2 * ACached2[i] + acc[i];\n          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}\n        }`:`\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          let ACached = mm_Asub[tileRow + i][k];\n          acc[i] = BCached0 * ACached.x + acc[i];\n          acc[i] = BCached1 * ACached.y + acc[i];\n          acc[i] = BCached2 * ACached.z + acc[i];\n          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}\n        }`,Hr=(e,t,r="f32",o,i=!1,u=32,a=!1,c=32)=>{let p=t[1]*e[1],h=t[0]*e[0],d=i?p:u,y=i?u:p,w=d/t[0],_=u/t[1];if(!((i&&w===4&&e[1]===4||!i&&(w===3||w===4))&&d%t[0]===0&&u%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${i} is true, innerElementSize ${w} and workPerThread[1] ${e[1]} must be 4.\n      Otherwise, innerElementSize ${w} must be 3 or 4.\n  tileAWidth ${d} must be divisible by workgroupSize[0]${t[0]}. tileInner ${u} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`\nvar<workgroup> mm_Asub: array<array<vec${w}<${r}>, ${d/w}>, ${y}>;\nvar<workgroup> mm_Bsub: array<array<vec4<${r}>, ${h/e[0]}>, ${u}>;\n\nconst rowPerThread = ${e[1]};\nconst colPerThread = ${e[0]};\nconst innerElementSize = ${w};\nconst tileInner = ${u};\n\n@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n  let localRow = i32(localId.y);\n  let tileRow = localRow * rowPerThread;\n  let tileCol = i32(localId.x);\n\n  let globalRow =i32(globalId.y) * rowPerThread;\n  let globalCol = i32(globalId.x);\n  let batch = ${a?"0":"i32(globalId.z)"};\n  ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}\n  let globalRowStart = i32(workgroupId.y) * ${p};\n\n  let num_tiles = ${a?`${Math.ceil(c/u)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};\n  var kStart = ${a?`i32(globalId.z) * ${c}`:"0"};\n\n  var acc: array<vec4<${r}>, rowPerThread>;\n\n  // Loop over shared dimension.\n  let tileRowB = localRow * ${_};\n  for (var t = 0; t < num_tiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let inputRow = tileRow + innerRow;\n          let inputCol = tileCol;\n          ${yc(i,o)}\n      }\n\n      // Load one tile of B into local memory.\n      for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {\n          let inputRow = tileRowB + innerRow;\n          let inputCol = tileCol;\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${o?", batchIndices":""});\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\n          ${w===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}\n\n          ${bc(i,w)}\n      }\n\n      workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n  }\n}`},Xs=(e,t)=>e?`\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              kStart + inputRow,\n              globalRowStart + inputCol${t?", batchIndices":""});\n            `:`\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              globalRowStart + inputRow,\n              kStart + inputCol${t?", batchIndices":""});\n            `,wc=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",Lr=(e,t,r="f32",o,i=!1,u=32,a=!1,c=32,p=!1)=>{let h=e[1]*t[1],d=e[0]*t[0],y=i?h:u,w=i?u:h;if(!(w%t[1]===0&&y%t[0]===0&&u%t[1]===0))throw new Error(`tileAHight ${w} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${y} must be divisible by workgroupSize[0]${t[0]}, tileInner ${u} must be divisible by workgroupSize[1]${t[1]}`);let _=w/t[1],v=y/t[0],S=u/t[1],A=p?`\n    let localRow = i32(localId.y);\n    let localCol = i32(localId.x);\n    let globalRowStart = i32(workgroupId.y) * ${h};\n    let globalColStart = i32(workgroupId.x) * ${d};\n\n    // Loop over shared dimension.\n    for (var t = 0; t < num_tiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var inputRow = localRow; inputRow < ${w}; inputRow = inputRow + ${t[1]}) {\n        for (var inputCol = localCol; inputCol < ${y}; inputCol = inputCol + ${t[0]}) {\n          ${Xs(i,o)}\n        }\n      }\n      // Load one tile of B into local memory.\n      for (var inputRow = localRow; inputRow < ${u}; inputRow = inputRow + ${t[1]}) {\n            for (var inputCol = localCol; inputCol < ${d}; inputCol = inputCol + ${t[0]}) {\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n            kStart + inputRow,\n            globalColStart + inputCol${o?", batchIndices":""});\n        }\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      var BCached : array<${r}, colPerThread>;\n      for (var k = 0; k < tileInner; k = k + 1) {\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];\n        }\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let ACached = ${i?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\n                ACached * BCached[innerCol];\n          }\n        }\n      }\n      workgroupBarrier();\n    }\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      let gRow = globalRowStart + localRow + innerRow * ${t[1]};\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        let gCol = globalColStart + localCol + innerCol * ${t[0]};\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n      }\n    }\n    `:`\nlet tileRow = i32(localId.y) * rowPerThread;\nlet tileCol = i32(localId.x) * colPerThread;\n\nlet globalRow = i32(globalId.y) * rowPerThread;\nlet globalCol = i32(globalId.x) * colPerThread;\nlet globalRowStart = i32(workgroupId.y) * ${h};\n\nlet tileRowA = i32(localId.y) * ${_};\nlet tileColA = i32(localId.x) * ${v};\nlet tileRowB = i32(localId.y) * ${S};\n// Loop over shared dimension.\nfor (var t = 0; t < num_tiles; t = t + 1) {\n  // Load one tile of A into local memory.\n  for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < ${v}; innerCol = innerCol + 1) {\n      let inputRow = tileRowA + innerRow;\n      let inputCol = tileColA + innerCol;\n      ${Xs(i,o)}\n    }\n  }\n\n  // Load one tile of B into local memory.\n  for (var innerRow = 0; innerRow < ${S}; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n      let inputRow = tileRowB + innerRow;\n      let inputCol = tileCol + innerCol;\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n        kStart + inputRow,\n        globalCol + innerCol${o?", batchIndices":""});\n    }\n  }\n  kStart = kStart + tileInner;\n  workgroupBarrier();\n\n  // Compute acc values for a single thread.\n  var BCached : array<${r}, colPerThread>;\n  for (var k = 0; k < tileInner; k = k + 1) {\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\n    }\n\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      ${wc(i)}\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\n      }\n    }\n  }\n\n  workgroupBarrier();\n}\n\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n        acc[innerRow][innerCol]);\n  }\n}\n`;return`\n  var<workgroup> mm_Asub : array<array<${r}, ${y}>, ${w}>;\n  var<workgroup> mm_Bsub : array<array<${r}, ${d}>, ${u}>;\n  const rowPerThread = ${e[1]};\n  const colPerThread = ${e[0]};\n  const tileInner = ${u};\n\n@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n    let batch = ${a?"0":"i32(globalId.z)"};\n    ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}\n    let num_tiles = ${a?`${Math.ceil(c/u)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};\n    var kStart = ${a?`i32(globalId.z) * ${c}`:"0"};\n\n    var acc : array<array<${r}, colPerThread>, rowPerThread>;\n\n    // Without this initialization strange values show up in acc.\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = 0.0;\n      }\n    }\n    ${A}\n  }\n`},vc=(e,t,r,o,i,u=!1)=>{let[a,c,p]=i,[h,d,y,w]=o,_=_r(a,p),v=_r(c,p),S=De(o[0].type.tensor),A=()=>{let E=d.rank,P=h.rank,O=`var aIndices: ${d.type.indices};`;for(let R=E-2-1,L=P-1;R>=0;R--,L--)O+=`\naIndices[${R}] = ${P>1?`batchIndices[${L}]`:"batchIndices"};`;return _.forEach(R=>{O+=`\naIndices[${R}] = 0;`}),O+=`\naIndices[${E-2}] = u32(row);\n                   aIndices[${E-1}] = u32(colIn);`,O},I=()=>{let E=y.rank,P=h.rank,O=`var bIndices: ${y.type.indices};`;for(let R=E-2-1,L=P-1;R>=0;R--,L--)O+=`\nbIndices[${R}] = ${P>1?`batchIndices[${L}]`:"batchIndices"};`;return v.forEach(R=>{O+=`\nbIndices[${R}] = 0;`}),O+=`\nbIndices[${E-2}] = u32(row);\n                   bIndices[${E-1}] = u32(colIn);`,O};return`\n    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${h.type.indices}) -> ${tt(e,S)} {\n      var value = ${tt(e,S)}(0.0);\n      let col = colIn * ${e};\n      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)\n      {\n        ${A()}\n        value = ${d.getByIndices("aIndices")};\n      }\n      return value;\n    }\n\n    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${h.type.indices}) -> ${tt(e,S)} {\n      var value = ${tt(e,S)}(0.0);\n      let col = colIn * ${e};\n      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)\n      {\n        ${I()}\n        value = ${y.getByIndices("bIndices")};\n      }\n      return value;\n    }\n\n    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${tt(e,S)}) {\n      let col = colIn * ${e};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {\n        var value = valueIn;\n        let coords = vec3<i32>(batch, row, colIn);\n        ${t?`value = value + ${u?"bias[colIn]":`${tt(e,S)}(bias[row])`};`:""}\n        ${r}\n        ${w.setByIndices("vec3<u32>(coords)","value")}\n      }\n    }\n    `},Un=(e,t,r,o,i=!1)=>{let u=e[0].dims,a=e[1].dims,c=u.slice(0,-2),p=a.slice(0,-2),h=o?o.slice(0,-2):r.slice(0,-2),d=M.size(h),y=u[u.length-2],w=u[u.length-1],_=a[a.length-1],v=w%4===0&&_%4===0,S=y<=8?[4,1,1]:[4,4,1],A=[8,8,1],I=[Math.ceil(_/A[0]/S[0]),Math.ceil(y/A[1]/S[1]),Math.ceil(d/A[2]/S[2])],x=v?4:1,E=[...c,y,w/x],P=E.length,O=[...p,w,_/x],R=O.length,L=[d,y,_/x],N=[{type:6,data:y},{type:6,data:_},{type:6,data:w}];xt(t,N),N.push(...Z(h,E,O));let K=["rank","rank"],Q=e.length>2;Q&&(N.push(...Z(e[2].dims)),K.push("rank")),N.push(...Z(L));let he=W=>{let se=h.length,Ce=An("batchDims",e[0].dataType,se,1),We=De(e[0].dataType),ee=U("a",e[0].dataType,P,x),ae=U("b",e[1].dataType,R,x),Ae=j("result",e[0].dataType,L.length,x),me=[ee,ae];if(Q){let G=i?x:1;me.push(U("bias",e[2].dataType,e[2].dims.length,G))}let ie=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Ct(t,ie);let ue=De(Ae.type.tensor),le=St(t,Ae.type.value,ue),qe=vc(x,Q,le,[Ce,ee,ae,Ae],[c,p,h],i);return`\n  ${W.registerUniforms(ie).registerInternalVariables(Ce).declareVariables(...me,Ae)}\n  ${qe}\n  ${v?Hr(S,A,We,Ce):Lr(S,A,We,Ce)}\n                   `};return{name:"MatMul",shaderCache:{hint:`${S};${t.activation};${v};${i}`,inputDependencies:K},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:I[0],y:I[1],z:I[2]},programUniforms:N}),getShaderSource:he}}});var $c,Qs,Js=Y(()=>{"use strict";ye();Lt();_e();Ft();zn();zo();Fr();$c=(e,t,r,o,i=!1,u,a=4,c=4,p=4,h="f32")=>{let d=Q=>{switch(Q){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${h}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${Q} is not supported.`)}},y=Q=>{switch(Q){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${Q} is not supported.`)}},w=e?`\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\n    `:`\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\n    `,_=e?`\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    `:`\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    `,v=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",S=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",A=e?"row":"col",I=e?"col":"row",x=`\n    let inChannels = i32(uniforms.w_shape[2]);\n    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n    let outRow = ${A} / outWidth;\n    let outCol = ${A} % outWidth;\n\n    let WRow = ${I} / (i32(uniforms.w_shape[1]) * inChannels);\n    let WCol = ${I} / inChannels % i32(uniforms.w_shape[1]);\n    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];\n    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];\n    let xCh = ${I} % inChannels;\n    var resData = ${tt(a,h)}(0.0);\n    // The bounds checking is always needed since we use it to pad zero for\n    // the \'same\' padding type.\n    if (xRow >= 0 && xRow < ${v} && xCol >= 0 && xCol < ${S}) {\n      ${w}\n      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));\n      ${d(a)}\n    }\n    return resData;`,E=e?t&&o?`\n    let col = colIn * ${a};\n    ${x}`:`\n    let col = colIn * ${a};\n    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {\n      ${x}\n    }\n    return ${tt(a,h)}(0.0);`:o&&r?`\n    let col = colIn * ${a};\n    ${x}`:`\n    let col = colIn * ${a};\n    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {\n      ${x}\n    }\n    return ${tt(a,h)}(0.0);`,P=`${y(c)}`,O=tt(p,h),R=e?tt(a,h):tt(c,h),L=e?tt(c,h):tt(a,h),N=St(u,O,h);return`\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${R} {\n      ${e?E:P}\n    }\n\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${L} {\n      ${e?P:E}\n    }\n\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${O}) {\n      let col = colIn * ${p};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)\n      {\n      var value = valueIn;\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      ${_}\n      ${Dn(i)}\n      ${N}\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n      }\n    }`},Qs=(e,t,r,o,i,u,a,c)=>{let p=t.format==="NHWC",h=p?e[0].dims[3]:e[0].dims[1],d=r[0],y=p?r[2]:r[3],w=p?r[1]:r[2],_=p?r[3]:r[1],v=p&&(h%4===0||h%3===0)&&_%4===0,S=p?_:y*w,A=p?y*w:_,I=[8,8,1],x=o<=8?[4,1,1]:[4,4,1],E=[Math.ceil(S/I[0]/x[0]),Math.ceil(A/I[1]/x[1]),Math.ceil(d/I[2]/x[2])];Ve("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${E}`);let P=v?p&&h%4!==0?3:4:1,O=I[1]*x[1],R=I[0]*x[0],L=Math.max(I[0]*P,I[1]),N=o%O===0,K=i%R===0,Q=u%L===0,he=v?[P,4,4]:[1,1,1],W=[{type:6,data:o},{type:6,data:i},{type:6,data:u},{type:6,data:[t.pads[0],t.pads[1]]},{type:6,data:t.strides},{type:6,data:t.dilations}];xt(t,W),W.push(...Z(e[0].dims,e[1].dims));let se=["rank","rank"];a&&(W.push(...Z(e[2].dims)),se.push("rank")),W.push(...Z(r));let Ce=We=>{let ee=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Ct(t,ee);let ae=v?4:1,Ae=De(e[0].dataType),me=`\n      fn setOutputAtIndex(flatIndex : i32, value : ${v?`vec4<${Ae}>`:Ae}) {\n        result[flatIndex] = ${v?`vec4<${Ae}>`:Ae}(value);\n      }\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${v?`vec4<${Ae}>`:Ae}) {\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\n        setOutputAtIndex(flatIndex ${v?"/ 4":""}, value);\n      }`,ie=U("x",e[0].dataType,e[0].dims.length,P===3?1:P),ue=U("w",e[1].dataType,e[1].dims.length,ae),le=[ie,ue],qe=j("result",e[0].dataType,r.length,ae);if(a){let G=U("bias",e[2].dataType,e[2].dims.length,ae);le.push(G),me+=`\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${v?`vec4<${Ae}>`:Ae} {\n          return bias[coords.${p?"w":"y"}${v?"/ 4":""}];\n        }`}return`\n        ${Mn("uniforms.result_strides")}\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\n        ${We.registerUniforms(ee).declareVariables(...le,qe)}\n        ${me}\n        ${$c(p,N,K,Q,a,t,he[0],he[1],he[2],Ae)}\n        ${v?Hr(x,I,Ae,void 0,!p,L):Lr(x,I,Ae,void 0,!p,L,!1,void 0,c)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${t.cacheKey};${P};${v};${N};${K};${Q};${O};${R};${L}`,inputDependencies:se},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:E[0],y:E[1],z:E[2]},programUniforms:W}),getShaderSource:Ce}}});var Mo,eu,tu=Y(()=>{"use strict";ye();Se();_e();Uo();Ft();Mo=(e,t,r)=>{let o=e.length>2,i=o?"value += b[output_channel];":"",u=e[0].dims,a=e[1].dims,c=a[0]/t.group,p=t.format==="NHWC",h=Vn(u,a,t.dilations,t.pads,t.strides,p),d=M.size(h),y=[{type:12,data:d},{type:12,data:t.dilations},{type:12,data:[t.strides[0],t.strides[1]]},{type:12,data:[t.pads[0],t.pads[1]]},{type:12,data:c}];xt(t,y),y.push(...Z(u,a));let w=["rank","rank"];o&&(y.push(...Z(e[2].dims)),w.push("rank")),y.push(...Z(h));let _=v=>{let S=j("output",e[0].dataType,h.length),A=De(S.type.tensor),I=St(t,S.type.value,A),x=U("x",e[0].dataType,u.length),E=U("w",e[1].dataType,a.length),P=[x,E];o&&P.push(U("b",e[2].dataType,e[2].dims.length));let O=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:t.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];return Ct(t,O),`\n  ${v.registerUniforms(O).declareVariables(...P,S)}\n\n  ${v.mainStart()}\n    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let outputIndices = ${S.offsetToIndices("global_idx")};\n    let batch: u32 = outputIndices[0];\n    let output_channel: u32 = outputIndices[${p?3:1}];\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${p?1:2}], outputIndices[${p?2:3}]) * uniforms.strides - uniforms.pads;\n    let group_id: u32 = output_channel / uniforms.output_channels_per_group;\n\n    var value: ${S.type.value} = ${S.type.value}(0);\n    for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {\n      let input_channel = group_id * uniforms.w_shape[1] + wInChannel;\n      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {\n        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];\n\n        if (xHeight < 0u || xHeight >= uniforms.x_shape[${p?1:2}]) {\n          continue;\n        }\n\n        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {\n          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];\n          if (xWidth < 0u || xWidth >= uniforms.x_shape[${p?2:3}]) {\n            continue;\n          }\n\n          let xVal = ${p?x.get("batch","xHeight","xWidth","input_channel"):x.get("batch","input_channel","xHeight","xWidth")};\n          let wVal = ${E.get("output_channel","wInChannel","wHeight","wWidth")};\n          value += xVal*wVal;\n        }\n      }\n    }\n    ${i}\n    ${I}\n    ${S.setByOffset("global_idx","value")}\n  }`};return{name:"GroupedConv",shaderCache:{hint:t.cacheKey,inputDependencies:w},getRunData:()=>({outputs:[{dims:r?r(h):h,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:y}),getShaderSource:_}},eu=(e,t,r)=>{let o=e.length>2,i=Me(r[3]),u=Me(r[2]),a=M.size(r)/i/u,c=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/i],p=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/i],h=[r[0],r[1],r[2],r[3]/i],d=[{type:12,data:a},{type:6,data:[t.strides[0],t.strides[1]]},{type:6,data:[t.pads[0],t.pads[1]]}];xt(t,d),d.push(...Z(c,p,h));let y=(u-1)*t.strides[1]+p[1],w=_=>{let v=j("output",e[0].dataType,h.length,i),S=De(v.type.tensor),A=St(t,v.type.value,S),I=U("x",e[0].dataType,c.length,i),x=U("w",e[1].dataType,p.length,i),E=[I,x];o&&E.push(U("b",e[2].dataType,e[2].dims,i));let P=o?"value += b[output_channel];":"",O=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Ct(t,O),`\n  ${_.registerUniforms(O).declareVariables(...E,v)}\n  ${_.mainStart()}\n    ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let width0 = uniforms.output_shape[3];\n    let output_channel = global_idx % width0;\n    var index1 = global_idx / width0;\n    let width1 = uniforms.output_shape[2] / ${u}u;\n    let col = (index1 % width1) * ${u}u;\n    index1 = index1 / width1;\n    let row = index1 % uniforms.output_shape[1];\n    let batch = index1 / uniforms.output_shape[1];\n\n    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;\n\n    var x_vals: array<${I.type.value}, ${y}>;\n    var values: array<${v.type.value}, ${u}>;\n    let input_channel = output_channel;\n    // Use constant instead of uniform can give better performance for w\'s height/width.\n    for (var w_height: u32 = 0u; w_height < ${p[0]}; w_height++) {\n      let x_height = x_corner.x + i32(w_height);\n      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {\n        for (var i = 0; i < ${y}; i++) {\n          let x_width = x_corner.y + i;\n          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {\n            x_vals[i] = ${I.get("batch","u32(x_height)","u32(x_width)","input_channel")};\n          } else {\n            x_vals[i] = ${I.type.value}(0);\n          }\n        }\n        for (var w_width: u32 = 0u; w_width < ${p[1]}; w_width++) {\n          let w_val = ${x.get("w_height","w_width","0","output_channel")};\n          for (var i = 0u; i < ${u}u; i++) {\n            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);\n          }\n        }\n      }\n    }\n\n    for (var i = 0u; i < ${u}u; i++) {\n      var value = values[i];\n      ${P}\n      ${A}\n      ${v.set("batch","row","col + i","output_channel","value")};\n    }\n  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${t.cacheKey};${i};${u};${y};${p[0]};${p[1]}`,inputDependencies:o?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:d}),getShaderSource:w}}});var Vo,_c,ru,Wo=Y(()=>{"use strict";ye();Se();Fr();_e();Ft();Vo=(e,t,r,o,i=!1)=>{let u=e[0].dims,a=e[1].dims,c=u[u.length-2],p=a[a.length-1],h=u[u.length-1],d=Me(p),y=Me(h),w=Me(c),_=M.size(r)/d/w,v=e.length>2,S=o?o.slice(0,-2):r.slice(0,-2),I=[M.size(S),c,p],x=[{type:12,data:_},{type:12,data:c},{type:12,data:p},{type:12,data:h}];xt(t,x),x.push(...Z(S,u,a)),v&&x.push(...Z(e[2].dims)),x.push(...Z(I));let E=P=>{let O=An("batch_dims",e[0].dataType,S.length),R=U("a",e[0].dataType,u.length,y),L=U("b",e[1].dataType,a.length,d),N=j("output",e[0].dataType,I.length,d),K=De(N.type.tensor),Q=St(t,N.type.value,K),he=[R,L],W="";if(v){let ie=i?d:1;he.push(U("bias",e[2].dataType,e[2].dims.length,ie)),W=`${i?`value += bias[col / ${ie}];`:`value += ${N.type.value}(bias[row + i]);`}`}let se=u.slice(0,-2),Ce=a.slice(0,-2),We=_r(se,S),ee=_r(Ce,S),ae=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Ct(t,ae);let Ae=(ie,ue)=>{let le=ie.rank,qe=ie.name;if(le===2)return`var ${qe}_indices = ${ie.type.indices}(0u, 0u);`;let G=O.rank,ne=`var ${qe}_indices: ${ie.type.indices};`;for(let xe=le-2-1,Ke=G-1;xe>=0;xe--,Ke--)ne+=`\n${qe}_indices[${xe}] = ${G>1?`batch_indices[${Ke}]`:"batch_indices"};`;return ue.forEach(xe=>{ne+=`\n${qe}_indices[${xe}] = 0;`}),ne+=`${qe}_indices[${le-2}] = 0u;\n                     ${qe}_indices[${le-1}] = 0u;`,ne},me=()=>{let ie=`var a_data: ${R.type.value};`;for(let ue=0;ue<y;ue++)ie+=`\n              let b_data${ue} = b[(b_offset + (k + ${ue}) * uniforms.N + col) / ${d}];`;for(let ue=0;ue<w;ue++){ie+=`a_data = a[(a_offset + (row + ${ue}) * uniforms.K + k) / ${y}];`;for(let le=0;le<y;le++)ie+=`\n            values[${ue}] = fma(${L.type.value}(a_data${y===1?"":`[${le}]`}), b_data${le}, values[${ue}]);\n`}return ie};return`\n  ${P.registerUniforms(ae).registerInternalVariables(O).declareVariables(...he,N)}\n  ${P.mainStart()}\n    ${P.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let col = (global_idx % (uniforms.N / ${d})) * ${d};\n    var index1 = global_idx / (uniforms.N / ${d});\n    let stride1 = uniforms.M / ${w};\n    let row = (index1 % stride1) * ${w};\n    let batch = index1 / stride1;\n\n    ${r.length===2?"":`let batch_indices = ${O.offsetToIndices("batch")};`}\n    ${Ae(R,We)}\n    let a_offset = ${R.indicesToOffset("a_indices")};\n    ${Ae(L,ee)}\n    let b_offset = ${L.indicesToOffset("b_indices")};\n    var values: array<${N.type.value}, ${w}>;\n    for (var k: u32 = 0u; k < uniforms.K; k = k + ${y}) {\n      ${me()}\n    }\n    for (var i = 0u; i < ${w}u; i++) {\n      var value = values[i];\n      ${W}\n      ${Q}\n      let cur_indices = ${N.type.indices}(batch, row + i, col);\n      let offset = ${N.indicesToOffset("cur_indices")};\n      ${N.setByOffset(`offset / ${d}`,"value")};\n    }\n  }\n  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activation};${d};${y};${w};${i}`,inputDependencies:v?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:x}),getShaderSource:E}},_c=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},ru=e=>{_c(e.inputs);let t=It.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can\'t use matmul on the given tensors");let r=t[t.length-1],o=e.inputs[0].dims[e.inputs[0].dims.length-1];r<8&&o<8?e.compute(Vo(e.inputs,{activation:""},t)):e.compute(Un(e.inputs,{activation:""},t))}});var Vn,No,Sc,nu,Go,xc,Cc,Ho,Uo=Y(()=>{"use strict";Se();Js();Fr();tu();Ft();Wo();Sr();Vn=(e,t,r,o,i,u)=>{let a=e[0],c=e.slice(u?1:2,u?3:4),p=c.length,h=t[0],y=t.slice(2).map((v,S)=>v+(v-1)*(r[S]-1)),_=c.map((v,S)=>v+o[S]+o[S+p]).map((v,S)=>Math.floor((v-y[S]+i[S])/i[S]));return _.splice(0,0,a),_.splice(u?3:1,0,h),_},No=[2,3,1,0],Sc=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support conv 1D and 2D");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[1]*t.group;if(r!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let i=e[0].dims.length-2;if(t.dilations.length!==i)throw new Error(`dilations should be ${i}D`);if(t.strides.length!==i)throw new Error(`strides should be ${i}D`);if(t.pads.length!==i*2)throw new Error(`pads should be ${i*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},nu=(e,t)=>{let r=e.kernelShape.slice();for(let u=2;u<t[1].dims.length;++u)r[u-2]===0&&(r[u-2]=t[1].dims[u]);let o=e.pads.slice();nr.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,o,e.format==="NHWC",e.autoPad);let i=Object.assign({},e);return Object.assign(i,{kernelShape:r,pads:o}),i},Go=e=>{let t=Bn(e),r=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],i=e.dilations,u=e.group,a=e.kernel_shape,c=e.pads,p=e.strides,h=e.w_is_const();return{autoPad:o,format:r,dilations:i,group:u,kernelShape:a,pads:c,strides:p,wIsConst:h,...t,cacheKey:`${e.format};${t.activation};`}},xc=(e,t,r)=>{let o=nu(r,t),i=r.format==="NHWC";if(r.group!==1){if(!e.adapterInfo.isArchitecture("ampere")&&i&&t[1].dims[0]===r.group&&t[1].dims[1]===1&&r.dilations[0]===1&&r.dilations[1]===1){let L=Vn(t[0].dims,t[1].dims,r.dilations,o.pads,r.strides,i),N=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=N);let K=[t[0],N];t.length===3&&K.push(t[2]),e.compute(eu(K,o,L),{inputs:K})}else e.compute(Mo(t,o));return}let u=t.length===3,a=t[0].dims[i?1:2],c=t[0].dims[i?2:3],p=t[0].dims[i?3:1],h=t[1].dims[2],d=t[1].dims[3],y=Vn(t[0].dims,t[1].dims,r.dilations,o.pads,r.strides,i),w=y[i?1:2],_=y[i?2:3],v=y[i?3:1],S=i&&h===a&&d===c&&r.pads[0]===0&&r.pads[1]===0;if(S||h===1&&d===1&&r.dilations[0]===1&&r.dilations[1]===1&&r.strides[0]===1&&r.strides[1]===1&&r.pads[0]===0&&r.pads[1]===0){let R=y[0],L,N,K,Q=[];if(i){let se=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];if(r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=se),S){let Ce=a*c*p;L=t[0].reshape([1,R,Ce]),N=se.reshape([1,Ce,v]),K=[1,R,v]}else L=t[0].reshape([R,a*c,p]),N=se.reshape([1,p,v]),K=[R,w*_,v];Q.push(L),Q.push(N)}else L=t[0].reshape([R,p,a*c]),N=t[1].reshape([1,v,p]),K=[R,v,w*_],Q.push(N),Q.push(L);u&&Q.push(t[2]);let he=K[2],W=Q[0].dims[Q[0].dims.length-1];he<8&&W<8?e.compute(Vo(Q,o,y,K,i),{inputs:Q}):e.compute(Un(Q,o,y,K,i),{inputs:Q});return}let A=!0,I=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=I);let x=[t[0],I];u&&x.push(t[2]);let E=i?w*_:v,P=i?v:w*_,O=h*d*p;e.compute(Qs(x,o,y,E,P,O,u,A),{inputs:x})},Cc=(e,t)=>{let r=t.format==="NHWC",o=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&o.push(e.inputs[2]);let i=[0,t.pads[0],0,t.pads[1]],u=[1].concat(t.strides),a=[1].concat(t.dilations),c=[1].concat(t.kernelShape),p=nu({...t,pads:i,strides:u,dilations:a,kernelShape:c},o);e.compute(Mo(o,p,h=>r?[h[0],h[2],h[3]]:[]))},Ho=(e,t)=>{Sc(e.inputs,t),e.inputs[0].dims.length===3?Cc(e,t):xc(e,e.inputs,t)}});var Ac,ou,iu=Y(()=>{"use strict";ye();Lt();_e();Ft();zn();zo();Fr();Ac=(e,t=!1,r,o,i=4)=>{let u=I=>{switch(I){case 1:return"return w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];";case 4:return`\n            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);\n            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);\n            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);\n            let v0 = w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];\n            let v1 = w[getIndexFromCoords4D(coord1, vec4<i32>(uniforms.w_shape))];\n            let v2 = w[getIndexFromCoords4D(coord2, vec4<i32>(uniforms.w_shape))];\n            let v3 = w[getIndexFromCoords4D(coord3, vec4<i32>(uniforms.w_shape))];\n            return ${o}(v0, v1, v2, v3);\n            `;default:throw new Error(`innerElementSize ${I} is not supported.`)}},a=e?`\n      let coord = vec4<i32>(batch, iXR, iXC, xCh);\n      `:`\n      let coord = vec4<i32>(batch, xCh, iXR, iXC);\n      `,c=e?`\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    `:`\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    `,p=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",h=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",d=e?"row":"col",y=e?"col":"row",w=`\n      let inChannels = ${e?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      let outRow = ${d} / outWidth;\n      let outCol = ${d} % outWidth;\n\n      let WRow = ${y} / (uniforms.filter_dims[1] * inChannels);\n      let WCol = ${y} / inChannels % uniforms.filter_dims[1];\n      let xR = f32(outRow - uniforms.pads[0] + uniforms.dilations[0] * WRow) / f32(uniforms.strides[0]);\n      let xC = f32(outCol - uniforms.pads[1] + uniforms.dilations[1] * WCol) / f32(uniforms.strides[1]);\n      if (xR < 0.0 || xR >= f32(${p}) || fract(xR) > 0.0) {\n        return ${o}(0.0);\n      }\n      if (xC < 0.0 || xC >= f32(${h}) || fract(xC) > 0.0) {\n        return ${o}(0.0);\n      }\n      let iXR = i32(xR);\n      let iXC = i32(xC);\n      let xCh = ${y} % inChannels;\n      ${a}\n      return x[getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape))/${i}];`,_=e?`\n      let col = colIn * ${i};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {\n        ${w}\n      }\n      return ${o}(0.0);`:`\n      let col = colIn * ${i};\n      if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {\n        ${w}\n      }\n      return ${o}(0.0);`,v=`\n      let col = colIn * ${i};\n      let inChannels = ${e?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};\n      let coordX = uniforms.filter_dims[0] - 1 - row / (uniforms.filter_dims[1] * inChannels);\n      let coordY = uniforms.filter_dims[1] - 1 - (row / inChannels) % uniforms.filter_dims[1];\n      if (${e?"row < uniforms.dim_inner && col < uniforms.dim_b_outer":"row < uniforms.dim_inner && col < uniforms.dim_a_outer"}  && coordX >= 0 && coordY >= 0) {\n        let rowInner = row % inChannels;\n        let coord = vec4<i32>(coordX, coordY, col, rowInner);\n        ${u(i)}\n      }\n      return ${o}(0.0);\n      `,S=St(r,o);return`\n  fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${o} {\n    ${e?_:v}\n  }\n\n  fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${o} {\n    ${e?v:_}\n  }\n\n  fn mm_write(batch: i32, row : i32, colIn : i32, valueInput : ${o}) {\n    let col = colIn * ${i};\n    if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {\n      var value = valueInput;\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      ${c}\n      ${Dn(t)}\n      ${S}\n      result[getIndexFromCoords4D(coords, vec4<i32>(uniforms.result_shape))/${i}] = value;\n    }\n  }`},ou=(e,t,r,o,i,u,a,c)=>{let p=t.format==="NHWC",h=p?e[0].dims[3]:e[0].dims[1],d=r[0],y=p?r[2]:r[3],w=p?r[1]:r[2],_=p?r[3]:r[1],v=p&&h%4===0&&h%3&&_%4===0,S=p?_:y*w,A=p?y*w:_,I=[8,8,1],x=o<=8?[4,1,1]:[4,4,1],E=[Math.ceil(S/I[0]/x[0]),Math.ceil(A/I[1]/x[1]),Math.ceil(d/I[2]/x[2])];Ve("verbose",()=>`[conv_backprop_mm_webgpu] dispatch = ${E}`);let P=v?4:1,O=Math.max(I[0]*P,I[1]),R=v?4:1,L=[t.kernelShape[p?1:2],t.kernelShape[p?2:3]],N=[L[0]+(t.dilations[0]<=1?0:(L[0]-1)*(t.dilations[0]-1)),L[1]+(t.dilations[1]<=1?0:(L[1]-1)*(t.dilations[1]-1))],K=[N[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),N[1]-1-Math.floor((t.pads[1]+t.pads[3])/2)],Q=[{type:6,data:o},{type:6,data:i},{type:6,data:u},{type:6,data:t.strides},{type:6,data:t.dilations},{type:6,data:L},{type:6,data:K}];xt(t,Q),Q.push(...Z(e[0].dims,e[1].dims));let he=["rank","rank"];a&&(Q.push(...Z(e[2].dims)),he.push("rank")),Q.push(...Z(r));let W=se=>{let Ce=U("x",e[0].dataType,e[0].dims.length,R),We=U("w",e[1].dataType,e[1].dims.length,1),ee=j("result",e[0].dataType,r.length,R),ae=[Ce,We],Ae="";if(a){let ue=U("bias",e[2].dataType,e[2].dims.length,R);ae.push(ue),Ae+=`\n          fn getBiasByOutputCoords(coords : vec4<i32>) -> ${ue.type.value} {\n            return bias[coords.${p?"w":"y"}${v?"/ 4":""}];\n          }`}let me=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"strides",type:"i32",length:2},{name:"dilations",type:"i32",length:2},{name:"filter_dims",type:"i32",length:L.length},{name:"pads",type:"i32",length:K.length}];Ct(t,me);let ie=De(e[0].dataType,1);if(ie!=="f16"&&ie!=="f32")throw new Error(`elemType ${ie} is not supported.`);return`\n        ${Mn("uniforms.result_strides")}\n        ${se.registerUniforms(me).declareVariables(...ae,ee)};\n        ${Ae}\n        ${Ac(p,a,t,Ce.type.value,P)}\n        ${v?Hr(x,I,ie,void 0,!p,O):Lr(x,I,ie,void 0,!p,O,!1,void 0,c)}`};return{name:"Conv2DTransposeMatMul",shaderCache:{hint:`${t.cacheKey};${x};${I};${v}`,inputDependencies:he},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:E[0],y:E[1],z:E[2]},programUniforms:Q}),getShaderSource:W}}});var Ic,Lo,au=Y(()=>{"use strict";ye();Lt();Se();_e();Ic=(e,t,r,o,i,u=!1,a,c,p=!1)=>{let h=p?1:2,d=p?2:3,y=p?3:1,w=u?2:1,_=`\n  fn setOutputAtIndex(flatIndex : u32, value : ${u?`vec4<${a}>`:a}) {\n    result[flatIndex] = ${u?`vec4<${a}>`:a}(value);\n  }`;o&&(_+=`\n    fn getBiasByOutputCoords(coords : vec4<u32>) -> ${u?`vec4<${a}>`:a} {\n      return bias[coords.${p?"w":"y"}${u?"/ 4":""}];\n    }`);let v=u?4:1,S=U("W",t[1].dataType,t[1].dims.length,v),A=U("Dy",t[0].dataType,t[0].dims.length,v),I=[A,S];o&&I.push(U("bias",t[2].dataType,[r[y]].length,v));let x=j("result",t[0].dataType,r.length,v),E=`{\n        let batch: u32 = ${i?"global_id.z":"workgroup_id.z"} / uniforms.result_shape[1];\n        let r = ${i?"global_id.z":"workgroup_id.z"} % uniforms.result_shape[1];\n        let c = ${i?"global_id.y":"workgroup_id.y"} * ${w};\n        let d1: u32 = ${i?"global_id.x":"workgroup_id.x"} * 4;\n\n        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(uniforms.pads);\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd: array<vec4<${a}>, ${w}>;\n        for (var i = 0; i < ${w}; i++) {\n          dotProd[i] = vec4<${a}>(0.0);\n        }\n        for (var wR: u32 = 0; wR < uniforms.filter_dims[0]; wR = wR + 1) {\n          var dyR = (${a}(dyCorner.x) + ${a}(wR)) / ${a}(uniforms.strides.x);\n          let wRPerm = uniforms.filter_dims[0] - 1 - wR;\n          if (dyR < 0.0 || dyR >= ${a}(uniforms.Dy_shape[1]) ||\n              fract(dyR) > 0.0 || wRPerm < 0) {\n            continue;\n          }\n          let idyR: u32 = u32(dyR);\n\n          for (var wC: u32 = 0; wC < uniforms.filter_dims[1]; wC = wC + 1) {\n            let dyC = (${a}(dyCorner.y) + ${a}(wC)) / ${a}(uniforms.strides.y);\n            let dyC2 = (${a}(dyCorner.y) + 1.0 + ${a}(wC)) / ${a}(uniforms.strides.y);\n            let wCPerm = uniforms.filter_dims[1] - 1 - wC;\n            if (wCPerm < 0) {\n              continue;\n            }\n            var bDyCVal = true;\n            var bDyCVal2 = true;\n            if (dyC < 0.0 || dyC >= ${a}(uniforms.Dy_shape[2]) ||\n                fract(dyC) > 0.0) {\n              bDyCVal = false;\n            }\n            if (dyC2 < 0.0 || dyC2 >= ${a}(uniforms.Dy_shape[2]) ||\n                fract(dyC2) > 0.0) {\n              bDyCVal2 = false;\n            }\n\n            let idyC: u32 = u32(dyC);\n            let idyC2: u32 = u32(dyC2);\n            if (bDyCVal && bDyCVal2) {\n              let d2Length = uniforms.Dy_shape[3];\n              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n\n                xValue =  ${A.get("batch","idyR","idyC2","d2")};\n\n                dotProd[1] = dotProd[1] + vec4<${a}>(dot(xValue, wValue0),\n                                                    dot(xValue, wValue1),\n                                                    dot(xValue, wValue2),\n                                                    dot(xValue, wValue3));\n              }\n            } else if (bDyCVal) {\n              let d2Length = uniforms.Dy_shape[${y}];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n              }\n            } else if (bDyCVal2) {\n              let d2Length = uniforms.Dy_shape[3];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC2","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[1] = dotProd[1] + tmpval;\n              }\n            }\n          }\n        }\n\n        for (var i: u32 = 0; i < ${w}; i = i + 1) {\n          let value = dotProd[i] + ${o?"bias[c+i]":`vec4<${a}>(0.0)`};\n          ${x.set("batch","r","c + i","d1","value")};\n        }\n      }`,P=`\n          let outputIndices = ${x.offsetToIndices("global_idx")};\n          let batch = ${x.indicesGet("outputIndices",0)};\n          let d1 = ${x.indicesGet("outputIndices",y)};\n          let r = ${x.indicesGet("outputIndices",h)};\n          let c = ${x.indicesGet("outputIndices",d)};\n          let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;\n          let dyRCorner = dyCorner.x;\n          let dyCCorner = dyCorner.y;\n          let groupId = d1 / uniforms.output_channels_per_group;\n          let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;\n          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n          // ? = to be determined. : = across all values in that axis.\n          var dotProd = ${a}(0.0);\n          for (var wR: u32 = 0; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {\n            if (wR % uniforms.dilations.x != 0) {\n              continue;\n            }\n            let dyR = (${a}(dyRCorner) + ${a}(wR)) / ${a}(uniforms.strides[0]);\n            let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;\n            if (dyR < 0.0 || dyR >= ${a}(uniforms.Dy_shape[${h}]) || fract(dyR) > 0.0 ||\n                wRPerm < 0) {\n              continue;\n            }\n            let idyR: u32 = u32(dyR);\n\n            for (var wC: u32 = 0; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {\n              if (wC % uniforms.dilations.y != 0) {\n                continue;\n              }\n              let dyC = (${a}(dyCCorner) + ${a}(wC)) / ${a}(uniforms.strides.y);\n              let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;\n              if (dyC < 0.0 || dyC >= ${a}(uniforms.Dy_shape[${d}]) ||\n                  fract(dyC) > 0.0 || wCPerm < 0) {\n                continue;\n              }\n              let idyC: u32 = u32(dyC);\n              var inputChannel = groupId * uniforms.input_channels_per_group;\n              for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group; d2 = d2 + 1) {\n                let xValue = ${p?A.get("batch","idyR","idyC","inputChannel"):A.get("batch","inputChannel","idyR","idyC")};\n                let wValue = ${S.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)")};\n                dotProd = dotProd + xValue * wValue;\n                inputChannel = inputChannel + 1;\n              }\n            }\n          }\n          let value = dotProd + ${o?"bias[d1]":`${a}(0.0)`};\n          ${x.setByOffset("global_idx","value")};\n        `;return`\n  ${e.registerUniforms(c).declareVariables(...I,x)}\n  ${_}\n\n    ${e.mainStart()}\n    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};\n  ${u?E:P}}`},Lo=(e,t,r)=>{let o=e.length>2,i=t.outputShape,u=M.size(i),a=[Math.ceil(u/64),1,1];Ve("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${a}`);let c=t.format==="NHWC",p=["rank","rank"],h=[t.strides[0],t.strides[1]],d=[t.kernelShape[c?1:2],t.kernelShape[c?2:3]],y=[t.dilations[0],t.dilations[1]],w=[d[0]+(t.dilations[0]<=1?0:(t.kernelShape[c?1:2]-1)*(t.dilations[0]-1)),d[1]+(t.dilations[1]<=1?0:(t.kernelShape[c?2:3]-1)*(t.dilations[1]-1))],_=[w[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),w[1]-1-Math.floor(t.pads[1]+t.pads[3])/2],v=!1,S=t.group,A=e[1].dims,I=A[0]/S,x=A[1],E=[{type:12,data:u},{type:12,data:h},{type:12,data:d},{type:12,data:y},{type:12,data:w},{type:6,data:_},{type:12,data:I},{type:12,data:x},...Z(e[0].dims,e[1].dims)];o&&(E.push(...Z(e[2].dims)),p.push("rank")),E.push(...Z(i));let P=a[1]===1&&a[2]===1,O=R=>{let L=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:h.length},{name:"filter_dims",type:"u32",length:d.length},{name:"dilations",type:"u32",length:d.length},{name:"effective_filter_dims",type:"u32",length:w.length},{name:"pads",type:"i32",length:_.length},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],N=De(e[0].dataType);return`${Ic(R,e,i,o,P,v,N,L,c)}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${t.cacheKey};`,inputDependencies:p},getRunData:()=>({dispatchGroup:{x:a[0],y:a[1],z:a[2]},outputs:[{dims:r?r(i):i,dataType:e[0].dataType}],programUniforms:E}),getShaderSource:O}}});var Tc,Ec,Pc,su,uu,kc,Oc,Rc,Bc,du,lu=Y(()=>{"use strict";iu();au();Ft();Sr();Tc=(e,t,r,o,i,u)=>(e-1)*t+r+(o-1)*i+1-u,Ec=(e,t,r,o,i)=>{let u=Math.floor(e/2);t==="SAME_UPPER"?(r[o]=u,r[i]=e-u):t==="SAME_LOWER"&&(r[o]=e-u,r[i]=u)},Pc=(e,t,r,o,i,u,a,c,p,h)=>{let d=e.length-2,y=h.length===0;if(p.length===0)for(let v=0;v<d;++v)p.push(0);let w=e[0],_=t[c?3:1]*i;for(let v=0,S=e.length-d-(c?1:0);v<d;++v,++S){let A=e[S],I=y?A*a[v]:h[v],x=Tc(A,a[v],u[v],t[S],r[v],I);Ec(x,o,u,v,v+d),y&&h.push(a[v]*(A-1)+p[v]+(t[S]-1)*r[v]+1-u[v]-u[v+d])}h.splice(0,0,w),h.splice(c?3:1,0,_)},su=(e,t)=>{let r=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((y,w)=>y*w,1)===0){r.length=0;for(let y=2;y<t[1].dims.length;++y)r.push(t[1].dims[y])}let o=e.format==="NHWC";r.splice(0,0,t[1].dims[0]),r.splice(o?3:1,0,t[1].dims[1]);let i=e.pads.slice(),u=e.outputShape.slice(),a=e.outputPadding.slice(),c=t[0].dims,p=e.dilations.slice();if(p.reduce((y,w)=>y+w,0)===0){let y=t[0].dims.length-2;p=new Array(y).fill(1)}let h=e.strides.slice();if(h.reduce((y,w)=>y+w,0)===0){let y=t[0].dims.length-2;h=new Array(y).fill(1)}Pc(c,r,p,e.autoPad,e.group,i,h,o,a,u);let d=Object.assign({},e);return Object.assign(d,{kernelShape:r,pads:i,outputPadding:a,outputShape:u,dilations:p,strides:h}),d},uu=e=>{let t=Bn(e),r=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],i=e.dilations,u=e.group,a=e.kernelShape,c=e.pads,p=e.strides,h=e.wIsConst(),d=e.outputPadding,y=e.outputShape;return{autoPad:o,format:r,dilations:i,group:u,kernelShape:a,outputPadding:d,outputShape:y,pads:c,strides:p,wIsConst:h,...t,cacheKey:`${e.format};${t.activation};`}},kc=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[0];if(r!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let i=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==i))throw new Error("invalid bias");let u=e[0].dims.length-2;if(t.dilations.reduce((d,y)=>d+y,0)>0&&t.dilations.length!==u)throw new Error(`dilations should be ${u}D`);if(t.strides.reduce((d,y)=>d+y,0)>0&&t.strides.length!==u)throw new Error(`strides should be ${u}D`);if(t.pads.reduce((d,y)=>d+y,0)>0&&t.pads.length!==u*2)throw new Error(`pads should be ${u*2}D`);if(t.outputPadding.length!==u&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${u}D`);if(t.kernelShape.reduce((d,y)=>d+y,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},Oc=[2,3,1,0],Rc=(e,t,r)=>{let o=su(r,t),i=r.format==="NHWC",u=o.outputShape,a=u[i?3:1],c=t[0].dims[i?3:1];if(o.group!==1||a===1&&c===1){e.compute(Lo(t,o));return}let p=u[i?1:2],h=u[i?2:3],d=t[1].dims[2],y=t[1].dims[3],w=i?p*h:a,_=i?a:p*h,v=d*y*c,S=!0,A=e.kernelCustomData.wT??e.compute(yt(t[1],Oc),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=A);let I=[t[0],A],x=t.length===3;x&&(!i&&t[2].dims.length===1?I.push(t[2].reshape([t[2].dims[0],1,1])):I.push(t[2])),e.compute(ou(I,o,u,w,_,v,x,S),{inputs:I})},Bc=(e,t)=>{let r=t.format==="NHWC",o=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&o.push(e.inputs[2]);let i=t.kernelShape;(i.length===0||i[0]===0)&&(i=[e.inputs[1].dims[2]]);let u=t.dilations;(u.length===0||u[0]===0)&&(u=[1]);let a=t.strides;(a.length===0||a[0]===0)&&(a=[1]);let c=t.pads;c.length===0&&(c=[0,0]),c=[0,c[0],0,c[1]],a=[1].concat(a),u=[1].concat(u),i=[1].concat(i);let p=su({...t,pads:c,strides:a,dilations:u,kernelShape:i},o);e.compute(Lo(o,p,h=>r?[h[0],h[2],h[3]]:[h[0],h[1],h[3]]))},du=(e,t)=>{kc(e.inputs,t),e.inputs[0].dims.length===3?Bc(e,t):Rc(e,e.inputs,t)}});var Dc,cu,pu,mu=Y(()=>{"use strict";ye();Se();Ze();_e();Dc=(e,t,r,o)=>{let i=M.size(t),u=t.length,a=U("input",e,u),c=j("output",e,u),p=r.dataType===6?r.getInt32Array()[0]:Number(r.getBigInt64Array()[0]),h=M.normalizeAxis(p,u),d=y=>{let w=` i32(${a.indicesGet("inputIndices","uniforms.axis")}) `,_=fe("uniforms.input_shape","uniforms.axis",u),v=o.reverse?w+(o.exclusive?" + 1":""):"0",S=o.reverse?_:w+(o.exclusive?"":" + 1");return`\n                ${y.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(a,c)}\n                ${y.mainStart()}\n                  ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n                  var inputIndices = ${c.offsetToIndices("global_idx")};\n                  var sum = ${c.type.value}(0);\n                  let first : i32 = ${v};\n                  let last : i32 = ${S};\n                  for (var i : i32 = first; i < last; i++) {\n                    ${a.indicesSet("inputIndices","uniforms.axis","u32(i)")};\n                    sum = sum + ${a.getByIndices("inputIndices")};\n                  }\n                  ${c.setByOffset("global_idx","sum")};\n                }`};return{name:"CumSum",shaderCache:{hint:o.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},{type:12,data:h},...Z(t,t)]}),getShaderSource:d}},cu=(e,t)=>{let r=e.inputs[0].dims,o=e.inputs[0].dataType,i=e.inputs[1];e.compute(Dc(o,r,i,t),{inputs:[0]})},pu=e=>{let t=e.exclusive===1,r=e.reverse===1;return ve({exclusive:t,reverse:r})}});var zc,Mc,Uc,fu,hu,gu=Y(()=>{"use strict";ye();Se();Ze();_e();zc=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},Mc=(e,t,r,o)=>{let i=[];i.push(`fn perm(i: ${o.type.indices}) -> ${r.type.indices} {\n    var a: ${r.type.indices};`);for(let u=0;u<t;++u)i.push(r.indicesSet("a",e[u],`i[${u}]`));return i.push("return a;}"),i.join(`\n`)},Uc=(e,t)=>{let r,o,i,u,a,c,p=t.format==="NHWC",h=t.blocksize,d=t.mode==="DCR";p?([r,o,i,u]=e.dims,a=d?[r,o,i,h,h,u/h**2]:[r,o,i,u/h**2,h,h],c=d?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([r,o,i,u]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],a=d?[r,h,h,u/h**2,o,i]:[r,u/h**2,h,h,o,i],c=d?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let y=e.reshape(a),w=y.dims.length,_=e.dataType,v=U("a",_,w),S=j("output",_,w),A=I=>`\n  ${I.registerUniform("output_size","u32").declareVariables(v,S)}\n\n  ${Mc(c,w,v,S)}\n\n  ${I.mainStart()}\n    ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let indices = ${S.offsetToIndices("global_idx")};\n    let aIndices = perm(indices);\n\n    ${S.setByOffset("global_idx",v.getByIndices("aIndices"))}\n  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${t.blocksize};${t.mode}`,inputDependencies:["rank"]},getRunData:I=>{let x=p?[r,o*h,i*h,u/h**2]:[r,u/h**2,o*h,i*h],E=M.size(x),P=y.dims,O=M.sortBasedOnPerm(P,c);return{outputs:[{dims:x,dataType:I[0].dataType}],dispatchGroup:{x:Math.ceil(E/64)},programUniforms:[{type:12,data:E},...Z(P,O)]}},getShaderSource:A}},fu=(e,t)=>{zc(e.inputs),e.compute(Uc(e.inputs[0],t))},hu=e=>ve({blocksize:e.blocksize,mode:e.mode,format:e.format})});var Fo,Wn,yu,Vc,Wc,qo,jo,bu,Nc,wu,vu,$u=Y(()=>{"use strict";ye();Se();Ze();_e();Fo="[a-zA-Z]|\\\\.\\\\.\\\\.",Wn="("+Fo+")+",yu="^"+Wn+"$",Vc="("+Wn+",)*"+Wn,Wc="^"+Vc+"$",qo=class{constructor(t=-1){this.symbolToIndices=new Map,this.inputIndex=t}addSymbol(t,r){let o=this.symbolToIndices.get(t);o===void 0?o=[r]:o.push(r),this.symbolToIndices.set(t,o)}},jo=class{constructor(t,r){this.equation=r;this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[o,i]=r.includes("->")?r.split("->",2):[r,""];if(!o.match(RegExp(Wc)))throw new Error("Invalid LHS term");if(o.split(",").forEach((c,p)=>{let h=t[p].dims.slice();if(!c.match(RegExp(yu)))throw new Error("Invalid LHS term");let d=this.processTerm(c,!0,h,p);this.lhs.push(d)}),i==="")i+=[...this.symbolToInfo.entries()].filter(([c,p])=>p.count===1||c==="...").map(([c])=>c).join("");else if(!i.match(RegExp(Wn)))throw new Error("Invalid RHS");i.match(RegExp(Fo,"g"))?.forEach(c=>{if(c==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let p=this.symbolToInfo.get(c);if(p===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(p.dimValue)}}),this.rhs=this.processTerm(i,!1,this.outputDims)}addSymbol(t,r,o){let i=this.symbolToInfo.get(t);if(i!==void 0){if(i.dimValue!==r&&i.count!==1)throw new Error("Dimension mismatch");i.count++,i.inputIndices.push(o)}else i={count:1,dimValue:r,inputIndices:[o]};this.symbolToInfo.set(t,i)}processTerm(t,r,o,i=-1){let u=o.length,a=!1,c=[],p=0;if(!t.match(RegExp(yu))&&!r&&t!=="")throw new Error("Invalid LHS term");let h=t.match(RegExp(Fo,"g")),d=new qo(i);return h?.forEach((y,w)=>{if(y==="..."){if(a)throw new Error("Only one ellipsis is allowed per input term");a=!0;let _=u-h.length+1;if(_<0)throw new Error("Ellipsis out of bounds");if(c=o.slice(p,p+_),this.hasEllipsis){if(this.ellipsisDims.length!==c.length||this.ellipsisDims.toString()!==c.toString())throw new Error("Ellipsis dimensions mismatch")}else if(r)this.hasEllipsis=!0,this.ellipsisDims=c;else throw new Error("Ellipsis must be specified in the LHS");for(let v=0;v<c.length;v++){let S=String.fromCharCode("0".charCodeAt(0)+v);d.addSymbol(S,w+v),this.addSymbol(S,o[p++],i)}}else d.addSymbol(y,w+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(y,o[p++],i)}),d}},bu=e=>e+"_max",Nc=(e,t,r,o)=>{let u=e.map(d=>d.length).map((d,y)=>U(`input${y}`,t,d)),a=M.size(o),c=j("output",t,o.length),p=[...r.symbolToInfo.keys()].filter(d=>!r.rhs.symbolToIndices.has(d)),h=d=>{let y=[],w="var prod = 1.0;",_="var sum = 0.0;",v="sum += prod;",S=[],A=[],I=[],x=[],E=r.symbolToInfo.size===r.rhs.symbolToIndices.size;r.symbolToInfo.forEach((O,R)=>{if(r.rhs.symbolToIndices.has(R)){let L=r.rhs.symbolToIndices.get(R)?.[0];L!==void 0&&r.lhs.forEach((N,K)=>{if(O.inputIndices.includes(K)){let Q=N.symbolToIndices.get(R);if(Q===void 0)throw new Error("Invalid symbol error");Q.forEach(he=>{y.push(`${u[K].indicesSet(`input${K}Indices`,he,c.indicesGet("outputIndices",L))}`)})}})}else r.lhs.forEach((L,N)=>{if(O.inputIndices.includes(N)){let K=L.symbolToIndices.get(R);if(K===void 0)throw new Error("Invalid symbol error");K.forEach(Q=>{S.push(`${u[N].indicesSet(`input${N}Indices`,Q,`${R}`)}`)}),x.push(`prod *= ${u[N].getByIndices(`input${N}Indices`)};`)}}),A.push(`for(var ${R}: u32 = 0; ${R} < uniforms.${bu(R)}; ${R}++) {`),I.push("}")});let P=E?[...y,`let sum = ${u.map((O,R)=>O.getByIndices(`input${R}Indices`)).join(" * ")};`]:[...y,_,...A,...S,w,...x,v,...I];return`\n            ${d.registerUniforms(p.map(O=>({name:`${bu(O)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...u,c)}\n\n            ${d.mainStart()}\n            ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n            var outputIndices = ${c.offsetToIndices("global_idx")};\n            ${u.map((O,R)=>`var input${R}Indices: ${u[R].type.indices};`).join(`\n`)}\n            ${P.join(`\n`)};\n            ${c.setByOffset("global_idx","sum")};\n          }`};return{name:"Einsum",shaderCache:{hint:r.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let d=p.filter(w=>r.symbolToInfo.has(w)).map(w=>({type:12,data:r.symbolToInfo.get(w)?.dimValue||0}));d.push({type:12,data:a});let y=e.map((w,_)=>[...Z(w)]).reduce((w,_)=>w.concat(_),d);return y.push(...Z(o)),{outputs:[{dims:o,dataType:t}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:y}},getShaderSource:h}},wu=(e,t)=>{let r=new jo(e.inputs,t.equation),o=r.outputDims,i=e.inputs.map((u,a)=>u.dims);e.compute(Nc(i,e.inputs[0].dataType,r,o))},vu=e=>{let t=e.equation.replace(/\\s+/g,"");return ve({equation:t})}});var Gc,_u,Hc,Lc,Su,xu=Y(()=>{"use strict";ye();Se();_e();Gc=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),o=r.length<t.length?0:r.length-t.length,i=t.length<r.length?0:t.length-r.length;for(;o<r.length&&i<t.length;++o,++i)if(r[o]!==t[i]&&r[o]!==1&&t[i]!==1)throw new Error("Expand requires shape to be broadcastable to input")},_u=(e,t)=>{let r=e.length-t.length,o=[];for(let i=0;i<r;++i)o.push(e[i]);for(let i=0;i<t.length;++i)o.push(t[i]===1?e[i+r]:t[i]);return o},Hc=(e,t)=>e.length>t.length?_u(e,t):_u(t,e),Lc=e=>{let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),o=Hc(t,r),i=e[0].dataType,u=i===9?4:1,a=Math.ceil(M.size(o)/u),c=h=>{let d=U("input",i,t.length,u),y=j("output",i,o.length,u),w;if(i===9){let _=(v,S,A="")=>`\n          let outputIndices${S} = ${y.offsetToIndices(`outputOffset + ${S}u`)};\n          let offset${S} = ${d.broadcastedIndicesToOffset(`outputIndices${S}`,y)};\n          let index${S} = offset${S} / 4u;\n          let component${S} = offset${S} % 4u;\n          ${v}[${S}] = ${A}(${d.getByOffset(`index${S}`)}[component${S}]);\n        `;w=`\n        let outputOffset = global_idx * ${u};\n        var data = vec4<u32>(0);\n        ${_("data",0,"u32")}\n        ${_("data",1,"u32")}\n        ${_("data",2,"u32")}\n        ${_("data",3,"u32")}\n        ${y.setByOffset("global_idx","data")}\n      }`}else w=`\n        let outputIndices = ${y.offsetToIndices("global_idx")};\n        let inputOffset = ${d.broadcastedIndicesToOffset("outputIndices",y)};\n        ${y.setByOffset("global_idx",d.getByOffset("inputOffset"))}\n      }`;return`\n    ${h.registerUniform("vec_size","u32").declareVariables(d,y)}\n    ${h.mainStart()}\n    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n    ${w}`},p=[{type:12,data:a},...Z(t,o)];return{name:"Expand",shaderCache:{hint:`${o.length}`,inputDependencies:["rank"]},getShaderSource:c,getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:p})}},Su=e=>{Gc(e.inputs),e.compute(Lc(e.inputs),{inputs:[0]})}});var Fc,Cu,Au=Y(()=>{"use strict";ye();Se();_e();Rn();Fc=e=>{let t=e[0].dataType,r=M.size(e[0].dims),o=M.size(e[1].dims),i=o%4===0,u=a=>{let c=U("x",t,[1],4),p=U("bias",t,[1],4),h=j("y",t,[1],4),d=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],y=_=>`\n      let bias${_}_offset: u32 = (global_idx * 4 + ${_}) % uniforms.bias_size;\n      let bias${_} = ${p.getByOffset(`bias${_}_offset / 4`)}[bias${_}_offset % 4];`,w=i?`\n      let bias = ${p.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${y(0)}${y(1)}${y(2)}${y(3)}\n      let bias = ${c.type.value}(bias0, bias1, bias2, bias3);`;return`${a.registerUniforms(d).declareVariables(c,p,h)}\n\n    ${Bo(et(t))}\n\n    ${a.mainStart(or)}\n      ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}\n\n      let x = ${c.getByOffset("global_idx")};\n      ${w}\n      let x_in = x + bias;\n      ${h.setByOffset("global_idx",Do("x_in"))}\n    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${i}`,inputDependencies:["type","type"]},getShaderSource:u,getRunData:a=>({outputs:[{dims:a[0].dims,dataType:a[0].dataType}],programUniforms:[{type:12,data:Math.ceil(r/4)},{type:12,data:o}],dispatchGroup:{x:Math.ceil(r/or/4)}})}},Cu=e=>{e.inputs.length<2||M.size(e.inputs[1].dims)===0?Bs(e):e.compute(Fc(e.inputs))}});var qc,jc,Iu,Tu,Eu=Y(()=>{"use strict";ye();Se();Ze();_e();qc=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},jc=(e,t)=>{let r=e[0].dims,o=e[1].dims,i=r.length,u=M.normalizeAxis(t.axis,i),a=r.slice(0);a.splice(u,1,...o);let c=r[u],p=e[0].dataType===9?4:1,h=Math.ceil(M.size(a)/p),d=[{type:12,data:h},{type:6,data:c},{type:12,data:u},...Z(e[0].dims,e[1].dims,a)],y=w=>{let _=U("data",e[0].dataType,e[0].dims.length,p),v=U("inputIndices",e[1].dataType,e[1].dims.length),S=j("output",e[0].dataType,a.length,p),A=x=>{let E=o.length,P=`var indicesIndices${x}  = ${v.type.indices}(0);`;for(let O=0;O<E;O++)P+=`${E>1?`indicesIndices${x}[${O}]`:`indicesIndices${x}`} = ${a.length>1?`outputIndices${x}[uniforms.axis + ${O}]`:`outputIndices${x}`};`;P+=`\n          var idx${x} = ${v.getByIndices(`indicesIndices${x}`)};\n          if (idx${x} < 0) {\n            idx${x} = idx${x} + uniforms.axisDimLimit;\n          }\n          var dataIndices${x} : ${_.type.indices};\n        `;for(let O=0,R=0;O<i;O++)O===u?(P+=`${i>1?`dataIndices${x}[${O}]`:`dataIndices${x}`} = u32(idx${x});`,R+=E):(P+=`${i>1?`dataIndices${x}[${O}]`:`dataIndices${x}`} = ${a.length>1?`outputIndices${x}[${R}]`:`outputIndices${x}`};`,R++);return P},I;if(e[0].dataType===9){let x=(E,P,O="")=>`\n          let outputIndices${P} = ${S.offsetToIndices(`outputOffset + ${P}u`)};\n          ${A(P)};\n          let offset${P} = ${_.indicesToOffset(`dataIndices${P}`)};\n          let index${P} = offset${P} / 4u;\n          let component${P} = offset${P} % 4u;\n          ${E}[${P}] = ${O}(${_.getByOffset(`index${P}`)}[component${P}]);\n        `;I=`\n        let outputOffset = global_idx * ${p};\n        var value = vec4<u32>(0);\n        ${x("value",0,"u32")}\n        ${x("value",1,"u32")}\n        ${x("value",2,"u32")}\n        ${x("value",3,"u32")}\n        ${S.setByOffset("global_idx","value")}\n      `}else I=`\n      let outputIndices = ${S.offsetToIndices("global_idx")};\n      ${A("")};\n      let value = ${_.getByIndices("dataIndices")};\n      ${S.setByOffset("global_idx","value")};\n      `;return`\n      ${w.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(_,v,S)}\n      ${w.mainStart()}\n        ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n        ${I}\n      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:d}),getShaderSource:y}},Iu=e=>ve({axis:e.axis}),Tu=(e,t)=>{let r=e.inputs;qc(r),e.compute(jc(e.inputs,t))}});var Kc,Yc,Pu,ku,Ou=Y(()=>{"use strict";ye();Se();Ze();_e();Kc=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and\n                     indices input tensors be of same rank.`)},Yc=(e,t)=>{let r=e[0].dims,o=e[0].dataType,i=r.length,u=e[1].dims,a=e[1].dataType,c=M.normalizeAxis(t.axis,i),p=r[c],h=u.slice(0),d=M.size(h),y=U("input",o,i),w=U("indicesInput",a,u.length),_=j("output",o,h.length),v=[{type:12,data:d},{type:6,data:p},{type:12,data:c}];return v.push(...Z(r,u,h)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:h,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:v}),getShaderSource:I=>`\n      ${I.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(y,w,_)}\n      ${I.mainStart()}\n      ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n      let outputIndices = ${_.offsetToIndices("global_idx")};\n\n      var idx = ${w.getByOffset("global_idx")};\n      if (idx < 0) {\n        idx = idx + uniforms.axisDimLimit;\n      }\n      var inputIndices = ${y.type.indices}(outputIndices);\n      ${y.indicesSet("inputIndices","uniforms.axis","u32(idx)")};\n      let value = ${y.getByIndices("inputIndices")};\n\n      ${_.setByOffset("global_idx","value")};\n  }`}},Pu=e=>ve({axis:e.axis}),ku=(e,t)=>{let r=e.inputs;Kc(r),e.compute(Yc(e.inputs,t))}});var Zc,Xc,Ru,Bu,Du=Y(()=>{"use strict";ye();Se();_e();Zc=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},Xc=(e,t)=>{let r=e[0].dims.slice(),o=e[1].dims.slice(),[i,u,a]=Sn.getShapeOfGemmResult(r,t.transA,o,t.transB,e.length===3?e[2].dims:void 0),c=[i,u];if(!c)throw new Error("Can\'t use gemm on the given tensors");let p=M.size(c),h=[{type:12,data:p},{type:12,data:i},{type:12,data:u},{type:12,data:a},{type:1,data:t.alpha},{type:1,data:t.beta}],d=["type","type"];e.length===3&&(h.push(...Z(e[2].dims)),d.push("rank")),h.push(...Z(c));let y=w=>{let _="";t.transA&&t.transB?_="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?_="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?_="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(_="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let v=t.alpha===1?"":"value *= uniforms.alpha;",S=U("a",e[0].dataType,e[0].dims),A=U("b",e[1].dataType,e[1].dims),I=S.type.value,x=null,E=[S,A];e.length===3&&(x=U("c",e[2].dataType,e[2].dims.length),E.push(x));let P=j("output",e[0].dataType,c.length);E.push(P);let O=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`\n  ${w.registerUniforms(O).declareVariables(...E)}\n\n  ${w.mainStart()}\n    ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let m = global_idx / uniforms.N;\n    let n = global_idx % uniforms.N;\n\n    var value = ${I}(0);\n    for (var k: u32 = 0u; k < uniforms.K; k++) {\n      ${_}\n    }\n\n    ${v}\n    ${(()=>x!=null?`let cOffset = ${x.broadcastedIndicesToOffset("vec2(m, n)",P)}; value += ${I}(uniforms.beta) * ${x.getByOffset("cOffset")};`:"")()}\n    output[global_idx] = value;\n  }`};return{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:c,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h}),getShaderSource:y}},Ru=e=>{let t=e.transA,r=e.transB,o=e.alpha,i=e.beta;return{transA:t,transB:r,alpha:o,beta:i,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},Bu=(e,t)=>{Zc(e.inputs),e.compute(Xc(e.inputs,t))}});var Qc,Jc,ep,zu,Mu=Y(()=>{"use strict";ye();Se();_e();Qc=(e,t)=>{let r=e[0].dims,o=r,i=2,u=M.sizeToDimension(r,i),a=M.sizeFromDimension(r,i),c=Me(a),p=a/c,h=[r[0],r[1],p],d=["rank","type","type"],y=[{type:12,data:a},{type:12,data:p}];y.push(...Z(h,h));let w=_=>{let v=U("x",e[0].dataType,h.length,c),S=U("scale",e[1].dataType,e[1].dims),A=U("bias",e[2].dataType,e[2].dims),I=j("output",e[0].dataType,h.length,c),x=[v,S,A,I],E=v.type.value,P=c===1?"f32":`vec${c}<f32>`,O=64,R=[{name:"normSize",type:"u32"},{name:"normPackedSize",type:"u32"}];return`\n  var<workgroup> meanShared : f32;\n  var<workgroup> squaredNormShared : f32;\n  var<workgroup> workgroupShared : array<${P}, ${O}>;\n  const workgroupSize = ${O}u;\n  ${_.registerUniforms(R).declareVariables(...x)}\n  ${_.mainStart(O)}\n    let norm = global_idx / workgroupSize;\n    let batch = norm / uniforms.x_shape[1];\n    let channel = norm % uniforms.x_shape[1];\n    let localIndex = local_id.x;\n\n    // initialize workgroup memory\n    var initial = ${P}(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      initial = initial + ${P}(${v.get("batch","channel","h")});\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the mean of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      meanShared = ${_t("workgroupShared[0]",c)} / f32(uniforms.normSize);\n    }\n    workgroupBarrier();\n\n    // reinitialize workgroup memory.\n    initial = ${P}(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let deviation =  ${P}(${v.get("batch","channel","h")}) - ${P}(meanShared);\n      initial = initial + deviation * deviation;\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the sum of square of deviation of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      squaredNormShared = ${_t("workgroupShared[0]",c)};\n    }\n    workgroupBarrier();\n\n    let invStdDev = inverseSqrt(squaredNormShared / f32(uniforms.normSize) + f32(${t.epsilon}));\n    let channelScale = invStdDev * f32(${S.getByOffset("channel")});\n    let channelShift = f32(${A.getByOffset("channel")}) - meanShared * channelScale;\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let value = ${v.get("batch","channel","h")} * ${E}(${P}(channelScale)) + ${E}(${P}(channelShift));\n      ${I.set("batch","channel","h","value")};\n    }\n  }`};return{name:"InstanceNormalization",shaderCache:{hint:`${t.epsilon};${c}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:u},programUniforms:y}),getShaderSource:w}},Jc=(e,t,r,o,i,u,a,c)=>{let p=Me(a),h=64,d=p===1?"vec2f":`mat2x${p}f`,y=p===1?"f32":`vec${p}f`,w=(R,L)=>`${d}(${R}, ${L})`,_=i*a/p,v=Math.ceil(u/h),S=["type"],A=[{type:12,data:v},{type:12,data:u},{type:12,data:Math.floor(a/p)},{type:12,data:Math.floor(u*a/p)}],I=R=>{let L=U("input",t.dataType,t.dims,p);return`\n  ${R.declareVariables(L)}\n  @group(0) @binding(1) var<storage, read_write> output : array<${d}>;\n  struct Uniforms {wg_size:u32, H:u32, C:u32, image_size:u32};\n  @group(0) @binding(2) var<uniform> uniforms: Uniforms;\n\n  ${R.mainStart(h)}\n    let currentImageNumber = global_idx / ${h} / uniforms.C;\n    let currentChannelNumber = (global_idx / ${h}) % uniforms.C;\n    let wgOffset = local_id.x * uniforms.wg_size;\n    if (wgOffset >= uniforms.H) {\n        return;\n    }\n    let wgMax = min(wgOffset + uniforms.wg_size, uniforms.H);\n\n    let offset = currentImageNumber * uniforms.image_size + currentChannelNumber;\n    var sum = ${$t("f32",p)};\n    var squaredSum = ${$t("f32",p)};\n    for (var i: u32 = wgOffset; i < wgMax; i++) {\n        let value = ${y}(input[offset + i * uniforms.C]);\n        sum += value;\n        squaredSum += value * value;\n    }\n    output[global_idx] = ${w("sum","squaredSum")};\n  }`},x=e.compute({name:"InstanceNormComputeMean",shaderCache:{hint:`${p}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:[i,a,h,2],dataType:1}],dispatchGroup:{x:i*a/p},programUniforms:A}),getShaderSource:I},{inputs:[t],outputs:[-1]})[0],E=[{type:12,data:_},{type:12,data:u},{type:12,data:Math.floor(a/p)},{type:12,data:Math.floor(h*a/p)}],P=["type","type","type"],O=R=>{let L=U("scale",r.dataType,r.dims,p),N=U("bias",o.dataType,o.dims,p);return`\n  @group(0) @binding(0) var<storage, read> input : array<${d}>;\n  @group(0) @binding(1) var<storage, read> scale : array<${L.type.storage}>;\n  @group(0) @binding(2) var<storage, read> bias : array<${N.type.storage}>;\n  @group(0) @binding(3) var<storage, read_write> output : array<${d}>;\n  struct Uniforms {units_of_work : u32, H: u32, C : u32, image_size : u32};\n  @group(0) @binding(4) var<uniform> uniforms: Uniforms;\n\n  ${R.mainStart()}\n    ${R.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.units_of_work")}\n    let currentImageNumber = global_idx / uniforms.C;\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let offset = currentImageNumber * uniforms.image_size;\n    var sum = ${$t("f32",p)};\n    var squaredSum = ${$t("f32",p)};\n    for (var i: u32 = 0; i < min(${h}, uniforms.H); i++) {\n        let value = input[offset + i + currentChannelNumber * ${h}];\n        sum += value[0];\n        squaredSum += value[1];\n    }\n    sum = sum / f32(uniforms.H);\n    squaredSum = squaredSum / f32(uniforms.H);\n    let invStdDev = inverseSqrt(squaredSum - sum * sum + f32(${c}));\n    let channelScale = invStdDev * ${y}(scale[currentChannelNumber]);\n    let channelShift = ${y}(bias[currentChannelNumber]) - sum * channelScale;\n\n    output[global_idx] = ${w("channelScale","channelShift")};\n  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${p};${c}`,inputDependencies:P},getRunData:()=>({outputs:[{dims:[i,a,2],dataType:1}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:E}),getShaderSource:O},{inputs:[x,r,o],outputs:[-1]})[0]},ep=(e,t,r)=>{let o=t[0].dims,i=o,u=o[0],a=o[o.length-1],c=M.sizeFromDimension(o,1)/a,p=Me(a),h=M.size(i)/p,d=[{type:12,data:c},{type:12,data:Math.floor(a/p)}],y=["type","type"],w=Jc(e,t[0],t[1],t[2],u,c,a,r.epsilon),_=v=>{let S=De(t[0].dataType),A=p===1?"vec2f":`mat2x${p}f`,I=p===1?S:`vec${p}<${S}>`,x=U("input",t[0].dataType,t[0].dims,p),E=j("output",t[0].dataType,i,p);return`\n  @group(0) @binding(0) var<storage, read> input : array<${x.type.storage}>;\n  @group(0) @binding(1) var<storage, read> scaleInput : array<${A}>;\n  @group(0) @binding(2) var<storage, read_write> output : array<${E.type.storage}>;\n  struct Uniforms {H: u32, C : u32};\n  @group(0) @binding(3) var<uniform> uniforms: Uniforms;\n\n  ${v.mainStart()}\n    let currentImageNumber = global_idx / (uniforms.C * uniforms.H);\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let scaleOffset = currentImageNumber * uniforms.C + currentChannelNumber;\n    let scale = scaleInput[scaleOffset];\n    output[global_idx] = fma(input[global_idx], ${I}(scale[0]), ${I}(scale[1]));\n  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${p}`,inputDependencies:y},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:d}),getShaderSource:_},{inputs:[t[0],w]})},zu=(e,t)=>{t.format==="NHWC"?ep(e,e.inputs,t):e.compute(Qc(e.inputs,t))}});var tp,rp,Uu,Vu=Y(()=>{"use strict";ye();Se();_e();tp=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},rp=(e,t,r)=>{let o=t.simplified,i=e[0].dims,u=e[1],a=!o&&e[2],c=i,p=M.normalizeAxis(t.axis,i.length),h=M.sizeToDimension(i,p),d=M.sizeFromDimension(i,p),y=M.size(u.dims),w=a?M.size(a.dims):0;if(y!==d||a&&w!==d)throw new Error(`Size of X.shape()[axis:] == ${d}.\n       Size of scale and bias (if provided) must match this.\n       Got scale size of ${y} and bias size of ${w}`);let _=[];for(let O=0;O<i.length;++O)O<p?_.push(i[O]):_.push(1);let v=Me(d),S=["type","type"],A=[{type:12,data:h},{type:1,data:d},{type:12,data:Math.floor(d/v)},{type:1,data:t.epsilon}];a&&S.push("type");let I=r>1,x=r>2,E=O=>{let R=De(e[0].dataType),L=[U("x",e[0].dataType,e[0].dims,v),U("scale",u.dataType,u.dims,v)];a&&L.push(U("bias",a.dataType,a.dims,v)),L.push(j("output",e[0].dataType,c,v)),I&&L.push(j("mean_data_output",1,_)),x&&L.push(j("inv_std_output",1,_));let N=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`\n  ${O.registerUniforms(N).declareVariables(...L)}\n  ${O.mainStart()}\n    ${O.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}\n    let offset = global_idx * uniforms.norm_size_vectorized;\n    var mean_vector = ${$t("f32",v)};\n    var mean_square_vector = ${$t("f32",v)};\n\n    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {\n      let value = ${ir(R,v,"x[h + offset]")};\n      mean_vector += value;\n      mean_square_vector += value * value;\n    }\n    let mean = ${_t("mean_vector",v)} / uniforms.norm_size;\n    let inv_std_dev = inverseSqrt(${_t("mean_square_vector",v)} / uniforms.norm_size ${o?"":"- mean * mean"} + uniforms.epsilon);\n\n    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {\n      let f32input = ${ir(R,v,"x[j + offset]")};\n      let f32scale = ${ir(R,v,"scale[j]")};\n      output[j + offset] = ${L[0].type.value}((f32input ${o?"":"- mean"}) * inv_std_dev * f32scale\n        ${a?`+ ${ir(R,v,"bias[j]")}`:""}\n      );\n    }\n\n    ${I?"mean_data_output[global_idx] = mean":""};\n    ${x?"inv_std_output[global_idx] = inv_std_dev":""};\n  }`},P=[{dims:c,dataType:e[0].dataType}];return I&&P.push({dims:_,dataType:1}),x&&P.push({dims:_,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${v};${r};${o}`,inputDependencies:S},getRunData:()=>({outputs:P,dispatchGroup:{x:Math.ceil(h/64)},programUniforms:A}),getShaderSource:E}},Uu=(e,t)=>{tp(e.inputs),e.compute(rp(e.inputs,t,e.outputCount))}});var np,op,Wu,Nu,Gu=Y(()=>{"use strict";ye();Se();Ze();_e();np=(e,t)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let r=e[0],o=r.dims.length;if(r.dims[o-1]!==t.k)throw new Error("The last dim of input shape does not match the k value");let i=Math.floor((t.k+t.blockSize-1)/t.blockSize),u=t.blockSize/8*t.bits,a=e[1];if(!M.areEqual(a.dims,[t.n,i,u]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let p=e[2].dims;if(M.size(p)!==t.n*i)throw new Error("scales input size error.");if(e.length===4){let d=e[3].dims,y=t.bits>4?t.n*i:t.n*Math.floor((i+1)/2);if(M.size(d)!==y)throw new Error("zeroPoints input size error.")}},op=(e,t,r,o)=>{let i=e[0].dims,u=i.length,a=Math.floor((t.k+t.blockSize-1)/t.blockSize),c=i[u-2],p=t.k,h=t.n,d=i.slice(0,u-2),y=M.size(d),_=t.blockSize/8*t.bits/4,v=e[0].dataType,S=Me(c),A=Me(t.k),I=Me(_),x=tr(v),E=c*a*x,P=Math.floor(o/E),O=a<=r[0]&&P>0,R=!O||P>=4?Me(h):P>=2&&Me(h)>=2?2:1,L=d.concat([c,h]),N=M.size(L)/R/S,K=O?[]:[{type:12,data:N},{type:12,data:t.blockSize}],Q=[y,c,p/A],he=M.convertShape(e[1].dims).slice();he.splice(-1,1,_/I),K.push(...Z(Q)),K.push(...Z(he)),K.push(...Z(e[2].dims)),e.length===4&&K.push(...Z(M.convertShape(e[3].dims)));let W=[y,c,h/R];K.push(...Z(W));let se=Ce=>{let We=Q.length,ee=U("a",e[0].dataType,We,A),ae=U("b",12,he.length,I),Ae=U("scales",e[2].dataType,e[2].dims.length),me=[ee,ae,Ae],ie=e.length===4?U("zero_points",12,e[3].dims.length):void 0;ie&&me.push(ie);let ue=W.length,le=j("output",e[0].dataType,ue,R),qe=[{name:"output_size",type:"u32"},{name:"block_size",type:"u32"}],G=De(e[0].dataType),ne=(()=>{switch(A){case 1:return`array<${G}, 8>`;case 2:return`mat4x2<${G}>`;case 4:return`mat2x4<${G}>`;default:throw new Error(`${A}-component is not supported.`)}})(),xe=`\n        for (var word: u32 = 0; word < ${_}; word += ${I}) {\n          ${ae.indicesSet("b_indices","2","word")};\n          let b_data = ${ae.getByIndices("b_indices")};\n          for (var i: u32 = 0; i < ${I}; i++) {\n            let b_value: u32 = ${I===1?"b_data":"b_data[word + i]"};\n            let b_mask: u32 = 0x0F0F0F0Fu;\n            let b_value_lower: vec4<u32> = unpack4xU8(b_value & b_mask);\n            let b_value_upper: vec4<u32> = unpack4xU8((b_value >> 4) & b_mask);\n            let b_quantized_values = ${ne}(${Array.from({length:4},(Be,Ge)=>`${G}(b_value_lower[${Ge}]), ${G}(b_value_upper[${Ge}])`).join(", ")});\n            let b_dequantized_values = ${(()=>A===1?`${ne}(${Array.from({length:8},(Be,Ge)=>`(b_quantized_values[${Ge}] - zero_point) * scale`).join(", ")});`:`(b_quantized_values - ${ne}(${Array(8).fill("zero_point").join(",")})) * scale;`)()};\n            // Number of B elements per 32-bit word is 32/bits = 32/4 = 8\n            for (var m: u32 = 0; m < ${O?c:S}u; m++) {\n              ${ee.indicesSet("a_indices",We-2,O?"m":`row * ${S} + m`)};\n              ${ee.indicesSet("a_indices",We-1,"word_offset")};\n              var input_offset = ${ee.indicesToOffset("a_indices")};\n              var a_data: ${ne};\n              for (var j: u32 = 0; j < ${8/A}; j++) {\n                a_data[j] = ${ee.getByOffset("input_offset")};\n                input_offset++;\n              }\n              ${O?"workgroup_shared[workgroup_shared_offset + m]":"output_values[m]"}${R>1?"[c]":""} += ${Array.from({length:8/A},(Be,Ge)=>`${A===1?`a_data[${Ge}] * b_dequantized_values[${Ge}]`:`dot(a_data[${Ge}], b_dequantized_values[${Ge}])`}`).join(" + ")};\n            }\n            word_offset += ${8/A};\n          }\n        }`,Ke=ie?`\n          zero_point_offset += 4;\n          if (zero_point_offset == 32) {\n            zero_point_offset = 0;\n            zero_point_index++;\n            zero_point_word = ${ie.getByOffset("zero_point_index")};\n          }`:"";return O?`\n        var<workgroup> workgroup_shared: array<${le.type.value}, ${c*a}>;\n        ${Ce.declareVariables(...me,le)}\n        ${Ce.mainStart([a,1,1])}\n          var a_indices: ${ee.type.indices};\n          var block = local_id.x;\n          var col = workgroup_id.y;\n          var batch = workgroup_id.z;\n          ${ee.indicesSet("a_indices","0","batch")};\n          // Two zero points are packed into one byte when uniforms.bits is 4.\n          for (var c: u32 = 0; c < ${R}; c++) {\n            let col_times_components_plus_c = col * ${R} + c;\n              ${ie?`\n            var zero_point_bytes_per_col: u32 = (${a} + 1) / 2;\n            var zero_point_byte_count: u32 = col_times_components_plus_c * zero_point_bytes_per_col + (block >> 0x1u);\n            var zero_point_word_index: u32 = zero_point_byte_count >> 0x2u;\n            var zero_point_byte_offset: u32 = zero_point_byte_count & 0x3u;\n            var zero_point_nibble_offset: u32 = block & 0x1u;\n            var zero_point_bits_offset: u32 = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);\n            var zero_point_word: u32 = ${ie.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;`:""}\n            var b_indices: ${ae.type.indices};\n            ${ae.indicesSet("b_indices","0","col_times_components_plus_c")};\n            // The scale and zero points are computed per block.\n            var scales_index = col_times_components_plus_c * ${a} + block;\n            let scale = ${Ae.getByOffset("scales_index")};\n            // The default zero point is 8 for unsigned 4-bit quantization.\n            let zero_point = ${G}(${ie?"(zero_point_word) & 0xFu":8});\n            ${ae.indicesSet("b_indices","1","block")};\n            var word_offset: u32 = block * ${t.blockSize/A};\n            var workgroup_shared_offset: u32 = block * ${c};\n            ${xe}\n          }\n          workgroupBarrier();\n          if (local_id.x == 0u) {\n            var output_indices: ${le.type.indices};\n            ${le.indicesSet("output_indices","0","batch")};\n            ${le.indicesSet("output_indices",ue-1,"col")};\n            ${le.indicesSet("output_indices",ue-2,"0")};\n            var output_offset = ${le.indicesToOffset("output_indices")};\n            for (var m: u32 = 0u; m < ${c}u; m++) {\n              var output_value: ${le.type.value} = ${le.type.value}(0);\n              var workgroup_shared_offset: u32 = m;\n              for (var b: u32 = 0u; b < ${a}u; b++) {\n                output_value += workgroup_shared[workgroup_shared_offset];\n                workgroup_shared_offset += ${c};\n              }\n              ${le.setByOffset("output_offset","output_value")};\n              output_offset += ${h/R};\n            }\n          }\n        }`:`\n        ${Ce.registerUniforms(qe).declareVariables(...me,le)}\n        ${Ce.mainStart()}\n          ${Ce.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n          var output_values: array<${le.type.value}, ${S}>;\n          var output_indices = ${le.offsetToIndices("global_idx")};\n          var col = ${le.indicesGet("output_indices",ue-1)};\n          var row = ${le.indicesGet("output_indices",ue-2)};\n          var a_indices: ${ee.type.indices} = output_indices;\n          // Two zero points are packed into one byte because uniforms.bits <= 4.\n          // zero_point_offset is either 0 or 4. It is bit offset within one byte.\n          // TODO support zero_point_offset for bits > 4\n          ${ie?`\n          var zero_point_abs_offset = col * ${R} * ((${a} + 1) / 2);\n          var zero_point_index: u32 = zero_point_abs_offset / 4;\n          var zero_point_word: u32 = ${ie.getByOffset("zero_point_index")};\n          var zero_point_offset: u32 = (zero_point_abs_offset % 4) * 8;`:""}\n          var scale_index = col * ${a*R};\n          var b_indices: ${ae.type.indices};\n          for (var c: u32 = 0; c < ${R}; c++) {\n            ${ae.indicesSet("b_indices","0",`col * ${R} + c`)};\n            var block_offset: u32 = 0;\n            for (var block: u32 = 0; block < ${a}; block++) {\n              // The scale and zero points are computed per block.\n              let scale = ${Ae.getByOffset("scale_index")};\n              // The default zero point is 8 for unsigned 4-bit quantization.\n              let zero_point = ${G}(${ie?"extractBits(zero_point_word, zero_point_offset, 4)":8});\n              ${ae.indicesSet("b_indices","1","block")};\n              var word_offset: u32 = block_offset;\n              ${xe}\n              scale_index++;\n              ${Ke}\n              block_offset += uniforms.block_size / ${A};\n            }\n            // Drop the trailing 4 bits if the zero_poit_offset is not a byte boundary to align with the next byte.\n            ${ie?`if (zero_point_offset % 8 > 0) {\n                ${Ke}\n              }`:""}\n            }\n            for (var k: u32 = 0u; k < ${S}u; k++) {\n              ${le.indicesSet("output_indices",ue-2,`${S} * row + k`)};\n              ${le.setByIndices("output_indices","output_values[k]")}\n            }\n        }`};return{name:O?"BlockwiseMatMulNBits":"MatMulNBits",shaderCache:{hint:`${t.cacheKey};${c};${v};${e.length}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:L,dataType:v}],name:O?"BlockwiseMatMulNBits":"MatMulNBits",dispatchGroup:O?{x:1,y:Math.ceil(h/R),z:y}:{x:Math.ceil(N/64)},programUniforms:K}),getShaderSource:se}},Wu=(e,t)=>{np(e.inputs,t);let r=e.getMaxComputeWorkgroupSizes(),o=e.getMaxComputeWorkgroupStoragesize();e.compute(op(e.inputs,t,r,o))},Nu=e=>ve(e)});var it,ip,Lu,Hu,ap,Ko,Fu,qu=Y(()=>{"use strict";ye();Se();Ze();_n();Ro();_e();Sr();it=(e,t)=>e.length>t&&e[t].dims.length>0&&M.size(e[t].dims)>0?e[t]:void 0,ip=(e,t)=>{let r=e[0],o=it(e,1),i=it(e,2),u=it(e,3),a=it(e,4),c=it(e,5),p=it(e,6),h=it(e,7);if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let d=!1,y=r.dims[0],w=r.dims[1],_=r.dims.length===3?d?r.dims[2]/3:r.dims[2]:t.numHeads*r.dims[4],v=w,S=0,A=0,I=Math.floor(_/t.numHeads);if(p&&h){if(p.dims.length!==4)throw new Error(\'Input "past_key" is expected to have 4 dimensions\');if(p.dims[0]!==y||p.dims[1]!==t.numHeads||p.dims[3]!==I)throw new Error(\'Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)\');if(h.dims[0]!==y||h.dims[1]!==t.numHeads||h.dims[3]!==I)throw new Error(\'Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)\');if(p.dims[2]!==h.dims[2])throw new Error(\'Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)\');if(h.dims.length!==4)throw new Error(\'Input "past_value" is expected to have 4 dimensions\');S=p.dims[2],A=p.dims[2]}else if(p||h)throw new Error(\'Input "past_key" and "past_value" shall be both present or both absent\');let x;if(o){if(r.dims.length!==3)throw new Error(\'Input "query" is expected to have 3 dimensions when key is given\');if(o.dims.length<3||o.dims.length>5)throw new Error(\'Input "key" is expected to have 3, 4, or 5 dimensions\');if(r.dims[0]!==o.dims[0])throw new Error(\'Input "query" and "key" shall have same dim 0 (batch size)\');if(o.dims.length===3){if(o.dims[2]!==r.dims[2])throw new Error(\'Input "query" and "key" shall have same dim 2 (hidden_size)\');x=2,v=o.dims[1]}else if(o.dims.length===5){if(o.dims[2]!==t.numHeads||o.dims[3]!==2||o.dims[4]!==I)throw new Error(\'Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv\');if(i)throw new Error(\'Expect "value" be none when "key" has packed kv format.\');x=5,v=o.dims[1]}else{if(o.dims[1]!==t.numHeads||o.dims[3]!==I)throw new Error(\'Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key\');x=0,v=o.dims[2]}}else{if(r.dims.length!==3&&r.dims.length!==5)throw new Error(\'Input "query" is expected to have 3 or 5 dimensions when key is empty\');if(r.dims.length===5&&(r.dims[2]!==t.numHeads||r.dims[3]!==3))throw new Error(\'Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv\');x=3}if(u){if(u.dims.length!==1)throw new Error(\'Input "bias" is expected to have 1 dimension\');if(i&&r.dims.length===5&&r.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let E=0;if(a){E=8;let N=a.dims;throw N.length===1?N[0]===y?E=1:N[0]===3*y+2&&(E=3):N.length===2&&N[0]===y&&N[1]===v&&(E=5),E===8?new Error(\'Input "key_padding_mask" shape shall be (batch_size) or (batch_size, kv_sequence_length)\'):new Error("Mask not supported")}let P=!1,O=_;if(i){if(i.dims.length!==3&&i.dims.length!==4)throw new Error(\'Input "value" is expected to have 3 or 4 dimensions\');if(r.dims[0]!==i.dims[0])throw new Error(\'Input "query" and "value" shall have same dim 0 (batch_size)\');if(i.dims.length===3){if(v!==i.dims[1])throw new Error(\'Input "key" and "value" shall have the same dim 1 (kv_sequence_length)\');O=i.dims[2]}else{if(v!==i.dims[2])throw new Error(\'Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)\');O=i.dims[1]*i.dims[3],P=!0}}let R=S+v,L=!1;if(a)throw new Error("Key padding mask is not supported");if(c){if(c.dims.length!==4)throw new Error(\'Input "relative_position_bias" is expected to have 4 dimensions\');if(c.dims[0]!==y&&c.dims[0]!==1||c.dims[1]!==t.numHeads||c.dims[2]!==w||c.dims[3]!==R)throw new Error(\'Input "relative_position_bias" shape (batch_size, 1, sequence_length, kv_sequence_length)\')}return{batchSize:y,sequenceLength:w,pastSequenceLength:S,kvSequenceLength:v,totalSequenceLength:R,maxSequenceLength:A,inputHiddenSize:0,hiddenSize:_,vHiddenSize:O,headSize:I,vHeadSize:Math.floor(O/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:E,scale:t.scale,broadcastResPosBias:L,passPastInKv:P,qkvFormat:x}},Lu=e=>ve({...e}),Hu=ve({perm:[0,2,1,3]}),ap=(e,t,r,o,i,u,a)=>{let c=[o,i,u],p=M.size(c),h=[{type:12,data:p},{type:12,data:a},{type:12,data:u}],d=y=>{let w=j("qkv_with_bias",t.dataType,c),_=U("qkv",t.dataType,c),v=U("bias",r.dataType,c),S=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`\n  ${y.registerUniforms(S).declareVariables(_,v,w)}\n  ${y.mainStart()}\n    ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;\n\n    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];\n  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:c,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h}),getShaderSource:d},{inputs:[t,r],outputs:[-1]})[0]},Ko=(e,t,r,o,i,u,a,c)=>{let p=u;if(a){if(o===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return p=ap(e,u,a,t,o,r*i,c),p=p.reshape([t,o,r,i]),e.compute(yt(p,Hu.perm),{inputs:[p],outputs:[-1]})[0]}else return u.dims.length===3&&(p=u.reshape([t,o,r,i])),e.compute(yt(p,Hu.perm),{inputs:[p],outputs:[-1]})[0]},Fu=(e,t)=>{let r=ip(e.inputs,t),o=e.inputs[0],i=it(e.inputs,1),u=it(e.inputs,2),a=it(e.inputs,3),c=it(e.inputs,4),p=it(e.inputs,5),h=it(e.inputs,6),d=it(e.inputs,7);if(o.dims.length===5)throw new Error("Packed QKV is not implemented");if(i?.dims.length===5)throw new Error("Packed KV is not implemented");let y=i&&u&&i.dims.length===4&&u.dims.length===4,w=Ko(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,o,a,0);if(y)return Pn(e,w,i,u,c,void 0,h,d,p,r,t);if(!i||!u)throw new Error("key and value must be provided");let _=Ko(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.headSize,i,a,r.hiddenSize),v=Ko(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.vHeadSize,u,a,2*r.hiddenSize);Pn(e,w,_,v,c,void 0,h,d,p,r,t)}});var sp,up,dp,lp,cp,pp,mp,fp,ju,Ku=Y(()=>{"use strict";ye();Se();_e();sp=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},up=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n            k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n            if (k < 0) {\n              break;\n            }\n            if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n              break;\n            }\n            offset += k * i32(${fe("uniforms.x_strides",i,t)});\n        `;return`\n          value = ${e.type.value}(uniforms.constant_value);\n          for (var i = 0; i < 1; i++) {\n            var offset = 0;\n            var k = 0;\n            ${o}\n            value = x[offset];\n          }\n      `},dp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0) {\n                  k = -k;\n                }\n                {\n                  let _2n_1 = 2 * (i32(${fe("uniforms.x_shape",i,t)}) - 1);\n                  k = k % _2n_1;\n                  if(k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                    k = _2n_1 - k;\n                  }\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},lp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0) {\n                  k = 0;\n                }\n                if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                  k = i32(${fe("uniforms.x_shape",i,t)}) - 1;\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},cp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0)  {\n                  k += i32(${fe("uniforms.x_shape",i,t)}]);\n                }\n                if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                  k -= i32(${fe("uniforms.x_shape",i,t)});\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},pp=(e,t,r)=>{switch(r.mode){case 0:return up(e,t,r.pads.length);case 1:return dp(e,t,r.pads.length);case 2:return lp(e,t,r.pads.length);case 3:return cp(e,t,r.pads.length);default:throw new Error("Invalid mode")}},mp=(e,t)=>{let r=M.padShape(e[0].dims.slice(),t.pads),o=e[0].dims,i=M.size(r),u=[{type:12,data:i},{type:6,data:t.pads}];t.mode===0&&u.push({type:e[0].dataType,data:t.value}),u.push(...Z(e[0].dims,r));let a=["rank"],c=p=>{let h=j("output",e[0].dataType,r.length),d=U("x",e[0].dataType,o.length),y=d.type.value,w=pp(h,o.length,t),_=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&_.push({name:"constant_value",type:y}),`\n            ${p.registerUniforms(_).declareVariables(d,h)}\n            ${p.mainStart()}\n            ${p.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n            let indices = ${h.offsetToIndices("global_idx")};\n\n            var value = ${y}(0);\n            ${w}\n            output[global_idx] = value;\n        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}`,inputDependencies:a},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(r)/64)},programUniforms:u}),getShaderSource:c}},fp=(e,t)=>{if(e.length>1){let r=e[1].getBigInt64Array(),o=e.length>=3&&e[2].data?e[2].getFloat32Array()[0]:0,i=e[0].dims.length,u=new Int32Array(2*i).fill(0);if(e.length>=4){let c=e[3].getBigInt64Array();for(let p=0;p<c.length;p++)u[Number(c[p])]=Number(r[p]),u[Number(c[p])+i]=Number(r[p+c.length])}else r.forEach((c,p)=>u[Number(p)]=Number(c));let a=[];return u.forEach(c=>a.push(c)),{mode:t.mode,value:o,pads:a}}else return t},ju=(e,t)=>{sp(e.inputs);let r=fp(e.inputs,t);e.compute(mp(e.inputs,r),{inputs:[0]})}});var Nn,Yu,Zu,Xu,Qu,hp,gp,Ju,ed,td,rd,nd,od,id,ad,sd,ud,dd,ld,cd=Y(()=>{"use strict";$r();ye();Se();_e();Nn=e=>{if(vr.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},Yu=(e,t,r)=>{let o=t.format==="NHWC",i=e.dims.slice();o&&i.splice(1,0,i.pop());let u=Object.hasOwnProperty.call(t,"dilations"),a=t.kernelShape.slice(),c=t.strides.slice(),p=u?t.dilations.slice():[],h=t.pads.slice();nr.adjustPoolAttributes(r,i,a,c,p,h);let d=nr.computePoolOutputShape(r,i,c,p,a,h,t.autoPad),y=Object.assign({},t);u?Object.assign(y,{kernelShape:a,strides:c,pads:h,dilations:p,cacheKey:t.cacheKey}):Object.assign(y,{kernelShape:a,strides:c,pads:h,cacheKey:t.cacheKey});let w=d.slice();return w.push(w.splice(1,1)[0]),[y,o?w:d]},Zu=(e,t)=>{let r=t.format==="NHWC",o=M.size(e),i=M.size(t.kernelShape),u=[{type:12,data:o},{type:12,data:i}],a=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let c=t.kernelShape[t.kernelShape.length-1],p=t.strides[t.strides.length-1],h=t.pads[t.pads.length/2-1],d=t.pads[t.pads.length-1],y=!!(h+d);u.push({type:12,data:c},{type:12,data:p},{type:12,data:h},{type:12,data:d}),a.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let w=!1;if(t.kernelShape.length===2){let _=t.kernelShape[t.kernelShape.length-2],v=t.strides[t.strides.length-2],S=t.pads[t.pads.length/2-2],A=t.pads[t.pads.length-2];w=!!(S+A),u.push({type:12,data:_},{type:12,data:v},{type:12,data:S},{type:12,data:A}),a.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[u,a,!0,y,w]}else{if(r)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let c=M.computeStrides(t.kernelShape);u.push({type:12,data:c},{type:12,data:t.pads},{type:12,data:t.strides}),a.push({name:"kernelStrides",type:"u32",length:c.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let p=t.pads.reduce((h,d)=>h+d);return[u,a,!!p,!1,!1]}},Xu=(e,t,r,o,i,u,a,c,p,h,d,y)=>{let w=i.format==="NHWC",_=t.type.value,v=j("output",t.type.tensor,o);if(i.kernelShape.length<=2){let S="",A="",I="",x=r-(w?2:1);if(d?S=`\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[${x}] = indices[${x}] * uniforms.sw - uniforms.pwStart + i;\n                  if (xIndices[${x}] < 0 || xIndices[${x}]\n                      >= uniforms.x_shape[${x}]) {\n                    pad++;\n                    continue;\n                  }\n                  let x_val = x[${t.indicesToOffset("xIndices")}];\n                  ${u}\n                }`:S=`\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[${x}] = indices[${x}] * uniforms.sw - uniforms.pwStart + i;\n                  let x_val = x[${t.indicesToOffset("xIndices")}];\n                  ${u}\n                }`,i.kernelShape.length===2){let P=r-(w?3:2);y?A=`\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[${P}] = indices[${P}] * uniforms.sh - uniforms.phStart + j;\n                  if (xIndices[${P}] < 0 || xIndices[${P}] >= uniforms.x_shape[${P}]) {\n                    pad += i32(uniforms.kw);\n                    continue;\n                  }\n              `:A=`\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[${P}] = indices[${P}] * uniforms.sh - uniforms.phStart + j;\n                `,I=`\n              }\n            `}return`\n            ${e.registerUniforms(p).declareVariables(t,v)}\n\n            ${e.mainStart()}\n              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n              let indices = ${v.offsetToIndices("global_idx")};\n              var xIndices = ${v.offsetToIndices("global_idx")};\n\n              var value = ${_}(${c});\n              var pad = 0;\n              ${A}\n              ${S}\n              ${I}\n              ${a}\n\n              output[global_idx] = value;\n            }`}else{if(w)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let S=i.kernelShape.length,A=i.pads.length,I="";return h?I=`\n                if (xIndices[j] >= uniforms.x_shape[j]) {\n                  pad++;\n                  isPad = true;\n                  break;\n                }\n              }\n              if (!isPad) {\n                let x_val = x[${t.indicesToOffset("xIndices")}];\n                ${u}\n              }`:I=`\n              }\n              let x_val = x[${t.indicesToOffset("xIndices")}];\n              ${u}\n            `,`\n            ${e.registerUniforms(p).declareVariables(t,v)}\n\n            ${e.mainStart()}\n              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n              let indices = ${v.offsetToIndices("global_idx")};\n              var xIndices = ${v.offsetToIndices("global_idx")};\n\n              var offsets: array<u32, ${S}>;\n\n              var value = ${_}(${c});\n              var pad = 0;\n              var isPad = false;\n\n              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {\n                var offset = i;\n                for (var j = 0u; j < ${S-1}u; j++) {\n                  offsets[j] = offset / ${fe("uniforms.kernelStrides","j",S)};\n                  offset -= offsets[j] * ${fe("uniforms.kernelStrides","j",S)};\n                }\n                offsets[${S-1}] = offset;\n\n                isPad = false;\n                for (var j = ${r-S}u; j < ${r}u; j++) {\n                  xIndices[j] = indices[j] * ${fe("uniforms.strides",`j - ${r-S}u`,S)}\n                    + offsets[j - ${r-S}u] - ${fe("uniforms.pads","j - 2u",A)};\n                  ${I}\n              }\n              ${a}\n\n              output[global_idx] = value;\n            }`}},Qu=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,hp=e=>`${Qu(e)};${e.countIncludePad}`,gp=e=>`${Qu(e)};${e.storageOrder};${e.dilations}`,Ju=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),ed=(e,t,r,o)=>{let[i,u]=Yu(t,o,r),a=U("x",t.dataType,t.dims.length),c=a.type.value,p="value += x_val;",h="";i.countIncludePad?h+=`value /= ${c}(uniforms.kernelSize);`:h+=`value /= ${c}(i32(uniforms.kernelSize) - pad);`;let[d,y,w,_,v]=Zu(u,i);d.push(...Z(t.dims,u));let S=["rank"];return{name:e,shaderCache:{hint:`${o.cacheKey};${w};${_};${v}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:u,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(M.size(u)/64)},programUniforms:d}),getShaderSource:A=>Xu(A,a,t.dims.length,u.length,i,p,h,0,y,w,_,v)}},td=e=>{let t=e.count_include_pad!==0,r=Ju(e);if(r.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let o={countIncludePad:t,...r,cacheKey:""};return{...o,cacheKey:hp(o)}},rd=(e,t)=>{Nn(e.inputs),e.compute(ed("AveragePool",e.inputs[0],!1,t))},nd={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},od=e=>{let t=e.format;return{format:t,...nd,cacheKey:t}},id=(e,t)=>{Nn(e.inputs),e.compute(ed("GlobalAveragePool",e.inputs[0],!0,t))},ad=(e,t,r,o)=>{let[i,u]=Yu(t,o,r),a=`\n      value = max(x_val, value);\n    `,c="",p=U("x",t.dataType,t.dims.length),h=["rank"],[d,y,w,_,v]=Zu(u,i);return d.push(...Z(t.dims,u)),{name:e,shaderCache:{hint:`${o.cacheKey};${w};${_};${v}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:u,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(M.size(u)/64)},programUniforms:d}),getShaderSource:S=>Xu(S,p,t.dims.length,u.length,i,a,c,t.dataType===10?-65504:-1e5,y,w,_,v)}},sd=(e,t)=>{Nn(e.inputs),e.compute(ad("MaxPool",e.inputs[0],!1,t))},ud=e=>{let t=e.storage_order,r=e.dilations,o=Ju(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(o.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let i={storageOrder:t,dilations:r,...o,cacheKey:""};return{...i,cacheKey:gp(i)}},dd=e=>{let t=e.format;return{format:t,...nd,cacheKey:t}},ld=(e,t)=>{Nn(e.inputs),e.compute(ad("GlobalMaxPool",e.inputs[0],!0,t))}});var bp,wp,pd,md=Y(()=>{"use strict";$r();ye();_e();bp=(e,t,r)=>{let o=e===t,i=e<t&&r<0,u=e>t&&r>0;if(o||i||u)throw new Error("Range these inputs\' contents are invalid.")},wp=(e,t,r,o)=>{let i=Math.abs(Math.ceil((t-e)/r)),u=[i],a=i,c=[{type:12,data:a},{type:o,data:e},{type:o,data:r},...Z(u)],p=h=>{let d=j("output",o,u.length),y=d.type.value,w=[{name:"outputSize",type:"u32"},{name:"start",type:y},{name:"delta",type:y}];return`\n        ${h.registerUniforms(w).declareVariables(d)}\n        ${h.mainStart()}\n        ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n        output[global_idx] = uniforms.start + ${y}(global_idx) * uniforms.delta;\n      }`};return{name:"Range",shaderCache:{hint:`${o}`},getShaderSource:p,getRunData:()=>({outputs:[{dims:u,dataType:o}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:c})}},pd=e=>{let t=0,r=0,o=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],r=e.inputs[1].getInt32Array()[0],o=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],r=e.inputs[1].getFloat32Array()[0],o=e.inputs[2].getFloat32Array()[0]),vr.webgpu.validateInputContent&&bp(t,r,o),e.compute(wp(t,r,o,e.inputs[0].dataType),{inputs:[]})}});var vp,$p,_p,Sp,xp,Cp,Ap,Ip,Tp,Ep,Pp,fd,kp,Op,Rp,Bp,Dp,hd,gd,yd=Y(()=>{"use strict";ye();Se();Ze();_e();vp=(e,t)=>{if(e.every(r=>r>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and\n            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},$p=(e,t,r)=>{t.every(i=>i>=0&&i<r||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let o=new Array(r).fill(1);return t.forEach((i,u)=>o[i]=e[u]),o},_p=(e,t,r,o,i,u)=>{let[a,c,p]=r>10?[1,2,3]:[-1,e.length>1?1:-1,-1],h=e[0].dims.length;if(a>0&&e.length>a&&e[a].dims.length>0)e[a].getFloat32Array().forEach(d=>u.push(d));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(c>0&&e.length>c&&e[c].dims.length>0){if(e[c].getFloat32Array().forEach(d=>o.push(d)),o.length!==0&&o.length!==h&&r>=18&&o.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");vp(o,t),t.axes.length>0&&$p(o,t.axes,h).forEach((d,y)=>o[y]=d)}if(p>0&&e.length>p&&(e[p].getBigInt64Array().forEach(d=>i.push(Number(d))),i.length!==h||r>=18&&i.length===t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(o.length!==t.axes.length)throw new Error(\'Resize requires "scales" input size to be of axes rank when axes attributes is specified\');if(i.length!==t.axes.length)throw new Error(\'Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified\')}if(typeof o<"u"&&typeof i<"u"&&o.length>0&&i.length>h)throw new Error("Resize requires only of scales or sizes to be specified")},Sp=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,\n     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`return ${t}(xResized) / ${t}(xScale);`;case"pytorch_half_pixel":return`if (lengthResized > 1) {\n                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;\n                  } else {\n                    return 0.0;\n                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {\n                    return 0.0;\n                  } else {\n                    // The whole part and the fractional part are calculated separately due to inaccuracy of floating\n                    // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an\n                    // offset-by-one error later in floor().\n                    let whole = ${t}(xResized * (lengthOriginal - 1) / (lengthResized - 1));\n                    let fract =\n                        ${t}(xResized * (lengthOriginal - 1) % (lengthResized - 1)) / ${t}(lengthResized - 1);\n                    return whole + fract;\n                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {\n                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +\n                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /\n                        ${t}(lengthResized - 1);\n                  } else {\n                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);\n                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);\n                  const adjustment = ${t}(lengthResized) / outputWidth;\n                  const center = ${t}(lengthOriginal) / 2;\n                  const offset = center * (1 - adjustment);\n                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",xp=(e,t,r)=>`fn getNearestPixelFromOriginal(xOriginal: ${r}, isDownSample: bool) -> ${r} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",Cp=(e,t,r)=>{let o=new Array(r).fill(0).concat(new Array(r).fill(1)),i=e.length===0?o:e.slice();return t.length>0?(t.forEach((u,a)=>{o[u]=i[a],o[a+r]=i[t.length+a]}),o):i},Ap=(e,t,r,o)=>{let i=[];if(r.length>0)if(o.length>0){if(e.forEach(u=>i.push(u)),Math.max(...o)>e.length)throw new Error("axes is out of bound");o.forEach((u,a)=>i[u]=r[a])}else r.forEach(u=>i.push(u));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");i=e.map((u,a)=>Math.round(u*t[a]))}return i},Ip=(e,t,r)=>{let o=(()=>{switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min(...r.axes.map(u=>t[u]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return r.axes.length>0?Math.max(...r.axes.map(u=>t[u]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${r.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let i=e.slice();return r.axes.length>0?(r.axes.forEach(u=>t[u]=o),r.axes.forEach(u=>i[u]=Math.round(e[u]*t[u]))):(t.fill(o,0,t.length),i.forEach((u,a)=>i[a]=Math.round(u*t[a]))),i},Tp=(e,t,r,o,i)=>`\n    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${r.length}> {\n      var original_indices: array<${e.type.value}, ${r.length}>;\n      for (var i:u32 = 0; i < ${r.length}; i++) {\n        var output_index = ${e.indicesGet("output_indices","i")};\n        var scale = ${fe("uniforms.scales","i",o)};\n        var roi_low = ${fe("uniforms.roi","i",i)};\n        var roi_hi = ${fe("uniforms.roi",`i + ${t.length}`,i)};\n        if (scale == 1.0) {\n          original_indices[i] = ${e.type.value}(output_index);\n        } else {\n          var input_shape_i = ${fe("uniforms.input_shape","i",t.length)};\n          var output_shape_i = ${fe("uniforms.output_shape","i",r.length)};\n          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                           input_shape_i, roi_low, roi_hi);\n        }\n      }\n      return original_indices;\n    }`,Ep=(e,t,r,o,i,u,a)=>`\n    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {\n      var input_indices: ${e.type.indices};\n      for (var i:u32 = 0; i < ${o.length}; i++) {\n        var output_index = ${t.indicesGet("output_indices","i")};\n        var input_index: u32;\n        var scale = ${fe("uniforms.scales","i",i)};\n        if (scale == 1.0) {\n          input_index = output_index;\n        } else {\n          var roi_low = ${fe("uniforms.roi","i",u)};\n          var roi_hi = ${fe("uniforms.roi",`i + ${r.length}`,u)};\n          var input_shape_i = ${fe("uniforms.input_shape","i",r.length)};\n          var output_shape_i = ${fe("uniforms.output_shape","i",o.length)};\n          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                        input_shape_i, roi_low, roi_hi);\n          if (!${a} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {\n            if (original_idx < 0) {\n              input_index = 0;\n            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {\n              input_index = input_shape_i - 1;\n            } else {\n              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));\n            }\n          } else {\n            input_index = u32(original_idx);\n          }\n        }\n        ${e.indicesSet("input_indices","i"," input_index")}\n      }\n      return input_indices;\n    }`,Pp=(e,t)=>`\n    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {\n      for (var i:u32 = 0; i < ${t.length}; i++) {\n        var input_index = ${e.indicesGet("input_indices","i")};\n        if (input_index < 0 || input_index >= ${fe("uniforms.input_shape","i",t.length)}) {\n          return false;\n        }\n      }\n      return true;\n    }`,fd=(e,t,r,o)=>e.rank>o?`\n    ${e.indicesSet("input_indices",t,"channel")};\n    ${e.indicesSet("input_indices",r,"batch")};\n`:"",kp=(e,t,r,o,i)=>{let[a,c,p,h]=r.length===2?[-1,0,1,-1]:[0,2,3,1],d=e.type.value;return`\n    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${d} {\n      var input_indices: ${e.type.indices};\n      ${e.indicesSet("input_indices",c,`max(0, min(row, ${r[c]} - 1))`)};\n      ${e.indicesSet("input_indices",p,`max(0, min(col, ${r[p]} - 1))`)};\n      ${fd(e,h,a,2)}\n      return ${e.getByIndices("input_indices")};\n    }\n\n    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${d} {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var row:${d} = originalIndices[${c}];\n      var col:${d} = originalIndices[${p}];\n      ${o?`if (row < 0 || row > (${r[c]} - 1) || col < 0 || col > (${r[p]} - 1)) {\n        return ${i};\n      }`:""};\n      row = max(0, min(row, ${r[c]} - 1));\n      col = max(0, min(col, ${r[p]} - 1));\n      var row1: u32 = u32(row);\n      var col1: u32 = u32(col);\n      var row2: u32 = u32(row + 1);\n      var col2: u32 = u32(col + 1);\n      var channel: u32 = ${r.length>2?`u32(originalIndices[${h}])`:"0"};\n      var batch: u32 =  ${r.length>2?`u32(originalIndices[${a}])`:"0"};\n      var x11: ${d} = getInputValue(batch, channel, row1, col1);\n      var x12: ${d} = getInputValue(batch, channel, row1, col2);\n      var x21: ${d} = getInputValue(batch, channel, row2, col1);\n      var x22: ${d} = getInputValue(batch, channel, row2, col2);\n      var dx1: ${d} = abs(row - ${d}(row1));\n      var dx2: ${d} = abs(${d}(row2) - row);\n      var dy1: ${d} = abs(col - ${d}(col1));\n      var dy2: ${d} = abs(${d}(col2) - col);\n      if (row1 == row2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (col1 == col2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);\n    }`},Op=(e,t,r,o,i,u,a,c,p,h)=>{let d=r.length===2,y=!0,[w,_]=d?[0,1]:y?[2,3]:[1,2],v=e.type.value,S=A=>{let I=A===w?"row":"col";return`\n      fn ${I}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${v} {\n        var output_index = ${t.indicesGet("output_indices",A)};\n        var originalIdx: ${v} = getOriginalCoordinateFromResizedCoordinate(output_index, ${i[A]},\n        ${o[A]}, ${r[A]}, ${u[A]}, ${u[A]} + ${r.length});\n        var fractOriginalIdx: ${v} = originalIdx - floor(originalIdx);\n        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);\n\n        if (${c} && (originalIdx < 0 || originalIdx > (${r[A]} - 1))) {\n          return ${p};\n        }\n        var data: array<${v}, 4> = array<${v}, 4>(0.0, 0.0, 0.0, 0.0);\n        for (var i: i32 = -1; i < 3; i++) {\n          var ${I}: ${v} = originalIdx + ${v}(i);\n          if (${I} < 0 || ${I} >= ${r[A]}) {\n            ${(()=>h?`coefs[i + 1] = 0.0;\n                        continue;`:c?`return ${p};`:`${I} = max(0, min(${I}, ${r[A]} - 1));`)()};\n          }\n        var input_indices_copy: ${e.type.indices} = input_indices;\n          ${e.indicesSet("input_indices_copy",A,`u32(${I})`)};\n          data[i + 1] = ${A===w?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};\n        }\n        return cubicInterpolation1D(data, coefs);\n      }`};return`\n    ${S(w)};\n    ${S(_)};\n  fn getCubicInterpolationCoefs(s: ${v}) -> array<${v}, 4> {\n    var absS = abs(s);\n    var coeffs: array<${v}, 4> = array<${v}, 4>(0.0, 0.0, 0.0, 0.0);\n    var oneMinusAbsS: ${v} = 1.0 - absS;\n    var twoMinusAbsS: ${v} = 2.0 - absS;\n    var onePlusAbsS: ${v} = 1.0 + absS;\n    coeffs[0] = ((${a} * onePlusAbsS - 5 * ${a}) * onePlusAbsS + 8 * ${a}) * onePlusAbsS - 4 * ${a};\n    coeffs[1] = ((${a} + 2) * absS - (${a} + 3)) * absS * absS + 1;\n    coeffs[2] = ((${a} + 2) * oneMinusAbsS - (${a} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;\n    coeffs[3] = ((${a} * twoMinusAbsS - 5 * ${a}) * twoMinusAbsS + 8 * ${a}) * twoMinusAbsS - 4 * ${a};\n    return coeffs;\n  }\n\n  fn cubicInterpolation1D(x: array<${v}, 4>, coefs: array<${v}, 4>) -> ${v} {\n    var coefsSum: ${v} = coefs[0] + coefs[1] + coefs[2] + coefs[3];\n    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;\n  }\n\n  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${v} {\n    var input_indices: ${e.type.indices} = output_indices;\n    return colCubicInterpolation(input_indices, output_indices);\n  }\n    `},Rp=(e,t,r,o,i)=>{let[a,c,p,h,d]=r.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],y=e.type.value;return`\n    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${y} {\n      var input_indices: ${e.type.indices};\n      ${e.indicesSet("input_indices",c,`max(0, min(depth, ${r[c]} - 1))`)};\n      ${e.indicesSet("input_indices",p,`max(0, min(height, ${r[p]} - 1))`)};\n      ${e.indicesSet("input_indices",h,`max(0, min(width, ${r[h]} - 1))`)};\n      ${fd(e,d,a,3)}\n      return ${e.getByIndices("input_indices")};\n    }\n\n    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${y} {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var depth:${y} = originalIndices[${c}];\n      var height:${y} = originalIndices[${p}];\n      var width:${y} = originalIndices[${h}];\n      ${o?`if (depth < 0 || depth > (${r[c]} - 1) || height < 0 || height > (${r[p]} - 1) || width < 0 || (width > ${r[h]} - 1)) {\n      return ${i};\n        }`:""};\n\n    depth = max(0, min(depth, ${r[c]} - 1));\n      height = max(0, min(height, ${r[p]} - 1));\n      width = max(0, min(width, ${r[h]} - 1));\n      var depth1: u32 = u32(depth);\n      var height1: u32 = u32(height);\n      var width1: u32 = u32(width);\n      var depth2: u32 = u32(depth + 1);\n      var height2: u32 = u32(height + 1);\n      var width2: u32 = u32(width + 1);\n      var channel: u32 = ${r.length>3?`u32(originalIndices[${d}])`:"0"};\n      var batch: u32 =  ${r.length>3?`u32(originalIndices[${a}])`:"0"};\n\n      var x111: ${y} = getInputValue(batch, channel, depth1, height1, width1);\n      var x112: ${y} = getInputValue(batch, channel, depth1, height1, width2);\n      var x121: ${y} = getInputValue(batch, channel, depth1, height2, width1);\n      var x122: ${y} = getInputValue(batch, channel, depth1, height2, width2);\n      var x211: ${y} = getInputValue(batch, channel, depth2, height1, width1);\n      var x212: ${y} = getInputValue(batch, channel, depth2, height1, width2);\n      var x221: ${y} = getInputValue(batch, channel, depth2, height2, width1);\n      var x222: ${y} = getInputValue(batch, channel, depth2, height2, width2);\n      var dx1: ${y} = abs(depth - ${y}(depth1));\n      var dx2: ${y} = abs(${y}(depth2) - depth);\n      var dy1: ${y} = abs(height - ${y}(height1));\n      var dy2: ${y} = abs(${y}(height2) - height);\n      var dz1: ${y} = abs(width - ${y}(width1));\n      var dz2: ${y} = abs(${y}(width2) - width);\n      if (depth1 == depth2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (height1 == height2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      if (width1 == width2) {\n        dz1 = 0.5;\n        dz2 = 0.5;\n      }\n      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +\n              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);\n    }`},Bp=(e,t,r,o,i,u)=>{let a=e.dims,c=Cp(u,t.axes,a.length),p=Ap(a,o,i,t.axes),h=o.slice();o.length===0&&(h=a.map((x,E)=>x===0?1:p[E]/x),t.keepAspectRatioPolicy!=="stretch"&&(p=Ip(a,h,t)));let d=j("output",e.dataType,p.length),y=U("input",e.dataType,a.length),w=M.size(p),_=a.length===p.length&&a.every((x,E)=>x===p[E]),v=t.coordinateTransformMode==="tf_crop_and_resize",S=t.extrapolationValue,A=y.type.value,I=x=>`\n      ${_?"":`\n      ${Sp(t.coordinateTransformMode,A)};\n      ${(()=>{switch(t.mode){case"nearest":return`\n              ${Pp(y,a)};\n              ${xp(t.nearestMode,r,A)};\n              ${Ep(y,d,a,p,h.length,c.length,v)};\n              `;case"linear":return`\n              ${Tp(d,a,p,h.length,c.length)};\n              ${(()=>{if(a.length===2||a.length===4)return`${kp(y,d,a,v,S)}`;if(a.length===3||a.length===5)return`${Rp(y,d,a,v,S)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};\n            `;case"cubic":return`\n            ${(()=>{if(a.length===2||a.length===4)return`${Op(y,d,a,p,h,c,t.cubicCoeffA,v,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};\n            `;default:throw Error("Invalid resize mode")}})()};\n      `}\n      ${x.registerUniform("output_size","u32").registerUniform("scales","f32",h.length).registerUniform("roi","f32",c.length).declareVariables(y,d)}\n      ${x.mainStart()}\n        ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n        ${_?"output[global_idx] = input[global_idx];":`\n        let output_indices = ${d.offsetToIndices("global_idx")};\n        var input_indices: ${y.type.indices};\n        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);\n                if (checkInputIndices(input_indices)) {\n                  output[global_idx] = ${y.getByIndices("input_indices")};\n                } else {\n                  output[global_idx] = ${t.extrapolationValue};\n                }`;case"linear":return`output[global_idx] = ${a.length===2||a.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};\n`}\n      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${r}|${h.length>0?h:""}|${i.length>0?i:""}|${c.length>0?c:""}|${_}|${a}`,inputDependencies:["rank"]},getShaderSource:I,getRunData:()=>({outputs:[{dims:p,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(w/64)},programUniforms:[{type:12,data:w},{type:1,data:h},{type:1,data:c},...Z(a,p)]})}},Dp=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},hd=(e,t)=>{let r=[],o=[],i=[],u=Dp(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");_p(e.inputs,t,u,r,o,i),e.compute(Bp(e.inputs[0],t,u,r,o,i),{inputs:[0]})},gd=e=>{let t=e.antialias,r=e.axes,o=e.coordinateTransformMode,i=e.cubicCoeffA,u=e.excludeOutside!==0,a=e.extrapolationValue,c=e.keepAspectRatioPolicy,p=e.mode,h=e.nearestMode===""?"simple":e.nearestMode;return ve({antialias:t,axes:r,coordinateTransformMode:o,cubicCoeffA:i,excludeOutside:u,extrapolationValue:a,keepAspectRatioPolicy:c,mode:p,nearestMode:h})}});var zp,Mp,bd,wd=Y(()=>{"use strict";ye();Se();Ze();_e();zp=(e,t)=>{let[r,o,i,u]=e,{numHeads:a,rotaryEmbeddingDim:c}=t;if(r.dims.length!==3&&r.dims.length!==4)throw new Error(`Input \'x\' is expected to have 3 or 4 dimensions, got ${r.dims.length}`);if(!M.areEqual(o.dims,[])&&!M.areEqual(o.dims,[1])&&o.dims.length!==2)throw new Error(`Input \'position_ids\' is expected to have 0, 1, or 2 dimensions, got ${o.dims.length}`);if(i.dims.length!==2)throw new Error(`Input \'cos_cache\' is expected to have 2 dimensions, got ${i.dims.length}`);if(u.dims.length!==2)throw new Error(`Input \'sin_cache\' is expected to have 2 dimensions, got ${u.dims.length}`);if(!M.areEqual(i.dims,u.dims))throw new Error("Inputs \'cos_cache\' and \'sin_cache\' are expected to have the same shape");if(c>0&&a===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let p=r.dims[0],h=r.dims[r.dims.length-2],d=i.dims[0],y=M.sizeFromDimension(r.dims,1)/h,w=c===0?i.dims[1]*2:y/a;if(c>w)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(o.dims.length===2){if(p!==o.dims[0])throw new Error(`Input \'position_ids\' dimension 0 should be of size batch_size, got ${o.dims[0]}`);if(h!==o.dims[1])throw new Error(`Input \'position_ids\' dimension 1 should be of size sequence_length, got ${o.dims[1]}`)}if(w/2!==i.dims[1]&&c/2!==i.dims[1])throw new Error(`Input \'cos_cache\' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${i.dims[1]}`);if(h>d)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Mp=(e,t)=>{let{interleaved:r,numHeads:o,rotaryEmbeddingDim:i,scale:u}=t,a=e[0].dims[0],c=M.sizeFromDimension(e[0].dims,1),p=e[0].dims[e[0].dims.length-2],h=c/p,d=e[2].dims[1],y=i===0?d*2:h/o,w=new Array(a,p,h/y,y-d),_=M.computeStrides(w),v=[{type:1,data:u},{type:12,data:w},{type:12,data:_},...e[0].dims.length===3?new Array({type:12,data:[c,h,y,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[c,y,p*y,1]}):[],...Z(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],S=A=>{let I=U("input",e[0].dataType,e[0].dims.length),x=U("position_ids",e[1].dataType,e[1].dims.length),E=U("cos_cache",e[2].dataType,e[2].dims.length),P=U("sin_cache",e[3].dataType,e[3].dims.length),O=j("output",e[0].dataType,e[0].dims.length);return A.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:w.length},{name:"global_strides",type:"u32",length:_.length},{name:"input_output_strides",type:"u32",length:_.length}]),`\n        ${A.declareVariables(I,x,E,P,O)}\n\n        ${A.mainStart(or)}\n          let half_rotary_emb_dim = uniforms.${E.name}_shape[1];\n          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;\n          let size = uniforms.global_shape[0] * uniforms.global_strides[0];\n          ${A.guardAgainstOutOfBoundsWorkgroupSizes("size")}\n\n          if (bsnh[3] < half_rotary_emb_dim) {\n            let position_ids_idx =\n                ${x.broadcastedIndicesToOffset("bsnh.xy",j("",x.type.tensor,2))};\n            let position_id =\n                u32(${x.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);\n            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${r});\n            let j = i + select(half_rotary_emb_dim, 1, ${r});\n            let re = ${I.getByOffset("i")} * ${E.get("position_id","bsnh[3]")} -\n                ${I.getByOffset("j")} * ${P.get("position_id","bsnh[3]")};\n            ${O.setByOffset("i","re")}\n            let im = ${I.getByOffset("i")} * ${P.get("position_id","bsnh[3]")} +\n                ${I.getByOffset("j")} * ${E.get("position_id","bsnh[3]")};\n            ${O.setByOffset("j","im")}\n          } else {\n            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;\n            ${O.setByOffset("k",I.getByOffset("k"))}\n          }\n        }`};return{name:"RotaryEmbedding",shaderCache:{hint:ve({interleaved:r}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:S,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(w)/or)},programUniforms:v})}},bd=(e,t)=>{zp(e.inputs,t),e.compute(Mp(e.inputs,t))}});var Up,Vp,vd,$d=Y(()=>{"use strict";ye();Se();_e();Up=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],r=e[1],o=e[2];if(t.dataType!==r.dataType||t.dataType!==o.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(r.dims.length!==3&&r.dims.length!==2)throw new Error("Skip must be 2D or 3D");let i=t.dims[t.dims.length-1],u=t.dims[t.dims.length-2];if(r.dims[r.dims.length-1]!==i)throw new Error("Skip must have the same hidden size as input");if(r.dims[r.dims.length-2]!==u)throw new Error("Skip must have the same sequence length as input");if(o.dims.length!==1)throw new Error("Gamma must be 1D");if(o.dims[o.dims.length-1]!==i)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let a=e[3];if(a.dims.length!==1)throw new Error("Beta must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let a=e[4];if(a.dims.length!==1)throw new Error("Bias must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Bias must have the same hidden size as input")}},Vp=(e,t,r,o)=>{let i=t.simplified,u=e[0].dims,a=M.size(u),c=u,p=a,h=u.slice(-1)[0],d=o?u.slice(0,-1).concat(1):[],y=!i&&e.length>3,w=e.length>4,_=o&&r>1,v=o&&r>2,S=r>3,A=Me(h),I=[{type:12,data:p},{type:12,data:A},{type:12,data:h},{type:1,data:t.epsilon}],x=P=>{let O=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],R=[U("x",e[0].dataType,e[0].dims,A),U("skip",e[1].dataType,e[1].dims,A),U("gamma",e[2].dataType,e[2].dims,A)];y&&R.push(U("beta",e[3].dataType,e[3].dims,A)),w&&R.push(U("bias",e[4].dataType,e[4].dims,A)),R.push(j("output",e[0].dataType,c,A)),_&&R.push(j("mean_output",1,d)),v&&R.push(j("inv_std_output",1,d)),S&&R.push(j("input_skip_bias_sum",e[0].dataType,c,A));let L=De(e[0].dataType);return`\n\n      ${P.registerUniforms(O).declareVariables(...R)}\n\n      ${P.mainStart()}\n        ${P.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size / uniforms.hidden_size")}\n        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;\n        let offset = global_idx * hidden_size_vectorized;\n        var sum = ${$t("f32",A)};\n        var squareSum = ${$t("f32",A)};\n        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {\n          let skip_value = skip[offset + i];\n          let bias_value = ${w?"bias[i]":L+"(0.0)"};\n          let input_value = x[offset + i];\n          let value = input_value + skip_value + bias_value;\n          ${S?"input_skip_bias_sum[offset + i] = value;":""}\n          output[offset + i] = value;\n          let f32_value = ${ir(L,A,"value")};\n          sum += f32_value;\n          squareSum += f32_value * f32_value;\n        }\n        let mean = ${_t("sum",A)} / f32(uniforms.hidden_size);\n        let inv_std_dev = inverseSqrt(${_t("squareSum",A)} / f32(uniforms.hidden_size) ${i?"":"- mean * mean"} + uniforms.epsilon);\n        ${_?"mean_output[global_idx] = mean;":""}\n        ${v?"inv_std_output[global_idx] = inv_std_dev;":""}\n        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {\n          output[offset + i] = (output[offset + i] ${i?"":`- ${L}(mean)`}) * ${L}(inv_std_dev) * gamma[i] ${y?"+ beta[i]":""};\n        }\n      }`},E=[{dims:c,dataType:e[0].dataType}];return r>1&&E.push({dims:d,dataType:1}),r>2&&E.push({dims:d,dataType:1}),r>3&&E.push({dims:u,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${A};${_};${v};${S}`,inputDependencies:e.map((P,O)=>"type")},getShaderSource:x,getRunData:()=>({outputs:E,dispatchGroup:{x:Math.ceil(p/h/64)},programUniforms:I})}},vd=(e,t)=>{Up(e.inputs);let o=[0];e.outputCount>1&&o.push(-3),e.outputCount>2&&o.push(-3),e.outputCount>3&&o.push(3),e.compute(Vp(e.inputs,t,e.outputCount,!1),{outputs:o})}});var Wp,Gn,Np,_d,Gp,Hp,Sd,xd,Cd=Y(()=>{"use strict";ye();Se();Ze();_e();Wp=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((r,o)=>{if(e[o+1].dataType!==6&&e[o+1].dataType!==7)throw new Error(`Input ${o} must be an array of int32 or int64`)})},Gn=(e,t)=>{let r=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(o=>r.push(Number(o)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(o=>r.push(Number(o)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return r},Np=(e,t)=>{if(e.length>1){let r=Gn(e,1),o=Gn(e,2),i=Gn(e,3);return i.length===0&&(i=[...Array(e[0].dims.length).keys()]),ve({starts:r,ends:o,axes:i})}else return t},_d=(e,t,r,o,i)=>{let u=e;return e<0&&(u+=r[o[t]]),i[t]<0?Math.max(0,Math.min(u,r[o[t]]-1)):Math.max(0,Math.min(u,r[o[t]]))},Gp=(e,t,r)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {\n          var input_indices: ${e.type.indices};\n          var carry = 0u;\n          for (var i = ${r.length}; i >= 0; i--) {\n            let input_shape_i = ${fe("uniforms.input_shape","i",r.length)};\n            let steps_i = ${fe("uniforms.steps","i",r.length)};\n            let signs_i = ${fe("uniforms.signs","i",r.length)};\n            let starts_i = ${fe("uniforms.starts","i",r.length)};\n            var output_index = ${t.indicesGet("output_indices","i")};\n            var input_index = output_index * steps_i + starts_i + carry;\n            carry = input_index / input_shape_i;\n            input_index = input_index % input_shape_i;\n            if (signs_i < 0) {\n              input_index = input_shape_i - input_index - 1u + starts_i;\n            }\n            ${e.indicesSet("input_indices","i","input_index")};\n          }\n          return input_indices;\n      }`,Hp=(e,t)=>{let r=e[0].dims,o=M.size(r),i=t.axes.length>0?M.normalizeAxes(t.axes,r.length):[...Array(r.length).keys()],u=Gn(e,4);u.forEach(I=>I!==0||(()=>{throw new Error("step cannot be 0")})),u.length===0&&(u=Array(i.length).fill(1));let a=t.starts.map((I,x)=>_d(I,x,r,i,u)),c=t.ends.map((I,x)=>_d(I,x,r,i,u));if(i.length!==a.length||i.length!==c.length)throw new Error("start, ends and axes should have the same number of elements");if(i.length!==r.length)for(let I=0;I<r.length;++I)i.includes(I)||(a.splice(I,0,0),c.splice(I,0,r[I]),u.splice(I,0,1));let p=u.map(I=>Math.sign(I));u.forEach((I,x,E)=>{if(I<0){let P=(c[x]-a[x])/I,O=a[x],R=O+P*u[x];a[x]=R,c[x]=O,E[x]=-I}});let h=r.slice(0);i.forEach((I,x)=>{h[I]=Math.ceil((c[I]-a[I])/u[I])});let d={dims:h,dataType:e[0].dataType},y=j("output",e[0].dataType,h.length),w=U("input",e[0].dataType,e[0].dims.length),_=M.size(h),v=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:a.length},{name:"signs",type:"i32",length:p.length},{name:"steps",type:"u32",length:u.length}],S=[{type:12,data:_},{type:12,data:a},{type:6,data:p},{type:12,data:u},...Z(e[0].dims,h)],A=I=>`\n      ${I.registerUniforms(v).declareVariables(w,y)}\n        ${Gp(w,y,r)}\n        ${I.mainStart()}\n          ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n          let output_indices = ${y.offsetToIndices("global_idx")};\n          let input_indices = calculateInputIndices(output_indices);\n          ${y.setByOffset("global_idx",w.getByIndices("input_indices"))}\n      }`;return{name:"Slice",shaderCache:{hint:`${p.length}_${a.length}_${u.length}`,inputDependencies:["rank"]},getShaderSource:A,getRunData:()=>({outputs:[d],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:S})}},Sd=(e,t)=>{Wp(e.inputs,t);let r=Np(e.inputs,t);e.compute(Hp(e.inputs,r),{inputs:[0]})},xd=e=>{let t=e.starts,r=e.ends,o=e.axes;return ve({starts:t,ends:r,axes:o})}});var Lp,Fp,Ad,Id,Td=Y(()=>{"use strict";ye();Se();Ze();_e();Lp=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},Fp=(e,t)=>{let r=e.dims,o=M.size(r),i=64,u=t.axis;if(u<0&&(u=r.length+u),u<r.length-1)throw new Error("softmax only supports last axis for now.");let a=r[u],c=o/a,p=Me(a),h=a/p,d=(A,I)=>I===4?`max(max(${A}.x, ${A}.y), max(${A}.z, ${A}.w))`:I===2?`max(${A}.x, ${A}.y)`:I===3?`max(max(${A}.x, ${A}.y), ${A}.z)`:A,y=U("x",e.dataType,e.dims,p),w=j("result",e.dataType,e.dims,p),_=y.type.value,v=De(e.dataType)==="f32"?`var threadMax = ${_}(-3.402823e+38f);`:`var threadMax = ${_}(-65504.0h);`,S=A=>`\n      var<workgroup> rowMaxShared : ${_};\n      var<workgroup> rowSumShared : ${_};\n      var<workgroup> threadShared : array<${_}, ${i}>;\n\n      fn getValue(row: i32, col: i32, row_stride: i32) -> ${_} {\n        let index = row * row_stride + col;\n        return x[index];\n      }\n\n      fn setValue(row: i32, col: i32, row_stride: i32, value: ${_}) {\n        let index = row * row_stride + col;\n        result[index] = value;\n      }\n      ${A.registerUniform("packedCols","i32").declareVariables(y,w)}\n      ${A.mainStart()}\n        let gindex = i32(global_idx);\n        let lindex = i32(local_idx);\n        const wg = ${i};\n        let row = gindex / wg;\n        let cols = uniforms.packedCols;\n        let row_stride : i32 = uniforms.packedCols;\n\n        // find the rows max\n        ${v}\n        for (var col = lindex; col < cols; col += wg) {\n          let value = getValue(row, col, row_stride);\n          threadMax = max(threadMax, value);\n        }\n        if (lindex < cols) {\n          threadShared[lindex] = threadMax;\n        }\n        workgroupBarrier();\n\n        var reduceSize = min(cols, wg);\n        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {\n          reduceSize = currSize + (reduceSize & 1);\n          if (lindex < currSize) {\n            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowMaxShared = ${_}(${d("threadShared[0]",p)});\n        }\n        workgroupBarrier();\n\n        // find the rows sum\n        var threadSum = ${_}(0.0);\n        for (var col = lindex; col < cols; col += wg) {\n          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);\n          threadSum += subExp;\n        }\n        threadShared[lindex] = threadSum;\n        workgroupBarrier();\n\n        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {\n          if (lindex < currSize) {\n            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowSumShared = ${_}(${_t("threadShared[0]",p)});\n        }\n        workgroupBarrier();\n\n        // calculate final value for each element in the row\n        for (var col = lindex; col < cols; col += wg) {\n          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;\n          setValue(row, col, row_stride, value);\n        }\n      }`;return{name:"Softmax",shaderCache:{hint:`${p}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.dataType}],dispatchGroup:{x:c},programUniforms:[{type:6,data:h}]}),getShaderSource:S}},Ad=(e,t)=>{Lp(e.inputs),e.compute(Fp(e.inputs[0],t))},Id=e=>ve({axis:e.axis})});var qp,jp,Kp,Yp,Zp,Ed,Pd,kd=Y(()=>{"use strict";ye();Se();Ze();_e();qp=e=>{if(!e||e.length<1)throw new Error("too few inputs")},jp=(e,t)=>{let r=[],o=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(i=>r.push(Number(i))),o=r.length),ve({numOutputs:o,axis:t.axis,splitSizes:r})},Kp=e=>`\nfn calculateOutputIndex(index: u32) -> u32 {\n    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {\n    if (index < ${fe("uniforms.size_in_split_axis","i",e)}) {\n        return i;\n    }\n    }\n    return ${e}u;\n}`,Yp=e=>{let t=e.length,r=[];for(let o=0;o<t;++o){let i=e[o].setByIndices("indices","input[global_idx]");t===1?r.push(i):o===0?r.push(`if (output_number == ${o}u) { ${i} }`):o===t-1?r.push(`else { ${i} }`):r.push(`else if (output_number == ${o}) { ${i} }`)}return`\n      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {\n        ${r.join(`\n`)}\n      }`},Zp=(e,t)=>{let r=e[0].dims,o=M.size(r),i=e[0].dataType,u=M.normalizeAxis(t.axis,r.length),a=new Array(t.numOutputs),c=U("input",i,r.length),p=new Array(t.numOutputs),h=[],d=[],y=0,w=[{type:12,data:o}];for(let v=0;v<t.numOutputs;v++){y+=t.splitSizes[v],p[v]=y;let S=r.slice();S[t.axis]=t.splitSizes[v],d.push(S),a[v]=j(`output${v}`,i,S.length),h.push({dims:d[v],dataType:e[0].dataType})}w.push({type:12,data:p},...Z(r,...d));let _=v=>`\n  ${v.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",p.length).declareVariables(c,...a)}\n  ${Kp(p.length)}\n  ${Yp(a)}\n\n  ${v.mainStart()}\n    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}\n\n    var indices = ${c.offsetToIndices("global_idx")};\n    var index = ${c.indicesGet("indices",u)};\n    let output_number = calculateOutputIndex(index);\n    if (output_number != 0) {\n      index -= ${fe("uniforms.size_in_split_axis","output_number - 1u",p.length)};\n      ${c.indicesSet("indices",u,"index")};\n    }\n    writeBufferData(output_number, indices, global_idx);\n  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:_,getRunData:()=>({outputs:h,dispatchGroup:{x:Math.ceil(o/64)},programUniforms:w})}},Ed=(e,t)=>{qp(e.inputs);let r=e.inputs.length===1?t:jp(e.inputs,t);e.compute(Zp(e.inputs,r),{inputs:[0]})},Pd=e=>{let t=e.axis,r=e.splitSizes,o=e.numOutputs<0?r.length:e.numOutputs;if(o!==r.length)throw new Error("numOutputs and splitSizes lengh must be equal");return ve({axis:t,numOutputs:o,splitSizes:r})}});var Od,Xp,Qp,Jp,Rd,Bd=Y(()=>{"use strict";ye();Se();_e();Od=e=>Array.from(e.getBigInt64Array(),Number),Xp=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(Od(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},Qp=(e,t)=>{let r=[];for(let o=0;o<e.length;++o)r.push(e[o]*t[o]);return r},Jp=e=>{let t=e[0].dims,r=Od(e[1]),o=Qp(t,r),i=M.size(o),u=e[0].dataType,a=U("input",u,t.length),c=j("output",u,o.length),p=h=>`\n      const inputShape = ${a.indices(...t)};\n      ${h.registerUniform("output_size","u32").declareVariables(a,c)}\n      ${h.mainStart()}\n      ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n      let output_indices = ${c.offsetToIndices("global_idx")};\n      var input_indices: ${a.type.indices};\n      for (var i = 0; i < ${t.length}; i++) {\n        let input_dim_i = ${a.indicesGet("uniforms.input_shape","i")};\n        let input_dim_value = ${c.indicesGet("output_indices","i")}  % input_dim_i;\n\n        ${a.indicesSet("input_indices","i","input_dim_value")}\n      }\n      ${c.setByOffset("global_idx",a.getByIndices("input_indices"))}\n    }`;return{name:"Tile",shaderCache:{hint:`${r}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},...Z(e[0].dims,o)]}),getShaderSource:p}},Rd=e=>{Xp(e.inputs),e.compute(Jp(e.inputs),{inputs:[0]})}});var em,tm,Dd,zd=Y(()=>{"use strict";ye();Se();_e();em=(e,t,r,o,i)=>{let u=j("output_data",i,r.length,4),a=U("a_data",t[1].dataType,t[1].dims.length,4),c=U("b_data",t[2].dataType,t[2].dims.length,4),p=U("c_data",t[0].dataType,t[0].dims.length,4),h,d=(y,w,_)=>`select(${w}, ${y}, ${_})`;if(!o)h=u.setByOffset("global_idx",d(a.getByOffset("global_idx"),c.getByOffset("global_idx"),p.getByOffset("global_idx")));else{let y=(w,_,v="")=>{let S=`a_data[index_a${_}][component_a${_}]`,A=`b_data[index_b${_}][component_b${_}]`,I=`bool(c_data[index_c${_}] & (0xffu << (component_c${_} * 8)))`;return`\n            let output_indices${_} = ${u.offsetToIndices(`global_idx * 4u + ${_}u`)};\n            let offset_a${_} = ${a.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let offset_b${_} = ${c.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let offset_c${_} = ${p.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let index_a${_} = offset_a${_} / 4u;\n            let index_b${_} = offset_b${_} / 4u;\n            let index_c${_} = offset_c${_} / 4u;\n            let component_a${_} = offset_a${_} % 4u;\n            let component_b${_} = offset_b${_} % 4u;\n            let component_c${_} = offset_c${_} % 4u;\n            ${w}[${_}] = ${v}(${d(S,A,I)});\n          `};i===9?h=`\n            var data = vec4<u32>(0);\n            ${y("data",0,"u32")}\n            ${y("data",1,"u32")}\n            ${y("data",2,"u32")}\n            ${y("data",3,"u32")}\n            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:h=`\n            ${y("output_data[global_idx]",0)}\n            ${y("output_data[global_idx]",1)}\n            ${y("output_data[global_idx]",2)}\n            ${y("output_data[global_idx]",3)}\n          `}return`\n        ${e.registerUniform("vec_size","u32").declareVariables(p,a,c,u)}\n        ${e.mainStart()}\n        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n        ${h}\n      }`},tm=e=>{let t=e[1].dims,r=e[2].dims,o=e[0].dims,i=e[1].dataType,u=!(M.areEqual(t,r)&&M.areEqual(r,o)),a=t,c=M.size(t);if(u){let h=It.calcShape(It.calcShape(t,r,!1),o,!1);if(!h)throw new Error("Can\'t perform where op on the given tensors");a=h,c=M.size(a)}let p=Math.ceil(c/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:h=>em(h,e,a,u,i),getRunData:()=>({outputs:[{dims:a,dataType:i}],dispatchGroup:{x:Math.ceil(c/64/4)},programUniforms:[{type:12,data:p},...Z(o,t,r,a)]})}},Dd=e=>{e.compute(tm(e.inputs))}});var Md,Ud=Y(()=>{"use strict";Ka();Ro();Ja();ts();Vs();Zs();Oo();Uo();lu();mu();gu();$u();xu();Au();Eu();Ou();Du();Mu();Vu();Wo();Gu();qu();Ku();cd();md();In();yd();wd();$d();Cd();Td();kd();Bd();Sr();Rn();zd();Md=new Map([["Abs",[rs]],["Acos",[ns]],["Acosh",[os]],["Add",[Ws]],["ArgMax",[ja,ko]],["ArgMin",[qa,ko]],["Asin",[is]],["Asinh",[as]],["Atan",[ss]],["Atanh",[us]],["Attention",[Xa]],["AveragePool",[rd,td]],["BatchNormalization",[Qa]],["BiasAdd",[es]],["BiasSplitGelu",[Us]],["Cast",[ls,ds]],["Ceil",[ps]],["Clip",[cs]],["Concat",[Ya,Za]],["Conv",[Ho,Go]],["ConvTranspose",[du,uu]],["Cos",[ms]],["Cosh",[fs]],["CumSum",[cu,pu]],["DepthToSpace",[fu,hu]],["Div",[Ns]],["Einsum",[wu,vu]],["Elu",[hs,kn]],["Equal",[Gs]],["Erf",[gs]],["Exp",[ys]],["Expand",[Su]],["FastGelu",[Cu]],["Floor",[bs]],["FusedConv",[Ho,Go]],["Gather",[Tu,Iu]],["GatherElements",[ku,Pu]],["Gelu",[ws]],["Gemm",[Bu,Ru]],["GlobalAveragePool",[id,od]],["GlobalMaxPool",[ld,dd]],["Greater",[qs]],["GreaterOrEqual",[Ks]],["HardSigmoid",[Is,As]],["InstanceNormalization",[zu]],["LayerNormalization",[Uu]],["LeakyRelu",[vs,kn]],["Less",[js]],["LessOrEqual",[Ys]],["Log",[zs]],["MatMul",[ru]],["MatMulNBits",[Wu,Nu]],["MaxPool",[sd,ud]],["Mul",[Hs]],["MultiHeadAttention",[Fu,Lu]],["Neg",[_s]],["Not",[$s]],["Pad",[ju]],["Pow",[Ls]],["Range",[pd]],["Reciprocal",[Ss]],["ReduceMin",[Wa]],["ReduceMean",[Da]],["ReduceMax",[Va]],["ReduceSum",[Ga]],["ReduceProd",[Na]],["ReduceL1",[za]],["ReduceL2",[Ma]],["ReduceLogSum",[La]],["ReduceLogSumExp",[Ua]],["ReduceSumSquare",[Ha]],["Relu",[xs]],["Resize",[hd,gd]],["RotaryEmbedding",[bd]],["Sigmoid",[Cs]],["Sin",[Ts]],["Sinh",[Es]],["Slice",[Sd,xd]],["SkipLayerNormalization",[vd]],["Split",[Ed,Pd]],["Sqrt",[Ps]],["Softmax",[Ad,Id]],["Sub",[Fs]],["Tan",[ks]],["Tanh",[Rs]],["ThresholdedRelu",[Ds,kn]],["Tile",[Rd]],["Transpose",[_a,Sa]],["Where",[Dd]]])});var Hn,Vd=Y(()=>{"use strict";$r();Lt();_e();Hn=class{constructor(t){this.backend=t;this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,r){this.repo.set(t,r)}run(t,r,o,i,u){rr(t.programInfo.name);let a=this.backend.device,c=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let p=[];for(let d of r)p.push({binding:p.length,resource:{buffer:d.buffer}});for(let d of o)p.push({binding:p.length,resource:{buffer:d.buffer}});u&&p.push({binding:p.length,resource:u});let h=a.createBindGroup({layout:t.computePipeline.getBindGroupLayout(0),entries:p,label:t.programInfo.name});if(this.backend.sessionStatus==="capturing"){let d={kernelId:this.backend.currentKernelId,computePipeline:t.computePipeline,bindGroup:h,dispatchGroup:i};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(d)}c.setPipeline(t.computePipeline),c.setBindGroup(0,h),c.dispatchWorkgroups(...i),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),Ht(t.programInfo.name)}dispose(){}build(t,r){rr(t.name);let o=this.backend.device,i=[];o.features.has("shader-f16")&&i.push("enable f16;");let u=va(r,this.backend.device.limits),a=t.getShaderSource(u),c=`${i.join(`\n`)}\n${u.additionalImplementations}\n${a}`,p=o.createShaderModule({code:c,label:t.name});Ve("verbose",()=>`[WebGPU] ${t.name} shader code: ${c}`);let h=o.createComputePipeline({compute:{module:p,entryPoint:"main"},layout:"auto",label:t.name});return Ht(t.name),{programInfo:t,computePipeline:h,uniformVariablesInfo:u.variablesInfo}}normalizeDispatchGroupSize(t){let r=typeof t=="number"?t:t.x,o=typeof t=="number"?1:t.y||1,i=typeof t=="number"?1:t.z||1,u=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(r<=u&&o<=u&&i<=u)return[r,o,i];let a=r*o*i,c=Math.ceil(Math.sqrt(a));if(c>u){if(c=Math.ceil(Math.cbrt(a)),c>u)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[c,c,c]}else return[c,c,1]}}});var rm,nm,Yo,Ln,Wd=Y(()=>{"use strict";$r();ye();Lt();fa();wa();Ud();Vd();rm=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let r=[];for(let o=0;o<e.length;++o){let i=e[o].dataType;switch(t[o]){case"none":{r.push("");break}case"type":{r.push(`${i}`);break}case"rank":{let u=e[o].dims.length;r.push(`${i};${u}`);break}case"dims":{let u=e[o].dims.join(",");r.push(`${i};${u}`);break}default:throw new Error(`unsupported input dependency: ${t[o]}`)}}return r.join("|")},nm=(e,t,r)=>{let o=e.name;return e.shaderCache?.hint&&(o+="["+e.shaderCache.hint+"]"),o+=":"+r+`:${rm(t,e.shaderCache?.inputDependencies??new Array(t.length).fill("dims"))}`,o},Yo=class{constructor(t){t&&(this.architecture=t.architecture,this.vendor=t.vendor)}isArchitecture(t){return this.architecture===t}isVendor(t){return this.vendor===t}},Ln=class{constructor(){this.currentSessionId=null;this.currentKernelId=null;this.commandEncoder=null;this.computePassEncoder=null;this.maxDispatchNumber=16;this.pendingDispatchNumber=0;this.pendingKernels=[];this.pendingQueries=new Map;this.sessionStatus="default";this.capturedCommandList=new Map;this.capturedPendingKernels=new Map;this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let t=this.kernelCustomData.get(this.currentKernelId);return t||(t={},this.kernelCustomData.set(this.currentKernelId,t)),t}async initialize(t,r){this.env=t;let o=[],i={requiredLimits:{maxComputeWorkgroupStorageSize:r.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:r.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:r.limits.maxStorageBufferBindingSize,maxBufferSize:r.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:r.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:r.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:r.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:r.limits.maxComputeWorkgroupSizeZ},requiredFeatures:o};r.features.has("chromium-experimental-timestamp-query-inside-passes")?o.push("chromium-experimental-timestamp-query-inside-passes"):r.features.has("timestamp-query")&&o.push("timestamp-query"),r.features.has("shader-f16")&&o.push("shader-f16"),this.device=await r.requestDevice(i),this.adapterInfo=new Yo(await r.requestAdapterInfo()),this.gpuDataManager=ba(this),this.programManager=new Hn(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,pa(t.logLevel,!!t.debug),this.device.onuncapturederror=u=>{u.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${u.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:r,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let t=this.getCommandEncoder(),r={};this.queryType==="at-passes"&&(r.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=t.beginComputePass(r)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;rr(),this.endComputePass();let t;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),t=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(t,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,t,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&t.mapAsync(GPUMapMode.READ).then(()=>{let r=new BigUint64Array(t.getMappedRange()),o=this.pendingQueries.get(t);for(let i=0;i<r.length/2;i++){let u=o[i],a=u.kernelId,c=this.kernels.get(a),p=c.kernelType,h=c.kernelName,d=u.programName,y=u.inputTensorViews,w=u.outputTensorViews,_=r[i*2],v=r[i*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=_);let S=Number(_-this.queryTimeBase),A=Number(v-this.queryTimeBase);if(!Number.isSafeInteger(S)||!Number.isSafeInteger(A))throw new RangeError("incorrect timestamp range");if(this.env.webgpu.profiling?.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:y.map(I=>({dims:I.dims,dataType:Gt(I.dataType)})),outputsMetadata:w.map(I=>({dims:I.dims,dataType:Gt(I.dataType)})),kernelId:a,kernelType:p,kernelName:h,programName:d,startTime:S,endTime:A});else{let I="";y.forEach((E,P)=>{I+=`input[${P}]: [${E.dims}] | ${Gt(E.dataType)}, `});let x="";w.forEach((E,P)=>{x+=`output[${P}]: [${E.dims}] | ${Gt(E.dataType)}, `}),console.log(`[profiling] kernel "${a}|${p}|${h}|${d}" ${I}${x}execution time: ${A-S} ns`)}wo("GPU",`${d}::${_}::${v}`)}t.unmap(),this.pendingQueries.delete(t)}),Ht()}run(t,r,o,i,u,a){rr(t.name);let c=[];for(let E=0;E<r.length;++E){let P=r[E].data;if(P===0)continue;let O=this.gpuDataManager.get(P);if(!O)throw new Error(`no GPU data for input: ${P}`);c.push(O)}let{outputs:p,dispatchGroup:h,programUniforms:d}=t.getRunData(r),y=o.length===0?p.map((E,P)=>P):o;if(y.length!==p.length)throw new Error(`Output size ${y.length} must be equal to ${p.length}.`);let w=[],_=[];for(let E=0;E<p.length;++E){if(!Number.isInteger(y[E])||y[E]<-3||y[E]>=a)throw new Error(`Invalid output index: ${y[E]}`);if(y[E]===-3)continue;let P=y[E]===-1,O=y[E]===-2,R=P||O?u(p[E].dataType,p[E].dims):i(y[E],p[E].dataType,p[E].dims);if(w.push(R),R.data===0)continue;let L=this.gpuDataManager.get(R.data);if(!L)throw new Error(`no GPU data for output: ${R.data}`);if(P&&this.temporaryData.push(L),O){let N=this.kernelPersistentData.get(this.currentKernelId);N||(N=[],this.kernelPersistentData.set(this.currentKernelId,N)),N.push(L)}_.push(L)}if(c.length!==r.length||_.length!==w.length){if(_.length===0)return Ht(t.name),w;throw new Error(`Program ${t.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let v;if(d){let E=0,P=[];d.forEach(N=>{let K=typeof N.data=="number"?[N.data]:N.data;if(K.length===0)return;let Q=N.type===10?2:4,he,W;N.type===10?(W=K.length>4?16:K.length>2?8:K.length*Q,he=K.length>4?16:Q*K.length):(W=K.length<=2?K.length*Q:16,he=16),E=Math.ceil(E/W)*W,P.push(E);let se=N.type===10?8:4;E+=K.length>4?Math.ceil(K.length/se)*he:K.length*Q});let O=16;E=Math.ceil(E/O)*O;let R=new ArrayBuffer(E);d.forEach((N,K)=>{let Q=P[K],he=typeof N.data=="number"?[N.data]:N.data;if(N.type===6)new Int32Array(R,Q,he.length).set(he);else if(N.type===12)new Uint32Array(R,Q,he.length).set(he);else if(N.type===10)new Uint16Array(R,Q,he.length).set(he);else if(N.type===1)new Float32Array(R,Q,he.length).set(he);else throw new Error(`Unsupported uniform type: ${Gt(N.type)}`)});let L=this.gpuDataManager.create(E,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(L.buffer,0,R,0,E),this.gpuDataManager.release(L.id),v={offset:0,size:E,buffer:L.buffer}}let S=this.programManager.normalizeDispatchGroupSize(h),A=S[1]===1&&S[2]===1,I=nm(t,r,A),x=this.programManager.getArtifact(I);if(x||(x=this.programManager.build(t,S),this.programManager.setArtifact(I,x),Ve("info",()=>`[artifact] key: ${I}, programName: ${t.name}`)),d&&x.uniformVariablesInfo){if(d.length!==x.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${x.uniformVariablesInfo.length}, got ${d.length} in program "${x.programInfo.name}".`);for(let E=0;E<d.length;E++){let P=d[E],O=P.type,R=typeof P.data=="number"?1:P.data.length,[L,N]=x.uniformVariablesInfo[E];if(O!==L||R!==N)throw new Error(`Uniform variable ${E} mismatch: expect type ${L} with size ${N}, got type ${O} with size ${R} in program "${x.programInfo.name}".`)}}if(Ve("info",()=>`[ProgramManager] run "${t.name}" (key=${I}) with ${S[0]}x${S[1]}x${S[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let E={kernelId:this.currentKernelId,programName:x.programInfo.name,inputTensorViews:r,outputTensorViews:w};this.pendingKernels.push(E),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(E)}return this.programManager.run(x,c,_,S,v),Ht(t.name),w}upload(t,r){this.gpuDataManager.upload(t,r)}memcpy(t,r){this.gpuDataManager.memcpy(t,r)}async download(t,r){await this.gpuDataManager.download(t,r)}alloc(t){return this.gpuDataManager.create(t).id}free(t){return this.gpuDataManager.release(t)}createKernel(t,r,o,i){let u=Md.get(t);if(!u)throw new Error(`kernel not implemented: ${t}`);let a={kernelType:t,kernelName:i,kernelEntry:u[0],attributes:[u[1],o]};this.kernels.set(r,a)}releaseKernel(t){let r=this.kernelPersistentData.get(t);if(r){for(let o of r)this.gpuDataManager.release(o.id);this.kernelPersistentData.delete(t)}this.kernelCustomData.delete(t),this.kernels.delete(t)}computeKernel(t,r,o){let i=this.kernels.get(t);if(!i)throw new Error(`kernel not created: ${t}`);let u=i.kernelType,a=i.kernelName,c=i.kernelEntry,p=i.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${u}] ${a}" is not allowed to be called recursively`);this.currentKernelId=t,p[0]&&(p[1]=p[0](p[1]),p[0]=void 0),Ve("info",()=>`[WebGPU] Start to run kernel "[${u}] ${a}"...`);let h=this.env.debug;this.temporaryData=[];try{return h&&this.device.pushErrorScope("validation"),c(r,p[1]),0}catch(d){return o.push(Promise.resolve(`[WebGPU] Kernel "[${u}] ${a}" failed. ${d}`)),1}finally{h&&o.push(this.device.popErrorScope().then(d=>d?`GPU validation error for kernel "[${u}] ${a}": ${d.message}`:null));for(let d of this.temporaryData)this.gpuDataManager.release(d.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(t,r,o,i){let u=this.sessionExternalDataMapping.get(t);u||(u=new Map,this.sessionExternalDataMapping.set(t,u));let a=u.get(r),c=this.gpuDataManager.registerExternalBuffer(o,i,a?.[1]);return u.set(r,[c,o]),c}unregisterBuffers(t){let r=this.sessionExternalDataMapping.get(t);r&&(r.forEach(o=>this.gpuDataManager.unregisterExternalBuffer(o[1])),this.sessionExternalDataMapping.delete(t))}getBuffer(t){let r=this.gpuDataManager.get(t);if(!r)throw new Error(`no GPU data for buffer: ${t}`);return r.buffer}createDownloader(t,r,o){return async()=>{let i=await xo(this,t,r);return ma(i.buffer,o)}}writeTimestamp(t){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,t)}setQueryType(){this.queryType="none",(this.env.webgpu.profiling?.mode==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){Ve("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){Ve("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){Ve("info","replay"),this.sessionStatus="replaying";let t=this.capturedCommandList.get(this.currentSessionId),r=this.capturedPendingKernels.get(this.currentSessionId),o=t.length;this.pendingKernels=[];for(let i=0;i<o;i++){let u=this.getComputePassEncoder(),a=t[i];this.writeTimestamp(this.pendingDispatchNumber*2),u.setPipeline(a.computePipeline),u.setBindGroup(0,a.bindGroup),u.dispatchWorkgroups(...a.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(r[i]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onReleaseSession(t){this.unregisterBuffers(t),this.capturedCommandList.has(t)&&this.capturedCommandList.delete(t),this.capturedPendingKernels.has(t)&&this.capturedPendingKernels.delete(t),this.gpuDataManager.onReleaseSession(t)}onRunStart(t){this.currentSessionId=t,this.setQueryType()}}});var Nd={};gn(Nd,{init:()=>om});var qr,Zo,om,Gd=Y(()=>{"use strict";ye();Wd();Lt();Se();qr=class e{constructor(t,r,o,i){this.module=t;this.dataType=r;this.data=o;this.dims=i}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(M.size(t)!==M.size(this.dims))throw new Error("Invalid new shape");return new e(this.module,this.dataType,this.data,t)}},Zo=class{constructor(t,r,o){this.module=t;this.backend=r;this.customDataOffset=0;this.customDataSize=0;this.adapterInfo=r.adapterInfo;let i=t.HEAPU32,u=o>>>2;this.opKernelContext=i[u++];let a=i[u++];this.outputCount=i[u++],this.customDataOffset=i[u++],this.customDataSize=i[u++];let c=[];for(let p=0;p<a;p++){let h=i[u++],d=i[u++],y=i[u++],w=[];for(let _=0;_<y;_++)w.push(i[u++]);c.push(new qr(t,h,d,w))}this.inputs=c}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}getMaxComputeWorkgroupSizes(){return[this.backend.device.limits.maxComputeWorkgroupSizeX,this.backend.device.limits.maxComputeWorkgroupSizeY,this.backend.device.limits.maxComputeWorkgroupSizeZ]}getMaxComputeWorkgroupStoragesize(){return this.backend.device.limits.maxComputeWorkgroupStorageSize}compute(t,r){let o=r?.inputs?.map(c=>typeof c=="number"?this.inputs[c]:c)??this.inputs,i=r?.outputs??[],u=(c,p,h)=>new qr(this.module,p,this.output(c,h),h),a=(c,p)=>{let h=tr(c);if(!h)throw new Error(`Unsupported data type: ${c}`);let d=h*M.size(p),y=d>0?this.backend.gpuDataManager.create(d).id:0;return new qr(this.module,c,y,p)};return this.backend.run(t,o,i,u,a,this.outputCount)}output(t,r){let o=this.module.stackSave();try{let i=this.module.stackAlloc((1+r.length)*4),u=i>>2;this.module.HEAPU32[u++]=r.length;for(let a=0;a<r.length;a++)this.module.HEAPU32[u++]=r[a];return this.module._JsepOutput(this.opKernelContext,t,i)}catch(i){throw new Error(`Failed to generate kernel\'s output[${t}] with dims [${r}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${i}`)}finally{this.module.stackRestore(o)}}},om=async(e,t,r,o)=>{let i=t.jsepInit;if(!i)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let u=new Ln;await u.initialize(r,o),i("webgpu",[u,a=>u.alloc(a),a=>u.free(a),(a,c,p,h=!1)=>{if(h)Ve("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${a}, dst=${c}, size=${p}`),u.memcpy(a,c);else{Ve("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${a}, gpuDataId=${c}, size=${p}`);let d=t.HEAPU8.subarray(a>>>0,(a>>>0)+p);u.upload(c,d)}},async(a,c,p)=>{Ve("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${a}, dataOffset=${c}, size=${p}`),await u.download(a,()=>t.HEAPU8.subarray(c>>>0,(c>>>0)+p))},(a,c,p)=>u.createKernel(a,c,p,t.UTF8ToString(t._JsepGetNodeName(c))),a=>u.releaseKernel(a),(a,c,p,h)=>{Ve("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${p}, kernel=${a}, contextDataOffset=${c}`);let d=new Zo(t,u,c);return u.computeKernel(a,d,h)},()=>u.captureBegin(),()=>u.captureEnd(),()=>u.replay()])}else i("webnn")}});var Vi;Vi=Ei();var pl=zi(),fo,ho=!1,yn=!1,Ui=!1,ml=e=>{if(e===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},fl=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},hl=(e,t)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Wi=async e=>{if(ho)return Promise.resolve();if(yn)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Ui)throw new Error("previous call to \'initializeWebAssembly()\' failed.");yn=!0;let t=e.initTimeout,r=e.numThreads,o=e.simd,i=ml(r),u=o&&fl(),a=e.wasmPaths,c=typeof a=="string"?a:void 0,p=hl(u,i),h=typeof a=="object"?a[p]:void 0,d=!1,y=[];if(t>0&&y.push(new Promise(w=>{setTimeout(()=>{d=!0,w()},t)})),y.push(new Promise((w,_)=>{let v=i?pl:Vi,S={locateFile:(A,I)=>{if(i&&A.endsWith(".worker.js")&&typeof Blob<"u")return URL.createObjectURL(new Blob([Mi()],{type:"text/javascript"}));if(A.endsWith(".wasm")){if(h)return h;let x=c??I;return p==="ort-wasm-simd.wasm"?x+"ort-wasm-simd.jsep.wasm":p==="ort-wasm-simd-threaded.wasm"?x+"ort-wasm-simd-threaded.jsep.wasm":x+p}return I+A}};if(i)if(S.numThreads=r,typeof Blob>"u")S.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let A=`var ortWasmThreaded=${v.toString()};`;S.mainScriptUrlOrBlob=new Blob([A],{type:"text/javascript"})}v(S).then(A=>{yn=!1,ho=!0,fo=A,w()},A=>{yn=!1,Ui=!0,_(A)})})),await Promise.race(y),d)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},Le=()=>{if(ho&&fo)return fo;throw new Error("WebAssembly is not initialized yet.")};var Fe=(e,t)=>{let r=Le(),o=r.lengthBytesUTF8(e)+1,i=r._malloc(o);return r.stringToUTF8(e,i,o),t.push(i),i},Nr=(e,t,r,o)=>{if(typeof e=="object"&&e!==null){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach(([i,u])=>{let a=t?t+i:i;if(typeof u=="object")Nr(u,a+".",r,o);else if(typeof u=="string"||typeof u=="number")o(a,u.toString());else if(typeof u=="boolean")o(a,u?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof u}`)})},Ue=e=>{let t=Le(),r=t.stackSave();try{let o=t.stackAlloc(8);t._OrtGetLastError(o,o+4);let i=t.HEAP32[o/4],u=t.HEAPU32[o/4+1],a=u?t.UTF8ToString(u):"";throw new Error(`${e} ERROR_CODE: ${i}, ERROR_MESSAGE: ${a}`)}finally{t.stackRestore(r)}};var Ni=e=>{let t=Le(),r=0,o=[],i=e||{};try{if(e?.logSeverityLevel===void 0)i.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(e?.logVerbosityLevel===void 0)i.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);e?.terminate===void 0&&(i.terminate=!1);let u=0;return e?.tag!==void 0&&(u=Fe(e.tag,o)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,u),r===0&&Ue("Can\'t create run options."),e?.extra!==void 0&&Nr(e.extra,"",new WeakSet,(a,c)=>{let p=Fe(a,o),h=Fe(c,o);t._OrtAddRunConfigEntry(r,p,h)!==0&&Ue(`Can\'t set a run config entry: ${a} - ${c}.`)}),[r,o]}catch(u){throw r!==0&&t._OrtReleaseRunOptions(r),o.forEach(a=>t._free(a)),u}};var gl=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},yl=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},bl=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(e.enableMemPattern=!1)},wl=(e,t,r)=>{for(let o of t){let i=typeof o=="string"?o:o.name;switch(i){case"webnn":if(i="WEBNN",typeof o!="string"){let a=o;if(a?.deviceType){let c=Fe("deviceType",r),p=Fe(a.deviceType,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'deviceType\' - ${a.deviceType}.`)}if(a?.numThreads){let c=a.numThreads;(typeof c!="number"||!Number.isInteger(c)||c<0)&&(c=0);let p=Fe("numThreads",r),h=Fe(c.toString(),r);Le()._OrtAddSessionConfigEntry(e,p,h)!==0&&Ue(`Can\'t set a session config entry: \'numThreads\' - ${a.numThreads}.`)}if(a?.powerPreference){let c=Fe("powerPreference",r),p=Fe(a.powerPreference,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'powerPreference\' - ${a.powerPreference}.`)}}break;case"webgpu":if(i="JS",typeof o!="string"){let a=o;if(a?.preferredLayout){if(a.preferredLayout!=="NCHW"&&a.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${a.preferredLayout}`);let c=Fe("preferredLayout",r),p=Fe(a.preferredLayout,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'preferredLayout\' - ${a.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${i}`)}let u=Fe(i,r);Le()._OrtAppendExecutionProvider(e,u)!==0&&Ue(`Can\'t append execution provider: ${i}.`)}},Gi=e=>{let t=Le(),r=0,o=[],i=e||{};bl(i);try{let u=gl(i.graphOptimizationLevel??"all"),a=yl(i.executionMode??"sequential"),c=typeof i.logId=="string"?Fe(i.logId,o):0,p=i.logSeverityLevel??2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);let h=i.logVerbosityLevel??0;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log verbosity level is not valid: ${h}`);let d=typeof i.optimizedModelFilePath=="string"?Fe(i.optimizedModelFilePath,o):0;if(r=t._OrtCreateSessionOptions(u,!!i.enableCpuMemArena,!!i.enableMemPattern,a,!!i.enableProfiling,0,c,p,h,d),r===0&&Ue("Can\'t create session options."),i.executionProviders&&wl(r,i.executionProviders,o),i.enableGraphCapture!==void 0){if(typeof i.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${i.enableGraphCapture}`);let y=Fe("enableGraphCapture",o),w=Fe(i.enableGraphCapture.toString(),o);t._OrtAddSessionConfigEntry(r,y,w)!==0&&Ue(`Can\'t set a session config entry: \'enableGraphCapture\' - ${i.enableGraphCapture}.`)}if(i.freeDimensionOverrides)for(let[y,w]of Object.entries(i.freeDimensionOverrides)){if(typeof y!="string")throw new Error(`free dimension override name must be a string: ${y}`);if(typeof w!="number"||!Number.isInteger(w)||w<0)throw new Error(`free dimension override value must be a non-negative integer: ${w}`);let _=Fe(y,o);t._OrtAddFreeDimensionOverride(r,_,w)!==0&&Ue(`Can\'t set a free dimension override: ${y} - ${w}.`)}return i.extra!==void 0&&Nr(i.extra,"",new WeakSet,(y,w)=>{let _=Fe(y,o),v=Fe(w,o);t._OrtAddSessionConfigEntry(r,_,v)!==0&&Ue(`Can\'t set a session config entry: ${y} - ${w}.`)}),[r,o]}catch(u){throw r!==0&&t._OrtReleaseSessionOptions(r),o.forEach(a=>t._free(a)),u}};ye();var Li=async e=>{if(typeof e=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(e))}catch(t){if(t.code==="ERR_FS_FILE_TOO_LARGE"){let r=(void 0)(e),o=[];for await(let i of r)o.push(i);return new Uint8Array(Buffer.concat(o))}throw t}else{let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let r=t.headers.get("Content-Length"),o=r?parseInt(r,10):0;if(o<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let i=t.body.getReader(),u;try{u=new ArrayBuffer(o)}catch(c){if(c instanceof RangeError){let p=Math.ceil(o/65536);u=new WebAssembly.Memory({initial:p,maximum:p}).buffer}else throw c}let a=0;for(;;){let{done:c,value:p}=await i.read();if(c)break;let h=p.byteLength;new Uint8Array(u,a,h).set(p),a+=h}return new Uint8Array(u,0,o)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)};var im=(e,t)=>{Le()._OrtInit(e,t)!==0&&Ue("Can\'t initialize onnxruntime.")},Ld=async e=>{im(e.wasm.numThreads,Gr(e.logLevel))},Fd=async(e,t)=>{{let r=(Gd(),wr(Nd)).init;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let o=e.webgpu.adapter;if(o){if(typeof o.limits!="object"||typeof o.features!="object"||typeof o.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let i=e.webgpu.powerPreference;if(i!==void 0&&i!=="low-power"&&i!=="high-performance")throw new Error(`Invalid powerPreference setting: "${i}"`);let u=e.webgpu.forceFallbackAdapter;if(u!==void 0&&typeof u!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${u}"`);if(o=await navigator.gpu.requestAdapter({powerPreference:i,forceFallbackAdapter:u}),!o)throw new Error(\'Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.\')}if(!e.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using `webgpu` EP");await r("webgpu",Le(),e,o)}if(t==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await r("webnn",Le(),e)}}},ar=new Map,am=e=>{let t=Le(),r=t.stackSave();try{let o=t.stackAlloc(8);return t._OrtGetInputOutputCount(e,o,o+4)!==0&&Ue("Can\'t get session input/output count."),[t.HEAP32[o/4],t.HEAP32[o/4+1]]}finally{t.stackRestore(r)}},Xo=e=>{let t=Le(),r=t._malloc(e.byteLength);if(r===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},qd=async(e,t)=>{let r,o,i=Le();Array.isArray(e)?[r,o]=e:e.buffer===i.HEAPU8.buffer?[r,o]=[e.byteOffset,e.byteLength]:[r,o]=Xo(e);let u=0,a=0,c=0,p=[],h=[],d=[];try{if([a,p]=Gi(t),t?.externalData&&i.mountExternalData){let x=[];for(let E of t.externalData){let P=typeof E=="string"?E:E.path;x.push(Li(typeof E=="string"?E:E.data).then(O=>{i.mountExternalData(P,O)}))}await Promise.all(x)}u=await i._OrtCreateSession(r,o,a),u===0&&Ue("Can\'t create a session.");let[y,w]=am(u),_=!!t?.enableGraphCapture,v=[],S=[],A=[];for(let x=0;x<y;x++){let E=i._OrtGetInputName(u,x);E===0&&Ue("Can\'t get an input name."),h.push(E),v.push(i.UTF8ToString(E))}for(let x=0;x<w;x++){let E=i._OrtGetOutputName(u,x);E===0&&Ue("Can\'t get an output name."),d.push(E);let P=i.UTF8ToString(E);S.push(P);{if(_&&t?.preferredOutputLocation===void 0){A.push("gpu-buffer");continue}let O=typeof t?.preferredOutputLocation=="string"?t.preferredOutputLocation:t?.preferredOutputLocation?.[P]??"cpu";if(O!=="cpu"&&O!=="cpu-pinned"&&O!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${O}.`);if(_&&O!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${O}. Only \'gpu-buffer\' location is supported when enableGraphCapture is true.`);A.push(O)}}let I=null;return A.some(x=>x==="gpu-buffer")&&(c=i._OrtCreateBinding(u),c===0&&Ue("Can\'t create IO binding."),I={handle:c,outputPreferredLocations:A,outputPreferredLocationsEncoded:A.map(x=>yo(x))}),ar.set(u,[u,h,d,I,_,!1]),[u,v,S]}catch(y){throw h.forEach(w=>i._OrtFree(w)),d.forEach(w=>i._OrtFree(w)),c!==0&&i._OrtReleaseBinding(c),u!==0&&i._OrtReleaseSession(u),y}finally{i._free(r),a!==0&&i._OrtReleaseSessionOptions(a),p.forEach(y=>i._free(y)),i.unmountExternalData?.()}},jd=e=>{let t=Le(),r=ar.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);let[o,i,u,a,c]=r;a&&(c&&t._OrtClearBoundOutputs(a.handle),t._OrtReleaseBinding(a.handle)),t.jsepOnReleaseSession?.(e),i.forEach(p=>t._OrtFree(p)),u.forEach(p=>t._OrtFree(p)),t._OrtReleaseSession(o),ar.delete(e)},Hd=(e,t,r,o,i,u=!1)=>{if(!e){t.push(0);return}let a=Le(),c=e[0],p=e[1],h=e[3],d,y;if(c==="string"&&h==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(u&&h!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${i} when enableGraphCapture is true.`);if(h==="gpu-buffer"){let v=e[2].gpuBuffer,S=tr(go(c));y=p.reduce((I,x)=>I*x,1)*S;let A=a.jsepRegisterBuffer;if(!A)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');d=A(o,i,v,y)}else{let v=e[2];if(Array.isArray(v)){y=4*v.length,d=a._malloc(y),r.push(d);let S=d/4;for(let A=0;A<v.length;A++){if(typeof v[A]!="string")throw new TypeError(`tensor data at index ${A} is not a string`);a.HEAPU32[S++]=Fe(v[A],r)}}else y=v.byteLength,d=a._malloc(y),r.push(d),a.HEAPU8.set(new Uint8Array(v.buffer,v.byteOffset,y),d)}let w=a.stackSave(),_=a.stackAlloc(4*p.length);try{let v=_/4;p.forEach(A=>a.HEAP32[v++]=A);let S=a._OrtCreateTensor(go(c),d,y,_,p.length,yo(h));S===0&&Ue(`Can\'t create tensor for input/output. session=${o}, index=${i}.`),t.push(S)}finally{a.stackRestore(w)}},Kd=async(e,t,r,o,i,u)=>{let a=Le(),c=ar.get(e);if(!c)throw new Error(`cannot run inference. invalid session id: ${e}`);let p=c[0],h=c[1],d=c[2],y=c[3],w=c[4],_=c[5],v=t.length,S=o.length,A=0,I=[],x=[],E=[],P=[],O=a.stackSave(),R=a.stackAlloc(v*4),L=a.stackAlloc(v*4),N=a.stackAlloc(S*4),K=a.stackAlloc(S*4);try{[A,I]=Ni(u);for(let ee=0;ee<v;ee++)Hd(r[ee],x,P,e,t[ee],w);for(let ee=0;ee<S;ee++)Hd(i[ee],E,P,e,v+o[ee],w);let Q=R/4,he=L/4,W=N/4,se=K/4;for(let ee=0;ee<v;ee++)a.HEAPU32[Q++]=x[ee],a.HEAPU32[he++]=h[t[ee]];for(let ee=0;ee<S;ee++)a.HEAPU32[W++]=E[ee],a.HEAPU32[se++]=d[o[ee]];if(y&&!_){let{handle:ee,outputPreferredLocations:ae,outputPreferredLocationsEncoded:Ae}=y;if(h.length!==v)throw new Error(`input count from feeds (${v}) is expected to be always equal to model\'s input count (${h.length}).`);for(let me=0;me<v;me++){let ie=t[me];await a._OrtBindInput(ee,h[ie],x[me])!==0&&Ue(`Can\'t bind input[${me}] for session=${e}.`)}for(let me=0;me<S;me++){let ie=o[me];i[me]?.[3]?a._OrtBindOutput(ee,d[ie],E[me],0)!==0&&Ue(`Can\'t bind pre-allocated output[${me}] for session=${e}.`):a._OrtBindOutput(ee,d[ie],0,Ae[ie])!==0&&Ue(`Can\'t bind output[${me}] to ${ae[me]} for session=${e}.`)}ar.set(e,[p,h,d,y,w,!0])}a.jsepOnRunStart?.(p);let Ce;y?Ce=await a._OrtRunWithBinding(p,y.handle,S,N,A):Ce=await a._OrtRun(p,L,R,v,K,S,N,A),Ce!==0&&Ue("failed to call OrtRun().");let We=[];for(let ee=0;ee<S;ee++){let ae=a.HEAPU32[N/4+ee];if(ae===E[ee]){We.push(i[ee]);continue}let Ae=a.stackSave(),me=a.stackAlloc(4*4),ie=!1,ue,le=0;try{a._OrtGetTensorData(ae,me,me+4,me+8,me+12)!==0&&Ue(`Can\'t access output tensor data on index ${ee}.`);let G=me/4,ne=a.HEAPU32[G++];le=a.HEAPU32[G++];let xe=a.HEAPU32[G++],Ke=a.HEAPU32[G++],Be=[];for(let Ne=0;Ne<Ke;Ne++)Be.push(a.HEAPU32[xe/4+Ne]);a._OrtFree(xe);let Ge=Be.reduce((Ne,Ye)=>Ne*Ye,1);ue=Gt(ne);let Ut=y?.outputPreferredLocations[o[ee]];if(ue==="string"){if(Ut==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Ne=[],Ye=le/4;for(let mt=0;mt<Ge;mt++){let Rt=a.HEAPU32[Ye++],qt=mt===Ge-1?void 0:a.HEAPU32[Ye]-Rt;Ne.push(a.UTF8ToString(Rt,qt))}We.push([ue,Be,Ne,"cpu"])}else if(Ut==="gpu-buffer"&&Ge>0){let Ne=a.jsepGetBuffer;if(!Ne)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let Ye=Ne(le),mt=tr(ne);if(mt===void 0||!Hi(ue))throw new Error(`Unsupported data type: ${ue}`);ie=!0,We.push([ue,Be,{gpuBuffer:Ye,download:a.jsepCreateDownloader(Ye,Ge*mt,ue),dispose:()=>{a._OrtReleaseTensor(ae)}},"gpu-buffer"])}else{let Ne=bn(ue),Ye=new Ne(Ge);new Uint8Array(Ye.buffer,Ye.byteOffset,Ye.byteLength).set(a.HEAPU8.subarray(le,le+Ye.byteLength)),We.push([ue,Be,Ye,"cpu"])}}finally{a.stackRestore(Ae),ue==="string"&&le&&a._free(le),ie||a._OrtReleaseTensor(ae)}}return y&&!w&&(a._OrtClearBoundOutputs(y.handle),ar.set(e,[p,h,d,y,w,!1])),We}finally{a.stackRestore(O),x.forEach(Q=>a._OrtReleaseTensor(Q)),E.forEach(Q=>a._OrtReleaseTensor(Q)),P.forEach(Q=>a._free(Q)),A!==0&&a._OrtReleaseRunOptions(A),I.forEach(Q=>a._free(Q))}},Yd=e=>{let t=Le(),r=ar.get(e);if(!r)throw new Error("invalid session id");let o=r[0],i=t._OrtEndProfiling(o);i===0&&Ue("Can\'t get an profile file name."),t._OrtFree(i)},Zd=e=>{let t=[];for(let r of e){let o=r[2];!Array.isArray(o)&&"buffer"in o&&t.push(o.buffer)}return t};self.onmessage=e=>{let{type:t,in:r}=e.data;try{switch(t){case"init-wasm":Wi(r.wasm).then(()=>{Ld(r).then(()=>{postMessage({type:t})},o=>{postMessage({type:t,err:o})})},o=>{postMessage({type:t,err:o})});break;case"init-ep":{let{epName:o,env:i}=r;Fd(i,o).then(()=>{postMessage({type:t})},u=>{postMessage({type:t,err:u})});break}case"copy-from":{let{buffer:o}=r,i=Xo(o);postMessage({type:t,out:i});break}case"create":{let{model:o,options:i}=r;qd(o,i).then(u=>{postMessage({type:t,out:u})},u=>{postMessage({type:t,err:u})});break}case"release":jd(r),postMessage({type:t});break;case"run":{let{sessionId:o,inputIndices:i,inputs:u,outputIndices:a,options:c}=r;Kd(o,i,u,a,new Array(a.length).fill(null),c).then(p=>{p.some(h=>h[3]!=="cpu")?postMessage({type:t,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:t,out:p},Zd([...u,...p]))},p=>{postMessage({type:t,err:p})});break}case"end-profiling":Yd(r),postMessage({type:t});break;default:}}catch(o){postMessage({type:t,err:o})}};})();\n/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n'}),gr,St,sn,pi,mi,Co,Io,zr,Br,pf,ci,Wd,Nd,Vd,Hd,Gd,Ld,Fd,To=j(()=>{var e;_t(),Md(),Or(),gr=()=>!!ke.wasm.proxy&&typeof document<"u",sn=!1,pi=!1,mi=!1,Io=new Map,zr=(i,a)=>{let o=Io.get(i);o?o.push(a):Io.set(i,[a])},Br=()=>{if(sn||!pi||mi||!St)throw new Error("worker not ready")},pf=i=>{switch(i.data.type){case"init-wasm":sn=!1,i.data.err?(mi=!0,Co[1](i.data.err)):(pi=!0,Co[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let a=Io.get(i.data.type);i.data.err?a.shift()[1](i.data.err):a.shift()[0](i.data.out);break}}},ci=typeof document<"u"?(e=document==null?void 0:document.currentScript)==null?void 0:e.src:void 0,Wd=async()=>{if(!pi){if(sn)throw new Error("multiple calls to 'initWasm()' detected.");if(mi)throw new Error("previous call to 'initWasm()' failed.");if(sn=!0,gr())return ke.wasm.wasmPaths===void 0&&ci&&ci.indexOf("blob:")!==0&&(ke.wasm.wasmPaths=ci.substr(0,+ci.lastIndexOf("/")+1)),new Promise((i,a)=>{St==null||St.terminate();let o=URL.createObjectURL(new Blob([Ud()],{type:"text/javascript"}));St=new Worker(o,{name:"ort-wasm-proxy-worker"}),St.onerror=s=>a(s),St.onmessage=pf,URL.revokeObjectURL(o),Co=[i,a];let c={type:"init-wasm",in:ke};St.postMessage(c)});try{await Fa(ke.wasm),await kd(ke),pi=!0}catch(i){throw mi=!0,i}finally{sn=!1}}},Nd=async i=>{if(gr())return Br(),new Promise((a,o)=>{zr("init-ep",[a,o]);let c={type:"init-ep",in:{epName:i,env:ke}};St.postMessage(c)});await Od(ke,i)},Vd=async i=>gr()?(Br(),new Promise((a,o)=>{zr("copy-from",[a,o]);let c={type:"copy-from",in:{buffer:i}};St.postMessage(c,[i.buffer])})):So(i),Hd=async(i,a)=>{if(gr()){if(a!=null&&a.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Br(),new Promise((o,c)=>{zr("create",[o,c]);let s={type:"create",in:{model:i,options:{...a}}},d=[];i instanceof Uint8Array&&d.push(i.buffer),St.postMessage(s,d)})}else return Pd(i,a)},Gd=async i=>{if(gr())return Br(),new Promise((a,o)=>{zr("release",[a,o]);let c={type:"release",in:i};St.postMessage(c)});Rd(i)},Ld=async(i,a,o,c,s,d)=>{if(gr()){if(o.some(et=>et[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(s.some(et=>et))throw new Error("pre-allocated output tensor is not supported for proxy.");return Br(),new Promise((et,$t)=>{zr("run",[et,$t]);let h=o,b={type:"run",in:{sessionId:i,inputIndices:a,inputs:h,outputIndices:c,options:d}};St.postMessage(b,Dd(h))})}else return zd(i,a,o,c,s,d)},Fd=async i=>{if(gr())return Br(),new Promise((a,o)=>{zr("end-profiling",[a,o]);let c={type:"end-profiling",in:i};St.postMessage(c)});Bd(i)}}),qd,mf,fi,jd=j(()=>{_t(),To(),ye(),qi(),qd=(e,i)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${e.location} for ${i()}`)}},mf=e=>{switch(e[3]){case"cpu":return new tt(e[0],e[2],e[1]);case"gpu-buffer":{let i=e[0];if(!Vn(i))throw new Error(`not supported data type: ${i} for deserializing GPU tensor`);let{gpuBuffer:a,download:o,dispose:c}=e[2];return tt.fromGpuBuffer(a,{dataType:i,dims:e[1],download:o,dispose:c})}default:throw new Error(`invalid data location: ${e[3]}`)}},fi=class{async fetchModelAndCopyToWasmMemory(e){return Vd(await tn(e))}async loadModel(e,i){yt();let a;typeof e=="string"?typeof process<"u"&&process.versions&&process.versions.node?a=await tn(e):a=await this.fetchModelAndCopyToWasmMemory(e):a=e,[this.sessionId,this.inputNames,this.outputNames]=await Hd(a,i),ut()}async dispose(){return Gd(this.sessionId)}async run(e,i,a){yt();let o=[],c=[];Object.entries(e).forEach(g=>{let jt=g[0],Ht=g[1],Kt=this.inputNames.indexOf(jt);if(Kt===-1)throw new Error(`invalid input '${jt}'`);o.push(Ht),c.push(Kt)});let s=[],d=[];Object.entries(i).forEach(g=>{let jt=g[0],Ht=g[1],Kt=this.outputNames.indexOf(jt);if(Kt===-1)throw new Error(`invalid output '${jt}'`);s.push(Ht),d.push(Kt)});let et=o.map((g,jt)=>qd(g,()=>`input "${this.inputNames[c[jt]]}"`)),$t=s.map((g,jt)=>g?qd(g,()=>`output "${this.outputNames[d[jt]]}"`):null),h=await Ld(this.sessionId,c,et,d,$t,a),b={};for(let g=0;g<h.length;g++)b[this.outputNames[d[g]]]=s[g]??mf(h[g]);return ut(),b}startProfiling(){}endProfiling(){Fd(this.sessionId)}}}),ff,hi,Kd=j(()=>{_t(),To(),jd(),ff=()=>{if((typeof ke.wasm.initTimeout!="number"||ke.wasm.initTimeout<0)&&(ke.wasm.initTimeout=0),typeof ke.wasm.simd!="boolean"&&(ke.wasm.simd=!0),typeof ke.wasm.proxy!="boolean"&&(ke.wasm.proxy=!1),typeof ke.wasm.trace!="boolean"&&(ke.wasm.trace=!1),typeof ke.wasm.numThreads!="number"||!Number.isInteger(ke.wasm.numThreads)||ke.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(ke.wasm.numThreads=1);let e=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;ke.wasm.numThreads=Math.min(4,Math.ceil((e||1)/2))}},hi=class{async init(e){ff(),await Wd(),await Nd(e)}async createInferenceSessionHandler(e,i){let a=new fi;return await a.loadModel(e,i),Promise.resolve(a)}}}),Yd={};kr(Yd,{wasmBackend:()=>hf});var hf,Xd=j(()=>{Kd(),hf=new hi});_t();_t();_t();var ka="1.18.0",h$=Bi;{let e=(Xd(),sr(Yd)).wasmBackend;lr("webgpu",e,5),lr("webnn",e,5),lr("cpu",e,10),lr("wasm",e,10)}Object.defineProperty(ke.versions,"web",{value:ka,enumerable:!0});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ort_gpu=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return uc},get TRACE(){return Bn},get TRACE_FUNC_BEGIN(){return yt},get TRACE_FUNC_END(){return ut},get Tensor(){return tt},get TrainingSession(){return dc},default:h$,get env(){return ke},get registerBackend(){return lr}},Symbol.toStringTag,{value:"Module"}));var util;(function(e){e.assertEqual=c=>c;function i(c){}e.assertIs=i;function a(c){throw new Error}e.assertNever=a,e.arrayToEnum=c=>{const s={};for(const d of c)s[d]=d;return s},e.getValidEnumValues=c=>{const s=e.objectKeys(c).filter(et=>typeof c[c[et]]!="number"),d={};for(const et of s)d[et]=c[et];return e.objectValues(d)},e.objectValues=c=>e.objectKeys(c).map(function(s){return c[s]}),e.objectKeys=typeof Object.keys=="function"?c=>Object.keys(c):c=>{const s=[];for(const d in c)Object.prototype.hasOwnProperty.call(c,d)&&s.push(d);return s},e.find=(c,s)=>{for(const d of c)if(s(d))return d},e.isInteger=typeof Number.isInteger=="function"?c=>Number.isInteger(c):c=>typeof c=="number"&&isFinite(c)&&Math.floor(c)===c;function o(c,s=" | "){return c.map(d=>typeof d=="string"?`'${d}'`:d).join(s)}e.joinValues=o,e.jsonStringifyReplacer=(c,s)=>typeof s=="bigint"?s.toString():s})(util||(util={}));var objectUtil;(function(e){e.mergeShapes=(i,a)=>({...i,...a})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=e=>{switch(typeof e){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(e)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(e)?ZodParsedType.array:e===null?ZodParsedType.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&e instanceof Map?ZodParsedType.map:typeof Set<"u"&&e instanceof Set?ZodParsedType.set:typeof Date<"u"&&e instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(i){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=i}get errors(){return this.issues}format(i){const a=i||function(s){return s.message},o={_errors:[]},c=s=>{for(const d of s.issues)if(d.code==="invalid_union")d.unionErrors.map(c);else if(d.code==="invalid_return_type")c(d.returnTypeError);else if(d.code==="invalid_arguments")c(d.argumentsError);else if(d.path.length===0)o._errors.push(a(d));else{let et=o,$t=0;for(;$t<d.path.length;){const h=d.path[$t];$t===d.path.length-1?(et[h]=et[h]||{_errors:[]},et[h]._errors.push(a(d))):et[h]=et[h]||{_errors:[]},et=et[h],$t++}}};return c(this),o}static assert(i){if(!(i instanceof ZodError))throw new Error(`Not a ZodError: ${i}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(i=a=>a.message){const a={},o=[];for(const c of this.issues)c.path.length>0?(a[c.path[0]]=a[c.path[0]]||[],a[c.path[0]].push(i(c))):o.push(i(c));return{formErrors:o,fieldErrors:a}}get formErrors(){return this.flatten()}}ZodError.create=e=>new ZodError(e);const errorMap=(e,i)=>{let a;switch(e.code){case ZodIssueCode.invalid_type:e.received===ZodParsedType.undefined?a="Required":a=`Expected ${e.expected}, received ${e.received}`;break;case ZodIssueCode.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(e.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:a=`Unrecognized key(s) in object: ${util.joinValues(e.keys,", ")}`;break;case ZodIssueCode.invalid_union:a="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${util.joinValues(e.options)}`;break;case ZodIssueCode.invalid_enum_value:a=`Invalid enum value. Expected ${util.joinValues(e.options)}, received '${e.received}'`;break;case ZodIssueCode.invalid_arguments:a="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:a="Invalid function return type";break;case ZodIssueCode.invalid_date:a="Invalid date";break;case ZodIssueCode.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(a=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?a=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?a=`Invalid input: must end with "${e.validation.endsWith}"`:util.assertNever(e.validation):e.validation!=="regex"?a=`Invalid ${e.validation}`:a="Invalid";break;case ZodIssueCode.too_small:e.type==="array"?a=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?a=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?a=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?a=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:a="Invalid input";break;case ZodIssueCode.too_big:e.type==="array"?a=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?a=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?a=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?a=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?a=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:a="Invalid input";break;case ZodIssueCode.custom:a="Invalid input";break;case ZodIssueCode.invalid_intersection_types:a="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:a=`Number must be a multiple of ${e.multipleOf}`;break;case ZodIssueCode.not_finite:a="Number must be finite";break;default:a=i.defaultError,util.assertNever(e)}return{message:a}};let overrideErrorMap=errorMap;function setErrorMap(e){overrideErrorMap=e}function getErrorMap(){return overrideErrorMap}const makeIssue=e=>{const{data:i,path:a,errorMaps:o,issueData:c}=e,s=[...a,...c.path||[]],d={...c,path:s};if(c.message!==void 0)return{...c,path:s,message:c.message};let et="";const $t=o.filter(h=>!!h).slice().reverse();for(const h of $t)et=h(d,{data:i,defaultError:et}).message;return{...c,path:s,message:et}},EMPTY_PATH=[];function addIssueToContext(e,i){const a=getErrorMap(),o=makeIssue({issueData:i,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,a,a===errorMap?void 0:errorMap].filter(c=>!!c)});e.common.issues.push(o)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(i,a){const o=[];for(const c of a){if(c.status==="aborted")return INVALID;c.status==="dirty"&&i.dirty(),o.push(c.value)}return{status:i.value,value:o}}static async mergeObjectAsync(i,a){const o=[];for(const c of a){const s=await c.key,d=await c.value;o.push({key:s,value:d})}return ParseStatus.mergeObjectSync(i,o)}static mergeObjectSync(i,a){const o={};for(const c of a){const{key:s,value:d}=c;if(s.status==="aborted"||d.status==="aborted")return INVALID;s.status==="dirty"&&i.dirty(),d.status==="dirty"&&i.dirty(),s.value!=="__proto__"&&(typeof d.value<"u"||c.alwaysSet)&&(o[s.value]=d.value)}return{status:i.value,value:o}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=e=>({status:"dirty",value:e}),OK=e=>({status:"valid",value:e}),isAborted=e=>e.status==="aborted",isDirty=e=>e.status==="dirty",isValid$2=e=>e.status==="valid",isAsync=e=>typeof Promise<"u"&&e instanceof Promise;function __classPrivateFieldGet(e,i,a,o){if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?e!==i||!o:!i.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?o:a==="a"?o.call(e):o?o.value:i.get(e)}function __classPrivateFieldSet(e,i,a,o,c){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?e!==i||!c:!i.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?c.call(e,a):c?c.value=a:i.set(e,a),a}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(e){e.errToObj=i=>typeof i=="string"?{message:i}:i||{},e.toString=i=>typeof i=="string"?i:i==null?void 0:i.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(i,a,o,c){this._cachedPath=[],this.parent=i,this.data=a,this._path=o,this._key=c}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(e,i)=>{if(isValid$2(i))return{success:!0,data:i.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new ZodError(e.common.issues);return this._error=a,this._error}}};function processCreateParams(e){if(!e)return{};const{errorMap:i,invalid_type_error:a,required_error:o,description:c}=e;if(i&&(a||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return i?{errorMap:i,description:c}:{errorMap:(d,et)=>{var $t,h;const{message:b}=e;return d.code==="invalid_enum_value"?{message:b??et.defaultError}:typeof et.data>"u"?{message:($t=b??o)!==null&&$t!==void 0?$t:et.defaultError}:d.code!=="invalid_type"?{message:et.defaultError}:{message:(h=b??a)!==null&&h!==void 0?h:et.defaultError}},description:c}}class ZodType{constructor(i){this.spa=this.safeParseAsync,this._def=i,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(i){return getParsedType(i.data)}_getOrReturnCtx(i,a){return a||{common:i.parent.common,data:i.data,parsedType:getParsedType(i.data),schemaErrorMap:this._def.errorMap,path:i.path,parent:i.parent}}_processInputParams(i){return{status:new ParseStatus,ctx:{common:i.parent.common,data:i.data,parsedType:getParsedType(i.data),schemaErrorMap:this._def.errorMap,path:i.path,parent:i.parent}}}_parseSync(i){const a=this._parse(i);if(isAsync(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(i){const a=this._parse(i);return Promise.resolve(a)}parse(i,a){const o=this.safeParse(i,a);if(o.success)return o.data;throw o.error}safeParse(i,a){var o;const c={common:{issues:[],async:(o=a==null?void 0:a.async)!==null&&o!==void 0?o:!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:i,parsedType:getParsedType(i)},s=this._parseSync({data:i,path:c.path,parent:c});return handleResult(c,s)}async parseAsync(i,a){const o=await this.safeParseAsync(i,a);if(o.success)return o.data;throw o.error}async safeParseAsync(i,a){const o={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:i,parsedType:getParsedType(i)},c=this._parse({data:i,path:o.path,parent:o}),s=await(isAsync(c)?c:Promise.resolve(c));return handleResult(o,s)}refine(i,a){const o=c=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(c):a;return this._refinement((c,s)=>{const d=i(c),et=()=>s.addIssue({code:ZodIssueCode.custom,...o(c)});return typeof Promise<"u"&&d instanceof Promise?d.then($t=>$t?!0:(et(),!1)):d?!0:(et(),!1)})}refinement(i,a){return this._refinement((o,c)=>i(o)?!0:(c.addIssue(typeof a=="function"?a(o,c):a),!1))}_refinement(i){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:i}})}superRefine(i){return this._refinement(i)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(i){return ZodUnion.create([this,i],this._def)}and(i){return ZodIntersection.create(this,i,this._def)}transform(i){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:i}})}default(i){const a=typeof i=="function"?i:()=>i;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:a,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(i){const a=typeof i=="function"?i:()=>i;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:a,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(i){const a=this.constructor;return new a({...this._def,description:i})}pipe(i){return ZodPipeline.create(this,i)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(e){let i="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?i=`${i}\\.\\d{${e.precision}}`:e.precision==null&&(i=`${i}(\\.\\d+)?`),i}function timeRegex(e){return new RegExp(`^${timeRegexSource(e)}$`)}function datetimeRegex(e){let i=`${dateRegexSource}T${timeRegexSource(e)}`;const a=[];return a.push(e.local?"Z?":"Z"),e.offset&&a.push("([+-]\\d{2}:?\\d{2})"),i=`${i}(${a.join("|")})`,new RegExp(`^${i}$`)}function isValidIP(e,i){return!!((i==="v4"||!i)&&ipv4Regex.test(e)||(i==="v6"||!i)&&ipv6Regex.test(e))}class ZodString extends ZodType{_parse(i){if(this._def.coerce&&(i.data=String(i.data)),this._getType(i)!==ZodParsedType.string){const s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:s.parsedType}),INVALID}const o=new ParseStatus;let c;for(const s of this._def.checks)if(s.kind==="min")i.data.length<s.value&&(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{code:ZodIssueCode.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),o.dirty());else if(s.kind==="max")i.data.length>s.value&&(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{code:ZodIssueCode.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),o.dirty());else if(s.kind==="length"){const d=i.data.length>s.value,et=i.data.length<s.value;(d||et)&&(c=this._getOrReturnCtx(i,c),d?addIssueToContext(c,{code:ZodIssueCode.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):et&&addIssueToContext(c,{code:ZodIssueCode.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),o.dirty())}else if(s.kind==="email")emailRegex.test(i.data)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{validation:"email",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(i.data)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{validation:"emoji",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="uuid")uuidRegex.test(i.data)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{validation:"uuid",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="nanoid")nanoidRegex.test(i.data)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="cuid")cuidRegex.test(i.data)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{validation:"cuid",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="cuid2")cuid2Regex.test(i.data)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="ulid")ulidRegex.test(i.data)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{validation:"ulid",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty());else if(s.kind==="url")try{new URL(i.data)}catch{c=this._getOrReturnCtx(i,c),addIssueToContext(c,{validation:"url",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(i.data)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{validation:"regex",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty())):s.kind==="trim"?i.data=i.data.trim():s.kind==="includes"?i.data.includes(s.value,s.position)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{code:ZodIssueCode.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),o.dirty()):s.kind==="toLowerCase"?i.data=i.data.toLowerCase():s.kind==="toUpperCase"?i.data=i.data.toUpperCase():s.kind==="startsWith"?i.data.startsWith(s.value)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{code:ZodIssueCode.invalid_string,validation:{startsWith:s.value},message:s.message}),o.dirty()):s.kind==="endsWith"?i.data.endsWith(s.value)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{code:ZodIssueCode.invalid_string,validation:{endsWith:s.value},message:s.message}),o.dirty()):s.kind==="datetime"?datetimeRegex(s).test(i.data)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{code:ZodIssueCode.invalid_string,validation:"datetime",message:s.message}),o.dirty()):s.kind==="date"?dateRegex.test(i.data)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{code:ZodIssueCode.invalid_string,validation:"date",message:s.message}),o.dirty()):s.kind==="time"?timeRegex(s).test(i.data)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{code:ZodIssueCode.invalid_string,validation:"time",message:s.message}),o.dirty()):s.kind==="duration"?durationRegex.test(i.data)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{validation:"duration",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty()):s.kind==="ip"?isValidIP(i.data,s.version)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{validation:"ip",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty()):s.kind==="base64"?base64Regex.test(i.data)||(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{validation:"base64",code:ZodIssueCode.invalid_string,message:s.message}),o.dirty()):util.assertNever(s);return{status:o.value,value:i.data}}_regex(i,a,o){return this.refinement(c=>i.test(c),{validation:a,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(o)})}_addCheck(i){return new ZodString({...this._def,checks:[...this._def.checks,i]})}email(i){return this._addCheck({kind:"email",...errorUtil.errToObj(i)})}url(i){return this._addCheck({kind:"url",...errorUtil.errToObj(i)})}emoji(i){return this._addCheck({kind:"emoji",...errorUtil.errToObj(i)})}uuid(i){return this._addCheck({kind:"uuid",...errorUtil.errToObj(i)})}nanoid(i){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(i)})}cuid(i){return this._addCheck({kind:"cuid",...errorUtil.errToObj(i)})}cuid2(i){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(i)})}ulid(i){return this._addCheck({kind:"ulid",...errorUtil.errToObj(i)})}base64(i){return this._addCheck({kind:"base64",...errorUtil.errToObj(i)})}ip(i){return this._addCheck({kind:"ip",...errorUtil.errToObj(i)})}datetime(i){var a,o;return typeof i=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:i}):this._addCheck({kind:"datetime",precision:typeof(i==null?void 0:i.precision)>"u"?null:i==null?void 0:i.precision,offset:(a=i==null?void 0:i.offset)!==null&&a!==void 0?a:!1,local:(o=i==null?void 0:i.local)!==null&&o!==void 0?o:!1,...errorUtil.errToObj(i==null?void 0:i.message)})}date(i){return this._addCheck({kind:"date",message:i})}time(i){return typeof i=="string"?this._addCheck({kind:"time",precision:null,message:i}):this._addCheck({kind:"time",precision:typeof(i==null?void 0:i.precision)>"u"?null:i==null?void 0:i.precision,...errorUtil.errToObj(i==null?void 0:i.message)})}duration(i){return this._addCheck({kind:"duration",...errorUtil.errToObj(i)})}regex(i,a){return this._addCheck({kind:"regex",regex:i,...errorUtil.errToObj(a)})}includes(i,a){return this._addCheck({kind:"includes",value:i,position:a==null?void 0:a.position,...errorUtil.errToObj(a==null?void 0:a.message)})}startsWith(i,a){return this._addCheck({kind:"startsWith",value:i,...errorUtil.errToObj(a)})}endsWith(i,a){return this._addCheck({kind:"endsWith",value:i,...errorUtil.errToObj(a)})}min(i,a){return this._addCheck({kind:"min",value:i,...errorUtil.errToObj(a)})}max(i,a){return this._addCheck({kind:"max",value:i,...errorUtil.errToObj(a)})}length(i,a){return this._addCheck({kind:"length",value:i,...errorUtil.errToObj(a)})}nonempty(i){return this.min(1,errorUtil.errToObj(i))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(i=>i.kind==="datetime")}get isDate(){return!!this._def.checks.find(i=>i.kind==="date")}get isTime(){return!!this._def.checks.find(i=>i.kind==="time")}get isDuration(){return!!this._def.checks.find(i=>i.kind==="duration")}get isEmail(){return!!this._def.checks.find(i=>i.kind==="email")}get isURL(){return!!this._def.checks.find(i=>i.kind==="url")}get isEmoji(){return!!this._def.checks.find(i=>i.kind==="emoji")}get isUUID(){return!!this._def.checks.find(i=>i.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(i=>i.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(i=>i.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(i=>i.kind==="cuid2")}get isULID(){return!!this._def.checks.find(i=>i.kind==="ulid")}get isIP(){return!!this._def.checks.find(i=>i.kind==="ip")}get isBase64(){return!!this._def.checks.find(i=>i.kind==="base64")}get minLength(){let i=null;for(const a of this._def.checks)a.kind==="min"&&(i===null||a.value>i)&&(i=a.value);return i}get maxLength(){let i=null;for(const a of this._def.checks)a.kind==="max"&&(i===null||a.value<i)&&(i=a.value);return i}}ZodString.create=e=>{var i;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(i=e==null?void 0:e.coerce)!==null&&i!==void 0?i:!1,...processCreateParams(e)})};function floatSafeRemainder(e,i){const a=(e.toString().split(".")[1]||"").length,o=(i.toString().split(".")[1]||"").length,c=a>o?a:o,s=parseInt(e.toFixed(c).replace(".","")),d=parseInt(i.toFixed(c).replace(".",""));return s%d/Math.pow(10,c)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(i){if(this._def.coerce&&(i.data=Number(i.data)),this._getType(i)!==ZodParsedType.number){const s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:s.parsedType}),INVALID}let o;const c=new ParseStatus;for(const s of this._def.checks)s.kind==="int"?util.isInteger(i.data)||(o=this._getOrReturnCtx(i,o),addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:s.message}),c.dirty()):s.kind==="min"?(s.inclusive?i.data<s.value:i.data<=s.value)&&(o=this._getOrReturnCtx(i,o),addIssueToContext(o,{code:ZodIssueCode.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),c.dirty()):s.kind==="max"?(s.inclusive?i.data>s.value:i.data>=s.value)&&(o=this._getOrReturnCtx(i,o),addIssueToContext(o,{code:ZodIssueCode.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),c.dirty()):s.kind==="multipleOf"?floatSafeRemainder(i.data,s.value)!==0&&(o=this._getOrReturnCtx(i,o),addIssueToContext(o,{code:ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),c.dirty()):s.kind==="finite"?Number.isFinite(i.data)||(o=this._getOrReturnCtx(i,o),addIssueToContext(o,{code:ZodIssueCode.not_finite,message:s.message}),c.dirty()):util.assertNever(s);return{status:c.value,value:i.data}}gte(i,a){return this.setLimit("min",i,!0,errorUtil.toString(a))}gt(i,a){return this.setLimit("min",i,!1,errorUtil.toString(a))}lte(i,a){return this.setLimit("max",i,!0,errorUtil.toString(a))}lt(i,a){return this.setLimit("max",i,!1,errorUtil.toString(a))}setLimit(i,a,o,c){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:i,value:a,inclusive:o,message:errorUtil.toString(c)}]})}_addCheck(i){return new ZodNumber({...this._def,checks:[...this._def.checks,i]})}int(i){return this._addCheck({kind:"int",message:errorUtil.toString(i)})}positive(i){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(i)})}negative(i){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(i)})}nonpositive(i){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(i)})}nonnegative(i){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(i)})}multipleOf(i,a){return this._addCheck({kind:"multipleOf",value:i,message:errorUtil.toString(a)})}finite(i){return this._addCheck({kind:"finite",message:errorUtil.toString(i)})}safe(i){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(i)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(i)})}get minValue(){let i=null;for(const a of this._def.checks)a.kind==="min"&&(i===null||a.value>i)&&(i=a.value);return i}get maxValue(){let i=null;for(const a of this._def.checks)a.kind==="max"&&(i===null||a.value<i)&&(i=a.value);return i}get isInt(){return!!this._def.checks.find(i=>i.kind==="int"||i.kind==="multipleOf"&&util.isInteger(i.value))}get isFinite(){let i=null,a=null;for(const o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(a===null||o.value>a)&&(a=o.value):o.kind==="max"&&(i===null||o.value<i)&&(i=o.value)}return Number.isFinite(a)&&Number.isFinite(i)}}ZodNumber.create=e=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...processCreateParams(e)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(i){if(this._def.coerce&&(i.data=BigInt(i.data)),this._getType(i)!==ZodParsedType.bigint){const s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:s.parsedType}),INVALID}let o;const c=new ParseStatus;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?i.data<s.value:i.data<=s.value)&&(o=this._getOrReturnCtx(i,o),addIssueToContext(o,{code:ZodIssueCode.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),c.dirty()):s.kind==="max"?(s.inclusive?i.data>s.value:i.data>=s.value)&&(o=this._getOrReturnCtx(i,o),addIssueToContext(o,{code:ZodIssueCode.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),c.dirty()):s.kind==="multipleOf"?i.data%s.value!==BigInt(0)&&(o=this._getOrReturnCtx(i,o),addIssueToContext(o,{code:ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),c.dirty()):util.assertNever(s);return{status:c.value,value:i.data}}gte(i,a){return this.setLimit("min",i,!0,errorUtil.toString(a))}gt(i,a){return this.setLimit("min",i,!1,errorUtil.toString(a))}lte(i,a){return this.setLimit("max",i,!0,errorUtil.toString(a))}lt(i,a){return this.setLimit("max",i,!1,errorUtil.toString(a))}setLimit(i,a,o,c){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:i,value:a,inclusive:o,message:errorUtil.toString(c)}]})}_addCheck(i){return new ZodBigInt({...this._def,checks:[...this._def.checks,i]})}positive(i){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(i)})}negative(i){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(i)})}nonpositive(i){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(i)})}nonnegative(i){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(i)})}multipleOf(i,a){return this._addCheck({kind:"multipleOf",value:i,message:errorUtil.toString(a)})}get minValue(){let i=null;for(const a of this._def.checks)a.kind==="min"&&(i===null||a.value>i)&&(i=a.value);return i}get maxValue(){let i=null;for(const a of this._def.checks)a.kind==="max"&&(i===null||a.value<i)&&(i=a.value);return i}}ZodBigInt.create=e=>{var i;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(i=e==null?void 0:e.coerce)!==null&&i!==void 0?i:!1,...processCreateParams(e)})};class ZodBoolean extends ZodType{_parse(i){if(this._def.coerce&&(i.data=!!i.data),this._getType(i)!==ZodParsedType.boolean){const o=this._getOrReturnCtx(i);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:o.parsedType}),INVALID}return OK(i.data)}}ZodBoolean.create=e=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...processCreateParams(e)});class ZodDate extends ZodType{_parse(i){if(this._def.coerce&&(i.data=new Date(i.data)),this._getType(i)!==ZodParsedType.date){const s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:s.parsedType}),INVALID}if(isNaN(i.data.getTime())){const s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:ZodIssueCode.invalid_date}),INVALID}const o=new ParseStatus;let c;for(const s of this._def.checks)s.kind==="min"?i.data.getTime()<s.value&&(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{code:ZodIssueCode.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),o.dirty()):s.kind==="max"?i.data.getTime()>s.value&&(c=this._getOrReturnCtx(i,c),addIssueToContext(c,{code:ZodIssueCode.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),o.dirty()):util.assertNever(s);return{status:o.value,value:new Date(i.data.getTime())}}_addCheck(i){return new ZodDate({...this._def,checks:[...this._def.checks,i]})}min(i,a){return this._addCheck({kind:"min",value:i.getTime(),message:errorUtil.toString(a)})}max(i,a){return this._addCheck({kind:"max",value:i.getTime(),message:errorUtil.toString(a)})}get minDate(){let i=null;for(const a of this._def.checks)a.kind==="min"&&(i===null||a.value>i)&&(i=a.value);return i!=null?new Date(i):null}get maxDate(){let i=null;for(const a of this._def.checks)a.kind==="max"&&(i===null||a.value<i)&&(i=a.value);return i!=null?new Date(i):null}}ZodDate.create=e=>new ZodDate({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(e)});class ZodSymbol extends ZodType{_parse(i){if(this._getType(i)!==ZodParsedType.symbol){const o=this._getOrReturnCtx(i);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:o.parsedType}),INVALID}return OK(i.data)}}ZodSymbol.create=e=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(e)});class ZodUndefined extends ZodType{_parse(i){if(this._getType(i)!==ZodParsedType.undefined){const o=this._getOrReturnCtx(i);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:o.parsedType}),INVALID}return OK(i.data)}}ZodUndefined.create=e=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(e)});class ZodNull extends ZodType{_parse(i){if(this._getType(i)!==ZodParsedType.null){const o=this._getOrReturnCtx(i);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:o.parsedType}),INVALID}return OK(i.data)}}ZodNull.create=e=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(e)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(i){return OK(i.data)}}ZodAny.create=e=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(e)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(i){return OK(i.data)}}ZodUnknown.create=e=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(e)});class ZodNever extends ZodType{_parse(i){const a=this._getOrReturnCtx(i);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:a.parsedType}),INVALID}}ZodNever.create=e=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(e)});class ZodVoid extends ZodType{_parse(i){if(this._getType(i)!==ZodParsedType.undefined){const o=this._getOrReturnCtx(i);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:o.parsedType}),INVALID}return OK(i.data)}}ZodVoid.create=e=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(e)});class ZodArray extends ZodType{_parse(i){const{ctx:a,status:o}=this._processInputParams(i),c=this._def;if(a.parsedType!==ZodParsedType.array)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:a.parsedType}),INVALID;if(c.exactLength!==null){const d=a.data.length>c.exactLength.value,et=a.data.length<c.exactLength.value;(d||et)&&(addIssueToContext(a,{code:d?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:et?c.exactLength.value:void 0,maximum:d?c.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:c.exactLength.message}),o.dirty())}if(c.minLength!==null&&a.data.length<c.minLength.value&&(addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:c.minLength.value,type:"array",inclusive:!0,exact:!1,message:c.minLength.message}),o.dirty()),c.maxLength!==null&&a.data.length>c.maxLength.value&&(addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:c.maxLength.value,type:"array",inclusive:!0,exact:!1,message:c.maxLength.message}),o.dirty()),a.common.async)return Promise.all([...a.data].map((d,et)=>c.type._parseAsync(new ParseInputLazyPath(a,d,a.path,et)))).then(d=>ParseStatus.mergeArray(o,d));const s=[...a.data].map((d,et)=>c.type._parseSync(new ParseInputLazyPath(a,d,a.path,et)));return ParseStatus.mergeArray(o,s)}get element(){return this._def.type}min(i,a){return new ZodArray({...this._def,minLength:{value:i,message:errorUtil.toString(a)}})}max(i,a){return new ZodArray({...this._def,maxLength:{value:i,message:errorUtil.toString(a)}})}length(i,a){return new ZodArray({...this._def,exactLength:{value:i,message:errorUtil.toString(a)}})}nonempty(i){return this.min(1,i)}}ZodArray.create=(e,i)=>new ZodArray({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(i)});function deepPartialify(e){if(e instanceof ZodObject){const i={};for(const a in e.shape){const o=e.shape[a];i[a]=ZodOptional.create(deepPartialify(o))}return new ZodObject({...e._def,shape:()=>i})}else return e instanceof ZodArray?new ZodArray({...e._def,type:deepPartialify(e.element)}):e instanceof ZodOptional?ZodOptional.create(deepPartialify(e.unwrap())):e instanceof ZodNullable?ZodNullable.create(deepPartialify(e.unwrap())):e instanceof ZodTuple?ZodTuple.create(e.items.map(i=>deepPartialify(i))):e}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const i=this._def.shape(),a=util.objectKeys(i);return this._cached={shape:i,keys:a}}_parse(i){if(this._getType(i)!==ZodParsedType.object){const h=this._getOrReturnCtx(i);return addIssueToContext(h,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:h.parsedType}),INVALID}const{status:o,ctx:c}=this._processInputParams(i),{shape:s,keys:d}=this._getCached(),et=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const h in c.data)d.includes(h)||et.push(h);const $t=[];for(const h of d){const b=s[h],g=c.data[h];$t.push({key:{status:"valid",value:h},value:b._parse(new ParseInputLazyPath(c,g,c.path,h)),alwaysSet:h in c.data})}if(this._def.catchall instanceof ZodNever){const h=this._def.unknownKeys;if(h==="passthrough")for(const b of et)$t.push({key:{status:"valid",value:b},value:{status:"valid",value:c.data[b]}});else if(h==="strict")et.length>0&&(addIssueToContext(c,{code:ZodIssueCode.unrecognized_keys,keys:et}),o.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const b of et){const g=c.data[b];$t.push({key:{status:"valid",value:b},value:h._parse(new ParseInputLazyPath(c,g,c.path,b)),alwaysSet:b in c.data})}}return c.common.async?Promise.resolve().then(async()=>{const h=[];for(const b of $t){const g=await b.key,jt=await b.value;h.push({key:g,value:jt,alwaysSet:b.alwaysSet})}return h}).then(h=>ParseStatus.mergeObjectSync(o,h)):ParseStatus.mergeObjectSync(o,$t)}get shape(){return this._def.shape()}strict(i){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...i!==void 0?{errorMap:(a,o)=>{var c,s,d,et;const $t=(d=(s=(c=this._def).errorMap)===null||s===void 0?void 0:s.call(c,a,o).message)!==null&&d!==void 0?d:o.defaultError;return a.code==="unrecognized_keys"?{message:(et=errorUtil.errToObj(i).message)!==null&&et!==void 0?et:$t}:{message:$t}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(i){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...i})})}merge(i){return new ZodObject({unknownKeys:i._def.unknownKeys,catchall:i._def.catchall,shape:()=>({...this._def.shape(),...i._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(i,a){return this.augment({[i]:a})}catchall(i){return new ZodObject({...this._def,catchall:i})}pick(i){const a={};return util.objectKeys(i).forEach(o=>{i[o]&&this.shape[o]&&(a[o]=this.shape[o])}),new ZodObject({...this._def,shape:()=>a})}omit(i){const a={};return util.objectKeys(this.shape).forEach(o=>{i[o]||(a[o]=this.shape[o])}),new ZodObject({...this._def,shape:()=>a})}deepPartial(){return deepPartialify(this)}partial(i){const a={};return util.objectKeys(this.shape).forEach(o=>{const c=this.shape[o];i&&!i[o]?a[o]=c:a[o]=c.optional()}),new ZodObject({...this._def,shape:()=>a})}required(i){const a={};return util.objectKeys(this.shape).forEach(o=>{if(i&&!i[o])a[o]=this.shape[o];else{let s=this.shape[o];for(;s instanceof ZodOptional;)s=s._def.innerType;a[o]=s}}),new ZodObject({...this._def,shape:()=>a})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(e,i)=>new ZodObject({shape:()=>e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(i)});ZodObject.strictCreate=(e,i)=>new ZodObject({shape:()=>e,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(i)});ZodObject.lazycreate=(e,i)=>new ZodObject({shape:e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(i)});class ZodUnion extends ZodType{_parse(i){const{ctx:a}=this._processInputParams(i),o=this._def.options;function c(s){for(const et of s)if(et.result.status==="valid")return et.result;for(const et of s)if(et.result.status==="dirty")return a.common.issues.push(...et.ctx.common.issues),et.result;const d=s.map(et=>new ZodError(et.ctx.common.issues));return addIssueToContext(a,{code:ZodIssueCode.invalid_union,unionErrors:d}),INVALID}if(a.common.async)return Promise.all(o.map(async s=>{const d={...a,common:{...a.common,issues:[]},parent:null};return{result:await s._parseAsync({data:a.data,path:a.path,parent:d}),ctx:d}})).then(c);{let s;const d=[];for(const $t of o){const h={...a,common:{...a.common,issues:[]},parent:null},b=$t._parseSync({data:a.data,path:a.path,parent:h});if(b.status==="valid")return b;b.status==="dirty"&&!s&&(s={result:b,ctx:h}),h.common.issues.length&&d.push(h.common.issues)}if(s)return a.common.issues.push(...s.ctx.common.issues),s.result;const et=d.map($t=>new ZodError($t));return addIssueToContext(a,{code:ZodIssueCode.invalid_union,unionErrors:et}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(e,i)=>new ZodUnion({options:e,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(i)});const getDiscriminator=e=>e instanceof ZodLazy?getDiscriminator(e.schema):e instanceof ZodEffects?getDiscriminator(e.innerType()):e instanceof ZodLiteral?[e.value]:e instanceof ZodEnum?e.options:e instanceof ZodNativeEnum?util.objectValues(e.enum):e instanceof ZodDefault?getDiscriminator(e._def.innerType):e instanceof ZodUndefined?[void 0]:e instanceof ZodNull?[null]:e instanceof ZodOptional?[void 0,...getDiscriminator(e.unwrap())]:e instanceof ZodNullable?[null,...getDiscriminator(e.unwrap())]:e instanceof ZodBranded||e instanceof ZodReadonly?getDiscriminator(e.unwrap()):e instanceof ZodCatch?getDiscriminator(e._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(i){const{ctx:a}=this._processInputParams(i);if(a.parsedType!==ZodParsedType.object)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:a.parsedType}),INVALID;const o=this.discriminator,c=a.data[o],s=this.optionsMap.get(c);return s?a.common.async?s._parseAsync({data:a.data,path:a.path,parent:a}):s._parseSync({data:a.data,path:a.path,parent:a}):(addIssueToContext(a,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(i,a,o){const c=new Map;for(const s of a){const d=getDiscriminator(s.shape[i]);if(!d.length)throw new Error(`A discriminator value for key \`${i}\` could not be extracted from all schema options`);for(const et of d){if(c.has(et))throw new Error(`Discriminator property ${String(i)} has duplicate value ${String(et)}`);c.set(et,s)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:i,options:a,optionsMap:c,...processCreateParams(o)})}}function mergeValues(e,i){const a=getParsedType(e),o=getParsedType(i);if(e===i)return{valid:!0,data:e};if(a===ZodParsedType.object&&o===ZodParsedType.object){const c=util.objectKeys(i),s=util.objectKeys(e).filter(et=>c.indexOf(et)!==-1),d={...e,...i};for(const et of s){const $t=mergeValues(e[et],i[et]);if(!$t.valid)return{valid:!1};d[et]=$t.data}return{valid:!0,data:d}}else if(a===ZodParsedType.array&&o===ZodParsedType.array){if(e.length!==i.length)return{valid:!1};const c=[];for(let s=0;s<e.length;s++){const d=e[s],et=i[s],$t=mergeValues(d,et);if(!$t.valid)return{valid:!1};c.push($t.data)}return{valid:!0,data:c}}else return a===ZodParsedType.date&&o===ZodParsedType.date&&+e==+i?{valid:!0,data:e}:{valid:!1}}class ZodIntersection extends ZodType{_parse(i){const{status:a,ctx:o}=this._processInputParams(i),c=(s,d)=>{if(isAborted(s)||isAborted(d))return INVALID;const et=mergeValues(s.value,d.value);return et.valid?((isDirty(s)||isDirty(d))&&a.dirty(),{status:a.value,value:et.data}):(addIssueToContext(o,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([s,d])=>c(s,d)):c(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}}ZodIntersection.create=(e,i,a)=>new ZodIntersection({left:e,right:i,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(a)});class ZodTuple extends ZodType{_parse(i){const{status:a,ctx:o}=this._processInputParams(i);if(o.parsedType!==ZodParsedType.array)return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:o.parsedType}),INVALID;if(o.data.length<this._def.items.length)return addIssueToContext(o,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&o.data.length>this._def.items.length&&(addIssueToContext(o,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());const s=[...o.data].map((d,et)=>{const $t=this._def.items[et]||this._def.rest;return $t?$t._parse(new ParseInputLazyPath(o,d,o.path,et)):null}).filter(d=>!!d);return o.common.async?Promise.all(s).then(d=>ParseStatus.mergeArray(a,d)):ParseStatus.mergeArray(a,s)}get items(){return this._def.items}rest(i){return new ZodTuple({...this._def,rest:i})}}ZodTuple.create=(e,i)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:e,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(i)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(i){const{status:a,ctx:o}=this._processInputParams(i);if(o.parsedType!==ZodParsedType.object)return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:o.parsedType}),INVALID;const c=[],s=this._def.keyType,d=this._def.valueType;for(const et in o.data)c.push({key:s._parse(new ParseInputLazyPath(o,et,o.path,et)),value:d._parse(new ParseInputLazyPath(o,o.data[et],o.path,et)),alwaysSet:et in o.data});return o.common.async?ParseStatus.mergeObjectAsync(a,c):ParseStatus.mergeObjectSync(a,c)}get element(){return this._def.valueType}static create(i,a,o){return a instanceof ZodType?new ZodRecord({keyType:i,valueType:a,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(o)}):new ZodRecord({keyType:ZodString.create(),valueType:i,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(a)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(i){const{status:a,ctx:o}=this._processInputParams(i);if(o.parsedType!==ZodParsedType.map)return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:o.parsedType}),INVALID;const c=this._def.keyType,s=this._def.valueType,d=[...o.data.entries()].map(([et,$t],h)=>({key:c._parse(new ParseInputLazyPath(o,et,o.path,[h,"key"])),value:s._parse(new ParseInputLazyPath(o,$t,o.path,[h,"value"]))}));if(o.common.async){const et=new Map;return Promise.resolve().then(async()=>{for(const $t of d){const h=await $t.key,b=await $t.value;if(h.status==="aborted"||b.status==="aborted")return INVALID;(h.status==="dirty"||b.status==="dirty")&&a.dirty(),et.set(h.value,b.value)}return{status:a.value,value:et}})}else{const et=new Map;for(const $t of d){const h=$t.key,b=$t.value;if(h.status==="aborted"||b.status==="aborted")return INVALID;(h.status==="dirty"||b.status==="dirty")&&a.dirty(),et.set(h.value,b.value)}return{status:a.value,value:et}}}}ZodMap.create=(e,i,a)=>new ZodMap({valueType:i,keyType:e,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(a)});class ZodSet extends ZodType{_parse(i){const{status:a,ctx:o}=this._processInputParams(i);if(o.parsedType!==ZodParsedType.set)return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:o.parsedType}),INVALID;const c=this._def;c.minSize!==null&&o.data.size<c.minSize.value&&(addIssueToContext(o,{code:ZodIssueCode.too_small,minimum:c.minSize.value,type:"set",inclusive:!0,exact:!1,message:c.minSize.message}),a.dirty()),c.maxSize!==null&&o.data.size>c.maxSize.value&&(addIssueToContext(o,{code:ZodIssueCode.too_big,maximum:c.maxSize.value,type:"set",inclusive:!0,exact:!1,message:c.maxSize.message}),a.dirty());const s=this._def.valueType;function d($t){const h=new Set;for(const b of $t){if(b.status==="aborted")return INVALID;b.status==="dirty"&&a.dirty(),h.add(b.value)}return{status:a.value,value:h}}const et=[...o.data.values()].map(($t,h)=>s._parse(new ParseInputLazyPath(o,$t,o.path,h)));return o.common.async?Promise.all(et).then($t=>d($t)):d(et)}min(i,a){return new ZodSet({...this._def,minSize:{value:i,message:errorUtil.toString(a)}})}max(i,a){return new ZodSet({...this._def,maxSize:{value:i,message:errorUtil.toString(a)}})}size(i,a){return this.min(i,a).max(i,a)}nonempty(i){return this.min(1,i)}}ZodSet.create=(e,i)=>new ZodSet({valueType:e,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(i)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(i){const{ctx:a}=this._processInputParams(i);if(a.parsedType!==ZodParsedType.function)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:a.parsedType}),INVALID;function o(et,$t){return makeIssue({data:et,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,getErrorMap(),errorMap].filter(h=>!!h),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:$t}})}function c(et,$t){return makeIssue({data:et,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,getErrorMap(),errorMap].filter(h=>!!h),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:$t}})}const s={errorMap:a.common.contextualErrorMap},d=a.data;if(this._def.returns instanceof ZodPromise){const et=this;return OK(async function(...$t){const h=new ZodError([]),b=await et._def.args.parseAsync($t,s).catch(Ht=>{throw h.addIssue(o($t,Ht)),h}),g=await Reflect.apply(d,this,b);return await et._def.returns._def.type.parseAsync(g,s).catch(Ht=>{throw h.addIssue(c(g,Ht)),h})})}else{const et=this;return OK(function(...$t){const h=et._def.args.safeParse($t,s);if(!h.success)throw new ZodError([o($t,h.error)]);const b=Reflect.apply(d,this,h.data),g=et._def.returns.safeParse(b,s);if(!g.success)throw new ZodError([c(b,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...i){return new ZodFunction({...this._def,args:ZodTuple.create(i).rest(ZodUnknown.create())})}returns(i){return new ZodFunction({...this._def,returns:i})}implement(i){return this.parse(i)}strictImplement(i){return this.parse(i)}static create(i,a,o){return new ZodFunction({args:i||ZodTuple.create([]).rest(ZodUnknown.create()),returns:a||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(o)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(i){const{ctx:a}=this._processInputParams(i);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}}ZodLazy.create=(e,i)=>new ZodLazy({getter:e,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(i)});class ZodLiteral extends ZodType{_parse(i){if(i.data!==this._def.value){const a=this._getOrReturnCtx(i);return addIssueToContext(a,{received:a.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:i.data}}get value(){return this._def.value}}ZodLiteral.create=(e,i)=>new ZodLiteral({value:e,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(i)});function createZodEnum(e,i){return new ZodEnum({values:e,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(i)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(i){if(typeof i.data!="string"){const a=this._getOrReturnCtx(i),o=this._def.values;return addIssueToContext(a,{expected:util.joinValues(o),received:a.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache,"f")||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values),"f"),!__classPrivateFieldGet(this,_ZodEnum_cache,"f").has(i.data)){const a=this._getOrReturnCtx(i),o=this._def.values;return addIssueToContext(a,{received:a.data,code:ZodIssueCode.invalid_enum_value,options:o}),INVALID}return OK(i.data)}get options(){return this._def.values}get enum(){const i={};for(const a of this._def.values)i[a]=a;return i}get Values(){const i={};for(const a of this._def.values)i[a]=a;return i}get Enum(){const i={};for(const a of this._def.values)i[a]=a;return i}extract(i,a=this._def){return ZodEnum.create(i,{...this._def,...a})}exclude(i,a=this._def){return ZodEnum.create(this.options.filter(o=>!i.includes(o)),{...this._def,...a})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(i){const a=util.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(i);if(o.parsedType!==ZodParsedType.string&&o.parsedType!==ZodParsedType.number){const c=util.objectValues(a);return addIssueToContext(o,{expected:util.joinValues(c),received:o.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache,"f")||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values)),"f"),!__classPrivateFieldGet(this,_ZodNativeEnum_cache,"f").has(i.data)){const c=util.objectValues(a);return addIssueToContext(o,{received:o.data,code:ZodIssueCode.invalid_enum_value,options:c}),INVALID}return OK(i.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(e,i)=>new ZodNativeEnum({values:e,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(i)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(i){const{ctx:a}=this._processInputParams(i);if(a.parsedType!==ZodParsedType.promise&&a.common.async===!1)return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:a.parsedType}),INVALID;const o=a.parsedType===ZodParsedType.promise?a.data:Promise.resolve(a.data);return OK(o.then(c=>this._def.type.parseAsync(c,{path:a.path,errorMap:a.common.contextualErrorMap})))}}ZodPromise.create=(e,i)=>new ZodPromise({type:e,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(i)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(i){const{status:a,ctx:o}=this._processInputParams(i),c=this._def.effect||null,s={addIssue:d=>{addIssueToContext(o,d),d.fatal?a.abort():a.dirty()},get path(){return o.path}};if(s.addIssue=s.addIssue.bind(s),c.type==="preprocess"){const d=c.transform(o.data,s);if(o.common.async)return Promise.resolve(d).then(async et=>{if(a.value==="aborted")return INVALID;const $t=await this._def.schema._parseAsync({data:et,path:o.path,parent:o});return $t.status==="aborted"?INVALID:$t.status==="dirty"||a.value==="dirty"?DIRTY($t.value):$t});{if(a.value==="aborted")return INVALID;const et=this._def.schema._parseSync({data:d,path:o.path,parent:o});return et.status==="aborted"?INVALID:et.status==="dirty"||a.value==="dirty"?DIRTY(et.value):et}}if(c.type==="refinement"){const d=et=>{const $t=c.refinement(et,s);if(o.common.async)return Promise.resolve($t);if($t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return et};if(o.common.async===!1){const et=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return et.status==="aborted"?INVALID:(et.status==="dirty"&&a.dirty(),d(et.value),{status:a.value,value:et.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(et=>et.status==="aborted"?INVALID:(et.status==="dirty"&&a.dirty(),d(et.value).then(()=>({status:a.value,value:et.value}))))}if(c.type==="transform")if(o.common.async===!1){const d=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!isValid$2(d))return d;const et=c.transform(d.value,s);if(et instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:et}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(d=>isValid$2(d)?Promise.resolve(c.transform(d.value,s)).then(et=>({status:a.value,value:et})):d);util.assertNever(c)}}ZodEffects.create=(e,i,a)=>new ZodEffects({schema:e,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:i,...processCreateParams(a)});ZodEffects.createWithPreprocess=(e,i,a)=>new ZodEffects({schema:i,effect:{type:"preprocess",transform:e},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(a)});class ZodOptional extends ZodType{_parse(i){return this._getType(i)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(i)}unwrap(){return this._def.innerType}}ZodOptional.create=(e,i)=>new ZodOptional({innerType:e,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(i)});class ZodNullable extends ZodType{_parse(i){return this._getType(i)===ZodParsedType.null?OK(null):this._def.innerType._parse(i)}unwrap(){return this._def.innerType}}ZodNullable.create=(e,i)=>new ZodNullable({innerType:e,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(i)});class ZodDefault extends ZodType{_parse(i){const{ctx:a}=this._processInputParams(i);let o=a.data;return a.parsedType===ZodParsedType.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}ZodDefault.create=(e,i)=>new ZodDefault({innerType:e,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof i.default=="function"?i.default:()=>i.default,...processCreateParams(i)});class ZodCatch extends ZodType{_parse(i){const{ctx:a}=this._processInputParams(i),o={...a,common:{...a.common,issues:[]}},c=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return isAsync(c)?c.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ZodError(o.common.issues)},input:o.data})})):{status:"valid",value:c.status==="valid"?c.value:this._def.catchValue({get error(){return new ZodError(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(e,i)=>new ZodCatch({innerType:e,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof i.catch=="function"?i.catch:()=>i.catch,...processCreateParams(i)});class ZodNaN extends ZodType{_parse(i){if(this._getType(i)!==ZodParsedType.nan){const o=this._getOrReturnCtx(i);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:o.parsedType}),INVALID}return{status:"valid",value:i.data}}}ZodNaN.create=e=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(e)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(i){const{ctx:a}=this._processInputParams(i),o=a.data;return this._def.type._parse({data:o,path:a.path,parent:a})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(i){const{status:a,ctx:o}=this._processInputParams(i);if(o.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return s.status==="aborted"?INVALID:s.status==="dirty"?(a.dirty(),DIRTY(s.value)):this._def.out._parseAsync({data:s.value,path:o.path,parent:o})})();{const c=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return c.status==="aborted"?INVALID:c.status==="dirty"?(a.dirty(),{status:"dirty",value:c.value}):this._def.out._parseSync({data:c.value,path:o.path,parent:o})}}static create(i,a){return new ZodPipeline({in:i,out:a,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(i){const a=this._def.innerType._parse(i),o=c=>(isValid$2(c)&&(c.value=Object.freeze(c.value)),c);return isAsync(a)?a.then(c=>o(c)):o(a)}unwrap(){return this._def.innerType}}ZodReadonly.create=(e,i)=>new ZodReadonly({innerType:e,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(i)});function custom(e,i={},a){return e?ZodAny.create().superRefine((o,c)=>{var s,d;if(!e(o)){const et=typeof i=="function"?i(o):typeof i=="string"?{message:i}:i,$t=(d=(s=et.fatal)!==null&&s!==void 0?s:a)!==null&&d!==void 0?d:!0,h=typeof et=="string"?{message:et}:et;c.addIssue({code:"custom",...h,fatal:$t})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(e,i={message:`Input not instance of ${e.name}`})=>custom(a=>a instanceof e,i),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:e=>ZodString.create({...e,coerce:!0}),number:e=>ZodNumber.create({...e,coerce:!0}),boolean:e=>ZodBoolean.create({...e,coerce:!0}),bigint:e=>ZodBigInt.create({...e,coerce:!0}),date:e=>ZodDate.create({...e,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid:isValid$2,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError}),__create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(e,i)=>function(){return i||(0,e[__getOwnPropNames(e)[0]])((i={exports:{}}).exports,i),i.exports},__copyProps=(e,i,a,o)=>{if(i&&typeof i=="object"||typeof i=="function")for(let c of __getOwnPropNames(i))!__hasOwnProp.call(e,c)&&c!==a&&__defProp(e,c,{get:()=>i[c],enumerable:!(o=__getOwnPropDesc(i,c))||o.enumerable});return e},__toESM=(e,i,a)=>(a=e!=null?__create(__getProtoOf(e)):{},__copyProps(i||!e||!e.__esModule?__defProp(a,"default",{value:e,enumerable:!0}):a,e)),require_lodash=__commonJS({"../../node_modules/lodash/lodash.js"(e,i){(function(){var a,o="4.17.21",c=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",et="Invalid `variable` option passed into `_.template`",$t="__lodash_hash_undefined__",h=500,b="__lodash_placeholder__",g=1,jt=2,Ht=4,Kt=1,or=2,jr=1,Lr=2,ir=4,qr=8,vn=16,xn=32,No=64,Ro=128,Xo=256,o0=512,s0=30,h0="...",E0=800,C0=16,D0=1,N0=2,e0=3,l0=1/0,Uo=9007199254740991,c0=17976931348623157e292,$0=0/0,Bo=4294967295,x0=Bo-1,A0=Bo>>>1,G0=[["ary",Ro],["bind",jr],["bindKey",Lr],["curry",qr],["curryRight",vn],["flip",o0],["partial",xn],["partialRight",No],["rearg",Xo]],q0="[object Arguments]",ny="[object Array]",xy="[object AsyncFunction]",gy="[object Boolean]",Ey="[object Date]",Ty="[object DOMException]",ly="[object Error]",ty="[object Function]",ky="[object GeneratorFunction]",Iy="[object Map]",Oy="[object Number]",g1="[object Null]",Py="[object Object]",r1="[object Promise]",xv="[object Proxy]",Yy="[object RegExp]",zy="[object Set]",Gy="[object String]",_y="[object Symbol]",f1="[object Undefined]",Uy="[object WeakMap]",y1="[object WeakSet]",Ry="[object ArrayBuffer]",v1="[object DataView]",my="[object Float32Array]",i1="[object Float64Array]",Y0="[object Int8Array]",Vy="[object Int16Array]",b1="[object Int32Array]",E1="[object Uint8Array]",M0="[object Uint8ClampedArray]",$1="[object Uint16Array]",X0="[object Uint32Array]",Fy=/\b__p \+= '';/g,ko=/\b(__p \+=) '' \+/g,r0=/(__e\(.*?\)|\b__t\)) \+\n'';/g,i0=/&(?:amp|lt|gt|quot|#39);/g,g0=/[&<>"']/g,b0=RegExp(i0.source),F0=RegExp(g0.source),ry=/<%-([\s\S]+?)%>/g,By=/<%([\s\S]+?)%>/g,Xy=/<%=([\s\S]+?)%>/g,Wy=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ly=/^\w*$/,F1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n1=/[\\^$.*+?()[\]{}|]/g,d0=RegExp(n1.source),dy=/^\s+/,cy=/\s/,My=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,W1=/\{\n\/\* \[wrapped with (.+)\] \*/,w1=/,? & /,Tv=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Sv=/[()=,{}\[\]\/\s]/,jv=/\\(\\)?/g,uv=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ev=/\w*$/,kv=/^[-+]0x[0-9a-f]+$/i,lv=/^0b[01]+$/i,Iv=/^\[object .+?Constructor\]$/,D1=/^0o[0-7]+$/i,X1=/^(?:0|[1-9]\d*)$/,zv=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,N1=/($^)/,l1=/['\n\r\u2028\u2029\\]/g,M1="\\ud800-\\udfff",dv="\\u0300-\\u036f",_1="\\ufe20-\\ufe2f",Bv="\\u20d0-\\u20ff",Zy=dv+_1+Bv,cv="\\u2700-\\u27bf",Q1="a-z\\xdf-\\xf6\\xf8-\\xff",d1="\\xac\\xb1\\xd7\\xf7",pv="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",qy="\\u2000-\\u206f",a1=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",V1="A-Z\\xc0-\\xd6\\xd8-\\xde",Lv="\\ufe0e\\ufe0f",Uv=d1+pv+qy+a1,fv="[']",Jv="["+M1+"]",Fv="["+Uv+"]",hv="["+Zy+"]",V0="\\d+",Cv="["+cv+"]",Z0="["+Q1+"]",mv="[^"+M1+Uv+V0+cv+Q1+V1+"]",x1="\\ud83c[\\udffb-\\udfff]",Qy="(?:"+hv+"|"+x1+")",J1="[^"+M1+"]",H1="(?:\\ud83c[\\udde6-\\uddff]){2}",ev="[\\ud800-\\udbff][\\udc00-\\udfff]",o1="["+V1+"]",gv="\\u200d",c1="(?:"+Z0+"|"+mv+")",h1="(?:"+o1+"|"+mv+")",tv="(?:"+fv+"(?:d|ll|m|re|s|t|ve))?",k1="(?:"+fv+"(?:D|LL|M|RE|S|T|VE))?",Yr=Qy+"?",tr="["+Lv+"]?",Ir="(?:"+gv+"(?:"+[J1,H1,ev].join("|")+")"+tr+Yr+")*",Kr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",In=tr+Yr+Ir,Go="(?:"+[Cv,H1,ev].join("|")+")"+In,y0="(?:"+[J1+hv+"?",hv,H1,ev,Jv].join("|")+")",T0=RegExp(fv,"g"),O0=RegExp(hv,"g"),I0=RegExp(x1+"(?="+x1+")|"+y0+In,"g"),H0=RegExp([o1+"?"+Z0+"+"+tv+"(?="+[Fv,o1,"$"].join("|")+")",h1+"+"+k1+"(?="+[Fv,o1+c1,"$"].join("|")+")",o1+"?"+c1+"+"+tv,o1+"+"+k1,wn,Kr,V0,Go].join("|"),"g"),py=RegExp("["+gv+M1+Zy+Lv+"]"),u0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,a0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],j0=-1,z0={};z0[my]=z0[i1]=z0[Y0]=z0[Vy]=z0[b1]=z0[E1]=z0[M0]=z0[$1]=z0[X0]=!0,z0[q0]=z0[ny]=z0[Ry]=z0[gy]=z0[v1]=z0[Ey]=z0[ly]=z0[ty]=z0[Iy]=z0[Oy]=z0[Py]=z0[Yy]=z0[zy]=z0[Gy]=z0[Uy]=!1;var fy={};fy[q0]=fy[ny]=fy[Ry]=fy[v1]=fy[gy]=fy[Ey]=fy[my]=fy[i1]=fy[Y0]=fy[Vy]=fy[b1]=fy[Iy]=fy[Oy]=fy[Py]=fy[Yy]=fy[zy]=fy[Gy]=fy[_y]=fy[E1]=fy[M0]=fy[$1]=fy[X0]=!0,fy[ly]=fy[ty]=fy[Uy]=!1;var yv={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},gw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yw={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},vw={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bw=parseFloat,M$=parseInt,j$=typeof global=="object"&&global&&global.Object===Object&&global,z$=typeof self=="object"&&self&&self.Object===Object&&self,Jy=j$||z$||Function("return this")(),l$=typeof e=="object"&&e&&!e.nodeType&&e,Ov=l$&&typeof i=="object"&&i&&!i.nodeType&&i,B$=Ov&&Ov.exports===l$,b$=B$&&j$.process,I1=function(){try{var t0=Ov&&Ov.require&&Ov.require("util").types;return t0||b$&&b$.binding&&b$.binding("util")}catch{}}(),L$=I1&&I1.isArrayBuffer,$w=I1&&I1.isDate,U$=I1&&I1.isMap,F$=I1&&I1.isRegExp,W$=I1&&I1.isSet,ww=I1&&I1.isTypedArray;function C1(t0,v0,p0){switch(p0.length){case 0:return t0.call(v0);case 1:return t0.call(v0,p0[0]);case 2:return t0.call(v0,p0[0],p0[1]);case 3:return t0.call(v0,p0[0],p0[1],p0[2])}return t0.apply(v0,p0)}function _w(t0,v0,p0,L0){for(var ay=-1,Cy=t0==null?0:t0.length;++ay<Cy;){var s1=t0[ay];v0(L0,s1,p0(s1),t0)}return L0}function O1(t0,v0){for(var p0=-1,L0=t0==null?0:t0.length;++p0<L0&&v0(t0[p0],p0,t0)!==!1;);return t0}function $$(t0,v0){for(var p0=t0==null?0:t0.length;p0--&&v0(t0[p0],p0,t0)!==!1;);return t0}function xw(t0,v0){for(var p0=-1,L0=t0==null?0:t0.length;++p0<L0;)if(!v0(t0[p0],p0,t0))return!1;return!0}function Av(t0,v0){for(var p0=-1,L0=t0==null?0:t0.length,ay=0,Cy=[];++p0<L0;){var s1=t0[p0];v0(s1,p0,t0)&&(Cy[ay++]=s1)}return Cy}function U0(t0,v0){var p0=t0==null?0:t0.length;return!!p0&&Pv(t0,v0,0)>-1}function w$(t0,v0,p0){for(var L0=-1,ay=t0==null?0:t0.length;++L0<ay;)if(p0(v0,t0[L0]))return!0;return!1}function Dy(t0,v0){for(var p0=-1,L0=t0==null?0:t0.length,ay=Array(L0);++p0<L0;)ay[p0]=v0(t0[p0],p0,t0);return ay}function G1(t0,v0){for(var p0=-1,L0=v0.length,ay=t0.length;++p0<L0;)t0[ay+p0]=v0[p0];return t0}function j1(t0,v0,p0,L0){var ay=-1,Cy=t0==null?0:t0.length;for(L0&&Cy&&(p0=t0[++ay]);++ay<Cy;)p0=v0(p0,t0[ay],ay,t0);return p0}function Tw(t0,v0,p0,L0){var ay=t0==null?0:t0.length;for(L0&&ay&&(p0=t0[--ay]);ay--;)p0=v0(p0,t0[ay],ay,t0);return p0}function _$(t0,v0){for(var p0=-1,L0=t0==null?0:t0.length;++p0<L0;)if(v0(t0[p0],p0,t0))return!0;return!1}var V$=x$("length");function H$(t0){return t0.split("")}function Sw(t0){return t0.match(Tv)||[]}function G$(t0,v0,p0){var L0;return p0(t0,function(ay,Cy,s1){if(v0(ay,Cy,s1))return L0=Cy,!1}),L0}function Wv(t0,v0,p0,L0){for(var ay=t0.length,Cy=p0+(L0?1:-1);L0?Cy--:++Cy<ay;)if(v0(t0[Cy],Cy,t0))return Cy;return-1}function Pv(t0,v0,p0){return v0===v0?oT(t0,v0,p0):Wv(t0,q$,p0)}function Z$(t0,v0,p0,L0){for(var ay=p0-1,Cy=t0.length;++ay<Cy;)if(L0(t0[ay],v0))return ay;return-1}function q$(t0){return t0!==t0}function K$(t0,v0){var p0=t0==null?0:t0.length;return p0?e$(t0,v0)/p0:$0}function x$(t0){return function(v0){return v0==null?a:v0[t0]}}function T$(t0){return function(v0){return t0==null?a:t0[v0]}}function Y$(t0,v0,p0,L0,ay){return ay(t0,function(Cy,s1,jy){p0=L0?(L0=!1,Cy):v0(p0,Cy,s1,jy)}),p0}function c2(t0,v0){var p0=t0.length;for(t0.sort(v0);p0--;)t0[p0]=t0[p0].value;return t0}function e$(t0,v0){for(var p0,L0=-1,ay=t0.length;++L0<ay;){var Cy=v0(t0[L0]);Cy!==a&&(p0=p0===a?Cy:p0+Cy)}return p0}function S$(t0,v0){for(var p0=-1,L0=Array(t0);++p0<t0;)L0[p0]=v0(p0);return L0}function nr(t0,v0){return Dy(v0,function(p0){return[p0,t0[p0]]})}function Hr(t0){return t0&&t0.slice(0,l_(t0)+1).replace(dy,"")}function Xr(t0){return function(v0){return t0(v0)}}function Tn(t0,v0){return Dy(v0,function(p0){return t0[p0]})}function Mo(t0,v0){return t0.has(v0)}function _g(t0,v0){for(var p0=-1,L0=t0.length;++p0<L0&&Pv(v0,t0[p0],0)>-1;);return p0}function m0(t0,v0){for(var p0=t0.length;p0--&&Pv(v0,t0[p0],0)>-1;);return p0}function k0(t0,v0){for(var p0=t0.length,L0=0;p0--;)t0[p0]===v0&&++L0;return L0}var B0=T$(yv),P0=T$(gw);function K0(t0){return"\\"+vw[t0]}function Sy(t0,v0){return t0==null?a:t0[v0]}function $y(t0){return py.test(t0)}function f0(t0){return u0.test(t0)}function iy(t0){for(var v0,p0=[];!(v0=t0.next()).done;)p0.push(v0.value);return p0}function vy(t0){var v0=-1,p0=Array(t0.size);return t0.forEach(function(L0,ay){p0[++v0]=[ay,L0]}),p0}function Rv(t0,v0){return function(p0){return t0(v0(p0))}}function vv(t0,v0){for(var p0=-1,L0=t0.length,ay=0,Cy=[];++p0<L0;){var s1=t0[p0];(s1===v0||s1===b)&&(t0[p0]=b,Cy[ay++]=p0)}return Cy}function Ew(t0){var v0=-1,p0=Array(t0.size);return t0.forEach(function(L0){p0[++v0]=L0}),p0}function aT(t0){var v0=-1,p0=Array(t0.size);return t0.forEach(function(L0){p0[++v0]=[L0,L0]}),p0}function oT(t0,v0,p0){for(var L0=p0-1,ay=t0.length;++L0<ay;)if(t0[L0]===v0)return L0;return-1}function sT(t0,v0,p0){for(var L0=p0+1;L0--;)if(t0[L0]===v0)return L0;return L0}function E$(t0){return $y(t0)?lT(t0):V$(t0)}function bv(t0){return $y(t0)?dT(t0):H$(t0)}function l_(t0){for(var v0=t0.length;v0--&&cy.test(t0.charAt(v0)););return v0}var uT=T$(yw);function lT(t0){for(var v0=I0.lastIndex=0;I0.test(t0);)++v0;return v0}function dT(t0){return t0.match(I0)||[]}function cT(t0){return t0.match(H0)||[]}var pT=function t0(v0){v0=v0==null?Jy:t$.defaults(Jy.Object(),v0,t$.pick(Jy,a0));var p0=v0.Array,L0=v0.Date,ay=v0.Error,Cy=v0.Function,s1=v0.Math,jy=v0.Object,p2=v0.RegExp,fT=v0.String,rv=v0.TypeError,kw=p0.prototype,hT=Cy.prototype,k$=jy.prototype,Iw=v0["__core-js_shared__"],Cw=hT.toString,Ny=k$.hasOwnProperty,mT=0,d_=function(){var Tt=/[^.]+$/.exec(Iw&&Iw.keys&&Iw.keys.IE_PROTO||"");return Tt?"Symbol(src)_1."+Tt:""}(),Ow=k$.toString,gT=Cw.call(jy),yT=Jy._,vT=p2("^"+Cw.call(Ny).replace(n1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Aw=B$?v0.Buffer:a,r$=v0.Symbol,Pw=v0.Uint8Array,c_=Aw?Aw.allocUnsafe:a,Rw=Rv(jy.getPrototypeOf,jy),p_=jy.create,f_=k$.propertyIsEnumerable,Dw=kw.splice,h_=r$?r$.isConcatSpreadable:a,X$=r$?r$.iterator:a,d$=r$?r$.toStringTag:a,Nw=function(){try{var Tt=g$(jy,"defineProperty");return Tt({},"",{}),Tt}catch{}}(),bT=v0.clearTimeout!==Jy.clearTimeout&&v0.clearTimeout,$T=L0&&L0.now!==Jy.Date.now&&L0.now,wT=v0.setTimeout!==Jy.setTimeout&&v0.setTimeout,Mw=s1.ceil,jw=s1.floor,f2=jy.getOwnPropertySymbols,_T=Aw?Aw.isBuffer:a,m_=v0.isFinite,xT=kw.join,TT=Rv(jy.keys,jy),u1=s1.max,T1=s1.min,ST=L0.now,ET=v0.parseInt,g_=s1.random,kT=kw.reverse,h2=g$(v0,"DataView"),Q$=g$(v0,"Map"),m2=g$(v0,"Promise"),I$=g$(v0,"Set"),J$=g$(v0,"WeakMap"),ew=g$(jy,"create"),zw=J$&&new J$,C$={},IT=y$(h2),CT=y$(Q$),OT=y$(m2),AT=y$(I$),PT=y$(J$),Bw=r$?r$.prototype:a,tw=Bw?Bw.valueOf:a,y_=Bw?Bw.toString:a;function Sn(Tt){if(Ky(Tt)&&!oy(Tt)&&!(Tt instanceof by)){if(Tt instanceof nv)return Tt;if(Ny.call(Tt,"__wrapped__"))return vx(Tt)}return new nv(Tt)}var O$=function(){function Tt(){}return function(Ft){if(!Hy(Ft))return{};if(p_)return p_(Ft);Tt.prototype=Ft;var rr=new Tt;return Tt.prototype=a,rr}}();function Lw(){}function nv(Tt,Ft){this.__wrapped__=Tt,this.__actions__=[],this.__chain__=!!Ft,this.__index__=0,this.__values__=a}Sn.templateSettings={escape:ry,evaluate:By,interpolate:Xy,variable:"",imports:{_:Sn}},Sn.prototype=Lw.prototype,Sn.prototype.constructor=Sn,nv.prototype=O$(Lw.prototype),nv.prototype.constructor=nv;function by(Tt){this.__wrapped__=Tt,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Bo,this.__views__=[]}function RT(){var Tt=new by(this.__wrapped__);return Tt.__actions__=z1(this.__actions__),Tt.__dir__=this.__dir__,Tt.__filtered__=this.__filtered__,Tt.__iteratees__=z1(this.__iteratees__),Tt.__takeCount__=this.__takeCount__,Tt.__views__=z1(this.__views__),Tt}function DT(){if(this.__filtered__){var Tt=new by(this);Tt.__dir__=-1,Tt.__filtered__=!0}else Tt=this.clone(),Tt.__dir__*=-1;return Tt}function NT(){var Tt=this.__wrapped__.value(),Ft=this.__dir__,rr=oy(Tt),Zr=Ft<0,_n=rr?Tt.length:0,An=ZS(0,_n,this.__views__),zo=An.start,Qo=An.end,n0=Qo-zo,w0=Zr?Qo:zo-1,_0=this.__iteratees__,S0=_0.length,R0=0,W0=T1(n0,this.__takeCount__);if(!rr||!Zr&&_n==n0&&W0==n0)return U_(Tt,this.__actions__);var J0=[];e:for(;n0--&&R0<W0;){w0+=Ft;for(var uy=-1,ey=Tt[w0];++uy<S0;){var yy=_0[uy],wy=yy.iteratee,K1=yy.type,R1=wy(ey);if(K1==N0)ey=R1;else if(!R1){if(K1==D0)continue e;break e}}J0[R0++]=ey}return J0}by.prototype=O$(Lw.prototype),by.prototype.constructor=by;function c$(Tt){var Ft=-1,rr=Tt==null?0:Tt.length;for(this.clear();++Ft<rr;){var Zr=Tt[Ft];this.set(Zr[0],Zr[1])}}function MT(){this.__data__=ew?ew(null):{},this.size=0}function jT(Tt){var Ft=this.has(Tt)&&delete this.__data__[Tt];return this.size-=Ft?1:0,Ft}function zT(Tt){var Ft=this.__data__;if(ew){var rr=Ft[Tt];return rr===$t?a:rr}return Ny.call(Ft,Tt)?Ft[Tt]:a}function BT(Tt){var Ft=this.__data__;return ew?Ft[Tt]!==a:Ny.call(Ft,Tt)}function LT(Tt,Ft){var rr=this.__data__;return this.size+=this.has(Tt)?0:1,rr[Tt]=ew&&Ft===a?$t:Ft,this}c$.prototype.clear=MT,c$.prototype.delete=jT,c$.prototype.get=zT,c$.prototype.has=BT,c$.prototype.set=LT;function Vv(Tt){var Ft=-1,rr=Tt==null?0:Tt.length;for(this.clear();++Ft<rr;){var Zr=Tt[Ft];this.set(Zr[0],Zr[1])}}function UT(){this.__data__=[],this.size=0}function FT(Tt){var Ft=this.__data__,rr=Uw(Ft,Tt);if(rr<0)return!1;var Zr=Ft.length-1;return rr==Zr?Ft.pop():Dw.call(Ft,rr,1),--this.size,!0}function WT(Tt){var Ft=this.__data__,rr=Uw(Ft,Tt);return rr<0?a:Ft[rr][1]}function VT(Tt){return Uw(this.__data__,Tt)>-1}function HT(Tt,Ft){var rr=this.__data__,Zr=Uw(rr,Tt);return Zr<0?(++this.size,rr.push([Tt,Ft])):rr[Zr][1]=Ft,this}Vv.prototype.clear=UT,Vv.prototype.delete=FT,Vv.prototype.get=WT,Vv.prototype.has=VT,Vv.prototype.set=HT;function Hv(Tt){var Ft=-1,rr=Tt==null?0:Tt.length;for(this.clear();++Ft<rr;){var Zr=Tt[Ft];this.set(Zr[0],Zr[1])}}function GT(){this.size=0,this.__data__={hash:new c$,map:new(Q$||Vv),string:new c$}}function ZT(Tt){var Ft=Jw(this,Tt).delete(Tt);return this.size-=Ft?1:0,Ft}function qT(Tt){return Jw(this,Tt).get(Tt)}function KT(Tt){return Jw(this,Tt).has(Tt)}function YT(Tt,Ft){var rr=Jw(this,Tt),Zr=rr.size;return rr.set(Tt,Ft),this.size+=rr.size==Zr?0:1,this}Hv.prototype.clear=GT,Hv.prototype.delete=ZT,Hv.prototype.get=qT,Hv.prototype.has=KT,Hv.prototype.set=YT;function p$(Tt){var Ft=-1,rr=Tt==null?0:Tt.length;for(this.__data__=new Hv;++Ft<rr;)this.add(Tt[Ft])}function XT(Tt){return this.__data__.set(Tt,$t),this}function QT(Tt){return this.__data__.has(Tt)}p$.prototype.add=p$.prototype.push=XT,p$.prototype.has=QT;function $v(Tt){var Ft=this.__data__=new Vv(Tt);this.size=Ft.size}function JT(){this.__data__=new Vv,this.size=0}function eS(Tt){var Ft=this.__data__,rr=Ft.delete(Tt);return this.size=Ft.size,rr}function tS(Tt){return this.__data__.get(Tt)}function rS(Tt){return this.__data__.has(Tt)}function nS(Tt,Ft){var rr=this.__data__;if(rr instanceof Vv){var Zr=rr.__data__;if(!Q$||Zr.length<c-1)return Zr.push([Tt,Ft]),this.size=++rr.size,this;rr=this.__data__=new Hv(Zr)}return rr.set(Tt,Ft),this.size=rr.size,this}$v.prototype.clear=JT,$v.prototype.delete=eS,$v.prototype.get=tS,$v.prototype.has=rS,$v.prototype.set=nS;function v_(Tt,Ft){var rr=oy(Tt),Zr=!rr&&v$(Tt),_n=!rr&&!Zr&&s$(Tt),An=!rr&&!Zr&&!_n&&D$(Tt),zo=rr||Zr||_n||An,Qo=zo?S$(Tt.length,fT):[],n0=Qo.length;for(var w0 in Tt)(Ft||Ny.call(Tt,w0))&&!(zo&&(w0=="length"||_n&&(w0=="offset"||w0=="parent")||An&&(w0=="buffer"||w0=="byteLength"||w0=="byteOffset")||Kv(w0,n0)))&&Qo.push(w0);return Qo}function b_(Tt){var Ft=Tt.length;return Ft?Tt[E2(0,Ft-1)]:a}function iS(Tt,Ft){return e2(z1(Tt),f$(Ft,0,Tt.length))}function aS(Tt){return e2(z1(Tt))}function g2(Tt,Ft,rr){(rr!==a&&!wv(Tt[Ft],rr)||rr===a&&!(Ft in Tt))&&Gv(Tt,Ft,rr)}function rw(Tt,Ft,rr){var Zr=Tt[Ft];(!(Ny.call(Tt,Ft)&&wv(Zr,rr))||rr===a&&!(Ft in Tt))&&Gv(Tt,Ft,rr)}function Uw(Tt,Ft){for(var rr=Tt.length;rr--;)if(wv(Tt[rr][0],Ft))return rr;return-1}function oS(Tt,Ft,rr,Zr){return n$(Tt,function(_n,An,zo){Ft(Zr,_n,rr(_n),zo)}),Zr}function $_(Tt,Ft){return Tt&&Nv(Ft,p1(Ft),Tt)}function sS(Tt,Ft){return Tt&&Nv(Ft,L1(Ft),Tt)}function Gv(Tt,Ft,rr){Ft=="__proto__"&&Nw?Nw(Tt,Ft,{configurable:!0,enumerable:!0,value:rr,writable:!0}):Tt[Ft]=rr}function y2(Tt,Ft){for(var rr=-1,Zr=Ft.length,_n=p0(Zr),An=Tt==null;++rr<Zr;)_n[rr]=An?a:X2(Tt,Ft[rr]);return _n}function f$(Tt,Ft,rr){return Tt===Tt&&(rr!==a&&(Tt=Tt<=rr?Tt:rr),Ft!==a&&(Tt=Tt>=Ft?Tt:Ft)),Tt}function iv(Tt,Ft,rr,Zr,_n,An){var zo,Qo=Ft&g,n0=Ft&jt,w0=Ft&Ht;if(rr&&(zo=_n?rr(Tt,Zr,_n,An):rr(Tt)),zo!==a)return zo;if(!Hy(Tt))return Tt;var _0=oy(Tt);if(_0){if(zo=KS(Tt),!Qo)return z1(Tt,zo)}else{var S0=S1(Tt),R0=S0==ty||S0==ky;if(s$(Tt))return V_(Tt,Qo);if(S0==Py||S0==q0||R0&&!_n){if(zo=n0||R0?{}:lx(Tt),!Qo)return n0?zS(Tt,sS(zo,Tt)):jS(Tt,$_(zo,Tt))}else{if(!fy[S0])return _n?Tt:{};zo=YS(Tt,S0,Qo)}}An||(An=new $v);var W0=An.get(Tt);if(W0)return W0;An.set(Tt,zo),zx(Tt)?Tt.forEach(function(ey){zo.add(iv(ey,Ft,rr,ey,Tt,An))}):Mx(Tt)&&Tt.forEach(function(ey,yy){zo.set(yy,iv(ey,Ft,rr,yy,Tt,An))});var J0=w0?n0?j2:M2:n0?L1:p1,uy=_0?a:J0(Tt);return O1(uy||Tt,function(ey,yy){uy&&(yy=ey,ey=Tt[yy]),rw(zo,yy,iv(ey,Ft,rr,yy,Tt,An))}),zo}function uS(Tt){var Ft=p1(Tt);return function(rr){return w_(rr,Tt,Ft)}}function w_(Tt,Ft,rr){var Zr=rr.length;if(Tt==null)return!Zr;for(Tt=jy(Tt);Zr--;){var _n=rr[Zr],An=Ft[_n],zo=Tt[_n];if(zo===a&&!(_n in Tt)||!An(zo))return!1}return!0}function __(Tt,Ft,rr){if(typeof Tt!="function")throw new rv(d);return lw(function(){Tt.apply(a,rr)},Ft)}function nw(Tt,Ft,rr,Zr){var _n=-1,An=U0,zo=!0,Qo=Tt.length,n0=[],w0=Ft.length;if(!Qo)return n0;rr&&(Ft=Dy(Ft,Xr(rr))),Zr?(An=w$,zo=!1):Ft.length>=c&&(An=Mo,zo=!1,Ft=new p$(Ft));e:for(;++_n<Qo;){var _0=Tt[_n],S0=rr==null?_0:rr(_0);if(_0=Zr||_0!==0?_0:0,zo&&S0===S0){for(var R0=w0;R0--;)if(Ft[R0]===S0)continue e;n0.push(_0)}else An(Ft,S0,Zr)||n0.push(_0)}return n0}var n$=K_(Dv),x_=K_(b2,!0);function lS(Tt,Ft){var rr=!0;return n$(Tt,function(Zr,_n,An){return rr=!!Ft(Zr,_n,An),rr}),rr}function Fw(Tt,Ft,rr){for(var Zr=-1,_n=Tt.length;++Zr<_n;){var An=Tt[Zr],zo=Ft(An);if(zo!=null&&(Qo===a?zo===zo&&!q1(zo):rr(zo,Qo)))var Qo=zo,n0=An}return n0}function dS(Tt,Ft,rr,Zr){var _n=Tt.length;for(rr=sy(rr),rr<0&&(rr=-rr>_n?0:_n+rr),Zr=Zr===a||Zr>_n?_n:sy(Zr),Zr<0&&(Zr+=_n),Zr=rr>Zr?0:Lx(Zr);rr<Zr;)Tt[rr++]=Ft;return Tt}function T_(Tt,Ft){var rr=[];return n$(Tt,function(Zr,_n,An){Ft(Zr,_n,An)&&rr.push(Zr)}),rr}function m1(Tt,Ft,rr,Zr,_n){var An=-1,zo=Tt.length;for(rr||(rr=QS),_n||(_n=[]);++An<zo;){var Qo=Tt[An];Ft>0&&rr(Qo)?Ft>1?m1(Qo,Ft-1,rr,Zr,_n):G1(_n,Qo):Zr||(_n[_n.length]=Qo)}return _n}var v2=Y_(),S_=Y_(!0);function Dv(Tt,Ft){return Tt&&v2(Tt,Ft,p1)}function b2(Tt,Ft){return Tt&&S_(Tt,Ft,p1)}function Ww(Tt,Ft){return Av(Ft,function(rr){return Yv(Tt[rr])})}function m$(Tt,Ft){Ft=a$(Ft,Tt);for(var rr=0,Zr=Ft.length;Tt!=null&&rr<Zr;)Tt=Tt[Mv(Ft[rr++])];return rr&&rr==Zr?Tt:a}function E_(Tt,Ft,rr){var Zr=Ft(Tt);return oy(Tt)?Zr:G1(Zr,rr(Tt))}function A1(Tt){return Tt==null?Tt===a?f1:g1:d$&&d$ in jy(Tt)?GS(Tt):aE(Tt)}function $2(Tt,Ft){return Tt>Ft}function cS(Tt,Ft){return Tt!=null&&Ny.call(Tt,Ft)}function pS(Tt,Ft){return Tt!=null&&Ft in jy(Tt)}function fS(Tt,Ft,rr){return Tt>=T1(Ft,rr)&&Tt<u1(Ft,rr)}function w2(Tt,Ft,rr){for(var Zr=rr?w$:U0,_n=Tt[0].length,An=Tt.length,zo=An,Qo=p0(An),n0=1/0,w0=[];zo--;){var _0=Tt[zo];zo&&Ft&&(_0=Dy(_0,Xr(Ft))),n0=T1(_0.length,n0),Qo[zo]=!rr&&(Ft||_n>=120&&_0.length>=120)?new p$(zo&&_0):a}_0=Tt[0];var S0=-1,R0=Qo[0];e:for(;++S0<_n&&w0.length<n0;){var W0=_0[S0],J0=Ft?Ft(W0):W0;if(W0=rr||W0!==0?W0:0,!(R0?Mo(R0,J0):Zr(w0,J0,rr))){for(zo=An;--zo;){var uy=Qo[zo];if(!(uy?Mo(uy,J0):Zr(Tt[zo],J0,rr)))continue e}R0&&R0.push(J0),w0.push(W0)}}return w0}function hS(Tt,Ft,rr,Zr){return Dv(Tt,function(_n,An,zo){Ft(Zr,rr(_n),An,zo)}),Zr}function iw(Tt,Ft,rr){Ft=a$(Ft,Tt),Tt=fx(Tt,Ft);var Zr=Tt==null?Tt:Tt[Mv(ov(Ft))];return Zr==null?a:C1(Zr,Tt,rr)}function k_(Tt){return Ky(Tt)&&A1(Tt)==q0}function mS(Tt){return Ky(Tt)&&A1(Tt)==Ry}function gS(Tt){return Ky(Tt)&&A1(Tt)==Ey}function aw(Tt,Ft,rr,Zr,_n){return Tt===Ft?!0:Tt==null||Ft==null||!Ky(Tt)&&!Ky(Ft)?Tt!==Tt&&Ft!==Ft:yS(Tt,Ft,rr,Zr,aw,_n)}function yS(Tt,Ft,rr,Zr,_n,An){var zo=oy(Tt),Qo=oy(Ft),n0=zo?ny:S1(Tt),w0=Qo?ny:S1(Ft);n0=n0==q0?Py:n0,w0=w0==q0?Py:w0;var _0=n0==Py,S0=w0==Py,R0=n0==w0;if(R0&&s$(Tt)){if(!s$(Ft))return!1;zo=!0,_0=!1}if(R0&&!_0)return An||(An=new $v),zo||D$(Tt)?ox(Tt,Ft,rr,Zr,_n,An):VS(Tt,Ft,n0,rr,Zr,_n,An);if(!(rr&Kt)){var W0=_0&&Ny.call(Tt,"__wrapped__"),J0=S0&&Ny.call(Ft,"__wrapped__");if(W0||J0){var uy=W0?Tt.value():Tt,ey=J0?Ft.value():Ft;return An||(An=new $v),_n(uy,ey,rr,Zr,An)}}return R0?(An||(An=new $v),HS(Tt,Ft,rr,Zr,_n,An)):!1}function vS(Tt){return Ky(Tt)&&S1(Tt)==Iy}function _2(Tt,Ft,rr,Zr){var _n=rr.length,An=_n,zo=!Zr;if(Tt==null)return!An;for(Tt=jy(Tt);_n--;){var Qo=rr[_n];if(zo&&Qo[2]?Qo[1]!==Tt[Qo[0]]:!(Qo[0]in Tt))return!1}for(;++_n<An;){Qo=rr[_n];var n0=Qo[0],w0=Tt[n0],_0=Qo[1];if(zo&&Qo[2]){if(w0===a&&!(n0 in Tt))return!1}else{var S0=new $v;if(Zr)var R0=Zr(w0,_0,n0,Tt,Ft,S0);if(!(R0===a?aw(_0,w0,Kt|or,Zr,S0):R0))return!1}}return!0}function I_(Tt){if(!Hy(Tt)||eE(Tt))return!1;var Ft=Yv(Tt)?vT:Iv;return Ft.test(y$(Tt))}function bS(Tt){return Ky(Tt)&&A1(Tt)==Yy}function $S(Tt){return Ky(Tt)&&S1(Tt)==zy}function wS(Tt){return Ky(Tt)&&o2(Tt.length)&&!!z0[A1(Tt)]}function C_(Tt){return typeof Tt=="function"?Tt:Tt==null?U1:typeof Tt=="object"?oy(Tt)?P_(Tt[0],Tt[1]):A_(Tt):Xx(Tt)}function x2(Tt){if(!uw(Tt))return TT(Tt);var Ft=[];for(var rr in jy(Tt))Ny.call(Tt,rr)&&rr!="constructor"&&Ft.push(rr);return Ft}function _S(Tt){if(!Hy(Tt))return iE(Tt);var Ft=uw(Tt),rr=[];for(var Zr in Tt)Zr=="constructor"&&(Ft||!Ny.call(Tt,Zr))||rr.push(Zr);return rr}function T2(Tt,Ft){return Tt<Ft}function O_(Tt,Ft){var rr=-1,Zr=B1(Tt)?p0(Tt.length):[];return n$(Tt,function(_n,An,zo){Zr[++rr]=Ft(_n,An,zo)}),Zr}function A_(Tt){var Ft=B2(Tt);return Ft.length==1&&Ft[0][2]?cx(Ft[0][0],Ft[0][1]):function(rr){return rr===Tt||_2(rr,Tt,Ft)}}function P_(Tt,Ft){return U2(Tt)&&dx(Ft)?cx(Mv(Tt),Ft):function(rr){var Zr=X2(rr,Tt);return Zr===a&&Zr===Ft?Q2(rr,Tt):aw(Ft,Zr,Kt|or)}}function Vw(Tt,Ft,rr,Zr,_n){Tt!==Ft&&v2(Ft,function(An,zo){if(_n||(_n=new $v),Hy(An))xS(Tt,Ft,zo,rr,Vw,Zr,_n);else{var Qo=Zr?Zr(W2(Tt,zo),An,zo+"",Tt,Ft,_n):a;Qo===a&&(Qo=An),g2(Tt,zo,Qo)}},L1)}function xS(Tt,Ft,rr,Zr,_n,An,zo){var Qo=W2(Tt,rr),n0=W2(Ft,rr),w0=zo.get(n0);if(w0){g2(Tt,rr,w0);return}var _0=An?An(Qo,n0,rr+"",Tt,Ft,zo):a,S0=_0===a;if(S0){var R0=oy(n0),W0=!R0&&s$(n0),J0=!R0&&!W0&&D$(n0);_0=n0,R0||W0||J0?oy(Qo)?_0=Qo:e1(Qo)?_0=z1(Qo):W0?(S0=!1,_0=V_(n0,!0)):J0?(S0=!1,_0=H_(n0,!0)):_0=[]:dw(n0)||v$(n0)?(_0=Qo,v$(Qo)?_0=Ux(Qo):(!Hy(Qo)||Yv(Qo))&&(_0=lx(n0))):S0=!1}S0&&(zo.set(n0,_0),_n(_0,n0,Zr,An,zo),zo.delete(n0)),g2(Tt,rr,_0)}function R_(Tt,Ft){var rr=Tt.length;if(rr)return Ft+=Ft<0?rr:0,Kv(Ft,rr)?Tt[Ft]:a}function D_(Tt,Ft,rr){Ft.length?Ft=Dy(Ft,function(An){return oy(An)?function(zo){return m$(zo,An.length===1?An[0]:An)}:An}):Ft=[U1];var Zr=-1;Ft=Dy(Ft,Xr(Q0()));var _n=O_(Tt,function(An,zo,Qo){var n0=Dy(Ft,function(w0){return w0(An)});return{criteria:n0,index:++Zr,value:An}});return c2(_n,function(An,zo){return MS(An,zo,rr)})}function TS(Tt,Ft){return N_(Tt,Ft,function(rr,Zr){return Q2(Tt,Zr)})}function N_(Tt,Ft,rr){for(var Zr=-1,_n=Ft.length,An={};++Zr<_n;){var zo=Ft[Zr],Qo=m$(Tt,zo);rr(Qo,zo)&&ow(An,a$(zo,Tt),Qo)}return An}function SS(Tt){return function(Ft){return m$(Ft,Tt)}}function S2(Tt,Ft,rr,Zr){var _n=Zr?Z$:Pv,An=-1,zo=Ft.length,Qo=Tt;for(Tt===Ft&&(Ft=z1(Ft)),rr&&(Qo=Dy(Tt,Xr(rr)));++An<zo;)for(var n0=0,w0=Ft[An],_0=rr?rr(w0):w0;(n0=_n(Qo,_0,n0,Zr))>-1;)Qo!==Tt&&Dw.call(Qo,n0,1),Dw.call(Tt,n0,1);return Tt}function M_(Tt,Ft){for(var rr=Tt?Ft.length:0,Zr=rr-1;rr--;){var _n=Ft[rr];if(rr==Zr||_n!==An){var An=_n;Kv(_n)?Dw.call(Tt,_n,1):C2(Tt,_n)}}return Tt}function E2(Tt,Ft){return Tt+jw(g_()*(Ft-Tt+1))}function ES(Tt,Ft,rr,Zr){for(var _n=-1,An=u1(Mw((Ft-Tt)/(rr||1)),0),zo=p0(An);An--;)zo[Zr?An:++_n]=Tt,Tt+=rr;return zo}function k2(Tt,Ft){var rr="";if(!Tt||Ft<1||Ft>Uo)return rr;do Ft%2&&(rr+=Tt),Ft=jw(Ft/2),Ft&&(Tt+=Tt);while(Ft);return rr}function hy(Tt,Ft){return V2(px(Tt,Ft,U1),Tt+"")}function kS(Tt){return b_(N$(Tt))}function IS(Tt,Ft){var rr=N$(Tt);return e2(rr,f$(Ft,0,rr.length))}function ow(Tt,Ft,rr,Zr){if(!Hy(Tt))return Tt;Ft=a$(Ft,Tt);for(var _n=-1,An=Ft.length,zo=An-1,Qo=Tt;Qo!=null&&++_n<An;){var n0=Mv(Ft[_n]),w0=rr;if(n0==="__proto__"||n0==="constructor"||n0==="prototype")return Tt;if(_n!=zo){var _0=Qo[n0];w0=Zr?Zr(_0,n0,Qo):a,w0===a&&(w0=Hy(_0)?_0:Kv(Ft[_n+1])?[]:{})}rw(Qo,n0,w0),Qo=Qo[n0]}return Tt}var j_=zw?function(Tt,Ft){return zw.set(Tt,Ft),Tt}:U1,CS=Nw?function(Tt,Ft){return Nw(Tt,"toString",{configurable:!0,enumerable:!1,value:e_(Ft),writable:!0})}:U1;function OS(Tt){return e2(N$(Tt))}function av(Tt,Ft,rr){var Zr=-1,_n=Tt.length;Ft<0&&(Ft=-Ft>_n?0:_n+Ft),rr=rr>_n?_n:rr,rr<0&&(rr+=_n),_n=Ft>rr?0:rr-Ft>>>0,Ft>>>=0;for(var An=p0(_n);++Zr<_n;)An[Zr]=Tt[Zr+Ft];return An}function AS(Tt,Ft){var rr;return n$(Tt,function(Zr,_n,An){return rr=Ft(Zr,_n,An),!rr}),!!rr}function Hw(Tt,Ft,rr){var Zr=0,_n=Tt==null?Zr:Tt.length;if(typeof Ft=="number"&&Ft===Ft&&_n<=A0){for(;Zr<_n;){var An=Zr+_n>>>1,zo=Tt[An];zo!==null&&!q1(zo)&&(rr?zo<=Ft:zo<Ft)?Zr=An+1:_n=An}return _n}return I2(Tt,Ft,U1,rr)}function I2(Tt,Ft,rr,Zr){var _n=0,An=Tt==null?0:Tt.length;if(An===0)return 0;Ft=rr(Ft);for(var zo=Ft!==Ft,Qo=Ft===null,n0=q1(Ft),w0=Ft===a;_n<An;){var _0=jw((_n+An)/2),S0=rr(Tt[_0]),R0=S0!==a,W0=S0===null,J0=S0===S0,uy=q1(S0);if(zo)var ey=Zr||J0;else w0?ey=J0&&(Zr||R0):Qo?ey=J0&&R0&&(Zr||!W0):n0?ey=J0&&R0&&!W0&&(Zr||!uy):W0||uy?ey=!1:ey=Zr?S0<=Ft:S0<Ft;ey?_n=_0+1:An=_0}return T1(An,x0)}function z_(Tt,Ft){for(var rr=-1,Zr=Tt.length,_n=0,An=[];++rr<Zr;){var zo=Tt[rr],Qo=Ft?Ft(zo):zo;if(!rr||!wv(Qo,n0)){var n0=Qo;An[_n++]=zo===0?0:zo}}return An}function B_(Tt){return typeof Tt=="number"?Tt:q1(Tt)?$0:+Tt}function Z1(Tt){if(typeof Tt=="string")return Tt;if(oy(Tt))return Dy(Tt,Z1)+"";if(q1(Tt))return y_?y_.call(Tt):"";var Ft=Tt+"";return Ft=="0"&&1/Tt==-l0?"-0":Ft}function i$(Tt,Ft,rr){var Zr=-1,_n=U0,An=Tt.length,zo=!0,Qo=[],n0=Qo;if(rr)zo=!1,_n=w$;else if(An>=c){var w0=Ft?null:FS(Tt);if(w0)return Ew(w0);zo=!1,_n=Mo,n0=new p$}else n0=Ft?[]:Qo;e:for(;++Zr<An;){var _0=Tt[Zr],S0=Ft?Ft(_0):_0;if(_0=rr||_0!==0?_0:0,zo&&S0===S0){for(var R0=n0.length;R0--;)if(n0[R0]===S0)continue e;Ft&&n0.push(S0),Qo.push(_0)}else _n(n0,S0,rr)||(n0!==Qo&&n0.push(S0),Qo.push(_0))}return Qo}function C2(Tt,Ft){return Ft=a$(Ft,Tt),Tt=fx(Tt,Ft),Tt==null||delete Tt[Mv(ov(Ft))]}function L_(Tt,Ft,rr,Zr){return ow(Tt,Ft,rr(m$(Tt,Ft)),Zr)}function Gw(Tt,Ft,rr,Zr){for(var _n=Tt.length,An=Zr?_n:-1;(Zr?An--:++An<_n)&&Ft(Tt[An],An,Tt););return rr?av(Tt,Zr?0:An,Zr?An+1:_n):av(Tt,Zr?An+1:0,Zr?_n:An)}function U_(Tt,Ft){var rr=Tt;return rr instanceof by&&(rr=rr.value()),j1(Ft,function(Zr,_n){return _n.func.apply(_n.thisArg,G1([Zr],_n.args))},rr)}function O2(Tt,Ft,rr){var Zr=Tt.length;if(Zr<2)return Zr?i$(Tt[0]):[];for(var _n=-1,An=p0(Zr);++_n<Zr;)for(var zo=Tt[_n],Qo=-1;++Qo<Zr;)Qo!=_n&&(An[_n]=nw(An[_n]||zo,Tt[Qo],Ft,rr));return i$(m1(An,1),Ft,rr)}function F_(Tt,Ft,rr){for(var Zr=-1,_n=Tt.length,An=Ft.length,zo={};++Zr<_n;){var Qo=Zr<An?Ft[Zr]:a;rr(zo,Tt[Zr],Qo)}return zo}function A2(Tt){return e1(Tt)?Tt:[]}function P2(Tt){return typeof Tt=="function"?Tt:U1}function a$(Tt,Ft){return oy(Tt)?Tt:U2(Tt,Ft)?[Tt]:yx(Ay(Tt))}var PS=hy;function o$(Tt,Ft,rr){var Zr=Tt.length;return rr=rr===a?Zr:rr,!Ft&&rr>=Zr?Tt:av(Tt,Ft,rr)}var W_=bT||function(Tt){return Jy.clearTimeout(Tt)};function V_(Tt,Ft){if(Ft)return Tt.slice();var rr=Tt.length,Zr=c_?c_(rr):new Tt.constructor(rr);return Tt.copy(Zr),Zr}function R2(Tt){var Ft=new Tt.constructor(Tt.byteLength);return new Pw(Ft).set(new Pw(Tt)),Ft}function RS(Tt,Ft){var rr=Ft?R2(Tt.buffer):Tt.buffer;return new Tt.constructor(rr,Tt.byteOffset,Tt.byteLength)}function DS(Tt){var Ft=new Tt.constructor(Tt.source,Ev.exec(Tt));return Ft.lastIndex=Tt.lastIndex,Ft}function NS(Tt){return tw?jy(tw.call(Tt)):{}}function H_(Tt,Ft){var rr=Ft?R2(Tt.buffer):Tt.buffer;return new Tt.constructor(rr,Tt.byteOffset,Tt.length)}function G_(Tt,Ft){if(Tt!==Ft){var rr=Tt!==a,Zr=Tt===null,_n=Tt===Tt,An=q1(Tt),zo=Ft!==a,Qo=Ft===null,n0=Ft===Ft,w0=q1(Ft);if(!Qo&&!w0&&!An&&Tt>Ft||An&&zo&&n0&&!Qo&&!w0||Zr&&zo&&n0||!rr&&n0||!_n)return 1;if(!Zr&&!An&&!w0&&Tt<Ft||w0&&rr&&_n&&!Zr&&!An||Qo&&rr&&_n||!zo&&_n||!n0)return-1}return 0}function MS(Tt,Ft,rr){for(var Zr=-1,_n=Tt.criteria,An=Ft.criteria,zo=_n.length,Qo=rr.length;++Zr<zo;){var n0=G_(_n[Zr],An[Zr]);if(n0){if(Zr>=Qo)return n0;var w0=rr[Zr];return n0*(w0=="desc"?-1:1)}}return Tt.index-Ft.index}function Z_(Tt,Ft,rr,Zr){for(var _n=-1,An=Tt.length,zo=rr.length,Qo=-1,n0=Ft.length,w0=u1(An-zo,0),_0=p0(n0+w0),S0=!Zr;++Qo<n0;)_0[Qo]=Ft[Qo];for(;++_n<zo;)(S0||_n<An)&&(_0[rr[_n]]=Tt[_n]);for(;w0--;)_0[Qo++]=Tt[_n++];return _0}function q_(Tt,Ft,rr,Zr){for(var _n=-1,An=Tt.length,zo=-1,Qo=rr.length,n0=-1,w0=Ft.length,_0=u1(An-Qo,0),S0=p0(_0+w0),R0=!Zr;++_n<_0;)S0[_n]=Tt[_n];for(var W0=_n;++n0<w0;)S0[W0+n0]=Ft[n0];for(;++zo<Qo;)(R0||_n<An)&&(S0[W0+rr[zo]]=Tt[_n++]);return S0}function z1(Tt,Ft){var rr=-1,Zr=Tt.length;for(Ft||(Ft=p0(Zr));++rr<Zr;)Ft[rr]=Tt[rr];return Ft}function Nv(Tt,Ft,rr,Zr){var _n=!rr;rr||(rr={});for(var An=-1,zo=Ft.length;++An<zo;){var Qo=Ft[An],n0=Zr?Zr(rr[Qo],Tt[Qo],Qo,rr,Tt):a;n0===a&&(n0=Tt[Qo]),_n?Gv(rr,Qo,n0):rw(rr,Qo,n0)}return rr}function jS(Tt,Ft){return Nv(Tt,L2(Tt),Ft)}function zS(Tt,Ft){return Nv(Tt,sx(Tt),Ft)}function Zw(Tt,Ft){return function(rr,Zr){var _n=oy(rr)?_w:oS,An=Ft?Ft():{};return _n(rr,Tt,Q0(Zr,2),An)}}function A$(Tt){return hy(function(Ft,rr){var Zr=-1,_n=rr.length,An=_n>1?rr[_n-1]:a,zo=_n>2?rr[2]:a;for(An=Tt.length>3&&typeof An=="function"?(_n--,An):a,zo&&P1(rr[0],rr[1],zo)&&(An=_n<3?a:An,_n=1),Ft=jy(Ft);++Zr<_n;){var Qo=rr[Zr];Qo&&Tt(Ft,Qo,Zr,An)}return Ft})}function K_(Tt,Ft){return function(rr,Zr){if(rr==null)return rr;if(!B1(rr))return Tt(rr,Zr);for(var _n=rr.length,An=Ft?_n:-1,zo=jy(rr);(Ft?An--:++An<_n)&&Zr(zo[An],An,zo)!==!1;);return rr}}function Y_(Tt){return function(Ft,rr,Zr){for(var _n=-1,An=jy(Ft),zo=Zr(Ft),Qo=zo.length;Qo--;){var n0=zo[Tt?Qo:++_n];if(rr(An[n0],n0,An)===!1)break}return Ft}}function BS(Tt,Ft,rr){var Zr=Ft&jr,_n=sw(Tt);function An(){var zo=this&&this!==Jy&&this instanceof An?_n:Tt;return zo.apply(Zr?rr:this,arguments)}return An}function X_(Tt){return function(Ft){Ft=Ay(Ft);var rr=$y(Ft)?bv(Ft):a,Zr=rr?rr[0]:Ft.charAt(0),_n=rr?o$(rr,1).join(""):Ft.slice(1);return Zr[Tt]()+_n}}function P$(Tt){return function(Ft){return j1(Kx(qx(Ft).replace(T0,"")),Tt,"")}}function sw(Tt){return function(){var Ft=arguments;switch(Ft.length){case 0:return new Tt;case 1:return new Tt(Ft[0]);case 2:return new Tt(Ft[0],Ft[1]);case 3:return new Tt(Ft[0],Ft[1],Ft[2]);case 4:return new Tt(Ft[0],Ft[1],Ft[2],Ft[3]);case 5:return new Tt(Ft[0],Ft[1],Ft[2],Ft[3],Ft[4]);case 6:return new Tt(Ft[0],Ft[1],Ft[2],Ft[3],Ft[4],Ft[5]);case 7:return new Tt(Ft[0],Ft[1],Ft[2],Ft[3],Ft[4],Ft[5],Ft[6])}var rr=O$(Tt.prototype),Zr=Tt.apply(rr,Ft);return Hy(Zr)?Zr:rr}}function LS(Tt,Ft,rr){var Zr=sw(Tt);function _n(){for(var An=arguments.length,zo=p0(An),Qo=An,n0=R$(_n);Qo--;)zo[Qo]=arguments[Qo];var w0=An<3&&zo[0]!==n0&&zo[An-1]!==n0?[]:vv(zo,n0);if(An-=w0.length,An<rr)return rx(Tt,Ft,qw,_n.placeholder,a,zo,w0,a,a,rr-An);var _0=this&&this!==Jy&&this instanceof _n?Zr:Tt;return C1(_0,this,zo)}return _n}function Q_(Tt){return function(Ft,rr,Zr){var _n=jy(Ft);if(!B1(Ft)){var An=Q0(rr,3);Ft=p1(Ft),rr=function(Qo){return An(_n[Qo],Qo,_n)}}var zo=Tt(Ft,rr,Zr);return zo>-1?_n[An?Ft[zo]:zo]:a}}function J_(Tt){return qv(function(Ft){var rr=Ft.length,Zr=rr,_n=nv.prototype.thru;for(Tt&&Ft.reverse();Zr--;){var An=Ft[Zr];if(typeof An!="function")throw new rv(d);if(_n&&!zo&&Qw(An)=="wrapper")var zo=new nv([],!0)}for(Zr=zo?Zr:rr;++Zr<rr;){An=Ft[Zr];var Qo=Qw(An),n0=Qo=="wrapper"?z2(An):a;n0&&F2(n0[0])&&n0[1]==(Ro|qr|xn|Xo)&&!n0[4].length&&n0[9]==1?zo=zo[Qw(n0[0])].apply(zo,n0[3]):zo=An.length==1&&F2(An)?zo[Qo]():zo.thru(An)}return function(){var w0=arguments,_0=w0[0];if(zo&&w0.length==1&&oy(_0))return zo.plant(_0).value();for(var S0=0,R0=rr?Ft[S0].apply(this,w0):_0;++S0<rr;)R0=Ft[S0].call(this,R0);return R0}})}function qw(Tt,Ft,rr,Zr,_n,An,zo,Qo,n0,w0){var _0=Ft&Ro,S0=Ft&jr,R0=Ft&Lr,W0=Ft&(qr|vn),J0=Ft&o0,uy=R0?a:sw(Tt);function ey(){for(var yy=arguments.length,wy=p0(yy),K1=yy;K1--;)wy[K1]=arguments[K1];if(W0)var R1=R$(ey),Y1=k0(wy,R1);if(Zr&&(wy=Z_(wy,Zr,_n,W0)),An&&(wy=q_(wy,An,zo,W0)),yy-=Y1,W0&&yy<w0){var t1=vv(wy,R1);return rx(Tt,Ft,qw,ey.placeholder,rr,wy,t1,Qo,n0,w0-yy)}var _v=S0?rr:this,Qv=R0?_v[Tt]:Tt;return yy=wy.length,Qo?wy=oE(wy,Qo):J0&&yy>1&&wy.reverse(),_0&&n0<yy&&(wy.length=n0),this&&this!==Jy&&this instanceof ey&&(Qv=uy||sw(Qv)),Qv.apply(_v,wy)}return ey}function ex(Tt,Ft){return function(rr,Zr){return hS(rr,Tt,Ft(Zr),{})}}function Kw(Tt,Ft){return function(rr,Zr){var _n;if(rr===a&&Zr===a)return Ft;if(rr!==a&&(_n=rr),Zr!==a){if(_n===a)return Zr;typeof rr=="string"||typeof Zr=="string"?(rr=Z1(rr),Zr=Z1(Zr)):(rr=B_(rr),Zr=B_(Zr)),_n=Tt(rr,Zr)}return _n}}function D2(Tt){return qv(function(Ft){return Ft=Dy(Ft,Xr(Q0())),hy(function(rr){var Zr=this;return Tt(Ft,function(_n){return C1(_n,Zr,rr)})})})}function Yw(Tt,Ft){Ft=Ft===a?" ":Z1(Ft);var rr=Ft.length;if(rr<2)return rr?k2(Ft,Tt):Ft;var Zr=k2(Ft,Mw(Tt/E$(Ft)));return $y(Ft)?o$(bv(Zr),0,Tt).join(""):Zr.slice(0,Tt)}function US(Tt,Ft,rr,Zr){var _n=Ft&jr,An=sw(Tt);function zo(){for(var Qo=-1,n0=arguments.length,w0=-1,_0=Zr.length,S0=p0(_0+n0),R0=this&&this!==Jy&&this instanceof zo?An:Tt;++w0<_0;)S0[w0]=Zr[w0];for(;n0--;)S0[w0++]=arguments[++Qo];return C1(R0,_n?rr:this,S0)}return zo}function tx(Tt){return function(Ft,rr,Zr){return Zr&&typeof Zr!="number"&&P1(Ft,rr,Zr)&&(rr=Zr=a),Ft=Xv(Ft),rr===a?(rr=Ft,Ft=0):rr=Xv(rr),Zr=Zr===a?Ft<rr?1:-1:Xv(Zr),ES(Ft,rr,Zr,Tt)}}function Xw(Tt){return function(Ft,rr){return typeof Ft=="string"&&typeof rr=="string"||(Ft=sv(Ft),rr=sv(rr)),Tt(Ft,rr)}}function rx(Tt,Ft,rr,Zr,_n,An,zo,Qo,n0,w0){var _0=Ft&qr,S0=_0?zo:a,R0=_0?a:zo,W0=_0?An:a,J0=_0?a:An;Ft|=_0?xn:No,Ft&=~(_0?No:xn),Ft&ir||(Ft&=~(jr|Lr));var uy=[Tt,Ft,_n,W0,S0,J0,R0,Qo,n0,w0],ey=rr.apply(a,uy);return F2(Tt)&&hx(ey,uy),ey.placeholder=Zr,mx(ey,Tt,Ft)}function N2(Tt){var Ft=s1[Tt];return function(rr,Zr){if(rr=sv(rr),Zr=Zr==null?0:T1(sy(Zr),292),Zr&&m_(rr)){var _n=(Ay(rr)+"e").split("e"),An=Ft(_n[0]+"e"+(+_n[1]+Zr));return _n=(Ay(An)+"e").split("e"),+(_n[0]+"e"+(+_n[1]-Zr))}return Ft(rr)}}var FS=I$&&1/Ew(new I$([,-0]))[1]==l0?function(Tt){return new I$(Tt)}:n_;function nx(Tt){return function(Ft){var rr=S1(Ft);return rr==Iy?vy(Ft):rr==zy?aT(Ft):nr(Ft,Tt(Ft))}}function Zv(Tt,Ft,rr,Zr,_n,An,zo,Qo){var n0=Ft&Lr;if(!n0&&typeof Tt!="function")throw new rv(d);var w0=Zr?Zr.length:0;if(w0||(Ft&=~(xn|No),Zr=_n=a),zo=zo===a?zo:u1(sy(zo),0),Qo=Qo===a?Qo:sy(Qo),w0-=_n?_n.length:0,Ft&No){var _0=Zr,S0=_n;Zr=_n=a}var R0=n0?a:z2(Tt),W0=[Tt,Ft,rr,Zr,_n,_0,S0,An,zo,Qo];if(R0&&nE(W0,R0),Tt=W0[0],Ft=W0[1],rr=W0[2],Zr=W0[3],_n=W0[4],Qo=W0[9]=W0[9]===a?n0?0:Tt.length:u1(W0[9]-w0,0),!Qo&&Ft&(qr|vn)&&(Ft&=~(qr|vn)),!Ft||Ft==jr)var J0=BS(Tt,Ft,rr);else Ft==qr||Ft==vn?J0=LS(Tt,Ft,Qo):(Ft==xn||Ft==(jr|xn))&&!_n.length?J0=US(Tt,Ft,rr,Zr):J0=qw.apply(a,W0);var uy=R0?j_:hx;return mx(uy(J0,W0),Tt,Ft)}function ix(Tt,Ft,rr,Zr){return Tt===a||wv(Tt,k$[rr])&&!Ny.call(Zr,rr)?Ft:Tt}function ax(Tt,Ft,rr,Zr,_n,An){return Hy(Tt)&&Hy(Ft)&&(An.set(Ft,Tt),Vw(Tt,Ft,a,ax,An),An.delete(Ft)),Tt}function WS(Tt){return dw(Tt)?a:Tt}function ox(Tt,Ft,rr,Zr,_n,An){var zo=rr&Kt,Qo=Tt.length,n0=Ft.length;if(Qo!=n0&&!(zo&&n0>Qo))return!1;var w0=An.get(Tt),_0=An.get(Ft);if(w0&&_0)return w0==Ft&&_0==Tt;var S0=-1,R0=!0,W0=rr&or?new p$:a;for(An.set(Tt,Ft),An.set(Ft,Tt);++S0<Qo;){var J0=Tt[S0],uy=Ft[S0];if(Zr)var ey=zo?Zr(uy,J0,S0,Ft,Tt,An):Zr(J0,uy,S0,Tt,Ft,An);if(ey!==a){if(ey)continue;R0=!1;break}if(W0){if(!_$(Ft,function(yy,wy){if(!Mo(W0,wy)&&(J0===yy||_n(J0,yy,rr,Zr,An)))return W0.push(wy)})){R0=!1;break}}else if(!(J0===uy||_n(J0,uy,rr,Zr,An))){R0=!1;break}}return An.delete(Tt),An.delete(Ft),R0}function VS(Tt,Ft,rr,Zr,_n,An,zo){switch(rr){case v1:if(Tt.byteLength!=Ft.byteLength||Tt.byteOffset!=Ft.byteOffset)return!1;Tt=Tt.buffer,Ft=Ft.buffer;case Ry:return!(Tt.byteLength!=Ft.byteLength||!An(new Pw(Tt),new Pw(Ft)));case gy:case Ey:case Oy:return wv(+Tt,+Ft);case ly:return Tt.name==Ft.name&&Tt.message==Ft.message;case Yy:case Gy:return Tt==Ft+"";case Iy:var Qo=vy;case zy:var n0=Zr&Kt;if(Qo||(Qo=Ew),Tt.size!=Ft.size&&!n0)return!1;var w0=zo.get(Tt);if(w0)return w0==Ft;Zr|=or,zo.set(Tt,Ft);var _0=ox(Qo(Tt),Qo(Ft),Zr,_n,An,zo);return zo.delete(Tt),_0;case _y:if(tw)return tw.call(Tt)==tw.call(Ft)}return!1}function HS(Tt,Ft,rr,Zr,_n,An){var zo=rr&Kt,Qo=M2(Tt),n0=Qo.length,w0=M2(Ft),_0=w0.length;if(n0!=_0&&!zo)return!1;for(var S0=n0;S0--;){var R0=Qo[S0];if(!(zo?R0 in Ft:Ny.call(Ft,R0)))return!1}var W0=An.get(Tt),J0=An.get(Ft);if(W0&&J0)return W0==Ft&&J0==Tt;var uy=!0;An.set(Tt,Ft),An.set(Ft,Tt);for(var ey=zo;++S0<n0;){R0=Qo[S0];var yy=Tt[R0],wy=Ft[R0];if(Zr)var K1=zo?Zr(wy,yy,R0,Ft,Tt,An):Zr(yy,wy,R0,Tt,Ft,An);if(!(K1===a?yy===wy||_n(yy,wy,rr,Zr,An):K1)){uy=!1;break}ey||(ey=R0=="constructor")}if(uy&&!ey){var R1=Tt.constructor,Y1=Ft.constructor;R1!=Y1&&"constructor"in Tt&&"constructor"in Ft&&!(typeof R1=="function"&&R1 instanceof R1&&typeof Y1=="function"&&Y1 instanceof Y1)&&(uy=!1)}return An.delete(Tt),An.delete(Ft),uy}function qv(Tt){return V2(px(Tt,a,wx),Tt+"")}function M2(Tt){return E_(Tt,p1,L2)}function j2(Tt){return E_(Tt,L1,sx)}var z2=zw?function(Tt){return zw.get(Tt)}:n_;function Qw(Tt){for(var Ft=Tt.name+"",rr=C$[Ft],Zr=Ny.call(C$,Ft)?rr.length:0;Zr--;){var _n=rr[Zr],An=_n.func;if(An==null||An==Tt)return _n.name}return Ft}function R$(Tt){var Ft=Ny.call(Sn,"placeholder")?Sn:Tt;return Ft.placeholder}function Q0(){var Tt=Sn.iteratee||t_;return Tt=Tt===t_?C_:Tt,arguments.length?Tt(arguments[0],arguments[1]):Tt}function Jw(Tt,Ft){var rr=Tt.__data__;return JS(Ft)?rr[typeof Ft=="string"?"string":"hash"]:rr.map}function B2(Tt){for(var Ft=p1(Tt),rr=Ft.length;rr--;){var Zr=Ft[rr],_n=Tt[Zr];Ft[rr]=[Zr,_n,dx(_n)]}return Ft}function g$(Tt,Ft){var rr=Sy(Tt,Ft);return I_(rr)?rr:a}function GS(Tt){var Ft=Ny.call(Tt,d$),rr=Tt[d$];try{Tt[d$]=a;var Zr=!0}catch{}var _n=Ow.call(Tt);return Zr&&(Ft?Tt[d$]=rr:delete Tt[d$]),_n}var L2=f2?function(Tt){return Tt==null?[]:(Tt=jy(Tt),Av(f2(Tt),function(Ft){return f_.call(Tt,Ft)}))}:i_,sx=f2?function(Tt){for(var Ft=[];Tt;)G1(Ft,L2(Tt)),Tt=Rw(Tt);return Ft}:i_,S1=A1;(h2&&S1(new h2(new ArrayBuffer(1)))!=v1||Q$&&S1(new Q$)!=Iy||m2&&S1(m2.resolve())!=r1||I$&&S1(new I$)!=zy||J$&&S1(new J$)!=Uy)&&(S1=function(Tt){var Ft=A1(Tt),rr=Ft==Py?Tt.constructor:a,Zr=rr?y$(rr):"";if(Zr)switch(Zr){case IT:return v1;case CT:return Iy;case OT:return r1;case AT:return zy;case PT:return Uy}return Ft});function ZS(Tt,Ft,rr){for(var Zr=-1,_n=rr.length;++Zr<_n;){var An=rr[Zr],zo=An.size;switch(An.type){case"drop":Tt+=zo;break;case"dropRight":Ft-=zo;break;case"take":Ft=T1(Ft,Tt+zo);break;case"takeRight":Tt=u1(Tt,Ft-zo);break}}return{start:Tt,end:Ft}}function qS(Tt){var Ft=Tt.match(W1);return Ft?Ft[1].split(w1):[]}function ux(Tt,Ft,rr){Ft=a$(Ft,Tt);for(var Zr=-1,_n=Ft.length,An=!1;++Zr<_n;){var zo=Mv(Ft[Zr]);if(!(An=Tt!=null&&rr(Tt,zo)))break;Tt=Tt[zo]}return An||++Zr!=_n?An:(_n=Tt==null?0:Tt.length,!!_n&&o2(_n)&&Kv(zo,_n)&&(oy(Tt)||v$(Tt)))}function KS(Tt){var Ft=Tt.length,rr=new Tt.constructor(Ft);return Ft&&typeof Tt[0]=="string"&&Ny.call(Tt,"index")&&(rr.index=Tt.index,rr.input=Tt.input),rr}function lx(Tt){return typeof Tt.constructor=="function"&&!uw(Tt)?O$(Rw(Tt)):{}}function YS(Tt,Ft,rr){var Zr=Tt.constructor;switch(Ft){case Ry:return R2(Tt);case gy:case Ey:return new Zr(+Tt);case v1:return RS(Tt,rr);case my:case i1:case Y0:case Vy:case b1:case E1:case M0:case $1:case X0:return H_(Tt,rr);case Iy:return new Zr;case Oy:case Gy:return new Zr(Tt);case Yy:return DS(Tt);case zy:return new Zr;case _y:return NS(Tt)}}function XS(Tt,Ft){var rr=Ft.length;if(!rr)return Tt;var Zr=rr-1;return Ft[Zr]=(rr>1?"& ":"")+Ft[Zr],Ft=Ft.join(rr>2?", ":" "),Tt.replace(My,`{
/* [wrapped with `+Ft+`] */
`)}function QS(Tt){return oy(Tt)||v$(Tt)||!!(h_&&Tt&&Tt[h_])}function Kv(Tt,Ft){var rr=typeof Tt;return Ft=Ft??Uo,!!Ft&&(rr=="number"||rr!="symbol"&&X1.test(Tt))&&Tt>-1&&Tt%1==0&&Tt<Ft}function P1(Tt,Ft,rr){if(!Hy(rr))return!1;var Zr=typeof Ft;return(Zr=="number"?B1(rr)&&Kv(Ft,rr.length):Zr=="string"&&Ft in rr)?wv(rr[Ft],Tt):!1}function U2(Tt,Ft){if(oy(Tt))return!1;var rr=typeof Tt;return rr=="number"||rr=="symbol"||rr=="boolean"||Tt==null||q1(Tt)?!0:Ly.test(Tt)||!Wy.test(Tt)||Ft!=null&&Tt in jy(Ft)}function JS(Tt){var Ft=typeof Tt;return Ft=="string"||Ft=="number"||Ft=="symbol"||Ft=="boolean"?Tt!=="__proto__":Tt===null}function F2(Tt){var Ft=Qw(Tt),rr=Sn[Ft];if(typeof rr!="function"||!(Ft in by.prototype))return!1;if(Tt===rr)return!0;var Zr=z2(rr);return!!Zr&&Tt===Zr[0]}function eE(Tt){return!!d_&&d_ in Tt}var tE=Iw?Yv:a_;function uw(Tt){var Ft=Tt&&Tt.constructor,rr=typeof Ft=="function"&&Ft.prototype||k$;return Tt===rr}function dx(Tt){return Tt===Tt&&!Hy(Tt)}function cx(Tt,Ft){return function(rr){return rr==null?!1:rr[Tt]===Ft&&(Ft!==a||Tt in jy(rr))}}function rE(Tt){var Ft=i2(Tt,function(Zr){return rr.size===h&&rr.clear(),Zr}),rr=Ft.cache;return Ft}function nE(Tt,Ft){var rr=Tt[1],Zr=Ft[1],_n=rr|Zr,An=_n<(jr|Lr|Ro),zo=Zr==Ro&&rr==qr||Zr==Ro&&rr==Xo&&Tt[7].length<=Ft[8]||Zr==(Ro|Xo)&&Ft[7].length<=Ft[8]&&rr==qr;if(!(An||zo))return Tt;Zr&jr&&(Tt[2]=Ft[2],_n|=rr&jr?0:ir);var Qo=Ft[3];if(Qo){var n0=Tt[3];Tt[3]=n0?Z_(n0,Qo,Ft[4]):Qo,Tt[4]=n0?vv(Tt[3],b):Ft[4]}return Qo=Ft[5],Qo&&(n0=Tt[5],Tt[5]=n0?q_(n0,Qo,Ft[6]):Qo,Tt[6]=n0?vv(Tt[5],b):Ft[6]),Qo=Ft[7],Qo&&(Tt[7]=Qo),Zr&Ro&&(Tt[8]=Tt[8]==null?Ft[8]:T1(Tt[8],Ft[8])),Tt[9]==null&&(Tt[9]=Ft[9]),Tt[0]=Ft[0],Tt[1]=_n,Tt}function iE(Tt){var Ft=[];if(Tt!=null)for(var rr in jy(Tt))Ft.push(rr);return Ft}function aE(Tt){return Ow.call(Tt)}function px(Tt,Ft,rr){return Ft=u1(Ft===a?Tt.length-1:Ft,0),function(){for(var Zr=arguments,_n=-1,An=u1(Zr.length-Ft,0),zo=p0(An);++_n<An;)zo[_n]=Zr[Ft+_n];_n=-1;for(var Qo=p0(Ft+1);++_n<Ft;)Qo[_n]=Zr[_n];return Qo[Ft]=rr(zo),C1(Tt,this,Qo)}}function fx(Tt,Ft){return Ft.length<2?Tt:m$(Tt,av(Ft,0,-1))}function oE(Tt,Ft){for(var rr=Tt.length,Zr=T1(Ft.length,rr),_n=z1(Tt);Zr--;){var An=Ft[Zr];Tt[Zr]=Kv(An,rr)?_n[An]:a}return Tt}function W2(Tt,Ft){if(!(Ft==="constructor"&&typeof Tt[Ft]=="function")&&Ft!="__proto__")return Tt[Ft]}var hx=gx(j_),lw=wT||function(Tt,Ft){return Jy.setTimeout(Tt,Ft)},V2=gx(CS);function mx(Tt,Ft,rr){var Zr=Ft+"";return V2(Tt,XS(Zr,sE(qS(Zr),rr)))}function gx(Tt){var Ft=0,rr=0;return function(){var Zr=ST(),_n=C0-(Zr-rr);if(rr=Zr,_n>0){if(++Ft>=E0)return arguments[0]}else Ft=0;return Tt.apply(a,arguments)}}function e2(Tt,Ft){var rr=-1,Zr=Tt.length,_n=Zr-1;for(Ft=Ft===a?Zr:Ft;++rr<Ft;){var An=E2(rr,_n),zo=Tt[An];Tt[An]=Tt[rr],Tt[rr]=zo}return Tt.length=Ft,Tt}var yx=rE(function(Tt){var Ft=[];return Tt.charCodeAt(0)===46&&Ft.push(""),Tt.replace(F1,function(rr,Zr,_n,An){Ft.push(_n?An.replace(jv,"$1"):Zr||rr)}),Ft});function Mv(Tt){if(typeof Tt=="string"||q1(Tt))return Tt;var Ft=Tt+"";return Ft=="0"&&1/Tt==-l0?"-0":Ft}function y$(Tt){if(Tt!=null){try{return Cw.call(Tt)}catch{}try{return Tt+""}catch{}}return""}function sE(Tt,Ft){return O1(G0,function(rr){var Zr="_."+rr[0];Ft&rr[1]&&!U0(Tt,Zr)&&Tt.push(Zr)}),Tt.sort()}function vx(Tt){if(Tt instanceof by)return Tt.clone();var Ft=new nv(Tt.__wrapped__,Tt.__chain__);return Ft.__actions__=z1(Tt.__actions__),Ft.__index__=Tt.__index__,Ft.__values__=Tt.__values__,Ft}function uE(Tt,Ft,rr){(rr?P1(Tt,Ft,rr):Ft===a)?Ft=1:Ft=u1(sy(Ft),0);var Zr=Tt==null?0:Tt.length;if(!Zr||Ft<1)return[];for(var _n=0,An=0,zo=p0(Mw(Zr/Ft));_n<Zr;)zo[An++]=av(Tt,_n,_n+=Ft);return zo}function lE(Tt){for(var Ft=-1,rr=Tt==null?0:Tt.length,Zr=0,_n=[];++Ft<rr;){var An=Tt[Ft];An&&(_n[Zr++]=An)}return _n}function dE(){var Tt=arguments.length;if(!Tt)return[];for(var Ft=p0(Tt-1),rr=arguments[0],Zr=Tt;Zr--;)Ft[Zr-1]=arguments[Zr];return G1(oy(rr)?z1(rr):[rr],m1(Ft,1))}var cE=hy(function(Tt,Ft){return e1(Tt)?nw(Tt,m1(Ft,1,e1,!0)):[]}),pE=hy(function(Tt,Ft){var rr=ov(Ft);return e1(rr)&&(rr=a),e1(Tt)?nw(Tt,m1(Ft,1,e1,!0),Q0(rr,2)):[]}),fE=hy(function(Tt,Ft){var rr=ov(Ft);return e1(rr)&&(rr=a),e1(Tt)?nw(Tt,m1(Ft,1,e1,!0),a,rr):[]});function hE(Tt,Ft,rr){var Zr=Tt==null?0:Tt.length;return Zr?(Ft=rr||Ft===a?1:sy(Ft),av(Tt,Ft<0?0:Ft,Zr)):[]}function mE(Tt,Ft,rr){var Zr=Tt==null?0:Tt.length;return Zr?(Ft=rr||Ft===a?1:sy(Ft),Ft=Zr-Ft,av(Tt,0,Ft<0?0:Ft)):[]}function gE(Tt,Ft){return Tt&&Tt.length?Gw(Tt,Q0(Ft,3),!0,!0):[]}function yE(Tt,Ft){return Tt&&Tt.length?Gw(Tt,Q0(Ft,3),!0):[]}function vE(Tt,Ft,rr,Zr){var _n=Tt==null?0:Tt.length;return _n?(rr&&typeof rr!="number"&&P1(Tt,Ft,rr)&&(rr=0,Zr=_n),dS(Tt,Ft,rr,Zr)):[]}function bx(Tt,Ft,rr){var Zr=Tt==null?0:Tt.length;if(!Zr)return-1;var _n=rr==null?0:sy(rr);return _n<0&&(_n=u1(Zr+_n,0)),Wv(Tt,Q0(Ft,3),_n)}function $x(Tt,Ft,rr){var Zr=Tt==null?0:Tt.length;if(!Zr)return-1;var _n=Zr-1;return rr!==a&&(_n=sy(rr),_n=rr<0?u1(Zr+_n,0):T1(_n,Zr-1)),Wv(Tt,Q0(Ft,3),_n,!0)}function wx(Tt){var Ft=Tt==null?0:Tt.length;return Ft?m1(Tt,1):[]}function bE(Tt){var Ft=Tt==null?0:Tt.length;return Ft?m1(Tt,l0):[]}function $E(Tt,Ft){var rr=Tt==null?0:Tt.length;return rr?(Ft=Ft===a?1:sy(Ft),m1(Tt,Ft)):[]}function wE(Tt){for(var Ft=-1,rr=Tt==null?0:Tt.length,Zr={};++Ft<rr;){var _n=Tt[Ft];Zr[_n[0]]=_n[1]}return Zr}function _x(Tt){return Tt&&Tt.length?Tt[0]:a}function _E(Tt,Ft,rr){var Zr=Tt==null?0:Tt.length;if(!Zr)return-1;var _n=rr==null?0:sy(rr);return _n<0&&(_n=u1(Zr+_n,0)),Pv(Tt,Ft,_n)}function xE(Tt){var Ft=Tt==null?0:Tt.length;return Ft?av(Tt,0,-1):[]}var TE=hy(function(Tt){var Ft=Dy(Tt,A2);return Ft.length&&Ft[0]===Tt[0]?w2(Ft):[]}),SE=hy(function(Tt){var Ft=ov(Tt),rr=Dy(Tt,A2);return Ft===ov(rr)?Ft=a:rr.pop(),rr.length&&rr[0]===Tt[0]?w2(rr,Q0(Ft,2)):[]}),EE=hy(function(Tt){var Ft=ov(Tt),rr=Dy(Tt,A2);return Ft=typeof Ft=="function"?Ft:a,Ft&&rr.pop(),rr.length&&rr[0]===Tt[0]?w2(rr,a,Ft):[]});function kE(Tt,Ft){return Tt==null?"":xT.call(Tt,Ft)}function ov(Tt){var Ft=Tt==null?0:Tt.length;return Ft?Tt[Ft-1]:a}function IE(Tt,Ft,rr){var Zr=Tt==null?0:Tt.length;if(!Zr)return-1;var _n=Zr;return rr!==a&&(_n=sy(rr),_n=_n<0?u1(Zr+_n,0):T1(_n,Zr-1)),Ft===Ft?sT(Tt,Ft,_n):Wv(Tt,q$,_n,!0)}function CE(Tt,Ft){return Tt&&Tt.length?R_(Tt,sy(Ft)):a}var OE=hy(xx);function xx(Tt,Ft){return Tt&&Tt.length&&Ft&&Ft.length?S2(Tt,Ft):Tt}function AE(Tt,Ft,rr){return Tt&&Tt.length&&Ft&&Ft.length?S2(Tt,Ft,Q0(rr,2)):Tt}function PE(Tt,Ft,rr){return Tt&&Tt.length&&Ft&&Ft.length?S2(Tt,Ft,a,rr):Tt}var RE=qv(function(Tt,Ft){var rr=Tt==null?0:Tt.length,Zr=y2(Tt,Ft);return M_(Tt,Dy(Ft,function(_n){return Kv(_n,rr)?+_n:_n}).sort(G_)),Zr});function DE(Tt,Ft){var rr=[];if(!(Tt&&Tt.length))return rr;var Zr=-1,_n=[],An=Tt.length;for(Ft=Q0(Ft,3);++Zr<An;){var zo=Tt[Zr];Ft(zo,Zr,Tt)&&(rr.push(zo),_n.push(Zr))}return M_(Tt,_n),rr}function H2(Tt){return Tt==null?Tt:kT.call(Tt)}function NE(Tt,Ft,rr){var Zr=Tt==null?0:Tt.length;return Zr?(rr&&typeof rr!="number"&&P1(Tt,Ft,rr)?(Ft=0,rr=Zr):(Ft=Ft==null?0:sy(Ft),rr=rr===a?Zr:sy(rr)),av(Tt,Ft,rr)):[]}function ME(Tt,Ft){return Hw(Tt,Ft)}function jE(Tt,Ft,rr){return I2(Tt,Ft,Q0(rr,2))}function zE(Tt,Ft){var rr=Tt==null?0:Tt.length;if(rr){var Zr=Hw(Tt,Ft);if(Zr<rr&&wv(Tt[Zr],Ft))return Zr}return-1}function BE(Tt,Ft){return Hw(Tt,Ft,!0)}function LE(Tt,Ft,rr){return I2(Tt,Ft,Q0(rr,2),!0)}function UE(Tt,Ft){var rr=Tt==null?0:Tt.length;if(rr){var Zr=Hw(Tt,Ft,!0)-1;if(wv(Tt[Zr],Ft))return Zr}return-1}function FE(Tt){return Tt&&Tt.length?z_(Tt):[]}function WE(Tt,Ft){return Tt&&Tt.length?z_(Tt,Q0(Ft,2)):[]}function VE(Tt){var Ft=Tt==null?0:Tt.length;return Ft?av(Tt,1,Ft):[]}function HE(Tt,Ft,rr){return Tt&&Tt.length?(Ft=rr||Ft===a?1:sy(Ft),av(Tt,0,Ft<0?0:Ft)):[]}function GE(Tt,Ft,rr){var Zr=Tt==null?0:Tt.length;return Zr?(Ft=rr||Ft===a?1:sy(Ft),Ft=Zr-Ft,av(Tt,Ft<0?0:Ft,Zr)):[]}function ZE(Tt,Ft){return Tt&&Tt.length?Gw(Tt,Q0(Ft,3),!1,!0):[]}function qE(Tt,Ft){return Tt&&Tt.length?Gw(Tt,Q0(Ft,3)):[]}var KE=hy(function(Tt){return i$(m1(Tt,1,e1,!0))}),YE=hy(function(Tt){var Ft=ov(Tt);return e1(Ft)&&(Ft=a),i$(m1(Tt,1,e1,!0),Q0(Ft,2))}),XE=hy(function(Tt){var Ft=ov(Tt);return Ft=typeof Ft=="function"?Ft:a,i$(m1(Tt,1,e1,!0),a,Ft)});function QE(Tt){return Tt&&Tt.length?i$(Tt):[]}function JE(Tt,Ft){return Tt&&Tt.length?i$(Tt,Q0(Ft,2)):[]}function e3(Tt,Ft){return Ft=typeof Ft=="function"?Ft:a,Tt&&Tt.length?i$(Tt,a,Ft):[]}function G2(Tt){if(!(Tt&&Tt.length))return[];var Ft=0;return Tt=Av(Tt,function(rr){if(e1(rr))return Ft=u1(rr.length,Ft),!0}),S$(Ft,function(rr){return Dy(Tt,x$(rr))})}function Tx(Tt,Ft){if(!(Tt&&Tt.length))return[];var rr=G2(Tt);return Ft==null?rr:Dy(rr,function(Zr){return C1(Ft,a,Zr)})}var t3=hy(function(Tt,Ft){return e1(Tt)?nw(Tt,Ft):[]}),r3=hy(function(Tt){return O2(Av(Tt,e1))}),n3=hy(function(Tt){var Ft=ov(Tt);return e1(Ft)&&(Ft=a),O2(Av(Tt,e1),Q0(Ft,2))}),i3=hy(function(Tt){var Ft=ov(Tt);return Ft=typeof Ft=="function"?Ft:a,O2(Av(Tt,e1),a,Ft)}),a3=hy(G2);function o3(Tt,Ft){return F_(Tt||[],Ft||[],rw)}function s3(Tt,Ft){return F_(Tt||[],Ft||[],ow)}var u3=hy(function(Tt){var Ft=Tt.length,rr=Ft>1?Tt[Ft-1]:a;return rr=typeof rr=="function"?(Tt.pop(),rr):a,Tx(Tt,rr)});function Sx(Tt){var Ft=Sn(Tt);return Ft.__chain__=!0,Ft}function l3(Tt,Ft){return Ft(Tt),Tt}function t2(Tt,Ft){return Ft(Tt)}var d3=qv(function(Tt){var Ft=Tt.length,rr=Ft?Tt[0]:0,Zr=this.__wrapped__,_n=function(An){return y2(An,Tt)};return Ft>1||this.__actions__.length||!(Zr instanceof by)||!Kv(rr)?this.thru(_n):(Zr=Zr.slice(rr,+rr+(Ft?1:0)),Zr.__actions__.push({func:t2,args:[_n],thisArg:a}),new nv(Zr,this.__chain__).thru(function(An){return Ft&&!An.length&&An.push(a),An}))});function c3(){return Sx(this)}function p3(){return new nv(this.value(),this.__chain__)}function f3(){this.__values__===a&&(this.__values__=Bx(this.value()));var Tt=this.__index__>=this.__values__.length,Ft=Tt?a:this.__values__[this.__index__++];return{done:Tt,value:Ft}}function h3(){return this}function m3(Tt){for(var Ft,rr=this;rr instanceof Lw;){var Zr=vx(rr);Zr.__index__=0,Zr.__values__=a,Ft?_n.__wrapped__=Zr:Ft=Zr;var _n=Zr;rr=rr.__wrapped__}return _n.__wrapped__=Tt,Ft}function g3(){var Tt=this.__wrapped__;if(Tt instanceof by){var Ft=Tt;return this.__actions__.length&&(Ft=new by(this)),Ft=Ft.reverse(),Ft.__actions__.push({func:t2,args:[H2],thisArg:a}),new nv(Ft,this.__chain__)}return this.thru(H2)}function y3(){return U_(this.__wrapped__,this.__actions__)}var v3=Zw(function(Tt,Ft,rr){Ny.call(Tt,rr)?++Tt[rr]:Gv(Tt,rr,1)});function b3(Tt,Ft,rr){var Zr=oy(Tt)?xw:lS;return rr&&P1(Tt,Ft,rr)&&(Ft=a),Zr(Tt,Q0(Ft,3))}function $3(Tt,Ft){var rr=oy(Tt)?Av:T_;return rr(Tt,Q0(Ft,3))}var w3=Q_(bx),_3=Q_($x);function x3(Tt,Ft){return m1(r2(Tt,Ft),1)}function T3(Tt,Ft){return m1(r2(Tt,Ft),l0)}function S3(Tt,Ft,rr){return rr=rr===a?1:sy(rr),m1(r2(Tt,Ft),rr)}function Ex(Tt,Ft){var rr=oy(Tt)?O1:n$;return rr(Tt,Q0(Ft,3))}function kx(Tt,Ft){var rr=oy(Tt)?$$:x_;return rr(Tt,Q0(Ft,3))}var E3=Zw(function(Tt,Ft,rr){Ny.call(Tt,rr)?Tt[rr].push(Ft):Gv(Tt,rr,[Ft])});function k3(Tt,Ft,rr,Zr){Tt=B1(Tt)?Tt:N$(Tt),rr=rr&&!Zr?sy(rr):0;var _n=Tt.length;return rr<0&&(rr=u1(_n+rr,0)),s2(Tt)?rr<=_n&&Tt.indexOf(Ft,rr)>-1:!!_n&&Pv(Tt,Ft,rr)>-1}var I3=hy(function(Tt,Ft,rr){var Zr=-1,_n=typeof Ft=="function",An=B1(Tt)?p0(Tt.length):[];return n$(Tt,function(zo){An[++Zr]=_n?C1(Ft,zo,rr):iw(zo,Ft,rr)}),An}),C3=Zw(function(Tt,Ft,rr){Gv(Tt,rr,Ft)});function r2(Tt,Ft){var rr=oy(Tt)?Dy:O_;return rr(Tt,Q0(Ft,3))}function O3(Tt,Ft,rr,Zr){return Tt==null?[]:(oy(Ft)||(Ft=Ft==null?[]:[Ft]),rr=Zr?a:rr,oy(rr)||(rr=rr==null?[]:[rr]),D_(Tt,Ft,rr))}var A3=Zw(function(Tt,Ft,rr){Tt[rr?0:1].push(Ft)},function(){return[[],[]]});function P3(Tt,Ft,rr){var Zr=oy(Tt)?j1:Y$,_n=arguments.length<3;return Zr(Tt,Q0(Ft,4),rr,_n,n$)}function R3(Tt,Ft,rr){var Zr=oy(Tt)?Tw:Y$,_n=arguments.length<3;return Zr(Tt,Q0(Ft,4),rr,_n,x_)}function D3(Tt,Ft){var rr=oy(Tt)?Av:T_;return rr(Tt,a2(Q0(Ft,3)))}function N3(Tt){var Ft=oy(Tt)?b_:kS;return Ft(Tt)}function M3(Tt,Ft,rr){(rr?P1(Tt,Ft,rr):Ft===a)?Ft=1:Ft=sy(Ft);var Zr=oy(Tt)?iS:IS;return Zr(Tt,Ft)}function j3(Tt){var Ft=oy(Tt)?aS:OS;return Ft(Tt)}function z3(Tt){if(Tt==null)return 0;if(B1(Tt))return s2(Tt)?E$(Tt):Tt.length;var Ft=S1(Tt);return Ft==Iy||Ft==zy?Tt.size:x2(Tt).length}function B3(Tt,Ft,rr){var Zr=oy(Tt)?_$:AS;return rr&&P1(Tt,Ft,rr)&&(Ft=a),Zr(Tt,Q0(Ft,3))}var L3=hy(function(Tt,Ft){if(Tt==null)return[];var rr=Ft.length;return rr>1&&P1(Tt,Ft[0],Ft[1])?Ft=[]:rr>2&&P1(Ft[0],Ft[1],Ft[2])&&(Ft=[Ft[0]]),D_(Tt,m1(Ft,1),[])}),n2=$T||function(){return Jy.Date.now()};function U3(Tt,Ft){if(typeof Ft!="function")throw new rv(d);return Tt=sy(Tt),function(){if(--Tt<1)return Ft.apply(this,arguments)}}function Ix(Tt,Ft,rr){return Ft=rr?a:Ft,Ft=Tt&&Ft==null?Tt.length:Ft,Zv(Tt,Ro,a,a,a,a,Ft)}function Cx(Tt,Ft){var rr;if(typeof Ft!="function")throw new rv(d);return Tt=sy(Tt),function(){return--Tt>0&&(rr=Ft.apply(this,arguments)),Tt<=1&&(Ft=a),rr}}var Z2=hy(function(Tt,Ft,rr){var Zr=jr;if(rr.length){var _n=vv(rr,R$(Z2));Zr|=xn}return Zv(Tt,Zr,Ft,rr,_n)}),Ox=hy(function(Tt,Ft,rr){var Zr=jr|Lr;if(rr.length){var _n=vv(rr,R$(Ox));Zr|=xn}return Zv(Ft,Zr,Tt,rr,_n)});function Ax(Tt,Ft,rr){Ft=rr?a:Ft;var Zr=Zv(Tt,qr,a,a,a,a,a,Ft);return Zr.placeholder=Ax.placeholder,Zr}function Px(Tt,Ft,rr){Ft=rr?a:Ft;var Zr=Zv(Tt,vn,a,a,a,a,a,Ft);return Zr.placeholder=Px.placeholder,Zr}function Rx(Tt,Ft,rr){var Zr,_n,An,zo,Qo,n0,w0=0,_0=!1,S0=!1,R0=!0;if(typeof Tt!="function")throw new rv(d);Ft=sv(Ft)||0,Hy(rr)&&(_0=!!rr.leading,S0="maxWait"in rr,An=S0?u1(sv(rr.maxWait)||0,Ft):An,R0="trailing"in rr?!!rr.trailing:R0);function W0(t1){var _v=Zr,Qv=_n;return Zr=_n=a,w0=t1,zo=Tt.apply(Qv,_v),zo}function J0(t1){return w0=t1,Qo=lw(yy,Ft),_0?W0(t1):zo}function uy(t1){var _v=t1-n0,Qv=t1-w0,Qx=Ft-_v;return S0?T1(Qx,An-Qv):Qx}function ey(t1){var _v=t1-n0,Qv=t1-w0;return n0===a||_v>=Ft||_v<0||S0&&Qv>=An}function yy(){var t1=n2();if(ey(t1))return wy(t1);Qo=lw(yy,uy(t1))}function wy(t1){return Qo=a,R0&&Zr?W0(t1):(Zr=_n=a,zo)}function K1(){Qo!==a&&W_(Qo),w0=0,Zr=n0=_n=Qo=a}function R1(){return Qo===a?zo:wy(n2())}function Y1(){var t1=n2(),_v=ey(t1);if(Zr=arguments,_n=this,n0=t1,_v){if(Qo===a)return J0(n0);if(S0)return W_(Qo),Qo=lw(yy,Ft),W0(n0)}return Qo===a&&(Qo=lw(yy,Ft)),zo}return Y1.cancel=K1,Y1.flush=R1,Y1}var F3=hy(function(Tt,Ft){return __(Tt,1,Ft)}),W3=hy(function(Tt,Ft,rr){return __(Tt,sv(Ft)||0,rr)});function V3(Tt){return Zv(Tt,o0)}function i2(Tt,Ft){if(typeof Tt!="function"||Ft!=null&&typeof Ft!="function")throw new rv(d);var rr=function(){var Zr=arguments,_n=Ft?Ft.apply(this,Zr):Zr[0],An=rr.cache;if(An.has(_n))return An.get(_n);var zo=Tt.apply(this,Zr);return rr.cache=An.set(_n,zo)||An,zo};return rr.cache=new(i2.Cache||Hv),rr}i2.Cache=Hv;function a2(Tt){if(typeof Tt!="function")throw new rv(d);return function(){var Ft=arguments;switch(Ft.length){case 0:return!Tt.call(this);case 1:return!Tt.call(this,Ft[0]);case 2:return!Tt.call(this,Ft[0],Ft[1]);case 3:return!Tt.call(this,Ft[0],Ft[1],Ft[2])}return!Tt.apply(this,Ft)}}function H3(Tt){return Cx(2,Tt)}var G3=PS(function(Tt,Ft){Ft=Ft.length==1&&oy(Ft[0])?Dy(Ft[0],Xr(Q0())):Dy(m1(Ft,1),Xr(Q0()));var rr=Ft.length;return hy(function(Zr){for(var _n=-1,An=T1(Zr.length,rr);++_n<An;)Zr[_n]=Ft[_n].call(this,Zr[_n]);return C1(Tt,this,Zr)})}),q2=hy(function(Tt,Ft){var rr=vv(Ft,R$(q2));return Zv(Tt,xn,a,Ft,rr)}),Dx=hy(function(Tt,Ft){var rr=vv(Ft,R$(Dx));return Zv(Tt,No,a,Ft,rr)}),Z3=qv(function(Tt,Ft){return Zv(Tt,Xo,a,a,a,Ft)});function q3(Tt,Ft){if(typeof Tt!="function")throw new rv(d);return Ft=Ft===a?Ft:sy(Ft),hy(Tt,Ft)}function K3(Tt,Ft){if(typeof Tt!="function")throw new rv(d);return Ft=Ft==null?0:u1(sy(Ft),0),hy(function(rr){var Zr=rr[Ft],_n=o$(rr,0,Ft);return Zr&&G1(_n,Zr),C1(Tt,this,_n)})}function Y3(Tt,Ft,rr){var Zr=!0,_n=!0;if(typeof Tt!="function")throw new rv(d);return Hy(rr)&&(Zr="leading"in rr?!!rr.leading:Zr,_n="trailing"in rr?!!rr.trailing:_n),Rx(Tt,Ft,{leading:Zr,maxWait:Ft,trailing:_n})}function X3(Tt){return Ix(Tt,1)}function Q3(Tt,Ft){return q2(P2(Ft),Tt)}function J3(){if(!arguments.length)return[];var Tt=arguments[0];return oy(Tt)?Tt:[Tt]}function _k(Tt){return iv(Tt,Ht)}function eI(Tt,Ft){return Ft=typeof Ft=="function"?Ft:a,iv(Tt,Ht,Ft)}function tI(Tt){return iv(Tt,g|Ht)}function rI(Tt,Ft){return Ft=typeof Ft=="function"?Ft:a,iv(Tt,g|Ht,Ft)}function nI(Tt,Ft){return Ft==null||w_(Tt,Ft,p1(Ft))}function wv(Tt,Ft){return Tt===Ft||Tt!==Tt&&Ft!==Ft}var iI=Xw($2),aI=Xw(function(Tt,Ft){return Tt>=Ft}),v$=k_(function(){return arguments}())?k_:function(Tt){return Ky(Tt)&&Ny.call(Tt,"callee")&&!f_.call(Tt,"callee")},oy=p0.isArray,oI=L$?Xr(L$):mS;function B1(Tt){return Tt!=null&&o2(Tt.length)&&!Yv(Tt)}function e1(Tt){return Ky(Tt)&&B1(Tt)}function sI(Tt){return Tt===!0||Tt===!1||Ky(Tt)&&A1(Tt)==gy}var s$=_T||a_,uI=$w?Xr($w):gS;function lI(Tt){return Ky(Tt)&&Tt.nodeType===1&&!dw(Tt)}function dI(Tt){if(Tt==null)return!0;if(B1(Tt)&&(oy(Tt)||typeof Tt=="string"||typeof Tt.splice=="function"||s$(Tt)||D$(Tt)||v$(Tt)))return!Tt.length;var Ft=S1(Tt);if(Ft==Iy||Ft==zy)return!Tt.size;if(uw(Tt))return!x2(Tt).length;for(var rr in Tt)if(Ny.call(Tt,rr))return!1;return!0}function cI(Tt,Ft){return aw(Tt,Ft)}function pI(Tt,Ft,rr){rr=typeof rr=="function"?rr:a;var Zr=rr?rr(Tt,Ft):a;return Zr===a?aw(Tt,Ft,a,rr):!!Zr}function K2(Tt){if(!Ky(Tt))return!1;var Ft=A1(Tt);return Ft==ly||Ft==Ty||typeof Tt.message=="string"&&typeof Tt.name=="string"&&!dw(Tt)}function fI(Tt){return typeof Tt=="number"&&m_(Tt)}function Yv(Tt){if(!Hy(Tt))return!1;var Ft=A1(Tt);return Ft==ty||Ft==ky||Ft==xy||Ft==xv}function Nx(Tt){return typeof Tt=="number"&&Tt==sy(Tt)}function o2(Tt){return typeof Tt=="number"&&Tt>-1&&Tt%1==0&&Tt<=Uo}function Hy(Tt){var Ft=typeof Tt;return Tt!=null&&(Ft=="object"||Ft=="function")}function Ky(Tt){return Tt!=null&&typeof Tt=="object"}var Mx=U$?Xr(U$):vS;function hI(Tt,Ft){return Tt===Ft||_2(Tt,Ft,B2(Ft))}function mI(Tt,Ft,rr){return rr=typeof rr=="function"?rr:a,_2(Tt,Ft,B2(Ft),rr)}function gI(Tt){return jx(Tt)&&Tt!=+Tt}function yI(Tt){if(tE(Tt))throw new ay(s);return I_(Tt)}function vI(Tt){return Tt===null}function bI(Tt){return Tt==null}function jx(Tt){return typeof Tt=="number"||Ky(Tt)&&A1(Tt)==Oy}function dw(Tt){if(!Ky(Tt)||A1(Tt)!=Py)return!1;var Ft=Rw(Tt);if(Ft===null)return!0;var rr=Ny.call(Ft,"constructor")&&Ft.constructor;return typeof rr=="function"&&rr instanceof rr&&Cw.call(rr)==gT}var Y2=F$?Xr(F$):bS;function $I(Tt){return Nx(Tt)&&Tt>=-Uo&&Tt<=Uo}var zx=W$?Xr(W$):$S;function s2(Tt){return typeof Tt=="string"||!oy(Tt)&&Ky(Tt)&&A1(Tt)==Gy}function q1(Tt){return typeof Tt=="symbol"||Ky(Tt)&&A1(Tt)==_y}var D$=ww?Xr(ww):wS;function wI(Tt){return Tt===a}function _I(Tt){return Ky(Tt)&&S1(Tt)==Uy}function xI(Tt){return Ky(Tt)&&A1(Tt)==y1}var TI=Xw(T2),SI=Xw(function(Tt,Ft){return Tt<=Ft});function Bx(Tt){if(!Tt)return[];if(B1(Tt))return s2(Tt)?bv(Tt):z1(Tt);if(X$&&Tt[X$])return iy(Tt[X$]());var Ft=S1(Tt),rr=Ft==Iy?vy:Ft==zy?Ew:N$;return rr(Tt)}function Xv(Tt){if(!Tt)return Tt===0?Tt:0;if(Tt=sv(Tt),Tt===l0||Tt===-l0){var Ft=Tt<0?-1:1;return Ft*c0}return Tt===Tt?Tt:0}function sy(Tt){var Ft=Xv(Tt),rr=Ft%1;return Ft===Ft?rr?Ft-rr:Ft:0}function Lx(Tt){return Tt?f$(sy(Tt),0,Bo):0}function sv(Tt){if(typeof Tt=="number")return Tt;if(q1(Tt))return $0;if(Hy(Tt)){var Ft=typeof Tt.valueOf=="function"?Tt.valueOf():Tt;Tt=Hy(Ft)?Ft+"":Ft}if(typeof Tt!="string")return Tt===0?Tt:+Tt;Tt=Hr(Tt);var rr=lv.test(Tt);return rr||D1.test(Tt)?M$(Tt.slice(2),rr?2:8):kv.test(Tt)?$0:+Tt}function Ux(Tt){return Nv(Tt,L1(Tt))}function EI(Tt){return Tt?f$(sy(Tt),-Uo,Uo):Tt===0?Tt:0}function Ay(Tt){return Tt==null?"":Z1(Tt)}var kI=A$(function(Tt,Ft){if(uw(Ft)||B1(Ft)){Nv(Ft,p1(Ft),Tt);return}for(var rr in Ft)Ny.call(Ft,rr)&&rw(Tt,rr,Ft[rr])}),Fx=A$(function(Tt,Ft){Nv(Ft,L1(Ft),Tt)}),u2=A$(function(Tt,Ft,rr,Zr){Nv(Ft,L1(Ft),Tt,Zr)}),II=A$(function(Tt,Ft,rr,Zr){Nv(Ft,p1(Ft),Tt,Zr)}),CI=qv(y2);function OI(Tt,Ft){var rr=O$(Tt);return Ft==null?rr:$_(rr,Ft)}var AI=hy(function(Tt,Ft){Tt=jy(Tt);var rr=-1,Zr=Ft.length,_n=Zr>2?Ft[2]:a;for(_n&&P1(Ft[0],Ft[1],_n)&&(Zr=1);++rr<Zr;)for(var An=Ft[rr],zo=L1(An),Qo=-1,n0=zo.length;++Qo<n0;){var w0=zo[Qo],_0=Tt[w0];(_0===a||wv(_0,k$[w0])&&!Ny.call(Tt,w0))&&(Tt[w0]=An[w0])}return Tt}),PI=hy(function(Tt){return Tt.push(a,ax),C1(Wx,a,Tt)});function RI(Tt,Ft){return G$(Tt,Q0(Ft,3),Dv)}function DI(Tt,Ft){return G$(Tt,Q0(Ft,3),b2)}function NI(Tt,Ft){return Tt==null?Tt:v2(Tt,Q0(Ft,3),L1)}function MI(Tt,Ft){return Tt==null?Tt:S_(Tt,Q0(Ft,3),L1)}function jI(Tt,Ft){return Tt&&Dv(Tt,Q0(Ft,3))}function zI(Tt,Ft){return Tt&&b2(Tt,Q0(Ft,3))}function BI(Tt){return Tt==null?[]:Ww(Tt,p1(Tt))}function LI(Tt){return Tt==null?[]:Ww(Tt,L1(Tt))}function X2(Tt,Ft,rr){var Zr=Tt==null?a:m$(Tt,Ft);return Zr===a?rr:Zr}function UI(Tt,Ft){return Tt!=null&&ux(Tt,Ft,cS)}function Q2(Tt,Ft){return Tt!=null&&ux(Tt,Ft,pS)}var FI=ex(function(Tt,Ft,rr){Ft!=null&&typeof Ft.toString!="function"&&(Ft=Ow.call(Ft)),Tt[Ft]=rr},e_(U1)),WI=ex(function(Tt,Ft,rr){Ft!=null&&typeof Ft.toString!="function"&&(Ft=Ow.call(Ft)),Ny.call(Tt,Ft)?Tt[Ft].push(rr):Tt[Ft]=[rr]},Q0),VI=hy(iw);function p1(Tt){return B1(Tt)?v_(Tt):x2(Tt)}function L1(Tt){return B1(Tt)?v_(Tt,!0):_S(Tt)}function HI(Tt,Ft){var rr={};return Ft=Q0(Ft,3),Dv(Tt,function(Zr,_n,An){Gv(rr,Ft(Zr,_n,An),Zr)}),rr}function GI(Tt,Ft){var rr={};return Ft=Q0(Ft,3),Dv(Tt,function(Zr,_n,An){Gv(rr,_n,Ft(Zr,_n,An))}),rr}var ZI=A$(function(Tt,Ft,rr){Vw(Tt,Ft,rr)}),Wx=A$(function(Tt,Ft,rr,Zr){Vw(Tt,Ft,rr,Zr)}),qI=qv(function(Tt,Ft){var rr={};if(Tt==null)return rr;var Zr=!1;Ft=Dy(Ft,function(An){return An=a$(An,Tt),Zr||(Zr=An.length>1),An}),Nv(Tt,j2(Tt),rr),Zr&&(rr=iv(rr,g|jt|Ht,WS));for(var _n=Ft.length;_n--;)C2(rr,Ft[_n]);return rr});function KI(Tt,Ft){return Vx(Tt,a2(Q0(Ft)))}var YI=qv(function(Tt,Ft){return Tt==null?{}:TS(Tt,Ft)});function Vx(Tt,Ft){if(Tt==null)return{};var rr=Dy(j2(Tt),function(Zr){return[Zr]});return Ft=Q0(Ft),N_(Tt,rr,function(Zr,_n){return Ft(Zr,_n[0])})}function XI(Tt,Ft,rr){Ft=a$(Ft,Tt);var Zr=-1,_n=Ft.length;for(_n||(_n=1,Tt=a);++Zr<_n;){var An=Tt==null?a:Tt[Mv(Ft[Zr])];An===a&&(Zr=_n,An=rr),Tt=Yv(An)?An.call(Tt):An}return Tt}function QI(Tt,Ft,rr){return Tt==null?Tt:ow(Tt,Ft,rr)}function JI(Tt,Ft,rr,Zr){return Zr=typeof Zr=="function"?Zr:a,Tt==null?Tt:ow(Tt,Ft,rr,Zr)}var Hx=nx(p1),Gx=nx(L1);function eC(Tt,Ft,rr){var Zr=oy(Tt),_n=Zr||s$(Tt)||D$(Tt);if(Ft=Q0(Ft,4),rr==null){var An=Tt&&Tt.constructor;_n?rr=Zr?new An:[]:Hy(Tt)?rr=Yv(An)?O$(Rw(Tt)):{}:rr={}}return(_n?O1:Dv)(Tt,function(zo,Qo,n0){return Ft(rr,zo,Qo,n0)}),rr}function tC(Tt,Ft){return Tt==null?!0:C2(Tt,Ft)}function rC(Tt,Ft,rr){return Tt==null?Tt:L_(Tt,Ft,P2(rr))}function nC(Tt,Ft,rr,Zr){return Zr=typeof Zr=="function"?Zr:a,Tt==null?Tt:L_(Tt,Ft,P2(rr),Zr)}function N$(Tt){return Tt==null?[]:Tn(Tt,p1(Tt))}function iC(Tt){return Tt==null?[]:Tn(Tt,L1(Tt))}function aC(Tt,Ft,rr){return rr===a&&(rr=Ft,Ft=a),rr!==a&&(rr=sv(rr),rr=rr===rr?rr:0),Ft!==a&&(Ft=sv(Ft),Ft=Ft===Ft?Ft:0),f$(sv(Tt),Ft,rr)}function oC(Tt,Ft,rr){return Ft=Xv(Ft),rr===a?(rr=Ft,Ft=0):rr=Xv(rr),Tt=sv(Tt),fS(Tt,Ft,rr)}function sC(Tt,Ft,rr){if(rr&&typeof rr!="boolean"&&P1(Tt,Ft,rr)&&(Ft=rr=a),rr===a&&(typeof Ft=="boolean"?(rr=Ft,Ft=a):typeof Tt=="boolean"&&(rr=Tt,Tt=a)),Tt===a&&Ft===a?(Tt=0,Ft=1):(Tt=Xv(Tt),Ft===a?(Ft=Tt,Tt=0):Ft=Xv(Ft)),Tt>Ft){var Zr=Tt;Tt=Ft,Ft=Zr}if(rr||Tt%1||Ft%1){var _n=g_();return T1(Tt+_n*(Ft-Tt+bw("1e-"+((_n+"").length-1))),Ft)}return E2(Tt,Ft)}var uC=P$(function(Tt,Ft,rr){return Ft=Ft.toLowerCase(),Tt+(rr?Zx(Ft):Ft)});function Zx(Tt){return J2(Ay(Tt).toLowerCase())}function qx(Tt){return Tt=Ay(Tt),Tt&&Tt.replace(zv,B0).replace(O0,"")}function lC(Tt,Ft,rr){Tt=Ay(Tt),Ft=Z1(Ft);var Zr=Tt.length;rr=rr===a?Zr:f$(sy(rr),0,Zr);var _n=rr;return rr-=Ft.length,rr>=0&&Tt.slice(rr,_n)==Ft}function dC(Tt){return Tt=Ay(Tt),Tt&&F0.test(Tt)?Tt.replace(g0,P0):Tt}function cC(Tt){return Tt=Ay(Tt),Tt&&d0.test(Tt)?Tt.replace(n1,"\\$&"):Tt}var pC=P$(function(Tt,Ft,rr){return Tt+(rr?"-":"")+Ft.toLowerCase()}),fC=P$(function(Tt,Ft,rr){return Tt+(rr?" ":"")+Ft.toLowerCase()}),hC=X_("toLowerCase");function mC(Tt,Ft,rr){Tt=Ay(Tt),Ft=sy(Ft);var Zr=Ft?E$(Tt):0;if(!Ft||Zr>=Ft)return Tt;var _n=(Ft-Zr)/2;return Yw(jw(_n),rr)+Tt+Yw(Mw(_n),rr)}function gC(Tt,Ft,rr){Tt=Ay(Tt),Ft=sy(Ft);var Zr=Ft?E$(Tt):0;return Ft&&Zr<Ft?Tt+Yw(Ft-Zr,rr):Tt}function yC(Tt,Ft,rr){Tt=Ay(Tt),Ft=sy(Ft);var Zr=Ft?E$(Tt):0;return Ft&&Zr<Ft?Yw(Ft-Zr,rr)+Tt:Tt}function vC(Tt,Ft,rr){return rr||Ft==null?Ft=0:Ft&&(Ft=+Ft),ET(Ay(Tt).replace(dy,""),Ft||0)}function bC(Tt,Ft,rr){return(rr?P1(Tt,Ft,rr):Ft===a)?Ft=1:Ft=sy(Ft),k2(Ay(Tt),Ft)}function $C(){var Tt=arguments,Ft=Ay(Tt[0]);return Tt.length<3?Ft:Ft.replace(Tt[1],Tt[2])}var wC=P$(function(Tt,Ft,rr){return Tt+(rr?"_":"")+Ft.toLowerCase()});function _C(Tt,Ft,rr){return rr&&typeof rr!="number"&&P1(Tt,Ft,rr)&&(Ft=rr=a),rr=rr===a?Bo:rr>>>0,rr?(Tt=Ay(Tt),Tt&&(typeof Ft=="string"||Ft!=null&&!Y2(Ft))&&(Ft=Z1(Ft),!Ft&&$y(Tt))?o$(bv(Tt),0,rr):Tt.split(Ft,rr)):[]}var xC=P$(function(Tt,Ft,rr){return Tt+(rr?" ":"")+J2(Ft)});function TC(Tt,Ft,rr){return Tt=Ay(Tt),rr=rr==null?0:f$(sy(rr),0,Tt.length),Ft=Z1(Ft),Tt.slice(rr,rr+Ft.length)==Ft}function SC(Tt,Ft,rr){var Zr=Sn.templateSettings;rr&&P1(Tt,Ft,rr)&&(Ft=a),Tt=Ay(Tt),Ft=u2({},Ft,Zr,ix);var _n=u2({},Ft.imports,Zr.imports,ix),An=p1(_n),zo=Tn(_n,An),Qo,n0,w0=0,_0=Ft.interpolate||N1,S0="__p += '",R0=p2((Ft.escape||N1).source+"|"+_0.source+"|"+(_0===Xy?uv:N1).source+"|"+(Ft.evaluate||N1).source+"|$","g"),W0="//# sourceURL="+(Ny.call(Ft,"sourceURL")?(Ft.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++j0+"]")+`
`;Tt.replace(R0,function(ey,yy,wy,K1,R1,Y1){return wy||(wy=K1),S0+=Tt.slice(w0,Y1).replace(l1,K0),yy&&(Qo=!0,S0+=`' +
__e(`+yy+`) +
'`),R1&&(n0=!0,S0+=`';
`+R1+`;
__p += '`),wy&&(S0+=`' +
((__t = (`+wy+`)) == null ? '' : __t) +
'`),w0=Y1+ey.length,ey}),S0+=`';
`;var J0=Ny.call(Ft,"variable")&&Ft.variable;if(!J0)S0=`with (obj) {
`+S0+`
}
`;else if(Sv.test(J0))throw new ay(et);S0=(n0?S0.replace(Fy,""):S0).replace(ko,"$1").replace(r0,"$1;"),S0="function("+(J0||"obj")+`) {
`+(J0?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Qo?", __e = _.escape":"")+(n0?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+S0+`return __p
}`;var uy=Yx(function(){return Cy(An,W0+"return "+S0).apply(a,zo)});if(uy.source=S0,K2(uy))throw uy;return uy}function EC(Tt){return Ay(Tt).toLowerCase()}function kC(Tt){return Ay(Tt).toUpperCase()}function IC(Tt,Ft,rr){if(Tt=Ay(Tt),Tt&&(rr||Ft===a))return Hr(Tt);if(!Tt||!(Ft=Z1(Ft)))return Tt;var Zr=bv(Tt),_n=bv(Ft),An=_g(Zr,_n),zo=m0(Zr,_n)+1;return o$(Zr,An,zo).join("")}function CC(Tt,Ft,rr){if(Tt=Ay(Tt),Tt&&(rr||Ft===a))return Tt.slice(0,l_(Tt)+1);if(!Tt||!(Ft=Z1(Ft)))return Tt;var Zr=bv(Tt),_n=m0(Zr,bv(Ft))+1;return o$(Zr,0,_n).join("")}function OC(Tt,Ft,rr){if(Tt=Ay(Tt),Tt&&(rr||Ft===a))return Tt.replace(dy,"");if(!Tt||!(Ft=Z1(Ft)))return Tt;var Zr=bv(Tt),_n=_g(Zr,bv(Ft));return o$(Zr,_n).join("")}function AC(Tt,Ft){var rr=s0,Zr=h0;if(Hy(Ft)){var _n="separator"in Ft?Ft.separator:_n;rr="length"in Ft?sy(Ft.length):rr,Zr="omission"in Ft?Z1(Ft.omission):Zr}Tt=Ay(Tt);var An=Tt.length;if($y(Tt)){var zo=bv(Tt);An=zo.length}if(rr>=An)return Tt;var Qo=rr-E$(Zr);if(Qo<1)return Zr;var n0=zo?o$(zo,0,Qo).join(""):Tt.slice(0,Qo);if(_n===a)return n0+Zr;if(zo&&(Qo+=n0.length-Qo),Y2(_n)){if(Tt.slice(Qo).search(_n)){var w0,_0=n0;for(_n.global||(_n=p2(_n.source,Ay(Ev.exec(_n))+"g")),_n.lastIndex=0;w0=_n.exec(_0);)var S0=w0.index;n0=n0.slice(0,S0===a?Qo:S0)}}else if(Tt.indexOf(Z1(_n),Qo)!=Qo){var R0=n0.lastIndexOf(_n);R0>-1&&(n0=n0.slice(0,R0))}return n0+Zr}function PC(Tt){return Tt=Ay(Tt),Tt&&b0.test(Tt)?Tt.replace(i0,uT):Tt}var RC=P$(function(Tt,Ft,rr){return Tt+(rr?" ":"")+Ft.toUpperCase()}),J2=X_("toUpperCase");function Kx(Tt,Ft,rr){return Tt=Ay(Tt),Ft=rr?a:Ft,Ft===a?f0(Tt)?cT(Tt):Sw(Tt):Tt.match(Ft)||[]}var Yx=hy(function(Tt,Ft){try{return C1(Tt,a,Ft)}catch(rr){return K2(rr)?rr:new ay(rr)}}),DC=qv(function(Tt,Ft){return O1(Ft,function(rr){rr=Mv(rr),Gv(Tt,rr,Z2(Tt[rr],Tt))}),Tt});function NC(Tt){var Ft=Tt==null?0:Tt.length,rr=Q0();return Tt=Ft?Dy(Tt,function(Zr){if(typeof Zr[1]!="function")throw new rv(d);return[rr(Zr[0]),Zr[1]]}):[],hy(function(Zr){for(var _n=-1;++_n<Ft;){var An=Tt[_n];if(C1(An[0],this,Zr))return C1(An[1],this,Zr)}})}function MC(Tt){return uS(iv(Tt,g))}function e_(Tt){return function(){return Tt}}function jC(Tt,Ft){return Tt==null||Tt!==Tt?Ft:Tt}var zC=J_(),BC=J_(!0);function U1(Tt){return Tt}function t_(Tt){return C_(typeof Tt=="function"?Tt:iv(Tt,g))}function LC(Tt){return A_(iv(Tt,g))}function UC(Tt,Ft){return P_(Tt,iv(Ft,g))}var FC=hy(function(Tt,Ft){return function(rr){return iw(rr,Tt,Ft)}}),WC=hy(function(Tt,Ft){return function(rr){return iw(Tt,rr,Ft)}});function r_(Tt,Ft,rr){var Zr=p1(Ft),_n=Ww(Ft,Zr);rr==null&&!(Hy(Ft)&&(_n.length||!Zr.length))&&(rr=Ft,Ft=Tt,Tt=this,_n=Ww(Ft,p1(Ft)));var An=!(Hy(rr)&&"chain"in rr)||!!rr.chain,zo=Yv(Tt);return O1(_n,function(Qo){var n0=Ft[Qo];Tt[Qo]=n0,zo&&(Tt.prototype[Qo]=function(){var w0=this.__chain__;if(An||w0){var _0=Tt(this.__wrapped__),S0=_0.__actions__=z1(this.__actions__);return S0.push({func:n0,args:arguments,thisArg:Tt}),_0.__chain__=w0,_0}return n0.apply(Tt,G1([this.value()],arguments))})}),Tt}function VC(){return Jy._===this&&(Jy._=yT),this}function n_(){}function HC(Tt){return Tt=sy(Tt),hy(function(Ft){return R_(Ft,Tt)})}var GC=D2(Dy),ZC=D2(xw),qC=D2(_$);function Xx(Tt){return U2(Tt)?x$(Mv(Tt)):SS(Tt)}function KC(Tt){return function(Ft){return Tt==null?a:m$(Tt,Ft)}}var YC=tx(),XC=tx(!0);function i_(){return[]}function a_(){return!1}function QC(){return{}}function JC(){return""}function eO(){return!0}function tO(Tt,Ft){if(Tt=sy(Tt),Tt<1||Tt>Uo)return[];var rr=Bo,Zr=T1(Tt,Bo);Ft=Q0(Ft),Tt-=Bo;for(var _n=S$(Zr,Ft);++rr<Tt;)Ft(rr);return _n}function rO(Tt){return oy(Tt)?Dy(Tt,Mv):q1(Tt)?[Tt]:z1(yx(Ay(Tt)))}function nO(Tt){var Ft=++mT;return Ay(Tt)+Ft}var iO=Kw(function(Tt,Ft){return Tt+Ft},0),aO=N2("ceil"),oO=Kw(function(Tt,Ft){return Tt/Ft},1),sO=N2("floor");function uO(Tt){return Tt&&Tt.length?Fw(Tt,U1,$2):a}function lO(Tt,Ft){return Tt&&Tt.length?Fw(Tt,Q0(Ft,2),$2):a}function dO(Tt){return K$(Tt,U1)}function cO(Tt,Ft){return K$(Tt,Q0(Ft,2))}function pO(Tt){return Tt&&Tt.length?Fw(Tt,U1,T2):a}function fO(Tt,Ft){return Tt&&Tt.length?Fw(Tt,Q0(Ft,2),T2):a}var hO=Kw(function(Tt,Ft){return Tt*Ft},1),mO=N2("round"),gO=Kw(function(Tt,Ft){return Tt-Ft},0);function yO(Tt){return Tt&&Tt.length?e$(Tt,U1):0}function vO(Tt,Ft){return Tt&&Tt.length?e$(Tt,Q0(Ft,2)):0}return Sn.after=U3,Sn.ary=Ix,Sn.assign=kI,Sn.assignIn=Fx,Sn.assignInWith=u2,Sn.assignWith=II,Sn.at=CI,Sn.before=Cx,Sn.bind=Z2,Sn.bindAll=DC,Sn.bindKey=Ox,Sn.castArray=J3,Sn.chain=Sx,Sn.chunk=uE,Sn.compact=lE,Sn.concat=dE,Sn.cond=NC,Sn.conforms=MC,Sn.constant=e_,Sn.countBy=v3,Sn.create=OI,Sn.curry=Ax,Sn.curryRight=Px,Sn.debounce=Rx,Sn.defaults=AI,Sn.defaultsDeep=PI,Sn.defer=F3,Sn.delay=W3,Sn.difference=cE,Sn.differenceBy=pE,Sn.differenceWith=fE,Sn.drop=hE,Sn.dropRight=mE,Sn.dropRightWhile=gE,Sn.dropWhile=yE,Sn.fill=vE,Sn.filter=$3,Sn.flatMap=x3,Sn.flatMapDeep=T3,Sn.flatMapDepth=S3,Sn.flatten=wx,Sn.flattenDeep=bE,Sn.flattenDepth=$E,Sn.flip=V3,Sn.flow=zC,Sn.flowRight=BC,Sn.fromPairs=wE,Sn.functions=BI,Sn.functionsIn=LI,Sn.groupBy=E3,Sn.initial=xE,Sn.intersection=TE,Sn.intersectionBy=SE,Sn.intersectionWith=EE,Sn.invert=FI,Sn.invertBy=WI,Sn.invokeMap=I3,Sn.iteratee=t_,Sn.keyBy=C3,Sn.keys=p1,Sn.keysIn=L1,Sn.map=r2,Sn.mapKeys=HI,Sn.mapValues=GI,Sn.matches=LC,Sn.matchesProperty=UC,Sn.memoize=i2,Sn.merge=ZI,Sn.mergeWith=Wx,Sn.method=FC,Sn.methodOf=WC,Sn.mixin=r_,Sn.negate=a2,Sn.nthArg=HC,Sn.omit=qI,Sn.omitBy=KI,Sn.once=H3,Sn.orderBy=O3,Sn.over=GC,Sn.overArgs=G3,Sn.overEvery=ZC,Sn.overSome=qC,Sn.partial=q2,Sn.partialRight=Dx,Sn.partition=A3,Sn.pick=YI,Sn.pickBy=Vx,Sn.property=Xx,Sn.propertyOf=KC,Sn.pull=OE,Sn.pullAll=xx,Sn.pullAllBy=AE,Sn.pullAllWith=PE,Sn.pullAt=RE,Sn.range=YC,Sn.rangeRight=XC,Sn.rearg=Z3,Sn.reject=D3,Sn.remove=DE,Sn.rest=q3,Sn.reverse=H2,Sn.sampleSize=M3,Sn.set=QI,Sn.setWith=JI,Sn.shuffle=j3,Sn.slice=NE,Sn.sortBy=L3,Sn.sortedUniq=FE,Sn.sortedUniqBy=WE,Sn.split=_C,Sn.spread=K3,Sn.tail=VE,Sn.take=HE,Sn.takeRight=GE,Sn.takeRightWhile=ZE,Sn.takeWhile=qE,Sn.tap=l3,Sn.throttle=Y3,Sn.thru=t2,Sn.toArray=Bx,Sn.toPairs=Hx,Sn.toPairsIn=Gx,Sn.toPath=rO,Sn.toPlainObject=Ux,Sn.transform=eC,Sn.unary=X3,Sn.union=KE,Sn.unionBy=YE,Sn.unionWith=XE,Sn.uniq=QE,Sn.uniqBy=JE,Sn.uniqWith=e3,Sn.unset=tC,Sn.unzip=G2,Sn.unzipWith=Tx,Sn.update=rC,Sn.updateWith=nC,Sn.values=N$,Sn.valuesIn=iC,Sn.without=t3,Sn.words=Kx,Sn.wrap=Q3,Sn.xor=r3,Sn.xorBy=n3,Sn.xorWith=i3,Sn.zip=a3,Sn.zipObject=o3,Sn.zipObjectDeep=s3,Sn.zipWith=u3,Sn.entries=Hx,Sn.entriesIn=Gx,Sn.extend=Fx,Sn.extendWith=u2,r_(Sn,Sn),Sn.add=iO,Sn.attempt=Yx,Sn.camelCase=uC,Sn.capitalize=Zx,Sn.ceil=aO,Sn.clamp=aC,Sn.clone=_k,Sn.cloneDeep=tI,Sn.cloneDeepWith=rI,Sn.cloneWith=eI,Sn.conformsTo=nI,Sn.deburr=qx,Sn.defaultTo=jC,Sn.divide=oO,Sn.endsWith=lC,Sn.eq=wv,Sn.escape=dC,Sn.escapeRegExp=cC,Sn.every=b3,Sn.find=w3,Sn.findIndex=bx,Sn.findKey=RI,Sn.findLast=_3,Sn.findLastIndex=$x,Sn.findLastKey=DI,Sn.floor=sO,Sn.forEach=Ex,Sn.forEachRight=kx,Sn.forIn=NI,Sn.forInRight=MI,Sn.forOwn=jI,Sn.forOwnRight=zI,Sn.get=X2,Sn.gt=iI,Sn.gte=aI,Sn.has=UI,Sn.hasIn=Q2,Sn.head=_x,Sn.identity=U1,Sn.includes=k3,Sn.indexOf=_E,Sn.inRange=oC,Sn.invoke=VI,Sn.isArguments=v$,Sn.isArray=oy,Sn.isArrayBuffer=oI,Sn.isArrayLike=B1,Sn.isArrayLikeObject=e1,Sn.isBoolean=sI,Sn.isBuffer=s$,Sn.isDate=uI,Sn.isElement=lI,Sn.isEmpty=dI,Sn.isEqual=cI,Sn.isEqualWith=pI,Sn.isError=K2,Sn.isFinite=fI,Sn.isFunction=Yv,Sn.isInteger=Nx,Sn.isLength=o2,Sn.isMap=Mx,Sn.isMatch=hI,Sn.isMatchWith=mI,Sn.isNaN=gI,Sn.isNative=yI,Sn.isNil=bI,Sn.isNull=vI,Sn.isNumber=jx,Sn.isObject=Hy,Sn.isObjectLike=Ky,Sn.isPlainObject=dw,Sn.isRegExp=Y2,Sn.isSafeInteger=$I,Sn.isSet=zx,Sn.isString=s2,Sn.isSymbol=q1,Sn.isTypedArray=D$,Sn.isUndefined=wI,Sn.isWeakMap=_I,Sn.isWeakSet=xI,Sn.join=kE,Sn.kebabCase=pC,Sn.last=ov,Sn.lastIndexOf=IE,Sn.lowerCase=fC,Sn.lowerFirst=hC,Sn.lt=TI,Sn.lte=SI,Sn.max=uO,Sn.maxBy=lO,Sn.mean=dO,Sn.meanBy=cO,Sn.min=pO,Sn.minBy=fO,Sn.stubArray=i_,Sn.stubFalse=a_,Sn.stubObject=QC,Sn.stubString=JC,Sn.stubTrue=eO,Sn.multiply=hO,Sn.nth=CE,Sn.noConflict=VC,Sn.noop=n_,Sn.now=n2,Sn.pad=mC,Sn.padEnd=gC,Sn.padStart=yC,Sn.parseInt=vC,Sn.random=sC,Sn.reduce=P3,Sn.reduceRight=R3,Sn.repeat=bC,Sn.replace=$C,Sn.result=XI,Sn.round=mO,Sn.runInContext=t0,Sn.sample=N3,Sn.size=z3,Sn.snakeCase=wC,Sn.some=B3,Sn.sortedIndex=ME,Sn.sortedIndexBy=jE,Sn.sortedIndexOf=zE,Sn.sortedLastIndex=BE,Sn.sortedLastIndexBy=LE,Sn.sortedLastIndexOf=UE,Sn.startCase=xC,Sn.startsWith=TC,Sn.subtract=gO,Sn.sum=yO,Sn.sumBy=vO,Sn.template=SC,Sn.times=tO,Sn.toFinite=Xv,Sn.toInteger=sy,Sn.toLength=Lx,Sn.toLower=EC,Sn.toNumber=sv,Sn.toSafeInteger=EI,Sn.toString=Ay,Sn.toUpper=kC,Sn.trim=IC,Sn.trimEnd=CC,Sn.trimStart=OC,Sn.truncate=AC,Sn.unescape=PC,Sn.uniqueId=nO,Sn.upperCase=RC,Sn.upperFirst=J2,Sn.each=Ex,Sn.eachRight=kx,Sn.first=_x,r_(Sn,function(){var Tt={};return Dv(Sn,function(Ft,rr){Ny.call(Sn.prototype,rr)||(Tt[rr]=Ft)}),Tt}(),{chain:!1}),Sn.VERSION=o,O1(["bind","bindKey","curry","curryRight","partial","partialRight"],function(Tt){Sn[Tt].placeholder=Sn}),O1(["drop","take"],function(Tt,Ft){by.prototype[Tt]=function(rr){rr=rr===a?1:u1(sy(rr),0);var Zr=this.__filtered__&&!Ft?new by(this):this.clone();return Zr.__filtered__?Zr.__takeCount__=T1(rr,Zr.__takeCount__):Zr.__views__.push({size:T1(rr,Bo),type:Tt+(Zr.__dir__<0?"Right":"")}),Zr},by.prototype[Tt+"Right"]=function(rr){return this.reverse()[Tt](rr).reverse()}}),O1(["filter","map","takeWhile"],function(Tt,Ft){var rr=Ft+1,Zr=rr==D0||rr==e0;by.prototype[Tt]=function(_n){var An=this.clone();return An.__iteratees__.push({iteratee:Q0(_n,3),type:rr}),An.__filtered__=An.__filtered__||Zr,An}}),O1(["head","last"],function(Tt,Ft){var rr="take"+(Ft?"Right":"");by.prototype[Tt]=function(){return this[rr](1).value()[0]}}),O1(["initial","tail"],function(Tt,Ft){var rr="drop"+(Ft?"":"Right");by.prototype[Tt]=function(){return this.__filtered__?new by(this):this[rr](1)}}),by.prototype.compact=function(){return this.filter(U1)},by.prototype.find=function(Tt){return this.filter(Tt).head()},by.prototype.findLast=function(Tt){return this.reverse().find(Tt)},by.prototype.invokeMap=hy(function(Tt,Ft){return typeof Tt=="function"?new by(this):this.map(function(rr){return iw(rr,Tt,Ft)})}),by.prototype.reject=function(Tt){return this.filter(a2(Q0(Tt)))},by.prototype.slice=function(Tt,Ft){Tt=sy(Tt);var rr=this;return rr.__filtered__&&(Tt>0||Ft<0)?new by(rr):(Tt<0?rr=rr.takeRight(-Tt):Tt&&(rr=rr.drop(Tt)),Ft!==a&&(Ft=sy(Ft),rr=Ft<0?rr.dropRight(-Ft):rr.take(Ft-Tt)),rr)},by.prototype.takeRightWhile=function(Tt){return this.reverse().takeWhile(Tt).reverse()},by.prototype.toArray=function(){return this.take(Bo)},Dv(by.prototype,function(Tt,Ft){var rr=/^(?:filter|find|map|reject)|While$/.test(Ft),Zr=/^(?:head|last)$/.test(Ft),_n=Sn[Zr?"take"+(Ft=="last"?"Right":""):Ft],An=Zr||/^find/.test(Ft);_n&&(Sn.prototype[Ft]=function(){var zo=this.__wrapped__,Qo=Zr?[1]:arguments,n0=zo instanceof by,w0=Qo[0],_0=n0||oy(zo),S0=function(yy){var wy=_n.apply(Sn,G1([yy],Qo));return Zr&&R0?wy[0]:wy};_0&&rr&&typeof w0=="function"&&w0.length!=1&&(n0=_0=!1);var R0=this.__chain__,W0=!!this.__actions__.length,J0=An&&!R0,uy=n0&&!W0;if(!An&&_0){zo=uy?zo:new by(this);var ey=Tt.apply(zo,Qo);return ey.__actions__.push({func:t2,args:[S0],thisArg:a}),new nv(ey,R0)}return J0&&uy?Tt.apply(this,Qo):(ey=this.thru(S0),J0?Zr?ey.value()[0]:ey.value():ey)})}),O1(["pop","push","shift","sort","splice","unshift"],function(Tt){var Ft=kw[Tt],rr=/^(?:push|sort|unshift)$/.test(Tt)?"tap":"thru",Zr=/^(?:pop|shift)$/.test(Tt);Sn.prototype[Tt]=function(){var _n=arguments;if(Zr&&!this.__chain__){var An=this.value();return Ft.apply(oy(An)?An:[],_n)}return this[rr](function(zo){return Ft.apply(oy(zo)?zo:[],_n)})}}),Dv(by.prototype,function(Tt,Ft){var rr=Sn[Ft];if(rr){var Zr=rr.name+"";Ny.call(C$,Zr)||(C$[Zr]=[]),C$[Zr].push({name:Ft,func:rr})}}),C$[qw(a,Lr).name]=[{name:"wrapper",func:a}],by.prototype.clone=RT,by.prototype.reverse=DT,by.prototype.value=NT,Sn.prototype.at=d3,Sn.prototype.chain=c3,Sn.prototype.commit=p3,Sn.prototype.next=f3,Sn.prototype.plant=m3,Sn.prototype.reverse=g3,Sn.prototype.toJSON=Sn.prototype.valueOf=Sn.prototype.value=y3,Sn.prototype.first=Sn.prototype.head,X$&&(Sn.prototype[X$]=h3),Sn},t$=pT();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Jy._=t$,define(function(){return t$})):Ov?((Ov.exports=t$)._=t$,l$._=t$):Jy._=t$}).call(e)}}),import_lodash=__toESM(require_lodash());async function imageDecode(e){const i=MimeType.fromString(e.type);switch(i.type){case"image/x-alpha8":{const a=parseInt(i.params.width),o=parseInt(i.params.height);return ndarray4(new Uint8Array(await e.arrayBuffer()),[o,a,1])}case"image/x-rgba8":{const a=parseInt(i.params.width),o=parseInt(i.params.height);return ndarray4(new Uint8Array(await e.arrayBuffer()),[o,a,4])}case"application/octet-stream":case"image/png":case"image/jpeg":case"image/jpg":case"image/webp":{const a=await createImageBitmap(e),o=imageBitmapToImageData(a);return ndarray4(new Uint8Array(o.data),[o.height,o.width,4])}default:throw new Error(`Invalid format: ${i.type} with params: ${i.params}`)}}async function imageEncode(e,i=.8,a="image/png"){const[o,c,s]=e.shape;switch(a){case"image/x-alpha8":case"image/x-rgba8":{const $t=MimeType.create(a,{width:c.toString(),height:o.toString()});return new Blob([e.data],{type:$t.toString()})}case"image/png":case"image/jpeg":case"image/webp":{const $t=new ImageData(new Uint8ClampedArray(e.data),c,o);var d=createCanvas($t.width,$t.height),et=d.getContext("2d");return et.putImageData($t,0,0),d.convertToBlob({quality:i,type:a})}default:throw new Error(`Invalid format: ${a}`)}}var MimeType=class u_{constructor(i,a){this.type="application/octet-stream",this.params={},this.type=i,this.params=a}toString(){const i=[];for(const a in this.params){const o=this.params[a];i.push(`${a}=${o}`)}return[this.type,...i].join(";")}static create(i,a){return new u_(i,a)}isIdentical(i){return this.type===i.type&&this.params===i.params}isEqual(i){return this.type===i.type}static fromString(i){const[a,...o]=i.split(";"),c={};for(const s of o){const[d,et]=s.split("=");c[d.trim()]=et.trim()}return new u_(a,c)}};function isAbsoluteURI(e){return new RegExp("^(?:[a-z+]+:)?//","i").test(e)}function ensureAbsoluteURI(e,i){return isAbsoluteURI(e)?e:new URL(e,i).href}function imageBitmapToImageData(e){var i=createCanvas(e.width,e.height),a=i.getContext("2d");return a.drawImage(e,0,0),a.getImageData(0,0,i.width,i.height)}function createTypeArray(e){if(typeof Uint8Array<"u")return new Uint8Array(e);if(typeof Uint8ClampedArray<"u")return new Uint8ClampedArray(e);if(typeof Uint16Array<"u")return new Uint16Array(e);if(typeof Uint32Array<"u")return new Uint32Array(e);if(typeof Float32Array<"u")return new Float32Array(e);if(typeof Float64Array<"u")return new Float64Array(e);throw new Error("TypedArray not supported")}function tensorResizeBilinear(e,i,a,o=!1){const[c,s,d]=e.shape;let et=s/i,$t=c/a;o&&(et=$t=Math.max(et,$t)>1?Math.max(et,$t):Math.min(et,$t));const h=ndarray4(createTypeArray(d*i*a),[a,i,d]);for(let b=0;b<a;b++)for(let g=0;g<i;g++){const jt=g*et,Ht=b*$t,Kt=Math.max(Math.floor(jt),0),or=Math.min(Math.ceil(jt),s-1),jr=Math.max(Math.floor(Ht),0),Lr=Math.min(Math.ceil(Ht),c-1),ir=jt-Kt,qr=Ht-jr;for(let vn=0;vn<d;vn++){const xn=e.get(jr,Kt,vn),No=e.get(jr,or,vn),Ro=e.get(Lr,Kt,vn),Xo=e.get(Lr,or,vn),o0=(1-ir)*(1-qr)*xn+ir*(1-qr)*No+(1-ir)*qr*Ro+ir*qr*Xo;h.set(b,g,vn,o0)}}return h}function tensorHWCtoBCHW(e,i=[128,128,128],a=[256,256,256]){var o=e.data;const[c,s,d]=e.shape,et=c*s,$t=new Float32Array(3*et);for(let h=0,b=0;h<o.length;h+=4,b+=1)$t[b]=(o[h]-i[0])/a[0],$t[b+et]=(o[h+1]-i[1])/a[1],$t[b+et+et]=(o[h+2]-i[2])/a[2];return ndarray4($t,[1,3,c,s])}async function imageSourceToImageData(e,i){return typeof e=="string"&&(e=ensureAbsoluteURI(e,i.publicPath),e=new URL(e)),e instanceof URL&&(e=await(await fetch(e,{})).blob()),(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e=new Blob([e])),e instanceof Blob&&(e=await imageDecode(e)),e}function convertFloat32ToUint8(e){const i=new Uint8Array(e.data.length);for(let a=0;a<e.data.length;a++)i[a]=e.data[a]*255;return ndarray4(i,e.shape)}function createCanvas(e,i){let a;if(typeof OffscreenCanvas<"u"?a=new OffscreenCanvas(e,i):a=document.createElement("canvas"),!a)throw new Error("Canvas nor OffscreenCanvas are available in the current context.");return a}async function loadAsUrl(e,i){return URL.createObjectURL(await loadAsBlob(e,i))}async function loadAsBlob(e,i){const a=new URL("resources.json",i.publicPath),o=await fetch(a);if(!o.ok)throw new Error("Resource metadata not found. Ensure that the config.publicPath is configured correctly.");const s=(await o.json())[e];if(!s)throw new Error(`Resource ${e} not found. Ensure that the config.publicPath is configured correctly.`);const d=s.chunks;let et=0;const $t=d.map(async g=>{const jt=g.offsets[1]-g.offsets[0],Ht=i.publicPath?new URL(g.hash,i.publicPath).toString():g.hash,or=await(await fetch(Ht,i.fetchArgs)).blob();if(jt!==or.size)throw new Error(`Failed to fetch ${e} with size ${jt} but got ${or.size}`);return i.progress&&(et+=jt,i.progress(`fetch:${e}`,et,s.size)),or}),h=await Promise.all($t),b=new Blob(h,{type:s.mime});if(b.size!==s.size)throw new Error(`Failed to fetch ${e} with size ${s.size} but got ${b.size}`);return b}var simd=()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),threads=()=>(async e=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),webgpu=()=>navigator.gpu!==void 0,maxNumThreads=()=>navigator.hardwareConcurrency??4;async function createOnnxSession(e,i){const a=i.device==="gpu",o=await threads(),c=simd(),s=i.proxyToWorker,d=[a?"webgpu":"wasm"],et=a?ort_gpu:ort_cpu;i.debug&&(console.debug("	Using Threads:",o),console.debug("	Using SIMD:",c),console.debug("	Using WebGPU:",a),console.debug("	Proxy to Worker:",s),et.env.debug=!0,et.env.logLevel="verbose"),et.env.wasm.numThreads=maxNumThreads(),et.env.wasm.simd=simd(),et.env.wasm.proxy=s;const $t={"ort-wasm-simd-threaded.wasm":o&&c,"ort-wasm-simd.wasm":!o&&c,"ort-wasm-threaded.wasm":!a&&o&&!c,"ort-wasm.wasm":!a&&!o&&!c},h={};for(const[jt,Ht]of Object.entries($t))if(Ht){const Kt=a&&jt.includes("simd")?`/onnxruntime-web/${jt.replace(".wasm",".jsep.wasm")}`:`/onnxruntime-web/${jt}`;h[jt]=await loadAsUrl(Kt,i)}et.env.wasm.wasmPaths=h,i.debug&&console.debug("ort.env.wasm:",et.env.wasm);const b={executionProviders:d,graphOptimizationLevel:"all",executionMode:"parallel",enableCpuMemArena:!0};return await et.InferenceSession.create(e,b).catch(jt=>{throw new Error(`Failed to create session: "${jt}". Please check if the publicPath is set correctly.`)})}async function runOnnxSession(e,i,a,o){const s=o.device==="gpu"?ort_gpu:ort_cpu,d={};for(const[h,b]of i)d[h]=new s.Tensor("float32",new Float32Array(b.data),b.shape);const et=await e.run(d,{}),$t=[];for(const h of a){const b=et[h],g=b.dims,jt=b.data,Ht=ndarray4(jt,g);$t.push(Ht)}return $t}var package_default={name:"@imgly/background-removal",version:"1.5.3",description:"Background Removal in the Browser",keywords:["background-removal","client-side","data-privacy","image-segmentation","image-matting","onnx"],repository:{type:"git",url:"git+https://github.com/imgly/background-removal-js.git"},license:"SEE LICENSE IN LICENSE.md",author:{name:"IMG.LY GmbH",email:"support@img.ly",url:"https://img.ly"},bugs:{email:"support@img.ly"},source:"./src/index.ts",main:"./dist/index.cjs",module:"./dist/index.mjs",types:"./dist/src/index.d.ts",exports:{".":{require:"./dist/index.cjs",import:"./dist/index.mjs",types:"./dist/src/index.d.ts"}},homepage:"https://img.ly/showcases/cesdk/web/background-removal",files:["LICENSE.md","README.md","CHANGELOG.md","ThirdPartyLicenses.json","dist/","bin/"],scripts:{start:"npm run watch",clean:"npx rimraf dist",test:"true",resources:"node ../../scripts/package-resources.mjs","changelog:create":"node ../../scripts/changelog/changelog-create.mjs","changelog:generate":"node ../../scripts/changelog/changelog-generate.mjs",build:"npm run clean && npm run types && npm run resources && npm run changelog:generate && node scripts/build.mjs",types:" npx tsc --declaration --emitDeclarationOnly --declarationDir dist --declarationMap",watch:"npm run clean && npm run resources && npm run changelog:generate && node scripts/watch.mjs","publish:latest":"npm publish --tag latest --access public","publish:next":"npm publish --tag next --access public","package:pack":"npm pack . --pack-destination ../../releases",lint:"npx prettier --write ."},dependencies:{"@types/lodash-es":"^4.17.12","@types/ndarray":"~1.0.14","@types/node":"~20.3.0","lodash-es":"^4.17.21",ndarray:"~1.0.0","onnxruntime-web":"~1.18.0",zod:"^3.23.8"},devDependencies:{assert:"~2.0.0",esbuild:"~0.18.0",glob:"~10.3.0","npm-dts":"~1.3.0",process:"~0.11.0","ts-loader":"~9.4.0",tslib:"~2.5.0",typescript:"~5.1.0",util:"~0.12.0",webpack:"~5.85.0","webpack-cli":"~5.1.0"},bundleDependencies:[]},ConfigSchema=z.object({publicPath:z.string().optional().describe("The public path to the wasm files and the onnx model.").default("https://staticimgly.com/@imgly/background-removal-data/${PACKAGE_VERSION}/dist/").transform(e=>e.replace("${PACKAGE_NAME}",package_default.name).replace("${PACKAGE_VERSION}",package_default.version)),debug:z.boolean().default(!1).describe("Whether to enable debug logging."),rescale:z.boolean().default(!0).describe("Whether to rescale the image."),device:z.enum(["cpu","gpu"]).default("cpu").describe("The device to run the model on."),proxyToWorker:z.boolean().default(!0).describe("Whether to proxy inference to a web worker."),fetchArgs:z.any().default({}).describe("Arguments to pass to fetch when loading the model."),progress:z.function().args(z.string(),z.number(),z.number()).returns(z.void()).describe("Progress callback.").optional(),model:z.preprocess(e=>{switch(e){case"large":return"isnet";case"small":return"isnet_quint8";case"medium":return"isnet_fp16";default:return e}},z.enum(["isnet","isnet_fp16","isnet_quint8"])).default("medium"),output:z.object({format:z.enum(["image/png","image/jpeg","image/webp","image/x-rgba8","image/x-alpha8"]).default("image/png"),quality:z.number().default(.8)}).default({})}).default({}).transform(e=>(e.debug&&console.log("Config:",e),e.debug&&!e.progress&&(e.progress=e.progress??((i,a,o)=>{console.debug(`Downloading ${i}: ${a} of ${o}`)}),crossOriginIsolated||e.debug&&console.debug("Cross-Origin-Isolated is not enabled. Performance will be degraded. Please see  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer.")),e.device=="gpu"&&(webgpu()||(e.debug&&console.debug("Switching to CPU for GPU not supported."),e.device="cpu")),e));function validateConfig(e){return ConfigSchema.parse(e??{})}async function initBase(e){e.debug&&console.debug("Loading model...",e.model);const i=e.model,o=await(await loadAsBlob(`/models/${i}`,e)).arrayBuffer();return await createOnnxSession(o,e)}async function initInference(e){e=validateConfig(e);const i=await initBase(e);return{config:e,session:{base:i}}}async function runInference(e,i,a){const[c,s,d]=e.shape,et=!1;let $t=tensorResizeBilinear(e,1024,1024,et);const h=tensorHWCtoBCHW($t);let b=await runOnnxSession(a.base,[["input",h]],["output"],i),g=ndarray4(b[0].data,[1024,1024,1]),jt=convertFloat32ToUint8(g);return i.rescale?(jt=tensorResizeBilinear(jt,s,c,et),[jt,e]):[jt,$t]}var init=(0,import_lodash.memoize)(initInference,e=>JSON.stringify(e));async function removeBackground(e,i){var jt,Ht,Kt,or;const{config:a,session:o}=await init(i);a.progress&&a.progress("compute:decode",0,4);const c=await imageSourceToImageData(e,a);(jt=a.progress)==null||jt.call(a,"compute:inference",1,4);const[s,d]=await runInference(c,a,o);(Ht=a.progress)==null||Ht.call(a,"compute:mask",2,4);const et=d,[$t,h]=et.shape,b=$t*h;for(let jr=0;jr<b;jr+=1)et.data[4*jr+3]=s.data[jr];(Kt=a.progress)==null||Kt.call(a,"compute:encode",3,4);const g=await imageEncode(et,a.output.quality,a.output.format);return(or=a.progress)==null||or.call(a,"compute:encode",4,4),g}/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/const useRemoveBackground=()=>{const e=useIsMobile(),[i,a]=reactExports.useState(!1),[o,c]=reactExports.useState(null),[s,d]=reactExports.useState(null),et="isnet";return{removeBackground:async({file:h,output:b="no-bg",download:g=!1})=>{try{d("Started."),a(!0);const jt=await removeBackground(h,{model:et,device:e?"cpu":"gpu",progress:(or,jr,Lr)=>{d(`Downloading ${or}: ${jr} of ${Lr}`)}}),Ht=URL.createObjectURL(jt);a(!1),d("Finished.");const Kt=`${b}-${randomUUID()}.png`;if(g){const or=document.createElement("a");or.href=Ht,or.download=Kt,document.body.appendChild(or),or.click(),document.body.removeChild(or),URL.revokeObjectURL(or.href)}return{name:Kt,url:Ht}}catch(jt){c(jt),a(!1)}},progress:s,isLoading:i,error:o}},ImageViewer=({src:e,alt:i,download:a})=>{const[o,c]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:"avatar",children:[jsxRuntimeExports.jsx("div",{className:"w-24 rounded-xl",onClick:()=>c(!0),children:jsxRuntimeExports.jsx("img",{src:e,alt:i})}),jsxRuntimeExports.jsx(Modal,{title:"Image",visible:o,onClose:()=>c(!1),children:jsxRuntimeExports.jsxs("div",{className:"flex justify-center card bg-base-100 w-96 shadow-xl",children:[jsxRuntimeExports.jsx("figure",{children:jsxRuntimeExports.jsx("img",{src:e,alt:i})}),jsxRuntimeExports.jsx("a",{href:e,className:"btn btn-dark",download:a,children:"Download"})]})})]})},ActionRow=({file:e,index:i,result:a})=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{scope:"row",children:i+1}),jsxRuntimeExports.jsx("td",{children:e.name}),jsxRuntimeExports.jsxs("td",{children:[a&&jsxRuntimeExports.jsx("a",{href:a.url,className:"btn btn-dark",download:a.download,children:"Download"}),!a&&jsxRuntimeExports.jsx(Loading,{})]}),jsxRuntimeExports.jsxs("td",{children:[a&&jsxRuntimeExports.jsx(ImageViewer,{download:a.download,src:a.url,alt:e.name}),!a&&jsxRuntimeExports.jsx(Loading,{})]})]},e.name),RemoveBackground=()=>{const{removeBackground:e,isLoading:i,progress:a}=useRemoveBackground(),[o,c]=reactExports.useState(null),[s,d]=reactExports.useState(null),[et,$t]=reactExports.useState([]),h=async g=>{if(g){c(g);for(const jt of g){const Ht=await e({file:jt});if(!Ht)return;$t(Kt=>[...Kt,{fileName:jt.name,download:Ht.name,url:Ht.url}])}}},b=async g=>{var Ht;const jt=(Ht=g.clipboardData)==null?void 0:Ht.items;if(jt){for(const Kt of jt)if(Kt.kind==="file"){const or=Kt.getAsFile();if(or){const jr=await e({file:or});if(!jr)return;d({fileName:or.name,download:jr.name,url:jr.url})}}}};return jsxRuntimeExports.jsx(Page,{className:"table",onPaste:b,name:"Remove Background",description:"Select a file or paste it",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row",children:[a&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx("span",{children:a})}),i&&jsxRuntimeExports.jsx(Loading,{}),jsxRuntimeExports.jsx(FilePicker,{onFileChange:h}),jsxRuntimeExports.jsx("div",{className:"container",style:{display:"flex",marginTop:"1rem"},children:jsxRuntimeExports.jsxs("table",{className:"table table-light relative overflow-x-auto",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{scope:"col",children:"#"}),jsxRuntimeExports.jsx("th",{scope:"col",children:"File Name"}),jsxRuntimeExports.jsx("th",{scope:"col",children:"Actions"}),jsxRuntimeExports.jsx("th",{scope:"col",children:"Preview"})]})}),jsxRuntimeExports.jsxs("tbody",{children:[s&&jsxRuntimeExports.jsx(ActionRow,{index:1,file:new File([],s.fileName),result:s}),o&&Array.from(o).map((g,jt)=>{const Ht=et.find(Kt=>Kt.fileName===g.name);return jsxRuntimeExports.jsx(ActionRow,{file:g,index:jt,result:Ht},g.name)})]})]})})]})})},MIN_DISTANCE=25,addImageToCanvas=(e,i,a,o)=>{const c=new Image;c.src=`images/${o}.png`,e.drawImage(c,i,a,30,30)},drawRock=(e,i,a)=>{e.fillStyle="red",addImageToCanvas(e,i,a,"rock")},drawScissors=(e,i,a)=>{e.save(),e.translate(i+15,a+15),e.rotate(Math.PI),e.translate(-15,-15),addImageToCanvas(e,-15,-15,"scissors"),e.restore()},drawPaper=(e,i,a)=>{e.fillStyle="green",addImageToCanvas(e,i,a,"paper")},itsA=(e,{type:i})=>i===e,countFor=(e,i)=>i.filter(a=>itsA(e,a)).length,calculateWinner=e=>{const i=countFor("rock",e),a=countFor("paper",e),o=countFor("scissors",e);return i>a&&i>o?"Rock":a>i&&a>o?"Paper":o>i&&o>a?"Scissors":"Tie"},CanvasGame=()=>{const e=useIsMobile(),i=reactExports.useRef(null),a=reactExports.useRef(null),o=reactExports.useRef([]),[c,s]=reactExports.useState(10),[d,et]=reactExports.useState(10),[$t,h]=reactExports.useState(d),[b,g]=reactExports.useState(c),[jt,Ht]=reactExports.useState(c),[Kt,or]=reactExports.useState(c),[jr,Lr]=reactExports.useState(null),[ir,qr]=reactExports.useState(!1),vn=No=>{const Ro=a.current;if(!Ro)return[];const Xo=Ro.width,o0=Ro.height,s0=[];for(let h0=0;h0<c;h0++){const E0={x:Math.random()*Xo,y:Math.random()*o0,dx:Math.random()*4-2,dy:Math.random()*4-2,type:No};No==="rock"?(E0.x=Xo*.1,E0.y=o0*.1):No==="paper"?(E0.x=Xo*.9,E0.y=o0*.1):No==="scissors"&&(E0.x=Xo*.9,E0.y=o0*.9),s0.push(E0)}return s0},xn=()=>{o.current=[...vn("rock"),...vn("paper"),...vn("scissors")],g(c),Ht(c),or(c),h(d),Lr(null),qr(!0)};return reactExports.useEffect(()=>{const No=a.current;if(!No)return;const Ro=No.getContext("2d");if(!Ro)return;const Xo=No.width,o0=No.height;if(!ir)return;const s0=()=>{Ro.clearRect(0,0,Xo,o0);const N0=o.current.map(c0=>(c0.x+=c0.dx,c0.y+=c0.dy,(c0.x+10>Xo||c0.x-10<0)&&(c0.dx*=-1),(c0.y+10>o0||c0.y-10<0)&&(c0.dy*=-1),c0)).filter(c0=>{let $0=!0;return o.current.forEach(Bo=>{var x0;if(c0!==Bo){const A0=Math.abs(c0.x-Bo.x),G0=Math.abs(c0.y-Bo.y);A0<MIN_DISTANCE&&G0<MIN_DISTANCE&&(itsA("rock",c0)&&itsA("paper",Bo)||itsA("scissors",c0)&&itsA("rock",Bo)||itsA("paper",c0)&&itsA("scissors",Bo))&&($0=!1,(x0=i.current)==null||x0.play())}}),$0}),e0=countFor("rock",N0),l0=countFor("paper",N0),Uo=countFor("scissors",N0);g(e0),Ht(l0),or(Uo),e0===0&&l0===0?Lr("Scissors"):e0===0&&Uo===0?Lr("Paper"):l0===0&&Uo===0&&Lr("Rock"),o.current=N0,N0.forEach(c0=>{c0.type==="paper"?drawPaper(Ro,c0.x,c0.y):c0.type==="rock"?drawRock(Ro,c0.x,c0.y):drawScissors(Ro,c0.x,c0.y)})};let h0,E0=null;const C0=D0=>{E0||(E0=D0);const N0=(D0-E0)/1e3,e0=d-N0;if(h(Math.max(e0,0).toFixed(2)),jr){window.cancelAnimationFrame(h0);return}if(e0<=0){cancelAnimationFrame(h0),qr(!1),Lr(calculateWinner(o.current));return}s0(),h0=requestAnimationFrame(C0)};return h0=requestAnimationFrame(C0),()=>{window.cancelAnimationFrame(h0)}},[ir,jr]),jsxRuntimeExports.jsxs(Page,{name:"Canvas Game (Rock, Paper, Scissors)",children:[jsxRuntimeExports.jsx("audio",{src:"/sounds/impact.mp3",ref:i,style:{display:"none"}}),jsxRuntimeExports.jsx("div",{className:"container mx-auto text-center my-10",children:jsxRuntimeExports.jsxs("ul",{className:"list-none space-y-4",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("label",{className:"inline-block text-sm mr-2",children:"Run For (s)"}),jsxRuntimeExports.jsx("input",{type:"number",disabled:ir,value:d,onChange:No=>{const Ro=parseInt(No.target.value);et(Ro),h(Ro)},className:"grow input input-sm",placeholder:"Daisy"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"inline-block text-sm mr-2",children:"Number of Elements"}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-2",children:jsxRuntimeExports.jsx("input",{disabled:ir,min:10,step:"0",max:"50",type:"range",value:c,className:"range input-sm",onChange:No=>{const Ro=parseInt(No.target.value);s(Ro),g(Ro),Ht(Ro),or(Ro)}})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col-reverse md:flex-row md:items-center",children:[jsxRuntimeExports.jsx("div",{className:"justify-self-end w-52 md:w-full",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("table",{className:"table",children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"text-right",children:"Rock Count"}),jsxRuntimeExports.jsx("td",{children:b})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"text-right",children:"Paper Count"}),jsxRuntimeExports.jsx("td",{children:jt})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"text-right",children:"Scissors Count"}),jsxRuntimeExports.jsx("td",{children:Kt})]})]})}),jr&&jsxRuntimeExports.jsxs("div",{children:["Winner: ",jr]}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary mt-4",onClick:xn,children:"Reset Game"})]})}),jsxRuntimeExports.jsx("div",{className:"justify-self-start w-full md:w-1/2",children:jsxRuntimeExports.jsx("canvas",{ref:a,width:e?"auto":600,height:e?"auto":400,style:{objectFit:"contain"},className:"mx-auto block border border-black rounded-lg bg-white"})})]}),jsxRuntimeExports.jsx("div",{className:"flex mt-4",children:jsxRuntimeExports.jsxs("h3",{children:["Remaining Time: ",$t]})}),jsxRuntimeExports.jsx("div",{className:"text-center p-10",children:jsxRuntimeExports.jsx("a",{className:"underline",target:"blank",href:"https://www.instagram.com/p/C48bvLiIXM0/",children:"Based on this"})})]})},githubBaseUrl="https://github.com/emersondemetrio/emersondemetrio.github.io/blob/main/src",experiments=[{title:"Remove Background",description:"Remove background from images ",link:"/labs/background",repo:`${githubBaseUrl}/pages/remove-background/remove-background.tsx`},{title:"Canvas Game",description:"Simple game using canvas ",link:"/labs/game",repo:`${githubBaseUrl}/pages/canvas-game/canvas-game.tsx`},{title:"Weather App",description:"Weather App ",link:"/labs/weather",repo:`${githubBaseUrl}/pages/weather-app/weather-app.tsx`},{title:"Code Pens",description:"Code Pens  ",link:"/labs/code-pen",repo:`${githubBaseUrl}/pages/code-pen/code-pen.tsx`},{title:"Countdown",description:"Countdown ",link:"/labs/countdown",repo:`${githubBaseUrl}/pages/countdown/countdown.tsx`},{title:"Camera",description:"Camera ",link:"/labs/camera",repo:`${githubBaseUrl}/pages/camera/camera.tsx`}],Labs=()=>jsxRuntimeExports.jsx(Page,{name:"Labs",description:"Some experiments I've been working on",children:jsxRuntimeExports.jsx("div",{className:"md:grid md:grid-cols-4 md:gap-4 flex flex-col items-center",children:experiments.map(e=>jsxRuntimeExports.jsx("div",{className:"md:mb-0 mb-10 w-[350px] bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center pt-4 pb-10",children:[jsxRuntimeExports.jsx("h5",{className:"mb-1 text-xl font-medium text-gray-900 dark:text-white",children:e.title}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.description}),jsxRuntimeExports.jsxs("div",{className:"flex mt-4 md:mt-6",children:[jsxRuntimeExports.jsx(Link,{to:e.link,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"View"}),jsxRuntimeExports.jsx(Link,{to:e.repo,className:"py-2 px-4 ms-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700",children:"Code"})]})]})},e.title))})}),resume$1="",resume=new Map;reverseRange(2008,2024).map(e=>{resume.set(e,{experiences:[{year:e,title:"Software Engineer",description:`Developed software for the company.
Developed software for the company.
Developed software for the company.
Developed software for the company.`}],education:[{year:e,title:"Computer Science",description:"Learned computer science."}]})});const Bullet=()=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-5 w-5",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})}),Resume=()=>jsxRuntimeExports.jsx(Page,{name:"About Me (Under construction)",children:jsxRuntimeExports.jsx(Toggle,{title:"Show progress so far",children:jsxRuntimeExports.jsx("ul",{className:"timeline timeline-snap-icon max-md:timeline-compact timeline-vertical",children:Array.from(resume).map(([e,i],a)=>{const o=a%2===0?"timeline-start md:text-end":"timeline-end";return i.experiences.map((c,s)=>jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("div",{className:"timeline-middle",children:jsxRuntimeExports.jsx(Bullet,{})}),jsxRuntimeExports.jsxs("div",{className:`${o} mb-10`,children:[jsxRuntimeExports.jsx("time",{className:"font-mono",children:e}),jsxRuntimeExports.jsx("div",{className:"text-lg font-black",children:c.title}),c.description]}),jsxRuntimeExports.jsx("hr",{})]},s))})})})}),appRoutes=[{label:"Home",link:"/"},{label:"Labs ",link:"/labs"},{label:"About",link:"/about"},{label:"Blog",link:"/blog"}],Navbar=()=>{const e=window.screen.width,i=useIsMobile(),[a,o]=reactExports.useState(!i&&e>1024);return jsxRuntimeExports.jsxs("nav",{id:"header",className:"sticky w-full z-30 top-0 text-white bg-black",children:[jsxRuntimeExports.jsxs("div",{className:"w-full container mx-auto flex flex-wrap items-center justify-between mt-0 py-2 md:px-0 pl-6",children:[jsxRuntimeExports.jsx("div",{className:"items-center",children:jsxRuntimeExports.jsx(Link,{className:"text-white no-underline hover:no-underline font-bold text-1xl",to:"/",children:i?"~/":"emerson.run"})}),jsxRuntimeExports.jsx("div",{className:"block lg:hidden pr-4",children:jsxRuntimeExports.jsx("button",{type:"button",id:"nav-toggle",onClick:()=>o(!a),className:"flex items-center p-1 text-gray-800 hover:text-gray-900 focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out",children:jsxRuntimeExports.jsxs("svg",{className:"fill-current h-6 w-6",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{background:"#fff"},children:[jsxRuntimeExports.jsx("title",{children:"Menu"}),jsxRuntimeExports.jsx("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),jsxRuntimeExports.jsx("div",{style:{height:i?"auto":80},className:"w-full flex-grow lg:flex lg:items-center lg:w-auto  mt-2 lg:mt-0 lg:bg-transparent text-black p-4 lg:p-0 z-20"+(a?" block":" hidden"),id:"nav-content",children:jsxRuntimeExports.jsx("ul",{className:"list-reset lg:flex justify-end flex-1 items-center",children:appRoutes.map((c,s)=>jsxRuntimeExports.jsx("li",{className:"mr-3",children:jsxRuntimeExports.jsx(Link,{to:c.link,className:"inline-block text-white no-underline hover:text-white-800 hover:text-underline py-2 px-4",onClick:()=>o(!1),children:c.label})},s))})})]}),jsxRuntimeExports.jsx("hr",{className:"border-b border-gray-100 opacity-25 my-0 py-0"})]})},API_KEY="44c00948576d44c58db175549221303",BASE_URL="https://api.weatherapi.com/v1/current.json",DEFAULT_PLACE="Florianpolis, Santa Catarina, Brazil",CACHE_KEY="weather-app-cache",fetchJson=async(e,i)=>{try{return await fetch(e,i).then(a=>a.json())}catch(a){return{error:a}}},getSearchString=e=>`${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(e||DEFAULT_PLACE)}&aqi=yes`,fetchWeather=async e=>{const i=getSearchString(e);return await fetchJson(i,{method:"GET",headers:{"Content-Type":"application/json"}})},useWeather=e=>{const[i,a]=reactExports.useState(!0),[o,c]=reactExports.useState(null),[s,d]=reactExports.useState(null),{get:et,set:$t,createItemKey:h}=useCache(CACHE_KEY),b=async(g,jt)=>{if(a(!0),!jt){const Ht=h(g,new Date().getTime()),Kt=et(Ht);if(Kt){const or={...Kt,source:"cache"};c(or),a(!1);return}}fetchWeather(g).then(Ht=>{if(!Ht.error){c({...Ht,source:"api"});const Kt=h(g,new Date().getTime());$t(Kt,Ht)}a(!1)}).catch(Ht=>{d(Ht),a(!1)})};return reactExports.useEffect(()=>{b(e,!1)},[e]),{data:o,isLoading:i,error:s,refetch:g=>b(g,!0)}};function toDate(e){const i=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&i==="[object Date]"?new e.constructor(+e):typeof e=="number"||i==="[object Number]"||typeof e=="string"||i==="[object String]"?new Date(e):new Date(NaN)}function constructFrom(e,i){return e instanceof Date?new e.constructor(i):new Date(i)}function addDays(e,i){const a=toDate(e);return isNaN(i)?constructFrom(e,NaN):(i&&a.setDate(a.getDate()+i),a)}function addMonths(e,i){const a=toDate(e);if(isNaN(i))return constructFrom(e,NaN);if(!i)return a;const o=a.getDate(),c=constructFrom(e,a.getTime());c.setMonth(a.getMonth()+i+1,0);const s=c.getDate();return o>=s?c:(a.setFullYear(c.getFullYear(),c.getMonth(),o),a)}const millisecondsInWeek=6048e5,millisecondsInDay=864e5;let defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfWeek(e,i){var et,$t,h,b;const a=getDefaultOptions(),o=(i==null?void 0:i.weekStartsOn)??(($t=(et=i==null?void 0:i.locale)==null?void 0:et.options)==null?void 0:$t.weekStartsOn)??a.weekStartsOn??((b=(h=a.locale)==null?void 0:h.options)==null?void 0:b.weekStartsOn)??0,c=toDate(e),s=c.getDay(),d=(s<o?7:0)+s-o;return c.setDate(c.getDate()-d),c.setHours(0,0,0,0),c}function startOfISOWeek(e){return startOfWeek(e,{weekStartsOn:1})}function getISOWeekYear(e){const i=toDate(e),a=i.getFullYear(),o=constructFrom(e,0);o.setFullYear(a+1,0,4),o.setHours(0,0,0,0);const c=startOfISOWeek(o),s=constructFrom(e,0);s.setFullYear(a,0,4),s.setHours(0,0,0,0);const d=startOfISOWeek(s);return i.getTime()>=c.getTime()?a+1:i.getTime()>=d.getTime()?a:a-1}function startOfDay(e){const i=toDate(e);return i.setHours(0,0,0,0),i}function getTimezoneOffsetInMilliseconds(e){const i=toDate(e),a=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return a.setUTCFullYear(i.getFullYear()),+e-+a}function differenceInCalendarDays(e,i){const a=startOfDay(e),o=startOfDay(i),c=+a-getTimezoneOffsetInMilliseconds(a),s=+o-getTimezoneOffsetInMilliseconds(o);return Math.round((c-s)/millisecondsInDay)}function startOfISOWeekYear(e){const i=getISOWeekYear(e),a=constructFrom(e,0);return a.setFullYear(i,0,4),a.setHours(0,0,0,0),startOfISOWeek(a)}function addWeeks(e,i){const a=i*7;return addDays(e,a)}function addYears(e,i){return addMonths(e,i*12)}function max(e){let i;return e.forEach(function(a){const o=toDate(a);(i===void 0||i<o||isNaN(Number(o)))&&(i=o)}),i||new Date(NaN)}function min(e){let i;return e.forEach(a=>{const o=toDate(a);(!i||i>o||isNaN(+o))&&(i=o)}),i||new Date(NaN)}function isSameDay(e,i){const a=startOfDay(e),o=startOfDay(i);return+a==+o}function isDate(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function isValid$1(e){if(!isDate(e)&&typeof e!="number")return!1;const i=toDate(e);return!isNaN(Number(i))}function differenceInCalendarMonths(e,i){const a=toDate(e),o=toDate(i),c=a.getFullYear()-o.getFullYear(),s=a.getMonth()-o.getMonth();return c*12+s}function differenceInCalendarWeeks(e,i,a){const o=startOfWeek(e,a),c=startOfWeek(i,a),s=+o-getTimezoneOffsetInMilliseconds(o),d=+c-getTimezoneOffsetInMilliseconds(c);return Math.round((s-d)/millisecondsInWeek)}function endOfMonth(e){const i=toDate(e),a=i.getMonth();return i.setFullYear(i.getFullYear(),a+1,0),i.setHours(23,59,59,999),i}function startOfMonth(e){const i=toDate(e);return i.setDate(1),i.setHours(0,0,0,0),i}function startOfYear(e){const i=toDate(e),a=constructFrom(e,0);return a.setFullYear(i.getFullYear(),0,1),a.setHours(0,0,0,0),a}function endOfWeek(e,i){var et,$t,h,b;const a=getDefaultOptions(),o=(i==null?void 0:i.weekStartsOn)??(($t=(et=i==null?void 0:i.locale)==null?void 0:et.options)==null?void 0:$t.weekStartsOn)??a.weekStartsOn??((b=(h=a.locale)==null?void 0:h.options)==null?void 0:b.weekStartsOn)??0,c=toDate(e),s=c.getDay(),d=(s<o?-7:0)+6-(s-o);return c.setDate(c.getDate()+d),c.setHours(23,59,59,999),c}function endOfISOWeek(e){return endOfWeek(e,{weekStartsOn:1})}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(e,i,a)=>{let o;const c=formatDistanceLocale[e];return typeof c=="string"?o=c:i===1?o=c.one:o=c.other.replace("{{count}}",i.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+o:o+" ago":o};function buildFormatLongFn(e){return(i={})=>{const a=i.width?String(i.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(e,i,a,o)=>formatRelativeLocale[e];function buildLocalizeFn(e){return(i,a)=>{const o=a!=null&&a.context?String(a.context):"standalone";let c;if(o==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,et=a!=null&&a.width?String(a.width):d;c=e.formattingValues[et]||e.formattingValues[d]}else{const d=e.defaultWidth,et=a!=null&&a.width?String(a.width):e.defaultWidth;c=e.values[et]||e.values[d]}const s=e.argumentCallback?e.argumentCallback(i):i;return c[s]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(e,i)=>{const a=Number(e),o=a%100;if(o>20||o<10)switch(o%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:e=>e-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(e){return(i,a={})=>{const o=a.width,c=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],s=i.match(c);if(!s)return null;const d=s[0],et=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth],$t=Array.isArray(et)?findIndex(et,g=>g.test(d)):findKey(et,g=>g.test(d));let h;h=e.valueCallback?e.valueCallback($t):$t,h=a.valueCallback?a.valueCallback(h):h;const b=i.slice(d.length);return{value:h,rest:b}}}function findKey(e,i){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&i(e[a]))return a}function findIndex(e,i){for(let a=0;a<e.length;a++)if(i(e[a]))return a}function buildMatchPatternFn(e){return(i,a={})=>{const o=i.match(e.matchPattern);if(!o)return null;const c=o[0],s=i.match(e.parsePattern);if(!s)return null;let d=e.valueCallback?e.valueCallback(s[0]):s[0];d=a.valueCallback?a.valueCallback(d):d;const et=i.slice(c.length);return{value:d,rest:et}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:e=>parseInt(e,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:e=>e+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getDayOfYear(e){const i=toDate(e);return differenceInCalendarDays(i,startOfYear(i))+1}function getISOWeek(e){const i=toDate(e),a=+startOfISOWeek(i)-+startOfISOWeekYear(i);return Math.round(a/millisecondsInWeek)+1}function getWeekYear(e,i){var b,g,jt,Ht;const a=toDate(e),o=a.getFullYear(),c=getDefaultOptions(),s=(i==null?void 0:i.firstWeekContainsDate)??((g=(b=i==null?void 0:i.locale)==null?void 0:b.options)==null?void 0:g.firstWeekContainsDate)??c.firstWeekContainsDate??((Ht=(jt=c.locale)==null?void 0:jt.options)==null?void 0:Ht.firstWeekContainsDate)??1,d=constructFrom(e,0);d.setFullYear(o+1,0,s),d.setHours(0,0,0,0);const et=startOfWeek(d,i),$t=constructFrom(e,0);$t.setFullYear(o,0,s),$t.setHours(0,0,0,0);const h=startOfWeek($t,i);return a.getTime()>=et.getTime()?o+1:a.getTime()>=h.getTime()?o:o-1}function startOfWeekYear(e,i){var et,$t,h,b;const a=getDefaultOptions(),o=(i==null?void 0:i.firstWeekContainsDate)??(($t=(et=i==null?void 0:i.locale)==null?void 0:et.options)==null?void 0:$t.firstWeekContainsDate)??a.firstWeekContainsDate??((b=(h=a.locale)==null?void 0:h.options)==null?void 0:b.firstWeekContainsDate)??1,c=getWeekYear(e,i),s=constructFrom(e,0);return s.setFullYear(c,0,o),s.setHours(0,0,0,0),startOfWeek(s,i)}function getWeek(e,i){const a=toDate(e),o=+startOfWeek(a,i)-+startOfWeekYear(a,i);return Math.round(o/millisecondsInWeek)+1}function addLeadingZeros(e,i){const a=e<0?"-":"",o=Math.abs(e).toString().padStart(i,"0");return a+o}const lightFormatters={y(e,i){const a=e.getFullYear(),o=a>0?a:1-a;return addLeadingZeros(i==="yy"?o%100:o,i.length)},M(e,i){const a=e.getMonth();return i==="M"?String(a+1):addLeadingZeros(a+1,2)},d(e,i){return addLeadingZeros(e.getDate(),i.length)},a(e,i){const a=e.getHours()/12>=1?"pm":"am";switch(i){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(e,i){return addLeadingZeros(e.getHours()%12||12,i.length)},H(e,i){return addLeadingZeros(e.getHours(),i.length)},m(e,i){return addLeadingZeros(e.getMinutes(),i.length)},s(e,i){return addLeadingZeros(e.getSeconds(),i.length)},S(e,i){const a=i.length,o=e.getMilliseconds(),c=Math.trunc(o*Math.pow(10,a-3));return addLeadingZeros(c,i.length)}},dayPeriodEnum={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters$1={G:function(e,i,a){const o=e.getFullYear()>0?1:0;switch(i){case"G":case"GG":case"GGG":return a.era(o,{width:"abbreviated"});case"GGGGG":return a.era(o,{width:"narrow"});case"GGGG":default:return a.era(o,{width:"wide"})}},y:function(e,i,a){if(i==="yo"){const o=e.getFullYear(),c=o>0?o:1-o;return a.ordinalNumber(c,{unit:"year"})}return lightFormatters.y(e,i)},Y:function(e,i,a,o){const c=getWeekYear(e,o),s=c>0?c:1-c;if(i==="YY"){const d=s%100;return addLeadingZeros(d,2)}return i==="Yo"?a.ordinalNumber(s,{unit:"year"}):addLeadingZeros(s,i.length)},R:function(e,i){const a=getISOWeekYear(e);return addLeadingZeros(a,i.length)},u:function(e,i){const a=e.getFullYear();return addLeadingZeros(a,i.length)},Q:function(e,i,a){const o=Math.ceil((e.getMonth()+1)/3);switch(i){case"Q":return String(o);case"QQ":return addLeadingZeros(o,2);case"Qo":return a.ordinalNumber(o,{unit:"quarter"});case"QQQ":return a.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(o,{width:"wide",context:"formatting"})}},q:function(e,i,a){const o=Math.ceil((e.getMonth()+1)/3);switch(i){case"q":return String(o);case"qq":return addLeadingZeros(o,2);case"qo":return a.ordinalNumber(o,{unit:"quarter"});case"qqq":return a.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(o,{width:"wide",context:"standalone"})}},M:function(e,i,a){const o=e.getMonth();switch(i){case"M":case"MM":return lightFormatters.M(e,i);case"Mo":return a.ordinalNumber(o+1,{unit:"month"});case"MMM":return a.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(o,{width:"wide",context:"formatting"})}},L:function(e,i,a){const o=e.getMonth();switch(i){case"L":return String(o+1);case"LL":return addLeadingZeros(o+1,2);case"Lo":return a.ordinalNumber(o+1,{unit:"month"});case"LLL":return a.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(o,{width:"wide",context:"standalone"})}},w:function(e,i,a,o){const c=getWeek(e,o);return i==="wo"?a.ordinalNumber(c,{unit:"week"}):addLeadingZeros(c,i.length)},I:function(e,i,a){const o=getISOWeek(e);return i==="Io"?a.ordinalNumber(o,{unit:"week"}):addLeadingZeros(o,i.length)},d:function(e,i,a){return i==="do"?a.ordinalNumber(e.getDate(),{unit:"date"}):lightFormatters.d(e,i)},D:function(e,i,a){const o=getDayOfYear(e);return i==="Do"?a.ordinalNumber(o,{unit:"dayOfYear"}):addLeadingZeros(o,i.length)},E:function(e,i,a){const o=e.getDay();switch(i){case"E":case"EE":case"EEE":return a.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(o,{width:"short",context:"formatting"});case"EEEE":default:return a.day(o,{width:"wide",context:"formatting"})}},e:function(e,i,a,o){const c=e.getDay(),s=(c-o.weekStartsOn+8)%7||7;switch(i){case"e":return String(s);case"ee":return addLeadingZeros(s,2);case"eo":return a.ordinalNumber(s,{unit:"day"});case"eee":return a.day(c,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(c,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(c,{width:"short",context:"formatting"});case"eeee":default:return a.day(c,{width:"wide",context:"formatting"})}},c:function(e,i,a,o){const c=e.getDay(),s=(c-o.weekStartsOn+8)%7||7;switch(i){case"c":return String(s);case"cc":return addLeadingZeros(s,i.length);case"co":return a.ordinalNumber(s,{unit:"day"});case"ccc":return a.day(c,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(c,{width:"narrow",context:"standalone"});case"cccccc":return a.day(c,{width:"short",context:"standalone"});case"cccc":default:return a.day(c,{width:"wide",context:"standalone"})}},i:function(e,i,a){const o=e.getDay(),c=o===0?7:o;switch(i){case"i":return String(c);case"ii":return addLeadingZeros(c,i.length);case"io":return a.ordinalNumber(c,{unit:"day"});case"iii":return a.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(o,{width:"short",context:"formatting"});case"iiii":default:return a.day(o,{width:"wide",context:"formatting"})}},a:function(e,i,a){const c=e.getHours()/12>=1?"pm":"am";switch(i){case"a":case"aa":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(c,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(c,{width:"wide",context:"formatting"})}},b:function(e,i,a){const o=e.getHours();let c;switch(o===12?c=dayPeriodEnum.noon:o===0?c=dayPeriodEnum.midnight:c=o/12>=1?"pm":"am",i){case"b":case"bb":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(c,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(c,{width:"wide",context:"formatting"})}},B:function(e,i,a){const o=e.getHours();let c;switch(o>=17?c=dayPeriodEnum.evening:o>=12?c=dayPeriodEnum.afternoon:o>=4?c=dayPeriodEnum.morning:c=dayPeriodEnum.night,i){case"B":case"BB":case"BBB":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(c,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(c,{width:"wide",context:"formatting"})}},h:function(e,i,a){if(i==="ho"){let o=e.getHours()%12;return o===0&&(o=12),a.ordinalNumber(o,{unit:"hour"})}return lightFormatters.h(e,i)},H:function(e,i,a){return i==="Ho"?a.ordinalNumber(e.getHours(),{unit:"hour"}):lightFormatters.H(e,i)},K:function(e,i,a){const o=e.getHours()%12;return i==="Ko"?a.ordinalNumber(o,{unit:"hour"}):addLeadingZeros(o,i.length)},k:function(e,i,a){let o=e.getHours();return o===0&&(o=24),i==="ko"?a.ordinalNumber(o,{unit:"hour"}):addLeadingZeros(o,i.length)},m:function(e,i,a){return i==="mo"?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):lightFormatters.m(e,i)},s:function(e,i,a){return i==="so"?a.ordinalNumber(e.getSeconds(),{unit:"second"}):lightFormatters.s(e,i)},S:function(e,i){return lightFormatters.S(e,i)},X:function(e,i,a){const o=e.getTimezoneOffset();if(o===0)return"Z";switch(i){case"X":return formatTimezoneWithOptionalMinutes(o);case"XXXX":case"XX":return formatTimezone(o);case"XXXXX":case"XXX":default:return formatTimezone(o,":")}},x:function(e,i,a){const o=e.getTimezoneOffset();switch(i){case"x":return formatTimezoneWithOptionalMinutes(o);case"xxxx":case"xx":return formatTimezone(o);case"xxxxx":case"xxx":default:return formatTimezone(o,":")}},O:function(e,i,a){const o=e.getTimezoneOffset();switch(i){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(o,":");case"OOOO":default:return"GMT"+formatTimezone(o,":")}},z:function(e,i,a){const o=e.getTimezoneOffset();switch(i){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(o,":");case"zzzz":default:return"GMT"+formatTimezone(o,":")}},t:function(e,i,a){const o=Math.trunc(e.getTime()/1e3);return addLeadingZeros(o,i.length)},T:function(e,i,a){const o=e.getTime();return addLeadingZeros(o,i.length)}};function formatTimezoneShort(e,i=""){const a=e>0?"-":"+",o=Math.abs(e),c=Math.trunc(o/60),s=o%60;return s===0?a+String(c):a+String(c)+i+addLeadingZeros(s,2)}function formatTimezoneWithOptionalMinutes(e,i){return e%60===0?(e>0?"-":"+")+addLeadingZeros(Math.abs(e)/60,2):formatTimezone(e,i)}function formatTimezone(e,i=""){const a=e>0?"-":"+",o=Math.abs(e),c=addLeadingZeros(Math.trunc(o/60),2),s=addLeadingZeros(o%60,2);return a+c+i+s}const dateLongFormatter=(e,i)=>{switch(e){case"P":return i.date({width:"short"});case"PP":return i.date({width:"medium"});case"PPP":return i.date({width:"long"});case"PPPP":default:return i.date({width:"full"})}},timeLongFormatter=(e,i)=>{switch(e){case"p":return i.time({width:"short"});case"pp":return i.time({width:"medium"});case"ppp":return i.time({width:"long"});case"pppp":default:return i.time({width:"full"})}},dateTimeLongFormatter=(e,i)=>{const a=e.match(/(P+)(p+)?/)||[],o=a[1],c=a[2];if(!c)return dateLongFormatter(e,i);let s;switch(o){case"P":s=i.dateTime({width:"short"});break;case"PP":s=i.dateTime({width:"medium"});break;case"PPP":s=i.dateTime({width:"long"});break;case"PPPP":default:s=i.dateTime({width:"full"});break}return s.replace("{{date}}",dateLongFormatter(o,i)).replace("{{time}}",timeLongFormatter(c,i))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(e){return dayOfYearTokenRE.test(e)}function isProtectedWeekYearToken(e){return weekYearTokenRE.test(e)}function warnOrThrowProtectedError(e,i,a){const o=message(e,i,a);if(console.warn(o),throwTokens.includes(e))throw new RangeError(o)}function message(e,i,a){const o=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${i}\`) for formatting ${o} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(e,i,a){var b,g,jt,Ht,Kt,or,jr,Lr;const o=getDefaultOptions(),c=(a==null?void 0:a.locale)??o.locale??enUS,s=(a==null?void 0:a.firstWeekContainsDate)??((g=(b=a==null?void 0:a.locale)==null?void 0:b.options)==null?void 0:g.firstWeekContainsDate)??o.firstWeekContainsDate??((Ht=(jt=o.locale)==null?void 0:jt.options)==null?void 0:Ht.firstWeekContainsDate)??1,d=(a==null?void 0:a.weekStartsOn)??((or=(Kt=a==null?void 0:a.locale)==null?void 0:Kt.options)==null?void 0:or.weekStartsOn)??o.weekStartsOn??((Lr=(jr=o.locale)==null?void 0:jr.options)==null?void 0:Lr.weekStartsOn)??0,et=toDate(e);if(!isValid$1(et))throw new RangeError("Invalid time value");let $t=i.match(longFormattingTokensRegExp).map(ir=>{const qr=ir[0];if(qr==="p"||qr==="P"){const vn=longFormatters[qr];return vn(ir,c.formatLong)}return ir}).join("").match(formattingTokensRegExp).map(ir=>{if(ir==="''")return{isToken:!1,value:"'"};const qr=ir[0];if(qr==="'")return{isToken:!1,value:cleanEscapedString(ir)};if(formatters$1[qr])return{isToken:!0,value:ir};if(qr.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+qr+"`");return{isToken:!1,value:ir}});c.localize.preprocessor&&($t=c.localize.preprocessor(et,$t));const h={firstWeekContainsDate:s,weekStartsOn:d,locale:c};return $t.map(ir=>{if(!ir.isToken)return ir.value;const qr=ir.value;(!(a!=null&&a.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(qr)||!(a!=null&&a.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(qr))&&warnOrThrowProtectedError(qr,i,String(e));const vn=formatters$1[qr[0]];return vn(et,qr,c.localize,h)}).join("")}function cleanEscapedString(e){const i=e.match(escapedStringRegExp);return i?i[1].replace(doubleQuoteRegExp,"'"):e}function getDaysInMonth(e){const i=toDate(e),a=i.getFullYear(),o=i.getMonth(),c=constructFrom(e,0);return c.setFullYear(a,o+1,0),c.setHours(0,0,0,0),c.getDate()}function getUnixTime(e){return Math.trunc(+toDate(e)/1e3)}function lastDayOfMonth(e){const i=toDate(e),a=i.getMonth();return i.setFullYear(i.getFullYear(),a+1,0),i.setHours(0,0,0,0),i}function getWeeksInMonth(e,i){return differenceInCalendarWeeks(lastDayOfMonth(e),startOfMonth(e),i)+1}function isAfter(e,i){const a=toDate(e),o=toDate(i);return a.getTime()>o.getTime()}function isBefore(e,i){const a=toDate(e),o=toDate(i);return+a<+o}function isSameMonth(e,i){const a=toDate(e),o=toDate(i);return a.getFullYear()===o.getFullYear()&&a.getMonth()===o.getMonth()}function isSameYear(e,i){const a=toDate(e),o=toDate(i);return a.getFullYear()===o.getFullYear()}function subDays(e,i){return addDays(e,-i)}function setMonth(e,i){const a=toDate(e),o=a.getFullYear(),c=a.getDate(),s=constructFrom(e,0);s.setFullYear(o,i,15),s.setHours(0,0,0,0);const d=getDaysInMonth(s);return a.setMonth(i,Math.min(c,d)),a}function setYear(e,i){const a=toDate(e);return isNaN(+a)?constructFrom(e,NaN):(a.setFullYear(i),a)}const genericDateOptions={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1},formatDate=(e,i)=>new Intl.DateTimeFormat("pt-BR",{...genericDateOptions,timeZone:e}).format(i),isCurrentLocalTimeZone=e=>Intl.DateTimeFormat().resolvedOptions().timeZone===e,getNewsURL=e=>`https://www.google.com/search?q=${encodeURI(e)}&source=lnms&tbm=nws`,getForecastUrl=(e,i)=>`https://www.google.com/search?q=${encodeURI(`forecast ${e} in ${format(i,"yyyy/MMMM/dd")}`)}`,titleCase=e=>{if(e)return e.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")},Clock=({timeZone:e})=>{const[i,a]=reactExports.useState(formatDate(e,new Date)),o=reactExports.useRef(null);return reactExports.useEffect(()=>{const c=()=>{a(formatDate(e,new Date))};return o.current=window.setInterval(c,1e3),()=>{o.current!==null&&clearInterval(o.current)}},[e]),jsxRuntimeExports.jsx("div",{children:i})},Info=()=>jsxRuntimeExports.jsx("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 245.334 245.334",width:"30",height:"30",className:"update-button",children:jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("path",{d:"M122.667,0C55.028,0,0,55.028,0,122.667s55.027,122.667,122.666,122.667s122.667-55.028,122.667-122.667   S190.305,0,122.667,0z M122.667,215.334C71.57,215.334,30,173.764,30,122.667S71.57,30,122.667,30s92.667,41.57,92.667,92.667   S173.763,215.334,122.667,215.334z"}),jsxRuntimeExports.jsx("rect",{width:"30",x:"107.667",y:"109.167",height:"79"}),jsxRuntimeExports.jsx("rect",{width:"30",x:"107.667",y:"57.167",height:"29"})]})}),Reload=()=>jsxRuntimeExports.jsx("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 488.482 488.482",width:"30",height:"30",className:"update-button",children:jsxRuntimeExports.jsx("g",{children:jsxRuntimeExports.jsx("g",{children:jsxRuntimeExports.jsx("path",{d:`M456.382,359.741l4.1-6.6c1.2-2.3,2.4-4.6,3.5-6.9c2.3-4.7,4.8-9.2,6.8-14c3.7-9.7,7.7-19.3,10.1-29.4
            c3.1-10,4.4-20.3,6.1-30.6c0.7-5.2,0.7-10.4,1.1-15.6l0.4-7.8v-0.5v-0.2v-0.1v-1.1v-0.9l-0.1-1.8l-0.2-3.6l-0.6-14.3l-2.3-16.2
            c-0.4-2.7-0.7-5.5-1.3-8l-1.9-7.6c-1.4-5-2.4-10.2-4.2-15.1c-6.4-19.9-16.1-38.7-27.7-56c-12.1-17.1-26.6-32.3-42.7-45.6
            c-15.7-13-33.1-24.5-52-33.1c-7.5-3.2-15.3-6.1-23-8.8l-11.9-3.2c-4-1-7.9-2.3-12-2.8l-12.2-2l-6.1-1l-6.2-0.4l-12.3-0.7l-3.1-0.2
            h-0.8h-0.2h-1.2h-0.4l-1.4,0.1l-5.6,0.2l-11.3,0.5c-1.8,0-4,0.4-6.1,0.7l-6.4,0.9l-12.8,1.9l-12,3c-4,1.1-8.1,1.8-11.9,3.4
            l-11.6,4.2l-5.8,2.2l-5.6,2.7l-11.1,5.4c-58.8,30.5-101.2,89.3-112,153.5c-0.6,4.6-1.1,9.1-1.5,13.4c-0.4,4.3-0.8,8.5-0.5,12.5
            c0.1,2.4,0.2,4.6,0.4,6.9c-11.1-17.4-23.7-33.9-34-51.8c-0.8-1.4-5.2-1.7-7.7-1c-4.9,1.3-7.2,5.4-8.1,9.7
            c-2.9,14.3,0.3,27.3,6.4,38.6c11.5,21.3,22.1,43.2,35.8,63.2l0.3,0.5c0.5,0.7,1,1.4,1.7,2.1c7,7.6,18.9,8.1,26.6,1
            c4.9-4.5,9.6-9.2,14.1-14.2c3.1-2.3,6.2-4.5,9.2-6.9c19.1-15,37.5-30.9,52.7-50.1c4.3-5.5,5.5-12.7-1-19.1
            c-5.9-5.8-13.6-7.1-19.5-3.1c-10.6,7.2-21.3,14.3-30.6,23c-8.6,8-16.8,16.4-24.9,24.9c0.5-1.6,1-3.3,1.5-5.2
            c1.5-5.2,3-11.1,4.2-17.9c0.4-3.4,1.7-6.8,2.4-10.5c0.8-3.7,1.6-7.5,2.4-11.5c7-28.5,20.7-55.1,39.3-77.5
            c18.5-22.5,42.5-40,68.5-52.3c5.1-2.8,10.7-4.5,16.1-6.6c5.4-2.3,11-3.5,16.7-5.1c2.8-0.7,5.6-1.7,8.4-2.1l8.2-1.3l8.3-1.4
            l9.5-0.6c23.4-1.5,46.9,1.1,69.2,8.2c44.7,13.9,84.1,45.4,107.3,86.8l6,14.7c1.1,2.4,1.8,5,2.6,7.5l2.3,7.6
            c1.8,5,2.6,10.2,3.7,15.3l1.6,7.7c0.4,2.5,0.5,5,0.8,7.5l0.8,7.4c0.1,1.3,0.3,2.4,0.4,3.8l0.1,4.3l0.1,8.6l0.1,4.3v2.1v0.5v0.3
            v0.1c0,0.2,0-1.6,0-0.8l-0.1,1l-1.3,15.6c-0.5,5.2-1.8,10.3-2.6,15.4c-8.3,40.6-29.6,78.7-61.3,105.6
            c-15.7,13.6-33.6,24.5-52.9,32.2c-4.9,1.7-9.7,3.8-14.7,5.2l-15.1,3.9l-14.6,2.3c-2.2,0.5-5.2,0.6-8.1,0.8l-8.6,0.5l-4.3,0.2
            l-1.7,0.1h-0.4h-1l-7.8-0.2c-5.2-0.4-10.4-0.7-15.5-1.5c-10.3-1.4-20.4-3.7-30.3-6.9c-19.8-6.3-38.3-16.3-54.6-28.9
            c-2.9-2.3-7.1-4.6-10.9-6.4c-3.8-1.6-8.1-3.9-10.3-4.3c-4.6-1-5.7,1-4.5,5c0.6,1.9,1.7,4.4,3.3,7.1c1.6,2.6,3.6,5.5,6.1,8.5
            c16.3,20,40.6,38,70.1,48.8c14.7,5.4,30.6,9.1,47.1,10.4l6.2,0.4l1.5,0.1l0.8,0.1h0.4h0.2h0.8h2.9c3.9-0.1,7.8-0.1,11.8-0.2
            l5.9-0.1l6.4-0.8l12.9-1.7c40.2-7.1,78.4-25.4,108.8-53.2C432.182,393.241,445.882,377.541,456.382,359.741z`})})})}),openNews=e=>window.open(e),dateDiffInHours=e=>{const i=new Date,o=new Date(new Date().toLocaleString("en-US",{timeZone:e})).getTime()-i.getTime(),c=Math.round(o/(1e3*60*60));return c===0?"Same as local":`${c}h ${c>0?"ahead":"behind"}`},feelsLike=e=>{var a;let i="";return(a=e==null?void 0:e.condition)!=null&&a.text&&(i+=e.condition.text),e!=null&&e.temp_c&&(i+=`, ${e.temp_c}C`),e!=null&&e.feelslike_c&&(i+=`, Feels like ${e.feelslike_c}C`),i},Place=({name:e,timeZone:i,city:a,current:o})=>{var jr,Lr;const{data:c,isLoading:s,error:d,refetch:et}=useWeather(a),$t=window.innerWidth<768,h=$t?"flex-col":"flex-row",b=$t?"justify-items-start":"justify-between",g=$t?"w-full":"w-1/3",jt=$t?"mb-4":"mb-0",Ht=(...ir)=>ir.join(" "),Kt=c&&c.current&&!s&&!d,or=[`${$t?"h-full":"h-40"}`,"w-full","border-2","flex",h,b,`${$t?"p-10":"p-1"}`,"my-4","rounded-lg","items-center","bg-slate-600","shadow-lg",`${o?"border-amber-50":"border-transparent"}`].join(" ");return jsxRuntimeExports.jsxs("div",{className:or,children:[jsxRuntimeExports.jsx("div",{className:Ht("ml-2",g,jt),children:jsxRuntimeExports.jsxs("h3",{children:[e," ",s?"Loading...":""]})}),jsxRuntimeExports.jsxs("div",{className:Ht(g,jt,"flex-col flex justify-between"),children:[jsxRuntimeExports.jsx(Clock,{timeZone:i}),jsxRuntimeExports.jsxs("span",{children:[dateDiffInHours(i),o&&", Current"]})]}),!!d&&jsxRuntimeExports.jsxs("div",{className:Ht(g,jt),children:[jsxRuntimeExports.jsx("p",{children:"Unable to get weather info"}),jsxRuntimeExports.jsx("button",{style:{border:"solid 1px #ddd",padding:10},onClick:()=>et(a),children:"Try again"})]}),!Kt&&!d&&jsxRuntimeExports.jsx("div",{className:Ht(g,jt),children:jsxRuntimeExports.jsx("div",{className:"bg-slate-600 skeleton h-32 w-full"})}),Kt&&jsxRuntimeExports.jsxs("div",{className:Ht(g,jt,"p-4"),children:[jsxRuntimeExports.jsx("h3",{className:"text-gray-50 flex justify-start lg:justify-end md:justify-end",children:feelsLike(c.current)}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-center justify-end",children:[jsxRuntimeExports.jsx("div",{children:((Lr=(jr=c==null?void 0:c.current)==null?void 0:jr.condition)==null?void 0:Lr.icon)&&jsxRuntimeExports.jsx("img",{className:"condition-img",src:c.current.condition.icon,alt:c.current.condition.text})}),jsxRuntimeExports.jsxs("div",{className:"left-40 ml-5",children:[jsxRuntimeExports.jsx("button",{className:"btn btn-circle btn-info",disabled:s,onClick:()=>et(a),children:jsxRuntimeExports.jsx(Reload,{})}),jsxRuntimeExports.jsx("button",{className:"btn btn-circle btn-info",onClick:()=>openNews(getNewsURL(a)),children:jsxRuntimeExports.jsx(Info,{})})]})]})]})]})},Place$1=reactExports.memo(Place),places=[{name:"Florianpolis/Brazil",city:"Florianpolis, Santa Catarina, Brazil",timeZone:"America/Sao_Paulo"},{name:"Munich/Germany",city:"Munich, Germany",timeZone:"Europe/Berlin"},{name:"San Francisco/USA",city:"San Francisco, California, USA",timeZone:"America/Los_Angeles"},{name:"Lisbon/Portugal",city:"Lisbon, Portugal",timeZone:"Europe/Lisbon"},{name:"Dublin/Ireland",timeZone:"Europe/Dublin",city:"Dublin, Ireland"},{name:"Europe/Gothenburg",city:"Gothenburg, Sweden",timeZone:"Europe/Stockholm"}].map(e=>({...e,current:isCurrentLocalTimeZone(e.timeZone)})),WeatherApp=()=>{const e=useIsMobile();return jsxRuntimeExports.jsx(Page,{name:"Weather",withoutPadding:e,repo:REPOS.weather.url,children:jsxRuntimeExports.jsx("div",{className:"flex flex-col w-full",children:places.map(i=>reactExports.createElement(Place$1,{...i,key:i.timeZone}))})})},transformMap={:"a",:"a",:"o",:"e",:"c",:"a","":"?",o:"o",a:"a"},transform=e=>(transformMap[e]??e).toLowerCase(),to=(e,i="yellow")=>{if(e===" ")return"  ";if(e===".")return".";if(e==="?")return":question:";if(e==="!")return":exclamation:";const a=transform(e);return/[a-zA-Z]/.test(e)?`:alphabet-${i}-${a}:`:e},createSlackAlphabet=e=>e.split("").map(i=>to(i)).join(""),url2JSON=e=>{const i={source:e,props:{},keysList:[],valuesList:[]},a=e.split("?");return a.length>1&&a[1].split("&").forEach(c=>{const s=c.split("=");i.keysList.push(s[0]),i.valuesList.push(s[1]),i.props[s[0]]=decodeURIComponent(s[1])}),i},CodePen=()=>{const e=useIsMobile(),[i,a]=reactExports.useState(null),[o,c]=reactExports.useState(""),s=(d,et=100)=>{window.setTimeout(d,et)};return jsxRuntimeExports.jsx(Page,{name:"Code Pens",withoutPadding:e,repo:REPOS.codepen.url,className:"bg-gray-200 text-black",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{className:"w-full bg-grey-50 mt-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-black",children:"URL to JSON"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap -mx-3 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"w-full px-3",children:jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Paste URL",className:"appearance-none block w-full text-black border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",onChange:d=>a(url2JSON(d.target.value))})}),jsxRuntimeExports.jsxs("div",{className:"w-full px-3",children:[jsxRuntimeExports.jsx("label",{className:"block text-black text-sm font-bold mb-2",children:"Results"}),jsxRuntimeExports.jsx("textarea",{rows:10,placeholder:"Paste above ^",value:i?JSON.stringify(i,null,4):"",className:"appearance-none block w-full text-black border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",onChange:()=>{}})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-full bg-grey-50 mt-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-black",children:"Slacker"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap -mx-3 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"w-full px-3",children:jsxRuntimeExports.jsx("input",{placeholder:"Type Something",onChange:d=>s(()=>c(createSlackAlphabet(d.target.value))),type:"text",className:"appearance-none block w-full text-black border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"})}),jsxRuntimeExports.jsxs("div",{className:"w-full px-3",children:[jsxRuntimeExports.jsx("label",{className:"block text-black text-sm font-bold mb-2",children:"Results"}),jsxRuntimeExports.jsx("textarea",{placeholder:"Type above ^",rows:5,value:o,onChange:()=>{},className:"appearance-none block w-full text-black border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"})]})]})]})]})})},urlFriendlyRegex=/[^a-zA-Z0-9-, ]/g,replaceNonUrlFriendly=(e,i="")=>e.replace(urlFriendlyRegex,i);var __assign=function(){return __assign=Object.assign||function(i){for(var a,o=1,c=arguments.length;o<c;o++){a=arguments[o];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])}return i},__assign.apply(this,arguments)};function __rest(e,i){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&i.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)i.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(a[o[c]]=e[o[c]]);return a}function __spreadArray(e,i,a){if(a||arguments.length===2)for(var o=0,c=i.length,s;o<c;o++)(s||!(o in i))&&(s||(s=Array.prototype.slice.call(i,0,o)),s[o]=i[o]);return e.concat(s||Array.prototype.slice.call(i))}typeof SuppressedError=="function"&&SuppressedError;function isDayPickerMultiple(e){return e.mode==="multiple"}function isDayPickerRange(e){return e.mode==="range"}function isDayPickerSingle(e){return e.mode==="single"}var defaultClassNames={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function formatCaption(e,i){return format(e,"LLLL y",i)}function formatDay(e,i){return format(e,"d",i)}function formatMonthCaption(e,i){return format(e,"LLLL",i)}function formatWeekNumber(e){return"".concat(e)}function formatWeekdayName(e,i){return format(e,"cccccc",i)}function formatYearCaption(e,i){return format(e,"yyyy",i)}var formatters=Object.freeze({__proto__:null,formatCaption,formatDay,formatMonthCaption,formatWeekNumber,formatWeekdayName,formatYearCaption}),labelDay=function(e,i,a){return format(e,"do MMMM (EEEE)",a)},labelMonthDropdown=function(){return"Month: "},labelNext=function(){return"Go to next month"},labelPrevious=function(){return"Go to previous month"},labelWeekday=function(e,i){return format(e,"cccc",i)},labelWeekNumber=function(e){return"Week n. ".concat(e)},labelYearDropdown=function(){return"Year: "},labels=Object.freeze({__proto__:null,labelDay,labelMonthDropdown,labelNext,labelPrevious,labelWeekNumber,labelWeekday,labelYearDropdown});function getDefaultContextValues(){var e="buttons",i=defaultClassNames,a=enUS,o={},c={},s=1,d={},et=new Date;return{captionLayout:e,classNames:i,formatters,labels,locale:a,modifiersClassNames:o,modifiers:c,numberOfMonths:s,styles:d,today:et,mode:"default"}}function parseFromToProps(e){var i=e.fromYear,a=e.toYear,o=e.fromMonth,c=e.toMonth,s=e.fromDate,d=e.toDate;return o?s=startOfMonth(o):i&&(s=new Date(i,0,1)),c?d=endOfMonth(c):a&&(d=new Date(a,11,31)),{fromDate:s?startOfDay(s):void 0,toDate:d?startOfDay(d):void 0}}var DayPickerContext=reactExports.createContext(void 0);function DayPickerProvider(e){var i,a=e.initialProps,o=getDefaultContextValues(),c=parseFromToProps(a),s=c.fromDate,d=c.toDate,et=(i=a.captionLayout)!==null&&i!==void 0?i:o.captionLayout;et!=="buttons"&&(!s||!d)&&(et="buttons");var $t;(isDayPickerSingle(a)||isDayPickerMultiple(a)||isDayPickerRange(a))&&($t=a.onSelect);var h=__assign(__assign(__assign({},o),a),{captionLayout:et,classNames:__assign(__assign({},o.classNames),a.classNames),components:__assign({},a.components),formatters:__assign(__assign({},o.formatters),a.formatters),fromDate:s,labels:__assign(__assign({},o.labels),a.labels),mode:a.mode||o.mode,modifiers:__assign(__assign({},o.modifiers),a.modifiers),modifiersClassNames:__assign(__assign({},o.modifiersClassNames),a.modifiersClassNames),onSelect:$t,styles:__assign(__assign({},o.styles),a.styles),toDate:d});return jsxRuntimeExports.jsx(DayPickerContext.Provider,{value:h,children:e.children})}function useDayPicker(){var e=reactExports.useContext(DayPickerContext);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function CaptionLabel(e){var i=useDayPicker(),a=i.locale,o=i.classNames,c=i.styles,s=i.formatters.formatCaption;return jsxRuntimeExports.jsx("div",{className:o.caption_label,style:c.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:a})})}function IconDropdown(e){return jsxRuntimeExports.jsx("svg",__assign({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:jsxRuntimeExports.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Dropdown(e){var i,a,o=e.onChange,c=e.value,s=e.children,d=e.caption,et=e.className,$t=e.style,h=useDayPicker(),b=(a=(i=h.components)===null||i===void 0?void 0:i.IconDropdown)!==null&&a!==void 0?a:IconDropdown;return jsxRuntimeExports.jsxs("div",{className:et,style:$t,children:[jsxRuntimeExports.jsx("span",{className:h.classNames.vhidden,children:e["aria-label"]}),jsxRuntimeExports.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:h.classNames.dropdown,style:h.styles.dropdown,value:c,onChange:o,children:s}),jsxRuntimeExports.jsxs("div",{className:h.classNames.caption_label,style:h.styles.caption_label,"aria-hidden":"true",children:[d,jsxRuntimeExports.jsx(b,{className:h.classNames.dropdown_icon,style:h.styles.dropdown_icon})]})]})}function MonthsDropdown(e){var i,a=useDayPicker(),o=a.fromDate,c=a.toDate,s=a.styles,d=a.locale,et=a.formatters.formatMonthCaption,$t=a.classNames,h=a.components,b=a.labels.labelMonthDropdown;if(!o)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});if(!c)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});var g=[];if(isSameYear(o,c))for(var jt=startOfMonth(o),Ht=o.getMonth();Ht<=c.getMonth();Ht++)g.push(setMonth(jt,Ht));else for(var jt=startOfMonth(new Date),Ht=0;Ht<=11;Ht++)g.push(setMonth(jt,Ht));var Kt=function(jr){var Lr=Number(jr.target.value),ir=setMonth(startOfMonth(e.displayMonth),Lr);e.onChange(ir)},or=(i=h==null?void 0:h.Dropdown)!==null&&i!==void 0?i:Dropdown;return jsxRuntimeExports.jsx(or,{name:"months","aria-label":b(),className:$t.dropdown_month,style:s.dropdown_month,onChange:Kt,value:e.displayMonth.getMonth(),caption:et(e.displayMonth,{locale:d}),children:g.map(function(jr){return jsxRuntimeExports.jsx("option",{value:jr.getMonth(),children:et(jr,{locale:d})},jr.getMonth())})})}function YearsDropdown(e){var i,a=e.displayMonth,o=useDayPicker(),c=o.fromDate,s=o.toDate,d=o.locale,et=o.styles,$t=o.classNames,h=o.components,b=o.formatters.formatYearCaption,g=o.labels.labelYearDropdown,jt=[];if(!c)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});if(!s)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});for(var Ht=c.getFullYear(),Kt=s.getFullYear(),or=Ht;or<=Kt;or++)jt.push(setYear(startOfYear(new Date),or));var jr=function(ir){var qr=setYear(startOfMonth(a),Number(ir.target.value));e.onChange(qr)},Lr=(i=h==null?void 0:h.Dropdown)!==null&&i!==void 0?i:Dropdown;return jsxRuntimeExports.jsx(Lr,{name:"years","aria-label":g(),className:$t.dropdown_year,style:et.dropdown_year,onChange:jr,value:a.getFullYear(),caption:b(a,{locale:d}),children:jt.map(function(ir){return jsxRuntimeExports.jsx("option",{value:ir.getFullYear(),children:b(ir,{locale:d})},ir.getFullYear())})})}function useControlledValue(e,i){var a=reactExports.useState(e),o=a[0],c=a[1],s=i===void 0?o:i;return[s,c]}function getInitialMonth(e){var i=e.month,a=e.defaultMonth,o=e.today,c=i||a||o||new Date,s=e.toDate,d=e.fromDate,et=e.numberOfMonths,$t=et===void 0?1:et;if(s&&differenceInCalendarMonths(s,c)<0){var h=-1*($t-1);c=addMonths(s,h)}return d&&differenceInCalendarMonths(c,d)<0&&(c=d),startOfMonth(c)}function useNavigationState(){var e=useDayPicker(),i=getInitialMonth(e),a=useControlledValue(i,e.month),o=a[0],c=a[1],s=function(d){var et;if(!e.disableNavigation){var $t=startOfMonth(d);c($t),(et=e.onMonthChange)===null||et===void 0||et.call(e,$t)}};return[o,s]}function getDisplayMonths(e,i){for(var a=i.reverseMonths,o=i.numberOfMonths,c=startOfMonth(e),s=startOfMonth(addMonths(c,o)),d=differenceInCalendarMonths(s,c),et=[],$t=0;$t<d;$t++){var h=addMonths(c,$t);et.push(h)}return a&&(et=et.reverse()),et}function getNextMonth(e,i){if(!i.disableNavigation){var a=i.toDate,o=i.pagedNavigation,c=i.numberOfMonths,s=c===void 0?1:c,d=o?s:1,et=startOfMonth(e);if(!a)return addMonths(et,d);var $t=differenceInCalendarMonths(a,e);if(!($t<s))return addMonths(et,d)}}function getPreviousMonth(e,i){if(!i.disableNavigation){var a=i.fromDate,o=i.pagedNavigation,c=i.numberOfMonths,s=c===void 0?1:c,d=o?s:1,et=startOfMonth(e);if(!a)return addMonths(et,-d);var $t=differenceInCalendarMonths(et,a);if(!($t<=0))return addMonths(et,-d)}}var NavigationContext=reactExports.createContext(void 0);function NavigationProvider(e){var i=useDayPicker(),a=useNavigationState(),o=a[0],c=a[1],s=getDisplayMonths(o,i),d=getNextMonth(o,i),et=getPreviousMonth(o,i),$t=function(g){return s.some(function(jt){return isSameMonth(g,jt)})},h=function(g,jt){$t(g)||(jt&&isBefore(g,jt)?c(addMonths(g,1+i.numberOfMonths*-1)):c(g))},b={currentMonth:o,displayMonths:s,goToMonth:c,goToDate:h,previousMonth:et,nextMonth:d,isDateDisplayed:$t};return jsxRuntimeExports.jsx(NavigationContext.Provider,{value:b,children:e.children})}function useNavigation(){var e=reactExports.useContext(NavigationContext);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function CaptionDropdowns(e){var i,a=useDayPicker(),o=a.classNames,c=a.styles,s=a.components,d=useNavigation().goToMonth,et=function(b){d(addMonths(b,e.displayIndex?-e.displayIndex:0))},$t=(i=s==null?void 0:s.CaptionLabel)!==null&&i!==void 0?i:CaptionLabel,h=jsxRuntimeExports.jsx($t,{id:e.id,displayMonth:e.displayMonth});return jsxRuntimeExports.jsxs("div",{className:o.caption_dropdowns,style:c.caption_dropdowns,children:[jsxRuntimeExports.jsx("div",{className:o.vhidden,children:h}),jsxRuntimeExports.jsx(MonthsDropdown,{onChange:et,displayMonth:e.displayMonth}),jsxRuntimeExports.jsx(YearsDropdown,{onChange:et,displayMonth:e.displayMonth})]})}function IconLeft(e){return jsxRuntimeExports.jsx("svg",__assign({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:jsxRuntimeExports.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function IconRight(e){return jsxRuntimeExports.jsx("svg",__assign({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:jsxRuntimeExports.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Button=reactExports.forwardRef(function(e,i){var a=useDayPicker(),o=a.classNames,c=a.styles,s=[o.button_reset,o.button];e.className&&s.push(e.className);var d=s.join(" "),et=__assign(__assign({},c.button_reset),c.button);return e.style&&Object.assign(et,e.style),jsxRuntimeExports.jsx("button",__assign({},e,{ref:i,type:"button",className:d,style:et}))});function Navigation(e){var i,a,o=useDayPicker(),c=o.dir,s=o.locale,d=o.classNames,et=o.styles,$t=o.labels,h=$t.labelPrevious,b=$t.labelNext,g=o.components;if(!e.nextMonth&&!e.previousMonth)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});var jt=h(e.previousMonth,{locale:s}),Ht=[d.nav_button,d.nav_button_previous].join(" "),Kt=b(e.nextMonth,{locale:s}),or=[d.nav_button,d.nav_button_next].join(" "),jr=(i=g==null?void 0:g.IconRight)!==null&&i!==void 0?i:IconRight,Lr=(a=g==null?void 0:g.IconLeft)!==null&&a!==void 0?a:IconLeft;return jsxRuntimeExports.jsxs("div",{className:d.nav,style:et.nav,children:[!e.hidePrevious&&jsxRuntimeExports.jsx(Button,{name:"previous-month","aria-label":jt,className:Ht,style:et.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:c==="rtl"?jsxRuntimeExports.jsx(jr,{className:d.nav_icon,style:et.nav_icon}):jsxRuntimeExports.jsx(Lr,{className:d.nav_icon,style:et.nav_icon})}),!e.hideNext&&jsxRuntimeExports.jsx(Button,{name:"next-month","aria-label":Kt,className:or,style:et.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:c==="rtl"?jsxRuntimeExports.jsx(Lr,{className:d.nav_icon,style:et.nav_icon}):jsxRuntimeExports.jsx(jr,{className:d.nav_icon,style:et.nav_icon})})]})}function CaptionNavigation(e){var i=useDayPicker().numberOfMonths,a=useNavigation(),o=a.previousMonth,c=a.nextMonth,s=a.goToMonth,d=a.displayMonths,et=d.findIndex(function(Kt){return isSameMonth(e.displayMonth,Kt)}),$t=et===0,h=et===d.length-1,b=i>1&&($t||!h),g=i>1&&(h||!$t),jt=function(){o&&s(o)},Ht=function(){c&&s(c)};return jsxRuntimeExports.jsx(Navigation,{displayMonth:e.displayMonth,hideNext:b,hidePrevious:g,nextMonth:c,previousMonth:o,onPreviousClick:jt,onNextClick:Ht})}function Caption(e){var i,a=useDayPicker(),o=a.classNames,c=a.disableNavigation,s=a.styles,d=a.captionLayout,et=a.components,$t=(i=et==null?void 0:et.CaptionLabel)!==null&&i!==void 0?i:CaptionLabel,h;return c?h=jsxRuntimeExports.jsx($t,{id:e.id,displayMonth:e.displayMonth}):d==="dropdown"?h=jsxRuntimeExports.jsx(CaptionDropdowns,{displayMonth:e.displayMonth,id:e.id}):d==="dropdown-buttons"?h=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CaptionDropdowns,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),jsxRuntimeExports.jsx(CaptionNavigation,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):h=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx($t,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),jsxRuntimeExports.jsx(CaptionNavigation,{displayMonth:e.displayMonth,id:e.id})]}),jsxRuntimeExports.jsx("div",{className:o.caption,style:s.caption,children:h})}function Footer(e){var i=useDayPicker(),a=i.footer,o=i.styles,c=i.classNames.tfoot;return a?jsxRuntimeExports.jsx("tfoot",{className:c,style:o.tfoot,children:jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:8,children:a})})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function getWeekdays(e,i,a){for(var o=a?startOfISOWeek(new Date):startOfWeek(new Date,{locale:e,weekStartsOn:i}),c=[],s=0;s<7;s++){var d=addDays(o,s);c.push(d)}return c}function HeadRow(){var e=useDayPicker(),i=e.classNames,a=e.styles,o=e.showWeekNumber,c=e.locale,s=e.weekStartsOn,d=e.ISOWeek,et=e.formatters.formatWeekdayName,$t=e.labels.labelWeekday,h=getWeekdays(c,s,d);return jsxRuntimeExports.jsxs("tr",{style:a.head_row,className:i.head_row,children:[o&&jsxRuntimeExports.jsx("td",{style:a.head_cell,className:i.head_cell}),h.map(function(b,g){return jsxRuntimeExports.jsx("th",{scope:"col",className:i.head_cell,style:a.head_cell,"aria-label":$t(b,{locale:c}),children:et(b,{locale:c})},g)})]})}function Head(){var e,i=useDayPicker(),a=i.classNames,o=i.styles,c=i.components,s=(e=c==null?void 0:c.HeadRow)!==null&&e!==void 0?e:HeadRow;return jsxRuntimeExports.jsx("thead",{style:o.head,className:a.head,children:jsxRuntimeExports.jsx(s,{})})}function DayContent(e){var i=useDayPicker(),a=i.locale,o=i.formatters.formatDay;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o(e.date,{locale:a})})}var SelectMultipleContext=reactExports.createContext(void 0);function SelectMultipleProvider(e){if(!isDayPickerMultiple(e.initialProps)){var i={selected:void 0,modifiers:{disabled:[]}};return jsxRuntimeExports.jsx(SelectMultipleContext.Provider,{value:i,children:e.children})}return jsxRuntimeExports.jsx(SelectMultipleProviderInternal,{initialProps:e.initialProps,children:e.children})}function SelectMultipleProviderInternal(e){var i=e.initialProps,a=e.children,o=i.selected,c=i.min,s=i.max,d=function(h,b,g){var jt,Ht;(jt=i.onDayClick)===null||jt===void 0||jt.call(i,h,b,g);var Kt=!!(b.selected&&c&&(o==null?void 0:o.length)===c);if(!Kt){var or=!!(!b.selected&&s&&(o==null?void 0:o.length)===s);if(!or){var jr=o?__spreadArray([],o,!0):[];if(b.selected){var Lr=jr.findIndex(function(ir){return isSameDay(h,ir)});jr.splice(Lr,1)}else jr.push(h);(Ht=i.onSelect)===null||Ht===void 0||Ht.call(i,jr,h,b,g)}}},et={disabled:[]};o&&et.disabled.push(function(h){var b=s&&o.length>s-1,g=o.some(function(jt){return isSameDay(jt,h)});return!!(b&&!g)});var $t={selected:o,onDayClick:d,modifiers:et};return jsxRuntimeExports.jsx(SelectMultipleContext.Provider,{value:$t,children:a})}function useSelectMultiple(){var e=reactExports.useContext(SelectMultipleContext);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function addToRange(e,i){var a=i||{},o=a.from,c=a.to;return o&&c?isSameDay(c,e)&&isSameDay(o,e)?void 0:isSameDay(c,e)?{from:c,to:void 0}:isSameDay(o,e)?void 0:isAfter(o,e)?{from:e,to:c}:{from:o,to:e}:c?isAfter(e,c)?{from:c,to:e}:{from:e,to:c}:o?isBefore(e,o)?{from:e,to:o}:{from:o,to:e}:{from:e,to:void 0}}var SelectRangeContext=reactExports.createContext(void 0);function SelectRangeProvider(e){if(!isDayPickerRange(e.initialProps)){var i={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return jsxRuntimeExports.jsx(SelectRangeContext.Provider,{value:i,children:e.children})}return jsxRuntimeExports.jsx(SelectRangeProviderInternal,{initialProps:e.initialProps,children:e.children})}function SelectRangeProviderInternal(e){var i=e.initialProps,a=e.children,o=i.selected,c=o||{},s=c.from,d=c.to,et=i.min,$t=i.max,h=function(Ht,Kt,or){var jr,Lr;(jr=i.onDayClick)===null||jr===void 0||jr.call(i,Ht,Kt,or);var ir=addToRange(Ht,o);(Lr=i.onSelect)===null||Lr===void 0||Lr.call(i,ir,Ht,Kt,or)},b={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(b.range_start=[s],d?(b.range_end=[d],isSameDay(s,d)||(b.range_middle=[{after:s,before:d}])):b.range_end=[s]):d&&(b.range_start=[d],b.range_end=[d]),et&&(s&&!d&&b.disabled.push({after:subDays(s,et-1),before:addDays(s,et-1)}),s&&d&&b.disabled.push({after:s,before:addDays(s,et-1)}),!s&&d&&b.disabled.push({after:subDays(d,et-1),before:addDays(d,et-1)})),$t){if(s&&!d&&(b.disabled.push({before:addDays(s,-$t+1)}),b.disabled.push({after:addDays(s,$t-1)})),s&&d){var g=differenceInCalendarDays(d,s)+1,jt=$t-g;b.disabled.push({before:subDays(s,jt)}),b.disabled.push({after:addDays(d,jt)})}!s&&d&&(b.disabled.push({before:addDays(d,-$t+1)}),b.disabled.push({after:addDays(d,$t-1)}))}return jsxRuntimeExports.jsx(SelectRangeContext.Provider,{value:{selected:o,onDayClick:h,modifiers:b},children:a})}function useSelectRange(){var e=reactExports.useContext(SelectRangeContext);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function matcherToArray(e){return Array.isArray(e)?__spreadArray([],e,!0):e!==void 0?[e]:[]}function getCustomModifiers(e){var i={};return Object.entries(e).forEach(function(a){var o=a[0],c=a[1];i[o]=matcherToArray(c)}),i}var InternalModifier;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(InternalModifier||(InternalModifier={}));var Selected=InternalModifier.Selected,Disabled=InternalModifier.Disabled,Hidden=InternalModifier.Hidden,Today=InternalModifier.Today,RangeEnd=InternalModifier.RangeEnd,RangeMiddle=InternalModifier.RangeMiddle,RangeStart=InternalModifier.RangeStart,Outside=InternalModifier.Outside;function getInternalModifiers(e,i,a){var o,c=(o={},o[Selected]=matcherToArray(e.selected),o[Disabled]=matcherToArray(e.disabled),o[Hidden]=matcherToArray(e.hidden),o[Today]=[e.today],o[RangeEnd]=[],o[RangeMiddle]=[],o[RangeStart]=[],o[Outside]=[],o);return e.fromDate&&c[Disabled].push({before:e.fromDate}),e.toDate&&c[Disabled].push({after:e.toDate}),isDayPickerMultiple(e)?c[Disabled]=c[Disabled].concat(i.modifiers[Disabled]):isDayPickerRange(e)&&(c[Disabled]=c[Disabled].concat(a.modifiers[Disabled]),c[RangeStart]=a.modifiers[RangeStart],c[RangeMiddle]=a.modifiers[RangeMiddle],c[RangeEnd]=a.modifiers[RangeEnd]),c}var ModifiersContext=reactExports.createContext(void 0);function ModifiersProvider(e){var i=useDayPicker(),a=useSelectMultiple(),o=useSelectRange(),c=getInternalModifiers(i,a,o),s=getCustomModifiers(i.modifiers),d=__assign(__assign({},c),s);return jsxRuntimeExports.jsx(ModifiersContext.Provider,{value:d,children:e.children})}function useModifiers(){var e=reactExports.useContext(ModifiersContext);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function isDateInterval(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function isDateRange(e){return!!(e&&typeof e=="object"&&"from"in e)}function isDateAfterType(e){return!!(e&&typeof e=="object"&&"after"in e)}function isDateBeforeType(e){return!!(e&&typeof e=="object"&&"before"in e)}function isDayOfWeekType(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function isDateInRange(e,i){var a,o=i.from,c=i.to;if(o&&c){var s=differenceInCalendarDays(c,o)<0;s&&(a=[c,o],o=a[0],c=a[1]);var d=differenceInCalendarDays(e,o)>=0&&differenceInCalendarDays(c,e)>=0;return d}return c?isSameDay(c,e):o?isSameDay(o,e):!1}function isDateType(e){return isDate(e)}function isArrayOfDates(e){return Array.isArray(e)&&e.every(isDate)}function isMatch(e,i){return i.some(function(a){if(typeof a=="boolean")return a;if(isDateType(a))return isSameDay(e,a);if(isArrayOfDates(a))return a.includes(e);if(isDateRange(a))return isDateInRange(e,a);if(isDayOfWeekType(a))return a.dayOfWeek.includes(e.getDay());if(isDateInterval(a)){var o=differenceInCalendarDays(a.before,e),c=differenceInCalendarDays(a.after,e),s=o>0,d=c<0,et=isAfter(a.before,a.after);return et?d&&s:s||d}return isDateAfterType(a)?differenceInCalendarDays(e,a.after)>0:isDateBeforeType(a)?differenceInCalendarDays(a.before,e)>0:typeof a=="function"?a(e):!1})}function getActiveModifiers(e,i,a){var o=Object.keys(i).reduce(function(s,d){var et=i[d];return isMatch(e,et)&&s.push(d),s},[]),c={};return o.forEach(function(s){return c[s]=!0}),a&&!isSameMonth(e,a)&&(c.outside=!0),c}function getInitialFocusTarget(e,i){for(var a=startOfMonth(e[0]),o=endOfMonth(e[e.length-1]),c,s,d=a;d<=o;){var et=getActiveModifiers(d,i),$t=!et.disabled&&!et.hidden;if(!$t){d=addDays(d,1);continue}if(et.selected)return d;et.today&&!s&&(s=d),c||(c=d),d=addDays(d,1)}return s||c}var MAX_RETRY=365;function getNextFocus(e,i){var a=i.moveBy,o=i.direction,c=i.context,s=i.modifiers,d=i.retry,et=d===void 0?{count:0,lastFocused:e}:d,$t=c.weekStartsOn,h=c.fromDate,b=c.toDate,g=c.locale,jt={day:addDays,week:addWeeks,month:addMonths,year:addYears,startOfWeek:function(jr){return c.ISOWeek?startOfISOWeek(jr):startOfWeek(jr,{locale:g,weekStartsOn:$t})},endOfWeek:function(jr){return c.ISOWeek?endOfISOWeek(jr):endOfWeek(jr,{locale:g,weekStartsOn:$t})}},Ht=jt[a](e,o==="after"?1:-1);o==="before"&&h?Ht=max([h,Ht]):o==="after"&&b&&(Ht=min([b,Ht]));var Kt=!0;if(s){var or=getActiveModifiers(Ht,s);Kt=!or.disabled&&!or.hidden}return Kt?Ht:et.count>MAX_RETRY?et.lastFocused:getNextFocus(Ht,{moveBy:a,direction:o,context:c,modifiers:s,retry:__assign(__assign({},et),{count:et.count+1})})}var FocusContext=reactExports.createContext(void 0);function FocusProvider(e){var i=useNavigation(),a=useModifiers(),o=reactExports.useState(),c=o[0],s=o[1],d=reactExports.useState(),et=d[0],$t=d[1],h=getInitialFocusTarget(i.displayMonths,a),b=c??(et&&i.isDateDisplayed(et))?et:h,g=function(){$t(c),s(void 0)},jt=function(jr){s(jr)},Ht=useDayPicker(),Kt=function(jr,Lr){if(c){var ir=getNextFocus(c,{moveBy:jr,direction:Lr,context:Ht,modifiers:a});isSameDay(c,ir)||(i.goToDate(ir,c),jt(ir))}},or={focusedDay:c,focusTarget:b,blur:g,focus:jt,focusDayAfter:function(){return Kt("day","after")},focusDayBefore:function(){return Kt("day","before")},focusWeekAfter:function(){return Kt("week","after")},focusWeekBefore:function(){return Kt("week","before")},focusMonthBefore:function(){return Kt("month","before")},focusMonthAfter:function(){return Kt("month","after")},focusYearBefore:function(){return Kt("year","before")},focusYearAfter:function(){return Kt("year","after")},focusStartOfWeek:function(){return Kt("startOfWeek","before")},focusEndOfWeek:function(){return Kt("endOfWeek","after")}};return jsxRuntimeExports.jsx(FocusContext.Provider,{value:or,children:e.children})}function useFocusContext(){var e=reactExports.useContext(FocusContext);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function useActiveModifiers(e,i){var a=useModifiers(),o=getActiveModifiers(e,a,i);return o}var SelectSingleContext=reactExports.createContext(void 0);function SelectSingleProvider(e){if(!isDayPickerSingle(e.initialProps)){var i={selected:void 0};return jsxRuntimeExports.jsx(SelectSingleContext.Provider,{value:i,children:e.children})}return jsxRuntimeExports.jsx(SelectSingleProviderInternal,{initialProps:e.initialProps,children:e.children})}function SelectSingleProviderInternal(e){var i=e.initialProps,a=e.children,o=function(s,d,et){var $t,h,b;if(($t=i.onDayClick)===null||$t===void 0||$t.call(i,s,d,et),d.selected&&!i.required){(h=i.onSelect)===null||h===void 0||h.call(i,void 0,s,d,et);return}(b=i.onSelect)===null||b===void 0||b.call(i,s,s,d,et)},c={selected:i.selected,onDayClick:o};return jsxRuntimeExports.jsx(SelectSingleContext.Provider,{value:c,children:a})}function useSelectSingle(){var e=reactExports.useContext(SelectSingleContext);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function useDayEventHandlers(e,i){var a=useDayPicker(),o=useSelectSingle(),c=useSelectMultiple(),s=useSelectRange(),d=useFocusContext(),et=d.focusDayAfter,$t=d.focusDayBefore,h=d.focusWeekAfter,b=d.focusWeekBefore,g=d.blur,jt=d.focus,Ht=d.focusMonthBefore,Kt=d.focusMonthAfter,or=d.focusYearBefore,jr=d.focusYearAfter,Lr=d.focusStartOfWeek,ir=d.focusEndOfWeek,qr=function(l0){var Uo,c0,$0,Bo;isDayPickerSingle(a)?(Uo=o.onDayClick)===null||Uo===void 0||Uo.call(o,e,i,l0):isDayPickerMultiple(a)?(c0=c.onDayClick)===null||c0===void 0||c0.call(c,e,i,l0):isDayPickerRange(a)?($0=s.onDayClick)===null||$0===void 0||$0.call(s,e,i,l0):(Bo=a.onDayClick)===null||Bo===void 0||Bo.call(a,e,i,l0)},vn=function(l0){var Uo;jt(e),(Uo=a.onDayFocus)===null||Uo===void 0||Uo.call(a,e,i,l0)},xn=function(l0){var Uo;g(),(Uo=a.onDayBlur)===null||Uo===void 0||Uo.call(a,e,i,l0)},No=function(l0){var Uo;(Uo=a.onDayMouseEnter)===null||Uo===void 0||Uo.call(a,e,i,l0)},Ro=function(l0){var Uo;(Uo=a.onDayMouseLeave)===null||Uo===void 0||Uo.call(a,e,i,l0)},Xo=function(l0){var Uo;(Uo=a.onDayPointerEnter)===null||Uo===void 0||Uo.call(a,e,i,l0)},o0=function(l0){var Uo;(Uo=a.onDayPointerLeave)===null||Uo===void 0||Uo.call(a,e,i,l0)},s0=function(l0){var Uo;(Uo=a.onDayTouchCancel)===null||Uo===void 0||Uo.call(a,e,i,l0)},h0=function(l0){var Uo;(Uo=a.onDayTouchEnd)===null||Uo===void 0||Uo.call(a,e,i,l0)},E0=function(l0){var Uo;(Uo=a.onDayTouchMove)===null||Uo===void 0||Uo.call(a,e,i,l0)},C0=function(l0){var Uo;(Uo=a.onDayTouchStart)===null||Uo===void 0||Uo.call(a,e,i,l0)},D0=function(l0){var Uo;(Uo=a.onDayKeyUp)===null||Uo===void 0||Uo.call(a,e,i,l0)},N0=function(l0){var Uo;switch(l0.key){case"ArrowLeft":l0.preventDefault(),l0.stopPropagation(),a.dir==="rtl"?et():$t();break;case"ArrowRight":l0.preventDefault(),l0.stopPropagation(),a.dir==="rtl"?$t():et();break;case"ArrowDown":l0.preventDefault(),l0.stopPropagation(),h();break;case"ArrowUp":l0.preventDefault(),l0.stopPropagation(),b();break;case"PageUp":l0.preventDefault(),l0.stopPropagation(),l0.shiftKey?or():Ht();break;case"PageDown":l0.preventDefault(),l0.stopPropagation(),l0.shiftKey?jr():Kt();break;case"Home":l0.preventDefault(),l0.stopPropagation(),Lr();break;case"End":l0.preventDefault(),l0.stopPropagation(),ir();break}(Uo=a.onDayKeyDown)===null||Uo===void 0||Uo.call(a,e,i,l0)},e0={onClick:qr,onFocus:vn,onBlur:xn,onKeyDown:N0,onKeyUp:D0,onMouseEnter:No,onMouseLeave:Ro,onPointerEnter:Xo,onPointerLeave:o0,onTouchCancel:s0,onTouchEnd:h0,onTouchMove:E0,onTouchStart:C0};return e0}function useSelectedDays(){var e=useDayPicker(),i=useSelectSingle(),a=useSelectMultiple(),o=useSelectRange(),c=isDayPickerSingle(e)?i.selected:isDayPickerMultiple(e)?a.selected:isDayPickerRange(e)?o.selected:void 0;return c}function isInternalModifier(e){return Object.values(InternalModifier).includes(e)}function getDayClassNames(e,i){var a=[e.classNames.day];return Object.keys(i).forEach(function(o){var c=e.modifiersClassNames[o];if(c)a.push(c);else if(isInternalModifier(o)){var s=e.classNames["day_".concat(o)];s&&a.push(s)}}),a}function getDayStyle(e,i){var a=__assign({},e.styles.day);return Object.keys(i).forEach(function(o){var c;a=__assign(__assign({},a),(c=e.modifiersStyles)===null||c===void 0?void 0:c[o])}),a}function useDayRender(e,i,a){var o,c,s,d=useDayPicker(),et=useFocusContext(),$t=useActiveModifiers(e,i),h=useDayEventHandlers(e,$t),b=useSelectedDays(),g=!!(d.onDayClick||d.mode!=="default");reactExports.useEffect(function(){var No;$t.outside||et.focusedDay&&g&&isSameDay(et.focusedDay,e)&&((No=a.current)===null||No===void 0||No.focus())},[et.focusedDay,e,a,g,$t.outside]);var jt=getDayClassNames(d,$t).join(" "),Ht=getDayStyle(d,$t),Kt=!!($t.outside&&!d.showOutsideDays||$t.hidden),or=(s=(c=d.components)===null||c===void 0?void 0:c.DayContent)!==null&&s!==void 0?s:DayContent,jr=jsxRuntimeExports.jsx(or,{date:e,displayMonth:i,activeModifiers:$t}),Lr={style:Ht,className:jt,children:jr,role:"gridcell"},ir=et.focusTarget&&isSameDay(et.focusTarget,e)&&!$t.outside,qr=et.focusedDay&&isSameDay(et.focusedDay,e),vn=__assign(__assign(__assign({},Lr),(o={disabled:$t.disabled,role:"gridcell"},o["aria-selected"]=$t.selected,o.tabIndex=qr||ir?0:-1,o)),h),xn={isButton:g,isHidden:Kt,activeModifiers:$t,selectedDays:b,buttonProps:vn,divProps:Lr};return xn}function Day(e){var i=reactExports.useRef(null),a=useDayRender(e.date,e.displayMonth,i);return a.isHidden?jsxRuntimeExports.jsx("div",{role:"gridcell"}):a.isButton?jsxRuntimeExports.jsx(Button,__assign({name:"day",ref:i},a.buttonProps)):jsxRuntimeExports.jsx("div",__assign({},a.divProps))}function WeekNumber(e){var i=e.number,a=e.dates,o=useDayPicker(),c=o.onWeekNumberClick,s=o.styles,d=o.classNames,et=o.locale,$t=o.labels.labelWeekNumber,h=o.formatters.formatWeekNumber,b=h(Number(i),{locale:et});if(!c)return jsxRuntimeExports.jsx("span",{className:d.weeknumber,style:s.weeknumber,children:b});var g=$t(Number(i),{locale:et}),jt=function(Ht){c(i,a,Ht)};return jsxRuntimeExports.jsx(Button,{name:"week-number","aria-label":g,className:d.weeknumber,style:s.weeknumber,onClick:jt,children:b})}function Row(e){var i,a,o=useDayPicker(),c=o.styles,s=o.classNames,d=o.showWeekNumber,et=o.components,$t=(i=et==null?void 0:et.Day)!==null&&i!==void 0?i:Day,h=(a=et==null?void 0:et.WeekNumber)!==null&&a!==void 0?a:WeekNumber,b;return d&&(b=jsxRuntimeExports.jsx("td",{className:s.cell,style:c.cell,children:jsxRuntimeExports.jsx(h,{number:e.weekNumber,dates:e.dates})})),jsxRuntimeExports.jsxs("tr",{className:s.row,style:c.row,children:[b,e.dates.map(function(g){return jsxRuntimeExports.jsx("td",{className:s.cell,style:c.cell,role:"presentation",children:jsxRuntimeExports.jsx($t,{displayMonth:e.displayMonth,date:g})},getUnixTime(g))})]})}function daysToMonthWeeks(e,i,a){for(var o=a!=null&&a.ISOWeek?endOfISOWeek(i):endOfWeek(i,a),c=a!=null&&a.ISOWeek?startOfISOWeek(e):startOfWeek(e,a),s=differenceInCalendarDays(o,c),d=[],et=0;et<=s;et++)d.push(addDays(c,et));var $t=d.reduce(function(h,b){var g=a!=null&&a.ISOWeek?getISOWeek(b):getWeek(b,a),jt=h.find(function(Ht){return Ht.weekNumber===g});return jt?(jt.dates.push(b),h):(h.push({weekNumber:g,dates:[b]}),h)},[]);return $t}function getMonthWeeks(e,i){var a=daysToMonthWeeks(startOfMonth(e),endOfMonth(e),i);if(i!=null&&i.useFixedWeeks){var o=getWeeksInMonth(e,i);if(o<6){var c=a[a.length-1],s=c.dates[c.dates.length-1],d=addWeeks(s,6-o),et=daysToMonthWeeks(addWeeks(s,1),d,i);a.push.apply(a,et)}}return a}function Table(e){var i,a,o,c=useDayPicker(),s=c.locale,d=c.classNames,et=c.styles,$t=c.hideHead,h=c.fixedWeeks,b=c.components,g=c.weekStartsOn,jt=c.firstWeekContainsDate,Ht=c.ISOWeek,Kt=getMonthWeeks(e.displayMonth,{useFixedWeeks:!!h,ISOWeek:Ht,locale:s,weekStartsOn:g,firstWeekContainsDate:jt}),or=(i=b==null?void 0:b.Head)!==null&&i!==void 0?i:Head,jr=(a=b==null?void 0:b.Row)!==null&&a!==void 0?a:Row,Lr=(o=b==null?void 0:b.Footer)!==null&&o!==void 0?o:Footer;return jsxRuntimeExports.jsxs("table",{id:e.id,className:d.table,style:et.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!$t&&jsxRuntimeExports.jsx(or,{}),jsxRuntimeExports.jsx("tbody",{className:d.tbody,style:et.tbody,children:Kt.map(function(ir){return jsxRuntimeExports.jsx(jr,{displayMonth:e.displayMonth,dates:ir.dates,weekNumber:ir.weekNumber},ir.weekNumber)})}),jsxRuntimeExports.jsx(Lr,{displayMonth:e.displayMonth})]})}function canUseDOM(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var useIsomorphicLayoutEffect=canUseDOM()?reactExports.useLayoutEffect:reactExports.useEffect,serverHandoffComplete=!1,id=0;function genId(){return"react-day-picker-".concat(++id)}function useId(e){var i,a=e??(serverHandoffComplete?genId():null),o=reactExports.useState(a),c=o[0],s=o[1];return useIsomorphicLayoutEffect(function(){c===null&&s(genId())},[]),reactExports.useEffect(function(){serverHandoffComplete===!1&&(serverHandoffComplete=!0)},[]),(i=e??c)!==null&&i!==void 0?i:void 0}function Month(e){var i,a,o=useDayPicker(),c=o.dir,s=o.classNames,d=o.styles,et=o.components,$t=useNavigation().displayMonths,h=useId(o.id?"".concat(o.id,"-").concat(e.displayIndex):void 0),b=o.id?"".concat(o.id,"-grid-").concat(e.displayIndex):void 0,g=[s.month],jt=d.month,Ht=e.displayIndex===0,Kt=e.displayIndex===$t.length-1,or=!Ht&&!Kt;c==="rtl"&&(i=[Ht,Kt],Kt=i[0],Ht=i[1]),Ht&&(g.push(s.caption_start),jt=__assign(__assign({},jt),d.caption_start)),Kt&&(g.push(s.caption_end),jt=__assign(__assign({},jt),d.caption_end)),or&&(g.push(s.caption_between),jt=__assign(__assign({},jt),d.caption_between));var jr=(a=et==null?void 0:et.Caption)!==null&&a!==void 0?a:Caption;return jsxRuntimeExports.jsxs("div",{className:g.join(" "),style:jt,children:[jsxRuntimeExports.jsx(jr,{id:h,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),jsxRuntimeExports.jsx(Table,{id:b,"aria-labelledby":h,displayMonth:e.displayMonth})]},e.displayIndex)}function Months(e){var i=useDayPicker(),a=i.classNames,o=i.styles;return jsxRuntimeExports.jsx("div",{className:a.months,style:o.months,children:e.children})}function Root(e){var i,a,o=e.initialProps,c=useDayPicker(),s=useFocusContext(),d=useNavigation(),et=reactExports.useState(!1),$t=et[0],h=et[1];reactExports.useEffect(function(){c.initialFocus&&s.focusTarget&&($t||(s.focus(s.focusTarget),h(!0)))},[c.initialFocus,$t,s.focus,s.focusTarget,s]);var b=[c.classNames.root,c.className];c.numberOfMonths>1&&b.push(c.classNames.multiple_months),c.showWeekNumber&&b.push(c.classNames.with_weeknumber);var g=__assign(__assign({},c.styles.root),c.style),jt=Object.keys(o).filter(function(Kt){return Kt.startsWith("data-")}).reduce(function(Kt,or){var jr;return __assign(__assign({},Kt),(jr={},jr[or]=o[or],jr))},{}),Ht=(a=(i=o.components)===null||i===void 0?void 0:i.Months)!==null&&a!==void 0?a:Months;return jsxRuntimeExports.jsx("div",__assign({className:b.join(" "),style:g,dir:c.dir,id:c.id,nonce:o.nonce,title:o.title,lang:o.lang},jt,{children:jsxRuntimeExports.jsx(Ht,{children:d.displayMonths.map(function(Kt,or){return jsxRuntimeExports.jsx(Month,{displayIndex:or,displayMonth:Kt},or)})})}))}function RootProvider(e){var i=e.children,a=__rest(e,["children"]);return jsxRuntimeExports.jsx(DayPickerProvider,{initialProps:a,children:jsxRuntimeExports.jsx(NavigationProvider,{children:jsxRuntimeExports.jsx(SelectSingleProvider,{initialProps:a,children:jsxRuntimeExports.jsx(SelectMultipleProvider,{initialProps:a,children:jsxRuntimeExports.jsx(SelectRangeProvider,{initialProps:a,children:jsxRuntimeExports.jsx(ModifiersProvider,{children:jsxRuntimeExports.jsx(FocusProvider,{children:i})})})})})})})}function DayPicker(e){return jsxRuntimeExports.jsx(RootProvider,__assign({},e,{children:jsxRuntimeExports.jsx(Root,{initialProps:e})}))}const style="",durationToString=e=>{if(!e)return"Invalid duration";const i=Math.floor(e/1e3),a=Math.floor(i/60),o=Math.floor(a/60),c=Math.floor(o/24),s=("0"+i%60).slice(-2),d=("0"+a%60).slice(-2),et=("0"+o%24).slice(-2);return`${c!==0?c+"d ":""}${et}h ${d}m ${s}s`},useIntervalCountdown=e=>{const[i,a]=reactExports.useState(null),[o,c]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(!e){c(!0);return}const s=()=>{const et=new Date,$t=e.getTime()-et.getTime();if($t<=0){c(!0),a(0);return}a($t)};s();const d=setInterval(s,1e3);return()=>clearInterval(d)},[e]),{remainingTime:i,durationString:durationToString(i),expired:o}},CountdownTimer=({end:e})=>{const{durationString:i}=useIntervalCountdown(e);return jsxRuntimeExports.jsx("div",{children:i})},ViewCountdown=({end:e,name:i,description:a})=>{const o=decodeURIComponent(i||""),c=`Countdown to ${o?titleCase(o):`${format(e,"dd/MM/yyyy")}`}`;return jsxRuntimeExports.jsx(Page,{landing:!0,name:c,children:jsxRuntimeExports.jsx("div",{className:"my-[5px] md:my-[50px] flex items-start justify-center text-white",children:jsxRuntimeExports.jsxs("div",{className:"shadow rounded-lg p-6 max-w-sm w-full bg-white border border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-center mb-4 capitalize",children:c}),jsxRuntimeExports.jsxs("div",{className:"text-center mb-4",children:[a.map(s=>jsxRuntimeExports.jsx("div",{className:"my-2",children:s},s)),jsxRuntimeExports.jsx(CountdownTimer,{end:e})]}),jsxRuntimeExports.jsx("div",{className:"mt-20 w-full",children:i&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-between",children:[jsxRuntimeExports.jsx(Link,{target:"_blank",to:getNewsURL(o),className:"w-full bg-green-700 text-white py-2 px-4 rounded",children:"What's going on in over there?"}),jsxRuntimeExports.jsx(Link,{target:"_blank",to:getForecastUrl(o,e),className:"mt-10 w-full text-white py-2 px-4 rounded hover:bg-blue-700",children:"Forecast for the day"})]})}),jsxRuntimeExports.jsx("div",{className:"mt-20 w-full",children:jsxRuntimeExports.jsx(Link,{to:"/labs/countdown",className:"w-full text-white py-2 px-4 rounded hover:bg-blue-700",children:"Click to create a countdown"})})]})})})},dateToQueryParam=e=>{const i=e.split(" "),[a,o]=i;return`${a}_${o}`},getDescription=(e,i)=>[`From: ${format(e,"dd/MM/yyyy")}`,`To: ${format(i,"dd/MM/yyyy HH:00")}`,`(${format(i,"EEEE")})`],createDateTime=(e,i)=>(e.setHours(parseInt(i,10),0,0,0),e),queryToDate=e=>{const[i,a]=e.split("_"),o=new Date(`${i}`.replace(/-/g,"/"));return createDateTime(o,a)},getIntervalFromId=e=>{const i=new Date,a=queryToDate(e);return isNaN(a.getTime())?[null,null,null]:[i,a,getDescription(i,a)]},dateIsToday=e=>e.getDate()===new Date().getDate()&&e.getMonth()===new Date().getMonth()&&e.getFullYear()===new Date().getFullYear(),dateIsInThePast=e=>e.getTime()<new Date().getTime(),sanitize=e=>e?encodeURIComponent(limitString(replaceNonUrlFriendly(e," "),30)):"",isValid=e=>e&&!dateIsToday(e)&&!dateIsInThePast(e),Countdown=()=>{const{id:e,countdownName:i}=useParams(),[a,o]=reactExports.useState(new Date),[c,s]=reactExports.useState("10:00"),[d,et]=reactExports.useState("");if(e){const[h,b,g]=getIntervalFromId(e);return!h||!b?jsxRuntimeExports.jsx(Page,{name:"View Countdown",description:"Invalid countdown",children:jsxRuntimeExports.jsx(Link,{to:"/labs/countdown",className:"btn btn-black text-blue-600",children:"Create one here."})}):jsxRuntimeExports.jsx(ViewCountdown,{end:b,name:sanitize(i),description:g})}const $t=()=>{if(!a)return;const h=a.getDate(),b=a.getMonth()+1,g=a.getFullYear(),Ht=`#/labs/countdown/${dateToQueryParam(`${g}-${b}-${h} ${c}`)}`+(d?`/${encodeURIComponent(d)}`:"");o(void 0),et(""),window.location.href=Ht};return jsxRuntimeExports.jsx(Page,{name:"Countdown",className:"flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md w-full",children:[jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("input",{type:"text",id:"first_name",value:d,onChange:h=>et(h.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Enter countdown name",required:!0,maxLength:30,minLength:5})}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx(DayPicker,{mode:"single",selected:a,onSelect:o}),!a&&jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:"Please select a different ending date."})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{htmlFor:"theTime",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Select time"}),jsxRuntimeExports.jsx("select",{value:c,id:"theTime",name:"theTime",onChange:h=>s(h.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:Array.from({length:24},(h,b)=>b).map(h=>jsxRuntimeExports.jsxs("option",{value:h,children:[h,":00"]},h))})]}),jsxRuntimeExports.jsx("button",{disabled:!isValid(a)||!d,className:`w-full py-2 px-4 rounded ${!a||dateIsToday(a)||dateIsInThePast(a)||!d?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-700 text-white"}`,onClick:$t,children:"Create Countdown"})]})})},DEFAULT_TRACK=0,useCamera=()=>{const e=reactExports.useRef(null),i=reactExports.useRef(null),[a,o]=reactExports.useState(!1),[c,s]=reactExports.useState(1),[d,et]=reactExports.useState(null),[$t,h]=reactExports.useState(null),[b,g]=reactExports.useState(null),[jt,Ht]=reactExports.useState(!1),[Kt,or]=reactExports.useState(1),[jr,Lr]=reactExports.useState(!0),[ir,qr]=reactExports.useState(!1),[vn,xn]=reactExports.useState(DEFAULT_TRACK),[No,Ro]=reactExports.useState([]);reactExports.useEffect(()=>((async()=>{var D0;try{const N0=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720},audio:!1});et(N0),e.current&&(e.current.srcObject=N0);const e0=N0.getVideoTracks();Ro(e0);const l0=e0[DEFAULT_TRACK];g(l0);const Uo=l0.getCapabilities();"zoom"in Uo&&(Ht(!0),or(((D0=Uo.zoom)==null?void 0:D0.max)??1)),h(null),Lr(!1)}catch(N0){console.error("Error accessing camera:",N0),h(N0.message)}})(),()=>{d&&d.getTracks().forEach(D0=>D0.stop())}),[]);const Xo=()=>o(!a),o0=()=>{if(e.current&&i.current){qr(!0);const C0=e.current,D0=i.current;D0.width=C0.videoWidth,D0.height=C0.videoHeight;const N0=D0.getContext("2d");if(N0){a&&(N0.translate(D0.width,0),N0.scale(-1,1)),N0.drawImage(C0,0,0,D0.width,D0.height);const e0=document.createElement("a"),l0=D0.toDataURL("image/jpeg",1);e0.href=l0,e0.download=`cam-capture-${randomUUID()}.jpg`,e0.click(),setTimeout(()=>{qr(!1)},100)}}},s0=()=>{if(b){const C0=Math.min(c+.1,Kt);s(C0),b.applyConstraints({advanced:[{zoom:C0}]})}},h0=()=>{if(b){const C0=Math.max(c-.1,1);s(C0),b.applyConstraints({advanced:[{zoom:C0}]})}},E0=()=>{if(No.length<=1)return;const C0=(vn+1)%No.length;No[C0]?(xn(C0),g(No[C0])):(xn(DEFAULT_TRACK),g(No[DEFAULT_TRACK]))};return{videoRef:e,canvasRef:i,isFlipped:a,flipCamera:Xo,download:o0,zoomIn:s0,zoomOut:h0,zoomLevel:c,error:$t,hasZoom:jt,isLoading:jr,isDownloading:ir,tracks:No.length,changeTrack:E0}},Camera=()=>{const{videoRef:e,canvasRef:i,isFlipped:a,flipCamera:o,download:c,hasZoom:s,zoomIn:d,zoomOut:et,error:$t,isDownloading:h,isLoading:b,tracks:g,changeTrack:jt}=useCamera();return jsxRuntimeExports.jsxs(Page,{name:"Camera",children:[$t&&jsxRuntimeExports.jsx("div",{className:"text-red-500 mb-4",children:$t}),jsxRuntimeExports.jsx(Modal,{title:"Downloading file",visible:h,children:jsxRuntimeExports.jsx("div",{className:"text-gray-500",children:"Please wait..."})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-10",children:[jsxRuntimeExports.jsxs("div",{className:"relative border border-gray-300 shadow-md p-4 rounded-lg",children:[jsxRuntimeExports.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,className:"w-full max-w-500 transition-transform duration-300 ease-in-out",style:{transform:`${a?"scaleX(-1)":"none"}`}}),b&&jsxRuntimeExports.jsx("div",{className:"w-full max-w-500 transition-transform duration-300 ease-in-out absolute inset-0 flex items-center justify-center",children:"Loading..."}),jsxRuntimeExports.jsx("canvas",{ref:i,className:"hidden"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[jsxRuntimeExports.jsxs("button",{onClick:o,className:"bg-green-500 text-white px-4 py-1 rounded-md hover:bg-green-600 transition duration-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:a?"":""}),"Flip"]}),s&&jsxRuntimeExports.jsxs("button",{onClick:d,className:"bg-yellow-500 text-white px-4 py-1 rounded-md hover:bg-yellow-600 transition duration-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:"+"}),"Zoom In"]}),s&&jsxRuntimeExports.jsxs("button",{onClick:et,className:"bg-blue-500 text-white px-4 py-1 rounded-md hover:bg-blue-600 transition duration-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:"-"}),"Zoom Out"]}),jsxRuntimeExports.jsxs("button",{onClick:c,className:"bg-purple-500 text-white px-4 py-1 rounded-md hover:bg-purple-600 transition duration-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:""}),"Capture"]}),g>1&&jsxRuntimeExports.jsxs("button",{onClick:jt,className:"bg-gray-500 text-white px-4 py-1 rounded-md hover:bg-gray-600 transition duration-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:""}),"Change Camera"]})]})]})]})},DevDaily=()=>jsxRuntimeExports.jsx(Page,{name:"DevDaily",description:"Come back soon!"}),oldRoutes=[{from:["/bg","experiment/bg"],to:"/labs/bg"},{from:["/game","/experiment/game"],to:"/labs/game"},{from:"/experiments/timezones",to:"/labs/timezones"}].map(({from:e,to:i})=>typeof e=="string"?{from:e,to:i}:e.map(a=>({from:a,to:i}))).flat(),App=()=>jsxRuntimeExports.jsx(HashRouter,{basename:"/",children:jsxRuntimeExports.jsxs("div",{className:"grid min-h-[100dvh] grid-rows-[auto_1fr_auto]",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx("main",{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(Resume,{})}),jsxRuntimeExports.jsx(Route,{path:"/resume",element:jsxRuntimeExports.jsx(Resume,{})}),jsxRuntimeExports.jsx(Route,{path:"/blog",element:jsxRuntimeExports.jsx(Blog,{})}),jsxRuntimeExports.jsx(Route,{path:"/dev",element:jsxRuntimeExports.jsx(DevDaily,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs",element:jsxRuntimeExports.jsx(Labs,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/background",element:jsxRuntimeExports.jsx(RemoveBackground,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/game",element:jsxRuntimeExports.jsx(CanvasGame,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/timezones",element:jsxRuntimeExports.jsx(WeatherApp,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/weather",element:jsxRuntimeExports.jsx(WeatherApp,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/code-pen",element:jsxRuntimeExports.jsx(CodePen,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/countdown",element:jsxRuntimeExports.jsx(Countdown,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/countdown/:id/:countdownName?",element:jsxRuntimeExports.jsx(Countdown,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/camera",element:jsxRuntimeExports.jsx(Camera,{})}),oldRoutes.map(({from:e,to:i})=>jsxRuntimeExports.jsx(Route,{path:e,element:jsxRuntimeExports.jsx(Navigate,{to:i})},`${e}-${i}`)),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/"})})]})}),jsxRuntimeExports.jsx(Lt,{}),jsxRuntimeExports.jsx(Footer$1,{})]})});client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
