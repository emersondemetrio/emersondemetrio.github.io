function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(t,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),s=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function g(Ae){return Ae===null||typeof Ae!="object"?null:(Ae=d&&Ae[d]||Ae["@@iterator"],typeof Ae=="function"?Ae:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function O(Ae,Be,tr){this.props=Ae,this.context=Be,this.refs=C,this.updater=tr||w}O.prototype.isReactComponent={},O.prototype.setState=function(Ae,Be){if(typeof Ae!="object"&&typeof Ae!="function"&&Ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ae,Be,"setState")},O.prototype.forceUpdate=function(Ae){this.updater.enqueueForceUpdate(this,Ae,"forceUpdate")};function Y(){}Y.prototype=O.prototype;function q(Ae,Be,tr){this.props=Ae,this.context=Be,this.refs=C,this.updater=tr||w}var ue=q.prototype=new Y;ue.constructor=q,x(ue,O.prototype),ue.isPureReactComponent=!0;var pe=Array.isArray,se=Object.prototype.hasOwnProperty,Re={current:null},Oe={key:!0,ref:!0,__self:!0,__source:!0};function Ce(Ae,Be,tr){var No,ah={},Mo=null,t0=null;if(Be!=null)for(No in Be.ref!==void 0&&(t0=Be.ref),Be.key!==void 0&&(Mo=""+Be.key),Be)se.call(Be,No)&&!Oe.hasOwnProperty(No)&&(ah[No]=Be[No]);var o0=arguments.length-2;if(o0===1)ah.children=tr;else if(1<o0){for(var Xr=Array(o0),a0=0;a0<o0;a0++)Xr[a0]=arguments[a0+2];ah.children=Xr}if(Ae&&Ae.defaultProps)for(No in o0=Ae.defaultProps,o0)ah[No]===void 0&&(ah[No]=o0[No]);return{$$typeof:t,type:Ae,key:Mo,ref:t0,props:ah,_owner:Re.current}}function He(Ae,Be){return{$$typeof:t,type:Ae.type,key:Be,ref:Ae.ref,props:Ae.props,_owner:Ae._owner}}function $t(Ae){return typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===t}function Sn(Ae){var Be={"=":"=0",":":"=2"};return"$"+Ae.replace(/[=:]/g,function(tr){return Be[tr]})}var xn=/\/+/g;function Lr(Ae,Be){return typeof Ae=="object"&&Ae!==null&&Ae.key!=null?Sn(""+Ae.key):Be.toString(36)}function jr(Ae,Be,tr,No,ah){var Mo=typeof Ae;(Mo==="undefined"||Mo==="boolean")&&(Ae=null);var t0=!1;if(Ae===null)t0=!0;else switch(Mo){case"string":case"number":t0=!0;break;case"object":switch(Ae.$$typeof){case t:case e:t0=!0}}if(t0)return t0=Ae,ah=ah(t0),Ae=No===""?"."+Lr(t0,0):No,pe(ah)?(tr="",Ae!=null&&(tr=Ae.replace(xn,"$&/")+"/"),jr(ah,Be,tr,"",function(a0){return a0})):ah!=null&&($t(ah)&&(ah=He(ah,tr+(!ah.key||t0&&t0.key===ah.key?"":(""+ah.key).replace(xn,"$&/")+"/")+Ae)),Be.push(ah)),1;if(t0=0,No=No===""?".":No+":",pe(Ae))for(var o0=0;o0<Ae.length;o0++){Mo=Ae[o0];var Xr=No+Lr(Mo,o0);t0+=jr(Mo,Be,tr,Xr,ah)}else if(Xr=g(Ae),typeof Xr=="function")for(Ae=Xr.call(Ae),o0=0;!(Mo=Ae.next()).done;)Mo=Mo.value,Xr=No+Lr(Mo,o0++),t0+=jr(Mo,Be,tr,Xr,ah);else if(Mo==="object")throw Be=String(Ae),Error("Objects are not valid as a React child (found: "+(Be==="[object Object]"?"object with keys {"+Object.keys(Ae).join(", ")+"}":Be)+"). If you meant to render a collection of children, use an array instead.");return t0}function et(Ae,Be,tr){if(Ae==null)return Ae;var No=[],ah=0;return jr(Ae,No,"","",function(Mo){return Be.call(tr,Mo,ah++)}),No}function Ft(Ae){if(Ae._status===-1){var Be=Ae._result;Be=Be(),Be.then(function(tr){(Ae._status===0||Ae._status===-1)&&(Ae._status=1,Ae._result=tr)},function(tr){(Ae._status===0||Ae._status===-1)&&(Ae._status=2,Ae._result=tr)}),Ae._status===-1&&(Ae._status=0,Ae._result=Be)}if(Ae._status===1)return Ae._result.default;throw Ae._result}var Tt={current:null},ze={transition:null},Ht={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:ze,ReactCurrentOwner:Re};return react_production_min.Children={map:et,forEach:function(Ae,Be,tr){et(Ae,function(){Be.apply(this,arguments)},tr)},count:function(Ae){var Be=0;return et(Ae,function(){Be++}),Be},toArray:function(Ae){return et(Ae,function(Be){return Be})||[]},only:function(Ae){if(!$t(Ae))throw Error("React.Children.only expected to receive a single React element child.");return Ae}},react_production_min.Component=O,react_production_min.Fragment=n,react_production_min.Profiler=o,react_production_min.PureComponent=q,react_production_min.StrictMode=i,react_production_min.Suspense=p,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ht,react_production_min.cloneElement=function(Ae,Be,tr){if(Ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ae+".");var No=x({},Ae.props),ah=Ae.key,Mo=Ae.ref,t0=Ae._owner;if(Be!=null){if(Be.ref!==void 0&&(Mo=Be.ref,t0=Re.current),Be.key!==void 0&&(ah=""+Be.key),Ae.type&&Ae.type.defaultProps)var o0=Ae.type.defaultProps;for(Xr in Be)se.call(Be,Xr)&&!Oe.hasOwnProperty(Xr)&&(No[Xr]=Be[Xr]===void 0&&o0!==void 0?o0[Xr]:Be[Xr])}var Xr=arguments.length-2;if(Xr===1)No.children=tr;else if(1<Xr){o0=Array(Xr);for(var a0=0;a0<Xr;a0++)o0[a0]=arguments[a0+2];No.children=o0}return{$$typeof:t,type:Ae.type,key:ah,ref:Mo,props:No,_owner:t0}},react_production_min.createContext=function(Ae){return Ae={$$typeof:l,_currentValue:Ae,_currentValue2:Ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ae.Provider={$$typeof:a,_context:Ae},Ae.Consumer=Ae},react_production_min.createElement=Ce,react_production_min.createFactory=function(Ae){var Be=Ce.bind(null,Ae);return Be.type=Ae,Be},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(Ae){return{$$typeof:c,render:Ae}},react_production_min.isValidElement=$t,react_production_min.lazy=function(Ae){return{$$typeof:u,_payload:{_status:-1,_result:Ae},_init:Ft}},react_production_min.memo=function(Ae,Be){return{$$typeof:s,type:Ae,compare:Be===void 0?null:Be}},react_production_min.startTransition=function(Ae){var Be=ze.transition;ze.transition={};try{Ae()}finally{ze.transition=Be}},react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},react_production_min.useCallback=function(Ae,Be){return Tt.current.useCallback(Ae,Be)},react_production_min.useContext=function(Ae){return Tt.current.useContext(Ae)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(Ae){return Tt.current.useDeferredValue(Ae)},react_production_min.useEffect=function(Ae,Be){return Tt.current.useEffect(Ae,Be)},react_production_min.useId=function(){return Tt.current.useId()},react_production_min.useImperativeHandle=function(Ae,Be,tr){return Tt.current.useImperativeHandle(Ae,Be,tr)},react_production_min.useInsertionEffect=function(Ae,Be){return Tt.current.useInsertionEffect(Ae,Be)},react_production_min.useLayoutEffect=function(Ae,Be){return Tt.current.useLayoutEffect(Ae,Be)},react_production_min.useMemo=function(Ae,Be){return Tt.current.useMemo(Ae,Be)},react_production_min.useReducer=function(Ae,Be,tr){return Tt.current.useReducer(Ae,Be,tr)},react_production_min.useRef=function(Ae){return Tt.current.useRef(Ae)},react_production_min.useState=function(Ae){return Tt.current.useState(Ae)},react_production_min.useSyncExternalStore=function(Ae,Be,tr){return Tt.current.useSyncExternalStore(Ae,Be,tr)},react_production_min.useTransition=function(){return Tt.current.useTransition()},react_production_min.version="18.2.0",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var t=requireReact(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,p,s){var u,d={},g=null,w=null;s!==void 0&&(g=""+s),p.key!==void 0&&(g=""+p.key),p.ref!==void 0&&(w=p.ref);for(u in p)i.call(p,u)&&!a.hasOwnProperty(u)&&(d[u]=p[u]);if(c&&c.defaultProps)for(u in p=c.defaultProps,p)d[u]===void 0&&(d[u]=p[u]);return{$$typeof:e,type:c,key:g,ref:w,props:d,_owner:o.current}}return reactJsxRuntime_production_min.Fragment=n,reactJsxRuntime_production_min.jsx=l,reactJsxRuntime_production_min.jsxs=l,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(t){function e(ze,Ht){var Ae=ze.length;ze.push(Ht);e:for(;0<Ae;){var Be=Ae-1>>>1,tr=ze[Be];if(0<o(tr,Ht))ze[Be]=Ht,ze[Ae]=tr,Ae=Be;else break e}}function n(ze){return ze.length===0?null:ze[0]}function i(ze){if(ze.length===0)return null;var Ht=ze[0],Ae=ze.pop();if(Ae!==Ht){ze[0]=Ae;e:for(var Be=0,tr=ze.length,No=tr>>>1;Be<No;){var ah=2*(Be+1)-1,Mo=ze[ah],t0=ah+1,o0=ze[t0];if(0>o(Mo,Ae))t0<tr&&0>o(o0,Mo)?(ze[Be]=o0,ze[t0]=Ae,Be=t0):(ze[Be]=Mo,ze[ah]=Ae,Be=ah);else if(t0<tr&&0>o(o0,Ae))ze[Be]=o0,ze[t0]=Ae,Be=t0;else break e}}return Ht}function o(ze,Ht){var Ae=ze.sortIndex-Ht.sortIndex;return Ae!==0?Ae:ze.id-Ht.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var p=[],s=[],u=1,d=null,g=3,w=!1,x=!1,C=!1,O=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ue(ze){for(var Ht=n(s);Ht!==null;){if(Ht.callback===null)i(s);else if(Ht.startTime<=ze)i(s),Ht.sortIndex=Ht.expirationTime,e(p,Ht);else break;Ht=n(s)}}function pe(ze){if(C=!1,ue(ze),!x)if(n(p)!==null)x=!0,Ft(se);else{var Ht=n(s);Ht!==null&&Tt(pe,Ht.startTime-ze)}}function se(ze,Ht){x=!1,C&&(C=!1,Y(Ce),Ce=-1),w=!0;var Ae=g;try{for(ue(Ht),d=n(p);d!==null&&(!(d.expirationTime>Ht)||ze&&!Sn());){var Be=d.callback;if(typeof Be=="function"){d.callback=null,g=d.priorityLevel;var tr=Be(d.expirationTime<=Ht);Ht=t.unstable_now(),typeof tr=="function"?d.callback=tr:d===n(p)&&i(p),ue(Ht)}else i(p);d=n(p)}if(d!==null)var No=!0;else{var ah=n(s);ah!==null&&Tt(pe,ah.startTime-Ht),No=!1}return No}finally{d=null,g=Ae,w=!1}}var Re=!1,Oe=null,Ce=-1,He=5,$t=-1;function Sn(){return!(t.unstable_now()-$t<He)}function xn(){if(Oe!==null){var ze=t.unstable_now();$t=ze;var Ht=!0;try{Ht=Oe(!0,ze)}finally{Ht?Lr():(Re=!1,Oe=null)}}else Re=!1}var Lr;if(typeof q=="function")Lr=function(){q(xn)};else if(typeof MessageChannel<"u"){var jr=new MessageChannel,et=jr.port2;jr.port1.onmessage=xn,Lr=function(){et.postMessage(null)}}else Lr=function(){O(xn,0)};function Ft(ze){Oe=ze,Re||(Re=!0,Lr())}function Tt(ze,Ht){Ce=O(function(){ze(t.unstable_now())},Ht)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ze){ze.callback=null},t.unstable_continueExecution=function(){x||w||(x=!0,Ft(se))},t.unstable_forceFrameRate=function(ze){0>ze||125<ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):He=0<ze?Math.floor(1e3/ze):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(p)},t.unstable_next=function(ze){switch(g){case 1:case 2:case 3:var Ht=3;break;default:Ht=g}var Ae=g;g=Ht;try{return ze()}finally{g=Ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ze,Ht){switch(ze){case 1:case 2:case 3:case 4:case 5:break;default:ze=3}var Ae=g;g=ze;try{return Ht()}finally{g=Ae}},t.unstable_scheduleCallback=function(ze,Ht,Ae){var Be=t.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?Be+Ae:Be):Ae=Be,ze){case 1:var tr=-1;break;case 2:tr=250;break;case 5:tr=1073741823;break;case 4:tr=1e4;break;default:tr=5e3}return tr=Ae+tr,ze={id:u++,callback:Ht,priorityLevel:ze,startTime:Ae,expirationTime:tr,sortIndex:-1},Ae>Be?(ze.sortIndex=Ae,e(s,ze),n(p)===null&&ze===n(s)&&(C?(Y(Ce),Ce=-1):C=!0,Tt(pe,Ae-Be))):(ze.sortIndex=tr,e(p,ze),x||w||(x=!0,Ft(se))),ze},t.unstable_shouldYield=Sn,t.unstable_wrapCallback=function(ze){var Ht=g;return function(){var Ae=g;g=Ht;try{return ze.apply(this,arguments)}finally{g=Ae}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var t=requireReact(),e=requireScheduler();function n(f){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+f,v=1;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(f,h){l(f,h),l(f+"Capture",h)}function l(f,h){for(o[f]=h,f=0;f<h.length;f++)i.add(h[f])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,s=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function g(f){return p.call(d,f)?!0:p.call(u,f)?!1:s.test(f)?d[f]=!0:(u[f]=!0,!1)}function w(f,h,v,T){if(v!==null&&v.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return T?!1:v!==null?!v.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function x(f,h,v,T){if(h===null||typeof h>"u"||w(f,h,v,T))return!0;if(T)return!1;if(v!==null)switch(v.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function C(f,h,v,T,D,te,Se){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=T,this.attributeNamespace=D,this.mustUseProperty=v,this.propertyName=f,this.type=h,this.sanitizeURL=te,this.removeEmptyString=Se}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){O[f]=new C(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var h=f[0];O[h]=new C(h,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){O[f]=new C(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){O[f]=new C(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){O[f]=new C(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){O[f]=new C(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){O[f]=new C(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){O[f]=new C(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){O[f]=new C(f,5,!1,f.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function q(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var h=f.replace(Y,q);O[h]=new C(h,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var h=f.replace(Y,q);O[h]=new C(h,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var h=f.replace(Y,q);O[h]=new C(h,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){O[f]=new C(f,1,!1,f.toLowerCase(),null,!1,!1)}),O.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){O[f]=new C(f,1,!1,f.toLowerCase(),null,!0,!0)});function ue(f,h,v,T){var D=O.hasOwnProperty(h)?O[h]:null;(D!==null?D.type!==0:T||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(x(h,v,D,T)&&(v=null),T||D===null?g(h)&&(v===null?f.removeAttribute(h):f.setAttribute(h,""+v)):D.mustUseProperty?f[D.propertyName]=v===null?D.type===3?!1:"":v:(h=D.attributeName,T=D.attributeNamespace,v===null?f.removeAttribute(h):(D=D.type,v=D===3||D===4&&v===!0?"":""+v,T?f.setAttributeNS(T,h,v):f.setAttribute(h,v))))}var pe=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,se=Symbol.for("react.element"),Re=Symbol.for("react.portal"),Oe=Symbol.for("react.fragment"),Ce=Symbol.for("react.strict_mode"),He=Symbol.for("react.profiler"),$t=Symbol.for("react.provider"),Sn=Symbol.for("react.context"),xn=Symbol.for("react.forward_ref"),Lr=Symbol.for("react.suspense"),jr=Symbol.for("react.suspense_list"),et=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),Tt=Symbol.for("react.offscreen"),ze=Symbol.iterator;function Ht(f){return f===null||typeof f!="object"?null:(f=ze&&f[ze]||f["@@iterator"],typeof f=="function"?f:null)}var Ae=Object.assign,Be;function tr(f){if(Be===void 0)try{throw Error()}catch(v){var h=v.stack.trim().match(/\n( *(at )?)/);Be=h&&h[1]||""}return`
`+Be+f}var No=!1;function ah(f,h){if(!f||No)return"";No=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Yr){var T=Yr}Reflect.construct(f,[],h)}else{try{h.call()}catch(Yr){T=Yr}f.call(h.prototype)}else{try{throw Error()}catch(Yr){T=Yr}f()}}catch(Yr){if(Yr&&T&&typeof Yr.stack=="string"){for(var D=Yr.stack.split(`
`),te=T.stack.split(`
`),Se=D.length-1,Ke=te.length-1;1<=Se&&0<=Ke&&D[Se]!==te[Ke];)Ke--;for(;1<=Se&&0<=Ke;Se--,Ke--)if(D[Se]!==te[Ke]){if(Se!==1||Ke!==1)do if(Se--,Ke--,0>Ke||D[Se]!==te[Ke]){var _n=`
`+D[Se].replace(" at new "," at ");return f.displayName&&_n.includes("<anonymous>")&&(_n=_n.replace("<anonymous>",f.displayName)),_n}while(1<=Se&&0<=Ke);break}}}finally{No=!1,Error.prepareStackTrace=v}return(f=f?f.displayName||f.name:"")?tr(f):""}function Mo(f){switch(f.tag){case 5:return tr(f.type);case 16:return tr("Lazy");case 13:return tr("Suspense");case 19:return tr("SuspenseList");case 0:case 2:case 15:return f=ah(f.type,!1),f;case 11:return f=ah(f.type.render,!1),f;case 1:return f=ah(f.type,!0),f;default:return""}}function t0(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case Oe:return"Fragment";case Re:return"Portal";case He:return"Profiler";case Ce:return"StrictMode";case Lr:return"Suspense";case jr:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case Sn:return(f.displayName||"Context")+".Consumer";case $t:return(f._context.displayName||"Context")+".Provider";case xn:var h=f.render;return f=f.displayName,f||(f=h.displayName||h.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case et:return h=f.displayName||null,h!==null?h:t0(f.type)||"Memo";case Ft:h=f._payload,f=f._init;try{return t0(f(h))}catch{}}return null}function o0(f){var h=f.type;switch(f.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=h.render,f=f.displayName||f.name||"",h.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return t0(h);case 8:return h===Ce?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function Xr(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function a0(f){var h=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Ih(f){var h=a0(f)?"checked":"value",v=Object.getOwnPropertyDescriptor(f.constructor.prototype,h),T=""+f[h];if(!f.hasOwnProperty(h)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var D=v.get,te=v.set;return Object.defineProperty(f,h,{configurable:!0,get:function(){return D.call(this)},set:function(Se){T=""+Se,te.call(this,Se)}}),Object.defineProperty(f,h,{enumerable:v.enumerable}),{getValue:function(){return T},setValue:function(Se){T=""+Se},stopTracking:function(){f._valueTracker=null,delete f[h]}}}}function S0(f){f._valueTracker||(f._valueTracker=Ih(f))}function Sg(f){if(!f)return!1;var h=f._valueTracker;if(!h)return!0;var v=h.getValue(),T="";return f&&(T=a0(f)?f.checked?"true":"false":f.value),f=T,f!==v?(h.setValue(f),!0):!1}function n1(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function eg(f,h){var v=h.checked;return Ae({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??f._wrapperState.initialChecked})}function i0(f,h){var v=h.defaultValue==null?"":h.defaultValue,T=h.checked!=null?h.checked:h.defaultChecked;v=Xr(h.value!=null?h.value:v),f._wrapperState={initialChecked:T,initialValue:v,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function p0(f,h){h=h.checked,h!=null&&ue(f,"checked",h,!1)}function P0(f,h){p0(f,h);var v=Xr(h.value),T=h.type;if(v!=null)T==="number"?(v===0&&f.value===""||f.value!=v)&&(f.value=""+v):f.value!==""+v&&(f.value=""+v);else if(T==="submit"||T==="reset"){f.removeAttribute("value");return}h.hasOwnProperty("value")?N0(f,h.type,v):h.hasOwnProperty("defaultValue")&&N0(f,h.type,Xr(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(f.defaultChecked=!!h.defaultChecked)}function _g(f,h,v){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var T=h.type;if(!(T!=="submit"&&T!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+f._wrapperState.initialValue,v||h===f.value||(f.value=h),f.defaultValue=h}v=f.name,v!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,v!==""&&(f.name=v)}function N0(f,h,v){(h!=="number"||n1(f.ownerDocument)!==f)&&(v==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+v&&(f.defaultValue=""+v))}var F0=Array.isArray;function U0(f,h,v,T){if(f=f.options,h){h={};for(var D=0;D<v.length;D++)h["$"+v[D]]=!0;for(v=0;v<f.length;v++)D=h.hasOwnProperty("$"+f[v].value),f[v].selected!==D&&(f[v].selected=D),D&&T&&(f[v].defaultSelected=!0)}else{for(v=""+Xr(v),h=null,D=0;D<f.length;D++){if(f[D].value===v){f[D].selected=!0,T&&(f[D].defaultSelected=!0);return}h!==null||f[D].disabled||(h=f[D])}h!==null&&(h.selected=!0)}}function B0(f,h){if(h.dangerouslySetInnerHTML!=null)throw Error(n(91));return Ae({},h,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function Zg(f,h){var v=h.value;if(v==null){if(v=h.children,h=h.defaultValue,v!=null){if(h!=null)throw Error(n(92));if(F0(v)){if(1<v.length)throw Error(n(93));v=v[0]}h=v}h==null&&(h=""),v=h}f._wrapperState={initialValue:Xr(v)}}function Kg(f,h){var v=Xr(h.value),T=Xr(h.defaultValue);v!=null&&(v=""+v,v!==f.value&&(f.value=v),h.defaultValue==null&&f.defaultValue!==v&&(f.defaultValue=v)),T!=null&&(f.defaultValue=""+T)}function r1(f){var h=f.textContent;h===f._wrapperState.initialValue&&h!==""&&h!==null&&(f.value=h)}function Ug(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L1(f,h){return f==null||f==="http://www.w3.org/1999/xhtml"?Ug(h):f==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var V0,g1=(function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,v,T,D){MSApp.execUnsafeLocalFunction(function(){return f(h,v,T,D)})}:f})(function(f,h){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=h;else{for(V0=V0||document.createElement("div"),V0.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=V0.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;h.firstChild;)f.appendChild(h.firstChild)}});function E0(f,h){if(h){var v=f.firstChild;if(v&&v===f.lastChild&&v.nodeType===3){v.nodeValue=h;return}}f.textContent=h}var qg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W1=["Webkit","ms","Moz","O"];Object.keys(qg).forEach(function(f){W1.forEach(function(h){h=h+f.charAt(0).toUpperCase()+f.substring(1),qg[h]=qg[f]})});function V1(f,h,v){return h==null||typeof h=="boolean"||h===""?"":v||typeof h!="number"||h===0||qg.hasOwnProperty(f)&&qg[f]?(""+h).trim():h+"px"}function u0(f,h){f=f.style;for(var v in h)if(h.hasOwnProperty(v)){var T=v.indexOf("--")===0,D=V1(v,h[v],T);v==="float"&&(v="cssFloat"),T?f.setProperty(v,D):f[v]=D}}var Z1=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function k0(f,h){if(h){if(Z1[f]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(n(137,f));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(n(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(n(61))}if(h.style!=null&&typeof h.style!="object")throw Error(n(62))}}function Bg(f,h){if(f.indexOf("-")===-1)return typeof h.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ge=null;function An(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var nr=null,Ra=null,ko=null;function b0(f){if(f=Q1(f)){if(typeof nr!="function")throw Error(n(280));var h=f.stateNode;h&&(h=Xv(h),nr(f.stateNode,f.type,h))}}function j0(f){Ra?ko?ko.push(f):ko=[f]:Ra=f}function Gg(){if(Ra){var f=Ra,h=ko;if(ko=Ra=null,b0(f),h)for(f=0;f<h.length;f++)b0(h[f])}}function c1(f,h){return f(h)}function Hg(){}var zg=!1;function yy(f,h,v){if(zg)return f(h,v);zg=!0;try{return c1(f,h,v)}finally{zg=!1,(Ra!==null||ko!==null)&&(Hg(),Gg())}}function s1(f,h){var v=f.stateNode;if(v===null)return null;var T=Xv(v);if(T===null)return null;v=T[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(f=f.type,T=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!T;break e;default:f=!1}if(f)return null;if(v&&typeof v!="function")throw Error(n(231,h,typeof v));return v}var Hr=!1;if(c)try{var H0={};Object.defineProperty(H0,"passive",{get:function(){Hr=!0}}),window.addEventListener("test",H0,H0),window.removeEventListener("test",H0,H0)}catch{Hr=!1}function Y0(f,h,v,T,D,te,Se,Ke,_n){var Yr=Array.prototype.slice.call(arguments,3);try{h.apply(v,Yr)}catch(Xo){this.onError(Xo)}}var Dg=!1,q1=null,T1=!1,Uy=null,T_={onError:function(f){Dg=!0,q1=f}};function B_(f,h,v,T,D,te,Se,Ke,_n){Dg=!1,q1=null,Y0.apply(T_,arguments)}function s_(f,h,v,T,D,te,Se,Ke,_n){if(B_.apply(this,arguments),Dg){if(Dg){var Yr=q1;Dg=!1,q1=null}else throw Error(n(198));T1||(T1=!0,Uy=Yr)}}function uy(f){var h=f,v=f;if(f.alternate)for(;h.return;)h=h.return;else{f=h;do h=f,(h.flags&4098)!==0&&(v=h.return),f=h.return;while(f)}return h.tag===3?v:null}function By(f){if(f.tag===13){var h=f.memoizedState;if(h===null&&(f=f.alternate,f!==null&&(h=f.memoizedState)),h!==null)return h.dehydrated}return null}function zy(f){if(uy(f)!==f)throw Error(n(188))}function $_(f){var h=f.alternate;if(!h){if(h=uy(f),h===null)throw Error(n(188));return h!==f?null:f}for(var v=f,T=h;;){var D=v.return;if(D===null)break;var te=D.alternate;if(te===null){if(T=D.return,T!==null){v=T;continue}break}if(D.child===te.child){for(te=D.child;te;){if(te===v)return zy(D),f;if(te===T)return zy(D),h;te=te.sibling}throw Error(n(188))}if(v.return!==T.return)v=D,T=te;else{for(var Se=!1,Ke=D.child;Ke;){if(Ke===v){Se=!0,v=D,T=te;break}if(Ke===T){Se=!0,T=D,v=te;break}Ke=Ke.sibling}if(!Se){for(Ke=te.child;Ke;){if(Ke===v){Se=!0,v=te,T=D;break}if(Ke===T){Se=!0,T=te,v=D;break}Ke=Ke.sibling}if(!Se)throw Error(n(189))}}if(v.alternate!==T)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?f:h}function dy(f){return f=$_(f),f!==null?Sy(f):null}function Sy(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var h=Sy(f);if(h!==null)return h;f=f.sibling}return null}var E_=e.unstable_scheduleCallback,Wy=e.unstable_cancelCallback,f1=e.unstable_shouldYield,o_=e.unstable_requestPaint,Ag=e.unstable_now,G1=e.unstable_getCurrentPriorityLevel,l_=e.unstable_ImmediatePriority,o1=e.unstable_UserBlockingPriority,_y=e.unstable_NormalPriority,Vy=e.unstable_LowPriority,y1=e.unstable_IdlePriority,wy=null,Mg=null;function $1(f){if(Mg&&typeof Mg.onCommitFiberRoot=="function")try{Mg.onCommitFiberRoot(wy,f,void 0,(f.current.flags&128)===128)}catch{}}var l1=Math.clz32?Math.clz32:S_,z_=Math.log,W_=Math.LN2;function S_(f){return f>>>=0,f===0?32:31-(z_(f)/W_|0)|0}var Ay=64,u_=4194304;function Iy(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function v0(f,h){var v=f.pendingLanes;if(v===0)return 0;var T=0,D=f.suspendedLanes,te=f.pingedLanes,Se=v&268435455;if(Se!==0){var Ke=Se&~D;Ke!==0?T=Iy(Ke):(te&=Se,te!==0&&(T=Iy(te)))}else Se=v&~D,Se!==0?T=Iy(Se):te!==0&&(T=Iy(te));if(T===0)return 0;if(h!==0&&h!==T&&(h&D)===0&&(D=T&-T,te=h&-h,D>=te||D===16&&(te&4194240)!==0))return h;if((T&4)!==0&&(T|=v&16),h=f.entangledLanes,h!==0)for(f=f.entanglements,h&=T;0<h;)v=31-l1(h),D=1<<v,T|=f[v],h&=~D;return T}function d_(f,h){switch(f){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A0(f,h){for(var v=f.suspendedLanes,T=f.pingedLanes,D=f.expirationTimes,te=f.pendingLanes;0<te;){var Se=31-l1(te),Ke=1<<Se,_n=D[Se];_n===-1?((Ke&v)===0||(Ke&T)!==0)&&(D[Se]=d_(Ke,h)):_n<=h&&(f.expiredLanes|=Ke),te&=~Ke}}function Cy(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function H1(){var f=Ay;return Ay<<=1,(Ay&4194240)===0&&(Ay=64),f}function Xg(f){for(var h=[],v=0;31>v;v++)h.push(f);return h}function cy(f,h,v){f.pendingLanes|=h,h!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,h=31-l1(h),f[h]=v}function Zy(f,h){var v=f.pendingLanes&~h;f.pendingLanes=h,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=h,f.mutableReadLanes&=h,f.entangledLanes&=h,h=f.entanglements;var T=f.eventTimes;for(f=f.expirationTimes;0<v;){var D=31-l1(v),te=1<<D;h[D]=0,T[D]=-1,f[D]=-1,v&=~te}}function by(f,h){var v=f.entangledLanes|=h;for(f=f.entanglements;v;){var T=31-l1(v),D=1<<T;D&h|f[T]&h&&(f[T]|=h),v&=~D}}var Z0=0;function Y1(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var E1,_1,qy,K1,de,E=!1,k=[],ie=null,ge=null,Le=null,Kt=new Map,Na=new Map,Uo=[],s0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n0(f,h){switch(f){case"focusin":case"focusout":ie=null;break;case"dragenter":case"dragleave":ge=null;break;case"mouseover":case"mouseout":Le=null;break;case"pointerover":case"pointerout":Kt.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Na.delete(h.pointerId)}}function _0(f,h,v,T,D,te){return f===null||f.nativeEvent!==te?(f={blockedOn:h,domEventName:v,eventSystemFlags:T,nativeEvent:te,targetContainers:[D]},h!==null&&(h=Q1(h),h!==null&&_1(h)),f):(f.eventSystemFlags|=T,h=f.targetContainers,D!==null&&h.indexOf(D)===-1&&h.push(D),f)}function ag(f,h,v,T,D){switch(h){case"focusin":return ie=_0(ie,f,h,v,T,D),!0;case"dragenter":return ge=_0(ge,f,h,v,T,D),!0;case"mouseover":return Le=_0(Le,f,h,v,T,D),!0;case"pointerover":var te=D.pointerId;return Kt.set(te,_0(Kt.get(te)||null,f,h,v,T,D)),!0;case"gotpointercapture":return te=D.pointerId,Na.set(te,_0(Na.get(te)||null,f,h,v,T,D)),!0}return!1}function Zr(f){var h=k_(f.target);if(h!==null){var v=uy(h);if(v!==null){if(h=v.tag,h===13){if(h=By(v),h!==null){f.blockedOn=h,de(f.priority,function(){qy(v)});return}}else if(h===3&&v.stateNode.current.memoizedState.isDehydrated){f.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}f.blockedOn=null}function ir(f){if(f.blockedOn!==null)return!1;for(var h=f.targetContainers;0<h.length;){var v=a2(f.domEventName,f.eventSystemFlags,h[0],f.nativeEvent);if(v===null){v=f.nativeEvent;var T=new v.constructor(v.type,v);Ge=T,v.target.dispatchEvent(T),Ge=null}else return h=Q1(v),h!==null&&_1(h),f.blockedOn=v,!1;h.shift()}return!0}function h0(f,h,v){ir(f)&&v.delete(h)}function z0(){E=!1,ie!==null&&ir(ie)&&(ie=null),ge!==null&&ir(ge)&&(ge=null),Le!==null&&ir(Le)&&(Le=null),Kt.forEach(h0),Na.forEach(h0)}function G0(f,h){f.blockedOn===h&&(f.blockedOn=null,E||(E=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,z0)))}function J0(f){function h(D){return G0(D,f)}if(0<k.length){G0(k[0],f);for(var v=1;v<k.length;v++){var T=k[v];T.blockedOn===f&&(T.blockedOn=null)}}for(ie!==null&&G0(ie,f),ge!==null&&G0(ge,f),Le!==null&&G0(Le,f),Kt.forEach(h),Na.forEach(h),v=0;v<Uo.length;v++)T=Uo[v],T.blockedOn===f&&(T.blockedOn=null);for(;0<Uo.length&&(v=Uo[0],v.blockedOn===null);)Zr(v),v.blockedOn===null&&Uo.shift()}var V_=pe.ReactCurrentBatchConfig,D2=!0;function Nv(f,h,v,T){var D=Z0,te=V_.transition;V_.transition=null;try{Z0=1,M2(f,h,v,T)}finally{Z0=D,V_.transition=te}}function Pv(f,h,v,T){var D=Z0,te=V_.transition;V_.transition=null;try{Z0=4,M2(f,h,v,T)}finally{Z0=D,V_.transition=te}}function M2(f,h,v,T){if(D2){var D=a2(f,h,v,T);if(D===null)Jx(f,h,T,F2,v),n0(f,T);else if(ag(D,f,h,v,T))T.stopPropagation();else if(n0(f,T),h&4&&-1<s0.indexOf(f)){for(;D!==null;){var te=Q1(D);if(te!==null&&E1(te),te=a2(f,h,v,T),te===null&&Jx(f,h,T,F2,v),te===D)break;D=te}D!==null&&T.stopPropagation()}else Jx(f,h,T,null,v)}}var F2=null;function a2(f,h,v,T){if(F2=null,f=An(T),f=k_(f),f!==null)if(h=uy(f),h===null)f=null;else if(v=h.tag,v===13){if(f=By(h),f!==null)return f;f=null}else if(v===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;f=null}else h!==f&&(f=null);return F2=f,null}function Gw(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(G1()){case l_:return 1;case o1:return 4;case _y:case Vy:return 16;case y1:return 536870912;default:return 16}default:return 16}}var Lg=null,s2=null,Oy=null;function uw(){if(Oy)return Oy;var f,h=s2,v=h.length,T,D="value"in Lg?Lg.value:Lg.textContent,te=D.length;for(f=0;f<v&&h[f]===D[f];f++);var Se=v-f;for(T=1;T<=Se&&h[v-T]===D[te-T];T++);return Oy=D.slice(f,1<T?1-T:void 0)}function Z_(f){var h=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&h===13&&(f=13)):f=h,f===10&&(f=13),32<=f||f===13?f:0}function D1(){return!0}function Hw(){return!1}function U1(f){function h(v,T,D,te,Se){this._reactName=v,this._targetInst=D,this.type=T,this.nativeEvent=te,this.target=Se,this.currentTarget=null;for(var Ke in f)f.hasOwnProperty(Ke)&&(v=f[Ke],this[Ke]=v?v(te):te[Ke]);return this.isDefaultPrevented=(te.defaultPrevented!=null?te.defaultPrevented:te.returnValue===!1)?D1:Hw,this.isPropagationStopped=Hw,this}return Ae(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=D1)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=D1)},persist:function(){},isPersistent:D1}),h}var A_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j2=U1(A_),o2=Ae({},A_,{view:0,detail:0}),Dv=U1(o2),M1,dw,p1,cw=Ae({},o2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pw,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==p1&&(p1&&f.type==="mousemove"?(M1=f.screenX-p1.screenX,dw=f.screenY-p1.screenY):dw=M1=0,p1=f),M1)},movementY:function(f){return"movementY"in f?f.movementY:dw}}),Yw=U1(cw),m0=Ae({},cw,{dataTransfer:0}),L2=U1(m0),l2=Ae({},o2,{relatedTarget:0}),Fg=U1(l2),S1=Ae({},A_,{animationName:0,elapsedTime:0,pseudoElement:0}),fw=U1(S1),Mv=Ae({},A_,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),U2=U1(Mv),Kw=Ae({},A_,{data:0}),Xw=U1(Kw),Fv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},u2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I_(f){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(f):(f=u2[f])?!!h[f]:!1}function pw(){return I_}var Qw=Ae({},o2,{key:function(f){if(f.key){var h=Fv[f.key]||f.key;if(h!=="Unidentified")return h}return f.type==="keypress"?(f=Z_(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?B2[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pw,charCode:function(f){return f.type==="keypress"?Z_(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?Z_(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Jw=U1(Qw),hw=Ae({},cw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z2=U1(hw),jv=Ae({},o2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pw}),mw=U1(jv),gw=Ae({},A_,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=U1(gw),ee=Ae({},cw,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),he=U1(ee),Ie=[9,13,27,32],Ye=c&&"CompositionEvent"in window,wn=null;c&&"documentMode"in document&&(wn=document.documentMode);var Pa=c&&"TextEvent"in window&&!wn,Qo=c&&(!Ye||wn&&8<wn&&11>=wn),g0=" ",l0=!1;function I0(f,h){switch(f){case"keyup":return Ie.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cg(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var $g=!1;function Kr(f,h){switch(f){case"compositionend":return Cg(h);case"keypress":return h.which!==32?null:(l0=!0,g0);case"textInput":return f=h.data,f===g0&&l0?null:f;default:return null}}function q0(f,h){if($g)return f==="compositionend"||!Ye&&I0(f,h)?(f=uw(),Oy=s2=Lg=null,$g=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Qo&&h.locale!=="ko"?null:h.data;default:return null}}var Ig={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gy(f){var h=f&&f.nodeName&&f.nodeName.toLowerCase();return h==="input"?!!Ig[f.type]:h==="textarea"}function yw(f,h,v,T){j0(T),h=Gv(h,"onChange"),0<h.length&&(v=new j2("onChange","change",null,v,T),f.push({event:v,listeners:h}))}var Hy=null,d2=null;function u$(f){uT(f,0)}function Lv(f){var h=K0(f);if(Sg(h))return f}function d$(f,h){if(f==="change")return h}var W2=!1;if(c){var ky;if(c){var Uv="oninput"in document;if(!Uv){var rT=document.createElement("div");rT.setAttribute("oninput","return;"),Uv=typeof rT.oninput=="function"}ky=Uv}else ky=!1;W2=ky&&(!document.documentMode||9<document.documentMode)}function iT(){Hy&&(Hy.detachEvent("onpropertychange",aT),d2=Hy=null)}function aT(f){if(f.propertyName==="value"&&Lv(d2)){var h=[];yw(h,d2,f,An(f)),yy(u$,h)}}function c$(f,h,v){f==="focusin"?(iT(),Hy=h,d2=v,Hy.attachEvent("onpropertychange",aT)):f==="focusout"&&iT()}function f$(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Lv(d2)}function c2(f,h){if(f==="click")return Lv(h)}function In(f,h){if(f==="input"||f==="change")return Lv(h)}function Ro(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var qr=typeof Object.is=="function"?Object.is:Ro;function c0(f,h){if(qr(f,h))return!0;if(typeof f!="object"||f===null||typeof h!="object"||h===null)return!1;var v=Object.keys(f),T=Object.keys(h);if(v.length!==T.length)return!1;for(T=0;T<v.length;T++){var D=v[T];if(!p.call(h,D)||!qr(f[D],h[D]))return!1}return!0}function W0(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Rg(f,h){var v=W0(f);f=0;for(var T;v;){if(v.nodeType===3){if(T=f+v.textContent.length,f<=h&&T>=h)return{node:v,offset:h-f};f=T}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=W0(v)}}function w1(f,h){return f&&h?f===h?!0:f&&f.nodeType===3?!1:h&&h.nodeType===3?w1(f,h.parentNode):"contains"in f?f.contains(h):f.compareDocumentPosition?!!(f.compareDocumentPosition(h)&16):!1:!1}function Wg(){for(var f=window,h=n1();h instanceof f.HTMLIFrameElement;){try{var v=typeof h.contentWindow.location.href=="string"}catch{v=!1}if(v)f=h.contentWindow;else break;h=n1(f.document)}return h}function Wb(f){var h=f&&f.nodeName&&f.nodeName.toLowerCase();return h&&(h==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||h==="textarea"||f.contentEditable==="true")}function p$(f){var h=Wg(),v=f.focusedElem,T=f.selectionRange;if(h!==v&&v&&v.ownerDocument&&w1(v.ownerDocument.documentElement,v)){if(T!==null&&Wb(v)){if(h=T.start,f=T.end,f===void 0&&(f=h),"selectionStart"in v)v.selectionStart=h,v.selectionEnd=Math.min(f,v.value.length);else if(f=(h=v.ownerDocument||document)&&h.defaultView||window,f.getSelection){f=f.getSelection();var D=v.textContent.length,te=Math.min(T.start,D);T=T.end===void 0?te:Math.min(T.end,D),!f.extend&&te>T&&(D=T,T=te,te=D),D=Rg(v,te);var Se=Rg(v,T);D&&Se&&(f.rangeCount!==1||f.anchorNode!==D.node||f.anchorOffset!==D.offset||f.focusNode!==Se.node||f.focusOffset!==Se.offset)&&(h=h.createRange(),h.setStart(D.node,D.offset),f.removeAllRanges(),te>T?(f.addRange(h),f.extend(Se.node,Se.offset)):(h.setEnd(Se.node,Se.offset),f.addRange(h)))}}for(h=[],f=v;f=f.parentNode;)f.nodeType===1&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<h.length;v++)f=h[v],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var Yy=c&&"documentMode"in document&&11>=document.documentMode,q_=null,Kx=null,C_=null,_w=!1;function Hb(f,h,v){var T=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;_w||q_==null||q_!==n1(T)||(T=q_,"selectionStart"in T&&Wb(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),C_&&c0(C_,T)||(C_=T,T=Gv(Kx,"onSelect"),0<T.length&&(h=new j2("onSelect","select",null,h,v),f.push({event:h,listeners:T}),h.target=q_)))}function Ng(f,h){var v={};return v[f.toLowerCase()]=h.toLowerCase(),v["Webkit"+f]="webkit"+h,v["Moz"+f]="moz"+h,v}var ww={animationend:Ng("Animation","AnimationEnd"),animationiteration:Ng("Animation","AnimationIteration"),animationstart:Ng("Animation","AnimationStart"),transitionend:Ng("Transition","TransitionEnd")},Bv={},ev={};c&&(ev=document.createElement("div").style,"AnimationEvent"in window||(delete ww.animationend.animation,delete ww.animationiteration.animation,delete ww.animationstart.animation),"TransitionEvent"in window||delete ww.transitionend.transition);function zv(f){if(Bv[f])return Bv[f];if(!ww[f])return f;var h=ww[f],v;for(v in h)if(h.hasOwnProperty(v)&&v in ev)return Bv[f]=h[v];return f}var sT=zv("animationend"),oT=zv("animationiteration"),tv=zv("animationstart"),G_=zv("transitionend"),nv=new Map,Xx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function c_(f,h){nv.set(f,h),a(h,[f])}for(var Wv=0;Wv<Xx.length;Wv++){var Vv=Xx[Wv],Zv=Vv.toLowerCase(),lT=Vv[0].toUpperCase()+Vv.slice(1);c_(Zv,"on"+lT)}c_(sT,"onAnimationEnd"),c_(oT,"onAnimationIteration"),c_(tv,"onAnimationStart"),c_("dblclick","onDoubleClick"),c_("focusin","onFocus"),c_("focusout","onBlur"),c_(G_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var H_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V2=new Set("cancel close invalid load scroll toggle".split(" ").concat(H_));function rv(f,h,v){var T=f.type||"unknown-event";f.currentTarget=v,s_(T,h,void 0,f),f.currentTarget=null}function uT(f,h){h=(h&4)!==0;for(var v=0;v<f.length;v++){var T=f[v],D=T.event;T=T.listeners;e:{var te=void 0;if(h)for(var Se=T.length-1;0<=Se;Se--){var Ke=T[Se],_n=Ke.instance,Yr=Ke.currentTarget;if(Ke=Ke.listener,_n!==te&&D.isPropagationStopped())break e;rv(D,Ke,Yr),te=_n}else for(Se=0;Se<T.length;Se++){if(Ke=T[Se],_n=Ke.instance,Yr=Ke.currentTarget,Ke=Ke.listener,_n!==te&&D.isPropagationStopped())break e;rv(D,Ke,Yr),te=_n}}}if(T1)throw f=Uy,T1=!1,Uy=null,f}function Qg(f,h){var v=h[Kv];v===void 0&&(v=h[Kv]=new Set);var T=f+"__bubble";v.has(T)||(qv(h,f,2,!1),v.add(T))}function Qx(f,h,v){var T=0;h&&(T|=4),qv(v,f,T,h)}var Z2="_reactListening"+Math.random().toString(36).slice(2);function f2(f){if(!f[Z2]){f[Z2]=!0,i.forEach(function(v){v!=="selectionchange"&&(V2.has(v)||Qx(v,!1,f),Qx(v,!0,f))});var h=f.nodeType===9?f:f.ownerDocument;h===null||h[Z2]||(h[Z2]=!0,Qx("selectionchange",!1,h))}}function qv(f,h,v,T){switch(Gw(h)){case 1:var D=Nv;break;case 4:D=Pv;break;default:D=M2}v=D.bind(null,h,v,f),D=void 0,!Hr||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(D=!0),T?D!==void 0?f.addEventListener(h,v,{capture:!0,passive:D}):f.addEventListener(h,v,!0):D!==void 0?f.addEventListener(h,v,{passive:D}):f.addEventListener(h,v,!1)}function Jx(f,h,v,T,D){var te=T;if((h&1)===0&&(h&2)===0&&T!==null)e:for(;;){if(T===null)return;var Se=T.tag;if(Se===3||Se===4){var Ke=T.stateNode.containerInfo;if(Ke===D||Ke.nodeType===8&&Ke.parentNode===D)break;if(Se===4)for(Se=T.return;Se!==null;){var _n=Se.tag;if((_n===3||_n===4)&&(_n=Se.stateNode.containerInfo,_n===D||_n.nodeType===8&&_n.parentNode===D))return;Se=Se.return}for(;Ke!==null;){if(Se=k_(Ke),Se===null)return;if(_n=Se.tag,_n===5||_n===6){T=te=Se;continue e}Ke=Ke.parentNode}}T=T.return}yy(function(){var Yr=te,Xo=An(v),e0=[];e:{var Go=nv.get(f);if(Go!==void 0){var f0=j2,w0=f;switch(f){case"keypress":if(Z_(v)===0)break e;case"keydown":case"keyup":f0=Jw;break;case"focusin":w0="focus",f0=Fg;break;case"focusout":w0="blur",f0=Fg;break;case"beforeblur":case"afterblur":f0=Fg;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f0=Yw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f0=L2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f0=mw;break;case sT:case oT:case tv:f0=fw;break;case G_:f0=A;break;case"scroll":f0=Dv;break;case"wheel":f0=he;break;case"copy":case"cut":case"paste":f0=U2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f0=z2}var x0=(h&4)!==0,h1=!x0&&f==="scroll",or=x0?Go!==null?Go+"Capture":null:Go;x0=[];for(var Tn=Yr,Ir;Tn!==null;){Ir=Tn;var r0=Ir.stateNode;if(Ir.tag===5&&r0!==null&&(Ir=r0,or!==null&&(r0=s1(Tn,or),r0!=null&&x0.push(bw(Tn,r0,Ir)))),h1)break;Tn=Tn.return}0<x0.length&&(Go=new f0(Go,w0,null,v,Xo),e0.push({event:Go,listeners:x0}))}}if((h&7)===0){e:{if(Go=f==="mouseover"||f==="pointerover",f0=f==="mouseout"||f==="pointerout",Go&&v!==Ge&&(w0=v.relatedTarget||v.fromElement)&&(k_(w0)||w0[Ry]))break e;if((f0||Go)&&(Go=Xo.window===Xo?Xo:(Go=Xo.ownerDocument)?Go.defaultView||Go.parentWindow:window,f0?(w0=v.relatedTarget||v.toElement,f0=Yr,w0=w0?k_(w0):null,w0!==null&&(h1=uy(w0),w0!==h1||w0.tag!==5&&w0.tag!==6)&&(w0=null)):(f0=null,w0=Yr),f0!==w0)){if(x0=Yw,r0="onMouseLeave",or="onMouseEnter",Tn="mouse",(f==="pointerout"||f==="pointerover")&&(x0=z2,r0="onPointerLeave",or="onPointerEnter",Tn="pointer"),h1=f0==null?Go:K0(f0),Ir=w0==null?Go:K0(w0),Go=new x0(r0,Tn+"leave",f0,v,Xo),Go.target=h1,Go.relatedTarget=Ir,r0=null,k_(Xo)===Yr&&(x0=new x0(or,Tn+"enter",w0,v,Xo),x0.target=Ir,x0.relatedTarget=h1,r0=x0),h1=r0,f0&&w0)t:{for(x0=f0,or=w0,Tn=0,Ir=x0;Ir;Ir=vw(Ir))Tn++;for(Ir=0,r0=or;r0;r0=vw(r0))Ir++;for(;0<Tn-Ir;)x0=vw(x0),Tn--;for(;0<Ir-Tn;)or=vw(or),Ir--;for(;Tn--;){if(x0===or||or!==null&&x0===or.alternate)break t;x0=vw(x0),or=vw(or)}x0=null}else x0=null;f0!==null&&b1(e0,Go,f0,x0,!1),w0!==null&&h1!==null&&b1(e0,h1,w0,x0,!0)}}e:{if(Go=Yr?K0(Yr):window,f0=Go.nodeName&&Go.nodeName.toLowerCase(),f0==="select"||f0==="input"&&Go.type==="file")var T0=d$;else if(Gy(Go))if(W2)T0=In;else{T0=f$;var O0=c$}else(f0=Go.nodeName)&&f0.toLowerCase()==="input"&&(Go.type==="checkbox"||Go.type==="radio")&&(T0=c2);if(T0&&(T0=T0(f,Yr))){yw(e0,T0,v,Xo);break e}O0&&O0(f,Go,Yr),f==="focusout"&&(O0=Go._wrapperState)&&O0.controlled&&Go.type==="number"&&N0(Go,"number",Go.value)}switch(O0=Yr?K0(Yr):window,f){case"focusin":(Gy(O0)||O0.contentEditable==="true")&&(q_=O0,Kx=Yr,C_=null);break;case"focusout":C_=Kx=q_=null;break;case"mousedown":_w=!0;break;case"contextmenu":case"mouseup":case"dragend":_w=!1,Hb(e0,v,Xo);break;case"selectionchange":if(Yy)break;case"keydown":case"keyup":Hb(e0,v,Xo)}var R0;if(Ye)e:{switch(f){case"compositionstart":var L0="onCompositionStart";break e;case"compositionend":L0="onCompositionEnd";break e;case"compositionupdate":L0="onCompositionUpdate";break e}L0=void 0}else $g?I0(f,v)&&(L0="onCompositionEnd"):f==="keydown"&&v.keyCode===229&&(L0="onCompositionStart");L0&&(Qo&&v.locale!=="ko"&&($g||L0!=="onCompositionStart"?L0==="onCompositionEnd"&&$g&&(R0=uw()):(Lg=Xo,s2="value"in Lg?Lg.value:Lg.textContent,$g=!0)),O0=Gv(Yr,L0),0<O0.length&&(L0=new Xw(L0,f,null,v,Xo),e0.push({event:L0,listeners:O0}),R0?L0.data=R0:(R0=Cg(v),R0!==null&&(L0.data=R0)))),(R0=Pa?Kr(f,v):q0(f,v))&&(Yr=Gv(Yr,"onBeforeInput"),0<Yr.length&&(Xo=new Xw("onBeforeInput","beforeinput",null,v,Xo),e0.push({event:Xo,listeners:Yr}),Xo.data=R0))}uT(e0,h)})}function bw(f,h,v){return{instance:f,listener:h,currentTarget:v}}function Gv(f,h){for(var v=h+"Capture",T=[];f!==null;){var D=f,te=D.stateNode;D.tag===5&&te!==null&&(D=te,te=s1(f,v),te!=null&&T.unshift(bw(f,te,D)),te=s1(f,h),te!=null&&T.push(bw(f,te,D))),f=f.return}return T}function vw(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function b1(f,h,v,T,D){for(var te=h._reactName,Se=[];v!==null&&v!==T;){var Ke=v,_n=Ke.alternate,Yr=Ke.stateNode;if(_n!==null&&_n===T)break;Ke.tag===5&&Yr!==null&&(Ke=Yr,D?(_n=s1(v,te),_n!=null&&Se.unshift(bw(v,_n,Ke))):D||(_n=s1(v,te),_n!=null&&Se.push(bw(v,_n,Ke)))),v=v.return}Se.length!==0&&f.push({event:h,listeners:Se})}var X1=/\r\n?/g,m$=/\u0000|\uFFFD/g;function dT(f){return(typeof f=="string"?f:""+f).replace(X1,`
`).replace(m$,"")}function iv(f,h,v){if(h=dT(h),dT(f)!==h&&v)throw Error(n(425))}function Hv(){}var av=null,q2=null;function sv(f,h){return f==="textarea"||f==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var p2=typeof setTimeout=="function"?setTimeout:void 0,ov=typeof clearTimeout=="function"?clearTimeout:void 0,xw=typeof Promise=="function"?Promise:void 0,Yv=typeof queueMicrotask=="function"?queueMicrotask:typeof xw<"u"?function(f){return xw.resolve(null).then(f).catch(Tw)}:p2;function Tw(f){setTimeout(function(){throw f})}function e3(f,h){var v=h,T=0;do{var D=v.nextSibling;if(f.removeChild(v),D&&D.nodeType===8)if(v=D.data,v==="/$"){if(T===0){f.removeChild(D),J0(h);return}T--}else v!=="$"&&v!=="$?"&&v!=="$!"||T++;v=D}while(v);J0(h)}function h2(f){for(;f!=null;f=f.nextSibling){var h=f.nodeType;if(h===1||h===3)break;if(h===8){if(h=f.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return f}function cT(f){f=f.previousSibling;for(var h=0;f;){if(f.nodeType===8){var v=f.data;if(v==="$"||v==="$!"||v==="$?"){if(h===0)return f;h--}else v==="/$"&&h++}f=f.previousSibling}return null}var $w=Math.random().toString(36).slice(2),O_="__reactFiber$"+$w,m2="__reactProps$"+$w,Ry="__reactContainer$"+$w,Kv="__reactEvents$"+$w,je="__reactListeners$"+$w,Ew="__reactHandles$"+$w;function k_(f){var h=f[O_];if(h)return h;for(var v=f.parentNode;v;){if(h=v[Ry]||v[O_]){if(v=h.alternate,h.child!==null||v!==null&&v.child!==null)for(f=cT(f);f!==null;){if(v=f[O_])return v;f=cT(f)}return h}f=v,v=f.parentNode}return null}function Q1(f){return f=f[O_]||f[Ry],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function K0(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(n(33))}function Xv(f){return f[m2]||null}var t3=[],Sw=-1;function vy(f){return{current:f}}function Jg(f){0>Sw||(f.current=t3[Sw],t3[Sw]=null,Sw--)}function Yg(f,h){Sw++,t3[Sw]=f.current,f.current=h}var g2={},J1=vy(g2),xy=vy(!1),fy=g2;function Aw(f,h){var v=f.type.contextTypes;if(!v)return g2;var T=f.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===h)return T.__reactInternalMemoizedMaskedChildContext;var D={},te;for(te in v)D[te]=h[te];return T&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=h,f.__reactInternalMemoizedMaskedChildContext=D),D}function Ty(f){return f=f.childContextTypes,f!=null}function Qv(){Jg(xy),Jg(J1)}function fT(f,h,v){if(J1.current!==g2)throw Error(n(168));Yg(J1,h),Yg(xy,v)}function pT(f,h,v){var T=f.stateNode;if(h=h.childContextTypes,typeof T.getChildContext!="function")return v;T=T.getChildContext();for(var D in T)if(!(D in h))throw Error(n(108,o0(f)||"Unknown",D));return Ae({},v,T)}function Ky(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||g2,fy=J1.current,Yg(J1,f),Yg(xy,xy.current),!0}function hT(f,h,v){var T=f.stateNode;if(!T)throw Error(n(169));v?(f=pT(f,h,fy),T.__reactInternalMemoizedMergedChildContext=f,Jg(xy),Jg(J1),Yg(J1,f)):Jg(xy),Yg(xy,v)}var Y_=null,Jv=!1,n3=!1;function mT(f){Y_===null?Y_=[f]:Y_.push(f)}function G2(f){Jv=!0,mT(f)}function y2(){if(!n3&&Y_!==null){n3=!0;var f=0,h=Z0;try{var v=Y_;for(Z0=1;f<v.length;f++){var T=v[f];do T=T(!0);while(T!==null)}Y_=null,Jv=!1}catch(D){throw Y_!==null&&(Y_=Y_.slice(f+1)),E_(l_,y2),D}finally{Z0=h,n3=!1}}return null}var Iw=[],ey=0,ex=null,tx=0,Xy=[],Qy=0,H2=null,R_=1,N_="";function Y2(f,h){Iw[ey++]=tx,Iw[ey++]=ex,ex=f,tx=h}function gT(f,h,v){Xy[Qy++]=R_,Xy[Qy++]=N_,Xy[Qy++]=H2,H2=f;var T=R_;f=N_;var D=32-l1(T)-1;T&=~(1<<D),v+=1;var te=32-l1(h)+D;if(30<te){var Se=D-D%5;te=(T&(1<<Se)-1).toString(32),T>>=Se,D-=Se,R_=1<<32-l1(h)+D|v<<D|T,N_=te+f}else R_=1<<te|v<<D|T,N_=f}function lv(f){f.return!==null&&(Y2(f,1),gT(f,1,0))}function K2(f){for(;f===ex;)ex=Iw[--ey],Iw[ey]=null,tx=Iw[--ey],Iw[ey]=null;for(;f===H2;)H2=Xy[--Qy],Xy[Qy]=null,N_=Xy[--Qy],Xy[Qy]=null,R_=Xy[--Qy],Xy[Qy]=null}var ty=null,Ny=null,e1=!1,f_=null;function P_(f,h){var v=jy(5,null,null,0);v.elementType="DELETED",v.stateNode=h,v.return=f,h=f.deletions,h===null?(f.deletions=[v],f.flags|=16):h.push(v)}function nx(f,h){switch(f.tag){case 5:var v=f.type;return h=h.nodeType!==1||v.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(f.stateNode=h,ty=f,Ny=h2(h.firstChild),!0):!1;case 6:return h=f.pendingProps===""||h.nodeType!==3?null:h,h!==null?(f.stateNode=h,ty=f,Ny=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(v=H2!==null?{id:R_,overflow:N_}:null,f.memoizedState={dehydrated:h,treeContext:v,retryLane:1073741824},v=jy(18,null,null,0),v.stateNode=h,v.return=f,f.child=v,ty=f,Ny=null,!0):!1;default:return!1}}function K_(f){return(f.mode&1)!==0&&(f.flags&128)===0}function $y(f){if(e1){var h=Ny;if(h){var v=h;if(!nx(f,h)){if(K_(f))throw Error(n(418));h=h2(v.nextSibling);var T=ty;h&&nx(f,h)?P_(T,v):(f.flags=f.flags&-4097|2,e1=!1,ty=f)}}else{if(K_(f))throw Error(n(418));f.flags=f.flags&-4097|2,e1=!1,ty=f}}}function yT(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;ty=f}function uv(f){if(f!==ty)return!1;if(!e1)return yT(f),e1=!0,!1;var h;if((h=f.tag!==3)&&!(h=f.tag!==5)&&(h=f.type,h=h!=="head"&&h!=="body"&&!sv(f.type,f.memoizedProps)),h&&(h=Ny)){if(K_(f))throw r3(),Error(n(418));for(;h;)P_(f,h),h=h2(h.nextSibling)}if(yT(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,h=0;f;){if(f.nodeType===8){var v=f.data;if(v==="/$"){if(h===0){Ny=h2(f.nextSibling);break e}h--}else v!=="$"&&v!=="$!"&&v!=="$?"||h++}f=f.nextSibling}Ny=null}}else Ny=ty?h2(f.stateNode.nextSibling):null;return!0}function r3(){for(var f=Ny;f;)f=h2(f.nextSibling)}function D_(){Ny=ty=null,e1=!1}function M_(f){f_===null?f_=[f]:f_.push(f)}var _T=pe.ReactCurrentBatchConfig;function p_(f,h){if(f&&f.defaultProps){h=Ae({},h),f=f.defaultProps;for(var v in f)h[v]===void 0&&(h[v]=f[v]);return h}return h}var X2=vy(null),rx=null,Q2=null,A1=null;function dv(){A1=Q2=rx=null}function ix(f){var h=X2.current;Jg(X2),f._currentValue=h}function Jy(f,h,v){for(;f!==null;){var T=f.alternate;if((f.childLanes&h)!==h?(f.childLanes|=h,T!==null&&(T.childLanes|=h)):T!==null&&(T.childLanes&h)!==h&&(T.childLanes|=h),f===v)break;f=f.return}}function _2(f,h){rx=f,A1=Q2=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&h)!==0&&(iy=!0),f.firstContext=null)}function py(f){var h=f._currentValue;if(A1!==f)if(f={context:f,memoizedValue:h,next:null},Q2===null){if(rx===null)throw Error(n(308));Q2=f,rx.dependencies={lanes:0,firstContext:f}}else Q2=Q2.next=f;return h}var Py=null;function ax(f){Py===null?Py=[f]:Py.push(f)}function ny(f,h,v,T){var D=h.interleaved;return D===null?(v.next=v,ax(h)):(v.next=D.next,D.next=v),h.interleaved=v,h_(f,T)}function h_(f,h){f.lanes|=h;var v=f.alternate;for(v!==null&&(v.lanes|=h),v=f,f=f.return;f!==null;)f.childLanes|=h,v=f.alternate,v!==null&&(v.childLanes|=h),v=f,f=f.return;return v.tag===3?v.stateNode:null}var w2=!1;function i3(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wT(f,h){f=f.updateQueue,h.updateQueue===f&&(h.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function m_(f,h){return{eventTime:f,lane:h,tag:0,payload:null,callback:null,next:null}}function b2(f,h,v){var T=f.updateQueue;if(T===null)return null;if(T=T.shared,(Og&2)!==0){var D=T.pending;return D===null?h.next=h:(h.next=D.next,D.next=h),T.pending=h,h_(f,v)}return D=T.interleaved,D===null?(h.next=h,ax(T)):(h.next=D.next,D.next=h),T.interleaved=h,h_(f,v)}function v2(f,h,v){if(h=h.updateQueue,h!==null&&(h=h.shared,(v&4194240)!==0)){var T=h.lanes;T&=f.pendingLanes,v|=T,h.lanes=v,by(f,v)}}function a3(f,h){var v=f.updateQueue,T=f.alternate;if(T!==null&&(T=T.updateQueue,v===T)){var D=null,te=null;if(v=v.firstBaseUpdate,v!==null){do{var Se={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};te===null?D=te=Se:te=te.next=Se,v=v.next}while(v!==null);te===null?D=te=h:te=te.next=h}else D=te=h;v={baseState:T.baseState,firstBaseUpdate:D,lastBaseUpdate:te,shared:T.shared,effects:T.effects},f.updateQueue=v;return}f=v.lastBaseUpdate,f===null?v.firstBaseUpdate=h:f.next=h,v.lastBaseUpdate=h}function sx(f,h,v,T){var D=f.updateQueue;w2=!1;var te=D.firstBaseUpdate,Se=D.lastBaseUpdate,Ke=D.shared.pending;if(Ke!==null){D.shared.pending=null;var _n=Ke,Yr=_n.next;_n.next=null,Se===null?te=Yr:Se.next=Yr,Se=_n;var Xo=f.alternate;Xo!==null&&(Xo=Xo.updateQueue,Ke=Xo.lastBaseUpdate,Ke!==Se&&(Ke===null?Xo.firstBaseUpdate=Yr:Ke.next=Yr,Xo.lastBaseUpdate=_n))}if(te!==null){var e0=D.baseState;Se=0,Xo=Yr=_n=null,Ke=te;do{var Go=Ke.lane,f0=Ke.eventTime;if((T&Go)===Go){Xo!==null&&(Xo=Xo.next={eventTime:f0,lane:0,tag:Ke.tag,payload:Ke.payload,callback:Ke.callback,next:null});e:{var w0=f,x0=Ke;switch(Go=h,f0=v,x0.tag){case 1:if(w0=x0.payload,typeof w0=="function"){e0=w0.call(f0,e0,Go);break e}e0=w0;break e;case 3:w0.flags=w0.flags&-65537|128;case 0:if(w0=x0.payload,Go=typeof w0=="function"?w0.call(f0,e0,Go):w0,Go==null)break e;e0=Ae({},e0,Go);break e;case 2:w2=!0}}Ke.callback!==null&&Ke.lane!==0&&(f.flags|=64,Go=D.effects,Go===null?D.effects=[Ke]:Go.push(Ke))}else f0={eventTime:f0,lane:Go,tag:Ke.tag,payload:Ke.payload,callback:Ke.callback,next:null},Xo===null?(Yr=Xo=f0,_n=e0):Xo=Xo.next=f0,Se|=Go;if(Ke=Ke.next,Ke===null){if(Ke=D.shared.pending,Ke===null)break;Go=Ke,Ke=Go.next,Go.next=null,D.lastBaseUpdate=Go,D.shared.pending=null}}while(!0);if(Xo===null&&(_n=e0),D.baseState=_n,D.firstBaseUpdate=Yr,D.lastBaseUpdate=Xo,h=D.shared.interleaved,h!==null){D=h;do Se|=D.lane,D=D.next;while(D!==h)}else te===null&&(D.shared.lanes=0);I2|=Se,f.lanes=Se,f.memoizedState=e0}}function bT(f,h,v){if(f=h.effects,h.effects=null,f!==null)for(h=0;h<f.length;h++){var T=f[h],D=T.callback;if(D!==null){if(T.callback=null,T=v,typeof D!="function")throw Error(n(191,D));D.call(T)}}}var Cw=new t.Component().refs;function s3(f,h,v,T){h=f.memoizedState,v=v(T,h),v=v==null?h:Ae({},h,v),f.memoizedState=v,f.lanes===0&&(f.updateQueue.baseState=v)}var ox={isMounted:function(f){return(f=f._reactInternals)?uy(f)===f:!1},enqueueSetState:function(f,h,v){f=f._reactInternals;var T=gy(),D=O2(f),te=m_(T,D);te.payload=h,v!=null&&(te.callback=v),h=b2(f,te,D),h!==null&&(w_(h,f,D,T),v2(h,f,D))},enqueueReplaceState:function(f,h,v){f=f._reactInternals;var T=gy(),D=O2(f),te=m_(T,D);te.tag=1,te.payload=h,v!=null&&(te.callback=v),h=b2(f,te,D),h!==null&&(w_(h,f,D,T),v2(h,f,D))},enqueueForceUpdate:function(f,h){f=f._reactInternals;var v=gy(),T=O2(f),D=m_(v,T);D.tag=2,h!=null&&(D.callback=h),h=b2(f,D,T),h!==null&&(w_(h,f,T,v),v2(h,f,T))}};function lx(f,h,v,T,D,te,Se){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(T,te,Se):h.prototype&&h.prototype.isPureReactComponent?!c0(v,T)||!c0(D,te):!0}function o3(f,h,v){var T=!1,D=g2,te=h.contextType;return typeof te=="object"&&te!==null?te=py(te):(D=Ty(h)?fy:J1.current,T=h.contextTypes,te=(T=T!=null)?Aw(f,D):g2),h=new h(v,te),f.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=ox,f.stateNode=h,h._reactInternals=f,T&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=D,f.__reactInternalMemoizedMaskedChildContext=te),h}function vT(f,h,v,T){f=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(v,T),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(v,T),h.state!==f&&ox.enqueueReplaceState(h,h.state,null)}function l3(f,h,v,T){var D=f.stateNode;D.props=v,D.state=f.memoizedState,D.refs=Cw,i3(f);var te=h.contextType;typeof te=="object"&&te!==null?D.context=py(te):(te=Ty(h)?fy:J1.current,D.context=Aw(f,te)),D.state=f.memoizedState,te=h.getDerivedStateFromProps,typeof te=="function"&&(s3(f,h,te,v),D.state=f.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(h=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),h!==D.state&&ox.enqueueReplaceState(D,D.state,null),sx(f,v,D,T),D.state=f.memoizedState),typeof D.componentDidMount=="function"&&(f.flags|=4194308)}function cv(f,h,v){if(f=v.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(n(309));var T=v.stateNode}if(!T)throw Error(n(147,f));var D=T,te=""+f;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===te?h.ref:(h=function(Se){var Ke=D.refs;Ke===Cw&&(Ke=D.refs={}),Se===null?delete Ke[te]:Ke[te]=Se},h._stringRef=te,h)}if(typeof f!="string")throw Error(n(284));if(!v._owner)throw Error(n(290,f))}return f}function fv(f,h){throw f=Object.prototype.toString.call(h),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":f))}function ux(f){var h=f._init;return h(f._payload)}function xT(f){function h(or,Tn){if(f){var Ir=or.deletions;Ir===null?(or.deletions=[Tn],or.flags|=16):Ir.push(Tn)}}function v(or,Tn){if(!f)return null;for(;Tn!==null;)h(or,Tn),Tn=Tn.sibling;return null}function T(or,Tn){for(or=new Map;Tn!==null;)Tn.key!==null?or.set(Tn.key,Tn):or.set(Tn.index,Tn),Tn=Tn.sibling;return or}function D(or,Tn){return or=N2(or,Tn),or.index=0,or.sibling=null,or}function te(or,Tn,Ir){return or.index=Ir,f?(Ir=or.alternate,Ir!==null?(Ir=Ir.index,Ir<Tn?(or.flags|=2,Tn):Ir):(or.flags|=2,Tn)):(or.flags|=1048576,Tn)}function Se(or){return f&&or.alternate===null&&(or.flags|=2),or}function Ke(or,Tn,Ir,r0){return Tn===null||Tn.tag!==6?(Tn=Z3(Ir,or.mode,r0),Tn.return=or,Tn):(Tn=D(Tn,Ir),Tn.return=or,Tn)}function _n(or,Tn,Ir,r0){var T0=Ir.type;return T0===Oe?Xo(or,Tn,Ir.props.children,r0,Ir.key):Tn!==null&&(Tn.elementType===T0||typeof T0=="object"&&T0!==null&&T0.$$typeof===Ft&&ux(T0)===Tn.type)?(r0=D(Tn,Ir.props),r0.ref=cv(or,Tn,Ir),r0.return=or,r0):(r0=jx(Ir.type,Ir.key,Ir.props,null,or.mode,r0),r0.ref=cv(or,Tn,Ir),r0.return=or,r0)}function Yr(or,Tn,Ir,r0){return Tn===null||Tn.tag!==4||Tn.stateNode.containerInfo!==Ir.containerInfo||Tn.stateNode.implementation!==Ir.implementation?(Tn=q3(Ir,or.mode,r0),Tn.return=or,Tn):(Tn=D(Tn,Ir.children||[]),Tn.return=or,Tn)}function Xo(or,Tn,Ir,r0,T0){return Tn===null||Tn.tag!==7?(Tn=aw(Ir,or.mode,r0,T0),Tn.return=or,Tn):(Tn=D(Tn,Ir),Tn.return=or,Tn)}function e0(or,Tn,Ir){if(typeof Tn=="string"&&Tn!==""||typeof Tn=="number")return Tn=Z3(""+Tn,or.mode,Ir),Tn.return=or,Tn;if(typeof Tn=="object"&&Tn!==null){switch(Tn.$$typeof){case se:return Ir=jx(Tn.type,Tn.key,Tn.props,null,or.mode,Ir),Ir.ref=cv(or,null,Tn),Ir.return=or,Ir;case Re:return Tn=q3(Tn,or.mode,Ir),Tn.return=or,Tn;case Ft:var r0=Tn._init;return e0(or,r0(Tn._payload),Ir)}if(F0(Tn)||Ht(Tn))return Tn=aw(Tn,or.mode,Ir,null),Tn.return=or,Tn;fv(or,Tn)}return null}function Go(or,Tn,Ir,r0){var T0=Tn!==null?Tn.key:null;if(typeof Ir=="string"&&Ir!==""||typeof Ir=="number")return T0!==null?null:Ke(or,Tn,""+Ir,r0);if(typeof Ir=="object"&&Ir!==null){switch(Ir.$$typeof){case se:return Ir.key===T0?_n(or,Tn,Ir,r0):null;case Re:return Ir.key===T0?Yr(or,Tn,Ir,r0):null;case Ft:return T0=Ir._init,Go(or,Tn,T0(Ir._payload),r0)}if(F0(Ir)||Ht(Ir))return T0!==null?null:Xo(or,Tn,Ir,r0,null);fv(or,Ir)}return null}function f0(or,Tn,Ir,r0,T0){if(typeof r0=="string"&&r0!==""||typeof r0=="number")return or=or.get(Ir)||null,Ke(Tn,or,""+r0,T0);if(typeof r0=="object"&&r0!==null){switch(r0.$$typeof){case se:return or=or.get(r0.key===null?Ir:r0.key)||null,_n(Tn,or,r0,T0);case Re:return or=or.get(r0.key===null?Ir:r0.key)||null,Yr(Tn,or,r0,T0);case Ft:var O0=r0._init;return f0(or,Tn,Ir,O0(r0._payload),T0)}if(F0(r0)||Ht(r0))return or=or.get(Ir)||null,Xo(Tn,or,r0,T0,null);fv(Tn,r0)}return null}function w0(or,Tn,Ir,r0){for(var T0=null,O0=null,R0=Tn,L0=Tn=0,j1=null;R0!==null&&L0<Ir.length;L0++){R0.index>L0?(j1=R0,R0=null):j1=R0.sibling;var Pg=Go(or,R0,Ir[L0],r0);if(Pg===null){R0===null&&(R0=j1);break}f&&R0&&Pg.alternate===null&&h(or,R0),Tn=te(Pg,Tn,L0),O0===null?T0=Pg:O0.sibling=Pg,O0=Pg,R0=j1}if(L0===Ir.length)return v(or,R0),e1&&Y2(or,L0),T0;if(R0===null){for(;L0<Ir.length;L0++)R0=e0(or,Ir[L0],r0),R0!==null&&(Tn=te(R0,Tn,L0),O0===null?T0=R0:O0.sibling=R0,O0=R0);return e1&&Y2(or,L0),T0}for(R0=T(or,R0);L0<Ir.length;L0++)j1=f0(R0,or,L0,Ir[L0],r0),j1!==null&&(f&&j1.alternate!==null&&R0.delete(j1.key===null?L0:j1.key),Tn=te(j1,Tn,L0),O0===null?T0=j1:O0.sibling=j1,O0=j1);return f&&R0.forEach(function(P2){return h(or,P2)}),e1&&Y2(or,L0),T0}function x0(or,Tn,Ir,r0){var T0=Ht(Ir);if(typeof T0!="function")throw Error(n(150));if(Ir=T0.call(Ir),Ir==null)throw Error(n(151));for(var O0=T0=null,R0=Tn,L0=Tn=0,j1=null,Pg=Ir.next();R0!==null&&!Pg.done;L0++,Pg=Ir.next()){R0.index>L0?(j1=R0,R0=null):j1=R0.sibling;var P2=Go(or,R0,Pg.value,r0);if(P2===null){R0===null&&(R0=j1);break}f&&R0&&P2.alternate===null&&h(or,R0),Tn=te(P2,Tn,L0),O0===null?T0=P2:O0.sibling=P2,O0=P2,R0=j1}if(Pg.done)return v(or,R0),e1&&Y2(or,L0),T0;if(R0===null){for(;!Pg.done;L0++,Pg=Ir.next())Pg=e0(or,Pg.value,r0),Pg!==null&&(Tn=te(Pg,Tn,L0),O0===null?T0=Pg:O0.sibling=Pg,O0=Pg);return e1&&Y2(or,L0),T0}for(R0=T(or,R0);!Pg.done;L0++,Pg=Ir.next())Pg=f0(R0,or,L0,Pg.value,r0),Pg!==null&&(f&&Pg.alternate!==null&&R0.delete(Pg.key===null?L0:Pg.key),Tn=te(Pg,Tn,L0),O0===null?T0=Pg:O0.sibling=Pg,O0=Pg);return f&&R0.forEach(function(D$){return h(or,D$)}),e1&&Y2(or,L0),T0}function h1(or,Tn,Ir,r0){if(typeof Ir=="object"&&Ir!==null&&Ir.type===Oe&&Ir.key===null&&(Ir=Ir.props.children),typeof Ir=="object"&&Ir!==null){switch(Ir.$$typeof){case se:e:{for(var T0=Ir.key,O0=Tn;O0!==null;){if(O0.key===T0){if(T0=Ir.type,T0===Oe){if(O0.tag===7){v(or,O0.sibling),Tn=D(O0,Ir.props.children),Tn.return=or,or=Tn;break e}}else if(O0.elementType===T0||typeof T0=="object"&&T0!==null&&T0.$$typeof===Ft&&ux(T0)===O0.type){v(or,O0.sibling),Tn=D(O0,Ir.props),Tn.ref=cv(or,O0,Ir),Tn.return=or,or=Tn;break e}v(or,O0);break}else h(or,O0);O0=O0.sibling}Ir.type===Oe?(Tn=aw(Ir.props.children,or.mode,r0,Ir.key),Tn.return=or,or=Tn):(r0=jx(Ir.type,Ir.key,Ir.props,null,or.mode,r0),r0.ref=cv(or,Tn,Ir),r0.return=or,or=r0)}return Se(or);case Re:e:{for(O0=Ir.key;Tn!==null;){if(Tn.key===O0)if(Tn.tag===4&&Tn.stateNode.containerInfo===Ir.containerInfo&&Tn.stateNode.implementation===Ir.implementation){v(or,Tn.sibling),Tn=D(Tn,Ir.children||[]),Tn.return=or,or=Tn;break e}else{v(or,Tn);break}else h(or,Tn);Tn=Tn.sibling}Tn=q3(Ir,or.mode,r0),Tn.return=or,or=Tn}return Se(or);case Ft:return O0=Ir._init,h1(or,Tn,O0(Ir._payload),r0)}if(F0(Ir))return w0(or,Tn,Ir,r0);if(Ht(Ir))return x0(or,Tn,Ir,r0);fv(or,Ir)}return typeof Ir=="string"&&Ir!==""||typeof Ir=="number"?(Ir=""+Ir,Tn!==null&&Tn.tag===6?(v(or,Tn.sibling),Tn=D(Tn,Ir),Tn.return=or,or=Tn):(v(or,Tn),Tn=Z3(Ir,or.mode,r0),Tn.return=or,or=Tn),Se(or)):v(or,Tn)}return h1}var x2=xT(!0),u3=xT(!1),Ow={},g_=vy(Ow),T2=vy(Ow),pv=vy(Ow);function $2(f){if(f===Ow)throw Error(n(174));return f}function dx(f,h){switch(Yg(pv,h),Yg(T2,f),Yg(g_,Ow),f=h.nodeType,f){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:L1(null,"");break;default:f=f===8?h.parentNode:h,h=f.namespaceURI||null,f=f.tagName,h=L1(h,f)}Jg(g_),Yg(g_,h)}function kw(){Jg(g_),Jg(T2),Jg(pv)}function d3(f){$2(pv.current);var h=$2(g_.current),v=L1(h,f.type);h!==v&&(Yg(T2,f),Yg(g_,v))}function c3(f){T2.current===f&&(Jg(g_),Jg(T2))}var t1=vy(0);function hv(f){for(var h=f;h!==null;){if(h.tag===13){var v=h.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var mv=[];function f3(){for(var f=0;f<mv.length;f++)mv[f]._workInProgressVersionPrimary=null;mv.length=0}var Rw=pe.ReactCurrentDispatcher,X0=pe.ReactCurrentBatchConfig,J2=0,i1=null,a1=null,I1=null,cx=!1,gv=!1,ry=0,g$=0;function C1(){throw Error(n(321))}function yv(f,h){if(h===null)return!1;for(var v=0;v<h.length&&v<f.length;v++)if(!qr(f[v],h[v]))return!1;return!0}function fx(f,h,v,T,D,te){if(J2=te,i1=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Rw.current=f===null||f.memoizedState===null?wv:_$,f=v(T,D),gv){te=0;do{if(gv=!1,ry=0,25<=te)throw Error(n(301));te+=1,I1=a1=null,h.updateQueue=null,Rw.current=CT,f=v(T,D)}while(gv)}if(Rw.current=J_,h=a1!==null&&a1.next!==null,J2=0,I1=a1=i1=null,cx=!1,h)throw Error(n(300));return f}function px(){var f=ry!==0;return ry=0,f}function u1(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return I1===null?i1.memoizedState=I1=f:I1=I1.next=f,I1}function O1(){if(a1===null){var f=i1.alternate;f=f!==null?f.memoizedState:null}else f=a1.next;var h=I1===null?i1.memoizedState:I1.next;if(h!==null)I1=h,a1=f;else{if(f===null)throw Error(n(310));a1=f,f={memoizedState:a1.memoizedState,baseState:a1.baseState,baseQueue:a1.baseQueue,queue:a1.queue,next:null},I1===null?i1.memoizedState=I1=f:I1=I1.next=f}return I1}function ew(f,h){return typeof h=="function"?h(f):h}function hx(f){var h=O1(),v=h.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=f;var T=a1,D=T.baseQueue,te=v.pending;if(te!==null){if(D!==null){var Se=D.next;D.next=te.next,te.next=Se}T.baseQueue=D=te,v.pending=null}if(D!==null){te=D.next,T=T.baseState;var Ke=Se=null,_n=null,Yr=te;do{var Xo=Yr.lane;if((J2&Xo)===Xo)_n!==null&&(_n=_n.next={lane:0,action:Yr.action,hasEagerState:Yr.hasEagerState,eagerState:Yr.eagerState,next:null}),T=Yr.hasEagerState?Yr.eagerState:f(T,Yr.action);else{var e0={lane:Xo,action:Yr.action,hasEagerState:Yr.hasEagerState,eagerState:Yr.eagerState,next:null};_n===null?(Ke=_n=e0,Se=T):_n=_n.next=e0,i1.lanes|=Xo,I2|=Xo}Yr=Yr.next}while(Yr!==null&&Yr!==te);_n===null?Se=T:_n.next=Ke,qr(T,h.memoizedState)||(iy=!0),h.memoizedState=T,h.baseState=Se,h.baseQueue=_n,v.lastRenderedState=T}if(f=v.interleaved,f!==null){D=f;do te=D.lane,i1.lanes|=te,I2|=te,D=D.next;while(D!==f)}else D===null&&(v.lanes=0);return[h.memoizedState,v.dispatch]}function Nw(f){var h=O1(),v=h.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=f;var T=v.dispatch,D=v.pending,te=h.memoizedState;if(D!==null){v.pending=null;var Se=D=D.next;do te=f(te,Se.action),Se=Se.next;while(Se!==D);qr(te,h.memoizedState)||(iy=!0),h.memoizedState=te,h.baseQueue===null&&(h.baseState=te),v.lastRenderedState=te}return[te,T]}function p3(){}function mx(f,h){var v=i1,T=O1(),D=h(),te=!qr(T.memoizedState,D);if(te&&(T.memoizedState=D,iy=!0),T=T.queue,g3(yx.bind(null,v,T,f),[f]),T.getSnapshot!==h||te||I1!==null&&I1.memoizedState.tag&1){if(v.flags|=2048,Pw(9,gx.bind(null,v,T,D,h),void 0,null),F1===null)throw Error(n(349));(J2&30)!==0||h3(v,h,D)}return D}function h3(f,h,v){f.flags|=16384,f={getSnapshot:h,value:v},h=i1.updateQueue,h===null?(h={lastEffect:null,stores:null},i1.updateQueue=h,h.stores=[f]):(v=h.stores,v===null?h.stores=[f]:v.push(f))}function gx(f,h,v,T){h.value=v,h.getSnapshot=T,X_(h)&&TT(f)}function yx(f,h,v){return v(function(){X_(h)&&TT(f)})}function X_(f){var h=f.getSnapshot;f=f.value;try{var v=h();return!qr(f,v)}catch{return!0}}function TT(f){var h=h_(f,1);h!==null&&w_(h,f,1,-1)}function Q_(f){var h=u1();return typeof f=="function"&&(f=f()),h.memoizedState=h.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ew,lastRenderedState:f},h.queue=f,f=f.dispatch=AT.bind(null,i1,f),[h.memoizedState,f]}function Pw(f,h,v,T){return f={tag:f,create:h,destroy:v,deps:T,next:null},h=i1.updateQueue,h===null?(h={lastEffect:null,stores:null},i1.updateQueue=h,h.lastEffect=f.next=f):(v=h.lastEffect,v===null?h.lastEffect=f.next=f:(T=v.next,v.next=f,f.next=T,h.lastEffect=f)),f}function m3(){return O1().memoizedState}function Dw(f,h,v,T){var D=u1();i1.flags|=f,D.memoizedState=Pw(1|h,v,void 0,T===void 0?null:T)}function _x(f,h,v,T){var D=O1();T=T===void 0?null:T;var te=void 0;if(a1!==null){var Se=a1.memoizedState;if(te=Se.destroy,T!==null&&yv(T,Se.deps)){D.memoizedState=Pw(h,v,te,T);return}}i1.flags|=f,D.memoizedState=Pw(1|h,v,te,T)}function $T(f,h){return Dw(8390656,8,f,h)}function g3(f,h){return _x(2048,8,f,h)}function y3(f,h){return _x(4,2,f,h)}function _3(f,h){return _x(4,4,f,h)}function ET(f,h){if(typeof h=="function")return f=f(),h(f),function(){h(null)};if(h!=null)return f=f(),h.current=f,function(){h.current=null}}function w3(f,h,v){return v=v!=null?v.concat([f]):null,_x(4,4,ET.bind(null,h,f),v)}function wx(){}function hy(f,h){var v=O1();h=h===void 0?null:h;var T=v.memoizedState;return T!==null&&h!==null&&yv(h,T[1])?T[0]:(v.memoizedState=[f,h],f)}function y_(f,h){var v=O1();h=h===void 0?null:h;var T=v.memoizedState;return T!==null&&h!==null&&yv(h,T[1])?T[0]:(f=f(),v.memoizedState=[f,h],f)}function ST(f,h,v){return(J2&21)===0?(f.baseState&&(f.baseState=!1,iy=!0),f.memoizedState=v):(qr(v,h)||(v=H1(),i1.lanes|=v,I2|=v,f.baseState=!0),h)}function y$(f,h){var v=Z0;Z0=v!==0&&4>v?v:4,f(!0);var T=X0.transition;X0.transition={};try{f(!1),h()}finally{Z0=v,X0.transition=T}}function _v(){return O1().memoizedState}function Mw(f,h,v){var T=O2(f);if(v={lane:T,action:v,hasEagerState:!1,eagerState:null,next:null},b3(f))IT(h,v);else if(v=ny(f,h,v,T),v!==null){var D=gy();w_(v,f,T,D),v3(v,h,T)}}function AT(f,h,v){var T=O2(f),D={lane:T,action:v,hasEagerState:!1,eagerState:null,next:null};if(b3(f))IT(h,D);else{var te=f.alternate;if(f.lanes===0&&(te===null||te.lanes===0)&&(te=h.lastRenderedReducer,te!==null))try{var Se=h.lastRenderedState,Ke=te(Se,v);if(D.hasEagerState=!0,D.eagerState=Ke,qr(Ke,Se)){var _n=h.interleaved;_n===null?(D.next=D,ax(h)):(D.next=_n.next,_n.next=D),h.interleaved=D;return}}catch{}finally{}v=ny(f,h,D,T),v!==null&&(D=gy(),w_(v,f,T,D),v3(v,h,T))}}function b3(f){var h=f.alternate;return f===i1||h!==null&&h===i1}function IT(f,h){gv=cx=!0;var v=f.pending;v===null?h.next=h:(h.next=v.next,v.next=h),f.pending=h}function v3(f,h,v){if((v&4194240)!==0){var T=h.lanes;T&=f.pendingLanes,v|=T,h.lanes=v,by(f,v)}}var J_={readContext:py,useCallback:C1,useContext:C1,useEffect:C1,useImperativeHandle:C1,useInsertionEffect:C1,useLayoutEffect:C1,useMemo:C1,useReducer:C1,useRef:C1,useState:C1,useDebugValue:C1,useDeferredValue:C1,useTransition:C1,useMutableSource:C1,useSyncExternalStore:C1,useId:C1,unstable_isNewReconciler:!1},wv={readContext:py,useCallback:function(f,h){return u1().memoizedState=[f,h===void 0?null:h],f},useContext:py,useEffect:$T,useImperativeHandle:function(f,h,v){return v=v!=null?v.concat([f]):null,Dw(4194308,4,ET.bind(null,h,f),v)},useLayoutEffect:function(f,h){return Dw(4194308,4,f,h)},useInsertionEffect:function(f,h){return Dw(4,2,f,h)},useMemo:function(f,h){var v=u1();return h=h===void 0?null:h,f=f(),v.memoizedState=[f,h],f},useReducer:function(f,h,v){var T=u1();return h=v!==void 0?v(h):h,T.memoizedState=T.baseState=h,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:h},T.queue=f,f=f.dispatch=Mw.bind(null,i1,f),[T.memoizedState,f]},useRef:function(f){var h=u1();return f={current:f},h.memoizedState=f},useState:Q_,useDebugValue:wx,useDeferredValue:function(f){return u1().memoizedState=f},useTransition:function(){var f=Q_(!1),h=f[0];return f=y$.bind(null,f[1]),u1().memoizedState=f,[h,f]},useMutableSource:function(){},useSyncExternalStore:function(f,h,v){var T=i1,D=u1();if(e1){if(v===void 0)throw Error(n(407));v=v()}else{if(v=h(),F1===null)throw Error(n(349));(J2&30)!==0||h3(T,h,v)}D.memoizedState=v;var te={value:v,getSnapshot:h};return D.queue=te,$T(yx.bind(null,T,te,f),[f]),T.flags|=2048,Pw(9,gx.bind(null,T,te,v,h),void 0,null),v},useId:function(){var f=u1(),h=F1.identifierPrefix;if(e1){var v=N_,T=R_;v=(T&~(1<<32-l1(T)-1)).toString(32)+v,h=":"+h+"R"+v,v=ry++,0<v&&(h+="H"+v.toString(32)),h+=":"}else v=g$++,h=":"+h+"r"+v.toString(32)+":";return f.memoizedState=h},unstable_isNewReconciler:!1},_$={readContext:py,useCallback:hy,useContext:py,useEffect:g3,useImperativeHandle:w3,useInsertionEffect:y3,useLayoutEffect:_3,useMemo:y_,useReducer:hx,useRef:m3,useState:function(){return hx(ew)},useDebugValue:wx,useDeferredValue:function(f){var h=O1();return ST(h,a1.memoizedState,f)},useTransition:function(){var f=hx(ew)[0],h=O1().memoizedState;return[f,h]},useMutableSource:p3,useSyncExternalStore:mx,useId:_v,unstable_isNewReconciler:!1},CT={readContext:py,useCallback:hy,useContext:py,useEffect:g3,useImperativeHandle:w3,useInsertionEffect:y3,useLayoutEffect:_3,useMemo:y_,useReducer:Nw,useRef:m3,useState:function(){return Nw(ew)},useDebugValue:wx,useDeferredValue:function(f){var h=O1();return a1===null?h.memoizedState=f:ST(h,a1.memoizedState,f)},useTransition:function(){var f=Nw(ew)[0],h=O1().memoizedState;return[f,h]},useMutableSource:p3,useSyncExternalStore:mx,useId:_v,unstable_isNewReconciler:!1};function tw(f,h){try{var v="",T=h;do v+=Mo(T),T=T.return;while(T);var D=v}catch(te){D=`
Error generating stack: `+te.message+`
`+te.stack}return{value:f,source:h,stack:D,digest:null}}function Fw(f,h,v){return{value:f,source:null,stack:v??null,digest:h??null}}function bx(f,h){try{console.error(h.value)}catch(v){setTimeout(function(){throw v})}}var vx=typeof WeakMap=="function"?WeakMap:Map;function xx(f,h,v){v=m_(-1,v),v.tag=3,v.payload={element:null};var T=h.value;return v.callback=function(){Rx||(Rx=!0,M3=T),bx(f,h)},v}function bv(f,h,v){v=m_(-1,v),v.tag=3;var T=f.type.getDerivedStateFromError;if(typeof T=="function"){var D=h.value;v.payload=function(){return T(D)},v.callback=function(){bx(f,h)}}var te=f.stateNode;return te!==null&&typeof te.componentDidCatch=="function"&&(v.callback=function(){bx(f,h),typeof T!="function"&&(C2===null?C2=new Set([this]):C2.add(this));var Se=h.stack;this.componentDidCatch(h.value,{componentStack:Se!==null?Se:""})}),v}function OT(f,h,v){var T=f.pingCache;if(T===null){T=f.pingCache=new vx;var D=new Set;T.set(h,D)}else D=T.get(h),D===void 0&&(D=new Set,T.set(h,D));D.has(v)||(D.add(v),f=S$.bind(null,f,h,v),h.then(f,f))}function x3(f){do{var h;if((h=f.tag===13)&&(h=f.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return f;f=f.return}while(f!==null);return null}function vv(f,h,v,T,D){return(f.mode&1)===0?(f===h?f.flags|=65536:(f.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(h=m_(-1,1),h.tag=2,b2(v,h,1))),v.lanes|=1),f):(f.flags|=65536,f.lanes=D,f)}var kT=pe.ReactCurrentOwner,iy=!1;function my(f,h,v,T){h.child=f===null?u3(h,null,v,T):x2(h,f.child,v,T)}function T3(f,h,v,T,D){v=v.render;var te=h.ref;return _2(h,D),T=fx(f,h,v,T,te,D),v=px(),f!==null&&!iy?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~D,L_(f,h,D)):(e1&&v&&lv(h),h.flags|=1,my(f,h,T,D),h.child)}function F_(f,h,v,T,D){if(f===null){var te=v.type;return typeof te=="function"&&!V3(te)&&te.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(h.tag=15,h.type=te,$3(f,h,te,T,D)):(f=jx(v.type,null,T,h,h.mode,D),f.ref=h.ref,f.return=h,h.child=f)}if(te=f.child,(f.lanes&D)===0){var Se=te.memoizedProps;if(v=v.compare,v=v!==null?v:c0,v(Se,T)&&f.ref===h.ref)return L_(f,h,D)}return h.flags|=1,f=N2(te,T),f.ref=h.ref,f.return=h,h.child=f}function $3(f,h,v,T,D){if(f!==null){var te=f.memoizedProps;if(c0(te,T)&&f.ref===h.ref)if(iy=!1,h.pendingProps=T=te,(f.lanes&D)!==0)(f.flags&131072)!==0&&(iy=!0);else return h.lanes=f.lanes,L_(f,h,D)}return Tx(f,h,v,T,D)}function E3(f,h,v){var T=h.pendingProps,D=T.children,te=f!==null?f.memoizedState:null;if(T.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yg(zw,Fy),Fy|=v;else{if((v&1073741824)===0)return f=te!==null?te.baseLanes|v:v,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:f,cachePool:null,transitions:null},h.updateQueue=null,Yg(zw,Fy),Fy|=f,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=te!==null?te.baseLanes:v,Yg(zw,Fy),Fy|=T}else te!==null?(T=te.baseLanes|v,h.memoizedState=null):T=v,Yg(zw,Fy),Fy|=T;return my(f,h,D,v),h.child}function RT(f,h){var v=h.ref;(f===null&&v!==null||f!==null&&f.ref!==v)&&(h.flags|=512,h.flags|=2097152)}function Tx(f,h,v,T,D){var te=Ty(v)?fy:J1.current;return te=Aw(h,te),_2(h,D),v=fx(f,h,v,T,te,D),T=px(),f!==null&&!iy?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~D,L_(f,h,D)):(e1&&T&&lv(h),h.flags|=1,my(f,h,v,D),h.child)}function NT(f,h,v,T,D){if(Ty(v)){var te=!0;Ky(h)}else te=!1;if(_2(h,D),h.stateNode===null)jw(f,h),o3(h,v,T),l3(h,v,T,D),T=!0;else if(f===null){var Se=h.stateNode,Ke=h.memoizedProps;Se.props=Ke;var _n=Se.context,Yr=v.contextType;typeof Yr=="object"&&Yr!==null?Yr=py(Yr):(Yr=Ty(v)?fy:J1.current,Yr=Aw(h,Yr));var Xo=v.getDerivedStateFromProps,e0=typeof Xo=="function"||typeof Se.getSnapshotBeforeUpdate=="function";e0||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(Ke!==T||_n!==Yr)&&vT(h,Se,T,Yr),w2=!1;var Go=h.memoizedState;Se.state=Go,sx(h,T,Se,D),_n=h.memoizedState,Ke!==T||Go!==_n||xy.current||w2?(typeof Xo=="function"&&(s3(h,v,Xo,T),_n=h.memoizedState),(Ke=w2||lx(h,v,Ke,T,Go,_n,Yr))?(e0||typeof Se.UNSAFE_componentWillMount!="function"&&typeof Se.componentWillMount!="function"||(typeof Se.componentWillMount=="function"&&Se.componentWillMount(),typeof Se.UNSAFE_componentWillMount=="function"&&Se.UNSAFE_componentWillMount()),typeof Se.componentDidMount=="function"&&(h.flags|=4194308)):(typeof Se.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=T,h.memoizedState=_n),Se.props=T,Se.state=_n,Se.context=Yr,T=Ke):(typeof Se.componentDidMount=="function"&&(h.flags|=4194308),T=!1)}else{Se=h.stateNode,wT(f,h),Ke=h.memoizedProps,Yr=h.type===h.elementType?Ke:p_(h.type,Ke),Se.props=Yr,e0=h.pendingProps,Go=Se.context,_n=v.contextType,typeof _n=="object"&&_n!==null?_n=py(_n):(_n=Ty(v)?fy:J1.current,_n=Aw(h,_n));var f0=v.getDerivedStateFromProps;(Xo=typeof f0=="function"||typeof Se.getSnapshotBeforeUpdate=="function")||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(Ke!==e0||Go!==_n)&&vT(h,Se,T,_n),w2=!1,Go=h.memoizedState,Se.state=Go,sx(h,T,Se,D);var w0=h.memoizedState;Ke!==e0||Go!==w0||xy.current||w2?(typeof f0=="function"&&(s3(h,v,f0,T),w0=h.memoizedState),(Yr=w2||lx(h,v,Yr,T,Go,w0,_n)||!1)?(Xo||typeof Se.UNSAFE_componentWillUpdate!="function"&&typeof Se.componentWillUpdate!="function"||(typeof Se.componentWillUpdate=="function"&&Se.componentWillUpdate(T,w0,_n),typeof Se.UNSAFE_componentWillUpdate=="function"&&Se.UNSAFE_componentWillUpdate(T,w0,_n)),typeof Se.componentDidUpdate=="function"&&(h.flags|=4),typeof Se.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof Se.componentDidUpdate!="function"||Ke===f.memoizedProps&&Go===f.memoizedState||(h.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||Ke===f.memoizedProps&&Go===f.memoizedState||(h.flags|=1024),h.memoizedProps=T,h.memoizedState=w0),Se.props=T,Se.state=w0,Se.context=_n,T=Yr):(typeof Se.componentDidUpdate!="function"||Ke===f.memoizedProps&&Go===f.memoizedState||(h.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||Ke===f.memoizedProps&&Go===f.memoizedState||(h.flags|=1024),T=!1)}return S3(f,h,v,T,te,D)}function S3(f,h,v,T,D,te){RT(f,h);var Se=(h.flags&128)!==0;if(!T&&!Se)return D&&hT(h,v,!1),L_(f,h,te);T=h.stateNode,kT.current=h;var Ke=Se&&typeof v.getDerivedStateFromError!="function"?null:T.render();return h.flags|=1,f!==null&&Se?(h.child=x2(h,f.child,null,te),h.child=x2(h,null,Ke,te)):my(f,h,Ke,te),h.memoizedState=T.state,D&&hT(h,v,!0),h.child}function j_(f){var h=f.stateNode;h.pendingContext?fT(f,h.pendingContext,h.pendingContext!==h.context):h.context&&fT(f,h.context,!1),dx(f,h.containerInfo)}function $x(f,h,v,T,D){return D_(),M_(D),h.flags|=256,my(f,h,v,T),h.child}var xv={dehydrated:null,treeContext:null,retryLane:0};function Tv(f){return{baseLanes:f,cachePool:null,transitions:null}}function $v(f,h,v){var T=h.pendingProps,D=t1.current,te=!1,Se=(h.flags&128)!==0,Ke;if((Ke=Se)||(Ke=f!==null&&f.memoizedState===null?!1:(D&2)!==0),Ke?(te=!0,h.flags&=-129):(f===null||f.memoizedState!==null)&&(D|=1),Yg(t1,D&1),f===null)return $y(h),f=h.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((h.mode&1)===0?h.lanes=1:f.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(Se=T.children,f=T.fallback,te?(T=h.mode,te=h.child,Se={mode:"hidden",children:Se},(T&1)===0&&te!==null?(te.childLanes=0,te.pendingProps=Se):te=Lx(Se,T,0,null),f=aw(f,T,v,null),te.return=h,f.return=h,te.sibling=f,h.child=te,h.child.memoizedState=Tv(v),h.memoizedState=xv,f):E2(h,Se));if(D=f.memoizedState,D!==null&&(Ke=D.dehydrated,Ke!==null))return Ex(f,h,Se,T,Ke,D,v);if(te){te=T.fallback,Se=h.mode,D=f.child,Ke=D.sibling;var _n={mode:"hidden",children:T.children};return(Se&1)===0&&h.child!==D?(T=h.child,T.childLanes=0,T.pendingProps=_n,h.deletions=null):(T=N2(D,_n),T.subtreeFlags=D.subtreeFlags&14680064),Ke!==null?te=N2(Ke,te):(te=aw(te,Se,v,null),te.flags|=2),te.return=h,T.return=h,T.sibling=te,h.child=T,T=te,te=h.child,Se=f.child.memoizedState,Se=Se===null?Tv(v):{baseLanes:Se.baseLanes|v,cachePool:null,transitions:Se.transitions},te.memoizedState=Se,te.childLanes=f.childLanes&~v,h.memoizedState=xv,T}return te=f.child,f=te.sibling,T=N2(te,{mode:"visible",children:T.children}),(h.mode&1)===0&&(T.lanes=v),T.return=h,T.sibling=null,f!==null&&(v=h.deletions,v===null?(h.deletions=[f],h.flags|=16):v.push(f)),h.child=T,h.memoizedState=null,T}function E2(f,h){return h=Lx({mode:"visible",children:h},f.mode,0,null),h.return=f,f.child=h}function C0(f,h,v,T){return T!==null&&M_(T),x2(h,f.child,null,v),f=E2(h,h.pendingProps.children),f.flags|=2,h.memoizedState=null,f}function Ex(f,h,v,T,D,te,Se){if(v)return h.flags&256?(h.flags&=-257,T=Fw(Error(n(422))),C0(f,h,Se,T)):h.memoizedState!==null?(h.child=f.child,h.flags|=128,null):(te=T.fallback,D=h.mode,T=Lx({mode:"visible",children:T.children},D,0,null),te=aw(te,D,Se,null),te.flags|=2,T.return=h,te.return=h,T.sibling=te,h.child=T,(h.mode&1)!==0&&x2(h,f.child,null,Se),h.child.memoizedState=Tv(Se),h.memoizedState=xv,te);if((h.mode&1)===0)return C0(f,h,Se,null);if(D.data==="$!"){if(T=D.nextSibling&&D.nextSibling.dataset,T)var Ke=T.dgst;return T=Ke,te=Error(n(419)),T=Fw(te,T,void 0),C0(f,h,Se,T)}if(Ke=(Se&f.childLanes)!==0,iy||Ke){if(T=F1,T!==null){switch(Se&-Se){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}D=(D&(T.suspendedLanes|Se))!==0?0:D,D!==0&&D!==te.retryLane&&(te.retryLane=D,h_(f,D),w_(T,f,D,-1))}return z3(),T=Fw(Error(n(421))),C0(f,h,Se,T)}return D.data==="$?"?(h.flags|=128,h.child=f.child,h=A$.bind(null,f),D._reactRetry=h,null):(f=te.treeContext,Ny=h2(D.nextSibling),ty=h,e1=!0,f_=null,f!==null&&(Xy[Qy++]=R_,Xy[Qy++]=N_,Xy[Qy++]=H2,R_=f.id,N_=f.overflow,H2=h),h=E2(h,T.children),h.flags|=4096,h)}function Sx(f,h,v){f.lanes|=h;var T=f.alternate;T!==null&&(T.lanes|=h),Jy(f.return,h,v)}function e2(f,h,v,T,D){var te=f.memoizedState;te===null?f.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:T,tail:v,tailMode:D}:(te.isBackwards=h,te.rendering=null,te.renderingStartTime=0,te.last=T,te.tail=v,te.tailMode=D)}function PT(f,h,v){var T=h.pendingProps,D=T.revealOrder,te=T.tail;if(my(f,h,T.children,v),T=t1.current,(T&2)!==0)T=T&1|2,h.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=h.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&Sx(f,v,h);else if(f.tag===19)Sx(f,v,h);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;f.sibling===null;){if(f.return===null||f.return===h)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}T&=1}if(Yg(t1,T),(h.mode&1)===0)h.memoizedState=null;else switch(D){case"forwards":for(v=h.child,D=null;v!==null;)f=v.alternate,f!==null&&hv(f)===null&&(D=v),v=v.sibling;v=D,v===null?(D=h.child,h.child=null):(D=v.sibling,v.sibling=null),e2(h,!1,D,v,te);break;case"backwards":for(v=null,D=h.child,h.child=null;D!==null;){if(f=D.alternate,f!==null&&hv(f)===null){h.child=D;break}f=D.sibling,D.sibling=v,v=D,D=f}e2(h,!0,v,null,te);break;case"together":e2(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function jw(f,h){(h.mode&1)===0&&f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2)}function L_(f,h,v){if(f!==null&&(h.dependencies=f.dependencies),I2|=h.lanes,(v&h.childLanes)===0)return null;if(f!==null&&h.child!==f.child)throw Error(n(153));if(h.child!==null){for(f=h.child,v=N2(f,f.pendingProps),h.child=v,v.return=h;f.sibling!==null;)f=f.sibling,v=v.sibling=N2(f,f.pendingProps),v.return=h;v.sibling=null}return h.child}function ay(f,h,v){switch(h.tag){case 3:j_(h),D_();break;case 5:d3(h);break;case 1:Ty(h.type)&&Ky(h);break;case 4:dx(h,h.stateNode.containerInfo);break;case 10:var T=h.type._context,D=h.memoizedProps.value;Yg(X2,T._currentValue),T._currentValue=D;break;case 13:if(T=h.memoizedState,T!==null)return T.dehydrated!==null?(Yg(t1,t1.current&1),h.flags|=128,null):(v&h.child.childLanes)!==0?$v(f,h,v):(Yg(t1,t1.current&1),f=L_(f,h,v),f!==null?f.sibling:null);Yg(t1,t1.current&1);break;case 19:if(T=(v&h.childLanes)!==0,(f.flags&128)!==0){if(T)return PT(f,h,v);h.flags|=128}if(D=h.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),Yg(t1,t1.current),T)break;return null;case 22:case 23:return h.lanes=0,E3(f,h,v)}return L_(f,h,v)}var DT,A3,I3,MT;DT=function(f,h){for(var v=h.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===h)break;for(;v.sibling===null;){if(v.return===null||v.return===h)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},A3=function(){},I3=function(f,h,v,T){var D=f.memoizedProps;if(D!==T){f=h.stateNode,$2(g_.current);var te=null;switch(v){case"input":D=eg(f,D),T=eg(f,T),te=[];break;case"select":D=Ae({},D,{value:void 0}),T=Ae({},T,{value:void 0}),te=[];break;case"textarea":D=B0(f,D),T=B0(f,T),te=[];break;default:typeof D.onClick!="function"&&typeof T.onClick=="function"&&(f.onclick=Hv)}k0(v,T);var Se;v=null;for(Yr in D)if(!T.hasOwnProperty(Yr)&&D.hasOwnProperty(Yr)&&D[Yr]!=null)if(Yr==="style"){var Ke=D[Yr];for(Se in Ke)Ke.hasOwnProperty(Se)&&(v||(v={}),v[Se]="")}else Yr!=="dangerouslySetInnerHTML"&&Yr!=="children"&&Yr!=="suppressContentEditableWarning"&&Yr!=="suppressHydrationWarning"&&Yr!=="autoFocus"&&(o.hasOwnProperty(Yr)?te||(te=[]):(te=te||[]).push(Yr,null));for(Yr in T){var _n=T[Yr];if(Ke=D?.[Yr],T.hasOwnProperty(Yr)&&_n!==Ke&&(_n!=null||Ke!=null))if(Yr==="style")if(Ke){for(Se in Ke)!Ke.hasOwnProperty(Se)||_n&&_n.hasOwnProperty(Se)||(v||(v={}),v[Se]="");for(Se in _n)_n.hasOwnProperty(Se)&&Ke[Se]!==_n[Se]&&(v||(v={}),v[Se]=_n[Se])}else v||(te||(te=[]),te.push(Yr,v)),v=_n;else Yr==="dangerouslySetInnerHTML"?(_n=_n?_n.__html:void 0,Ke=Ke?Ke.__html:void 0,_n!=null&&Ke!==_n&&(te=te||[]).push(Yr,_n)):Yr==="children"?typeof _n!="string"&&typeof _n!="number"||(te=te||[]).push(Yr,""+_n):Yr!=="suppressContentEditableWarning"&&Yr!=="suppressHydrationWarning"&&(o.hasOwnProperty(Yr)?(_n!=null&&Yr==="onScroll"&&Qg("scroll",f),te||Ke===_n||(te=[])):(te=te||[]).push(Yr,_n))}v&&(te=te||[]).push("style",v);var Yr=te;(h.updateQueue=Yr)&&(h.flags|=4)}},MT=function(f,h,v,T){v!==T&&(h.flags|=4)};function Lw(f,h){if(!e1)switch(f.tailMode){case"hidden":h=f.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?f.tail=null:v.sibling=null;break;case"collapsed":v=f.tail;for(var T=null;v!==null;)v.alternate!==null&&(T=v),v=v.sibling;T===null?h||f.tail===null?f.tail=null:f.tail.sibling=null:T.sibling=null}}function sy(f){var h=f.alternate!==null&&f.alternate.child===f.child,v=0,T=0;if(h)for(var D=f.child;D!==null;)v|=D.lanes|D.childLanes,T|=D.subtreeFlags&14680064,T|=D.flags&14680064,D.return=f,D=D.sibling;else for(D=f.child;D!==null;)v|=D.lanes|D.childLanes,T|=D.subtreeFlags,T|=D.flags,D.return=f,D=D.sibling;return f.subtreeFlags|=T,f.childLanes=v,h}function w$(f,h,v){var T=h.pendingProps;switch(K2(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sy(h),null;case 1:return Ty(h.type)&&Qv(),sy(h),null;case 3:return T=h.stateNode,kw(),Jg(xy),Jg(J1),f3(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(f===null||f.child===null)&&(uv(h)?h.flags|=4:f===null||f.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,f_!==null&&(L3(f_),f_=null))),A3(f,h),sy(h),null;case 5:c3(h);var D=$2(pv.current);if(v=h.type,f!==null&&h.stateNode!=null)I3(f,h,v,T,D),f.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!T){if(h.stateNode===null)throw Error(n(166));return sy(h),null}if(f=$2(g_.current),uv(h)){T=h.stateNode,v=h.type;var te=h.memoizedProps;switch(T[O_]=h,T[m2]=te,f=(h.mode&1)!==0,v){case"dialog":Qg("cancel",T),Qg("close",T);break;case"iframe":case"object":case"embed":Qg("load",T);break;case"video":case"audio":for(D=0;D<H_.length;D++)Qg(H_[D],T);break;case"source":Qg("error",T);break;case"img":case"image":case"link":Qg("error",T),Qg("load",T);break;case"details":Qg("toggle",T);break;case"input":i0(T,te),Qg("invalid",T);break;case"select":T._wrapperState={wasMultiple:!!te.multiple},Qg("invalid",T);break;case"textarea":Zg(T,te),Qg("invalid",T)}k0(v,te),D=null;for(var Se in te)if(te.hasOwnProperty(Se)){var Ke=te[Se];Se==="children"?typeof Ke=="string"?T.textContent!==Ke&&(te.suppressHydrationWarning!==!0&&iv(T.textContent,Ke,f),D=["children",Ke]):typeof Ke=="number"&&T.textContent!==""+Ke&&(te.suppressHydrationWarning!==!0&&iv(T.textContent,Ke,f),D=["children",""+Ke]):o.hasOwnProperty(Se)&&Ke!=null&&Se==="onScroll"&&Qg("scroll",T)}switch(v){case"input":S0(T),_g(T,te,!0);break;case"textarea":S0(T),r1(T);break;case"select":case"option":break;default:typeof te.onClick=="function"&&(T.onclick=Hv)}T=D,h.updateQueue=T,T!==null&&(h.flags|=4)}else{Se=D.nodeType===9?D:D.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=Ug(v)),f==="http://www.w3.org/1999/xhtml"?v==="script"?(f=Se.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof T.is=="string"?f=Se.createElement(v,{is:T.is}):(f=Se.createElement(v),v==="select"&&(Se=f,T.multiple?Se.multiple=!0:T.size&&(Se.size=T.size))):f=Se.createElementNS(f,v),f[O_]=h,f[m2]=T,DT(f,h,!1,!1),h.stateNode=f;e:{switch(Se=Bg(v,T),v){case"dialog":Qg("cancel",f),Qg("close",f),D=T;break;case"iframe":case"object":case"embed":Qg("load",f),D=T;break;case"video":case"audio":for(D=0;D<H_.length;D++)Qg(H_[D],f);D=T;break;case"source":Qg("error",f),D=T;break;case"img":case"image":case"link":Qg("error",f),Qg("load",f),D=T;break;case"details":Qg("toggle",f),D=T;break;case"input":i0(f,T),D=eg(f,T),Qg("invalid",f);break;case"option":D=T;break;case"select":f._wrapperState={wasMultiple:!!T.multiple},D=Ae({},T,{value:void 0}),Qg("invalid",f);break;case"textarea":Zg(f,T),D=B0(f,T),Qg("invalid",f);break;default:D=T}k0(v,D),Ke=D;for(te in Ke)if(Ke.hasOwnProperty(te)){var _n=Ke[te];te==="style"?u0(f,_n):te==="dangerouslySetInnerHTML"?(_n=_n?_n.__html:void 0,_n!=null&&g1(f,_n)):te==="children"?typeof _n=="string"?(v!=="textarea"||_n!=="")&&E0(f,_n):typeof _n=="number"&&E0(f,""+_n):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(o.hasOwnProperty(te)?_n!=null&&te==="onScroll"&&Qg("scroll",f):_n!=null&&ue(f,te,_n,Se))}switch(v){case"input":S0(f),_g(f,T,!1);break;case"textarea":S0(f),r1(f);break;case"option":T.value!=null&&f.setAttribute("value",""+Xr(T.value));break;case"select":f.multiple=!!T.multiple,te=T.value,te!=null?U0(f,!!T.multiple,te,!1):T.defaultValue!=null&&U0(f,!!T.multiple,T.defaultValue,!0);break;default:typeof D.onClick=="function"&&(f.onclick=Hv)}switch(v){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}}T&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return sy(h),null;case 6:if(f&&h.stateNode!=null)MT(f,h,f.memoizedProps,T);else{if(typeof T!="string"&&h.stateNode===null)throw Error(n(166));if(v=$2(pv.current),$2(g_.current),uv(h)){if(T=h.stateNode,v=h.memoizedProps,T[O_]=h,(te=T.nodeValue!==v)&&(f=ty,f!==null))switch(f.tag){case 3:iv(T.nodeValue,v,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&iv(T.nodeValue,v,(f.mode&1)!==0)}te&&(h.flags|=4)}else T=(v.nodeType===9?v:v.ownerDocument).createTextNode(T),T[O_]=h,h.stateNode=T}return sy(h),null;case 13:if(Jg(t1),T=h.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(e1&&Ny!==null&&(h.mode&1)!==0&&(h.flags&128)===0)r3(),D_(),h.flags|=98560,te=!1;else if(te=uv(h),T!==null&&T.dehydrated!==null){if(f===null){if(!te)throw Error(n(318));if(te=h.memoizedState,te=te!==null?te.dehydrated:null,!te)throw Error(n(317));te[O_]=h}else D_(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;sy(h),te=!1}else f_!==null&&(L3(f_),f_=null),te=!0;if(!te)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=v,h):(T=T!==null,T!==(f!==null&&f.memoizedState!==null)&&T&&(h.child.flags|=8192,(h.mode&1)!==0&&(f===null||(t1.current&1)!==0?k1===0&&(k1=3):z3())),h.updateQueue!==null&&(h.flags|=4),sy(h),null);case 4:return kw(),A3(f,h),f===null&&f2(h.stateNode.containerInfo),sy(h),null;case 10:return ix(h.type._context),sy(h),null;case 17:return Ty(h.type)&&Qv(),sy(h),null;case 19:if(Jg(t1),te=h.memoizedState,te===null)return sy(h),null;if(T=(h.flags&128)!==0,Se=te.rendering,Se===null)if(T)Lw(te,!1);else{if(k1!==0||f!==null&&(f.flags&128)!==0)for(f=h.child;f!==null;){if(Se=hv(f),Se!==null){for(h.flags|=128,Lw(te,!1),T=Se.updateQueue,T!==null&&(h.updateQueue=T,h.flags|=4),h.subtreeFlags=0,T=v,v=h.child;v!==null;)te=v,f=T,te.flags&=14680066,Se=te.alternate,Se===null?(te.childLanes=0,te.lanes=f,te.child=null,te.subtreeFlags=0,te.memoizedProps=null,te.memoizedState=null,te.updateQueue=null,te.dependencies=null,te.stateNode=null):(te.childLanes=Se.childLanes,te.lanes=Se.lanes,te.child=Se.child,te.subtreeFlags=0,te.deletions=null,te.memoizedProps=Se.memoizedProps,te.memoizedState=Se.memoizedState,te.updateQueue=Se.updateQueue,te.type=Se.type,f=Se.dependencies,te.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),v=v.sibling;return Yg(t1,t1.current&1|2),h.child}f=f.sibling}te.tail!==null&&Ag()>Vw&&(h.flags|=128,T=!0,Lw(te,!1),h.lanes=4194304)}else{if(!T)if(f=hv(Se),f!==null){if(h.flags|=128,T=!0,v=f.updateQueue,v!==null&&(h.updateQueue=v,h.flags|=4),Lw(te,!0),te.tail===null&&te.tailMode==="hidden"&&!Se.alternate&&!e1)return sy(h),null}else 2*Ag()-te.renderingStartTime>Vw&&v!==1073741824&&(h.flags|=128,T=!0,Lw(te,!1),h.lanes=4194304);te.isBackwards?(Se.sibling=h.child,h.child=Se):(v=te.last,v!==null?v.sibling=Se:h.child=Se,te.last=Se)}return te.tail!==null?(h=te.tail,te.rendering=h,te.tail=h.sibling,te.renderingStartTime=Ag(),h.sibling=null,v=t1.current,Yg(t1,T?v&1|2:v&1),h):(sy(h),null);case 22:case 23:return B3(),T=h.memoizedState!==null,f!==null&&f.memoizedState!==null!==T&&(h.flags|=8192),T&&(h.mode&1)!==0?(Fy&1073741824)!==0&&(sy(h),h.subtreeFlags&6&&(h.flags|=8192)):sy(h),null;case 24:return null;case 25:return null}throw Error(n(156,h.tag))}function b$(f,h){switch(K2(h),h.tag){case 1:return Ty(h.type)&&Qv(),f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 3:return kw(),Jg(xy),Jg(J1),f3(),f=h.flags,(f&65536)!==0&&(f&128)===0?(h.flags=f&-65537|128,h):null;case 5:return c3(h),null;case 13:if(Jg(t1),f=h.memoizedState,f!==null&&f.dehydrated!==null){if(h.alternate===null)throw Error(n(340));D_()}return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 19:return Jg(t1),null;case 4:return kw(),null;case 10:return ix(h.type._context),null;case 22:case 23:return B3(),null;case 24:return null;default:return null}}var e_=!1,jg=!1,C3=typeof WeakSet=="function"?WeakSet:Set,y0=null;function S2(f,h){var v=f.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(T){d1(f,h,T)}else v.current=null}function O3(f,h,v){try{v()}catch(T){d1(f,h,T)}}var FT=!1;function Ev(f,h){if(av=D2,f=Wg(),Wb(f)){if("selectionStart"in f)var v={start:f.selectionStart,end:f.selectionEnd};else e:{v=(v=f.ownerDocument)&&v.defaultView||window;var T=v.getSelection&&v.getSelection();if(T&&T.rangeCount!==0){v=T.anchorNode;var D=T.anchorOffset,te=T.focusNode;T=T.focusOffset;try{v.nodeType,te.nodeType}catch{v=null;break e}var Se=0,Ke=-1,_n=-1,Yr=0,Xo=0,e0=f,Go=null;t:for(;;){for(var f0;e0!==v||D!==0&&e0.nodeType!==3||(Ke=Se+D),e0!==te||T!==0&&e0.nodeType!==3||(_n=Se+T),e0.nodeType===3&&(Se+=e0.nodeValue.length),(f0=e0.firstChild)!==null;)Go=e0,e0=f0;for(;;){if(e0===f)break t;if(Go===v&&++Yr===D&&(Ke=Se),Go===te&&++Xo===T&&(_n=Se),(f0=e0.nextSibling)!==null)break;e0=Go,Go=e0.parentNode}e0=f0}v=Ke===-1||_n===-1?null:{start:Ke,end:_n}}else v=null}v=v||{start:0,end:0}}else v=null;for(q2={focusedElem:f,selectionRange:v},D2=!1,y0=h;y0!==null;)if(h=y0,f=h.child,(h.subtreeFlags&1028)!==0&&f!==null)f.return=h,y0=f;else for(;y0!==null;){h=y0;try{var w0=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(w0!==null){var x0=w0.memoizedProps,h1=w0.memoizedState,or=h.stateNode,Tn=or.getSnapshotBeforeUpdate(h.elementType===h.type?x0:p_(h.type,x0),h1);or.__reactInternalSnapshotBeforeUpdate=Tn}break;case 3:var Ir=h.stateNode.containerInfo;Ir.nodeType===1?Ir.textContent="":Ir.nodeType===9&&Ir.documentElement&&Ir.removeChild(Ir.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(r0){d1(h,h.return,r0)}if(f=h.sibling,f!==null){f.return=h.return,y0=f;break}y0=h.return}return w0=FT,FT=!1,w0}function Uw(f,h,v){var T=h.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var D=T=T.next;do{if((D.tag&f)===f){var te=D.destroy;D.destroy=void 0,te!==void 0&&O3(h,v,te)}D=D.next}while(D!==T)}}function Sv(f,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var v=h=h.next;do{if((v.tag&f)===f){var T=v.create;v.destroy=T()}v=v.next}while(v!==h)}}function k3(f){var h=f.ref;if(h!==null){var v=f.stateNode;switch(f.tag){case 5:f=v;break;default:f=v}typeof h=="function"?h(f):h.current=f}}function jT(f){var h=f.alternate;h!==null&&(f.alternate=null,jT(h)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(h=f.stateNode,h!==null&&(delete h[O_],delete h[m2],delete h[Kv],delete h[je],delete h[Ew])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function UT(f){return f.tag===5||f.tag===3||f.tag===4}function BT(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||UT(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Ax(f,h,v){var T=f.tag;if(T===5||T===6)f=f.stateNode,h?v.nodeType===8?v.parentNode.insertBefore(f,h):v.insertBefore(f,h):(v.nodeType===8?(h=v.parentNode,h.insertBefore(f,v)):(h=v,h.appendChild(f)),v=v._reactRootContainer,v!=null||h.onclick!==null||(h.onclick=Hv));else if(T!==4&&(f=f.child,f!==null))for(Ax(f,h,v),f=f.sibling;f!==null;)Ax(f,h,v),f=f.sibling}function Ix(f,h,v){var T=f.tag;if(T===5||T===6)f=f.stateNode,h?v.insertBefore(f,h):v.appendChild(f);else if(T!==4&&(f=f.child,f!==null))for(Ix(f,h,v),f=f.sibling;f!==null;)Ix(f,h,v),f=f.sibling}var B1=null,Dy=!1;function t2(f,h,v){for(v=v.child;v!==null;)Bw(f,h,v),v=v.sibling}function Bw(f,h,v){if(Mg&&typeof Mg.onCommitFiberUnmount=="function")try{Mg.onCommitFiberUnmount(wy,v)}catch{}switch(v.tag){case 5:jg||S2(v,h);case 6:var T=B1,D=Dy;B1=null,t2(f,h,v),B1=T,Dy=D,B1!==null&&(Dy?(f=B1,v=v.stateNode,f.nodeType===8?f.parentNode.removeChild(v):f.removeChild(v)):B1.removeChild(v.stateNode));break;case 18:B1!==null&&(Dy?(f=B1,v=v.stateNode,f.nodeType===8?e3(f.parentNode,v):f.nodeType===1&&e3(f,v),J0(f)):e3(B1,v.stateNode));break;case 4:T=B1,D=Dy,B1=v.stateNode.containerInfo,Dy=!0,t2(f,h,v),B1=T,Dy=D;break;case 0:case 11:case 14:case 15:if(!jg&&(T=v.updateQueue,T!==null&&(T=T.lastEffect,T!==null))){D=T=T.next;do{var te=D,Se=te.destroy;te=te.tag,Se!==void 0&&((te&2)!==0||(te&4)!==0)&&O3(v,h,Se),D=D.next}while(D!==T)}t2(f,h,v);break;case 1:if(!jg&&(S2(v,h),T=v.stateNode,typeof T.componentWillUnmount=="function"))try{T.props=v.memoizedProps,T.state=v.memoizedState,T.componentWillUnmount()}catch(Ke){d1(v,h,Ke)}t2(f,h,v);break;case 21:t2(f,h,v);break;case 22:v.mode&1?(jg=(T=jg)||v.memoizedState!==null,t2(f,h,v),jg=T):t2(f,h,v);break;default:t2(f,h,v)}}function Cx(f){var h=f.updateQueue;if(h!==null){f.updateQueue=null;var v=f.stateNode;v===null&&(v=f.stateNode=new C3),h.forEach(function(T){var D=I$.bind(null,f,T);v.has(T)||(v.add(T),T.then(D,D))})}}function t_(f,h){var v=h.deletions;if(v!==null)for(var T=0;T<v.length;T++){var D=v[T];try{var te=f,Se=h,Ke=Se;e:for(;Ke!==null;){switch(Ke.tag){case 5:B1=Ke.stateNode,Dy=!1;break e;case 3:B1=Ke.stateNode.containerInfo,Dy=!0;break e;case 4:B1=Ke.stateNode.containerInfo,Dy=!0;break e}Ke=Ke.return}if(B1===null)throw Error(n(160));Bw(te,Se,D),B1=null,Dy=!1;var _n=D.alternate;_n!==null&&(_n.return=null),D.return=null}catch(Yr){d1(D,h,Yr)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)R3(h,f),h=h.sibling}function R3(f,h){var v=f.alternate,T=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(t_(h,f),My(f),T&4){try{Uw(3,f,f.return),Sv(3,f)}catch(x0){d1(f,f.return,x0)}try{Uw(5,f,f.return)}catch(x0){d1(f,f.return,x0)}}break;case 1:t_(h,f),My(f),T&512&&v!==null&&S2(v,v.return);break;case 5:if(t_(h,f),My(f),T&512&&v!==null&&S2(v,v.return),f.flags&32){var D=f.stateNode;try{E0(D,"")}catch(x0){d1(f,f.return,x0)}}if(T&4&&(D=f.stateNode,D!=null)){var te=f.memoizedProps,Se=v!==null?v.memoizedProps:te,Ke=f.type,_n=f.updateQueue;if(f.updateQueue=null,_n!==null)try{Ke==="input"&&te.type==="radio"&&te.name!=null&&p0(D,te),Bg(Ke,Se);var Yr=Bg(Ke,te);for(Se=0;Se<_n.length;Se+=2){var Xo=_n[Se],e0=_n[Se+1];Xo==="style"?u0(D,e0):Xo==="dangerouslySetInnerHTML"?g1(D,e0):Xo==="children"?E0(D,e0):ue(D,Xo,e0,Yr)}switch(Ke){case"input":P0(D,te);break;case"textarea":Kg(D,te);break;case"select":var Go=D._wrapperState.wasMultiple;D._wrapperState.wasMultiple=!!te.multiple;var f0=te.value;f0!=null?U0(D,!!te.multiple,f0,!1):Go!==!!te.multiple&&(te.defaultValue!=null?U0(D,!!te.multiple,te.defaultValue,!0):U0(D,!!te.multiple,te.multiple?[]:"",!1))}D[m2]=te}catch(x0){d1(f,f.return,x0)}}break;case 6:if(t_(h,f),My(f),T&4){if(f.stateNode===null)throw Error(n(162));D=f.stateNode,te=f.memoizedProps;try{D.nodeValue=te}catch(x0){d1(f,f.return,x0)}}break;case 3:if(t_(h,f),My(f),T&4&&v!==null&&v.memoizedState.isDehydrated)try{J0(h.containerInfo)}catch(x0){d1(f,f.return,x0)}break;case 4:t_(h,f),My(f);break;case 13:t_(h,f),My(f),D=f.child,D.flags&8192&&(te=D.memoizedState!==null,D.stateNode.isHidden=te,!te||D.alternate!==null&&D.alternate.memoizedState!==null||(kx=Ag())),T&4&&Cx(f);break;case 22:if(Xo=v!==null&&v.memoizedState!==null,f.mode&1?(jg=(Yr=jg)||Xo,t_(h,f),jg=Yr):t_(h,f),My(f),T&8192){if(Yr=f.memoizedState!==null,(f.stateNode.isHidden=Yr)&&!Xo&&(f.mode&1)!==0)for(y0=f,Xo=f.child;Xo!==null;){for(e0=y0=Xo;y0!==null;){switch(Go=y0,f0=Go.child,Go.tag){case 0:case 11:case 14:case 15:Uw(4,Go,Go.return);break;case 1:S2(Go,Go.return);var w0=Go.stateNode;if(typeof w0.componentWillUnmount=="function"){T=Go,v=Go.return;try{h=T,w0.props=h.memoizedProps,w0.state=h.memoizedState,w0.componentWillUnmount()}catch(x0){d1(T,v,x0)}}break;case 5:S2(Go,Go.return);break;case 22:if(Go.memoizedState!==null){WT(e0);continue}}f0!==null?(f0.return=Go,y0=f0):WT(e0)}Xo=Xo.sibling}e:for(Xo=null,e0=f;;){if(e0.tag===5){if(Xo===null){Xo=e0;try{D=e0.stateNode,Yr?(te=D.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none"):(Ke=e0.stateNode,_n=e0.memoizedProps.style,Se=_n!=null&&_n.hasOwnProperty("display")?_n.display:null,Ke.style.display=V1("display",Se))}catch(x0){d1(f,f.return,x0)}}}else if(e0.tag===6){if(Xo===null)try{e0.stateNode.nodeValue=Yr?"":e0.memoizedProps}catch(x0){d1(f,f.return,x0)}}else if((e0.tag!==22&&e0.tag!==23||e0.memoizedState===null||e0===f)&&e0.child!==null){e0.child.return=e0,e0=e0.child;continue}if(e0===f)break e;for(;e0.sibling===null;){if(e0.return===null||e0.return===f)break e;Xo===e0&&(Xo=null),e0=e0.return}Xo===e0&&(Xo=null),e0.sibling.return=e0.return,e0=e0.sibling}}break;case 19:t_(h,f),My(f),T&4&&Cx(f);break;case 21:break;default:t_(h,f),My(f)}}function My(f){var h=f.flags;if(h&2){try{e:{for(var v=f.return;v!==null;){if(UT(v)){var T=v;break e}v=v.return}throw Error(n(160))}switch(T.tag){case 5:var D=T.stateNode;T.flags&32&&(E0(D,""),T.flags&=-33);var te=BT(f);Ix(f,te,D);break;case 3:case 4:var Se=T.stateNode.containerInfo,Ke=BT(f);Ax(f,Ke,Se);break;default:throw Error(n(161))}}catch(_n){d1(f,f.return,_n)}f.flags&=-3}h&4096&&(f.flags&=-4097)}function zT(f,h,v){y0=f,__(f)}function __(f,h,v){for(var T=(f.mode&1)!==0;y0!==null;){var D=y0,te=D.child;if(D.tag===22&&T){var Se=D.memoizedState!==null||e_;if(!Se){var Ke=D.alternate,_n=Ke!==null&&Ke.memoizedState!==null||jg;Ke=e_;var Yr=jg;if(e_=Se,(jg=_n)&&!Yr)for(y0=D;y0!==null;)Se=y0,_n=Se.child,Se.tag===22&&Se.memoizedState!==null?N3(D):_n!==null?(_n.return=Se,y0=_n):N3(D);for(;te!==null;)y0=te,__(te),te=te.sibling;y0=D,e_=Ke,jg=Yr}A2(f)}else(D.subtreeFlags&8772)!==0&&te!==null?(te.return=D,y0=te):A2(f)}}function A2(f){for(;y0!==null;){var h=y0;if((h.flags&8772)!==0){var v=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:jg||Sv(5,h);break;case 1:var T=h.stateNode;if(h.flags&4&&!jg)if(v===null)T.componentDidMount();else{var D=h.elementType===h.type?v.memoizedProps:p_(h.type,v.memoizedProps);T.componentDidUpdate(D,v.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var te=h.updateQueue;te!==null&&bT(h,te,T);break;case 3:var Se=h.updateQueue;if(Se!==null){if(v=null,h.child!==null)switch(h.child.tag){case 5:v=h.child.stateNode;break;case 1:v=h.child.stateNode}bT(h,Se,v)}break;case 5:var Ke=h.stateNode;if(v===null&&h.flags&4){v=Ke;var _n=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":_n.autoFocus&&v.focus();break;case"img":_n.src&&(v.src=_n.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Yr=h.alternate;if(Yr!==null){var Xo=Yr.memoizedState;if(Xo!==null){var e0=Xo.dehydrated;e0!==null&&J0(e0)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}jg||h.flags&512&&k3(h)}catch(Go){d1(h,h.return,Go)}}if(h===f){y0=null;break}if(v=h.sibling,v!==null){v.return=h.return,y0=v;break}y0=h.return}}function WT(f){for(;y0!==null;){var h=y0;if(h===f){y0=null;break}var v=h.sibling;if(v!==null){v.return=h.return,y0=v;break}y0=h.return}}function N3(f){for(;y0!==null;){var h=y0;try{switch(h.tag){case 0:case 11:case 15:var v=h.return;try{Sv(4,h)}catch(_n){d1(h,v,_n)}break;case 1:var T=h.stateNode;if(typeof T.componentDidMount=="function"){var D=h.return;try{T.componentDidMount()}catch(_n){d1(h,D,_n)}}var te=h.return;try{k3(h)}catch(_n){d1(h,te,_n)}break;case 5:var Se=h.return;try{k3(h)}catch(_n){d1(h,Se,_n)}}}catch(_n){d1(h,h.return,_n)}if(h===f){y0=null;break}var Ke=h.sibling;if(Ke!==null){Ke.return=h.return,y0=Ke;break}y0=h.return}}var v$=Math.ceil,Ox=pe.ReactCurrentDispatcher,P3=pe.ReactCurrentOwner,n_=pe.ReactCurrentBatchConfig,Og=0,F1=null,v1=null,z1=0,Fy=0,zw=vy(0),k1=0,Ww=null,I2=0,Av=0,D3=0,Iv=null,Ey=null,kx=0,Vw=1/0,n2=null,Rx=!1,M3=null,C2=null,Nx=!1,R1=null,Px=0,Cv=0,F3=null,Ov=-1,Dx=0;function gy(){return(Og&6)!==0?Ag():Ov!==-1?Ov:Ov=Ag()}function O2(f){return(f.mode&1)===0?1:(Og&2)!==0&&z1!==0?z1&-z1:_T.transition!==null?(Dx===0&&(Dx=H1()),Dx):(f=Z0,f!==0||(f=window.event,f=f===void 0?16:Gw(f.type)),f)}function w_(f,h,v,T){if(50<Cv)throw Cv=0,F3=null,Error(n(185));cy(f,v,T),((Og&2)===0||f!==F1)&&(f===F1&&((Og&2)===0&&(Av|=v),k1===4&&k2(f,z1)),oy(f,T),v===1&&Og===0&&(h.mode&1)===0&&(Vw=Ag()+500,Jv&&y2()))}function oy(f,h){var v=f.callbackNode;A0(f,h);var T=v0(f,f===F1?z1:0);if(T===0)v!==null&&Wy(v),f.callbackNode=null,f.callbackPriority=0;else if(h=T&-T,f.callbackPriority!==h){if(v!=null&&Wy(v),h===1)f.tag===0?G2(ZT.bind(null,f)):mT(ZT.bind(null,f)),Yv(function(){(Og&6)===0&&y2()}),v=null;else{switch(Y1(T)){case 1:v=l_;break;case 4:v=o1;break;case 16:v=_y;break;case 536870912:v=y1;break;default:v=_y}v=JT(v,VT.bind(null,f))}f.callbackPriority=h,f.callbackNode=v}}function VT(f,h){if(Ov=-1,Dx=0,(Og&6)!==0)throw Error(n(327));var v=f.callbackNode;if(R2()&&f.callbackNode!==v)return null;var T=v0(f,f===F1?z1:0);if(T===0)return null;if((T&30)!==0||(T&f.expiredLanes)!==0||h)h=Mx(f,T);else{h=T;var D=Og;Og|=2;var te=HT();(F1!==f||z1!==h)&&(n2=null,Vw=Ag()+500,rw(f,h));do try{$$();break}catch(Ke){qT(f,Ke)}while(!0);dv(),Ox.current=te,Og=D,v1!==null?h=0:(F1=null,z1=0,h=k1)}if(h!==0){if(h===2&&(D=Cy(f),D!==0&&(T=D,h=j3(f,D))),h===1)throw v=Ww,rw(f,0),k2(f,T),oy(f,Ag()),v;if(h===6)k2(f,T);else{if(D=f.current.alternate,(T&30)===0&&!x$(D)&&(h=Mx(f,T),h===2&&(te=Cy(f),te!==0&&(T=te,h=j3(f,te))),h===1))throw v=Ww,rw(f,0),k2(f,T),oy(f,Ag()),v;switch(f.finishedWork=D,f.finishedLanes=T,h){case 0:case 1:throw Error(n(345));case 2:iw(f,Ey,n2);break;case 3:if(k2(f,T),(T&130023424)===T&&(h=kx+500-Ag(),10<h)){if(v0(f,0)!==0)break;if(D=f.suspendedLanes,(D&T)!==T){gy(),f.pingedLanes|=f.suspendedLanes&D;break}f.timeoutHandle=p2(iw.bind(null,f,Ey,n2),h);break}iw(f,Ey,n2);break;case 4:if(k2(f,T),(T&4194240)===T)break;for(h=f.eventTimes,D=-1;0<T;){var Se=31-l1(T);te=1<<Se,Se=h[Se],Se>D&&(D=Se),T&=~te}if(T=D,T=Ag()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*v$(T/1960))-T,10<T){f.timeoutHandle=p2(iw.bind(null,f,Ey,n2),T);break}iw(f,Ey,n2);break;case 5:iw(f,Ey,n2);break;default:throw Error(n(329))}}}return oy(f,Ag()),f.callbackNode===v?VT.bind(null,f):null}function j3(f,h){var v=Iv;return f.current.memoizedState.isDehydrated&&(rw(f,h).flags|=256),f=Mx(f,h),f!==2&&(h=Ey,Ey=v,h!==null&&L3(h)),f}function L3(f){Ey===null?Ey=f:Ey.push.apply(Ey,f)}function x$(f){for(var h=f;;){if(h.flags&16384){var v=h.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var T=0;T<v.length;T++){var D=v[T],te=D.getSnapshot;D=D.value;try{if(!qr(te(),D))return!1}catch{return!1}}}if(v=h.child,h.subtreeFlags&16384&&v!==null)v.return=h,h=v;else{if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function k2(f,h){for(h&=~D3,h&=~Av,f.suspendedLanes|=h,f.pingedLanes&=~h,f=f.expirationTimes;0<h;){var v=31-l1(h),T=1<<v;f[v]=-1,h&=~T}}function ZT(f){if((Og&6)!==0)throw Error(n(327));R2();var h=v0(f,0);if((h&1)===0)return oy(f,Ag()),null;var v=Mx(f,h);if(f.tag!==0&&v===2){var T=Cy(f);T!==0&&(h=T,v=j3(f,T))}if(v===1)throw v=Ww,rw(f,0),k2(f,h),oy(f,Ag()),v;if(v===6)throw Error(n(345));return f.finishedWork=f.current.alternate,f.finishedLanes=h,iw(f,Ey,n2),oy(f,Ag()),null}function U3(f,h){var v=Og;Og|=1;try{return f(h)}finally{Og=v,Og===0&&(Vw=Ag()+500,Jv&&y2())}}function nw(f){R1!==null&&R1.tag===0&&(Og&6)===0&&R2();var h=Og;Og|=1;var v=n_.transition,T=Z0;try{if(n_.transition=null,Z0=1,f)return f()}finally{Z0=T,n_.transition=v,Og=h,(Og&6)===0&&y2()}}function B3(){Fy=zw.current,Jg(zw)}function rw(f,h){f.finishedWork=null,f.finishedLanes=0;var v=f.timeoutHandle;if(v!==-1&&(f.timeoutHandle=-1,ov(v)),v1!==null)for(v=v1.return;v!==null;){var T=v;switch(K2(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&Qv();break;case 3:kw(),Jg(xy),Jg(J1),f3();break;case 5:c3(T);break;case 4:kw();break;case 13:Jg(t1);break;case 19:Jg(t1);break;case 10:ix(T.type._context);break;case 22:case 23:B3()}v=v.return}if(F1=f,v1=f=N2(f.current,null),z1=Fy=h,k1=0,Ww=null,D3=Av=I2=0,Ey=Iv=null,Py!==null){for(h=0;h<Py.length;h++)if(v=Py[h],T=v.interleaved,T!==null){v.interleaved=null;var D=T.next,te=v.pending;if(te!==null){var Se=te.next;te.next=D,T.next=Se}v.pending=T}Py=null}return f}function qT(f,h){do{var v=v1;try{if(dv(),Rw.current=J_,cx){for(var T=i1.memoizedState;T!==null;){var D=T.queue;D!==null&&(D.pending=null),T=T.next}cx=!1}if(J2=0,I1=a1=i1=null,gv=!1,ry=0,P3.current=null,v===null||v.return===null){k1=1,Ww=h,v1=null;break}e:{var te=f,Se=v.return,Ke=v,_n=h;if(h=z1,Ke.flags|=32768,_n!==null&&typeof _n=="object"&&typeof _n.then=="function"){var Yr=_n,Xo=Ke,e0=Xo.tag;if((Xo.mode&1)===0&&(e0===0||e0===11||e0===15)){var Go=Xo.alternate;Go?(Xo.updateQueue=Go.updateQueue,Xo.memoizedState=Go.memoizedState,Xo.lanes=Go.lanes):(Xo.updateQueue=null,Xo.memoizedState=null)}var f0=x3(Se);if(f0!==null){f0.flags&=-257,vv(f0,Se,Ke,te,h),f0.mode&1&&OT(te,Yr,h),h=f0,_n=Yr;var w0=h.updateQueue;if(w0===null){var x0=new Set;x0.add(_n),h.updateQueue=x0}else w0.add(_n);break e}else{if((h&1)===0){OT(te,Yr,h),z3();break e}_n=Error(n(426))}}else if(e1&&Ke.mode&1){var h1=x3(Se);if(h1!==null){(h1.flags&65536)===0&&(h1.flags|=256),vv(h1,Se,Ke,te,h),M_(tw(_n,Ke));break e}}te=_n=tw(_n,Ke),k1!==4&&(k1=2),Iv===null?Iv=[te]:Iv.push(te),te=Se;do{switch(te.tag){case 3:te.flags|=65536,h&=-h,te.lanes|=h;var or=xx(te,_n,h);a3(te,or);break e;case 1:Ke=_n;var Tn=te.type,Ir=te.stateNode;if((te.flags&128)===0&&(typeof Tn.getDerivedStateFromError=="function"||Ir!==null&&typeof Ir.componentDidCatch=="function"&&(C2===null||!C2.has(Ir)))){te.flags|=65536,h&=-h,te.lanes|=h;var r0=bv(te,Ke,h);a3(te,r0);break e}}te=te.return}while(te!==null)}KT(v)}catch(T0){h=T0,v1===v&&v!==null&&(v1=v=v.return);continue}break}while(!0)}function HT(){var f=Ox.current;return Ox.current=J_,f===null?J_:f}function z3(){(k1===0||k1===3||k1===2)&&(k1=4),F1===null||(I2&268435455)===0&&(Av&268435455)===0||k2(F1,z1)}function Mx(f,h){var v=Og;Og|=2;var T=HT();(F1!==f||z1!==h)&&(n2=null,rw(f,h));do try{T$();break}catch(D){qT(f,D)}while(!0);if(dv(),Og=v,Ox.current=T,v1!==null)throw Error(n(261));return F1=null,z1=0,k1}function T$(){for(;v1!==null;)YT(v1)}function $$(){for(;v1!==null&&!f1();)YT(v1)}function YT(f){var h=QT(f.alternate,f,Fy);f.memoizedProps=f.pendingProps,h===null?KT(f):v1=h,P3.current=null}function KT(f){var h=f;do{var v=h.alternate;if(f=h.return,(h.flags&32768)===0){if(v=w$(v,h,Fy),v!==null){v1=v;return}}else{if(v=b$(v,h),v!==null){v.flags&=32767,v1=v;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{k1=6,v1=null;return}}if(h=h.sibling,h!==null){v1=h;return}v1=h=f}while(h!==null);k1===0&&(k1=5)}function iw(f,h,v){var T=Z0,D=n_.transition;try{n_.transition=null,Z0=1,E$(f,h,v,T)}finally{n_.transition=D,Z0=T}return null}function E$(f,h,v,T){do R2();while(R1!==null);if((Og&6)!==0)throw Error(n(327));v=f.finishedWork;var D=f.finishedLanes;if(v===null)return null;if(f.finishedWork=null,f.finishedLanes=0,v===f.current)throw Error(n(177));f.callbackNode=null,f.callbackPriority=0;var te=v.lanes|v.childLanes;if(Zy(f,te),f===F1&&(v1=F1=null,z1=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||Nx||(Nx=!0,JT(_y,function(){return R2(),null})),te=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||te){te=n_.transition,n_.transition=null;var Se=Z0;Z0=1;var Ke=Og;Og|=4,P3.current=null,Ev(f,v),R3(v,f),p$(q2),D2=!!av,q2=av=null,f.current=v,zT(v),o_(),Og=Ke,Z0=Se,n_.transition=te}else f.current=v;if(Nx&&(Nx=!1,R1=f,Px=D),te=f.pendingLanes,te===0&&(C2=null),$1(v.stateNode),oy(f,Ag()),h!==null)for(T=f.onRecoverableError,v=0;v<h.length;v++)D=h[v],T(D.value,{componentStack:D.stack,digest:D.digest});if(Rx)throw Rx=!1,f=M3,M3=null,f;return(Px&1)!==0&&f.tag!==0&&R2(),te=f.pendingLanes,(te&1)!==0?f===F3?Cv++:(Cv=0,F3=f):Cv=0,y2(),null}function R2(){if(R1!==null){var f=Y1(Px),h=n_.transition,v=Z0;try{if(n_.transition=null,Z0=16>f?16:f,R1===null)var T=!1;else{if(f=R1,R1=null,Px=0,(Og&6)!==0)throw Error(n(331));var D=Og;for(Og|=4,y0=f.current;y0!==null;){var te=y0,Se=te.child;if((y0.flags&16)!==0){var Ke=te.deletions;if(Ke!==null){for(var _n=0;_n<Ke.length;_n++){var Yr=Ke[_n];for(y0=Yr;y0!==null;){var Xo=y0;switch(Xo.tag){case 0:case 11:case 15:Uw(8,Xo,te)}var e0=Xo.child;if(e0!==null)e0.return=Xo,y0=e0;else for(;y0!==null;){Xo=y0;var Go=Xo.sibling,f0=Xo.return;if(jT(Xo),Xo===Yr){y0=null;break}if(Go!==null){Go.return=f0,y0=Go;break}y0=f0}}}var w0=te.alternate;if(w0!==null){var x0=w0.child;if(x0!==null){w0.child=null;do{var h1=x0.sibling;x0.sibling=null,x0=h1}while(x0!==null)}}y0=te}}if((te.subtreeFlags&2064)!==0&&Se!==null)Se.return=te,y0=Se;else e:for(;y0!==null;){if(te=y0,(te.flags&2048)!==0)switch(te.tag){case 0:case 11:case 15:Uw(9,te,te.return)}var or=te.sibling;if(or!==null){or.return=te.return,y0=or;break e}y0=te.return}}var Tn=f.current;for(y0=Tn;y0!==null;){Se=y0;var Ir=Se.child;if((Se.subtreeFlags&2064)!==0&&Ir!==null)Ir.return=Se,y0=Ir;else e:for(Se=Tn;y0!==null;){if(Ke=y0,(Ke.flags&2048)!==0)try{switch(Ke.tag){case 0:case 11:case 15:Sv(9,Ke)}}catch(T0){d1(Ke,Ke.return,T0)}if(Ke===Se){y0=null;break e}var r0=Ke.sibling;if(r0!==null){r0.return=Ke.return,y0=r0;break e}y0=Ke.return}}if(Og=D,y2(),Mg&&typeof Mg.onPostCommitFiberRoot=="function")try{Mg.onPostCommitFiberRoot(wy,f)}catch{}T=!0}return T}finally{Z0=v,n_.transition=h}}return!1}function W3(f,h,v){h=tw(v,h),h=xx(f,h,1),f=b2(f,h,1),h=gy(),f!==null&&(cy(f,1,h),oy(f,h))}function d1(f,h,v){if(f.tag===3)W3(f,f,v);else for(;h!==null;){if(h.tag===3){W3(h,f,v);break}else if(h.tag===1){var T=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(C2===null||!C2.has(T))){f=tw(v,f),f=bv(h,f,1),h=b2(h,f,1),f=gy(),h!==null&&(cy(h,1,f),oy(h,f));break}}h=h.return}}function S$(f,h,v){var T=f.pingCache;T!==null&&T.delete(h),h=gy(),f.pingedLanes|=f.suspendedLanes&v,F1===f&&(z1&v)===v&&(k1===4||k1===3&&(z1&130023424)===z1&&500>Ag()-kx?rw(f,0):D3|=v),oy(f,h)}function XT(f,h){h===0&&((f.mode&1)===0?h=1:(h=u_,u_<<=1,(u_&130023424)===0&&(u_=4194304)));var v=gy();f=h_(f,h),f!==null&&(cy(f,h,v),oy(f,v))}function A$(f){var h=f.memoizedState,v=0;h!==null&&(v=h.retryLane),XT(f,v)}function I$(f,h){var v=0;switch(f.tag){case 13:var T=f.stateNode,D=f.memoizedState;D!==null&&(v=D.retryLane);break;case 19:T=f.stateNode;break;default:throw Error(n(314))}T!==null&&T.delete(h),XT(f,v)}var QT;QT=function(f,h,v){if(f!==null)if(f.memoizedProps!==h.pendingProps||xy.current)iy=!0;else{if((f.lanes&v)===0&&(h.flags&128)===0)return iy=!1,ay(f,h,v);iy=(f.flags&131072)!==0}else iy=!1,e1&&(h.flags&1048576)!==0&&gT(h,tx,h.index);switch(h.lanes=0,h.tag){case 2:var T=h.type;jw(f,h),f=h.pendingProps;var D=Aw(h,J1.current);_2(h,v),D=fx(null,h,T,f,D,v);var te=px();return h.flags|=1,typeof D=="object"&&D!==null&&typeof D.render=="function"&&D.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Ty(T)?(te=!0,Ky(h)):te=!1,h.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,i3(h),D.updater=ox,h.stateNode=D,D._reactInternals=h,l3(h,T,f,v),h=S3(null,h,T,!0,te,v)):(h.tag=0,e1&&te&&lv(h),my(null,h,D,v),h=h.child),h;case 16:T=h.elementType;e:{switch(jw(f,h),f=h.pendingProps,D=T._init,T=D(T._payload),h.type=T,D=h.tag=Fx(T),f=p_(T,f),D){case 0:h=Tx(null,h,T,f,v);break e;case 1:h=NT(null,h,T,f,v);break e;case 11:h=T3(null,h,T,f,v);break e;case 14:h=F_(null,h,T,p_(T.type,f),v);break e}throw Error(n(306,T,""))}return h;case 0:return T=h.type,D=h.pendingProps,D=h.elementType===T?D:p_(T,D),Tx(f,h,T,D,v);case 1:return T=h.type,D=h.pendingProps,D=h.elementType===T?D:p_(T,D),NT(f,h,T,D,v);case 3:e:{if(j_(h),f===null)throw Error(n(387));T=h.pendingProps,te=h.memoizedState,D=te.element,wT(f,h),sx(h,T,null,v);var Se=h.memoizedState;if(T=Se.element,te.isDehydrated)if(te={element:T,isDehydrated:!1,cache:Se.cache,pendingSuspenseBoundaries:Se.pendingSuspenseBoundaries,transitions:Se.transitions},h.updateQueue.baseState=te,h.memoizedState=te,h.flags&256){D=tw(Error(n(423)),h),h=$x(f,h,T,v,D);break e}else if(T!==D){D=tw(Error(n(424)),h),h=$x(f,h,T,v,D);break e}else for(Ny=h2(h.stateNode.containerInfo.firstChild),ty=h,e1=!0,f_=null,v=u3(h,null,T,v),h.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(D_(),T===D){h=L_(f,h,v);break e}my(f,h,T,v)}h=h.child}return h;case 5:return d3(h),f===null&&$y(h),T=h.type,D=h.pendingProps,te=f!==null?f.memoizedProps:null,Se=D.children,sv(T,D)?Se=null:te!==null&&sv(T,te)&&(h.flags|=32),RT(f,h),my(f,h,Se,v),h.child;case 6:return f===null&&$y(h),null;case 13:return $v(f,h,v);case 4:return dx(h,h.stateNode.containerInfo),T=h.pendingProps,f===null?h.child=x2(h,null,T,v):my(f,h,T,v),h.child;case 11:return T=h.type,D=h.pendingProps,D=h.elementType===T?D:p_(T,D),T3(f,h,T,D,v);case 7:return my(f,h,h.pendingProps,v),h.child;case 8:return my(f,h,h.pendingProps.children,v),h.child;case 12:return my(f,h,h.pendingProps.children,v),h.child;case 10:e:{if(T=h.type._context,D=h.pendingProps,te=h.memoizedProps,Se=D.value,Yg(X2,T._currentValue),T._currentValue=Se,te!==null)if(qr(te.value,Se)){if(te.children===D.children&&!xy.current){h=L_(f,h,v);break e}}else for(te=h.child,te!==null&&(te.return=h);te!==null;){var Ke=te.dependencies;if(Ke!==null){Se=te.child;for(var _n=Ke.firstContext;_n!==null;){if(_n.context===T){if(te.tag===1){_n=m_(-1,v&-v),_n.tag=2;var Yr=te.updateQueue;if(Yr!==null){Yr=Yr.shared;var Xo=Yr.pending;Xo===null?_n.next=_n:(_n.next=Xo.next,Xo.next=_n),Yr.pending=_n}}te.lanes|=v,_n=te.alternate,_n!==null&&(_n.lanes|=v),Jy(te.return,v,h),Ke.lanes|=v;break}_n=_n.next}}else if(te.tag===10)Se=te.type===h.type?null:te.child;else if(te.tag===18){if(Se=te.return,Se===null)throw Error(n(341));Se.lanes|=v,Ke=Se.alternate,Ke!==null&&(Ke.lanes|=v),Jy(Se,v,h),Se=te.sibling}else Se=te.child;if(Se!==null)Se.return=te;else for(Se=te;Se!==null;){if(Se===h){Se=null;break}if(te=Se.sibling,te!==null){te.return=Se.return,Se=te;break}Se=Se.return}te=Se}my(f,h,D.children,v),h=h.child}return h;case 9:return D=h.type,T=h.pendingProps.children,_2(h,v),D=py(D),T=T(D),h.flags|=1,my(f,h,T,v),h.child;case 14:return T=h.type,D=p_(T,h.pendingProps),D=p_(T.type,D),F_(f,h,T,D,v);case 15:return $3(f,h,h.type,h.pendingProps,v);case 17:return T=h.type,D=h.pendingProps,D=h.elementType===T?D:p_(T,D),jw(f,h),h.tag=1,Ty(T)?(f=!0,Ky(h)):f=!1,_2(h,v),o3(h,T,D),l3(h,T,D,v),S3(null,h,T,!0,f,v);case 19:return PT(f,h,v);case 22:return E3(f,h,v)}throw Error(n(156,h.tag))};function JT(f,h){return E_(f,h)}function C$(f,h,v,T){this.tag=f,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jy(f,h,v,T){return new C$(f,h,v,T)}function V3(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Fx(f){if(typeof f=="function")return V3(f)?1:0;if(f!=null){if(f=f.$$typeof,f===xn)return 11;if(f===et)return 14}return 2}function N2(f,h){var v=f.alternate;return v===null?(v=jy(f.tag,h,f.key,f.mode),v.elementType=f.elementType,v.type=f.type,v.stateNode=f.stateNode,v.alternate=f,f.alternate=v):(v.pendingProps=h,v.type=f.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=f.flags&14680064,v.childLanes=f.childLanes,v.lanes=f.lanes,v.child=f.child,v.memoizedProps=f.memoizedProps,v.memoizedState=f.memoizedState,v.updateQueue=f.updateQueue,h=f.dependencies,v.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},v.sibling=f.sibling,v.index=f.index,v.ref=f.ref,v}function jx(f,h,v,T,D,te){var Se=2;if(T=f,typeof f=="function")V3(f)&&(Se=1);else if(typeof f=="string")Se=5;else e:switch(f){case Oe:return aw(v.children,D,te,h);case Ce:Se=8,D|=8;break;case He:return f=jy(12,v,h,D|2),f.elementType=He,f.lanes=te,f;case Lr:return f=jy(13,v,h,D),f.elementType=Lr,f.lanes=te,f;case jr:return f=jy(19,v,h,D),f.elementType=jr,f.lanes=te,f;case Tt:return Lx(v,D,te,h);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case $t:Se=10;break e;case Sn:Se=9;break e;case xn:Se=11;break e;case et:Se=14;break e;case Ft:Se=16,T=null;break e}throw Error(n(130,f==null?f:typeof f,""))}return h=jy(Se,v,h,D),h.elementType=f,h.type=T,h.lanes=te,h}function aw(f,h,v,T){return f=jy(7,f,T,h),f.lanes=v,f}function Lx(f,h,v,T){return f=jy(22,f,T,h),f.elementType=Tt,f.lanes=v,f.stateNode={isHidden:!1},f}function Z3(f,h,v){return f=jy(6,f,null,h),f.lanes=v,f}function q3(f,h,v){return h=jy(4,f.children!==null?f.children:[],f.key,h),h.lanes=v,h.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},h}function O$(f,h,v,T,D){this.tag=h,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xg(0),this.expirationTimes=Xg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xg(0),this.identifierPrefix=T,this.onRecoverableError=D,this.mutableSourceEagerHydrationData=null}function G3(f,h,v,T,D,te,Se,Ke,_n){return f=new O$(f,h,v,Ke,_n),h===1?(h=1,te===!0&&(h|=8)):h=0,te=jy(3,null,null,h),f.current=te,te.stateNode=f,te.memoizedState={element:T,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},i3(te),f}function k$(f,h,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Re,key:T==null?null:""+T,children:f,containerInfo:h,implementation:v}}function e$(f){if(!f)return g2;f=f._reactInternals;e:{if(uy(f)!==f||f.tag!==1)throw Error(n(170));var h=f;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Ty(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(n(171))}if(f.tag===1){var v=f.type;if(Ty(v))return pT(f,v,h)}return h}function t$(f,h,v,T,D,te,Se,Ke,_n){return f=G3(v,T,!0,f,D,te,Se,Ke,_n),f.context=e$(null),v=f.current,T=gy(),D=O2(v),te=m_(T,D),te.callback=h??null,b2(v,te,D),f.current.lanes=D,cy(f,D,T),oy(f,T),f}function Ux(f,h,v,T){var D=h.current,te=gy(),Se=O2(D);return v=e$(v),h.context===null?h.context=v:h.pendingContext=v,h=m_(te,Se),h.payload={element:f},T=T===void 0?null:T,T!==null&&(h.callback=T),f=b2(D,h,Se),f!==null&&(w_(f,D,Se,te),v2(f,D,Se)),Se}function Bx(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function n$(f,h){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var v=f.retryLane;f.retryLane=v!==0&&v<h?v:h}}function H3(f,h){n$(f,h),(f=f.alternate)&&n$(f,h)}function R$(){return null}var Y3=typeof reportError=="function"?reportError:function(f){console.error(f)};function zx(f){this._internalRoot=f}Wx.prototype.render=zx.prototype.render=function(f){var h=this._internalRoot;if(h===null)throw Error(n(409));Ux(f,h,null,null)},Wx.prototype.unmount=zx.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var h=f.containerInfo;nw(function(){Ux(null,f,null,null)}),h[Ry]=null}};function Wx(f){this._internalRoot=f}Wx.prototype.unstable_scheduleHydration=function(f){if(f){var h=K1();f={blockedOn:null,target:f,priority:h};for(var v=0;v<Uo.length&&h!==0&&h<Uo[v].priority;v++);Uo.splice(v,0,f),v===0&&Zr(f)}};function K3(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function Vx(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function r$(){}function Zx(f,h,v,T,D){if(D){if(typeof T=="function"){var te=T;T=function(){var Yr=Bx(Se);te.call(Yr)}}var Se=t$(h,T,f,0,null,!1,!1,"",r$);return f._reactRootContainer=Se,f[Ry]=Se.current,f2(f.nodeType===8?f.parentNode:f),nw(),Se}for(;D=f.lastChild;)f.removeChild(D);if(typeof T=="function"){var Ke=T;T=function(){var Yr=Bx(_n);Ke.call(Yr)}}var _n=G3(f,0,!1,null,null,!1,!1,"",r$);return f._reactRootContainer=_n,f[Ry]=_n.current,f2(f.nodeType===8?f.parentNode:f),nw(function(){Ux(h,_n,v,T)}),_n}function qx(f,h,v,T,D){var te=v._reactRootContainer;if(te){var Se=te;if(typeof D=="function"){var Ke=D;D=function(){var _n=Bx(Se);Ke.call(_n)}}Ux(h,Se,f,D)}else Se=Zx(v,h,f,D,T);return Bx(Se)}E1=function(f){switch(f.tag){case 3:var h=f.stateNode;if(h.current.memoizedState.isDehydrated){var v=Iy(h.pendingLanes);v!==0&&(by(h,v|1),oy(h,Ag()),(Og&6)===0&&(Vw=Ag()+500,y2()))}break;case 13:nw(function(){var T=h_(f,1);if(T!==null){var D=gy();w_(T,f,1,D)}}),H3(f,1)}},_1=function(f){if(f.tag===13){var h=h_(f,134217728);if(h!==null){var v=gy();w_(h,f,134217728,v)}H3(f,134217728)}},qy=function(f){if(f.tag===13){var h=O2(f),v=h_(f,h);if(v!==null){var T=gy();w_(v,f,h,T)}H3(f,h)}},K1=function(){return Z0},de=function(f,h){var v=Z0;try{return Z0=f,h()}finally{Z0=v}},nr=function(f,h,v){switch(h){case"input":if(P0(f,v),h=v.name,v.type==="radio"&&h!=null){for(v=f;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<v.length;h++){var T=v[h];if(T!==f&&T.form===f.form){var D=Xv(T);if(!D)throw Error(n(90));Sg(T),P0(T,D)}}}break;case"textarea":Kg(f,v);break;case"select":h=v.value,h!=null&&U0(f,!!v.multiple,h,!1)}},c1=U3,Hg=nw;var N$={usingClientEntryPoint:!1,Events:[Q1,K0,Xv,j0,Gg,U3]},kv={findFiberByHostInstance:k_,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},P$={bundleType:kv.bundleType,version:kv.version,rendererPackageName:kv.rendererPackageName,rendererConfig:kv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=dy(f),f===null?null:f.stateNode},findFiberByHostInstance:kv.findFiberByHostInstance||R$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gx.isDisabled&&Gx.supportsFiber)try{wy=Gx.inject(P$),Mg=Gx}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N$,reactDom_production_min.createPortal=function(f,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!K3(h))throw Error(n(200));return k$(f,h,null,v)},reactDom_production_min.createRoot=function(f,h){if(!K3(f))throw Error(n(299));var v=!1,T="",D=Y3;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(T=h.identifierPrefix),h.onRecoverableError!==void 0&&(D=h.onRecoverableError)),h=G3(f,1,!1,null,null,v,!1,T,D),f[Ry]=h.current,f2(f.nodeType===8?f.parentNode:f),new zx(h)},reactDom_production_min.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var h=f._reactInternals;if(h===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=dy(h),f=f===null?null:f.stateNode,f},reactDom_production_min.flushSync=function(f){return nw(f)},reactDom_production_min.hydrate=function(f,h,v){if(!Vx(h))throw Error(n(200));return qx(null,f,h,!0,v)},reactDom_production_min.hydrateRoot=function(f,h,v){if(!K3(f))throw Error(n(405));var T=v!=null&&v.hydratedSources||null,D=!1,te="",Se=Y3;if(v!=null&&(v.unstable_strictMode===!0&&(D=!0),v.identifierPrefix!==void 0&&(te=v.identifierPrefix),v.onRecoverableError!==void 0&&(Se=v.onRecoverableError)),h=t$(h,null,f,1,v??null,D,!1,te,Se),f[Ry]=h.current,f2(f),T)for(f=0;f<T.length;f++)v=T[f],D=v._getVersion,D=D(v._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[v,D]:h.mutableSourceEagerHydrationData.push(v,D);return new Wx(h)},reactDom_production_min.render=function(f,h,v){if(!Vx(h))throw Error(n(200));return qx(null,f,h,!1,v)},reactDom_production_min.unmountComponentAtNode=function(f){if(!Vx(f))throw Error(n(40));return f._reactRootContainer?(nw(function(){qx(null,null,f,!1,function(){f._reactRootContainer=null,f[Ry]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=U3,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(f,h,v,T){if(!Vx(v))throw Error(n(200));if(f==null||f._reactInternals===void 0)throw Error(n(38));return qx(f,h,v,!1,T)},reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var t=requireReactDom();return client.createRoot=t.createRoot,client.hydrateRoot=t.hydrateRoot,client}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);function r(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=r(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function clsx(){for(var t,e,n=0,i="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=r(t))&&(i&&(i+=" "),i+=e);return i}function Mt$2(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}Mt$2(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var L$1=t=>typeof t=="number"&&!isNaN(t),N=t=>typeof t=="string",P=t=>typeof t=="function",mt$1=t=>N(t)||L$1(t),B$1=t=>N(t)||P(t)?t:null,pt=(t,e)=>t===!1||L$1(t)&&t>0?t:e,z$1=t=>reactExports.isValidElement(t)||N(t)||P(t)||L$1(t);function Z$1(t,e,n=300){let{scrollHeight:i,style:o}=t;requestAnimationFrame(()=>{o.minHeight="initial",o.height=i+"px",o.transition=`all ${n}ms`,requestAnimationFrame(()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(e,n)})})}function $({enter:t,exit:e,appendPosition:n=!1,collapse:i=!0,collapseDuration:o=300}){return function({children:a,position:l,preventExitTransition:c,done:p,nodeRef:s,isIn:u,playToast:d}){let g=n?`${t}--${l}`:t,w=n?`${e}--${l}`:e,x=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{let C=s.current,O=g.split(" "),Y=q=>{q.target===s.current&&(d(),C.removeEventListener("animationend",Y),C.removeEventListener("animationcancel",Y),x.current===0&&q.type!=="animationcancel"&&C.classList.remove(...O))};C.classList.add(...O),C.addEventListener("animationend",Y),C.addEventListener("animationcancel",Y)},[]),reactExports.useEffect(()=>{let C=s.current,O=()=>{C.removeEventListener("animationend",O),i?Z$1(C,p,o):p()};u||(c?O():(x.current=1,C.className+=` ${w}`,C.addEventListener("animationend",O)))},[u]),React.createElement(React.Fragment,null,a)}}function J(t,e){return{content:tt$1(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function tt$1(t,e,n=!1){return reactExports.isValidElement(t)&&!N(t.type)?reactExports.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):P(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):t}function yt$1({closeToast:t,theme:e,ariaLabel:n="close"}){return React.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:i=>{i.stopPropagation(),t(!0)},"aria-label":n},React.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gt$2({delay:t,isRunning:e,closeToast:n,type:i="default",hide:o,className:a,controlledProgress:l,progress:c,rtl:p,isIn:s,theme:u}){let d=o||l&&c===0,g={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};l&&(g.transform=`scaleX(${c})`);let w=clsx("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":p}),x=P(a)?a({rtl:p,type:i,defaultClassName:w}):clsx(w,a),C={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{s&&n()}};return React.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":d},React.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${i}`}),React.createElement("div",{role:"progressbar","aria-hidden":d?"true":"false","aria-label":"notification timer",className:x,style:g,...C}))}var Xt$2=1,at=()=>`${Xt$2++}`;function _t$1(t,e,n){let i=1,o=0,a=[],l=[],c=e,p=new Map,s=new Set,u=q=>(s.add(q),()=>s.delete(q)),d=()=>{l=Array.from(p.values()),s.forEach(q=>q())},g=({containerId:q,toastId:ue,updateId:pe})=>{let se=q?q!==t:t!==1,Re=p.has(ue)&&pe==null;return se||Re},w=(q,ue)=>{p.forEach(pe=>{var se;(ue==null||ue===pe.props.toastId)&&((se=pe.toggle)==null||se.call(pe,q))})},x=q=>{var ue,pe;(pe=(ue=q.props)==null?void 0:ue.onClose)==null||pe.call(ue,q.removalReason),q.isActive=!1},C=q=>{if(q==null)p.forEach(x);else{let ue=p.get(q);ue&&x(ue)}d()},O=()=>{o-=a.length,a=[]},Y=q=>{var ue,pe;let{toastId:se,updateId:Re}=q.props,Oe=Re==null;q.staleId&&p.delete(q.staleId),q.isActive=!0,p.set(se,q),d(),n(J(q,Oe?"added":"updated")),Oe&&((pe=(ue=q.props).onOpen)==null||pe.call(ue))};return{id:t,props:c,observe:u,toggle:w,removeToast:C,toasts:p,clearQueue:O,buildToast:(q,ue)=>{if(g(ue))return;let{toastId:pe,updateId:se,data:Re,staleId:Oe,delay:Ce}=ue,He=se==null;He&&o++;let $t={...c,style:c.toastStyle,key:i++,...Object.fromEntries(Object.entries(ue).filter(([xn,Lr])=>Lr!=null)),toastId:pe,updateId:se,data:Re,isIn:!1,className:B$1(ue.className||c.toastClassName),progressClassName:B$1(ue.progressClassName||c.progressClassName),autoClose:ue.isLoading?!1:pt(ue.autoClose,c.autoClose),closeToast(xn){p.get(pe).removalReason=xn,C(pe)},deleteToast(){let xn=p.get(pe);if(xn!=null){if(n(J(xn,"removed")),p.delete(pe),o--,o<0&&(o=0),a.length>0){Y(a.shift());return}d()}}};$t.closeButton=c.closeButton,ue.closeButton===!1||z$1(ue.closeButton)?$t.closeButton=ue.closeButton:ue.closeButton===!0&&($t.closeButton=z$1(c.closeButton)?c.closeButton:!0);let Sn={content:q,props:$t,staleId:Oe};c.limit&&c.limit>0&&o>c.limit&&He?a.push(Sn):L$1(Ce)?setTimeout(()=>{Y(Sn)},Ce):Y(Sn)},setProps(q){c=q},setToggle:(q,ue)=>{let pe=p.get(q);pe&&(pe.toggle=ue)},isToastActive:q=>{var ue;return(ue=p.get(q))==null?void 0:ue.isActive},getSnapshot:()=>l}}var I=new Map,F=[],st=new Set,Vt$1=t=>st.forEach(e=>e(t)),bt$1=()=>I.size>0;function Qt$1(){F.forEach(t=>nt$2(t.content,t.options)),F=[]}var vt=(t,{containerId:e})=>{var n;return(n=I.get(e||1))==null?void 0:n.toasts.get(t)};function X$1(t,e){var n;if(e)return!!((n=I.get(e))!=null&&n.isToastActive(t));let i=!1;return I.forEach(o=>{o.isToastActive(t)&&(i=!0)}),i}function ht$1(t){if(!bt$1()){F=F.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||mt$1(t))I.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=I.get(t.containerId);e?e.removeToast(t.id):I.forEach(n=>{n.removeToast(t.id)})}}var Ct=(t={})=>{I.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function nt$2(t,e){z$1(t)&&(bt$1()||F.push({content:t,options:e}),I.forEach(n=>{n.buildToast(t,e)}))}function xt$1(t){var e;(e=I.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function rt$1(t,e){I.forEach(n=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===n.id)&&n.toggle(t,e?.id)})}function Et$1(t){let e=t.containerId||1;return{subscribe(n){let i=_t$1(e,t,Vt$1);I.set(e,i);let o=i.observe(n);return Qt$1(),()=>{o(),I.delete(e)}},setProps(n){var i;(i=I.get(e))==null||i.setProps(n)},getSnapshot(){var n;return(n=I.get(e))==null?void 0:n.getSnapshot()}}}function Pt$1(t){return st.add(t),()=>{st.delete(t)}}function Wt$2(t){return t&&(N(t.toastId)||L$1(t.toastId))?t.toastId:at()}function U$2(t,e){return nt$2(t,e),e.toastId}function V$1(t,e){return{...e,type:e&&e.type||t,toastId:Wt$2(e)}}function Q$1(t){return(e,n)=>U$2(e,V$1(t,n))}function y(t,e){return U$2(t,V$1("default",e))}y.loading=(t,e)=>U$2(t,V$1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function Gt(t,{pending:e,error:n,success:i},o){let a;e&&(a=N(e)?y.loading(e,o):y.loading(e.render,{...o,...e}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(s,u,d)=>{if(u==null){y.dismiss(a);return}let g={type:s,...l,...o,data:d},w=N(u)?{render:u}:u;return a?y.update(a,{...g,...w}):y(w.render,{...g,...w}),d},p=P(t)?t():t;return p.then(s=>c("success",i,s)).catch(s=>c("error",n,s)),p}y.promise=Gt;y.success=Q$1("success");y.info=Q$1("info");y.error=Q$1("error");y.warning=Q$1("warning");y.warn=y.warning;y.dark=(t,e)=>U$2(t,V$1("default",{theme:"dark",...e}));function qt(t){ht$1(t)}y.dismiss=qt;y.clearWaitingQueue=Ct;y.isActive=X$1;y.update=(t,e={})=>{let n=vt(t,e);if(n){let{props:i,content:o}=n,a={delay:100,...i,...e,toastId:e.toastId||t,updateId:at()};a.toastId!==t&&(a.staleId=t);let l=a.render||o;delete a.render,U$2(l,a)}};y.done=t=>{y.update(t,{progress:1})};y.onChange=Pt$1;y.play=t=>rt$1(!0,t);y.pause=t=>rt$1(!1,t);function It$1(t){var e;let{subscribe:n,getSnapshot:i,setProps:o}=reactExports.useRef(Et$1(t)).current;o(t);let a=(e=reactExports.useSyncExternalStore(n,i,i))==null?void 0:e.slice();function l(c){if(!a)return[];let p=new Map;return t.newestOnTop&&a.reverse(),a.forEach(s=>{let{position:u}=s.props;p.has(u)||p.set(u,[]),p.get(u).push(s)}),Array.from(p,s=>c(s[0],s[1]))}return{getToastToRender:l,isToastActive:X$1,count:a?.length}}function At$1(t){let[e,n]=reactExports.useState(!1),[i,o]=reactExports.useState(!1),a=reactExports.useRef(null),l=reactExports.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:p,closeToast:s,onClick:u,closeOnClick:d}=t;xt$1({id:t.toastId,containerId:t.containerId,fn:n}),reactExports.useEffect(()=>{if(t.pauseOnFocusLoss)return g(),()=>{w()}},[t.pauseOnFocusLoss]);function g(){document.hasFocus()||Y(),window.addEventListener("focus",O),window.addEventListener("blur",Y)}function w(){window.removeEventListener("focus",O),window.removeEventListener("blur",Y)}function x(Oe){if(t.draggable===!0||t.draggable===Oe.pointerType){q();let Ce=a.current;l.canCloseOnClick=!0,l.canDrag=!0,Ce.style.transition="none",t.draggableDirection==="x"?(l.start=Oe.clientX,l.removalDistance=Ce.offsetWidth*(t.draggablePercent/100)):(l.start=Oe.clientY,l.removalDistance=Ce.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function C(Oe){let{top:Ce,bottom:He,left:$t,right:Sn}=a.current.getBoundingClientRect();Oe.nativeEvent.type!=="touchend"&&t.pauseOnHover&&Oe.clientX>=$t&&Oe.clientX<=Sn&&Oe.clientY>=Ce&&Oe.clientY<=He?Y():O()}function O(){n(!0)}function Y(){n(!1)}function q(){l.didMove=!1,document.addEventListener("pointermove",pe),document.addEventListener("pointerup",se)}function ue(){document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",se)}function pe(Oe){let Ce=a.current;if(l.canDrag&&Ce){l.didMove=!0,e&&Y(),t.draggableDirection==="x"?l.delta=Oe.clientX-l.start:l.delta=Oe.clientY-l.start,l.start!==Oe.clientX&&(l.canCloseOnClick=!1);let He=t.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;Ce.style.transform=`translate3d(${He},0)`,Ce.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function se(){ue();let Oe=a.current;if(l.canDrag&&l.didMove&&Oe){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){o(!0),t.closeToast(!0),t.collapseAll();return}Oe.style.transition="transform 0.2s, opacity 0.2s",Oe.style.removeProperty("transform"),Oe.style.removeProperty("opacity")}}let Re={onPointerDown:x,onPointerUp:C};return c&&p&&(Re.onMouseEnter=Y,t.stacked||(Re.onMouseLeave=O)),d&&(Re.onClick=Oe=>{u&&u(Oe),l.canCloseOnClick&&s(!0)}),{playToast:O,pauseToast:Y,isRunning:e,preventExitTransition:i,toastRef:a,eventHandlers:Re}}var Ot$2=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,G=({theme:t,type:e,isLoading:n,...i})=>React.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...i});function ao$2(t){return React.createElement(G,{...t},React.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function so$2(t){return React.createElement(G,{...t},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function no$2(t){return React.createElement(G,{...t},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ro$2(t){return React.createElement(G,{...t},React.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function io$2(){return React.createElement("div",{className:"Toastify__spinner"})}var W={info:so$2,warning:ao$2,success:no$2,error:ro$2,spinner:io$2},lo$2=t=>t in W;function Nt$1({theme:t,type:e,isLoading:n,icon:i}){let o=null,a={theme:t,type:e};return i===!1||(P(i)?o=i({...a,isLoading:n}):reactExports.isValidElement(i)?o=reactExports.cloneElement(i,a):n?o=W.spinner():lo$2(e)&&(o=W[e](a))),o}var wt=t=>{let{isRunning:e,preventExitTransition:n,toastRef:i,eventHandlers:o,playToast:a}=At$1(t),{closeButton:l,children:c,autoClose:p,onClick:s,type:u,hideProgressBar:d,closeToast:g,transition:w,position:x,className:C,style:O,progressClassName:Y,updateId:q,role:ue,progress:pe,rtl:se,toastId:Re,deleteToast:Oe,isIn:Ce,isLoading:He,closeOnClick:$t,theme:Sn,ariaLabel:xn}=t,Lr=clsx("Toastify__toast",`Toastify__toast-theme--${Sn}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":se},{"Toastify__toast--close-on-click":$t}),jr=P(C)?C({rtl:se,position:x,type:u,defaultClassName:Lr}):clsx(Lr,C),et=Nt$1(t),Ft=!!pe||!p,Tt={closeToast:g,type:u,theme:Sn},ze=null;return l===!1||(P(l)?ze=l(Tt):reactExports.isValidElement(l)?ze=reactExports.cloneElement(l,Tt):ze=yt$1(Tt)),React.createElement(w,{isIn:Ce,done:Oe,position:x,preventExitTransition:n,nodeRef:i,playToast:a},React.createElement("div",{id:Re,tabIndex:0,onClick:s,"data-in":Ce,className:jr,...o,style:O,ref:i,...Ce&&{role:ue,"aria-label":xn}},et!=null&&React.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!He})},et),tt$1(c,t,!e),ze,!t.customProgressBar&&React.createElement(gt$2,{...q&&!Ft?{key:`p-${q}`}:{},rtl:se,theme:Sn,delay:p,isRunning:e,isIn:Ce,closeToast:g,hide:d,type:u,className:Y,controlledProgress:Ft,progress:pe||0})))},K$1=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),lt$2=$(K$1("bounce",!0)),_o$2={position:"top-right",transition:lt$2,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function Lt(t){let e={..._o$2,...t},n=t.stacked,[i,o]=reactExports.useState(!0),a=reactExports.useRef(null),{getToastToRender:l,isToastActive:c,count:p}=It$1(e),{className:s,style:u,rtl:d,containerId:g,hotKeys:w}=e;function x(O){let Y=clsx("Toastify__toast-container",`Toastify__toast-container--${O}`,{"Toastify__toast-container--rtl":d});return P(s)?s({position:O,rtl:d,defaultClassName:Y}):clsx(Y,B$1(s))}function C(){n&&(o(!0),y.play())}return Ot$2(()=>{var O;if(n){let Y=a.current.querySelectorAll('[data-in="true"]'),q=12,ue=(O=e.position)==null?void 0:O.includes("top"),pe=0,se=0;Array.from(Y).reverse().forEach((Re,Oe)=>{let Ce=Re;Ce.classList.add("Toastify__toast--stacked"),Oe>0&&(Ce.dataset.collapsed=`${i}`),Ce.dataset.pos||(Ce.dataset.pos=ue?"top":"bot");let He=pe*(i?.2:1)+(i?0:q*Oe);Ce.style.setProperty("--y",`${ue?He:He*-1}px`),Ce.style.setProperty("--g",`${q}`),Ce.style.setProperty("--s",`${1-(i?se:0)}`),pe+=Ce.offsetHeight,se+=.025})}},[i,p,n]),reactExports.useEffect(()=>{function O(Y){var q;let ue=a.current;w(Y)&&((q=ue.querySelector('[tabIndex="0"]'))==null||q.focus(),o(!1),y.pause()),Y.key==="Escape"&&(document.activeElement===ue||ue!=null&&ue.contains(document.activeElement))&&(o(!0),y.play())}return document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)}},[w]),React.createElement("section",{ref:a,className:"Toastify",id:g,onMouseEnter:()=>{n&&(o(!1),y.pause())},onMouseLeave:C,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},l((O,Y)=>{let q=Y.length?{...u}:{...u,pointerEvents:"none"};return React.createElement("div",{tabIndex:-1,className:x(O),"data-stacked":n,style:q,key:`c-${O}`},Y.map(({content:ue,props:pe})=>React.createElement(wt,{...pe,stacked:n,collapseAll:C,isIn:c(pe.toastId,pe.containerId),key:`t-${pe.key}`},ue)))}))}/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$2.apply(this,arguments)}var Action;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createHashHistory(t){t===void 0&&(t={});function e(o,a){let{pathname:l="/",search:c="",hash:p=""}=parsePath(o.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),createLocation("",{pathname:l,search:c,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(o,a){let l=o.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let p=o.location.href,s=p.indexOf("#");c=s===-1?p:p.slice(0,s)}return c+"#"+(typeof a=="string"?a:createPath(a))}function i(o,a){warning(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return getUrlBasedHistory(e,n,i,t)}function invariant(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,n,i){return n===void 0&&(n=null),_extends$2({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:n,key:e&&e.key||i||createKey()})}function createPath(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function parsePath(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,l=o.history,c=Action.Pop,p=null,s=u();s==null&&(s=0,l.replaceState(_extends$2({},l.state,{idx:s}),""));function u(){return(l.state||{idx:null}).idx}function d(){c=Action.Pop;let O=u(),Y=O==null?null:O-s;s=O,p&&p({action:c,location:C.location,delta:Y})}function g(O,Y){c=Action.Push;let q=createLocation(C.location,O,Y);n&&n(q,O),s=u()+1;let ue=getHistoryState(q,s),pe=C.createHref(q);try{l.pushState(ue,"",pe)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;o.location.assign(pe)}a&&p&&p({action:c,location:C.location,delta:1})}function w(O,Y){c=Action.Replace;let q=createLocation(C.location,O,Y);n&&n(q,O),s=u();let ue=getHistoryState(q,s),pe=C.createHref(q);l.replaceState(ue,"",pe),a&&p&&p({action:c,location:C.location,delta:0})}function x(O){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,q=typeof O=="string"?O:createPath(O);return invariant(Y,"No window.location.(origin|href) available to create URL for href: "+q),new URL(q,Y)}let C={get action(){return c},get location(){return t(o,l)},listen(O){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(PopStateEventType,d),p=O,()=>{o.removeEventListener(PopStateEventType,d),p=null}},createHref(O){return e(o,O)},createURL:x,encodeLocation(O){let Y=x(O);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:g,replace:w,go(O){return l.go(O)}};return C}var ResultType;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ResultType||(ResultType={}));function matchRoutes(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?parsePath(e):e,o=stripBasename(i.pathname||"/",n);if(o==null)return null;let a=flattenRoutes(t);rankRouteBranches(a);let l=null;for(let c=0;l==null&&c<a.length;++c)l=matchRouteBranch(a[c],safelyDecodeURI(o));return l}function flattenRoutes(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let o=(a,l,c)=>{let p={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};p.relativePath.startsWith("/")&&(invariant(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let s=joinPaths([i,p.relativePath]),u=n.concat(p);a.children&&a.children.length>0&&(invariant(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+s+'".')),flattenRoutes(a.children,e,u,s)),!(a.path==null&&!a.index)&&e.push({path:s,score:computeScore(s,a.index),routesMeta:u})};return t.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))o(a,l);else for(let p of explodeOptionalSegments(a.path))o(a,l,p)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let l=explodeOptionalSegments(i.join("/")),c=[];return c.push(...l.map(p=>p===""?a:[a,p].join("/"))),o&&c.push(...l),c.map(p=>t.startsWith("/")&&p===""?"/":p)}function rankRouteBranches(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:compareIndexes(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let n=t.split("/"),i=n.length;return n.some(isSplat)&&(i+=splatPenalty),e&&(i+=indexRouteValue),n.filter(o=>!isSplat(o)).reduce((o,a)=>o+(paramRe.test(a)?dynamicSegmentValue:a===""?emptySegmentValue:staticSegmentValue),i)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e){let{routesMeta:n}=t,i={},o="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],p=l===n.length-1,s=o==="/"?e:e.slice(o.length)||"/",u=matchPath({path:c.relativePath,caseSensitive:c.caseSensitive,end:p},s);if(!u)return null;Object.assign(i,u.params);let d=c.route;a.push({params:i,pathname:joinPaths([o,u.pathname]),pathnameBase:normalizePathname(joinPaths([o,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(o=joinPaths([o,u.pathnameBase]))}return a}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=compilePath(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let a=o[0],l=a.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:i.reduce((s,u,d)=>{if(u==="*"){let g=c[d]||"";l=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}return s[u]=safelyDecodeURIComponent(c[d]||"",u),s},{}),pathname:a,pathnameBase:l,pattern:t}}function compilePath(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(l,c)=>(i.push(c),"/([^\\/]+)"));return t.endsWith("*")?(i.push("*"),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function safelyDecodeURI(t){try{return decodeURI(t)}catch(e){return warning(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function safelyDecodeURIComponent(t,e){try{return decodeURIComponent(t)}catch(n){return warning(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function resolvePath(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:o=""}=typeof t=="string"?parsePath(t):t;return{pathname:n?n.startsWith("/")?n:resolvePathname(n,e):e,search:normalizeSearch(i),hash:normalizeHash(o)}}function resolvePathname(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function resolveTo(t,e,n,i){i===void 0&&(i=!1);let o;typeof t=="string"?o=parsePath(t):(o=_extends$2({},t),invariant(!o.pathname||!o.pathname.includes("?"),getInvalidPathError("?","pathname","search",o)),invariant(!o.pathname||!o.pathname.includes("#"),getInvalidPathError("#","pathname","hash",o)),invariant(!o.search||!o.search.includes("#"),getInvalidPathError("#","search","hash",o)));let a=t===""||o.pathname==="",l=a?"/":o.pathname,c;if(i||l==null)c=n;else{let d=e.length-1;if(l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),d-=1;o.pathname=g.join("/")}c=d>=0?e[d]:"/"}let p=resolvePath(o,c),s=l&&l!=="/"&&l.endsWith("/"),u=(a||l===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(s||u)&&(p.pathname+="/"),p}const joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext$1=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(t,e){let{relative:n}=e===void 0?{}:e;useInRouterContext()||invariant(!1);let{basename:i,navigator:o}=reactExports.useContext(NavigationContext$1),{hash:a,pathname:l,search:c}=useResolvedPath(t,{relative:n}),p=l;return i!=="/"&&(p=l==="/"?i:joinPaths([i,l])),o.createHref({pathname:p,search:c,hash:a})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$1(t){reactExports.useContext(NavigationContext$1).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let t=reactExports.useContext(DataRouterContext),{basename:e,navigator:n}=reactExports.useContext(NavigationContext$1),{matches:i}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),a=JSON.stringify(getPathContributingMatches(i).map(p=>p.pathnameBase)),l=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{l.current=!0}),reactExports.useCallback(function(p,s){if(s===void 0&&(s={}),!l.current)return;if(typeof p=="number"){n.go(p);return}let u=resolveTo(p,JSON.parse(a),o,s.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:joinPaths([e,u.pathname])),(s.replace?n.replace:n.push)(u,s.state,s)},[e,n,a,o,t])}function useParams(){let{matches:t}=reactExports.useContext(RouteContext),e=t[t.length-1];return e?e.params:{}}function useResolvedPath(t,e){let{relative:n}=e===void 0?{}:e,{matches:i}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),a=JSON.stringify(getPathContributingMatches(i).map(l=>l.pathnameBase));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function useRoutes(t,e){return useRoutesImpl(t,e)}function useRoutesImpl(t,e,n){useInRouterContext()||invariant(!1);let{navigator:i}=reactExports.useContext(NavigationContext$1),{matches:o}=reactExports.useContext(RouteContext),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let p=useLocation(),s;if(e){var u;let C=typeof e=="string"?parsePath(e):e;c==="/"||(u=C.pathname)!=null&&u.startsWith(c)||invariant(!1),s=C}else s=p;let d=s.pathname||"/",g=c==="/"?d:d.slice(c.length)||"/",w=matchRoutes(t,{pathname:g}),x=_renderMatches(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:joinPaths([c,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:joinPaths([c,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n);return e&&x?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},s),navigationType:Action.Pop}},x):x}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),n?reactExports.createElement("pre",{style:o},n):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(t){let{routeContext:e,match:n,children:i}=t,o=reactExports.useContext(DataRouterContext);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),reactExports.createElement(RouteContext.Provider,{value:e},i)}function _renderMatches(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var o;if((o=n)!=null&&o.errors)t=n.matches;else return null}let a=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let c=a.findIndex(p=>p.route.id&&l?.[p.route.id]);c>=0||invariant(!1),a=a.slice(0,Math.min(a.length,c+1))}return a.reduceRight((c,p,s)=>{let u=p.route.id?l?.[p.route.id]:null,d=null;n&&(d=p.route.errorElement||defaultErrorElement);let g=e.concat(a.slice(0,s+1)),w=()=>{let x;return u?x=d:p.route.Component?x=reactExports.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=c,reactExports.createElement(RenderedRoute,{match:p,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:x})};return n&&(p.route.ErrorBoundary||p.route.errorElement||s===0)?reactExports.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:d,error:u,children:w(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):w()},null)}var DataRouterHook$1=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(DataRouterHook$1||{}),DataRouterStateHook$1=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(DataRouterStateHook$1||{});function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return e||invariant(!1),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return e||invariant(!1),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return e||invariant(!1),e}function useCurrentRouteId(t){let e=useRouteContext(),n=e.matches[e.matches.length-1];return n.route.id||invariant(!1),n.route.id}function useRouteError(){var t;let e=reactExports.useContext(RouteErrorContext),n=useDataRouterState(),i=useCurrentRouteId();return e||((t=n.errors)==null?void 0:t[i])}function useNavigateStable(){let{router:t}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),n=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{n.current=!0}),reactExports.useCallback(function(o,a){a===void 0&&(a={}),n.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,_extends$1({fromRouteId:e},a)))},[t,e])}function Navigate(t){let{to:e,replace:n,state:i,relative:o}=t;useInRouterContext()||invariant(!1);let{matches:a}=reactExports.useContext(RouteContext),{pathname:l}=useLocation(),c=useNavigate(),p=resolveTo(e,getPathContributingMatches(a).map(u=>u.pathnameBase),l,o==="path"),s=JSON.stringify(p);return reactExports.useEffect(()=>c(JSON.parse(s),{replace:n,state:i,relative:o}),[c,s,o,n,i]),null}function Route(t){invariant(!1)}function Router(t){let{basename:e="/",children:n=null,location:i,navigationType:o=Action.Pop,navigator:a,static:l=!1}=t;useInRouterContext()&&invariant(!1);let c=e.replace(/^\/*/,"/"),p=reactExports.useMemo(()=>({basename:c,navigator:a,static:l}),[c,a,l]);typeof i=="string"&&(i=parsePath(i));let{pathname:s="/",search:u="",hash:d="",state:g=null,key:w="default"}=i,x=reactExports.useMemo(()=>{let C=stripBasename(s,c);return C==null?null:{location:{pathname:C,search:u,hash:d,state:g,key:w},navigationType:o}},[c,s,u,d,g,w,o]);return x==null?null:reactExports.createElement(NavigationContext$1.Provider,{value:p},reactExports.createElement(LocationContext.Provider,{children:n,value:x}))}function Routes(t){let{children:e,location:n}=t;return useRoutes(createRoutesFromChildren(e),n)}new Promise(()=>{});function createRoutesFromChildren(t,e){e===void 0&&(e=[]);let n=[];return reactExports.Children.forEach(t,(i,o)=>{if(!reactExports.isValidElement(i))return;let a=[...e,o];if(i.type===reactExports.Fragment){n.push.apply(n,createRoutesFromChildren(i.props.children,a));return}i.type!==Route&&invariant(!1),!i.props.index||!i.props.children||invariant(!1);let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=createRoutesFromChildren(i.props.children,a)),n.push(l)}),n}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,a;for(a=0;a<i.length;a++)o=i[a],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}function createSearchParams(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(o=>[n,o]):[[n,i]])},[]))}function getSearchParamsForLocation(t,e){let n=createSearchParams(t);return e&&e.forEach((i,o)=>{n.has(o)||e.getAll(o).forEach(a=>{n.append(o,a)})}),n}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function HashRouter(t){let{basename:e,children:n,future:i,window:o}=t,a=reactExports.useRef();a.current==null&&(a.current=createHashHistory({window:o,v5Compat:!0}));let l=a.current,[c,p]=reactExports.useState({action:l.action,location:l.location}),{v7_startTransition:s}=i||{},u=reactExports.useCallback(d=>{s&&startTransitionImpl?startTransitionImpl(()=>p(d)):p(d)},[p,s]);return reactExports.useLayoutEffect(()=>l.listen(u),[l,u]),reactExports.createElement(Router,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:l})}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(e,n){let{onClick:i,relative:o,reloadDocument:a,replace:l,state:c,target:p,to:s,preventScrollReset:u}=e,d=_objectWithoutPropertiesLoose(e,_excluded),{basename:g}=reactExports.useContext(NavigationContext$1),w,x=!1;if(typeof s=="string"&&ABSOLUTE_URL_REGEX.test(s)&&(w=s,isBrowser))try{let q=new URL(window.location.href),ue=s.startsWith("//")?new URL(q.protocol+s):new URL(s),pe=stripBasename(ue.pathname,g);ue.origin===q.origin&&pe!=null?s=pe+ue.search+ue.hash:x=!0}catch{}let C=useHref(s,{relative:o}),O=useLinkClickHandler(s,{replace:l,state:c,target:p,preventScrollReset:u,relative:o});function Y(q){i&&i(q),q.defaultPrevented||O(q)}return reactExports.createElement("a",_extends({},d,{href:w||C,onClick:x||a?i:Y,ref:n,target:p}))});var DataRouterHook;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(t,e){let{target:n,replace:i,state:o,preventScrollReset:a,relative:l}=e===void 0?{}:e,c=useNavigate(),p=useLocation(),s=useResolvedPath(t,{relative:l});return reactExports.useCallback(u=>{if(shouldProcessLinkClick(u,n)){u.preventDefault();let d=i!==void 0?i:createPath(p)===createPath(s);c(t,{replace:d,state:o,preventScrollReset:a,relative:l})}},[p,c,s,i,o,n,t,a,l])}function useSearchParams(t){let e=reactExports.useRef(createSearchParams(t)),n=reactExports.useRef(!1),i=useLocation(),o=reactExports.useMemo(()=>getSearchParamsForLocation(i.search,n.current?null:e.current),[i.search]),a=useNavigate(),l=reactExports.useCallback((c,p)=>{const s=createSearchParams(typeof c=="function"?c(o):c);n.current=!0,a("?"+s,p)},[a,o]);return[o,l]}const GITHUB_URL="https://github.com/emersondemetrio/emersondemetrio.github.io/blob/main/",API_URL="https://api.exchangerate-api.com/v4/latest/",handle="@emersondemetrio",Instagram={title:"Instagram",url:"https://instagram.com/emersondemetrio/",handle:"@emersondemetrio",ranking:9,category:"social",about:"Instagram profile"},Links=[{title:"Dev Daily",url:"#/dev",category:"professional",handle:"Dev Daily",ranking:0,keepFocus:!0,about:"Developer's Daily Routine"},Instagram,{title:"x (Twitter)",url:"https://x.com/emersondemetrio/",category:"social",handle:"@emersondemetrio",ranking:10,about:"X profile"},{title:"LinkedIn",url:"https://linkedin.com/in/emersondemetrio/",category:"professional",handle:"@emersondemetrio",ranking:2,about:"LinkedIn profile"},{title:"GitHub",url:"https://github.com/emersondemetrio?tab=repositories",category:"professional",handle:"@emersondemetrio",ranking:1,about:"GitHub profile"},{title:"Gist",url:"https://gist.github.com/emersondemetrio",category:"professional",handle:"@emersondemetrio",ranking:3,about:"Gist profile"},{title:"CodePen",url:"https://codepen.io/emersondemetrio/",category:"professional",handle:"@emersondemetrio",ranking:4,about:"CodePen profile"},{title:"YouTube",url:"https://youtube.com/@emersondemetrio/videos",category:"arts",handle:"@emersondemetrio",ranking:5,about:"YouTube channel"},{title:"Playlists",url:"https://youtube.com/@emersondemetrio/playlists",category:"arts",handle:"YT Playlists",ranking:6,about:"YouTube playlists"},{title:"SoundCloud",url:"https://soundcloud.com/emersondemetrio/tracks",category:"arts",handle:"@emersondemetrio",ranking:7,about:"SoundCloud profile"},{title:"Spotify",url:"https://open.spotify.com/user/12156014938",category:"arts",handle:"@emersondemetrio",ranking:8,about:"Spotify profile"},{title:"Blog",url:"https://badcompiler.tumblr.com",category:"arts",handle:"@badcompiler",ranking:10,about:"Personal Blog"}],linkGet=t=>{const e=Links.find(n=>n.title.toLowerCase()===t);return e||Instagram},CurrencyProviders=[{name:"Wise",nickname:"wis",url:(t,e,n)=>`https://wise.com/us/currency-converter/${`${t}-to-${e}-rate?amount=${n}`.toLocaleLowerCase()}`},{name:"Google",nickname:"ggl",url:(t,e,n)=>`https://google.com/search?q=${n}+${t}+to+${e}`}],REPOS={weather:{url:`${GITHUB_URL}src/pages/weather-app/weather-app.tsx`},codepen:{url:`${GITHUB_URL}src/pages/code-pen/pens`}},MAX_CURRENCY_CONVERT=5e6,githubBaseUrl="https://github.com/emersondemetrio/emersondemetrio.github.io/blob/main/src",experiments=[{title:"Remove Background",description:"Remove background from images 🖼️",link:"#/labs/background",repo:`${githubBaseUrl}/pages/remove-background/remove-background.tsx`},{title:"Canvas Game",description:"Simple game using canvas 🪨✂️📜",link:"#/labs/game",repo:`${githubBaseUrl}/pages/canvas-game/canvas-game.tsx`},{title:"Weather App",description:"Weather App 🌦️",link:"#/labs/weather",repo:`${githubBaseUrl}/pages/weather-app/weather-app.tsx`},{title:"Code Pens",description:"Code Pens 🖊 ️",link:"#/labs/code-pen",repo:`${githubBaseUrl}/pages/code-pen/code-pen.tsx`},{title:"Countdown",description:"Countdown ⏳",link:"#/labs/countdown",repo:`${githubBaseUrl}/pages/countdown/countdown.tsx`},{title:"Camera",description:"Camera 📷",link:"#/labs/camera",repo:`${githubBaseUrl}/pages/camera/camera.tsx`},{title:"Pasteable",description:"Create an image from your clipboard 🖼️",link:"#/labs/paste",repo:`${githubBaseUrl}/pages/pasteable/pasteable.tsx`},{title:"Audio FX Studio",description:"Professional audio effects processing 🎵",link:"#/labs/audio-fx",repo:`${githubBaseUrl}/pages/audio-fx/audio-fx.tsx`}],TargetCurrencies=["EUR","USD","GBP","BRL"],notWordsRegex=/[^a-zA-Z]+/g,useCache=(t,e="WEEKLY")=>{const n=()=>{const u=localStorage.getItem(t);return!u||u==="undefined"||u==="null"?{}:JSON.parse(u)},i=u=>{localStorage.setItem(t,JSON.stringify(u))},o=(u,d)=>{const g=n();g[u]=d,i(g)},a=(u,d)=>{o(u,d)},l=u=>n()[u]||null,c=(u,d)=>{const g=`${u.replace(notWordsRegex,"_").toLowerCase()}`;if(!d)return g;const w=new Date(d),x=w.getDate(),C=w.getMonth()+1,O=w.getFullYear();return`${g}-${O}-${C}-${x}`},p=()=>{i({}),localStorage.removeItem(t)};return(()=>{const u=l("expiresAt");if(u){const d=new Date().getTime(),g=new Date(u);if(d>g.getTime())return i({})}if(!u){const d=new Date;e==="DAILY"&&d.setDate(d.getDate()+1),e==="WEEKLY"&&d.setDate(d.getDate()+7),e==="MONTHLY"&&d.setMonth(d.getMonth()+1),a("expiresAt",`${d.getTime()}`)}})(),{cacheKey:t,data:n(),createItemKey:c,invalidate:p,set:a,get:l}},fetchCurrency=async t=>await(await fetch(`${API_URL}/${t}`)).json(),filterTarget=(t,e)=>{const n=Object.keys(t.rates).filter(i=>TargetCurrencies.includes(i)).filter(i=>i!==e).reduce((i,o)=>(i[o]=t.rates[o],i),{});return{...t,rates:n}},fixedAs2=t=>Math.round(t*100)/100,formatToCurrency=(t,e,n=1)=>{(!t||isNaN(t))&&(t=1);const i=e==="BRL"?"pt-BR":"en-US";return fixedAs2(t*n).toLocaleString(i,{currency:e,style:"currency"})},CACHE_KEY$1="currency-app-cache",useCurrencyNow=(t="EUR")=>{const[e,n]=reactExports.useState(!0),[i,o]=reactExports.useState(null),[a,l]=reactExports.useState(!1),[c,p]=reactExports.useState(null),{get:s,set:u,invalidate:d,createItemKey:g}=useCache(CACHE_KEY$1),w=()=>{d(),l(!0),n(!0)};return reactExports.useEffect(()=>{const x=g(t,new Date().getTime()),C=s(x);if(!a&&C){const O=filterTarget(C,t);if(O){o(O),n(!1);return}}a&&l(!1),fetchCurrency(t).then(O=>{o(filterTarget(O,t)),u(x,O),n(!1)}).catch(O=>{p(O),n(!1)})},[t,a]),{data:i,isLoading:e,error:c,refresh:w}},Loading=()=>jsxRuntimeExports.jsxs("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"24px",height:"30px",viewBox:"0 0 24 30",xmlSpace:"preserve",children:[jsxRuntimeExports.jsx("rect",{x:"0",y:"0",width:"4",height:"10",fill:"#333",children:jsxRuntimeExports.jsx("animateTransform",{attributeType:"xml",attributeName:"transform",type:"translate",values:"0 0; 0 20; 0 0",begin:"0",dur:"0.6s",repeatCount:"indefinite"})}),jsxRuntimeExports.jsx("rect",{x:"10",y:"0",width:"4",height:"10",fill:"#333",children:jsxRuntimeExports.jsx("animateTransform",{attributeType:"xml",attributeName:"transform",type:"translate",values:"0 0; 0 20; 0 0",begin:"0.2s",dur:"0.6s",repeatCount:"indefinite"})}),jsxRuntimeExports.jsx("rect",{x:"20",y:"0",width:"4",height:"10",fill:"#333",children:jsxRuntimeExports.jsx("animateTransform",{attributeType:"xml",attributeName:"transform",type:"translate",values:"0 0; 0 20; 0 0",begin:"0.4s",dur:"0.6s",repeatCount:"indefinite"})})]}),Badge=({base:t,target:e,amount:n,provider:i})=>jsxRuntimeExports.jsx(Link,{target:"_blank",className:"badge badge-primary",to:i.url(t,e,n),children:i.nickname}),CurrencyToggles=({base:t,options:e,onChange:n})=>{const[i,o]=reactExports.useState(t);return jsxRuntimeExports.jsxs("div",{className:"p-10",children:[jsxRuntimeExports.jsx("span",{children:"From"}),e.map(a=>{const l=`${i===a?"btn-active":"btn-accent"}`;return jsxRuntimeExports.jsx("button",{className:`mx-2 btn btn-sm btn-outline ${l}`,onClick:()=>{o(a),n(a)},children:a},a)})]})},noop=()=>{},randomUUID=()=>Math.random().toString(36).substring(2,15),range$1=(t,e)=>Array.from({length:e-t+1},(n,i)=>i+t),reverseRange=(t,e)=>range$1(t,e).reverse(),limitString=(t,e)=>t.length>e?t.slice(0,e):t,openUrl=(t,e="_blank")=>window.open(t,e),copyToClipboard=async t=>{await navigator.clipboard.writeText(t)},ensure=(t,e)=>{if(t==null)throw new Error(`Expected ${e} to be defined, but got ${t}`);return!0},PrimaryBaseCurrency="USD",DesiredCurrencies=["USD","EUR","BRL","GBP"],CurrencyNow=({asList:t=!1})=>{const e=g=>y(g),[n,i]=reactExports.useState(PrimaryBaseCurrency),{data:o,isLoading:a,error:l,refresh:c}=useCurrencyNow(n),[p,s]=reactExports.useState(null);if(a)return jsxRuntimeExports.jsx(Loading,{});const u=g=>async()=>{await copyToClipboard(g),e("Copied to clipboard")},d=g=>{g.preventDefault();const w=parseInt(g.target.value,10);if(isNaN(w)){s(null);return}w>MAX_CURRENCY_CONVERT||s(w)};return o===null?jsxRuntimeExports.jsx("div",{className:"currency-item",children:"No currency data"}):l?jsxRuntimeExports.jsx("div",{className:"currency-item",children:l.message}):t?jsxRuntimeExports.jsxs("div",{className:"flex flex-col w-96 border border-gray-500 p-10",children:[jsxRuntimeExports.jsx("h3",{children:"Currency"}),Object.entries(o.rates).map(([g,w])=>{const x=formatToCurrency(p||1,n.toLocaleLowerCase()),C=formatToCurrency(p,g,w);return jsxRuntimeExports.jsxs("div",{title:g,className:"flex flex-row items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[x," = ",C]}),jsxRuntimeExports.jsx("div",{children:CurrencyProviders.map(O=>jsxRuntimeExports.jsx(Badge,{base:n,target:g,amount:p||1,provider:O},O.name))})]},g)})]}):jsxRuntimeExports.jsx("div",{className:"currency-now",children:jsxRuntimeExports.jsxs("div",{className:"overflow-x-auto",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CurrencyToggles,{base:PrimaryBaseCurrency,onChange:i,options:DesiredCurrencies}),jsxRuntimeExports.jsx("input",{type:"number",max:999999,placeholder:`Amount (in ${n})`,value:p??"",onChange:d,className:"input input-bordered input-md w-full max-w-xs"}),jsxRuntimeExports.jsx("button",{className:"btn btn-xs",onClick:c,children:"🔄"})]}),jsxRuntimeExports.jsxs("table",{className:"table",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"Conversion"}),jsxRuntimeExports.jsx("th",{children:"Rate"}),jsxRuntimeExports.jsx("th",{children:"Sources"})]})}),jsxRuntimeExports.jsx("tbody",{children:Object.entries(o.rates).map(([g,w])=>{const x=formatToCurrency(p||1,n.toLocaleLowerCase()),C=formatToCurrency(p,g,w),O=u(`${x} = ${C}`);return jsxRuntimeExports.jsxs("tr",{title:g,children:[jsxRuntimeExports.jsxs("td",{onClick:O,children:[n," to ",g]}),jsxRuntimeExports.jsxs("td",{onClick:O,children:[x," = ",C]}),jsxRuntimeExports.jsx("td",{children:CurrencyProviders.map(Y=>jsxRuntimeExports.jsx(Badge,{base:n,target:g,amount:p||1,provider:Y},Y.name))})]},g)})})]})]})})},useIsMobile=(t=768)=>{if(typeof window.matchMedia!="function")throw Error("matchMedia not supported by browser!");const[e,n]=reactExports.useState(window.matchMedia(`(max-width: ${t}px)`).matches),i=reactExports.useCallback(o=>{n(o.matches)},[]);return reactExports.useEffect(()=>{const o=window.matchMedia(`(max-width: ${t}px)`);try{o.addEventListener("change",i)}catch{o.addListener(i)}return()=>{try{o.removeEventListener("change",i)}catch{o.removeListener(i)}}},[t]),e},Toggle=({children:t,title:e,onChange:n,style:i={}})=>{const[o,a]=reactExports.useState(!1),l=()=>{a(!o),typeof n=="function"&&n(!o)};return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flex:1,flexDirection:"column",...i},children:[jsxRuntimeExports.jsx("div",{style:{flex:1,display:"flex",justifyContent:"left"},children:jsxRuntimeExports.jsxs("button",{className:"btn btn-primary",onClick:l,children:[e," ",o?"↑":"↓"]})}),jsxRuntimeExports.jsx("div",{style:{},children:o&&t})]})},Footer$1=()=>{const t=useIsMobile();return jsxRuntimeExports.jsxs("footer",{className:"bg-black px-3 py-12 text-center text-white border-t",children:[jsxRuntimeExports.jsxs(Link,{target:"_blank",to:linkGet("linkedin").url,className:"font-medium text-white-600 hover:underline",children:["Emerson Demetrio ",new Date().getFullYear()]}),!t&&jsxRuntimeExports.jsx(Toggle,{title:"Currency Today",children:jsxRuntimeExports.jsx("div",{className:"w-full flex items-center justify-center",children:jsxRuntimeExports.jsx(CurrencyNow,{asList:!0})})})]})},Modal=({title:t,visible:e,onClose:n,children:i})=>{const o=randomUUID();return jsxRuntimeExports.jsx("dialog",{id:o,className:e?"modal modal-open":"modal",children:jsxRuntimeExports.jsxs("div",{className:"modal-box w-full",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg",children:t}),i,n&&jsxRuntimeExports.jsx("div",{className:"modal-action",children:jsxRuntimeExports.jsx("form",{method:"dialog",children:jsxRuntimeExports.jsx("button",{className:"btn",onClick:n,children:"Close"})})})]})})},CloseIcon=({active:t})=>jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{cx:"15",cy:"15",r:"15",fill:"#DF4744"}),t&&jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{cx:"14.9032",cy:"14.9032",r:"13.7419",fill:"#FC5753"}),jsxRuntimeExports.jsx("rect",{x:"8.10388",y:"20.0107",width:"16.8387",height:"2.12903",transform:"rotate(-45 8.10388 20.0107)",fill:"#7E0508"}),jsxRuntimeExports.jsx("rect",{x:"8.10388",y:"9.60934",width:"2.12903",height:"16.8387",transform:"rotate(-45 8.10388 9.60934)",fill:"#7E0508"})]})]}),MinimizeIcon=({active:t})=>jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{cx:"15",cy:"15",r:"15",fill:"#DE9F34"}),t&&jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{cx:"14.9032",cy:"14.9032",r:"13.7419",fill:"#FDBC40"}),jsxRuntimeExports.jsx("rect",{x:"6.58064",y:"13.9355",width:"16.8387",height:"2.12903",fill:"#985712"})]})]}),MaximizeIcon=({active:t})=>jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{cx:"15",cy:"15",r:"15",fill:"#27AA35"}),t&&jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{cx:"14.9032",cy:"14.9032",r:"13.7419",fill:"#36C84B"}),jsxRuntimeExports.jsx("path",{d:"M21.3004 7.52811C21.8549 7.52653 22.3048 7.97644 22.3032 8.53095L22.2815 16.1749C22.2789 17.0644 21.2034 17.5081 20.5744 16.8791L12.9522 9.25696C12.3232 8.62796 12.7669 7.55239 13.6564 7.54986L21.3004 7.52811Z",fill:"#0B650D"}),jsxRuntimeExports.jsx("path",{d:"M8.53096 22.3032C7.97645 22.3048 7.52654 21.8549 7.52811 21.3003L7.54986 13.6564C7.5524 12.7669 8.62797 12.3232 9.25697 12.9522L16.8791 20.5743C17.5081 21.2033 17.0644 22.2789 16.1749 22.2814L8.53096 22.3032Z",fill:"#0B650D"})]})]}),Icon=({onClick:t,name:e})=>{const[n,i]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("svg",{onClick:t,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"15px",height:"15px"},children:[e==="close"&&jsxRuntimeExports.jsx(CloseIcon,{active:n}),e==="minimize"&&jsxRuntimeExports.jsx(MinimizeIcon,{active:n}),e==="maximize"&&jsxRuntimeExports.jsx(MaximizeIcon,{active:n})]})},TerminalActions=({actions:t})=>jsxRuntimeExports.jsxs("div",{className:"action-button-container",children:[jsxRuntimeExports.jsx(Icon,{name:"maximize",onClick:t?.onMaximize||noop}),jsxRuntimeExports.jsx(Icon,{name:"minimize",onClick:t?.onMaximize||noop}),jsxRuntimeExports.jsx(Icon,{name:"close",onClick:t?.onMinimize||noop})]}),TerminalHeader=({title:t,actions:e})=>jsxRuntimeExports.jsxs("div",{className:"rounded terminal-header",children:[jsxRuntimeExports.jsxs("span",{className:"title-container",children:["~/",t.toLowerCase().split(" ").join("-"),"/"]}),jsxRuntimeExports.jsx(TerminalActions,{actions:e})]}),TerminalFooter=({category:t})=>{const e=["h-10","flex","justify-end","items-center","terminal-item-tag-container","border-t-2","bg-[#202427]","border-t-[#202427]","border-solid","rounded-b-lg"].join(" ");return jsxRuntimeExports.jsx("div",{className:e,children:jsxRuntimeExports.jsx("span",{className:"badge badge-outline m-2",children:t})})},TerminalContent=({category:t,title:e,handle:n,url:i,onClick:o,actions:a,keepFocus:l,tabIndex:c,about:p})=>{const s=()=>{if(i)return openUrl(i,l?"_self":"_blank");typeof o=="function"&&o()},[u,d]=reactExports.useState(!1),g=()=>d(!0),w=()=>d(!1),C=new Map([["experiments",["outline","outline-rose-800","outline-rose-500"]],["tools",["outline-cyan-500","outline-cyan-300"]],["social",["outline-blue-400","outline-blue-200"]],["professional",["outline-green-400","outline-green-200"]],["arts",["outline-purple-400","outline-purple-200"]]]).get(t)?.join(" ");return jsxRuntimeExports.jsxs("div",{tabIndex:c,className:`${C} md:p-0 px-6 rounded hover:outline hover:outline-solid outline-offset-2`,onFocus:g,onBlur:w,onMouseEnter:g,onMouseLeave:w,children:[jsxRuntimeExports.jsx(TerminalHeader,{title:e,actions:a}),jsxRuntimeExports.jsx("div",{className:"terminal-item-content",onClick:s,children:jsxRuntimeExports.jsx("span",{children:u?`${n}: ${p}`:n})}),jsxRuntimeExports.jsx(TerminalFooter,{category:t})]},`${t}/${e}`)},Terminal=({links:t,tools:e=[],experiments:n=[]})=>jsxRuntimeExports.jsxs("div",{className:"terminal-container mb-5",children:[t.map(({handle:i,title:o,url:a,category:l,about:c,keepFocus:p=!1},s)=>jsxRuntimeExports.jsx(TerminalContent,{tabIndex:s,url:a,keepFocus:p,title:o,handle:i,category:l,about:c},`${l}/${o}`)),e.map((i,o)=>jsxRuntimeExports.jsx(TerminalContent,{tabIndex:o,actions:i.actions,onClick:i.actions.onMaximize,title:i.title,handle:i.handle,category:i.category,about:i.about},`tool-${o}`)),n.map((i,o)=>jsxRuntimeExports.jsx(TerminalContent,{url:i.link,keepFocus:!0,tabIndex:o,title:i.title,handle:i.title,category:"experiments",about:i.description},`experiment-${o}`))]}),Page=({name:t="Page Name",description:e,children:n,style:i={},onPaste:o=()=>{},className:a="",withoutName:l=!1,isHome:c=!1,withoutPadding:p=!1,repo:s,landing:u=!1})=>{const d=useIsMobile(),g=reactExports.useRef(null);reactExports.useEffect(()=>{document.title=`${t} | emerson.run`},[t]),reactExports.useEffect(()=>{if(!d&&g.current){const x=C=>{o(C)};return window.addEventListener("paste",x),()=>{window&&window.removeEventListener("paste",x)}}},[d,o]);const w=p?"":"py-8";return a=d&&!c?`mt-10 ${a}`:a,jsxRuntimeExports.jsx("section",{style:i,onPaste:o,ref:g,tabIndex:-1,"data-page":`page-${t.toLowerCase().replace(/\s/g,"-")}`,className:`grid place-items-center py-20 text-center ${w} ${a}`,children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto flex flex-wrap",children:[l?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsxs("div",{className:"w-full flex justify-between items-center flex-col md:flex-row gap-6",children:[!u&&jsxRuntimeExports.jsx("h2",{className:"my-2 text-lg font-bold leading-tight text-center text-white-800",children:t}),s&&jsxRuntimeExports.jsx(Link,{to:s,target:"_blank",className:"text-center text-white-800 items-center",children:"📋 Show me the code"})]}),c&&jsxRuntimeExports.jsx("div",{className:"w-full flex flex-col",children:n}),!c&&jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col",children:[e&&jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("p",{className:"text-lg",children:e})}),jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center items-center",children:n})]})]})})},Hero=()=>useIsMobile()?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("h1",{className:"my-4 text-2xl font-bold leading-tight text-center",children:"~/emerson/home"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"pt-2 w-full",children:jsxRuntimeExports.jsx("div",{className:"flex items-center w-full",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col w-full justify-center items-start text-center md:text-left",children:[jsxRuntimeExports.jsx("h1",{className:"my-4 text-1xl font-bold leading-tight",children:"~/emerson/home"}),jsxRuntimeExports.jsx("p",{className:"leading-normal text-1xl mb-8",children:"Welcome. Useful links bellow."})]})})})}),usePasteable=(t=!1)=>{const[e,n]=reactExports.useState({image:null,error:null,isLoading:!1}),i=reactExports.useRef(!1);return{...e,handlePaste:async l=>{if(!i.current){i.current=!0,l.preventDefault(),n(c=>({...c,isLoading:!0,error:null}));try{const c=l.clipboardData?.items;if(!c)throw new Error("No clipboard data available");const p=Array.from(c).find(x=>x.type.startsWith("image"));if(!p)throw new Error("No image found in clipboard");const s=p.getAsFile();if(!s)throw new Error("Failed to get image from clipboard");const u=randomUUID(),d=URL.createObjectURL(s),g={id:u,url:d,fileName:`pasted-image-${u}.png`},w=document.createElement("a");w.href=d,w.download=g.fileName,document.body.appendChild(w),w.click(),document.body.removeChild(w),n(t?x=>({...x,isLoading:!1}):x=>({...x,image:g,isLoading:!1}))}catch(c){n(p=>({...p,error:c instanceof Error?c.message:"Unknown error occurred",isLoading:!1}))}finally{setTimeout(()=>{i.current=!1},100)}}},clearImage:()=>{n({image:null,error:null,isLoading:!1})}}},Home=()=>{const[t,e]=reactExports.useState(!1),{handlePaste:n}=usePasteable(!0);return jsxRuntimeExports.jsxs(Page,{isHome:!0,name:"Home",withoutName:!0,onPaste:n,children:[jsxRuntimeExports.jsx(Hero,{}),jsxRuntimeExports.jsx(Terminal,{links:Links.sort((i,o)=>i.ranking>o.ranking?1:-1),tools:[{handle:"Currency Tools",category:"tools",title:"Currency Tools",actions:{onMaximize:()=>e(!0),onMinimize:()=>e(!1),onClose:()=>e(!1)},about:"Compare currency worldwide."}],experiments}),jsxRuntimeExports.jsx(Modal,{title:"Currency Tools",visible:t,onClose:()=>e(!1),children:jsxRuntimeExports.jsx(CurrencyNow,{})})]})},formatDate$1=t=>new Date(t).toLocaleDateString("en-GB"),TweetView=({tweet:t,onClick:e})=>{const n=t.id_str?`https://x.com/${handle.toLowerCase()}/status/${t.id_str}`:`https://x.com/${handle.toLowerCase()}`;return jsxRuntimeExports.jsxs("div",{className:"tweet-container w-[500px] h-[200px] bg-black text-[#e7e9ea] border border-[#71767b] rounded-md p-4 mb-4 flex flex-col",onClick:e,children:[jsxRuntimeExports.jsx("div",{className:"font-mono mb-4 flex-1 overflow-y-auto flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{children:t.full_text})}),jsxRuntimeExports.jsxs("div",{className:"mt-auto",children:[jsxRuntimeExports.jsx("hr",{className:"border-[#71767b] mb-2"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center font-mono",children:[jsxRuntimeExports.jsx("span",{children:handle.toLowerCase()}),jsxRuntimeExports.jsx(Link,{to:n,target:"_blank",rel:"noopener noreferrer",className:"text-[#4d5258] text-sm hover:text-blue-500",onClick:i=>i.stopPropagation(),children:formatDate$1(t.created_at)})]})]})]})},btnClass="w-8 h-8 flex items-center justify-center bg-blue-500 text-white disabled:bg-blue-900 disabled:text-[#4d5258] disabled:cursor-not-allowed text-sm hover:bg-blue-600 rounded-full",Pager=({currentPage:t,totalPages:e,onPrev:n,onNext:i})=>jsxRuntimeExports.jsxs("div",{className:"w-[500px] bg-black text-[#e7e9ea] rounded-md pb-4 pt-4 flex justify-between items-center font-mono",children:[jsxRuntimeExports.jsx("button",{onClick:n,disabled:t===1,className:btnClass,children:jsxRuntimeExports.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M15 18l-6-6 6-6"})})}),jsxRuntimeExports.jsxs("span",{className:"text-[#4d5258] text-sm",children:[t," / ",e]}),jsxRuntimeExports.jsx("button",{onClick:i,disabled:t===e,className:btnClass,children:jsxRuntimeExports.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:jsxRuntimeExports.jsx("path",{d:"M9 18l6-6-6-6"})})})]}),createStoreImpl=t=>{let e;const n=new Set,i=(s,u)=>{const d=typeof s=="function"?s(e):s;if(!Object.is(d,e)){const g=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(w=>w(e,g))}},o=()=>e,c={setState:i,getState:o,getInitialState:()=>p,subscribe:s=>(n.add(s),()=>n.delete(s))},p=e=t(i,o,c);return c},createStore=t=>t?createStoreImpl(t):createStoreImpl,identity=t=>t;function useStore(t,e=identity){const n=React.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return React.useDebugValue(n),n}const createImpl=t=>{const e=createStore(t),n=i=>useStore(e,i);return Object.assign(n,e),n},create=t=>t?createImpl(t):createImpl,tweets=JSON.parse(`[{"tweet":{"edit_info":{"initial":{"editTweetIds":["1895208220182094044"],"editableUntil":"2025-02-27T21:23:45.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","93"],"favorite_count":"0","id_str":"1895208220182094044","truncated":false,"retweet_count":"0","id":"1895208220182094044","created_at":"Thu Feb 27 20:23:45 +0000 2025","favorited":false,"full_text":"She never fully understood the meaning of 'return' or its usefulness, so she never came back.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1895095536379711556"],"editableUntil":"2025-02-27T13:55:59.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","39"],"favorite_count":"0","id_str":"1895095536379711556","truncated":false,"retweet_count":"0","id":"1895095536379711556","created_at":"Thu Feb 27 12:55:59 +0000 2025","favorited":false,"full_text":"\\"Only the rich can afford to look poor\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1894926824133587201"],"editableUntil":"2025-02-27T02:45:35.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","162"],"favorite_count":"0","id_str":"1894926824133587201","truncated":false,"retweet_count":"0","id":"1894926824133587201","created_at":"Thu Feb 27 01:45:35 +0000 2025","favorited":false,"full_text":"She told me forever just to go. Told me she believes in how capable I am. 'You will achieve all of your goals—anything you want, I truly believe that'—just to go.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1894918139533762976"],"editableUntil":"2025-02-27T02:11:04.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","32"],"favorite_count":"0","id_str":"1894918139533762976","truncated":false,"retweet_count":"0","id":"1894918139533762976","created_at":"Thu Feb 27 01:11:04 +0000 2025","favorited":false,"full_text":"Tu cuerpo fue el veneno que bebi","lang":"es"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1894911436423356726"],"editableUntil":"2025-02-27T01:44:26.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","86"],"favorite_count":"0","id_str":"1894911436423356726","truncated":false,"retweet_count":"0","id":"1894911436423356726","created_at":"Thu Feb 27 00:44:26 +0000 2025","favorited":false,"full_text":"And now I am here, surrounded by silence, with only memories and dreams left to dream.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1894820864467583385"],"editableUntil":"2025-02-26T19:44:32.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","92"],"favorite_count":"0","id_str":"1894820864467583385","truncated":false,"retweet_count":"0","id":"1894820864467583385","created_at":"Wed Feb 26 18:44:32 +0000 2025","favorited":false,"full_text":"\\"For all the 'Bad Compilers' out there, keep debugging!\\"\\n\\n- AI, talking about my blog posts.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1893041081652068773"],"editableUntil":"2025-02-21T21:52:19.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","66"],"favorite_count":"0","id_str":"1893041081652068773","truncated":false,"retweet_count":"0","id":"1893041081652068773","created_at":"Fri Feb 21 20:52:19 +0000 2025","favorited":false,"full_text":"Constantemente sondado por um certo apego as Victórias do passado.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1892936225046032682"],"editableUntil":"2025-02-21T14:55:39.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","150"],"favorite_count":"0","id_str":"1892936225046032682","truncated":false,"retweet_count":"0","id":"1892936225046032682","created_at":"Fri Feb 21 13:55:39 +0000 2025","favorited":false,"full_text":"In the end, I should’ve just embraced them instead of embracing the loneliness. Yeah, there’s a part of me that believes I constantly seek loneliness.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1892577209912619370"],"editableUntil":"2025-02-20T15:09:03.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","122"],"favorite_count":"0","id_str":"1892577209912619370","truncated":false,"retweet_count":"0","id":"1892577209912619370","created_at":"Thu Feb 20 14:09:03 +0000 2025","favorited":false,"full_text":"The problem is that I'm used to you\\nA feeling I don't want to lose\\nThe only thing I think about\\nExactly what I dream about","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1892554035187654882"],"editableUntil":"2025-02-20T13:36:58.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","53"],"favorite_count":"0","id_str":"1892554035187654882","truncated":false,"retweet_count":"0","id":"1892554035187654882","created_at":"Thu Feb 20 12:36:58 +0000 2025","favorited":false,"full_text":"Some man drink to remember, some man drink to forget.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1892363248445292662"],"editableUntil":"2025-02-20T00:58:51.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","34"],"favorite_count":"0","id_str":"1892363248445292662","truncated":false,"retweet_count":"0","id":"1892363248445292662","created_at":"Wed Feb 19 23:58:51 +0000 2025","favorited":false,"full_text":"I  want to go home so I can dream.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1892353015388029265"],"editableUntil":"2025-02-20T00:18:11.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","77"],"favorite_count":"0","id_str":"1892353015388029265","truncated":false,"retweet_count":"0","id":"1892353015388029265","created_at":"Wed Feb 19 23:18:11 +0000 2025","favorited":false,"full_text":"G5\\n   Laranjeiras\\n G5/F#  Em7\\nSatis__feito, sorri\\n         C\\nQuando chego ali","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1892345719522037892"],"editableUntil":"2025-02-19T23:49:12.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","99"],"favorite_count":"0","id_str":"1892345719522037892","truncated":false,"retweet_count":"0","id":"1892345719522037892","created_at":"Wed Feb 19 22:49:12 +0000 2025","favorited":false,"full_text":"Between us there's oceans\\nThere's life in slow motion\\nQuietly we drift away\\nQuietly we fade to grey","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1891966363897377208"],"editableUntil":"2025-02-18T22:41:46.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","99"],"favorite_count":"0","id_str":"1891966363897377208","truncated":false,"retweet_count":"0","id":"1891966363897377208","created_at":"Tue Feb 18 21:41:46 +0000 2025","favorited":false,"full_text":"Close your eyes.\\nAnd feel me now, isn't life a dream?\\nA pretty sight to see, let me see your wings.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1888684053332906165"],"editableUntil":"2025-02-09T21:19:03.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","63"],"favorite_count":"0","id_str":"1888684053332906165","truncated":false,"retweet_count":"0","id":"1888684053332906165","created_at":"Sun Feb 09 20:19:03 +0000 2025","favorited":false,"full_text":"\\"If something cannot go on forever, it will [eventually] stop.\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1883127149546397775"],"editableUntil":"2025-01-25T13:17:53.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","248"],"favorite_count":"0","id_str":"1883127149546397775","truncated":false,"retweet_count":"0","id":"1883127149546397775","created_at":"Sat Jan 25 12:17:53 +0000 2025","favorited":false,"full_text":"The plans I make still have you in them.\\nCause you come swimming into view.\\nAnd I'm hanging on your words, like I always used to do.\\nThe words they use so lightly, I only feel for you.\\nI only know this because I carry you around,\\nIn the background.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1882157389769777520"],"editableUntil":"2025-01-22T21:04:25.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","81"],"favorite_count":"0","id_str":"1882157389769777520","truncated":false,"retweet_count":"0","id":"1882157389769777520","created_at":"Wed Jan 22 20:04:25 +0000 2025","favorited":false,"full_text":"The memory of you tickles my heart. Your perfect lips are all I need. I miss you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1873390424402100678"],"editableUntil":"2024-12-29T16:27:37.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","35"],"favorite_count":"0","id_str":"1873390424402100678","truncated":false,"retweet_count":"0","id":"1873390424402100678","created_at":"Sun Dec 29 15:27:37 +0000 2024","favorited":false,"full_text":"Um vocabulário inteiro (de ilusão).","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1872782488730583421"],"editableUntil":"2024-12-28T00:11:54.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","90"],"favorite_count":"0","id_str":"1872782488730583421","truncated":false,"retweet_count":"0","id":"1872782488730583421","created_at":"Fri Dec 27 23:11:54 +0000 2024","favorited":false,"full_text":"All this communication technology works so well at keeping us disconnected from each other","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1871968607334449372"],"editableUntil":"2024-12-25T18:17:50.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","33"],"favorite_count":"0","id_str":"1871968607334449372","truncated":false,"retweet_count":"0","id":"1871968607334449372","created_at":"Wed Dec 25 17:17:50 +0000 2024","favorited":false,"full_text":"Everybody loves a comeback story.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1870993043589079280"],"editableUntil":"2024-12-23T01:41:17.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","59"],"favorite_count":"0","id_str":"1870993043589079280","truncated":false,"retweet_count":"0","id":"1870993043589079280","created_at":"Mon Dec 23 00:41:17 +0000 2024","favorited":false,"full_text":"\\"You're not very good at retiring...\\n- I am working on it.\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1870576395031814506"],"editableUntil":"2024-12-21T22:05:40.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","8"],"favorite_count":"0","id_str":"1870576395031814506","truncated":false,"retweet_count":"0","id":"1870576395031814506","created_at":"Sat Dec 21 21:05:40 +0000 2024","favorited":false,"full_text":"unwound.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1867712051898200264"],"editableUntil":"2024-12-14T00:23:48.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","43"],"favorite_count":"0","id_str":"1867712051898200264","truncated":false,"retweet_count":"0","id":"1867712051898200264","created_at":"Fri Dec 13 23:23:48 +0000 2024","favorited":false,"full_text":"I am just a little bit caught in the middle","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1865571479359832406"],"editableUntil":"2024-12-08T02:37:55.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","97"],"favorite_count":"0","id_str":"1865571479359832406","truncated":false,"retweet_count":"0","id":"1865571479359832406","created_at":"Sun Dec 08 01:37:55 +0000 2024","favorited":false,"full_text":"Sometimes, I look for your number in my contact list, but a moment later, I come back to reality.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1864373694463680674"],"editableUntil":"2024-12-04T19:18:21.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","108"],"favorite_count":"0","id_str":"1864373694463680674","truncated":false,"retweet_count":"0","id":"1864373694463680674","created_at":"Wed Dec 04 18:18:21 +0000 2024","favorited":false,"full_text":"Então eu fiz, meio sem querer. O fiz sem sentir, o fiz apenas porque já estava ali. Eram labios a compartir.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1861219316772811033"],"editableUntil":"2024-11-26T02:23:59.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","50"],"favorite_count":"0","id_str":"1861219316772811033","truncated":false,"retweet_count":"0","id":"1861219316772811033","created_at":"Tue Nov 26 01:23:59 +0000 2024","favorited":false,"full_text":"It is not a game until you name it\\nbut you play it","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1860404779832274961"],"editableUntil":"2024-11-23T20:27:18.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","89"],"favorite_count":"0","id_str":"1860404779832274961","truncated":false,"retweet_count":"0","id":"1860404779832274961","created_at":"Sat Nov 23 19:27:18 +0000 2024","favorited":false,"full_text":"When you travel so much that one day you realize you no longer have a place to return to.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1860246103108493349"],"editableUntil":"2024-11-23T09:56:47.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","82"],"favorite_count":"0","id_str":"1860246103108493349","truncated":false,"retweet_count":"0","id":"1860246103108493349","created_at":"Sat Nov 23 08:56:47 +0000 2024","favorited":false,"full_text":"Grande parte dos meus pretéritos são imperfeitos mas ao menos um ecoa no gerúndio.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1856656557393457494"],"editableUntil":"2024-11-13T12:13:12.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","48"],"favorite_count":"0","id_str":"1856656557393457494","truncated":false,"retweet_count":"0","id":"1856656557393457494","created_at":"Wed Nov 13 11:13:12 +0000 2024","favorited":false,"full_text":"Computers don't respond well to hammers.\\n\\n- T.S.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1856333162382610882"],"editableUntil":"2024-11-12T14:48:09.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1856333162382610882","truncated":false,"retweet_count":"0","id":"1856333162382610882","created_at":"Tue Nov 12 13:48:09 +0000 2024","favorited":false,"full_text":"\\"A leap into the darkness\\"\\n\\n-RD","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1856329435349131307"],"editableUntil":"2024-11-12T14:33:20.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","92"],"favorite_count":"0","id_str":"1856329435349131307","truncated":false,"retweet_count":"0","id":"1856329435349131307","created_at":"Tue Nov 12 13:33:20 +0000 2024","favorited":false,"full_text":"I wish there was a way to know you're in the good old days before you've actually left them.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1855957430649164231"],"editableUntil":"2024-11-11T13:55:08.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","93"],"favorite_count":"0","id_str":"1855957430649164231","truncated":false,"retweet_count":"0","id":"1855957430649164231","created_at":"Mon Nov 11 12:55:08 +0000 2024","favorited":false,"full_text":"O que você faz quando uma progressão harmonica não vai para o acorde que você achou que iria?","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1854879615241588837"],"editableUntil":"2024-11-08T14:32:16.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","45"],"favorite_count":"0","id_str":"1854879615241588837","truncated":false,"retweet_count":"0","id":"1854879615241588837","created_at":"Fri Nov 08 13:32:16 +0000 2024","favorited":false,"full_text":"I wanna let go of the pain I've felt so long.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1853894139038818672"],"editableUntil":"2024-11-05T21:16:21.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","94"],"favorite_count":"0","id_str":"1853894139038818672","truncated":false,"retweet_count":"0","id":"1853894139038818672","created_at":"Tue Nov 05 20:16:21 +0000 2024","favorited":false,"full_text":"24 * 60 * 60 = 86400s.\\n\\nOh you did have time.\\n\\nEnough of this BS, just say you're not into it.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1853770735736528929"],"editableUntil":"2024-11-05T13:05:59.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","42"],"favorite_count":"0","id_str":"1853770735736528929","truncated":false,"retweet_count":"0","id":"1853770735736528929","created_at":"Tue Nov 05 12:05:59 +0000 2024","favorited":false,"full_text":"And the eyes ease open\\nAnd it's dark again","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1853065636257173642"],"editableUntil":"2024-11-03T14:24:10.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","56"],"favorite_count":"0","id_str":"1853065636257173642","truncated":false,"retweet_count":"0","id":"1853065636257173642","created_at":"Sun Nov 03 13:24:10 +0000 2024","favorited":false,"full_text":"Why worry about tomorrow? It will be gone the day after.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1852119515036782985"],"editableUntil":"2024-10-31T23:44:37.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","56"],"favorite_count":"0","id_str":"1852119515036782985","truncated":false,"retweet_count":"0","id":"1852119515036782985","created_at":"Thu Oct 31 22:44:37 +0000 2024","favorited":false,"full_text":"The original was so good, the one that you no longer own","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1852118787501195468"],"editableUntil":"2024-10-31T23:41:44.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","30"],"favorite_count":"0","id_str":"1852118787501195468","truncated":false,"retweet_count":"0","id":"1852118787501195468","created_at":"Thu Oct 31 22:41:44 +0000 2024","favorited":false,"full_text":"O homem é o homem mais o meio.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1851925338344853769"],"editableUntil":"2024-10-31T10:53:02.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","34"],"favorite_count":"0","id_str":"1851925338344853769","truncated":false,"retweet_count":"0","id":"1851925338344853769","created_at":"Thu Oct 31 09:53:02 +0000 2024","favorited":false,"full_text":"I do love you\\nLike I did\\nYesterday","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1851406950078001416"],"editableUntil":"2024-10-30T00:33:09.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","13"],"favorite_count":"0","id_str":"1851406950078001416","truncated":false,"retweet_count":"0","id":"1851406950078001416","created_at":"Tue Oct 29 23:33:09 +0000 2024","favorited":false,"full_text":"𝘋𝘪𝘴𝘦𝘯𝘤𝘩𝘢𝘯𝘵𝘦𝘥.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1676916656512069635"],"editableUntil":"2023-07-06T12:31:01.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","24"],"favorite_count":"0","id_str":"1676916656512069635","truncated":false,"retweet_count":"0","id":"1676916656512069635","created_at":"Thu Jul 06 11:31:01 +0000 2023","favorited":false,"full_text":"will we become the ants?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1670792120922263554"],"editableUntil":"2023-06-19T14:54:18.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","37"],"favorite_count":"0","id_str":"1670792120922263554","truncated":false,"retweet_count":"0","id":"1670792120922263554","created_at":"Mon Jun 19 13:54:18 +0000 2023","favorited":false,"full_text":"But we're about to do amazing things.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1670784224754892800"],"editableUntil":"2023-06-19T14:22:55.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","121"],"favorite_count":"0","id_str":"1670784224754892800","truncated":false,"retweet_count":"0","id":"1670784224754892800","created_at":"Mon Jun 19 13:22:55 +0000 2023","favorited":false,"full_text":"It's okay that we're not in love\\nIt's okay that we're not enough\\nSpinning 'round a dying sun\\nJust like everyone\\n\\nbut not.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1668906217052282881"],"editableUntil":"2023-06-14T10:00:23.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","42"],"favorite_count":"0","id_str":"1668906217052282881","truncated":false,"retweet_count":"0","id":"1668906217052282881","created_at":"Wed Jun 14 09:00:23 +0000 2023","favorited":false,"full_text":"I don't belong here,\\nI don't belong there.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1668906158902444032"],"editableUntil":"2023-06-14T10:00:09.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","74"],"favorite_count":"0","id_str":"1668906158902444032","truncated":false,"retweet_count":"0","id":"1668906158902444032","created_at":"Wed Jun 14 09:00:09 +0000 2023","favorited":false,"full_text":"Diga-me com quem andas e te direi quem és.\\n- Eu normalmente ando de metrô.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1668363065425797122"],"editableUntil":"2023-06-12T22:02:06.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","82"],"favorite_count":"0","id_str":"1668363065425797122","truncated":false,"retweet_count":"0","id":"1668363065425797122","created_at":"Mon Jun 12 21:02:06 +0000 2023","favorited":false,"full_text":"Ainda existe força na parte do projétil que não foi destruída pelo choque inicial.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1665822866707734530"],"editableUntil":"2023-06-05T21:18:15.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","30"],"favorite_count":"0","id_str":"1665822866707734530","truncated":false,"retweet_count":"0","id":"1665822866707734530","created_at":"Mon Jun 05 20:48:15 +0000 2023","favorited":false,"full_text":"I believe in imaginary numbers","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1662568040637104132"],"editableUntil":"2023-05-27T21:44:44.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","8"],"favorite_count":"0","id_str":"1662568040637104132","truncated":false,"retweet_count":"0","id":"1662568040637104132","created_at":"Sat May 27 21:14:44 +0000 2023","favorited":false,"full_text":"drain me","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1662541446350602240"],"editableUntil":"2023-05-27T19:59:03.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","22"],"favorite_count":"0","id_str":"1662541446350602240","truncated":false,"retweet_count":"0","id":"1662541446350602240","created_at":"Sat May 27 19:29:03 +0000 2023","favorited":false,"full_text":"only the past relieves","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1662093749101424646"],"editableUntil":"2023-05-26T14:20:04.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","37"],"favorite_count":"0","id_str":"1662093749101424646","truncated":false,"retweet_count":"0","id":"1662093749101424646","created_at":"Fri May 26 13:50:04 +0000 2023","favorited":false,"full_text":"you fight the monsters you've created","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1659007038813270016"],"editableUntil":"2023-05-18T01:54:35.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","46"],"favorite_count":"0","id_str":"1659007038813270016","truncated":false,"retweet_count":"0","id":"1659007038813270016","created_at":"Thu May 18 01:24:35 +0000 2023","favorited":false,"full_text":"I need your grace\\nTo remind me\\nTo find my own.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1653564712905236482"],"editableUntil":"2023-05-03T01:28:43.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","85"],"favorite_count":"0","id_str":"1653564712905236482","truncated":false,"retweet_count":"0","id":"1653564712905236482","created_at":"Wed May 03 00:58:43 +0000 2023","favorited":false,"full_text":"some messages are well written on the painful and silent absence of a proper message.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1651966683156717569"],"editableUntil":"2023-04-28T15:38:43.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","48"],"favorite_count":"0","id_str":"1651966683156717569","truncated":false,"retweet_count":"0","id":"1651966683156717569","created_at":"Fri Apr 28 15:08:43 +0000 2023","favorited":false,"full_text":"Of course I dreamed about you - last reply 14h20","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1650555960186875909"],"editableUntil":"2023-04-24T18:13:01.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","72"],"favorite_count":"0","id_str":"1650555960186875909","truncated":false,"retweet_count":"0","id":"1650555960186875909","created_at":"Mon Apr 24 17:43:01 +0000 2023","favorited":false,"full_text":"I dreamed of you and I\\nI offered you a compromise ring but you declined.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1648344735612796931"],"editableUntil":"2023-04-18T15:46:24.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","27"],"favorite_count":"0","id_str":"1648344735612796931","truncated":false,"retweet_count":"0","id":"1648344735612796931","created_at":"Tue Apr 18 15:16:24 +0000 2023","favorited":false,"full_text":"\\"O poeta que nao sabia ler\\"","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1647750232883560451"],"editableUntil":"2023-04-17T00:24:03.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","19"],"favorite_count":"0","id_str":"1647750232883560451","truncated":false,"retweet_count":"0","id":"1647750232883560451","created_at":"Sun Apr 16 23:54:03 +0000 2023","favorited":false,"full_text":"she knows the world","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1643370173443743749"],"editableUntil":"2023-04-04T22:19:16.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","100"],"favorite_count":"0","id_str":"1643370173443743749","truncated":false,"retweet_count":"0","id":"1643370173443743749","created_at":"Tue Apr 04 21:49:16 +0000 2023","favorited":false,"full_text":"Sometimes I ask myself if you were real. \\nSometimes I need to tell myself that you actually existed.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1642888277014245377"],"editableUntil":"2023-04-03T14:24:23.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","130"],"favorite_count":"0","id_str":"1642888277014245377","truncated":false,"retweet_count":"0","id":"1642888277014245377","created_at":"Mon Apr 03 13:54:23 +0000 2023","favorited":false,"full_text":"Às vezes eu sinto que eu sou o único prestando atenção. Talvez eu entenda de mais aquilo que deveria apenas ficar... subentendido.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1642587845926715393"],"editableUntil":"2023-04-02T18:30:34.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","22"],"favorite_count":"0","id_str":"1642587845926715393","truncated":false,"retweet_count":"0","id":"1642587845926715393","created_at":"Sun Apr 02 18:00:34 +0000 2023","favorited":false,"full_text":"O jovem e a hipérbole.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1635617741666222080"],"editableUntil":"2023-03-14T12:53:52.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1635617741666222080","truncated":false,"retweet_count":"0","id":"1635617741666222080","created_at":"Tue Mar 14 12:23:52 +0000 2023","favorited":false,"full_text":"I never went to that bridge.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1632371305059082240"],"editableUntil":"2023-03-05T13:53:41.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1632371305059082240","truncated":false,"retweet_count":"0","id":"1632371305059082240","created_at":"Sun Mar 05 13:23:41 +0000 2023","favorited":false,"full_text":"adding layers of uncertainty","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1630523184888922113"],"editableUntil":"2023-02-28T11:29:55.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","55"],"favorite_count":"0","id_str":"1630523184888922113","truncated":false,"retweet_count":"0","id":"1630523184888922113","created_at":"Tue Feb 28 10:59:55 +0000 2023","favorited":false,"full_text":"once you know certain things, they will start to pop up","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1629233623269269509"],"editableUntil":"2023-02-24T22:05:40.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1629233623269269509","truncated":false,"retweet_count":"0","id":"1629233623269269509","created_at":"Fri Feb 24 21:35:40 +0000 2023","favorited":false,"full_text":"the realization is painful","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1629133912805867526"],"editableUntil":"2023-02-24T15:29:27.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","41"],"favorite_count":"0","id_str":"1629133912805867526","truncated":false,"retweet_count":"0","id":"1629133912805867526","created_at":"Fri Feb 24 14:59:27 +0000 2023","favorited":false,"full_text":"Toda essa liberdade acabou nos prendendo.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1622533552012161025"],"editableUntil":"2023-02-06T10:21:58.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","27"],"favorite_count":"0","id_str":"1622533552012161025","truncated":false,"retweet_count":"0","id":"1622533552012161025","created_at":"Mon Feb 06 09:51:58 +0000 2023","favorited":false,"full_text":"no hay nadie a quien llamar","lang":"es"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1620766298157498371"],"editableUntil":"2023-02-01T13:19:32.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","29"],"favorite_count":"0","id_str":"1620766298157498371","truncated":false,"retweet_count":"0","id":"1620766298157498371","created_at":"Wed Feb 01 12:49:32 +0000 2023","favorited":false,"full_text":"Yeah, it's been a long minute","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1620576378830872578"],"editableUntil":"2023-02-01T00:44:52.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","29"],"favorite_count":"0","id_str":"1620576378830872578","truncated":false,"retweet_count":"0","id":"1620576378830872578","created_at":"Wed Feb 01 00:14:52 +0000 2023","favorited":false,"full_text":"I love you in every universe.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1619675880447672321"],"editableUntil":"2023-01-29T13:06:36.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","20"],"favorite_count":"0","id_str":"1619675880447672321","truncated":false,"retweet_count":"0","id":"1619675880447672321","created_at":"Sun Jan 29 12:36:36 +0000 2023","favorited":false,"full_text":"each chapter unfolds","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1618223600066260994"],"editableUntil":"2023-01-25T12:55:46.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","39"],"favorite_count":"0","id_str":"1618223600066260994","truncated":false,"retweet_count":"0","id":"1618223600066260994","created_at":"Wed Jan 25 12:25:46 +0000 2023","favorited":false,"full_text":"I am surrounded by unbelievable people.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1615314015932272640"],"editableUntil":"2023-01-17T12:14:07.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","20"],"favorite_count":"0","id_str":"1615314015932272640","truncated":false,"retweet_count":"0","id":"1615314015932272640","created_at":"Tue Jan 17 11:44:07 +0000 2023","favorited":false,"full_text":"everlasting whatever","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1610648057942523904"],"editableUntil":"2023-01-04T15:13:16.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","47"],"favorite_count":"0","id_str":"1610648057942523904","truncated":false,"retweet_count":"0","id":"1610648057942523904","created_at":"Wed Jan 04 14:43:16 +0000 2023","favorited":false,"full_text":"I would keep your letters until the world ends.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1608946660037758976"],"editableUntil":"2022-12-30T22:32:31.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","64"],"favorite_count":"0","id_str":"1608946660037758976","truncated":false,"retweet_count":"1","id":"1608946660037758976","created_at":"Fri Dec 30 22:02:31 +0000 2022","favorited":false,"full_text":"For some reason, I waited for your message today. The whole day.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1608519123318996993"],"editableUntil":"2022-12-29T18:13:38.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","72"],"favorite_count":"0","id_str":"1608519123318996993","truncated":false,"retweet_count":"0","id":"1608519123318996993","created_at":"Thu Dec 29 17:43:38 +0000 2022","favorited":false,"full_text":"I don't want to feel the pain of an ending song, so I play it on repeat.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1607437303114252288"],"editableUntil":"2022-12-26T18:34:52.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","27"],"favorite_count":"0","id_str":"1607437303114252288","truncated":false,"retweet_count":"0","id":"1607437303114252288","created_at":"Mon Dec 26 18:04:52 +0000 2022","favorited":false,"full_text":"yet to dream, yet to dream.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1603501275865292819"],"editableUntil":"2022-12-15T21:54:30.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","124"],"favorite_count":"0","id_str":"1603501275865292819","truncated":false,"retweet_count":"0","id":"1603501275865292819","created_at":"Thu Dec 15 21:24:30 +0000 2022","favorited":false,"full_text":"I was starting to play a sad song but you smile prevented me to continue, now there's nothing to prevent me from doing that.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1600911768884318215"],"editableUntil":"2022-12-08T18:24:43.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","88"],"favorite_count":"0","id_str":"1600911768884318215","truncated":false,"retweet_count":"0","id":"1600911768884318215","created_at":"Thu Dec 08 17:54:43 +0000 2022","favorited":false,"full_text":"few regrets, but nothing hurts more than realize I didn't hold hands as tight as I could","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1597248726447554560"],"editableUntil":"2022-11-28T15:49:06.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","55"],"favorite_count":"0","id_str":"1597248726447554560","truncated":false,"retweet_count":"0","id":"1597248726447554560","created_at":"Mon Nov 28 15:19:06 +0000 2022","favorited":false,"full_text":"Running in circles, I'm but a compass with no direction","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1595152475816087554"],"editableUntil":"2022-11-22T20:59:21.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","56"],"favorite_count":"0","id_str":"1595152475816087554","truncated":false,"retweet_count":"0","id":"1595152475816087554","created_at":"Tue Nov 22 20:29:21 +0000 2022","favorited":false,"full_text":"I almost forget, it's Friday\\nI almost forget it's Friday","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1594716803132956682"],"editableUntil":"2022-11-21T16:08:08.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","59"],"favorite_count":"0","id_str":"1594716803132956682","truncated":false,"retweet_count":"0","id":"1594716803132956682","created_at":"Mon Nov 21 15:38:08 +0000 2022","favorited":false,"full_text":"Drawn from the Water\\nyou are the reason I don't sleep well.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1592103606576349185"],"editableUntil":"2022-11-14T11:04:14.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","22"],"favorite_count":"0","id_str":"1592103606576349185","truncated":false,"retweet_count":"0","id":"1592103606576349185","created_at":"Mon Nov 14 10:34:14 +0000 2022","favorited":false,"full_text":"Eu ainda quero voltar.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1591106694956093441"],"editableUntil":"2022-11-11T17:02:52.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","21"],"favorite_count":"0","id_str":"1591106694956093441","truncated":false,"retweet_count":"0","id":"1591106694956093441","created_at":"Fri Nov 11 16:32:52 +0000 2022","favorited":false,"full_text":"I died in your dreams","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1591012565521694720"],"editableUntil":"2022-11-11T10:48:49.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","65"],"favorite_count":"0","id_str":"1591012565521694720","truncated":false,"retweet_count":"0","id":"1591012565521694720","created_at":"Fri Nov 11 10:18:49 +0000 2022","favorited":false,"full_text":"I almost never know the answer but usually I know how to find it.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1589942575065989120"],"editableUntil":"2022-11-08T11:57:04.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","56"],"favorite_count":"0","id_str":"1589942575065989120","truncated":false,"retweet_count":"0","id":"1589942575065989120","created_at":"Tue Nov 08 11:27:04 +0000 2022","favorited":false,"full_text":"I only know because I carry you around in the background","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1589933532306354176"],"editableUntil":"2022-11-08T11:21:08.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","23"],"favorite_count":"0","id_str":"1589933532306354176","truncated":false,"retweet_count":"0","id":"1589933532306354176","created_at":"Tue Nov 08 10:51:08 +0000 2022","favorited":false,"full_text":"memories in slow motion","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1589933340643426305"],"editableUntil":"2022-11-08T11:20:22.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","35"],"favorite_count":"0","id_str":"1589933340643426305","truncated":false,"retweet_count":"0","id":"1589933340643426305","created_at":"Tue Nov 08 10:50:22 +0000 2022","favorited":false,"full_text":"There's no rush because I have tea.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1589933125034946561"],"editableUntil":"2022-11-08T11:19:31.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","34"],"favorite_count":"0","id_str":"1589933125034946561","truncated":false,"retweet_count":"0","id":"1589933125034946561","created_at":"Tue Nov 08 10:49:31 +0000 2022","favorited":false,"full_text":"We are naked beneath the universe.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1589933044067991553"],"editableUntil":"2022-11-08T11:19:11.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1589933044067991553","truncated":false,"retweet_count":"0","id":"1589933044067991553","created_at":"Tue Nov 08 10:49:11 +0000 2022","favorited":false,"full_text":"here I am, not going back.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1589932998266605568"],"editableUntil":"2022-11-08T11:19:00.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","76"],"favorite_count":"0","id_str":"1589932998266605568","truncated":false,"retweet_count":"0","id":"1589932998266605568","created_at":"Tue Nov 08 10:49:00 +0000 2022","favorited":false,"full_text":"They said \\"You're definitely coming back\\".\\nWell, here I am, not coming back.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1589695224699580417"],"editableUntil":"2022-11-07T19:34:11.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1589695224699580417","truncated":false,"retweet_count":"0","id":"1589695224699580417","created_at":"Mon Nov 07 19:04:11 +0000 2022","favorited":false,"full_text":"Fake computer crashes dining","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1589694355224215552"],"editableUntil":"2022-11-07T19:30:44.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","27"],"favorite_count":"0","id_str":"1589694355224215552","truncated":false,"retweet_count":"0","id":"1589694355224215552","created_at":"Mon Nov 07 19:00:44 +0000 2022","favorited":false,"full_text":"I got the dreamer's disease","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1589633565100503042"],"editableUntil":"2022-11-07T15:29:10.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","269"],"favorite_count":"0","id_str":"1589633565100503042","truncated":false,"retweet_count":"0","id":"1589633565100503042","created_at":"Mon Nov 07 14:59:10 +0000 2022","favorited":false,"full_text":"I create YouTube playlists all the time. Those playlists reflect my feelings, thoughts, state of mind, and so on. From time to time, YouTube(rs) removes or hides videos, impacting in which content I have in my playlists. YouTube is changing me by changing my playlists.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1585987447259041792"],"editableUntil":"2022-10-28T14:00:48.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","30"],"favorite_count":"0","id_str":"1585987447259041792","truncated":false,"retweet_count":"0","id":"1585987447259041792","created_at":"Fri Oct 28 13:30:48 +0000 2022","favorited":false,"full_text":"it's the sugar in her... eyes.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1585628294401372160"],"editableUntil":"2022-10-27T14:13:39.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","53"],"favorite_count":"0","id_str":"1585628294401372160","truncated":false,"retweet_count":"0","id":"1585628294401372160","created_at":"Thu Oct 27 13:43:39 +0000 2022","favorited":false,"full_text":"3 blinks later and I am living unimaginable realities","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1583791195385307136"],"editableUntil":"2022-10-22T12:33:41.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","38"],"favorite_count":"0","id_str":"1583791195385307136","truncated":false,"retweet_count":"0","id":"1583791195385307136","created_at":"Sat Oct 22 12:03:41 +0000 2022","favorited":false,"full_text":"It's time to leave those songs behind.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1582671927293800448"],"editableUntil":"2022-10-19T10:26:06.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","108"],"favorite_count":"0","id_str":"1582671927293800448","truncated":false,"retweet_count":"0","id":"1582671927293800448","created_at":"Wed Oct 19 09:56:06 +0000 2022","favorited":false,"full_text":"I am writing the most beautiful song about you and I am pretty sure you won't listen to it, but that's ok :)","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1582309028750712832"],"editableUntil":"2022-10-18T10:24:04.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","160"],"favorite_count":"0","id_str":"1582309028750712832","truncated":false,"retweet_count":"0","id":"1582309028750712832","created_at":"Tue Oct 18 09:54:04 +0000 2022","favorited":false,"full_text":"The only history I ever knew was that one told me throughout my life and now I realize, I am afraid to write my own, but now it's time to leave the fear behind.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1582049715344277505"],"editableUntil":"2022-10-17T17:13:39.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","44"],"favorite_count":"0","id_str":"1582049715344277505","truncated":false,"retweet_count":"0","id":"1582049715344277505","created_at":"Mon Oct 17 16:43:39 +0000 2022","favorited":false,"full_text":"people get annoyed when they see you smiling","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1582049538763653125"],"editableUntil":"2022-10-17T17:12:57.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","85"],"favorite_count":"0","id_str":"1582049538763653125","truncated":false,"retweet_count":"0","id":"1582049538763653125","created_at":"Mon Oct 17 16:42:57 +0000 2022","favorited":false,"full_text":"I love the way your eyes catch the light and throw it back like a supernova explosion","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1581723338355134464"],"editableUntil":"2022-10-16T19:36:45.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","24"],"favorite_count":"0","id_str":"1581723338355134464","truncated":false,"retweet_count":"0","id":"1581723338355134464","created_at":"Sun Oct 16 19:06:45 +0000 2022","favorited":false,"full_text":"this day, two years ago.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1581042569835708416"],"editableUntil":"2022-10-14T22:31:37.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","83"],"favorite_count":"0","id_str":"1581042569835708416","truncated":false,"retweet_count":"0","id":"1581042569835708416","created_at":"Fri Oct 14 22:01:37 +0000 2022","favorited":false,"full_text":"I call out that name but there will be no reunion for us, not in this world anyway.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1580306943071031297"],"editableUntil":"2022-10-12T21:48:30.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","48"],"favorite_count":"0","id_str":"1580306943071031297","truncated":false,"retweet_count":"0","id":"1580306943071031297","created_at":"Wed Oct 12 21:18:30 +0000 2022","favorited":false,"full_text":"\\"Never have I beheld such a lost forgotten soul\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1579786906564689923"],"editableUntil":"2022-10-11T11:22:04.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","24"],"favorite_count":"0","id_str":"1579786906564689923","truncated":false,"retweet_count":"0","id":"1579786906564689923","created_at":"Tue Oct 11 10:52:04 +0000 2022","favorited":false,"full_text":"avoid analysis paralysis","lang":"fr"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1579432796938186752"],"editableUntil":"2022-10-10T11:54:57.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","22"],"favorite_count":"0","id_str":"1579432796938186752","truncated":false,"retweet_count":"0","id":"1579432796938186752","created_at":"Mon Oct 10 11:24:57 +0000 2022","favorited":false,"full_text":"Lost in the full stop.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1579181373738582016"],"editableUntil":"2022-10-09T19:15:53.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","41"],"favorite_count":"0","id_str":"1579181373738582016","truncated":false,"retweet_count":"0","id":"1579181373738582016","created_at":"Sun Oct 09 18:45:53 +0000 2022","favorited":false,"full_text":"I can almost feel the darkness around me.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1579171226677039104"],"editableUntil":"2022-10-09T18:35:34.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","138"],"favorite_count":"0","id_str":"1579171226677039104","truncated":false,"retweet_count":"0","id":"1579171226677039104","created_at":"Sun Oct 09 18:05:34 +0000 2022","favorited":false,"full_text":"I listen to it because this kind of songs resonates with hopeless sadness, it matches one another creating a perfect harmony of emptiness.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1578336057199771649"],"editableUntil":"2022-10-07T11:16:54.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","27"],"favorite_count":"0","id_str":"1578336057199771649","truncated":false,"retweet_count":"0","id":"1578336057199771649","created_at":"Fri Oct 07 10:46:54 +0000 2022","favorited":false,"full_text":"Take a look, it was a joke!","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1577935632273399810"],"editableUntil":"2022-10-06T08:45:46.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","108"],"favorite_count":"0","id_str":"1577935632273399810","truncated":false,"retweet_count":"0","id":"1577935632273399810","created_at":"Thu Oct 06 08:15:46 +0000 2022","favorited":false,"full_text":"Em teoria, mesmo parado, o mundo gira ao seu redor e os eventos acabam acontecendo, te atingindo. Em teoria.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1577935245025976321"],"editableUntil":"2022-10-06T08:44:13.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","61"],"favorite_count":"0","id_str":"1577935245025976321","truncated":false,"retweet_count":"0","id":"1577935245025976321","created_at":"Thu Oct 06 08:14:13 +0000 2022","favorited":false,"full_text":"A vontade de ser parecido me tornou diferente - de mim mesmo.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1577774900349116422"],"editableUntil":"2022-10-05T22:07:04.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","65"],"favorite_count":"0","id_str":"1577774900349116422","truncated":false,"retweet_count":"0","id":"1577774900349116422","created_at":"Wed Oct 05 21:37:04 +0000 2022","favorited":false,"full_text":"Your kind words always shined over the earth and I miss that too.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1577747013017518093"],"editableUntil":"2022-10-05T20:16:15.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","40"],"favorite_count":"0","id_str":"1577747013017518093","truncated":false,"retweet_count":"0","id":"1577747013017518093","created_at":"Wed Oct 05 19:46:15 +0000 2022","favorited":false,"full_text":"And there was a smile... ...for a while.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1577745766109659146"],"editableUntil":"2022-10-05T20:11:18.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","37"],"favorite_count":"0","id_str":"1577745766109659146","truncated":false,"retweet_count":"0","id":"1577745766109659146","created_at":"Wed Oct 05 19:41:18 +0000 2022","favorited":false,"full_text":"Put me aside as the life passes me by","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1577745609922166794"],"editableUntil":"2022-10-05T20:10:41.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","74"],"favorite_count":"0","id_str":"1577745609922166794","truncated":false,"retweet_count":"0","id":"1577745609922166794","created_at":"Wed Oct 05 19:40:41 +0000 2022","favorited":false,"full_text":"Once I had everything that I ever needed, but I was too stupid to realize.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1577745525746634752"],"editableUntil":"2022-10-05T20:10:21.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","51"],"favorite_count":"0","id_str":"1577745525746634752","truncated":false,"retweet_count":"0","id":"1577745525746634752","created_at":"Wed Oct 05 19:40:21 +0000 2022","favorited":false,"full_text":"I took the long way back home but where my home is?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1577745376664338434"],"editableUntil":"2022-10-05T20:09:45.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","30"],"favorite_count":"0","id_str":"1577745376664338434","truncated":false,"retweet_count":"0","id":"1577745376664338434","created_at":"Wed Oct 05 19:39:45 +0000 2022","favorited":false,"full_text":"He is invisible, she is blind.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1577674368062193666"],"editableUntil":"2022-10-05T15:27:35.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","56"],"favorite_count":"0","id_str":"1577674368062193666","truncated":false,"retweet_count":"0","id":"1577674368062193666","created_at":"Wed Oct 05 14:57:35 +0000 2022","favorited":false,"full_text":"I would wait if I know, if I had some hope to tie me in.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1576667458030964736"],"editableUntil":"2022-10-02T20:46:29.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","17"],"favorite_count":"0","id_str":"1576667458030964736","truncated":false,"retweet_count":"0","id":"1576667458030964736","created_at":"Sun Oct 02 20:16:29 +0000 2022","favorited":false,"full_text":"What have I done.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1576504714094485504"],"editableUntil":"2022-10-02T09:59:48.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","57"],"favorite_count":"0","id_str":"1576504714094485504","truncated":false,"retweet_count":"0","id":"1576504714094485504","created_at":"Sun Oct 02 09:29:48 +0000 2022","favorited":false,"full_text":"So many questions are left, so many answers I won't have.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1576503295308288000"],"editableUntil":"2022-10-02T09:54:10.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","49"],"favorite_count":"0","id_str":"1576503295308288000","truncated":false,"retweet_count":"0","id":"1576503295308288000","created_at":"Sun Oct 02 09:24:10 +0000 2022","favorited":false,"full_text":"The world needs wannabes\\nThe world loves wannabes","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1576503222583205889"],"editableUntil":"2022-10-02T09:53:52.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","180"],"favorite_count":"0","id_str":"1576503222583205889","truncated":false,"retweet_count":"0","id":"1576503222583205889","created_at":"Sun Oct 02 09:23:52 +0000 2022","favorited":false,"full_text":"I may repeat myself from time to time, but what is a feeling besides loops of thoughts that goes from a perspective to a conclusion?\\n\\nHell is repetition, \`I love you\` is redundant.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1576343170228817921"],"editableUntil":"2022-10-01T23:17:53.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","15"],"favorite_count":"0","id_str":"1576343170228817921","truncated":false,"retweet_count":"0","id":"1576343170228817921","created_at":"Sat Oct 01 22:47:53 +0000 2022","favorited":false,"full_text":"be kind, rewind","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1576322800725684224"],"editableUntil":"2022-10-01T21:56:57.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","71"],"favorite_count":"0","id_str":"1576322800725684224","truncated":false,"retweet_count":"0","id":"1576322800725684224","created_at":"Sat Oct 01 21:26:57 +0000 2022","favorited":false,"full_text":"Life and love are not about the pictures.\\n\\nAlthough I keep all of ours.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1576272668139352064"],"editableUntil":"2022-10-01T18:37:44.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","35"],"favorite_count":"0","id_str":"1576272668139352064","truncated":false,"retweet_count":"0","id":"1576272668139352064","created_at":"Sat Oct 01 18:07:44 +0000 2022","favorited":false,"full_text":"I decided to fight back and I lost.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1575815220060213251"],"editableUntil":"2022-09-30T12:20:00.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","63"],"favorite_count":"0","id_str":"1575815220060213251","truncated":false,"retweet_count":"0","id":"1575815220060213251","created_at":"Fri Sep 30 11:50:00 +0000 2022","favorited":false,"full_text":"In my dreams you are too close, but you are never close enough.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1575410502389448705"],"editableUntil":"2022-09-29T09:31:48.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1575410502389448705","truncated":false,"retweet_count":"0","id":"1575410502389448705","created_at":"Thu Sep 29 09:01:48 +0000 2022","favorited":false,"full_text":"But you also cause them =[","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1575410435154759683"],"editableUntil":"2022-09-29T09:31:32.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","42"],"favorite_count":"0","id_str":"1575410435154759683","truncated":false,"retweet_count":"0","id":"1575410435154759683","created_at":"Thu Sep 29 09:01:32 +0000 2022","favorited":false,"full_text":"You're the cure for my breathing problems.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1574488643288416279"],"editableUntil":"2022-09-26T20:28:39.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","73"],"favorite_count":"0","id_str":"1574488643288416279","truncated":false,"retweet_count":"0","id":"1574488643288416279","created_at":"Mon Sep 26 19:58:39 +0000 2022","favorited":false,"full_text":"Will I have found a better method of pretending you were just some lover?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1574416804876673024"],"editableUntil":"2022-09-26T15:43:12.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","18"],"favorite_count":"0","id_str":"1574416804876673024","truncated":false,"retweet_count":"0","id":"1574416804876673024","created_at":"Mon Sep 26 15:13:12 +0000 2022","favorited":false,"full_text":"breaking the habit","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1574078102971498496"],"editableUntil":"2022-09-25T17:17:19.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","164"],"favorite_count":"0","id_str":"1574078102971498496","truncated":false,"retweet_count":"0","id":"1574078102971498496","created_at":"Sun Sep 25 16:47:19 +0000 2022","favorited":false,"full_text":"and I still remember of your pretty eyes, I still remember of your soft hands, I still remember of your long hair and for this day I still desiring your strong hug.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1574075329651564545"],"editableUntil":"2022-09-25T17:06:18.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","155"],"favorite_count":"0","id_str":"1574075329651564545","truncated":false,"retweet_count":"0","id":"1574075329651564545","created_at":"Sun Sep 25 16:36:18 +0000 2022","favorited":false,"full_text":"One more minute, for all eternity. This is how I will remember our last day, living our whole life in a final moment, where we could be together once again","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1573998273324634112"],"editableUntil":"2022-09-25T12:00:06.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","24"],"favorite_count":"0","id_str":"1573998273324634112","truncated":false,"retweet_count":"0","id":"1573998273324634112","created_at":"Sun Sep 25 11:30:06 +0000 2022","favorited":false,"full_text":"that message never came.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1573996156207742976"],"editableUntil":"2022-09-25T11:51:41.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","20"],"favorite_count":"0","id_str":"1573996156207742976","truncated":false,"retweet_count":"0","id":"1573996156207742976","created_at":"Sun Sep 25 11:21:41 +0000 2022","favorited":false,"full_text":"help yourself before","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1573996112331038720"],"editableUntil":"2022-09-25T11:51:31.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","12"],"favorite_count":"0","id_str":"1573996112331038720","truncated":false,"retweet_count":"0","id":"1573996112331038720","created_at":"Sun Sep 25 11:21:31 +0000 2022","favorited":false,"full_text":"forever away","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1573976520397393920"],"editableUntil":"2022-09-25T10:33:40.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","72"],"favorite_count":"0","id_str":"1573976520397393920","truncated":false,"retweet_count":"0","id":"1573976520397393920","created_at":"Sun Sep 25 10:03:40 +0000 2022","favorited":false,"full_text":"There are things I used to laugh of but now I realize how sad they were.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1573961966573559809"],"editableUntil":"2022-09-25T09:35:50.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","93"],"favorite_count":"0","id_str":"1573961966573559809","truncated":false,"retweet_count":"0","id":"1573961966573559809","created_at":"Sun Sep 25 09:05:50 +0000 2022","favorited":false,"full_text":"reflections about the actions\\nreflecting about what I'm doing\\nreflecting about what I've done","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1573792943865040896"],"editableUntil":"2022-09-24T22:24:12.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","17"],"favorite_count":"0","id_str":"1573792943865040896","truncated":false,"retweet_count":"0","id":"1573792943865040896","created_at":"Sat Sep 24 21:54:12 +0000 2022","favorited":false,"full_text":"I am yet to dream","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1573784049382031363"],"editableUntil":"2022-09-24T21:48:51.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","64"],"favorite_count":"0","id_str":"1573784049382031363","truncated":false,"retweet_count":"0","id":"1573784049382031363","created_at":"Sat Sep 24 21:18:51 +0000 2022","favorited":false,"full_text":"don't ask me to be myself if you don't know how to deal with it.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1573035658783985664"],"editableUntil":"2022-09-22T20:15:01.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1573035658783985664","truncated":false,"retweet_count":"0","id":"1573035658783985664","created_at":"Thu Sep 22 19:45:01 +0000 2022","favorited":false,"full_text":"nothing happens for a reason","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1572910667895832577"],"editableUntil":"2022-09-22T11:58:21.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","39"],"favorite_count":"0","id_str":"1572910667895832577","truncated":false,"retweet_count":"0","id":"1572910667895832577","created_at":"Thu Sep 22 11:28:21 +0000 2022","favorited":false,"full_text":"It could be us, it should be us. &lt;/3","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1572552606312189952"],"editableUntil":"2022-09-21T12:15:32.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","80"],"favorite_count":"0","id_str":"1572552606312189952","truncated":false,"retweet_count":"0","id":"1572552606312189952","created_at":"Wed Sep 21 11:45:32 +0000 2022","favorited":false,"full_text":"Bittersweet feeling to realize that your life has been spread through the world.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1572263609425616897"],"editableUntil":"2022-09-20T17:07:10.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","30"],"favorite_count":"0","id_str":"1572263609425616897","truncated":false,"retweet_count":"0","id":"1572263609425616897","created_at":"Tue Sep 20 16:37:10 +0000 2022","favorited":false,"full_text":"Living in the last common time","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1570516334269833217"],"editableUntil":"2022-09-15T21:24:07.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","84"],"favorite_count":"0","id_str":"1570516334269833217","truncated":false,"retweet_count":"0","id":"1570516334269833217","created_at":"Thu Sep 15 20:54:07 +0000 2022","favorited":false,"full_text":"\\"As long as you get your shit done, you can work from anywhere.\\"\\n\\nMy manager, today.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1570429897914617858"],"editableUntil":"2022-09-15T15:40:39.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","45"],"favorite_count":"0","id_str":"1570429897914617858","truncated":false,"retweet_count":"0","id":"1570429897914617858","created_at":"Thu Sep 15 15:10:39 +0000 2022","favorited":false,"full_text":"I have to take a tram\\nAnd it started to rain.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1570335459599060993"],"editableUntil":"2022-09-15T09:25:23.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","42"],"favorite_count":"0","id_str":"1570335459599060993","truncated":false,"retweet_count":"0","id":"1570335459599060993","created_at":"Thu Sep 15 08:55:23 +0000 2022","favorited":false,"full_text":"Minutes are too short, hours are too long.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1570335191884877829"],"editableUntil":"2022-09-15T09:24:19.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","50"],"favorite_count":"0","id_str":"1570335191884877829","truncated":false,"retweet_count":"0","id":"1570335191884877829","created_at":"Thu Sep 15 08:54:19 +0000 2022","favorited":false,"full_text":"I fall apart, down to my core, down to the cellar.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1570071603127504898"],"editableUntil":"2022-09-14T15:56:55.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","33"],"favorite_count":"0","id_str":"1570071603127504898","truncated":false,"retweet_count":"0","id":"1570071603127504898","created_at":"Wed Sep 14 15:26:55 +0000 2022","favorited":false,"full_text":"It's 2022 and I still loving you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1569976740721590273"],"editableUntil":"2022-09-14T09:39:58.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","136"],"favorite_count":"0","id_str":"1569976740721590273","truncated":false,"retweet_count":"0","id":"1569976740721590273","created_at":"Wed Sep 14 09:09:58 +0000 2022","favorited":false,"full_text":"I promise you I won't think about you today.\\nI promise you I won't dream about you today.\\nI promise you I won't even remember you today.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1569622559850745858"],"editableUntil":"2022-09-13T10:12:35.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","39"],"favorite_count":"0","id_str":"1569622559850745858","truncated":false,"retweet_count":"0","id":"1569622559850745858","created_at":"Tue Sep 13 09:42:35 +0000 2022","favorited":false,"full_text":"Go away and let me be.\\nJust let it die.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1568946017390968833"],"editableUntil":"2022-09-11T13:24:14.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","47"],"favorite_count":"0","id_str":"1568946017390968833","truncated":false,"retweet_count":"0","id":"1568946017390968833","created_at":"Sun Sep 11 12:54:14 +0000 2022","favorited":false,"full_text":"I can't forget.\\nBecause I don't want to forget.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1568638018872811522"],"editableUntil":"2022-09-10T17:00:22.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","146"],"favorite_count":"0","id_str":"1568638018872811522","truncated":false,"retweet_count":"0","id":"1568638018872811522","created_at":"Sat Sep 10 16:30:22 +0000 2022","favorited":false,"full_text":"The only thing I don't like in you is that moment when you go away.\\n\\nThe only thing I didn't like in you was that moment when you left me forever.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1567874922021535748"],"editableUntil":"2022-09-08T14:28:05.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","74"],"favorite_count":"0","id_str":"1567874922021535748","truncated":false,"retweet_count":"0","id":"1567874922021535748","created_at":"Thu Sep 08 13:58:05 +0000 2022","favorited":false,"full_text":"There is Nothing, and There is Tired of Tomorrow.\\n\\nI am tired of tomorrow.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1567821302496370689"],"editableUntil":"2022-09-08T10:55:01.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","78"],"favorite_count":"0","id_str":"1567821302496370689","truncated":false,"retweet_count":"0","id":"1567821302496370689","created_at":"Thu Sep 08 10:25:01 +0000 2022","favorited":false,"full_text":"...And I don't think about you... anymore...\\nLying to myself, as I did before.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1567628445617635331"],"editableUntil":"2022-09-07T22:08:41.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","81"],"favorite_count":"0","id_str":"1567628445617635331","truncated":false,"retweet_count":"0","id":"1567628445617635331","created_at":"Wed Sep 07 21:38:41 +0000 2022","favorited":false,"full_text":"For a moment, it gets easier to pretend, for a minute, it gets easier to pretend.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1567592730926145537"],"editableUntil":"2022-09-07T19:46:46.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","93"],"favorite_count":"0","id_str":"1567592730926145537","truncated":false,"retweet_count":"0","id":"1567592730926145537","created_at":"Wed Sep 07 19:16:46 +0000 2022","favorited":false,"full_text":"It's hard to live a life with memories that are made of the things you used to share with me.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1567420034904899585"],"editableUntil":"2022-09-07T08:20:32.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","91"],"favorite_count":"0","id_str":"1567420034904899585","truncated":false,"retweet_count":"0","id":"1567420034904899585","created_at":"Wed Sep 07 07:50:32 +0000 2022","favorited":false,"full_text":"I dream of unkilled demons of my childhood, I dream of unkillable monsters of my childhood.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1567125259979030529"],"editableUntil":"2022-09-06T12:49:12.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","78"],"favorite_count":"0","id_str":"1567125259979030529","truncated":false,"retweet_count":"0","id":"1567125259979030529","created_at":"Tue Sep 06 12:19:12 +0000 2022","favorited":false,"full_text":"You visit me in my dreams\\nYou kiss me in my dreams\\nYou are gone when I woke up","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1566805982671421445"],"editableUntil":"2022-09-05T15:40:30.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","149"],"favorite_count":"0","id_str":"1566805982671421445","truncated":false,"retweet_count":"0","id":"1566805982671421445","created_at":"Mon Sep 05 15:10:30 +0000 2022","favorited":false,"full_text":"We listened to the song for the first time together. \\nWe listened to that song for the last time together.\\n\\nYou can paint this wings and make me fly.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1566714562983956482"],"editableUntil":"2022-09-05T09:37:14.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","27"],"favorite_count":"0","id_str":"1566714562983956482","truncated":false,"retweet_count":"0","id":"1566714562983956482","created_at":"Mon Sep 05 09:07:14 +0000 2022","favorited":false,"full_text":"My heart insists on beating","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1566515221514051585"],"editableUntil":"2022-09-04T20:25:07.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","74"],"favorite_count":"0","id_str":"1566515221514051585","truncated":false,"retweet_count":"0","id":"1566515221514051585","created_at":"Sun Sep 04 19:55:07 +0000 2022","favorited":false,"full_text":"queria encerrar essa do r em sol,\\nqueria encerrar essa do r maior em mi m.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1566498623579381761"],"editableUntil":"2022-09-04T19:19:10.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","30"],"favorite_count":"0","id_str":"1566498623579381761","truncated":false,"retweet_count":"0","id":"1566498623579381761","created_at":"Sun Sep 04 18:49:10 +0000 2022","favorited":false,"full_text":"Our memories are burning on me","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1566498589798440960"],"editableUntil":"2022-09-04T19:19:02.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","85"],"favorite_count":"0","id_str":"1566498589798440960","truncated":false,"retweet_count":"0","id":"1566498589798440960","created_at":"Sun Sep 04 18:49:02 +0000 2022","favorited":false,"full_text":"Question marks are messing with my head and I should leave and live my life, instead.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1565468451505950720"],"editableUntil":"2022-09-01T23:05:38.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","57"],"favorite_count":"0","id_str":"1565468451505950720","truncated":false,"retweet_count":"0","id":"1565468451505950720","created_at":"Thu Sep 01 22:35:38 +0000 2022","favorited":false,"full_text":"I don't deserve your answer. Unfair like everything else.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1565323059397009411"],"editableUntil":"2022-09-01T13:27:54.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","29"],"favorite_count":"0","id_str":"1565323059397009411","truncated":false,"retweet_count":"0","id":"1565323059397009411","created_at":"Thu Sep 01 12:57:54 +0000 2022","favorited":false,"full_text":"what happened to the guitars?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1565100905900433417"],"editableUntil":"2022-08-31T22:45:08.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","44"],"favorite_count":"0","id_str":"1565100905900433417","truncated":false,"retweet_count":"0","id":"1565100905900433417","created_at":"Wed Aug 31 22:15:08 +0000 2022","favorited":false,"full_text":"I promise you I will learn from my mistakes.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1564963301586599939"],"editableUntil":"2022-08-31T13:38:21.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","119"],"favorite_count":"0","id_str":"1564963301586599939","truncated":false,"retweet_count":"0","id":"1564963301586599939","created_at":"Wed Aug 31 13:08:21 +0000 2022","favorited":false,"full_text":"Far away, yet so close.\\nBut I can see only you.\\nI'm relying on the slightest hope.\\nThe world's been colored pure white.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1564947165776166912"],"editableUntil":"2022-08-31T12:34:14.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","134"],"favorite_count":"0","id_str":"1564947165776166912","truncated":false,"retweet_count":"0","id":"1564947165776166912","created_at":"Wed Aug 31 12:04:14 +0000 2022","favorited":false,"full_text":"nobody came, nobody saw, nobody is returning and I still facing the foolishness of an endless waiting for something that won't happen.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1564289930075017222"],"editableUntil":"2022-08-29T17:02:37.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","57"],"favorite_count":"0","id_str":"1564289930075017222","truncated":false,"retweet_count":"0","id":"1564289930075017222","created_at":"Mon Aug 29 16:32:37 +0000 2022","favorited":false,"full_text":"I feel like a rudderless boat in the middle of the ocean.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1563097978981986304"],"editableUntil":"2022-08-26T10:06:13.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","48"],"favorite_count":"0","id_str":"1563097978981986304","truncated":false,"retweet_count":"0","id":"1563097978981986304","created_at":"Fri Aug 26 09:36:13 +0000 2022","favorited":false,"full_text":"I am in love with you and the government is bad.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1562739649193574400"],"editableUntil":"2022-08-25T10:22:21.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","30"],"favorite_count":"0","id_str":"1562739649193574400","truncated":false,"retweet_count":"0","id":"1562739649193574400","created_at":"Thu Aug 25 09:52:21 +0000 2022","favorited":false,"full_text":"you (used to) look like summer","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1562529852099821569"],"editableUntil":"2022-08-24T20:28:41.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","105"],"favorite_count":"0","id_str":"1562529852099821569","truncated":false,"retweet_count":"0","id":"1562529852099821569","created_at":"Wed Aug 24 19:58:41 +0000 2022","favorited":false,"full_text":"Once, I belonged and it all made sense. Today, the freedom I've won binds me with shackles of melancholy.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1562529556082216962"],"editableUntil":"2022-08-24T20:27:31.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","25"],"favorite_count":"0","id_str":"1562529556082216962","truncated":false,"retweet_count":"0","id":"1562529556082216962","created_at":"Wed Aug 24 19:57:31 +0000 2022","favorited":false,"full_text":"I've embraced the silence","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1562440852143632388"],"editableUntil":"2022-08-24T14:35:02.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","65"],"favorite_count":"0","id_str":"1562440852143632388","truncated":false,"retweet_count":"0","id":"1562440852143632388","created_at":"Wed Aug 24 14:05:02 +0000 2022","favorited":false,"full_text":"You just need someone... to rely on.\\nSomeone who will understand.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1562359539932037120"],"editableUntil":"2022-08-24T09:11:56.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","59"],"favorite_count":"0","id_str":"1562359539932037120","truncated":false,"retweet_count":"0","id":"1562359539932037120","created_at":"Wed Aug 24 08:41:56 +0000 2022","favorited":false,"full_text":"I could send everything, but I would never send you wishes.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1562359350647308289"],"editableUntil":"2022-08-24T09:11:11.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","16"],"favorite_count":"0","id_str":"1562359350647308289","truncated":false,"retweet_count":"0","id":"1562359350647308289","created_at":"Wed Aug 24 08:41:11 +0000 2022","favorited":false,"full_text":"left by daylight","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1562067620618190848"],"editableUntil":"2022-08-23T13:51:57.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1562067620618190848","truncated":false,"retweet_count":"0","id":"1562067620618190848","created_at":"Tue Aug 23 13:21:57 +0000 2022","favorited":false,"full_text":"not all functions are pure","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1561780357732732928"],"editableUntil":"2022-08-22T18:50:28.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","29"],"favorite_count":"0","id_str":"1561780357732732928","truncated":false,"retweet_count":"0","id":"1561780357732732928","created_at":"Mon Aug 22 18:20:28 +0000 2022","favorited":false,"full_text":"I've embraced the loneliness.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1561780295581540355"],"editableUntil":"2022-08-22T18:50:13.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","38"],"favorite_count":"0","id_str":"1561780295581540355","truncated":false,"retweet_count":"0","id":"1561780295581540355","created_at":"Mon Aug 22 18:20:13 +0000 2022","favorited":false,"full_text":"I will take the longest way back home.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1560935854981496838"],"editableUntil":"2022-08-20T10:54:43.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","54"],"favorite_count":"0","id_str":"1560935854981496838","truncated":false,"retweet_count":"0","id":"1560935854981496838","created_at":"Sat Aug 20 10:24:43 +0000 2022","favorited":false,"full_text":"\\"Great! Where can you find more sunsets?\\"\\n\\n- N.C./E.D.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1559648862184275968"],"editableUntil":"2022-08-16T21:40:40.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","71"],"favorite_count":"0","id_str":"1559648862184275968","truncated":false,"retweet_count":"0","id":"1559648862184275968","created_at":"Tue Aug 16 21:10:40 +0000 2022","favorited":false,"full_text":"Too late to convince anyone, too late to be aware, too late to be sure.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1559138347330818049"],"editableUntil":"2022-08-15T11:52:04.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","21"],"favorite_count":"0","id_str":"1559138347330818049","truncated":false,"retweet_count":"0","id":"1559138347330818049","created_at":"Mon Aug 15 11:22:04 +0000 2022","favorited":false,"full_text":"Yesterday should die.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1558908539804024833"],"editableUntil":"2022-08-14T20:38:53.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","69"],"favorite_count":"0","id_str":"1558908539804024833","truncated":false,"retweet_count":"0","id":"1558908539804024833","created_at":"Sun Aug 14 20:08:53 +0000 2022","favorited":false,"full_text":"my life is someone else's dream\\nwhile someone else's life is my dream","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1558906267774722049"],"editableUntil":"2022-08-14T20:29:51.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","36"],"favorite_count":"0","id_str":"1558906267774722049","truncated":false,"retweet_count":"0","id":"1558906267774722049","created_at":"Sun Aug 14 19:59:51 +0000 2022","favorited":false,"full_text":"Your tragedy is someone else's dream","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1558905107391168512"],"editableUntil":"2022-08-14T20:25:15.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","29"],"favorite_count":"0","id_str":"1558905107391168512","truncated":false,"retweet_count":"0","id":"1558905107391168512","created_at":"Sun Aug 14 19:55:15 +0000 2022","favorited":false,"full_text":"the human behind the keyboard","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1558905056774193152"],"editableUntil":"2022-08-14T20:25:03.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","27"],"favorite_count":"0","id_str":"1558905056774193152","truncated":false,"retweet_count":"0","id":"1558905056774193152","created_at":"Sun Aug 14 19:55:03 +0000 2022","favorited":false,"full_text":"the soul behind the machine","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1558762109131001858"],"editableUntil":"2022-08-14T10:57:01.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","33"],"favorite_count":"0","id_str":"1558762109131001858","truncated":false,"retweet_count":"0","id":"1558762109131001858","created_at":"Sun Aug 14 10:27:01 +0000 2022","favorited":false,"full_text":"\\"Tu és o vice-treco do sub-troço\\"","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1558385833673195522"],"editableUntil":"2022-08-13T10:01:50.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","130"],"favorite_count":"0","id_str":"1558385833673195522","truncated":false,"retweet_count":"0","id":"1558385833673195522","created_at":"Sat Aug 13 09:31:50 +0000 2022","favorited":false,"full_text":"Feelings won't change in a day...\\nFeelings won't change in a year...\\nFeelings won't change in two years...\\n\\nFeelings won't change.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1558172422372745218"],"editableUntil":"2022-08-12T19:53:49.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","50"],"favorite_count":"0","id_str":"1558172422372745218","truncated":false,"retweet_count":"0","id":"1558172422372745218","created_at":"Fri Aug 12 19:23:49 +0000 2022","favorited":false,"full_text":"from day to day, singing crows are my only company","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1556379839011094534"],"editableUntil":"2022-08-07T21:10:44.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","38"],"favorite_count":"0","id_str":"1556379839011094534","truncated":false,"retweet_count":"0","id":"1556379839011094534","created_at":"Sun Aug 07 20:40:44 +0000 2022","favorited":false,"full_text":"I would look for you if you let me to.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1556254555289141249"],"editableUntil":"2022-08-07T12:52:54.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","66"],"favorite_count":"0","id_str":"1556254555289141249","truncated":false,"retweet_count":"0","id":"1556254555289141249","created_at":"Sun Aug 07 12:22:54 +0000 2022","favorited":false,"full_text":"half of me wants to leave this world, the other half already left.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1555568703533637632"],"editableUntil":"2022-08-05T15:27:34.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","47"],"favorite_count":"0","id_str":"1555568703533637632","truncated":false,"retweet_count":"0","id":"1555568703533637632","created_at":"Fri Aug 05 14:57:34 +0000 2022","favorited":false,"full_text":"it's hard to sleep when the emptiness is around","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1555568632993914882"],"editableUntil":"2022-08-05T15:27:17.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","19"],"favorite_count":"0","id_str":"1555568632993914882","truncated":false,"retweet_count":"0","id":"1555568632993914882","created_at":"Fri Aug 05 14:57:17 +0000 2022","favorited":false,"full_text":"summer slowly fades","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1555130393333997569"],"editableUntil":"2022-08-04T10:25:53.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","39"],"favorite_count":"0","id_str":"1555130393333997569","truncated":false,"retweet_count":"0","id":"1555130393333997569","created_at":"Thu Aug 04 09:55:53 +0000 2022","favorited":false,"full_text":"I probably can't see the bigger picture","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1555110619627528193"],"editableUntil":"2022-08-04T09:07:18.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","50"],"favorite_count":"0","id_str":"1555110619627528193","truncated":false,"retweet_count":"0","id":"1555110619627528193","created_at":"Thu Aug 04 08:37:18 +0000 2022","favorited":false,"full_text":"No hay un día que no me arrepienta de lo que hice.","lang":"es"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1552997619143696386"],"editableUntil":"2022-07-29T13:11:00.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","95"],"favorite_count":"0","id_str":"1552997619143696386","truncated":false,"retweet_count":"0","id":"1552997619143696386","created_at":"Fri Jul 29 12:41:00 +0000 2022","favorited":false,"full_text":"Seek me (for comfort)\\nCall me (for solace)\\nI will be waiting\\n\\nFor the end of my... broken heart","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1552734974520037377"],"editableUntil":"2022-07-28T19:47:21.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","87"],"favorite_count":"0","id_str":"1552734974520037377","truncated":false,"retweet_count":"0","id":"1552734974520037377","created_at":"Thu Jul 28 19:17:21 +0000 2022","favorited":false,"full_text":"I wanna take out of me the useless place that once we've shared, that once you were in.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1551964629600960513"],"editableUntil":"2022-07-26T16:46:16.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","56"],"favorite_count":"0","id_str":"1551964629600960513","truncated":false,"retweet_count":"0","id":"1551964629600960513","created_at":"Tue Jul 26 16:16:16 +0000 2022","favorited":false,"full_text":"Stay\\nAnd I know know, \\nThat I shouldn't...\\nPush you away","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1551525908229619712"],"editableUntil":"2022-07-25T11:42:57.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","22"],"favorite_count":"0","id_str":"1551525908229619712","truncated":false,"retweet_count":"0","id":"1551525908229619712","created_at":"Mon Jul 25 11:12:57 +0000 2022","favorited":false,"full_text":"memory has become pain","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1551283507430916105"],"editableUntil":"2022-07-24T19:39:44.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","86"],"favorite_count":"0","id_str":"1551283507430916105","truncated":false,"retweet_count":"0","id":"1551283507430916105","created_at":"Sun Jul 24 19:09:44 +0000 2022","favorited":false,"full_text":"I drank down the streets with a taste of defeat 'till the sky turned to coral and gold","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1550761194943922176"],"editableUntil":"2022-07-23T09:04:15.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1550761194943922176","truncated":false,"retweet_count":"0","id":"1550761194943922176","created_at":"Sat Jul 23 08:34:15 +0000 2022","favorited":false,"full_text":"\\"A felicidade é feita de metal\\"","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1550031787417534466"],"editableUntil":"2022-07-21T08:45:50.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","23"],"favorite_count":"0","id_str":"1550031787417534466","truncated":false,"retweet_count":"0","id":"1550031787417534466","created_at":"Thu Jul 21 08:15:50 +0000 2022","favorited":false,"full_text":"I am staring at the sky","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1549858600985804801"],"editableUntil":"2022-07-20T21:17:40.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","24"],"favorite_count":"0","id_str":"1549858600985804801","truncated":false,"retweet_count":"0","id":"1549858600985804801","created_at":"Wed Jul 20 20:47:40 +0000 2022","favorited":false,"full_text":"silence is not sacrifice","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1549100415014289408"],"editableUntil":"2022-07-18T19:04:54.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","15"],"favorite_count":"0","id_str":"1549100415014289408","truncated":false,"retweet_count":"0","id":"1549100415014289408","created_at":"Mon Jul 18 18:34:54 +0000 2022","favorited":false,"full_text":"be free, belong","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1549052281056014337"],"editableUntil":"2022-07-18T15:53:38.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","63"],"favorite_count":"0","id_str":"1549052281056014337","truncated":false,"retweet_count":"0","id":"1549052281056014337","created_at":"Mon Jul 18 15:23:38 +0000 2022","favorited":false,"full_text":"I waited for a light on the endless tunnel and there were none.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1548457600793972736"],"editableUntil":"2022-07-17T00:30:35.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","112"],"favorite_count":"0","id_str":"1548457600793972736","truncated":false,"retweet_count":"0","id":"1548457600793972736","created_at":"Sun Jul 17 00:00:35 +0000 2022","favorited":false,"full_text":"Don't you leave me out here too long\\nWill you bring me back to your heart?\\nWill you bring me back to your heart?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1547942427524079616"],"editableUntil":"2022-07-15T14:23:28.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","36"],"favorite_count":"0","id_str":"1547942427524079616","truncated":false,"retweet_count":"0","id":"1547942427524079616","created_at":"Fri Jul 15 13:53:28 +0000 2022","favorited":false,"full_text":"We take the pills to find each other","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1547869862738817024"],"editableUntil":"2022-07-15T09:35:07.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1547869862738817024","truncated":false,"retweet_count":"0","id":"1547869862738817024","created_at":"Fri Jul 15 09:05:07 +0000 2022","favorited":false,"full_text":"I really should know better.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1547132800603652096"],"editableUntil":"2022-07-13T08:46:18.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","75"],"favorite_count":"0","id_str":"1547132800603652096","truncated":false,"retweet_count":"0","id":"1547132800603652096","created_at":"Wed Jul 13 08:16:18 +0000 2022","favorited":false,"full_text":"the same instrument I've used to try [...] I've used to control my medicine","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1544774255593807873"],"editableUntil":"2022-07-06T20:34:17.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","14"],"favorite_count":"0","id_str":"1544774255593807873","truncated":false,"retweet_count":"0","id":"1544774255593807873","created_at":"Wed Jul 06 20:04:17 +0000 2022","favorited":false,"full_text":"rhythm = pitch","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1544667866842234880"],"editableUntil":"2022-07-06T13:31:32.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","33"],"favorite_count":"0","id_str":"1544667866842234880","truncated":false,"retweet_count":"0","id":"1544667866842234880","created_at":"Wed Jul 06 13:01:32 +0000 2022","favorited":false,"full_text":"I fight the urge to say the words","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1544628327302021121"],"editableUntil":"2022-07-06T10:54:25.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","53"],"favorite_count":"0","id_str":"1544628327302021121","truncated":false,"retweet_count":"0","id":"1544628327302021121","created_at":"Wed Jul 06 10:24:25 +0000 2022","favorited":false,"full_text":"It's easier to pretend online, hard to hide in person","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1544431115943002118"],"editableUntil":"2022-07-05T21:50:46.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","103"],"favorite_count":"0","id_str":"1544431115943002118","truncated":false,"retweet_count":"0","id":"1544431115943002118","created_at":"Tue Jul 05 21:20:46 +0000 2022","favorited":false,"full_text":"Between us, there's oceans\\nThere's life in... slow motion\\nQuietly we drift away\\nQuietly we fade to grey","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1544254891543203840"],"editableUntil":"2022-07-05T10:10:31.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","87"],"favorite_count":"0","id_str":"1544254891543203840","truncated":false,"retweet_count":"0","id":"1544254891543203840","created_at":"Tue Jul 05 09:40:31 +0000 2022","favorited":false,"full_text":"our careless feet leaving trails, never minding the fragile dirt that... we all end in.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1544254660566974464"],"editableUntil":"2022-07-05T10:09:36.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","21"],"favorite_count":"0","id_str":"1544254660566974464","truncated":false,"retweet_count":"0","id":"1544254660566974464","created_at":"Tue Jul 05 09:39:36 +0000 2022","favorited":false,"full_text":"climb a little higher","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1544029424865124353"],"editableUntil":"2022-07-04T19:14:36.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","108"],"favorite_count":"0","id_str":"1544029424865124353","truncated":false,"retweet_count":"0","id":"1544029424865124353","created_at":"Mon Jul 04 18:44:36 +0000 2022","favorited":false,"full_text":"I know the reason behind my absence of words to tell you the way I feel - I was sentenced to silence by you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1544029180714688512"],"editableUntil":"2022-07-04T19:13:38.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1544029180714688512","truncated":false,"retweet_count":"0","id":"1544029180714688512","created_at":"Mon Jul 04 18:43:38 +0000 2022","favorited":false,"full_text":"From neurons to narratives","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1543913026469994496"],"editableUntil":"2022-07-04T11:32:04.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","37"],"favorite_count":"0","id_str":"1543913026469994496","truncated":false,"retweet_count":"0","id":"1543913026469994496","created_at":"Mon Jul 04 11:02:04 +0000 2022","favorited":false,"full_text":"\\"have the light starting of the week\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1543554383924920320"],"editableUntil":"2022-07-03T11:46:57.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","48"],"favorite_count":"0","id_str":"1543554383924920320","truncated":false,"retweet_count":"0","id":"1543554383924920320","created_at":"Sun Jul 03 11:16:57 +0000 2022","favorited":false,"full_text":"The absence of you sounds like a microtonal song","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1543515832701140994"],"editableUntil":"2022-07-03T09:13:46.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","21"],"favorite_count":"0","id_str":"1543515832701140994","truncated":false,"retweet_count":"0","id":"1543515832701140994","created_at":"Sun Jul 03 08:43:46 +0000 2022","favorited":false,"full_text":"listen to one another","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1543515763725795328"],"editableUntil":"2022-07-03T09:13:29.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1543515763725795328","truncated":false,"retweet_count":"0","id":"1543515763725795328","created_at":"Sun Jul 03 08:43:29 +0000 2022","favorited":false,"full_text":"I meet you at the event horizon","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1542072740890419202"],"editableUntil":"2022-06-29T09:39:26.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","38"],"favorite_count":"0","id_str":"1542072740890419202","truncated":false,"retweet_count":"0","id":"1542072740890419202","created_at":"Wed Jun 29 09:09:26 +0000 2022","favorited":false,"full_text":"I should stop writing songs about you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1537003341607313410"],"editableUntil":"2022-06-15T09:55:27.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","30"],"favorite_count":"0","id_str":"1537003341607313410","truncated":false,"retweet_count":"0","id":"1537003341607313410","created_at":"Wed Jun 15 09:25:27 +0000 2022","favorited":false,"full_text":"Because I am afraid to forget.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1537003315543822337"],"editableUntil":"2022-06-15T09:55:21.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1537003315543822337","truncated":false,"retweet_count":"0","id":"1537003315543822337","created_at":"Wed Jun 15 09:25:21 +0000 2022","favorited":false,"full_text":"I am not allowed to forget","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1536998671652364288"],"editableUntil":"2022-06-15T09:36:54.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1536998671652364288","truncated":false,"retweet_count":"0","id":"1536998671652364288","created_at":"Wed Jun 15 09:06:54 +0000 2022","favorited":false,"full_text":"I wasn't allowed to forget","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1536672922420510720"],"editableUntil":"2022-06-14T12:02:29.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","34"],"favorite_count":"0","id_str":"1536672922420510720","truncated":false,"retweet_count":"0","id":"1536672922420510720","created_at":"Tue Jun 14 11:32:29 +0000 2022","favorited":false,"full_text":"I didn't want that - but also did.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1535974849050513408"],"editableUntil":"2022-06-12T13:48:35.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","24"],"favorite_count":"0","id_str":"1535974849050513408","truncated":false,"retweet_count":"0","id":"1535974849050513408","created_at":"Sun Jun 12 13:18:35 +0000 2022","favorited":false,"full_text":"I put my hopes\\nin a pill","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1535957148483584001"],"editableUntil":"2022-06-12T12:38:15.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","21"],"favorite_count":"0","id_str":"1535957148483584001","truncated":false,"retweet_count":"0","id":"1535957148483584001","created_at":"Sun Jun 12 12:08:15 +0000 2022","favorited":false,"full_text":"caught in a landslide","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1535957128514527240"],"editableUntil":"2022-06-12T12:38:10.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","15"],"favorite_count":"0","id_str":"1535957128514527240","truncated":false,"retweet_count":"0","id":"1535957128514527240","created_at":"Sun Jun 12 12:08:10 +0000 2022","favorited":false,"full_text":"stuck on rewind","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1534848133062082560"],"editableUntil":"2022-06-09T11:11:25.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","78"],"favorite_count":"0","id_str":"1534848133062082560","truncated":false,"retweet_count":"0","id":"1534848133062082560","created_at":"Thu Jun 09 10:41:25 +0000 2022","favorited":false,"full_text":"\\"unbreakable will and strength, a broken heart and some sense of intelligence\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1534462224680509440"],"editableUntil":"2022-06-08T09:37:57.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","22"],"favorite_count":"0","id_str":"1534462224680509440","truncated":false,"retweet_count":"0","id":"1534462224680509440","created_at":"Wed Jun 08 09:07:57 +0000 2022","favorited":false,"full_text":"I miss you little sun.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1534122061152587779"],"editableUntil":"2022-06-07T11:06:16.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","37"],"favorite_count":"0","id_str":"1534122061152587779","truncated":false,"retweet_count":"0","id":"1534122061152587779","created_at":"Tue Jun 07 10:36:16 +0000 2022","favorited":false,"full_text":"Hear my name in the rain and the pain","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1532636148878782466"],"editableUntil":"2022-06-03T08:41:47.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","67"],"favorite_count":"0","id_str":"1532636148878782466","truncated":false,"retweet_count":"0","id":"1532636148878782466","created_at":"Fri Jun 03 08:11:47 +0000 2022","favorited":false,"full_text":"My mind is seeking for a past that isn't there, that didn't happen.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1532365965467430912"],"editableUntil":"2022-06-02T14:48:10.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","51"],"favorite_count":"0","id_str":"1532365965467430912","truncated":false,"retweet_count":"0","id":"1532365965467430912","created_at":"Thu Jun 02 14:18:10 +0000 2022","favorited":false,"full_text":"You abandoned me! \\n- No, you've abandoned yourself.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1530606834016559110"],"editableUntil":"2022-05-28T18:18:01.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","37"],"favorite_count":"0","id_str":"1530606834016559110","truncated":false,"retweet_count":"0","id":"1530606834016559110","created_at":"Sat May 28 17:48:01 +0000 2022","favorited":false,"full_text":"Holding rivers. I wanna have control.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1529047380569559040"],"editableUntil":"2022-05-24T11:01:18.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","34"],"favorite_count":"0","id_str":"1529047380569559040","truncated":false,"retweet_count":"0","id":"1529047380569559040","created_at":"Tue May 24 10:31:18 +0000 2022","favorited":false,"full_text":"\\"If there's a will, there's a way\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1528717856568909824"],"editableUntil":"2022-05-23T13:11:53.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","13"],"favorite_count":"0","id_str":"1528717856568909824","truncated":false,"retweet_count":"0","id":"1528717856568909824","created_at":"Mon May 23 12:41:53 +0000 2022","favorited":false,"full_text":"Tears in rain","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1528658661404463109"],"editableUntil":"2022-05-23T09:16:40.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","59"],"favorite_count":"0","id_str":"1528658661404463109","truncated":false,"retweet_count":"0","id":"1528658661404463109","created_at":"Mon May 23 08:46:40 +0000 2022","favorited":false,"full_text":"No solidified memories were made since you left this place.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1527305526186348544"],"editableUntil":"2022-05-19T15:39:48.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","76"],"favorite_count":"0","id_str":"1527305526186348544","truncated":false,"retweet_count":"0","id":"1527305526186348544","created_at":"Thu May 19 15:09:48 +0000 2022","favorited":false,"full_text":"I am still living on the same apartment that you went away from. In my mind.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1527027067715469312"],"editableUntil":"2022-05-18T21:13:18.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1527027067715469312","truncated":false,"retweet_count":"0","id":"1527027067715469312","created_at":"Wed May 18 20:43:18 +0000 2022","favorited":false,"full_text":"abaixo o paralelismo sintático.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1526858413904433152"],"editableUntil":"2022-05-18T10:03:08.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","61"],"favorite_count":"0","id_str":"1526858413904433152","truncated":false,"retweet_count":"0","id":"1526858413904433152","created_at":"Wed May 18 09:33:08 +0000 2022","favorited":false,"full_text":"Aquilo que afirmo ser real é aquilo que suplico para que seja","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1526498633788555264"],"editableUntil":"2022-05-17T10:13:29.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","43"],"favorite_count":"0","id_str":"1526498633788555264","truncated":false,"retweet_count":"0","id":"1526498633788555264","created_at":"Tue May 17 09:43:29 +0000 2022","favorited":false,"full_text":"I miss the most our endless Itacorubi walks","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1851271438159823232"],"editableUntil":"2024-10-29T15:34:40.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","16"],"favorite_count":"0","id_str":"1851271438159823232","truncated":false,"retweet_count":"0","id":"1851271438159823232","created_at":"Tue Oct 29 14:34:40 +0000 2024","favorited":false,"full_text":"Te Echo de Menos","lang":"es"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1850574447205380318"],"editableUntil":"2024-10-27T17:25:04.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1850574447205380318","truncated":false,"retweet_count":"0","id":"1850574447205380318","created_at":"Sun Oct 27 16:25:04 +0000 2024","favorited":false,"full_text":"Yes AM\\nYes, I am\\nYes, I do","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1850334279407976527"],"editableUntil":"2024-10-27T01:30:44.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","54"],"favorite_count":"0","id_str":"1850334279407976527","truncated":false,"retweet_count":"0","id":"1850334279407976527","created_at":"Sun Oct 27 00:30:44 +0000 2024","favorited":false,"full_text":"those years of endless rain, they just washed her away","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1849869575900611003"],"editableUntil":"2024-10-25T18:44:10.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","46"],"favorite_count":"0","id_str":"1849869575900611003","truncated":false,"retweet_count":"0","id":"1849869575900611003","created_at":"Fri Oct 25 17:44:10 +0000 2024","favorited":false,"full_text":"Your tired eyes are like... Diamonds far away.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1849859392352682120"],"editableUntil":"2024-10-25T18:03:42.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","33"],"favorite_count":"0","id_str":"1849859392352682120","truncated":false,"retweet_count":"0","id":"1849859392352682120","created_at":"Fri Oct 25 17:03:42 +0000 2024","favorited":false,"full_text":"I just let my pain guide the pen.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1849775684131926170"],"editableUntil":"2024-10-25T12:31:04.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","141"],"favorite_count":"0","id_str":"1849775684131926170","truncated":false,"retweet_count":"0","id":"1849775684131926170","created_at":"Fri Oct 25 11:31:04 +0000 2024","favorited":false,"full_text":"A smile that comes straight from a dream in which you say those words, those three words, the words they use so lightly, I only feel for you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1849232407104250084"],"editableUntil":"2024-10-24T00:32:17.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","41"],"favorite_count":"0","id_str":"1849232407104250084","truncated":false,"retweet_count":"0","id":"1849232407104250084","created_at":"Wed Oct 23 23:32:17 +0000 2024","favorited":false,"full_text":"What doesn't kill you makes you stranger.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1848841510349115562"],"editableUntil":"2024-10-22T22:39:00.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","46"],"favorite_count":"0","id_str":"1848841510349115562","truncated":false,"retweet_count":"0","id":"1848841510349115562","created_at":"Tue Oct 22 21:39:00 +0000 2024","favorited":false,"full_text":"Old aches from your new mistakes\\nSame mistakes","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1848088259483885580"],"editableUntil":"2024-10-20T20:45:51.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","41"],"favorite_count":"0","id_str":"1848088259483885580","truncated":false,"retweet_count":"0","id":"1848088259483885580","created_at":"Sun Oct 20 19:45:51 +0000 2024","favorited":false,"full_text":"\\"Slowly to forget... and to be forgotten\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1847213125377859708"],"editableUntil":"2024-10-18T10:48:23.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","104"],"favorite_count":"0","id_str":"1847213125377859708","truncated":false,"retweet_count":"0","id":"1847213125377859708","created_at":"Fri Oct 18 09:48:23 +0000 2024","favorited":false,"full_text":"There are so many mugs in the kitchen. Why do I keep picking the broken ones?\\n\\nThis is not about coffee.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1846686013130695015"],"editableUntil":"2024-10-16T23:53:49.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","216"],"favorite_count":"0","id_str":"1846686013130695015","truncated":false,"retweet_count":"0","id":"1846686013130695015","created_at":"Wed Oct 16 22:53:49 +0000 2024","favorited":false,"full_text":"So many beginnings without an end, so many half-written stories that should never have started—is this what life looks like as you get older? I want to erase them all. I want to make better use of my energy and time.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1846561165062627570"],"editableUntil":"2024-10-16T15:37:43.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","50"],"favorite_count":"0","id_str":"1846561165062627570","truncated":false,"retweet_count":"0","id":"1846561165062627570","created_at":"Wed Oct 16 14:37:43 +0000 2024","favorited":false,"full_text":"Eu me desinteresso ao menor sinal de desinteresse.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1846494248197046382"],"editableUntil":"2024-10-16T11:11:49.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","35"],"favorite_count":"0","id_str":"1846494248197046382","truncated":false,"retweet_count":"0","id":"1846494248197046382","created_at":"Wed Oct 16 10:11:49 +0000 2024","favorited":false,"full_text":"public static void main string args","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1846315048685191621"],"editableUntil":"2024-10-15T23:19:45.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","34"],"favorite_count":"0","id_str":"1846315048685191621","truncated":false,"retweet_count":"0","id":"1846315048685191621","created_at":"Tue Oct 15 22:19:45 +0000 2024","favorited":false,"full_text":"I'm motivated by the lack of doubt","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1846312693365637493"],"editableUntil":"2024-10-15T23:10:23.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","65"],"favorite_count":"0","id_str":"1846312693365637493","truncated":false,"retweet_count":"0","id":"1846312693365637493","created_at":"Tue Oct 15 22:10:23 +0000 2024","favorited":false,"full_text":"\\"Alone is just a journey, now adventures, they must to be shared\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1845580020061753665"],"editableUntil":"2024-10-13T22:39:00.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","17"],"favorite_count":"0","id_str":"1845580020061753665","truncated":false,"retweet_count":"0","id":"1845580020061753665","created_at":"Sun Oct 13 21:39:00 +0000 2024","favorited":false,"full_text":"I am but a mirror","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1845082717001560459"],"editableUntil":"2024-10-12T13:42:54.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","46"],"favorite_count":"0","id_str":"1845082717001560459","truncated":false,"retweet_count":"0","id":"1845082717001560459","created_at":"Sat Oct 12 12:42:54 +0000 2024","favorited":false,"full_text":"\\"But we do exist\\"\\n\\nSays the lady on the train.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1844422506524049457"],"editableUntil":"2024-10-10T17:59:27.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","216"],"favorite_count":"0","id_str":"1844422506524049457","truncated":false,"retweet_count":"0","id":"1844422506524049457","created_at":"Thu Oct 10 16:59:27 +0000 2024","favorited":false,"full_text":"O que te faz duvidar de uma alma tão cansada e transparente quanto a que te fala?\\nSeria o teu medo do desconhecido ou apenas as tuas guardas trancadas com ferrolhos enferrujados, causados pelos dessabores de outrora?","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1843737075000193196"],"editableUntil":"2024-10-08T20:35:48.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","24"],"favorite_count":"0","id_str":"1843737075000193196","truncated":false,"retweet_count":"0","id":"1843737075000193196","created_at":"Tue Oct 08 19:35:48 +0000 2024","favorited":false,"full_text":"Can I kiss your domaine?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1843297058633265608"],"editableUntil":"2024-10-07T15:27:20.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"user_mentions":[],"urls":[],"symbols":[],"media":[{"expanded_url":"https://x.com/emersondemetrio/status/1843297058633265608/photo/1","indices":["50","73"],"url":"https://t.co/W6O273TpLw","media_url":"http://pbs.twimg.com/media/GZS02H8W4AAOOY8.jpg","id_str":"1843296989439516672","id":"1843296989439516672","media_url_https":"https://pbs.twimg.com/media/GZS02H8W4AAOOY8.jpg","sizes":{"small":{"w":"680","h":"519","resize":"fit"},"large":{"w":"1046","h":"798","resize":"fit"},"thumb":{"w":"150","h":"150","resize":"crop"},"medium":{"w":"1046","h":"798","resize":"fit"}},"type":"photo","display_url":"pic.x.com/W6O273TpLw"}],"hashtags":[]},"display_text_range":["0","73"],"favorite_count":"0","id_str":"1843297058633265608","truncated":false,"retweet_count":"0","id":"1843297058633265608","possibly_sensitive":false,"created_at":"Mon Oct 07 14:27:20 +0000 2024","favorited":false,"full_text":"I am so in love with life today, weird feeling =p https://t.co/W6O273TpLw","lang":"en","extended_entities":{"media":[{"expanded_url":"https://x.com/emersondemetrio/status/1843297058633265608/photo/1","indices":["50","73"],"url":"https://t.co/W6O273TpLw","media_url":"http://pbs.twimg.com/media/GZS02H8W4AAOOY8.jpg","id_str":"1843296989439516672","id":"1843296989439516672","media_url_https":"https://pbs.twimg.com/media/GZS02H8W4AAOOY8.jpg","sizes":{"small":{"w":"680","h":"519","resize":"fit"},"large":{"w":"1046","h":"798","resize":"fit"},"thumb":{"w":"150","h":"150","resize":"crop"},"medium":{"w":"1046","h":"798","resize":"fit"}},"type":"photo","display_url":"pic.x.com/W6O273TpLw"}]}}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1526239261384708096"],"editableUntil":"2022-05-16T17:02:50.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","21"],"favorite_count":"0","id_str":"1526239261384708096","truncated":false,"retweet_count":"0","id":"1526239261384708096","created_at":"Mon May 16 16:32:50 +0000 2022","favorited":false,"full_text":"lift me up, let me go","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1525834651964694528"],"editableUntil":"2022-05-15T14:15:04.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1525834651964694528","truncated":false,"retweet_count":"0","id":"1525834651964694528","created_at":"Sun May 15 13:45:04 +0000 2022","favorited":false,"full_text":"I love you in every universe","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1522501466149343233"],"editableUntil":"2022-05-06T09:30:10.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","45"],"favorite_count":"0","id_str":"1522501466149343233","truncated":false,"retweet_count":"0","id":"1522501466149343233","created_at":"Fri May 06 09:00:10 +0000 2022","favorited":false,"full_text":"I lost the battle against the coffee machine.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1521799441287729152"],"editableUntil":"2022-05-04T11:00:35.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","45"],"favorite_count":"0","id_str":"1521799441287729152","truncated":false,"retweet_count":"0","id":"1521799441287729152","created_at":"Wed May 04 10:30:35 +0000 2022","favorited":false,"full_text":"I need your grace\\nTo remind me\\nTo find my own","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1521798947819425798"],"editableUntil":"2022-05-04T10:58:37.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","46"],"favorite_count":"0","id_str":"1521798947819425798","truncated":false,"retweet_count":"0","id":"1521798947819425798","created_at":"Wed May 04 10:28:37 +0000 2022","favorited":false,"full_text":"I don't know where, confused about how as well","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1521058262363381760"],"editableUntil":"2022-05-02T09:55:24.300Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","56"],"favorite_count":"0","id_str":"1521058262363381760","truncated":false,"retweet_count":"0","id":"1521058262363381760","created_at":"Mon May 02 09:25:24 +0000 2022","favorited":false,"full_text":"\\"Viva sua vida como se você não soubesse que está no ar\\"","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1518940724791857152"],"editableUntil":"2022-04-26T13:41:04.001Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","117"],"favorite_count":"0","id_str":"1518940724791857152","truncated":false,"retweet_count":"0","id":"1518940724791857152","created_at":"Tue Apr 26 13:11:04 +0000 2022","favorited":false,"full_text":"You're further than the ocean goes, my love\\nYou're further than the ocean goes,\\nAnd my love's not enough\\nTo reach you","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1518559753458393088"],"editableUntil":"2022-04-25T12:27:13.357Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","45"],"favorite_count":"0","id_str":"1518559753458393088","truncated":false,"retweet_count":"0","id":"1518559753458393088","created_at":"Mon Apr 25 11:57:13 +0000 2022","favorited":false,"full_text":"I am looking for you where I know you are not","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1518516536415301633"],"editableUntil":"2022-04-25T09:35:29.611Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1518516536415301633","truncated":false,"retweet_count":"0","id":"1518516536415301633","created_at":"Mon Apr 25 09:05:29 +0000 2022","favorited":false,"full_text":"Pra onde vão os bytes perdidos?","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1517147416230719492"],"editableUntil":"2022-04-21T14:55:05.922Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","46"],"favorite_count":"0","id_str":"1517147416230719492","truncated":false,"retweet_count":"0","id":"1517147416230719492","created_at":"Thu Apr 21 14:25:05 +0000 2022","favorited":false,"full_text":"I love the way those notes will dancing around","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1516339543477260290"],"editableUntil":"2022-04-19T09:24:54.048Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","156"],"favorite_count":"0","id_str":"1516339543477260290","truncated":false,"retweet_count":"0","id":"1516339543477260290","created_at":"Tue Apr 19 08:54:54 +0000 2022","favorited":false,"full_text":"Standing where the ashes are\\nMemories won't fill my soul\\nHeading to the lonely road\\nWhere I've become \\nunwelcome, \\nunwanted, \\nunliked \\nand unlinked from you","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1512391946144301059"],"editableUntil":"2022-04-08T12:28:33.501Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","88"],"favorite_count":"0","id_str":"1512391946144301059","truncated":false,"retweet_count":"0","id":"1512391946144301059","created_at":"Fri Apr 08 11:28:33 +0000 2022","favorited":false,"full_text":"Here we are again\\nWill someone find a cure cause\\nYou know me and you know I am not well.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1512389821221990403"],"editableUntil":"2022-04-08T12:20:06.880Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","86"],"favorite_count":"0","id_str":"1512389821221990403","truncated":false,"retweet_count":"0","id":"1512389821221990403","created_at":"Fri Apr 08 11:20:06 +0000 2022","favorited":false,"full_text":"disgusting moment in which I realize I can't remember the sound of your voice anymore.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1511690625619574791"],"editableUntil":"2022-04-06T14:01:45.658Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","32"],"favorite_count":"0","id_str":"1511690625619574791","truncated":false,"retweet_count":"0","id":"1511690625619574791","created_at":"Wed Apr 06 13:01:45 +0000 2022","favorited":false,"full_text":"do you know where your heart is?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1511640025846398981"],"editableUntil":"2022-04-06T10:40:41.732Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","34"],"favorite_count":"0","id_str":"1511640025846398981","truncated":false,"retweet_count":"0","id":"1511640025846398981","created_at":"Wed Apr 06 09:40:41 +0000 2022","favorited":false,"full_text":"I gave my heart now I want it back","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1508033240996659200"],"editableUntil":"2022-03-27T11:48:37.213Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1508033240996659200","truncated":false,"retweet_count":"0","id":"1508033240996659200","created_at":"Sun Mar 27 10:48:37 +0000 2022","favorited":false,"full_text":"you should remain confused","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1508001360968626176"],"editableUntil":"2022-03-27T09:41:56.422Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","16"],"favorite_count":"0","id_str":"1508001360968626176","truncated":false,"retweet_count":"0","id":"1508001360968626176","created_at":"Sun Mar 27 08:41:56 +0000 2022","favorited":false,"full_text":"only now remains","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1506927624630812672"],"editableUntil":"2022-03-24T10:35:17.730Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","15"],"favorite_count":"0","id_str":"1506927624630812672","truncated":false,"retweet_count":"0","id":"1506927624630812672","created_at":"Thu Mar 24 09:35:17 +0000 2022","favorited":false,"full_text":"stuck on rewind","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1506926874466963456"],"editableUntil":"2022-03-24T10:32:18.877Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1506926874466963456","truncated":false,"retweet_count":"0","id":"1506926874466963456","created_at":"Thu Mar 24 09:32:18 +0000 2022","favorited":false,"full_text":"I am medicated, how are you?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1506357488588894229"],"editableUntil":"2022-03-22T20:49:46.705Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","23"],"favorite_count":"0","id_str":"1506357488588894229","truncated":false,"retweet_count":"0","id":"1506357488588894229","created_at":"Tue Mar 22 19:49:46 +0000 2022","favorited":false,"full_text":"no one came, no one saw","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1506251373876477953"],"editableUntil":"2022-03-22T13:48:06.986Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","29"],"favorite_count":"0","id_str":"1506251373876477953","truncated":false,"retweet_count":"0","id":"1506251373876477953","created_at":"Tue Mar 22 12:48:06 +0000 2022","favorited":false,"full_text":"21/mar/2022 4 hours to forget","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1504538786851602437"],"editableUntil":"2022-03-17T20:22:54.421Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","22"],"favorite_count":"0","id_str":"1504538786851602437","truncated":false,"retweet_count":"0","id":"1504538786851602437","created_at":"Thu Mar 17 19:22:54 +0000 2022","favorited":false,"full_text":"gleaming endless ocean","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1504399644075438086"],"editableUntil":"2022-03-17T11:10:00.198Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","91"],"favorite_count":"0","id_str":"1504399644075438086","truncated":false,"retweet_count":"0","id":"1504399644075438086","created_at":"Thu Mar 17 10:10:00 +0000 2022","favorited":false,"full_text":"Not sad all the time, just sad when I remember. The thing is... I have a weird good memory.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1504381952111038466"],"editableUntil":"2022-03-17T09:59:42.105Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1504381952111038466","truncated":false,"retweet_count":"0","id":"1504381952111038466","created_at":"Thu Mar 17 08:59:42 +0000 2022","favorited":false,"full_text":"I am more than just a pass time","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1503756147060359176"],"editableUntil":"2022-03-15T16:32:58.554Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","54"],"favorite_count":"0","id_str":"1503756147060359176","truncated":false,"retweet_count":"0","id":"1503756147060359176","created_at":"Tue Mar 15 15:32:58 +0000 2022","favorited":false,"full_text":"Here I am waiting for a while... a never ending while.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1503749716273684482"],"editableUntil":"2022-03-15T16:07:25.335Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","13"],"favorite_count":"0","id_str":"1503749716273684482","truncated":false,"retweet_count":"0","id":"1503749716273684482","created_at":"Tue Mar 15 15:07:25 +0000 2022","favorited":false,"full_text":"disenchanted.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1503681862627119105"],"editableUntil":"2022-03-15T11:37:47.765Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","37"],"favorite_count":"0","id_str":"1503681862627119105","truncated":false,"retweet_count":"0","id":"1503681862627119105","created_at":"Tue Mar 15 10:37:47 +0000 2022","favorited":false,"full_text":"all hopes are tied to an eyelash wish","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1501470988470571008"],"editableUntil":"2022-03-09T09:12:34.290Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","52"],"favorite_count":"0","id_str":"1501470988470571008","truncated":false,"retweet_count":"0","id":"1501470988470571008","created_at":"Wed Mar 09 08:12:34 +0000 2022","favorited":false,"full_text":"Feel the guilt of a sinner\\nFeel the cold of a winter","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1501205033186209797"],"editableUntil":"2022-03-08T15:35:45.609Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1501205033186209797","truncated":false,"retweet_count":"0","id":"1501205033186209797","created_at":"Tue Mar 08 14:35:45 +0000 2022","favorited":false,"full_text":"Well. This shall pass too.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1498362661158936576"],"editableUntil":"2022-02-28T19:21:11.309Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","39"],"favorite_count":"0","id_str":"1498362661158936576","truncated":false,"retweet_count":"0","id":"1498362661158936576","created_at":"Mon Feb 28 18:21:11 +0000 2022","favorited":false,"full_text":"Maybe at the time it felt like dreaming","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1496190552471183360"],"editableUntil":"2022-02-22T19:30:00.242Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1496190552471183360","truncated":false,"retweet_count":"0","id":"1496190552471183360","created_at":"Tue Feb 22 18:30:00 +0000 2022","favorited":false,"full_text":"I woke up and it was over.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1496118498946334724"],"editableUntil":"2022-02-22T14:43:41.343Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","41"],"favorite_count":"0","id_str":"1496118498946334724","truncated":false,"retweet_count":"0","id":"1496118498946334724","created_at":"Tue Feb 22 13:43:41 +0000 2022","favorited":false,"full_text":"you can paint these wings and make me fly","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1495839850473435141"],"editableUntil":"2022-02-21T20:16:26.370Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","30"],"favorite_count":"0","id_str":"1495839850473435141","truncated":false,"retweet_count":"0","id":"1495839850473435141","created_at":"Mon Feb 21 19:16:26 +0000 2022","favorited":false,"full_text":"in the memory you will find me","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1495770184010899469"],"editableUntil":"2022-02-21T15:39:36.591Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","73"],"favorite_count":"0","id_str":"1495770184010899469","truncated":false,"retweet_count":"0","id":"1495770184010899469","created_at":"Mon Feb 21 14:39:36 +0000 2022","favorited":false,"full_text":"how does it feel when you're living in a dream which has expiration date?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1494653048773296130"],"editableUntil":"2022-02-18T13:40:30.795Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","33"],"favorite_count":"0","id_str":"1494653048773296130","truncated":false,"retweet_count":"0","id":"1494653048773296130","created_at":"Fri Feb 18 12:40:30 +0000 2022","favorited":false,"full_text":"left in the wake (of the mistake)","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1494652997498023940"],"editableUntil":"2022-02-18T13:40:18.570Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","35"],"favorite_count":"0","id_str":"1494652997498023940","truncated":false,"retweet_count":"0","id":"1494652997498023940","created_at":"Fri Feb 18 12:40:18 +0000 2022","favorited":false,"full_text":"your misery is someone else's dream","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1491813780707237899"],"editableUntil":"2022-02-10T17:38:16.537Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","23"],"favorite_count":"0","id_str":"1491813780707237899","truncated":false,"retweet_count":"0","id":"1491813780707237899","created_at":"Thu Feb 10 16:38:16 +0000 2022","favorited":false,"full_text":"everlasting nothingness","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1487864689677766665"],"editableUntil":"2022-01-30T20:05:59.865Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","67"],"favorite_count":"0","id_str":"1487864689677766665","truncated":false,"retweet_count":"0","id":"1487864689677766665","created_at":"Sun Jan 30 19:05:59 +0000 2022","favorited":false,"full_text":"Olha o que a gente já fez\\nPode ser estupidez\\nMas eu faria\\nOutra vez","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1485688397914124289"],"editableUntil":"2022-01-24T19:58:11.475Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","48"],"favorite_count":"0","id_str":"1485688397914124289","truncated":false,"retweet_count":"0","id":"1485688397914124289","created_at":"Mon Jan 24 18:58:11 +0000 2022","favorited":false,"full_text":"If i could make it right, I'd make it right now.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1481331127352758275"],"editableUntil":"2022-01-12T19:23:57.219Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","166"],"favorite_count":"0","id_str":"1481331127352758275","truncated":false,"retweet_count":"0","id":"1481331127352758275","created_at":"Wed Jan 12 18:23:57 +0000 2022","favorited":false,"full_text":"Fragments of our fragile lives are floating around our foolish feelings, feeding our fading hopes with fake fantasies, facing flooded souls falling down to the floor.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1480880878091972615"],"editableUntil":"2022-01-11T13:34:49.430Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","32"],"favorite_count":"0","id_str":"1480880878091972615","truncated":false,"retweet_count":"0","id":"1480880878091972615","created_at":"Tue Jan 11 12:34:49 +0000 2022","favorited":false,"full_text":"I cannot... find the other half.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1480879609625387009"],"editableUntil":"2022-01-11T13:29:47.004Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","65"],"favorite_count":"0","id_str":"1480879609625387009","truncated":false,"retweet_count":"0","id":"1480879609625387009","created_at":"Tue Jan 11 12:29:47 +0000 2022","favorited":false,"full_text":"Night falls beneath candle light\\nNight falls beneath winter skies","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1480878719212437504"],"editableUntil":"2022-01-11T13:26:14.713Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","90"],"favorite_count":"0","id_str":"1480878719212437504","truncated":false,"retweet_count":"0","id":"1480878719212437504","created_at":"Tue Jan 11 12:26:14 +0000 2022","favorited":false,"full_text":"A quiet room,\\nA crowded room\\nCloudy senses, stale light below, beneath\\nA clown in the rain","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1480875983507009538"],"editableUntil":"2022-01-11T13:15:22.470Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","38"],"favorite_count":"0","id_str":"1480875983507009538","truncated":false,"retweet_count":"0","id":"1480875983507009538","created_at":"Tue Jan 11 12:15:22 +0000 2022","favorited":false,"full_text":"I don't belong in the gaussian valley.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1478042799874396169"],"editableUntil":"2022-01-03T17:37:18.854Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","25"],"favorite_count":"0","id_str":"1478042799874396169","truncated":false,"retweet_count":"0","id":"1478042799874396169","created_at":"Mon Jan 03 16:37:18 +0000 2022","favorited":false,"full_text":"how quiet it is all alone","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1475921095001792513"],"editableUntil":"2021-12-28T21:06:24.993Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","140"],"favorite_count":"0","id_str":"1475921095001792513","truncated":false,"retweet_count":"0","id":"1475921095001792513","created_at":"Tue Dec 28 20:06:24 +0000 2021","favorited":false,"full_text":"It's true the way I feel\\nWas promised by your face\\nThe sound of your voice\\nPainted on my memories\\nEven if you're not with me\\n\\nI am with you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1473658767937990661"],"editableUntil":"2021-12-22T15:16:44.189Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","92"],"favorite_count":"0","id_str":"1473658767937990661","truncated":false,"retweet_count":"0","id":"1473658767937990661","created_at":"Wed Dec 22 14:16:44 +0000 2021","favorited":false,"full_text":"what I see are empty calendars, empty appointments, slots of emptiness filling my free time.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1473258893409193984"],"editableUntil":"2021-12-21T12:47:46.672Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","27"],"favorite_count":"0","id_str":"1473258893409193984","truncated":false,"retweet_count":"0","id":"1473258893409193984","created_at":"Tue Dec 21 11:47:46 +0000 2021","favorited":false,"full_text":"se tem placa, tem história.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1473047252625149954"],"editableUntil":"2021-12-20T22:46:47.577Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","17"],"favorite_count":"0","id_str":"1473047252625149954","truncated":false,"retweet_count":"0","id":"1473047252625149954","created_at":"Mon Dec 20 21:46:47 +0000 2021","favorited":false,"full_text":"amar es compartir","lang":"es"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1472994696695889924"],"editableUntil":"2021-12-20T19:17:57.267Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","38"],"favorite_count":"0","id_str":"1472994696695889924","truncated":false,"retweet_count":"0","id":"1472994696695889924","created_at":"Mon Dec 20 18:17:57 +0000 2021","favorited":false,"full_text":"O povo é o povo mais sua circunstância","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1471491929028235273"],"editableUntil":"2021-12-16T15:46:29.535Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","27"],"favorite_count":"0","id_str":"1471491929028235273","truncated":false,"retweet_count":"0","id":"1471491929028235273","created_at":"Thu Dec 16 14:46:29 +0000 2021","favorited":false,"full_text":"let the vibes slide over me","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1471489899966734338"],"editableUntil":"2021-12-16T15:38:25.769Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","46"],"favorite_count":"0","id_str":"1471489899966734338","truncated":false,"retweet_count":"0","id":"1471489899966734338","created_at":"Thu Dec 16 14:38:25 +0000 2021","favorited":false,"full_text":"You should remain confused\\nTo keep them amused","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1466738162127020032"],"editableUntil":"2021-12-03T12:56:43.185Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","56"],"favorite_count":"0","id_str":"1466738162127020032","truncated":false,"retweet_count":"0","id":"1466738162127020032","created_at":"Fri Dec 03 11:56:43 +0000 2021","favorited":false,"full_text":"You make me feel something\\nSo help me feel nothing again","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1466066801889099779"],"editableUntil":"2021-12-01T16:28:58.431Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","13"],"favorite_count":"0","id_str":"1466066801889099779","truncated":false,"retweet_count":"0","id":"1466066801889099779","created_at":"Wed Dec 01 15:28:58 +0000 2021","favorited":false,"full_text":"stay creative","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1466066747472154628"],"editableUntil":"2021-12-01T16:28:45.457Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","11"],"favorite_count":"0","id_str":"1466066747472154628","truncated":false,"retweet_count":"0","id":"1466066747472154628","created_at":"Wed Dec 01 15:28:45 +0000 2021","favorited":false,"full_text":"temet nosce","lang":"pl"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1465670860082192387"],"editableUntil":"2021-11-30T14:15:38.548Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","45"],"favorite_count":"0","id_str":"1465670860082192387","truncated":false,"retweet_count":"0","id":"1465670860082192387","created_at":"Tue Nov 30 13:15:38 +0000 2021","favorited":false,"full_text":"I'll (never) take my horse away from the rain","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1464746598303477774"],"editableUntil":"2021-11-28T01:02:57.368Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","24"],"favorite_count":"0","id_str":"1464746598303477774","truncated":false,"retweet_count":"0","id":"1464746598303477774","created_at":"Sun Nov 28 00:02:57 +0000 2021","favorited":false,"full_text":"practice what you preach","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1464571231689187330"],"editableUntil":"2021-11-27T13:26:06.709Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","66"],"favorite_count":"0","id_str":"1464571231689187330","truncated":false,"retweet_count":"0","id":"1464571231689187330","created_at":"Sat Nov 27 12:26:06 +0000 2021","favorited":false,"full_text":"Tudo já existe, só não foi misturado de determinada forma (ainda).","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1460051414164586496"],"editableUntil":"2021-11-15T02:05:58.237Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","44"],"favorite_count":"0","id_str":"1460051414164586496","truncated":false,"retweet_count":"0","id":"1460051414164586496","created_at":"Mon Nov 15 01:05:58 +0000 2021","favorited":false,"full_text":"Either no one told me, or no one knows.\\n\\nNEO","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1459910376796176389"],"editableUntil":"2021-11-14T16:45:32.308Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","87"],"favorite_count":"0","id_str":"1459910376796176389","truncated":false,"retweet_count":"0","id":"1459910376796176389","created_at":"Sun Nov 14 15:45:32 +0000 2021","favorited":false,"full_text":"Even though you're so close to me...\\nYou're still so distant and I can't bring you back","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1459564113625903104"],"editableUntil":"2021-11-13T17:49:36.735Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","57"],"favorite_count":"0","id_str":"1459564113625903104","truncated":false,"retweet_count":"0","id":"1459564113625903104","created_at":"Sat Nov 13 16:49:36 +0000 2021","favorited":false,"full_text":"Nenhum barulho irrita tanto quanto o eco do teu silêncio.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1459564041555357703"],"editableUntil":"2021-11-13T17:49:19.552Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","52"],"favorite_count":"0","id_str":"1459564041555357703","truncated":false,"retweet_count":"0","id":"1459564041555357703","created_at":"Sat Nov 13 16:49:19 +0000 2021","favorited":false,"full_text":"But hang around and I'll try and land this thing.\\n=/","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1459309952523190272"],"editableUntil":"2021-11-13T00:59:40.006Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","53"],"favorite_count":"0","id_str":"1459309952523190272","truncated":false,"retweet_count":"0","id":"1459309952523190272","created_at":"Fri Nov 12 23:59:40 +0000 2021","favorited":false,"full_text":"Com tempo suficiente, você constrói até uma pirâmide.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1459152433075085312"],"editableUntil":"2021-11-12T14:33:44.443Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","47"],"favorite_count":"0","id_str":"1459152433075085312","truncated":false,"retweet_count":"0","id":"1459152433075085312","created_at":"Fri Nov 12 13:33:44 +0000 2021","favorited":false,"full_text":"\\"Esvazie sua xícara para que eu possa enchê-la\\"","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1457834930973589518"],"editableUntil":"2021-11-08T23:18:27.464Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","39"],"favorite_count":"0","id_str":"1457834930973589518","truncated":false,"retweet_count":"0","id":"1457834930973589518","created_at":"Mon Nov 08 22:18:27 +0000 2021","favorited":false,"full_text":"Ma a me l'amore mi rende prevedibile 🤌🏽","lang":"it"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1455158831307182084"],"editableUntil":"2021-11-01T14:04:35.584Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","68"],"favorite_count":"0","id_str":"1455158831307182084","truncated":false,"retweet_count":"0","id":"1455158831307182084","created_at":"Mon Nov 01 13:04:35 +0000 2021","favorited":false,"full_text":"I hold chances in a row\\nI wanna have control\\nWitch chances in a row.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1452998964832256008"],"editableUntil":"2021-10-26T15:02:03.288Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","34"],"favorite_count":"0","id_str":"1452998964832256008","truncated":false,"retweet_count":"0","id":"1452998964832256008","created_at":"Tue Oct 26 14:02:03 +0000 2021","favorited":false,"full_text":"There's always tomorrow\\n- dinosaur","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1452453042352279561"],"editableUntil":"2021-10-25T02:52:45.226Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","16"],"favorite_count":"0","id_str":"1452453042352279561","truncated":false,"retweet_count":"0","id":"1452453042352279561","created_at":"Mon Oct 25 01:52:45 +0000 2021","favorited":false,"full_text":"Senza te partirò","lang":"it"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1445773432621174805"],"editableUntil":"2021-10-06T16:30:22.165Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1445773432621174805","truncated":false,"retweet_count":"0","id":"1445773432621174805","created_at":"Wed Oct 06 15:30:22 +0000 2021","favorited":false,"full_text":"laughing again to numb the pain","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1440017227982462981"],"editableUntil":"2021-09-20T19:17:16.034Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","62"],"favorite_count":"0","id_str":"1440017227982462981","truncated":false,"retweet_count":"0","id":"1440017227982462981","created_at":"Mon Sep 20 18:17:16 +0000 2021","favorited":false,"full_text":"She stole the keys to my heart\\nAnd then she locked herself out","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1423076078873104394"],"editableUntil":"2021-08-05T01:19:11.335Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","66"],"favorite_count":"0","id_str":"1423076078873104394","truncated":false,"retweet_count":"0","id":"1423076078873104394","created_at":"Thu Aug 05 00:19:11 +0000 2021","favorited":false,"full_text":"\\"[...] Or You Live Long Enough To See Yourself Become The Villain\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1417606970610233349"],"editableUntil":"2021-07-20T23:06:54.314Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","116"],"favorite_count":"0","id_str":"1417606970610233349","truncated":false,"retweet_count":"0","id":"1417606970610233349","created_at":"Tue Jul 20 22:06:54 +0000 2021","favorited":false,"full_text":"You blink and a year has passed.\\nYou blink twice and your whole life has changed.\\nYou blink again and you are alone.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1414721782490320897"],"editableUntil":"2021-07-13T00:02:11.862Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1414721782490320897","truncated":false,"retweet_count":"0","id":"1414721782490320897","created_at":"Mon Jul 12 23:02:11 +0000 2021","favorited":false,"full_text":"Those days seemed to be warmer.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1404187571370987525"],"editableUntil":"2021-06-13T22:23:00.215Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","90"],"favorite_count":"0","id_str":"1404187571370987525","truncated":false,"retweet_count":"0","id":"1404187571370987525","created_at":"Sun Jun 13 21:23:00 +0000 2021","favorited":false,"full_text":"How hard it is to admit that everything good you can remember is part of a dream/daydream.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1401347037162000395"],"editableUntil":"2021-06-06T02:15:44.085Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","133"],"favorite_count":"0","id_str":"1401347037162000395","truncated":false,"retweet_count":"0","id":"1401347037162000395","created_at":"Sun Jun 06 01:15:44 +0000 2021","favorited":false,"full_text":"Remembering our phone calls\\nYour shadow in time, by chance or design\\nFall into the fear you avoid\\nA place you thought you'd destroyed","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1397289815041875968"],"editableUntil":"2021-05-25T21:33:46.952Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","53"],"favorite_count":"0","id_str":"1397289815041875968","truncated":false,"retweet_count":"0","id":"1397289815041875968","created_at":"Tue May 25 20:33:46 +0000 2021","favorited":false,"full_text":"Como eu posso dar a outro aquilo que não me pertence?","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1395040287744012290"],"editableUntil":"2021-05-19T16:34:57.850Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","107"],"favorite_count":"0","id_str":"1395040287744012290","truncated":false,"retweet_count":"0","id":"1395040287744012290","created_at":"Wed May 19 15:34:57 +0000 2021","favorited":false,"full_text":"Sometimes, I am afraid of moving on because the past is a safe place but the future is full of uncertainty.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1392902652560818177"],"editableUntil":"2021-05-13T19:00:45.907Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","59"],"favorite_count":"0","id_str":"1392902652560818177","truncated":false,"retweet_count":"0","id":"1392902652560818177","created_at":"Thu May 13 18:00:45 +0000 2021","favorited":false,"full_text":"[...] lost along that dark and lonely road with no way home","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1391831093746278408"],"editableUntil":"2021-05-10T20:02:46.377Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","167"],"favorite_count":"0","id_str":"1391831093746278408","truncated":false,"retweet_count":"0","id":"1391831093746278408","created_at":"Mon May 10 19:02:46 +0000 2021","favorited":false,"full_text":"Springtime, one time.\\nSpringtime, I want you.\\nIn the springtime, I want you\\nSpringtime, I want to (know)\\nIn the springtime, I want you.\\nSpringtime, I want to love you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1390475295086596096"],"editableUntil":"2021-05-07T02:15:18.787Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","77"],"favorite_count":"0","id_str":"1390475295086596096","truncated":false,"retweet_count":"0","id":"1390475295086596096","created_at":"Fri May 07 01:15:18 +0000 2021","favorited":false,"full_text":"Eu fecho os olhos e penso em qualquer outra coisa, mas minha mente traz você.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1385977560132116482"],"editableUntil":"2021-04-24T16:22:55.210Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","23"],"favorite_count":"0","id_str":"1385977560132116482","truncated":false,"retweet_count":"0","id":"1385977560132116482","created_at":"Sat Apr 24 15:22:55 +0000 2021","favorited":false,"full_text":"memories in slow motion","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1384981580121354252"],"editableUntil":"2021-04-21T22:25:15.071Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1384981580121354252","truncated":false,"retweet_count":"0","id":"1384981580121354252","created_at":"Wed Apr 21 21:25:15 +0000 2021","favorited":false,"full_text":"Um dia andamos juntos por aqui.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1383175253816410112"],"editableUntil":"2021-04-16T22:47:33.320Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1383175253816410112","truncated":false,"retweet_count":"0","id":"1383175253816410112","created_at":"Fri Apr 16 21:47:33 +0000 2021","favorited":false,"full_text":"If you only knew the way I feel","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1383175188204949506"],"editableUntil":"2021-04-16T22:47:17.677Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","50"],"favorite_count":"0","id_str":"1383175188204949506","truncated":false,"retweet_count":"0","id":"1383175188204949506","created_at":"Fri Apr 16 21:47:17 +0000 2021","favorited":false,"full_text":"I'd really love to tell you, but I don't know how.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1381380533830180864"],"editableUntil":"2021-04-11T23:55:58.731Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","56"],"favorite_count":"0","id_str":"1381380533830180864","truncated":false,"retweet_count":"0","id":"1381380533830180864","created_at":"Sun Apr 11 22:55:58 +0000 2021","favorited":false,"full_text":"One year ago I read your lovely words for the last time.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1379915888015650820"],"editableUntil":"2021-04-07T22:55:59.957Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","34"],"favorite_count":"0","id_str":"1379915888015650820","truncated":false,"retweet_count":"0","id":"1379915888015650820","created_at":"Wed Apr 07 21:55:59 +0000 2021","favorited":false,"full_text":"I love you and you not even tchum.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1379610844024209409"],"editableUntil":"2021-04-07T02:43:51.802Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","176"],"favorite_count":"0","id_str":"1379610844024209409","truncated":false,"retweet_count":"0","id":"1379610844024209409","created_at":"Wed Apr 07 01:43:51 +0000 2021","favorited":false,"full_text":"You can paint these wings and make me fly.\\nCrush coming over like the R.E.M kind.\\nOrange in the colour like blackpool on the sunrise.\\nYou can paint these wings and make me fly.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1379424141007282178"],"editableUntil":"2021-04-06T14:21:58.334Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","190"],"favorite_count":"0","id_str":"1379424141007282178","truncated":false,"retweet_count":"0","id":"1379424141007282178","created_at":"Tue Apr 06 13:21:58 +0000 2021","favorited":false,"full_text":"Empty rooms don't comfort me.\\n\\nI rely on company to fill spaces in between\\nplaces where we used to meet. \\n\\nI realize, vacant beds won't ease my mind\\nI tried.\\n\\nVacant beds won't ease my mind.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1378858401631985664"],"editableUntil":"2021-04-05T00:53:55.556Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","17"],"favorite_count":"0","id_str":"1378858401631985664","truncated":false,"retweet_count":"0","id":"1378858401631985664","created_at":"Sun Apr 04 23:53:55 +0000 2021","favorited":false,"full_text":"I wanna be yours.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1377387780750286850"],"editableUntil":"2021-03-31T23:30:12.215Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","30"],"favorite_count":"0","id_str":"1377387780750286850","truncated":false,"retweet_count":"0","id":"1377387780750286850","created_at":"Wed Mar 31 22:30:12 +0000 2021","favorited":false,"full_text":"That one that I no longer own.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1377387654094856192"],"editableUntil":"2021-03-31T23:29:42.018Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","25"],"favorite_count":"0","id_str":"1377387654094856192","truncated":false,"retweet_count":"0","id":"1377387654094856192","created_at":"Wed Mar 31 22:29:42 +0000 2021","favorited":false,"full_text":"The original was so good.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1376935292448440321"],"editableUntil":"2021-03-30T17:32:10.597Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","35"],"favorite_count":"0","id_str":"1376935292448440321","truncated":false,"retweet_count":"0","id":"1376935292448440321","created_at":"Tue Mar 30 16:32:10 +0000 2021","favorited":false,"full_text":"time management is pain management.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1376620882416787465"],"editableUntil":"2021-03-29T20:42:49.404Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","43"],"favorite_count":"0","id_str":"1376620882416787465","truncated":false,"retweet_count":"0","id":"1376620882416787465","created_at":"Mon Mar 29 19:42:49 +0000 2021","favorited":false,"full_text":"The happiness formula.\\n\\nhappiness = cmd + q","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1375083327959531522"],"editableUntil":"2021-03-25T14:53:07.855Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","13"],"favorite_count":"0","id_str":"1375083327959531522","truncated":false,"retweet_count":"0","id":"1375083327959531522","created_at":"Thu Mar 25 13:53:07 +0000 2021","favorited":false,"full_text":"disenchanted.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1372596296603860996"],"editableUntil":"2021-03-18T18:10:33.373Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","19"],"favorite_count":"0","id_str":"1372596296603860996","truncated":false,"retweet_count":"0","id":"1372596296603860996","created_at":"Thu Mar 18 17:10:33 +0000 2021","favorited":false,"full_text":"Eternal Return(ing)","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1371505905284550656"],"editableUntil":"2021-03-15T17:57:43.824Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","61"],"favorite_count":"0","id_str":"1371505905284550656","truncated":false,"retweet_count":"0","id":"1371505905284550656","created_at":"Mon Mar 15 16:57:43 +0000 2021","favorited":false,"full_text":"Hey, but what else could I do \\ninstead of thinking about you?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1370400624127381510"],"editableUntil":"2021-03-12T16:45:44.261Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1370400624127381510","truncated":false,"retweet_count":"0","id":"1370400624127381510","created_at":"Fri Mar 12 15:45:44 +0000 2021","favorited":false,"full_text":"T'amerò come la prima volta.","lang":"it"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1367247386502860801"],"editableUntil":"2021-03-03T23:55:53.827Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1367247386502860801","truncated":false,"retweet_count":"0","id":"1367247386502860801","created_at":"Wed Mar 03 22:55:53 +0000 2021","favorited":false,"full_text":"The future is already old.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1366799326832427008"],"editableUntil":"2021-03-02T18:15:28.077Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1366799326832427008","truncated":false,"retweet_count":"0","id":"1366799326832427008","created_at":"Tue Mar 02 17:15:28 +0000 2021","favorited":false,"full_text":"I am still here, stargazing.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1360979556627320835"],"editableUntil":"2021-02-14T16:49:46.734Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","38"],"favorite_count":"0","id_str":"1360979556627320835","truncated":false,"retweet_count":"0","id":"1360979556627320835","created_at":"Sun Feb 14 15:49:46 +0000 2021","favorited":false,"full_text":"\\"Cada capítulo se revela.\\"\\n\\nC.R. - USQ","lang":"es"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1356234007067979780"],"editableUntil":"2021-02-01T14:32:39.551Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","56"],"favorite_count":"0","id_str":"1356234007067979780","truncated":false,"retweet_count":"0","id":"1356234007067979780","created_at":"Mon Feb 01 13:32:39 +0000 2021","favorited":false,"full_text":"That moment when you realize you want to be young again.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1352773792909717504"],"editableUntil":"2021-01-23T01:23:00.208Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","50"],"favorite_count":"0","id_str":"1352773792909717504","truncated":false,"retweet_count":"0","id":"1352773792909717504","created_at":"Sat Jan 23 00:23:00 +0000 2021","favorited":false,"full_text":"You don't really know what you got 'til it's gone.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1351907251255181315"],"editableUntil":"2021-01-20T15:59:40.578Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","83"],"favorite_count":"0","id_str":"1351907251255181315","truncated":false,"retweet_count":"0","id":"1351907251255181315","created_at":"Wed Jan 20 14:59:40 +0000 2021","favorited":false,"full_text":"I am not even asking for a happy ending, I'm just asking for an alternative ending.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1350453059546198016"],"editableUntil":"2021-01-16T15:41:14.257Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","81"],"favorite_count":"0","id_str":"1350453059546198016","truncated":false,"retweet_count":"0","id":"1350453059546198016","created_at":"Sat Jan 16 14:41:14 +0000 2021","favorited":false,"full_text":"\\"O pragmatismo só tem sentido quando você define até aonde vai o efeito desejado\\"","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1350067079978881026"],"editableUntil":"2021-01-15T14:07:29.557Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","49"],"favorite_count":"0","id_str":"1350067079978881026","truncated":false,"retweet_count":"0","id":"1350067079978881026","created_at":"Fri Jan 15 13:07:29 +0000 2021","favorited":false,"full_text":"\\"Amar é descer do degrauzinho para ouvir o outro\\"","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1348631474615025671"],"editableUntil":"2021-01-11T15:02:54.566Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","60"],"favorite_count":"0","id_str":"1348631474615025671","truncated":false,"retweet_count":"0","id":"1348631474615025671","created_at":"Mon Jan 11 14:02:54 +0000 2021","favorited":false,"full_text":"Não há mal que dure para sempre, nem felicidade eternamente.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1348630600467574785"],"editableUntil":"2021-01-11T14:59:26.153Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1348630600467574785","truncated":false,"retweet_count":"0","id":"1348630600467574785","created_at":"Mon Jan 11 13:59:26 +0000 2021","favorited":false,"full_text":"É mais fácil ser pessimista.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1348630544532254720"],"editableUntil":"2021-01-11T14:59:12.817Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","23"],"favorite_count":"0","id_str":"1348630544532254720","truncated":false,"retweet_count":"0","id":"1348630544532254720","created_at":"Mon Jan 11 13:59:12 +0000 2021","favorited":false,"full_text":"Nunca diga \\"nunca mais\\"","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1347523004939558912"],"editableUntil":"2021-01-08T13:38:14.801Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1347523004939558912","truncated":false,"retweet_count":"0","id":"1347523004939558912","created_at":"Fri Jan 08 12:38:14 +0000 2021","favorited":false,"full_text":"A single, but constant, change.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1346828466684104704"],"editableUntil":"2021-01-06T15:38:23.977Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","6"],"favorite_count":"0","id_str":"1346828466684104704","truncated":false,"retweet_count":"0","id":"1346828466684104704","created_at":"Wed Jan 06 14:38:23 +0000 2021","favorited":false,"full_text":"Loose.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1346552476238045187"],"editableUntil":"2021-01-05T21:21:42.727Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","30"],"favorite_count":"0","id_str":"1346552476238045187","truncated":false,"retweet_count":"0","id":"1346552476238045187","created_at":"Tue Jan 05 20:21:42 +0000 2021","favorited":false,"full_text":"You say hello then I say I do.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1346528431580844036"],"editableUntil":"2021-01-05T19:46:10.034Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","60"],"favorite_count":"0","id_str":"1346528431580844036","truncated":false,"retweet_count":"0","id":"1346528431580844036","created_at":"Tue Jan 05 18:46:10 +0000 2021","favorited":false,"full_text":"If I could see *the sun one* last time, I would be made new.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1344729898762575873"],"editableUntil":"2020-12-31T20:39:26.395Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","27"],"favorite_count":"0","id_str":"1344729898762575873","truncated":false,"retweet_count":"0","id":"1344729898762575873","created_at":"Thu Dec 31 19:39:26 +0000 2020","favorited":false,"full_text":"Still looking for my Ithaca","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1343628208596537346"],"editableUntil":"2020-12-28T19:41:42.991Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","52"],"favorite_count":"0","id_str":"1343628208596537346","truncated":false,"retweet_count":"0","id":"1343628208596537346","created_at":"Mon Dec 28 18:41:42 +0000 2020","favorited":false,"full_text":"reflection on the past leads to action in the future","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1343561415358083072"],"editableUntil":"2020-12-28T15:16:18.242Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","20"],"favorite_count":"0","id_str":"1343561415358083072","truncated":false,"retweet_count":"0","id":"1343561415358083072","created_at":"Mon Dec 28 14:16:18 +0000 2020","favorited":false,"full_text":"Listen to each other","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1343561387260444673"],"editableUntil":"2020-12-28T15:16:11.543Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","24"],"favorite_count":"0","id_str":"1343561387260444673","truncated":false,"retweet_count":"0","id":"1343561387260444673","created_at":"Mon Dec 28 14:16:11 +0000 2020","favorited":false,"full_text":"Be prepared to be amazed","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1341129016259043328"],"editableUntil":"2020-12-21T22:10:49.105Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","23"],"favorite_count":"0","id_str":"1341129016259043328","truncated":false,"retweet_count":"0","id":"1341129016259043328","created_at":"Mon Dec 21 21:10:49 +0000 2020","favorited":false,"full_text":"The levees are breaking","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1339897454372765696"],"editableUntil":"2020-12-18T12:37:01.870Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","52"],"favorite_count":"0","id_str":"1339897454372765696","truncated":false,"retweet_count":"0","id":"1339897454372765696","created_at":"Fri Dec 18 11:37:01 +0000 2020","favorited":false,"full_text":"Kristen, come right back. I've been waiting for you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1336268147138179075"],"editableUntil":"2020-12-08T12:15:27.596Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","46"],"favorite_count":"0","id_str":"1336268147138179075","truncated":false,"retweet_count":"0","id":"1336268147138179075","created_at":"Tue Dec 08 11:15:27 +0000 2020","favorited":false,"full_text":"Damm.\\nDamm to.\\nDamm to love.\\nDamm to love you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1333557145799888897"],"editableUntil":"2020-12-01T00:42:54.509Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","54"],"favorite_count":"0","id_str":"1333557145799888897","truncated":false,"retweet_count":"0","id":"1333557145799888897","created_at":"Mon Nov 30 23:42:54 +0000 2020","favorited":false,"full_text":"...I wouldn't breaking apart all my pictures of you...","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1333471359096266754"],"editableUntil":"2020-11-30T19:02:01.365Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","61"],"favorite_count":"0","id_str":"1333471359096266754","truncated":false,"retweet_count":"0","id":"1333471359096266754","created_at":"Mon Nov 30 18:02:01 +0000 2020","favorited":false,"full_text":"Don't say it's not a big deal, you don't know the way I feel.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1330943693461868546"],"editableUntil":"2020-11-23T19:37:58.916Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","32"],"favorite_count":"0","id_str":"1330943693461868546","truncated":false,"retweet_count":"0","id":"1330943693461868546","created_at":"Mon Nov 23 18:37:58 +0000 2020","favorited":false,"full_text":"Destruction also breeds creation","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1329138995541012482"],"editableUntil":"2020-11-18T20:06:45.402Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","24"],"favorite_count":"0","id_str":"1329138995541012482","truncated":false,"retweet_count":"0","id":"1329138995541012482","created_at":"Wed Nov 18 19:06:45 +0000 2020","favorited":false,"full_text":"broken home, black eyed.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1326942354276802566"],"editableUntil":"2020-11-12T18:38:05.313Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1326942354276802566","truncated":false,"retweet_count":"0","id":"1326942354276802566","created_at":"Thu Nov 12 17:38:05 +0000 2020","favorited":false,"full_text":"Into the bottom of every bottle","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1326502604394926080"],"editableUntil":"2020-11-11T13:30:40.771Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","48"],"favorite_count":"0","id_str":"1326502604394926080","truncated":false,"retweet_count":"0","id":"1326502604394926080","created_at":"Wed Nov 11 12:30:40 +0000 2020","favorited":false,"full_text":"O filho de Saturno, a cabra que sobe a montanha.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1325909751025299459"],"editableUntil":"2020-11-09T22:14:53.513Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","78"],"favorite_count":"0","id_str":"1325909751025299459","truncated":false,"retweet_count":"0","id":"1325909751025299459","created_at":"Mon Nov 09 21:14:53 +0000 2020","favorited":false,"full_text":"Ontem eu vi você sorrir pra mim, como num sonho, distorcido e sem final feliz.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1324762642339291137"],"editableUntil":"2020-11-06T18:16:41.490Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","23"],"favorite_count":"0","id_str":"1324762642339291137","truncated":false,"retweet_count":"0","id":"1324762642339291137","created_at":"Fri Nov 06 17:16:41 +0000 2020","favorited":false,"full_text":"Cancelem as anástrofes.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1324761102719340545"],"editableUntil":"2020-11-06T18:10:34.416Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","36"],"favorite_count":"0","id_str":"1324761102719340545","truncated":false,"retweet_count":"0","id":"1324761102719340545","created_at":"Fri Nov 06 17:10:34 +0000 2020","favorited":false,"full_text":"Caminante, caminante, no hay camino!","lang":"es"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1324112082699194370"],"editableUntil":"2020-11-04T23:11:35.985Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","46"],"favorite_count":"0","id_str":"1324112082699194370","truncated":false,"retweet_count":"0","id":"1324112082699194370","created_at":"Wed Nov 04 22:11:35 +0000 2020","favorited":false,"full_text":"I dream of love as time runs through my hands.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1324000371900063744"],"editableUntil":"2020-11-04T15:47:42.055Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","34"],"favorite_count":"0","id_str":"1324000371900063744","truncated":false,"retweet_count":"0","id":"1324000371900063744","created_at":"Wed Nov 04 14:47:42 +0000 2020","favorited":false,"full_text":"\\"Aquilo que você foca, se expande\\"","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1321852953909743616"],"editableUntil":"2020-10-29T17:34:37.709Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1321852953909743616","truncated":false,"retweet_count":"0","id":"1321852953909743616","created_at":"Thu Oct 29 16:34:37 +0000 2020","favorited":false,"full_text":"My life, my pride is broken.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1300535343071014917"],"editableUntil":"2020-08-31T21:46:03.223Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","29"],"favorite_count":"0","id_str":"1300535343071014917","truncated":false,"retweet_count":"0","id":"1300535343071014917","created_at":"Mon Aug 31 20:46:03 +0000 2020","favorited":false,"full_text":"Hearest thou my voice, still?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1842992515705868725"],"editableUntil":"2024-10-06T19:17:11.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","73"],"favorite_count":"0","id_str":"1842992515705868725","truncated":false,"retweet_count":"0","id":"1842992515705868725","created_at":"Sun Oct 06 18:17:11 +0000 2024","favorited":false,"full_text":"There's no such thing as \\"plastic dinosaur\\". All dinosaurs are dinosaurs.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1841828417118900684"],"editableUntil":"2024-10-03T14:11:28.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","140"],"favorite_count":"0","id_str":"1841828417118900684","truncated":false,"retweet_count":"0","id":"1841828417118900684","created_at":"Thu Oct 03 13:11:28 +0000 2024","favorited":false,"full_text":"Playing describe &amp; draw\\nSees: \\"A 'quack' in a bed.\\"\\nAnswers: \\"A quaRk in a bed minutes before entanglement\\"\\nYeah, that's pretty much me.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1841472613379367307"],"editableUntil":"2024-10-02T14:37:38.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","33"],"favorite_count":"0","id_str":"1841472613379367307","truncated":false,"retweet_count":"0","id":"1841472613379367307","created_at":"Wed Oct 02 13:37:38 +0000 2024","favorited":false,"full_text":"There are better tools out there.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1840693737753637206"],"editableUntil":"2024-09-30T11:02:40.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","27"],"favorite_count":"0","id_str":"1840693737753637206","truncated":false,"retweet_count":"0","id":"1840693737753637206","created_at":"Mon Sep 30 10:02:40 +0000 2024","favorited":false,"full_text":"A memory, a regret, a hope.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1839729719790420328"],"editableUntil":"2024-09-27T19:12:00.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","55"],"favorite_count":"0","id_str":"1839729719790420328","truncated":false,"retweet_count":"0","id":"1839729719790420328","created_at":"Fri Sep 27 18:12:00 +0000 2024","favorited":false,"full_text":"There's a heart in my pain. There's a pain in my chest.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1837871243095081003"],"editableUntil":"2024-09-22T16:07:05.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","69"],"favorite_count":"0","id_str":"1837871243095081003","truncated":false,"retweet_count":"0","id":"1837871243095081003","created_at":"Sun Sep 22 15:07:05 +0000 2024","favorited":false,"full_text":"Been searching somewhere out there\\nFor what's been missing right here","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1837801833240158505"],"editableUntil":"2024-09-22T11:31:16.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","12"],"favorite_count":"0","id_str":"1837801833240158505","truncated":false,"retweet_count":"0","id":"1837801833240158505","created_at":"Sun Sep 22 10:31:16 +0000 2024","favorited":false,"full_text":"more reverb!","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1837455072705343825"],"editableUntil":"2024-09-21T12:33:22.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"user_mentions":[],"urls":[],"symbols":[],"media":[{"expanded_url":"https://x.com/emersondemetrio/status/1837455072705343825/photo/1","indices":["0","23"],"url":"https://t.co/dDCJzy5VBO","media_url":"http://pbs.twimg.com/media/GX_zlm-WIAAIKT2.png","id_str":"1837455000433205248","id":"1837455000433205248","media_url_https":"https://pbs.twimg.com/media/GX_zlm-WIAAIKT2.png","sizes":{"large":{"w":"790","h":"690","resize":"fit"},"small":{"w":"680","h":"594","resize":"fit"},"medium":{"w":"790","h":"690","resize":"fit"},"thumb":{"w":"150","h":"150","resize":"crop"}},"type":"photo","display_url":"pic.x.com/dDCJzy5VBO"}],"hashtags":[]},"display_text_range":["0","23"],"favorite_count":"0","id_str":"1837455072705343825","truncated":false,"retweet_count":"0","id":"1837455072705343825","possibly_sensitive":false,"created_at":"Sat Sep 21 11:33:22 +0000 2024","favorited":false,"full_text":"https://t.co/dDCJzy5VBO","lang":"zxx","extended_entities":{"media":[{"expanded_url":"https://x.com/emersondemetrio/status/1837455072705343825/photo/1","indices":["0","23"],"url":"https://t.co/dDCJzy5VBO","media_url":"http://pbs.twimg.com/media/GX_zlm-WIAAIKT2.png","id_str":"1837455000433205248","id":"1837455000433205248","media_url_https":"https://pbs.twimg.com/media/GX_zlm-WIAAIKT2.png","sizes":{"large":{"w":"790","h":"690","resize":"fit"},"small":{"w":"680","h":"594","resize":"fit"},"medium":{"w":"790","h":"690","resize":"fit"},"thumb":{"w":"150","h":"150","resize":"crop"}},"type":"photo","display_url":"pic.x.com/dDCJzy5VBO"}]}}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1834001495500448182"],"editableUntil":"2024-09-11T23:50:05.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","51"],"favorite_count":"0","id_str":"1834001495500448182","truncated":false,"retweet_count":"0","id":"1834001495500448182","created_at":"Wed Sep 11 22:50:05 +0000 2024","favorited":false,"full_text":"I've finally forgotten what your voice sounds like.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1833469535178928480"],"editableUntil":"2024-09-10T12:36:16.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","45"],"favorite_count":"0","id_str":"1833469535178928480","truncated":false,"retweet_count":"0","id":"1833469535178928480","created_at":"Tue Sep 10 11:36:16 +0000 2024","favorited":false,"full_text":"it's just yet another 'failing in love' story","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1833466816242372636"],"editableUntil":"2024-09-10T12:25:27.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","220"],"favorite_count":"0","id_str":"1833466816242372636","truncated":false,"retweet_count":"0","id":"1833466816242372636","created_at":"Tue Sep 10 11:25:27 +0000 2024","favorited":false,"full_text":"Well, I swing between both lanes. Sometimes I'm like, 'Yeah, I guess this is how things should be.' Other times, I'm like, 'What the actual heck? If I hadn’t done X, none of this would be happening now, but here we are.'","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1833263030567645636"],"editableUntil":"2024-09-09T22:55:41.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","159"],"favorite_count":"0","id_str":"1833263030567645636","truncated":false,"retweet_count":"0","id":"1833263030567645636","created_at":"Mon Sep 09 21:55:41 +0000 2024","favorited":false,"full_text":"Pure hearts colour night skies\\nMy real eyes can see through your lies\\nPure hearts colour night skies\\nBlind hearts won’t catch you\\nMy hearts done aching\\nFor you","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1833262212947055104"],"editableUntil":"2024-09-09T22:52:26.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","25"],"favorite_count":"0","id_str":"1833262212947055104","truncated":false,"retweet_count":"0","id":"1833262212947055104","created_at":"Mon Sep 09 21:52:26 +0000 2024","favorited":false,"full_text":"Don't water a dead plant.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1832871694085615775"],"editableUntil":"2024-09-08T21:00:39.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","41"],"favorite_count":"0","id_str":"1832871694085615775","truncated":false,"retweet_count":"0","id":"1832871694085615775","created_at":"Sun Sep 08 20:00:39 +0000 2024","favorited":false,"full_text":"Cloudy senses, stale light\\nBelow, beneath","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1832100444409135150"],"editableUntil":"2024-09-06T17:55:59.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","120"],"favorite_count":"0","id_str":"1832100444409135150","truncated":false,"retweet_count":"0","id":"1832100444409135150","created_at":"Fri Sep 06 16:55:59 +0000 2024","favorited":false,"full_text":"Cry to yourself\\nNothing will help\\nIt's too late to change what's been done \\nYou do what you've always done best\\nYou run.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1831995468286451979"],"editableUntil":"2024-09-06T10:58:51.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","71"],"favorite_count":"0","id_str":"1831995468286451979","truncated":false,"retweet_count":"0","id":"1831995468286451979","created_at":"Fri Sep 06 09:58:51 +0000 2024","favorited":false,"full_text":"I'm going to write uptempo beats to shake your memories out of my head.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1831725127018381330"],"editableUntil":"2024-09-05T17:04:36.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","269"],"favorite_count":"0","id_str":"1831725127018381330","truncated":false,"retweet_count":"0","id":"1831725127018381330","created_at":"Thu Sep 05 16:04:36 +0000 2024","favorited":false,"full_text":"Some way, someway where things can be a bigger mistake\\nOkay, okay, maybe we should try to explain\\nOkay, okay, maybe we should try to explain\\nOkay, okay, maybe we should try to explain\\nOkay, okay, maybe we should try to explain\\nOkay, okay, maybe we should try to explain","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1831615568534765637"],"editableUntil":"2024-09-05T09:49:15.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","52"],"favorite_count":"0","id_str":"1831615568534765637","truncated":false,"retweet_count":"0","id":"1831615568534765637","created_at":"Thu Sep 05 08:49:15 +0000 2024","favorited":false,"full_text":"Due to lack of interest, tomorrow is cancelled. FYI.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1830981563296948341"],"editableUntil":"2024-09-03T15:49:57.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","21"],"favorite_count":"0","id_str":"1830981563296948341","truncated":false,"retweet_count":"0","id":"1830981563296948341","created_at":"Tue Sep 03 14:49:57 +0000 2024","favorited":false,"full_text":"x = (x ^ i) &amp; ~ y","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1830949649844252749"],"editableUntil":"2024-09-03T13:43:08.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","51"],"favorite_count":"0","id_str":"1830949649844252749","truncated":false,"retweet_count":"0","id":"1830949649844252749","created_at":"Tue Sep 03 12:43:08 +0000 2024","favorited":false,"full_text":"Learn how to choose before someone chooses for you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1830913185370538328"],"editableUntil":"2024-09-03T11:18:14.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","59"],"favorite_count":"0","id_str":"1830913185370538328","truncated":false,"retweet_count":"0","id":"1830913185370538328","created_at":"Tue Sep 03 10:18:14 +0000 2024","favorited":false,"full_text":"\\"Yeah, you live life forwards but understand it backwards.\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1829514383208399354"],"editableUntil":"2024-08-30T14:39:54.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","75"],"favorite_count":"0","id_str":"1829514383208399354","truncated":false,"retweet_count":"0","id":"1829514383208399354","created_at":"Fri Aug 30 13:39:54 +0000 2024","favorited":false,"full_text":"The sun doesn't give light to the moon assuming\\nThe moon's gonna owe it one","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1829472577422553177"],"editableUntil":"2024-08-30T11:53:47.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","173"],"favorite_count":"0","id_str":"1829472577422553177","truncated":false,"retweet_count":"0","id":"1829472577422553177","created_at":"Fri Aug 30 10:53:47 +0000 2024","favorited":false,"full_text":"In the name of memories, we create new situations that taste like old flavors, but yield the same results. The pain and the addiction are real; everything else is secondary.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1829199571861549109"],"editableUntil":"2024-08-29T17:48:57.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","176"],"favorite_count":"0","id_str":"1829199571861549109","truncated":false,"retweet_count":"0","id":"1829199571861549109","created_at":"Thu Aug 29 16:48:57 +0000 2024","favorited":false,"full_text":"But no I'm just taking it in\\nOut the window of a hotel bedroom again\\nTomorrow I'll be gone I don't know when I'll be back\\nBut in this world everything can change just like that","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1829197762224894198"],"editableUntil":"2024-08-29T17:41:46.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","120"],"favorite_count":"0","id_str":"1829197762224894198","truncated":false,"retweet_count":"0","id":"1829197762224894198","created_at":"Thu Aug 29 16:41:46 +0000 2024","favorited":false,"full_text":"One man's trash is the next man's treasure\\nOne mans pain is the next mans pleasure\\none say infinity the next say forever","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1828198965164294225"],"editableUntil":"2024-08-26T23:32:54.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","98"],"favorite_count":"0","id_str":"1828198965164294225","truncated":false,"retweet_count":"0","id":"1828198965164294225","created_at":"Mon Aug 26 22:32:54 +0000 2024","favorited":false,"full_text":"The night in the corner in the back of the halls\\nWhere we sit all alone and listen to the rainfall","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1828055544151835105"],"editableUntil":"2024-08-26T14:03:00.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","38"],"favorite_count":"0","id_str":"1828055544151835105","truncated":false,"retweet_count":"0","id":"1828055544151835105","created_at":"Mon Aug 26 13:03:00 +0000 2024","favorited":false,"full_text":"Help me accept rather than understand.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1827735373557924142"],"editableUntil":"2024-08-25T16:50:45.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","43"],"favorite_count":"0","id_str":"1827735373557924142","truncated":false,"retweet_count":"0","id":"1827735373557924142","created_at":"Sun Aug 25 15:50:45 +0000 2024","favorited":false,"full_text":"I like complex things, complex enough, tho.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1827078424084537586"],"editableUntil":"2024-08-23T21:20:16.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","39"],"favorite_count":"0","id_str":"1827078424084537586","truncated":false,"retweet_count":"0","id":"1827078424084537586","created_at":"Fri Aug 23 20:20:16 +0000 2024","favorited":false,"full_text":"Se você se levantar, o velório termina.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1826633697530962295"],"editableUntil":"2024-08-22T15:53:05.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","33"],"favorite_count":"0","id_str":"1826633697530962295","truncated":false,"retweet_count":"0","id":"1826633697530962295","created_at":"Thu Aug 22 14:53:05 +0000 2024","favorited":false,"full_text":"You're the sun and I'm your cloud","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1826574086429884583"],"editableUntil":"2024-08-22T11:56:12.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","149"],"favorite_count":"0","id_str":"1826574086429884583","truncated":false,"retweet_count":"0","id":"1826574086429884583","created_at":"Thu Aug 22 10:56:12 +0000 2024","favorited":false,"full_text":"Waitress: Did you like the Agua de Valencia?\\n\\nMe: Yes, but I feel like it’s killing me slowly.\\n\\nWaitress, laughing: Isn’t that what life’s all about?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1824381932576145453"],"editableUntil":"2024-08-16T10:45:22.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","100"],"favorite_count":"0","id_str":"1824381932576145453","truncated":false,"retweet_count":"0","id":"1824381932576145453","created_at":"Fri Aug 16 09:45:22 +0000 2024","favorited":false,"full_text":"Through the eye of the needle, it's easier for me\\nTo get closer to heaven than ever feel whole again","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1824381434603192618"],"editableUntil":"2024-08-16T10:43:24.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1824381434603192618","truncated":false,"retweet_count":"0","id":"1824381434603192618","created_at":"Fri Aug 16 09:43:24 +0000 2024","favorited":false,"full_text":"The addiction of duplicities","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1824375583372947754"],"editableUntil":"2024-08-16T10:20:08.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","37"],"favorite_count":"0","id_str":"1824375583372947754","truncated":false,"retweet_count":"0","id":"1824375583372947754","created_at":"Fri Aug 16 09:20:08 +0000 2024","favorited":false,"full_text":"I won't play against my own ambition.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1824375312085377328"],"editableUntil":"2024-08-16T10:19:04.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1824375312085377328","truncated":false,"retweet_count":"0","id":"1824375312085377328","created_at":"Fri Aug 16 09:19:04 +0000 2024","favorited":false,"full_text":"ok, I will be fine without you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1824375267504107950"],"editableUntil":"2024-08-16T10:18:53.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","23"],"favorite_count":"0","id_str":"1824375267504107950","truncated":false,"retweet_count":"0","id":"1824375267504107950","created_at":"Fri Aug 16 09:18:53 +0000 2024","favorited":false,"full_text":"How come are you alone?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1824175667342168284"],"editableUntil":"2024-08-15T21:05:45.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","37"],"favorite_count":"0","id_str":"1824175667342168284","truncated":false,"retweet_count":"0","id":"1824175667342168284","created_at":"Thu Aug 15 20:05:45 +0000 2024","favorited":false,"full_text":"Already have tears been shed for you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1823057791981961633"],"editableUntil":"2024-08-12T19:03:43.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","133"],"favorite_count":"0","id_str":"1823057791981961633","truncated":false,"retweet_count":"0","id":"1823057791981961633","created_at":"Mon Aug 12 18:03:43 +0000 2024","favorited":false,"full_text":"Yesterday, I saw a shooting star and wondered if there was anything else I could wish for besides seeing your pretty face once again.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1821864719264760051"],"editableUntil":"2024-08-09T12:02:52.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","55"],"favorite_count":"0","id_str":"1821864719264760051","truncated":false,"retweet_count":"0","id":"1821864719264760051","created_at":"Fri Aug 09 11:02:52 +0000 2024","favorited":false,"full_text":"To old and slow I've grown,\\nWell I fought time but lost","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1821554047284838420"],"editableUntil":"2024-08-08T15:28:22.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","55"],"favorite_count":"0","id_str":"1821554047284838420","truncated":false,"retweet_count":"0","id":"1821554047284838420","created_at":"Thu Aug 08 14:28:22 +0000 2024","favorited":false,"full_text":"Why do I have a song for every single event in my life?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1819293308339839230"],"editableUntil":"2024-08-02T09:45:00.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","36"],"favorite_count":"0","id_str":"1819293308339839230","truncated":false,"retweet_count":"0","id":"1819293308339839230","created_at":"Fri Aug 02 08:45:00 +0000 2024","favorited":false,"full_text":"If I was them, I wouldn't let me in.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1818979203682865612"],"editableUntil":"2024-08-01T12:56:51.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","75"],"favorite_count":"0","id_str":"1818979203682865612","truncated":false,"retweet_count":"0","id":"1818979203682865612","created_at":"Thu Aug 01 11:56:51 +0000 2024","favorited":false,"full_text":"\\"Onde está o fora em nós, senão em algum lugar dentro de nós também?\\"\\n\\nA.S.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1817900263174181032"],"editableUntil":"2024-07-29T13:29:32.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","93"],"favorite_count":"0","id_str":"1817900263174181032","truncated":false,"retweet_count":"0","id":"1817900263174181032","created_at":"Mon Jul 29 12:29:32 +0000 2024","favorited":false,"full_text":"Nossa imagem ora nos perturba, ora nos acalma, mas nunca ficamos insensíveis a ela. (Ana Suy)","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1817663995551060172"],"editableUntil":"2024-07-28T21:50:41.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","48"],"favorite_count":"0","id_str":"1817663995551060172","truncated":false,"retweet_count":"0","id":"1817663995551060172","created_at":"Sun Jul 28 20:50:41 +0000 2024","favorited":false,"full_text":"I won't accept the anxiety you bring ever again.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1815863683861344672"],"editableUntil":"2024-07-23T22:36:54.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","51"],"favorite_count":"0","id_str":"1815863683861344672","truncated":false,"retweet_count":"0","id":"1815863683861344672","created_at":"Tue Jul 23 21:36:54 +0000 2024","favorited":false,"full_text":"We are just objects in some random access memories.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1815726378420961626"],"editableUntil":"2024-07-23T13:31:17.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","52"],"favorite_count":"0","id_str":"1815726378420961626","truncated":false,"retweet_count":"0","id":"1815726378420961626","created_at":"Tue Jul 23 12:31:17 +0000 2024","favorited":false,"full_text":"I designed this rhyme when I was obsessed with time.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1815139473010590016"],"editableUntil":"2024-07-21T22:39:08.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","40"],"favorite_count":"0","id_str":"1815139473010590016","truncated":false,"retweet_count":"0","id":"1815139473010590016","created_at":"Sun Jul 21 21:39:08 +0000 2024","favorited":false,"full_text":"One cannot reside within memory for long","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1814647185541140590"],"editableUntil":"2024-07-20T14:02:58.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","113"],"favorite_count":"0","id_str":"1814647185541140590","truncated":false,"retweet_count":"0","id":"1814647185541140590","created_at":"Sat Jul 20 13:02:58 +0000 2024","favorited":false,"full_text":"Even between two equal notes, there may be an interval. / Mesmo entre duas notas iguais, pode haver um intervalo.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1811740312118653409"],"editableUntil":"2024-07-12T13:32:05.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","61"],"favorite_count":"0","id_str":"1811740312118653409","truncated":false,"retweet_count":"0","id":"1811740312118653409","created_at":"Fri Jul 12 12:32:05 +0000 2024","favorited":false,"full_text":"I've got so much left to say but there's nothing left to say.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1811034577017655652"],"editableUntil":"2024-07-10T14:47:45.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","71"],"favorite_count":"0","id_str":"1811034577017655652","truncated":false,"retweet_count":"0","id":"1811034577017655652","created_at":"Wed Jul 10 13:47:45 +0000 2024","favorited":false,"full_text":"Cercami\\nTra il chiaroscuro e la malinconia di un altro\\nGiorno che passa","lang":"it"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1810651988398371025"],"editableUntil":"2024-07-09T13:27:28.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","72"],"favorite_count":"0","id_str":"1810651988398371025","truncated":false,"retweet_count":"0","id":"1810651988398371025","created_at":"Tue Jul 09 12:27:28 +0000 2024","favorited":false,"full_text":"You can get addicted to noise cancellation headphones. Watch out.\\n\\nWhat?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1808895684730315144"],"editableUntil":"2024-07-04T17:08:33.000Z","editsRemaining":"5","isEditEligible":false}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[{"name":"Ivan Mizanzuk","screen_name":"mizanzuk","indices":["0","9"],"id_str":"223474750","id":"223474750"}],"urls":[]},"display_text_range":["0","21"],"favorite_count":"0","in_reply_to_status_id_str":"1808892842170880126","id_str":"1808895684730315144","in_reply_to_user_id":"223474750","truncated":false,"retweet_count":"0","id":"1808895684730315144","in_reply_to_status_id":"1808892842170880126","created_at":"Thu Jul 04 16:08:33 +0000 2024","favorited":false,"full_text":"@mizanzuk Obrigado. 🖤","lang":"pt","in_reply_to_screen_name":"mizanzuk","in_reply_to_user_id_str":"223474750"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1808502140148633681"],"editableUntil":"2024-07-03T15:04:45.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"user_mentions":[{"name":"Ivan Mizanzuk","screen_name":"mizanzuk","indices":["3","12"],"id_str":"223474750","id":"223474750"}],"urls":[],"symbols":[],"media":[{"expanded_url":"https://x.com/emersondemetrio/status/1808502140148633681/photo/1","indices":["13","36"],"url":"https://t.co/gK1CQLy2Ua","media_url":"http://pbs.twimg.com/media/GRkXGP5W8AADVfQ.jpg","id_str":"1808502121479729152","id":"1808502121479729152","media_url_https":"https://pbs.twimg.com/media/GRkXGP5W8AADVfQ.jpg","sizes":{"medium":{"w":"974","h":"1064","resize":"fit"},"large":{"w":"974","h":"1064","resize":"fit"},"thumb":{"w":"150","h":"150","resize":"crop"},"small":{"w":"622","h":"680","resize":"fit"}},"type":"photo","display_url":"pic.x.com/gK1CQLy2Ua"}],"hashtags":[]},"display_text_range":["0","36"],"favorite_count":"355","id_str":"1808502140148633681","truncated":false,"retweet_count":"66","id":"1808502140148633681","possibly_sensitive":false,"created_at":"Wed Jul 03 14:04:45 +0000 2024","favorited":false,"full_text":"po @mizanzuk https://t.co/gK1CQLy2Ua","lang":"und","extended_entities":{"media":[{"expanded_url":"https://x.com/emersondemetrio/status/1808502140148633681/photo/1","indices":["13","36"],"url":"https://t.co/gK1CQLy2Ua","media_url":"http://pbs.twimg.com/media/GRkXGP5W8AADVfQ.jpg","id_str":"1808502121479729152","id":"1808502121479729152","media_url_https":"https://pbs.twimg.com/media/GRkXGP5W8AADVfQ.jpg","sizes":{"medium":{"w":"974","h":"1064","resize":"fit"},"large":{"w":"974","h":"1064","resize":"fit"},"thumb":{"w":"150","h":"150","resize":"crop"},"small":{"w":"622","h":"680","resize":"fit"}},"type":"photo","display_url":"pic.x.com/gK1CQLy2Ua"}]}}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1808082449798189301"],"editableUntil":"2024-07-02T11:17:03.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","78"],"favorite_count":"0","id_str":"1808082449798189301","truncated":false,"retweet_count":"0","id":"1808082449798189301","created_at":"Tue Jul 02 10:17:03 +0000 2024","favorited":false,"full_text":"Sometimes I want to come back, but when I finally do, I don't want to anymore.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1807860290257641709"],"editableUntil":"2024-07-01T20:34:16.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","12"],"favorite_count":"0","id_str":"1807860290257641709","truncated":false,"retweet_count":"0","id":"1807860290257641709","created_at":"Mon Jul 01 19:34:16 +0000 2024","favorited":false,"full_text":"far from fey","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1807475912637853881"],"editableUntil":"2024-06-30T19:06:53.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","35"],"favorite_count":"0","id_str":"1807475912637853881","truncated":false,"retweet_count":"0","id":"1807475912637853881","created_at":"Sun Jun 30 18:06:53 +0000 2024","favorited":false,"full_text":"Why I stay when you just push away?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1807470228604948689"],"editableUntil":"2024-06-30T18:44:18.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","21"],"favorite_count":"0","id_str":"1807470228604948689","truncated":false,"retweet_count":"0","id":"1807470228604948689","created_at":"Sun Jun 30 17:44:18 +0000 2024","favorited":false,"full_text":"never-ending déjà vu.","lang":"fr"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1805363846783320305"],"editableUntil":"2024-06-24T23:14:17.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","56"],"favorite_count":"0","id_str":"1805363846783320305","truncated":false,"retweet_count":"0","id":"1805363846783320305","created_at":"Mon Jun 24 22:14:17 +0000 2024","favorited":false,"full_text":"the truth is that I am not as strong as I thought I was.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1805293499471851792"],"editableUntil":"2024-06-24T18:34:45.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","182"],"favorite_count":"0","id_str":"1805293499471851792","truncated":false,"retweet_count":"0","id":"1805293499471851792","created_at":"Mon Jun 24 17:34:45 +0000 2024","favorited":false,"full_text":"We promised each other we'd never be like those people who broke promises every other year, but after enough time, here we are, acting just like the people we said we would never be.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1804906014476485094"],"editableUntil":"2024-06-23T16:55:02.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","75"],"favorite_count":"0","id_str":"1804906014476485094","truncated":false,"retweet_count":"0","id":"1804906014476485094","created_at":"Sun Jun 23 15:55:02 +0000 2024","favorited":false,"full_text":"I see myself as a perfect in between: You and the (real) love of your life.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1802381791644303656"],"editableUntil":"2024-06-16T17:44:40.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","97"],"favorite_count":"0","id_str":"1802381791644303656","truncated":false,"retweet_count":"0","id":"1802381791644303656","created_at":"Sun Jun 16 16:44:40 +0000 2024","favorited":false,"full_text":"A sad realisation that I am a guy you've dated 4 years ago, instead of the guy you'll marry with.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1801978741788188993"],"editableUntil":"2024-06-15T15:03:05.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","17"],"favorite_count":"0","id_str":"1801978741788188993","truncated":false,"retweet_count":"0","id":"1801978741788188993","created_at":"Sat Jun 15 14:03:05 +0000 2024","favorited":false,"full_text":"A drop, an ocean.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1798068652027289701"],"editableUntil":"2024-06-04T20:05:47.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","100"],"favorite_count":"0","id_str":"1798068652027289701","truncated":false,"retweet_count":"0","id":"1798068652027289701","created_at":"Tue Jun 04 19:05:47 +0000 2024","favorited":false,"full_text":"[Jakub] If only I saw her always like I saw her then.\\n\\n[Hanuš] That you saw her at all is a miracle.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1796342893449294148"],"editableUntil":"2024-05-31T01:48:14.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","77"],"favorite_count":"0","id_str":"1796342893449294148","truncated":false,"retweet_count":"0","id":"1796342893449294148","created_at":"Fri May 31 00:48:14 +0000 2024","favorited":false,"full_text":"If you gaze for long into a Virtual DOM, the Virtual DOM gazes also into you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1795051398905618687"],"editableUntil":"2024-05-27T12:16:18.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1795051398905618687","truncated":false,"retweet_count":"0","id":"1795051398905618687","created_at":"Mon May 27 11:16:18 +0000 2024","favorited":false,"full_text":"\\"Still can't see the bottom\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1794822246634287537"],"editableUntil":"2024-05-26T21:05:44.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","46"],"favorite_count":"0","id_str":"1794822246634287537","truncated":false,"retweet_count":"0","id":"1794822246634287537","created_at":"Sun May 26 20:05:44 +0000 2024","favorited":false,"full_text":"\\"Always put a version in your protocol header\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1792898010898194631"],"editableUntil":"2024-05-21T13:39:30.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","52"],"favorite_count":"0","id_str":"1792898010898194631","truncated":false,"retweet_count":"0","id":"1792898010898194631","created_at":"Tue May 21 12:39:30 +0000 2024","favorited":false,"full_text":"\\"Everything is open source if you can read assembly\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1792886486699782621"],"editableUntil":"2024-05-21T12:53:43.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","52"],"favorite_count":"0","id_str":"1792886486699782621","truncated":false,"retweet_count":"0","id":"1792886486699782621","created_at":"Tue May 21 11:53:43 +0000 2024","favorited":false,"full_text":"I am hanging on your words, like I always used to do","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1791785385967628331"],"editableUntil":"2024-05-18T11:58:20.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","66"],"favorite_count":"0","id_str":"1791785385967628331","truncated":false,"retweet_count":"0","id":"1791785385967628331","created_at":"Sat May 18 10:58:20 +0000 2024","favorited":false,"full_text":"I dream about things I have never said, things I should have said.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1787544839023993245"],"editableUntil":"2024-05-06T19:07:55.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","55"],"favorite_count":"0","id_str":"1787544839023993245","truncated":false,"retweet_count":"0","id":"1787544839023993245","created_at":"Mon May 06 18:07:55 +0000 2024","favorited":false,"full_text":"an idiot admires complexity\\na genius admires simplicity","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1786462595207041509"],"editableUntil":"2024-05-03T19:27:28.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","34"],"favorite_count":"0","id_str":"1786462595207041509","truncated":false,"retweet_count":"0","id":"1786462595207041509","created_at":"Fri May 03 18:27:28 +0000 2024","favorited":false,"full_text":"\\"Use seus poderes para o bem\\"\\n- Is","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1785003696721412274"],"editableUntil":"2024-04-29T18:50:19.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","42"],"favorite_count":"0","id_str":"1785003696721412274","truncated":false,"retweet_count":"0","id":"1785003696721412274","created_at":"Mon Apr 29 17:50:19 +0000 2024","favorited":false,"full_text":"Am I really living or just training an AI?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1785003396937793629"],"editableUntil":"2024-04-29T18:49:08.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","53"],"favorite_count":"0","id_str":"1785003396937793629","truncated":false,"retweet_count":"0","id":"1785003396937793629","created_at":"Mon Apr 29 17:49:08 +0000 2024","favorited":false,"full_text":"Será que eu estou vivendo ou apenas treinando uma IA?","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1782063099073225129"],"editableUntil":"2024-04-21T16:05:26.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","51"],"favorite_count":"0","id_str":"1782063099073225129","truncated":false,"retweet_count":"0","id":"1782063099073225129","created_at":"Sun Apr 21 15:05:26 +0000 2024","favorited":false,"full_text":"\\"my love is strong and my heart is weak, after all\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1778067310219055296"],"editableUntil":"2024-04-10T15:27:36.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1778067310219055296","truncated":false,"retweet_count":"0","id":"1778067310219055296","created_at":"Wed Apr 10 14:27:36 +0000 2024","favorited":false,"full_text":"waking up in a rabbit hole","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1777350627909128557"],"editableUntil":"2024-04-08T15:59:45.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","101"],"favorite_count":"0","id_str":"1777350627909128557","truncated":false,"retweet_count":"0","id":"1777350627909128557","created_at":"Mon Apr 08 14:59:45 +0000 2024","favorited":false,"full_text":"The biggest distance I want to be away from you is the space between two atoms of a molecule of love.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1775536771591225344"],"editableUntil":"2024-04-03T15:52:08.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","45"],"favorite_count":"0","id_str":"1775536771591225344","truncated":false,"retweet_count":"0","id":"1775536771591225344","created_at":"Wed Apr 03 14:52:08 +0000 2024","favorited":false,"full_text":"What's worse a broken heart or a broken pipe?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1762478176117145763"],"editableUntil":"2024-02-27T15:01:57.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","25"],"favorite_count":"0","id_str":"1762478176117145763","truncated":false,"retweet_count":"0","id":"1762478176117145763","created_at":"Tue Feb 27 14:01:57 +0000 2024","favorited":false,"full_text":"I never wanna act my age.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1759722085469823413"],"editableUntil":"2024-02-20T00:30:13.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","113"],"favorite_count":"0","id_str":"1759722085469823413","truncated":false,"retweet_count":"0","id":"1759722085469823413","created_at":"Mon Feb 19 23:30:13 +0000 2024","favorited":false,"full_text":"You've taught me that the heart is in the middle, not to the left as I thought. Exactly where the love should be.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1757356793720721823"],"editableUntil":"2024-02-13T11:51:24.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","35"],"favorite_count":"0","id_str":"1757356793720721823","truncated":false,"retweet_count":"0","id":"1757356793720721823","created_at":"Tue Feb 13 10:51:24 +0000 2024","favorited":false,"full_text":"Tokyo Shoegazer &gt; Tokyo Drifting","lang":"cy"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1756415964495679628"],"editableUntil":"2024-02-10T21:32:53.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","64"],"favorite_count":"0","id_str":"1756415964495679628","truncated":false,"retweet_count":"0","id":"1756415964495679628","created_at":"Sat Feb 10 20:32:53 +0000 2024","favorited":false,"full_text":"\\"And then he told her: What rules the world? Lies and omission.\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1753467991159669225"],"editableUntil":"2024-02-02T18:18:41.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","62"],"favorite_count":"0","id_str":"1753467991159669225","truncated":false,"retweet_count":"0","id":"1753467991159669225","created_at":"Fri Feb 02 17:18:41 +0000 2024","favorited":false,"full_text":"I struggle to understand how some things cannot be understood.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1753425910118707651"],"editableUntil":"2024-02-02T15:31:28.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","30"],"favorite_count":"0","id_str":"1753425910118707651","truncated":false,"retweet_count":"0","id":"1753425910118707651","created_at":"Fri Feb 02 14:31:28 +0000 2024","favorited":false,"full_text":"I am sorry or congratulations.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1753424947668570398"],"editableUntil":"2024-02-02T15:27:39.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","45"],"favorite_count":"0","id_str":"1753424947668570398","truncated":false,"retweet_count":"0","id":"1753424947668570398","created_at":"Fri Feb 02 14:27:39 +0000 2024","favorited":false,"full_text":"Find a real problem before solving something.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1752683301985194382"],"editableUntil":"2024-01-31T14:20:37.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","39"],"favorite_count":"0","id_str":"1752683301985194382","truncated":false,"retweet_count":"0","id":"1752683301985194382","created_at":"Wed Jan 31 13:20:37 +0000 2024","favorited":false,"full_text":"can I drown in your lips one last time?","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1752352753014157824"],"editableUntil":"2024-01-30T16:27:08.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","17"],"favorite_count":"0","id_str":"1752352753014157824","truncated":false,"retweet_count":"0","id":"1752352753014157824","created_at":"Tue Jan 30 15:27:08 +0000 2024","favorited":false,"full_text":"Slowly we unfurl.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1749750742972301485"],"editableUntil":"2024-01-23T12:07:40.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1749750742972301485","truncated":false,"retweet_count":"0","id":"1749750742972301485","created_at":"Tue Jan 23 11:07:40 +0000 2024","favorited":false,"full_text":"Don't let your dreams be memes.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1748331460157726999"],"editableUntil":"2024-01-19T14:07:57.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","34"],"favorite_count":"0","id_str":"1748331460157726999","truncated":false,"retweet_count":"0","id":"1748331460157726999","created_at":"Fri Jan 19 13:07:57 +0000 2024","favorited":false,"full_text":"Sadly I can see the thestrals now.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1747205875528265753"],"editableUntil":"2024-01-16T11:35:16.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","32"],"favorite_count":"0","id_str":"1747205875528265753","truncated":false,"retweet_count":"0","id":"1747205875528265753","created_at":"Tue Jan 16 10:35:16 +0000 2024","favorited":false,"full_text":"You are a maze, you are amazing.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1746917835815727345"],"editableUntil":"2024-01-15T16:30:42.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","75"],"favorite_count":"0","id_str":"1746917835815727345","truncated":false,"retweet_count":"0","id":"1746917835815727345","created_at":"Mon Jan 15 15:30:42 +0000 2024","favorited":false,"full_text":"till the stars don't shine\\ntill the heavens burst and the words don't rhyme","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1745759895704498377"],"editableUntil":"2024-01-12T11:49:28.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","18"],"favorite_count":"0","id_str":"1745759895704498377","truncated":false,"retweet_count":"0","id":"1745759895704498377","created_at":"Fri Jan 12 10:49:28 +0000 2024","favorited":false,"full_text":"rainy days of yore","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1744057299646243282"],"editableUntil":"2024-01-07T19:03:57.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","55"],"favorite_count":"0","id_str":"1744057299646243282","truncated":false,"retweet_count":"0","id":"1744057299646243282","created_at":"Sun Jan 07 18:03:57 +0000 2024","favorited":false,"full_text":"\\"So, when all that’s left of me is love, Give me away.\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1743742658453848477"],"editableUntil":"2024-01-06T22:13:41.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","33"],"favorite_count":"0","id_str":"1743742658453848477","truncated":false,"retweet_count":"0","id":"1743742658453848477","created_at":"Sat Jan 06 21:13:41 +0000 2024","favorited":false,"full_text":"Here I am, whatever's left of me.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1742171415414026727"],"editableUntil":"2024-01-02T14:10:08.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","82"],"favorite_count":"0","id_str":"1742171415414026727","truncated":false,"retweet_count":"0","id":"1742171415414026727","created_at":"Tue Jan 02 13:10:08 +0000 2024","favorited":false,"full_text":"Eu fechei meus olhos um dia e hoje os abri. 2 anos haviam se passado. Que loucura.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1741875881075707913"],"editableUntil":"2024-01-01T18:35:47.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","43"],"favorite_count":"0","id_str":"1741875881075707913","truncated":false,"retweet_count":"0","id":"1741875881075707913","created_at":"Mon Jan 01 17:35:47 +0000 2024","favorited":false,"full_text":"From now to infinity let bygones be bygones","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1740503394165657948"],"editableUntil":"2023-12-28T23:42:00.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","91"],"favorite_count":"0","id_str":"1740503394165657948","truncated":false,"retweet_count":"0","id":"1740503394165657948","created_at":"Thu Dec 28 22:42:00 +0000 2023","favorited":false,"full_text":"The less you know about a subject the more you bitch and moan about it like a petulant brat","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1738921182995317215"],"editableUntil":"2023-12-24T14:54:52.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1738921182995317215","truncated":false,"retweet_count":"0","id":"1738921182995317215","created_at":"Sun Dec 24 13:54:52 +0000 2023","favorited":false,"full_text":"a non-obvious yes is a no.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1737553940143579230"],"editableUntil":"2023-12-20T20:21:56.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","121"],"favorite_count":"0","id_str":"1737553940143579230","truncated":false,"retweet_count":"0","id":"1737553940143579230","created_at":"Wed Dec 20 19:21:56 +0000 2023","favorited":false,"full_text":"Auf Wiedersehen, mein Geliebter\\nAuf Wiedersehen, mein Freund\\nDu warst der Eine\\nDu warst die eine für mich\\nich bin so hohl","lang":"de"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1737431468685537688"],"editableUntil":"2023-12-20T12:15:16.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","10"],"favorite_count":"0","id_str":"1737431468685537688","truncated":false,"retweet_count":"0","id":"1737431468685537688","created_at":"Wed Dec 20 11:15:16 +0000 2023","favorited":false,"full_text":"Ich bin du","lang":"de"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1736873415644946820"],"editableUntil":"2023-12-18T23:17:46.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1736873415644946820","truncated":false,"retweet_count":"0","id":"1736873415644946820","created_at":"Mon Dec 18 22:17:46 +0000 2023","favorited":false,"full_text":"I believe in chords resolution.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1735602679848599674"],"editableUntil":"2023-12-15T11:08:19.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","16"],"favorite_count":"0","id_str":"1735602679848599674","truncated":false,"retweet_count":"0","id":"1735602679848599674","created_at":"Fri Dec 15 10:08:19 +0000 2023","favorited":false,"full_text":"stay optimistic.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1735300578706608505"],"editableUntil":"2023-12-14T15:07:52.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","85"],"favorite_count":"0","id_str":"1735300578706608505","truncated":false,"retweet_count":"0","id":"1735300578706608505","created_at":"Thu Dec 14 14:07:52 +0000 2023","favorited":false,"full_text":"Well, I just want to walk right out of this world\\n'Cause everybody has a poison heart","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1734531148947095606"],"editableUntil":"2023-12-12T12:10:26.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","247"],"favorite_count":"0","id_str":"1734531148947095606","truncated":false,"retweet_count":"0","id":"1734531148947095606","created_at":"Tue Dec 12 11:10:26 +0000 2023","favorited":false,"full_text":"We’re born into this world either a seeker or an avoider. To be an avoider is pure bliss. To be a seeker, on the other hand, brings nothing but pain. You will open every door, step into the darkest voids, driven by the urge to gain more knowledge.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1734166861590192151"],"editableUntil":"2023-12-11T12:02:53.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","49"],"favorite_count":"0","id_str":"1734166861590192151","truncated":false,"retweet_count":"0","id":"1734166861590192151","created_at":"Mon Dec 11 11:02:53 +0000 2023","favorited":false,"full_text":"Eu olhei pela janela, nada pareceu tão promissor.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1733820232513327267"],"editableUntil":"2023-12-10T13:05:30.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"user_mentions":[],"urls":[],"symbols":[],"media":[{"expanded_url":"https://x.com/emersondemetrio/status/1733820232513327267/photo/1","indices":["38","61"],"url":"https://t.co/6DnSm00E8C","media_url":"http://pbs.twimg.com/media/GA_EQxHWMAANcUd.png","id_str":"1733820173902032896","id":"1733820173902032896","media_url_https":"https://pbs.twimg.com/media/GA_EQxHWMAANcUd.png","sizes":{"large":{"w":"291","h":"114","resize":"fit"},"small":{"w":"291","h":"114","resize":"fit"},"medium":{"w":"291","h":"114","resize":"fit"},"thumb":{"w":"114","h":"114","resize":"crop"}},"type":"photo","display_url":"pic.x.com/6DnSm00E8C"}],"hashtags":[]},"display_text_range":["0","61"],"favorite_count":"0","id_str":"1733820232513327267","truncated":false,"retweet_count":"0","id":"1733820232513327267","possibly_sensitive":false,"created_at":"Sun Dec 10 12:05:30 +0000 2023","favorited":false,"full_text":"every therapy session I ever went to: https://t.co/6DnSm00E8C","lang":"en","extended_entities":{"media":[{"expanded_url":"https://x.com/emersondemetrio/status/1733820232513327267/photo/1","indices":["38","61"],"url":"https://t.co/6DnSm00E8C","media_url":"http://pbs.twimg.com/media/GA_EQxHWMAANcUd.png","id_str":"1733820173902032896","id":"1733820173902032896","media_url_https":"https://pbs.twimg.com/media/GA_EQxHWMAANcUd.png","sizes":{"large":{"w":"291","h":"114","resize":"fit"},"small":{"w":"291","h":"114","resize":"fit"},"medium":{"w":"291","h":"114","resize":"fit"},"thumb":{"w":"114","h":"114","resize":"crop"}},"type":"photo","display_url":"pic.x.com/6DnSm00E8C"}]}}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1733608139935613365"],"editableUntil":"2023-12-09T23:02:44.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","55"],"favorite_count":"0","id_str":"1733608139935613365","truncated":false,"retweet_count":"0","id":"1733608139935613365","created_at":"Sat Dec 09 22:02:44 +0000 2023","favorited":false,"full_text":"I wished that moment would last forever\\nbut you did not","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1733571211785797641"],"editableUntil":"2023-12-09T20:35:59.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","137"],"favorite_count":"0","id_str":"1733571211785797641","truncated":false,"retweet_count":"0","id":"1733571211785797641","created_at":"Sat Dec 09 19:35:59 +0000 2023","favorited":false,"full_text":"I was sober, now I'm drunk again\\nI'm in trouble and in love again\\nI don't wanna be a dead man walking\\nI don't wanna be a dead man walking","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1733527260433469615"],"editableUntil":"2023-12-09T17:41:20.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","21"],"favorite_count":"0","id_str":"1733527260433469615","truncated":false,"retweet_count":"0","id":"1733527260433469615","created_at":"Sat Dec 09 16:41:20 +0000 2023","favorited":false,"full_text":"Du bist meine Martha.","lang":"de"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1733463077616484852"],"editableUntil":"2023-12-09T13:26:18.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","21"],"favorite_count":"0","id_str":"1733463077616484852","truncated":false,"retweet_count":"0","id":"1733463077616484852","created_at":"Sat Dec 09 12:26:18 +0000 2023","favorited":false,"full_text":"(repeats, fading out)","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1733237624616210580"],"editableUntil":"2023-12-08T22:30:26.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","16"],"favorite_count":"0","id_str":"1733237624616210580","truncated":false,"retweet_count":"0","id":"1733237624616210580","created_at":"Fri Dec 08 21:30:26 +0000 2023","favorited":false,"full_text":"2023 is endless.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1732697730609287432"],"editableUntil":"2023-12-07T10:45:05.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","85"],"favorite_count":"0","id_str":"1732697730609287432","truncated":false,"retweet_count":"0","id":"1732697730609287432","created_at":"Thu Dec 07 09:45:05 +0000 2023","favorited":false,"full_text":"\\"I care deeply about the future because I will spend the rest of my life there\\"\\n\\n- 🔥🚢","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1732102930071760988"],"editableUntil":"2023-12-05T19:21:34.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"http://twitter.com/download/android\\" rel=\\"nofollow\\">Twitter for Android</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","45"],"favorite_count":"0","id_str":"1732102930071760988","truncated":false,"retweet_count":"0","id":"1732102930071760988","created_at":"Tue Dec 05 18:21:34 +0000 2023","favorited":false,"full_text":"Prometo nunca assimilar suas idiossincrasias.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1731049557104992529"],"editableUntil":"2023-12-02T21:35:50.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","40"],"favorite_count":"0","id_str":"1731049557104992529","truncated":false,"retweet_count":"0","id":"1731049557104992529","created_at":"Sat Dec 02 20:35:50 +0000 2023","favorited":false,"full_text":"the distance between explains everything","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1730627599544561948"],"editableUntil":"2023-12-01T17:39:07.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","85"],"favorite_count":"0","id_str":"1730627599544561948","truncated":false,"retweet_count":"0","id":"1730627599544561948","created_at":"Fri Dec 01 16:39:07 +0000 2023","favorited":false,"full_text":"Once I wrote our story in a piece of paper and left it in museum, in the Netherlands.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1730626934868992140"],"editableUntil":"2023-12-01T17:36:29.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"user_mentions":[],"urls":[{"url":"https://t.co/zmeyZWR24J","expanded_url":"https://libraryofbabel.info/bookmark.cgi?alternativeending","display_url":"libraryofbabel.info/bookmark.cgi?a…","indices":["0","23"]}],"symbols":[],"media":[{"expanded_url":"https://x.com/emersondemetrio/status/1730626934868992140/photo/1","indices":["24","47"],"url":"https://t.co/uQnPZuQ2Yq","media_url":"http://pbs.twimg.com/media/GARsAKsWQAAvE-i.png","id_str":"1730626906943275008","id":"1730626906943275008","media_url_https":"https://pbs.twimg.com/media/GARsAKsWQAAvE-i.png","sizes":{"large":{"w":"1494","h":"1384","resize":"fit"},"thumb":{"w":"150","h":"150","resize":"crop"},"medium":{"w":"1200","h":"1112","resize":"fit"},"small":{"w":"680","h":"630","resize":"fit"}},"type":"photo","display_url":"pic.x.com/uQnPZuQ2Yq"}],"hashtags":[]},"display_text_range":["0","47"],"favorite_count":"0","id_str":"1730626934868992140","truncated":false,"retweet_count":"0","id":"1730626934868992140","possibly_sensitive":false,"created_at":"Fri Dec 01 16:36:29 +0000 2023","favorited":false,"full_text":"https://t.co/zmeyZWR24J https://t.co/uQnPZuQ2Yq","lang":"zxx","extended_entities":{"media":[{"expanded_url":"https://x.com/emersondemetrio/status/1730626934868992140/photo/1","indices":["24","47"],"url":"https://t.co/uQnPZuQ2Yq","media_url":"http://pbs.twimg.com/media/GARsAKsWQAAvE-i.png","id_str":"1730626906943275008","id":"1730626906943275008","media_url_https":"https://pbs.twimg.com/media/GARsAKsWQAAvE-i.png","sizes":{"large":{"w":"1494","h":"1384","resize":"fit"},"thumb":{"w":"150","h":"150","resize":"crop"},"medium":{"w":"1200","h":"1112","resize":"fit"},"small":{"w":"680","h":"630","resize":"fit"}},"type":"photo","display_url":"pic.x.com/uQnPZuQ2Yq"}]}}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1730220053168050187"],"editableUntil":"2023-11-30T14:39:41.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","27"],"favorite_count":"0","id_str":"1730220053168050187","truncated":false,"retweet_count":"0","id":"1730220053168050187","created_at":"Thu Nov 30 13:39:41 +0000 2023","favorited":false,"full_text":"I was something before you.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1727419607299010886"],"editableUntil":"2023-11-22T21:11:42.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","50"],"favorite_count":"0","id_str":"1727419607299010886","truncated":false,"retweet_count":"0","id":"1727419607299010886","created_at":"Wed Nov 22 20:11:42 +0000 2023","favorited":false,"full_text":"O mundo acaba hoje, eu estarei dançando. Com você.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1724100760386801925"],"editableUntil":"2023-11-13T17:23:48.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","18"],"favorite_count":"0","id_str":"1724100760386801925","truncated":false,"retweet_count":"0","id":"1724100760386801925","created_at":"Mon Nov 13 16:23:48 +0000 2023","favorited":false,"full_text":"challenge yourself","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1719133746085978140"],"editableUntil":"2023-10-31T00:26:39.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","28"],"favorite_count":"0","id_str":"1719133746085978140","truncated":false,"retweet_count":"0","id":"1719133746085978140","created_at":"Mon Oct 30 23:26:39 +0000 2023","favorited":false,"full_text":"your silence slowly kills me","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1716384949060681790"],"editableUntil":"2023-10-23T10:23:55.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1716384949060681790","truncated":false,"retweet_count":"0","id":"1716384949060681790","created_at":"Mon Oct 23 09:23:55 +0000 2023","favorited":false,"full_text":"Até te vi pela televisão 🤡","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1714576566435315738"],"editableUntil":"2023-10-18T10:38:03.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","16"],"favorite_count":"0","id_str":"1714576566435315738","truncated":false,"retweet_count":"0","id":"1714576566435315738","created_at":"Wed Oct 18 09:38:03 +0000 2023","favorited":false,"full_text":"// TODO fix test","lang":"es"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1714388968035291158"],"editableUntil":"2023-10-17T22:12:36.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","31"],"favorite_count":"0","id_str":"1714388968035291158","truncated":false,"retweet_count":"0","id":"1714388968035291158","created_at":"Tue Oct 17 21:12:36 +0000 2023","favorited":false,"full_text":"\\"Our kindness can cause delays\\"","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1713874658775142844"],"editableUntil":"2023-10-16T12:08:55.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","60"],"favorite_count":"0","id_str":"1713874658775142844","truncated":false,"retweet_count":"0","id":"1713874658775142844","created_at":"Mon Oct 16 11:08:55 +0000 2023","favorited":false,"full_text":"\\"Eu gosto de colecionar frases\\"\\n\\n(I like to collect phrases)","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1713872724966207709"],"editableUntil":"2023-10-16T12:01:14.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","55"],"favorite_count":"0","id_str":"1713872724966207709","truncated":false,"retweet_count":"0","id":"1713872724966207709","created_at":"Mon Oct 16 11:01:14 +0000 2023","favorited":false,"full_text":"Oh my love.\\nAs long as I have you.\\nI don't feel so bad.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1711839576925323433"],"editableUntil":"2023-10-10T21:22:14.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","30"],"favorite_count":"0","id_str":"1711839576925323433","truncated":false,"retweet_count":"0","id":"1711839576925323433","created_at":"Tue Oct 10 20:22:14 +0000 2023","favorited":false,"full_text":"short cuts lead to long delays","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1706976394897399987"],"editableUntil":"2023-09-27T11:17:41.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","16"],"favorite_count":"0","id_str":"1706976394897399987","truncated":false,"retweet_count":"0","id":"1706976394897399987","created_at":"Wed Sep 27 10:17:41 +0000 2023","favorited":false,"full_text":"I wanna go back.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1705608098935648626"],"editableUntil":"2023-09-23T16:40:34.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","94"],"favorite_count":"0","id_str":"1705608098935648626","truncated":false,"retweet_count":"0","id":"1705608098935648626","created_at":"Sat Sep 23 15:40:34 +0000 2023","favorited":false,"full_text":"Tonight, I am not so young\\nSo I won't set the world on fi-re\\nBecause I am ti-red\\nof this life.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1700921728879181998"],"editableUntil":"2023-09-10T18:18:36.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","26"],"favorite_count":"0","id_str":"1700921728879181998","truncated":false,"retweet_count":"0","id":"1700921728879181998","created_at":"Sun Sep 10 17:18:36 +0000 2023","favorited":false,"full_text":"I wanna dance, that's all.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1699716112101855728"],"editableUntil":"2023-09-07T10:27:54.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","94"],"favorite_count":"0","id_str":"1699716112101855728","truncated":false,"retweet_count":"0","id":"1699716112101855728","created_at":"Thu Sep 07 09:27:54 +0000 2023","favorited":false,"full_text":"It's a gas, it's a party on this planet of flakes\\nSomebody take a picture before it's too late","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1696853959065964888"],"editableUntil":"2023-08-30T12:54:44.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","76"],"favorite_count":"0","id_str":"1696853959065964888","truncated":false,"retweet_count":"0","id":"1696853959065964888","created_at":"Wed Aug 30 11:54:44 +0000 2023","favorited":false,"full_text":"funny how you look yourself into the mirror and remind yourself who you are.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1694320603010834785"],"editableUntil":"2023-08-23T13:08:05.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","44"],"favorite_count":"0","id_str":"1694320603010834785","truncated":false,"retweet_count":"0","id":"1694320603010834785","created_at":"Wed Aug 23 12:08:05 +0000 2023","favorited":false,"full_text":"I'll keep you alive, If you show me the way.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1690086343131422720"],"editableUntil":"2023-08-11T20:42:39.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","73"],"favorite_count":"0","id_str":"1690086343131422720","truncated":false,"retweet_count":"0","id":"1690086343131422720","created_at":"Fri Aug 11 19:42:39 +0000 2023","favorited":false,"full_text":"Ontem eu ouvi Rubel. Lembrei de ti. É você que tem os olhos tão gigantes.","lang":"pt"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1688480202316271616"],"editableUntil":"2023-08-07T10:20:25.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","44"],"favorite_count":"0","id_str":"1688480202316271616","truncated":false,"retweet_count":"0","id":"1688480202316271616","created_at":"Mon Aug 07 09:20:25 +0000 2023","favorited":false,"full_text":"I'm not the person who let you down anymore.","lang":"en"}},{"tweet":{"edit_info":{"initial":{"editTweetIds":["1677795693635805184"],"editableUntil":"2023-07-08T22:43:59.000Z","editsRemaining":"5","isEditEligible":true}},"retweeted":false,"source":"<a href=\\"https://mobile.twitter.com\\" rel=\\"nofollow\\">Twitter Web App</a>","entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"display_text_range":["0","150"],"favorite_count":"0","id_str":"1677795693635805184","truncated":false,"retweet_count":"0","id":"1677795693635805184","created_at":"Sat Jul 08 21:43:59 +0000 2023","favorited":false,"full_text":"Everything - Long in the short places, short in the long places. It should be from both the future and the past. Something a child would do to a doll.","lang":"en"}}]`),TWEETS_PER_PAGE=10,sortTweetsByDate=t=>[...t].sort((e,n)=>{const i=new Date(e.tweet.created_at);return new Date(n.tweet.created_at).getTime()-i.getTime()}),useTwitterStore=create((t,e)=>({tweets:sortTweetsByDate(tweets),currentPage:1,getTotalPages:()=>Math.ceil(e().tweets.length/TWEETS_PER_PAGE),error:null,setCurrentPage:n=>{t({currentPage:n})},getCurrentPageTweets:()=>{const{tweets:n,currentPage:i}=e(),o=(i-1)*TWEETS_PER_PAGE,a=o+TWEETS_PER_PAGE;return n.slice(o,a)}})),Blog=()=>{const[t,e]=useSearchParams(),{currentPage:n,getTotalPages:i,setCurrentPage:o,getCurrentPageTweets:a}=useTwitterStore(),l=a(),c=i();reactExports.useEffect(()=>{const s=parseInt(t.get("page")||"1");o(s)},[t]);const p=s=>{o(s),e({page:s.toString()}),window.scrollTo({top:0,behavior:"smooth"})};return jsxRuntimeExports.jsx(Page,{name:"Blog",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto px-4 bg-black min-h-screen",children:[jsxRuntimeExports.jsx("div",{className:"space-y-4 flex flex-col items-center",children:l.map(s=>jsxRuntimeExports.jsx("div",{className:"w-full max-w-[500px] sm:w-[500px]",children:jsxRuntimeExports.jsx(TweetView,{tweet:s.tweet,onClick:()=>{}})},s.id))}),l.length>0&&jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx(Pager,{currentPage:n,totalPages:c,onPrev:()=>p(n-1),onNext:()=>p(n+1)})})]})})},FilePicker=({onFileChange:t})=>{const e=n=>{t(n.target.files)};return jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("label",{htmlFor:"fileInput",children:"Select File(s)"}),jsxRuntimeExports.jsx("input",{multiple:!0,type:"file",id:"fileInput",className:"file-input w-full max-w-xs",onChange:e})]})};var iota_1,hasRequiredIota;function requireIota(){if(hasRequiredIota)return iota_1;hasRequiredIota=1;function t(e){for(var n=new Array(e),i=0;i<e;++i)n[i]=i;return n}return iota_1=t,iota_1}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var isBuffer_1,hasRequiredIsBuffer;function requireIsBuffer(){if(hasRequiredIsBuffer)return isBuffer_1;hasRequiredIsBuffer=1,isBuffer_1=function(n){return n!=null&&(t(n)||e(n)||!!n._isBuffer)};function t(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function e(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&t(n.slice(0,0))}return isBuffer_1}var ndarray,hasRequiredNdarray;function requireNdarray(){if(hasRequiredNdarray)return ndarray;hasRequiredNdarray=1;var t=requireIota(),e=requireIsBuffer(),n=typeof Float64Array<"u";function i(s,u){return s[0]-u[0]}function o(){var s=this.stride,u=new Array(s.length),d;for(d=0;d<u.length;++d)u[d]=[Math.abs(s[d]),d];u.sort(i);var g=new Array(u.length);for(d=0;d<g.length;++d)g[d]=u[d][1];return g}function a(s,u){var d=["View",u,"d",s].join("");u<0&&(d="View_Nil"+s);var g=s==="generic";if(u===-1){var w="function "+d+"(a){this.data=a;};	var proto="+d+".prototype;	proto.dtype='"+s+"';	proto.index=function(){return -1};	proto.size=0;	proto.dimension=-1;	proto.shape=proto.stride=proto.order=[];	proto.lo=proto.hi=proto.transpose=proto.step=	function(){return new "+d+"(this.data);};	proto.get=proto.set=function(){};	proto.pick=function(){return null};	return function construct_"+d+"(a){return new "+d+"(a);}",Ce=new Function(w);return Ce()}else if(u===0){var w="function "+d+"(a,d) {	this.data = a;	this.offset = d	};	var proto="+d+".prototype;	proto.dtype='"+s+"';	proto.index=function(){return this.offset};	proto.dimension=0;	proto.size=1;	proto.shape=	proto.stride=	proto.order=[];	proto.lo=	proto.hi=	proto.transpose=	proto.step=function "+d+"_copy() {	return new "+d+"(this.data,this.offset)	};	proto.pick=function "+d+"_pick(){	return TrivialArray(this.data);	};	proto.valueOf=proto.get=function "+d+"_get(){	return "+(g?"this.data.get(this.offset)":"this.data[this.offset]")+"};	proto.set=function "+d+"_set(v){	return "+(g?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"	};	return function construct_"+d+"(a,b,c,d){return new "+d+"(a,d)}",Ce=new Function("TrivialArray",w);return Ce(c[s][0])}var w=["'use strict'"],x=t(u),C=x.map(function(He){return"i"+He}),O="this.offset+"+x.map(function(He){return"this.stride["+He+"]*i"+He}).join("+"),Y=x.map(function(He){return"b"+He}).join(","),q=x.map(function(He){return"c"+He}).join(",");w.push("function "+d+"(a,"+Y+","+q+",d){this.data=a","this.shape=["+Y+"]","this.stride=["+q+"]","this.offset=d|0}","var proto="+d+".prototype","proto.dtype='"+s+"'","proto.dimension="+u),w.push("Object.defineProperty(proto,'size',{get:function "+d+"_size(){	return "+x.map(function(He){return"this.shape["+He+"]"}).join("*"),"}})"),u===1?w.push("proto.order=[0]"):(w.push("Object.defineProperty(proto,'order',{get:"),u<4?(w.push("function "+d+"_order(){"),u===2?w.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):u===3&&w.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);	if(s0>s1){	if(s1>s2){	return [2,1,0];	}else if(s0>s2){	return [1,2,0];	}else{	return [1,0,2];	}	}else if(s0>s2){	return [2,0,1];	}else if(s2>s1){	return [0,1,2];	}else{	return [0,2,1];	}}})")):w.push("ORDER})")),w.push("proto.set=function "+d+"_set("+C.join(",")+",v){"),g?w.push("return this.data.set("+O+",v)}"):w.push("return this.data["+O+"]=v}"),w.push("proto.get=function "+d+"_get("+C.join(",")+"){"),g?w.push("return this.data.get("+O+")}"):w.push("return this.data["+O+"]}"),w.push("proto.index=function "+d+"_index(",C.join(),"){return "+O+"}"),w.push("proto.hi=function "+d+"_hi("+C.join(",")+"){return new "+d+"(this.data,"+x.map(function(He){return["(typeof i",He,"!=='number'||i",He,"<0)?this.shape[",He,"]:i",He,"|0"].join("")}).join(",")+","+x.map(function(He){return"this.stride["+He+"]"}).join(",")+",this.offset)}");var ue=x.map(function(He){return"a"+He+"=this.shape["+He+"]"}),pe=x.map(function(He){return"c"+He+"=this.stride["+He+"]"});w.push("proto.lo=function "+d+"_lo("+C.join(",")+"){var b=this.offset,d=0,"+ue.join(",")+","+pe.join(","));for(var se=0;se<u;++se)w.push("if(typeof i"+se+"==='number'&&i"+se+">=0){	d=i"+se+"|0;	b+=c"+se+"*d;	a"+se+"-=d}");w.push("return new "+d+"(this.data,"+x.map(function(He){return"a"+He}).join(",")+","+x.map(function(He){return"c"+He}).join(",")+",b)}"),w.push("proto.step=function "+d+"_step("+C.join(",")+"){var "+x.map(function(He){return"a"+He+"=this.shape["+He+"]"}).join(",")+","+x.map(function(He){return"b"+He+"=this.stride["+He+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var se=0;se<u;++se)w.push("if(typeof i"+se+"==='number'){	d=i"+se+"|0;	if(d<0){	c+=b"+se+"*(a"+se+"-1);	a"+se+"=ceil(-a"+se+"/d)	}else{	a"+se+"=ceil(a"+se+"/d)	}	b"+se+"*=d	}");w.push("return new "+d+"(this.data,"+x.map(function(He){return"a"+He}).join(",")+","+x.map(function(He){return"b"+He}).join(",")+",c)}");for(var Re=new Array(u),Oe=new Array(u),se=0;se<u;++se)Re[se]="a[i"+se+"]",Oe[se]="b[i"+se+"]";w.push("proto.transpose=function "+d+"_transpose("+C+"){"+C.map(function(He,$t){return He+"=("+He+"===undefined?"+$t+":"+He+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+d+"(this.data,"+Re.join(",")+","+Oe.join(",")+",this.offset)}"),w.push("proto.pick=function "+d+"_pick("+C+"){var a=[],b=[],c=this.offset");for(var se=0;se<u;++se)w.push("if(typeof i"+se+"==='number'&&i"+se+">=0){c=(c+this.stride["+se+"]*i"+se+")|0}else{a.push(this.shape["+se+"]);b.push(this.stride["+se+"])}");w.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),w.push("return function construct_"+d+"(data,shape,stride,offset){return new "+d+"(data,"+x.map(function(He){return"shape["+He+"]"}).join(",")+","+x.map(function(He){return"stride["+He+"]"}).join(",")+",offset)}");var Ce=new Function("CTOR_LIST","ORDER",w.join(`
`));return Ce(c[s],o)}function l(s){if(e(s))return"buffer";if(n)switch(Object.prototype.toString.call(s)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(s)?"array":"generic"}var c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function p(s,u,d,g){if(s===void 0){var q=c.array[0];return q([])}else typeof s=="number"&&(s=[s]);u===void 0&&(u=[s.length]);var w=u.length;if(d===void 0){d=new Array(w);for(var x=w-1,C=1;x>=0;--x)d[x]=C,C*=u[x]}if(g===void 0){g=0;for(var x=0;x<w;++x)d[x]<0&&(g-=(u[x]-1)*d[x])}for(var O=l(s),Y=c[O];Y.length<=w+1;)Y.push(a(O,Y.length-1));var q=Y[w+1];return q(s,u,d,g)}return ndarray=p,ndarray}var ndarrayExports=requireNdarray();const ndarray4=getDefaultExportFromCjs(ndarrayExports);/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var vd$1=Object.create,Pn$1=Object.defineProperty,_d$1=Object.getOwnPropertyDescriptor,Od$1=Object.getOwnPropertyNames,Id$1=Object.getPrototypeOf,Sd$1=Object.prototype.hasOwnProperty,L=(t,e)=>()=>(t&&(e=t(t=0)),e),me=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Sr=(t,e)=>{for(var n in e)Pn$1(t,n,{get:e[n],enumerable:!0})},Va$1=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Od$1(e))!Sd$1.call(t,o)&&o!==n&&Pn$1(t,o,{get:()=>e[o],enumerable:!(i=_d$1(e,o))||i.enumerable});return t},Ar=(t,e,n)=>(n=t!=null?vd$1(Id$1(t)):{},Va$1(!t||!t.__esModule?Pn$1(n,"default",{value:t,enumerable:!0}):n,t)),ar=t=>Va$1(Pn$1({},"__esModule",{value:!0}),t),En,sr$1,Pr$1,Ad$1,Dn$1,Ln$1=L(()=>{En=new Map,sr$1=[],Pr$1=(t,e,n)=>{if(e&&typeof e.init=="function"&&typeof e.createInferenceSessionHandler=="function"){let i=En.get(t);if(i===void 0)En.set(t,{backend:e,priority:n});else{if(i.priority>n)return;if(i.priority===n&&i.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${n}`)}if(n>=0){let o=sr$1.indexOf(t);o!==-1&&sr$1.splice(o,1);for(let a=0;a<sr$1.length;a++)if(En.get(sr$1[a]).priority<=n){sr$1.splice(a,0,t);return}sr$1.push(t)}return}throw new TypeError("not a valid backend")},Ad$1=async t=>{let e=En.get(t);if(!e)return"backend not found.";if(e.initialized)return e.backend;if(e.aborted)return e.error;{let n=!!e.initPromise;try{return n||(e.initPromise=e.backend.init(t)),await e.initPromise,e.initialized=!0,e.backend}catch(i){return n||(e.error=`${i}`,e.aborted=!0),e.error}finally{delete e.initPromise}}},Dn$1=async t=>{let e=t.executionProviders||[],n=e.map(p=>typeof p=="string"?p:p.name),i=n.length===0?sr$1:n,o,a=[],l=new Set;for(let p of i){let s=await Ad$1(p);typeof s=="string"?a.push({name:p,err:s}):(o||(o=s),o===s&&l.add(p))}if(!o)throw new Error(`no available backend found. ERR: ${a.map(p=>`[${p.name}] ${p.err}`).join(", ")}`);for(let{name:p,err:s}of a)n.includes(p)&&console.warn(`removing requested execution provider "${p}" from session options because it is not available: ${s}`);let c=e.filter(p=>l.has(typeof p=="string"?p:p.name));return[o,new Proxy(t,{get:(p,s)=>s==="executionProviders"?c:Reflect.get(p,s)})]}}),Wa=L(()=>{Ln$1()}),Ha$1,qa$1=L(()=>{Ha$1="1.18.0"}),ja$1,ut$1,Vo=L(()=>{qa$1(),ja$1="warning",ut$1={wasm:{},webgl:{},webgpu:{},versions:{common:Ha$1},set logLevel(t){if(t!==void 0){if(typeof t!="string"||["verbose","info","warning","error","fatal"].indexOf(t)===-1)throw new Error(`Unsupported logging level: ${t}`);ja$1=t}},get logLevel(){return ja$1}},Object.defineProperty(ut$1,"logLevel",{enumerable:!0})}),Z,Ya$1=L(()=>{Vo(),Z=ut$1}),Xa$1,Ka$1,Ja$1=L(()=>{Xa$1=(t,e)=>{let n=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);n.width=t.dims[3],n.height=t.dims[2];let i=n.getContext("2d");if(i!=null){let o,a;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],a=t.dims[3]):(o=t.dims[3],a=t.dims[2]);let l=e?.format!==void 0?e.format:"RGB",c=e?.norm,p,s;c===void 0||c.mean===void 0?p=[255,255,255,255]:typeof c.mean=="number"?p=[c.mean,c.mean,c.mean,c.mean]:(p=[c.mean[0],c.mean[1],c.mean[2],0],c.mean[3]!==void 0&&(p[3]=c.mean[3])),c===void 0||c.bias===void 0?s=[0,0,0,0]:typeof c.bias=="number"?s=[c.bias,c.bias,c.bias,c.bias]:(s=[c.bias[0],c.bias[1],c.bias[2],0],c.bias[3]!==void 0&&(s[3]=c.bias[3]));let u=a*o,d=0,g=u,w=u*2,x=-1;l==="RGBA"?(d=0,g=u,w=u*2,x=u*3):l==="RGB"?(d=0,g=u,w=u*2):l==="RBG"&&(d=0,w=u,g=u*2);for(let C=0;C<a;C++)for(let O=0;O<o;O++){let Y=(t.data[d++]-s[0])*p[0],q=(t.data[g++]-s[1])*p[1],ue=(t.data[w++]-s[2])*p[2],pe=x===-1?255:(t.data[x++]-s[3])*p[3];i.fillStyle="rgba("+Y+","+q+","+ue+","+pe+")",i.fillRect(O,C,1,1)}if("toDataURL"in n)return n.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Ka$1=(t,e)=>{let n=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),i;if(n!=null){let o,a,l;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],a=t.dims[1],l=t.dims[3]):(o=t.dims[3],a=t.dims[2],l=t.dims[1]);let c=e!==void 0&&e.format!==void 0?e.format:"RGB",p=e?.norm,s,u;p===void 0||p.mean===void 0?s=[255,255,255,255]:typeof p.mean=="number"?s=[p.mean,p.mean,p.mean,p.mean]:(s=[p.mean[0],p.mean[1],p.mean[2],255],p.mean[3]!==void 0&&(s[3]=p.mean[3])),p===void 0||p.bias===void 0?u=[0,0,0,0]:typeof p.bias=="number"?u=[p.bias,p.bias,p.bias,p.bias]:(u=[p.bias[0],p.bias[1],p.bias[2],0],p.bias[3]!==void 0&&(u[3]=p.bias[3]));let d=a*o;if(e!==void 0&&(e.format!==void 0&&l===4&&e.format!=="RGBA"||l===3&&e.format!=="RGB"&&e.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let g=4,w=0,x=1,C=2,O=3,Y=0,q=d,ue=d*2,pe=-1;c==="RGBA"?(Y=0,q=d,ue=d*2,pe=d*3):c==="RGB"?(Y=0,q=d,ue=d*2):c==="RBG"&&(Y=0,ue=d,q=d*2),i=n.createImageData(o,a);for(let se=0;se<a*o;w+=g,x+=g,C+=g,O+=g,se++)i.data[w]=(t.data[Y++]-u[0])*s[0],i.data[x]=(t.data[q++]-u[1])*s[1],i.data[C]=(t.data[ue++]-u[2])*s[2],i.data[O]=pe===-1?255:(t.data[pe++]-u[3])*s[3]}else throw new Error("Can not access image data");return i}}),Wo,Za$1,Qa$1,es$1,ts$1,rs$1=L(()=>{Cn(),Wo=(t,e)=>{if(t===void 0)throw new Error("Image buffer must be defined");if(e.height===void 0||e.width===void 0)throw new Error("Image height and width must be defined");if(e.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:n,width:i}=e,o=e.norm??{mean:255,bias:0},a,l;typeof o.mean=="number"?a=[o.mean,o.mean,o.mean,o.mean]:a=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?l=[o.bias,o.bias,o.bias,o.bias]:l=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];let c=e.format!==void 0?e.format:"RGBA",p=e.tensorFormat!==void 0&&e.tensorFormat!==void 0?e.tensorFormat:"RGB",s=n*i,u=p==="RGBA"?new Float32Array(s*4):new Float32Array(s*3),d=4,g=0,w=1,x=2,C=3,O=0,Y=s,q=s*2,ue=-1;c==="RGB"&&(d=3,g=0,w=1,x=2,C=-1),p==="RGBA"?ue=s*3:p==="RBG"?(O=0,q=s,Y=s*2):p==="BGR"&&(q=0,Y=s,O=s*2);for(let pe=0;pe<s;pe++,g+=d,x+=d,w+=d,C+=d)u[O++]=(t[g]+l[0])/a[0],u[Y++]=(t[w]+l[1])/a[1],u[q++]=(t[x]+l[2])/a[2],ue!==-1&&C!==-1&&(u[ue++]=(t[C]+l[3])/a[3]);return p==="RGBA"?new Je("float32",u,[1,4,n,i]):new Je("float32",u,[1,3,n,i])},Za$1=async(t,e)=>{let n=typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement,i=typeof ImageData<"u"&&t instanceof ImageData,o=typeof ImageBitmap<"u"&&t instanceof ImageBitmap,a=typeof t=="string",l,c=e??{},p=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},s=u=>u instanceof HTMLCanvasElement||u instanceof OffscreenCanvas?u.getContext("2d"):null;if(n){let u=p();u.width=t.width,u.height=t.height;let d=s(u);if(d!=null){let g=t.height,w=t.width;if(e!==void 0&&e.resizedHeight!==void 0&&e.resizedWidth!==void 0&&(g=e.resizedHeight,w=e.resizedWidth),e!==void 0){if(c=e,e.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");c.tensorFormat="RGBA",c.height=g,c.width=w}else c.tensorFormat="RGBA",c.height=g,c.width=w;d.drawImage(t,0,0),l=d.getImageData(0,0,w,g).data}else throw new Error("Can not access image data")}else if(i){let u,d;if(e!==void 0&&e.resizedWidth!==void 0&&e.resizedHeight!==void 0?(u=e.resizedHeight,d=e.resizedWidth):(u=t.height,d=t.width),e!==void 0&&(c=e),c.format="RGBA",c.height=u,c.width=d,e!==void 0){let g=p();g.width=d,g.height=u;let w=s(g);if(w!=null)w.putImageData(t,0,0),l=w.getImageData(0,0,d,u).data;else throw new Error("Can not access image data")}else l=t.data}else if(o){if(e===void 0)throw new Error("Please provide image config with format for Imagebitmap");let u=p();u.width=t.width,u.height=t.height;let d=s(u);if(d!=null){let g=t.height,w=t.width;return d.drawImage(t,0,0,w,g),l=d.getImageData(0,0,w,g).data,c.height=g,c.width=w,Wo(l,c)}else throw new Error("Can not access image data")}else{if(a)return new Promise((u,d)=>{let g=p(),w=s(g);if(!t||!w)return d();let x=new Image;x.crossOrigin="Anonymous",x.src=t,x.onload=()=>{g.width=x.width,g.height=x.height,w.drawImage(x,0,0,g.width,g.height);let C=w.getImageData(0,0,g.width,g.height);c.height=g.height,c.width=g.width,u(Wo(C.data,c))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(l!==void 0)return Wo(l,c);throw new Error("Input data provided is not supported - aborted tensor creation")},Qa$1=(t,e)=>{let{width:n,height:i,download:o,dispose:a}=e,l=[1,i,n,4];return new Je({location:"texture",type:"float32",texture:t,dims:l,download:o,dispose:a})},es$1=(t,e)=>{let{dataType:n,dims:i,download:o,dispose:a}=e;return new Je({location:"gpu-buffer",type:n??"float32",gpuBuffer:t,dims:i,download:o,dispose:a})},ts$1=(t,e,n)=>new Je({location:"cpu-pinned",type:t,data:e,dims:n??[e.length]})}),ur$1,Qr$1,ns,os$1,is$1=L(()=>{ur$1=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Qr$1=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ns=!1,os$1=()=>{if(!ns){ns=!0;let t=typeof BigInt64Array<"u"&&BigInt64Array.from,e=typeof BigUint64Array<"u"&&BigUint64Array.from,n=typeof Float16Array<"u"&&Float16Array.from;t&&(ur$1.set("int64",BigInt64Array),Qr$1.set(BigInt64Array,"int64")),e&&(ur$1.set("uint64",BigUint64Array),Qr$1.set(BigUint64Array,"uint64")),n?(ur$1.set("float16",Float16Array),Qr$1.set(Float16Array,"float16")):ur$1.set("float16",Uint16Array)}}}),as$1,ss$1,us$1=L(()=>{Cn(),as$1=t=>{let e=1;for(let n=0;n<t.length;n++){let i=t[n];if(typeof i!="number"||!Number.isSafeInteger(i))throw new TypeError(`dims[${n}] must be an integer, got: ${i}`);if(i<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${i}`);e*=i}return e},ss$1=(t,e)=>{switch(t.location){case"cpu":return new Je(t.type,t.data,e);case"cpu-pinned":return new Je({location:"cpu-pinned",data:t.data,type:t.type,dims:e});case"texture":return new Je({location:"texture",texture:t.texture,type:t.type,dims:e});case"gpu-buffer":return new Je({location:"gpu-buffer",gpuBuffer:t.gpuBuffer,type:t.type,dims:e});default:throw new Error(`tensorReshape: tensor location ${t.location} is not supported`)}}}),Je,Cn=L(()=>{Ja$1(),rs$1(),is$1(),us$1(),Je=class{constructor(t,e,n){os$1();let i,o;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,i=t.type,o=t.dims,t.location){case"cpu-pinned":{let l=ur$1.get(i);if(!l)throw new TypeError(`unsupported type "${i}" to create tensor from pinned buffer`);if(!(t.data instanceof l))throw new TypeError(`buffer should be of type ${l.name}`);this.cpuData=t.data;break}case"texture":{if(i!=="float32")throw new TypeError(`unsupported type "${i}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(i!=="float32"&&i!=="float16"&&i!=="int32"&&i!=="int64"&&i!=="uint32"&&i!=="uint8"&&i!=="bool")throw new TypeError(`unsupported type "${i}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let l,c;if(typeof t=="string")if(i=t,c=n,t==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");l=e}else{let p=ur$1.get(t);if(p===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e)){if(t==="float16"&&p===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t==="uint64"||t==="int64"?l=p.from(e,BigInt):l=p.from(e)}else if(e instanceof p)l=e;else throw new TypeError(`A ${i} tensor's data must be type of ${p}`)}else if(c=e,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let p=typeof t[0];if(p==="string")i="string",l=t;else if(p==="boolean")i="bool",l=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${p}.`)}else{let p=Qr$1.get(t.constructor);if(p===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);i=p,l=t}if(c===void 0)c=[l.length];else if(!Array.isArray(c))throw new TypeError("A tensor's dims must be a number array");o=c,this.cpuData=l,this.dataLocation="cpu"}let a=as$1(o);if(this.cpuData&&a!==this.cpuData.length)throw new Error(`Tensor's size(${a}) does not match data length(${this.cpuData.length}).`);this.type=i,this.dims=o,this.size=a}static async fromImage(t,e){return Za$1(t,e)}static fromTexture(t,e){return Qa$1(t,e)}static fromGpuBuffer(t,e){return es$1(t,e)}static fromPinnedBuffer(t,e,n){return ts$1(t,e,n)}toDataURL(t){return Xa$1(this,t)}toImageData(t){return Ka$1(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,t&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ss$1(this,t)}}}),Me,Fn$1=L(()=>{Cn(),Me=Je}),ls$1,fs$1,lr$1,fr$1,Ho=L(()=>{Vo(),ls$1=(t,e)=>{(typeof ut$1.trace>"u"?!ut$1.wasm.trace:!ut$1.trace)||console.timeStamp(`${t}::ORT::${e}`)},fs$1=(t,e)=>{let n=new Error().stack?.split(/\r\n|\r|\n/g)||[],i=!1;for(let o=0;o<n.length;o++){if(i&&!n[o].includes("TRACE_FUNC")){let a=`FUNC_${t}::${n[o].trim().split(" ")[1]}`;e&&(a+=`::${e}`),ls$1("CPU",a);return}n[o].includes("TRACE_FUNC")&&(i=!0)}},lr$1=t=>{(typeof ut$1.trace>"u"?!ut$1.wasm.trace:!ut$1.trace)||fs$1("BEGIN",t)},fr$1=t=>{(typeof ut$1.trace>"u"?!ut$1.wasm.trace:!ut$1.trace)||fs$1("END",t)}}),$n,cs$1=L(()=>{Ln$1(),Fn$1(),Ho(),$n=class h4{constructor(e){this.handler=e}async run(e,n,i){lr$1();let o={},a={};if(typeof e!="object"||e===null||e instanceof Me||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof n=="object"){if(n===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(n.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let s of n){if(typeof s!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(s)===-1)throw new RangeError(`'fetches' contains invalid output name: ${s}.`);o[s]=null}if(typeof i=="object"&&i!==null)a=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else{let s=!1,u=Object.getOwnPropertyNames(n);for(let d of this.outputNames)if(u.indexOf(d)!==-1){let g=n[d];(g===null||g instanceof Me)&&(s=!0,l=!1,o[d]=g)}if(s){if(typeof i=="object"&&i!==null)a=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else a=n}}else if(typeof n<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s of this.inputNames)if(typeof e[s]>"u")throw new Error(`input '${s}' is missing in 'feeds'.`);if(l)for(let s of this.outputNames)o[s]=null;let c=await this.handler.run(e,o,a),p={};for(let s in c)if(Object.hasOwnProperty.call(c,s)){let u=c[s];u instanceof Me?p[s]=u:p[s]=new Me(u.type,u.data,u.dims)}return fr$1(),p}async release(){return this.handler.dispose()}static async create(e,n,i,o){lr$1();let a,l={};if(typeof e=="string"){if(a=e,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(a=e,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){let u=e,d=0,g=e.byteLength;if(typeof n=="object"&&n!==null)l=n;else if(typeof n=="number"){if(d=n,!Number.isSafeInteger(d))throw new RangeError("'byteOffset' must be an integer.");if(d<0||d>=u.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${u.byteLength}).`);if(g=e.byteLength-d,typeof i=="number"){if(g=i,!Number.isSafeInteger(g))throw new RangeError("'byteLength' must be an integer.");if(g<=0||d+g>u.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${u.byteLength-d}].`);if(typeof o=="object"&&o!==null)l=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof i<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof n<"u")throw new TypeError("'options' must be an object.");a=new Uint8Array(u,d,g)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[c,p]=await Dn$1(l),s=await c.createInferenceSessionHandler(a,p);return fr$1(),new h4(s)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),Pd$1,ps$1=L(()=>{cs$1(),Pd$1=$n}),ds$1=L(()=>{}),hs$1=L(()=>{}),ms$1=L(()=>{}),bs$1=L(()=>{}),Ed$1,kn$1,gs$1=L(()=>{Ln$1(),Fn$1(),Ed$1="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",kn$1=class m4{constructor(e,n,i){this.handler=e,this.hasOptimizerModel=n,this.hasEvalModel=i}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(e,n){let i=e.evalModel||"",o=e.optimizerModel||"",a=n||{},[l,c]=await Dn$1(a);if(l.createTrainingSessionHandler){let p=await l.createTrainingSessionHandler(e.checkpointState,e.trainModel,i,o,c);return new m4(p,!!e.optimizerModel,!!e.evalModel)}else throw new Error(Ed$1)}typeNarrowingForRunStep(e,n,i,o,a){let l={},c={};if(typeof i!="object"||i===null||i instanceof Me||Array.isArray(i))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let p=!0;if(typeof o=="object"){if(o===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(o instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(o)){if(o.length===0)throw new TypeError("'fetches' cannot be an empty array.");p=!1;for(let s of o){if(typeof s!="string")throw new TypeError("'fetches' must be a string array or an object.");if(n.indexOf(s)===-1)throw new RangeError(`'fetches' contains invalid output name: ${s}.`);l[s]=null}if(typeof a=="object"&&a!==null)c=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{let s=!1,u=Object.getOwnPropertyNames(o);for(let d of n)if(u.indexOf(d)!==-1){let g=o[d];(g===null||g instanceof Me)&&(s=!0,p=!1,l[d]=g)}if(s){if(typeof a=="object"&&a!==null)c=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else c=o}}else if(typeof o<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s of e)if(typeof i[s]>"u")throw new Error(`input '${s}' is missing in 'feeds'.`);if(p)for(let s of n)l[s]=null;return[l,c]}convertHandlerReturnTypeToMapOfTensors(e){let n={};for(let i in e)if(Object.hasOwnProperty.call(e,i)){let o=e[i];o instanceof Me?n[i]=o:n[i]=new Me(o.type,o.data,o.dims)}return n}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(e,n,i){let[o,a]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,n,i),l=await this.handler.runTrainStep(e,o,a);return this.convertHandlerReturnTypeToMapOfTensors(l)}async runOptimizerStep(e){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(e||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(e,n,i){if(this.hasEvalModel){let[o,a]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,n,i),l=await this.handler.runEvalStep(e,o,a);return this.convertHandlerReturnTypeToMapOfTensors(l)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(e=!0){return this.handler.getParametersSize(e)}async loadParametersBuffer(e,n=!0){let i=await this.getParametersSize(n);if(e.length!==4*i)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,n)}async getContiguousParameters(e=!0){return this.handler.getContiguousParameters(e)}async release(){return this.handler.dispose()}}}),Dd$1,ys$1=L(()=>{gs$1(),Dd$1=kn$1}),qo={};Sr(qo,{InferenceSession:()=>Pd$1,TRACE:()=>ls$1,TRACE_FUNC_BEGIN:()=>lr$1,TRACE_FUNC_END:()=>fr$1,Tensor:()=>Me,TrainingSession:()=>Dd$1,env:()=>Z,registerBackend:()=>Pr$1});var Ot$1=L(()=>{Wa(),Ya$1(),ps$1(),Fn$1(),ds$1(),hs$1(),Ho(),ms$1(),bs$1(),ys$1()});function Xt$1(t,e,n,i){if(e===void 0)return Cd$1(t);if(n===void 0)Bn$1(t,e);else if(typeof n=="number"&&i===void 0)Bn$1(t,e);else if(typeof n=="string"&&i===void 0)Bn$1(t,n,1,e);else if(typeof n=="string"&&typeof i=="number")Bn$1(t,n,i,e);else throw new TypeError("input is valid")}function Cd$1(t){return{verbose:Xt$1.verbose.bind(null,t),info:Xt$1.info.bind(null,t),warning:Xt$1.warning.bind(null,t),error:Xt$1.error.bind(null,t),fatal:Xt$1.fatal.bind(null,t)}}function Bn$1(t,e,n,i){let o=en$1[i||""]||en$1[""];xs$1[t]<xs$1[o.minimalSeverity]||(o.logDateTime&&(e=`${new Date().toISOString()}|${e}`),o.logSourceLocation,Ld$1[o.provider].log(t,e,i))}var jo,Yo,xs$1,Ld$1,ws$1,en$1,ce,Rn$1,Mn$1,Gn$1,Nn$1,lt$1=L(()=>{jo=class{log(t,e,n){}},Yo=class{log(t,e,n){console.log(`${this.color(t)} ${n?"\x1B[35m"+n+"\x1B[0m ":""}${e}`)}color(t){switch(t){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${t}`)}}},xs$1={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Ld$1={none:new jo,console:new Yo},ws$1={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},en$1={"":ws$1},(t=>{function e(s,u){t("verbose",s,u)}t.verbose=e;function n(s,u){t("info",s,u)}t.info=n;function i(s,u){t("warning",s,u)}t.warning=i;function o(s,u){t("error",s,u)}t.error=o;function a(s,u){t("fatal",s,u)}t.fatal=a;function l(s){en$1={},c("",s||{})}t.reset=l;function c(s,u){if(s==="*")l(u);else{let d=en$1[s]||ws$1;en$1[s]={provider:u.provider||d.provider,minimalSeverity:u.minimalSeverity||d.minimalSeverity,logDateTime:u.logDateTime===void 0?d.logDateTime:u.logDateTime,logSourceLocation:u.logSourceLocation===void 0?d.logSourceLocation:u.logSourceLocation}}}t.set=c;function p(s){let u={};s.logLevel&&(u.minimalSeverity=s.logLevel),c("",u)}t.setWithEnv=p})(Xt$1||={}),ce=Xt$1,Rn$1=class{constructor(t,e,n,i,o,a){this.category=t,this.name=e,this.startTime=n,this.endCallback=i,this.timer=o,this.ctx=a}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}},Mn$1=class{constructor(t,e,n,i){this.category=t,this.name=e,this.startTime=n,this.endTime=i}},Gn$1=class{constructor(t,e,n){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=t===void 0?1e4:t,this._flushBatchSize=e===void 0?10:e,this._flushIntervalInMilliseconds=n===void 0?5e3:n}static create(t){return t===void 0?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=Nn$1(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(t,e,n,i){let o=this._started?this.begin(t,e,i):void 0,a=!1,l=n();if(l&&typeof l.then=="function")return a=!0,new Promise((c,p)=>{l.then(async s=>{o&&await o.end(),c(s)},async s=>{o&&await o.end(),p(s)})});if(!a&&o){let c=o.end();if(c&&typeof c.then=="function")return new Promise((p,s)=>{c.then(()=>{p(l)},u=>{s(u)})})}return l}begin(t,e,n){if(!this._started)throw new Error("profiler is not started yet");if(n===void 0){let i=Nn$1();return this.flush(i),new Rn$1(t,e,i,o=>this.endSync(o))}else{let i=n.beginTimer();return new Rn$1(t,e,0,async o=>this.end(o),i,n)}}async end(t){let e=await t.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn$1(t.category,t.name,t.startTime,e)),this.flush(e))}endSync(t){let e=Nn$1();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn$1(t.category,t.name,t.startTime,e)),this.flush(e))}logOneEvent(t){ce.verbose(`Profiler.${t.category}`,`${(t.endTime-t.startTime).toFixed(2)}ms on event '${t.name}' at ${t.endTime.toFixed(2)}`)}flush(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(let e=this._flushPointer;this._flushPointer<e+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=Nn$1()}}get started(){return this._started}},Nn$1=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function vs$1(t,e,n){for(let i of n){let o=i[0],a=i[1],l=i[2],c=i[3],p=i[4];if(t.opType===o){for(let s of e)if((s.domain===a||s.domain==="ai.onnx"&&a==="")&&Fd$1(s.version,l))return{opImpl:c,opInit:p}}}throw new TypeError(`cannot resolve operator '${t.opType}' with opsets: ${e.map(i=>`${i.domain||"ai.onnx"} v${i.version}`).join(", ")}`)}function Fd$1(t,e){if(e.endsWith("+")){let n=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(n)&&n<=t}else if(e.split("-").length===2){let n=e.split("-"),i=Number.parseInt(n[0],10),o=Number.parseInt(n[1],10);return!isNaN(i)&&!isNaN(o)&&i<=t&&t<=o}else return Number.parseInt(e,10)===t}var _s$1=L(()=>{}),Os$1=me(t=>{t.__esModule=!0;var e=(function(){function n(i){if(!i)throw new TypeError("Invalid argument; `value` has no value.");this.value=n.EMPTY,i&&n.isGuid(i)&&(this.value=i)}return n.isGuid=function(i){var o=i.toString();return i&&(i instanceof n||n.validator.test(o))},n.create=function(){return new n([n.gen(2),n.gen(1),n.gen(1),n.gen(1),n.gen(3)].join("-"))},n.createEmpty=function(){return new n("emptyguid")},n.parse=function(i){return new n(i)},n.raw=function(){return[n.gen(2),n.gen(1),n.gen(1),n.gen(1),n.gen(3)].join("-")},n.gen=function(i){for(var o="",a=0;a<i;a++)o+=((1+Math.random())*65536|0).toString(16).substring(1);return o},n.prototype.equals=function(i){return n.isGuid(i)&&this.value===i.toString()},n.prototype.isEmpty=function(){return this.value===n.EMPTY},n.prototype.toString=function(){return this.value},n.prototype.toJSON=function(){return{value:this.value}},n.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),n.EMPTY="00000000-0000-0000-0000-000000000000",n})();t.Guid=e});function be(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}function Xe(t){return(t&&t.__isLong__)===!0}function Is$1(t){var e=Math.clz32(t&-t);return t?31-e:e}function cr$1(t,e){var n,i,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(i=As$1[t],i)?i:(n=le(t,0,!0),o&&(As$1[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(i=Ss$1[t],i)?i:(n=le(t,t<0?-1:0,!1),o&&(Ss$1[t]=n),n))}function ct(t,e){if(isNaN(t))return e?zt$1:It;if(e){if(t<0)return zt$1;if(t>=Ls$1)return $s$1}else{if(t<=-Es$1)return nt$1;if(t+1>=Es$1)return Fs$1}return t<0?ct(-t,e).neg():le(t%Dr|0,t/Dr|0,e)}function le(t,e,n){return new be(t,e,n)}function Jo(t,e,n){if(t.length===0)throw Error("empty string");if(typeof e=="number"?(n=e,e=!1):e=!!e,t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e?zt$1:It;if(n=n||10,n<2||36<n)throw RangeError("radix");var i;if((i=t.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return Jo(t.substring(1),e,n).neg();for(var o=ct(Un$1(n,8)),a=It,l=0;l<t.length;l+=8){var c=Math.min(8,t.length-l),p=parseInt(t.substring(l,l+c),n);if(c<8){var s=ct(Un$1(n,c));a=a.mul(s).add(ct(p))}else a=a.mul(o),a=a.add(ct(p))}return a.unsigned=e,a}function St$1(t,e){return typeof t=="number"?ct(t,e):typeof t=="string"?Jo(t,e):le(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}var ft,Ss$1,As$1,Un$1,Ps$1,kd$1,Dr,Ls$1,Es$1,Ds$1,It,zt$1,Er$1,Cs$1,Ko,Fs$1,$s$1,nt$1,B,Vt,Zo=L(()=>{ft=null;try{ft=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}be.prototype.__isLong__,Object.defineProperty(be.prototype,"__isLong__",{value:!0}),be.isLong=Xe,Ss$1={},As$1={},be.fromInt=cr$1,be.fromNumber=ct,be.fromBits=le,Un$1=Math.pow,be.fromString=Jo,be.fromValue=St$1,Ps$1=65536,kd$1=1<<24,Dr=Ps$1*Ps$1,Ls$1=Dr*Dr,Es$1=Ls$1/2,Ds$1=cr$1(kd$1),It=cr$1(0),be.ZERO=It,zt$1=cr$1(0,!0),be.UZERO=zt$1,Er$1=cr$1(1),be.ONE=Er$1,Cs$1=cr$1(1,!0),be.UONE=Cs$1,Ko=cr$1(-1),be.NEG_ONE=Ko,Fs$1=le(-1,2147483647,!1),be.MAX_VALUE=Fs$1,$s$1=le(-1,-1,!0),be.MAX_UNSIGNED_VALUE=$s$1,nt$1=le(0,-2147483648,!1),be.MIN_VALUE=nt$1,B=be.prototype,B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*Dr+(this.low>>>0):this.high*Dr+(this.low>>>0)},B.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(nt$1)){var e=ct(t),n=this.div(e),i=n.mul(e).sub(this);return n.toString(t)+i.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var o=ct(Un$1(t,6),this.unsigned),a=this,l="";;){var c=a.div(o),p=a.sub(c.mul(o)).toInt()>>>0,s=p.toString(t);if(a=c,a.isZero())return s+l;for(;s.length<6;)s="0"+s;l=""+s+l}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nt$1)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1},B.isZero=function(){return this.high===0&&this.low===0},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return(this.low&1)===1},B.isEven=function(){return(this.low&1)===0},B.equals=function(t){return Xe(t)||(t=St$1(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},B.eq=B.equals,B.notEquals=function(t){return!this.eq(t)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(t){return this.comp(t)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(t){return this.comp(t)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(t){return this.comp(t)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(t){return this.comp(t)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(t){if(Xe(t)||(t=St$1(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(nt$1)?nt$1:this.not().add(Er$1)},B.neg=B.negate,B.add=function(t){Xe(t)||(t=St$1(t));var e=this.high>>>16,n=this.high&65535,i=this.low>>>16,o=this.low&65535,a=t.high>>>16,l=t.high&65535,c=t.low>>>16,p=t.low&65535,s=0,u=0,d=0,g=0;return g+=o+p,d+=g>>>16,g&=65535,d+=i+c,u+=d>>>16,d&=65535,u+=n+l,s+=u>>>16,u&=65535,s+=e+a,s&=65535,le(d<<16|g,s<<16|u,this.unsigned)},B.subtract=function(t){return Xe(t)||(t=St$1(t)),this.add(t.neg())},B.sub=B.subtract,B.multiply=function(t){if(this.isZero())return this;if(Xe(t)||(t=St$1(t)),ft){var e=ft.mul(this.low,this.high,t.low,t.high);return le(e,ft.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?zt$1:It;if(this.eq(nt$1))return t.isOdd()?nt$1:It;if(t.eq(nt$1))return this.isOdd()?nt$1:It;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Ds$1)&&t.lt(Ds$1))return ct(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=this.high&65535,o=this.low>>>16,a=this.low&65535,l=t.high>>>16,c=t.high&65535,p=t.low>>>16,s=t.low&65535,u=0,d=0,g=0,w=0;return w+=a*s,g+=w>>>16,w&=65535,g+=o*s,d+=g>>>16,g&=65535,g+=a*p,d+=g>>>16,g&=65535,d+=i*s,u+=d>>>16,d&=65535,d+=o*p,u+=d>>>16,d&=65535,d+=a*c,u+=d>>>16,d&=65535,u+=n*s+i*p+o*c+a*l,u&=65535,le(g<<16|w,u<<16|d,this.unsigned)},B.mul=B.multiply,B.divide=function(t){if(Xe(t)||(t=St$1(t)),t.isZero())throw Error("division by zero");if(ft){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?ft.div_u:ft.div_s)(this.low,this.high,t.low,t.high);return le(e,ft.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?zt$1:It;var n,i,o;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return zt$1;if(t.gt(this.shru(1)))return Cs$1;o=zt$1}else{if(this.eq(nt$1)){if(t.eq(Er$1)||t.eq(Ko))return nt$1;if(t.eq(nt$1))return Er$1;var a=this.shr(1);return n=a.div(t).shl(1),n.eq(It)?t.isNegative()?Er$1:Ko:(i=this.sub(t.mul(n)),o=n.add(i.div(t)),o)}else if(t.eq(nt$1))return this.unsigned?zt$1:It;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=It}for(i=this;i.gte(t);){n=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var l=Math.ceil(Math.log(n)/Math.LN2),c=l<=48?1:Un$1(2,l-48),p=ct(n),s=p.mul(t);s.isNegative()||s.gt(i);)n-=c,p=ct(n,this.unsigned),s=p.mul(t);p.isZero()&&(p=Er$1),o=o.add(p),i=i.sub(s)}return o},B.div=B.divide,B.modulo=function(t){if(Xe(t)||(t=St$1(t)),ft){var e=(this.unsigned?ft.rem_u:ft.rem_s)(this.low,this.high,t.low,t.high);return le(e,ft.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return le(~this.low,~this.high,this.unsigned)},B.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},B.clz=B.countLeadingZeros,B.countTrailingZeros=function(){return this.low?Is$1(this.low):Is$1(this.high)+32},B.ctz=B.countTrailingZeros,B.and=function(t){return Xe(t)||(t=St$1(t)),le(this.low&t.low,this.high&t.high,this.unsigned)},B.or=function(t){return Xe(t)||(t=St$1(t)),le(this.low|t.low,this.high|t.high,this.unsigned)},B.xor=function(t){return Xe(t)||(t=St$1(t)),le(this.low^t.low,this.high^t.high,this.unsigned)},B.shiftLeft=function(t){return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?le(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):le(0,this.low<<t-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(t){return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?le(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):le(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(t){return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?le(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?le(this.high,0,this.unsigned):le(this.high>>>t-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.rotateLeft=function(t){var e;return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?le(this.high,this.low,this.unsigned):t<32?(e=32-t,le(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,le(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},B.rotl=B.rotateLeft,B.rotateRight=function(t){var e;return Xe(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?le(this.high,this.low,this.unsigned):t<32?(e=32-t,le(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,le(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},B.rotr=B.rotateRight,B.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0)},B.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},B.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]},be.fromBytes=function(t,e,n){return n?be.fromBytesLE(t,e):be.fromBytesBE(t,e)},be.fromBytesLE=function(t,e){return new be(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},be.fromBytesBE=function(t,e){return new be(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)},Vt=be}),_,zn$1=L(()=>{_={},_.Offset,_.Table,_.SIZEOF_SHORT=2,_.SIZEOF_INT=4,_.FILE_IDENTIFIER_LENGTH=4,_.SIZE_PREFIX_LENGTH=4,_.Encoding={UTF8_BYTES:1,UTF16_STRING:2},_.int32=new Int32Array(2),_.float32=new Float32Array(_.int32.buffer),_.float64=new Float64Array(_.int32.buffer),_.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,_.Long=function(t,e){this.low=t|0,this.high=e|0},_.Long.create=function(t,e){return t==0&&e==0?_.Long.ZERO:new _.Long(t,e)},_.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296},_.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},_.Long.ZERO=new _.Long(0,0),_.Builder=function(t){if(t)var e=t;else var e=1024;this.bb=_.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},_.Builder.prototype.dataBuffer=function(){return this.bb},_.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},_.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var n=~(this.bb.capacity()-this.space+e)+1&t-1;this.space<n+t+e;){var i=this.bb.capacity();this.bb=_.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(n)},_.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},_.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},_.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},_.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},_.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},_.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},_.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},_.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},_.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},_.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},_.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},_.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},_.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},_.Builder.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},_.Builder.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},_.Builder.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},_.Builder.prototype.addFieldInt64=function(t,e,n){(this.force_defaults||!e.equals(n))&&(this.addInt64(e),this.slot(t))},_.Builder.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},_.Builder.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},_.Builder.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},_.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},_.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},_.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},_.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},_.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},_.Builder.growByteBuffer=function(t){var e=t.capacity();if(e&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,i=_.ByteBuffer.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i},_.Builder.prototype.addOffset=function(t){this.prep(_.SIZEOF_INT,0),this.writeInt32(this.offset()-t+_.SIZEOF_INT)},_.Builder.prototype.startObject=function(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},_.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&this.vtable[e]==0;e--);for(var n=e+1;e>=0;e--)this.addInt16(this.vtable[e]!=0?t-this.vtable[e]:0);var i=2;this.addInt16(t-this.object_start);var o=(n+i)*_.SIZEOF_SHORT;this.addInt16(o);var a=0,l=this.space;e:for(e=0;e<this.vtables.length;e++){var c=this.bb.capacity()-this.vtables[e];if(o==this.bb.readInt16(c)){for(var p=_.SIZEOF_SHORT;p<o;p+=_.SIZEOF_SHORT)if(this.bb.readInt16(l+p)!=this.bb.readInt16(c+p))continue e;a=this.vtables[e];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},_.Builder.prototype.finish=function(t,e,n){var i=n?_.SIZE_PREFIX_LENGTH:0;if(e){var o=e;if(this.prep(this.minalign,_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH+i),o.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var a=_.FILE_IDENTIFIER_LENGTH-1;a>=0;a--)this.writeInt8(o.charCodeAt(a))}this.prep(this.minalign,_.SIZEOF_INT+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},_.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},_.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,i=n-this.bb.readInt32(n),o=this.bb.readInt16(i+e)!=0;if(!o)throw new Error("FlatBuffers: field "+e+" must be set")},_.Builder.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(_.SIZEOF_INT,t*e),this.prep(n,t*e)},_.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},_.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else for(var e=[],n=0;n<t.length;){var i,o=t.charCodeAt(n++);if(o<55296||o>=56320)i=o;else{var a=t.charCodeAt(n++);i=(o<<10)+a+-56613888}i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(i&63|128))}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(var n=0,l=this.space,c=this.bb.bytes();n<e.length;n++)c[l++]=e[n];return this.endVector()},_.Builder.prototype.createLong=function(t,e){return _.Long.create(t,e)},_.ByteBuffer=function(t){this.bytes_=t,this.position_=0},_.ByteBuffer.allocate=function(t){return new _.ByteBuffer(new Uint8Array(t))},_.ByteBuffer.prototype.clear=function(){this.position_=0},_.ByteBuffer.prototype.bytes=function(){return this.bytes_},_.ByteBuffer.prototype.position=function(){return this.position_},_.ByteBuffer.prototype.setPosition=function(t){this.position_=t},_.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},_.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},_.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},_.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},_.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},_.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},_.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},_.ByteBuffer.prototype.readInt64=function(t){return new _.Long(this.readInt32(t),this.readInt32(t+4))},_.ByteBuffer.prototype.readUint64=function(t){return new _.Long(this.readUint32(t),this.readUint32(t+4))},_.ByteBuffer.prototype.readFloat32=function(t){return _.int32[0]=this.readInt32(t),_.float32[0]},_.ByteBuffer.prototype.readFloat64=function(t){return _.int32[_.isLittleEndian?0:1]=this.readInt32(t),_.int32[_.isLittleEndian?1:0]=this.readInt32(t+4),_.float64[0]},_.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},_.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},_.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},_.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},_.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},_.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},_.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},_.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},_.ByteBuffer.prototype.writeFloat32=function(t,e){_.float32[0]=e,this.writeInt32(t,_.int32[0])},_.ByteBuffer.prototype.writeFloat64=function(t,e){_.float64[0]=e,this.writeInt32(t,_.int32[_.isLittleEndian?0:1]),this.writeInt32(t+4,_.int32[_.isLittleEndian?1:0])},_.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<_.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+_.SIZEOF_INT+e));return t},_.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},_.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},_.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),i="",o=0;if(t+=_.SIZEOF_INT,e===_.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;o<n;){var a,l=this.readUint8(t+o++);if(l<192)a=l;else{var c=this.readUint8(t+o++);if(l<224)a=(l&31)<<6|c&63;else{var p=this.readUint8(t+o++);if(l<240)a=(l&15)<<12|(c&63)<<6|p&63;else{var s=this.readUint8(t+o++);a=(l&7)<<18|(c&63)<<12|(p&63)<<6|s&63}}}a<65536?i+=String.fromCharCode(a):(a-=65536,i+=String.fromCharCode((a>>10)+55296,(a&1023)+56320))}return i},_.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},_.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+_.SIZEOF_INT},_.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},_.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var e=0;e<_.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+_.SIZEOF_INT+e))return!1;return!0},_.ByteBuffer.prototype.createLong=function(t,e){return _.Long.create(t,e)}}),V,tn$1=L(()=>{zn$1(),(t=>{(e=>{(n=>{(i=>(i[i.UNDEFINED=0]="UNDEFINED",i[i.FLOAT=1]="FLOAT",i[i.INT=2]="INT",i[i.STRING=3]="STRING",i[i.TENSOR=4]="TENSOR",i[i.GRAPH=5]="GRAPH",i[i.FLOATS=6]="FLOATS",i[i.INTS=7]="INTS",i[i.STRINGS=8]="STRINGS",i[i.TENSORS=9]="TENSORS",i[i.GRAPHS=10]="GRAPHS",i[i.SPARSE_TENSOR=11]="SPARSE_TENSOR",i[i.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(n.AttributeType||={})})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{(i=>(i[i.UNKNOWN=0]="UNKNOWN",i[i.VALUE=1]="VALUE",i[i.PARAM=2]="PARAM"))(n.DimensionValueType||={})})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{(i=>(i[i.UNDEFINED=0]="UNDEFINED",i[i.FLOAT=1]="FLOAT",i[i.UINT8=2]="UINT8",i[i.INT8=3]="INT8",i[i.UINT16=4]="UINT16",i[i.INT16=5]="INT16",i[i.INT32=6]="INT32",i[i.INT64=7]="INT64",i[i.STRING=8]="STRING",i[i.BOOL=9]="BOOL",i[i.FLOAT16=10]="FLOAT16",i[i.DOUBLE=11]="DOUBLE",i[i.UINT32=12]="UINT32",i[i.UINT64=13]="UINT64",i[i.COMPLEX64=14]="COMPLEX64",i[i.COMPLEX128=15]="COMPLEX128",i[i.BFLOAT16=16]="BFLOAT16",i[i.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",i[i.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",i[i.FLOAT8E5M2=19]="FLOAT8E5M2",i[i.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(n.TensorDataType||={})})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{(i=>(i[i.Primitive=0]="Primitive",i[i.Fused=1]="Fused"))(n.NodeType||={})})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{(i=>(i[i.NONE=0]="NONE",i[i.tensor_type=1]="tensor_type",i[i.sequence_type=2]="sequence_type",i[i.map_type=3]="map_type"))(n.TypeInfoValue||={})})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsShape(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsShape(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}dim(a,l){let c=this.bb.__offset(this.bb_pos,4);return c?(l||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null}dimLength(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__vector_len(this.bb_pos+a):0}static startShape(a){a.startObject(1)}static addDim(a,l){a.addFieldOffset(0,l,0)}static createDimVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startDimVector(a,l){a.startVector(4,l,4)}static endShape(a){return a.endObject()}static createShape(a,l){return i.startShape(a),i.addDim(a,l),i.endShape(a)}}n.Shape=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsDimension(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsDimension(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}value(a){let l=this.bb.__offset(this.bb_pos,4);return l?(a||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}denotation(a){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,a):null}static startDimension(a){a.startObject(2)}static addValue(a,l){a.addFieldOffset(0,l,0)}static addDenotation(a,l){a.addFieldOffset(1,l,0)}static endDimension(a){return a.endObject()}static createDimension(a,l,c){return i.startDimension(a),i.addValue(a,l),i.addDenotation(a,c),i.endDimension(a)}}n.Dimension=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsDimensionValue(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsDimensionValue(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}dimType(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt8(this.bb_pos+a):0}dimValue(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readInt64(this.bb_pos+a):this.bb.createLong(0,0)}dimParam(a){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,a):null}static startDimensionValue(a){a.startObject(3)}static addDimType(a,l){a.addFieldInt8(0,l,0)}static addDimValue(a,l){a.addFieldInt64(1,l,a.createLong(0,0))}static addDimParam(a,l){a.addFieldOffset(2,l,0)}static endDimensionValue(a){return a.endObject()}static createDimensionValue(a,l,c,p){return i.startDimensionValue(a),i.addDimType(a,l),i.addDimValue(a,c),i.addDimParam(a,p),i.endDimensionValue(a)}}n.DimensionValue=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsTensorTypeAndShape(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsTensorTypeAndShape(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}elemType(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt32(this.bb_pos+a):0}shape(a){let l=this.bb.__offset(this.bb_pos,6);return l?(a||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startTensorTypeAndShape(a){a.startObject(2)}static addElemType(a,l){a.addFieldInt32(0,l,0)}static addShape(a,l){a.addFieldOffset(1,l,0)}static endTensorTypeAndShape(a){return a.endObject()}static createTensorTypeAndShape(a,l,c){return i.startTensorTypeAndShape(a),i.addElemType(a,l),i.addShape(a,c),i.endTensorTypeAndShape(a)}}n.TensorTypeAndShape=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsMapType(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsMapType(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}keyType(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt32(this.bb_pos+a):0}valueType(a){let l=this.bb.__offset(this.bb_pos,6);return l?(a||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startMapType(a){a.startObject(2)}static addKeyType(a,l){a.addFieldInt32(0,l,0)}static addValueType(a,l){a.addFieldOffset(1,l,0)}static endMapType(a){return a.endObject()}static createMapType(a,l,c){return i.startMapType(a),i.addKeyType(a,l),i.addValueType(a,c),i.endMapType(a)}}n.MapType=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsSequenceType(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSequenceType(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}elemType(a){let l=this.bb.__offset(this.bb_pos,4);return l?(a||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSequenceType(a){a.startObject(1)}static addElemType(a,l){a.addFieldOffset(0,l,0)}static endSequenceType(a){return a.endObject()}static createSequenceType(a,l){return i.startSequenceType(a),i.addElemType(a,l),i.endSequenceType(a)}}n.SequenceType=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(a,l,c,p){return a.prep(4,12),a.writeInt32(p),a.writeInt32(c),a.writeInt32(l),a.offset()}}n.EdgeEnd=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsNodeEdge(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsNodeEdge(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}nodeIndex(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readUint32(this.bb_pos+a):0}inputEdges(a,l){let c=this.bb.__offset(this.bb_pos,6);return c?(l||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+c)+a*12,this.bb):null}inputEdgesLength(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}outputEdges(a,l){let c=this.bb.__offset(this.bb_pos,8);return c?(l||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+c)+a*12,this.bb):null}outputEdgesLength(){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}static startNodeEdge(a){a.startObject(3)}static addNodeIndex(a,l){a.addFieldInt32(0,l,0)}static addInputEdges(a,l){a.addFieldOffset(1,l,0)}static startInputEdgesVector(a,l){a.startVector(12,l,4)}static addOutputEdges(a,l){a.addFieldOffset(2,l,0)}static startOutputEdgesVector(a,l){a.startVector(12,l,4)}static endNodeEdge(a){return a.endObject()}static createNodeEdge(a,l,c,p){return i.startNodeEdge(a),i.addNodeIndex(a,l),i.addInputEdges(a,c),i.addOutputEdges(a,p),i.endNodeEdge(a)}}n.NodeEdge=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsNode(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsNode(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}name(a){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,a):null}docString(a){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,a):null}domain(a){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,a):null}sinceVersion(){let a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readInt32(this.bb_pos+a):0}index(){let a=this.bb.__offset(this.bb_pos,12);return a?this.bb.readUint32(this.bb_pos+a):0}opType(a){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,a):null}type(){let a=this.bb.__offset(this.bb_pos,16);return a?this.bb.readInt32(this.bb_pos+a):0}executionProviderType(a){let l=this.bb.__offset(this.bb_pos,18);return l?this.bb.__string(this.bb_pos+l,a):null}inputs(a,l){let c=this.bb.__offset(this.bb_pos,20);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+a*4,l):null}inputsLength(){let a=this.bb.__offset(this.bb_pos,20);return a?this.bb.__vector_len(this.bb_pos+a):0}outputs(a,l){let c=this.bb.__offset(this.bb_pos,22);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+a*4,l):null}outputsLength(){let a=this.bb.__offset(this.bb_pos,22);return a?this.bb.__vector_len(this.bb_pos+a):0}attributes(a,l){let c=this.bb.__offset(this.bb_pos,24);return c?(l||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null}attributesLength(){let a=this.bb.__offset(this.bb_pos,24);return a?this.bb.__vector_len(this.bb_pos+a):0}inputArgCounts(a){let l=this.bb.__offset(this.bb_pos,26);return l?this.bb.readInt32(this.bb.__vector(this.bb_pos+l)+a*4):0}inputArgCountsLength(){let a=this.bb.__offset(this.bb_pos,26);return a?this.bb.__vector_len(this.bb_pos+a):0}inputArgCountsArray(){let a=this.bb.__offset(this.bb_pos,26);return a?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null}implicitInputs(a,l){let c=this.bb.__offset(this.bb_pos,28);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+a*4,l):null}implicitInputsLength(){let a=this.bb.__offset(this.bb_pos,28);return a?this.bb.__vector_len(this.bb_pos+a):0}static startNode(a){a.startObject(13)}static addName(a,l){a.addFieldOffset(0,l,0)}static addDocString(a,l){a.addFieldOffset(1,l,0)}static addDomain(a,l){a.addFieldOffset(2,l,0)}static addSinceVersion(a,l){a.addFieldInt32(3,l,0)}static addIndex(a,l){a.addFieldInt32(4,l,0)}static addOpType(a,l){a.addFieldOffset(5,l,0)}static addType(a,l){a.addFieldInt32(6,l,0)}static addExecutionProviderType(a,l){a.addFieldOffset(7,l,0)}static addInputs(a,l){a.addFieldOffset(8,l,0)}static createInputsVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startInputsVector(a,l){a.startVector(4,l,4)}static addOutputs(a,l){a.addFieldOffset(9,l,0)}static createOutputsVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startOutputsVector(a,l){a.startVector(4,l,4)}static addAttributes(a,l){a.addFieldOffset(10,l,0)}static createAttributesVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startAttributesVector(a,l){a.startVector(4,l,4)}static addInputArgCounts(a,l){a.addFieldOffset(11,l,0)}static createInputArgCountsVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addInt32(l[c]);return a.endVector()}static startInputArgCountsVector(a,l){a.startVector(4,l,4)}static addImplicitInputs(a,l){a.addFieldOffset(12,l,0)}static createImplicitInputsVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startImplicitInputsVector(a,l){a.startVector(4,l,4)}static endNode(a){return a.endObject()}static createNode(a,l,c,p,s,u,d,g,w,x,C,O,Y,q){return i.startNode(a),i.addName(a,l),i.addDocString(a,c),i.addDomain(a,p),i.addSinceVersion(a,s),i.addIndex(a,u),i.addOpType(a,d),i.addType(a,g),i.addExecutionProviderType(a,w),i.addInputs(a,x),i.addOutputs(a,C),i.addAttributes(a,O),i.addInputArgCounts(a,Y),i.addImplicitInputs(a,q),i.endNode(a)}}n.Node=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsValueInfo(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsValueInfo(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}name(a){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,a):null}docString(a){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,a):null}type(a){let l=this.bb.__offset(this.bb_pos,8);return l?(a||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startValueInfo(a){a.startObject(3)}static addName(a,l){a.addFieldOffset(0,l,0)}static addDocString(a,l){a.addFieldOffset(1,l,0)}static addType(a,l){a.addFieldOffset(2,l,0)}static endValueInfo(a){return a.endObject()}static createValueInfo(a,l,c,p){return i.startValueInfo(a),i.addName(a,l),i.addDocString(a,c),i.addType(a,p),i.endValueInfo(a)}}n.ValueInfo=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsTypeInfo(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsTypeInfo(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}denotation(a){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,a):null}valueType(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readUint8(this.bb_pos+a):0}value(a){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__union(a,this.bb_pos+l):null}static startTypeInfo(a){a.startObject(3)}static addDenotation(a,l){a.addFieldOffset(0,l,0)}static addValueType(a,l){a.addFieldInt8(1,l,0)}static addValue(a,l){a.addFieldOffset(2,l,0)}static endTypeInfo(a){return a.endObject()}static createTypeInfo(a,l,c,p){return i.startTypeInfo(a),i.addDenotation(a,l),i.addValueType(a,c),i.addValue(a,p),i.endTypeInfo(a)}}n.TypeInfo=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsOperatorSetId(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsOperatorSetId(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}domain(a){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,a):null}version(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readInt64(this.bb_pos+a):this.bb.createLong(0,0)}static startOperatorSetId(a){a.startObject(2)}static addDomain(a,l){a.addFieldOffset(0,l,0)}static addVersion(a,l){a.addFieldInt64(1,l,a.createLong(0,0))}static endOperatorSetId(a){return a.endObject()}static createOperatorSetId(a,l,c){return i.startOperatorSetId(a),i.addDomain(a,l),i.addVersion(a,c),i.endOperatorSetId(a)}}n.OperatorSetId=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsTensor(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsTensor(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}name(a){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,a):null}docString(a){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,a):null}dims(a){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+a*8):this.bb.createLong(0,0)}dimsLength(){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}dataType(){let a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readInt32(this.bb_pos+a):0}rawData(a){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.readUint8(this.bb.__vector(this.bb_pos+l)+a):0}rawDataLength(){let a=this.bb.__offset(this.bb_pos,12);return a?this.bb.__vector_len(this.bb_pos+a):0}rawDataArray(){let a=this.bb.__offset(this.bb_pos,12);return a?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null}stringData(a,l){let c=this.bb.__offset(this.bb_pos,14);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+a*4,l):null}stringDataLength(){let a=this.bb.__offset(this.bb_pos,14);return a?this.bb.__vector_len(this.bb_pos+a):0}static startTensor(a){a.startObject(6)}static addName(a,l){a.addFieldOffset(0,l,0)}static addDocString(a,l){a.addFieldOffset(1,l,0)}static addDims(a,l){a.addFieldOffset(2,l,0)}static createDimsVector(a,l){a.startVector(8,l.length,8);for(let c=l.length-1;c>=0;c--)a.addInt64(l[c]);return a.endVector()}static startDimsVector(a,l){a.startVector(8,l,8)}static addDataType(a,l){a.addFieldInt32(3,l,0)}static addRawData(a,l){a.addFieldOffset(4,l,0)}static createRawDataVector(a,l){a.startVector(1,l.length,1);for(let c=l.length-1;c>=0;c--)a.addInt8(l[c]);return a.endVector()}static startRawDataVector(a,l){a.startVector(1,l,1)}static addStringData(a,l){a.addFieldOffset(5,l,0)}static createStringDataVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startStringDataVector(a,l){a.startVector(4,l,4)}static endTensor(a){return a.endObject()}static createTensor(a,l,c,p,s,u,d){return i.startTensor(a),i.addName(a,l),i.addDocString(a,c),i.addDims(a,p),i.addDataType(a,s),i.addRawData(a,u),i.addStringData(a,d),i.endTensor(a)}}n.Tensor=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsSparseTensor(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSparseTensor(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}values(a){let l=this.bb.__offset(this.bb_pos,4);return l?(a||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}indices(a){let l=this.bb.__offset(this.bb_pos,6);return l?(a||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}dims(a){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+a*8):this.bb.createLong(0,0)}dimsLength(){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}static startSparseTensor(a){a.startObject(3)}static addValues(a,l){a.addFieldOffset(0,l,0)}static addIndices(a,l){a.addFieldOffset(1,l,0)}static addDims(a,l){a.addFieldOffset(2,l,0)}static createDimsVector(a,l){a.startVector(8,l.length,8);for(let c=l.length-1;c>=0;c--)a.addInt64(l[c]);return a.endVector()}static startDimsVector(a,l){a.startVector(8,l,8)}static endSparseTensor(a){return a.endObject()}static createSparseTensor(a,l,c,p){return i.startSparseTensor(a),i.addValues(a,l),i.addIndices(a,c),i.addDims(a,p),i.endSparseTensor(a)}}n.SparseTensor=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsAttribute(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsAttribute(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}name(a){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,a):null}docString(a){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,a):null}type(){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.readInt32(this.bb_pos+a):0}f(){let a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readFloat32(this.bb_pos+a):0}i(){let a=this.bb.__offset(this.bb_pos,12);return a?this.bb.readInt64(this.bb_pos+a):this.bb.createLong(0,0)}s(a){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,a):null}t(a){let l=this.bb.__offset(this.bb_pos,16);return l?(a||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}g(a){let l=this.bb.__offset(this.bb_pos,18);return l?(a||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}floats(a){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.readFloat32(this.bb.__vector(this.bb_pos+l)+a*4):0}floatsLength(){let a=this.bb.__offset(this.bb_pos,20);return a?this.bb.__vector_len(this.bb_pos+a):0}floatsArray(){let a=this.bb.__offset(this.bb_pos,20);return a?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null}ints(a){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+a*8):this.bb.createLong(0,0)}intsLength(){let a=this.bb.__offset(this.bb_pos,22);return a?this.bb.__vector_len(this.bb_pos+a):0}strings(a,l){let c=this.bb.__offset(this.bb_pos,24);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+a*4,l):null}stringsLength(){let a=this.bb.__offset(this.bb_pos,24);return a?this.bb.__vector_len(this.bb_pos+a):0}tensors(a,l){let c=this.bb.__offset(this.bb_pos,26);return c?(l||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null}tensorsLength(){let a=this.bb.__offset(this.bb_pos,26);return a?this.bb.__vector_len(this.bb_pos+a):0}graphs(a,l){let c=this.bb.__offset(this.bb_pos,28);return c?(l||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null}graphsLength(){let a=this.bb.__offset(this.bb_pos,28);return a?this.bb.__vector_len(this.bb_pos+a):0}static startAttribute(a){a.startObject(13)}static addName(a,l){a.addFieldOffset(0,l,0)}static addDocString(a,l){a.addFieldOffset(1,l,0)}static addType(a,l){a.addFieldInt32(2,l,0)}static addF(a,l){a.addFieldFloat32(3,l,0)}static addI(a,l){a.addFieldInt64(4,l,a.createLong(0,0))}static addS(a,l){a.addFieldOffset(5,l,0)}static addT(a,l){a.addFieldOffset(6,l,0)}static addG(a,l){a.addFieldOffset(7,l,0)}static addFloats(a,l){a.addFieldOffset(8,l,0)}static createFloatsVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addFloat32(l[c]);return a.endVector()}static startFloatsVector(a,l){a.startVector(4,l,4)}static addInts(a,l){a.addFieldOffset(9,l,0)}static createIntsVector(a,l){a.startVector(8,l.length,8);for(let c=l.length-1;c>=0;c--)a.addInt64(l[c]);return a.endVector()}static startIntsVector(a,l){a.startVector(8,l,8)}static addStrings(a,l){a.addFieldOffset(10,l,0)}static createStringsVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startStringsVector(a,l){a.startVector(4,l,4)}static addTensors(a,l){a.addFieldOffset(11,l,0)}static createTensorsVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startTensorsVector(a,l){a.startVector(4,l,4)}static addGraphs(a,l){a.addFieldOffset(12,l,0)}static createGraphsVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startGraphsVector(a,l){a.startVector(4,l,4)}static endAttribute(a){return a.endObject()}static createAttribute(a,l,c,p,s,u,d,g,w,x,C,O,Y,q){return i.startAttribute(a),i.addName(a,l),i.addDocString(a,c),i.addType(a,p),i.addF(a,s),i.addI(a,u),i.addS(a,d),i.addT(a,g),i.addG(a,w),i.addFloats(a,x),i.addInts(a,C),i.addStrings(a,O),i.addTensors(a,Y),i.addGraphs(a,q),i.endAttribute(a)}}n.Attribute=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsGraph(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsGraph(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}initializers(a,l){let c=this.bb.__offset(this.bb_pos,4);return c?(l||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null}initializersLength(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__vector_len(this.bb_pos+a):0}nodeArgs(a,l){let c=this.bb.__offset(this.bb_pos,6);return c?(l||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null}nodeArgsLength(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}nodes(a,l){let c=this.bb.__offset(this.bb_pos,8);return c?(l||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null}nodesLength(){let a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}maxNodeIndex(){let a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readUint32(this.bb_pos+a):0}nodeEdges(a,l){let c=this.bb.__offset(this.bb_pos,12);return c?(l||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null}nodeEdgesLength(){let a=this.bb.__offset(this.bb_pos,12);return a?this.bb.__vector_len(this.bb_pos+a):0}inputs(a,l){let c=this.bb.__offset(this.bb_pos,14);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+a*4,l):null}inputsLength(){let a=this.bb.__offset(this.bb_pos,14);return a?this.bb.__vector_len(this.bb_pos+a):0}outputs(a,l){let c=this.bb.__offset(this.bb_pos,16);return c?this.bb.__string(this.bb.__vector(this.bb_pos+c)+a*4,l):null}outputsLength(){let a=this.bb.__offset(this.bb_pos,16);return a?this.bb.__vector_len(this.bb_pos+a):0}sparseInitializers(a,l){let c=this.bb.__offset(this.bb_pos,18);return c?(l||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null}sparseInitializersLength(){let a=this.bb.__offset(this.bb_pos,18);return a?this.bb.__vector_len(this.bb_pos+a):0}static startGraph(a){a.startObject(8)}static addInitializers(a,l){a.addFieldOffset(0,l,0)}static createInitializersVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startInitializersVector(a,l){a.startVector(4,l,4)}static addNodeArgs(a,l){a.addFieldOffset(1,l,0)}static createNodeArgsVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startNodeArgsVector(a,l){a.startVector(4,l,4)}static addNodes(a,l){a.addFieldOffset(2,l,0)}static createNodesVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startNodesVector(a,l){a.startVector(4,l,4)}static addMaxNodeIndex(a,l){a.addFieldInt32(3,l,0)}static addNodeEdges(a,l){a.addFieldOffset(4,l,0)}static createNodeEdgesVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startNodeEdgesVector(a,l){a.startVector(4,l,4)}static addInputs(a,l){a.addFieldOffset(5,l,0)}static createInputsVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startInputsVector(a,l){a.startVector(4,l,4)}static addOutputs(a,l){a.addFieldOffset(6,l,0)}static createOutputsVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startOutputsVector(a,l){a.startVector(4,l,4)}static addSparseInitializers(a,l){a.addFieldOffset(7,l,0)}static createSparseInitializersVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startSparseInitializersVector(a,l){a.startVector(4,l,4)}static endGraph(a){return a.endObject()}static createGraph(a,l,c,p,s,u,d,g,w){return i.startGraph(a),i.addInitializers(a,l),i.addNodeArgs(a,c),i.addNodes(a,p),i.addMaxNodeIndex(a,s),i.addNodeEdges(a,u),i.addInputs(a,d),i.addOutputs(a,g),i.addSparseInitializers(a,w),i.endGraph(a)}}n.Graph=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsModel(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsModel(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}irVersion(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt64(this.bb_pos+a):this.bb.createLong(0,0)}opsetImport(a,l){let c=this.bb.__offset(this.bb_pos,6);return c?(l||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null}opsetImportLength(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}producerName(a){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,a):null}producerVersion(a){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.__string(this.bb_pos+l,a):null}domain(a){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.__string(this.bb_pos+l,a):null}modelVersion(){let a=this.bb.__offset(this.bb_pos,14);return a?this.bb.readInt64(this.bb_pos+a):this.bb.createLong(0,0)}docString(a){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.__string(this.bb_pos+l,a):null}graph(a){let l=this.bb.__offset(this.bb_pos,18);return l?(a||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}graphDocString(a){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__string(this.bb_pos+l,a):null}static startModel(a){a.startObject(9)}static addIrVersion(a,l){a.addFieldInt64(0,l,a.createLong(0,0))}static addOpsetImport(a,l){a.addFieldOffset(1,l,0)}static createOpsetImportVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startOpsetImportVector(a,l){a.startVector(4,l,4)}static addProducerName(a,l){a.addFieldOffset(2,l,0)}static addProducerVersion(a,l){a.addFieldOffset(3,l,0)}static addDomain(a,l){a.addFieldOffset(4,l,0)}static addModelVersion(a,l){a.addFieldInt64(5,l,a.createLong(0,0))}static addDocString(a,l){a.addFieldOffset(6,l,0)}static addGraph(a,l){a.addFieldOffset(7,l,0)}static addGraphDocString(a,l){a.addFieldOffset(8,l,0)}static endModel(a){return a.endObject()}static createModel(a,l,c,p,s,u,d,g,w,x){return i.startModel(a),i.addIrVersion(a,l),i.addOpsetImport(a,c),i.addProducerName(a,p),i.addProducerVersion(a,s),i.addDomain(a,u),i.addModelVersion(a,d),i.addDocString(a,g),i.addGraph(a,w),i.addGraphDocString(a,x),i.endModel(a)}}n.Model=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsKernelCreateInfos(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsKernelCreateInfos(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}nodeIndices(a){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readUint32(this.bb.__vector(this.bb_pos+l)+a*4):0}nodeIndicesLength(){let a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__vector_len(this.bb_pos+a):0}nodeIndicesArray(){let a=this.bb.__offset(this.bb_pos,4);return a?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null}kernelDefHashes(a){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readUint64(this.bb.__vector(this.bb_pos+l)+a*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}static startKernelCreateInfos(a){a.startObject(2)}static addNodeIndices(a,l){a.addFieldOffset(0,l,0)}static createNodeIndicesVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addInt32(l[c]);return a.endVector()}static startNodeIndicesVector(a,l){a.startVector(4,l,4)}static addKernelDefHashes(a,l){a.addFieldOffset(1,l,0)}static createKernelDefHashesVector(a,l){a.startVector(8,l.length,8);for(let c=l.length-1;c>=0;c--)a.addInt64(l[c]);return a.endVector()}static startKernelDefHashesVector(a,l){a.startVector(8,l,8)}static endKernelCreateInfos(a){return a.endObject()}static createKernelCreateInfos(a,l,c){return i.startKernelCreateInfos(a),i.addNodeIndices(a,l),i.addKernelDefHashes(a,c),i.endKernelCreateInfos(a)}}n.KernelCreateInfos=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsSubGraphSessionState(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSubGraphSessionState(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}graphId(a){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,a):null}sessionState(a){let l=this.bb.__offset(this.bb_pos,6);return l?(a||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSubGraphSessionState(a){a.startObject(2)}static addGraphId(a,l){a.addFieldOffset(0,l,0)}static addSessionState(a,l){a.addFieldOffset(1,l,0)}static endSubGraphSessionState(a){let l=a.endObject();return a.requiredField(l,4),l}static createSubGraphSessionState(a,l,c){return i.startSubGraphSessionState(a),i.addGraphId(a,l),i.addSessionState(a,c),i.endSubGraphSessionState(a)}}n.SubGraphSessionState=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsSessionState(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSessionState(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}kernels(a){let l=this.bb.__offset(this.bb_pos,4);return l?(a||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}subGraphSessionStates(a,l){let c=this.bb.__offset(this.bb_pos,6);return c?(l||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+a*4),this.bb):null}subGraphSessionStatesLength(){let a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}static startSessionState(a){a.startObject(2)}static addKernels(a,l){a.addFieldOffset(0,l,0)}static addSubGraphSessionStates(a,l){a.addFieldOffset(1,l,0)}static createSubGraphSessionStatesVector(a,l){a.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)a.addOffset(l[c]);return a.endVector()}static startSubGraphSessionStatesVector(a,l){a.startVector(4,l,4)}static endSessionState(a){return a.endObject()}static createSessionState(a,l,c){return i.startSessionState(a),i.addKernels(a,l),i.addSubGraphSessionStates(a,c),i.endSessionState(a)}}n.SessionState=i})(e.fbs||={})})(t.experimental||={})})(V||={}),(t=>{(e=>{(n=>{class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,l){return this.bb_pos=a,this.bb=l,this}static getRootAsInferenceSession(a,l){return(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsInferenceSession(a,l){return a.setPosition(a.position()+_.SIZE_PREFIX_LENGTH),(l||new i).__init(a.readInt32(a.position())+a.position(),a)}static bufferHasIdentifier(a){return a.__has_identifier("ORTM")}ortVersion(a){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,a):null}model(a){let l=this.bb.__offset(this.bb_pos,6);return l?(a||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}sessionState(a){let l=this.bb.__offset(this.bb_pos,8);return l?(a||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startInferenceSession(a){a.startObject(3)}static addOrtVersion(a,l){a.addFieldOffset(0,l,0)}static addModel(a,l){a.addFieldOffset(1,l,0)}static addSessionState(a,l){a.addFieldOffset(2,l,0)}static endInferenceSession(a){return a.endObject()}static finishInferenceSessionBuffer(a,l){a.finish(l,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(a,l){a.finish(l,"ORTM",!0)}static createInferenceSession(a,l,c,p){return i.startInferenceSession(a),i.addOrtVersion(a,l),i.addModel(a,c),i.addSessionState(a,p),i.endInferenceSession(a)}}n.InferenceSession=i})(e.fbs||={})})(t.experimental||={})})(V||={})}),Bs$1=me((t,e)=>{e.exports=n;function n(i,o){for(var a=new Array(arguments.length-1),l=0,c=2,p=!0;c<arguments.length;)a[l++]=arguments[c++];return new Promise(function(s,u){a[l]=function(d){if(p)if(p=!1,d)u(d);else{for(var g=new Array(arguments.length-1),w=0;w<g.length;)g[w++]=arguments[w];s.apply(null,g)}};try{i.apply(o||null,a)}catch(d){p&&(p=!1,u(d))}})}}),Gs$1=me(t=>{var e=t;e.length=function(l){var c=l.length;if(!c)return 0;for(var p=0;--c%4>1&&l.charAt(c)==="=";)++p;return Math.ceil(l.length*3)/4-p};var n=new Array(64),i=new Array(123);for(o=0;o<64;)i[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;var o;e.encode=function(l,c,p){for(var s=null,u=[],d=0,g=0,w;c<p;){var x=l[c++];switch(g){case 0:u[d++]=n[x>>2],w=(x&3)<<4,g=1;break;case 1:u[d++]=n[w|x>>4],w=(x&15)<<2,g=2;break;case 2:u[d++]=n[w|x>>6],u[d++]=n[x&63],g=0;break}d>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,u)),d=0)}return g&&(u[d++]=n[w],u[d++]=61,g===1&&(u[d++]=61)),s?(d&&s.push(String.fromCharCode.apply(String,u.slice(0,d))),s.join("")):String.fromCharCode.apply(String,u.slice(0,d))};var a="invalid encoding";e.decode=function(l,c,p){for(var s=p,u=0,d,g=0;g<l.length;){var w=l.charCodeAt(g++);if(w===61&&u>1)break;if((w=i[w])===void 0)throw Error(a);switch(u){case 0:d=w,u=1;break;case 1:c[p++]=d<<2|(w&48)>>4,d=w,u=2;break;case 2:c[p++]=(d&15)<<4|(w&60)>>2,d=w,u=3;break;case 3:c[p++]=(d&3)<<6|w,u=0;break}}if(u===1)throw Error(a);return p-s},e.test=function(l){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(l)}}),zs$1=me((t,e)=>{e.exports=n;function n(){this._listeners={}}n.prototype.on=function(i,o,a){return(this._listeners[i]||(this._listeners[i]=[])).push({fn:o,ctx:a||this}),this},n.prototype.off=function(i,o){if(i===void 0)this._listeners={};else if(o===void 0)this._listeners[i]=[];else for(var a=this._listeners[i],l=0;l<a.length;)a[l].fn===o?a.splice(l,1):++l;return this},n.prototype.emit=function(i){var o=this._listeners[i];if(o){for(var a=[],l=1;l<arguments.length;)a.push(arguments[l++]);for(l=0;l<o.length;)o[l].fn.apply(o[l++].ctx,a)}return this}}),Xs$1=me((t,e)=>{e.exports=n(n);function n(c){return typeof Float32Array<"u"?(function(){var p=new Float32Array([-0]),s=new Uint8Array(p.buffer),u=s[3]===128;function d(C,O,Y){p[0]=C,O[Y]=s[0],O[Y+1]=s[1],O[Y+2]=s[2],O[Y+3]=s[3]}function g(C,O,Y){p[0]=C,O[Y]=s[3],O[Y+1]=s[2],O[Y+2]=s[1],O[Y+3]=s[0]}c.writeFloatLE=u?d:g,c.writeFloatBE=u?g:d;function w(C,O){return s[0]=C[O],s[1]=C[O+1],s[2]=C[O+2],s[3]=C[O+3],p[0]}function x(C,O){return s[3]=C[O],s[2]=C[O+1],s[1]=C[O+2],s[0]=C[O+3],p[0]}c.readFloatLE=u?w:x,c.readFloatBE=u?x:w})():(function(){function p(u,d,g,w){var x=d<0?1:0;if(x&&(d=-d),d===0)u(1/d>0?0:2147483648,g,w);else if(isNaN(d))u(2143289344,g,w);else if(d>34028234663852886e22)u((x<<31|2139095040)>>>0,g,w);else if(d<11754943508222875e-54)u((x<<31|Math.round(d/1401298464324817e-60))>>>0,g,w);else{var C=Math.floor(Math.log(d)/Math.LN2),O=Math.round(d*Math.pow(2,-C)*8388608)&8388607;u((x<<31|C+127<<23|O)>>>0,g,w)}}c.writeFloatLE=p.bind(null,i),c.writeFloatBE=p.bind(null,o);function s(u,d,g){var w=u(d,g),x=(w>>31)*2+1,C=w>>>23&255,O=w&8388607;return C===255?O?NaN:x*(1/0):C===0?x*1401298464324817e-60*O:x*Math.pow(2,C-150)*(O+8388608)}c.readFloatLE=s.bind(null,a),c.readFloatBE=s.bind(null,l)})(),typeof Float64Array<"u"?(function(){var p=new Float64Array([-0]),s=new Uint8Array(p.buffer),u=s[7]===128;function d(C,O,Y){p[0]=C,O[Y]=s[0],O[Y+1]=s[1],O[Y+2]=s[2],O[Y+3]=s[3],O[Y+4]=s[4],O[Y+5]=s[5],O[Y+6]=s[6],O[Y+7]=s[7]}function g(C,O,Y){p[0]=C,O[Y]=s[7],O[Y+1]=s[6],O[Y+2]=s[5],O[Y+3]=s[4],O[Y+4]=s[3],O[Y+5]=s[2],O[Y+6]=s[1],O[Y+7]=s[0]}c.writeDoubleLE=u?d:g,c.writeDoubleBE=u?g:d;function w(C,O){return s[0]=C[O],s[1]=C[O+1],s[2]=C[O+2],s[3]=C[O+3],s[4]=C[O+4],s[5]=C[O+5],s[6]=C[O+6],s[7]=C[O+7],p[0]}function x(C,O){return s[7]=C[O],s[6]=C[O+1],s[5]=C[O+2],s[4]=C[O+3],s[3]=C[O+4],s[2]=C[O+5],s[1]=C[O+6],s[0]=C[O+7],p[0]}c.readDoubleLE=u?w:x,c.readDoubleBE=u?x:w})():(function(){function p(u,d,g,w,x,C){var O=w<0?1:0;if(O&&(w=-w),w===0)u(0,x,C+d),u(1/w>0?0:2147483648,x,C+g);else if(isNaN(w))u(0,x,C+d),u(2146959360,x,C+g);else if(w>17976931348623157e292)u(0,x,C+d),u((O<<31|2146435072)>>>0,x,C+g);else{var Y;if(w<22250738585072014e-324)Y=w/5e-324,u(Y>>>0,x,C+d),u((O<<31|Y/4294967296)>>>0,x,C+g);else{var q=Math.floor(Math.log(w)/Math.LN2);q===1024&&(q=1023),Y=w*Math.pow(2,-q),u(Y*4503599627370496>>>0,x,C+d),u((O<<31|q+1023<<20|Y*1048576&1048575)>>>0,x,C+g)}}}c.writeDoubleLE=p.bind(null,i,0,4),c.writeDoubleBE=p.bind(null,o,4,0);function s(u,d,g,w,x){var C=u(w,x+d),O=u(w,x+g),Y=(O>>31)*2+1,q=O>>>20&2047,ue=4294967296*(O&1048575)+C;return q===2047?ue?NaN:Y*(1/0):q===0?Y*5e-324*ue:Y*Math.pow(2,q-1075)*(ue+4503599627370496)}c.readDoubleLE=s.bind(null,a,0,4),c.readDoubleBE=s.bind(null,l,4,0)})(),c}function i(c,p,s){p[s]=c&255,p[s+1]=c>>>8&255,p[s+2]=c>>>16&255,p[s+3]=c>>>24}function o(c,p,s){p[s]=c>>>24,p[s+1]=c>>>16&255,p[s+2]=c>>>8&255,p[s+3]=c&255}function a(c,p){return(c[p]|c[p+1]<<8|c[p+2]<<16|c[p+3]<<24)>>>0}function l(c,p){return(c[p]<<24|c[p+1]<<16|c[p+2]<<8|c[p+3])>>>0}}),Ks$1=me((exports,module)=>{module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}}),Zs$1=me(t=>{var e=t;e.length=function(n){for(var i=0,o=0,a=0;a<n.length;++a)o=n.charCodeAt(a),o<128?i+=1:o<2048?i+=2:(o&64512)===55296&&(n.charCodeAt(a+1)&64512)===56320?(++a,i+=4):i+=3;return i},e.read=function(n,i,o){var a=o-i;if(a<1)return"";for(var l=null,c=[],p=0,s;i<o;)s=n[i++],s<128?c[p++]=s:s>191&&s<224?c[p++]=(s&31)<<6|n[i++]&63:s>239&&s<365?(s=((s&7)<<18|(n[i++]&63)<<12|(n[i++]&63)<<6|n[i++]&63)-65536,c[p++]=55296+(s>>10),c[p++]=56320+(s&1023)):c[p++]=(s&15)<<12|(n[i++]&63)<<6|n[i++]&63,p>8191&&((l||(l=[])).push(String.fromCharCode.apply(String,c)),p=0);return l?(p&&l.push(String.fromCharCode.apply(String,c.slice(0,p))),l.join("")):String.fromCharCode.apply(String,c.slice(0,p))},e.write=function(n,i,o){for(var a=o,l,c,p=0;p<n.length;++p)l=n.charCodeAt(p),l<128?i[o++]=l:l<2048?(i[o++]=l>>6|192,i[o++]=l&63|128):(l&64512)===55296&&((c=n.charCodeAt(p+1))&64512)===56320?(l=65536+((l&1023)<<10)+(c&1023),++p,i[o++]=l>>18|240,i[o++]=l>>12&63|128,i[o++]=l>>6&63|128,i[o++]=l&63|128):(i[o++]=l>>12|224,i[o++]=l>>6&63|128,i[o++]=l&63|128);return o-a}}),eu$1=me((t,e)=>{e.exports=n;function n(i,o,a){var l=a||8192,c=l>>>1,p=null,s=l;return function(u){if(u<1||u>c)return i(u);s+u>l&&(p=i(l),s=0);var d=o.call(p,s,s+=u);return s&7&&(s=(s|7)+1),d}}}),ru$1=me((t,e)=>{e.exports=i;var n=Jt();function i(c,p){this.lo=c>>>0,this.hi=p>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var a=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(c){if(c===0)return o;var p=c<0;p&&(c=-c);var s=c>>>0,u=(c-s)/4294967296>>>0;return p&&(u=~u>>>0,s=~s>>>0,++s>4294967295&&(s=0,++u>4294967295&&(u=0))),new i(s,u)},i.from=function(c){if(typeof c=="number")return i.fromNumber(c);if(n.isString(c))if(n.Long)c=n.Long.fromString(c);else return i.fromNumber(parseInt(c,10));return c.low||c.high?new i(c.low>>>0,c.high>>>0):o},i.prototype.toNumber=function(c){if(!c&&this.hi>>>31){var p=~this.lo+1>>>0,s=~this.hi>>>0;return p||(s=s+1>>>0),-(p+s*4294967296)}return this.lo+this.hi*4294967296},i.prototype.toLong=function(c){return n.Long?new n.Long(this.lo|0,this.hi|0,!!c):{low:this.lo|0,high:this.hi|0,unsigned:!!c}};var l=String.prototype.charCodeAt;i.fromHash=function(c){return c===a?o:new i((l.call(c,0)|l.call(c,1)<<8|l.call(c,2)<<16|l.call(c,3)<<24)>>>0,(l.call(c,4)|l.call(c,5)<<8|l.call(c,6)<<16|l.call(c,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var c=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^c)>>>0,this.lo=(this.lo<<1^c)>>>0,this},i.prototype.zzDecode=function(){var c=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^c)>>>0,this.hi=(this.hi>>>1^c)>>>0,this},i.prototype.length=function(){var c=this.lo,p=(this.lo>>>28|this.hi<<4)>>>0,s=this.hi>>>24;return s===0?p===0?c<16384?c<128?1:2:c<2097152?3:4:p<16384?p<128?5:6:p<2097152?7:8:s<128?9:10}}),Jt=me(t=>{var e=t;e.asPromise=Bs$1(),e.base64=Gs$1(),e.EventEmitter=zs$1(),e.float=Xs$1(),e.inquire=Ks$1(),e.utf8=Zs$1(),e.pool=eu$1(),e.LongBits=ru$1(),e.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),e.global=e.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||t,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o},e.isString=function(o){return typeof o=="string"||o instanceof String},e.isObject=function(o){return o&&typeof o=="object"},e.isset=e.isSet=function(o,a){var l=o[a];return l!=null&&o.hasOwnProperty(a)?typeof l!="object"||(Array.isArray(l)?l.length:Object.keys(l).length)>0:!1},e.Buffer=(function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}})(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(o){return typeof o=="number"?e.Buffer?e._Buffer_allocUnsafe(o):new e.Array(o):e.Buffer?e._Buffer_from(o):typeof Uint8Array>"u"?o:new Uint8Array(o)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(o){return o?e.LongBits.from(o).toHash():e.LongBits.zeroHash},e.longFromHash=function(o,a){var l=e.LongBits.fromHash(o);return e.Long?e.Long.fromBits(l.lo,l.hi,a):l.toNumber(!!a)};function n(o,a,l){for(var c=Object.keys(a),p=0;p<c.length;++p)(o[c[p]]===void 0||!l)&&(o[c[p]]=a[c[p]]);return o}e.merge=n,e.lcFirst=function(o){return o.charAt(0).toLowerCase()+o.substring(1)};function i(o){function a(l,c){if(!(this instanceof a))return new a(l,c);Object.defineProperty(this,"message",{get:function(){return l}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),c&&n(this,c)}return a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return o},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),a}e.newError=i,e.ProtocolError=i("ProtocolError"),e.oneOfGetter=function(o){for(var a={},l=0;l<o.length;++l)a[o[l]]=1;return function(){for(var c=Object.keys(this),p=c.length-1;p>-1;--p)if(a[c[p]]===1&&this[c[p]]!==void 0&&this[c[p]]!==null)return c[p]}},e.oneOfSetter=function(o){return function(a){for(var l=0;l<o.length;++l)o[l]!==a&&delete this[o[l]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(a,l){return new o(a,l)},e._Buffer_allocUnsafe=o.allocUnsafe||function(a){return new o(a)}}}),si$1=me((t,e)=>{e.exports=u;var n=Jt(),i,o=n.LongBits,a=n.base64,l=n.utf8;function c(q,ue,pe){this.fn=q,this.len=ue,this.next=void 0,this.val=pe}function p(){}function s(q){this.head=q.head,this.tail=q.tail,this.len=q.len,this.next=q.states}function u(){this.len=0,this.head=new c(p,0,0),this.tail=this.head,this.states=null}var d=function(){return n.Buffer?function(){return(u.create=function(){return new i})()}:function(){return new u}};u.create=d(),u.alloc=function(q){return new n.Array(q)},n.Array!==Array&&(u.alloc=n.pool(u.alloc,n.Array.prototype.subarray)),u.prototype._push=function(q,ue,pe){return this.tail=this.tail.next=new c(q,ue,pe),this.len+=ue,this};function g(q,ue,pe){ue[pe]=q&255}function w(q,ue,pe){for(;q>127;)ue[pe++]=q&127|128,q>>>=7;ue[pe]=q}function x(q,ue){this.len=q,this.next=void 0,this.val=ue}x.prototype=Object.create(c.prototype),x.prototype.fn=w,u.prototype.uint32=function(q){return this.len+=(this.tail=this.tail.next=new x((q=q>>>0)<128?1:q<16384?2:q<2097152?3:q<268435456?4:5,q)).len,this},u.prototype.int32=function(q){return q<0?this._push(C,10,o.fromNumber(q)):this.uint32(q)},u.prototype.sint32=function(q){return this.uint32((q<<1^q>>31)>>>0)};function C(q,ue,pe){for(;q.hi;)ue[pe++]=q.lo&127|128,q.lo=(q.lo>>>7|q.hi<<25)>>>0,q.hi>>>=7;for(;q.lo>127;)ue[pe++]=q.lo&127|128,q.lo=q.lo>>>7;ue[pe++]=q.lo}u.prototype.uint64=function(q){var ue=o.from(q);return this._push(C,ue.length(),ue)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(q){var ue=o.from(q).zzEncode();return this._push(C,ue.length(),ue)},u.prototype.bool=function(q){return this._push(g,1,q?1:0)};function O(q,ue,pe){ue[pe]=q&255,ue[pe+1]=q>>>8&255,ue[pe+2]=q>>>16&255,ue[pe+3]=q>>>24}u.prototype.fixed32=function(q){return this._push(O,4,q>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(q){var ue=o.from(q);return this._push(O,4,ue.lo)._push(O,4,ue.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(q){return this._push(n.float.writeFloatLE,4,q)},u.prototype.double=function(q){return this._push(n.float.writeDoubleLE,8,q)};var Y=n.Array.prototype.set?function(q,ue,pe){ue.set(q,pe)}:function(q,ue,pe){for(var se=0;se<q.length;++se)ue[pe+se]=q[se]};u.prototype.bytes=function(q){var ue=q.length>>>0;if(!ue)return this._push(g,1,0);if(n.isString(q)){var pe=u.alloc(ue=a.length(q));a.decode(q,pe,0),q=pe}return this.uint32(ue)._push(Y,ue,q)},u.prototype.string=function(q){var ue=l.length(q);return ue?this.uint32(ue)._push(l.write,ue,q):this._push(g,1,0)},u.prototype.fork=function(){return this.states=new s(this),this.head=this.tail=new c(p,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(p,0,0),this.len=0),this},u.prototype.ldelim=function(){var q=this.head,ue=this.tail,pe=this.len;return this.reset().uint32(pe),pe&&(this.tail.next=q.next,this.tail=ue,this.len+=pe),this},u.prototype.finish=function(){for(var q=this.head.next,ue=this.constructor.alloc(this.len),pe=0;q;)q.fn(q.val,ue,pe),pe+=q.len,q=q.next;return ue},u._configure=function(q){i=q,u.create=d(),i._configure()}}),cu$1=me((t,e)=>{e.exports=o;var n=si$1();(o.prototype=Object.create(n.prototype)).constructor=o;var i=Jt();function o(){n.call(this)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&i.Buffer.prototype.set.name==="set"?function(l,c,p){c.set(l,p)}:function(l,c,p){if(l.copy)l.copy(c,p,0,l.length);else for(var s=0;s<l.length;)c[p++]=l[s++]}},o.prototype.bytes=function(l){i.isString(l)&&(l=i._Buffer_from(l,"base64"));var c=l.length>>>0;return this.uint32(c),c&&this._push(o.writeBytesBuffer,c,l),this};function a(l,c,p){l.length<40?i.utf8.write(l,c,p):c.utf8Write?c.utf8Write(l,p):c.write(l,p)}o.prototype.string=function(l){var c=i.Buffer.byteLength(l);return this.uint32(c),c&&this._push(a,c,l),this},o._configure()}),fi$1=me((t,e)=>{e.exports=c;var n=Jt(),i,o=n.LongBits,a=n.utf8;function l(w,x){return RangeError("index out of range: "+w.pos+" + "+(x||1)+" > "+w.len)}function c(w){this.buf=w,this.pos=0,this.len=w.length}var p=typeof Uint8Array<"u"?function(w){if(w instanceof Uint8Array||Array.isArray(w))return new c(w);throw Error("illegal buffer")}:function(w){if(Array.isArray(w))return new c(w);throw Error("illegal buffer")},s=function(){return n.Buffer?function(w){return(c.create=function(x){return n.Buffer.isBuffer(x)?new i(x):p(x)})(w)}:p};c.create=s(),c.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,c.prototype.uint32=(function(){var w=4294967295;return function(){if(w=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(w=(w|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(w=(w|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(w=(w|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(w=(w|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return w;if((this.pos+=5)>this.len)throw this.pos=this.len,l(this,10);return w}})(),c.prototype.int32=function(){return this.uint32()|0},c.prototype.sint32=function(){var w=this.uint32();return w>>>1^-(w&1)|0};function u(){var w=new o(0,0),x=0;if(this.len-this.pos>4){for(;x<4;++x)if(w.lo=(w.lo|(this.buf[this.pos]&127)<<x*7)>>>0,this.buf[this.pos++]<128)return w;if(w.lo=(w.lo|(this.buf[this.pos]&127)<<28)>>>0,w.hi=(w.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return w;x=0}else{for(;x<3;++x){if(this.pos>=this.len)throw l(this);if(w.lo=(w.lo|(this.buf[this.pos]&127)<<x*7)>>>0,this.buf[this.pos++]<128)return w}return w.lo=(w.lo|(this.buf[this.pos++]&127)<<x*7)>>>0,w}if(this.len-this.pos>4){for(;x<5;++x)if(w.hi=(w.hi|(this.buf[this.pos]&127)<<x*7+3)>>>0,this.buf[this.pos++]<128)return w}else for(;x<5;++x){if(this.pos>=this.len)throw l(this);if(w.hi=(w.hi|(this.buf[this.pos]&127)<<x*7+3)>>>0,this.buf[this.pos++]<128)return w}throw Error("invalid varint encoding")}c.prototype.bool=function(){return this.uint32()!==0};function d(w,x){return(w[x-4]|w[x-3]<<8|w[x-2]<<16|w[x-1]<<24)>>>0}c.prototype.fixed32=function(){if(this.pos+4>this.len)throw l(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw l(this,4);return d(this.buf,this.pos+=4)|0};function g(){if(this.pos+8>this.len)throw l(this,8);return new o(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.prototype.float=function(){if(this.pos+4>this.len)throw l(this,4);var w=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,w},c.prototype.double=function(){if(this.pos+8>this.len)throw l(this,4);var w=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,w},c.prototype.bytes=function(){var w=this.uint32(),x=this.pos,C=this.pos+w;if(C>this.len)throw l(this,w);if(this.pos+=w,Array.isArray(this.buf))return this.buf.slice(x,C);if(x===C){var O=n.Buffer;return O?O.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,x,C)},c.prototype.string=function(){var w=this.bytes();return a.read(w,0,w.length)},c.prototype.skip=function(w){if(typeof w=="number"){if(this.pos+w>this.len)throw l(this,w);this.pos+=w}else do if(this.pos>=this.len)throw l(this);while(this.buf[this.pos++]&128);return this},c.prototype.skipType=function(w){switch(w){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(w=this.uint32()&7)!==4;)this.skipType(w);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+w+" at offset "+this.pos)}return this},c._configure=function(w){i=w,c.create=s(),i._configure();var x=n.Long?"toLong":"toNumber";n.merge(c.prototype,{int64:function(){return u.call(this)[x](!1)},uint64:function(){return u.call(this)[x](!0)},sint64:function(){return u.call(this).zzDecode()[x](!1)},fixed64:function(){return g.call(this)[x](!0)},sfixed64:function(){return g.call(this)[x](!1)}})}}),xu=me((t,e)=>{e.exports=o;var n=fi$1();(o.prototype=Object.create(n.prototype)).constructor=o;var i=Jt();function o(a){n.call(this,a)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},o._configure()}),vu$1=me((t,e)=>{e.exports=i;var n=Jt();(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i;function i(o,a,l){if(typeof o!="function")throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=o,this.requestDelimited=!!a,this.responseDelimited=!!l}i.prototype.rpcCall=function o(a,l,c,p,s){if(!p)throw TypeError("request must be specified");var u=this;if(!s)return n.asPromise(o,u,a,l,c,p);if(!u.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return u.rpcImpl(a,l[u.requestDelimited?"encodeDelimited":"encode"](p).finish(),function(d,g){if(d)return u.emit("error",d,a),s(d);if(g===null){u.end(!0);return}if(!(g instanceof c))try{g=c[u.responseDelimited?"decodeDelimited":"decode"](g)}catch(w){return u.emit("error",w,a),s(w)}return u.emit("data",g,a),s(null,g)})}catch(d){u.emit("error",d,a),setTimeout(function(){s(d)},0);return}},i.prototype.end=function(o){return this.rpcImpl&&(o||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),Ou$1=me(t=>{var e=t;e.Service=vu$1()}),Su$1=me((t,e)=>{e.exports={}}),Eu$1=me(t=>{var e=t;e.build="minimal",e.Writer=si$1(),e.BufferWriter=cu$1(),e.Reader=fi$1(),e.BufferReader=xu(),e.util=Jt(),e.rpc=Ou$1(),e.roots=Su$1(),e.configure=n;function n(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}n()}),Lu$1=me((t,e)=>{e.exports=Eu$1()}),Cr=me((t,e)=>{var n=Lu$1(),i=n.Reader,o=n.Writer,a=n.util,l=n.roots.default||(n.roots.default={});l.onnx=(function(){var c={};return c.Version=(function(){var p={},s=Object.create(p);return s[p[0]="_START_VERSION"]=0,s[p[1]="IR_VERSION_2017_10_10"]=1,s[p[2]="IR_VERSION_2017_10_30"]=2,s[p[3]="IR_VERSION_2017_11_3"]=3,s[p[4]="IR_VERSION_2019_1_22"]=4,s[p[5]="IR_VERSION_2019_3_18"]=5,s[p[6]="IR_VERSION_2019_9_19"]=6,s[p[7]="IR_VERSION_2020_5_8"]=7,s[p[8]="IR_VERSION_2021_7_30"]=8,s[p[9]="IR_VERSION"]=9,s})(),c.AttributeProto=(function(){function p(s){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],s)for(var u=Object.keys(s),d=0;d<u.length;++d)s[u[d]]!=null&&(this[u[d]]=s[u[d]])}return p.prototype.name="",p.prototype.refAttrName="",p.prototype.docString="",p.prototype.type=0,p.prototype.f=0,p.prototype.i=a.Long?a.Long.fromBits(0,0,!1):0,p.prototype.s=a.newBuffer([]),p.prototype.t=null,p.prototype.g=null,p.prototype.sparseTensor=null,p.prototype.tp=null,p.prototype.floats=a.emptyArray,p.prototype.ints=a.emptyArray,p.prototype.strings=a.emptyArray,p.prototype.tensors=a.emptyArray,p.prototype.graphs=a.emptyArray,p.prototype.sparseTensors=a.emptyArray,p.prototype.typeProtos=a.emptyArray,p.create=function(s){return new p(s)},p.encode=function(s,u){if(u||(u=o.create()),s.name!=null&&Object.hasOwnProperty.call(s,"name")&&u.uint32(10).string(s.name),s.f!=null&&Object.hasOwnProperty.call(s,"f")&&u.uint32(21).float(s.f),s.i!=null&&Object.hasOwnProperty.call(s,"i")&&u.uint32(24).int64(s.i),s.s!=null&&Object.hasOwnProperty.call(s,"s")&&u.uint32(34).bytes(s.s),s.t!=null&&Object.hasOwnProperty.call(s,"t")&&l.onnx.TensorProto.encode(s.t,u.uint32(42).fork()).ldelim(),s.g!=null&&Object.hasOwnProperty.call(s,"g")&&l.onnx.GraphProto.encode(s.g,u.uint32(50).fork()).ldelim(),s.floats!=null&&s.floats.length){u.uint32(58).fork();for(var d=0;d<s.floats.length;++d)u.float(s.floats[d]);u.ldelim()}if(s.ints!=null&&s.ints.length){u.uint32(66).fork();for(var d=0;d<s.ints.length;++d)u.int64(s.ints[d]);u.ldelim()}if(s.strings!=null&&s.strings.length)for(var d=0;d<s.strings.length;++d)u.uint32(74).bytes(s.strings[d]);if(s.tensors!=null&&s.tensors.length)for(var d=0;d<s.tensors.length;++d)l.onnx.TensorProto.encode(s.tensors[d],u.uint32(82).fork()).ldelim();if(s.graphs!=null&&s.graphs.length)for(var d=0;d<s.graphs.length;++d)l.onnx.GraphProto.encode(s.graphs[d],u.uint32(90).fork()).ldelim();if(s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&u.uint32(106).string(s.docString),s.tp!=null&&Object.hasOwnProperty.call(s,"tp")&&l.onnx.TypeProto.encode(s.tp,u.uint32(114).fork()).ldelim(),s.typeProtos!=null&&s.typeProtos.length)for(var d=0;d<s.typeProtos.length;++d)l.onnx.TypeProto.encode(s.typeProtos[d],u.uint32(122).fork()).ldelim();if(s.type!=null&&Object.hasOwnProperty.call(s,"type")&&u.uint32(160).int32(s.type),s.refAttrName!=null&&Object.hasOwnProperty.call(s,"refAttrName")&&u.uint32(170).string(s.refAttrName),s.sparseTensor!=null&&Object.hasOwnProperty.call(s,"sparseTensor")&&l.onnx.SparseTensorProto.encode(s.sparseTensor,u.uint32(178).fork()).ldelim(),s.sparseTensors!=null&&s.sparseTensors.length)for(var d=0;d<s.sparseTensors.length;++d)l.onnx.SparseTensorProto.encode(s.sparseTensors[d],u.uint32(186).fork()).ldelim();return u},p.encodeDelimited=function(s,u){return this.encode(s,u).ldelim()},p.decode=function(s,u){s instanceof i||(s=i.create(s));for(var d=u===void 0?s.len:s.pos+u,g=new l.onnx.AttributeProto;s.pos<d;){var w=s.uint32();switch(w>>>3){case 1:{g.name=s.string();break}case 21:{g.refAttrName=s.string();break}case 13:{g.docString=s.string();break}case 20:{g.type=s.int32();break}case 2:{g.f=s.float();break}case 3:{g.i=s.int64();break}case 4:{g.s=s.bytes();break}case 5:{g.t=l.onnx.TensorProto.decode(s,s.uint32());break}case 6:{g.g=l.onnx.GraphProto.decode(s,s.uint32());break}case 22:{g.sparseTensor=l.onnx.SparseTensorProto.decode(s,s.uint32());break}case 14:{g.tp=l.onnx.TypeProto.decode(s,s.uint32());break}case 7:{if(g.floats&&g.floats.length||(g.floats=[]),(w&7)===2)for(var x=s.uint32()+s.pos;s.pos<x;)g.floats.push(s.float());else g.floats.push(s.float());break}case 8:{if(g.ints&&g.ints.length||(g.ints=[]),(w&7)===2)for(var x=s.uint32()+s.pos;s.pos<x;)g.ints.push(s.int64());else g.ints.push(s.int64());break}case 9:{g.strings&&g.strings.length||(g.strings=[]),g.strings.push(s.bytes());break}case 10:{g.tensors&&g.tensors.length||(g.tensors=[]),g.tensors.push(l.onnx.TensorProto.decode(s,s.uint32()));break}case 11:{g.graphs&&g.graphs.length||(g.graphs=[]),g.graphs.push(l.onnx.GraphProto.decode(s,s.uint32()));break}case 23:{g.sparseTensors&&g.sparseTensors.length||(g.sparseTensors=[]),g.sparseTensors.push(l.onnx.SparseTensorProto.decode(s,s.uint32()));break}case 15:{g.typeProtos&&g.typeProtos.length||(g.typeProtos=[]),g.typeProtos.push(l.onnx.TypeProto.decode(s,s.uint32()));break}default:s.skipType(w&7);break}}return g},p.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},p.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.name!=null&&s.hasOwnProperty("name")&&!a.isString(s.name))return"name: string expected";if(s.refAttrName!=null&&s.hasOwnProperty("refAttrName")&&!a.isString(s.refAttrName))return"refAttrName: string expected";if(s.docString!=null&&s.hasOwnProperty("docString")&&!a.isString(s.docString))return"docString: string expected";if(s.type!=null&&s.hasOwnProperty("type"))switch(s.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(s.f!=null&&s.hasOwnProperty("f")&&typeof s.f!="number")return"f: number expected";if(s.i!=null&&s.hasOwnProperty("i")&&!a.isInteger(s.i)&&!(s.i&&a.isInteger(s.i.low)&&a.isInteger(s.i.high)))return"i: integer|Long expected";if(s.s!=null&&s.hasOwnProperty("s")&&!(s.s&&typeof s.s.length=="number"||a.isString(s.s)))return"s: buffer expected";if(s.t!=null&&s.hasOwnProperty("t")){var u=l.onnx.TensorProto.verify(s.t);if(u)return"t."+u}if(s.g!=null&&s.hasOwnProperty("g")){var u=l.onnx.GraphProto.verify(s.g);if(u)return"g."+u}if(s.sparseTensor!=null&&s.hasOwnProperty("sparseTensor")){var u=l.onnx.SparseTensorProto.verify(s.sparseTensor);if(u)return"sparseTensor."+u}if(s.tp!=null&&s.hasOwnProperty("tp")){var u=l.onnx.TypeProto.verify(s.tp);if(u)return"tp."+u}if(s.floats!=null&&s.hasOwnProperty("floats")){if(!Array.isArray(s.floats))return"floats: array expected";for(var d=0;d<s.floats.length;++d)if(typeof s.floats[d]!="number")return"floats: number[] expected"}if(s.ints!=null&&s.hasOwnProperty("ints")){if(!Array.isArray(s.ints))return"ints: array expected";for(var d=0;d<s.ints.length;++d)if(!a.isInteger(s.ints[d])&&!(s.ints[d]&&a.isInteger(s.ints[d].low)&&a.isInteger(s.ints[d].high)))return"ints: integer|Long[] expected"}if(s.strings!=null&&s.hasOwnProperty("strings")){if(!Array.isArray(s.strings))return"strings: array expected";for(var d=0;d<s.strings.length;++d)if(!(s.strings[d]&&typeof s.strings[d].length=="number"||a.isString(s.strings[d])))return"strings: buffer[] expected"}if(s.tensors!=null&&s.hasOwnProperty("tensors")){if(!Array.isArray(s.tensors))return"tensors: array expected";for(var d=0;d<s.tensors.length;++d){var u=l.onnx.TensorProto.verify(s.tensors[d]);if(u)return"tensors."+u}}if(s.graphs!=null&&s.hasOwnProperty("graphs")){if(!Array.isArray(s.graphs))return"graphs: array expected";for(var d=0;d<s.graphs.length;++d){var u=l.onnx.GraphProto.verify(s.graphs[d]);if(u)return"graphs."+u}}if(s.sparseTensors!=null&&s.hasOwnProperty("sparseTensors")){if(!Array.isArray(s.sparseTensors))return"sparseTensors: array expected";for(var d=0;d<s.sparseTensors.length;++d){var u=l.onnx.SparseTensorProto.verify(s.sparseTensors[d]);if(u)return"sparseTensors."+u}}if(s.typeProtos!=null&&s.hasOwnProperty("typeProtos")){if(!Array.isArray(s.typeProtos))return"typeProtos: array expected";for(var d=0;d<s.typeProtos.length;++d){var u=l.onnx.TypeProto.verify(s.typeProtos[d]);if(u)return"typeProtos."+u}}return null},p.fromObject=function(s){if(s instanceof l.onnx.AttributeProto)return s;var u=new l.onnx.AttributeProto;switch(s.name!=null&&(u.name=String(s.name)),s.refAttrName!=null&&(u.refAttrName=String(s.refAttrName)),s.docString!=null&&(u.docString=String(s.docString)),s.type){default:if(typeof s.type=="number"){u.type=s.type;break}break;case"UNDEFINED":case 0:u.type=0;break;case"FLOAT":case 1:u.type=1;break;case"INT":case 2:u.type=2;break;case"STRING":case 3:u.type=3;break;case"TENSOR":case 4:u.type=4;break;case"GRAPH":case 5:u.type=5;break;case"SPARSE_TENSOR":case 11:u.type=11;break;case"TYPE_PROTO":case 13:u.type=13;break;case"FLOATS":case 6:u.type=6;break;case"INTS":case 7:u.type=7;break;case"STRINGS":case 8:u.type=8;break;case"TENSORS":case 9:u.type=9;break;case"GRAPHS":case 10:u.type=10;break;case"SPARSE_TENSORS":case 12:u.type=12;break;case"TYPE_PROTOS":case 14:u.type=14;break}if(s.f!=null&&(u.f=Number(s.f)),s.i!=null&&(a.Long?(u.i=a.Long.fromValue(s.i)).unsigned=!1:typeof s.i=="string"?u.i=parseInt(s.i,10):typeof s.i=="number"?u.i=s.i:typeof s.i=="object"&&(u.i=new a.LongBits(s.i.low>>>0,s.i.high>>>0).toNumber())),s.s!=null&&(typeof s.s=="string"?a.base64.decode(s.s,u.s=a.newBuffer(a.base64.length(s.s)),0):s.s.length>=0&&(u.s=s.s)),s.t!=null){if(typeof s.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");u.t=l.onnx.TensorProto.fromObject(s.t)}if(s.g!=null){if(typeof s.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");u.g=l.onnx.GraphProto.fromObject(s.g)}if(s.sparseTensor!=null){if(typeof s.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");u.sparseTensor=l.onnx.SparseTensorProto.fromObject(s.sparseTensor)}if(s.tp!=null){if(typeof s.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");u.tp=l.onnx.TypeProto.fromObject(s.tp)}if(s.floats){if(!Array.isArray(s.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");u.floats=[];for(var d=0;d<s.floats.length;++d)u.floats[d]=Number(s.floats[d])}if(s.ints){if(!Array.isArray(s.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");u.ints=[];for(var d=0;d<s.ints.length;++d)a.Long?(u.ints[d]=a.Long.fromValue(s.ints[d])).unsigned=!1:typeof s.ints[d]=="string"?u.ints[d]=parseInt(s.ints[d],10):typeof s.ints[d]=="number"?u.ints[d]=s.ints[d]:typeof s.ints[d]=="object"&&(u.ints[d]=new a.LongBits(s.ints[d].low>>>0,s.ints[d].high>>>0).toNumber())}if(s.strings){if(!Array.isArray(s.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");u.strings=[];for(var d=0;d<s.strings.length;++d)typeof s.strings[d]=="string"?a.base64.decode(s.strings[d],u.strings[d]=a.newBuffer(a.base64.length(s.strings[d])),0):s.strings[d].length>=0&&(u.strings[d]=s.strings[d])}if(s.tensors){if(!Array.isArray(s.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");u.tensors=[];for(var d=0;d<s.tensors.length;++d){if(typeof s.tensors[d]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");u.tensors[d]=l.onnx.TensorProto.fromObject(s.tensors[d])}}if(s.graphs){if(!Array.isArray(s.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");u.graphs=[];for(var d=0;d<s.graphs.length;++d){if(typeof s.graphs[d]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");u.graphs[d]=l.onnx.GraphProto.fromObject(s.graphs[d])}}if(s.sparseTensors){if(!Array.isArray(s.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");u.sparseTensors=[];for(var d=0;d<s.sparseTensors.length;++d){if(typeof s.sparseTensors[d]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");u.sparseTensors[d]=l.onnx.SparseTensorProto.fromObject(s.sparseTensors[d])}}if(s.typeProtos){if(!Array.isArray(s.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");u.typeProtos=[];for(var d=0;d<s.typeProtos.length;++d){if(typeof s.typeProtos[d]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");u.typeProtos[d]=l.onnx.TypeProto.fromObject(s.typeProtos[d])}}return u},p.toObject=function(s,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.floats=[],d.ints=[],d.strings=[],d.tensors=[],d.graphs=[],d.typeProtos=[],d.sparseTensors=[]),u.defaults){if(d.name="",d.f=0,a.Long){var g=new a.Long(0,0,!1);d.i=u.longs===String?g.toString():u.longs===Number?g.toNumber():g}else d.i=u.longs===String?"0":0;u.bytes===String?d.s="":(d.s=[],u.bytes!==Array&&(d.s=a.newBuffer(d.s))),d.t=null,d.g=null,d.docString="",d.tp=null,d.type=u.enums===String?"UNDEFINED":0,d.refAttrName="",d.sparseTensor=null}if(s.name!=null&&s.hasOwnProperty("name")&&(d.name=s.name),s.f!=null&&s.hasOwnProperty("f")&&(d.f=u.json&&!isFinite(s.f)?String(s.f):s.f),s.i!=null&&s.hasOwnProperty("i")&&(typeof s.i=="number"?d.i=u.longs===String?String(s.i):s.i:d.i=u.longs===String?a.Long.prototype.toString.call(s.i):u.longs===Number?new a.LongBits(s.i.low>>>0,s.i.high>>>0).toNumber():s.i),s.s!=null&&s.hasOwnProperty("s")&&(d.s=u.bytes===String?a.base64.encode(s.s,0,s.s.length):u.bytes===Array?Array.prototype.slice.call(s.s):s.s),s.t!=null&&s.hasOwnProperty("t")&&(d.t=l.onnx.TensorProto.toObject(s.t,u)),s.g!=null&&s.hasOwnProperty("g")&&(d.g=l.onnx.GraphProto.toObject(s.g,u)),s.floats&&s.floats.length){d.floats=[];for(var w=0;w<s.floats.length;++w)d.floats[w]=u.json&&!isFinite(s.floats[w])?String(s.floats[w]):s.floats[w]}if(s.ints&&s.ints.length){d.ints=[];for(var w=0;w<s.ints.length;++w)typeof s.ints[w]=="number"?d.ints[w]=u.longs===String?String(s.ints[w]):s.ints[w]:d.ints[w]=u.longs===String?a.Long.prototype.toString.call(s.ints[w]):u.longs===Number?new a.LongBits(s.ints[w].low>>>0,s.ints[w].high>>>0).toNumber():s.ints[w]}if(s.strings&&s.strings.length){d.strings=[];for(var w=0;w<s.strings.length;++w)d.strings[w]=u.bytes===String?a.base64.encode(s.strings[w],0,s.strings[w].length):u.bytes===Array?Array.prototype.slice.call(s.strings[w]):s.strings[w]}if(s.tensors&&s.tensors.length){d.tensors=[];for(var w=0;w<s.tensors.length;++w)d.tensors[w]=l.onnx.TensorProto.toObject(s.tensors[w],u)}if(s.graphs&&s.graphs.length){d.graphs=[];for(var w=0;w<s.graphs.length;++w)d.graphs[w]=l.onnx.GraphProto.toObject(s.graphs[w],u)}if(s.docString!=null&&s.hasOwnProperty("docString")&&(d.docString=s.docString),s.tp!=null&&s.hasOwnProperty("tp")&&(d.tp=l.onnx.TypeProto.toObject(s.tp,u)),s.typeProtos&&s.typeProtos.length){d.typeProtos=[];for(var w=0;w<s.typeProtos.length;++w)d.typeProtos[w]=l.onnx.TypeProto.toObject(s.typeProtos[w],u)}if(s.type!=null&&s.hasOwnProperty("type")&&(d.type=u.enums===String?l.onnx.AttributeProto.AttributeType[s.type]===void 0?s.type:l.onnx.AttributeProto.AttributeType[s.type]:s.type),s.refAttrName!=null&&s.hasOwnProperty("refAttrName")&&(d.refAttrName=s.refAttrName),s.sparseTensor!=null&&s.hasOwnProperty("sparseTensor")&&(d.sparseTensor=l.onnx.SparseTensorProto.toObject(s.sparseTensor,u)),s.sparseTensors&&s.sparseTensors.length){d.sparseTensors=[];for(var w=0;w<s.sparseTensors.length;++w)d.sparseTensors[w]=l.onnx.SparseTensorProto.toObject(s.sparseTensors[w],u)}return d},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.AttributeProto"},p.AttributeType=(function(){var s={},u=Object.create(s);return u[s[0]="UNDEFINED"]=0,u[s[1]="FLOAT"]=1,u[s[2]="INT"]=2,u[s[3]="STRING"]=3,u[s[4]="TENSOR"]=4,u[s[5]="GRAPH"]=5,u[s[11]="SPARSE_TENSOR"]=11,u[s[13]="TYPE_PROTO"]=13,u[s[6]="FLOATS"]=6,u[s[7]="INTS"]=7,u[s[8]="STRINGS"]=8,u[s[9]="TENSORS"]=9,u[s[10]="GRAPHS"]=10,u[s[12]="SPARSE_TENSORS"]=12,u[s[14]="TYPE_PROTOS"]=14,u})(),p})(),c.ValueInfoProto=(function(){function p(s){if(s)for(var u=Object.keys(s),d=0;d<u.length;++d)s[u[d]]!=null&&(this[u[d]]=s[u[d]])}return p.prototype.name="",p.prototype.type=null,p.prototype.docString="",p.create=function(s){return new p(s)},p.encode=function(s,u){return u||(u=o.create()),s.name!=null&&Object.hasOwnProperty.call(s,"name")&&u.uint32(10).string(s.name),s.type!=null&&Object.hasOwnProperty.call(s,"type")&&l.onnx.TypeProto.encode(s.type,u.uint32(18).fork()).ldelim(),s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&u.uint32(26).string(s.docString),u},p.encodeDelimited=function(s,u){return this.encode(s,u).ldelim()},p.decode=function(s,u){s instanceof i||(s=i.create(s));for(var d=u===void 0?s.len:s.pos+u,g=new l.onnx.ValueInfoProto;s.pos<d;){var w=s.uint32();switch(w>>>3){case 1:{g.name=s.string();break}case 2:{g.type=l.onnx.TypeProto.decode(s,s.uint32());break}case 3:{g.docString=s.string();break}default:s.skipType(w&7);break}}return g},p.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},p.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.name!=null&&s.hasOwnProperty("name")&&!a.isString(s.name))return"name: string expected";if(s.type!=null&&s.hasOwnProperty("type")){var u=l.onnx.TypeProto.verify(s.type);if(u)return"type."+u}return s.docString!=null&&s.hasOwnProperty("docString")&&!a.isString(s.docString)?"docString: string expected":null},p.fromObject=function(s){if(s instanceof l.onnx.ValueInfoProto)return s;var u=new l.onnx.ValueInfoProto;if(s.name!=null&&(u.name=String(s.name)),s.type!=null){if(typeof s.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");u.type=l.onnx.TypeProto.fromObject(s.type)}return s.docString!=null&&(u.docString=String(s.docString)),u},p.toObject=function(s,u){u||(u={});var d={};return u.defaults&&(d.name="",d.type=null,d.docString=""),s.name!=null&&s.hasOwnProperty("name")&&(d.name=s.name),s.type!=null&&s.hasOwnProperty("type")&&(d.type=l.onnx.TypeProto.toObject(s.type,u)),s.docString!=null&&s.hasOwnProperty("docString")&&(d.docString=s.docString),d},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.ValueInfoProto"},p})(),c.NodeProto=(function(){function p(s){if(this.input=[],this.output=[],this.attribute=[],s)for(var u=Object.keys(s),d=0;d<u.length;++d)s[u[d]]!=null&&(this[u[d]]=s[u[d]])}return p.prototype.input=a.emptyArray,p.prototype.output=a.emptyArray,p.prototype.name="",p.prototype.opType="",p.prototype.domain="",p.prototype.attribute=a.emptyArray,p.prototype.docString="",p.create=function(s){return new p(s)},p.encode=function(s,u){if(u||(u=o.create()),s.input!=null&&s.input.length)for(var d=0;d<s.input.length;++d)u.uint32(10).string(s.input[d]);if(s.output!=null&&s.output.length)for(var d=0;d<s.output.length;++d)u.uint32(18).string(s.output[d]);if(s.name!=null&&Object.hasOwnProperty.call(s,"name")&&u.uint32(26).string(s.name),s.opType!=null&&Object.hasOwnProperty.call(s,"opType")&&u.uint32(34).string(s.opType),s.attribute!=null&&s.attribute.length)for(var d=0;d<s.attribute.length;++d)l.onnx.AttributeProto.encode(s.attribute[d],u.uint32(42).fork()).ldelim();return s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&u.uint32(50).string(s.docString),s.domain!=null&&Object.hasOwnProperty.call(s,"domain")&&u.uint32(58).string(s.domain),u},p.encodeDelimited=function(s,u){return this.encode(s,u).ldelim()},p.decode=function(s,u){s instanceof i||(s=i.create(s));for(var d=u===void 0?s.len:s.pos+u,g=new l.onnx.NodeProto;s.pos<d;){var w=s.uint32();switch(w>>>3){case 1:{g.input&&g.input.length||(g.input=[]),g.input.push(s.string());break}case 2:{g.output&&g.output.length||(g.output=[]),g.output.push(s.string());break}case 3:{g.name=s.string();break}case 4:{g.opType=s.string();break}case 7:{g.domain=s.string();break}case 5:{g.attribute&&g.attribute.length||(g.attribute=[]),g.attribute.push(l.onnx.AttributeProto.decode(s,s.uint32()));break}case 6:{g.docString=s.string();break}default:s.skipType(w&7);break}}return g},p.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},p.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.input!=null&&s.hasOwnProperty("input")){if(!Array.isArray(s.input))return"input: array expected";for(var u=0;u<s.input.length;++u)if(!a.isString(s.input[u]))return"input: string[] expected"}if(s.output!=null&&s.hasOwnProperty("output")){if(!Array.isArray(s.output))return"output: array expected";for(var u=0;u<s.output.length;++u)if(!a.isString(s.output[u]))return"output: string[] expected"}if(s.name!=null&&s.hasOwnProperty("name")&&!a.isString(s.name))return"name: string expected";if(s.opType!=null&&s.hasOwnProperty("opType")&&!a.isString(s.opType))return"opType: string expected";if(s.domain!=null&&s.hasOwnProperty("domain")&&!a.isString(s.domain))return"domain: string expected";if(s.attribute!=null&&s.hasOwnProperty("attribute")){if(!Array.isArray(s.attribute))return"attribute: array expected";for(var u=0;u<s.attribute.length;++u){var d=l.onnx.AttributeProto.verify(s.attribute[u]);if(d)return"attribute."+d}}return s.docString!=null&&s.hasOwnProperty("docString")&&!a.isString(s.docString)?"docString: string expected":null},p.fromObject=function(s){if(s instanceof l.onnx.NodeProto)return s;var u=new l.onnx.NodeProto;if(s.input){if(!Array.isArray(s.input))throw TypeError(".onnx.NodeProto.input: array expected");u.input=[];for(var d=0;d<s.input.length;++d)u.input[d]=String(s.input[d])}if(s.output){if(!Array.isArray(s.output))throw TypeError(".onnx.NodeProto.output: array expected");u.output=[];for(var d=0;d<s.output.length;++d)u.output[d]=String(s.output[d])}if(s.name!=null&&(u.name=String(s.name)),s.opType!=null&&(u.opType=String(s.opType)),s.domain!=null&&(u.domain=String(s.domain)),s.attribute){if(!Array.isArray(s.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");u.attribute=[];for(var d=0;d<s.attribute.length;++d){if(typeof s.attribute[d]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");u.attribute[d]=l.onnx.AttributeProto.fromObject(s.attribute[d])}}return s.docString!=null&&(u.docString=String(s.docString)),u},p.toObject=function(s,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.input=[],d.output=[],d.attribute=[]),u.defaults&&(d.name="",d.opType="",d.docString="",d.domain=""),s.input&&s.input.length){d.input=[];for(var g=0;g<s.input.length;++g)d.input[g]=s.input[g]}if(s.output&&s.output.length){d.output=[];for(var g=0;g<s.output.length;++g)d.output[g]=s.output[g]}if(s.name!=null&&s.hasOwnProperty("name")&&(d.name=s.name),s.opType!=null&&s.hasOwnProperty("opType")&&(d.opType=s.opType),s.attribute&&s.attribute.length){d.attribute=[];for(var g=0;g<s.attribute.length;++g)d.attribute[g]=l.onnx.AttributeProto.toObject(s.attribute[g],u)}return s.docString!=null&&s.hasOwnProperty("docString")&&(d.docString=s.docString),s.domain!=null&&s.hasOwnProperty("domain")&&(d.domain=s.domain),d},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.NodeProto"},p})(),c.TrainingInfoProto=(function(){function p(s){if(this.initializationBinding=[],this.updateBinding=[],s)for(var u=Object.keys(s),d=0;d<u.length;++d)s[u[d]]!=null&&(this[u[d]]=s[u[d]])}return p.prototype.initialization=null,p.prototype.algorithm=null,p.prototype.initializationBinding=a.emptyArray,p.prototype.updateBinding=a.emptyArray,p.create=function(s){return new p(s)},p.encode=function(s,u){if(u||(u=o.create()),s.initialization!=null&&Object.hasOwnProperty.call(s,"initialization")&&l.onnx.GraphProto.encode(s.initialization,u.uint32(10).fork()).ldelim(),s.algorithm!=null&&Object.hasOwnProperty.call(s,"algorithm")&&l.onnx.GraphProto.encode(s.algorithm,u.uint32(18).fork()).ldelim(),s.initializationBinding!=null&&s.initializationBinding.length)for(var d=0;d<s.initializationBinding.length;++d)l.onnx.StringStringEntryProto.encode(s.initializationBinding[d],u.uint32(26).fork()).ldelim();if(s.updateBinding!=null&&s.updateBinding.length)for(var d=0;d<s.updateBinding.length;++d)l.onnx.StringStringEntryProto.encode(s.updateBinding[d],u.uint32(34).fork()).ldelim();return u},p.encodeDelimited=function(s,u){return this.encode(s,u).ldelim()},p.decode=function(s,u){s instanceof i||(s=i.create(s));for(var d=u===void 0?s.len:s.pos+u,g=new l.onnx.TrainingInfoProto;s.pos<d;){var w=s.uint32();switch(w>>>3){case 1:{g.initialization=l.onnx.GraphProto.decode(s,s.uint32());break}case 2:{g.algorithm=l.onnx.GraphProto.decode(s,s.uint32());break}case 3:{g.initializationBinding&&g.initializationBinding.length||(g.initializationBinding=[]),g.initializationBinding.push(l.onnx.StringStringEntryProto.decode(s,s.uint32()));break}case 4:{g.updateBinding&&g.updateBinding.length||(g.updateBinding=[]),g.updateBinding.push(l.onnx.StringStringEntryProto.decode(s,s.uint32()));break}default:s.skipType(w&7);break}}return g},p.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},p.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.initialization!=null&&s.hasOwnProperty("initialization")){var u=l.onnx.GraphProto.verify(s.initialization);if(u)return"initialization."+u}if(s.algorithm!=null&&s.hasOwnProperty("algorithm")){var u=l.onnx.GraphProto.verify(s.algorithm);if(u)return"algorithm."+u}if(s.initializationBinding!=null&&s.hasOwnProperty("initializationBinding")){if(!Array.isArray(s.initializationBinding))return"initializationBinding: array expected";for(var d=0;d<s.initializationBinding.length;++d){var u=l.onnx.StringStringEntryProto.verify(s.initializationBinding[d]);if(u)return"initializationBinding."+u}}if(s.updateBinding!=null&&s.hasOwnProperty("updateBinding")){if(!Array.isArray(s.updateBinding))return"updateBinding: array expected";for(var d=0;d<s.updateBinding.length;++d){var u=l.onnx.StringStringEntryProto.verify(s.updateBinding[d]);if(u)return"updateBinding."+u}}return null},p.fromObject=function(s){if(s instanceof l.onnx.TrainingInfoProto)return s;var u=new l.onnx.TrainingInfoProto;if(s.initialization!=null){if(typeof s.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");u.initialization=l.onnx.GraphProto.fromObject(s.initialization)}if(s.algorithm!=null){if(typeof s.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");u.algorithm=l.onnx.GraphProto.fromObject(s.algorithm)}if(s.initializationBinding){if(!Array.isArray(s.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");u.initializationBinding=[];for(var d=0;d<s.initializationBinding.length;++d){if(typeof s.initializationBinding[d]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");u.initializationBinding[d]=l.onnx.StringStringEntryProto.fromObject(s.initializationBinding[d])}}if(s.updateBinding){if(!Array.isArray(s.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");u.updateBinding=[];for(var d=0;d<s.updateBinding.length;++d){if(typeof s.updateBinding[d]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");u.updateBinding[d]=l.onnx.StringStringEntryProto.fromObject(s.updateBinding[d])}}return u},p.toObject=function(s,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.initializationBinding=[],d.updateBinding=[]),u.defaults&&(d.initialization=null,d.algorithm=null),s.initialization!=null&&s.hasOwnProperty("initialization")&&(d.initialization=l.onnx.GraphProto.toObject(s.initialization,u)),s.algorithm!=null&&s.hasOwnProperty("algorithm")&&(d.algorithm=l.onnx.GraphProto.toObject(s.algorithm,u)),s.initializationBinding&&s.initializationBinding.length){d.initializationBinding=[];for(var g=0;g<s.initializationBinding.length;++g)d.initializationBinding[g]=l.onnx.StringStringEntryProto.toObject(s.initializationBinding[g],u)}if(s.updateBinding&&s.updateBinding.length){d.updateBinding=[];for(var g=0;g<s.updateBinding.length;++g)d.updateBinding[g]=l.onnx.StringStringEntryProto.toObject(s.updateBinding[g],u)}return d},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TrainingInfoProto"},p})(),c.ModelProto=(function(){function p(s){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],s)for(var u=Object.keys(s),d=0;d<u.length;++d)s[u[d]]!=null&&(this[u[d]]=s[u[d]])}return p.prototype.irVersion=a.Long?a.Long.fromBits(0,0,!1):0,p.prototype.opsetImport=a.emptyArray,p.prototype.producerName="",p.prototype.producerVersion="",p.prototype.domain="",p.prototype.modelVersion=a.Long?a.Long.fromBits(0,0,!1):0,p.prototype.docString="",p.prototype.graph=null,p.prototype.metadataProps=a.emptyArray,p.prototype.trainingInfo=a.emptyArray,p.prototype.functions=a.emptyArray,p.create=function(s){return new p(s)},p.encode=function(s,u){if(u||(u=o.create()),s.irVersion!=null&&Object.hasOwnProperty.call(s,"irVersion")&&u.uint32(8).int64(s.irVersion),s.producerName!=null&&Object.hasOwnProperty.call(s,"producerName")&&u.uint32(18).string(s.producerName),s.producerVersion!=null&&Object.hasOwnProperty.call(s,"producerVersion")&&u.uint32(26).string(s.producerVersion),s.domain!=null&&Object.hasOwnProperty.call(s,"domain")&&u.uint32(34).string(s.domain),s.modelVersion!=null&&Object.hasOwnProperty.call(s,"modelVersion")&&u.uint32(40).int64(s.modelVersion),s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&u.uint32(50).string(s.docString),s.graph!=null&&Object.hasOwnProperty.call(s,"graph")&&l.onnx.GraphProto.encode(s.graph,u.uint32(58).fork()).ldelim(),s.opsetImport!=null&&s.opsetImport.length)for(var d=0;d<s.opsetImport.length;++d)l.onnx.OperatorSetIdProto.encode(s.opsetImport[d],u.uint32(66).fork()).ldelim();if(s.metadataProps!=null&&s.metadataProps.length)for(var d=0;d<s.metadataProps.length;++d)l.onnx.StringStringEntryProto.encode(s.metadataProps[d],u.uint32(114).fork()).ldelim();if(s.trainingInfo!=null&&s.trainingInfo.length)for(var d=0;d<s.trainingInfo.length;++d)l.onnx.TrainingInfoProto.encode(s.trainingInfo[d],u.uint32(162).fork()).ldelim();if(s.functions!=null&&s.functions.length)for(var d=0;d<s.functions.length;++d)l.onnx.FunctionProto.encode(s.functions[d],u.uint32(202).fork()).ldelim();return u},p.encodeDelimited=function(s,u){return this.encode(s,u).ldelim()},p.decode=function(s,u){s instanceof i||(s=i.create(s));for(var d=u===void 0?s.len:s.pos+u,g=new l.onnx.ModelProto;s.pos<d;){var w=s.uint32();switch(w>>>3){case 1:{g.irVersion=s.int64();break}case 8:{g.opsetImport&&g.opsetImport.length||(g.opsetImport=[]),g.opsetImport.push(l.onnx.OperatorSetIdProto.decode(s,s.uint32()));break}case 2:{g.producerName=s.string();break}case 3:{g.producerVersion=s.string();break}case 4:{g.domain=s.string();break}case 5:{g.modelVersion=s.int64();break}case 6:{g.docString=s.string();break}case 7:{g.graph=l.onnx.GraphProto.decode(s,s.uint32());break}case 14:{g.metadataProps&&g.metadataProps.length||(g.metadataProps=[]),g.metadataProps.push(l.onnx.StringStringEntryProto.decode(s,s.uint32()));break}case 20:{g.trainingInfo&&g.trainingInfo.length||(g.trainingInfo=[]),g.trainingInfo.push(l.onnx.TrainingInfoProto.decode(s,s.uint32()));break}case 25:{g.functions&&g.functions.length||(g.functions=[]),g.functions.push(l.onnx.FunctionProto.decode(s,s.uint32()));break}default:s.skipType(w&7);break}}return g},p.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},p.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.irVersion!=null&&s.hasOwnProperty("irVersion")&&!a.isInteger(s.irVersion)&&!(s.irVersion&&a.isInteger(s.irVersion.low)&&a.isInteger(s.irVersion.high)))return"irVersion: integer|Long expected";if(s.opsetImport!=null&&s.hasOwnProperty("opsetImport")){if(!Array.isArray(s.opsetImport))return"opsetImport: array expected";for(var u=0;u<s.opsetImport.length;++u){var d=l.onnx.OperatorSetIdProto.verify(s.opsetImport[u]);if(d)return"opsetImport."+d}}if(s.producerName!=null&&s.hasOwnProperty("producerName")&&!a.isString(s.producerName))return"producerName: string expected";if(s.producerVersion!=null&&s.hasOwnProperty("producerVersion")&&!a.isString(s.producerVersion))return"producerVersion: string expected";if(s.domain!=null&&s.hasOwnProperty("domain")&&!a.isString(s.domain))return"domain: string expected";if(s.modelVersion!=null&&s.hasOwnProperty("modelVersion")&&!a.isInteger(s.modelVersion)&&!(s.modelVersion&&a.isInteger(s.modelVersion.low)&&a.isInteger(s.modelVersion.high)))return"modelVersion: integer|Long expected";if(s.docString!=null&&s.hasOwnProperty("docString")&&!a.isString(s.docString))return"docString: string expected";if(s.graph!=null&&s.hasOwnProperty("graph")){var d=l.onnx.GraphProto.verify(s.graph);if(d)return"graph."+d}if(s.metadataProps!=null&&s.hasOwnProperty("metadataProps")){if(!Array.isArray(s.metadataProps))return"metadataProps: array expected";for(var u=0;u<s.metadataProps.length;++u){var d=l.onnx.StringStringEntryProto.verify(s.metadataProps[u]);if(d)return"metadataProps."+d}}if(s.trainingInfo!=null&&s.hasOwnProperty("trainingInfo")){if(!Array.isArray(s.trainingInfo))return"trainingInfo: array expected";for(var u=0;u<s.trainingInfo.length;++u){var d=l.onnx.TrainingInfoProto.verify(s.trainingInfo[u]);if(d)return"trainingInfo."+d}}if(s.functions!=null&&s.hasOwnProperty("functions")){if(!Array.isArray(s.functions))return"functions: array expected";for(var u=0;u<s.functions.length;++u){var d=l.onnx.FunctionProto.verify(s.functions[u]);if(d)return"functions."+d}}return null},p.fromObject=function(s){if(s instanceof l.onnx.ModelProto)return s;var u=new l.onnx.ModelProto;if(s.irVersion!=null&&(a.Long?(u.irVersion=a.Long.fromValue(s.irVersion)).unsigned=!1:typeof s.irVersion=="string"?u.irVersion=parseInt(s.irVersion,10):typeof s.irVersion=="number"?u.irVersion=s.irVersion:typeof s.irVersion=="object"&&(u.irVersion=new a.LongBits(s.irVersion.low>>>0,s.irVersion.high>>>0).toNumber())),s.opsetImport){if(!Array.isArray(s.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");u.opsetImport=[];for(var d=0;d<s.opsetImport.length;++d){if(typeof s.opsetImport[d]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");u.opsetImport[d]=l.onnx.OperatorSetIdProto.fromObject(s.opsetImport[d])}}if(s.producerName!=null&&(u.producerName=String(s.producerName)),s.producerVersion!=null&&(u.producerVersion=String(s.producerVersion)),s.domain!=null&&(u.domain=String(s.domain)),s.modelVersion!=null&&(a.Long?(u.modelVersion=a.Long.fromValue(s.modelVersion)).unsigned=!1:typeof s.modelVersion=="string"?u.modelVersion=parseInt(s.modelVersion,10):typeof s.modelVersion=="number"?u.modelVersion=s.modelVersion:typeof s.modelVersion=="object"&&(u.modelVersion=new a.LongBits(s.modelVersion.low>>>0,s.modelVersion.high>>>0).toNumber())),s.docString!=null&&(u.docString=String(s.docString)),s.graph!=null){if(typeof s.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");u.graph=l.onnx.GraphProto.fromObject(s.graph)}if(s.metadataProps){if(!Array.isArray(s.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");u.metadataProps=[];for(var d=0;d<s.metadataProps.length;++d){if(typeof s.metadataProps[d]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");u.metadataProps[d]=l.onnx.StringStringEntryProto.fromObject(s.metadataProps[d])}}if(s.trainingInfo){if(!Array.isArray(s.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");u.trainingInfo=[];for(var d=0;d<s.trainingInfo.length;++d){if(typeof s.trainingInfo[d]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");u.trainingInfo[d]=l.onnx.TrainingInfoProto.fromObject(s.trainingInfo[d])}}if(s.functions){if(!Array.isArray(s.functions))throw TypeError(".onnx.ModelProto.functions: array expected");u.functions=[];for(var d=0;d<s.functions.length;++d){if(typeof s.functions[d]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");u.functions[d]=l.onnx.FunctionProto.fromObject(s.functions[d])}}return u},p.toObject=function(s,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.opsetImport=[],d.metadataProps=[],d.trainingInfo=[],d.functions=[]),u.defaults){if(a.Long){var g=new a.Long(0,0,!1);d.irVersion=u.longs===String?g.toString():u.longs===Number?g.toNumber():g}else d.irVersion=u.longs===String?"0":0;if(d.producerName="",d.producerVersion="",d.domain="",a.Long){var g=new a.Long(0,0,!1);d.modelVersion=u.longs===String?g.toString():u.longs===Number?g.toNumber():g}else d.modelVersion=u.longs===String?"0":0;d.docString="",d.graph=null}if(s.irVersion!=null&&s.hasOwnProperty("irVersion")&&(typeof s.irVersion=="number"?d.irVersion=u.longs===String?String(s.irVersion):s.irVersion:d.irVersion=u.longs===String?a.Long.prototype.toString.call(s.irVersion):u.longs===Number?new a.LongBits(s.irVersion.low>>>0,s.irVersion.high>>>0).toNumber():s.irVersion),s.producerName!=null&&s.hasOwnProperty("producerName")&&(d.producerName=s.producerName),s.producerVersion!=null&&s.hasOwnProperty("producerVersion")&&(d.producerVersion=s.producerVersion),s.domain!=null&&s.hasOwnProperty("domain")&&(d.domain=s.domain),s.modelVersion!=null&&s.hasOwnProperty("modelVersion")&&(typeof s.modelVersion=="number"?d.modelVersion=u.longs===String?String(s.modelVersion):s.modelVersion:d.modelVersion=u.longs===String?a.Long.prototype.toString.call(s.modelVersion):u.longs===Number?new a.LongBits(s.modelVersion.low>>>0,s.modelVersion.high>>>0).toNumber():s.modelVersion),s.docString!=null&&s.hasOwnProperty("docString")&&(d.docString=s.docString),s.graph!=null&&s.hasOwnProperty("graph")&&(d.graph=l.onnx.GraphProto.toObject(s.graph,u)),s.opsetImport&&s.opsetImport.length){d.opsetImport=[];for(var w=0;w<s.opsetImport.length;++w)d.opsetImport[w]=l.onnx.OperatorSetIdProto.toObject(s.opsetImport[w],u)}if(s.metadataProps&&s.metadataProps.length){d.metadataProps=[];for(var w=0;w<s.metadataProps.length;++w)d.metadataProps[w]=l.onnx.StringStringEntryProto.toObject(s.metadataProps[w],u)}if(s.trainingInfo&&s.trainingInfo.length){d.trainingInfo=[];for(var w=0;w<s.trainingInfo.length;++w)d.trainingInfo[w]=l.onnx.TrainingInfoProto.toObject(s.trainingInfo[w],u)}if(s.functions&&s.functions.length){d.functions=[];for(var w=0;w<s.functions.length;++w)d.functions[w]=l.onnx.FunctionProto.toObject(s.functions[w],u)}return d},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.ModelProto"},p})(),c.StringStringEntryProto=(function(){function p(s){if(s)for(var u=Object.keys(s),d=0;d<u.length;++d)s[u[d]]!=null&&(this[u[d]]=s[u[d]])}return p.prototype.key="",p.prototype.value="",p.create=function(s){return new p(s)},p.encode=function(s,u){return u||(u=o.create()),s.key!=null&&Object.hasOwnProperty.call(s,"key")&&u.uint32(10).string(s.key),s.value!=null&&Object.hasOwnProperty.call(s,"value")&&u.uint32(18).string(s.value),u},p.encodeDelimited=function(s,u){return this.encode(s,u).ldelim()},p.decode=function(s,u){s instanceof i||(s=i.create(s));for(var d=u===void 0?s.len:s.pos+u,g=new l.onnx.StringStringEntryProto;s.pos<d;){var w=s.uint32();switch(w>>>3){case 1:{g.key=s.string();break}case 2:{g.value=s.string();break}default:s.skipType(w&7);break}}return g},p.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},p.verify=function(s){return typeof s!="object"||s===null?"object expected":s.key!=null&&s.hasOwnProperty("key")&&!a.isString(s.key)?"key: string expected":s.value!=null&&s.hasOwnProperty("value")&&!a.isString(s.value)?"value: string expected":null},p.fromObject=function(s){if(s instanceof l.onnx.StringStringEntryProto)return s;var u=new l.onnx.StringStringEntryProto;return s.key!=null&&(u.key=String(s.key)),s.value!=null&&(u.value=String(s.value)),u},p.toObject=function(s,u){u||(u={});var d={};return u.defaults&&(d.key="",d.value=""),s.key!=null&&s.hasOwnProperty("key")&&(d.key=s.key),s.value!=null&&s.hasOwnProperty("value")&&(d.value=s.value),d},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.StringStringEntryProto"},p})(),c.TensorAnnotation=(function(){function p(s){if(this.quantParameterTensorNames=[],s)for(var u=Object.keys(s),d=0;d<u.length;++d)s[u[d]]!=null&&(this[u[d]]=s[u[d]])}return p.prototype.tensorName="",p.prototype.quantParameterTensorNames=a.emptyArray,p.create=function(s){return new p(s)},p.encode=function(s,u){if(u||(u=o.create()),s.tensorName!=null&&Object.hasOwnProperty.call(s,"tensorName")&&u.uint32(10).string(s.tensorName),s.quantParameterTensorNames!=null&&s.quantParameterTensorNames.length)for(var d=0;d<s.quantParameterTensorNames.length;++d)l.onnx.StringStringEntryProto.encode(s.quantParameterTensorNames[d],u.uint32(18).fork()).ldelim();return u},p.encodeDelimited=function(s,u){return this.encode(s,u).ldelim()},p.decode=function(s,u){s instanceof i||(s=i.create(s));for(var d=u===void 0?s.len:s.pos+u,g=new l.onnx.TensorAnnotation;s.pos<d;){var w=s.uint32();switch(w>>>3){case 1:{g.tensorName=s.string();break}case 2:{g.quantParameterTensorNames&&g.quantParameterTensorNames.length||(g.quantParameterTensorNames=[]),g.quantParameterTensorNames.push(l.onnx.StringStringEntryProto.decode(s,s.uint32()));break}default:s.skipType(w&7);break}}return g},p.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},p.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.tensorName!=null&&s.hasOwnProperty("tensorName")&&!a.isString(s.tensorName))return"tensorName: string expected";if(s.quantParameterTensorNames!=null&&s.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(s.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var u=0;u<s.quantParameterTensorNames.length;++u){var d=l.onnx.StringStringEntryProto.verify(s.quantParameterTensorNames[u]);if(d)return"quantParameterTensorNames."+d}}return null},p.fromObject=function(s){if(s instanceof l.onnx.TensorAnnotation)return s;var u=new l.onnx.TensorAnnotation;if(s.tensorName!=null&&(u.tensorName=String(s.tensorName)),s.quantParameterTensorNames){if(!Array.isArray(s.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");u.quantParameterTensorNames=[];for(var d=0;d<s.quantParameterTensorNames.length;++d){if(typeof s.quantParameterTensorNames[d]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");u.quantParameterTensorNames[d]=l.onnx.StringStringEntryProto.fromObject(s.quantParameterTensorNames[d])}}return u},p.toObject=function(s,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.quantParameterTensorNames=[]),u.defaults&&(d.tensorName=""),s.tensorName!=null&&s.hasOwnProperty("tensorName")&&(d.tensorName=s.tensorName),s.quantParameterTensorNames&&s.quantParameterTensorNames.length){d.quantParameterTensorNames=[];for(var g=0;g<s.quantParameterTensorNames.length;++g)d.quantParameterTensorNames[g]=l.onnx.StringStringEntryProto.toObject(s.quantParameterTensorNames[g],u)}return d},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TensorAnnotation"},p})(),c.GraphProto=(function(){function p(s){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],s)for(var u=Object.keys(s),d=0;d<u.length;++d)s[u[d]]!=null&&(this[u[d]]=s[u[d]])}return p.prototype.node=a.emptyArray,p.prototype.name="",p.prototype.initializer=a.emptyArray,p.prototype.sparseInitializer=a.emptyArray,p.prototype.docString="",p.prototype.input=a.emptyArray,p.prototype.output=a.emptyArray,p.prototype.valueInfo=a.emptyArray,p.prototype.quantizationAnnotation=a.emptyArray,p.create=function(s){return new p(s)},p.encode=function(s,u){if(u||(u=o.create()),s.node!=null&&s.node.length)for(var d=0;d<s.node.length;++d)l.onnx.NodeProto.encode(s.node[d],u.uint32(10).fork()).ldelim();if(s.name!=null&&Object.hasOwnProperty.call(s,"name")&&u.uint32(18).string(s.name),s.initializer!=null&&s.initializer.length)for(var d=0;d<s.initializer.length;++d)l.onnx.TensorProto.encode(s.initializer[d],u.uint32(42).fork()).ldelim();if(s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&u.uint32(82).string(s.docString),s.input!=null&&s.input.length)for(var d=0;d<s.input.length;++d)l.onnx.ValueInfoProto.encode(s.input[d],u.uint32(90).fork()).ldelim();if(s.output!=null&&s.output.length)for(var d=0;d<s.output.length;++d)l.onnx.ValueInfoProto.encode(s.output[d],u.uint32(98).fork()).ldelim();if(s.valueInfo!=null&&s.valueInfo.length)for(var d=0;d<s.valueInfo.length;++d)l.onnx.ValueInfoProto.encode(s.valueInfo[d],u.uint32(106).fork()).ldelim();if(s.quantizationAnnotation!=null&&s.quantizationAnnotation.length)for(var d=0;d<s.quantizationAnnotation.length;++d)l.onnx.TensorAnnotation.encode(s.quantizationAnnotation[d],u.uint32(114).fork()).ldelim();if(s.sparseInitializer!=null&&s.sparseInitializer.length)for(var d=0;d<s.sparseInitializer.length;++d)l.onnx.SparseTensorProto.encode(s.sparseInitializer[d],u.uint32(122).fork()).ldelim();return u},p.encodeDelimited=function(s,u){return this.encode(s,u).ldelim()},p.decode=function(s,u){s instanceof i||(s=i.create(s));for(var d=u===void 0?s.len:s.pos+u,g=new l.onnx.GraphProto;s.pos<d;){var w=s.uint32();switch(w>>>3){case 1:{g.node&&g.node.length||(g.node=[]),g.node.push(l.onnx.NodeProto.decode(s,s.uint32()));break}case 2:{g.name=s.string();break}case 5:{g.initializer&&g.initializer.length||(g.initializer=[]),g.initializer.push(l.onnx.TensorProto.decode(s,s.uint32()));break}case 15:{g.sparseInitializer&&g.sparseInitializer.length||(g.sparseInitializer=[]),g.sparseInitializer.push(l.onnx.SparseTensorProto.decode(s,s.uint32()));break}case 10:{g.docString=s.string();break}case 11:{g.input&&g.input.length||(g.input=[]),g.input.push(l.onnx.ValueInfoProto.decode(s,s.uint32()));break}case 12:{g.output&&g.output.length||(g.output=[]),g.output.push(l.onnx.ValueInfoProto.decode(s,s.uint32()));break}case 13:{g.valueInfo&&g.valueInfo.length||(g.valueInfo=[]),g.valueInfo.push(l.onnx.ValueInfoProto.decode(s,s.uint32()));break}case 14:{g.quantizationAnnotation&&g.quantizationAnnotation.length||(g.quantizationAnnotation=[]),g.quantizationAnnotation.push(l.onnx.TensorAnnotation.decode(s,s.uint32()));break}default:s.skipType(w&7);break}}return g},p.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},p.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.node!=null&&s.hasOwnProperty("node")){if(!Array.isArray(s.node))return"node: array expected";for(var u=0;u<s.node.length;++u){var d=l.onnx.NodeProto.verify(s.node[u]);if(d)return"node."+d}}if(s.name!=null&&s.hasOwnProperty("name")&&!a.isString(s.name))return"name: string expected";if(s.initializer!=null&&s.hasOwnProperty("initializer")){if(!Array.isArray(s.initializer))return"initializer: array expected";for(var u=0;u<s.initializer.length;++u){var d=l.onnx.TensorProto.verify(s.initializer[u]);if(d)return"initializer."+d}}if(s.sparseInitializer!=null&&s.hasOwnProperty("sparseInitializer")){if(!Array.isArray(s.sparseInitializer))return"sparseInitializer: array expected";for(var u=0;u<s.sparseInitializer.length;++u){var d=l.onnx.SparseTensorProto.verify(s.sparseInitializer[u]);if(d)return"sparseInitializer."+d}}if(s.docString!=null&&s.hasOwnProperty("docString")&&!a.isString(s.docString))return"docString: string expected";if(s.input!=null&&s.hasOwnProperty("input")){if(!Array.isArray(s.input))return"input: array expected";for(var u=0;u<s.input.length;++u){var d=l.onnx.ValueInfoProto.verify(s.input[u]);if(d)return"input."+d}}if(s.output!=null&&s.hasOwnProperty("output")){if(!Array.isArray(s.output))return"output: array expected";for(var u=0;u<s.output.length;++u){var d=l.onnx.ValueInfoProto.verify(s.output[u]);if(d)return"output."+d}}if(s.valueInfo!=null&&s.hasOwnProperty("valueInfo")){if(!Array.isArray(s.valueInfo))return"valueInfo: array expected";for(var u=0;u<s.valueInfo.length;++u){var d=l.onnx.ValueInfoProto.verify(s.valueInfo[u]);if(d)return"valueInfo."+d}}if(s.quantizationAnnotation!=null&&s.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(s.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var u=0;u<s.quantizationAnnotation.length;++u){var d=l.onnx.TensorAnnotation.verify(s.quantizationAnnotation[u]);if(d)return"quantizationAnnotation."+d}}return null},p.fromObject=function(s){if(s instanceof l.onnx.GraphProto)return s;var u=new l.onnx.GraphProto;if(s.node){if(!Array.isArray(s.node))throw TypeError(".onnx.GraphProto.node: array expected");u.node=[];for(var d=0;d<s.node.length;++d){if(typeof s.node[d]!="object")throw TypeError(".onnx.GraphProto.node: object expected");u.node[d]=l.onnx.NodeProto.fromObject(s.node[d])}}if(s.name!=null&&(u.name=String(s.name)),s.initializer){if(!Array.isArray(s.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");u.initializer=[];for(var d=0;d<s.initializer.length;++d){if(typeof s.initializer[d]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");u.initializer[d]=l.onnx.TensorProto.fromObject(s.initializer[d])}}if(s.sparseInitializer){if(!Array.isArray(s.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");u.sparseInitializer=[];for(var d=0;d<s.sparseInitializer.length;++d){if(typeof s.sparseInitializer[d]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");u.sparseInitializer[d]=l.onnx.SparseTensorProto.fromObject(s.sparseInitializer[d])}}if(s.docString!=null&&(u.docString=String(s.docString)),s.input){if(!Array.isArray(s.input))throw TypeError(".onnx.GraphProto.input: array expected");u.input=[];for(var d=0;d<s.input.length;++d){if(typeof s.input[d]!="object")throw TypeError(".onnx.GraphProto.input: object expected");u.input[d]=l.onnx.ValueInfoProto.fromObject(s.input[d])}}if(s.output){if(!Array.isArray(s.output))throw TypeError(".onnx.GraphProto.output: array expected");u.output=[];for(var d=0;d<s.output.length;++d){if(typeof s.output[d]!="object")throw TypeError(".onnx.GraphProto.output: object expected");u.output[d]=l.onnx.ValueInfoProto.fromObject(s.output[d])}}if(s.valueInfo){if(!Array.isArray(s.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");u.valueInfo=[];for(var d=0;d<s.valueInfo.length;++d){if(typeof s.valueInfo[d]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");u.valueInfo[d]=l.onnx.ValueInfoProto.fromObject(s.valueInfo[d])}}if(s.quantizationAnnotation){if(!Array.isArray(s.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");u.quantizationAnnotation=[];for(var d=0;d<s.quantizationAnnotation.length;++d){if(typeof s.quantizationAnnotation[d]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");u.quantizationAnnotation[d]=l.onnx.TensorAnnotation.fromObject(s.quantizationAnnotation[d])}}return u},p.toObject=function(s,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.node=[],d.initializer=[],d.input=[],d.output=[],d.valueInfo=[],d.quantizationAnnotation=[],d.sparseInitializer=[]),u.defaults&&(d.name="",d.docString=""),s.node&&s.node.length){d.node=[];for(var g=0;g<s.node.length;++g)d.node[g]=l.onnx.NodeProto.toObject(s.node[g],u)}if(s.name!=null&&s.hasOwnProperty("name")&&(d.name=s.name),s.initializer&&s.initializer.length){d.initializer=[];for(var g=0;g<s.initializer.length;++g)d.initializer[g]=l.onnx.TensorProto.toObject(s.initializer[g],u)}if(s.docString!=null&&s.hasOwnProperty("docString")&&(d.docString=s.docString),s.input&&s.input.length){d.input=[];for(var g=0;g<s.input.length;++g)d.input[g]=l.onnx.ValueInfoProto.toObject(s.input[g],u)}if(s.output&&s.output.length){d.output=[];for(var g=0;g<s.output.length;++g)d.output[g]=l.onnx.ValueInfoProto.toObject(s.output[g],u)}if(s.valueInfo&&s.valueInfo.length){d.valueInfo=[];for(var g=0;g<s.valueInfo.length;++g)d.valueInfo[g]=l.onnx.ValueInfoProto.toObject(s.valueInfo[g],u)}if(s.quantizationAnnotation&&s.quantizationAnnotation.length){d.quantizationAnnotation=[];for(var g=0;g<s.quantizationAnnotation.length;++g)d.quantizationAnnotation[g]=l.onnx.TensorAnnotation.toObject(s.quantizationAnnotation[g],u)}if(s.sparseInitializer&&s.sparseInitializer.length){d.sparseInitializer=[];for(var g=0;g<s.sparseInitializer.length;++g)d.sparseInitializer[g]=l.onnx.SparseTensorProto.toObject(s.sparseInitializer[g],u)}return d},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.GraphProto"},p})(),c.TensorProto=(function(){function p(s){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],s)for(var u=Object.keys(s),d=0;d<u.length;++d)s[u[d]]!=null&&(this[u[d]]=s[u[d]])}return p.prototype.dims=a.emptyArray,p.prototype.dataType=0,p.prototype.segment=null,p.prototype.floatData=a.emptyArray,p.prototype.int32Data=a.emptyArray,p.prototype.stringData=a.emptyArray,p.prototype.int64Data=a.emptyArray,p.prototype.name="",p.prototype.docString="",p.prototype.rawData=a.newBuffer([]),p.prototype.externalData=a.emptyArray,p.prototype.dataLocation=0,p.prototype.doubleData=a.emptyArray,p.prototype.uint64Data=a.emptyArray,p.create=function(s){return new p(s)},p.encode=function(s,u){if(u||(u=o.create()),s.dims!=null&&s.dims.length){u.uint32(10).fork();for(var d=0;d<s.dims.length;++d)u.int64(s.dims[d]);u.ldelim()}if(s.dataType!=null&&Object.hasOwnProperty.call(s,"dataType")&&u.uint32(16).int32(s.dataType),s.segment!=null&&Object.hasOwnProperty.call(s,"segment")&&l.onnx.TensorProto.Segment.encode(s.segment,u.uint32(26).fork()).ldelim(),s.floatData!=null&&s.floatData.length){u.uint32(34).fork();for(var d=0;d<s.floatData.length;++d)u.float(s.floatData[d]);u.ldelim()}if(s.int32Data!=null&&s.int32Data.length){u.uint32(42).fork();for(var d=0;d<s.int32Data.length;++d)u.int32(s.int32Data[d]);u.ldelim()}if(s.stringData!=null&&s.stringData.length)for(var d=0;d<s.stringData.length;++d)u.uint32(50).bytes(s.stringData[d]);if(s.int64Data!=null&&s.int64Data.length){u.uint32(58).fork();for(var d=0;d<s.int64Data.length;++d)u.int64(s.int64Data[d]);u.ldelim()}if(s.name!=null&&Object.hasOwnProperty.call(s,"name")&&u.uint32(66).string(s.name),s.rawData!=null&&Object.hasOwnProperty.call(s,"rawData")&&u.uint32(74).bytes(s.rawData),s.doubleData!=null&&s.doubleData.length){u.uint32(82).fork();for(var d=0;d<s.doubleData.length;++d)u.double(s.doubleData[d]);u.ldelim()}if(s.uint64Data!=null&&s.uint64Data.length){u.uint32(90).fork();for(var d=0;d<s.uint64Data.length;++d)u.uint64(s.uint64Data[d]);u.ldelim()}if(s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&u.uint32(98).string(s.docString),s.externalData!=null&&s.externalData.length)for(var d=0;d<s.externalData.length;++d)l.onnx.StringStringEntryProto.encode(s.externalData[d],u.uint32(106).fork()).ldelim();return s.dataLocation!=null&&Object.hasOwnProperty.call(s,"dataLocation")&&u.uint32(112).int32(s.dataLocation),u},p.encodeDelimited=function(s,u){return this.encode(s,u).ldelim()},p.decode=function(s,u){s instanceof i||(s=i.create(s));for(var d=u===void 0?s.len:s.pos+u,g=new l.onnx.TensorProto;s.pos<d;){var w=s.uint32();switch(w>>>3){case 1:{if(g.dims&&g.dims.length||(g.dims=[]),(w&7)===2)for(var x=s.uint32()+s.pos;s.pos<x;)g.dims.push(s.int64());else g.dims.push(s.int64());break}case 2:{g.dataType=s.int32();break}case 3:{g.segment=l.onnx.TensorProto.Segment.decode(s,s.uint32());break}case 4:{if(g.floatData&&g.floatData.length||(g.floatData=[]),(w&7)===2)for(var x=s.uint32()+s.pos;s.pos<x;)g.floatData.push(s.float());else g.floatData.push(s.float());break}case 5:{if(g.int32Data&&g.int32Data.length||(g.int32Data=[]),(w&7)===2)for(var x=s.uint32()+s.pos;s.pos<x;)g.int32Data.push(s.int32());else g.int32Data.push(s.int32());break}case 6:{g.stringData&&g.stringData.length||(g.stringData=[]),g.stringData.push(s.bytes());break}case 7:{if(g.int64Data&&g.int64Data.length||(g.int64Data=[]),(w&7)===2)for(var x=s.uint32()+s.pos;s.pos<x;)g.int64Data.push(s.int64());else g.int64Data.push(s.int64());break}case 8:{g.name=s.string();break}case 12:{g.docString=s.string();break}case 9:{g.rawData=s.bytes();break}case 13:{g.externalData&&g.externalData.length||(g.externalData=[]),g.externalData.push(l.onnx.StringStringEntryProto.decode(s,s.uint32()));break}case 14:{g.dataLocation=s.int32();break}case 10:{if(g.doubleData&&g.doubleData.length||(g.doubleData=[]),(w&7)===2)for(var x=s.uint32()+s.pos;s.pos<x;)g.doubleData.push(s.double());else g.doubleData.push(s.double());break}case 11:{if(g.uint64Data&&g.uint64Data.length||(g.uint64Data=[]),(w&7)===2)for(var x=s.uint32()+s.pos;s.pos<x;)g.uint64Data.push(s.uint64());else g.uint64Data.push(s.uint64());break}default:s.skipType(w&7);break}}return g},p.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},p.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.dims!=null&&s.hasOwnProperty("dims")){if(!Array.isArray(s.dims))return"dims: array expected";for(var u=0;u<s.dims.length;++u)if(!a.isInteger(s.dims[u])&&!(s.dims[u]&&a.isInteger(s.dims[u].low)&&a.isInteger(s.dims[u].high)))return"dims: integer|Long[] expected"}if(s.dataType!=null&&s.hasOwnProperty("dataType")&&!a.isInteger(s.dataType))return"dataType: integer expected";if(s.segment!=null&&s.hasOwnProperty("segment")){var d=l.onnx.TensorProto.Segment.verify(s.segment);if(d)return"segment."+d}if(s.floatData!=null&&s.hasOwnProperty("floatData")){if(!Array.isArray(s.floatData))return"floatData: array expected";for(var u=0;u<s.floatData.length;++u)if(typeof s.floatData[u]!="number")return"floatData: number[] expected"}if(s.int32Data!=null&&s.hasOwnProperty("int32Data")){if(!Array.isArray(s.int32Data))return"int32Data: array expected";for(var u=0;u<s.int32Data.length;++u)if(!a.isInteger(s.int32Data[u]))return"int32Data: integer[] expected"}if(s.stringData!=null&&s.hasOwnProperty("stringData")){if(!Array.isArray(s.stringData))return"stringData: array expected";for(var u=0;u<s.stringData.length;++u)if(!(s.stringData[u]&&typeof s.stringData[u].length=="number"||a.isString(s.stringData[u])))return"stringData: buffer[] expected"}if(s.int64Data!=null&&s.hasOwnProperty("int64Data")){if(!Array.isArray(s.int64Data))return"int64Data: array expected";for(var u=0;u<s.int64Data.length;++u)if(!a.isInteger(s.int64Data[u])&&!(s.int64Data[u]&&a.isInteger(s.int64Data[u].low)&&a.isInteger(s.int64Data[u].high)))return"int64Data: integer|Long[] expected"}if(s.name!=null&&s.hasOwnProperty("name")&&!a.isString(s.name))return"name: string expected";if(s.docString!=null&&s.hasOwnProperty("docString")&&!a.isString(s.docString))return"docString: string expected";if(s.rawData!=null&&s.hasOwnProperty("rawData")&&!(s.rawData&&typeof s.rawData.length=="number"||a.isString(s.rawData)))return"rawData: buffer expected";if(s.externalData!=null&&s.hasOwnProperty("externalData")){if(!Array.isArray(s.externalData))return"externalData: array expected";for(var u=0;u<s.externalData.length;++u){var d=l.onnx.StringStringEntryProto.verify(s.externalData[u]);if(d)return"externalData."+d}}if(s.dataLocation!=null&&s.hasOwnProperty("dataLocation"))switch(s.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(s.doubleData!=null&&s.hasOwnProperty("doubleData")){if(!Array.isArray(s.doubleData))return"doubleData: array expected";for(var u=0;u<s.doubleData.length;++u)if(typeof s.doubleData[u]!="number")return"doubleData: number[] expected"}if(s.uint64Data!=null&&s.hasOwnProperty("uint64Data")){if(!Array.isArray(s.uint64Data))return"uint64Data: array expected";for(var u=0;u<s.uint64Data.length;++u)if(!a.isInteger(s.uint64Data[u])&&!(s.uint64Data[u]&&a.isInteger(s.uint64Data[u].low)&&a.isInteger(s.uint64Data[u].high)))return"uint64Data: integer|Long[] expected"}return null},p.fromObject=function(s){if(s instanceof l.onnx.TensorProto)return s;var u=new l.onnx.TensorProto;if(s.dims){if(!Array.isArray(s.dims))throw TypeError(".onnx.TensorProto.dims: array expected");u.dims=[];for(var d=0;d<s.dims.length;++d)a.Long?(u.dims[d]=a.Long.fromValue(s.dims[d])).unsigned=!1:typeof s.dims[d]=="string"?u.dims[d]=parseInt(s.dims[d],10):typeof s.dims[d]=="number"?u.dims[d]=s.dims[d]:typeof s.dims[d]=="object"&&(u.dims[d]=new a.LongBits(s.dims[d].low>>>0,s.dims[d].high>>>0).toNumber())}if(s.dataType!=null&&(u.dataType=s.dataType|0),s.segment!=null){if(typeof s.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");u.segment=l.onnx.TensorProto.Segment.fromObject(s.segment)}if(s.floatData){if(!Array.isArray(s.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");u.floatData=[];for(var d=0;d<s.floatData.length;++d)u.floatData[d]=Number(s.floatData[d])}if(s.int32Data){if(!Array.isArray(s.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");u.int32Data=[];for(var d=0;d<s.int32Data.length;++d)u.int32Data[d]=s.int32Data[d]|0}if(s.stringData){if(!Array.isArray(s.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");u.stringData=[];for(var d=0;d<s.stringData.length;++d)typeof s.stringData[d]=="string"?a.base64.decode(s.stringData[d],u.stringData[d]=a.newBuffer(a.base64.length(s.stringData[d])),0):s.stringData[d].length>=0&&(u.stringData[d]=s.stringData[d])}if(s.int64Data){if(!Array.isArray(s.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");u.int64Data=[];for(var d=0;d<s.int64Data.length;++d)a.Long?(u.int64Data[d]=a.Long.fromValue(s.int64Data[d])).unsigned=!1:typeof s.int64Data[d]=="string"?u.int64Data[d]=parseInt(s.int64Data[d],10):typeof s.int64Data[d]=="number"?u.int64Data[d]=s.int64Data[d]:typeof s.int64Data[d]=="object"&&(u.int64Data[d]=new a.LongBits(s.int64Data[d].low>>>0,s.int64Data[d].high>>>0).toNumber())}if(s.name!=null&&(u.name=String(s.name)),s.docString!=null&&(u.docString=String(s.docString)),s.rawData!=null&&(typeof s.rawData=="string"?a.base64.decode(s.rawData,u.rawData=a.newBuffer(a.base64.length(s.rawData)),0):s.rawData.length>=0&&(u.rawData=s.rawData)),s.externalData){if(!Array.isArray(s.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");u.externalData=[];for(var d=0;d<s.externalData.length;++d){if(typeof s.externalData[d]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");u.externalData[d]=l.onnx.StringStringEntryProto.fromObject(s.externalData[d])}}switch(s.dataLocation){default:if(typeof s.dataLocation=="number"){u.dataLocation=s.dataLocation;break}break;case"DEFAULT":case 0:u.dataLocation=0;break;case"EXTERNAL":case 1:u.dataLocation=1;break}if(s.doubleData){if(!Array.isArray(s.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");u.doubleData=[];for(var d=0;d<s.doubleData.length;++d)u.doubleData[d]=Number(s.doubleData[d])}if(s.uint64Data){if(!Array.isArray(s.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");u.uint64Data=[];for(var d=0;d<s.uint64Data.length;++d)a.Long?(u.uint64Data[d]=a.Long.fromValue(s.uint64Data[d])).unsigned=!0:typeof s.uint64Data[d]=="string"?u.uint64Data[d]=parseInt(s.uint64Data[d],10):typeof s.uint64Data[d]=="number"?u.uint64Data[d]=s.uint64Data[d]:typeof s.uint64Data[d]=="object"&&(u.uint64Data[d]=new a.LongBits(s.uint64Data[d].low>>>0,s.uint64Data[d].high>>>0).toNumber(!0))}return u},p.toObject=function(s,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.dims=[],d.floatData=[],d.int32Data=[],d.stringData=[],d.int64Data=[],d.doubleData=[],d.uint64Data=[],d.externalData=[]),u.defaults&&(d.dataType=0,d.segment=null,d.name="",u.bytes===String?d.rawData="":(d.rawData=[],u.bytes!==Array&&(d.rawData=a.newBuffer(d.rawData))),d.docString="",d.dataLocation=u.enums===String?"DEFAULT":0),s.dims&&s.dims.length){d.dims=[];for(var g=0;g<s.dims.length;++g)typeof s.dims[g]=="number"?d.dims[g]=u.longs===String?String(s.dims[g]):s.dims[g]:d.dims[g]=u.longs===String?a.Long.prototype.toString.call(s.dims[g]):u.longs===Number?new a.LongBits(s.dims[g].low>>>0,s.dims[g].high>>>0).toNumber():s.dims[g]}if(s.dataType!=null&&s.hasOwnProperty("dataType")&&(d.dataType=s.dataType),s.segment!=null&&s.hasOwnProperty("segment")&&(d.segment=l.onnx.TensorProto.Segment.toObject(s.segment,u)),s.floatData&&s.floatData.length){d.floatData=[];for(var g=0;g<s.floatData.length;++g)d.floatData[g]=u.json&&!isFinite(s.floatData[g])?String(s.floatData[g]):s.floatData[g]}if(s.int32Data&&s.int32Data.length){d.int32Data=[];for(var g=0;g<s.int32Data.length;++g)d.int32Data[g]=s.int32Data[g]}if(s.stringData&&s.stringData.length){d.stringData=[];for(var g=0;g<s.stringData.length;++g)d.stringData[g]=u.bytes===String?a.base64.encode(s.stringData[g],0,s.stringData[g].length):u.bytes===Array?Array.prototype.slice.call(s.stringData[g]):s.stringData[g]}if(s.int64Data&&s.int64Data.length){d.int64Data=[];for(var g=0;g<s.int64Data.length;++g)typeof s.int64Data[g]=="number"?d.int64Data[g]=u.longs===String?String(s.int64Data[g]):s.int64Data[g]:d.int64Data[g]=u.longs===String?a.Long.prototype.toString.call(s.int64Data[g]):u.longs===Number?new a.LongBits(s.int64Data[g].low>>>0,s.int64Data[g].high>>>0).toNumber():s.int64Data[g]}if(s.name!=null&&s.hasOwnProperty("name")&&(d.name=s.name),s.rawData!=null&&s.hasOwnProperty("rawData")&&(d.rawData=u.bytes===String?a.base64.encode(s.rawData,0,s.rawData.length):u.bytes===Array?Array.prototype.slice.call(s.rawData):s.rawData),s.doubleData&&s.doubleData.length){d.doubleData=[];for(var g=0;g<s.doubleData.length;++g)d.doubleData[g]=u.json&&!isFinite(s.doubleData[g])?String(s.doubleData[g]):s.doubleData[g]}if(s.uint64Data&&s.uint64Data.length){d.uint64Data=[];for(var g=0;g<s.uint64Data.length;++g)typeof s.uint64Data[g]=="number"?d.uint64Data[g]=u.longs===String?String(s.uint64Data[g]):s.uint64Data[g]:d.uint64Data[g]=u.longs===String?a.Long.prototype.toString.call(s.uint64Data[g]):u.longs===Number?new a.LongBits(s.uint64Data[g].low>>>0,s.uint64Data[g].high>>>0).toNumber(!0):s.uint64Data[g]}if(s.docString!=null&&s.hasOwnProperty("docString")&&(d.docString=s.docString),s.externalData&&s.externalData.length){d.externalData=[];for(var g=0;g<s.externalData.length;++g)d.externalData[g]=l.onnx.StringStringEntryProto.toObject(s.externalData[g],u)}return s.dataLocation!=null&&s.hasOwnProperty("dataLocation")&&(d.dataLocation=u.enums===String?l.onnx.TensorProto.DataLocation[s.dataLocation]===void 0?s.dataLocation:l.onnx.TensorProto.DataLocation[s.dataLocation]:s.dataLocation),d},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TensorProto"},p.DataType=(function(){var s={},u=Object.create(s);return u[s[0]="UNDEFINED"]=0,u[s[1]="FLOAT"]=1,u[s[2]="UINT8"]=2,u[s[3]="INT8"]=3,u[s[4]="UINT16"]=4,u[s[5]="INT16"]=5,u[s[6]="INT32"]=6,u[s[7]="INT64"]=7,u[s[8]="STRING"]=8,u[s[9]="BOOL"]=9,u[s[10]="FLOAT16"]=10,u[s[11]="DOUBLE"]=11,u[s[12]="UINT32"]=12,u[s[13]="UINT64"]=13,u[s[14]="COMPLEX64"]=14,u[s[15]="COMPLEX128"]=15,u[s[16]="BFLOAT16"]=16,u[s[17]="FLOAT8E4M3FN"]=17,u[s[18]="FLOAT8E4M3FNUZ"]=18,u[s[19]="FLOAT8E5M2"]=19,u[s[20]="FLOAT8E5M2FNUZ"]=20,u})(),p.Segment=(function(){function s(u){if(u)for(var d=Object.keys(u),g=0;g<d.length;++g)u[d[g]]!=null&&(this[d[g]]=u[d[g]])}return s.prototype.begin=a.Long?a.Long.fromBits(0,0,!1):0,s.prototype.end=a.Long?a.Long.fromBits(0,0,!1):0,s.create=function(u){return new s(u)},s.encode=function(u,d){return d||(d=o.create()),u.begin!=null&&Object.hasOwnProperty.call(u,"begin")&&d.uint32(8).int64(u.begin),u.end!=null&&Object.hasOwnProperty.call(u,"end")&&d.uint32(16).int64(u.end),d},s.encodeDelimited=function(u,d){return this.encode(u,d).ldelim()},s.decode=function(u,d){u instanceof i||(u=i.create(u));for(var g=d===void 0?u.len:u.pos+d,w=new l.onnx.TensorProto.Segment;u.pos<g;){var x=u.uint32();switch(x>>>3){case 1:{w.begin=u.int64();break}case 2:{w.end=u.int64();break}default:u.skipType(x&7);break}}return w},s.decodeDelimited=function(u){return u instanceof i||(u=new i(u)),this.decode(u,u.uint32())},s.verify=function(u){return typeof u!="object"||u===null?"object expected":u.begin!=null&&u.hasOwnProperty("begin")&&!a.isInteger(u.begin)&&!(u.begin&&a.isInteger(u.begin.low)&&a.isInteger(u.begin.high))?"begin: integer|Long expected":u.end!=null&&u.hasOwnProperty("end")&&!a.isInteger(u.end)&&!(u.end&&a.isInteger(u.end.low)&&a.isInteger(u.end.high))?"end: integer|Long expected":null},s.fromObject=function(u){if(u instanceof l.onnx.TensorProto.Segment)return u;var d=new l.onnx.TensorProto.Segment;return u.begin!=null&&(a.Long?(d.begin=a.Long.fromValue(u.begin)).unsigned=!1:typeof u.begin=="string"?d.begin=parseInt(u.begin,10):typeof u.begin=="number"?d.begin=u.begin:typeof u.begin=="object"&&(d.begin=new a.LongBits(u.begin.low>>>0,u.begin.high>>>0).toNumber())),u.end!=null&&(a.Long?(d.end=a.Long.fromValue(u.end)).unsigned=!1:typeof u.end=="string"?d.end=parseInt(u.end,10):typeof u.end=="number"?d.end=u.end:typeof u.end=="object"&&(d.end=new a.LongBits(u.end.low>>>0,u.end.high>>>0).toNumber())),d},s.toObject=function(u,d){d||(d={});var g={};if(d.defaults){if(a.Long){var w=new a.Long(0,0,!1);g.begin=d.longs===String?w.toString():d.longs===Number?w.toNumber():w}else g.begin=d.longs===String?"0":0;if(a.Long){var w=new a.Long(0,0,!1);g.end=d.longs===String?w.toString():d.longs===Number?w.toNumber():w}else g.end=d.longs===String?"0":0}return u.begin!=null&&u.hasOwnProperty("begin")&&(typeof u.begin=="number"?g.begin=d.longs===String?String(u.begin):u.begin:g.begin=d.longs===String?a.Long.prototype.toString.call(u.begin):d.longs===Number?new a.LongBits(u.begin.low>>>0,u.begin.high>>>0).toNumber():u.begin),u.end!=null&&u.hasOwnProperty("end")&&(typeof u.end=="number"?g.end=d.longs===String?String(u.end):u.end:g.end=d.longs===String?a.Long.prototype.toString.call(u.end):d.longs===Number?new a.LongBits(u.end.low>>>0,u.end.high>>>0).toNumber():u.end),g},s.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},s.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/onnx.TensorProto.Segment"},s})(),p.DataLocation=(function(){var s={},u=Object.create(s);return u[s[0]="DEFAULT"]=0,u[s[1]="EXTERNAL"]=1,u})(),p})(),c.SparseTensorProto=(function(){function p(s){if(this.dims=[],s)for(var u=Object.keys(s),d=0;d<u.length;++d)s[u[d]]!=null&&(this[u[d]]=s[u[d]])}return p.prototype.values=null,p.prototype.indices=null,p.prototype.dims=a.emptyArray,p.create=function(s){return new p(s)},p.encode=function(s,u){if(u||(u=o.create()),s.values!=null&&Object.hasOwnProperty.call(s,"values")&&l.onnx.TensorProto.encode(s.values,u.uint32(10).fork()).ldelim(),s.indices!=null&&Object.hasOwnProperty.call(s,"indices")&&l.onnx.TensorProto.encode(s.indices,u.uint32(18).fork()).ldelim(),s.dims!=null&&s.dims.length){u.uint32(26).fork();for(var d=0;d<s.dims.length;++d)u.int64(s.dims[d]);u.ldelim()}return u},p.encodeDelimited=function(s,u){return this.encode(s,u).ldelim()},p.decode=function(s,u){s instanceof i||(s=i.create(s));for(var d=u===void 0?s.len:s.pos+u,g=new l.onnx.SparseTensorProto;s.pos<d;){var w=s.uint32();switch(w>>>3){case 1:{g.values=l.onnx.TensorProto.decode(s,s.uint32());break}case 2:{g.indices=l.onnx.TensorProto.decode(s,s.uint32());break}case 3:{if(g.dims&&g.dims.length||(g.dims=[]),(w&7)===2)for(var x=s.uint32()+s.pos;s.pos<x;)g.dims.push(s.int64());else g.dims.push(s.int64());break}default:s.skipType(w&7);break}}return g},p.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},p.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.values!=null&&s.hasOwnProperty("values")){var u=l.onnx.TensorProto.verify(s.values);if(u)return"values."+u}if(s.indices!=null&&s.hasOwnProperty("indices")){var u=l.onnx.TensorProto.verify(s.indices);if(u)return"indices."+u}if(s.dims!=null&&s.hasOwnProperty("dims")){if(!Array.isArray(s.dims))return"dims: array expected";for(var d=0;d<s.dims.length;++d)if(!a.isInteger(s.dims[d])&&!(s.dims[d]&&a.isInteger(s.dims[d].low)&&a.isInteger(s.dims[d].high)))return"dims: integer|Long[] expected"}return null},p.fromObject=function(s){if(s instanceof l.onnx.SparseTensorProto)return s;var u=new l.onnx.SparseTensorProto;if(s.values!=null){if(typeof s.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");u.values=l.onnx.TensorProto.fromObject(s.values)}if(s.indices!=null){if(typeof s.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");u.indices=l.onnx.TensorProto.fromObject(s.indices)}if(s.dims){if(!Array.isArray(s.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");u.dims=[];for(var d=0;d<s.dims.length;++d)a.Long?(u.dims[d]=a.Long.fromValue(s.dims[d])).unsigned=!1:typeof s.dims[d]=="string"?u.dims[d]=parseInt(s.dims[d],10):typeof s.dims[d]=="number"?u.dims[d]=s.dims[d]:typeof s.dims[d]=="object"&&(u.dims[d]=new a.LongBits(s.dims[d].low>>>0,s.dims[d].high>>>0).toNumber())}return u},p.toObject=function(s,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.dims=[]),u.defaults&&(d.values=null,d.indices=null),s.values!=null&&s.hasOwnProperty("values")&&(d.values=l.onnx.TensorProto.toObject(s.values,u)),s.indices!=null&&s.hasOwnProperty("indices")&&(d.indices=l.onnx.TensorProto.toObject(s.indices,u)),s.dims&&s.dims.length){d.dims=[];for(var g=0;g<s.dims.length;++g)typeof s.dims[g]=="number"?d.dims[g]=u.longs===String?String(s.dims[g]):s.dims[g]:d.dims[g]=u.longs===String?a.Long.prototype.toString.call(s.dims[g]):u.longs===Number?new a.LongBits(s.dims[g].low>>>0,s.dims[g].high>>>0).toNumber():s.dims[g]}return d},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.SparseTensorProto"},p})(),c.TensorShapeProto=(function(){function p(s){if(this.dim=[],s)for(var u=Object.keys(s),d=0;d<u.length;++d)s[u[d]]!=null&&(this[u[d]]=s[u[d]])}return p.prototype.dim=a.emptyArray,p.create=function(s){return new p(s)},p.encode=function(s,u){if(u||(u=o.create()),s.dim!=null&&s.dim.length)for(var d=0;d<s.dim.length;++d)l.onnx.TensorShapeProto.Dimension.encode(s.dim[d],u.uint32(10).fork()).ldelim();return u},p.encodeDelimited=function(s,u){return this.encode(s,u).ldelim()},p.decode=function(s,u){s instanceof i||(s=i.create(s));for(var d=u===void 0?s.len:s.pos+u,g=new l.onnx.TensorShapeProto;s.pos<d;){var w=s.uint32();switch(w>>>3){case 1:{g.dim&&g.dim.length||(g.dim=[]),g.dim.push(l.onnx.TensorShapeProto.Dimension.decode(s,s.uint32()));break}default:s.skipType(w&7);break}}return g},p.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},p.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.dim!=null&&s.hasOwnProperty("dim")){if(!Array.isArray(s.dim))return"dim: array expected";for(var u=0;u<s.dim.length;++u){var d=l.onnx.TensorShapeProto.Dimension.verify(s.dim[u]);if(d)return"dim."+d}}return null},p.fromObject=function(s){if(s instanceof l.onnx.TensorShapeProto)return s;var u=new l.onnx.TensorShapeProto;if(s.dim){if(!Array.isArray(s.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");u.dim=[];for(var d=0;d<s.dim.length;++d){if(typeof s.dim[d]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");u.dim[d]=l.onnx.TensorShapeProto.Dimension.fromObject(s.dim[d])}}return u},p.toObject=function(s,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.dim=[]),s.dim&&s.dim.length){d.dim=[];for(var g=0;g<s.dim.length;++g)d.dim[g]=l.onnx.TensorShapeProto.Dimension.toObject(s.dim[g],u)}return d},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.TensorShapeProto"},p.Dimension=(function(){function s(d){if(d)for(var g=Object.keys(d),w=0;w<g.length;++w)d[g[w]]!=null&&(this[g[w]]=d[g[w]])}s.prototype.dimValue=null,s.prototype.dimParam=null,s.prototype.denotation="";var u;return Object.defineProperty(s.prototype,"value",{get:a.oneOfGetter(u=["dimValue","dimParam"]),set:a.oneOfSetter(u)}),s.create=function(d){return new s(d)},s.encode=function(d,g){return g||(g=o.create()),d.dimValue!=null&&Object.hasOwnProperty.call(d,"dimValue")&&g.uint32(8).int64(d.dimValue),d.dimParam!=null&&Object.hasOwnProperty.call(d,"dimParam")&&g.uint32(18).string(d.dimParam),d.denotation!=null&&Object.hasOwnProperty.call(d,"denotation")&&g.uint32(26).string(d.denotation),g},s.encodeDelimited=function(d,g){return this.encode(d,g).ldelim()},s.decode=function(d,g){d instanceof i||(d=i.create(d));for(var w=g===void 0?d.len:d.pos+g,x=new l.onnx.TensorShapeProto.Dimension;d.pos<w;){var C=d.uint32();switch(C>>>3){case 1:{x.dimValue=d.int64();break}case 2:{x.dimParam=d.string();break}case 3:{x.denotation=d.string();break}default:d.skipType(C&7);break}}return x},s.decodeDelimited=function(d){return d instanceof i||(d=new i(d)),this.decode(d,d.uint32())},s.verify=function(d){if(typeof d!="object"||d===null)return"object expected";var g={};if(d.dimValue!=null&&d.hasOwnProperty("dimValue")&&(g.value=1,!a.isInteger(d.dimValue)&&!(d.dimValue&&a.isInteger(d.dimValue.low)&&a.isInteger(d.dimValue.high))))return"dimValue: integer|Long expected";if(d.dimParam!=null&&d.hasOwnProperty("dimParam")){if(g.value===1)return"value: multiple values";if(g.value=1,!a.isString(d.dimParam))return"dimParam: string expected"}return d.denotation!=null&&d.hasOwnProperty("denotation")&&!a.isString(d.denotation)?"denotation: string expected":null},s.fromObject=function(d){if(d instanceof l.onnx.TensorShapeProto.Dimension)return d;var g=new l.onnx.TensorShapeProto.Dimension;return d.dimValue!=null&&(a.Long?(g.dimValue=a.Long.fromValue(d.dimValue)).unsigned=!1:typeof d.dimValue=="string"?g.dimValue=parseInt(d.dimValue,10):typeof d.dimValue=="number"?g.dimValue=d.dimValue:typeof d.dimValue=="object"&&(g.dimValue=new a.LongBits(d.dimValue.low>>>0,d.dimValue.high>>>0).toNumber())),d.dimParam!=null&&(g.dimParam=String(d.dimParam)),d.denotation!=null&&(g.denotation=String(d.denotation)),g},s.toObject=function(d,g){g||(g={});var w={};return g.defaults&&(w.denotation=""),d.dimValue!=null&&d.hasOwnProperty("dimValue")&&(typeof d.dimValue=="number"?w.dimValue=g.longs===String?String(d.dimValue):d.dimValue:w.dimValue=g.longs===String?a.Long.prototype.toString.call(d.dimValue):g.longs===Number?new a.LongBits(d.dimValue.low>>>0,d.dimValue.high>>>0).toNumber():d.dimValue,g.oneofs&&(w.value="dimValue")),d.dimParam!=null&&d.hasOwnProperty("dimParam")&&(w.dimParam=d.dimParam,g.oneofs&&(w.value="dimParam")),d.denotation!=null&&d.hasOwnProperty("denotation")&&(w.denotation=d.denotation),w},s.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},s.getTypeUrl=function(d){return d===void 0&&(d="type.googleapis.com"),d+"/onnx.TensorShapeProto.Dimension"},s})(),p})(),c.TypeProto=(function(){function p(u){if(u)for(var d=Object.keys(u),g=0;g<d.length;++g)u[d[g]]!=null&&(this[d[g]]=u[d[g]])}p.prototype.tensorType=null,p.prototype.sequenceType=null,p.prototype.mapType=null,p.prototype.optionalType=null,p.prototype.sparseTensorType=null,p.prototype.denotation="";var s;return Object.defineProperty(p.prototype,"value",{get:a.oneOfGetter(s=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:a.oneOfSetter(s)}),p.create=function(u){return new p(u)},p.encode=function(u,d){return d||(d=o.create()),u.tensorType!=null&&Object.hasOwnProperty.call(u,"tensorType")&&l.onnx.TypeProto.Tensor.encode(u.tensorType,d.uint32(10).fork()).ldelim(),u.sequenceType!=null&&Object.hasOwnProperty.call(u,"sequenceType")&&l.onnx.TypeProto.Sequence.encode(u.sequenceType,d.uint32(34).fork()).ldelim(),u.mapType!=null&&Object.hasOwnProperty.call(u,"mapType")&&l.onnx.TypeProto.Map.encode(u.mapType,d.uint32(42).fork()).ldelim(),u.denotation!=null&&Object.hasOwnProperty.call(u,"denotation")&&d.uint32(50).string(u.denotation),u.sparseTensorType!=null&&Object.hasOwnProperty.call(u,"sparseTensorType")&&l.onnx.TypeProto.SparseTensor.encode(u.sparseTensorType,d.uint32(66).fork()).ldelim(),u.optionalType!=null&&Object.hasOwnProperty.call(u,"optionalType")&&l.onnx.TypeProto.Optional.encode(u.optionalType,d.uint32(74).fork()).ldelim(),d},p.encodeDelimited=function(u,d){return this.encode(u,d).ldelim()},p.decode=function(u,d){u instanceof i||(u=i.create(u));for(var g=d===void 0?u.len:u.pos+d,w=new l.onnx.TypeProto;u.pos<g;){var x=u.uint32();switch(x>>>3){case 1:{w.tensorType=l.onnx.TypeProto.Tensor.decode(u,u.uint32());break}case 4:{w.sequenceType=l.onnx.TypeProto.Sequence.decode(u,u.uint32());break}case 5:{w.mapType=l.onnx.TypeProto.Map.decode(u,u.uint32());break}case 9:{w.optionalType=l.onnx.TypeProto.Optional.decode(u,u.uint32());break}case 8:{w.sparseTensorType=l.onnx.TypeProto.SparseTensor.decode(u,u.uint32());break}case 6:{w.denotation=u.string();break}default:u.skipType(x&7);break}}return w},p.decodeDelimited=function(u){return u instanceof i||(u=new i(u)),this.decode(u,u.uint32())},p.verify=function(u){if(typeof u!="object"||u===null)return"object expected";var d={};if(u.tensorType!=null&&u.hasOwnProperty("tensorType")){d.value=1;{var g=l.onnx.TypeProto.Tensor.verify(u.tensorType);if(g)return"tensorType."+g}}if(u.sequenceType!=null&&u.hasOwnProperty("sequenceType")){if(d.value===1)return"value: multiple values";d.value=1;{var g=l.onnx.TypeProto.Sequence.verify(u.sequenceType);if(g)return"sequenceType."+g}}if(u.mapType!=null&&u.hasOwnProperty("mapType")){if(d.value===1)return"value: multiple values";d.value=1;{var g=l.onnx.TypeProto.Map.verify(u.mapType);if(g)return"mapType."+g}}if(u.optionalType!=null&&u.hasOwnProperty("optionalType")){if(d.value===1)return"value: multiple values";d.value=1;{var g=l.onnx.TypeProto.Optional.verify(u.optionalType);if(g)return"optionalType."+g}}if(u.sparseTensorType!=null&&u.hasOwnProperty("sparseTensorType")){if(d.value===1)return"value: multiple values";d.value=1;{var g=l.onnx.TypeProto.SparseTensor.verify(u.sparseTensorType);if(g)return"sparseTensorType."+g}}return u.denotation!=null&&u.hasOwnProperty("denotation")&&!a.isString(u.denotation)?"denotation: string expected":null},p.fromObject=function(u){if(u instanceof l.onnx.TypeProto)return u;var d=new l.onnx.TypeProto;if(u.tensorType!=null){if(typeof u.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");d.tensorType=l.onnx.TypeProto.Tensor.fromObject(u.tensorType)}if(u.sequenceType!=null){if(typeof u.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");d.sequenceType=l.onnx.TypeProto.Sequence.fromObject(u.sequenceType)}if(u.mapType!=null){if(typeof u.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");d.mapType=l.onnx.TypeProto.Map.fromObject(u.mapType)}if(u.optionalType!=null){if(typeof u.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");d.optionalType=l.onnx.TypeProto.Optional.fromObject(u.optionalType)}if(u.sparseTensorType!=null){if(typeof u.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");d.sparseTensorType=l.onnx.TypeProto.SparseTensor.fromObject(u.sparseTensorType)}return u.denotation!=null&&(d.denotation=String(u.denotation)),d},p.toObject=function(u,d){d||(d={});var g={};return d.defaults&&(g.denotation=""),u.tensorType!=null&&u.hasOwnProperty("tensorType")&&(g.tensorType=l.onnx.TypeProto.Tensor.toObject(u.tensorType,d),d.oneofs&&(g.value="tensorType")),u.sequenceType!=null&&u.hasOwnProperty("sequenceType")&&(g.sequenceType=l.onnx.TypeProto.Sequence.toObject(u.sequenceType,d),d.oneofs&&(g.value="sequenceType")),u.mapType!=null&&u.hasOwnProperty("mapType")&&(g.mapType=l.onnx.TypeProto.Map.toObject(u.mapType,d),d.oneofs&&(g.value="mapType")),u.denotation!=null&&u.hasOwnProperty("denotation")&&(g.denotation=u.denotation),u.sparseTensorType!=null&&u.hasOwnProperty("sparseTensorType")&&(g.sparseTensorType=l.onnx.TypeProto.SparseTensor.toObject(u.sparseTensorType,d),d.oneofs&&(g.value="sparseTensorType")),u.optionalType!=null&&u.hasOwnProperty("optionalType")&&(g.optionalType=l.onnx.TypeProto.Optional.toObject(u.optionalType,d),d.oneofs&&(g.value="optionalType")),g},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/onnx.TypeProto"},p.Tensor=(function(){function u(d){if(d)for(var g=Object.keys(d),w=0;w<g.length;++w)d[g[w]]!=null&&(this[g[w]]=d[g[w]])}return u.prototype.elemType=0,u.prototype.shape=null,u.create=function(d){return new u(d)},u.encode=function(d,g){return g||(g=o.create()),d.elemType!=null&&Object.hasOwnProperty.call(d,"elemType")&&g.uint32(8).int32(d.elemType),d.shape!=null&&Object.hasOwnProperty.call(d,"shape")&&l.onnx.TensorShapeProto.encode(d.shape,g.uint32(18).fork()).ldelim(),g},u.encodeDelimited=function(d,g){return this.encode(d,g).ldelim()},u.decode=function(d,g){d instanceof i||(d=i.create(d));for(var w=g===void 0?d.len:d.pos+g,x=new l.onnx.TypeProto.Tensor;d.pos<w;){var C=d.uint32();switch(C>>>3){case 1:{x.elemType=d.int32();break}case 2:{x.shape=l.onnx.TensorShapeProto.decode(d,d.uint32());break}default:d.skipType(C&7);break}}return x},u.decodeDelimited=function(d){return d instanceof i||(d=new i(d)),this.decode(d,d.uint32())},u.verify=function(d){if(typeof d!="object"||d===null)return"object expected";if(d.elemType!=null&&d.hasOwnProperty("elemType")&&!a.isInteger(d.elemType))return"elemType: integer expected";if(d.shape!=null&&d.hasOwnProperty("shape")){var g=l.onnx.TensorShapeProto.verify(d.shape);if(g)return"shape."+g}return null},u.fromObject=function(d){if(d instanceof l.onnx.TypeProto.Tensor)return d;var g=new l.onnx.TypeProto.Tensor;if(d.elemType!=null&&(g.elemType=d.elemType|0),d.shape!=null){if(typeof d.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");g.shape=l.onnx.TensorShapeProto.fromObject(d.shape)}return g},u.toObject=function(d,g){g||(g={});var w={};return g.defaults&&(w.elemType=0,w.shape=null),d.elemType!=null&&d.hasOwnProperty("elemType")&&(w.elemType=d.elemType),d.shape!=null&&d.hasOwnProperty("shape")&&(w.shape=l.onnx.TensorShapeProto.toObject(d.shape,g)),w},u.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},u.getTypeUrl=function(d){return d===void 0&&(d="type.googleapis.com"),d+"/onnx.TypeProto.Tensor"},u})(),p.Sequence=(function(){function u(d){if(d)for(var g=Object.keys(d),w=0;w<g.length;++w)d[g[w]]!=null&&(this[g[w]]=d[g[w]])}return u.prototype.elemType=null,u.create=function(d){return new u(d)},u.encode=function(d,g){return g||(g=o.create()),d.elemType!=null&&Object.hasOwnProperty.call(d,"elemType")&&l.onnx.TypeProto.encode(d.elemType,g.uint32(10).fork()).ldelim(),g},u.encodeDelimited=function(d,g){return this.encode(d,g).ldelim()},u.decode=function(d,g){d instanceof i||(d=i.create(d));for(var w=g===void 0?d.len:d.pos+g,x=new l.onnx.TypeProto.Sequence;d.pos<w;){var C=d.uint32();switch(C>>>3){case 1:{x.elemType=l.onnx.TypeProto.decode(d,d.uint32());break}default:d.skipType(C&7);break}}return x},u.decodeDelimited=function(d){return d instanceof i||(d=new i(d)),this.decode(d,d.uint32())},u.verify=function(d){if(typeof d!="object"||d===null)return"object expected";if(d.elemType!=null&&d.hasOwnProperty("elemType")){var g=l.onnx.TypeProto.verify(d.elemType);if(g)return"elemType."+g}return null},u.fromObject=function(d){if(d instanceof l.onnx.TypeProto.Sequence)return d;var g=new l.onnx.TypeProto.Sequence;if(d.elemType!=null){if(typeof d.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");g.elemType=l.onnx.TypeProto.fromObject(d.elemType)}return g},u.toObject=function(d,g){g||(g={});var w={};return g.defaults&&(w.elemType=null),d.elemType!=null&&d.hasOwnProperty("elemType")&&(w.elemType=l.onnx.TypeProto.toObject(d.elemType,g)),w},u.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},u.getTypeUrl=function(d){return d===void 0&&(d="type.googleapis.com"),d+"/onnx.TypeProto.Sequence"},u})(),p.Map=(function(){function u(d){if(d)for(var g=Object.keys(d),w=0;w<g.length;++w)d[g[w]]!=null&&(this[g[w]]=d[g[w]])}return u.prototype.keyType=0,u.prototype.valueType=null,u.create=function(d){return new u(d)},u.encode=function(d,g){return g||(g=o.create()),d.keyType!=null&&Object.hasOwnProperty.call(d,"keyType")&&g.uint32(8).int32(d.keyType),d.valueType!=null&&Object.hasOwnProperty.call(d,"valueType")&&l.onnx.TypeProto.encode(d.valueType,g.uint32(18).fork()).ldelim(),g},u.encodeDelimited=function(d,g){return this.encode(d,g).ldelim()},u.decode=function(d,g){d instanceof i||(d=i.create(d));for(var w=g===void 0?d.len:d.pos+g,x=new l.onnx.TypeProto.Map;d.pos<w;){var C=d.uint32();switch(C>>>3){case 1:{x.keyType=d.int32();break}case 2:{x.valueType=l.onnx.TypeProto.decode(d,d.uint32());break}default:d.skipType(C&7);break}}return x},u.decodeDelimited=function(d){return d instanceof i||(d=new i(d)),this.decode(d,d.uint32())},u.verify=function(d){if(typeof d!="object"||d===null)return"object expected";if(d.keyType!=null&&d.hasOwnProperty("keyType")&&!a.isInteger(d.keyType))return"keyType: integer expected";if(d.valueType!=null&&d.hasOwnProperty("valueType")){var g=l.onnx.TypeProto.verify(d.valueType);if(g)return"valueType."+g}return null},u.fromObject=function(d){if(d instanceof l.onnx.TypeProto.Map)return d;var g=new l.onnx.TypeProto.Map;if(d.keyType!=null&&(g.keyType=d.keyType|0),d.valueType!=null){if(typeof d.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");g.valueType=l.onnx.TypeProto.fromObject(d.valueType)}return g},u.toObject=function(d,g){g||(g={});var w={};return g.defaults&&(w.keyType=0,w.valueType=null),d.keyType!=null&&d.hasOwnProperty("keyType")&&(w.keyType=d.keyType),d.valueType!=null&&d.hasOwnProperty("valueType")&&(w.valueType=l.onnx.TypeProto.toObject(d.valueType,g)),w},u.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},u.getTypeUrl=function(d){return d===void 0&&(d="type.googleapis.com"),d+"/onnx.TypeProto.Map"},u})(),p.Optional=(function(){function u(d){if(d)for(var g=Object.keys(d),w=0;w<g.length;++w)d[g[w]]!=null&&(this[g[w]]=d[g[w]])}return u.prototype.elemType=null,u.create=function(d){return new u(d)},u.encode=function(d,g){return g||(g=o.create()),d.elemType!=null&&Object.hasOwnProperty.call(d,"elemType")&&l.onnx.TypeProto.encode(d.elemType,g.uint32(10).fork()).ldelim(),g},u.encodeDelimited=function(d,g){return this.encode(d,g).ldelim()},u.decode=function(d,g){d instanceof i||(d=i.create(d));for(var w=g===void 0?d.len:d.pos+g,x=new l.onnx.TypeProto.Optional;d.pos<w;){var C=d.uint32();switch(C>>>3){case 1:{x.elemType=l.onnx.TypeProto.decode(d,d.uint32());break}default:d.skipType(C&7);break}}return x},u.decodeDelimited=function(d){return d instanceof i||(d=new i(d)),this.decode(d,d.uint32())},u.verify=function(d){if(typeof d!="object"||d===null)return"object expected";if(d.elemType!=null&&d.hasOwnProperty("elemType")){var g=l.onnx.TypeProto.verify(d.elemType);if(g)return"elemType."+g}return null},u.fromObject=function(d){if(d instanceof l.onnx.TypeProto.Optional)return d;var g=new l.onnx.TypeProto.Optional;if(d.elemType!=null){if(typeof d.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");g.elemType=l.onnx.TypeProto.fromObject(d.elemType)}return g},u.toObject=function(d,g){g||(g={});var w={};return g.defaults&&(w.elemType=null),d.elemType!=null&&d.hasOwnProperty("elemType")&&(w.elemType=l.onnx.TypeProto.toObject(d.elemType,g)),w},u.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},u.getTypeUrl=function(d){return d===void 0&&(d="type.googleapis.com"),d+"/onnx.TypeProto.Optional"},u})(),p.SparseTensor=(function(){function u(d){if(d)for(var g=Object.keys(d),w=0;w<g.length;++w)d[g[w]]!=null&&(this[g[w]]=d[g[w]])}return u.prototype.elemType=0,u.prototype.shape=null,u.create=function(d){return new u(d)},u.encode=function(d,g){return g||(g=o.create()),d.elemType!=null&&Object.hasOwnProperty.call(d,"elemType")&&g.uint32(8).int32(d.elemType),d.shape!=null&&Object.hasOwnProperty.call(d,"shape")&&l.onnx.TensorShapeProto.encode(d.shape,g.uint32(18).fork()).ldelim(),g},u.encodeDelimited=function(d,g){return this.encode(d,g).ldelim()},u.decode=function(d,g){d instanceof i||(d=i.create(d));for(var w=g===void 0?d.len:d.pos+g,x=new l.onnx.TypeProto.SparseTensor;d.pos<w;){var C=d.uint32();switch(C>>>3){case 1:{x.elemType=d.int32();break}case 2:{x.shape=l.onnx.TensorShapeProto.decode(d,d.uint32());break}default:d.skipType(C&7);break}}return x},u.decodeDelimited=function(d){return d instanceof i||(d=new i(d)),this.decode(d,d.uint32())},u.verify=function(d){if(typeof d!="object"||d===null)return"object expected";if(d.elemType!=null&&d.hasOwnProperty("elemType")&&!a.isInteger(d.elemType))return"elemType: integer expected";if(d.shape!=null&&d.hasOwnProperty("shape")){var g=l.onnx.TensorShapeProto.verify(d.shape);if(g)return"shape."+g}return null},u.fromObject=function(d){if(d instanceof l.onnx.TypeProto.SparseTensor)return d;var g=new l.onnx.TypeProto.SparseTensor;if(d.elemType!=null&&(g.elemType=d.elemType|0),d.shape!=null){if(typeof d.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");g.shape=l.onnx.TensorShapeProto.fromObject(d.shape)}return g},u.toObject=function(d,g){g||(g={});var w={};return g.defaults&&(w.elemType=0,w.shape=null),d.elemType!=null&&d.hasOwnProperty("elemType")&&(w.elemType=d.elemType),d.shape!=null&&d.hasOwnProperty("shape")&&(w.shape=l.onnx.TensorShapeProto.toObject(d.shape,g)),w},u.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},u.getTypeUrl=function(d){return d===void 0&&(d="type.googleapis.com"),d+"/onnx.TypeProto.SparseTensor"},u})(),p})(),c.OperatorSetIdProto=(function(){function p(s){if(s)for(var u=Object.keys(s),d=0;d<u.length;++d)s[u[d]]!=null&&(this[u[d]]=s[u[d]])}return p.prototype.domain="",p.prototype.version=a.Long?a.Long.fromBits(0,0,!1):0,p.create=function(s){return new p(s)},p.encode=function(s,u){return u||(u=o.create()),s.domain!=null&&Object.hasOwnProperty.call(s,"domain")&&u.uint32(10).string(s.domain),s.version!=null&&Object.hasOwnProperty.call(s,"version")&&u.uint32(16).int64(s.version),u},p.encodeDelimited=function(s,u){return this.encode(s,u).ldelim()},p.decode=function(s,u){s instanceof i||(s=i.create(s));for(var d=u===void 0?s.len:s.pos+u,g=new l.onnx.OperatorSetIdProto;s.pos<d;){var w=s.uint32();switch(w>>>3){case 1:{g.domain=s.string();break}case 2:{g.version=s.int64();break}default:s.skipType(w&7);break}}return g},p.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},p.verify=function(s){return typeof s!="object"||s===null?"object expected":s.domain!=null&&s.hasOwnProperty("domain")&&!a.isString(s.domain)?"domain: string expected":s.version!=null&&s.hasOwnProperty("version")&&!a.isInteger(s.version)&&!(s.version&&a.isInteger(s.version.low)&&a.isInteger(s.version.high))?"version: integer|Long expected":null},p.fromObject=function(s){if(s instanceof l.onnx.OperatorSetIdProto)return s;var u=new l.onnx.OperatorSetIdProto;return s.domain!=null&&(u.domain=String(s.domain)),s.version!=null&&(a.Long?(u.version=a.Long.fromValue(s.version)).unsigned=!1:typeof s.version=="string"?u.version=parseInt(s.version,10):typeof s.version=="number"?u.version=s.version:typeof s.version=="object"&&(u.version=new a.LongBits(s.version.low>>>0,s.version.high>>>0).toNumber())),u},p.toObject=function(s,u){u||(u={});var d={};if(u.defaults)if(d.domain="",a.Long){var g=new a.Long(0,0,!1);d.version=u.longs===String?g.toString():u.longs===Number?g.toNumber():g}else d.version=u.longs===String?"0":0;return s.domain!=null&&s.hasOwnProperty("domain")&&(d.domain=s.domain),s.version!=null&&s.hasOwnProperty("version")&&(typeof s.version=="number"?d.version=u.longs===String?String(s.version):s.version:d.version=u.longs===String?a.Long.prototype.toString.call(s.version):u.longs===Number?new a.LongBits(s.version.low>>>0,s.version.high>>>0).toNumber():s.version),d},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.OperatorSetIdProto"},p})(),c.OperatorStatus=(function(){var p={},s=Object.create(p);return s[p[0]="EXPERIMENTAL"]=0,s[p[1]="STABLE"]=1,s})(),c.FunctionProto=(function(){function p(s){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],s)for(var u=Object.keys(s),d=0;d<u.length;++d)s[u[d]]!=null&&(this[u[d]]=s[u[d]])}return p.prototype.name="",p.prototype.input=a.emptyArray,p.prototype.output=a.emptyArray,p.prototype.attribute=a.emptyArray,p.prototype.attributeProto=a.emptyArray,p.prototype.node=a.emptyArray,p.prototype.docString="",p.prototype.opsetImport=a.emptyArray,p.prototype.domain="",p.create=function(s){return new p(s)},p.encode=function(s,u){if(u||(u=o.create()),s.name!=null&&Object.hasOwnProperty.call(s,"name")&&u.uint32(10).string(s.name),s.input!=null&&s.input.length)for(var d=0;d<s.input.length;++d)u.uint32(34).string(s.input[d]);if(s.output!=null&&s.output.length)for(var d=0;d<s.output.length;++d)u.uint32(42).string(s.output[d]);if(s.attribute!=null&&s.attribute.length)for(var d=0;d<s.attribute.length;++d)u.uint32(50).string(s.attribute[d]);if(s.node!=null&&s.node.length)for(var d=0;d<s.node.length;++d)l.onnx.NodeProto.encode(s.node[d],u.uint32(58).fork()).ldelim();if(s.docString!=null&&Object.hasOwnProperty.call(s,"docString")&&u.uint32(66).string(s.docString),s.opsetImport!=null&&s.opsetImport.length)for(var d=0;d<s.opsetImport.length;++d)l.onnx.OperatorSetIdProto.encode(s.opsetImport[d],u.uint32(74).fork()).ldelim();if(s.domain!=null&&Object.hasOwnProperty.call(s,"domain")&&u.uint32(82).string(s.domain),s.attributeProto!=null&&s.attributeProto.length)for(var d=0;d<s.attributeProto.length;++d)l.onnx.AttributeProto.encode(s.attributeProto[d],u.uint32(90).fork()).ldelim();return u},p.encodeDelimited=function(s,u){return this.encode(s,u).ldelim()},p.decode=function(s,u){s instanceof i||(s=i.create(s));for(var d=u===void 0?s.len:s.pos+u,g=new l.onnx.FunctionProto;s.pos<d;){var w=s.uint32();switch(w>>>3){case 1:{g.name=s.string();break}case 4:{g.input&&g.input.length||(g.input=[]),g.input.push(s.string());break}case 5:{g.output&&g.output.length||(g.output=[]),g.output.push(s.string());break}case 6:{g.attribute&&g.attribute.length||(g.attribute=[]),g.attribute.push(s.string());break}case 11:{g.attributeProto&&g.attributeProto.length||(g.attributeProto=[]),g.attributeProto.push(l.onnx.AttributeProto.decode(s,s.uint32()));break}case 7:{g.node&&g.node.length||(g.node=[]),g.node.push(l.onnx.NodeProto.decode(s,s.uint32()));break}case 8:{g.docString=s.string();break}case 9:{g.opsetImport&&g.opsetImport.length||(g.opsetImport=[]),g.opsetImport.push(l.onnx.OperatorSetIdProto.decode(s,s.uint32()));break}case 10:{g.domain=s.string();break}default:s.skipType(w&7);break}}return g},p.decodeDelimited=function(s){return s instanceof i||(s=new i(s)),this.decode(s,s.uint32())},p.verify=function(s){if(typeof s!="object"||s===null)return"object expected";if(s.name!=null&&s.hasOwnProperty("name")&&!a.isString(s.name))return"name: string expected";if(s.input!=null&&s.hasOwnProperty("input")){if(!Array.isArray(s.input))return"input: array expected";for(var u=0;u<s.input.length;++u)if(!a.isString(s.input[u]))return"input: string[] expected"}if(s.output!=null&&s.hasOwnProperty("output")){if(!Array.isArray(s.output))return"output: array expected";for(var u=0;u<s.output.length;++u)if(!a.isString(s.output[u]))return"output: string[] expected"}if(s.attribute!=null&&s.hasOwnProperty("attribute")){if(!Array.isArray(s.attribute))return"attribute: array expected";for(var u=0;u<s.attribute.length;++u)if(!a.isString(s.attribute[u]))return"attribute: string[] expected"}if(s.attributeProto!=null&&s.hasOwnProperty("attributeProto")){if(!Array.isArray(s.attributeProto))return"attributeProto: array expected";for(var u=0;u<s.attributeProto.length;++u){var d=l.onnx.AttributeProto.verify(s.attributeProto[u]);if(d)return"attributeProto."+d}}if(s.node!=null&&s.hasOwnProperty("node")){if(!Array.isArray(s.node))return"node: array expected";for(var u=0;u<s.node.length;++u){var d=l.onnx.NodeProto.verify(s.node[u]);if(d)return"node."+d}}if(s.docString!=null&&s.hasOwnProperty("docString")&&!a.isString(s.docString))return"docString: string expected";if(s.opsetImport!=null&&s.hasOwnProperty("opsetImport")){if(!Array.isArray(s.opsetImport))return"opsetImport: array expected";for(var u=0;u<s.opsetImport.length;++u){var d=l.onnx.OperatorSetIdProto.verify(s.opsetImport[u]);if(d)return"opsetImport."+d}}return s.domain!=null&&s.hasOwnProperty("domain")&&!a.isString(s.domain)?"domain: string expected":null},p.fromObject=function(s){if(s instanceof l.onnx.FunctionProto)return s;var u=new l.onnx.FunctionProto;if(s.name!=null&&(u.name=String(s.name)),s.input){if(!Array.isArray(s.input))throw TypeError(".onnx.FunctionProto.input: array expected");u.input=[];for(var d=0;d<s.input.length;++d)u.input[d]=String(s.input[d])}if(s.output){if(!Array.isArray(s.output))throw TypeError(".onnx.FunctionProto.output: array expected");u.output=[];for(var d=0;d<s.output.length;++d)u.output[d]=String(s.output[d])}if(s.attribute){if(!Array.isArray(s.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");u.attribute=[];for(var d=0;d<s.attribute.length;++d)u.attribute[d]=String(s.attribute[d])}if(s.attributeProto){if(!Array.isArray(s.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");u.attributeProto=[];for(var d=0;d<s.attributeProto.length;++d){if(typeof s.attributeProto[d]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");u.attributeProto[d]=l.onnx.AttributeProto.fromObject(s.attributeProto[d])}}if(s.node){if(!Array.isArray(s.node))throw TypeError(".onnx.FunctionProto.node: array expected");u.node=[];for(var d=0;d<s.node.length;++d){if(typeof s.node[d]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");u.node[d]=l.onnx.NodeProto.fromObject(s.node[d])}}if(s.docString!=null&&(u.docString=String(s.docString)),s.opsetImport){if(!Array.isArray(s.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");u.opsetImport=[];for(var d=0;d<s.opsetImport.length;++d){if(typeof s.opsetImport[d]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");u.opsetImport[d]=l.onnx.OperatorSetIdProto.fromObject(s.opsetImport[d])}}return s.domain!=null&&(u.domain=String(s.domain)),u},p.toObject=function(s,u){u||(u={});var d={};if((u.arrays||u.defaults)&&(d.input=[],d.output=[],d.attribute=[],d.node=[],d.opsetImport=[],d.attributeProto=[]),u.defaults&&(d.name="",d.docString="",d.domain=""),s.name!=null&&s.hasOwnProperty("name")&&(d.name=s.name),s.input&&s.input.length){d.input=[];for(var g=0;g<s.input.length;++g)d.input[g]=s.input[g]}if(s.output&&s.output.length){d.output=[];for(var g=0;g<s.output.length;++g)d.output[g]=s.output[g]}if(s.attribute&&s.attribute.length){d.attribute=[];for(var g=0;g<s.attribute.length;++g)d.attribute[g]=s.attribute[g]}if(s.node&&s.node.length){d.node=[];for(var g=0;g<s.node.length;++g)d.node[g]=l.onnx.NodeProto.toObject(s.node[g],u)}if(s.docString!=null&&s.hasOwnProperty("docString")&&(d.docString=s.docString),s.opsetImport&&s.opsetImport.length){d.opsetImport=[];for(var g=0;g<s.opsetImport.length;++g)d.opsetImport[g]=l.onnx.OperatorSetIdProto.toObject(s.opsetImport[g],u)}if(s.domain!=null&&s.hasOwnProperty("domain")&&(d.domain=s.domain),s.attributeProto&&s.attributeProto.length){d.attributeProto=[];for(var g=0;g<s.attributeProto.length;++g)d.attributeProto[g]=l.onnx.AttributeProto.toObject(s.attributeProto[g],u)}return d},p.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},p.getTypeUrl=function(s){return s===void 0&&(s="type.googleapis.com"),s+"/onnx.FunctionProto"},p})(),c})(),e.exports=l});function Fr(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function sn$1(t){return new TextDecoder().decode(t)}var ye$1,hr$1,pi$1,Ze$1,jn$1,We$1,it,U$1,an$1,mr$1,br,gr$1,fe$1=L(()=>{zn$1(),Zo(),ye$1=Ar(Cr()),yr(),hr$1=class{static arraysEqual(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}},pi$1=class{static preprocessInputShapes(t,e){let n=t.length===1?[1,t[0]]:t,i=e.length===1?[e[0],1]:e;return[n,i]}static postprocessOutputShape(t,e,n){e===1&&t.splice(t.length-2,1),n===1&&t.pop()}static calcMatMulShape(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]}},Ze$1=class Q3{static calcShape(e,n,i=!1){let o=e.length,a=n.length;if(o===0)return n;if(a===0)return e;let l=Math.max(e.length,n.length),c=new Array(l);if(i){if(o<2||a<2)return;let p=pi$1.calcMatMulShape([e[o-2],e[o-1]],[n[a-2],n[a-1]]);if(p===void 0)return;[c[l-2],c[l-1]]=p}for(let p=i?3:1;p<=l;p++){let s=o-p<0?1:e[o-p],u=a-p<0?1:n[a-p];if(s!==u&&s>1&&u>1)return;c[l-p]=Math.max(s,u)}return c}static index(e,n){let i=new Array(n.length);return Q3.fillIndex(e,n,i),i}static fillIndex(e,n,i){let o=e.length-n.length;for(let a=0;a<n.length;a++)i[a]=e[o+a]%n[a]}static calc(e,n,i,o,a){let l=Q3.calcShape(e.dims,n.dims);if(l){if(o&&!U$1.areEqual(l,e.dims))return;let c=U$1.size(l),p=o?e:new $e(l,a||e.type);if(l.length===0)p.set([],i(e.get([]),n.get([])));else{let s=new Array(l.length),u=new Array(e.dims.length),d=new Array(n.dims.length),g=0,w=0,x=!1,C=!1;e.dims.length===0&&(g=e.get([]),x=!0),n.dims.length===0&&(w=n.get([]),C=!0);let O;for(let Y=0;Y<c;Y++){O=Y;for(let q=l.length-1;q>=0;q--)s[q]=O%l[q],O=Math.floor(O/l[q]);x||(Q3.fillIndex(s,e.dims,u),g=e.get(u)),C||(Q3.fillIndex(s,n.dims,d),w=n.get(d)),p.set(s,i(g,w))}}return p}}static isValidBroadcast(e,n){let i=e.length,o=n.length;if(i>o)return!1;for(let a=1;a<=i;a++)if(e[i-a]!==1&&e[i-a]!==n[o-a])return!1;return!0}static getBroadcastDims(e,n){let i=e.length,o=[];for(let a=0;a<i;a++){let l=i-1-a,c=e[l]||1;(n[n.length-1-a]||1)>1&&c===1&&o.unshift(l)}return o}},jn$1=class{static getShapeOfGemmResult(t,e,n,i,o){if(t.length!==2||n.length!==2)throw new Error("shape need to be of size 2");let a,l,c;e?(a=t[1],l=t[0]):(a=t[0],l=t[1]);let p=-1;if(i?(c=n[0],p=1):(c=n[1],p=0),n[p]!==l)throw new Error("dimension mismatch");if(a<=0||c<=0||l<=0)throw new Error("invalid shape specified");if(o&&!Ze$1.isValidBroadcast(o,[a,c]))throw new Error("gemm: invalid bias shape for broadcast");return[a,c,l]}},We$1=class G${static tensorDataTypeFromProto(e){switch(e){case ye$1.onnx.TensorProto.DataType.INT8:return"int8";case ye$1.onnx.TensorProto.DataType.UINT8:return"uint8";case ye$1.onnx.TensorProto.DataType.BOOL:return"bool";case ye$1.onnx.TensorProto.DataType.INT16:return"int16";case ye$1.onnx.TensorProto.DataType.UINT16:return"uint16";case ye$1.onnx.TensorProto.DataType.INT32:return"int32";case ye$1.onnx.TensorProto.DataType.UINT32:return"uint32";case ye$1.onnx.TensorProto.DataType.FLOAT:return"float32";case ye$1.onnx.TensorProto.DataType.DOUBLE:return"float64";case ye$1.onnx.TensorProto.DataType.STRING:return"string";case ye$1.onnx.TensorProto.DataType.INT64:return"int32";case ye$1.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ye$1.onnx.TensorProto.DataType[e]}`)}}static tensorDataTypeStringToEnum(e){switch(e){case"int8":return ye$1.onnx.TensorProto.DataType.INT8;case"uint8":return ye$1.onnx.TensorProto.DataType.UINT8;case"bool":return ye$1.onnx.TensorProto.DataType.BOOL;case"int16":return ye$1.onnx.TensorProto.DataType.INT16;case"uint16":return ye$1.onnx.TensorProto.DataType.UINT16;case"int32":return ye$1.onnx.TensorProto.DataType.INT32;case"uint32":return ye$1.onnx.TensorProto.DataType.UINT32;case"float32":return ye$1.onnx.TensorProto.DataType.FLOAT;case"float64":return ye$1.onnx.TensorProto.DataType.DOUBLE;case"string":return ye$1.onnx.TensorProto.DataType.STRING;case"int64":return ye$1.onnx.TensorProto.DataType.INT64;case"uint64":return ye$1.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${e}`)}}static tensorDimsFromProto(e){return e.map(n=>Vt.isLong(n)?n.toNumber():n)}static tensorValueTypeFromProto(e){return{tensorType:G$.tensorDataTypeFromProto(e.elemType),shape:{dims:G$.tensorDimsFromProto(e.shape.dim.map(n=>n.dimValue))}}}static tensorDimsFromORTFormat(e){let n=[];for(let i=0;i<e.dimsLength();i++)n.push(it.longToNumber(e.dims(i)));return n}static tensorAttributesFromORTFormat(e){let n=[];for(let i=0;i<e.attributesLength();i++)n.push(e.attributes(i));return n}},it=class{static longToNumber(t,e){return Vt.isLong(t)?t.toNumber():t instanceof _.Long?Vt.fromValue({low:t.low,high:t.high,unsigned:e??!1}).toNumber():t}static isLong(t){return Vt.isLong(t)||t instanceof _.Long}},U$1=class qw{static size(e){return qw.getSizeFromDimensionRange(e,0,e.length)}static sizeFromDimension(e,n){if(n<0||n>e.length)throw new Error(`invalid dimension of ${n} for sizeFromDimension as Tensor has ${e.length} dimensions.`);return qw.getSizeFromDimensionRange(e,n,e.length)}static sizeToDimension(e,n){if(n<0||n>e.length)throw new Error(`invalid dimension of ${n} for sizeToDimension as Tensor has ${e.length} dimensions.`);return qw.getSizeFromDimensionRange(e,0,n)}static getSizeFromDimensionRange(e,n,i){let o=1;for(let a=n;a<i;a++){if(e[a]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");o*=e[a]}return o}static computeStrides(e){let n=e.length;if(n===0)return[];if(n===1)return[1];let i=new Array(n);i[n-1]=1,i[n-2]=e[n-1];for(let o=n-3;o>=0;--o)i[o]=i[o+1]*e[o+1];return i}static transpose(e){return e.slice().reverse()}static indicesToOffset(e,n,i){i===void 0&&(i=e.length);let o=0;for(let a=0;a<i;++a)o+=n[a]*e[a];return o}static offsetToIndices(e,n){let i=n.length;if(i===0)return[];if(i===1)return[e*n[0]];let o=new Array(n.length);for(let a=0;a<o.length-1;++a)o[a]=Math.floor(e/n[a]),e-=o[a]*n[a];return o[o.length-1]=e,o}static normalizeAxis(e,n){if(e<-n&&e>=n)throw new Error("unsupported axis for this operation.");return e<0?e+n:e}static normalizeAxes(e,n){return e.map(i=>this.normalizeAxis(i,n))}static incrementIndex(e,n,i){if(n.length===0||e.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(i===void 0)i=n.length;else if(i<=0||i>n.length)throw new Error("Incorrect axis to increment on");for(let o=i-1;o>=0&&(e[o]++,!(e[o]<n[o]));--o)e[o]=0}static calculateReshapedDims(e,n){if(n.length===0){if(e.length===0||qw.size(e)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let i=n.length,o=new Array(i),a=-1,l=1;for(let p=0;p<i;p++){if(n[p]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(n[p]===-1){if(a!==-1)throw new Error("at most one dimension in shape hints can be -1");a=p}else{if(n[p]===0){if(p>=e.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");o[p]=e[p]}else o[p]=n[p];l*=o[p]}}let c=qw.size(e);if(a!==-1){if(c%l!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${e}] Output shape: [${n}]`);o[a]=c/l}else if(l!==c)throw new Error("reshapedDims and originalDims don't have matching sizes");return o}static sortBasedOnPerm(e,n){return n?n.map(i=>e[i]):e.slice().reverse()}static padShape(e,n){let i=e.length;return e.map((o,a)=>o+n[a]+n[a+i])}static areEqual(e,n){return e.length!==n.length?!1:e.every((i,o)=>i===n[o])}static validateDimsAndCalcSize(e){if(e.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let n=1;for(let i of e){if(!Number.isInteger(i))throw new TypeError(`Invalid shape: ${i} is not an integer`);if(i<0||i>2147483647)throw new TypeError(`Invalid shape: length ${i} is not allowed`);n*=i}return n}static flattenShape(e,n){n<0&&(n+=e.length);let i=e.reduce((a,l)=>a*l,1),o=e.slice(n).reduce((a,l)=>a*l,1);return[i/o,o]}static squeezeShape(e,n){let i=new Array;n=qw.normalizeAxes(n,e.length);for(let o=0;o<e.length;o++){let a=n.indexOf(o)>=0;if(a&&e[o]!==1)throw new Error("squeeze an axis of size different than 1");(n.length===0&&e[o]>1||n.length>0&&!a)&&i.push(e[o])}return i}static unsqueezeShape(e,n){let i=new Array(e.length+n.length);i.fill(0);for(let a=0;a<n.length;a++){let l=qw.normalizeAxis(n[a],i.length);if(l>=i.length)throw new Error("'axes' has an out of range axis");if(i[l]!==0)throw new Error("'axes' has a duplicate axis");i[l]=1}let o=0;for(let a=0;a<i.length;a++)i[a]===0&&(i[a]=e[o++]);if(o!==e.length)throw new Error("the unsqueezed dimension could not be established");return i}},an$1=class g4{static splitShape(e,n,i,o){if(i.length===0){if(!o)throw new Error("need to know number of outputs when the 'split' attribute is not specified");g4.determineSplit(e[n],o,i)}let a=[],l=[0];for(let c=0;c<i.length;++c){c!==0&&l.push(l[c-1]+i[c-1]);let p=e.slice();p[n]=i[c],a.push(p)}return[a,l]}static determineSplit(e,n,i){if(e%n!==0)throw new Error("cannot split tensor to equal sized parts");for(let o=0;o<n;++o)i.push(e/n)}},mr$1=class J3{static adjustPoolAttributes(e,n,i,o,a,l){if(!e&&i.length!==n.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(let c=0;c<n.length-2;c++)c>=i.length?i.push(n[c+2]):i[c]=n[c+2];for(let c=0;c<i.length;c++)if(c<o.length){if(o[c]<0)throw new Error("strides should be greater than or equal to 1")}else o.push(1);for(let c=0;c<i.length;c++)if(c<a.length){if(a[c]<0)throw new Error("dilations should be greater than or equal to 1")}else a.push(1);for(let c=0;c<i.length*2;c++)if(c<l.length){if(l[c]<0)throw new Error("pad should be greater than or equal to 1")}else l.push(0);for(let c=0;c<i.length;c++){if(i[c]<=0)throw new Error("kernel shapes need to be greater than 0");if(l[c]>=i[c]||l[c+i.length]>=i[c])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(e,n,i,o,a,l){if(l){if(a.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let c=0;c<e.length-2;c++)J3.adjustPadAndReturnShape(e[c+2],n[c],i[c],o[c],a,c,c+e.length-2,l)}}static computePoolOutputShape(e,n,i,o,a,l,c){if(n.length<=0)throw new Error("input shape must be of size greater than 0");let p=[n[0],n[1]];return J3.computeShapeHelper(e,n,p,i,o,a,l,c),p}static computeConvOutputShape(e,n,i,o,a,l,c){if(e.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let p=[e[0],n[0]];return J3.computeShapeHelper(!1,e,p,i,o,a,l,c),p}static computeShapeHelper(e,n,i,o,a,l,c,p){if(e)for(let s=0;s<n.length-2;s++)i.push(1);else for(let s=0;s<n.length-2;s++)i.push(J3.adjustPadAndReturnShape(n[s+2],o[s],a[s],l[s],c,s,s+n.length-2,p))}static adjustPadAndReturnShape(e,n,i,o,a,l,c,p){let s=i*(o-1)+1;if(p&&p!=="NOTSET")switch(p){case"VALID":return a[l]=0,a[c]=0,Math.floor((e-s)/n+1);case"SAME_LOWER":case"SAME_UPPER":if(i!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let u=((e+n-1)/n-1)*n+o-e;return a[l]=Math.floor(p==="SAME_LOWER"?(u+1)/2:u/2),a[c]=u-a[l],Math.floor((e+u-o)/n+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((e+a[l]+a[c]-s)/n+1)}},br=-34028234663852886e22,gr$1=34028234663852886e22});function Hd$1(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${t}`)}}function Fu$1(t){switch(t){case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.BOOL:return 1;case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT16:return 2;case ne.onnx.TensorProto.DataType.FLOAT:case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.UINT32:return 4;case ne.onnx.TensorProto.DataType.INT64:case ne.onnx.TensorProto.DataType.DOUBLE:case ne.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${ne.onnx.TensorProto.DataType[t]}`)}}function qd$1(t,e){return new(Bu$1(e))(t)}function Bu$1(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function hi$1(t,e){if(e===ne.onnx.TensorProto.DataType.INT64||e===di$1.TensorDataType.INT64){if(t.greaterThanOrEqual(2147483648)||t.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(e===ne.onnx.TensorProto.DataType.UINT32||e===di$1.TensorDataType.UINT32||e===ne.onnx.TensorProto.DataType.UINT64||e===di$1.TensorDataType.UINT64){if(t.greaterThanOrEqual(4294967296)||t.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${ne.onnx.TensorProto.DataType[e]}`);return t.toNumber()}function $u$1(t,e,n){switch(e){case ne.onnx.TensorProto.DataType.BOOL:case ne.onnx.TensorProto.DataType.UINT8:return t.getUint8(n);case ne.onnx.TensorProto.DataType.INT8:return t.getInt8(n);case ne.onnx.TensorProto.DataType.UINT16:return t.getUint16(n,!0);case ne.onnx.TensorProto.DataType.INT16:return t.getInt16(n,!0);case ne.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(n,!0);case ne.onnx.TensorProto.DataType.INT32:return t.getInt32(n,!0);case ne.onnx.TensorProto.DataType.UINT32:return t.getUint32(n,!0);case ne.onnx.TensorProto.DataType.INT64:return hi$1(Vt.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!1),e);case ne.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(n,!0);case ne.onnx.TensorProto.DataType.UINT64:return hi$1(Vt.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!0),e);default:throw new Error(`cannot read from DataView for type ${ne.onnx.TensorProto.DataType[e]}`)}}var ku$1,ne,di$1,$e,yr=L(()=>{ku$1=Ar(Os$1()),Zo(),tn$1(),ne=Ar(Cr()),fe$1(),di$1=V.experimental.fbs,$e=class o${constructor(e,n,i,o,a,l=ku$1.Guid.create()){this.dims=e,this.type=n,this.dataProvider=i,this.asyncDataProvider=o,this.cache=a,this.dataId=l,this.size=U$1.validateDimsAndCalcSize(e);let c=this.size,p=i===void 0&&o===void 0&&a===void 0;if(a!==void 0&&a.length!==c)throw new RangeError("Input dims doesn't match data length.");if(n==="string"){if(a!==void 0&&(!Array.isArray(a)||!a.every(s=>typeof s=="string")))throw new TypeError("cache should be a string array");p&&(this.cache=new Array(c))}else{if(a!==void 0){let s=Bu$1(n);if(!(a instanceof s))throw new TypeError(`cache should be type ${s.name}`)}if(p){let s=new ArrayBuffer(c*Hd$1(n));this.cache=qd$1(s,n)}}}get data(){if(this.cache===void 0){let e=this.dataProvider(this.dataId);if(e.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=e}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(e){return this.data[U$1.indicesToOffset(e,this.strides)]}set(e,n){this.data[U$1.indicesToOffset(e,this.strides)]=n}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=U$1.computeStrides(this.dims)),this._strides}static fromProto(e){if(!e)throw new Error("cannot construct Value from an empty tensor");let n=We$1.tensorDataTypeFromProto(e.dataType),i=We$1.tensorDimsFromProto(e.dims),o=new o$(i,n);if(n==="string")e.stringData.forEach((a,l)=>{o.data[l]=sn$1(a)});else if(e.rawData&&typeof e.rawData.byteLength=="number"&&e.rawData.byteLength>0){let a=o.data,l=new DataView(e.rawData.buffer,e.rawData.byteOffset,e.rawData.byteLength),c=Fu$1(e.dataType),p=e.rawData.byteLength/c;if(e.rawData.byteLength%c!==0)throw new Error("invalid buffer length");if(a.length!==p)throw new Error("buffer length mismatch");for(let s=0;s<p;s++){let u=$u$1(l,e.dataType,s*c);a[s]=u}}else{let a;switch(e.dataType){case ne.onnx.TensorProto.DataType.FLOAT:a=e.floatData;break;case ne.onnx.TensorProto.DataType.INT32:case ne.onnx.TensorProto.DataType.INT16:case ne.onnx.TensorProto.DataType.UINT16:case ne.onnx.TensorProto.DataType.INT8:case ne.onnx.TensorProto.DataType.UINT8:case ne.onnx.TensorProto.DataType.BOOL:a=e.int32Data;break;case ne.onnx.TensorProto.DataType.INT64:a=e.int64Data;break;case ne.onnx.TensorProto.DataType.DOUBLE:a=e.doubleData;break;case ne.onnx.TensorProto.DataType.UINT32:case ne.onnx.TensorProto.DataType.UINT64:a=e.uint64Data;break;default:throw new Error("unspecific error")}if(a==null)throw new Error("failed to populate data from a tensorproto value");let l=o.data;if(l.length!==a.length)throw new Error("array length mismatch");for(let c=0;c<a.length;c++){let p=a[c];Vt.isLong(p)?l[c]=hi$1(p,e.dataType):l[c]=p}}return o}static fromData(e,n,i){return new o$(n,i,void 0,void 0,e)}static fromOrtTensor(e){if(!e)throw new Error("cannot construct Value from an empty tensor");let n=We$1.tensorDimsFromORTFormat(e),i=We$1.tensorDataTypeFromProto(e.dataType()),o=new o$(n,i);if(i==="string")for(let a=0;a<e.stringDataLength();a++)o.data[a]=e.stringData(a);else if(e.rawDataArray()&&typeof e.rawDataLength()=="number"&&e.rawDataLength()>0){let a=o.data,l=new DataView(e.rawDataArray().buffer,e.rawDataArray().byteOffset,e.rawDataLength()),c=Fu$1(e.dataType()),p=e.rawDataLength()/c;if(e.rawDataLength()%c!==0)throw new Error("invalid buffer length");if(a.length!==p)throw new Error("buffer length mismatch");for(let s=0;s<p;s++){let u=$u$1(l,e.dataType(),s*c);a[s]=u}}return o}}});function H(t){return t===1?jd$1:Yd$1}function Nu$1(t){let e=H(t);return`${e.version}
      precision highp float;
      ${e.attribute} vec3 position;
      ${e.attribute} vec2 textureCoord;

      ${e.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function Ru$1(t){let e=H(t);return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFrag} vec2 TexCoords;
    ${e.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function Mu$1(t,e){let n=H(t);return`
  void main() {
    int indices[${e}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${n.output} = result;
  }
  `}var jd$1,Yd$1,we$1=L(()=>{jd$1={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},Yd$1={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),ae=L(()=>{});async function mi$1(t,e=i=>0,n){return new Promise((i,o)=>{let a=0,l=()=>{if(t()){i();return}a++;let c=e(a);setTimeout(l,c)};l()})}function Yn$1(t){return Fr(typeof t<"u"&&t.length!==0,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)}function Gu$1(t){return Fr(typeof t<"u"&&t.length!==0,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)+"AtOutCoords"}function $r(t,e){let n=JSON.parse(JSON.stringify(t));return n=e,n}function kr$1(t,e){return e.map(n=>t[n]).join(", ")}function Qe(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function Dt$1(t=6){return["x","y","z","w","u","v"].slice(0,t)}var Bt$1=L(()=>{fe$1()});function Xd$1(t,e){return Dt$1(e).map(n=>`${t}.${n}`)}function Br$1(t,e){return e===1?[t]:Xd$1(t,e)}function Nt(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var Tr=L(()=>{Bt$1()});function Jd(t,e,n){if(t===0)return"false";if(t===1)return`rc > ${e[0]}`;let i="";for(let o=t-2;o<t;o++)i+=`${n[o]} >= ${e[o-t+2]}`,o<t-1&&(i+="||");return i}function Zd(t,e){let n=t.length;if(n===0)return"getA(), 0, 0, 0";if(n===1)return`getA(rc),
            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),
            0, 0`;let i="r, c",o="r, cp1",a="rp1, c",l="rp1, cp1",c="";if(n>2)for(let p=0;p<n-2;++p)c=c+`${e[p]},`;return`getA(${c}${i}),
          rEdge ? 0. : getA(${c}${a}),
          cEdge ? 0. : getA(${c}${o}),
          rEdge || cEdge ? 0. : getA(${c}${l})`}function Qd(t,e,n,i){return t===0||t===1?"":`
    int r = ${e[t-2]};
    int c = ${e[t-1]};
    int rp1 = ${e[t-2]} + 1;
    int cp1 = ${e[t-1]} + 1;
    bool rEdge = rp1 >= ${i};
    bool cEdge = cp1 >= ${n};
    `}var Uu$1,Kd$1,zu$1,Vu$1=L(()=>{we$1(),ae(),Bt$1(),Tr(),Uu$1={name:"pack",inputNames:["A"],inputTypes:[1]},Kd$1=(t,e)=>{let n=H(t.session.backend.glContext.version),i=e.dims,o=i.length,a=e.dims.length,l=Qe(a),c=Br$1("rc",a),p=Qd(a,c,i[i.length-2],i[i.length-1]),s;o===0?s=[1,1]:o===1?s=[i[0],1]:s=[i[a-1],i[a-2]];let u=Jd(a,s,c),d=Zd(i,c),g=`
        void main() {
          ${l} rc = getOutputCoords();

          if(${u}) {
            ${n.output} = vec4(0);
          } else {
            ${p}

            ${n.output} = vec4(${d});
          }
        }
      `;return{...Uu$1,hasMain:!0,output:{dims:e.dims,type:e.type,textureType:2},shaderSource:g}},zu$1=(t,e)=>({...Uu$1,get:()=>Kd$1(t,e)})});function bi(t){if(t.length===0)return[1,1,1];let e=1;for(let n=0;n<t.length-2;++n)e*=t[n];return[e,t.length>1?t[t.length-2]:1,t[t.length-1]]}function Hu$1(t,e){let n=!1;return t.length===0||e.length===0?n=!0:t.length<2||e.length<2?n=t[t.length-1]===e[e.length-1]:n=t[t.length-1]===e[e.length-1]&&t[t.length-2]===e[e.length-2],n}function rh(t){let e=U$1.computeStrides(t),n=["b","r","c"],i="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e.map((o,a)=>{let l=`int ${n[a]} = ${i} / ${o}`,c=a===e.length-1?`int ${n[a+1]} = ${i} - ${n[a]} * ${o}`:`index -= ${n[a]} * ${o}`;return`${l}; ${c};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function nh(t){let e=U$1.computeStrides(t);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${e[0]} + coords.z * ${e[1]} + coords.y;
  }
`}var eh,th,Wu$1,qu$1=L(()=>{fe$1(),we$1(),ae(),Tr(),eh=t=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${t}`}),th=(t,e,n,i)=>{let o=e.dims,a=i,l="";for(let s=0;s<4;s++){let u="";switch(s){case 0:u="outputCoords = rc;";break;case 1:u="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:u="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:u="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}l+=`
        ${u}
        ${s>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${s>0?"}":""}
      `}let c=H(t.session.backend.glContext.version),p=`
      ${rh(o)}
      ${nh(a)}
      ${Nt()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${a[2]};
        int cols = ${a[1]};

        ${l}
        ${c.output} = result;
      }
    `;return{...n,output:{dims:a,type:e.type,textureType:2},shaderSource:p,hasMain:!0}},Wu$1=(t,e,n)=>{let i=eh(n);return{...i,get:()=>th(t,e,i,n)}}}),gi,ju$1=L(()=>{we$1(),ae(),gi=(t,e)=>{let n=e.shape,i=H(t.session.backend.glContext.version),o=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${i.texture2D}(X,TexCoords).r;
      ${i.output} = encodeAsUint8(value);
    }`,a={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:n,type:e.tensor.type,textureType:3},shaderSource:o,hasMain:!0};return t.executeProgram(a,[e.tensor])}});function ih(t,e){if(t===1)return"rc";let n="";for(let i=0;i<t;i++)n+=e[i],i<t-1&&(n+=",");return n}var Yu$1,oh,Xu$1,Ku$1=L(()=>{we$1(),ae(),Bt$1(),Tr(),Yu$1={name:"unpack",inputNames:["A"],inputTypes:[2]},oh=(t,e)=>{let n=e.dims.length,i=Br$1("rc",n),o=i.slice(-2),a=Qe(n),l=Nt(),c=e.dims.length===0?"":ih(n,i),p=n<=1?"rc":`vec2(${o.join(",")})`,s=H(t.session.backend.glContext.version),u=`
    ${l}
    void main() {
      ${a} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${c});

       ${s.output} = vec4(getChannel(packedInput, ${p}), 0, 0, 0);
     }
   `;return{...Yu$1,hasMain:!0,output:{dims:e.dims,type:e.type,textureType:0},shaderSource:u}},Xu$1=(t,e)=>({...Yu$1,get:()=>oh(t,e)})}),Xn$1,un,Kn$1,ln=L(()=>{lt$1(),Xn$1=class{constructor(t,e=1){if(e===1)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else if(e===4)this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e;else throw new Error(`Invalid number of channels: ${e}`)}encode(t,e){let n,i;return t.constructor!==Float32Array&&(ce.warning("Encoder","data was not of type Float32; creating new Float32Array"),i=new Float32Array(t)),e*this.channelSize>t.length?(ce.warning("Encoder","Source data too small. Allocating larger array"),i=t,n=this.allocate(e*this.channelSize),i.forEach((o,a)=>n[a]=o)):(i=t,n=i),n}allocate(t){return new Float32Array(t*4)}decode(t,e){return this.channelSize===1?t.filter((n,i)=>i%4===0).subarray(0,e):t.subarray(0,e)}},un=class{constructor(t,e=1,n){if(e!==1&&e!==4)throw new Error(`Invalid number of channels: ${e}`);this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=n||t.FLOAT}encode(t,e){let n=t;return this.channelSize===1&&(ce.verbose("Encoder","Exploding into a larger array"),n=this.allocate(e),t.forEach((i,o)=>n[o*4]=i)),n}allocate(t){return new Float32Array(t*4)}decode(t,e){return this.channelSize===1?t.filter((n,i)=>i%4===0).subarray(0,e):t.subarray(0,e)}},Kn$1=class{constructor(t,e=1){if(this.channelSize=4,e===1)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else if(e===4)this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else throw new Error(`Invalid number of channels: ${e}`)}encode(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}allocate(t){return new Uint8Array(t*this.channelSize)}decode(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw new Error(`Invalid array type: ${t.constructor}`)}}}),fn,Ju$1,yi,Zu$1=L(()=>{fe$1(),ae(),fn=(t,e,n)=>{let i=n===0||n===1?1:4,o=n===2,a=n===1||n===2,l=n===4?e.length-1:void 0,c=n===4?e.map((p,s)=>s===e.length-1?p*4:p):void 0;return yi(t,e,i,c,{isPacked:o,reverseWH:a,breakAxis:l})},Ju$1=(t,e,n)=>{let i=fn(t,e,n);return[i.width,i.height]},yi=(t,e,n=1,i,o)=>{let a=!!(o&&o.isPacked),[l,c]=t.computeTextureWH(a&&i||e,o),p=e.length,s=e.slice(0);if(p===0&&(s=[1]),n===1)i=e;else if(a){if(n!==4)throw new Error("a packed texture must be 4-channel");i=e,p>0&&(s[p-1]=Math.ceil(s[p-1]/2)),p>1&&(s[p-2]=Math.ceil(s[p-2]/2))}else if(!i)throw new Error("Unpacked shape is needed when using channels > 1");return{width:l,height:c,channels:n,isPacked:a,shape:s,strides:U$1.computeStrides(s),unpackedShape:i,reversedWH:o&&o.reverseWH}}}),sh,Jn$1,el$1=L(()=>{lt$1(),yr(),fe$1(),Vu$1(),qu$1(),ju$1(),Ku$1(),ln(),Zu$1(),ae(),sh=(t,e)=>{let n=e.map(o=>`${o.unpackedShape.join(",")};${o.width}x${o.height}`).join("_"),i=t.name;return t.cacheHint&&(i+="["+t.cacheHint+"]"),i+=":"+n,i},Jn$1=class{constructor(t){this.session=t,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(t,e){return Ju$1(this.session.layoutStrategy,t,e)}executeProgram(t,e){if(e.length<t.inputNames.length)throw new Error(`Input size mustn't be less than ${t.inputNames.length}.`);if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");let n=[];for(let p=0;p<t.inputNames.length;++p)n[p]=this.getOrCreateTextureData(e[p],t.inputTypes[p]);let i=sh(t,n),o=this.session.programManager.getArtifact(i),a=o?o.programInfo:typeof t.get=="function"?t.get():t,l=fn(this.session.layoutStrategy,a.output.dims,a.output.textureType),c=this.createTextureData(l,a.output.type);return o||(o=this.session.programManager.build(a,n,c),this.session.programManager.setArtifact(i,o)),this.runProgram(o,n,c),c}run(t,e){return this.executeProgram(t,e).tensor}runProgram(t,e,n){for(let i=0;i<e.length;++i)if(!!e[i].isPacked!=(t.programInfo.inputTypes[i]===2))throw new Error(`input[${i}] property packed inconsistent`);if(!!n.isPacked!=(t.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(t,e,n)}getOrCreateTextureData(t,e){let n=this.getTextureData(t.dataId,e===2);if(!n&&(n=this.getTextureData(t.dataId,e!==2),n))return e===2?this.pack(n):this.unpack(n);if(!n){let i=fn(this.session.layoutStrategy,t.dims,e);if(e===4){let o=t.dims;if(o.length===4){let a=[o[0],Math.ceil(o[1]*o[2]*o[3]/4)],l=fn(this.session.layoutStrategy,a,e),c=t.numberData;if(o[1]*o[2]*o[3]%4!==0){let p=o[0],s=o[1]*o[2]*o[3],u=Math.ceil(s*1/4)*4,d=p*u;c=new Float32Array(d);for(let g=0;g<p;++g){let w=g*s,x=g*u+g%1*s;c.set(t.numberData.subarray(w,w+s),x)}}return this.createTextureData(l,t.type,c,t,1)}}if(e===2){let o=yi(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),a=this.createTextureData(o,t.type,t.numberData,t,1);n=this.pack(a)}else n=this.createTextureData(i,t.type,t.numberData,t,1)}return n}createTextureDataFromLayoutBindTensor(t,e,n,i){return this.createTextureData(t,e,n,i,1)}createTextureData(t,e,n,i,o){ce.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(t)}]`);let a=this.session.textureManager.createTextureFromLayout(e,t,n,o);return this.createTextureDataFromTexture(t,e,a,i)}reshapeUnpacked(t,e){let n=this.getOrCreateTextureData(t,0),i={channels:n.channels,height:n.height,width:n.width,shape:e.length!==0?e:[1],strides:U$1.computeStrides(e),unpackedShape:e};return this.createTextureDataFromTexture(i,t.type,n.texture).tensor}reshapePacked(t,e){let n=this.getOrCreateTextureData(t,2);if(Hu$1(t.dims,e)){let c={channels:n.channels,height:n.height,width:n.width,shape:e.length!==0?e:[1],strides:U$1.computeStrides(e),unpackedShape:e,isPacked:!0};return this.createTextureDataFromTexture(c,t.type,n.texture).tensor}let i=bi(t.dims),o=bi(e),a=this.reshapePacked(t,i),l=this.run(Wu$1(this,a,o),[a]);return this.reshapePacked(l,e)}cast(t,e){let n=this.getOrCreateTextureData(t,0);return this.createTextureDataFromTexture(n,e,n.texture).tensor}createTextureDataFromTexture(t,e,n,i,o){let a={...t,tensor:i||new $e(t.unpackedShape,e,l=>this.readTexture(a),async l=>this.readTextureAsync(a),void 0,o),texture:n};return this.setTextureData(a.tensor.dataId,a,t.isPacked),a}getTextureData(t,e=!1){return this.session.isInitializer(t)?this.session.getTextureData(t,e):e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,n=!1){this.session.isInitializer(t)?this.session.setTextureData(t,e,n):(n?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,e)}isTextureLayoutCached(t,e=!1){return!!this.getTextureData(t.dataId,e)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.unpackedTextureDataCache=new Map}readTexture(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,t))}async readTextureAsync(t){return t.isPacked?this.readTextureAsync(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(gi(this,t))}pack(t){return this.executeProgram(zu$1(this,t.tensor),[t.tensor])}unpack(t){return this.executeProgram(Xu$1(this,t.tensor),[t.tensor])}}}),Ti,Q,Ue$1=L(()=>{Ti=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},Q=t=>new Ti(t)}),tl$1,rl$1,nl$1,uh,lh,ol$1=L(()=>{Ue$1(),we$1(),ae(),tl$1={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},rl$1=(t,e,n)=>(lh(e),[t.run({...tl$1,cacheHint:n.cacheKey,get:()=>uh(t,e,n)},e)]),nl$1=t=>{let e=t.attributes.getFloat("epsilon",1e-5),n=t.attributes.getFloat("momentum",.9),i=t.attributes.getInt("spatial",1);return Q({epsilon:e,momentum:n,spatial:i})},uh=(t,e,n)=>{let i=H(t.session.backend.glContext.version),o=e[0].dims.length,[a,l]=t.calculateTextureWidthAndHeight(e[1].dims,0),c=`
  float process(int[${o}] indices) {
    vec2 position = offsetToCoords(indices[1], ${a}, ${l});
    float scale = getColorAsFloat(${i.texture2D}(Scale, position));
    float mean = getColorAsFloat(${i.texture2D}(Mean, position));
    float variance = getColorAsFloat(${i.texture2D}(Variance, position));
    float b = getColorAsFloat(${i.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${n.epsilon})) ) + b;
  }`;return{...tl$1,output:{dims:e[0].dims,type:e[0].type,textureType:0},shaderSource:c}},lh=t=>{if(!t||t.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let e=t[0],n=t[1],i=t[2],o=t[3],a=t[4];if(e.dims.length<3||n.dims.length!==1||i.dims.length!==1||o.dims.length!==1||a.dims.length!==1)throw new Error("invalid input shape.");if(n.dims[0]!==e.dims[1]||i.dims[0]!==e.dims[1]||o.dims[0]!==e.dims[1]||a.dims[0]!==e.dims[1])throw new Error("invalid input shape.");if(e.type!=="float32"&&e.type!=="float64"||n.type!=="float32"&&n.type!=="float64"||i.type!=="float32"&&i.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||a.type!=="float32"&&a.type!=="float64")throw new Error("invalid input tensor types.")}}),Zn$1,dt,R,cn,Qn$1,Wt$1=L(()=>{Zn$1=class{constructor(t,e,n,i){this.glContext=t,this.programInfo=e,this.inputTextureLayouts=n,this.outputTextureLayout=i}},dt=class{constructor(t){this.context=t}},R=class{constructor(t,e){this.routineBody=t,this.dependencies=e}},cn=class{constructor(t,e,n){this.name=t,n?this.dependencies=n:this.dependencies=[],e&&(this.routineBody=e)}addDependency(t){t&&this.dependencies.push(t)}},Qn$1=class{static returnOrderedNodes(t){if(!t||t.length===0)return[];if(t.length===1)return t;let e=new Set,n=new Set,i=new Array;return this.createOrderedNodes(t,e,n,i),i}static createOrderedNodes(t,e,n,i){for(let o=0;o<t.length;++o)this.dfsTraverse(t[o],e,n,i)}static dfsTraverse(t,e,n,i){if(!t||n.has(t.name))return;if(e.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);let o=t.dependencies;if(o&&o.length>0)for(let a=0;a<o.length;++a)this.dfsTraverse(o[a],e,n,i);i.push(t),n.add(t.name),e.delete(t.name)}}});function ch(){let t="add_";return{body:`
  float ${t}(float a, float b) {
    return a + b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:t,type:0}}function ph(){let t="div_";return{body:`
  float ${t}(float a, float b) {
    return a / b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:t,type:0}}function dh(){let t="mul_";return{body:`
  float ${t}(float a, float b) {
    return a * b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:t,type:0}}function hh(){let t="sub_";return{body:`
  float ${t}(float a, float b) {
    return a - b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:t,type:0}}function mh(){let t="equal_";return{body:`
  float ${t}(float a, float b) {
    return float(a == b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:t,type:0}}function bh(){let t="greater_";return{body:`
  float ${t}(float a, float b) {
    return float(a > b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:t,type:0}}function gh(){let t="less_";return{body:`
  float ${t}(float a, float b) {
    return float(a < b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:t,type:0}}function yh(){let t="and_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:t,type:0}}function Th(){let t="or_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:t,type:0}}function xh(){let t="xor_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:t,type:0}}function wh(){return _h("pow")}function vh(){let t="prelu_";return{body:`
  float ${t}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:t,type:0}}function _h(t){let e=`${t}_`;return{body:`
  float ${e}(float a, float b) {
    return ${t}(a, b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return ${t}(v1, v2);
  }
  `,name:e,type:0}}var ht,Oh,il$1,al$1,sl$1,ul$1,ll$1,fl$1,cl$1,pl$1,dl$1,hl$1,ml$1,bl$1,gl$1=L(()=>{fe$1(),Wt$1(),we$1(),ae(),ht=(t,e,n,i=e[0].type,o)=>{let a=t.session.pack?2:0;return{name:n.name,inputNames:["A","B"],inputTypes:[a,a],cacheHint:o,get:()=>Oh(t,e,n,i)}},Oh=(t,e,n,i=e[0].type)=>{let o=t.session.pack?2:0,a=!U$1.areEqual(e[0].dims,e[1].dims),l=e[0].dims,c=t.session.pack;if(a){let u=Ze$1.calcShape(e[0].dims,e[1].dims,!1);if(!u)throw new Error("Can't perform binary op on the given tensors");l=u;let d=l.length,g=e[0].dims.length!==0?e[0].dims.length:1,w=e[1].dims.length!==0?e[1].dims.length:1,x=e[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",C=e[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",O=H(t.session.backend.glContext.version),Y=c?`
      ${n.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${n.name}(a, b);
        ${O.output} = result;
      }`:`
      ${n.body}
      float process(int indices[${d}]) {
        int aindices[${g}];
        int bindices[${w}];
        ${x}
        ${C}
        return ${n.name}(_A(aindices), _B(bindices));
      }`;return{name:n.name,inputNames:["A","B"],inputTypes:[o,o],output:{dims:l,type:i,textureType:o},shaderSource:Y,hasMain:c}}let p=H(t.session.backend.glContext.version),s=`
    ${n.body}
    void main() {
      vec4 v1 = ${p.texture2D}(A, TexCoords);
      vec4 v2 = ${p.texture2D}(B, TexCoords);
      vec4 result = ${n.name}(v1, v2);
      ${p.output} = result;
    }
    `;return{name:n.name,inputNames:["A","B"],inputTypes:[o,o],output:{dims:e[0].dims,type:i,textureType:o},shaderSource:s,hasMain:!0}},il$1=(t,e)=>[t.run(ht(t,e,ch()),e)],al$1=(t,e)=>[t.run(ht(t,e,yh(),"bool"),e)],sl$1=(t,e)=>[t.run(ht(t,e,ph()),e)],ul$1=(t,e)=>[t.run(ht(t,e,mh(),"bool"),e)],ll$1=(t,e)=>[t.run(ht(t,e,bh(),"bool"),e)],fl$1=(t,e)=>[t.run(ht(t,e,gh(),"bool"),e)],cl$1=(t,e)=>[t.run(ht(t,e,dh()),e)],pl$1=(t,e)=>[t.run(ht(t,e,Th(),"bool"),e)],dl$1=(t,e)=>[t.run(ht(t,e,wh()),e)],hl$1=(t,e)=>[t.run(ht(t,e,vh()),e)],ml$1=(t,e)=>[t.run(ht(t,e,hh()),e)],bl$1=(t,e)=>[t.run(ht(t,e,xh(),"bool"),e)]}),yl$1,Tl$1,Sh,xl$1=L(()=>{fe$1(),yl$1=(t,e,n)=>(Sh(e),[t.cast(e[0],n)]),Tl$1=t=>We$1.tensorDataTypeFromProto(t.attributes.getInt("to")),Sh=t=>{if(!t||t.length!==1)throw new Error("Cast requires 1 input.");if(t[0].type==="string")throw new Error("Invalid input type.")}}),Ah,Ph,wl$1,eo$1,vl$1=L(()=>{we$1(),ae(),Bt$1(),Tr(),Ah=(t,e)=>({name:"Concat (packed)",inputNames:Array.from({length:t},(n,i)=>`X${i}`),inputTypes:Array(t).fill(2),cacheHint:e}),Ph=(t,e,n,i)=>{let o=n[0].dims.slice();if(i>=o.length||i<-1*o.length)throw new Error("axis specified for concat doesn't match input dimensionality");i<0&&(i=o.length+i);let a=o.slice(0);for(let se=1;se<n.length;se++){let Re=n[se].dims.slice();for(let Oe=0;Oe<o.length;Oe++)if(Oe===i)a[i]+=Re[Oe];else if(o[Oe]!==Re[Oe])throw new Error("non concat dimensions must match")}let l=a.length,c=Br$1("coords",l),p=Qe(l),s=Nt(),u=n.map(se=>se.dims),d=Dt$1(l),g=new Array(u.length-1);g[0]=u[0][i];for(let se=1;se<g.length;se++)g[se]=g[se-1]+u[se][i];let w=d[i],x=d.slice(-2),C=d.join(),O=`if (${w} < ${g[0]}) {
        return getChannel(
            getX0(${C}), vec2(${x.join()}));
        }`;for(let se=1;se<g.length;se++){let Re=g[se-1];O+=`
            if (${w} < ${g[se]}  && ${w} >= ${g[se-1]}) {
              return getChannel(
                getX${se}(${eo$1(d,w,Re)}),
                vec2(${eo$1(x,w,Re)}));
            }`}let Y=g.length,q=g[g.length-1];O+=`
            return getChannel(
              getX${Y}(${eo$1(d,w,q)}),
              vec2(${eo$1(x,w,q)}));`;let ue=H(t.session.backend.glContext.version),pe=`
          ${s}
          float getValue(${d.map(se=>"int "+se)}) {
            ${O}
          }

          void main() {
            ${p} coords = getOutputCoords();
            int lastDim = coords.${d[l-1]};
            coords.${d[l-1]} = coords.${d[l-2]};
            coords.${d[l-2]} = lastDim;

            vec4 result = vec4(getValue(${c}), 0., 0., 0.);

            ${c[l-1]} = ${c[l-1]} + 1;
            if (${c[l-1]} < ${a[l-1]}) {
              result.g = getValue(${c});
            }

            ${c[l-2]} = ${c[l-2]} + 1;
            if (${c[l-2]} < ${a[l-2]}) {
              result.a = getValue(${c});
            }

            ${c[l-1]} = ${c[l-1]} - 1;
            if (${c[l-2]} < ${a[l-2]} &&
                ${c[l-1]} < ${a[l-1]}) {
              result.b = getValue(${c});
            }
            ${ue.output} = result;
          }
        `;return{...e,output:{dims:a,type:n[0].type,textureType:2},shaderSource:pe,hasMain:!0}},wl$1=(t,e,n)=>{let i=Ah(e.length,n.cacheKey);return{...i,get:()=>Ph(t,i,e,n.axis)}},eo$1=(t,e,n)=>{let i=t.indexOf(e);return t.map((o,a)=>a===i?`${o} - ${n}`:o).join()}}),_l$1,Eh,Dh,Lh,Ol$1,Ch,Fh,$h,Il$1,kh,Sl$1=L(()=>{Ue$1(),ae(),vl$1(),_l$1=(t,e,n)=>(kh(e),t.session.pack&&e[0].dims.length>1?[t.run(wl$1(t,e,n),e)]:[t.run(Lh(t,e,n),e)]),Eh=(t,e)=>({name:"Concat",inputNames:Array.from({length:t},(n,i)=>`X${i}`),inputTypes:Array(t).fill(0),cacheHint:e}),Dh=(t,e,n,i)=>{let o=n[0].dims.slice();if(i>=o.length||i<-1*o.length)throw new Error("axis specified for concat doesn't match input dimensionality");i<0&&(i=o.length+i);let a=o.slice(0);for(let w=1;w<n.length;w++){let x=n[w].dims.slice();for(let C=0;C<o.length;C++)if(C===i)a[i]+=x[C];else if(o[C]!==x[C])throw new Error("non concat dimensions must match")}let l=a.length,c=new Array(n.length),p=0;for(let w=0;w<c.length;++w)p+=n[w].dims[i],c[w]=p;let s="";n.length<5?s=Ol$1(c):s=Ch(c);let u=Fh(n.length,l),d=$h(c),g=`
        ${u}
        ${d}
        ${s}
        float process(int indices[${l}]) {
          int textureIndex = getTextureWhereDataResides (indices[${i}]);

          if(textureIndex != 0) {
            indices[${i}] = indices[${i}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return{...e,output:{dims:a,type:n[0].type,textureType:0},shaderSource:g}},Lh=(t,e,n)=>{let i=Eh(e.length,n.cacheKey);return{...i,get:()=>Dh(t,i,e,n.axis)}},Ol$1=t=>`int getTextureWhereDataResides(int index) {
      ${t.map((e,n)=>`if(index<${e}) {return ${n};}
`).join("")}
    }`,Ch=t=>Ol$1(t),Fh=(t,e)=>{let n=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${e}]) {`];for(let i=0;i<t;++i)i===0?n.push(`	if (textureIndex == ${i}) { return _X${i}(indices); }`):i===t-1?n.push(`	else { return _X${i}(indices); }`):n.push(`	else if (textureIndex == ${i}) { return _X${i}(indices); }`);return n.push("	}"),n.join(`
`)},$h=t=>{let e=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let n=0;n<t.length;++n)n===0?e.push(`	if (index == ${n}) { return ${t[n]}; }`):n===t.length-1?e.push(`	else { return ${t[n]}; }`):e.push(`	else if (index == ${n}) { return ${t[n]}; }`);return e.push("	}"),e.join(`
`)},Il$1=t=>Q({axis:t.attributes.getInt("axis")}),kh=t=>{if(!t||t.length<1)throw new Error("too few inputs");let e=t[0].type,n=t[0].dims.length;if(e==="string")throw new Error("string tensor is not supported yet");for(let i of t){if(i.type!==e)throw new Error("input tensors should be one type");if(i.dims.length!==n)throw new Error("input tensors should have the same shape")}}});function Bh(){return mt("abs")}function Nh(){return mt("acos")}function Rh(){return mt("asin")}function Mh(){return mt("atan")}function Gh(){return mt("ceil")}function Uh(){return mt("cos")}function zh(t){let e="elu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function Vh(){return mt("exp")}function Wh(){return mt("floor")}function xi(t,e){let n="clip";return{body:`
  const float min = float(${t});
  const float max = float(${e});

  float ${n}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${n}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:n,type:0}}function Hh(){let t="indentity";return{body:`
  float ${t}_(float a) {
    return a;
  }
  vec4 ${t}_(vec4 v) {
    return v;
  }
  `,name:t,type:0}}function qh(t){let e="leakyRelu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function jh(){return mt("log")}function Yh(){let t="neg";return{body:`
  float ${t}_(float a) {
    return -a;
  }
  vec4 ${t}_(vec4 v) {
    return -v;
  }
  `,name:t,type:0}}function Xh(){let t="not";return{body:`
  float ${t}_(float a) {
    return float( ! bool(a) );
  }
  bool ${t}_(bool a) {
    return !a;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${t}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:t,type:0}}function Kh(){return mt("sin")}function wi(){let t="relu";return{body:`
  float ${t}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${t}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:t,type:0}}function vi(){let t="sigmoid";return{body:`
  float ${t}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${t}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:t,type:0}}function Jh(){return mt("sqrt")}function Zh(){return mt("tan")}function Qh(){let t="tanh";return{body:`
  float ${t}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${t}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:t,type:0}}function mt(t){return{body:`
  float ${t}_(float a) {
    return ${t}(a);
  }
  vec4 ${t}_(vec4 v) {
    return ${t}(v);
  }
  `,name:t,type:0}}var em$1,Ee,Al$1,Pl$1,El$1,Dl$1,_i,Ll$1,Cl$1,tm$1,Fl$1,$l$1,kl$1,Bl$1,Nl$1,Rl$1,Oi$1,Ml$1,Gl$1,Ul$1,zl$1,Vl$1,Wl$1,Hl$1,ql$1,jl$1,Yl$1,Xl$1,Ii=L(()=>{Ue$1(),fe$1(),Wt$1(),we$1(),ae(),em$1=(t,e,n,i)=>{let o=t.session.pack?2:0,a=H(t.session.backend.glContext.version);return{...e,output:{dims:n.dims,type:n.type,textureType:o},shaderSource:`
     ${i.body}
     void main() {
       vec4 v = ${a.texture2D}(A, TexCoords);
       v = ${i.name}_(v);
       ${a.output} = v;
     }
     `,hasMain:!0}},Ee=(t,e,n,i)=>{let o=t.session.pack?2:0,a={name:n.name,inputTypes:[o],inputNames:["A"],cacheHint:i};return{...a,get:()=>em$1(t,a,e,n)}},Al$1=(t,e)=>[t.run(Ee(t,e[0],Bh()),e)],Pl$1=(t,e)=>[t.run(Ee(t,e[0],Nh()),e)],El$1=(t,e)=>[t.run(Ee(t,e[0],Rh()),e)],Dl$1=(t,e)=>[t.run(Ee(t,e[0],Mh()),e)],_i=(t,e,n)=>[t.run(Ee(t,e[0],xi(n.min,n.max),n.cacheKey),e)],Ll$1=t=>Q({min:t.attributes.getFloat("min",br),max:t.attributes.getFloat("max",gr$1)}),Cl$1=(t,e)=>{let n=tm$1(t,e);return _i(t,[e[0]],n)},tm$1=(t,e)=>{if(e.length>=3&&(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let n=e.length>=3?e[1].numberData[0]:br,i=e.length>=3?e[2].numberData[0]:gr$1;return Q({min:n,max:i})},Fl$1=(t,e)=>[t.run(Ee(t,e[0],Gh()),e)],$l$1=(t,e)=>[t.run(Ee(t,e[0],Uh()),e)],kl$1=(t,e,n)=>[t.run(Ee(t,e[0],zh(n.alpha),n.cacheKey),e)],Bl$1=t=>Q({alpha:t.attributes.getFloat("alpha",1)}),Nl$1=(t,e)=>[t.run(Ee(t,e[0],Vh()),e)],Rl$1=(t,e)=>[t.run(Ee(t,e[0],Wh()),e)],Oi$1=(t,e)=>[t.run(Ee(t,e[0],Hh()),e)],Ml$1=(t,e,n)=>[t.run(Ee(t,e[0],qh(n.alpha),n.cacheKey),e)],Gl$1=t=>Q({alpha:t.attributes.getFloat("alpha",.01)}),Ul$1=(t,e)=>[t.run(Ee(t,e[0],jh()),e)],zl$1=(t,e)=>[t.run(Ee(t,e[0],Yh()),e)],Vl$1=(t,e)=>[t.run(Ee(t,e[0],Xh()),e)],Wl$1=(t,e)=>[t.run(Ee(t,e[0],wi()),e)],Hl$1=(t,e)=>[t.run(Ee(t,e[0],vi()),e)],ql$1=(t,e)=>[t.run(Ee(t,e[0],Kh()),e)],jl$1=(t,e)=>[t.run(Ee(t,e[0],Jh()),e)],Yl$1=(t,e)=>[t.run(Ee(t,e[0],Zh()),e)],Xl$1=(t,e)=>[t.run(Ee(t,e[0],Qh()),e)]});function Rt(t){let e;switch(t.activation){case"Relu":e=wi();break;case"Sigmoid":e=vi();break;case"Clip":e=xi(t.clipMin,t.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let n=e.name,i=e.body,o=`value = ${n}_(value);`;return{activationFunction:i,applyActivation:o}}var Nr,xr=L(()=>{fe$1(),Ii(),Nr=t=>{let e=t.getString("activation","");if(e==="Clip"){let[n,i]=t.getFloats("activation_params",[br,gr$1]);return{activation:e,clipMax:i,clipMin:n,activationCacheKey:`${e}:${n},${i}`}}return{activation:e,activationCacheKey:e}}}),nm$1,om$1,Kl$1,Jl$1=L(()=>{lt$1(),we$1(),ae(),to$2(),xr(),nm$1=(t,e)=>({name:"GroupedConv",inputNames:t?["X","W","Bias"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),om$1=(t,e,n,i)=>{let o=e.length>2?"value += getBias(output_channel);":"",a=e[0].dims.slice(),l=e[1].dims.slice(),c=l[0]/i.group;ce.verbose("GroupedConv",`autpPad:${i.autoPad}, dilations:${i.dilations}, group:${i.group}, kernelShape:${i.kernelShape}, pads:${i.pads}, strides:${i.strides}`);let p=Rr$1(a,l,i.dilations,i.pads,i.strides),s=H(t.session.backend.glContext.version),{activationFunction:u,applyActivation:d}=Rt(i),g=`
  const ivec2 strides = ivec2(${i.strides[0]}, ${i.strides[1]});
  const ivec2 pads = ivec2(${i.pads[0]}, ${i.pads[1]});
  ${u}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${c};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${l[1]}; wInChannel++) {
      int input_channel = group_id * ${l[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${l[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${i.dilations[0]};

        if (xHeight < 0 || xHeight >= ${a[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${l[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${i.dilations[1]};
          if (xWidth < 0 || xWidth >= ${a[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${o}
    ${d}
    ${s.output} = vec4(value, .0, .0, .0);
  }
`;return{...n,output:{dims:p,type:e[0].type,textureType:0},shaderSource:g,hasMain:!0}},Kl$1=(t,e,n)=>{let i=nm$1(e.length>2,n.cacheKey);return{...i,get:()=>om$1(t,e,i,n)}}}),im$1,am$1,Zl$1,Ql$1=L(()=>{we$1(),ae(),Tr(),im$1=t=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:t}),am$1=(t,e,n,i,o,a)=>{let l=n.dims,c=i.dims,p=2,s=3,u=o.length,d=[c[1]*c[2]*c[3],o[2]*o[3]],g=c[2]*c[3],w=Nt(),x=H(t.session.backend.glContext.version),C="";for(let Y=0;Y<=1;Y++)for(let q=0;q<=1;q++)C+=`
            blockIndex = rc.x + ${q};
            pos = rc.y + ${Y};

            if(blockIndex < ${d[1]} && pos < ${d[0]}) {
              offsetY = int(blockIndex / (${o[u-1]})) * ${a.strides[0]} -
                ${a.pads[0]};
              d0 = offsetY + ${a.dilations[0]} * (imod(pos, ${g}) / ${c[2]});

              if(d0 < ${l[p]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${o[u-1]}) * ${a.strides[1]} -
                  ${a.pads[1]};
                d1 = offsetX + ${a.dilations[1]} * imod(imod(pos, ${g}), ${c[2]});

                if(d1 < ${l[s]} && d1 >= 0) {

                  ch = int(float(pos)/ ${g}.);
                    innerDims = vec2(d0, d1);
                    result[${Y*2+q}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let O=`
      ${w}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${C}
          ${x.output} = result;
      }
            `;return{...e,output:{dims:d,type:n.type,textureType:2},shaderSource:O,hasMain:!0}},Zl$1=(t,e,n,i,o)=>{let a=im$1(o.cacheKey);return{...a,get:()=>am$1(t,a,e,n,i,o)}}});function um$1(t,e,n){let i=e[0].dims,o=e[1].dims,a=Ze$1.calcShape(i,o,!0);if(!a)throw new Error("Can't use matmul on the given tensors");let l=Qe(a.length),c=Dt$1(),{activationFunction:p,applyActivation:s}=Rt(n),u=e.length>2,d=u?"value += getBiasForMatmul();":"",g=u?`${Ai(l,c,e[2].dims,a,!1)}`:"",w=a.length,x=i.length,C=o.length,O=i[i.length-1],Y=`
    ${p}
    ${g}
    float process(int indices[${w}]) {
        int a[${x}];
        int b[${C}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${O}; ++k) {
            a[${x-1}] = k;
            b[${C-2}] = k;
            value += _A(a) * _B(b);
        }
        ${d}
        ${s}
        return value;
    }`;return{...t,output:{dims:a,type:e[0].type,textureType:0},shaderSource:Y}}function Si(t,e){let n=sm$1(t.length>2,e.activationCacheKey);return{...n,get:()=>um$1(n,t,e)}}function Ai(t,e,n,i,o){let a="",l=n.length,c=i.length,p=c-l;c<2&&l>0?a="coords":a=n.map((g,w)=>`coords.${e[w+p]}`).join(", ");let s=Ze$1.getBroadcastDims(n,i).map(g=>`coords.${e[g+p]} = 0;`).join(`
`),u=U$1.size(n)===1,d="vec4(outputValue.xx, outputValue.yy)";return u&&(d="vec4(outputValue.x)"),o?`
vec4 getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${s}
  vec4 outputValue = getBias(${a});
  return ${d};
}`:`
float getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${s}
  return getBias(coords.x);
}`}var ef$1,tf$1,sm$1,lm$1,ro$1=L(()=>{fe$1(),ae(),Bt$1(),xr(),Pi$1(),ef$1=(t,e,n)=>(lm$1(e),t.session.pack?[t.run(no$1(t,e,n),e)]:[t.run(Si(e,n),e)]),tf$1=t=>Nr(t.attributes),sm$1=(t,e)=>({name:"MatMul",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),lm$1=t=>{if(!t||t.length!==2)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if(t[0].type!=="float32"&&t[0].type!=="float64"||t[1].type!=="float32"&&t[1].type!=="float64")throw new Error("inputs should be float type");if(t[0].type!==t[1].type)throw new Error("inputs types should match")}});function pm$1(t,e,n,i){let o=[],a=[],l=n[0].dims,c=n[1].dims,p=l.length,s=c.length,u=i.length,d=u-p,g=u-s;o=l.map((q,ue)=>`coords.${e[ue+d]}`),o[p-1]="i*2",o.join(", "),a=c.map((q,ue)=>`coords.${e[ue+g]}`),a[s-2]="i*2",a.join(", ");let w=Ze$1.getBroadcastDims(l,i),x=Ze$1.getBroadcastDims(c,i),C=w.map(q=>`coords.${e[q+d]} = 0;`).join(`
`),O=x.map(q=>`coords.${e[q+g]} = 0;`).join(`
`),Y=`int lastDim = coords.${e[u-1]};
  coords.${e[u-1]} = coords.${e[u-2]};
  coords.${e[u-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${Y}
  ${C}
  vec4 outputValue = getA(${o});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${Y}
  ${O}
  vec4 outputValue = getB(${a});
  return outputValue;
}`}function dm$1(t,e){let n="";for(let i=0;i<e-2;i++)n+=`rc.${t[i]}, `;return n+=`rc.${t[e-2]}, i*2`,n}function hm$1(t,e){let n="";for(let i=0;i<e-2;i++)n+=`rc.${t[i]}, `;return n+=`i*2, rc.${t[e-1]}`,n}var fm$1,cm$1,no$1,Pi$1=L(()=>{fe$1(),we$1(),ae(),Bt$1(),xr(),ro$1(),fm$1=(t,e)=>({name:"MatMul (packed)",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[2,2,2]:[2,2],cacheHint:e}),cm$1=(t,e,n,i)=>{let o=n.length>2,a=o?"value += getBiasForMatmul();":"",l=n[0].dims,c=n[1].dims,p=Ze$1.calcShape(l,c,!0),s=!U$1.areEqual(n[0].dims,n[1].dims);if(!p)throw new Error("Can't use matmul on the given tensors");let u=l[l.length-1],d=Math.ceil(u/2),g=l.length,w=c.length,x=H(t.session.backend.glContext.version),C=Qe(p.length),O=p.length,Y=Dt$1(),{activationFunction:q,applyActivation:ue}=Rt(i),pe=o?`${Ai(C,Y,n[2].dims,p,!0)}`:"",se=s?`${pm$1(C,Y,n,p)}`:"",Re=s?"getAAtOutCoordsMatmul(i)":`getA(${dm$1(Y,g)})`,Oe=s?"getBAtOutCoordsMatmul(i)":`getB(${hm$1(Y,w)})`,Ce=s?"":`${C} rc =
          getOutputCoords(); int lastDim = rc.${Y[O-1]}; rc.${Y[O-1]} =
          rc.${Y[O-2]}; rc.${Y[O-2]} = lastDim;
      `,He=`
            ${se}
            ${pe}
            ${q}
            void main() {
              ${Ce}

              vec4 value = vec4(0);
              for (int i = 0; i < ${d}; i++) {
                vec4 a = ${Re};
                vec4 b = ${Oe};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${a}
              ${ue}
              ${x.output} = value;
            }`;return{...e,output:{dims:p,type:n[0].type,textureType:2},shaderSource:He,hasMain:!0}},no$1=(t,e,n)=>{let i=fm$1(e.length>2,n.activationCacheKey);return{...i,get:()=>cm$1(t,i,e,n)}}}),rf$1,nf$1=L(()=>{to$2(),Ql$1(),Pi$1(),rf$1=(t,e,n)=>{let i=e[0].dims,o=e[1].dims,a=Rr$1(i,o,n.dilations,n.pads,n.strides),l=t.run(Zl$1(t,e[0],e[1],a,n),[e[0]]),c=t.reshapePacked(e[1],[o[0],o[1]*o[2]*o[3]]),p=e.length===3?[c,l,e[2]]:[c,l],s=t.run(no$1(t,p,n),p);return t.reshapePacked(s,a)}}),mm$1,bm$1,of$1,Ei,Di$1=L(()=>{ae(),mm$1=t=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:t}),bm$1=(t,e,n,i,o,a)=>{let l=n.dims,c=i.dims,p=o.length,s=Ei(l,c,o,4),u=`
        const int XC = ${l[1]};
        const int XH = ${l[2]};
        const int XW = ${l[3]};
        const int KH = ${a.kernelShape[0]};
        const int KW = ${a.kernelShape[1]};
        const int dilationH = ${a.dilations[0]};
        const int dilationW = ${a.dilations[1]};
        const int strideH = ${a.strides[0]};
        const int strideW = ${a.strides[1]};
        const int padH = ${a.pads[0]};
        const int padW = ${a.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${p}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${l.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return{...e,output:{dims:s,type:n.type,textureType:4},shaderSource:u}},of$1=(t,e,n,i,o)=>{let a=mm$1(o.cacheKey);return{...a,get:()=>bm$1(t,a,e,n,i,o)}},Ei=(t,e,n,i=4)=>[n[0],n[2],n[3],Math.ceil(t[1]*e[2]*e[3]/i)]}),gm$1,ym$1,af$1,sf$1=L(()=>{fe$1(),we$1(),ae(),xr(),Di$1(),gm$1=(t,e)=>({name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[0,4,0]:[0,4],cacheKey:e.activationCacheKey}),ym$1=(t,e,n,i,o)=>{let a=n[0].dims,l=n[1].dims,c=[l[0],Math.ceil(a[1]*l[2]*l[3]/4)],p=Ei(a,l,i),[s,u]=t.calculateTextureWidthAndHeight(c,4),d=U$1.computeStrides(p),[g,w]=t.calculateTextureWidthAndHeight(p,4),x=i.length,C=n.length<3?"0.0":"_B(b)",O=Math.ceil(a[1]*l[2]*l[3]/4),{activationFunction:Y,applyActivation:q}=Rt(o),ue=H(t.session.backend.glContext.version),pe=`
${Y}
float process(int indices[${x}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${d[0]} + im2col[1] * ${d[1]} + im2col[2] * ${d[2]};
  int kernelOffset = indices[1] * ${c[1]};
  float value = ${C};
  for (int i = 0; i < ${O}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${g}, ${w});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${s}, ${u});
    value += dot(${ue.texture2D}(Im2Col, im2colCoords), ${ue.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${q}
  return value;
}`;return{...e,output:{dims:i,type:n[0].type,textureType:0},shaderSource:pe}},af$1=(t,e,n,i)=>{let o=gm$1(e.length>2,i);return{...o,get:()=>ym$1(t,o,e,n,i)}}}),Rr$1,Li$1,Tm$1,xm$1,wm$1,vm,Ci,_m$1,to$2=L(()=>{Ue$1(),fe$1(),Jl$1(),nf$1(),sf$1(),xr(),Di$1(),ro$1(),Rr$1=(t,e,n,i,o)=>{let a=t[0],l=t.slice(2),c=l.length,p=e[0],s=e.slice(2).map((d,g)=>d+(d-1)*(n[g]-1)),u=l.map((d,g)=>d+i[g]+i[g+c]).map((d,g)=>Math.floor((d-s[g]+o[g])/o[g]));return[a,p].concat(...u)},Li$1=(t,e,n)=>(_m$1(e,n),Tm$1(t,e,n)),Tm$1=(t,e,n)=>{let i=vm(n,e),o=t.session.pack,a=i.kernelShape[0]===1&&i.kernelShape[1]===1;return i.group>1?[t.run(Kl$1(t,e,i),e)]:a&&o?[xm$1(t,e,i)]:o&&e[0].dims.length===4&&e[0].dims[0]===1&&!a?[rf$1(t,e,i)]:[wm$1(t,e,i)]},xm$1=(t,e,n)=>{let i=e[0].dims,o=e[1].dims,a=Rr$1(i,o,n.dilations,n.pads,n.strides),l=t.reshapeUnpacked(e[0],[i[1],i[2]*i[3]]),c=t.reshapeUnpacked(e[1],[o[0],o[1]]),p=e.length>2?[c,l,e[2]]:[c,l],s=t.run(Si(p,n),p);return t.reshapeUnpacked(s,a)},wm$1=(t,e,n)=>{let i=e[0].dims,o=e[1].dims,a=Rr$1(i,o,n.dilations,n.pads,n.strides),l=t.run(of$1(t,e[0],e[1],a,n),[e[0]]),c=e.length===3?[l,e[1],e[2]]:[l,e[1]];return t.run(af$1(t,e,a,n),c)},vm=(t,e)=>{let n=t.kernelShape.slice();if(t.kernelShape.length===0)for(let a=2;a<e[1].dims.length;++a)n.push(e[1].dims[a]);let i=t.pads.slice();mr$1.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,n,i,t.autoPad);let o=Object.assign({},t);return Object.assign(o,{kernelShape:n,pads:i,cacheKey:t.cacheKey}),o},Ci=t=>{let e=t.attributes,n=Nr(e),i=e.getString("auto_pad","NOTSET"),o=e.getInts("dilations",[1,1]),a=e.getInt("group",1),l=e.getInts("kernel_shape",[]),c=e.getInts("pads",[0,0,0,0]),p=e.getInts("strides",[1,1]);return Q({autoPad:i,dilations:o,group:a,kernelShape:l,pads:c,strides:p,...n})},_m$1=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4||t[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let n=t[0].dims[1],i=t[1].dims[1]*e.group;if(n!==i)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(t.length===3&&(t[2].dims.length!==1||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");let o=t[0].dims.length-2;if(e.dilations.length!==o)throw new Error(`dilations should be ${o}D`);if(e.strides.length!==o)throw new Error(`strides should be ${o}D`);if(e.pads.length!==o*2)throw new Error(`pads should be ${o*2}D`);if(e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(t[0].type!=="float32"||t[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(t.length===3&&t[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}}),Om$1,Im$1,Sm$1,uf$1,Am$1,Pm$1,Em$1,Dm$1,Lm$1,Cm$1,lf$1,Fm$1,ff$1=L(()=>{Ue$1(),we$1(),ae(),xr(),Om$1=(t,e,n,i,o,a)=>(t-1)*e+n+(i-1)*o+1-a,Im$1=(t,e,n,i,o)=>{let a=Math.floor(t/2);e==="SAME_UPPER"?(n[i]=a,n[o]=t-a):e==="SAME_LOWER"&&(n[i]=t-a,n[o]=a)},Sm$1=(t,e,n,i,o,a,l,c)=>{let p=t.length-2,s=c.length===0;for(let u=0;u<p;++u){let d=s?t[u+2]*a[u]:c[u],g=Om$1(t[u+2],a[u],o[u],e[u],n[u],d);Im$1(g,i,o,u,u+p),s&&c.push(a[u]*(t[u+2]-1)+l[u]+(e[u]-1)*n[u]+1-o[u]-o[u+p])}},uf$1=(t,e,n)=>(Fm$1(e,n),Am$1(t,e,n)),Am$1=(t,e,n)=>{let i=Cm$1(n,e);return[Lm$1(t,e,i)]},Pm$1=(t,e)=>({name:"ConvTranspose",inputNames:t?["X","W","B"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),Em$1=(t,e,n,i)=>{let o=e.length>2?"getB(output_channel)":"0.0",a=e[0].dims,l=e[1].dims,c=l[1],p=l[0]/i.group,s=[e[0].dims[0],e[1].dims[1]*i.group,...i.outputShape],u=H(t.session.backend.glContext.version),{activationFunction:d,applyActivation:g}=Rt(i),w=`
  const ivec2 strides = ivec2(${i.strides[0]}, ${i.strides[1]});
  const ivec2 pads = ivec2(${i.pads[0]}, ${i.pads[1]});
  ${d}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${c};
    int wOutChannel = output_channel - group_id * ${c};

    float value = ${o};
    for (int inChannelOffset = 0; inChannelOffset < ${p}; inChannelOffset++) {
      int input_channel = group_id * ${p} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${l[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${l[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${i.dilations[0]}, wHOff * ${i.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${a[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${a[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${g}
    ${u.output} = vec4(value, .0, .0, .0);
  }
`;return{...n,output:{dims:s,type:e[0].type,textureType:0},shaderSource:w,hasMain:!0}},Dm$1=(t,e,n)=>{let i=Pm$1(e.length>2,n.cacheKey);return{...i,get:()=>Em$1(t,e,i,n)}},Lm$1=(t,e,n)=>t.run(Dm$1(t,e,n),e),Cm$1=(t,e)=>{let n=t.kernelShape.slice();if(t.kernelShape.length===0)for(let c=2;c<e[1].dims.length;++c)n.push(e[1].dims[c]);let i=t.pads.slice(),o=t.outputShape.slice(),a=e[0].dims;Sm$1(a,n,t.dilations,t.autoPad,i,t.strides,t.outputPadding,o);let l=Object.assign({},t);return Object.assign(l,{kernelShape:n,pads:i,outputShape:o,cacheKey:t.cacheKey}),l},lf$1=t=>{let e=t.attributes,n=Nr(e),i=e.getString("auto_pad","NOTSET"),o=e.getInts("dilations",[1,1]),a=e.getInt("group",1),l=e.getInts("kernel_shape",[]),c=e.getInts("output_padding",[0,0]),p=e.getInts("output_shape",[]),s=e.getInts("pads",[0,0,0,0]),u=e.getInts("strides",[1,1]);return Q({autoPad:i,dilations:o,group:a,kernelShape:l,outputPadding:c,outputShape:p,pads:s,strides:u,...n})},Fm$1=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4||t[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let n=t[0].dims[1],i=t[1].dims[0];if(n!==i)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let o=t[1].dims[1]*e.group;if(t.length===3&&(t[2].dims.length!==1||t[2].dims[0]!==o))throw new Error("invalid bias");let a=t[0].dims.length-2;if(e.dilations.length!==a)throw new Error(`dilations should be ${a}D`);if(e.strides.length!==a)throw new Error(`strides should be ${a}D`);if(e.pads.length!==a*2)throw new Error(`pads should be ${a*2}D`);if(e.outputPadding.length!==a)throw new Error(`output_padding should be ${a}D`);if(e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(e.outputShape.length!==0&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if(t[0].type!=="float32"||t[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(t.length===3&&t[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}}),cf,wr,pf$1,$m$1,df,km$1,Bm$1,Nm$1,oo$1=L(()=>{Ue$1(),fe$1(),ae(),cf={name:"Transpose",inputNames:["A"],inputTypes:[0]},wr=(t,e,n)=>(Nm$1(e),[t.run({...cf,cacheHint:n.cacheKey,get:()=>$m$1(t,e[0],n.perm)},e)]),pf$1=t=>Q({perm:t.attributes.getInts("perm",[])}),$m$1=(t,e,n)=>{let i=e.dims;n=df(i,n);let o=km$1(i,n),a=i.length,l=`
      ${Bm$1("perm",n,a)}
      float process(int indices[${a}]) {
        int a[${a}];
        perm(a, indices);
        return _A(a);
      }`;return{...cf,output:{dims:o,type:e.type,textureType:0},shaderSource:l}},df=(t,e)=>(e&&e.length!==t.length&&(e=[...t.keys()].reverse()),e),km$1=(t,e)=>(e=df(t,e),U$1.sortBasedOnPerm(t,e)),Bm$1=(t,e,n)=>{let i=[];i.push(`void ${t}(out int a[${n}], int src[${n}]) {`);for(let o=0;o<n;++o)i.push(`	a[${e[o]}]=src[${o}];`);return i.push("	}"),i.join(`
`)},Nm$1=t=>{if(!t||t.length!==1)throw new Error("Transpose requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("input should be float tensor")}}),hf$1,mf$1,Rm$1,bf=L(()=>{oo$1(),hf$1=(t,e,n)=>{Rm$1(e);let i=n.blocksize,o=i*i,a=n.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],l=n.mode==="DCR"?[e[0].dims[0],i,i,e[0].dims[1]/o,e[0].dims[2],e[0].dims[3]]:[e[0].dims[0],e[0].dims[1]/o,i,i,e[0].dims[2],e[0].dims[3]],c=t.reshapeUnpacked(e[0],l),p={perm:a,cacheKey:`${a}`},[s]=wr(t,[c],p),u=[e[0].dims[0],e[0].dims[1]/o,e[0].dims[2]*i,e[0].dims[3]*i];return[t.reshapeUnpacked(s,u)]},mf$1=t=>{let e=t.attributes.getInt("blocksize");if(e<1)throw new Error(`blocksize must be >= 1, but got : ${e} for DepthToSpace`);let n=t.attributes.getString("mode","DCR");if(n!=="DCR"&&n!=="CRD")throw new Error(`unrecognized mode: ${n} for DepthToSpace`);return{mode:n,blocksize:e}},Rm$1=t=>{if(t.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${t.length}`);if(t[0].type==="string"||t[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),gf,yf,Mm$1,Tf=L(()=>{fe$1(),gf=(t,e,n)=>{Mm$1(e,n);let i=U$1.flattenShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],i)]},yf=t=>t.attributes.getInt("axis",1),Mm$1=(t,e)=>{if(!t||t.length!==1)throw new Error("Flatten requires 1 input.");let n=t[0].dims.length;if(n===0)throw new Error("scalar tensor is not supported.");if(e<-n||e>n)throw new Error("Invalid axis");if(t[0].type==="string")throw new Error("string tensor is not supported.")}}),Qt,pn=L(()=>{Qt=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),xf,wf,Gm$1,Um$1,zm$1,Vm$1,vf=L(()=>{Ue$1(),pn(),fe$1(),ae(),xf=(t,e,n)=>(Vm$1(e,n.axis),[t.run(zm$1(t,e,n),e)]),wf=t=>Q({axis:t.attributes.getInt("axis",0)}),Gm$1={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Um$1=(t,e,n,i)=>{let o=n[0].dims.slice(),a=n[1].dims.slice(),l=new Array(o.length+a.length-1);i=U$1.normalizeAxis(i,o.length);let c=[];for(let g=0;g<l.length;g++)g<i?(l[g]=o[g],c.push(`inputIdx[${g}] = outputIdx[${g}];`)):g<i+a.length?(l[g]=a[g-i],c.push(`indexDataIdx[${g-i}] = outputIdx[${g}];`)):(l[g]=o[g-a.length+1],c.push(`inputIdx[${g-a.length+1}] = outputIdx[${g}];`));let p=l.length||1,s=o.length,u=a.length||1,d=`
      float process(int outputIdx[${p}]) {
        int inputIdx[${s}];
        int indexDataIdx[${u}];
        indexDataIdx[0] = 0;
        ${c.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${i}] = idx < 0 ? idx + ${o[i]} : idx;
        return _A(inputIdx);
      }`;return{...e,output:{dims:l,type:n[0].type,textureType:0},shaderSource:d}},zm$1=(t,e,n)=>{let i={...Gm$1,cacheHint:n.cacheKey};return{...i,get:()=>Um$1(t,i,e,n.axis)}},Vm$1=(t,e)=>{if(!t||t.length!==2)throw new Error("Gather requires 2 inputs.");let n=t[0].dims.length;if(n<1)throw new Error("Invalid input shape.");if(e<-n||e>n-1)throw new Error("Invalid axis.");if(Qt.indexOf(t[0].type)===-1)throw new Error("Invaid input type.");if(t[1].type!=="int32"&&t[1].type!=="int16")throw new Error("Invaid input type.")}}),Fi$1,_f,Of,If,Wm$1,Hm$1,qm$1,Sf=L(()=>{Ue$1(),fe$1(),ae(),Fi$1=(t,e,n)=>(qm$1(e,n),[t.run(Wm$1(e,n),e)]),_f=(t,e)=>{let n=t.attributes.getInt("transA",0)!==0,i=t.attributes.getInt("transB",0)!==0,o=t.attributes.getFloat("alpha",1),a=t.attributes.getFloat("beta",1);return Q({transA:n,transB:i,alpha:o,beta:a,isOptionalC:e})},Of=t=>_f(t,!1),If=t=>_f(t,!0),Wm$1=(t,e)=>{let n={name:"Gemm",inputNames:t.length===3?["A","B","C"]:["A","B"],inputTypes:t.length===3?[0,0,0]:[0,0],key:e.cacheKey};return{...n,get:()=>Hm$1(n,t,e)}},Hm$1=(t,e,n)=>{let i=e[0].dims.slice(),o=e[1].dims.slice(),[a,l]=jn$1.getShapeOfGemmResult(i,n.transA,o,n.transB,e.length===3?e[2].dims:void 0),c=[a,l];if(!c)throw new Error("Can't use gemm on the given tensors");let p=i[i.length-1],s="";n.transA&&(p=i[0]),n.transA&&n.transB?s="value += _A_T(a) * _B_T(b);":n.transA&&!n.transB?s="value += _A_T(a) * _B(b);":!n.transA&&n.transB?s="value += _A(a) * _B_T(b);":!n.transA&&!n.transB&&(s="value += _A(a) * _B(b);");let u=c.length,d=e.length===3?`int c[${e[2].dims.length}];`:"",g=e.length===3?"bcastIndices_C(indices, c);":"",w=e.length===3?"value += beta * _C(c);":"",x=`
      float process(int indices[${u}]) {
          int a[${u}];
          int b[${u}];
          ${d}

          copyVec(indices, a);
          copyVec(indices, b);
          ${g}

          float value = 0.0;
          for (int k=0; k<${p}; ++k) {
              a[${u-1}] = k;
              b[${u-2}] = k;
              ${s}
          }

          value = value * alpha;
          ${w}
          return value;
      }`;return{...t,output:{dims:c,type:e[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:n.alpha},{name:"beta",type:"float",data:n.beta}],shaderSource:x}},qm$1=(t,e)=>{if(!t)throw new Error("Input is missing");if(e.isOptionalC&&(t.length<2||t.length>3))throw new Error("Invaid input shape.");if(!e.isOptionalC&&t.length!==3)throw new Error("Gemm requires 3 inputs");if(t.length===3&&t[2].dims.length!==1&&t[2].dims.length!==2)throw new Error("Invalid input shape of C");if(t[0].type!=="float32"&&t[0].type!=="float64"||t[1].type!=="float32"&&t[1].type!=="float64"||t.length===3&&t[2].type!=="float32"&&t[2].type!=="float64")throw new Error("Invalid input type.");if(t[0].type!==t[1].type||t.length===3&&t[0].type!==t[2].type)throw new Error("Input types are mismatched")}}),Af,Pf,jm$1,Ym$1,Xm$1,Km$1,Jm$1,Ef=L(()=>{Ue$1(),ae(),Af=(t,e,n)=>(Jm$1(e),[t.run(Xm$1(t,e,n),e)]),Pf=t=>{let e=t.attributes.getFloat("scale"),n=t.attributes.getFloats("bias");return Q({scale:e,bias:n})},jm$1={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},Ym$1=(t,e,n,i)=>{let o=n[0].dims.slice(),a=o.length,l=`
      ${Km$1(i.bias.length)}
      float process(int indices[${a}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{...e,output:{dims:o,type:n[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:i.bias.length,data:i.bias},{name:"scale",type:"float",data:i.scale}],shaderSource:l}},Xm$1=(t,e,n)=>{let i={...jm$1,cacheHint:n.cacheKey};return{...i,get:()=>Ym$1(t,i,e,n)}},Km$1=t=>{let e=[`float getBias(float bias[${t}], int channel) {`];for(let n=0;n<t;++n)n===0?e.push(`	if (channel == ${n}) { return bias[${n}]; }`):n===t-1?e.push(`	else { return bias[${n}]; }`):e.push(`	else if (channel == ${n}) { return bias[${n}]; }`);return e.push("	}"),e.join(`
`)},Jm$1=t=>{if(!t||t.length!==1)throw new Error("ImageScaler requires 1 input.");if(t[0].dims.length!==4)throw new Error("Invalid input shape.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")}}),Lf,Cf,Df,Zm$1,Qm$1,eb,tb,rb,nb,Ff=L(()=>{we$1(),ae(),Lf=(t,e,n)=>{nb(e);let i=t.run(Qm$1(e[0]),e);return[t.run(rb(t,e[0],n,i.dims),[e[0],i,e[1],e[2]])]},Cf=t=>t.attributes.getFloat("epsilon",1e-5),Df={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},Zm$1=(t,e)=>{let n=e.dims.slice(),i=n[1],o=n[2]*n[3],a=[n[0],i],l=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${n[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${n[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${o});
        temp = 0.0;
        for(int a2=0; a2<${n[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${n[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${o});

        return v;
      }`;return{...t,output:{dims:a,type:e.type,textureType:4},shaderSource:l}},Qm$1=t=>({...Df,get:()=>Zm$1(Df,t)}),eb={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},tb=(t,e,n,i,o)=>{let a=H(t.session.backend.glContext.version),[l,c]=t.calculateTextureWidthAndHeight(o,4),[p,s]=[l/4,c],u=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${p}, ${s});
        return ${a.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return{...e,output:{dims:n.dims,type:n.type,textureType:0},variables:[{name:"epsilon",type:"float",data:i}],shaderSource:u}},rb=(t,e,n,i)=>{let o={...eb,cacheHint:`${n}`};return{...o,get:()=>tb(t,o,e,n,i)}},nb=t=>{if(!t||t.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let e=t[0],n=t[1],i=t[2];if(e.dims.length<3||n.dims.length!==1||i.dims.length!==1)throw new Error("Invalid input shape.");if(n.dims[0]!==e.dims[1]||i.dims[0]!==e.dims[1])throw new Error("Input shapes are mismatched.");if(e.type!=="float32"&&e.type!=="float64"||n.type!=="float32"&&n.type!=="float64"||i.type!=="float32"&&i.type!=="float64")throw new Error("Invalid input type.");if(t[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function ob(t,e){let n=t[0].dims[1],i=t[0].dims.length,o=-Math.floor((e.size-1)/2),a=Math.ceil((e.size-1)/2),l=`float(${e.alpha}) / float(${e.size})`,c=`float(${e.bias})`,p=`float(${e.beta})`,s=`
    float process(int indices[${i}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${o}; i <= ${a}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${n}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${c} + ${l} * square_sum, ${p});
    }`;return{...Bf,cacheHint:e.cacheKey,output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:s}}function ib(t,e){return{...Bf,cacheHint:e.cacheKey,get:()=>ob(t,e)}}var $f,kf,Bf,ab,Nf=L(()=>{Ue$1(),ae(),$f=(t,e,n)=>(ab(e),[t.run(ib(e,n),e)]),kf=t=>{let e=t.attributes.getFloat("alpha",1e-4),n=t.attributes.getFloat("beta",.75),i=t.attributes.getFloat("bias",1),o=t.attributes.getInt("size");return Q({alpha:e,beta:n,bias:i,size:o})},Bf={name:"LRN",inputNames:["X"],inputTypes:[0]},ab=t=>{if(!t||t.length!==1)throw new Error("LRN requires 1 input.");if(t[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(t[0].type!=="float32")throw new Error("input should be float type")}}),sb,$i,Rf,Mf,Gf,ub,lb,fb,cb,pb,db,hb,mb,Uf=L(()=>{Ue$1(),fe$1(),we$1(),ae(),sb={name:"Pad",inputNames:["A"],inputTypes:[0]},$i=(t,e,n)=>(fb(e),[t.run({...sb,cacheHint:n.cacheKey,get:()=>lb(t,e[0],n)},e)]),Rf=t=>{let e=t.attributes.getString("mode","constant"),n=t.attributes.getFloat("value",0),i=t.attributes.getInts("pads");return Q({mode:e,value:n,pads:i})},Mf=(t,e,n)=>{cb(e);let i=ub(t,e,n);return $i(t,[e[0]],i)},Gf=t=>t.attributes.getString("mode","constant"),ub=(t,e,n)=>{if(!t.session.isInitializer(e[1].dataId)||e.length>=3&&!t.session.isInitializer(e[2].dataId))throw new Error("dynamic pad attributes are not allowed");let i=Array.from(e[1].integerData),o=e.length>=3?e[2].floatData[0]:0;return Q({mode:n,pads:i,value:o})},lb=(t,e,n)=>{let i=U$1.padShape(e.dims.slice(),n.pads),o=i.length,a=`
      ${pb(t,e,n)}
      float process(int[${o}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:i,type:e.type,textureType:0},shaderSource:a}},fb=t=>{if(!t||t.length!==1)throw new Error("Pad requires 1 input");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")},cb=t=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(t[1].type!=="int32")throw new Error("Invalid input type.");if(t.length>=3&&t[2].type==="string")throw new Error("Invalid input type.")},pb=(t,e,n)=>{let i=H(t.session.backend.glContext.version),[o,a]=t.calculateTextureWidthAndHeight(e.dims,0),l=U$1.computeStrides(e.dims);switch(n.mode){case"constant":return db(i,e.dims,l,o,a,n.pads,n.value);case"reflect":return hb(i,e.dims,l,o,a,n.pads);case"edge":return mb(i,e.dims,l,o,a,n.pads);default:throw new Error("Invalid mode")}},db=(t,e,n,i,o,a,l)=>{let c=e.length,p="";for(let s=c-1;s>=0;--s)p+=`
        k = m[${s}] - ${a[s]};
        if (k < 0)  return constant;
        if (k >= ${e[s]}) return constant;
        offset += k * ${n[s]};
        `;return`
      float padA(int m[${c}]) {
        const float constant = float(${l});
        int offset = 0;
        int k = 0;
        ${p}
        vec2 coords = offsetToCoords(offset, ${i}, ${o});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},hb=(t,e,n,i,o,a)=>{let l=e.length,c="";for(let p=l-1;p>=0;--p)c+=`
        k = m[${p}] - ${a[p]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(e[p]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${e[p]}) { k = _2n_1 - k; }
        }
        offset += k * ${n[p]};
        `;return`
      float padA(int m[${l}]) {
        int offset = 0;
        int k = 0;
        ${c}
        vec2 coords = offsetToCoords(offset, ${i}, ${o});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},mb=(t,e,n,i,o,a)=>{let l=e.length,c="";for(let p=l-1;p>=0;--p)c+=`
        k = m[${p}] - ${a[p]};
        if (k < 0)  k = 0;
        if (k >= ${e[p]}) k = ${e[p]-1};
        offset += k * ${n[p]};
      `;return`
      float padA(int m[${l}]) {
        int offset = 0;
        int k = 0;
        ${c}
        vec2 coords = offsetToCoords(offset, ${i}, ${o});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `}}),Vf,Wf,Hf,qf,jf,Yf,Xf,Kf,Jf,bb,zf,Zf,ao$1,Qf,io$1,gb,ec=L(()=>{Ue$1(),fe$1(),ae(),Vf=(t,e,n)=>{ao$1(e);let i={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:n.cacheKey};return[t.run({...i,get:()=>Hf(e,i,!1,n)},e)]},Wf=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),i=t.attributes.getInt("count_include_pad",0)!==0,o=t.attributes.getInts("kernel_shape"),a=t.attributes.getInts("strides",[]),l=t.attributes.getInts("pads",[]);if(n!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return Q({autoPad:e,ceilMode:n,countIncludePad:i,kernelShape:o,strides:a,pads:l})},Hf=(t,e,n,i)=>{let[o,a]=Jf(t,i,n),l=U$1.size(o.kernelShape),c="value += _X(x);",p="";o.countIncludePad?p+=`value /= float(${l});`:p+=`value /= float(${l} - pad);`;let s=`
        ${Qf(t[0].dims,o,c,p,"0.0")}
      `;return{...e,output:{dims:a,type:t[0].type,textureType:0},shaderSource:s}},qf=(t,e,n)=>{ao$1(e);let i={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${n.countIncludePad}`};return[t.run({...i,get:()=>Hf(e,i,!0,n)},e)]},jf=t=>{let e=t.attributes.getInt("count_include_pad",0)!==0;return Q({autoPad:"",ceilMode:0,countIncludePad:e,kernelShape:[],strides:[],pads:[]})},Yf=(t,e,n)=>{ao$1(e);let i={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:n.cacheKey};return[t.run({...i,get:()=>Kf(e,i,!1,n)},e)]},Xf=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),i=t.attributes.getInts("kernel_shape"),o=t.attributes.getInts("strides",[]),a=t.attributes.getInts("pads",[]),l=t.attributes.getInt("storage_order",0),c=t.attributes.getInts("dilations",[]);if(l!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(n!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return Q({autoPad:e,ceilMode:n,countIncludePad:!1,kernelShape:i,strides:o,pads:a,storageOrder:l,dilations:c})},Kf=(t,e,n,i)=>{let[o,a]=Jf(t,i,n),l=`
      value = max(_X(x), value);
    `,c="",p=`
      ${Qf(t[0].dims,o,l,c,"-1e5")}
    `;return{...e,output:{dims:a,type:t[0].type,textureType:0},shaderSource:p}},Jf=(t,e,n)=>{let i=t[0].dims.slice(),o=Object.hasOwnProperty.call(e,"dilations"),a=e.kernelShape.slice(),l=e.strides.slice(),c=o?e.dilations.slice():[],p=e.pads.slice();mr$1.adjustPoolAttributes(n,i,a,l,c,p);let s=mr$1.computePoolOutputShape(n,i,l,c,a,p,e.autoPad),u=Object.assign({},e);return o?Object.assign(u,{kernelShape:a,strides:l,pads:p,dilations:c,cacheKey:e.cacheKey}):Object.assign(u,{kernelShape:a,strides:l,pads:p,cacheKey:e.cacheKey}),[u,s]},bb={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},zf={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},Zf=(t,e)=>(ao$1(e),[t.run({...zf,get:()=>Kf(e,zf,!0,bb)},e)]),ao$1=t=>{if(!t||t.length!==1)throw new Error("Pool ops requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")},Qf=(t,e,n,i,o)=>{let a=t.length;if(e.kernelShape.length<=2){let l=e.kernelShape[e.kernelShape.length-1],c=e.strides[e.strides.length-1],p=e.pads[e.pads.length/2-1],s=e.pads[e.pads.length-1],u=t[a-1],d="",g="",w="";if(p+s!==0?d=`
          for (int i = 0; i < ${l}; i++) {
            x[${a} - 1] = indices[${a} - 1] * ${c} - ${p} + i;
            if (x[${a} - 1] < 0 || x[${a} - 1] >= ${u}) {
              pad++;
              continue;
            }
            ${n}
          }`:d=`
          for (int i = 0; i < ${l}; i++) {
            x[${a} - 1] = indices[${a} - 1] * ${c} - ${p} + i;
            ${n}
          }`,e.kernelShape.length===2){let x=e.kernelShape[e.kernelShape.length-2],C=e.strides[e.strides.length-2],O=e.pads[e.pads.length/2-2],Y=e.pads[e.pads.length-2],q=t[a-2];O+Y!==0?g=`
            for (int j = 0; j < ${x}; j++) {
              x[${a} - 2] = indices[${a} - 2] * ${C} - ${O} + j;
              if (x[${a} - 2] < 0 || x[${a} - 2] >= ${q}) {
                pad+= ${l};
                continue;
              }
          `:g=`
            for (int j = 0; j < ${x}; j++) {
              x[${a} - 2] = indices[${a} - 2] * ${C} - ${O} + j;
            `,w=`
          }
        `}return`
        float process(int indices[${a}]) {
          int x[${a}];
          copyVec(indices, x);

          float value = ${o};
          int pad = 0;
          ${g}
          ${d}
          ${w}
          ${i}
          return value;
        }
      `}else{let l=U$1.size(e.kernelShape),c=U$1.computeStrides(e.kernelShape),p=c.length,s=e.pads.length,u=gb(p),d=io$1(t,"inputDims"),g=io$1(e.pads,"pads"),w=io$1(c,"kernelStrides"),x=io$1(e.strides,"strides"),C=e.pads.reduce((Y,q)=>Y+q),O="";return C?O=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${n}
          }`:O=`
          }
          ${n}
        `,`
        ${u}
        float process(int indices[${a}]) {
          int x[${a}];
          copyVec(indices, x);
          int offset[${p}];
          int pads[${s}];
          int inputDims[${a}];
          int kernelStrides[${p}];
          int strides[${p}];
          ${g}
          ${d}
          ${x}
          ${w}

          float value = ${o};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${l}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${a} - ${p}; j < ${a}; j++) {
              x[j] = indices[j] * strides[j - ${a} + ${p}]
                + offset[j - ${a} + ${p}] - pads[j - 2];
              ${O}
          }
          ${i}

          return value;
        }
      `}},io$1=(t,e)=>{let n="";for(let i=0;i<t.length;i++)n+=`
      ${e}[${i}] = ${t[i]};
    `;return n},gb=t=>`
  void offsetToIndices(int offset, int[${t}] strides, out int[${t}] indices) {
    if (${t} == 0) {
      return;
    }
    for (int i = 0; i < ${t} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${t} - 1] = offset;
  }`}),vr,er,yb,Tb,tc,rc,nc$1,oc$1,ic$1,ac$1,sc$1,uc$1=L(()=>{Ue$1(),pn(),fe$1(),ae(),vr=(t,e,n,i,o)=>{Tb(e);let a={name:i,inputNames:["A"],inputTypes:[0]};return[t.run({...a,cacheHint:n.cacheKey,get:()=>yb(t,e,n,i,o,a)},e)]},er=t=>{let e=t.attributes.getInts("axes",[]),n=t.attributes.getInt("keepdims",1)===1;return Q({axes:e,keepDims:n})},yb=(t,e,n,i,o,a)=>{let l=[],c=e[0].dims.length||1,p=[],s=U$1.normalizeAxes(n.axes,e[0].dims.length),u=o(e,s),d=u[1];for(let w=0;w<e[0].dims.length;w++)s.indexOf(w)>=0||s.length===0?(n.keepDims&&l.push(1),d=`
          for(int j${w} = 0; j${w} < ${e[0].dims[w]}; j${w}++) {
            inputIdx[${w}] = j${w};
            ${d}
          }`):(p.push(`inputIdx[${w}] = outputIdx[${l.length}];`),l.push(e[0].dims[w]));let g=`
      float process(int outputIdx[${l.length||1}]) {
        float value;                 // final result
        int inputIdx[${c}];      // addressing input data
        ${p.join(`
`)}
        ${u[0]}       // init ops for reduce max/min
        ${d}
        ${u[2]}       // final computation for reduce mean
        return value;
      }`;return{...a,output:{dims:l,type:e[0].type,textureType:0},shaderSource:g}},Tb=t=>{if(!t||t.length!==1)throw new Error("Reduce op requires 1 input.");if(Qt.indexOf(t[0].type)===-1)throw new Error("Invalid input type.")},tc=(t,e,n)=>vr(t,e,n,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),rc=(t,e,n)=>vr(t,e,n,"ReduceMean",(i,o)=>{let a=1;for(let l=0;l<i[0].dims.length;l++)(o.indexOf(l)>=0||o.length===0)&&(a*=i[0].dims[l]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${a}.;`]}),nc$1=(t,e,n)=>vr(t,e,n,"ReduceMax",(i,o)=>{let a=[];for(let l=0;l<i[0].dims.length;l++)(o.indexOf(l)>=0||o.length===0)&&a.push(`inputIdx[${l}] = 0;`);return[`${a.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),oc$1=(t,e,n)=>vr(t,e,n,"ReduceMin",(i,o)=>{let a=[];for(let l=0;l<i[0].dims.length;l++)(o.indexOf(l)>=0||o.length===0)&&a.push(`inputIdx[${l}] = 0;`);return[`${a.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),ic$1=(t,e,n)=>vr(t,e,n,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),ac$1=(t,e,n)=>vr(t,e,n,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),sc$1=(t,e,n)=>vr(t,e,n,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),lc$1,fc$1=L(()=>{fe$1(),lc$1=(t,e)=>{let n=U$1.calculateReshapedDims(e[0].dims,e[1].integerData);return t.session.pack?[t.reshapePacked(e[0],n)]:[t.reshapeUnpacked(e[0],n)]}}),cc$1,ki,pc$1,dc$1,dn,xb,Bi$1,so$1,Ni=L(()=>{Ue$1(),we$1(),ae(),cc$1={name:"Upsample",inputNames:["X"],inputTypes:[0]},ki=(t,e,n)=>(Bi$1(e,n),[t.run({...cc$1,cacheHint:n.cacheKey,get:()=>xb(t,e,n)},e)]),pc$1=t=>dn(t,7),dc$1=t=>dn(t,9),dn=(t,e)=>{let n=e>=10,i=t.attributes.getString("mode","nearest");if(i!=="nearest"&&i!=="linear"&&(e<11||i!=="cubic"))throw new Error(`unrecognized mode: ${i}`);let o=[];e<9&&(o=t.attributes.getFloats("scales"),so$1(o,i,n));let a=t.attributes.getFloat("extrapolation_value",0),l=e>10?t.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(l)===-1)throw new Error(`coordinate_transform_mode '${l}' is not supported`);let c=l==="tf_crop_and_resize",p=c,s=i==="nearest"&&e>=11?t.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(s)===-1)throw new Error(`nearest_mode '${s}' is not supported`);let u=t.attributes.getFloat("cubic_coeff_a",-.75),d=t.attributes.getInt("exclude_outside",0)!==0;if(d&&i!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let g=e<11?!0:i==="nearest"&&l==="asymmetric"&&s==="floor",w=0,x=0,C=0;return e>10?t.inputs.length>2?(w=1,x=2,C=3):(x=1,C=2):e===9&&(x=1),Q({opset:e,isResize:n,mode:i,scales:o,extrapolationValue:a,coordinateTransformMode:l,useExtrapolation:p,needRoiInput:c,nearestMode:s,cubicCoefficientA:u,excludeOutside:d,useNearest2xOptimization:g,roiInputIdx:w,scalesInputIdx:x,sizesInputIdx:C})},xb=(t,e,n)=>{let i=H(t.session.backend.glContext.version),[o,a]=t.calculateTextureWidthAndHeight(e[0].dims,0),l=e[0].dims.map((C,O)=>Math.floor(C*n.scales[O])),[c,p]=t.calculateTextureWidthAndHeight(l,0),s=l.length,u=new Array(s),d=new Array(s),g=`
      int output_pitches[${s}];
      int input_pitches[${s}];
      `;for(let C=s-1;C>=0;C--)u[C]=C===s-1?1:u[C+1]*l[C+1],d[C]=C===s-1?1:d[C+1]*e[0].dims[C+1],g+=`
        output_pitches[${C}] = ${u[C]};
        input_pitches[${C}] = ${d[C]};
        `;let w=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${o}, ${a});
        float value = getColorAsFloat(${i.texture2D}(X, coords));
        return value;
      }
      `,x=n.mode==="nearest"?`
    ${w}
    float process(int indices[${s}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${c}, ${p});

      ${g}

      int d, m;
      for (int dim = 0; dim < ${s}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:s===4?`
    ${w}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${c}, ${p});

      ${g}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${e[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${w}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${c}, ${p});

      ${g}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${e[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return{...cc$1,output:{dims:l,type:e[0].type,textureType:0},shaderSource:x,variables:[{name:"scales",type:"int",arrayLength:n.scales.length,data:n.scales.map(C=>Math.ceil(C))}]}},Bi$1=(t,e)=>{if(!t||e.opset<9&&t.length!==1||e.opset>=9&&e.opset<11&&t.length!==2||e.opset>=11&&t.length<2)throw new Error("invalid inputs.");if(e.scales.length>0&&t[0].dims.length!==e.scales.length)throw new Error("Invalid input shape.");if(t[0].type==="string")throw new Error("Invalid input tensor types.")},so$1=(t,e,n)=>{if(n){for(let i of t)if(i<=0)throw new Error("Scale value should be greater than 0.")}else for(let i of t)if(i<1)throw new Error("Scale value should be greater than or equal to 1.");if((e==="linear"||e==="cubic")&&t.length!==2&&(t.length!==4||t[0]!==1||t[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${n?"Resize":"Upsample"} opeartor.`)}}),Ri$1,Mi$1,hc,mc$1,wb,vb,_b,Ob,bc$1=L(()=>{we$1(),ae(),Bt$1(),Tr(),Ni(),Ri$1={name:"Resize",inputNames:["A"],inputTypes:[2]},Mi$1=(t,e,n)=>(Bi$1(e,n),[t.run({...Ri$1,cacheHint:n.cacheKey,get:()=>wb(t,e,n)},e)]),hc=t=>dn(t,10),mc$1=t=>dn(t,11),wb=(t,e,n)=>{let i=H(t.session.backend.glContext.version),[o,a]=vb(e,n);if(o.every(q=>q===1)&&n.coordinateTransformMode!=="tf_crop_and_resize")return{...Ri$1,output:{dims:a,type:e[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${i.texture2D}(X, TexCoords);
                    ${i.output} = v;
                }`};let l=a.length;if(l<2)throw new Error(`output dimension should be at least 2, but got ${l}`);let c=a[l-2],p=a[l-1],s=e[0].dims;if(l!==s.length)throw new Error(`output dimension should match input ${s.length}, but got ${l}`);let u=s[l-2],d=s[l-1],g=o[l-2],w=o[l-1],x="";if(n.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${n.mode}'`);switch(n.coordinateTransformMode){case"asymmetric":x=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":x=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":x=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${p}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${c}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${p}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${c}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":x=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${p}.0 - 1.0, ${c}.0 - 1.0, ${p}.0 - 1.0,
                            ${c}.0 - 1.0);
                        vec4 original = vec4(${d}.0 - 1.0, ${u}.0 - 1.0, ${d}.0 - 1.0,
                            ${u}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${n.coordinateTransformMode}'`)}let C=Qe(l),O=Nt(),Y=`
            const vec2 inputWH = vec2(${u}.0, ${d}.0);
            const vec4 scaleWHWH = vec4(float(${g}), float(${w}), float(${g}), float(${w}));
            ${O}
            ${x}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${C} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${c-1};
                bool hasNextCol = rc.z < ${p-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${i.output} = vec4(newValue);
            }
        `;return{...Ri$1,output:{dims:a,type:e[0].type,textureType:2},hasMain:!0,shaderSource:Y}},vb=(t,e)=>{let n=t[0].dims,i=e.scales,o;if(i.length===0){let l=t[e.scalesInputIdx];if(l&&l.size!==0){if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");i=_b(l,e.mode,e.isResize)}else{let c=t[e.sizesInputIdx];if(!c||c.size===0)throw new Error("Either scales or sizes MUST be provided as input.");o=Array.from(c.integerData),i=Ob(o,n,e.mode,e.isResize)}}else if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let a=o||n.map((l,c)=>Math.floor(l*i[c]));return[i,a]},_b=(t,e,n)=>{let i=Array.from(t.floatData);return so$1(i,e,n),i},Ob=(t,e,n,i)=>{let o=e.length,a=new Array(o);for(let l=0,c=o;l<c;l++)if(e[l]===0){if(t[l]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");a[l]=1}else a[l]=t[l]/e[l];return so$1(a,n,i),a}}),gc$1,Ib,yc$1=L(()=>{yr(),gc$1=(t,e)=>(Ib(e),[new $e([e[0].dims.length],"int32",void 0,void 0,new Int32Array(e[0].dims))]),Ib=t=>{if(!t||t.length!==1)throw new Error("Shape requires 1 input.")}}),Gi$1,Tc$1,xc$1,wc$1,Sb,vc$1,Ab,Pb,_c$1=L(()=>{Ue$1(),pn(),fe$1(),ae(),Gi$1={name:"Slice",inputNames:["A"],inputTypes:[0]},Tc$1=(t,e,n)=>(Sb(e),[t.run({...Gi$1,cacheHint:n.cacheKey,get:()=>wc$1(t,e[0],n)},e)]),xc$1=t=>{let e=t.attributes.getInts("starts"),n=t.attributes.getInts("ends"),i=t.attributes.getInts("axes",[]);return Q({starts:e,ends:n,axes:i})},wc$1=(t,e,n)=>{let i=n.axes.length===0?e.dims.slice(0).map((u,d)=>d):n.axes,o=U$1.normalizeAxes(i,e.dims.length),a=n.starts.map((u,d)=>u>e.dims[o[d]]-1?e.dims[o[d]]:U$1.normalizeAxis(u,e.dims[o[d]])),l=n.ends.map((u,d)=>u>e.dims[o[d]]-1?e.dims[o[d]]:U$1.normalizeAxis(u,e.dims[o[d]])),c=e.dims.slice(),p=[];for(let u=0;u<o.length;u++)c[o[u]]=l[u]-a[u],a[u]>0&&p.push(`outputIdx[${o[u]}] += ${a[u]};`);let s=`
      float process(int outputIdx[${c.length}]) {
        ${p.join(`
      `)}
        return _A(outputIdx);
      }`;return{...Gi$1,output:{dims:c,type:e.type,textureType:0},shaderSource:s}},Sb=t=>{if(!t||t.length!==1)throw new Error("Slice requires 1 input.");if(Qt.indexOf(t[0].type)===-1)throw new Error("Invalid input type.")},vc$1=(t,e)=>{Pb(e);let n=Ab(t,e);return[t.run({...Gi$1,cacheHint:n.cacheKey,get:()=>wc$1(t,e[0],n)},[e[0]])]},Ab=(t,e)=>{if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some(l=>l!==1))throw new Error("currently non-1 steps is not supported for Slice");let n=Array.from(e[1].integerData),i=Array.from(e[2].integerData),o=e.length>=4?Array.from(e[3].integerData):[],a=`${o};${n};${i}`;return{starts:n,ends:i,axes:o,cacheKey:a}},Pb=t=>{if(!t||t.length<3||t.length>5)throw new Error("Invalid input number.");if(t[1].type!=="int32"||t[1].dims.length!==1)throw new Error("Invalid input type.");if(t[2].type!=="int32"||t[2].dims.length!==1)throw new Error("Invalid input type.");if(t.length>=4&&(t[3].type!=="int32"||t[3].dims.length!==1))throw new Error("Invalid input type.");if(t.length>=5&&(t[4].type!=="int32"||t[4].dims.length!==1))throw new Error("Invalid input type.")}}),Oc$1,Ic$1,Sc$1,Ac$1,Pc$1,Ec$1,Dc$1,Lc$1,Eb,Db,Lb,Cc$1,Fc$1=L(()=>{Ue$1(),fe$1(),we$1(),ae(),oo$1(),Oc$1={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Ic$1={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Sc$1={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Ac$1=(t,e,n)=>{Cc$1(e);let i=e[0].dims.slice(),o=U$1.normalizeAxis(n.axis,i.length),a=U$1.sizeToDimension(i,o),l=U$1.sizeFromDimension(i,o);return Lc$1(t,e,n,a,l)},Pc$1=t=>Q({axis:t.attributes.getInt("axis",1)}),Ec$1=t=>Q({axis:t.attributes.getInt("axis",-1)}),Dc$1=(t,e,n)=>{Cc$1(e);let i=e[0].dims.slice(),o=U$1.normalizeAxis(n.axis,i.length),a=i.length,l=o!==a-1,c=[],p=[],s=[],u;l&&(p=Array.from({length:a}).map((x,C)=>C),p[o]=a-1,p[a-1]=o,p.map(x=>c.push(i[x])),u=Q({perm:p}),s=wr(t,e,u));let d=l?U$1.sizeToDimension(c,a-1):U$1.sizeToDimension(i,a-1),g=l?U$1.sizeFromDimension(c,a-1):U$1.sizeFromDimension(i,a-1),w=Lc$1(t,l?s:e,n,d,g);return l?wr(t,w,u):w},Lc$1=(t,e,n,i,o)=>{let a=Eb(t,e[0],i,o,[i]),l=t.run({...Oc$1,cacheHint:n.cacheKey,get:()=>a},e),c=Db(t,e[0],i,o,a.output.dims,[i]),p=t.run({...Ic$1,cacheHint:n.cacheKey,get:()=>c},[e[0],l]),s=Lb(t,e[0],i,o,a.output.dims,c.output.dims);return[t.run({...Sc$1,cacheHint:n.cacheKey,get:()=>s},[e[0],l,p])]},Eb=(t,e,n,i,o)=>{let[a,l]=t.calculateTextureWidthAndHeight(e.dims,0),c=o.length;if(n<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(o.length!==1)throw new Error("Dimensionality of the output should be 1");if(o[0]!==n)throw new Error("Shape of the output should be equal to logical row count");let p=H(t.session.backend.glContext.version),s=`
      float process(int[${c}] indices) {
        int logical_row_start_offset = indices[0] * ${i};

        float max = getColorAsFloat(${p.texture2D}(A, offsetToCoords(logical_row_start_offset, ${a},
        ${l} )));
        for(int i=1; i<${i}; ++i)
        {
          float current = getColorAsFloat(${p.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${a}, ${l})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return{...Oc$1,output:{dims:o,type:e.type,textureType:0},shaderSource:s}},Db=(t,e,n,i,o,a)=>{let[l,c]=t.calculateTextureWidthAndHeight(e.dims,0),p=a.length;if(n<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(a.length!==1)throw new Error("Dimensionality of the output should be 1");if(a[0]!==n)throw new Error("Shape of the output should be equal to logical row count");if(o.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(o[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");let s=H(t.session.backend.glContext.version),u=`
      float process(int[${p}] indices) {
        int logical_row_start_offset = indices[0] * ${i};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${i}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${s.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${l}, ${c}))) - max);
        }

        return norm_factor;
      }`;return{...Ic$1,output:{dims:a,type:e.type,textureType:0},shaderSource:u}},Lb=(t,e,n,i,o,a)=>{let[l,c]=t.calculateTextureWidthAndHeight(e.dims,0),p=e.dims.length;if(n<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(o.length!==1||a.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(o[0]!==n||a[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");let s=`
      float process(int[${p}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${l}, ${c});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${i};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{...Sc$1,output:{dims:e.dims,type:e.type,textureType:0},shaderSource:s}},Cc$1=t=>{if(!t||t.length!==1)throw new Error("Softmax requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type")}}),$c$1,kc$1,Bc$1,Cb,Fb,$b,Nc$1=L(()=>{Ue$1(),fe$1(),ae(),$c$1={name:"Split",inputNames:["A"],inputTypes:[0]},kc$1=(t,e,n)=>{$b(e);let i=U$1.normalizeAxis(n.axis,e[0].dims.length),o=Cb(t,e,i,n),a=[];for(let l=0;l<o;++l)a.push(t.run({...$c$1,cacheHint:`${n.cacheKey};${l}`,get:()=>Fb(t,e[0],n,i,l)},e));return a},Bc$1=t=>{let e=t.attributes.getInt("axis",0),n=t.attributes.getInts("split",[]),i=t.outputs.length;return Q({axis:e,split:n,numOutputs:i})},Cb=(t,e,n,i)=>{let[,o]=an$1.splitShape(e[0].dims,n,i.split,i.numOutputs);return o.length},Fb=(t,e,n,i,o)=>{let[a,l]=an$1.splitShape(e.dims,i,n.split,n.numOutputs),c=l[o],p=a[o],s=`
      float process(int indices[${p.length}]) {
        indices[${i}] += ${c};
        return _A(indices);
      }
    `;return{...$c$1,cacheHint:`${n.cacheKey}:${o}`,output:{dims:p,type:e.type,textureType:0},shaderSource:s}},$b=t=>{if(!t||t.length!==1)throw new Error("Split requires one input.");if(t[0].type!=="int8"&&t[0].type!=="uint8"&&t[0].type!=="int16"&&t[0].type!=="uint16"&&t[0].type!=="int32"&&t[0].type!=="uint32"&&t[0].type!=="float32"&&t[0].type!=="float64"&&t[0].type!=="bool")throw new Error("Invalid input type.")}}),Ui$1,Rc$1,Mc$1,kb,Bb,Gc$1=L(()=>{fe$1(),Ui$1=(t,e,n)=>{kb(e);let i=U$1.squeezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],i)]},Rc$1=(t,e)=>(Bb(e),Ui$1(t,[e[0]],Array.from(e[1].integerData))),Mc$1=t=>t.attributes.getInts("axes"),kb=t=>{if(!t||t.length!==1)throw new Error("Squeeze requires 1 input.");if(t[0].type==="string")throw new Error("invalid input tensor types.")},Bb=t=>{if(!t||t.length!==2)throw new Error("Squeeze requires 2 inputs.");if(t[1].type!=="int32")throw new Error("Invalid input type.")}}),Uc$1,Nb,Rb,zc$1=L(()=>{we$1(),ae(),Uc$1=(t,e)=>{Rb(e);let n={name:"Sum",inputNames:e.map((i,o)=>`X${o}`),inputTypes:new Array(e.length).fill(0)};return[t.run({...n,get:()=>Nb(t,e,n)},e)]},Nb=(t,e,n)=>{let i=H(t.session.backend.glContext.version),o=e[0].dims.slice(),a=`
      void main() {
        vec4 result = ${e.map((l,c)=>`${i.texture2D}(X${c},TexCoords)`).join(" + ")};
        ${i.output} = result;
      }
    `;return{...n,output:{dims:o,type:e[0].type,textureType:0},hasMain:!0,shaderSource:a}},Rb=t=>{if(!t||t.length===0)throw new Error("Sum requires inputs.");let e=t[0].dims.length;for(let n=1;n<t.length;n++){if(e!==t[n].dims.length)throw new Error("Input shapes are mismatched.");for(let i=0;i<e;i++)if(t[0].dims[i]!==t[n].dims[i])throw new Error("Input shapes are not matched.")}if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.");for(let n=1;n<t.length;n++)if(t[0].type!==t[n].type)throw new Error("Input types are not matched.")}}),Vc$1,Mb,Gb,Wc$1=L(()=>{pn(),ae(),Vc$1=(t,e)=>{Gb(e);let n={name:"Tile",inputNames:["A"],inputTypes:[0]};return[t.run({...n,get:()=>Mb(t,e,n)},e)]},Mb=(t,e,n)=>{let i=e[0].dims.slice(),o=new Array(i.length),a=[];for(let p=0;p<i.length;p++)o[p]=i[p]*e[1].numberData[p],a.push(`inputIdx[${p}] = int(mod(float(outputIdx[${p}]), ${i[p]}.));`);let l=o.length,c=`
      float process(int outputIdx[${l}]) {
        int inputIdx[${l}];
        ${a.join(`
`)}
        return _A(inputIdx);
      }
    `;return{...n,output:{dims:o,type:e[0].type,textureType:0},shaderSource:c}},Gb=t=>{if(!t||t.length!==2)throw new Error("Tile requires 2 input.");if(t[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(t[1].dims[0]!==t[0].dims.length)throw new Error("Invalid input shape.");if(Qt.indexOf(t[0].type)===-1)throw new Error("Invalid input type.");if(t[1].type!=="int32"&&t[1].type!=="int16")throw new Error("Invalid repeat type.")}}),zi$1,Hc$1,qc$1,Ub,zb,jc$1=L(()=>{fe$1(),zi$1=(t,e,n)=>{Ub(e);let i=U$1.unsqueezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],i)]},Hc$1=(t,e)=>(zb(e),zi$1(t,[e[0]],Array.from(e[1].integerData))),qc$1=t=>t.attributes.getInts("axes"),Ub=t=>{if(!t||t.length!==1)throw new Error("Unsqueeze requires 1 input.");if(t[0].type==="string")throw new Error("invalid input tensor types.")},zb=t=>{if(!t||t.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(t[1].type!=="int32")throw new Error("Invalid input type.")}}),Yc$1,Xc$1=L(()=>{ol$1(),gl$1(),xl$1(),Sl$1(),to$2(),ff$1(),bf(),Tf(),vf(),Sf(),Ef(),Ff(),Nf(),ro$1(),Uf(),ec(),uc$1(),fc$1(),bc$1(),yc$1(),_c$1(),Fc$1(),Nc$1(),Gc$1(),zc$1(),Wc$1(),oo$1(),Ii(),jc$1(),Ni(),Yc$1=[["Abs","","6+",Al$1],["Acos","","7+",Pl$1],["Add","","7+",il$1],["And","","7+",al$1],["Asin","","7+",El$1],["Atan","","7+",Dl$1],["AveragePool","","7+",Vf,Wf],["BatchNormalization","","7+",rl$1,nl$1],["Cast","","6+",yl$1,Tl$1],["Ceil","","6+",Fl$1],["Clip","","6-10",_i,Ll$1],["Clip","","11+",Cl$1],["Concat","","4+",_l$1,Il$1],["Conv","","1+",Li$1,Ci],["ConvTranspose","","1+",uf$1,lf$1],["Cos","","7+",$l$1],["Div","","7+",sl$1],["Dropout","","7+",Oi$1],["DepthToSpace","","1+",hf$1,mf$1],["Equal","","7+",ul$1],["Elu","","6+",kl$1,Bl$1],["Exp","","6+",Nl$1],["Flatten","","1+",gf,yf],["Floor","","6+",Rl$1],["FusedConv","com.microsoft","1+",Li$1,Ci],["Gather","","1+",xf,wf],["Gemm","","7-10",Fi$1,Of],["Gemm","","11+",Fi$1,If],["GlobalAveragePool","","1+",qf,jf],["GlobalMaxPool","","1+",Zf],["Greater","","7+",ll$1],["Identity","","1+",Oi$1],["ImageScaler","","1+",Af,Pf],["InstanceNormalization","","6+",Lf,Cf],["LeakyRelu","","6+",Ml$1,Gl$1],["Less","","7+",fl$1],["LRN","","1+",$f,kf],["Log","","6+",Ul$1],["MatMul","","1+",ef$1,tf$1],["MaxPool","","1+",Yf,Xf],["Mul","","7+",cl$1],["Neg","","6+",zl$1],["Not","","1+",Vl$1],["Or","","7+",pl$1],["Pad","","2-10",$i,Rf],["Pad","","11+",Mf,Gf],["Pow","","7+",dl$1],["PRelu","","7+",hl$1],["ReduceLogSum","","1+",ac$1,er],["ReduceMax","","1+",nc$1,er],["ReduceMean","","1+",rc,er],["ReduceMin","","1+",oc$1,er],["ReduceProd","","1+",ic$1,er],["ReduceSum","","1-12",tc,er],["ReduceSumSquare","","1+",sc$1,er],["Relu","","6+",Wl$1],["Reshape","","5+",lc$1],["Resize","","10",Mi$1,hc],["Resize","","11+",Mi$1,mc$1],["Shape","","1+",gc$1],["Sigmoid","","6+",Hl$1],["Sin","","7+",ql$1],["Slice","","10+",vc$1],["Slice","","1-9",Tc$1,xc$1],["Softmax","","1-12",Ac$1,Pc$1],["Softmax","","13+",Dc$1,Ec$1],["Split","","2-12",kc$1,Bc$1],["Sqrt","","6+",jl$1],["Squeeze","","1-12",Ui$1,Mc$1],["Squeeze","","13+",Rc$1],["Sub","","7+",ml$1],["Sum","","6+",Uc$1],["Tan","","7+",Yl$1],["Tanh","","6+",Xl$1],["Tile","","6+",Vc$1],["Transpose","","1+",wr,pf$1],["Upsample","","7-8",ki,pc$1],["Upsample","","9",ki,dc$1],["Unsqueeze","","1-12",zi$1,qc$1],["Unsqueeze","","13+",Hc$1],["Xor","","7+",bl$1]]});function Jc$1(t){let e={},n;for(;(n=Kc$1.exec(t))!==null;){let i=n[3].split(",").map(o=>{let a=o.trim().split(" ");return a&&a.length===2?{type:a[0],name:a[1]}:null}).filter(o=>o!==null);e[n[2]]={params:i,body:n[4]}}for(let i in e){let o=Vb.replace("__FUNC__",i),a=new RegExp(o,"gm");for(;(n=a.exec(t))!==null;){let l=n[1],c=n[2],p=n[3].split(","),s=l?`${l} ${c};`:"",u=e[i].body,d="";e[i].params.forEach((w,x)=>{w&&(d+=`${w.type} ${w.name} = ${p[x]};
`)}),u=`${d}
 ${u}`,u=u.replace("return",`${c} = `);let g=`
      ${s}
      {
        ${u}
      }
      `;t=t.replace(n[0],g)}}return t=t.replace(Kc$1,""),t}var Kc$1,Vb,Zc$1=L(()=>{Kc$1=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,Vb="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function Mr(t,e){let n=[],i=[];for(let o=0;o<t.length;++o)t[o]!==1&&(n.push(t[o]),i.push(o));return{newShape:n,keptDims:i}}function qb(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Qc$1(t){let e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}var uo$1,Vi=L(()=>{lt$1(),fe$1(),uo$1=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,e){let n=this.computeTexture(t,e);return e&&e.isPacked&&(n[0]/=2,n[1]/=2),e&&e.reverseWH?[n[1],n[0]]:n}computeTexture(t,e){let n=e&&e.isPacked;if(t.length===0)return n?[2,2]:[1,1];let i=this.maxTextureSize;if(e&&e.breakAxis!==void 0){let l=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((p,s)=>p*s),c=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((p,s)=>p*s);if(l>i||c>i)ce.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${e.breakAxis}`);else return[l,c]}let o=t.slice(0);n&&(i=i*2,o=o.map((l,c)=>c>=o.length-2?o[c]%2===0?o[c]:o[c]+1:o[c]),o.length===1&&(o=[2,o[0]])),o.length!==2&&(o=Mr(o).newShape);let a=qb(o);return o.length<=1&&a<=i?[1,a]:o.length===2&&o[0]<=i&&o[1]<=i?o:o.length===3&&o[0]*o[1]<=i&&o[2]<=i?[o[0]*o[1],o[2]]:o.length===3&&o[0]<=i&&o[1]*o[2]<=i?[o[0],o[1]*o[2]]:o.length===4&&o[0]*o[1]*o[2]<=i&&o[3]<=i?[o[0]*o[1]*o[2],o[3]]:o.length===4&&o[0]<=i&&o[1]*o[2]*o[3]<=i?[o[0],o[1]*o[2]*o[3]]:n?Qc$1(a/4).map(l=>l*2):Qc$1(a)}}}),lo$1,ep$1=L(()=>{fe$1(),Wt$1(),we$1(),Vi(),Bt$1(),lo$1=class extends dt{constructor(t){super(t)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){let t="offsetToCoords";return{offsetToCoords:new R(`
      vec2 ${t}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let t="coordsToOffset";return{coordsToOffset:new R(`
      int ${t}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let t=this.context.outputTextureLayout;return t.isPacked?this.getPackedOutputSamplingSnippet(t):this.getUnpackedOutputSamplingSnippet(t)}getPackedOutputSamplingSnippet(t){let e=t.unpackedShape,n=[t.width,t.height],i={},o="getOutputCoords";switch(e.length){case 0:i[o]=this.getOutputScalarCoords();break;case 1:i[o]=this.getOutputPacked1DCoords(e,n);break;case 2:i[o]=this.getOutputPacked2DCoords(e,n);break;case 3:i[o]=this.getOutputPacked3DCoords(e,n);break;default:i[o]=this.getOutputPackedNDCoords(e,n)}let a=`
      void setOutput(vec4 val) {
        ${H(this.context.glContext.version).output} = val;
      }
    `,l="floatTextureSetRGBA";return i[l]=new R(a),i}getUnpackedOutputSamplingSnippet(t){let e=t.unpackedShape,n=[t.width,t.height],i={},o="getOutputCoords";switch(e.length){case 0:i[o]=this.getOutputScalarCoords();break;case 1:i[o]=this.getOutputUnpacked1DCoords(e,n);break;case 2:i[o]=this.getOutputUnpacked2DCoords(e,n);break;case 3:i[o]=this.getOutputUnpacked3DCoords(e,n);break;case 4:i[o]=this.getOutputUnpacked4DCoords(e,n);break;case 5:i[o]=this.getOutputUnpacked5DCoords(e,n);break;case 6:i[o]=this.getOutputUnpacked6DCoords(e,n);break;default:throw new Error(`Unsupported output dimensionality: ${e.length}`)}let a=`
        void setOutput(float val) {
          ${H(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,l="floatTextureSetR";return i[l]=new R(a),i}getOutputScalarCoords(){return new R(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(t,e){let n=e,i="";return n[0]===1?(i=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${n[1]}.0);
          }
        `,new R(i)):n[1]===1?(i=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${n[0]}.0);
          }
        `,new R(i)):(i=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${n[0]}, ${n[1]}));
          return 2 * (resTexRC.y * ${n[0]} + resTexRC.x);
        }
      `,new R(i))}getOutputPacked2DCoords(t,e){let n="";if(hr$1.arraysEqual(t,e))return n=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${e[0]}, ${e[1]}));
        }
      `,new R(n);let i=e,o=Math.ceil(t[1]/2);return n=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${i[0]}, ${i[1]}));

          int index = resTexRC.y * ${i[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${o}) * 2;
          int c = 2 * (index / ${o});

          return ivec2(r, c);
        }
      `,new R(n)}getOutputPacked3DCoords(t,e){let n=[e[0],e[1]],i=Math.ceil(t[2]/2),o=i*Math.ceil(t[1]/2),a=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));
          int index = resTexRC.y * ${n[0]} + resTexRC.x;

          int b = index / ${o};
          index -= b * ${o};

          // reverse r and c order for packed texture
          int r = imod(index, ${i}) * 2;
          int c = 2 * (index / ${i});

          return ivec3(b, r, c);
        }
      `;return new R(a)}getOutputPackedNDCoords(t,e){let n=[e[0],e[1]],i=Math.ceil(t[t.length-1]/2),o=i*Math.ceil(t[t.length-2]/2),a=o,l="",c="b, r, c";for(let s=2;s<t.length-1;s++)a*=t[t.length-s-1],l=`
      int b${s} = index / ${a};
      index -= b${s} * ${a};
    `+l,c=`b${s}, `+c;let p=`
      ivec${t.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${n[0]}, ${n[1]}));
        int index = resTexRC.y * ${n[0]} + resTexRC.x;

        ${l}

        int b = index / ${o};
        index -= b * ${o};

        // reverse r and c order for packed texture
        int r = imod(index, ${i}) * 2;
        int c = 2 * (index / ${i});

        return ivec${t.length}(${c});
      }
    `;return new R(p)}getOutputUnpacked1DCoords(t,e){let n=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          return resTexRC.y * ${e[0]} + resTexRC.x;
        }
      `;return new R(n)}getOutputUnpacked2DCoords(t,e){let n=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          int r = index / ${t[1]};
          int c = index - r * ${t[1]};
          return ivec2(r, c);
        }
      `;return new R(n)}getOutputUnpacked3DCoords(t,e){let n="",i=t.length,o=null;i<2&&(o=[]),o=new Array(i-1),o[i-2]=t[i-1];for(let c=i-3;c>=0;--c)o[c]=o[c+1]*t[c+1];let a=["r","c","d"],l=o.map((c,p)=>{let s=`int ${a[p]} = index / ${c}`,u=p===o.length-1?`int ${a[p+1]} = index - ${a[p]} * ${c}`:`index -= ${a[p]} * ${c}`;return`${s}; ${u};`}).join("");return n=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${l}
          return ivec3(r, c, d);
        }
      `,new R(n)}getOutputUnpacked4DCoords(t,e){let n="",i=t.length,o=null;i<2&&(o=[]),o=new Array(i-1),o[i-2]=t[i-1];for(let c=i-3;c>=0;--c)o[c]=o[c+1]*t[c+1];let a=["r","c","d","d2"],l=o.map((c,p)=>{let s=`int ${a[p]} = index / ${c}`,u=p===o.length-1?`int ${a[p+1]} = index - ${a[p]} * ${c}`:`index -= ${a[p]} * ${c}`;return`${s}; ${u};`}).join("");return n=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${l}
          return ivec4(r, c, d, d2);
        }
      `,new R(n)}getOutputUnpacked5DCoords(t,e){let n="",i=t.length,o=null;i<2&&(o=[]),o=new Array(i-1),o[i-2]=t[i-1];for(let c=i-3;c>=0;--c)o[c]=o[c+1]*t[c+1];let a=["r","c","d","d2","d3"],l=o.map((c,p)=>{let s=`int ${a[p]} = index / ${c}`,u=p===o.length-1?`int ${a[p+1]} = index - ${a[p]} * ${c}`:`index -= ${a[p]} * ${c}`;return`${s}; ${u};`}).join("");return n=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${l}
          return ivec5(r, c, d, d2, d3);
        }
      `,new R(n)}getOutputUnpacked6DCoords(t,e){let n="",i=t.length,o=null;i<2&&(o=[]),o=new Array(i-1),o[i-2]=t[i-1];for(let c=i-3;c>=0;--c)o[c]=o[c+1]*t[c+1];let a=["r","c","d","d2","d3","d4"],l=o.map((c,p)=>{let s=`int ${a[p]} = index / ${c}`,u=p===o.length-1?`int ${a[p+1]} = index - ${a[p]} * ${c}`:`index -= ${a[p]} * ${c}`;return`${s}; ${u};`}).join("");return n=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${e[0]}, ${e[1]}));
         int index = resTexRC.y * ${e[0]} + resTexRC.x;
         ${l}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new R(n)}getCommonUtilFuncs(){let t={},e="uvFromFlat";t[e]=new R(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),e="packedUVfrom1D",t[e]=new R(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom2D",t[e]=new R(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom3D",t[e]=new R(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="sampleTexture";let n=H(this.context.glContext.version);return t[e]=new R(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${n.texture2D}(textureSampler, uv).r;
        }`),t}getInputsSamplingSnippets(){let t={},e=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((n,i)=>{let o=this.context.inputTextureLayouts[i],a=Yn$1(n);o.isPacked?t[a]=this.getPackedSamplerFromInput(a,n,o):t[a]=this.getUnpackedSamplerFromInput(a,n,o);let l=Gu$1(n);o.unpackedShape.length<=e.unpackedShape.length&&(o.isPacked?t[l]=this.getPackedSamplerAtOutputCoords(l,o,e,n):t[l]=this.getUnpackedSamplerAtOutputCoords(l,o,e,n))}),t}getPackedSamplerAtOutputCoords(t,e,n,i){let o=e.unpackedShape,a=n.unpackedShape,l=Yn$1(i),c=o.length,p=a.length,s=Ze$1.getBroadcastDims(o,a),u=Qe(p),d=p-c,g,w=Dt$1();c===0?g="":p<2&&s.length>=1?g="coords = 0;":g=s.map(pe=>`coords.${w[pe+d]} = 0;`).join(`
`);let x="";p<2&&c>0?x="coords":x=o.map((pe,se)=>`coords.${w[se+d]}`).join(", ");let C="return outputValue;",O=U$1.size(o)===1,Y=U$1.size(a)===1;if(c===1&&!O&&!Y)C=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(O&&!Y)p===1?C=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:C=`
          return vec4(outputValue.x);
        `;else if(s.length){let pe=c-2,se=c-1;s.indexOf(pe)>-1&&s.indexOf(se)>-1?C="return vec4(outputValue.x);":s.indexOf(pe)>-1?C="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(se)>-1&&(C="return vec4(outputValue.xx, outputValue.zz);")}let q=`
        int lastDim = coords.${w[p-1]};
        coords.${w[p-1]} = coords.${w[p-2]};
        coords.${w[p-2]} = lastDim;
      `,ue=`
      vec4 ${t}() {
        ${u} coords = getOutputCoords();
        ${q}
        ${g}
        vec4 outputValue = ${l}(${x});
        ${C}
      }
    `;return new R(ue,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(t,e,n,i){let o=[n.width,n.height],a=[e.width,e.height],l=e.unpackedShape.length,c=n.unpackedShape.length,p=e.unpackedShape,s=n.unpackedShape,u=Yn$1(i);if(l===c&&hr$1.arraysEqual(a,o)){let q=`
          float ${t}() {
            return sampleTexture(${i}, TexCoords);
          }
        `;return new R(q,["coordinates.sampleTexture"])}let d=Qe(c),g=Ze$1.getBroadcastDims(p,s),w=c-l,x,C=Dt$1();l===0?x="":c<2&&g.length>=1?x="coords = 0;":x=g.map(q=>`coords.${C[q+w]} = 0;`).join(`
`);let O="";c<2&&l>0?O="coords":O=e.unpackedShape.map((q,ue)=>`coords.${C[ue+w]}`).join(", ");let Y=`
        float ${t}() {
          ${d} coords = getOutputCoords();
          ${x}
          return ${u}(${O});
        }
      `;return new R(Y,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(t,e,n){switch(n.unpackedShape.length){case 0:return this.getPackedSamplerScalar(t,e);case 1:return this.getPackedSampler1D(t,e,n);case 2:return this.getPackedSampler2D(t,e,n);case 3:return this.getPackedSampler3D(t,e,n);default:return this.getPackedSamplerND(t,e,n)}}getUnpackedSamplerFromInput(t,e,n){let i=n.unpackedShape;switch(i.length){case 0:return this.getUnpackedSamplerScalar(t,e,n);case 1:return this.getUnpackedSampler1D(t,e,n);case 2:return this.getUnpackedSampler2D(t,e,n);case 3:return this.getUnpackedSampler3D(t,e,n);case 4:return this.getUnpackedSampler4D(t,e,n);case 5:return this.getUnpackedSampler5D(t,e,n);case 6:return this.getUnpackedSampler6D(t,e,n);default:throw new Error(`Unsupported dimension ${i.length}-D`)}}getPackedSamplerScalar(t,e){let n=H(this.context.glContext.version),i=`
          vec4 ${t}() {
            return ${n.texture2D}(${e}, halfCR);
          }
        `;return new R(i)}getPackedSampler1D(t,e,n){let i=[n.width,n.height],o=[i[1],i[0]],a=H(this.context.glContext.version),l=`vec4 ${t}(int index) {
      vec2 uv = packedUVfrom1D(
      ${o[0]}, ${o[1]}, index);
      return ${a.texture2D}(${e}, uv);
    }`;return new R(l,["coordinates.packedUVfrom1D"])}getPackedSampler2D(t,e,n){let i=n.unpackedShape,o=[n.width,n.height],a=H(this.context.glContext.version),l=o[0],c=o[1];if(o!=null&&hr$1.arraysEqual(i,o)){let d=`vec4 ${t}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${c}.0, ${l}.0);
        return ${a.texture2D}(${e}, uv);
      }`;return new R(d)}let p=o,s=Math.ceil(i[1]/2),u=`vec4 ${t}(int row, int col) {
      vec2 uv = packedUVfrom2D(${p[1]}, ${p[0]}, ${s}, row, col);
      return ${a.texture2D}(${e}, uv);
    }`;return new R(u,["coordinates.packedUVfrom2D"])}getPackedSampler3D(t,e,n){let i=n.unpackedShape,o=[n.width,n.height],a=[o[0],o[1]],l=H(this.context.glContext.version);if(i[0]===1){let g=i.slice(1),w=[1,2],x=$r(i,g),C=["b","row","col"],O=JSON.parse(JSON.stringify(n));O.unpackedShape=x;let Y=this.getPackedSamplerFromInput(t,e,O),q=`${Y.routineBody}
      vec4 ${t}(int b, int row, int col) {
        return ${t}(${kr$1(C,w)});
      } `;return new R(q,Y.dependencies)}let c=a[0],p=a[1],s=Math.ceil(i[2]/2),u=s*Math.ceil(i[1]/2),d=`vec4 ${t}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${p}, ${c}, ${u}, ${s}, b, row, col);
      return ${l.texture2D}(${e}, uv);}`;return new R(d,["coordinates.packedUVfrom3D"])}getPackedSamplerND(t,e,n){let i=n.unpackedShape,o=i.length,a=[n.width,n.height],l=H(this.context.glContext.version),c=[a[0],a[1]],p=c[1],s=c[0],u=Math.ceil(i[o-1]/2),d=u*Math.ceil(i[o-2]/2),g="int b, int row, int col",w=`b * ${d} + (row / 2) * ${u} + (col / 2)`;for(let C=2;C<o-1;C++)g=`int b${C}, `+g,d*=i[o-C-1],w=`b${C} * ${d} + `+w;let x=`vec4 ${t}(${g}) {
      int index = ${w};
      int texR = index / ${s};
      int texC = index - texR * ${s};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}, ${p});
      return ${l.texture2D}(${e}, uv);
    }`;return new R(x)}getUnpackedSamplerScalar(t,e,n){let[i,o]=[n.width,n.height];if(i===1&&o===1){let l=`
          float ${t}() {
            return sampleTexture(${e}, halfCR);
          }
        `;return new R(l,["coordinates.sampleTexture"])}let a=`
        float ${t}() {
          int offset_${e} = coordsToOffset(TexCoords, ${i}, ${o});
          vec2 uv = uvFromFlat(${i}, ${o}, offset_${e});
          return sampleTexture(${e}, uv);
        }
      `;return new R(a,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(t,e,n){let i=n.width,o=n.height;if(o===1&&i===1){let l=`
        float ${t}(int index) {
          return sampleTexture(${e}, halfCR);
        }
      `;return new R(l,["coordinates.sampleTexture"])}if(o===1){let l=`
          float ${t}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${i}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new R(l,["coordinates.sampleTexture"])}if(i===1){let l=`
          float ${t}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${o}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new R(l,["coordinates.sampleTexture"])}let a=`
        float ${t}(int index) {
          vec2 uv = uvFromFlat(${i}, ${o}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new R(a,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(t,e,n){let i=n.unpackedShape,o=[n.height,n.width];if(o!=null&&hr$1.arraysEqual(i,o)){let d=o[1],g=o[0],w=`
          float ${t}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${d}.0, ${g}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new R(w,["coordinates.sampleTexture"])}let{newShape:a,keptDims:l}=Mr(i),c=a;if(c.length<i.length){let d=$r(i,c),g=JSON.parse(JSON.stringify(n));g.unpackedShape=d;let w=["col","row"],x=`
          ${this.getUnpackedSamplerFromInput(t,e,g).routineBody}
          float ${t}(int row, int col) {
            return ${t}(${kr$1(w,l)});
          }
        `;return new R(x,["coordinates.sampleTexture"])}let p=o[1],s=o[0];if(s===1){let d=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${p}, ${s});
            float index = dot(vec3(row, col, offset_${e}), vec3(${i[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${p}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new R(d,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(p===1){let d=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${p}, ${s});
            float index = dot(vec3(row, col, offset_${e}), vec3(${i[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${s}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new R(d,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let u=`
        float ${t}(int row, int col) {
          int index = col * ${i[1]} + row;
          vec2 uv = uvFromFlat(${p}, ${s}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new R(u,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(t,e,n){let i=n.unpackedShape,o=i[1]*i[2],a=i[2],{newShape:l,keptDims:c}=Mr(i),p=l;if(p.length<i.length){let g=$r(i,p),w=["batch","col","row"],x=JSON.parse(JSON.stringify(n));x.unpackedShape=g;let C=this.getUnpackedSamplerFromInput(t,e,x),O=c.reverse(),Y=`
          ${C.routineBody}
          float ${t}(int batch, int row, int col) {
            return ${t}(${kr$1(w,O)});
          }
        `;return new R(Y,C.dependencies)}let s=n.width,u=n.height,d=`
          float ${t}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${o} + col * ${a} + row;
            vec2 uv = uvFromFlat(${s}, ${u}, index);
            return sampleTexture(${e}, uv);
          }
      `;return new R(d,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(t,e,n){let i=n.unpackedShape,o=i[3],a=i[2]*o,l=i[1]*a,c=n.width,p=n.height,s=`
        float ${t}(int row, int col, int depth, int depth2) {
          int index = row * ${l} + col * ${a} +
              depth2 * ${o} + depth;
          vec2 uv = uvFromFlat(${c}, ${p}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new R(s,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(t,e,n){let i=n.unpackedShape,o=i[4],a=i[3]*o,l=i[2]*a,c=i[1]*l,{newShape:p,keptDims:s}=Mr(i);if(p.length<i.length){let w=$r(i,p),x=["row","col","depth","depth2","depth3"],C=JSON.parse(JSON.stringify(n));C.unpackedShape=w;let O=`
          ${this.getUnpackedSamplerFromInput(t,e,C).routineBody}
          float ${t}(int row, int col, int depth, int depth2, int depth3) {
            return ${t}(${kr$1(x,s)});
          }
        `;return new R(O,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let u=n.width,d=n.height,g=`
        float ${t}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${c} + col * ${l} + depth * ${a} +
          depth3 * ${o} + depth2;
          vec2 uv = uvFromFlat(${u}, ${d}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new R(g,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(t,e,n){let i=n.unpackedShape,o=i[5],a=i[4]*o,l=i[3]*a,c=i[2]*l,p=i[1]*c,{newShape:s,keptDims:u}=Mr(i);if(s.length<i.length){let x=$r(i,s),C=["row","col","depth","depth2","depth3","depth4"],O=JSON.parse(JSON.stringify(n));O.unpackedShape=x;let Y=`
            ${this.getUnpackedSamplerFromInput(t,e,O).routineBody}
            float ${t}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${t}(${kr$1(C,u)});
            }
          `;return new R(Y,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let d=n.width,g=n.height,w=`
          float ${t}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${p} + col * ${c} + depth * ${l} +
            depth2 * ${a} + depth3 * ${o} + depth4;
            vec2 uv = uvFromFlat(${d}, ${g}, index);
            return sampleTexture(${e}, uv);
          }
        `;return new R(w,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let t=this.context.outputTextureLayout,e=t.shape.length,n=t.strides,i=t.width,o=t.height,a=[];for(let c=0;c<e-1;++c)a.push(`
        c[${c}] = offset / ${n[c]};`),a.push(`
        offset -= c[${c}] * ${n[c]};`);a.push(`
        c[${e-1}] = offset;`);let l=`
      void toVec(vec2 texCoords, out int c[${e}]) {
        int offset = coordsToOffset(texCoords, ${i}, ${o});
        ${a.join("")}
      }
      void toVec(int offset, out int c[${e}]) {
        ${a.join("")}
      }
    `;return{toVec:new R(l,["coordinates.coordsToOffset"])}}valueFrom(){let t={};return this.context.programInfo.inputNames.forEach((e,n)=>{let i=this.context.inputTextureLayouts[n],o=(i.unpackedShape.length>0?i.unpackedShape:i.shape).length,a=`_${e}`;t[a]=new R(this.getValueFromSingle(e,o,i.width,i.height,!1),[`shapeUtils.indicesToOffset${a}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),a=a+"_T",t[a]=new R(this.getValueFromSingle(e,o,i.width,i.height,!0),[`shapeUtils.indicesToOffset${a}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),t}getValueFromSingle(t,e,n,i,o){let a=`_${t}`;o&&(a=a+"_T");let l=H(this.context.glContext.version);return`
        float ${a}(int m[${e}]) {
          int offset = indicesToOffset${a}(m);
          vec2 coords = offsetToCoords(offset, ${n}, ${i});
          float value = getColorAsFloat(${l.texture2D}(${t}, coords));
          return value;
        }
        `}getPackedValueFrom(t,e,n,i,o){let a=`_${t}_Pack`;o&&(a=a+"_T");let l=H(this.context.glContext.version);return`
        vec4 ${a}(int m[${e}]) {
          int offset = indicesToOffset_${t}(m);
          vec2 coords = offsetToCoords(offset, ${n}, ${i});
          return ${l.texture2D}(${t}, coords);
        }
        `}}}),fo$1,tp$1=L(()=>{Wt$1(),fo$1=class H$ extends dt{constructor(e){super(e)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new R(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new R(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let e=H$.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new R(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${e}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let e=H$.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new R(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${e}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let e=new ArrayBuffer(4),n=new Uint32Array(e),i=new Uint8Array(e);if(n[0]=3735928559,i[0]===239)return!0;if(i[0]===222)return!1;throw new Error("unknown endianness")}}}),co$1,rp$1=L(()=>{Wt$1(),we$1(),co$1=class extends dt{constructor(t){super(t)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let t=H(this.context.glContext.version);return{setFragColor:new R(`
        void setFragColor(float value) {
            ${t.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new R(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}),po$1,np$1=L(()=>{Wt$1(),po$1=class eT extends dt{constructor(e){super(e)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let e=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((i,o)=>{let a=this.context.inputTextureLayouts[o].unpackedShape;if(a.length<=e){let l=a.length,c=e-l,p=`bcastIndices_${i}`,s="";for(let d=0;d<l;++d)s+=`
          realIndices[${d}] = int( mod(float(bcastedIndices[${c+d}]), ${a[d]}.0) );
          `;let u=`
        void ${p} (int bcastedIndices[${e}], out int realIndices[${l}]) {
          ${s}
        }
        `;n[p]=new R(u)}}),n}bcastMatmulIndex(){let e=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((i,o)=>{let a=this.context.inputTextureLayouts[o].shape;if(!(a.length<2||a.length>e)){let l=a.length,c=e-l,p=`bcastMatmulIndices_${i}`,s="";for(let d=0;d<l-2;++d)s+=`
          realIndices[${d}] = int( mod(float(bcastedIndices[${c+d}]), ${a[d]}.0) );
          `;let u=`
        void ${p}(int bcastedIndices[${e}], out int realIndices[${l}]) {
          ${s}
          realIndices[${l-1}] = bcastedIndices[${e-1}];
          realIndices[${l-2}] = bcastedIndices[${e-2}];
        }
        `;n[p]=new R(u)}}),n}indicesToOffset(){let e={};return this.context.programInfo.inputNames.forEach((n,i)=>{let o=this.context.inputTextureLayouts[i].shape,a=this.context.inputTextureLayouts[i].strides,l=o.length,c=`indicesToOffset_${n}`;e[c]=new R(eT.indexToOffsetSingle(c,l,a)),c=`indicesToOffset_${n}_T`,e[c]=new R(eT.indexToOffsetSingle(c,l,a.slice().reverse()))}),e}static indexToOffsetSingle(e,n,i){let o="";for(let a=n-1;a>=0;--a)o+=`
        offset += indices[${a}] * ${i[a]};
        `;return`
      int ${e}(int indices[${n}]) {
        int offset = 0;
        ${o}
        return offset;
      }
      `}offsetToIndices(){let e={};return this.context.programInfo.inputNames.forEach((n,i)=>{let o=this.context.inputTextureLayouts[i].shape,a=this.context.inputTextureLayouts[i].strides,l=o.length,c=`offsetToIndices_${n}`;e[c]=new R(eT.offsetToIndicesSingle(c,l,a)),c=`offsetToIndices_${n}_T`,e[c]=new R(eT.offsetToIndicesSingle(c,l,a.slice().reverse()))}),e}static offsetToIndicesSingle(e,n,i){let o=[];for(let a=0;a<n-1;++a)o.push(`
      indices[${a}] = offset / ${i[a]};`),o.push(`
        offset -= indices[${a}] * ${i[a]};`);return o.push(`
      indices[${n-1}] = offset;`),`
      void ${e}(int offset, out int indices[${n}]) {
        ${o.join("")}
      }
      `}incrementIndices(){let e={};return this.context.programInfo.inputNames.forEach((n,i)=>{let o=this.context.inputTextureLayouts[i].shape,a=o.length,l=`incrementIndices_${n}`,c="";for(let s=0;s<a;++s)c+=`
        shape[${s}] = ${o[s]};`;let p=`
        void ${l}(int axis, out int indices[${a}]) {
          int shape[${a}];
          ${c};
          for(int i = ${a} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;e[l]=new R(p)}),e}}}),ho$1,op$1=L(()=>{Wt$1(),ho$1=class extends dt{constructor(t){super(t)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let t=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},n={};for(let i in e){let o=`${i}Vec`,a="";for(let c=0;c<t;++c)a+=`
          dest[${c}] ${e[i]} src[${c}];
          `;let l=`
        void ${o}(int src[${t}], out int dest[${t}]) {
          ${a}
        }
        `;n[o]=new R(l)}return n}copyVec(){let t=this.context.outputTextureLayout.shape.length,e="";for(let i=0;i<t;++i)e+=`
        dest[${i}] = src[${i}];
        `;let n=`
      void copyVec(int src[${t}], out int dest[${t}]) {
        ${e}
      }
      `;return{copyVec:new R(n)}}setVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index =${t} + index;
        if (index == 0)
            m[0] = value;
        `;for(let i=1;i<t-1;++i)e+=`
        else if (index == ${i})
            m[${i}] = value;
            `;e+=`
        else
            m[${t-1}] = value;
        `;let n=`
      void setVecItem(out int m[${t}], int index, int value) {
        ${e}
      }
        `;return{setVecItem:new R(n)}}getVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index = ${t} + index;
        if (index == 0)
            return m[0];
      `;for(let i=1;i<t-1;++i)e+=`
        else if (index == ${i})
            return m[${i}];
      `;e+=`
        else
            return m[${t-1}];
        `;let n=`
      int getVecItem(int m[${t}], int index) {
        ${e}
      }
    `;return{getVecItem:new R(n)}}}}),Wi$1,ip$1=L(()=>{ep$1(),tp$1(),rp$1(),np$1(),op$1(),Wi$1={encoding:fo$1,fragcolor:co$1,vec:ho$1,shapeUtils:po$1,coordinates:lo$1}}),mo$1,ap$1=L(()=>{Wt$1(),Zc$1(),ip$1(),we$1(),mo$1=class{constructor(t,e,n,i){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new Zn$1(t,e,n,i),Object.keys(Wi$1).forEach(a=>{let l=new Wi$1[a](this.context);this.libs[a]=l});let o=this.glslLibRoutineDependencyGraph;for(let a in this.libs){let l=this.libs[a].getFunctions();for(let c in l){let p=a+"."+c,s;o[p]?(s=o[p],s.routineBody=l[c].routineBody):(s=new cn(p,l[c].routineBody),o[p]=s);let u=l[c].dependencies;if(u)for(let d=0;d<u.length;++d)if(o[u[d]])s.addDependency(o[u[d]]);else{let g=new cn(u[d]);o[u[d]]=g,s.addDependency(g)}}}}preprocess(){let t=this.context.programInfo,e=t.shaderSource;return this.context.programInfo.hasMain||(e=`${e}
      ${Mu$1(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),e=Jc$1(e),`${Ru$1(this.context.glContext.version)}
    ${this.getUniforms(t.inputNames,t.variables)}
    ${this.getImports(e)}
    ${e}`}getImports(t){let e=this.selectGlslLibRoutinesToBeIncluded(t);if(e.length===0)return"";let n="";for(let i=0;i<e.length;++i)if(e[i].routineBody)n+=e[i].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${e[i].name}`);return n}selectGlslLibRoutinesToBeIncluded(t){let e=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(n=>{let i=n.split(".")[1];t.indexOf(i)!==-1&&e.push(this.glslLibRoutineDependencyGraph[n])}),Qn$1.returnOrderedNodes(e)}getUniforms(t,e){let n=[];if(t)for(let i of t)n.push(`uniform sampler2D ${i};`);if(e)for(let i of e)n.push(`uniform ${i.type} ${i.name}${i.arrayLength?`[${i.arrayLength}]`:""};`);return n.join(`
`)}}}),bo$1,sp$1=L(()=>{Ot$1(),lt$1(),ap$1(),we$1(),bo$1=class{constructor(t,e,n){this.profiler=t,this.glContext=e,this.textureLayoutStrategy=n,this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,e){this.repo.set(t,e)}run(t,e,n){this.profiler.event("op",`ProgramManager.run ${t.programInfo.name??"unknown kernel"}`,()=>{let i=this.glContext.gl,o=t.program;i.useProgram(o);try{this.bindOutput(n),this.attributesBound||this.bindAttributes(t.attribLocations),this.bindUniforms(t.uniformLocations,t.programInfo.variables??[],e)}catch(a){throw ce.error("ProgramManager",t.programInfo.shaderSource),a}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(t=>this.glContext.deleteProgram(t.program))}build(t,e,n){return this.profiler.event("backend","ProgramManager.build",()=>{let i=new mo$1(this.glContext,t,e,n),o=i.preprocess(),a=this.compile(o);return{programInfo:t,program:a,uniformLocations:this.getUniformLocations(a,i.context.programInfo.inputNames,i.context.programInfo.variables),attribLocations:this.getAttribLocations(a)}})}compile(t){if(!this.vertexShader){ce.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let i=Nu$1(this.glContext.version);this.vertexShader=this.glContext.compileShader(i,this.glContext.gl.VERTEX_SHADER)}Z.debug&&ce.verbose("ProrgramManager",`FragShader:
${t}
`);let e=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),n=this.glContext.createProgram(this.vertexShader,e);return this.glContext.deleteShader(e),n}bindOutput(t){let e=t.width,n=t.height;ce.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${e}/${n}, shape=${t.shape}, type=${t.tensor.type}`),this.glContext.attachFramebuffer(t.texture,e,n)}bindAttributes(t){let e=t.position,n=t.textureCoord;this.glContext.setVertexAttributes(e,n),this.attributesBound=!0}bindUniforms(t,e,n){let i=this.glContext.gl,o=0;for(let{name:a,type:l,location:c,arrayLength:p}of t){let s=e.find(u=>u.name===a)?.data;if(l!=="sampler2D"&&!s)throw new Error(`variable '${a}' does not have data defined in program info`);switch(l){case"sampler2D":this.bindTexture(n[o],c,o),o++;break;case"float":p?i.uniform1fv(c,s):i.uniform1f(c,s);break;case"int":p?i.uniform1iv(c,s):i.uniform1i(c,s);break;default:throw new Error(`Uniform not implemented: ${l}`)}}}bindTexture(t,e,n){this.glContext.bindTextureToUniform(t.texture,n,e)}getAttribLocations(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}}getUniformLocations(t,e,n){let i=[];if(e)for(let o of e)i.push({name:o,type:"sampler2D",location:this.getUniformLocation(t,o)});if(n)for(let o of n)i.push({...o,location:this.getUniformLocation(t,o.name)});return i}getUniformLocation(t,e){let n=this.glContext.gl.getUniformLocation(t,e);if(n===null)throw new Error(`Uniform ${e} not found.`);return n}getAttribLocation(t,e){return this.glContext.gl.getAttribLocation(t,e)}}}),go$1,up$1=L(()=>{lt$1(),ln(),go$1=class{constructor(t,e,n,i){this.glContext=t,this.layoutStrategy=e,this.profiler=n,this.config=i,this.pendingRead=new Map,i.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(t,e,n,i){let o=this.toEncoderType(t),a=this.glContext.getEncoder(o,e.channels||1,i);if(e.isPacked&&i===1)throw new Error("not implemented");let l=e.width,c=e.height,p,s;if(this.config.reuseTextures){p=`${l}x${c}_${a.format}_${a.internalFormat}_${a.textureType}`,s=this.inUseTextures.get(p),s||(s=[],this.inUseTextures.set(p,s));let d=this.idleTextures.get(p);if(d&&d.length>0){let g=d.pop();return s.push(g),i===1&&this.glContext.updateTexture(g,l,c,a,this.toTextureData(t,n)),g}}ce.verbose("TextureManager",`Creating new texture of size ${e.width}x${e.height}`);let u=this.glContext.allocateTexture(l,c,a,this.toTextureData(t,n));return this.config.reuseTextures&&(s.push(u),this.textureLookup.set(u,p)),u}readTexture(t,e,n){return n||(n=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let i=t.shape.reduce((a,l)=>a*l)*n,o=this.glContext.readTexture(t.texture,t.width,t.height,i,this.toEncoderType(e),n);return this.toTensorData(e,o)})}async readTextureAsync(t,e,n){let i=t.tensor.dataId;if(n||(n=1),this.pendingRead.has(i)){let o=this.pendingRead.get(i);return new Promise(a=>o?.push(a))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(i,[]);let o=t.shape.reduce((p,s)=>p*s)*n;await this.glContext.createAndWaitForFence();let a=this.glContext.readTexture(t.texture,t.width,t.height,o,this.toEncoderType(e),n),l=this.toTensorData(e,a),c=this.pendingRead.get(i);return this.pendingRead.delete(i),c?.forEach(p=>p(l)),l})}readUint8TextureAsFloat(t){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let e=t.shape.reduce((i,o)=>i*o),n=this.glContext.readTexture(t.texture,t.width,t.height,e*4,"byte",4);return new Float32Array(n.buffer,n.byteOffset,e)})}releaseTexture(t,e){let n;if(this.config.reuseTextures&&(n=this.textureLookup.get(t.texture),n)){e&&this.textureLookup.delete(n);let i=this.inUseTextures.get(n);if(i){let o=i.indexOf(t.texture);if(o!==-1){i.splice(o,1);let a=this.idleTextures.get(n);a||(a=[],this.idleTextures.set(n,a)),a.push(t.texture)}}}(!n||e)&&(ce.verbose("TextureManager",`Deleting texture of size ${t.width}x${t.height}`),this.glContext.deleteTexture(t.texture))}toTensorData(t,e){switch(t){case"int16":return e instanceof Int16Array?e:Int16Array.from(e);case"int32":return e instanceof Int32Array?e:Int32Array.from(e);case"int8":return e instanceof Int8Array?e:Int8Array.from(e);case"uint16":return e instanceof Uint16Array?e:Uint16Array.from(e);case"uint32":return e instanceof Uint32Array?e:Uint32Array.from(e);case"uint8":case"bool":return e instanceof Uint8Array?e:Uint8Array.from(e);case"float32":return e instanceof Float32Array?e:Float32Array.from(e);case"float64":return e instanceof Float64Array?e:Float64Array.from(e);default:throw new Error(`TensorData type ${t} is not supported`)}}toTextureData(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)}toEncoderType(t){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),yo$1,lp$1=L(()=>{lt$1(),_s$1(),el$1(),Xc$1(),sp$1(),Vi(),up$1(),yo$1=class{constructor(t,e){this.backend=t,this.context=e,this.layoutStrategy=new uo$1(t.glContext.maxTextureSize),this.programManager=new bo$1(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new go$1(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:t.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Jn$1(this)}onGraphInitialized(t){let e=t.getValues().filter(n=>n.from===-1&&n.tensor).map(n=>n.tensor.dataId);this.initializers=new Set(e)}isInitializer(t){return this.initializers?this.initializers.has(t):!1}addInitializer(t){this.initializers.add(t)}getTextureData(t,e){return e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,n=!1){ce.verbose("WebGLSessionHandler","Storing Texture data in cache"),n?this.packedTextureDataCache.set(t,e):this.unpackedTextureDataCache.set(t,e)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.unpackedTextureDataCache=new Map}resolve(t,e,n){let i=vs$1(t,e,Yc$1);return{impl:i.opImpl,context:i.opInit?i.opInit(t,n):t}}}});function jb(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}var hn,fp$1=L(()=>{Ot$1(),ln(),ln(),Bt$1(),hn=class{constructor(t,e){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(t,e,n,i){let o=this.gl,a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);let l=i?n.encode(i,t*e):null;return o.texImage2D(o.TEXTURE_2D,0,n.internalFormat,t,e,0,n.format,n.textureType,l),this.checkError(),a}updateTexture(t,e,n,i,o){let a=this.gl;a.bindTexture(a.TEXTURE_2D,t);let l=i.encode(o,e*n);a.texSubImage2D(a.TEXTURE_2D,0,0,0,e,n,i.format,i.textureType,l),this.checkError()}attachFramebuffer(t,e,n){let i=this.gl;i.bindTexture(i.TEXTURE_2D,t),i.bindFramebuffer(i.FRAMEBUFFER,this.framebuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0),this.checkError(),i.viewport(0,0,e,n),i.scissor(0,0,e,n)}readTexture(t,e,n,i,o,a){let l=this.gl;a||(a=1),this.frameBufferBound||this.attachFramebuffer(t,e,n);let c=this.getEncoder(o,a),p=c.allocate(e*n);return l.bindTexture(l.TEXTURE_2D,t),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,t,0),l.readPixels(0,0,e,n,l.RGBA,c.textureType,p),this.checkError(),c.decode(p,i)}isFramebufferReady(){return!0}getActiveTexture(){let t=this.gl;return`TEXTURE${t.getParameter(this.gl.ACTIVE_TEXTURE)-t.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(t,e){let n=this.gl;n.vertexAttribPointer(t,3,n.FLOAT,!1,20,0),n.enableVertexAttribArray(t),e!==-1&&(n.vertexAttribPointer(e,2,n.FLOAT,!1,20,12),n.enableVertexAttribArray(e)),this.checkError()}createProgram(t,e){let n=this.gl,i=n.createProgram();return n.attachShader(i,t),n.attachShader(i,e),n.linkProgram(i),i}compileShader(t,e){let n=this.gl,i=n.createShader(e);if(!i)throw new Error(`createShader() returned null with type ${e}`);if(n.shaderSource(i,t),n.compileShader(i),n.getShaderParameter(i,n.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${n.getShaderInfoLog(i)}
Shader source:
${t}`);return i}deleteShader(t){this.gl.deleteShader(t)}bindTextureToUniform(t,e,n){let i=this.gl;i.activeTexture(i.TEXTURE0+e),this.checkError(),i.bindTexture(i.TEXTURE_2D,t),this.checkError(),i.uniform1i(n,e),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Z.debug){let t=this.gl,e=t.getError(),n="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:n="INVALID_ENUM";break;case t.INVALID_VALUE:n="INVALID_VALUE";break;case t.INVALID_OPERATION:n="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:n="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:n="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:n="CONTEXT_LOST_WEBGL";break;default:n=`Unknown WebGL Error: ${e.toString(16)}`}throw new Error(n)}}deleteTexture(t){this.gl.deleteTexture(t)}deleteProgram(t){this.gl.deleteProgram(t)}getEncoder(t,e,n=0){if(this.version===2)return new Xn$1(this.gl,e);switch(t){case"float":return n===1||this.isRenderFloat32Supported?new un(this.gl,e):new un(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Kn$1(this.gl,e);default:throw new Error(`Invalid dataType: ${t}`)}}clearActiveTextures(){let t=this.gl;for(let e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let t=this.gl,e=t.createBuffer();if(!e)throw new Error("createBuffer() returned null");let n=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),this.checkError(),e}createFramebuffer(){let t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t}queryVitalParameters(){let t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);let n=this.version===2?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,n,1,1,0,t.RGBA,t.FLOAT,null);let i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);let o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(i),o}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let t=this.gl,e,n,i,o,a;try{e=t.createTexture(),n=t.createFramebuffer(),t.bindTexture(t.TEXTURE_2D,e);let l=this.version===2?t.RGBA32F:t.RGBA;return t.texImage2D(t.TEXTURE_2D,0,l,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.enable(t.BLEND),i=t.createShader(t.VERTEX_SHADER),!i||(t.shaderSource(i,"void main(){}"),t.compileShader(i),o=t.createShader(t.FRAGMENT_SHADER),!o)||(t.shaderSource(o,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),t.compileShader(o),a=t.createProgram(),!a)?!1:(t.attachShader(a,i),t.attachShader(a,o),t.linkProgram(a),t.useProgram(a),t.drawArrays(t.POINTS,0,1),t.getError()===t.NO_ERROR)}finally{t.disable(t.BLEND),a&&t.deleteProgram(a),i&&t.deleteShader(i),o&&t.deleteShader(o),n&&(t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(n)),e&&(t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(e))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension,n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension;t.endQuery(e.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(t){let e=!1,n=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let i=this.gl,o=this.disjointTimerQueryWebgl2Extension;e=i.getQueryParameter(t,i.QUERY_RESULT_AVAILABLE),n=i.getParameter(o.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return e&&!n}getTimerResult(t){let e=0;if(this.version===2){let n=this.gl;e=n.getQueryParameter(t,n.QUERY_RESULT),n.deleteQuery(t)}else throw new Error("WebGL1 profiling currently not supported");return e/1e6}async waitForQueryAndGetTime(t){return await mi$1(()=>this.isTimerResultAvailable(t)),this.getTimerResult(t)}async createAndWaitForFence(){let t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e,n=t,i=n.fenceSync(n.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),i===null?e=()=>!0:e=()=>{let o=n.clientWaitSync(i,0,0);return o===n.ALREADY_SIGNALED||o===n.CONDITION_SATISFIED},{query:i,isFencePassed:e}}async pollFence(t){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})}pollItems(){let t=jb(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=t;++e){let{resolveFn:n}=this.itemsToPoll[e];n()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}async addItemToPoll(t,e){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),!(this.itemsToPoll.length>1)&&await mi$1(()=>(this.pollItems(),this.itemsToPoll.length===0))}}});function Hi$1(t){let e;if((!t||t==="webgl2")&&"webgl2"in Gr?e=Gr.webgl2:(!t||t==="webgl")&&"webgl"in Gr&&(e=Gr.webgl),!e)try{let i=Xb();e=cp$1(i,t)}catch{let i=Yb();e=cp$1(i,t)}t=t||e.version===1?"webgl":"webgl2";let n=e.gl;return Gr[t]=e,n.isContextLost()?(delete Gr[t],Hi$1(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),e)}function cp$1(t,e){let n={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},i,o=n;if((!e||e==="webgl2")&&(i=t.getContext("webgl2",o),i))try{return new hn(i,2)}catch(a){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${a}`)}if((!e||e==="webgl")&&(i=t.getContext("webgl",o)||t.getContext("experimental-webgl",o),i))try{return new hn(i,1)}catch(a){ce.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${a}`)}throw new Error("WebGL is not supported")}function Yb(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let t=document.createElement("canvas");return t.width=1,t.height=1,t}function Xb(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var Gr,pp$1=L(()=>{lt$1(),fp$1(),Gr={}}),To$1,dp$1=L(()=>{Ot$1(),lt$1(),lp$1(),pp$1(),To$1=class{get contextId(){return Z.webgl.contextId}set contextId(t){Z.webgl.contextId=t}get matmulMaxBatchSize(){return Z.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(t){Z.webgl.matmulMaxBatchSize=t}get textureCacheMode(){return Z.webgl.textureCacheMode}set textureCacheMode(t){Z.webgl.textureCacheMode=t}get pack(){return Z.webgl.pack}set pack(t){Z.webgl.pack=t}get async(){return Z.webgl.async}set async(t){Z.webgl.async=t}initialize(){try{return this.glContext=Hi$1(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),ce.setWithEnv(Z),Z.webgl.context||Object.defineProperty(Z.webgl,"context",{value:this.glContext.gl}),ce.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(t){return ce.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${t}`),!1}}createSessionHandler(t){return new yo$1(this,t)}dispose(){this.glContext.dispose()}}});async function qi$1(t){if(t){let e=typeof t=="string"?[t]:t;for(let n of e){let i=hp$1.get(n);if(i)return i;let o=await Jb(n);if(o)return o}}else return qi$1(["webgl"]);throw new Error("no available backend to use")}async function Jb(t){let e=Kb;if(typeof e[t]<"u"&&Zb(e[t])){let n=e[t],i=n.initialize();if(typeof i=="object"&&"then"in i&&(i=await i),i)return hp$1.set(t,n),n}}function Zb(t){let e=t;return"initialize"in e&&typeof e.initialize=="function"&&"createSessionHandler"in e&&typeof e.createSessionHandler=="function"&&"dispose"in e&&typeof e.dispose=="function"}var hp$1,Kb,mp$1=L(()=>{dp$1(),hp$1=new Map,Kb={webgl:new To$1}}),ji$1,xo$1,bp=L(()=>{lt$1(),ji$1=class{constructor(t,e){this.op=t,this.node=e}},xo$1=class{constructor(t,e,n){this.graph=t,this.profiler=n,this.initialize(e)}initialize(t){this.profiler.event("session","ExecutionPlan.initialize",()=>{let e=this.graph.getNodes();if(e.length!==t.length)throw new Error("The size of nodes and OPs do not match.");this._ops=t.map((n,i)=>new ji$1(n,e[i])),this.reset(),this._starter=[],this._ops.forEach((n,i)=>{let o=!0;for(let a of n.node.inputs)if(!this._values[a]&&this.graph.getInputIndices().indexOf(a)===-1){o=!1;break}o&&this._starter.push(i)})})}reset(){this._values=this.graph.getValues().map(t=>t.tensor)}async execute(t,e){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let n=t.createInferenceHandler(),i=this.graph.getInputIndices();if(e.length!==i.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${e.length} expected: ${i.length}`);e.forEach((s,u)=>{let d=i[u];this._values[d]=s});let o=this._starter.slice(0),a=this.graph.getValues(),l=this.graph.getNodes(),c=0;for(;c<o.length;){let s=o[c++],u=this._ops[s],d=u.node.inputs.map(C=>this._values[C]);if(d.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${u.node}`);let g=d;ce.verbose("ExecPlan",`Runing op:${u.node.name} (${g.map((C,O)=>`'${u.node.inputs[O]}': ${C.type}[${C.dims.join(",")}]`).join(", ")})`);let w=await this.profiler.event("node",u.node.name,async()=>u.op.impl(n,g,u.op.context));if(w.length!==u.node.outputs.length)throw new Error("the size of output does not match model definition.");w.forEach((C,O)=>{let Y=u.node.outputs[O];if(this._values[Y])throw new Error(`output [${Y}] already has value: op:${u.node.name}`);this._values[Y]=C});let x=new Set;w.forEach((C,O)=>{let Y=u.node.outputs[O];for(let q of a[Y].to){let ue=l[q],pe=!0;for(let se of ue.inputs)if(!this._values[se]){pe=!1;break}pe&&x.add(q)}}),o.push(...x)}let p=[];for(let s=0;s<this.graph.getOutputIndices().length;s++){let u=this.graph.getOutputIndices()[s],d=this._values[u];if(d===void 0)throw new Error(`required output [${u}] does not have value`);u===0?await d.getData():d.data,p.push(d)}return ce.verbose("ExecPlan","disposing of inferenceHandler"),n.dispose(),p})}}}),oe,bt,mn,gp$1=L(()=>{tn$1(),oe=Ar(Cr()),yr(),fe$1(),bt=V.experimental.fbs,mn=class tT{constructor(e){if(this._attributes=new Map,e!=null){for(let n of e)n instanceof oe.onnx.AttributeProto?this._attributes.set(n.name,[tT.getValue(n),tT.getType(n)]):n instanceof bt.Attribute&&this._attributes.set(n.name(),[tT.getValue(n),tT.getType(n)]);if(this._attributes.size<e.length)throw new Error("duplicated attribute names")}}set(e,n,i){this._attributes.set(e,[i,n])}delete(e){this._attributes.delete(e)}getFloat(e,n){return this.get(e,"float",n)}getInt(e,n){return this.get(e,"int",n)}getString(e,n){return this.get(e,"string",n)}getTensor(e,n){return this.get(e,"tensor",n)}getFloats(e,n){return this.get(e,"floats",n)}getInts(e,n){return this.get(e,"ints",n)}getStrings(e,n){return this.get(e,"strings",n)}getTensors(e,n){return this.get(e,"tensors",n)}get(e,n,i){let o=this._attributes.get(e);if(o===void 0){if(i!==void 0)return i;throw new Error(`required attribute not found: ${e}`)}if(o[1]!==n)throw new Error(`type mismatch: expected ${n} but got ${o[1]}`);return o[0]}static getType(e){let n=e instanceof oe.onnx.AttributeProto?e.type:e.type();switch(n){case oe.onnx.AttributeProto.AttributeType.FLOAT:return"float";case oe.onnx.AttributeProto.AttributeType.INT:return"int";case oe.onnx.AttributeProto.AttributeType.STRING:return"string";case oe.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case oe.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case oe.onnx.AttributeProto.AttributeType.INTS:return"ints";case oe.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case oe.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${oe.onnx.AttributeProto.AttributeType[n]}`)}}static getValue(e){let n=e instanceof oe.onnx.AttributeProto?e.type:e.type();if(n===oe.onnx.AttributeProto.AttributeType.GRAPH||n===oe.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let i=this.getValueNoCheck(e);if(n===oe.onnx.AttributeProto.AttributeType.INT&&it.isLong(i))return it.longToNumber(i);if(n===oe.onnx.AttributeProto.AttributeType.INTS){let o=i,a=new Array(o.length);for(let l=0;l<o.length;l++){let c=o[l];a[l]=it.longToNumber(c)}return a}if(n===oe.onnx.AttributeProto.AttributeType.TENSOR)return e instanceof oe.onnx.AttributeProto?$e.fromProto(i):$e.fromOrtTensor(i);if(n===oe.onnx.AttributeProto.AttributeType.TENSORS){if(e instanceof oe.onnx.AttributeProto)return i.map(o=>$e.fromProto(o));if(e instanceof bt.Attribute)return i.map(o=>$e.fromOrtTensor(o))}return n===oe.onnx.AttributeProto.AttributeType.STRING&&e instanceof oe.onnx.AttributeProto?sn$1(i):n===oe.onnx.AttributeProto.AttributeType.STRINGS&&e instanceof oe.onnx.AttributeProto?i.map(sn$1):i}static getValueNoCheck(e){return e instanceof oe.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(e):this.getValueNoCheckFromOrtFormat(e)}static getValueNoCheckFromOnnxFormat(e){switch(e.type){case oe.onnx.AttributeProto.AttributeType.FLOAT:return e.f;case oe.onnx.AttributeProto.AttributeType.INT:return e.i;case oe.onnx.AttributeProto.AttributeType.STRING:return e.s;case oe.onnx.AttributeProto.AttributeType.TENSOR:return e.t;case oe.onnx.AttributeProto.AttributeType.GRAPH:return e.g;case oe.onnx.AttributeProto.AttributeType.FLOATS:return e.floats;case oe.onnx.AttributeProto.AttributeType.INTS:return e.ints;case oe.onnx.AttributeProto.AttributeType.STRINGS:return e.strings;case oe.onnx.AttributeProto.AttributeType.TENSORS:return e.tensors;case oe.onnx.AttributeProto.AttributeType.GRAPHS:return e.graphs;default:throw new Error(`unsupported attribute type: ${oe.onnx.AttributeProto.AttributeType[e.type]}`)}}static getValueNoCheckFromOrtFormat(e){switch(e.type()){case bt.AttributeType.FLOAT:return e.f();case bt.AttributeType.INT:return e.i();case bt.AttributeType.STRING:return e.s();case bt.AttributeType.TENSOR:return e.t();case bt.AttributeType.GRAPH:return e.g();case bt.AttributeType.FLOATS:return e.floatsArray();case bt.AttributeType.INTS:{let n=[];for(let i=0;i<e.intsLength();i++)n.push(e.ints(i));return n}case bt.AttributeType.STRINGS:{let n=[];for(let i=0;i<e.stringsLength();i++)n.push(e.strings(i));return n}case bt.AttributeType.TENSORS:{let n=[];for(let i=0;i<e.tensorsLength();i++)n.push(e.tensors(i));return n}default:throw new Error(`unsupported attribute type: ${bt.AttributeType[e.type()]}`)}}}}),Xi$1,wo$1,Ki$1,Mt$1,vo$1,Yi$1,yp$1=L(()=>{gp$1(),tn$1(),Xi$1=Ar(Cr()),yr(),fe$1(),wo$1=V.experimental.fbs,Ki$1={from:(t,e)=>new Yi$1(t,e)},Mt$1=class{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=We$1.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}},vo$1=class{constructor(t,e){t instanceof Xi$1.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new mn(t.attribute)):t instanceof wo$1.Node&&(this.name=e??t.name(),this.opType=t.opType(),this.attributes=new mn(We$1.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}},Yi$1=class{constructor(t,e){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof Xi$1.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else if(t instanceof wo$1.Graph)this.buildGraphFromOrtFormat(t);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let n=new Map;if(!t.input)throw new Error("missing information in graph: input");let i=[];for(let o of t.input){if(e.has(o.name))throw new Error(`duplicated input name: ${o.name}`);let a=this._allData.push(new Mt$1(o))-1;e.set(o.name,a),i.push(o.name)}if(!t.initializer)throw new Error("missing information in graph: initializer");for(let o of t.initializer){let a=e.get(o.name);if(a===void 0){let l=new Mt$1;l.type={shape:{dims:We$1.tensorDimsFromProto(o.dims)},tensorType:We$1.tensorDataTypeFromProto(o.dataType)},a=this._allData.push(l)-1,e.set(o.name,a)}this._allData[a]._from=-1,this._allData[a].tensor=$e.fromProto(o)}for(let o=0;o<this._allData.length;o++)this._allData[o].tensor||(this._allInputIndices.push(o),this._allInputNames.push(i[o]));if(!t.output)throw new Error("missing information in graph: output");for(let o of t.output){if(e.has(o.name))throw new Error(`duplicated output name: ${o.name}`);let a=this._allData.push(new Mt$1(o))-1;e.set(o.name,a),this._allOutputIndices.push(a),this._allOutputNames.push(o.name)}if(!t.node)throw new Error("missing information in graph: node");for(let o of t.node){if(!o.name)for(let l=0;;l++){let c=`unnamed_${o.opType}_${l}`;if(!n.has(c)){o.name=c;break}}if(n.has(o.name))throw new Error(`duplicated node name: ${o.name}`);let a=this._nodes.push(new vo$1(o))-1;n.set(o.name,a)}for(let o=0;o<this._nodes.length;o++){let a=this._nodes[o],l=t.node[o];if(!l.output)throw new Error(`missing output for node: ${l.name}`);for(let c of l.output){let p=e.get(c);if(typeof p>"u"&&(p=this._allData.push(new Mt$1)-1,e.set(c,p)),a.outputs.push(p),this._allData[p]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${p}`);if(this._allData[p]._from=o,l.opType==="Constant"){if(!l.attribute||l.attribute.length!==1||!l.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!l.output||l.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");a.outputs.pop(),a.executeNode=!1,this._allData[p]._from=-1,this._allData[p].tensor=$e.fromProto(l.attribute[0].t)}}}for(let o=0;o<this._nodes.length;o++){let a=this._nodes[o],l=t.node[o];if(!l.input)throw new Error(`missing input for node: ${l.name}`);for(let c of l.input){let p=e.get(c);if(typeof p>"u"){if(c===""&&(l.input.length===3||l.input.length===4)&&l.opType==="Resize")continue;throw new Error(`unrecognized input '${c}' for node: ${l.name}`)}a.inputs.push(p),this._allData[p]._to.push(o)}}return!0}buildGraphFromOrtFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let n=new Map,i=[];for(let o=0;o<t.inputsLength();o++){let a=t.inputs(o);if(e.has(a))throw new Error(`duplicated input name: ${a}`);for(let l=0;l<t.nodeArgsLength();l++)if(t.nodeArgs(l)?.name()===a){let c=new Mt$1;if(t.nodeArgs(l)?.type()?.valueType()!==wo$1.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let p=t.nodeArgs(l).type().value(new wo$1.TensorTypeAndShape),s=We$1.tensorDataTypeFromProto(p.elemType()),u=p.shape(),d=[];for(let w=0;w<u.dimLength();w++)d.push(it.longToNumber(u.dim(w).value().dimValue()));c.type={shape:{dims:d},tensorType:s};let g=this._allData.push(c)-1;e.set(a,g),i.push(a)}}for(let o=0;o<t.initializersLength();o++){let a=t.initializers(o),l=e.get(a.name());if(l===void 0){let c=new Mt$1,p=We$1.tensorDimsFromORTFormat(a),s=We$1.tensorDataTypeFromProto(a.dataType());c.type={shape:{dims:p},tensorType:s},l=this._allData.push(c)-1,e.set(a.name(),l)}this._allData[l]._from=-1,this._allData[l].tensor=$e.fromOrtTensor(a)}for(let o=0;o<this._allData.length;o++)this._allData[o].tensor||(this._allInputIndices.push(o),this._allInputNames.push(i[o]));for(let o=0;o<t.outputsLength();o++){let a=t.outputs(o);if(e.has(a))throw new Error(`duplicated output name: ${a}`);let l=this._allData.push(new Mt$1)-1;e.set(a,l),this._allOutputIndices.push(l),this._allOutputNames.push(a)}if(!t.nodes)throw new Error("missing information in graph: node");for(let o=0;o<t.nodesLength();o++){let a=t.nodes(o),l=a.name();if(!l)for(let p=0;l=`unnamed_${a.opType()}_${p}`,!!n.has(l);p++);if(n.has(l))throw new Error(`duplicated node name: ${l}`);let c=this._nodes.push(new vo$1(a,l))-1;n.set(l,c)}for(let o=0;o<this._nodes.length;o++){let a=this._nodes[o],l=t.nodes(o);if(l==null)throw new Error(`No node exists at index ${o}`);if(l?.outputsLength()===0)throw new Error(`missing output for node: ${l.name}`);for(let c=0;c<l?.outputsLength();c++){let p=l?.outputs(c),s=e.get(p);if(typeof s>"u"&&(s=this._allData.push(new Mt$1)-1,e.set(p,s)),a.outputs.push(s),this._allData[s]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${s}`);if(this._allData[s]._from=o,l.opType()==="Constant"){if(l.attributesLength()!==1||!l.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(l.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");a.outputs.pop(),a.executeNode=!1,this._allData[s]._from=-1,this._allData[s].tensor=$e.fromOrtTensor(l.attributes(0).t())}}}for(let o=0;o<this._nodes.length;o++){let a=this._nodes[o],l=t.nodes(o);if(l.inputsLength()===0)throw new Error(`missing input for node: ${l.name}`);for(let c=0;c<l.inputsLength();c++){let p=l.inputs(c),s=e.get(p);if(typeof s>"u")throw new Error(`unrecognized input '${p}' for node: ${l.name()}`);a.inputs.push(s),this._allData[s]._to.push(o)}}}checkIsAcyclic(){let t=new Set;this._allInputIndices.forEach(i=>{this._allData[i]._to.forEach(o=>{t.add(o)})});let e=Array.from(t),n=new Array(this._nodes.length).fill("white");for(;e.length>0;){let i=e.pop();n[i]==="gray"?n[i]="black":(e.push(i),n[i]="gray",this._nodes[i].outputs.forEach(o=>{let a=this._allData[o];if(typeof a.tensor<"u")throw new Error("node outputs should not be initialized");if(a._from!==i)throw new Error("from property of the Value object doesn't match index of Node being processed");a._to.forEach(l=>{if(n[l]==="gray")throw new Error("model graph is cyclic");n[l]==="white"&&e.push(l)})}))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0,e=new Array(this._nodes.length,0),n=0;for(let i=0;i<this._nodes.length;i++)e[i]=n,this._nodes[i].executeNode?(n!==i&&(this._nodes[n]=this._nodes[i]),n++):this._nodes[i].outputs.forEach(o=>{this._allData[o]._from=-2});this._nodes.splice(n,this._nodes.length-n);for(let i=0;i<this._allData.length;i++){let o=this._allData[i];o._from!==void 0&&o._from!==-1&&o._from!==-2&&(o._from=e[o._from]);for(let a=0;a<o._to.length;a++)if(o._to[a]>=0)o._to[a]=e[o._to[a]];else throw new Error("Trying to update a removed node")}t=0;for(let i=0;i<this._allData.length;i++){if(this._allData[i].from===-2&&this._allOutputIndices.indexOf(i+t)===-1){t++,this._allData.splice(i,1),i--;continue}if(t>0){let o=-1;this._allData[i].from!==void 0&&this._allData[i].from!==-1?(o=this._nodes[this._allData[i].from].outputs.indexOf(i+t),o!==-1&&(this._nodes[this._allData[i].from].outputs[o]=i)):(o=this._allInputIndices.indexOf(i+t),o!==-1&&(this._allInputIndices[o]=i)),this._allData[i].to.forEach(a=>{o=this._nodes[a].inputs.indexOf(i+t),o!==-1&&(this._nodes[a].inputs[o]=i)}),this._allData[i].to.length===0&&(o=this._allOutputIndices.indexOf(i+t),o!==-1&&(this._allOutputIndices[o]=i))}}}deleteNode(t){let e=this._nodes[t];if(e.outputs.length>1){for(let l=1;l<e.outputs.length;l++)if(this._allData[e.outputs[l]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}e.executeNode=!1;let n=e.inputs[0],i=e.outputs[0],o=this._allData[i].to;for(let l=0;l<e.inputs.length;l++){let c=this._allData[e.inputs[l]].to.indexOf(t);if(c===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[e.inputs[l]].to.splice(c,1)}this._allData[i]._to=[];let a=this._allOutputIndices.indexOf(i);if(a!==-1&&(this._allOutputIndices[a]=n),o&&o.length>0)for(let l of o){let c=this._nodes[l].inputs.indexOf(i);if(c===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[l].inputs[c]=n,this._allData[n].to.push(l)}}removeAllDropoutNodes(){let t=0;for(let e of this._nodes){if(e.opType==="Dropout"){if(e.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(e.outputs.length!==1&&e.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(e.outputs.length===2&&this._allData[e.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(let e of this._nodes)e.opType==="Identity"&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let t of this._nodes)if(t.opType==="Conv"){let e=this._allData[t.outputs[0]]._to;if(e.length===1&&this.isActivation(this._nodes[e[0]])){let n=this._nodes[e[0]];if(n.opType==="Clip")if(n.inputs.length===1)try{t.attributes.set("activation_params","floats",[n.attributes.getFloat("min"),n.attributes.getFloat("max")])}catch{t.attributes.set("activation_params","floats",[br,gr$1])}else if(n.inputs.length>=3&&this._allData[n.inputs[1]].tensor!==void 0&&this._allData[n.inputs[2]].tensor!==void 0)t.attributes.set("activation_params","floats",[this._allData[n.inputs[1]].tensor.floatData[0],this._allData[n.inputs[2]].tensor.floatData[0]]);else continue;t.attributes.set("activation","string",n.opType),this.deleteNode(e[0])}}}}}),Tp$1,Qb,_o$1,xp$1=L(()=>{zn$1(),yp$1(),tn$1(),Tp$1=Ar(Cr()),fe$1(),Qb=V.experimental.fbs,_o$1=class{constructor(){}load(t,e,n){let i;if(!n)try{this.loadFromOnnxFormat(t,e);return}catch(o){if(n!==void 0)throw o;i=o}try{this.loadFromOrtFormat(t,e)}catch(o){throw n!==void 0?o:new Error(`Failed to load model as ONNX format: ${i}
as ORT format: ${o}`)}}loadFromOnnxFormat(t,e){let n=Tp$1.onnx.ModelProto.decode(t);if(it.longToNumber(n.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=n.opsetImport.map(i=>({domain:i.domain,version:it.longToNumber(i.version)})),this._graph=Ki$1.from(n.graph,e)}loadFromOrtFormat(t,e){let n=new _.ByteBuffer(t),i=Qb.InferenceSession.getRootAsInferenceSession(n).model();if(it.longToNumber(i.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let o=0;o<i.opsetImportLength();o++){let a=i.opsetImport(o);this._opsets.push({domain:a?.domain(),version:it.longToNumber(a.version())})}this._graph=Ki$1.from(i.graph(),e)}get graph(){return this._graph}get opsets(){return this._opsets}}}),Oo,wp$1=L(()=>{mp$1(),bp(),lt$1(),xp$1(),Oo=class{constructor(t={}){this._initialized=!1,this.backendHint=t.backendHint,this.profiler=Gn$1.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(t,e,n){await this.profiler.event("session","Session.loadModel",async()=>{let i=await qi$1(this.backendHint);if(this.sessionHandler=i.createSessionHandler(this.context),this._model=new _o$1,typeof t=="string"){let o=t.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let a=await(void 0)(t);this.initialize(a,o)}else{let a=await(await fetch(t)).arrayBuffer();this.initialize(new Uint8Array(a),o)}}else if(ArrayBuffer.isView(t))this.initialize(t);else{let o=new Uint8Array(t,e||0,n||t.byteLength);this.initialize(o)}})}initialize(t,e){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let n=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(t,n,e),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new xo$1(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(t){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let e=this.normalizeAndValidateInputs(t),n=await this._executionPlan.execute(this.sessionHandler,e);return this.createOutput(n)})}normalizeAndValidateInputs(t){let e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw new Error(`incorrect input array length: expected ${e.length} but got ${t.length}`)}else{if(t.size!==e.length)throw new Error(`incorrect input map size: expected ${e.length} but got ${t.size}`);let n=new Array(t.size),i=0;for(let o=0;o<e.length;++o){let a=t.get(e[o]);if(!a)throw new Error(`missing input tensor for: '${name}'`);n[i++]=a}t=n}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let n=this._model.graph.getInputIndices(),i=this._model.graph.getValues(),o=new Array(n.length);for(let a=0;a<n.length;++a){let l=i[n[a]];o[a]=l.type.shape.dims,this.context.graphInputTypes.push(l.type.tensorType),this.context.graphInputDims.push(t[a].dims)}this.validateInputTensorDims(o,t,!0)}else this.validateInputTensorDims(this.context.graphInputDims,t,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,t),t}validateInputTensorTypes(t,e){for(let n=0;n<e.length;n++){let i=t[n],o=e[n].type;if(i!==o)throw new Error(`input tensor[${n}] check failed: expected type '${i}' but got ${o}`)}}validateInputTensorDims(t,e,n){for(let i=0;i<e.length;i++){let o=t[i],a=e[i].dims;if(!this.compareTensorDims(o,a,n))throw new Error(`input tensor[${i}] check failed: expected shape '[${o.join(",")}]' but got [${a.join(",")}]`)}}compareTensorDims(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i]&&(!n||t[i]!==0))return!1;return!0}createOutput(t){let e=this._model.graph.getOutputNames();if(t.length!==e.length)throw new Error("expected number of outputs do not match number of generated outputs");let n=new Map;for(let i=0;i<e.length;++i)n.set(e[i],t[i]);return n}initializeOps(t){let e=t.getNodes();this._ops=new Array(e.length);for(let n=0;n<e.length;n++)this._ops[n]=this.sessionHandler.resolve(e[n],this._model.opsets,t)}}}),Io$1,vp$1=L(()=>{Ot$1(),yr(),Io$1=class{constructor(t){this.session=t,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(t,e,n){let i=new Map;for(let l in t)if(Object.hasOwnProperty.call(t,l)){let c=t[l];i.set(l,new $e(c.dims,c.type,void 0,void 0,c.data))}let o=await this.session.run(i),a={};return o.forEach((l,c)=>{a[c]=new Me(l.type,l.data,l.dims)}),a}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),_p$1={};Sr(_p$1,{onnxjsBackend:()=>tg});var Ji$1,tg,Op$1=L(()=>{wp$1(),vp$1(),Ji$1=class{async init(){}async createInferenceSessionHandler(t,e){let n=new Oo(e);return typeof t=="string"?await n.loadModel(t):await n.loadModel(t),new Io$1(n)}},tg=new Ji$1}),Zi$1={};Sr(Zi$1,{createReadStream:()=>Ip$1,readFile:()=>rg,readFileSync:()=>ng});var rg,ng,Ip$1,Qi$1=L(()=>{rg=void 0,ng=void 0,Ip$1=void 0}),ea={};Sr(ea,{join:()=>og});var og,ta=L(()=>{og=void 0}),Pp$1=me((t,e)=>{var n=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(o={}){var a=o,l,c,p=new Promise((Ge,An)=>{l=Ge,c=An}),s=Object.assign({},a),u="./this.program",d=typeof window=="object",g=typeof importScripts=="function",w=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",x="",C,O,Y;if(w){var q=(Qi$1(),ar(Zi$1)),ue=(ta(),ar(ea));x=g?ue.dirname(x)+"/":__dirname+"/",C=(Ge,An)=>(Ge=Be(Ge)?new URL(Ge):ue.normalize(Ge),q.readFileSync(Ge,An?void 0:"utf8")),Y=Ge=>(Ge=C(Ge,!0),Ge.buffer||(Ge=new Uint8Array(Ge)),Ge),O=(Ge,An,nr,Ra=!0)=>{Ge=Be(Ge)?new URL(Ge):ue.normalize(Ge),q.readFile(Ge,Ra?void 0:"utf8",(ko,b0)=>{ko?nr(ko):An(Ra?b0.buffer:b0)})},!a.thisProgram&&1<process.argv.length&&(u=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else(d||g)&&(g?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),i&&(x=i),x.startsWith("blob:")?x="":x=x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1),C=Ge=>{var An=new XMLHttpRequest;return An.open("GET",Ge,!1),An.send(null),An.responseText},g&&(Y=Ge=>{var An=new XMLHttpRequest;return An.open("GET",Ge,!1),An.responseType="arraybuffer",An.send(null),new Uint8Array(An.response)}),O=(Ge,An,nr)=>{var Ra=new XMLHttpRequest;Ra.open("GET",Ge,!0),Ra.responseType="arraybuffer",Ra.onload=()=>{Ra.status==200||Ra.status==0&&Ra.response?An(Ra.response):nr()},Ra.onerror=nr,Ra.send(null)});var pe=console.log.bind(console),se=console.error.bind(console);Object.assign(a,s),s=null;var Re,Oe=!1,Ce,He,$t,Sn,xn;function Lr(){var Ge=Re.buffer;a.HEAP8=Ce=new Int8Array(Ge),a.HEAP16=new Int16Array(Ge),a.HEAPU8=He=new Uint8Array(Ge),a.HEAPU16=new Uint16Array(Ge),a.HEAP32=$t=new Int32Array(Ge),a.HEAPU32=Sn=new Uint32Array(Ge),a.HEAPF32=new Float32Array(Ge),a.HEAPF64=xn=new Float64Array(Ge)}var jr=[],et=[],Ft=[],Tt=0,ze=null;function Ht(Ge){throw Ge="Aborted("+Ge+")",se(Ge),Oe=!0,Ge=new WebAssembly.RuntimeError(Ge+". Build with -sASSERTIONS for more info."),c(Ge),Ge}var Ae=Ge=>Ge.startsWith("data:application/octet-stream;base64,"),Be=Ge=>Ge.startsWith("file://"),tr;if(tr="ort-wasm.wasm",!Ae(tr)){var No=tr;tr=a.locateFile?a.locateFile(No,x):x+No}function ah(Ge){if(Y)return Y(Ge);throw"both async and sync fetching of the wasm failed"}function Mo(Ge){if(d||g){if(typeof fetch=="function"&&!Be(Ge))return fetch(Ge,{credentials:"same-origin"}).then(An=>{if(!An.ok)throw`failed to load wasm binary file at '${Ge}'`;return An.arrayBuffer()}).catch(()=>ah(Ge));if(O)return new Promise((An,nr)=>{O(Ge,Ra=>An(new Uint8Array(Ra)),nr)})}return Promise.resolve().then(()=>ah(Ge))}function t0(Ge,An,nr){return Mo(Ge).then(Ra=>WebAssembly.instantiate(Ra,An)).then(nr,Ra=>{se(`failed to asynchronously prepare wasm: ${Ra}`),Ht(Ra)})}function o0(Ge,An){var nr=tr;return typeof WebAssembly.instantiateStreaming!="function"||Ae(nr)||Be(nr)||w||typeof fetch!="function"?t0(nr,Ge,An):fetch(nr,{credentials:"same-origin"}).then(Ra=>WebAssembly.instantiateStreaming(Ra,Ge).then(An,function(ko){return se(`wasm streaming compile failed: ${ko}`),se("falling back to ArrayBuffer instantiation"),t0(nr,Ge,An)}))}var Xr,a0={798088:(Ge,An,nr,Ra)=>{if(typeof a>"u"||!a.ya)return 1;if(Ge=eg(Ge>>>0),Ge.startsWith("./")&&(Ge=Ge.substring(2)),Ge=a.ya.get(Ge),!Ge)return 2;if(An>>>=0,nr>>>=0,An+nr>Ge.byteLength)return 3;try{return He.set(Ge.subarray(An,An+nr),Ra>>>0>>>0),0}catch{return 4}}};class Ih{constructor(An){this.wa=An-24}}var S0=0,Sg=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,n1=(Ge,An,nr)=>{An>>>=0;var Ra=An+nr;for(nr=An;Ge[nr]&&!(nr>=Ra);)++nr;if(16<nr-An&&Ge.buffer&&Sg)return Sg.decode(Ge.subarray(An,nr));for(Ra="";An<nr;){var ko=Ge[An++];if(ko&128){var b0=Ge[An++]&63;if((ko&224)==192)Ra+=String.fromCharCode((ko&31)<<6|b0);else{var j0=Ge[An++]&63;ko=(ko&240)==224?(ko&15)<<12|b0<<6|j0:(ko&7)<<18|b0<<12|j0<<6|Ge[An++]&63,65536>ko?Ra+=String.fromCharCode(ko):(ko-=65536,Ra+=String.fromCharCode(55296|ko>>10,56320|ko&1023))}}else Ra+=String.fromCharCode(ko)}return Ra},eg=(Ge,An)=>(Ge>>>=0)?n1(He,Ge,An):"",i0=Ge=>{for(var An=0,nr=0;nr<Ge.length;++nr){var Ra=Ge.charCodeAt(nr);127>=Ra?An++:2047>=Ra?An+=2:55296<=Ra&&57343>=Ra?(An+=4,++nr):An+=3}return An},p0=(Ge,An,nr,Ra)=>{if(nr>>>=0,!(0<Ra))return 0;var ko=nr;Ra=nr+Ra-1;for(var b0=0;b0<Ge.length;++b0){var j0=Ge.charCodeAt(b0);if(55296<=j0&&57343>=j0){var Gg=Ge.charCodeAt(++b0);j0=65536+((j0&1023)<<10)|Gg&1023}if(127>=j0){if(nr>=Ra)break;An[nr++>>>0]=j0}else{if(2047>=j0){if(nr+1>=Ra)break;An[nr++>>>0]=192|j0>>6}else{if(65535>=j0){if(nr+2>=Ra)break;An[nr++>>>0]=224|j0>>12}else{if(nr+3>=Ra)break;An[nr++>>>0]=240|j0>>18,An[nr++>>>0]=128|j0>>12&63}An[nr++>>>0]=128|j0>>6&63}An[nr++>>>0]=128|j0&63}}return An[nr>>>0]=0,nr-ko},P0=Ge=>Ge%4===0&&(Ge%100!==0||Ge%400===0),_g=[0,31,60,91,121,152,182,213,244,274,305,335],N0=[0,31,59,90,120,151,181,212,243,273,304,334],F0=[],U0={},B0=()=>{if(!Zg){var Ge={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"},An;for(An in U0)U0[An]===void 0?delete Ge[An]:Ge[An]=U0[An];var nr=[];for(An in Ge)nr.push(`${An}=${Ge[An]}`);Zg=nr}return Zg},Zg,Kg=[null,[],[]],r1=[31,29,31,30,31,30,31,31,30,31,30,31],Ug=[31,28,31,30,31,30,31,31,30,31,30,31];function L1(Ge){var An=Array(i0(Ge)+1);return p0(Ge,An,0,An.length),An}function V0(Ge,An,nr,Ra){function ko(Hr,H0,Y0){for(Hr=typeof Hr=="number"?Hr.toString():Hr||"";Hr.length<H0;)Hr=Y0[0]+Hr;return Hr}function b0(Hr,H0){return ko(Hr,H0,"0")}function j0(Hr,H0){function Y0(q1){return 0>q1?-1:0<q1?1:0}var Dg;return(Dg=Y0(Hr.getFullYear()-H0.getFullYear()))===0&&(Dg=Y0(Hr.getMonth()-H0.getMonth()))===0&&(Dg=Y0(Hr.getDate()-H0.getDate())),Dg}function Gg(Hr){switch(Hr.getDay()){case 0:return new Date(Hr.getFullYear()-1,11,29);case 1:return Hr;case 2:return new Date(Hr.getFullYear(),0,3);case 3:return new Date(Hr.getFullYear(),0,2);case 4:return new Date(Hr.getFullYear(),0,1);case 5:return new Date(Hr.getFullYear()-1,11,31);case 6:return new Date(Hr.getFullYear()-1,11,30)}}function c1(Hr){var H0=Hr.sa;for(Hr=new Date(new Date(Hr.ta+1900,0,1).getTime());0<H0;){var Y0=Hr.getMonth(),Dg=(P0(Hr.getFullYear())?r1:Ug)[Y0];if(H0>Dg-Hr.getDate())H0-=Dg-Hr.getDate()+1,Hr.setDate(1),11>Y0?Hr.setMonth(Y0+1):(Hr.setMonth(0),Hr.setFullYear(Hr.getFullYear()+1));else{Hr.setDate(Hr.getDate()+H0);break}}return Y0=new Date(Hr.getFullYear()+1,0,4),H0=Gg(new Date(Hr.getFullYear(),0,4)),Y0=Gg(Y0),0>=j0(H0,Hr)?0>=j0(Y0,Hr)?Hr.getFullYear()+1:Hr.getFullYear():Hr.getFullYear()-1}Ge>>>=0,An>>>=0,nr>>>=0,Ra>>>=0;var Hg=Sn[Ra+40>>>2>>>0];Ra={Ba:$t[Ra>>>2>>>0],Aa:$t[Ra+4>>>2>>>0],ua:$t[Ra+8>>>2>>>0],xa:$t[Ra+12>>>2>>>0],va:$t[Ra+16>>>2>>>0],ta:$t[Ra+20>>>2>>>0],na:$t[Ra+24>>>2>>>0],sa:$t[Ra+28>>>2>>>0],Da:$t[Ra+32>>>2>>>0],za:$t[Ra+36>>>2>>>0],Ca:Hg?eg(Hg):""},nr=eg(nr),Hg={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var zg in Hg)nr=nr.replace(new RegExp(zg,"g"),Hg[zg]);var yy="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),s1="January February March April May June July August September October November December".split(" ");Hg={"%a":Hr=>yy[Hr.na].substring(0,3),"%A":Hr=>yy[Hr.na],"%b":Hr=>s1[Hr.va].substring(0,3),"%B":Hr=>s1[Hr.va],"%C":Hr=>b0((Hr.ta+1900)/100|0,2),"%d":Hr=>b0(Hr.xa,2),"%e":Hr=>ko(Hr.xa,2," "),"%g":Hr=>c1(Hr).toString().substring(2),"%G":c1,"%H":Hr=>b0(Hr.ua,2),"%I":Hr=>(Hr=Hr.ua,Hr==0?Hr=12:12<Hr&&(Hr-=12),b0(Hr,2)),"%j":Hr=>{for(var H0=0,Y0=0;Y0<=Hr.va-1;H0+=(P0(Hr.ta+1900)?r1:Ug)[Y0++]);return b0(Hr.xa+H0,3)},"%m":Hr=>b0(Hr.va+1,2),"%M":Hr=>b0(Hr.Aa,2),"%n":()=>`
`,"%p":Hr=>0<=Hr.ua&&12>Hr.ua?"AM":"PM","%S":Hr=>b0(Hr.Ba,2),"%t":()=>"	","%u":Hr=>Hr.na||7,"%U":Hr=>b0(Math.floor((Hr.sa+7-Hr.na)/7),2),"%V":Hr=>{var H0=Math.floor((Hr.sa+7-(Hr.na+6)%7)/7);if(2>=(Hr.na+371-Hr.sa-2)%7&&H0++,H0)H0==53&&(Y0=(Hr.na+371-Hr.sa)%7,Y0==4||Y0==3&&P0(Hr.ta)||(H0=1));else{H0=52;var Y0=(Hr.na+7-Hr.sa-1)%7;(Y0==4||Y0==5&&P0(Hr.ta%400-1))&&H0++}return b0(H0,2)},"%w":Hr=>Hr.na,"%W":Hr=>b0(Math.floor((Hr.sa+7-(Hr.na+6)%7)/7),2),"%y":Hr=>(Hr.ta+1900).toString().substring(2),"%Y":Hr=>Hr.ta+1900,"%z":Hr=>{Hr=Hr.za;var H0=0<=Hr;return Hr=Math.abs(Hr)/60,(H0?"+":"-")+("0000"+(Hr/60*100+Hr%60)).slice(-4)},"%Z":Hr=>Hr.Ca,"%%":()=>"%"},nr=nr.replace(/%%/g,"\0\0");for(zg in Hg)nr.includes(zg)&&(nr=nr.replace(new RegExp(zg,"g"),Hg[zg](Ra)));return nr=nr.replace(/\0\0/g,"%"),zg=L1(nr),zg.length>An?0:(Ce.set(zg,Ge>>>0),zg.length-1)}var g1={a:function(Ge,An,nr){Ge>>>=0;var Ra=new Ih(Ge);throw Sn[Ra.wa+16>>>2>>>0]=0,Sn[Ra.wa+4>>>2>>>0]=An>>>0,Sn[Ra.wa+8>>>2>>>0]=nr>>>0,S0=Ge,S0},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(Ge,An,nr){return An>>>=0,He.copyWithin(Ge>>>0>>>0,An>>>0,An+(nr>>>0)>>>0)},n:function(Ge,An,nr){Ge=An+2097152>>>0<4194305-!!Ge?(Ge>>>0)+4294967296*An:NaN,nr>>>=0,Ge=new Date(1e3*Ge),$t[nr>>>2>>>0]=Ge.getUTCSeconds(),$t[nr+4>>>2>>>0]=Ge.getUTCMinutes(),$t[nr+8>>>2>>>0]=Ge.getUTCHours(),$t[nr+12>>>2>>>0]=Ge.getUTCDate(),$t[nr+16>>>2>>>0]=Ge.getUTCMonth(),$t[nr+20>>>2>>>0]=Ge.getUTCFullYear()-1900,$t[nr+24>>>2>>>0]=Ge.getUTCDay(),$t[nr+28>>>2>>>0]=(Ge.getTime()-Date.UTC(Ge.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(Ge,An,nr){Ge=An+2097152>>>0<4194305-!!Ge?(Ge>>>0)+4294967296*An:NaN,nr>>>=0,Ge=new Date(1e3*Ge),$t[nr>>>2>>>0]=Ge.getSeconds(),$t[nr+4>>>2>>>0]=Ge.getMinutes(),$t[nr+8>>>2>>>0]=Ge.getHours(),$t[nr+12>>>2>>>0]=Ge.getDate(),$t[nr+16>>>2>>>0]=Ge.getMonth(),$t[nr+20>>>2>>>0]=Ge.getFullYear()-1900,$t[nr+24>>>2>>>0]=Ge.getDay(),$t[nr+28>>>2>>>0]=(P0(Ge.getFullYear())?_g:N0)[Ge.getMonth()]+Ge.getDate()-1|0,$t[nr+36>>>2>>>0]=-(60*Ge.getTimezoneOffset()),An=new Date(Ge.getFullYear(),6,1).getTimezoneOffset();var Ra=new Date(Ge.getFullYear(),0,1).getTimezoneOffset();$t[nr+32>>>2>>>0]=(An!=Ra&&Ge.getTimezoneOffset()==Math.min(Ra,An))|0},p:function(Ge){Ge>>>=0;var An=new Date($t[Ge+20>>>2>>>0]+1900,$t[Ge+16>>>2>>>0],$t[Ge+12>>>2>>>0],$t[Ge+8>>>2>>>0],$t[Ge+4>>>2>>>0],$t[Ge>>>2>>>0],0),nr=$t[Ge+32>>>2>>>0],Ra=An.getTimezoneOffset(),ko=new Date(An.getFullYear(),6,1).getTimezoneOffset(),b0=new Date(An.getFullYear(),0,1).getTimezoneOffset(),j0=Math.min(b0,ko);return 0>nr?$t[Ge+32>>>2>>>0]=+(ko!=b0&&j0==Ra):0<nr!=(j0==Ra)&&(ko=Math.max(b0,ko),An.setTime(An.getTime()+6e4*((0<nr?j0:ko)-Ra))),$t[Ge+24>>>2>>>0]=An.getDay(),$t[Ge+28>>>2>>>0]=(P0(An.getFullYear())?_g:N0)[An.getMonth()]+An.getDate()-1|0,$t[Ge>>>2>>>0]=An.getSeconds(),$t[Ge+4>>>2>>>0]=An.getMinutes(),$t[Ge+8>>>2>>>0]=An.getHours(),$t[Ge+12>>>2>>>0]=An.getDate(),$t[Ge+16>>>2>>>0]=An.getMonth(),$t[Ge+20>>>2>>>0]=An.getYear(),Ge=An.getTime(),Ge=isNaN(Ge)?-1:Ge/1e3,qg((Xr=Ge,1<=+Math.abs(Xr)?0<Xr?+Math.floor(Xr/4294967296)>>>0:~~+Math.ceil((Xr-+(~~Xr>>>0))/4294967296)>>>0:0)),Ge>>>0},l:function(){return-52},m:function(){},t:function(Ge,An,nr,Ra){nr>>>=0,Ra>>>=0;var ko=new Date().getFullYear(),b0=new Date(ko,0,1),j0=new Date(ko,6,1);ko=b0.getTimezoneOffset();var Gg=j0.getTimezoneOffset();Sn[Ge>>>0>>>2>>>0]=60*Math.max(ko,Gg),$t[An>>>0>>>2>>>0]=+(ko!=Gg),Ge=c1=>c1.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],b0=Ge(b0),j0=Ge(j0),Gg<ko?(p0(b0,He,nr,17),p0(j0,He,Ra,17)):(p0(b0,He,Ra,17),p0(j0,He,nr,17))},d:()=>{Ht("")},B:function(Ge,An,nr){Ge>>>=0,An>>>=0,nr>>>=0,F0.length=0;for(var Ra;Ra=He[An++>>>0];){var ko=Ra!=105;ko&=Ra!=112,nr+=ko&&nr%8?4:0,F0.push(Ra==112?Sn[nr>>>2>>>0]:Ra==105?$t[nr>>>2>>>0]:xn[nr>>>3>>>0]),nr+=ko?8:4}return a0[Ge](...F0)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(Ge){Ge>>>=0;var An=He.length;if(4294901760<Ge)return!1;for(var nr=1;4>=nr;nr*=2){var Ra=An*(1+.2/nr);Ra=Math.min(Ra,Ge+100663296);var ko=Math;Ra=Math.max(Ge,Ra);e:{ko=(ko.min.call(ko,4294901760,Ra+(65536-Ra%65536)%65536)-Re.buffer.byteLength+65535)/65536;try{Re.grow(ko),Lr();var b0=1;break e}catch{}b0=void 0}if(b0)return!0}return!1},C:function(Ge,An){Ge>>>=0,An>>>=0;var nr=0;return B0().forEach((Ra,ko)=>{var b0=An+nr;for(ko=Sn[Ge+4*ko>>>2>>>0]=b0,b0=0;b0<Ra.length;++b0)Ce[ko++>>>0]=Ra.charCodeAt(b0);Ce[ko>>>0]=0,nr+=Ra.length+1}),0},D:function(Ge,An){Ge>>>=0,An>>>=0;var nr=B0();Sn[Ge>>>2>>>0]=nr.length;var Ra=0;return nr.forEach(ko=>Ra+=ko.length+1),Sn[An>>>2>>>0]=Ra,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(Ge,An,nr,Ra){An>>>=0,nr>>>=0,Ra>>>=0;for(var ko=0,b0=0;b0<nr;b0++){var j0=Sn[An>>>2>>>0],Gg=Sn[An+4>>>2>>>0];An+=8;for(var c1=0;c1<Gg;c1++){var Hg=He[j0+c1>>>0],zg=Kg[Ge];Hg===0||Hg===10?((Ge===1?pe:se)(n1(zg,0)),zg.length=0):zg.push(Hg)}ko+=Gg}return Sn[Ra>>>2>>>0]=ko,0},r:V0,c:function(Ge,An,nr,Ra){return V0(Ge>>>0,An>>>0,nr>>>0,Ra>>>0)}},E0=(function(){function Ge(nr){return E0=nr.exports,E0=Z1(),Re=E0.K,Lr(),et.unshift(E0.L),Tt--,Tt==0&&ze&&(nr=ze,ze=null,nr()),E0}var An={a:g1};if(Tt++,a.instantiateWasm)try{return a.instantiateWasm(An,Ge)}catch(nr){se(`Module.instantiateWasm callback failed with error: ${nr}`),c(nr)}return o0(An,function(nr){Ge(nr.instance)}).catch(c),{}})();a._OrtInit=(Ge,An)=>(a._OrtInit=E0.M)(Ge,An),a._OrtGetLastError=(Ge,An)=>(a._OrtGetLastError=E0.N)(Ge,An),a._OrtCreateSessionOptions=(Ge,An,nr,Ra,ko,b0,j0,Gg,c1,Hg)=>(a._OrtCreateSessionOptions=E0.O)(Ge,An,nr,Ra,ko,b0,j0,Gg,c1,Hg),a._OrtAppendExecutionProvider=(Ge,An)=>(a._OrtAppendExecutionProvider=E0.P)(Ge,An),a._OrtAddFreeDimensionOverride=(Ge,An,nr)=>(a._OrtAddFreeDimensionOverride=E0.Q)(Ge,An,nr),a._OrtAddSessionConfigEntry=(Ge,An,nr)=>(a._OrtAddSessionConfigEntry=E0.R)(Ge,An,nr),a._OrtReleaseSessionOptions=Ge=>(a._OrtReleaseSessionOptions=E0.S)(Ge),a._OrtCreateSession=(Ge,An,nr)=>(a._OrtCreateSession=E0.T)(Ge,An,nr),a._OrtReleaseSession=Ge=>(a._OrtReleaseSession=E0.U)(Ge),a._OrtGetInputOutputCount=(Ge,An,nr)=>(a._OrtGetInputOutputCount=E0.V)(Ge,An,nr),a._OrtGetInputName=(Ge,An)=>(a._OrtGetInputName=E0.W)(Ge,An),a._OrtGetOutputName=(Ge,An)=>(a._OrtGetOutputName=E0.X)(Ge,An),a._OrtFree=Ge=>(a._OrtFree=E0.Y)(Ge),a._OrtCreateTensor=(Ge,An,nr,Ra,ko,b0)=>(a._OrtCreateTensor=E0.Z)(Ge,An,nr,Ra,ko,b0),a._OrtGetTensorData=(Ge,An,nr,Ra,ko)=>(a._OrtGetTensorData=E0._)(Ge,An,nr,Ra,ko),a._OrtReleaseTensor=Ge=>(a._OrtReleaseTensor=E0.$)(Ge),a._OrtCreateRunOptions=(Ge,An,nr,Ra)=>(a._OrtCreateRunOptions=E0.aa)(Ge,An,nr,Ra),a._OrtAddRunConfigEntry=(Ge,An,nr)=>(a._OrtAddRunConfigEntry=E0.ba)(Ge,An,nr),a._OrtReleaseRunOptions=Ge=>(a._OrtReleaseRunOptions=E0.ca)(Ge),a._OrtCreateBinding=Ge=>(a._OrtCreateBinding=E0.da)(Ge),a._OrtBindInput=(Ge,An,nr)=>(a._OrtBindInput=E0.ea)(Ge,An,nr),a._OrtBindOutput=(Ge,An,nr,Ra)=>(a._OrtBindOutput=E0.fa)(Ge,An,nr,Ra),a._OrtClearBoundOutputs=Ge=>(a._OrtClearBoundOutputs=E0.ga)(Ge),a._OrtReleaseBinding=Ge=>(a._OrtReleaseBinding=E0.ha)(Ge),a._OrtRunWithBinding=(Ge,An,nr,Ra,ko)=>(a._OrtRunWithBinding=E0.ia)(Ge,An,nr,Ra,ko),a._OrtRun=(Ge,An,nr,Ra,ko,b0,j0,Gg)=>(a._OrtRun=E0.ja)(Ge,An,nr,Ra,ko,b0,j0,Gg),a._OrtEndProfiling=Ge=>(a._OrtEndProfiling=E0.ka)(Ge),a._malloc=Ge=>(a._malloc=E0.la)(Ge),a._free=Ge=>(a._free=E0.ma)(Ge);var qg=Ge=>(qg=E0.oa)(Ge),W1=Ge=>(W1=E0.pa)(Ge),V1=Ge=>(V1=E0.qa)(Ge),u0=()=>(u0=E0.ra)();function Z1(){var Ge=E0;Ge=Object.assign({},Ge);var An=nr=>Ra=>nr(Ra)>>>0;return Ge.la=An(Ge.la),Ge.qa=An(Ge.qa),Ge.ra=(nr=>()=>nr()>>>0)(Ge.ra),Ge}a.stackSave=()=>u0(),a.stackRestore=Ge=>W1(Ge),a.stackAlloc=Ge=>V1(Ge),a.UTF8ToString=eg,a.stringToUTF8=(Ge,An,nr)=>p0(Ge,He,An,nr),a.lengthBytesUTF8=i0;var k0;ze=function Ge(){k0||Bg(),k0||(ze=Ge)};function Bg(){if(!(0<Tt)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var Ge=a.preRun.shift();jr.unshift(Ge)}for(;0<jr.length;)jr.shift()(a);if(!(0<Tt||k0||(k0=!0,a.calledRun=!0,Oe))){for(;0<et.length;)et.shift()(a);for(l(a);0<Ft.length;)Ft.shift()(a)}}}return Bg(),p}})();typeof t=="object"&&typeof e=="object"?e.exports=n:typeof define=="function"&&define.amd&&define([],()=>n)}),Ep$1=me(()=>{}),Dp$1=me(()=>{}),Lp$1={};Sr(Lp$1,{cpus:()=>ig});var ig,Cp$1=L(()=>{ig=void 0}),kp$1=me((t,e)=>{var n=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(o={}){function a(){return Ft.buffer!=Ae.buffer&&Mo(),Ae}function l(){return Ft.buffer!=Ae.buffer&&Mo(),Be}function c(){return Ft.buffer!=Ae.buffer&&Mo(),tr}function p(){return Ft.buffer!=Ae.buffer&&Mo(),No}function s(){return Ft.buffer!=Ae.buffer&&Mo(),ah}var u=o,d,g,w=new Promise((de,E)=>{d=de,g=E}),x=Object.assign({},u),C="./this.program",O=(de,E)=>{throw E},Y=typeof window=="object",q=typeof importScripts=="function",ue=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",pe=u.ENVIRONMENT_IS_PTHREAD||!1,se="";function Re(de){return u.locateFile?u.locateFile(de,se):se+de}var Oe,Ce,He;if(ue){var $t=(Qi$1(),ar(Zi$1)),Sn=(ta(),ar(ea));se=q?Sn.dirname(se)+"/":__dirname+"/",Oe=(de,E)=>(de=i0(de)?new URL(de):Sn.normalize(de),$t.readFileSync(de,E?void 0:"utf8")),He=de=>(de=Oe(de,!0),de.buffer||(de=new Uint8Array(de)),de),Ce=(de,E,k,ie=!0)=>{de=i0(de)?new URL(de):Sn.normalize(de),$t.readFile(de,ie?void 0:"utf8",(ge,Le)=>{ge?k(ge):E(ie?Le.buffer:Le)})},!u.thisProgram&&1<process.argv.length&&(C=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),O=(de,E)=>{throw process.exitCode=de,E},global.Worker=Ep$1().Worker}else(Y||q)&&(q?se=self.location.href:typeof document<"u"&&document.currentScript&&(se=document.currentScript.src),typeof i<"u"&&i&&(se=i),se.startsWith("blob:")?se="":se=se.substr(0,se.replace(/[?#].*/,"").lastIndexOf("/")+1),ue||(Oe=de=>{var E=new XMLHttpRequest;return E.open("GET",de,!1),E.send(null),E.responseText},q&&(He=de=>{var E=new XMLHttpRequest;return E.open("GET",de,!1),E.responseType="arraybuffer",E.send(null),new Uint8Array(E.response)}),Ce=(de,E,k)=>{var ie=new XMLHttpRequest;ie.open("GET",de,!0),ie.responseType="arraybuffer",ie.onload=()=>{ie.status==200||ie.status==0&&ie.response?E(ie.response):k()},ie.onerror=k,ie.send(null)}));ue&&typeof performance>"u"&&(global.performance=Dp$1().performance);var xn=console.log.bind(console),Lr=console.error.bind(console);ue&&(xn=(...de)=>$t.writeSync(1,de.join(" ")+`
`),Lr=(...de)=>$t.writeSync(2,de.join(" ")+`
`));var jr=xn,et=Lr;Object.assign(u,x),x=null;var Ft,Tt,ze=!1,Ht,Ae,Be,tr,No,ah;function Mo(){var de=Ft.buffer;u.HEAP8=Ae=new Int8Array(de),u.HEAP16=new Int16Array(de),u.HEAPU8=Be=new Uint8Array(de),u.HEAPU16=new Uint16Array(de),u.HEAP32=tr=new Int32Array(de),u.HEAPU32=No=new Uint32Array(de),u.HEAPF32=new Float32Array(de),u.HEAPF64=ah=new Float64Array(de)}var t0=16777216;if(pe)Ft=u.wasmMemory;else if(u.wasmMemory)Ft=u.wasmMemory;else if(Ft=new WebAssembly.Memory({initial:t0/65536,maximum:65536,shared:!0}),!(Ft.buffer instanceof SharedArrayBuffer))throw et("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),ue&&et("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Mo(),t0=Ft.buffer.byteLength;var o0=[],Xr=[],a0=[],Ih=0,S0=null;function Sg(){if(Ih--,Ih==0&&S0){var de=S0;S0=null,de()}}function n1(de){throw de="Aborted("+de+")",et(de),ze=!0,Ht=1,de=new WebAssembly.RuntimeError(de+". Build with -sASSERTIONS for more info."),g(de),de}var eg=de=>de.startsWith("data:application/octet-stream;base64,"),i0=de=>de.startsWith("file://"),p0;p0="ort-wasm-threaded.wasm",eg(p0)||(p0=Re(p0));function P0(de){if(He)return He(de);throw"both async and sync fetching of the wasm failed"}function _g(de){if(Y||q){if(typeof fetch=="function"&&!i0(de))return fetch(de,{credentials:"same-origin"}).then(E=>{if(!E.ok)throw`failed to load wasm binary file at '${de}'`;return E.arrayBuffer()}).catch(()=>P0(de));if(Ce)return new Promise((E,k)=>{Ce(de,ie=>E(new Uint8Array(ie)),k)})}return Promise.resolve().then(()=>P0(de))}function N0(de,E,k){return _g(de).then(ie=>WebAssembly.instantiate(ie,E)).then(k,ie=>{et(`failed to asynchronously prepare wasm: ${ie}`),n1(ie)})}function F0(de,E){var k=p0;return typeof WebAssembly.instantiateStreaming!="function"||eg(k)||i0(k)||ue||typeof fetch!="function"?N0(k,de,E):fetch(k,{credentials:"same-origin"}).then(ie=>WebAssembly.instantiateStreaming(ie,de).then(E,function(ge){return et(`wasm streaming compile failed: ${ge}`),et("falling back to ArrayBuffer instantiation"),N0(k,de,E)}))}var U0,B0={799444:(de,E,k,ie)=>{if(typeof u>"u"||!u.bb)return 1;if(de=Gg(de>>>0),de.startsWith("./")&&(de=de.substring(2)),de=u.bb.get(de),!de)return 2;if(E>>>=0,k>>>=0,ie>>>=0,E+k>de.byteLength)return 3;try{return l().set(de.subarray(E,E+k),ie>>>0),0}catch{return 4}}};function Zg(de){this.name="ExitStatus",this.message=`Program terminated with exit(${de})`,this.status=de}var Kg=de=>{de.terminate(),de.onmessage=()=>{}},r1=de=>{u0.Oa.length==0&&(W1(),u0.Xa(u0.Oa[0]));var E=u0.Oa.pop();if(!E)return 6;u0.Pa.push(E),u0.La[de.Na]=E,E.Na=de.Na;var k={cmd:"run",start_routine:de.gb,arg:de.cb,pthread_ptr:de.Na};return ue&&E.unref(),E.postMessage(k,de.mb),0},Ug=0,L1=de=>{var E=E1();return de=de(),Z0(E),de},V0=(de,E,...k)=>L1(()=>{for(var ie=k.length,ge=Y1(8*ie),Le=ge>>>3,Kt=0;Kt<k.length;Kt++){var Na=k[Kt];s()[Le+Kt>>>0]=Na}return Cy(de,0,ie,ge,E)});function g1(de){if(pe)return V0(0,1,de);Ht=de,0<Ug||(u0.hb(),u.onExit?.(de),ze=!0),O(de,new Zg(de))}var E0=de=>{if(Ht=de,pe)throw k0(de),"unwind";g1(de)};function qg(){for(var de=u.numThreads;de--;)W1();o0.unshift(()=>{Ih++,V1(()=>Sg())})}function W1(){var de=Re("ort-wasm-threaded.worker.js");de=new Worker(de),u0.Oa.push(de)}function V1(de){pe?de():Promise.all(u0.Oa.map(u0.Xa)).then(de)}var u0={Oa:[],Pa:[],ab:[],La:{},Va(){pe?(u0.receiveObjectTransfer=u0.fb,u0.threadInitTLS=u0.$a,u0.setExitStatus=u0.Za):qg()},Za:de=>Ht=de,pb:["$terminateWorker"],hb:()=>{for(var de of u0.Pa)Kg(de);for(de of u0.Oa)Kg(de);u0.Oa=[],u0.Pa=[],u0.La=[]},Ya:de=>{var E=de.Na;delete u0.La[E],u0.Oa.push(de),u0.Pa.splice(u0.Pa.indexOf(de),1),de.Na=0,H1(E)},fb(){},$a(){u0.ab.forEach(de=>de())},Xa:de=>new Promise(E=>{de.onmessage=Le=>{Le=Le.data;var Kt=Le.cmd;if(Le.targetThread&&Le.targetThread!=d_()){var Na=u0.La[Le.targetThread];Na?Na.postMessage(Le,Le.transferList):et(`Internal error! Worker sent a message "${Kt}" to target pthread ${Le.targetThread}, but that thread no longer exists!`)}else Kt==="checkMailbox"?zy():Kt==="spawnThread"?r1(Le):Kt==="cleanupThread"?u0.Ya(u0.La[Le.thread]):Kt==="killThread"?(Le=Le.thread,Kt=u0.La[Le],delete u0.La[Le],Kg(Kt),H1(Le),u0.Pa.splice(u0.Pa.indexOf(Kt),1),Kt.Na=0):Kt==="cancelThread"?u0.La[Le.thread].postMessage({cmd:"cancel"}):Kt==="loaded"?(de.loaded=!0,ue&&!de.Na&&de.unref(),E(de)):Kt==="alert"?alert(`Thread ${Le.threadId}: ${Le.text}`):Le.target==="setimmediate"?de.postMessage(Le):Kt==="callHandler"?u[Le.handler](...Le.args):Kt&&et(`worker sent an unknown command ${Kt}`)},de.onerror=Le=>{throw et(`worker sent an error! ${Le.filename}:${Le.lineno}: ${Le.message}`),Le},ue&&(de.on("message",Le=>de.onmessage({data:Le})),de.on("error",Le=>de.onerror(Le)));var k=[],ie=["onExit"],ge;for(ge of ie)u.hasOwnProperty(ge)&&k.push(ge);de.postMessage({cmd:"load",handlers:k,urlOrBlob:u.mainScriptUrlOrBlob||i,wasmMemory:Ft,wasmModule:Tt})})};u.PThread=u0;var Z1=de=>{for(;0<de.length;)de.shift()(u)};u.establishStackSpace=()=>{var de=d_(),E=p()[de+52>>>2>>>0];de=p()[de+56>>>2>>>0],by(E,E-de),Z0(E)};function k0(de){if(pe)return V0(1,0,de);E0(de)}var Bg=[],Ge;u.invokeEntryPoint=(de,E)=>{Ug=0;var k=Bg[de];k||(de>=Bg.length&&(Bg.length=de+1),Bg[de]=k=Ge.get(de)),de=k(E),0<Ug?u0.Za(de):Xg(de)};class An{constructor(E){this.Ua=E-24}Va(E,k){p()[this.Ua+16>>>2>>>0]=0,p()[this.Ua+4>>>2>>>0]=E,p()[this.Ua+8>>>2>>>0]=k}}var nr=0;function Ra(de,E,k,ie){return pe?V0(2,1,de,E,k,ie):ko(de,E,k,ie)}function ko(de,E,k,ie){if(de>>>=0,E>>>=0,k>>>=0,ie>>>=0,typeof SharedArrayBuffer>"u")return et("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var ge=[];return pe&&ge.length===0?Ra(de,E,k,ie):(de={gb:k,Na:de,cb:ie,mb:ge},pe?(de.ob="spawnThread",postMessage(de,ge),0):r1(de))}var b0=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,j0=(de,E,k)=>{E>>>=0;var ie=E+k;for(k=E;de[k]&&!(k>=ie);)++k;if(16<k-E&&de.buffer&&b0)return b0.decode(de.buffer instanceof SharedArrayBuffer?de.slice(E,k):de.subarray(E,k));for(ie="";E<k;){var ge=de[E++];if(ge&128){var Le=de[E++]&63;if((ge&224)==192)ie+=String.fromCharCode((ge&31)<<6|Le);else{var Kt=de[E++]&63;ge=(ge&240)==224?(ge&15)<<12|Le<<6|Kt:(ge&7)<<18|Le<<12|Kt<<6|de[E++]&63,65536>ge?ie+=String.fromCharCode(ge):(ge-=65536,ie+=String.fromCharCode(55296|ge>>10,56320|ge&1023))}}else ie+=String.fromCharCode(ge)}return ie},Gg=(de,E)=>(de>>>=0)?j0(l(),de,E):"";function c1(de,E,k){return pe?V0(3,1,de,E,k):0}function Hg(de,E){if(pe)return V0(4,1,de,E)}var zg=de=>{for(var E=0,k=0;k<de.length;++k){var ie=de.charCodeAt(k);127>=ie?E++:2047>=ie?E+=2:55296<=ie&&57343>=ie?(E+=4,++k):E+=3}return E},yy=(de,E,k,ie)=>{if(k>>>=0,!(0<ie))return 0;var ge=k;ie=k+ie-1;for(var Le=0;Le<de.length;++Le){var Kt=de.charCodeAt(Le);if(55296<=Kt&&57343>=Kt){var Na=de.charCodeAt(++Le);Kt=65536+((Kt&1023)<<10)|Na&1023}if(127>=Kt){if(k>=ie)break;E[k++>>>0]=Kt}else{if(2047>=Kt){if(k+1>=ie)break;E[k++>>>0]=192|Kt>>6}else{if(65535>=Kt){if(k+2>=ie)break;E[k++>>>0]=224|Kt>>12}else{if(k+3>=ie)break;E[k++>>>0]=240|Kt>>18,E[k++>>>0]=128|Kt>>12&63}E[k++>>>0]=128|Kt>>6&63}E[k++>>>0]=128|Kt&63}}return E[k>>>0]=0,k-ge},s1=(de,E,k)=>yy(de,l(),E,k);function Hr(de,E){if(pe)return V0(5,1,de,E)}function H0(de,E,k){if(pe)return V0(6,1,de,E,k)}function Y0(de,E,k){return pe?V0(7,1,de,E,k):0}function Dg(de,E){if(pe)return V0(8,1,de,E)}function q1(de,E,k){if(pe)return V0(9,1,de,E,k)}function T1(de,E,k,ie){if(pe)return V0(10,1,de,E,k,ie)}function Uy(de,E,k,ie){if(pe)return V0(11,1,de,E,k,ie)}function T_(de,E,k,ie){if(pe)return V0(12,1,de,E,k,ie)}function B_(de){if(pe)return V0(13,1,de)}function s_(de,E){if(pe)return V0(14,1,de,E)}function uy(de,E,k){if(pe)return V0(15,1,de,E,k)}function By(de){de>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(c(),de>>>2,de).value.then(zy),de+=128,Atomics.store(c(),de>>>2,1))}u.__emscripten_thread_mailbox_await=By;var zy=()=>{var de=d_();if(de&&(By(de),de=cy,!ze))try{if(de(),!(0<Ug))try{pe?Xg(Ht):E0(Ht)}catch(E){E instanceof Zg||E=="unwind"||O(1,E)}}catch(E){E instanceof Zg||E=="unwind"||O(1,E)}};u.checkMailbox=zy;var $_=[],dy=de=>de%4===0&&(de%100!==0||de%400===0),Sy=[0,31,60,91,121,152,182,213,244,274,305,335],E_=[0,31,59,90,120,151,181,212,243,273,304,334];function Wy(de,E,k,ie,ge,Le,Kt,Na){return pe?V0(16,1,de,E,k,ie,ge,Le,Kt,Na):-52}function f1(de,E,k,ie,ge,Le,Kt){if(pe)return V0(17,1,de,E,k,ie,ge,Le,Kt)}var o_=[],Ag={},G1=()=>{if(!l_){var de={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:C||"./this.program"},E;for(E in Ag)Ag[E]===void 0?delete de[E]:de[E]=Ag[E];var k=[];for(E in de)k.push(`${E}=${de[E]}`);l_=k}return l_},l_;function o1(de,E){if(pe)return V0(18,1,de,E);de>>>=0,E>>>=0;var k=0;return G1().forEach((ie,ge)=>{var Le=E+k;for(ge=p()[de+4*ge>>>2>>>0]=Le,Le=0;Le<ie.length;++Le)a()[ge++>>>0]=ie.charCodeAt(Le);a()[ge>>>0]=0,k+=ie.length+1}),0}function _y(de,E){if(pe)return V0(19,1,de,E);de>>>=0,E>>>=0;var k=G1();p()[de>>>2>>>0]=k.length;var ie=0;return k.forEach(ge=>ie+=ge.length+1),p()[E>>>2>>>0]=ie,0}function Vy(de){return pe?V0(20,1,de):52}function y1(de,E,k,ie){return pe?V0(21,1,de,E,k,ie):52}function wy(de,E,k,ie,ge){return pe?V0(22,1,de,E,k,ie,ge):70}var Mg=[null,[],[]];function $1(de,E,k,ie){if(pe)return V0(23,1,de,E,k,ie);E>>>=0,k>>>=0,ie>>>=0;for(var ge=0,Le=0;Le<k;Le++){var Kt=p()[E>>>2>>>0],Na=p()[E+4>>>2>>>0];E+=8;for(var Uo=0;Uo<Na;Uo++){var s0=l()[Kt+Uo>>>0],n0=Mg[de];s0===0||s0===10?((de===1?jr:et)(j0(n0,0)),n0.length=0):n0.push(s0)}ge+=Na}return p()[ie>>>2>>>0]=ge,0}var l1=[31,29,31,30,31,30,31,31,30,31,30,31],z_=[31,28,31,30,31,30,31,31,30,31,30,31];function W_(de){var E=Array(zg(de)+1);return yy(de,E,0,E.length),E}var S_=(de,E)=>{a().set(de,E>>>0)};function Ay(de,E,k,ie){function ge(Zr,ir,h0){for(Zr=typeof Zr=="number"?Zr.toString():Zr||"";Zr.length<ir;)Zr=h0[0]+Zr;return Zr}function Le(Zr,ir){return ge(Zr,ir,"0")}function Kt(Zr,ir){function h0(G0){return 0>G0?-1:0<G0?1:0}var z0;return(z0=h0(Zr.getFullYear()-ir.getFullYear()))===0&&(z0=h0(Zr.getMonth()-ir.getMonth()))===0&&(z0=h0(Zr.getDate()-ir.getDate())),z0}function Na(Zr){switch(Zr.getDay()){case 0:return new Date(Zr.getFullYear()-1,11,29);case 1:return Zr;case 2:return new Date(Zr.getFullYear(),0,3);case 3:return new Date(Zr.getFullYear(),0,2);case 4:return new Date(Zr.getFullYear(),0,1);case 5:return new Date(Zr.getFullYear()-1,11,31);case 6:return new Date(Zr.getFullYear()-1,11,30)}}function Uo(Zr){var ir=Zr.Qa;for(Zr=new Date(new Date(Zr.Ra+1900,0,1).getTime());0<ir;){var h0=Zr.getMonth(),z0=(dy(Zr.getFullYear())?l1:z_)[h0];if(ir>z0-Zr.getDate())ir-=z0-Zr.getDate()+1,Zr.setDate(1),11>h0?Zr.setMonth(h0+1):(Zr.setMonth(0),Zr.setFullYear(Zr.getFullYear()+1));else{Zr.setDate(Zr.getDate()+ir);break}}return h0=new Date(Zr.getFullYear()+1,0,4),ir=Na(new Date(Zr.getFullYear(),0,4)),h0=Na(h0),0>=Kt(ir,Zr)?0>=Kt(h0,Zr)?Zr.getFullYear()+1:Zr.getFullYear():Zr.getFullYear()-1}de>>>=0,E>>>=0,k>>>=0,ie>>>=0;var s0=p()[ie+40>>>2>>>0];ie={kb:c()[ie>>>2>>>0],jb:c()[ie+4>>>2>>>0],Sa:c()[ie+8>>>2>>>0],Wa:c()[ie+12>>>2>>>0],Ta:c()[ie+16>>>2>>>0],Ra:c()[ie+20>>>2>>>0],Ma:c()[ie+24>>>2>>>0],Qa:c()[ie+28>>>2>>>0],qb:c()[ie+32>>>2>>>0],ib:c()[ie+36>>>2>>>0],lb:s0?Gg(s0):""},k=Gg(k),s0={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var n0 in s0)k=k.replace(new RegExp(n0,"g"),s0[n0]);var _0="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ag="January February March April May June July August September October November December".split(" ");s0={"%a":Zr=>_0[Zr.Ma].substring(0,3),"%A":Zr=>_0[Zr.Ma],"%b":Zr=>ag[Zr.Ta].substring(0,3),"%B":Zr=>ag[Zr.Ta],"%C":Zr=>Le((Zr.Ra+1900)/100|0,2),"%d":Zr=>Le(Zr.Wa,2),"%e":Zr=>ge(Zr.Wa,2," "),"%g":Zr=>Uo(Zr).toString().substring(2),"%G":Uo,"%H":Zr=>Le(Zr.Sa,2),"%I":Zr=>(Zr=Zr.Sa,Zr==0?Zr=12:12<Zr&&(Zr-=12),Le(Zr,2)),"%j":Zr=>{for(var ir=0,h0=0;h0<=Zr.Ta-1;ir+=(dy(Zr.Ra+1900)?l1:z_)[h0++]);return Le(Zr.Wa+ir,3)},"%m":Zr=>Le(Zr.Ta+1,2),"%M":Zr=>Le(Zr.jb,2),"%n":()=>`
`,"%p":Zr=>0<=Zr.Sa&&12>Zr.Sa?"AM":"PM","%S":Zr=>Le(Zr.kb,2),"%t":()=>"	","%u":Zr=>Zr.Ma||7,"%U":Zr=>Le(Math.floor((Zr.Qa+7-Zr.Ma)/7),2),"%V":Zr=>{var ir=Math.floor((Zr.Qa+7-(Zr.Ma+6)%7)/7);if(2>=(Zr.Ma+371-Zr.Qa-2)%7&&ir++,ir)ir==53&&(h0=(Zr.Ma+371-Zr.Qa)%7,h0==4||h0==3&&dy(Zr.Ra)||(ir=1));else{ir=52;var h0=(Zr.Ma+7-Zr.Qa-1)%7;(h0==4||h0==5&&dy(Zr.Ra%400-1))&&ir++}return Le(ir,2)},"%w":Zr=>Zr.Ma,"%W":Zr=>Le(Math.floor((Zr.Qa+7-(Zr.Ma+6)%7)/7),2),"%y":Zr=>(Zr.Ra+1900).toString().substring(2),"%Y":Zr=>Zr.Ra+1900,"%z":Zr=>{Zr=Zr.ib;var ir=0<=Zr;return Zr=Math.abs(Zr)/60,(ir?"+":"-")+("0000"+(Zr/60*100+Zr%60)).slice(-4)},"%Z":Zr=>Zr.lb,"%%":()=>"%"},k=k.replace(/%%/g,"\0\0");for(n0 in s0)k.includes(n0)&&(k=k.replace(new RegExp(n0,"g"),s0[n0](ie)));return k=k.replace(/\0\0/g,"%"),n0=W_(k),n0.length>E?0:(S_(n0,de),n0.length-1)}u0.Va();var u_=[g1,k0,Ra,c1,Hg,Hr,H0,Y0,Dg,q1,T1,Uy,T_,B_,s_,uy,Wy,f1,o1,_y,Vy,y1,wy,$1],Iy={b:function(de,E,k){throw de>>>=0,new An(de).Va(E>>>0,k>>>0),nr=de,nr},L:function(de){A0(de>>>0,!q,1,!Y,131072,!1),u0.$a()},j:function(de){de>>>=0,pe?postMessage({cmd:"cleanupThread",thread:de}):u0.Ya(u0.La[de])},H:ko,h:c1,S:Hg,D:Hr,F:H0,T:Y0,Q:Dg,J:q1,P:T1,n:Uy,E:T_,B:B_,R:s_,C:uy,p:()=>1,z:function(de,E){de>>>=0,de==E>>>0?setTimeout(zy):pe?postMessage({targetThread:de,cmd:"checkMailbox"}):(de=u0.La[de])&&de.postMessage({cmd:"checkMailbox"})},I:function(de,E,k,ie,ge){E>>>=0,k>>>=0,$_.length=ie,ge=ge>>>0>>>3;for(var Le=0;Le<ie;Le++)$_[Le]=s()[ge+Le>>>0];return de=E?B0[E]:u_[de],u0.eb=k,k=de(...$_),u0.eb=0,k},K:By,o:function(de){ue&&u0.La[de>>>0].ref()},s:function(de,E,k){de=E+2097152>>>0<4194305-!!de?(de>>>0)+4294967296*E:NaN,k>>>=0,de=new Date(1e3*de),c()[k>>>2>>>0]=de.getUTCSeconds(),c()[k+4>>>2>>>0]=de.getUTCMinutes(),c()[k+8>>>2>>>0]=de.getUTCHours(),c()[k+12>>>2>>>0]=de.getUTCDate(),c()[k+16>>>2>>>0]=de.getUTCMonth(),c()[k+20>>>2>>>0]=de.getUTCFullYear()-1900,c()[k+24>>>2>>>0]=de.getUTCDay(),de=(de.getTime()-Date.UTC(de.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,c()[k+28>>>2>>>0]=de},t:function(de,E,k){de=E+2097152>>>0<4194305-!!de?(de>>>0)+4294967296*E:NaN,k>>>=0,de=new Date(1e3*de),c()[k>>>2>>>0]=de.getSeconds(),c()[k+4>>>2>>>0]=de.getMinutes(),c()[k+8>>>2>>>0]=de.getHours(),c()[k+12>>>2>>>0]=de.getDate(),c()[k+16>>>2>>>0]=de.getMonth(),c()[k+20>>>2>>>0]=de.getFullYear()-1900,c()[k+24>>>2>>>0]=de.getDay(),E=(dy(de.getFullYear())?Sy:E_)[de.getMonth()]+de.getDate()-1|0,c()[k+28>>>2>>>0]=E,c()[k+36>>>2>>>0]=-(60*de.getTimezoneOffset()),E=new Date(de.getFullYear(),6,1).getTimezoneOffset();var ie=new Date(de.getFullYear(),0,1).getTimezoneOffset();de=(E!=ie&&de.getTimezoneOffset()==Math.min(ie,E))|0,c()[k+32>>>2>>>0]=de},u:function(de){de>>>=0;var E=new Date(c()[de+20>>>2>>>0]+1900,c()[de+16>>>2>>>0],c()[de+12>>>2>>>0],c()[de+8>>>2>>>0],c()[de+4>>>2>>>0],c()[de>>>2>>>0],0),k=c()[de+32>>>2>>>0],ie=E.getTimezoneOffset(),ge=new Date(E.getFullYear(),6,1).getTimezoneOffset(),Le=new Date(E.getFullYear(),0,1).getTimezoneOffset(),Kt=Math.min(Le,ge);return 0>k?c()[de+32>>>2>>>0]=+(ge!=Le&&Kt==ie):0<k!=(Kt==ie)&&(ge=Math.max(Le,ge),E.setTime(E.getTime()+6e4*((0<k?Kt:ge)-ie))),c()[de+24>>>2>>>0]=E.getDay(),k=(dy(E.getFullYear())?Sy:E_)[E.getMonth()]+E.getDate()-1|0,c()[de+28>>>2>>>0]=k,c()[de>>>2>>>0]=E.getSeconds(),c()[de+4>>>2>>>0]=E.getMinutes(),c()[de+8>>>2>>>0]=E.getHours(),c()[de+12>>>2>>>0]=E.getDate(),c()[de+16>>>2>>>0]=E.getMonth(),c()[de+20>>>2>>>0]=E.getYear(),de=E.getTime(),de=isNaN(de)?-1:de/1e3,Zy((U0=de,1<=+Math.abs(U0)?0<U0?+Math.floor(U0/4294967296)>>>0:~~+Math.ceil((U0-+(~~U0>>>0))/4294967296)>>>0:0)),de>>>0},q:Wy,r:f1,y:function(de,E,k,ie){de>>>=0,E>>>=0,k>>>=0,ie>>>=0;var ge=new Date().getFullYear(),Le=new Date(ge,0,1),Kt=new Date(ge,6,1);ge=Le.getTimezoneOffset();var Na=Kt.getTimezoneOffset(),Uo=Math.max(ge,Na);p()[de>>>2>>>0]=60*Uo,c()[E>>>2>>>0]=+(ge!=Na),de=s0=>s0.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],Le=de(Le),Kt=de(Kt),Na<ge?(s1(Le,k,17),s1(Kt,ie,17)):(s1(Le,ie,17),s1(Kt,k,17))},c:()=>{n1("")},O:function(de,E,k){de>>>=0,E>>>=0,k>>>=0,o_.length=0;for(var ie;ie=l()[E++>>>0];){var ge=ie!=105;ge&=ie!=112,k+=ge&&k%8?4:0,o_.push(ie==112?p()[k>>>2>>>0]:ie==105?c()[k>>>2>>>0]:s()[k>>>3>>>0]),k+=ge?8:4}return B0[de](...o_)},k:()=>{},i:()=>Date.now(),U:()=>{throw Ug+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>ue?(Cp$1(),ar(Lp$1)).cpus().length:navigator.hardwareConcurrency,x:function(de){de>>>=0;var E=l().length;if(de<=E||4294901760<de)return!1;for(var k=1;4>=k;k*=2){var ie=E*(1+.2/k);ie=Math.min(ie,de+100663296);var ge=Math;ie=Math.max(de,ie);e:{ge=(ge.min.call(ge,4294901760,ie+(65536-ie%65536)%65536)-Ft.buffer.byteLength+65535)/65536;try{Ft.grow(ge),Mo();var Le=1;break e}catch{}Le=void 0}if(Le)return!0}return!1},M:o1,N:_y,G:E0,g:Vy,m:y1,v:wy,l:$1,a:Ft||u.wasmMemory,w:Ay,d:function(de,E,k,ie){return Ay(de>>>0,E>>>0,k>>>0,ie>>>0)}},v0=(function(){function de(k,ie){return v0=k.exports,v0=_1(),u0.ab.push(v0.ya),Ge=v0.za,Xr.unshift(v0.V),Tt=ie,Sg(),v0}var E={a:Iy};if(Ih++,u.instantiateWasm)try{return u.instantiateWasm(E,de)}catch(k){et(`Module.instantiateWasm callback failed with error: ${k}`),g(k)}return F0(E,function(k){de(k.instance,k.module)}).catch(g),{}})();u._OrtInit=(de,E)=>(u._OrtInit=v0.W)(de,E),u._OrtGetLastError=(de,E)=>(u._OrtGetLastError=v0.X)(de,E),u._OrtCreateSessionOptions=(de,E,k,ie,ge,Le,Kt,Na,Uo,s0)=>(u._OrtCreateSessionOptions=v0.Y)(de,E,k,ie,ge,Le,Kt,Na,Uo,s0),u._OrtAppendExecutionProvider=(de,E)=>(u._OrtAppendExecutionProvider=v0.Z)(de,E),u._OrtAddFreeDimensionOverride=(de,E,k)=>(u._OrtAddFreeDimensionOverride=v0._)(de,E,k),u._OrtAddSessionConfigEntry=(de,E,k)=>(u._OrtAddSessionConfigEntry=v0.$)(de,E,k),u._OrtReleaseSessionOptions=de=>(u._OrtReleaseSessionOptions=v0.aa)(de),u._OrtCreateSession=(de,E,k)=>(u._OrtCreateSession=v0.ba)(de,E,k),u._OrtReleaseSession=de=>(u._OrtReleaseSession=v0.ca)(de),u._OrtGetInputOutputCount=(de,E,k)=>(u._OrtGetInputOutputCount=v0.da)(de,E,k),u._OrtGetInputName=(de,E)=>(u._OrtGetInputName=v0.ea)(de,E),u._OrtGetOutputName=(de,E)=>(u._OrtGetOutputName=v0.fa)(de,E),u._OrtFree=de=>(u._OrtFree=v0.ga)(de),u._OrtCreateTensor=(de,E,k,ie,ge,Le)=>(u._OrtCreateTensor=v0.ha)(de,E,k,ie,ge,Le),u._OrtGetTensorData=(de,E,k,ie,ge)=>(u._OrtGetTensorData=v0.ia)(de,E,k,ie,ge),u._OrtReleaseTensor=de=>(u._OrtReleaseTensor=v0.ja)(de),u._OrtCreateRunOptions=(de,E,k,ie)=>(u._OrtCreateRunOptions=v0.ka)(de,E,k,ie),u._OrtAddRunConfigEntry=(de,E,k)=>(u._OrtAddRunConfigEntry=v0.la)(de,E,k),u._OrtReleaseRunOptions=de=>(u._OrtReleaseRunOptions=v0.ma)(de),u._OrtCreateBinding=de=>(u._OrtCreateBinding=v0.na)(de),u._OrtBindInput=(de,E,k)=>(u._OrtBindInput=v0.oa)(de,E,k),u._OrtBindOutput=(de,E,k,ie)=>(u._OrtBindOutput=v0.pa)(de,E,k,ie),u._OrtClearBoundOutputs=de=>(u._OrtClearBoundOutputs=v0.qa)(de),u._OrtReleaseBinding=de=>(u._OrtReleaseBinding=v0.ra)(de),u._OrtRunWithBinding=(de,E,k,ie,ge)=>(u._OrtRunWithBinding=v0.sa)(de,E,k,ie,ge),u._OrtRun=(de,E,k,ie,ge,Le,Kt,Na)=>(u._OrtRun=v0.ta)(de,E,k,ie,ge,Le,Kt,Na),u._OrtEndProfiling=de=>(u._OrtEndProfiling=v0.ua)(de);var d_=u._pthread_self=()=>(d_=u._pthread_self=v0.va)();u._malloc=de=>(u._malloc=v0.wa)(de),u._free=de=>(u._free=v0.xa)(de),u.__emscripten_tls_init=()=>(u.__emscripten_tls_init=v0.ya)();var A0=u.__emscripten_thread_init=(de,E,k,ie,ge,Le)=>(A0=u.__emscripten_thread_init=v0.Aa)(de,E,k,ie,ge,Le);u.__emscripten_thread_crashed=()=>(u.__emscripten_thread_crashed=v0.Ba)();var Cy=(de,E,k,ie,ge)=>(Cy=v0.Ca)(de,E,k,ie,ge),H1=de=>(H1=v0.Da)(de),Xg=u.__emscripten_thread_exit=de=>(Xg=u.__emscripten_thread_exit=v0.Ea)(de),cy=()=>(cy=v0.Fa)(),Zy=de=>(Zy=v0.Ga)(de),by=(de,E)=>(by=v0.Ha)(de,E),Z0=de=>(Z0=v0.Ia)(de),Y1=de=>(Y1=v0.Ja)(de),E1=()=>(E1=v0.Ka)();function _1(){var de=v0;de=Object.assign({},de);var E=ie=>()=>ie()>>>0,k=ie=>ge=>ie(ge)>>>0;return de.va=E(de.va),de.wa=k(de.wa),de.emscripten_main_runtime_thread_id=E(de.emscripten_main_runtime_thread_id),de.Ja=k(de.Ja),de.Ka=E(de.Ka),de}u.wasmMemory=Ft,u.stackSave=()=>E1(),u.stackRestore=de=>Z0(de),u.stackAlloc=de=>Y1(de),u.keepRuntimeAlive=()=>0<Ug,u.UTF8ToString=Gg,u.stringToUTF8=s1,u.lengthBytesUTF8=zg,u.ExitStatus=Zg,u.PThread=u0;var qy;S0=function de(){qy||K1(),qy||(S0=de)};function K1(){if(!(0<Ih))if(pe)d(u),pe||Z1(Xr),startWorker(u);else{if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)o0.unshift(u.preRun.shift());Z1(o0),0<Ih||qy||(qy=!0,u.calledRun=!0,ze||(pe||Z1(Xr),d(u),pe||Z1(a0)))}}return K1(),w}})();typeof t=="object"&&typeof e=="object"?e.exports=n:typeof define=="function"&&define.amd&&define([],()=>n)}),Bp$1=me((t,e)=>{e.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),Rp$1,sg,oa$1,ia$1,So$1,Np$1,ug,lg,fg,Mp$1,De$1,Ur=L(()=>{Rp$1=Pp$1(),sg=kp$1(),ia$1=!1,So$1=!1,Np$1=!1,ug=t=>{if(t===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+t+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+t+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},lg=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},fg=(t,e)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":e?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Mp$1=async t=>{if(ia$1)return Promise.resolve();if(So$1)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Np$1)throw new Error("previous call to 'initializeWebAssembly()' failed.");So$1=!0;let e=t.initTimeout,n=t.numThreads,i=t.simd,o=ug(n),a=i&&lg(),l=t.wasmPaths,c=typeof l=="string"?l:void 0,p=fg(a,o),s=typeof l=="object"?l[p]:void 0,u=!1,d=[];if(e>0&&d.push(new Promise(g=>{setTimeout(()=>{u=!0,g()},e)})),d.push(new Promise((g,w)=>{let x=o?sg:Rp$1,C={locateFile:(O,Y)=>o&&O.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Bp$1()],{type:"text/javascript"})):O.endsWith(".wasm")?s||(c??Y)+p:Y+O};if(o)if(C.numThreads=n,typeof Blob>"u")C.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let O=`var ortWasmThreaded=${x.toString()};`;C.mainScriptUrlOrBlob=new Blob([O],{type:"text/javascript"})}x(C).then(O=>{So$1=!1,ia$1=!0,oa$1=O,g()},O=>{So$1=!1,Np$1=!0,w(O)})})),await Promise.race(d),u)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},De$1=()=>{if(ia$1&&oa$1)return oa$1;throw new Error("WebAssembly is not initialized yet.")}}),ve,bn,_e$1,Ao=L(()=>{Ur(),ve=(t,e)=>{let n=De$1(),i=n.lengthBytesUTF8(t)+1,o=n._malloc(i);return n.stringToUTF8(t,o,i),e.push(o),o},bn=(t,e,n,i)=>{if(typeof t=="object"&&t!==null){if(n.has(t))throw new Error("Circular reference in options");n.add(t)}Object.entries(t).forEach(([o,a])=>{let l=e?e+o:o;if(typeof a=="object")bn(a,l+".",n,i);else if(typeof a=="string"||typeof a=="number")i(l,a.toString());else if(typeof a=="boolean")i(l,a?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof a}`)})},_e$1=t=>{let e=De$1(),n=e.stackSave();try{let i=e.stackAlloc(8);e._OrtGetLastError(i,i+4);let o=e.HEAP32[i/4],a=e.HEAPU32[i/4+1],l=a?e.UTF8ToString(a):"";throw new Error(`${t} ERROR_CODE: ${o}, ERROR_MESSAGE: ${l}`)}finally{e.stackRestore(n)}}}),Gp$1,Up$1=L(()=>{Ur(),Ao(),Gp$1=t=>{let e=De$1(),n=0,i=[],o=t||{};try{if(t?.logSeverityLevel===void 0)o.logSeverityLevel=2;else if(typeof t.logSeverityLevel!="number"||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(t?.logVerbosityLevel===void 0)o.logVerbosityLevel=0;else if(typeof t.logVerbosityLevel!="number"||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);t?.terminate===void 0&&(o.terminate=!1);let a=0;return t?.tag!==void 0&&(a=ve(t.tag,i)),n=e._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,a),n===0&&_e$1("Can't create run options."),t?.extra!==void 0&&bn(t.extra,"",new WeakSet,(l,c)=>{let p=ve(l,i),s=ve(c,i);e._OrtAddRunConfigEntry(n,p,s)!==0&&_e$1(`Can't set a run config entry: ${l} - ${c}.`)}),[n,i]}catch(a){throw n!==0&&e._OrtReleaseRunOptions(n),i.forEach(l=>e._free(l)),a}}}),cg,pg,dg,hg,zp$1,Vp$1=L(()=>{Ur(),Ao(),cg=t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}},pg=t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}},dg=t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});let e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1"),t.executionProviders&&t.executionProviders.some(n=>(typeof n=="string"?n:n.name)==="webgpu")&&(t.enableMemPattern=!1)},hg=(t,e,n)=>{for(let i of e){let o=typeof i=="string"?i:i.name;switch(o){case"webnn":if(o="WEBNN",typeof i!="string"){let l=i;if(l?.deviceType){let c=ve("deviceType",n),p=ve(l.deviceType,n);De$1()._OrtAddSessionConfigEntry(t,c,p)!==0&&_e$1(`Can't set a session config entry: 'deviceType' - ${l.deviceType}.`)}if(l?.numThreads){let c=l.numThreads;(typeof c!="number"||!Number.isInteger(c)||c<0)&&(c=0);let p=ve("numThreads",n),s=ve(c.toString(),n);De$1()._OrtAddSessionConfigEntry(t,p,s)!==0&&_e$1(`Can't set a session config entry: 'numThreads' - ${l.numThreads}.`)}if(l?.powerPreference){let c=ve("powerPreference",n),p=ve(l.powerPreference,n);De$1()._OrtAddSessionConfigEntry(t,c,p)!==0&&_e$1(`Can't set a session config entry: 'powerPreference' - ${l.powerPreference}.`)}}break;case"webgpu":if(o="JS",typeof i!="string"){let l=i;if(l?.preferredLayout){if(l.preferredLayout!=="NCHW"&&l.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${l.preferredLayout}`);let c=ve("preferredLayout",n),p=ve(l.preferredLayout,n);De$1()._OrtAddSessionConfigEntry(t,c,p)!==0&&_e$1(`Can't set a session config entry: 'preferredLayout' - ${l.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${o}`)}let a=ve(o,n);De$1()._OrtAppendExecutionProvider(t,a)!==0&&_e$1(`Can't append execution provider: ${o}.`)}},zp$1=t=>{let e=De$1(),n=0,i=[],o=t||{};dg(o);try{let a=cg(o.graphOptimizationLevel??"all"),l=pg(o.executionMode??"sequential"),c=typeof o.logId=="string"?ve(o.logId,i):0,p=o.logSeverityLevel??2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);let s=o.logVerbosityLevel??0;if(!Number.isInteger(s)||s<0||s>4)throw new Error(`log verbosity level is not valid: ${s}`);let u=typeof o.optimizedModelFilePath=="string"?ve(o.optimizedModelFilePath,i):0;if(n=e._OrtCreateSessionOptions(a,!!o.enableCpuMemArena,!!o.enableMemPattern,l,!!o.enableProfiling,0,c,p,s,u),n===0&&_e$1("Can't create session options."),o.executionProviders&&hg(n,o.executionProviders,i),o.enableGraphCapture!==void 0){if(typeof o.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${o.enableGraphCapture}`);let d=ve("enableGraphCapture",i),g=ve(o.enableGraphCapture.toString(),i);e._OrtAddSessionConfigEntry(n,d,g)!==0&&_e$1(`Can't set a session config entry: 'enableGraphCapture' - ${o.enableGraphCapture}.`)}if(o.freeDimensionOverrides)for(let[d,g]of Object.entries(o.freeDimensionOverrides)){if(typeof d!="string")throw new Error(`free dimension override name must be a string: ${d}`);if(typeof g!="number"||!Number.isInteger(g)||g<0)throw new Error(`free dimension override value must be a non-negative integer: ${g}`);let w=ve(d,i);e._OrtAddFreeDimensionOverride(n,w,g)!==0&&_e$1(`Can't set a free dimension override: ${d} - ${g}.`)}return o.extra!==void 0&&bn(o.extra,"",new WeakSet,(d,g)=>{let w=ve(d,i),x=ve(g,i);e._OrtAddSessionConfigEntry(n,w,x)!==0&&_e$1(`Can't set a session config entry: ${d} - ${g}.`)}),[n,i]}catch(a){throw n!==0&&e._OrtReleaseSessionOptions(n),i.forEach(l=>e._free(l)),a}}}),aa$1,Wp$1,sa$1,Hp$1,qp$1,Po,jp$1,ua$1=L(()=>{aa$1=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},Wp$1=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},sa$1=t=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][t],Hp$1=t=>{switch(t){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}},qp$1=t=>{switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${t}`)}},Po=t=>t==="float32"||t==="float16"||t==="int32"||t==="int64"||t==="uint32"||t==="uint8"||t==="bool",jp$1=t=>{switch(t){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${t}`)}}}),gn,la$1=L(()=>{gn=async t=>{if(typeof t=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(t))}catch(e){if(e.code==="ERR_FS_FILE_TOO_LARGE"){let n=(void 0)(t),i=[];for await(let o of n)i.push(o);return new Uint8Array(Buffer.concat(i))}throw e}else{let e=await fetch(t);if(!e.ok)throw new Error(`failed to load external data file: ${t}`);let n=e.headers.get("Content-Length"),i=n?parseInt(n,10):0;if(i<1073741824)return new Uint8Array(await e.arrayBuffer());{if(!e.body)throw new Error(`failed to load external data file: ${t}, no response body.`);let o=e.body.getReader(),a;try{a=new ArrayBuffer(i)}catch(c){if(c instanceof RangeError){let p=Math.ceil(i/65536);a=new WebAssembly.Memory({initial:p,maximum:p}).buffer}else throw c}let l=0;for(;;){let{done:c,value:p}=await o.read();if(c)break;let s=p.byteLength;new Uint8Array(a,l,s).set(p),l+=s}return new Uint8Array(a,0,i)}}else return t instanceof Blob?new Uint8Array(await t.arrayBuffer()):t instanceof Uint8Array?t:new Uint8Array(t)}}),mg,Xp$1,Kp$1,zr$1,bg,fa$1,Jp$1,Zp$1,Yp$1,Qp$1,ed$1,td$1,rd$1=L(()=>{Up$1(),Vp$1(),ua$1(),Ur(),Ao(),la$1(),mg=(t,e)=>{De$1()._OrtInit(t,e)!==0&&_e$1("Can't initialize onnxruntime.")},Xp$1=async t=>{mg(t.wasm.numThreads,qp$1(t.logLevel))},Kp$1=async(t,e)=>{},zr$1=new Map,bg=t=>{let e=De$1(),n=e.stackSave();try{let i=e.stackAlloc(8);return e._OrtGetInputOutputCount(t,i,i+4)!==0&&_e$1("Can't get session input/output count."),[e.HEAP32[i/4],e.HEAP32[i/4+1]]}finally{e.stackRestore(n)}},fa$1=t=>{let e=De$1(),n=e._malloc(t.byteLength);if(n===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${t.byteLength}.`);return e.HEAPU8.set(t,n),[n,t.byteLength]},Jp$1=async(t,e)=>{let n,i,o=De$1();Array.isArray(t)?[n,i]=t:t.buffer===o.HEAPU8.buffer?[n,i]=[t.byteOffset,t.byteLength]:[n,i]=fa$1(t);let a=0,l=0,c=[],p=[],s=[];try{if([l,c]=zp$1(e),e?.externalData&&o.mountExternalData){let Y=[];for(let q of e.externalData){let ue=typeof q=="string"?q:q.path;Y.push(gn(typeof q=="string"?q:q.data).then(pe=>{o.mountExternalData(ue,pe)}))}await Promise.all(Y)}a=await o._OrtCreateSession(n,i,l),a===0&&_e$1("Can't create a session.");let[u,d]=bg(a),g=!!e?.enableGraphCapture,w=[],x=[],C=[];for(let Y=0;Y<u;Y++){let q=o._OrtGetInputName(a,Y);q===0&&_e$1("Can't get an input name."),p.push(q),w.push(o.UTF8ToString(q))}for(let Y=0;Y<d;Y++){let q=o._OrtGetOutputName(a,Y);q===0&&_e$1("Can't get an output name."),s.push(q);let ue=o.UTF8ToString(q);x.push(ue)}return zr$1.set(a,[a,p,s,null,g,!1]),[a,w,x]}catch(u){throw p.forEach(d=>o._OrtFree(d)),s.forEach(d=>o._OrtFree(d)),a!==0&&o._OrtReleaseSession(a),u}finally{o._free(n),l!==0&&o._OrtReleaseSessionOptions(l),c.forEach(u=>o._free(u)),o.unmountExternalData?.()}},Zp$1=t=>{let e=De$1(),n=zr$1.get(t);if(!n)throw new Error(`cannot release session. invalid session id: ${t}`);let[i,o,a,l,c]=n;l&&(c&&e._OrtClearBoundOutputs(l.handle),e._OrtReleaseBinding(l.handle)),e.jsepOnReleaseSession?.(t),o.forEach(p=>e._OrtFree(p)),a.forEach(p=>e._OrtFree(p)),e._OrtReleaseSession(i),zr$1.delete(t)},Yp$1=(t,e,n,i,o,a=!1)=>{if(!t){e.push(0);return}let l=De$1(),c=t[0],p=t[1],s=t[3],u,d;if(c==="string"&&s==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(a&&s!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${o} when enableGraphCapture is true.`);if(s==="gpu-buffer"){let x=t[2].gpuBuffer,C=sa$1(aa$1(c));d=p.reduce((Y,q)=>Y*q,1)*C;let O=l.jsepRegisterBuffer;if(!O)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');u=O(i,o,x,d)}else{let x=t[2];if(Array.isArray(x)){d=4*x.length,u=l._malloc(d),n.push(u);let C=u/4;for(let O=0;O<x.length;O++){if(typeof x[O]!="string")throw new TypeError(`tensor data at index ${O} is not a string`);l.HEAPU32[C++]=ve(x[O],n)}}else d=x.byteLength,u=l._malloc(d),n.push(u),l.HEAPU8.set(new Uint8Array(x.buffer,x.byteOffset,d),u)}let g=l.stackSave(),w=l.stackAlloc(4*p.length);try{let x=w/4;p.forEach(O=>l.HEAP32[x++]=O);let C=l._OrtCreateTensor(aa$1(c),u,d,w,p.length,jp$1(s));C===0&&_e$1(`Can't create tensor for input/output. session=${i}, index=${o}.`),e.push(C)}finally{l.stackRestore(g)}},Qp$1=async(t,e,n,i,o,a)=>{let l=De$1(),c=zr$1.get(t);if(!c)throw new Error(`cannot run inference. invalid session id: ${t}`);let p=c[0],s=c[1],u=c[2],d=c[3],g=c[4];c[5];let w=e.length,x=i.length,C=0,O=[],Y=[],q=[],ue=[],pe=l.stackSave(),se=l.stackAlloc(w*4),Re=l.stackAlloc(w*4),Oe=l.stackAlloc(x*4),Ce=l.stackAlloc(x*4);try{[C,O]=Gp$1(a);for(let et=0;et<w;et++)Yp$1(n[et],Y,ue,t,e[et],g);for(let et=0;et<x;et++)Yp$1(o[et],q,ue,t,w+i[et],g);let He=se/4,$t=Re/4,Sn=Oe/4,xn=Ce/4;for(let et=0;et<w;et++)l.HEAPU32[He++]=Y[et],l.HEAPU32[$t++]=s[e[et]];for(let et=0;et<x;et++)l.HEAPU32[Sn++]=q[et],l.HEAPU32[xn++]=u[i[et]];l.jsepOnRunStart?.(p);let Lr;Lr=await l._OrtRun(p,Re,se,w,Ce,x,Oe,C),Lr!==0&&_e$1("failed to call OrtRun().");let jr=[];for(let et=0;et<x;et++){let Ft=l.HEAPU32[Oe/4+et];if(Ft===q[et]){jr.push(o[et]);continue}let Tt=l.stackSave(),ze=l.stackAlloc(16),Ht=!1,Ae,Be=0;try{l._OrtGetTensorData(Ft,ze,ze+4,ze+8,ze+12)!==0&&_e$1(`Can't access output tensor data on index ${et}.`);let tr=ze/4,No=l.HEAPU32[tr++];Be=l.HEAPU32[tr++];let ah=l.HEAPU32[tr++],Mo=l.HEAPU32[tr++],t0=[];for(let a0=0;a0<Mo;a0++)t0.push(l.HEAPU32[ah/4+a0]);l._OrtFree(ah);let o0=t0.reduce((a0,Ih)=>a0*Ih,1);Ae=Wp$1(No);let Xr=d?.outputPreferredLocations[i[et]];if(Ae==="string"){if(Xr==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let a0=[],Ih=Be/4;for(let S0=0;S0<o0;S0++){let Sg=l.HEAPU32[Ih++],n1=S0===o0-1?void 0:l.HEAPU32[Ih]-Sg;a0.push(l.UTF8ToString(Sg,n1))}jr.push([Ae,t0,a0,"cpu"])}else if(Xr==="gpu-buffer"&&o0>0){let a0=l.jsepGetBuffer;if(!a0)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let Ih=a0(Be),S0=sa$1(No);if(S0===void 0||!Po(Ae))throw new Error(`Unsupported data type: ${Ae}`);Ht=!0,jr.push([Ae,t0,{gpuBuffer:Ih,download:l.jsepCreateDownloader(Ih,o0*S0,Ae),dispose:()=>{l._OrtReleaseTensor(Ft)}},"gpu-buffer"])}else{let a0=Hp$1(Ae),Ih=new a0(o0);new Uint8Array(Ih.buffer,Ih.byteOffset,Ih.byteLength).set(l.HEAPU8.subarray(Be,Be+Ih.byteLength)),jr.push([Ae,t0,Ih,"cpu"])}}finally{l.stackRestore(Tt),Ae==="string"&&Be&&l._free(Be),Ht||l._OrtReleaseTensor(Ft)}}return d&&!g&&(l._OrtClearBoundOutputs(d.handle),zr$1.set(t,[p,s,u,d,g,!1])),jr}finally{l.stackRestore(pe),Y.forEach(He=>l._OrtReleaseTensor(He)),q.forEach(He=>l._OrtReleaseTensor(He)),ue.forEach(He=>l._free(He)),C!==0&&l._OrtReleaseRunOptions(C),O.forEach(He=>l._free(He))}},ed$1=t=>{let e=De$1(),n=zr$1.get(t);if(!n)throw new Error("invalid session id");let i=n[0],o=e._OrtEndProfiling(i);o===0&&_e$1("Can't get an profile file name."),e._OrtFree(o)},td$1=t=>{let e=[];for(let n of t){let i=n[2];!Array.isArray(i)&&"buffer"in i&&e.push(i.buffer)}return e}}),nd$1=me((t,e)=>{e.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var vt=Object.defineProperty;var qr=Object.getOwnPropertyDescriptor;var Vr=Object.getOwnPropertyNames;var Jr=Object.prototype.hasOwnProperty;var _t=(i,c)=>()=>(i&&(c=i(i=0)),c);var Ke=(i,c)=>()=>(c||i((c={exports:{}}).exports,c),c.exports),Et=(i,c)=>{for(var a in c)vt(i,a,{get:c[a],enumerable:!0})},Xr=(i,c,a,h)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of Vr(c))!Jr.call(i,f)&&f!==a&&vt(i,f,{get:()=>c[f],enumerable:!(h=qr(c,f))||h.enumerable});return i};var et=i=>Xr(vt({},"__esModule",{value:!0}),i);var St={};Et(St,{createReadStream:()=>lr,readFile:()=>Qr,readFileSync:()=>Zr});var Qr,Zr,lr,At=_t(()=>{Qr=void 0,Zr=void 0,lr=void 0});var Tt={};Et(Tt,{join:()=>Kr});var Kr,Mt=_t(()=>{Kr=void 0});var pr=Ke((dr,Ct)=>{"use strict";var cr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){var a=c,h,f,w=new Promise((t,o)=>{h=t,f=o}),g=Object.assign({},a),s="./this.program",S=typeof window=="object",x=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="",I,V,R;if(H){var B=(At(),et(St)),D=(Mt(),et(Tt));A=x?D.dirname(A)+"/":__dirname+"/",I=(t,o)=>(t=ce(t)?new URL(t):D.normalize(t),B.readFileSync(t,o?void 0:"utf8")),R=t=>(t=I(t,!0),t.buffer||(t=new Uint8Array(t)),t),V=(t,o,u,m=!0)=>{t=ce(t)?new URL(t):D.normalize(t),B.readFile(t,m?void 0:"utf8",(O,E)=>{O?u(O):o(m?E.buffer:E)})},!a.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2)}else(S||x)&&(x?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),i&&(A=i),A.startsWith("blob:")?A="":A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1),I=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},x&&(R=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),V=(t,o,u)=>{var m=new XMLHttpRequest;m.open("GET",t,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):u()},m.onerror=u,m.send(null)});var T=console.log.bind(console),L=console.error.bind(console);Object.assign(a,g),g=null;var W,de=!1,pe,Z,_,J,Pe;function le(){var t=W.buffer;a.HEAP8=pe=new Int8Array(t),a.HEAP16=new Int16Array(t),a.HEAPU8=Z=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAP32=_=new Int32Array(t),a.HEAPU32=J=new Uint32Array(t),a.HEAPF32=new Float32Array(t),a.HEAPF64=Pe=new Float64Array(t)}var Ie=[],ne=[],X=[],we=0,me=null,F=null;function ie(t){throw t="Aborted("+t+")",L(t),de=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),f(t),t}var xe=t=>t.startsWith("data:application/octet-stream;base64,"),ce=t=>t.startsWith("file://"),be;if(be="ort-wasm.wasm",!xe(be)){var ae=be;be=a.locateFile?a.locateFile(ae,A):A+ae}function K(t){if(R)return R(t);throw"both async and sync fetching of the wasm failed"}function je(t){if(S||x){if(typeof fetch=="function"&&!ce(t))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw`failed to load wasm binary file at \'${t}\'`;return o.arrayBuffer()}).catch(()=>K(t));if(V)return new Promise((o,u)=>{V(t,m=>o(new Uint8Array(m)),u)})}return Promise.resolve().then(()=>K(t))}function Oe(t,o,u){return je(t).then(m=>WebAssembly.instantiate(m,o)).then(u,m=>{L(`failed to asynchronously prepare wasm: ${m}`),ie(m)})}function Ue(t,o){var u=be;return typeof WebAssembly.instantiateStreaming!="function"||xe(u)||ce(u)||H||typeof fetch!="function"?Oe(u,t,o):fetch(u,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,t).then(o,function(O){return L(`wasm streaming compile failed: ${O}`),L("falling back to ArrayBuffer instantiation"),Oe(u,t,o)}))}var ve,Ae={798088:(t,o,u,m)=>{if(typeof a>"u"||!a.ya)return 1;if(t=ue(t>>>0),t.startsWith("./")&&(t=t.substring(2)),t=a.ya.get(t),!t)return 2;if(o>>>=0,u>>>=0,o+u>t.byteLength)return 3;try{return Z.set(t.subarray(o,o+u),m>>>0>>>0),0}catch{return 4}}};class _e{constructor(o){this.wa=o-24}}var ge=0,Be=0,te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,re=(t,o,u)=>{o>>>=0;var m=o+u;for(u=o;t[u]&&!(u>=m);)++u;if(16<u-o&&t.buffer&&te)return te.decode(t.subarray(o,u));for(m="";o<u;){var O=t[o++];if(O&128){var E=t[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|E);else{var U=t[o++]&63;O=(O&240)==224?(O&15)<<12|E<<6|U:(O&7)<<18|E<<12|U<<6|t[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},ue=(t,o)=>(t>>>=0)?re(Z,t,o):"",Ee=t=>{for(var o=0,u=0;u<t.length;++u){var m=t.charCodeAt(u);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++u):o+=3}return o},Se=(t,o,u,m)=>{if(u>>>=0,!(0<m))return 0;var O=u;m=u+m-1;for(var E=0;E<t.length;++E){var U=t.charCodeAt(E);if(55296<=U&&57343>=U){var ee=t.charCodeAt(++E);U=65536+((U&1023)<<10)|ee&1023}if(127>=U){if(u>=m)break;o[u++>>>0]=U}else{if(2047>=U){if(u+1>=m)break;o[u++>>>0]=192|U>>6}else{if(65535>=U){if(u+2>=m)break;o[u++>>>0]=224|U>>12}else{if(u+3>=m)break;o[u++>>>0]=240|U>>18,o[u++>>>0]=128|U>>12&63}o[u++>>>0]=128|U>>6&63}o[u++>>>0]=128|U&63}}return o[u>>>0]=0,u-O},Le=t=>t%4===0&&(t%100!==0||t%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],rt=[0,31,59,90,120,151,181,212,243,273,304,334],Te=[],Ge={},ke=()=>{if(!We){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},o;for(o in Ge)Ge[o]===void 0?delete t[o]:t[o]=Ge[o];var u=[];for(o in t)u.push(`${o}=${t[o]}`);We=u}return We},We,nt=[null,[],[]],De=[31,29,31,30,31,30,31,31,30,31,30,31],at=[31,28,31,30,31,30,31,31,30,31,30,31];function G(t){var o=Array(Ee(t)+1);return Se(t,o,0,o.length),o}function qe(t,o,u,m){function O(d,k,$){for(d=typeof d=="number"?d.toString():d||"";d.length<k;)d=$[0]+d;return d}function E(d,k){return O(d,k,"0")}function U(d,k){function $(Ze){return 0>Ze?-1:0<Ze?1:0}var Me;return(Me=$(d.getFullYear()-k.getFullYear()))===0&&(Me=$(d.getMonth()-k.getMonth()))===0&&(Me=$(d.getDate()-k.getDate())),Me}function ee(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function ye(d){var k=d.sa;for(d=new Date(new Date(d.ta+1900,0,1).getTime());0<k;){var $=d.getMonth(),Me=(Le(d.getFullYear())?De:at)[$];if(k>Me-d.getDate())k-=Me-d.getDate()+1,d.setDate(1),11>$?d.setMonth($+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else{d.setDate(d.getDate()+k);break}}return $=new Date(d.getFullYear()+1,0,4),k=ee(new Date(d.getFullYear(),0,4)),$=ee($),0>=U(k,d)?0>=U($,d)?d.getFullYear()+1:d.getFullYear():d.getFullYear()-1}t>>>=0,o>>>=0,u>>>=0,m>>>=0;var oe=J[m+40>>>2>>>0];m={Ba:_[m>>>2>>>0],Aa:_[m+4>>>2>>>0],ua:_[m+8>>>2>>>0],xa:_[m+12>>>2>>>0],va:_[m+16>>>2>>>0],ta:_[m+20>>>2>>>0],na:_[m+24>>>2>>>0],sa:_[m+28>>>2>>>0],Da:_[m+32>>>2>>>0],za:_[m+36>>>2>>>0],Ca:oe?ue(oe):""},u=ue(u),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)u=u.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Re="January February March April May June July August September October November December".split(" ");oe={"%a":d=>Qe[d.na].substring(0,3),"%A":d=>Qe[d.na],"%b":d=>Re[d.va].substring(0,3),"%B":d=>Re[d.va],"%C":d=>E((d.ta+1900)/100|0,2),"%d":d=>E(d.xa,2),"%e":d=>O(d.xa,2," "),"%g":d=>ye(d).toString().substring(2),"%G":ye,"%H":d=>E(d.ua,2),"%I":d=>(d=d.ua,d==0?d=12:12<d&&(d-=12),E(d,2)),"%j":d=>{for(var k=0,$=0;$<=d.va-1;k+=(Le(d.ta+1900)?De:at)[$++]);return E(d.xa+k,3)},"%m":d=>E(d.va+1,2),"%M":d=>E(d.Aa,2),"%n":()=>`\n`,"%p":d=>0<=d.ua&&12>d.ua?"AM":"PM","%S":d=>E(d.Ba,2),"%t":()=>"	","%u":d=>d.na||7,"%U":d=>E(Math.floor((d.sa+7-d.na)/7),2),"%V":d=>{var k=Math.floor((d.sa+7-(d.na+6)%7)/7);if(2>=(d.na+371-d.sa-2)%7&&k++,k)k==53&&($=(d.na+371-d.sa)%7,$==4||$==3&&Le(d.ta)||(k=1));else{k=52;var $=(d.na+7-d.sa-1)%7;($==4||$==5&&Le(d.ta%400-1))&&k++}return E(k,2)},"%w":d=>d.na,"%W":d=>E(Math.floor((d.sa+7-(d.na+6)%7)/7),2),"%y":d=>(d.ta+1900).toString().substring(2),"%Y":d=>d.ta+1900,"%z":d=>{d=d.za;var k=0<=d;return d=Math.abs(d)/60,(k?"+":"-")+("0000"+(d/60*100+d%60)).slice(-4)},"%Z":d=>d.Ca,"%%":()=>"%"},u=u.replace(/%%/g,"\\0\\0");for(se in oe)u.includes(se)&&(u=u.replace(new RegExp(se,"g"),oe[se](m)));return u=u.replace(/\\0\\0/g,"%"),se=G(u),se.length>o?0:(pe.set(se,t>>>0),se.length-1)}var Ve={a:function(t,o,u){t>>>=0;var m=new _e(t);throw J[m.wa+16>>>2>>>0]=0,J[m.wa+4>>>2>>>0]=o>>>0,J[m.wa+8>>>2>>>0]=u>>>0,ge=t,Be++,ge},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(t,o,u){return o>>>=0,Z.copyWithin(t>>>0>>>0,o>>>0,o+(u>>>0)>>>0)},n:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getUTCSeconds(),_[u+4>>>2>>>0]=t.getUTCMinutes(),_[u+8>>>2>>>0]=t.getUTCHours(),_[u+12>>>2>>>0]=t.getUTCDate(),_[u+16>>>2>>>0]=t.getUTCMonth(),_[u+20>>>2>>>0]=t.getUTCFullYear()-1900,_[u+24>>>2>>>0]=t.getUTCDay(),_[u+28>>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getSeconds(),_[u+4>>>2>>>0]=t.getMinutes(),_[u+8>>>2>>>0]=t.getHours(),_[u+12>>>2>>>0]=t.getDate(),_[u+16>>>2>>>0]=t.getMonth(),_[u+20>>>2>>>0]=t.getFullYear()-1900,_[u+24>>>2>>>0]=t.getDay(),_[u+28>>>2>>>0]=(Le(t.getFullYear())?ze:rt)[t.getMonth()]+t.getDate()-1|0,_[u+36>>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var m=new Date(t.getFullYear(),0,1).getTimezoneOffset();_[u+32>>>2>>>0]=(o!=m&&t.getTimezoneOffset()==Math.min(m,o))|0},p:function(t){t>>>=0;var o=new Date(_[t+20>>>2>>>0]+1900,_[t+16>>>2>>>0],_[t+12>>>2>>>0],_[t+8>>>2>>>0],_[t+4>>>2>>>0],_[t>>>2>>>0],0),u=_[t+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),E=new Date(o.getFullYear(),0,1).getTimezoneOffset(),U=Math.min(E,O);return 0>u?_[t+32>>>2>>>0]=+(O!=E&&U==m):0<u!=(U==m)&&(O=Math.max(E,O),o.setTime(o.getTime()+6e4*((0<u?U:O)-m))),_[t+24>>>2>>>0]=o.getDay(),_[t+28>>>2>>>0]=(Le(o.getFullYear())?ze:rt)[o.getMonth()]+o.getDate()-1|0,_[t>>>2>>>0]=o.getSeconds(),_[t+4>>>2>>>0]=o.getMinutes(),_[t+8>>>2>>>0]=o.getHours(),_[t+12>>>2>>>0]=o.getDate(),_[t+16>>>2>>>0]=o.getMonth(),_[t+20>>>2>>>0]=o.getYear(),t=o.getTime(),t=isNaN(t)?-1:t/1e3,Je((ve=t,1<=+Math.abs(ve)?0<ve?+Math.floor(ve/4294967296)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)),t>>>0},l:function(){return-52},m:function(){},t:function(t,o,u,m){u>>>=0,m>>>=0;var O=new Date().getFullYear(),E=new Date(O,0,1),U=new Date(O,6,1);O=E.getTimezoneOffset();var ee=U.getTimezoneOffset();J[t>>>0>>>2>>>0]=60*Math.max(O,ee),_[o>>>0>>>2>>>0]=+(O!=ee),t=ye=>ye.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],E=t(E),U=t(U),ee<O?(Se(E,Z,u,17),Se(U,Z,m,17)):(Se(E,Z,m,17),Se(U,Z,u,17))},d:()=>{ie("")},B:function(t,o,u){t>>>=0,o>>>=0,u>>>=0,Te.length=0;for(var m;m=Z[o++>>>0];){var O=m!=105;O&=m!=112,u+=O&&u%8?4:0,Te.push(m==112?J[u>>>2>>>0]:m==105?_[u>>>2>>>0]:Pe[u>>>3>>>0]),u+=O?8:4}return Ae[t](...Te)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(t){t>>>=0;var o=Z.length;if(4294901760<t)return!1;for(var u=1;4>=u;u*=2){var m=o*(1+.2/u);m=Math.min(m,t+100663296);var O=Math;m=Math.max(t,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-W.buffer.byteLength+65535)/65536;try{W.grow(O),le();var E=1;break e}catch{}E=void 0}if(E)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var u=0;return ke().forEach((m,O)=>{var E=o+u;for(O=J[t+4*O>>>2>>>0]=E,E=0;E<m.length;++E)pe[O++>>>0]=m.charCodeAt(E);pe[O>>>0]=0,u+=m.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var u=ke();J[t>>>2>>>0]=u.length;var m=0;return u.forEach(O=>m+=O.length+1),J[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(t,o,u,m){o>>>=0,u>>>=0,m>>>=0;for(var O=0,E=0;E<u;E++){var U=J[o>>>2>>>0],ee=J[o+4>>>2>>>0];o+=8;for(var ye=0;ye<ee;ye++){var oe=Z[U+ye>>>0],se=nt[t];oe===0||oe===10?((t===1?T:L)(re(se,0)),se.length=0):se.push(oe)}O+=ee}return J[m>>>2>>>0]=O,0},r:qe,c:function(t,o,u,m){return qe(t>>>0,o>>>0,u>>>0,m>>>0)}},P=function(){function t(u){return P=u.exports,P=st(),W=P.K,le(),ne.unshift(P.L),we--,we==0&&(me!==null&&(clearInterval(me),me=null),F&&(u=F,F=null,u())),P}var o={a:Ve};if(we++,a.instantiateWasm)try{return a.instantiateWasm(o,t)}catch(u){L(`Module.instantiateWasm callback failed with error: ${u}`),f(u)}return Ue(o,function(u){t(u.instance)}).catch(f),{}}();a._OrtInit=(t,o)=>(a._OrtInit=P.M)(t,o),a._OrtGetLastError=(t,o)=>(a._OrtGetLastError=P.N)(t,o),a._OrtCreateSessionOptions=(t,o,u,m,O,E,U,ee,ye,oe)=>(a._OrtCreateSessionOptions=P.O)(t,o,u,m,O,E,U,ee,ye,oe),a._OrtAppendExecutionProvider=(t,o)=>(a._OrtAppendExecutionProvider=P.P)(t,o),a._OrtAddFreeDimensionOverride=(t,o,u)=>(a._OrtAddFreeDimensionOverride=P.Q)(t,o,u),a._OrtAddSessionConfigEntry=(t,o,u)=>(a._OrtAddSessionConfigEntry=P.R)(t,o,u),a._OrtReleaseSessionOptions=t=>(a._OrtReleaseSessionOptions=P.S)(t),a._OrtCreateSession=(t,o,u)=>(a._OrtCreateSession=P.T)(t,o,u),a._OrtReleaseSession=t=>(a._OrtReleaseSession=P.U)(t),a._OrtGetInputOutputCount=(t,o,u)=>(a._OrtGetInputOutputCount=P.V)(t,o,u),a._OrtGetInputName=(t,o)=>(a._OrtGetInputName=P.W)(t,o),a._OrtGetOutputName=(t,o)=>(a._OrtGetOutputName=P.X)(t,o),a._OrtFree=t=>(a._OrtFree=P.Y)(t),a._OrtCreateTensor=(t,o,u,m,O,E)=>(a._OrtCreateTensor=P.Z)(t,o,u,m,O,E),a._OrtGetTensorData=(t,o,u,m,O)=>(a._OrtGetTensorData=P._)(t,o,u,m,O),a._OrtReleaseTensor=t=>(a._OrtReleaseTensor=P.$)(t),a._OrtCreateRunOptions=(t,o,u,m)=>(a._OrtCreateRunOptions=P.aa)(t,o,u,m),a._OrtAddRunConfigEntry=(t,o,u)=>(a._OrtAddRunConfigEntry=P.ba)(t,o,u),a._OrtReleaseRunOptions=t=>(a._OrtReleaseRunOptions=P.ca)(t),a._OrtCreateBinding=t=>(a._OrtCreateBinding=P.da)(t),a._OrtBindInput=(t,o,u)=>(a._OrtBindInput=P.ea)(t,o,u),a._OrtBindOutput=(t,o,u,m)=>(a._OrtBindOutput=P.fa)(t,o,u,m),a._OrtClearBoundOutputs=t=>(a._OrtClearBoundOutputs=P.ga)(t),a._OrtReleaseBinding=t=>(a._OrtReleaseBinding=P.ha)(t),a._OrtRunWithBinding=(t,o,u,m,O)=>(a._OrtRunWithBinding=P.ia)(t,o,u,m,O),a._OrtRun=(t,o,u,m,O,E,U,ee)=>(a._OrtRun=P.ja)(t,o,u,m,O,E,U,ee),a._OrtEndProfiling=t=>(a._OrtEndProfiling=P.ka)(t),a._malloc=t=>(a._malloc=P.la)(t),a._free=t=>(a._free=P.ma)(t);var Je=t=>(Je=P.oa)(t),ot=t=>(ot=P.pa)(t),M=t=>(M=P.qa)(t),Ne=()=>(Ne=P.ra)();function st(){var t=P;t=Object.assign({},t);var o=u=>m=>u(m)>>>0;return t.la=o(t.la),t.qa=o(t.qa),t.ra=(u=>()=>u()>>>0)(t.ra),t}a.stackSave=()=>Ne(),a.stackRestore=t=>ot(t),a.stackAlloc=t=>M(t),a.UTF8ToString=ue,a.stringToUTF8=(t,o,u)=>Se(t,Z,o,u),a.lengthBytesUTF8=Ee;var Fe;F=function t(){Fe||Xe(),Fe||(F=t)};function Xe(){if(!(0<we)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var t=a.preRun.shift();Ie.unshift(t)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<we||Fe||(Fe=!0,a.calledRun=!0,de))){for(;0<ne.length;)ne.shift()(a);for(h(a);0<X.length;)X.shift()(a)}}}return Xe(),w}})();typeof dr=="object"&&typeof Ct=="object"?Ct.exports=cr:typeof define=="function"&&define.amd&&define([],()=>cr)});var mr=Ke(()=>{});var gr=Ke(()=>{});var hr={};Et(hr,{cpus:()=>en});var en,br=_t(()=>{en=void 0});var Or=Ke((wr,Dt)=>{"use strict";var yr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){function a(){return X.buffer!=ie.buffer&&K(),ie}function h(){return X.buffer!=ie.buffer&&K(),xe}function f(){return X.buffer!=ie.buffer&&K(),ce}function w(){return X.buffer!=ie.buffer&&K(),be}function g(){return X.buffer!=ie.buffer&&K(),ae}var s=c,S,x,H=new Promise((e,r)=>{S=e,x=r}),A=Object.assign({},s),I="./this.program",V=(e,r)=>{throw r},R=typeof window=="object",B=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",T=s.ENVIRONMENT_IS_PTHREAD||!1,L="";function W(e){return s.locateFile?s.locateFile(e,L):L+e}var de,pe,Z;if(D){var _=(At(),et(St)),J=(Mt(),et(Tt));L=B?J.dirname(L)+"/":__dirname+"/",de=(e,r)=>(e=ue(e)?new URL(e):J.normalize(e),_.readFileSync(e,r?void 0:"utf8")),Z=e=>(e=de(e,!0),e.buffer||(e=new Uint8Array(e)),e),pe=(e,r,n,l=!0)=>{e=ue(e)?new URL(e):J.normalize(e),_.readFile(e,l?void 0:"utf8",(y,b)=>{y?n(y):r(l?b.buffer:b)})},!s.thisProgram&&1<process.argv.length&&(I=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),V=(e,r)=>{throw process.exitCode=e,r},global.Worker=mr().Worker}else(R||B)&&(B?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),typeof i<"u"&&i&&(L=i),L.startsWith("blob:")?L="":L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),D||(de=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},B&&(Z=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),pe=(e,r,n)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?r(l.response):n()},l.onerror=n,l.send(null)}));D&&typeof performance>"u"&&(global.performance=gr().performance);var Pe=console.log.bind(console),le=console.error.bind(console);D&&(Pe=(...e)=>_.writeSync(1,e.join(" ")+`\n`),le=(...e)=>_.writeSync(2,e.join(" ")+`\n`));var Ie=Pe,ne=le;Object.assign(s,A),A=null;var X,we,me=!1,F,ie,xe,ce,be,ae;function K(){var e=X.buffer;s.HEAP8=ie=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=xe=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=ce=new Int32Array(e),s.HEAPU32=be=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=ae=new Float64Array(e)}var je=16777216;if(T)X=s.wasmMemory;else if(s.wasmMemory)X=s.wasmMemory;else if(X=new WebAssembly.Memory({initial:je/65536,maximum:65536,shared:!0}),!(X.buffer instanceof SharedArrayBuffer))throw ne("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),D&&ne("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");K(),je=X.buffer.byteLength;var Oe=[],Ue=[],ve=[],Ae=0,_e=null,ge=null;function Be(){if(Ae--,Ae==0&&(_e!==null&&(clearInterval(_e),_e=null),ge)){var e=ge;ge=null,e()}}function te(e){throw e="Aborted("+e+")",ne(e),me=!0,F=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),x(e),e}var re=e=>e.startsWith("data:application/octet-stream;base64,"),ue=e=>e.startsWith("file://"),Ee;Ee="ort-wasm-threaded.wasm",re(Ee)||(Ee=W(Ee));function Se(e){if(Z)return Z(e);throw"both async and sync fetching of the wasm failed"}function Le(e){if(R||B){if(typeof fetch=="function"&&!ue(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw`failed to load wasm binary file at \'${e}\'`;return r.arrayBuffer()}).catch(()=>Se(e));if(pe)return new Promise((r,n)=>{pe(e,l=>r(new Uint8Array(l)),n)})}return Promise.resolve().then(()=>Se(e))}function ze(e,r,n){return Le(e).then(l=>WebAssembly.instantiate(l,r)).then(n,l=>{ne(`failed to asynchronously prepare wasm: ${l}`),te(l)})}function rt(e,r){var n=Ee;return typeof WebAssembly.instantiateStreaming!="function"||re(n)||ue(n)||D||typeof fetch!="function"?ze(n,e,r):fetch(n,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(r,function(y){return ne(`wasm streaming compile failed: ${y}`),ne("falling back to ArrayBuffer instantiation"),ze(n,e,r)}))}var Te,Ge={799444:(e,r,n,l)=>{if(typeof s>"u"||!s.bb)return 1;if(e=ee(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.bb.get(e),!e)return 2;if(r>>>=0,n>>>=0,l>>>=0,r+n>e.byteLength)return 3;try{return h().set(e.subarray(r,r+n),l>>>0),0}catch{return 4}}};function ke(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var We=e=>{e.terminate(),e.onmessage=()=>{}},nt=e=>{M.Oa.length==0&&(Je(),M.Xa(M.Oa[0]));var r=M.Oa.pop();if(!r)return 6;M.Pa.push(r),M.La[e.Na]=r,r.Na=e.Na;var n={cmd:"run",start_routine:e.gb,arg:e.cb,pthread_ptr:e.Na};return D&&r.unref(),r.postMessage(n,e.mb),0},De=0,at=e=>{var r=Ot();return e=e(),ft(r),e},G=(e,r,...n)=>at(()=>{for(var l=n.length,y=wt(8*l),b=y>>>3,v=0;v<n.length;v++){var z=n[v];g()[b+v>>>0]=z}return rr(e,0,l,y,r)});function qe(e){if(T)return G(0,1,e);F=e,0<De||(M.hb(),s.onExit?.(e),me=!0),V(e,new ke(e))}var Ve=e=>{if(F=e,T)throw st(e),"unwind";qe(e)};function P(){for(var e=s.numThreads;e--;)Je();Oe.unshift(()=>{Ae++,ot(()=>Be())})}function Je(){var e=W("ort-wasm-threaded.worker.js");e=new Worker(e),M.Oa.push(e)}function ot(e){T?e():Promise.all(M.Oa.map(M.Xa)).then(e)}var M={Oa:[],Pa:[],ab:[],La:{},Va(){T?(M.receiveObjectTransfer=M.fb,M.threadInitTLS=M.$a,M.setExitStatus=M.Za):P()},Za:e=>F=e,pb:["$terminateWorker"],hb:()=>{for(var e of M.Pa)We(e);for(e of M.Oa)We(e);M.Oa=[],M.Pa=[],M.La=[]},Ya:e=>{var r=e.Na;delete M.La[r],M.Oa.push(e),M.Pa.splice(M.Pa.indexOf(e),1),e.Na=0,bt(r)},fb(){},$a(){M.ab.forEach(e=>e())},Xa:e=>new Promise(r=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=ut()){var z=M.La[b.targetThread];z?z.postMessage(b,b.transferList):ne(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?it():v==="spawnThread"?nt(b):v==="cleanupThread"?M.Ya(M.La[b.thread]):v==="killThread"?(b=b.thread,v=M.La[b],delete M.La[b],We(v),bt(b),M.Pa.splice(M.Pa.indexOf(v),1),v.Na=0):v==="cancelThread"?M.La[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,D&&!e.Na&&e.unref(),r(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?s[b.handler](...b.args):v&&ne(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ne(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},D&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],l=["onExit"],y;for(y of l)s.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:s.mainScriptUrlOrBlob||i,wasmMemory:X,wasmModule:we})})};s.PThread=M;var Ne=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=ut(),r=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],or(r,r-e),ft(r)};function st(e){if(T)return G(1,0,e);Ve(e)}var Fe=[],Xe;s.invokeEntryPoint=(e,r)=>{De=0;var n=Fe[e];n||(e>=Fe.length&&(Fe.length=e+1),Fe[e]=n=Xe.get(e)),e=n(r),0<De?M.Za(e):yt(e)};class t{constructor(r){this.Ua=r-24}Va(r,n){w()[this.Ua+16>>>2>>>0]=0,w()[this.Ua+4>>>2>>>0]=r,w()[this.Ua+8>>>2>>>0]=n}}var o=0,u=0;function m(e,r,n,l){return T?G(2,1,e,r,n,l):O(e,r,n,l)}function O(e,r,n,l){if(e>>>=0,r>>>=0,n>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return ne("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return T&&y.length===0?m(e,r,n,l):(e={gb:n,Na:e,cb:l,mb:y},T?(e.ob="spawnThread",postMessage(e,y),0):nt(e))}var E=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,U=(e,r,n)=>{r>>>=0;var l=r+n;for(n=r;e[n]&&!(n>=l);)++n;if(16<n-r&&e.buffer&&E)return E.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,n):e.subarray(r,n));for(l="";r<n;){var y=e[r++];if(y&128){var b=e[r++]&63;if((y&224)==192)l+=String.fromCharCode((y&31)<<6|b);else{var v=e[r++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[r++]&63,65536>y?l+=String.fromCharCode(y):(y-=65536,l+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else l+=String.fromCharCode(y)}return l},ee=(e,r)=>(e>>>=0)?U(h(),e,r):"";function ye(e,r,n){return T?G(3,1,e,r,n):0}function oe(e,r){if(T)return G(4,1,e,r)}var se=e=>{for(var r=0,n=0;n<e.length;++n){var l=e.charCodeAt(n);127>=l?r++:2047>=l?r+=2:55296<=l&&57343>=l?(r+=4,++n):r+=3}return r},Qe=(e,r,n,l)=>{if(n>>>=0,!(0<l))return 0;var y=n;l=n+l-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=l)break;r[n++>>>0]=v}else{if(2047>=v){if(n+1>=l)break;r[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=l)break;r[n++>>>0]=224|v>>12}else{if(n+3>=l)break;r[n++>>>0]=240|v>>18,r[n++>>>0]=128|v>>12&63}r[n++>>>0]=128|v>>6&63}r[n++>>>0]=128|v&63}}return r[n>>>0]=0,n-y},Re=(e,r,n)=>Qe(e,h(),r,n);function d(e,r){if(T)return G(5,1,e,r)}function k(e,r,n){if(T)return G(6,1,e,r,n)}function $(e,r,n){return T?G(7,1,e,r,n):0}function Me(e,r){if(T)return G(8,1,e,r)}function Ze(e,r,n){if(T)return G(9,1,e,r,n)}function Rt(e,r,n,l){if(T)return G(10,1,e,r,n,l)}function It(e,r,n,l){if(T)return G(11,1,e,r,n,l)}function Bt(e,r,n,l){if(T)return G(12,1,e,r,n,l)}function kt(e){if(T)return G(13,1,e)}function Wt(e,r){if(T)return G(14,1,e,r)}function Nt(e,r,n){if(T)return G(15,1,e,r,n)}function dt(e){e>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(f(),e>>>2,e).value.then(it),e+=128,Atomics.store(f(),e>>>2,1))}s.__emscripten_thread_mailbox_await=dt;var it=()=>{var e=ut();if(e&&(dt(e),e=nr,!me))try{if(e(),!(0<De))try{T?yt(F):Ve(F)}catch(r){r instanceof ke||r=="unwind"||V(1,r)}}catch(r){r instanceof ke||r=="unwind"||V(1,r)}};s.checkMailbox=it;var pt=[],$e=e=>e%4===0&&(e%100!==0||e%400===0),Ht=[0,31,60,91,121,152,182,213,244,274,305,335],Gt=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,r,n,l,y,b,v,z){return T?G(16,1,e,r,n,l,y,b,v,z):-52}function Yt(e,r,n,l,y,b,v){if(T)return G(17,1,e,r,n,l,y,b,v)}var mt=[],gt={},jt=()=>{if(!ht){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:I||"./this.program"},r;for(r in gt)gt[r]===void 0?delete e[r]:e[r]=gt[r];var n=[];for(r in e)n.push(`${r}=${e[r]}`);ht=n}return ht},ht;function zt(e,r){if(T)return G(18,1,e,r);e>>>=0,r>>>=0;var n=0;return jt().forEach((l,y)=>{var b=r+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<l.length;++b)a()[y++>>>0]=l.charCodeAt(b);a()[y>>>0]=0,n+=l.length+1}),0}function qt(e,r){if(T)return G(19,1,e,r);e>>>=0,r>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var l=0;return n.forEach(y=>l+=y.length+1),w()[r>>>2>>>0]=l,0}function Vt(e){return T?G(20,1,e):52}function Jt(e,r,n,l){return T?G(21,1,e,r,n,l):52}function Xt(e,r,n,l,y){return T?G(22,1,e,r,n,l,y):70}var Hr=[null,[],[]];function Qt(e,r,n,l){if(T)return G(23,1,e,r,n,l);r>>>=0,n>>>=0,l>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[r>>>2>>>0],z=w()[r+4>>>2>>>0];r+=8;for(var Ce=0;Ce<z;Ce++){var fe=h()[v+Ce>>>0],he=Hr[e];fe===0||fe===10?((e===1?Ie:ne)(U(he,0)),he.length=0):he.push(fe)}y+=z}return w()[l>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Gr(e){var r=Array(se(e)+1);return Qe(e,r,0,r.length),r}var $r=(e,r)=>{a().set(e,r>>>0)};function er(e,r,n,l){function y(p,N,q){for(p=typeof p=="number"?p.toString():p||"";p.length<N;)p=q[0]+p;return p}function b(p,N){return y(p,N,"0")}function v(p,N){function q(fr){return 0>fr?-1:0<fr?1:0}var He;return(He=q(p.getFullYear()-N.getFullYear()))===0&&(He=q(p.getMonth()-N.getMonth()))===0&&(He=q(p.getDate()-N.getDate())),He}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Ce(p){var N=p.Qa;for(p=new Date(new Date(p.Ra+1900,0,1).getTime());0<N;){var q=p.getMonth(),He=($e(p.getFullYear())?Zt:Kt)[q];if(N>He-p.getDate())N-=He-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+N);break}}return q=new Date(p.getFullYear()+1,0,4),N=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(N,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,r>>>=0,n>>>=0,l>>>=0;var fe=w()[l+40>>>2>>>0];l={kb:f()[l>>>2>>>0],jb:f()[l+4>>>2>>>0],Sa:f()[l+8>>>2>>>0],Wa:f()[l+12>>>2>>>0],Ta:f()[l+16>>>2>>>0],Ra:f()[l+20>>>2>>>0],Ma:f()[l+24>>>2>>>0],Qa:f()[l+28>>>2>>>0],qb:f()[l+32>>>2>>>0],ib:f()[l+36>>>2>>>0],lb:fe?ee(fe):""},n=ee(n),fe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var he in fe)n=n.replace(new RegExp(he,"g"),fe[he]);var ir="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ur="January February March April May June July August September October November December".split(" ");fe={"%a":p=>ir[p.Ma].substring(0,3),"%A":p=>ir[p.Ma],"%b":p=>ur[p.Ta].substring(0,3),"%B":p=>ur[p.Ta],"%C":p=>b((p.Ra+1900)/100|0,2),"%d":p=>b(p.Wa,2),"%e":p=>y(p.Wa,2," "),"%g":p=>Ce(p).toString().substring(2),"%G":Ce,"%H":p=>b(p.Sa,2),"%I":p=>(p=p.Sa,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var N=0,q=0;q<=p.Ta-1;N+=($e(p.Ra+1900)?Zt:Kt)[q++]);return b(p.Wa+N,3)},"%m":p=>b(p.Ta+1,2),"%M":p=>b(p.jb,2),"%n":()=>`\n`,"%p":p=>0<=p.Sa&&12>p.Sa?"AM":"PM","%S":p=>b(p.kb,2),"%t":()=>"	","%u":p=>p.Ma||7,"%U":p=>b(Math.floor((p.Qa+7-p.Ma)/7),2),"%V":p=>{var N=Math.floor((p.Qa+7-(p.Ma+6)%7)/7);if(2>=(p.Ma+371-p.Qa-2)%7&&N++,N)N==53&&(q=(p.Ma+371-p.Qa)%7,q==4||q==3&&$e(p.Ra)||(N=1));else{N=52;var q=(p.Ma+7-p.Qa-1)%7;(q==4||q==5&&$e(p.Ra%400-1))&&N++}return b(N,2)},"%w":p=>p.Ma,"%W":p=>b(Math.floor((p.Qa+7-(p.Ma+6)%7)/7),2),"%y":p=>(p.Ra+1900).toString().substring(2),"%Y":p=>p.Ra+1900,"%z":p=>{p=p.ib;var N=0<=p;return p=Math.abs(p)/60,(N?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.lb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(he in fe)n.includes(he)&&(n=n.replace(new RegExp(he,"g"),fe[he](l)));return n=n.replace(/\\0\\0/g,"%"),he=Gr(n),he.length>r?0:($r(he,e),he.length-1)}M.Va();var Yr=[qe,st,m,ye,oe,d,k,$,Me,Ze,Rt,It,Bt,kt,Wt,Nt,$t,Yt,zt,qt,Vt,Jt,Xt,Qt],jr={b:function(e,r,n){throw e>>>=0,new t(e).Va(r>>>0,n>>>0),o=e,u++,o},L:function(e){tr(e>>>0,!B,1,!R,131072,!1),M.$a()},j:function(e){e>>>=0,T?postMessage({cmd:"cleanupThread",thread:e}):M.Ya(M.La[e])},H:O,h:ye,S:oe,D:d,F:k,T:$,Q:Me,J:Ze,P:Rt,n:It,E:Bt,B:kt,R:Wt,C:Nt,p:()=>1,z:function(e,r){e>>>=0,e==r>>>0?setTimeout(it):T?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.La[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,r,n,l,y){r>>>=0,n>>>=0,pt.length=l,y=y>>>0>>>3;for(var b=0;b<l;b++)pt[b]=g()[y+b>>>0];return e=r?Ge[r]:Yr[e],M.eb=n,n=e(...pt),M.eb=0,n},K:dt,o:function(e){D&&M.La[e>>>0].ref()},s:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getUTCSeconds(),f()[n+4>>>2>>>0]=e.getUTCMinutes(),f()[n+8>>>2>>>0]=e.getUTCHours(),f()[n+12>>>2>>>0]=e.getUTCDate(),f()[n+16>>>2>>>0]=e.getUTCMonth(),f()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,f()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[n+28>>>2>>>0]=e},t:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getSeconds(),f()[n+4>>>2>>>0]=e.getMinutes(),f()[n+8>>>2>>>0]=e.getHours(),f()[n+12>>>2>>>0]=e.getDate(),f()[n+16>>>2>>>0]=e.getMonth(),f()[n+20>>>2>>>0]=e.getFullYear()-1900,f()[n+24>>>2>>>0]=e.getDay(),r=($e(e.getFullYear())?Ht:Gt)[e.getMonth()]+e.getDate()-1|0,f()[n+28>>>2>>>0]=r,f()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=l&&e.getTimezoneOffset()==Math.min(l,r))|0,f()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var r=new Date(f()[e+20>>>2>>>0]+1900,f()[e+16>>>2>>>0],f()[e+12>>>2>>>0],f()[e+8>>>2>>>0],f()[e+4>>>2>>>0],f()[e>>>2>>>0],0),n=f()[e+32>>>2>>>0],l=r.getTimezoneOffset(),y=new Date(r.getFullYear(),6,1).getTimezoneOffset(),b=new Date(r.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?f()[e+32>>>2>>>0]=+(y!=b&&v==l):0<n!=(v==l)&&(y=Math.max(b,y),r.setTime(r.getTime()+6e4*((0<n?v:y)-l))),f()[e+24>>>2>>>0]=r.getDay(),n=($e(r.getFullYear())?Ht:Gt)[r.getMonth()]+r.getDate()-1|0,f()[e+28>>>2>>>0]=n,f()[e>>>2>>>0]=r.getSeconds(),f()[e+4>>>2>>>0]=r.getMinutes(),f()[e+8>>>2>>>0]=r.getHours(),f()[e+12>>>2>>>0]=r.getDate(),f()[e+16>>>2>>>0]=r.getMonth(),f()[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),e=isNaN(e)?-1:e/1e3,ar((Te=e,1<=+Math.abs(Te)?0<Te?+Math.floor(Te/4294967296)>>>0:~~+Math.ceil((Te-+(~~Te>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Yt,y:function(e,r,n,l){e>>>=0,r>>>=0,n>>>=0,l>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Ce=Math.max(y,z);w()[e>>>2>>>0]=60*Ce,f()[r>>>2>>>0]=+(y!=z),e=fe=>fe.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],b=e(b),v=e(v),z<y?(Re(b,n,17),Re(v,l,17)):(Re(b,l,17),Re(v,n,17))},c:()=>{te("")},O:function(e,r,n){e>>>=0,r>>>=0,n>>>=0,mt.length=0;for(var l;l=h()[r++>>>0];){var y=l!=105;y&=l!=112,n+=y&&n%8?4:0,mt.push(l==112?w()[n>>>2>>>0]:l==105?f()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ge[e](...mt)},k:()=>{},i:()=>Date.now(),U:()=>{throw De+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>D?(br(),et(hr)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var r=h().length;if(e<=r||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var l=r*(1+.2/n);l=Math.min(l,e+100663296);var y=Math;l=Math.max(e,l);e:{y=(y.min.call(y,4294901760,l+(65536-l%65536)%65536)-X.buffer.byteLength+65535)/65536;try{X.grow(y),K();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ve,g:Vt,m:Jt,v:Xt,l:Qt,a:X||s.wasmMemory,w:er,d:function(e,r,n,l){return er(e>>>0,r>>>0,n>>>0,l>>>0)}},C=function(){function e(n,l){return C=n.exports,C=zr(),M.ab.push(C.ya),Xe=C.za,Ue.unshift(C.V),we=l,Be(),C}var r={a:jr};if(Ae++,s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(n){ne(`Module.instantiateWasm callback failed with error: ${n}`),x(n)}return rt(r,function(n){e(n.instance,n.module)}).catch(x),{}}();s._OrtInit=(e,r)=>(s._OrtInit=C.W)(e,r),s._OrtGetLastError=(e,r)=>(s._OrtGetLastError=C.X)(e,r),s._OrtCreateSessionOptions=(e,r,n,l,y,b,v,z,Ce,fe)=>(s._OrtCreateSessionOptions=C.Y)(e,r,n,l,y,b,v,z,Ce,fe),s._OrtAppendExecutionProvider=(e,r)=>(s._OrtAppendExecutionProvider=C.Z)(e,r),s._OrtAddFreeDimensionOverride=(e,r,n)=>(s._OrtAddFreeDimensionOverride=C._)(e,r,n),s._OrtAddSessionConfigEntry=(e,r,n)=>(s._OrtAddSessionConfigEntry=C.$)(e,r,n),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=C.aa)(e),s._OrtCreateSession=(e,r,n)=>(s._OrtCreateSession=C.ba)(e,r,n),s._OrtReleaseSession=e=>(s._OrtReleaseSession=C.ca)(e),s._OrtGetInputOutputCount=(e,r,n)=>(s._OrtGetInputOutputCount=C.da)(e,r,n),s._OrtGetInputName=(e,r)=>(s._OrtGetInputName=C.ea)(e,r),s._OrtGetOutputName=(e,r)=>(s._OrtGetOutputName=C.fa)(e,r),s._OrtFree=e=>(s._OrtFree=C.ga)(e),s._OrtCreateTensor=(e,r,n,l,y,b)=>(s._OrtCreateTensor=C.ha)(e,r,n,l,y,b),s._OrtGetTensorData=(e,r,n,l,y)=>(s._OrtGetTensorData=C.ia)(e,r,n,l,y),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=C.ja)(e),s._OrtCreateRunOptions=(e,r,n,l)=>(s._OrtCreateRunOptions=C.ka)(e,r,n,l),s._OrtAddRunConfigEntry=(e,r,n)=>(s._OrtAddRunConfigEntry=C.la)(e,r,n),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=C.ma)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=C.na)(e),s._OrtBindInput=(e,r,n)=>(s._OrtBindInput=C.oa)(e,r,n),s._OrtBindOutput=(e,r,n,l)=>(s._OrtBindOutput=C.pa)(e,r,n,l),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=C.qa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=C.ra)(e),s._OrtRunWithBinding=(e,r,n,l,y)=>(s._OrtRunWithBinding=C.sa)(e,r,n,l,y),s._OrtRun=(e,r,n,l,y,b,v,z)=>(s._OrtRun=C.ta)(e,r,n,l,y,b,v,z),s._OrtEndProfiling=e=>(s._OrtEndProfiling=C.ua)(e);var ut=s._pthread_self=()=>(ut=s._pthread_self=C.va)();s._malloc=e=>(s._malloc=C.wa)(e),s._free=e=>(s._free=C.xa)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=C.ya)();var tr=s.__emscripten_thread_init=(e,r,n,l,y,b)=>(tr=s.__emscripten_thread_init=C.Aa)(e,r,n,l,y,b);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=C.Ba)();var rr=(e,r,n,l,y)=>(rr=C.Ca)(e,r,n,l,y),bt=e=>(bt=C.Da)(e),yt=s.__emscripten_thread_exit=e=>(yt=s.__emscripten_thread_exit=C.Ea)(e),nr=()=>(nr=C.Fa)(),ar=e=>(ar=C.Ga)(e),or=(e,r)=>(or=C.Ha)(e,r),ft=e=>(ft=C.Ia)(e),wt=e=>(wt=C.Ja)(e),Ot=()=>(Ot=C.Ka)();function zr(){var e=C;e=Object.assign({},e);var r=l=>()=>l()>>>0,n=l=>y=>l(y)>>>0;return e.va=r(e.va),e.wa=n(e.wa),e.emscripten_main_runtime_thread_id=r(e.emscripten_main_runtime_thread_id),e.Ja=n(e.Ja),e.Ka=r(e.Ka),e}s.wasmMemory=X,s.stackSave=()=>Ot(),s.stackRestore=e=>ft(e),s.stackAlloc=e=>wt(e),s.keepRuntimeAlive=()=>0<De,s.UTF8ToString=ee,s.stringToUTF8=Re,s.lengthBytesUTF8=se,s.ExitStatus=ke,s.PThread=M;var lt;ge=function e(){lt||sr(),lt||(ge=e)};function sr(){if(!(0<Ae))if(T)S(s),T||Ne(Ue),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Oe.unshift(s.preRun.shift());Ne(Oe),0<Ae||lt||(lt=!0,s.calledRun=!0,me||(T||Ne(Ue),S(s),T||Ne(ve)))}}return sr(),H}})();typeof wr=="object"&&typeof Dt=="object"?Dt.exports=yr:typeof define=="function"&&define.amd&&define([],()=>yr)});var vr=Ke((yn,tn)=>{tn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var Er;Er=pr();var rn=Or(),Ft,Pt=!1,ct=!1,_r=!1,nn=i=>{if(i===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+i+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+i+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},an=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},on=(i,c)=>i?c?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":c?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Sr=async i=>{if(Pt)return Promise.resolve();if(ct)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(_r)throw new Error("previous call to \'initializeWebAssembly()\' failed.");ct=!0;let c=i.initTimeout,a=i.numThreads,h=i.simd,f=nn(a),w=h&&an(),g=i.wasmPaths,s=typeof g=="string"?g:void 0,S=on(w,f),x=typeof g=="object"?g[S]:void 0,H=!1,A=[];if(c>0&&A.push(new Promise(I=>{setTimeout(()=>{H=!0,I()},c)})),A.push(new Promise((I,V)=>{let R=f?rn:Er,B={locateFile:(D,T)=>f&&D.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([vr()],{type:"text/javascript"})):D.endsWith(".wasm")?x||(s??T)+S:T+D};if(f)if(B.numThreads=a,typeof Blob>"u")B.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let D=`var ortWasmThreaded=${R.toString()};`;B.mainScriptUrlOrBlob=new Blob([D],{type:"text/javascript"})}R(B).then(D=>{ct=!1,Pt=!0,Ft=D,I()},D=>{ct=!1,_r=!0,V(D)})})),await Promise.race(A),H)throw new Error(`WebAssembly backend initializing failed due to timeout: ${c}ms`)},Q=()=>{if(Pt&&Ft)return Ft;throw new Error("WebAssembly is not initialized yet.")};var Y=(i,c)=>{let a=Q(),h=a.lengthBytesUTF8(i)+1,f=a._malloc(h);return a.stringToUTF8(i,f,h),c.push(f),f},tt=(i,c,a,h)=>{if(typeof i=="object"&&i!==null){if(a.has(i))throw new Error("Circular reference in options");a.add(i)}Object.entries(i).forEach(([f,w])=>{let g=c?c+f:f;if(typeof w=="object")tt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},j=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);c._OrtGetLastError(h,h+4);let f=c.HEAP32[h/4],w=c.HEAPU32[h/4+1],g=w?c.UTF8ToString(w):"";throw new Error(`${i} ERROR_CODE: ${f}, ERROR_MESSAGE: ${g}`)}finally{c.stackRestore(a)}};var Ar=i=>{let c=Q(),a=0,h=[],f=i||{};try{if(i?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof i.logSeverityLevel!="number"||!Number.isInteger(i.logSeverityLevel)||i.logSeverityLevel<0||i.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${i.logSeverityLevel}`);if(i?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof i.logVerbosityLevel!="number"||!Number.isInteger(i.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${i.logVerbosityLevel}`);i?.terminate===void 0&&(f.terminate=!1);let w=0;return i?.tag!==void 0&&(w=Y(i.tag,h)),a=c._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,w),a===0&&j("Can\'t create run options."),i?.extra!==void 0&&tt(i.extra,"",new WeakSet,(g,s)=>{let S=Y(g,h),x=Y(s,h);c._OrtAddRunConfigEntry(a,S,x)!==0&&j(`Can\'t set a run config entry: ${g} - ${s}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseRunOptions(a),h.forEach(g=>c._free(g)),w}};var sn=i=>{switch(i){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${i}`)}},un=i=>{switch(i){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${i}`)}},fn=i=>{i.extra||(i.extra={}),i.extra.session||(i.extra.session={});let c=i.extra.session;c.use_ort_model_bytes_directly||(c.use_ort_model_bytes_directly="1"),i.executionProviders&&i.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(i.enableMemPattern=!1)},ln=(i,c,a)=>{for(let h of c){let f=typeof h=="string"?h:h.name;switch(f){case"webnn":if(f="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let s=Y("deviceType",a),S=Y(g.deviceType,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let s=g.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let S=Y("numThreads",a),x=Y(s.toString(),a);Q()._OrtAddSessionConfigEntry(i,S,x)!==0&&j(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let s=Y("powerPreference",a),S=Y(g.powerPreference,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let s=Y("preferredLayout",a),S=Y(g.preferredLayout,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let w=Y(f,a);Q()._OrtAppendExecutionProvider(i,w)!==0&&j(`Can\'t append execution provider: ${f}.`)}},Tr=i=>{let c=Q(),a=0,h=[],f=i||{};fn(f);try{let w=sn(f.graphOptimizationLevel??"all"),g=un(f.executionMode??"sequential"),s=typeof f.logId=="string"?Y(f.logId,h):0,S=f.logSeverityLevel??2;if(!Number.isInteger(S)||S<0||S>4)throw new Error(`log serverity level is not valid: ${S}`);let x=f.logVerbosityLevel??0;if(!Number.isInteger(x)||x<0||x>4)throw new Error(`log verbosity level is not valid: ${x}`);let H=typeof f.optimizedModelFilePath=="string"?Y(f.optimizedModelFilePath,h):0;if(a=c._OrtCreateSessionOptions(w,!!f.enableCpuMemArena,!!f.enableMemPattern,g,!!f.enableProfiling,0,s,S,x,H),a===0&&j("Can\'t create session options."),f.executionProviders&&ln(a,f.executionProviders,h),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let A=Y("enableGraphCapture",h),I=Y(f.enableGraphCapture.toString(),h);c._OrtAddSessionConfigEntry(a,A,I)!==0&&j(`Can\'t set a session config entry: \'enableGraphCapture\' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[A,I]of Object.entries(f.freeDimensionOverrides)){if(typeof A!="string")throw new Error(`free dimension override name must be a string: ${A}`);if(typeof I!="number"||!Number.isInteger(I)||I<0)throw new Error(`free dimension override value must be a non-negative integer: ${I}`);let V=Y(A,h);c._OrtAddFreeDimensionOverride(a,V,I)!==0&&j(`Can\'t set a free dimension override: ${A} - ${I}.`)}return f.extra!==void 0&&tt(f.extra,"",new WeakSet,(A,I)=>{let V=Y(A,h),R=Y(I,h);c._OrtAddSessionConfigEntry(a,V,R)!==0&&j(`Can\'t set a session config entry: ${A} - ${I}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseSessionOptions(a),h.forEach(g=>c._free(g)),w}};var xt=i=>{switch(i){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${i}`)}},Mr=i=>{switch(i){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${i}`)}},Ut=i=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][i],Cr=i=>{switch(i){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${i}`)}},Dr=i=>{switch(i){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${i}`)}},Fr=i=>i==="float32"||i==="float16"||i==="int32"||i==="int64"||i==="uint32"||i==="uint8"||i==="bool",Pr=i=>{switch(i){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${i}`)}};var xr=async i=>{if(typeof i=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(i))}catch(c){if(c.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(i),h=[];for await(let f of a)h.push(f);return new Uint8Array(Buffer.concat(h))}throw c}else{let c=await fetch(i);if(!c.ok)throw new Error(`failed to load external data file: ${i}`);let a=c.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await c.arrayBuffer());{if(!c.body)throw new Error(`failed to load external data file: ${i}, no response body.`);let f=c.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(s){if(s instanceof RangeError){let S=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:S,maximum:S}).buffer}else throw s}let g=0;for(;;){let{done:s,value:S}=await f.read();if(s)break;let x=S.byteLength;new Uint8Array(w,g,x).set(S),g+=x}return new Uint8Array(w,0,h)}}else return i instanceof Blob?new Uint8Array(await i.arrayBuffer()):i instanceof Uint8Array?i:new Uint8Array(i)};var cn=(i,c)=>{Q()._OrtInit(i,c)!==0&&j("Can\'t initialize onnxruntime.")},Lr=async i=>{cn(i.wasm.numThreads,Dr(i.logLevel))},Rr=async(i,c)=>{},Ye=new Map,dn=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);return c._OrtGetInputOutputCount(i,h,h+4)!==0&&j("Can\'t get session input/output count."),[c.HEAP32[h/4],c.HEAP32[h/4+1]]}finally{c.stackRestore(a)}},Lt=i=>{let c=Q(),a=c._malloc(i.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${i.byteLength}.`);return c.HEAPU8.set(i,a),[a,i.byteLength]},Ir=async(i,c)=>{let a,h,f=Q();Array.isArray(i)?[a,h]=i:i.buffer===f.HEAPU8.buffer?[a,h]=[i.byteOffset,i.byteLength]:[a,h]=Lt(i);let w=0,g=0,s=0,S=[],x=[],H=[];try{if([g,S]=Tr(c),c?.externalData&&f.mountExternalData){let L=[];for(let W of c.externalData){let de=typeof W=="string"?W:W.path;L.push(xr(typeof W=="string"?W:W.data).then(pe=>{f.mountExternalData(de,pe)}))}await Promise.all(L)}w=await f._OrtCreateSession(a,h,g),w===0&&j("Can\'t create a session.");let[A,I]=dn(w),V=!!c?.enableGraphCapture,R=[],B=[],D=[];for(let L=0;L<A;L++){let W=f._OrtGetInputName(w,L);W===0&&j("Can\'t get an input name."),x.push(W),R.push(f.UTF8ToString(W))}for(let L=0;L<I;L++){let W=f._OrtGetOutputName(w,L);W===0&&j("Can\'t get an output name."),H.push(W);let de=f.UTF8ToString(W);B.push(de)}let T=null;return Ye.set(w,[w,x,H,T,V,!1]),[w,R,B]}catch(A){throw x.forEach(I=>f._OrtFree(I)),H.forEach(I=>f._OrtFree(I)),s!==0&&f._OrtReleaseBinding(s),w!==0&&f._OrtReleaseSession(w),A}finally{f._free(a),g!==0&&f._OrtReleaseSessionOptions(g),S.forEach(A=>f._free(A)),f.unmountExternalData?.()}},Br=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error(`cannot release session. invalid session id: ${i}`);let[h,f,w,g,s]=a;g&&(s&&c._OrtClearBoundOutputs(g.handle),c._OrtReleaseBinding(g.handle)),c.jsepOnReleaseSession?.(i),f.forEach(S=>c._OrtFree(S)),w.forEach(S=>c._OrtFree(S)),c._OrtReleaseSession(h),Ye.delete(i)},Ur=(i,c,a,h,f,w=!1)=>{if(!i){c.push(0);return}let g=Q(),s=i[0],S=i[1],x=i[3],H,A;if(s==="string"&&x==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(w&&x!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(x==="gpu-buffer"){let R=i[2].gpuBuffer,B=Ut(xt(s));A=S.reduce((T,L)=>T*L,1)*B;let D=g.jsepRegisterBuffer;if(!D)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');H=D(h,f,R,A)}else{let R=i[2];if(Array.isArray(R)){A=4*R.length,H=g._malloc(A),a.push(H);let B=H/4;for(let D=0;D<R.length;D++){if(typeof R[D]!="string")throw new TypeError(`tensor data at index ${D} is not a string`);g.HEAPU32[B++]=Y(R[D],a)}}else A=R.byteLength,H=g._malloc(A),a.push(H),g.HEAPU8.set(new Uint8Array(R.buffer,R.byteOffset,A),H)}let I=g.stackSave(),V=g.stackAlloc(4*S.length);try{let R=V/4;S.forEach(D=>g.HEAP32[R++]=D);let B=g._OrtCreateTensor(xt(s),H,A,V,S.length,Pr(x));B===0&&j(`Can\'t create tensor for input/output. session=${h}, index=${f}.`),c.push(B)}finally{g.stackRestore(I)}},kr=async(i,c,a,h,f,w)=>{let g=Q(),s=Ye.get(i);if(!s)throw new Error(`cannot run inference. invalid session id: ${i}`);let S=s[0],x=s[1],H=s[2],A=s[3],I=s[4],V=s[5],R=c.length,B=h.length,D=0,T=[],L=[],W=[],de=[],pe=g.stackSave(),Z=g.stackAlloc(R*4),_=g.stackAlloc(R*4),J=g.stackAlloc(B*4),Pe=g.stackAlloc(B*4);try{[D,T]=Ar(w);for(let F=0;F<R;F++)Ur(a[F],L,de,i,c[F],I);for(let F=0;F<B;F++)Ur(f[F],W,de,i,R+h[F],I);let le=Z/4,Ie=_/4,ne=J/4,X=Pe/4;for(let F=0;F<R;F++)g.HEAPU32[le++]=L[F],g.HEAPU32[Ie++]=x[c[F]];for(let F=0;F<B;F++)g.HEAPU32[ne++]=W[F],g.HEAPU32[X++]=H[h[F]];g.jsepOnRunStart?.(S);let we;we=await g._OrtRun(S,_,Z,R,Pe,B,J,D),we!==0&&j("failed to call OrtRun().");let me=[];for(let F=0;F<B;F++){let ie=g.HEAPU32[J/4+F];if(ie===W[F]){me.push(f[F]);continue}let xe=g.stackSave(),ce=g.stackAlloc(4*4),be=!1,ae,K=0;try{g._OrtGetTensorData(ie,ce,ce+4,ce+8,ce+12)!==0&&j(`Can\'t access output tensor data on index ${F}.`);let Oe=ce/4,Ue=g.HEAPU32[Oe++];K=g.HEAPU32[Oe++];let ve=g.HEAPU32[Oe++],Ae=g.HEAPU32[Oe++],_e=[];for(let te=0;te<Ae;te++)_e.push(g.HEAPU32[ve/4+te]);g._OrtFree(ve);let ge=_e.reduce((te,re)=>te*re,1);ae=Mr(Ue);let Be=A?.outputPreferredLocations[h[F]];if(ae==="string"){if(Be==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let te=[],re=K/4;for(let ue=0;ue<ge;ue++){let Ee=g.HEAPU32[re++],Se=ue===ge-1?void 0:g.HEAPU32[re]-Ee;te.push(g.UTF8ToString(Ee,Se))}me.push([ae,_e,te,"cpu"])}else if(Be==="gpu-buffer"&&ge>0){let te=g.jsepGetBuffer;if(!te)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let re=te(K),ue=Ut(Ue);if(ue===void 0||!Fr(ae))throw new Error(`Unsupported data type: ${ae}`);be=!0,me.push([ae,_e,{gpuBuffer:re,download:g.jsepCreateDownloader(re,ge*ue,ae),dispose:()=>{g._OrtReleaseTensor(ie)}},"gpu-buffer"])}else{let te=Cr(ae),re=new te(ge);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(g.HEAPU8.subarray(K,K+re.byteLength)),me.push([ae,_e,re,"cpu"])}}finally{g.stackRestore(xe),ae==="string"&&K&&g._free(K),be||g._OrtReleaseTensor(ie)}}return A&&!I&&(g._OrtClearBoundOutputs(A.handle),Ye.set(i,[S,x,H,A,I,!1])),me}finally{g.stackRestore(pe),L.forEach(le=>g._OrtReleaseTensor(le)),W.forEach(le=>g._OrtReleaseTensor(le)),de.forEach(le=>g._free(le)),D!==0&&g._OrtReleaseRunOptions(D),T.forEach(le=>g._free(le))}},Wr=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error("invalid session id");let h=a[0],f=c._OrtEndProfiling(h);f===0&&j("Can\'t get an profile file name."),c._OrtFree(f)},Nr=i=>{let c=[];for(let a of i){let h=a[2];!Array.isArray(h)&&"buffer"in h&&c.push(h.buffer)}return c};self.onmessage=i=>{let{type:c,in:a}=i.data;try{switch(c){case"init-wasm":Sr(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:c})},h=>{postMessage({type:c,err:h})})},h=>{postMessage({type:c,err:h})});break;case"init-ep":{let{epName:h,env:f}=a;Rr(f,h).then(()=>{postMessage({type:c})},w=>{postMessage({type:c,err:w})});break}case"copy-from":{let{buffer:h}=a,f=Lt(h);postMessage({type:c,out:f});break}case"create":{let{model:h,options:f}=a;Ir(h,f).then(w=>{postMessage({type:c,out:w})},w=>{postMessage({type:c,err:w})});break}case"release":Br(a),postMessage({type:c});break;case"run":{let{sessionId:h,inputIndices:f,inputs:w,outputIndices:g,options:s}=a;kr(h,f,w,g,new Array(g.length).fill(null),s).then(S=>{S.some(x=>x[3]!=="cpu")?postMessage({type:c,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:c,out:S},Nr([...w,...S]))},S=>{postMessage({type:c,err:S})});break}case"end-profiling":Wr(a),postMessage({type:c});break;default:}}catch(h){postMessage({type:c,err:h})}};})();\n'}),_r,gt$1,yn,Do,Lo,ca$1,pa$1,Vr,Wr,Tg,Eo,od$1,id$2,ad$1,sd$1,ud$1,ld$1,fd$1,da$1=L(()=>{Ot$1(),rd$1(),Ur(),_r=()=>!!Z.wasm.proxy&&typeof document<"u",yn=!1,Do=!1,Lo=!1,pa$1=new Map,Vr=(t,e)=>{let n=pa$1.get(t);n?n.push(e):pa$1.set(t,[e])},Wr=()=>{if(yn||!Do||Lo||!gt$1)throw new Error("worker not ready")},Tg=t=>{switch(t.data.type){case"init-wasm":yn=!1,t.data.err?(Lo=!0,ca$1[1](t.data.err)):(Do=!0,ca$1[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let e=pa$1.get(t.data.type);t.data.err?e.shift()[1](t.data.err):e.shift()[0](t.data.out);break}}},Eo=typeof document<"u"?document?.currentScript?.src:void 0,od$1=async()=>{if(!Do){if(yn)throw new Error("multiple calls to 'initWasm()' detected.");if(Lo)throw new Error("previous call to 'initWasm()' failed.");if(yn=!0,_r())return Z.wasm.wasmPaths===void 0&&Eo&&Eo.indexOf("blob:")!==0&&(Z.wasm.wasmPaths=Eo.substr(0,+Eo.lastIndexOf("/")+1)),new Promise((t,e)=>{gt$1?.terminate();let n=URL.createObjectURL(new Blob([nd$1()],{type:"text/javascript"}));gt$1=new Worker(n,{name:"ort-wasm-proxy-worker"}),gt$1.onerror=o=>e(o),gt$1.onmessage=Tg,URL.revokeObjectURL(n),ca$1=[t,e];let i={type:"init-wasm",in:Z};gt$1.postMessage(i)});try{await Mp$1(Z.wasm),await Xp$1(Z),Do=!0}catch(t){throw Lo=!0,t}finally{yn=!1}}},id$2=async t=>{if(_r())return Wr(),new Promise((e,n)=>{Vr("init-ep",[e,n]);let i={type:"init-ep",in:{epName:t,env:Z}};gt$1.postMessage(i)});await Kp$1(Z,t)},ad$1=async t=>_r()?(Wr(),new Promise((e,n)=>{Vr("copy-from",[e,n]);let i={type:"copy-from",in:{buffer:t}};gt$1.postMessage(i,[t.buffer])})):fa$1(t),sd$1=async(t,e)=>{if(_r()){if(e?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Wr(),new Promise((n,i)=>{Vr("create",[n,i]);let o={type:"create",in:{model:t,options:{...e}}},a=[];t instanceof Uint8Array&&a.push(t.buffer),gt$1.postMessage(o,a)})}else return Jp$1(t,e)},ud$1=async t=>{if(_r())return Wr(),new Promise((e,n)=>{Vr("release",[e,n]);let i={type:"release",in:t};gt$1.postMessage(i)});Zp$1(t)},ld$1=async(t,e,n,i,o,a)=>{if(_r()){if(n.some(l=>l[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(o.some(l=>l))throw new Error("pre-allocated output tensor is not supported for proxy.");return Wr(),new Promise((l,c)=>{Vr("run",[l,c]);let p=n,s={type:"run",in:{sessionId:t,inputIndices:e,inputs:p,outputIndices:i,options:a}};gt$1.postMessage(s,td$1(p))})}else return Qp$1(t,e,n,i,o,a)},fd$1=async t=>{if(_r())return Wr(),new Promise((e,n)=>{Vr("end-profiling",[e,n]);let i={type:"end-profiling",in:t};gt$1.postMessage(i)});ed$1(t)}}),cd$1,xg,Co$1,pd$1=L(()=>{Ot$1(),da$1(),ua$1(),la$1(),cd$1=(t,e)=>{switch(t.location){case"cpu":return[t.type,t.dims,t.data,"cpu"];case"gpu-buffer":return[t.type,t.dims,{gpuBuffer:t.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${t.location} for ${e()}`)}},xg=t=>{switch(t[3]){case"cpu":return new Me(t[0],t[2],t[1]);case"gpu-buffer":{let e=t[0];if(!Po(e))throw new Error(`not supported data type: ${e} for deserializing GPU tensor`);let{gpuBuffer:n,download:i,dispose:o}=t[2];return Me.fromGpuBuffer(n,{dataType:e,dims:t[1],download:i,dispose:o})}default:throw new Error(`invalid data location: ${t[3]}`)}},Co$1=class{async fetchModelAndCopyToWasmMemory(t){return ad$1(await gn(t))}async loadModel(t,e){lr$1();let n;typeof t=="string"?typeof process<"u"&&process.versions&&process.versions.node?n=await gn(t):n=await this.fetchModelAndCopyToWasmMemory(t):n=t,[this.sessionId,this.inputNames,this.outputNames]=await sd$1(n,e),fr$1()}async dispose(){return ud$1(this.sessionId)}async run(t,e,n){lr$1();let i=[],o=[];Object.entries(t).forEach(d=>{let g=d[0],w=d[1],x=this.inputNames.indexOf(g);if(x===-1)throw new Error(`invalid input '${g}'`);i.push(w),o.push(x)});let a=[],l=[];Object.entries(e).forEach(d=>{let g=d[0],w=d[1],x=this.outputNames.indexOf(g);if(x===-1)throw new Error(`invalid output '${g}'`);a.push(w),l.push(x)});let c=i.map((d,g)=>cd$1(d,()=>`input "${this.inputNames[o[g]]}"`)),p=a.map((d,g)=>d?cd$1(d,()=>`output "${this.outputNames[l[g]]}"`):null),s=await ld$1(this.sessionId,o,c,l,p,n),u={};for(let d=0;d<s.length;d++)u[this.outputNames[l[d]]]=a[d]??xg(s[d]);return fr$1(),u}startProfiling(){}endProfiling(){fd$1(this.sessionId)}}}),wg,Fo,dd$1=L(()=>{Ot$1(),da$1(),pd$1(),wg=()=>{if((typeof Z.wasm.initTimeout!="number"||Z.wasm.initTimeout<0)&&(Z.wasm.initTimeout=0),typeof Z.wasm.simd!="boolean"&&(Z.wasm.simd=!0),typeof Z.wasm.proxy!="boolean"&&(Z.wasm.proxy=!1),typeof Z.wasm.trace!="boolean"&&(Z.wasm.trace=!1),typeof Z.wasm.numThreads!="number"||!Number.isInteger(Z.wasm.numThreads)||Z.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(Z.wasm.numThreads=1);let t=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;Z.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},Fo=class{async init(t){wg(),await od$1(),await id$2(t)}async createInferenceSessionHandler(t,e){let n=new Co$1;return await n.loadModel(t,e),Promise.resolve(n)}}}),hd$1={};Sr(hd$1,{wasmBackend:()=>vg});var vg,md$1=L(()=>{dd$1(),vg=new Fo});Ot$1();Ot$1();Ot$1();var Ts$1="1.18.0",jO=qo;{let t=(Op$1(),ar(_p$1)).onnxjsBackend;Pr$1("webgl",t,-10)}{let t=(md$1(),ar(hd$1)).wasmBackend;Pr$1("cpu",t,10),Pr$1("wasm",t,10)}Object.defineProperty(Z.versions,"web",{value:Ts$1,enumerable:!0});/*! Bundled license information:

long/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)
*/const ort_cpu=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return Pd$1},get TRACE(){return ls$1},get TRACE_FUNC_BEGIN(){return lr$1},get TRACE_FUNC_END(){return fr$1},get Tensor(){return Me},get TrainingSession(){return Dd$1},default:jO,get env(){return Z},get registerBackend(){return Pr$1}},Symbol.toStringTag,{value:"Module"}));/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var Oi=Object.defineProperty,nc=Object.getOwnPropertyDescriptor,ic=Object.getOwnPropertyNames,oc=Object.prototype.hasOwnProperty,j=(t,e)=>()=>(t&&(e=t(t=0)),e),Er=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),kr=(t,e)=>{for(var n in e)Oi(t,n,{get:e[n],enumerable:!0})},ac=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ic(e))!oc.call(t,o)&&o!==n&&Oi(t,o,{get:()=>e[o],enumerable:!(i=nc(e,o))||i.enumerable});return t},sr=t=>ac(Oi({},"__esModule",{value:!0}),t),kn,ur,lr,sc,On,Pn=j(()=>{kn=new Map,ur=[],lr=(t,e,n)=>{if(e&&typeof e.init=="function"&&typeof e.createInferenceSessionHandler=="function"){let i=kn.get(t);if(i===void 0)kn.set(t,{backend:e,priority:n});else{if(i.priority>n)return;if(i.priority===n&&i.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${n}`)}if(n>=0){let o=ur.indexOf(t);o!==-1&&ur.splice(o,1);for(let a=0;a<ur.length;a++)if(kn.get(ur[a]).priority<=n){ur.splice(a,0,t);return}ur.push(t)}return}throw new TypeError("not a valid backend")},sc=async t=>{let e=kn.get(t);if(!e)return"backend not found.";if(e.initialized)return e.backend;if(e.aborted)return e.error;{let n=!!e.initPromise;try{return n||(e.initPromise=e.backend.init(t)),await e.initPromise,e.initialized=!0,e.backend}catch(i){return n||(e.error=`${i}`,e.aborted=!0),e.error}finally{delete e.initPromise}}},On=async t=>{let e=t.executionProviders||[],n=e.map(p=>typeof p=="string"?p:p.name),i=n.length===0?ur:n,o,a=[],l=new Set;for(let p of i){let s=await sc(p);typeof s=="string"?a.push({name:p,err:s}):(o||(o=s),o===s&&l.add(p))}if(!o)throw new Error(`no available backend found. ERR: ${a.map(p=>`[${p.name}] ${p.err}`).join(", ")}`);for(let{name:p,err:s}of a)n.includes(p)&&console.warn(`removing requested execution provider "${p}" from session options because it is not available: ${s}`);let c=e.filter(p=>l.has(typeof p=="string"?p:p.name));return[o,new Proxy(t,{get:(p,s)=>s==="executionProviders"?c:Reflect.get(p,s)})]}}),ra=j(()=>{Pn()}),na,ia=j(()=>{na="1.18.0"}),oa,gt,Pi=j(()=>{ia(),oa="warning",gt={wasm:{},webgl:{},webgpu:{},versions:{common:na},set logLevel(t){if(t!==void 0){if(typeof t!="string"||["verbose","info","warning","error","fatal"].indexOf(t)===-1)throw new Error(`Unsupported logging level: ${t}`);oa=t}},get logLevel(){return oa}},Object.defineProperty(gt,"logLevel",{enumerable:!0})}),ke,aa=j(()=>{Pi(),ke=gt}),sa,ua,la=j(()=>{sa=(t,e)=>{let n=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);n.width=t.dims[3],n.height=t.dims[2];let i=n.getContext("2d");if(i!=null){let o,a;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],a=t.dims[3]):(o=t.dims[3],a=t.dims[2]);let l=e?.format!==void 0?e.format:"RGB",c=e?.norm,p,s;c===void 0||c.mean===void 0?p=[255,255,255,255]:typeof c.mean=="number"?p=[c.mean,c.mean,c.mean,c.mean]:(p=[c.mean[0],c.mean[1],c.mean[2],0],c.mean[3]!==void 0&&(p[3]=c.mean[3])),c===void 0||c.bias===void 0?s=[0,0,0,0]:typeof c.bias=="number"?s=[c.bias,c.bias,c.bias,c.bias]:(s=[c.bias[0],c.bias[1],c.bias[2],0],c.bias[3]!==void 0&&(s[3]=c.bias[3]));let u=a*o,d=0,g=u,w=u*2,x=-1;l==="RGBA"?(d=0,g=u,w=u*2,x=u*3):l==="RGB"?(d=0,g=u,w=u*2):l==="RBG"&&(d=0,w=u,g=u*2);for(let C=0;C<a;C++)for(let O=0;O<o;O++){let Y=(t.data[d++]-s[0])*p[0],q=(t.data[g++]-s[1])*p[1],ue=(t.data[w++]-s[2])*p[2],pe=x===-1?255:(t.data[x++]-s[3])*p[3];i.fillStyle="rgba("+Y+","+q+","+ue+","+pe+")",i.fillRect(O,C,1,1)}if("toDataURL"in n)return n.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},ua=(t,e)=>{let n=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),i;if(n!=null){let o,a,l;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],a=t.dims[1],l=t.dims[3]):(o=t.dims[3],a=t.dims[2],l=t.dims[1]);let c=e!==void 0&&e.format!==void 0?e.format:"RGB",p=e?.norm,s,u;p===void 0||p.mean===void 0?s=[255,255,255,255]:typeof p.mean=="number"?s=[p.mean,p.mean,p.mean,p.mean]:(s=[p.mean[0],p.mean[1],p.mean[2],255],p.mean[3]!==void 0&&(s[3]=p.mean[3])),p===void 0||p.bias===void 0?u=[0,0,0,0]:typeof p.bias=="number"?u=[p.bias,p.bias,p.bias,p.bias]:(u=[p.bias[0],p.bias[1],p.bias[2],0],p.bias[3]!==void 0&&(u[3]=p.bias[3]));let d=a*o;if(e!==void 0&&(e.format!==void 0&&l===4&&e.format!=="RGBA"||l===3&&e.format!=="RGB"&&e.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let g=4,w=0,x=1,C=2,O=3,Y=0,q=d,ue=d*2,pe=-1;c==="RGBA"?(Y=0,q=d,ue=d*2,pe=d*3):c==="RGB"?(Y=0,q=d,ue=d*2):c==="RBG"&&(Y=0,ue=d,q=d*2),i=n.createImageData(o,a);for(let se=0;se<a*o;w+=g,x+=g,C+=g,O+=g,se++)i.data[w]=(t.data[Y++]-u[0])*s[0],i.data[x]=(t.data[q++]-u[1])*s[1],i.data[C]=(t.data[ue++]-u[2])*s[2],i.data[O]=pe===-1?255:(t.data[pe++]-u[3])*s[3]}else throw new Error("Can not access image data");return i}}),Ri,da,ca,pa,ma,fa=j(()=>{Rn(),Ri=(t,e)=>{if(t===void 0)throw new Error("Image buffer must be defined");if(e.height===void 0||e.width===void 0)throw new Error("Image height and width must be defined");if(e.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:n,width:i}=e,o=e.norm??{mean:255,bias:0},a,l;typeof o.mean=="number"?a=[o.mean,o.mean,o.mean,o.mean]:a=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?l=[o.bias,o.bias,o.bias,o.bias]:l=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];let c=e.format!==void 0?e.format:"RGBA",p=e.tensorFormat!==void 0&&e.tensorFormat!==void 0?e.tensorFormat:"RGB",s=n*i,u=p==="RGBA"?new Float32Array(s*4):new Float32Array(s*3),d=4,g=0,w=1,x=2,C=3,O=0,Y=s,q=s*2,ue=-1;c==="RGB"&&(d=3,g=0,w=1,x=2,C=-1),p==="RGBA"?ue=s*3:p==="RBG"?(O=0,q=s,Y=s*2):p==="BGR"&&(q=0,Y=s,O=s*2);for(let pe=0;pe<s;pe++,g+=d,x+=d,w+=d,C+=d)u[O++]=(t[g]+l[0])/a[0],u[Y++]=(t[w]+l[1])/a[1],u[q++]=(t[x]+l[2])/a[2],ue!==-1&&C!==-1&&(u[ue++]=(t[C]+l[3])/a[3]);return p==="RGBA"?new ot("float32",u,[1,4,n,i]):new ot("float32",u,[1,3,n,i])},da=async(t,e)=>{let n=typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement,i=typeof ImageData<"u"&&t instanceof ImageData,o=typeof ImageBitmap<"u"&&t instanceof ImageBitmap,a=typeof t=="string",l,c=e??{},p=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},s=u=>u instanceof HTMLCanvasElement||u instanceof OffscreenCanvas?u.getContext("2d"):null;if(n){let u=p();u.width=t.width,u.height=t.height;let d=s(u);if(d!=null){let g=t.height,w=t.width;if(e!==void 0&&e.resizedHeight!==void 0&&e.resizedWidth!==void 0&&(g=e.resizedHeight,w=e.resizedWidth),e!==void 0){if(c=e,e.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");c.tensorFormat="RGBA",c.height=g,c.width=w}else c.tensorFormat="RGBA",c.height=g,c.width=w;d.drawImage(t,0,0),l=d.getImageData(0,0,w,g).data}else throw new Error("Can not access image data")}else if(i){let u,d;if(e!==void 0&&e.resizedWidth!==void 0&&e.resizedHeight!==void 0?(u=e.resizedHeight,d=e.resizedWidth):(u=t.height,d=t.width),e!==void 0&&(c=e),c.format="RGBA",c.height=u,c.width=d,e!==void 0){let g=p();g.width=d,g.height=u;let w=s(g);if(w!=null)w.putImageData(t,0,0),l=w.getImageData(0,0,d,u).data;else throw new Error("Can not access image data")}else l=t.data}else if(o){if(e===void 0)throw new Error("Please provide image config with format for Imagebitmap");let u=p();u.width=t.width,u.height=t.height;let d=s(u);if(d!=null){let g=t.height,w=t.width;return d.drawImage(t,0,0,w,g),l=d.getImageData(0,0,w,g).data,c.height=g,c.width=w,Ri(l,c)}else throw new Error("Can not access image data")}else{if(a)return new Promise((u,d)=>{let g=p(),w=s(g);if(!t||!w)return d();let x=new Image;x.crossOrigin="Anonymous",x.src=t,x.onload=()=>{g.width=x.width,g.height=x.height,w.drawImage(x,0,0,g.width,g.height);let C=w.getImageData(0,0,g.width,g.height);c.height=g.height,c.width=g.width,u(Ri(C.data,c))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(l!==void 0)return Ri(l,c);throw new Error("Input data provided is not supported - aborted tensor creation")},ca=(t,e)=>{let{width:n,height:i,download:o,dispose:a}=e,l=[1,i,n,4];return new ot({location:"texture",type:"float32",texture:t,dims:l,download:o,dispose:a})},pa=(t,e)=>{let{dataType:n,dims:i,download:o,dispose:a}=e;return new ot({location:"gpu-buffer",type:n??"float32",gpuBuffer:t,dims:i,download:o,dispose:a})},ma=(t,e,n)=>new ot({location:"cpu-pinned",type:t,data:e,dims:n??[e.length]})}),dr,Qr,ha,ga,ya=j(()=>{dr=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Qr=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ha=!1,ga=()=>{if(!ha){ha=!0;let t=typeof BigInt64Array<"u"&&BigInt64Array.from,e=typeof BigUint64Array<"u"&&BigUint64Array.from,n=typeof Float16Array<"u"&&Float16Array.from;t&&(dr.set("int64",BigInt64Array),Qr.set(BigInt64Array,"int64")),e&&(dr.set("uint64",BigUint64Array),Qr.set(BigUint64Array,"uint64")),n?(dr.set("float16",Float16Array),Qr.set(Float16Array,"float16")):dr.set("float16",Uint16Array)}}}),ba,va,wa=j(()=>{Rn(),ba=t=>{let e=1;for(let n=0;n<t.length;n++){let i=t[n];if(typeof i!="number"||!Number.isSafeInteger(i))throw new TypeError(`dims[${n}] must be an integer, got: ${i}`);if(i<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${i}`);e*=i}return e},va=(t,e)=>{switch(t.location){case"cpu":return new ot(t.type,t.data,e);case"cpu-pinned":return new ot({location:"cpu-pinned",data:t.data,type:t.type,dims:e});case"texture":return new ot({location:"texture",texture:t.texture,type:t.type,dims:e});case"gpu-buffer":return new ot({location:"gpu-buffer",gpuBuffer:t.gpuBuffer,type:t.type,dims:e});default:throw new Error(`tensorReshape: tensor location ${t.location} is not supported`)}}}),ot,Rn=j(()=>{la(),fa(),ya(),wa(),ot=class{constructor(t,e,n){ga();let i,o;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,i=t.type,o=t.dims,t.location){case"cpu-pinned":{let l=dr.get(i);if(!l)throw new TypeError(`unsupported type "${i}" to create tensor from pinned buffer`);if(!(t.data instanceof l))throw new TypeError(`buffer should be of type ${l.name}`);this.cpuData=t.data;break}case"texture":{if(i!=="float32")throw new TypeError(`unsupported type "${i}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(i!=="float32"&&i!=="float16"&&i!=="int32"&&i!=="int64"&&i!=="uint32"&&i!=="uint8"&&i!=="bool")throw new TypeError(`unsupported type "${i}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let l,c;if(typeof t=="string")if(i=t,c=n,t==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");l=e}else{let p=dr.get(t);if(p===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e)){if(t==="float16"&&p===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t==="uint64"||t==="int64"?l=p.from(e,BigInt):l=p.from(e)}else if(e instanceof p)l=e;else throw new TypeError(`A ${i} tensor's data must be type of ${p}`)}else if(c=e,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let p=typeof t[0];if(p==="string")i="string",l=t;else if(p==="boolean")i="bool",l=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${p}.`)}else{let p=Qr.get(t.constructor);if(p===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);i=p,l=t}if(c===void 0)c=[l.length];else if(!Array.isArray(c))throw new TypeError("A tensor's dims must be a number array");o=c,this.cpuData=l,this.dataLocation="cpu"}let a=ba(o);if(this.cpuData&&a!==this.cpuData.length)throw new Error(`Tensor's size(${a}) does not match data length(${this.cpuData.length}).`);this.type=i,this.dims=o,this.size=a}static async fromImage(t,e){return da(t,e)}static fromTexture(t,e){return ca(t,e)}static fromGpuBuffer(t,e){return pa(t,e)}static fromPinnedBuffer(t,e,n){return ma(t,e,n)}toDataURL(t){return sa(this,t)}toImageData(t){return ua(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,t&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return va(this,t)}}}),tt,zn=j(()=>{Rn(),tt=ot}),Bn,$a,yt,ut,zi=j(()=>{Pi(),Bn=(t,e)=>{(typeof gt.trace>"u"?!gt.wasm.trace:!gt.trace)||console.timeStamp(`${t}::ORT::${e}`)},$a=(t,e)=>{let n=new Error().stack?.split(/\r\n|\r|\n/g)||[],i=!1;for(let o=0;o<n.length;o++){if(i&&!n[o].includes("TRACE_FUNC")){let a=`FUNC_${t}::${n[o].trim().split(" ")[1]}`;e&&(a+=`::${e}`),Bn("CPU",a);return}n[o].includes("TRACE_FUNC")&&(i=!0)}},yt=t=>{(typeof gt.trace>"u"?!gt.wasm.trace:!gt.trace)||$a("BEGIN",t)},ut=t=>{(typeof gt.trace>"u"?!gt.wasm.trace:!gt.trace)||$a("END",t)}}),Dn,_a=j(()=>{Pn(),zn(),zi(),Dn=class y4{constructor(e){this.handler=e}async run(e,n,i){yt();let o={},a={};if(typeof e!="object"||e===null||e instanceof tt||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof n=="object"){if(n===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof tt)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(n.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let s of n){if(typeof s!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(s)===-1)throw new RangeError(`'fetches' contains invalid output name: ${s}.`);o[s]=null}if(typeof i=="object"&&i!==null)a=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else{let s=!1,u=Object.getOwnPropertyNames(n);for(let d of this.outputNames)if(u.indexOf(d)!==-1){let g=n[d];(g===null||g instanceof tt)&&(s=!0,l=!1,o[d]=g)}if(s){if(typeof i=="object"&&i!==null)a=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else a=n}}else if(typeof n<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s of this.inputNames)if(typeof e[s]>"u")throw new Error(`input '${s}' is missing in 'feeds'.`);if(l)for(let s of this.outputNames)o[s]=null;let c=await this.handler.run(e,o,a),p={};for(let s in c)if(Object.hasOwnProperty.call(c,s)){let u=c[s];u instanceof tt?p[s]=u:p[s]=new tt(u.type,u.data,u.dims)}return ut(),p}async release(){return this.handler.dispose()}static async create(e,n,i,o){yt();let a,l={};if(typeof e=="string"){if(a=e,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(a=e,typeof n=="object"&&n!==null)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){let u=e,d=0,g=e.byteLength;if(typeof n=="object"&&n!==null)l=n;else if(typeof n=="number"){if(d=n,!Number.isSafeInteger(d))throw new RangeError("'byteOffset' must be an integer.");if(d<0||d>=u.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${u.byteLength}).`);if(g=e.byteLength-d,typeof i=="number"){if(g=i,!Number.isSafeInteger(g))throw new RangeError("'byteLength' must be an integer.");if(g<=0||d+g>u.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${u.byteLength-d}].`);if(typeof o=="object"&&o!==null)l=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof i<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof n<"u")throw new TypeError("'options' must be an object.");a=new Uint8Array(u,d,g)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[c,p]=await On(l),s=await c.createInferenceSessionHandler(a,p);return ut(),new y4(s)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),uc,xa=j(()=>{_a(),uc=Dn}),Sa=j(()=>{}),Ca=j(()=>{}),Ia=j(()=>{}),Ta=j(()=>{}),lc,Mn,Aa=j(()=>{Pn(),zn(),lc="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Mn=class _4{constructor(e,n,i){this.handler=e,this.hasOptimizerModel=n,this.hasEvalModel=i}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(e,n){let i=e.evalModel||"",o=e.optimizerModel||"",a=n||{},[l,c]=await On(a);if(l.createTrainingSessionHandler){let p=await l.createTrainingSessionHandler(e.checkpointState,e.trainModel,i,o,c);return new _4(p,!!e.optimizerModel,!!e.evalModel)}else throw new Error(lc)}typeNarrowingForRunStep(e,n,i,o,a){let l={},c={};if(typeof i!="object"||i===null||i instanceof tt||Array.isArray(i))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let p=!0;if(typeof o=="object"){if(o===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(o instanceof tt)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(o)){if(o.length===0)throw new TypeError("'fetches' cannot be an empty array.");p=!1;for(let s of o){if(typeof s!="string")throw new TypeError("'fetches' must be a string array or an object.");if(n.indexOf(s)===-1)throw new RangeError(`'fetches' contains invalid output name: ${s}.`);l[s]=null}if(typeof a=="object"&&a!==null)c=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{let s=!1,u=Object.getOwnPropertyNames(o);for(let d of n)if(u.indexOf(d)!==-1){let g=o[d];(g===null||g instanceof tt)&&(s=!0,p=!1,l[d]=g)}if(s){if(typeof a=="object"&&a!==null)c=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else c=o}}else if(typeof o<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let s of e)if(typeof i[s]>"u")throw new Error(`input '${s}' is missing in 'feeds'.`);if(p)for(let s of n)l[s]=null;return[l,c]}convertHandlerReturnTypeToMapOfTensors(e){let n={};for(let i in e)if(Object.hasOwnProperty.call(e,i)){let o=e[i];o instanceof tt?n[i]=o:n[i]=new tt(o.type,o.data,o.dims)}return n}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(e,n,i){let[o,a]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,n,i),l=await this.handler.runTrainStep(e,o,a);return this.convertHandlerReturnTypeToMapOfTensors(l)}async runOptimizerStep(e){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(e||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(e,n,i){if(this.hasEvalModel){let[o,a]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,n,i),l=await this.handler.runEvalStep(e,o,a);return this.convertHandlerReturnTypeToMapOfTensors(l)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(e=!0){return this.handler.getParametersSize(e)}async loadParametersBuffer(e,n=!0){let i=await this.getParametersSize(n);if(e.length!==4*i)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,n)}async getContiguousParameters(e=!0){return this.handler.getContiguousParameters(e)}async release(){return this.handler.dispose()}}}),dc,Ea=j(()=>{Aa(),dc=Mn}),Bi={};kr(Bi,{InferenceSession:()=>uc,TRACE:()=>Bn,TRACE_FUNC_BEGIN:()=>yt,TRACE_FUNC_END:()=>ut,Tensor:()=>tt,TrainingSession:()=>dc,env:()=>ke,registerBackend:()=>lr});var _t=j(()=>{ra(),aa(),xa(),zn(),Sa(),Ca(),zi(),Ia(),Ta(),Ea()}),Di={};kr(Di,{createReadStream:()=>Oa,readFile:()=>cc,readFileSync:()=>pc});var cc,pc,Oa,Mi=j(()=>{cc=void 0,pc=void 0,Oa=void 0}),Ui={};kr(Ui,{join:()=>mc});var mc,Wi=j(()=>{mc=void 0}),za=Er((t,e)=>{var n=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(o={}){var a=o,l,c,p=new Promise((E,k)=>{l=E,c=k});a.mountExternalData=(E,k)=>{(a.eb||(a.eb=new Map)).set(E,k)},a.unmountExternalData=()=>{delete a.eb};let s=()=>{let E=(ie,ge,Le)=>(...Kt)=>{let Na=Dg,Uo=ge?.();Kt=ie(...Kt);let s0=ge?.();return Uo!==s0&&(ie=s0,Le(Uo),ge=Le=null),Dg!=Na?By():Kt},k=ie=>async(...ge)=>{try{if(a.cb)throw Error("Session already started");let Le=a.cb={xb:ge[0],errors:[]},Kt=await ie(...ge);if(a.cb!==Le)throw Error("Session mismatch");a.kb?.flush();let Na=Le.errors;if(0<Na.length){let Uo=await Promise.all(Na);if(Uo=Uo.filter(s0=>s0),0<Uo.length)throw Error(Uo.join(`
`))}return Kt}finally{a.cb=null}};a._OrtCreateSession=E(a._OrtCreateSession,()=>a._OrtCreateSession,ie=>a._OrtCreateSession=ie),a._OrtRun=k(E(a._OrtRun,()=>a._OrtRun,ie=>a._OrtRun=ie)),a._OrtRunWithBinding=k(E(a._OrtRunWithBinding,()=>a._OrtRunWithBinding,ie=>a._OrtRunWithBinding=ie)),a._OrtBindInput=E(a._OrtBindInput,()=>a._OrtBindInput,ie=>a._OrtBindInput=ie),s=void 0};a.jsepInit=(E,k)=>{if(s?.(),E==="webgpu"){[a.kb,a.pb,a.tb,a.lb,a.sb,a.Ra,a.ub,a.wb,a.qb,a.rb,a.vb]=k;let ie=a.kb;a.jsepRegisterBuffer=(ge,Le,Kt,Na)=>ie.registerBuffer(ge,Le,Kt,Na),a.jsepGetBuffer=ge=>ie.getBuffer(ge),a.jsepCreateDownloader=(ge,Le,Kt)=>ie.createDownloader(ge,Le,Kt),a.jsepOnReleaseSession=ge=>{ie.onReleaseSession(ge)},a.jsepOnRunStart=ge=>ie.onRunStart(ge)}};var u=Object.assign({},a),d="./this.program",g=(E,k)=>{throw k},w=typeof window=="object",x=typeof importScripts=="function",C=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",O="",Y,q,ue;if(C){var pe=(Mi(),sr(Di)),se=(Wi(),sr(Ui));O=x?se.dirname(O)+"/":__dirname+"/",Y=(E,k)=>(E=a0(E)?new URL(E):se.normalize(E),pe.readFileSync(E,k?void 0:"utf8")),ue=E=>(E=Y(E,!0),E.buffer||(E=new Uint8Array(E)),E),q=(E,k,ie,ge=!0)=>{E=a0(E)?new URL(E):se.normalize(E),pe.readFile(E,ge?void 0:"utf8",(Le,Kt)=>{Le?ie(Le):k(ge?Kt.buffer:Kt)})},!a.thisProgram&&1<process.argv.length&&(d=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),g=(E,k)=>{throw process.exitCode=E,k}}else(w||x)&&(x?O=self.location.href:typeof document<"u"&&document.currentScript&&(O=document.currentScript.src),i&&(O=i),O.startsWith("blob:")?O="":O=O.substr(0,O.replace(/[?#].*/,"").lastIndexOf("/")+1),Y=E=>{var k=new XMLHttpRequest;return k.open("GET",E,!1),k.send(null),k.responseText},x&&(ue=E=>{var k=new XMLHttpRequest;return k.open("GET",E,!1),k.responseType="arraybuffer",k.send(null),new Uint8Array(k.response)}),q=(E,k,ie)=>{var ge=new XMLHttpRequest;ge.open("GET",E,!0),ge.responseType="arraybuffer",ge.onload=()=>{ge.status==200||ge.status==0&&ge.response?k(ge.response):ie()},ge.onerror=ie,ge.send(null)});var Re=console.log.bind(console),Oe=console.error.bind(console);Object.assign(a,u),u=null;var Ce,He=!1,$t,Sn,xn,Lr,jr,et,Ft,Tt,ze,Ht,Ae;function Be(){var E=Ce.buffer;a.HEAP8=Sn=new Int8Array(E),a.HEAP16=Lr=new Int16Array(E),a.HEAPU8=xn=new Uint8Array(E),a.HEAPU16=jr=new Uint16Array(E),a.HEAP32=et=new Int32Array(E),a.HEAPU32=Ft=new Uint32Array(E),a.HEAPF32=Tt=new Float32Array(E),a.HEAPF64=Ae=new Float64Array(E),a.HEAP64=ze=new BigInt64Array(E),a.HEAPU64=Ht=new BigUint64Array(E)}var tr=[],No=[],ah=[],Mo=0,t0=null;function o0(E){throw E="Aborted("+E+")",Oe(E),He=!0,$t=1,E=new WebAssembly.RuntimeError(E+". Build with -sASSERTIONS for more info."),c(E),E}var Xr=E=>E.startsWith("data:application/octet-stream;base64,"),a0=E=>E.startsWith("file://"),Ih;if(Ih="ort-wasm-simd.wasm",!Xr(Ih)){var S0=Ih;Ih=a.locateFile?a.locateFile(S0,O):O+S0}function Sg(E){if(ue)return ue(E);throw"both async and sync fetching of the wasm failed"}function n1(E){if(w||x){if(typeof fetch=="function"&&!a0(E))return fetch(E,{credentials:"same-origin"}).then(k=>{if(!k.ok)throw`failed to load wasm binary file at '${E}'`;return k.arrayBuffer()}).catch(()=>Sg(E));if(q)return new Promise((k,ie)=>{q(E,ge=>k(new Uint8Array(ge)),ie)})}return Promise.resolve().then(()=>Sg(E))}function eg(E,k,ie){return n1(E).then(ge=>WebAssembly.instantiate(ge,k)).then(ie,ge=>{Oe(`failed to asynchronously prepare wasm: ${ge}`),o0(ge)})}function i0(E,k){var ie=Ih;return typeof WebAssembly.instantiateStreaming!="function"||Xr(ie)||a0(ie)||C||typeof fetch!="function"?eg(ie,E,k):fetch(ie,{credentials:"same-origin"}).then(ge=>WebAssembly.instantiateStreaming(ge,E).then(k,function(Le){return Oe(`wasm streaming compile failed: ${Le}`),Oe("falling back to ArrayBuffer instantiation"),eg(ie,E,k)}))}var p0={824920:(E,k,ie,ge)=>{if(typeof a>"u"||!a.eb)return 1;if(E=B0(E>>>0),E.startsWith("./")&&(E=E.substring(2)),E=a.eb.get(E),!E)return 2;if(k>>>=0,ie>>>=0,k+ie>E.byteLength)return 3;try{return xn.set(E.subarray(k,k+ie),ge>>>0>>>0),0}catch{return 4}},825421:()=>{a.qb()},825452:()=>{a.rb()},825481:()=>{a.vb()},825506:E=>a.pb(E),825539:E=>a.tb(E),825571:(E,k,ie)=>{a.lb(E,k,ie,!0)},825610:(E,k,ie)=>{a.lb(E,k,ie)},825643:E=>{a.Ra("Abs",E,void 0)},825694:E=>{a.Ra("Neg",E,void 0)},825745:E=>{a.Ra("Floor",E,void 0)},825798:E=>{a.Ra("Ceil",E,void 0)},825850:E=>{a.Ra("Reciprocal",E,void 0)},825908:E=>{a.Ra("Sqrt",E,void 0)},825960:E=>{a.Ra("Exp",E,void 0)},826011:E=>{a.Ra("Erf",E,void 0)},826062:E=>{a.Ra("Sigmoid",E,void 0)},826117:(E,k,ie)=>{a.Ra("HardSigmoid",E,{alpha:k,beta:ie})},826196:E=>{a.Ra("Log",E,void 0)},826247:E=>{a.Ra("Sin",E,void 0)},826298:E=>{a.Ra("Cos",E,void 0)},826349:E=>{a.Ra("Tan",E,void 0)},826400:E=>{a.Ra("Asin",E,void 0)},826452:E=>{a.Ra("Acos",E,void 0)},826504:E=>{a.Ra("Atan",E,void 0)},826556:E=>{a.Ra("Sinh",E,void 0)},826608:E=>{a.Ra("Cosh",E,void 0)},826660:E=>{a.Ra("Asinh",E,void 0)},826713:E=>{a.Ra("Acosh",E,void 0)},826766:E=>{a.Ra("Atanh",E,void 0)},826819:E=>{a.Ra("Tanh",E,void 0)},826871:E=>{a.Ra("Not",E,void 0)},826922:(E,k,ie)=>{a.Ra("Clip",E,{min:k,max:ie})},826991:E=>{a.Ra("Clip",E,void 0)},827043:(E,k)=>{a.Ra("Elu",E,{alpha:k})},827101:E=>{a.Ra("Relu",E,void 0)},827153:(E,k)=>{a.Ra("LeakyRelu",E,{alpha:k})},827217:(E,k)=>{a.Ra("ThresholdedRelu",E,{alpha:k})},827287:(E,k)=>{a.Ra("Cast",E,{to:k})},827345:E=>{a.Ra("Add",E,void 0)},827396:E=>{a.Ra("Sub",E,void 0)},827447:E=>{a.Ra("Mul",E,void 0)},827498:E=>{a.Ra("Div",E,void 0)},827549:E=>{a.Ra("Pow",E,void 0)},827600:E=>{a.Ra("Equal",E,void 0)},827653:E=>{a.Ra("Greater",E,void 0)},827708:E=>{a.Ra("GreaterOrEqual",E,void 0)},827770:E=>{a.Ra("Less",E,void 0)},827822:E=>{a.Ra("LessOrEqual",E,void 0)},827881:(E,k,ie,ge,Le)=>{a.Ra("ReduceMean",E,{keepDims:!!k,noopWithEmptyAxes:!!ie,axes:ge?Array.from(et.subarray(ge>>>0,Le>>>0)):[]})},828040:(E,k,ie,ge,Le)=>{a.Ra("ReduceMax",E,{keepDims:!!k,noopWithEmptyAxes:!!ie,axes:ge?Array.from(et.subarray(ge>>>0,Le>>>0)):[]})},828198:(E,k,ie,ge,Le)=>{a.Ra("ReduceMin",E,{keepDims:!!k,noopWithEmptyAxes:!!ie,axes:ge?Array.from(et.subarray(ge>>>0,Le>>>0)):[]})},828356:(E,k,ie,ge,Le)=>{a.Ra("ReduceProd",E,{keepDims:!!k,noopWithEmptyAxes:!!ie,axes:ge?Array.from(et.subarray(ge>>>0,Le>>>0)):[]})},828515:(E,k,ie,ge,Le)=>{a.Ra("ReduceSum",E,{keepDims:!!k,noopWithEmptyAxes:!!ie,axes:ge?Array.from(et.subarray(ge>>>0,Le>>>0)):[]})},828673:(E,k,ie,ge,Le)=>{a.Ra("ReduceL1",E,{keepDims:!!k,noopWithEmptyAxes:!!ie,axes:ge?Array.from(et.subarray(ge>>>0,Le>>>0)):[]})},828830:(E,k,ie,ge,Le)=>{a.Ra("ReduceL2",E,{keepDims:!!k,noopWithEmptyAxes:!!ie,axes:ge?Array.from(et.subarray(ge>>>0,Le>>>0)):[]})},828987:(E,k,ie,ge,Le)=>{a.Ra("ReduceLogSum",E,{keepDims:!!k,noopWithEmptyAxes:!!ie,axes:ge?Array.from(et.subarray(ge>>>0,Le>>>0)):[]})},829148:(E,k,ie,ge,Le)=>{a.Ra("ReduceSumSquare",E,{keepDims:!!k,noopWithEmptyAxes:!!ie,axes:ge?Array.from(et.subarray(ge>>>0,Le>>>0)):[]})},829312:(E,k,ie,ge,Le)=>{a.Ra("ReduceLogSumExp",E,{keepDims:!!k,noopWithEmptyAxes:!!ie,axes:ge?Array.from(et.subarray(ge>>>0,Le>>>0)):[]})},829476:E=>{a.Ra("Where",E,void 0)},829529:(E,k,ie)=>{a.Ra("Transpose",E,{perm:k?Array.from(et.subarray(k>>>0,ie>>>0)):[]})},829637:(E,k,ie,ge)=>{a.Ra("DepthToSpace",E,{blocksize:k,mode:B0(ie),format:ge?"NHWC":"NCHW"})},829770:(E,k,ie,ge)=>{a.Ra("DepthToSpace",E,{blocksize:k,mode:B0(ie),format:ge?"NHWC":"NCHW"})},829903:(E,k,ie,ge,Le,Kt,Na,Uo,s0,n0,_0,ag,Zr,ir,h0)=>{a.Ra("ConvTranspose",E,{format:s0?"NHWC":"NCHW",autoPad:k,dilations:[ie],group:ge,kernelShape:[Le],pads:[Kt,Na],strides:[Uo],wIsConst:()=>!!Sn[n0>>>0],outputPadding:_0?Array.from(et.subarray(_0>>>0,ag>>>0)):[],outputShape:Zr?Array.from(et.subarray(Zr>>>0,ir>>>0)):[],activation:B0(h0)})},830304:(E,k,ie,ge,Le,Kt,Na,Uo,s0,n0,_0,ag,Zr,ir)=>{a.Ra("ConvTranspose",E,{format:Uo?"NHWC":"NCHW",autoPad:k,dilations:Array.from(et.subarray(ie>>>0,(ie>>>0)+2>>>0)),group:ge,kernelShape:Array.from(et.subarray(Le>>>0,(Le>>>0)+2>>>0)),pads:Array.from(et.subarray(Kt>>>0,(Kt>>>0)+4>>>0)),strides:Array.from(et.subarray(Na>>>0,(Na>>>0)+2>>>0)),wIsConst:()=>!!Sn[s0>>>0],outputPadding:n0?Array.from(et.subarray(n0>>>0,_0>>>0)):[],outputShape:ag?Array.from(et.subarray(ag>>>0,Zr>>>0)):[],activation:B0(ir)})},830869:(E,k,ie,ge,Le,Kt,Na,Uo,s0,n0,_0,ag,Zr,ir,h0)=>{a.Ra("ConvTranspose",E,{format:s0?"NHWC":"NCHW",autoPad:k,dilations:[ie],group:ge,kernelShape:[Le],pads:[Kt,Na],strides:[Uo],wIsConst:()=>!!Sn[n0>>>0],outputPadding:_0?Array.from(et.subarray(_0>>>0,ag>>>0)):[],outputShape:Zr?Array.from(et.subarray(Zr>>>0,ir>>>0)):[],activation:B0(h0)})},831270:(E,k,ie,ge,Le,Kt,Na,Uo,s0,n0,_0,ag,Zr,ir)=>{a.Ra("ConvTranspose",E,{format:Uo?"NHWC":"NCHW",autoPad:k,dilations:Array.from(et.subarray(ie>>>0,(ie>>>0)+2>>>0)),group:ge,kernelShape:Array.from(et.subarray(Le>>>0,(Le>>>0)+2>>>0)),pads:Array.from(et.subarray(Kt>>>0,(Kt>>>0)+4>>>0)),strides:Array.from(et.subarray(Na>>>0,(Na>>>0)+2>>>0)),wIsConst:()=>!!Sn[s0>>>0],outputPadding:n0?Array.from(et.subarray(n0>>>0,_0>>>0)):[],outputShape:ag?Array.from(et.subarray(ag>>>0,Zr>>>0)):[],activation:B0(ir)})},831835:(E,k)=>{a.Ra("GlobalAveragePool",E,{format:k?"NHWC":"NCHW"})},831926:(E,k,ie,ge,Le,Kt,Na,Uo,s0,n0,_0,ag,Zr,ir,h0,z0)=>{a.Ra("AveragePool",E,{format:z0?"NHWC":"NCHW",auto_pad:k,ceil_mode:ie,count_include_pad:ge,storage_order:Le,dilations:[Kt,Na],kernel_shape:[Uo,s0],pads:[n0,_0,ag,Zr],strides:[ir,h0]})},832210:(E,k)=>{a.Ra("GlobalAveragePool",E,{format:k?"NHWC":"NCHW"})},832301:(E,k,ie,ge,Le,Kt,Na,Uo,s0,n0,_0,ag,Zr,ir,h0,z0)=>{a.Ra("AveragePool",E,{format:z0?"NHWC":"NCHW",auto_pad:k,ceil_mode:ie,count_include_pad:ge,storage_order:Le,dilations:[Kt,Na],kernel_shape:[Uo,s0],pads:[n0,_0,ag,Zr],strides:[ir,h0]})},832585:(E,k)=>{a.Ra("GlobalMaxPool",E,{format:k?"NHWC":"NCHW"})},832672:(E,k,ie,ge,Le,Kt,Na,Uo,s0,n0,_0,ag,Zr,ir,h0,z0)=>{a.Ra("MaxPool",E,{format:z0?"NHWC":"NCHW",auto_pad:k,ceil_mode:ie,count_include_pad:ge,storage_order:Le,dilations:[Kt,Na],kernel_shape:[Uo,s0],pads:[n0,_0,ag,Zr],strides:[ir,h0]})},832952:(E,k)=>{a.Ra("GlobalMaxPool",E,{format:k?"NHWC":"NCHW"})},833039:(E,k,ie,ge,Le,Kt,Na,Uo,s0,n0,_0,ag,Zr,ir,h0,z0)=>{a.Ra("MaxPool",E,{format:z0?"NHWC":"NCHW",auto_pad:k,ceil_mode:ie,count_include_pad:ge,storage_order:Le,dilations:[Kt,Na],kernel_shape:[Uo,s0],pads:[n0,_0,ag,Zr],strides:[ir,h0]})},833319:(E,k,ie,ge,Le)=>{a.Ra("Gemm",E,{alpha:k,beta:ie,transA:ge,transB:Le})},833423:E=>{a.Ra("MatMul",E,void 0)},833477:(E,k,ie,ge)=>{a.Ra("ArgMax",E,{keepDims:!!k,selectLastIndex:!!ie,axis:ge})},833585:(E,k,ie,ge)=>{a.Ra("ArgMin",E,{keepDims:!!k,selectLastIndex:!!ie,axis:ge})},833693:(E,k)=>{a.Ra("Softmax",E,{axis:k})},833756:(E,k)=>{a.Ra("Concat",E,{axis:k})},833816:(E,k,ie,ge,Le)=>{a.Ra("Split",E,{axis:k,numOutputs:ie,splitSizes:ge?Array.from(et.subarray(ge>>>0,Le>>>0)):[]})},833956:E=>{a.Ra("Expand",E,void 0)},834010:(E,k)=>{a.Ra("Gather",E,{axis:Number(k)})},834081:(E,k)=>{a.Ra("GatherElements",E,{axis:Number(k)})},834160:(E,k,ie,ge,Le,Kt,Na,Uo,s0,n0,_0)=>{a.Ra("Resize",E,{antialias:k,axes:ie?Array.from(et.subarray(ie>>>0,ge>>>0)):[],coordinateTransformMode:B0(Le),cubicCoeffA:Kt,excludeOutside:Na,extrapolationValue:Uo,keepAspectRatioPolicy:B0(s0),mode:B0(n0),nearestMode:B0(_0)})},834506:(E,k,ie,ge,Le,Kt,Na)=>{a.Ra("Slice",E,{starts:k?Array.from(et.subarray(k>>>0,ie>>>0)):[],ends:ge?Array.from(et.subarray(ge>>>0,Le>>>0)):[],axes:Kt?Array.from(et.subarray(Kt>>>0,Na>>>0)):[]})},834722:E=>{a.Ra("Tile",E,void 0)},834774:(E,k,ie,ge)=>{a.Ra("LayerNormalization",E,{axis:k,epsilon:ie,simplified:!!ge})},834885:(E,k,ie)=>{a.Ra("InstanceNormalization",E,{epsilon:k,format:ie?"NHWC":"NCHW"})},834999:(E,k,ie)=>{a.Ra("InstanceNormalization",E,{epsilon:k,format:ie?"NHWC":"NCHW"})},835113:E=>{a.Ra("Range",E,void 0)},835166:(E,k)=>{a.Ra("Einsum",E,{equation:B0(k)})},835247:(E,k,ie,ge,Le)=>{a.Ra("Pad",E,{mode:k,value:ie,pads:ge?Array.from(et.subarray(ge>>>0,Le>>>0)):[]})},835374:(E,k,ie,ge,Le,Kt)=>{a.Ra("BatchNormalization",E,{epsilon:k,momentum:ie,spatial:!!Le,trainingMode:!!ge,format:Kt?"NHWC":"NCHW"})},835543:(E,k,ie,ge,Le,Kt)=>{a.Ra("BatchNormalization",E,{epsilon:k,momentum:ie,spatial:!!Le,trainingMode:!!ge,format:Kt?"NHWC":"NCHW"})},835712:(E,k,ie)=>{a.Ra("CumSum",E,{exclusive:Number(k),reverse:Number(ie)})},835809:(E,k,ie,ge,Le,Kt,Na,Uo,s0)=>{a.Ra("Attention",E,{numHeads:k,isUnidirectional:ie,maskFilterValue:ge,scale:Le,doRotary:Kt,qkvHiddenSizes:Na?Array.from(et.subarray(Number(Uo)>>>0,Number(Uo)+Na>>>0)):[],pastPresentShareBuffer:!!s0})},836081:E=>{a.Ra("BiasAdd",E,void 0)},836136:E=>{a.Ra("BiasSplitGelu",E,void 0)},836197:E=>{a.Ra("FastGelu",E,void 0)},836253:(E,k,ie,ge,Le,Kt,Na,Uo,s0,n0,_0,ag,Zr)=>{a.Ra("Conv",E,{format:s0?"NHWC":"NCHW",auto_pad:k,dilations:[ie],group:ge,kernel_shape:[Le],pads:Kt?Array.from(et.subarray(Kt>>>0,Na>>>0)):[],strides:[Uo],w_is_const:()=>!!Sn[n0>>>0],activation:B0(_0),activation_params:ag?Array.from(Tt.subarray(ag>>>0,Zr>>>0)):[]})},836623:(E,k,ie,ge,Le,Kt,Na,Uo,s0,n0,_0,ag,Zr,ir,h0,z0)=>{a.Ra("Conv",E,{format:ag?"NHWC":"NCHW",auto_pad:k,dilations:[ie,ge],group:Le,kernel_shape:[Kt,Na],pads:Uo?Array.from(et.subarray(Uo>>>0,s0>>>0)):[],strides:[n0,_0],w_is_const:()=>!!Sn[Zr>>>0],activation:B0(ir),activation_params:h0?Array.from(Tt.subarray(h0>>>0,z0>>>0)):[]})},837014:E=>{a.Ra("Gelu",E,void 0)},837066:(E,k,ie,ge,Le,Kt)=>{a.Ra("MatMulNBits",E,{k,n:ie,accuracyLevel:ge,bits:Le,blockSize:Kt})},837193:(E,k,ie,ge,Le,Kt)=>{a.Ra("MultiHeadAttention",E,{numHeads:k,isUnidirectional:ie,maskFilterValue:ge,scale:Le,doRotary:Kt})},837352:(E,k,ie,ge,Le)=>{a.Ra("RotaryEmbedding",E,{interleaved:!!k,numHeads:ie,rotaryEmbeddingDim:ge,scale:Le})},837491:(E,k,ie)=>{a.Ra("SkipLayerNormalization",E,{epsilon:k,simplified:!!ie})},837593:(E,k,ie)=>{a.Ra("SkipLayerNormalization",E,{epsilon:k,simplified:!!ie})},837695:(E,k,ie,ge)=>{a.Ra("LayerNormalization",E,{axis:k,epsilon:ie,simplified:!!ge})},837806:E=>{a.ub(E)},837840:(E,k)=>a.wb(E,k,a.cb.xb,a.cb.errors)};function P0(E){this.name="ExitStatus",this.message=`Program terminated with exit(${E})`,this.status=E}class _g{constructor(k){this.hb=k-24}}var N0=0,F0=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,U0=(E,k,ie)=>{k>>>=0;var ge=k+ie;for(ie=k;E[ie]&&!(ie>=ge);)++ie;if(16<ie-k&&E.buffer&&F0)return F0.decode(E.subarray(k,ie));for(ge="";k<ie;){var Le=E[k++];if(Le&128){var Kt=E[k++]&63;if((Le&224)==192)ge+=String.fromCharCode((Le&31)<<6|Kt);else{var Na=E[k++]&63;Le=(Le&240)==224?(Le&15)<<12|Kt<<6|Na:(Le&7)<<18|Kt<<12|Na<<6|E[k++]&63,65536>Le?ge+=String.fromCharCode(Le):(Le-=65536,ge+=String.fromCharCode(55296|Le>>10,56320|Le&1023))}}else ge+=String.fromCharCode(Le)}return ge},B0=(E,k)=>(E>>>=0)?U0(xn,E,k):"",Zg=E=>{for(var k=0,ie=0;ie<E.length;++ie){var ge=E.charCodeAt(ie);127>=ge?k++:2047>=ge?k+=2:55296<=ge&&57343>=ge?(k+=4,++ie):k+=3}return k},Kg=(E,k,ie,ge)=>{if(ie>>>=0,!(0<ge))return 0;var Le=ie;ge=ie+ge-1;for(var Kt=0;Kt<E.length;++Kt){var Na=E.charCodeAt(Kt);if(55296<=Na&&57343>=Na){var Uo=E.charCodeAt(++Kt);Na=65536+((Na&1023)<<10)|Uo&1023}if(127>=Na){if(ie>=ge)break;k[ie++>>>0]=Na}else{if(2047>=Na){if(ie+1>=ge)break;k[ie++>>>0]=192|Na>>6}else{if(65535>=Na){if(ie+2>=ge)break;k[ie++>>>0]=224|Na>>12}else{if(ie+3>=ge)break;k[ie++>>>0]=240|Na>>18,k[ie++>>>0]=128|Na>>12&63}k[ie++>>>0]=128|Na>>6&63}k[ie++>>>0]=128|Na&63}}return k[ie>>>0]=0,ie-Le},r1,Ug=E=>{for(var k="";xn[E>>>0];)k+=r1[xn[E++>>>0]];return k},L1={},V0={},g1;function E0(E,k,ie={}){var ge=k.name;if(!E)throw new g1(`type "${ge}" must have a positive integer typeid pointer`);if(V0.hasOwnProperty(E)){if(ie.nb)return;throw new g1(`Cannot register type '${ge}' twice`)}V0[E]=k,L1.hasOwnProperty(E)&&(k=L1[E],delete L1[E],k.forEach(Le=>Le()))}function qg(E,k,ie={}){if(!("argPackAdvance"in k))throw new TypeError("registerType registeredInstance requires argPackAdvance");return E0(E,k,ie)}var W1=(E,k,ie)=>{switch(k){case 1:return ie?ge=>Sn[ge>>>0]:ge=>xn[ge>>>0];case 2:return ie?ge=>Lr[ge>>>1>>>0]:ge=>jr[ge>>>1>>>0];case 4:return ie?ge=>et[ge>>>2>>>0]:ge=>Ft[ge>>>2>>>0];case 8:return ie?ge=>ze[ge>>>3]:ge=>Ht[ge>>>3];default:throw new TypeError(`invalid integer width (${k}): ${E}`)}},V1=[],u0=[];function Z1(E){E>>>=0,9<E&&--u0[E+1]===0&&(u0[E]=void 0,V1.push(E))}var k0=E=>{if(!E)throw new g1("Cannot use deleted val. handle = "+E);return u0[E]},Bg=E=>{switch(E){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let k=V1.pop()||u0.length;return u0[k]=E,u0[k+1]=1,k}};function Ge(E){return this.fromWireType(Ft[E>>>2>>>0])}var An={name:"emscripten::val",fromWireType:E=>{var k=k0(E);return Z1(E),k},toWireType:(E,k)=>Bg(k),argPackAdvance:8,readValueFromPointer:Ge,bb:null},nr=(E,k)=>{switch(k){case 4:return function(ie){return this.fromWireType(Tt[ie>>>2>>>0])};case 8:return function(ie){return this.fromWireType(Ae[ie>>>3>>>0])};default:throw new TypeError(`invalid float width (${k}): ${E}`)}},Ra=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ko=(E,k)=>{for(var ie=E>>1,ge=ie+k/2;!(ie>=ge)&&jr[ie>>>0];)++ie;if(ie<<=1,32<ie-E&&Ra)return Ra.decode(xn.subarray(E>>>0,ie>>>0));for(ie="",ge=0;!(ge>=k/2);++ge){var Le=Lr[E+2*ge>>>1>>>0];if(Le==0)break;ie+=String.fromCharCode(Le)}return ie},b0=(E,k,ie)=>{if(ie??=2147483647,2>ie)return 0;ie-=2;var ge=k;ie=ie<2*E.length?ie/2:E.length;for(var Le=0;Le<ie;++Le)Lr[k>>>1>>>0]=E.charCodeAt(Le),k+=2;return Lr[k>>>1>>>0]=0,k-ge},j0=E=>2*E.length,Gg=(E,k)=>{for(var ie=0,ge="";!(ie>=k/4);){var Le=et[E+4*ie>>>2>>>0];if(Le==0)break;++ie,65536<=Le?(Le-=65536,ge+=String.fromCharCode(55296|Le>>10,56320|Le&1023)):ge+=String.fromCharCode(Le)}return ge},c1=(E,k,ie)=>{if(k>>>=0,ie??=2147483647,4>ie)return 0;var ge=k;ie=ge+ie-4;for(var Le=0;Le<E.length;++Le){var Kt=E.charCodeAt(Le);if(55296<=Kt&&57343>=Kt){var Na=E.charCodeAt(++Le);Kt=65536+((Kt&1023)<<10)|Na&1023}if(et[k>>>2>>>0]=Kt,k+=4,k+4>ie)break}return et[k>>>2>>>0]=0,k-ge},Hg=E=>{for(var k=0,ie=0;ie<E.length;++ie){var ge=E.charCodeAt(ie);55296<=ge&&57343>=ge&&++ie,k+=4}return k},zg=(E,k)=>{var ie=V0[E];if(ie===void 0)throw E=Cy(E),ie=Ug(E),Xg(E),new g1(`${k} has unknown type ${ie}`);return ie},yy=(E,k,ie)=>{var ge=[];return E=E.toWireType(ge,ie),ge.length&&(Ft[k>>>2>>>0]=Bg(ge)),E},s1=E=>{try{E()}catch(k){o0(k)}},Hr=E=>{if(!He)try{E();try{$t=$t=E=$t,a.onExit?.(E),He=!0,g(E,new P0(E))}catch(k){k instanceof P0||k=="unwind"||g(1,k)}}catch(k){k instanceof P0||k=="unwind"||g(1,k)}};function H0(){var E=A0,k={};for(let[ie,ge]of Object.entries(E))k[ie]=typeof ge=="function"?(...Le)=>{T1.push(ie);try{return ge(...Le)}finally{He||(T1.pop(),Dg&&Y0===1&&T1.length===0&&(Y0=0,s1(Y1),typeof Fibers<"u"&&Fibers.Db()))}}:ge;return k}var Y0=0,Dg=null,q1=0,T1=[],Uy={},T_={},B_=0,s_=null,uy=[];function By(){return new Promise((E,k)=>{s_={resolve:E,reject:k}})}function zy(){var E=H1(65548),k=E+12;Ft[E>>>2>>>0]=k,Ft[E+4>>>2>>>0]=k+65536,k=T1[0];var ie=Uy[k];return ie===void 0&&(ie=B_++,Uy[k]=ie,T_[ie]=k),et[E+8>>>2>>>0]=ie,E}function $_(E){if(!He){if(Y0===0){var k=!1,ie=!1;E((ge=0)=>{if(!He&&(q1=ge,k=!0,ie)){Y0=2,s1(()=>E1(Dg)),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.resume(),ge=!1;try{var Le=(0,A0[T_[et[Dg+8>>>2>>>0]]])()}catch(Uo){Le=Uo,ge=!0}var Kt=!1;if(!Dg){var Na=s_;Na&&(s_=null,(ge?Na.reject:Na.resolve)(Le),Kt=!0)}if(ge&&!Kt)throw Le}}),ie=!0,k||(Y0=1,Dg=zy(),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.pause(),s1(()=>Z0(Dg)))}else Y0===2?(Y0=0,s1(_1),Xg(Dg),Dg=null,uy.forEach(Hr)):o0(`invalid state: ${Y0}`);return q1}}function dy(E){return $_(k=>{E().then(k)})}var Sy=[],E_={},Wy=E=>{var k=E_[E];return k===void 0?Ug(E):k},f1=()=>typeof globalThis=="object"?globalThis:Function("return this")(),o_=E=>{var k=Sy.length;return Sy.push(E),k},Ag=(E,k)=>{for(var ie=Array(E),ge=0;ge<E;++ge)ie[ge]=zg(Ft[k+4*ge>>>2>>>0],"parameter "+ge);return ie},G1=(E,k)=>Object.defineProperty(k,"name",{value:E});function l_(E){var k=Function;if(!(k instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof k} which is not a function`);var ie=G1(k.name||"unknownFunctionName",function(){});return ie.prototype=k.prototype,ie=new ie,E=k.apply(ie,E),E instanceof Object?E:ie}var o1=E=>E%4===0&&(E%100!==0||E%400===0),_y=[0,31,60,91,121,152,182,213,244,274,305,335],Vy=[0,31,59,90,120,151,181,212,243,273,304,334],y1=[],wy=(E,k)=>{y1.length=0;for(var ie;ie=xn[E++>>>0];){var ge=ie!=105;ge&=ie!=112,k+=ge&&k%8?4:0,y1.push(ie==112?Ft[k>>>2>>>0]:ie==106?ze[k>>>3]:ie==105?et[k>>>2>>>0]:Ae[k>>>3>>>0]),k+=ge?8:4}return y1},Mg={},$1=()=>{if(!l1){var E={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"},k;for(k in Mg)Mg[k]===void 0?delete E[k]:E[k]=Mg[k];var ie=[];for(k in E)ie.push(`${k}=${E[k]}`);l1=ie}return l1},l1,z_=[null,[],[]],W_=[31,29,31,30,31,30,31,31,30,31,30,31],S_=[31,28,31,30,31,30,31,31,30,31,30,31];function Ay(E){var k=Array(Zg(E)+1);return Kg(E,k,0,k.length),k}function u_(E,k,ie,ge){function Le(ir,h0,z0){for(ir=typeof ir=="number"?ir.toString():ir||"";ir.length<h0;)ir=z0[0]+ir;return ir}function Kt(ir,h0){return Le(ir,h0,"0")}function Na(ir,h0){function z0(J0){return 0>J0?-1:0<J0?1:0}var G0;return(G0=z0(ir.getFullYear()-h0.getFullYear()))===0&&(G0=z0(ir.getMonth()-h0.getMonth()))===0&&(G0=z0(ir.getDate()-h0.getDate())),G0}function Uo(ir){switch(ir.getDay()){case 0:return new Date(ir.getFullYear()-1,11,29);case 1:return ir;case 2:return new Date(ir.getFullYear(),0,3);case 3:return new Date(ir.getFullYear(),0,2);case 4:return new Date(ir.getFullYear(),0,1);case 5:return new Date(ir.getFullYear()-1,11,31);case 6:return new Date(ir.getFullYear()-1,11,30)}}function s0(ir){var h0=ir.$a;for(ir=new Date(new Date(ir.ab+1900,0,1).getTime());0<h0;){var z0=ir.getMonth(),G0=(o1(ir.getFullYear())?W_:S_)[z0];if(h0>G0-ir.getDate())h0-=G0-ir.getDate()+1,ir.setDate(1),11>z0?ir.setMonth(z0+1):(ir.setMonth(0),ir.setFullYear(ir.getFullYear()+1));else{ir.setDate(ir.getDate()+h0);break}}return z0=new Date(ir.getFullYear()+1,0,4),h0=Uo(new Date(ir.getFullYear(),0,4)),z0=Uo(z0),0>=Na(h0,ir)?0>=Na(z0,ir)?ir.getFullYear()+1:ir.getFullYear():ir.getFullYear()-1}E>>>=0,k>>>=0,ie>>>=0,ge>>>=0;var n0=Ft[ge+40>>>2>>>0];ge={Ab:et[ge>>>2>>>0],zb:et[ge+4>>>2>>>0],fb:et[ge+8>>>2>>>0],jb:et[ge+12>>>2>>>0],gb:et[ge+16>>>2>>>0],ab:et[ge+20>>>2>>>0],Va:et[ge+24>>>2>>>0],$a:et[ge+28>>>2>>>0],Cb:et[ge+32>>>2>>>0],yb:et[ge+36>>>2>>>0],Bb:n0?B0(n0):""},ie=B0(ie),n0={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var _0 in n0)ie=ie.replace(new RegExp(_0,"g"),n0[_0]);var ag="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Zr="January February March April May June July August September October November December".split(" ");n0={"%a":ir=>ag[ir.Va].substring(0,3),"%A":ir=>ag[ir.Va],"%b":ir=>Zr[ir.gb].substring(0,3),"%B":ir=>Zr[ir.gb],"%C":ir=>Kt((ir.ab+1900)/100|0,2),"%d":ir=>Kt(ir.jb,2),"%e":ir=>Le(ir.jb,2," "),"%g":ir=>s0(ir).toString().substring(2),"%G":s0,"%H":ir=>Kt(ir.fb,2),"%I":ir=>(ir=ir.fb,ir==0?ir=12:12<ir&&(ir-=12),Kt(ir,2)),"%j":ir=>{for(var h0=0,z0=0;z0<=ir.gb-1;h0+=(o1(ir.ab+1900)?W_:S_)[z0++]);return Kt(ir.jb+h0,3)},"%m":ir=>Kt(ir.gb+1,2),"%M":ir=>Kt(ir.zb,2),"%n":()=>`
`,"%p":ir=>0<=ir.fb&&12>ir.fb?"AM":"PM","%S":ir=>Kt(ir.Ab,2),"%t":()=>"	","%u":ir=>ir.Va||7,"%U":ir=>Kt(Math.floor((ir.$a+7-ir.Va)/7),2),"%V":ir=>{var h0=Math.floor((ir.$a+7-(ir.Va+6)%7)/7);if(2>=(ir.Va+371-ir.$a-2)%7&&h0++,h0)h0==53&&(z0=(ir.Va+371-ir.$a)%7,z0==4||z0==3&&o1(ir.ab)||(h0=1));else{h0=52;var z0=(ir.Va+7-ir.$a-1)%7;(z0==4||z0==5&&o1(ir.ab%400-1))&&h0++}return Kt(h0,2)},"%w":ir=>ir.Va,"%W":ir=>Kt(Math.floor((ir.$a+7-(ir.Va+6)%7)/7),2),"%y":ir=>(ir.ab+1900).toString().substring(2),"%Y":ir=>ir.ab+1900,"%z":ir=>{ir=ir.yb;var h0=0<=ir;return ir=Math.abs(ir)/60,(h0?"+":"-")+("0000"+(ir/60*100+ir%60)).slice(-4)},"%Z":ir=>ir.Bb,"%%":()=>"%"},ie=ie.replace(/%%/g,"\0\0");for(_0 in n0)ie.includes(_0)&&(ie=ie.replace(new RegExp(_0,"g"),n0[_0](ge)));return ie=ie.replace(/\0\0/g,"%"),_0=Ay(ie),_0.length>k?0:(Sn.set(_0,E>>>0),_0.length-1)}for(var Iy=Array(256),v0=0;256>v0;++v0)Iy[v0]=String.fromCharCode(v0);r1=Iy,g1=a.BindingError=class extends Error{constructor(E){super(E),this.name="BindingError"}},a.InternalError=class extends Error{constructor(E){super(E),this.name="InternalError"}},u0.push(0,1,void 0,1,null,1,!0,1,!1,1),a.count_emval_handles=()=>u0.length/2-5-V1.length;var d_={ia:function(E,k,ie){return dy(async()=>{await a.sb(E,k,ie)})},a:function(E,k,ie){E>>>=0;var ge=new _g(E);throw Ft[ge.hb+16>>>2>>>0]=0,Ft[ge.hb+4>>>2>>>0]=k>>>0,Ft[ge.hb+8>>>2>>>0]=ie>>>0,N0=E,N0},y:function(){return 0},ea:function(){},R:function(){},T:function(){},ga:function(){return 0},ca:function(){},Z:function(){},ba:function(){},G:function(){},S:function(){},P:function(){},da:function(){},Q:function(){},C:function(E,k,ie){k=Ug(k>>>0),qg(E>>>0,{name:k,fromWireType:ge=>ge,toWireType:function(ge,Le){if(typeof Le!="bigint"&&typeof Le!="number")throw Le===null?Le="null":(ge=typeof Le,Le=ge==="object"||ge==="array"||ge==="function"?Le.toString():""+Le),new TypeError(`Cannot convert "${Le}" to ${this.name}`);return typeof Le=="number"&&(Le=BigInt(Le)),Le},argPackAdvance:8,readValueFromPointer:W1(k,ie>>>0,k.indexOf("u")==-1),bb:null})},K:function(E,k,ie,ge){k=Ug(k>>>0),qg(E>>>0,{name:k,fromWireType:function(Le){return!!Le},toWireType:function(Le,Kt){return Kt?ie:ge},argPackAdvance:8,readValueFromPointer:function(Le){return this.fromWireType(xn[Le>>>0])},bb:null})},J:function(E){return qg(E>>>0,An)},B:function(E,k,ie){k=Ug(k>>>0),qg(E>>>0,{name:k,fromWireType:ge=>ge,toWireType:(ge,Le)=>Le,argPackAdvance:8,readValueFromPointer:nr(k,ie>>>0),bb:null})},s:function(E,k,ie,ge,Le){if(E>>>=0,ie>>>=0,k=Ug(k>>>0),Le===-1&&(Le=4294967295),Le=Uo=>Uo,ge===0){var Kt=32-8*ie;Le=Uo=>Uo<<Kt>>>Kt}var Na=k.includes("unsigned")?function(Uo,s0){return s0>>>0}:function(Uo,s0){return s0};qg(E,{name:k,fromWireType:Le,toWireType:Na,argPackAdvance:8,readValueFromPointer:W1(k,ie,ge!==0),bb:null})},o:function(E,k,ie){function ge(Kt){return new Le(Sn.buffer,Ft[Kt+4>>>2>>>0],Ft[Kt>>>2>>>0])}var Le=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][k];ie=Ug(ie>>>0),qg(E>>>0,{name:ie,fromWireType:ge,argPackAdvance:8,readValueFromPointer:ge},{nb:!0})},D:function(E,k){k=Ug(k>>>0);var ie=k==="std::string";qg(E>>>0,{name:k,fromWireType:function(ge){var Le=Ft[ge>>>2>>>0],Kt=ge+4;if(ie)for(var Na=Kt,Uo=0;Uo<=Le;++Uo){var s0=Kt+Uo;if(Uo==Le||xn[s0>>>0]==0){if(Na=B0(Na,s0-Na),n0===void 0)var n0=Na;else n0+="\0",n0+=Na;Na=s0+1}}else{for(n0=Array(Le),Uo=0;Uo<Le;++Uo)n0[Uo]=String.fromCharCode(xn[Kt+Uo>>>0]);n0=n0.join("")}return Xg(ge),n0},toWireType:function(ge,Le){Le instanceof ArrayBuffer&&(Le=new Uint8Array(Le));var Kt=typeof Le=="string";if(!(Kt||Le instanceof Uint8Array||Le instanceof Uint8ClampedArray||Le instanceof Int8Array))throw new g1("Cannot pass non-string to std::string");var Na=ie&&Kt?Zg(Le):Le.length,Uo=H1(4+Na+1),s0=Uo+4;if(Ft[Uo>>>2>>>0]=Na,ie&&Kt)Kg(Le,xn,s0,Na+1);else if(Kt)for(Kt=0;Kt<Na;++Kt){var n0=Le.charCodeAt(Kt);if(255<n0)throw Xg(s0),new g1("String has UTF-16 code units that do not fit in 8 bits");xn[s0+Kt>>>0]=n0}else for(Kt=0;Kt<Na;++Kt)xn[s0+Kt>>>0]=Le[Kt];return ge!==null&&ge.push(Xg,Uo),Uo},argPackAdvance:8,readValueFromPointer:Ge,bb(ge){Xg(ge)}})},x:function(E,k,ie){if(k>>>=0,ie>>>=0,ie=Ug(ie),k===2)var ge=ko,Le=b0,Kt=j0,Na=Uo=>jr[Uo>>>1>>>0];else k===4&&(ge=Gg,Le=c1,Kt=Hg,Na=Uo=>Ft[Uo>>>2>>>0]);qg(E>>>0,{name:ie,fromWireType:Uo=>{for(var s0=Ft[Uo>>>2>>>0],n0,_0=Uo+4,ag=0;ag<=s0;++ag){var Zr=Uo+4+ag*k;(ag==s0||Na(Zr)==0)&&(_0=ge(_0,Zr-_0),n0===void 0?n0=_0:(n0+="\0",n0+=_0),_0=Zr+k)}return Xg(Uo),n0},toWireType:(Uo,s0)=>{if(typeof s0!="string")throw new g1(`Cannot pass non-string to C++ string type ${ie}`);var n0=Kt(s0),_0=H1(4+n0+k);return Ft[_0>>>2>>>0]=n0/k,Le(s0,_0+4,n0+k),Uo!==null&&Uo.push(Xg,_0),_0},argPackAdvance:8,readValueFromPointer:Ge,bb(Uo){Xg(Uo)}})},L:function(E,k){k=Ug(k>>>0),qg(E>>>0,{ob:!0,name:k,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ha:()=>1,u:function(E,k,ie){return k>>>=0,ie>>>=0,E=k0(E>>>0),k=zg(k,"emval::as"),yy(k,ie,E)},w:function(E){return E>>>=0,dy(()=>(E=k0(E),E.then(Bg)))},n:function(E,k,ie,ge){return ie>>>=0,ge>>>=0,E=Sy[E>>>0],k=k0(k>>>0),E(null,k,ie,ge)},j:function(E,k,ie,ge,Le){return ie>>>=0,ge>>>=0,Le>>>=0,E=Sy[E>>>0],k=k0(k>>>0),ie=Wy(ie),E(k,k[ie],ge,Le)},b:Z1,A:function(E,k){return k>>>=0,E=k0(E>>>0),k=k0(k),E==k},m:function(E){return E>>>=0,E===0?Bg(f1()):(E=Wy(E),Bg(f1()[E]))},i:function(E,k,ie){k=Ag(E,k>>>0);var ge=k.shift();E--;var Le=`return function (obj, func, destructorsRef, args) {
`,Kt=0,Na=[];ie===0&&Na.push("obj");for(var Uo=["retType"],s0=[ge],n0=0;n0<E;++n0)Na.push("arg"+n0),Uo.push("argType"+n0),s0.push(k[n0]),Le+=`  var arg${n0} = argType${n0}.readValueFromPointer(args${Kt?"+"+Kt:""});
`,Kt+=k[n0].argPackAdvance;return Le+=`  var rv = ${ie===1?"new func":"func.call"}(${Na.join(", ")});
`,ge.ob||(Uo.push("emval_returnValue"),s0.push(yy),Le+=`  return emval_returnValue(retType, destructorsRef, rv);
`),Uo.push(Le+`};
`),E=l_(Uo)(...s0),ie=`methodCaller<(${k.map(_0=>_0.name).join(", ")}) => ${ge.name}>`,o_(G1(ie,E))},r:function(E,k){return k>>>=0,E=k0(E>>>0),k=k0(k),Bg(E[k])},e:function(E){E>>>=0,9<E&&(u0[E+1]+=1)},t:function(){return Bg([])},l:function(E){E=k0(E>>>0);for(var k=Array(E.length),ie=0;ie<E.length;ie++)k[ie]=E[ie];return Bg(k)},f:function(E){return Bg(Wy(E>>>0))},k:function(){return Bg({})},h:function(E){E>>>=0;for(var k=k0(E);k.length;){var ie=k.pop();k.pop()(ie)}Z1(E)},g:function(E,k,ie){k>>>=0,ie>>>=0,E=k0(E>>>0),k=k0(k),ie=k0(ie),E[k]=ie},c:function(E,k){return k>>>=0,E=zg(E>>>0,"_emval_take_value"),E=E.readValueFromPointer(k),Bg(E)},W:function(E,k){E=-9007199254740992>E||9007199254740992<E?NaN:Number(E),k>>>=0,E=new Date(1e3*E),et[k>>>2>>>0]=E.getUTCSeconds(),et[k+4>>>2>>>0]=E.getUTCMinutes(),et[k+8>>>2>>>0]=E.getUTCHours(),et[k+12>>>2>>>0]=E.getUTCDate(),et[k+16>>>2>>>0]=E.getUTCMonth(),et[k+20>>>2>>>0]=E.getUTCFullYear()-1900,et[k+24>>>2>>>0]=E.getUTCDay(),et[k+28>>>2>>>0]=(E.getTime()-Date.UTC(E.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},X:function(E,k){E=-9007199254740992>E||9007199254740992<E?NaN:Number(E),k>>>=0,E=new Date(1e3*E),et[k>>>2>>>0]=E.getSeconds(),et[k+4>>>2>>>0]=E.getMinutes(),et[k+8>>>2>>>0]=E.getHours(),et[k+12>>>2>>>0]=E.getDate(),et[k+16>>>2>>>0]=E.getMonth(),et[k+20>>>2>>>0]=E.getFullYear()-1900,et[k+24>>>2>>>0]=E.getDay(),et[k+28>>>2>>>0]=(o1(E.getFullYear())?_y:Vy)[E.getMonth()]+E.getDate()-1|0,et[k+36>>>2>>>0]=-(60*E.getTimezoneOffset());var ie=new Date(E.getFullYear(),6,1).getTimezoneOffset(),ge=new Date(E.getFullYear(),0,1).getTimezoneOffset();et[k+32>>>2>>>0]=(ie!=ge&&E.getTimezoneOffset()==Math.min(ge,ie))|0},Y:function(E){E>>>=0;var k=new Date(et[E+20>>>2>>>0]+1900,et[E+16>>>2>>>0],et[E+12>>>2>>>0],et[E+8>>>2>>>0],et[E+4>>>2>>>0],et[E>>>2>>>0],0),ie=et[E+32>>>2>>>0],ge=k.getTimezoneOffset(),Le=new Date(k.getFullYear(),6,1).getTimezoneOffset(),Kt=new Date(k.getFullYear(),0,1).getTimezoneOffset(),Na=Math.min(Kt,Le);return 0>ie?et[E+32>>>2>>>0]=+(Le!=Kt&&Na==ge):0<ie!=(Na==ge)&&(Le=Math.max(Kt,Le),k.setTime(k.getTime()+6e4*((0<ie?Na:Le)-ge))),et[E+24>>>2>>>0]=k.getDay(),et[E+28>>>2>>>0]=(o1(k.getFullYear())?_y:Vy)[k.getMonth()]+k.getDate()-1|0,et[E>>>2>>>0]=k.getSeconds(),et[E+4>>>2>>>0]=k.getMinutes(),et[E+8>>>2>>>0]=k.getHours(),et[E+12>>>2>>>0]=k.getDate(),et[E+16>>>2>>>0]=k.getMonth(),et[E+20>>>2>>>0]=k.getYear(),E=k.getTime(),BigInt(isNaN(E)?-1:E/1e3)},U:function(){return-52},V:function(){},N:function(E,k,ie,ge){ie>>>=0,ge>>>=0;var Le=new Date().getFullYear(),Kt=new Date(Le,0,1),Na=new Date(Le,6,1);Le=Kt.getTimezoneOffset();var Uo=Na.getTimezoneOffset();Ft[E>>>0>>>2>>>0]=60*Math.max(Le,Uo),et[k>>>0>>>2>>>0]=+(Le!=Uo),E=s0=>s0.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],Kt=E(Kt),Na=E(Na),Uo<Le?(Kg(Kt,xn,ie,17),Kg(Na,xn,ge,17)):(Kg(Kt,xn,ge,17),Kg(Na,xn,ie,17))},v:()=>{o0("")},d:function(E,k,ie){return E>>>=0,k=wy(k>>>0,ie>>>0),p0[E](...k)},I:function(E,k,ie){return E>>>=0,k=wy(k>>>0,ie>>>0),p0[E](...k)},H:()=>Date.now(),O:function(){return 4294901760},q:()=>performance.now(),M:function(E){E>>>=0;var k=xn.length;if(4294901760<E)return!1;for(var ie=1;4>=ie;ie*=2){var ge=k*(1+.2/ie);ge=Math.min(ge,E+100663296);var Le=Math;ge=Math.max(E,ge);e:{Le=(Le.min.call(Le,4294901760,ge+(65536-ge%65536)%65536)-Ce.buffer.byteLength+65535)/65536;try{Ce.grow(Le),Be();var Kt=1;break e}catch{}Kt=void 0}if(Kt)return!0}return!1},$:function(E,k){E>>>=0,k>>>=0;var ie=0;return $1().forEach((ge,Le)=>{var Kt=k+ie;for(Le=Ft[E+4*Le>>>2>>>0]=Kt,Kt=0;Kt<ge.length;++Kt)Sn[Le++>>>0]=ge.charCodeAt(Kt);Sn[Le>>>0]=0,ie+=ge.length+1}),0},aa:function(E,k){E>>>=0,k>>>=0;var ie=$1();Ft[E>>>2>>>0]=ie.length;var ge=0;return ie.forEach(Le=>ge+=Le.length+1),Ft[k>>>2>>>0]=ge,0},z:()=>52,F:function(){return 52},_:function(){return 70},E:function(E,k,ie,ge){k>>>=0,ie>>>=0,ge>>>=0;for(var Le=0,Kt=0;Kt<ie;Kt++){var Na=Ft[k>>>2>>>0],Uo=Ft[k+4>>>2>>>0];k+=8;for(var s0=0;s0<Uo;s0++){var n0=xn[Na+s0>>>0],_0=z_[E];n0===0||n0===10?((E===1?Re:Oe)(U0(_0,0)),_0.length=0):_0.push(n0)}Le+=Uo}return Ft[ge>>>2>>>0]=Le,0},fa:u_,p:function(E,k,ie,ge){return u_(E>>>0,k>>>0,ie>>>0,ge>>>0)}},A0=(function(){function E(ie){return A0=ie.exports,A0=H0(),A0=qy(),Ce=A0.ja,Be(),No.unshift(A0.ka),Mo--,Mo==0&&t0&&(ie=t0,t0=null,ie()),A0}var k={a:d_};if(Mo++,a.instantiateWasm)try{return a.instantiateWasm(k,E)}catch(ie){Oe(`Module.instantiateWasm callback failed with error: ${ie}`),c(ie)}return i0(k,function(ie){E(ie.instance)}).catch(c),{}})(),Cy=E=>(Cy=A0.la)(E);a._OrtInit=(E,k)=>(a._OrtInit=A0.ma)(E,k),a._OrtGetLastError=(E,k)=>(a._OrtGetLastError=A0.na)(E,k),a._OrtCreateSessionOptions=(E,k,ie,ge,Le,Kt,Na,Uo,s0,n0)=>(a._OrtCreateSessionOptions=A0.oa)(E,k,ie,ge,Le,Kt,Na,Uo,s0,n0),a._OrtAppendExecutionProvider=(E,k)=>(a._OrtAppendExecutionProvider=A0.pa)(E,k),a._OrtAddFreeDimensionOverride=(E,k,ie)=>(a._OrtAddFreeDimensionOverride=A0.qa)(E,k,ie),a._OrtAddSessionConfigEntry=(E,k,ie)=>(a._OrtAddSessionConfigEntry=A0.ra)(E,k,ie),a._OrtReleaseSessionOptions=E=>(a._OrtReleaseSessionOptions=A0.sa)(E),a._OrtCreateSession=(E,k,ie)=>(a._OrtCreateSession=A0.ta)(E,k,ie),a._OrtReleaseSession=E=>(a._OrtReleaseSession=A0.ua)(E),a._OrtGetInputOutputCount=(E,k,ie)=>(a._OrtGetInputOutputCount=A0.va)(E,k,ie),a._OrtGetInputName=(E,k)=>(a._OrtGetInputName=A0.wa)(E,k),a._OrtGetOutputName=(E,k)=>(a._OrtGetOutputName=A0.xa)(E,k),a._OrtFree=E=>(a._OrtFree=A0.ya)(E),a._OrtCreateTensor=(E,k,ie,ge,Le,Kt)=>(a._OrtCreateTensor=A0.za)(E,k,ie,ge,Le,Kt),a._OrtGetTensorData=(E,k,ie,ge,Le)=>(a._OrtGetTensorData=A0.Aa)(E,k,ie,ge,Le),a._OrtReleaseTensor=E=>(a._OrtReleaseTensor=A0.Ba)(E),a._OrtCreateRunOptions=(E,k,ie,ge)=>(a._OrtCreateRunOptions=A0.Ca)(E,k,ie,ge),a._OrtAddRunConfigEntry=(E,k,ie)=>(a._OrtAddRunConfigEntry=A0.Da)(E,k,ie),a._OrtReleaseRunOptions=E=>(a._OrtReleaseRunOptions=A0.Ea)(E),a._OrtCreateBinding=E=>(a._OrtCreateBinding=A0.Fa)(E),a._OrtBindInput=(E,k,ie)=>(a._OrtBindInput=A0.Ga)(E,k,ie),a._OrtBindOutput=(E,k,ie,ge)=>(a._OrtBindOutput=A0.Ha)(E,k,ie,ge),a._OrtClearBoundOutputs=E=>(a._OrtClearBoundOutputs=A0.Ia)(E),a._OrtReleaseBinding=E=>(a._OrtReleaseBinding=A0.Ja)(E),a._OrtRunWithBinding=(E,k,ie,ge,Le)=>(a._OrtRunWithBinding=A0.Ka)(E,k,ie,ge,Le),a._OrtRun=(E,k,ie,ge,Le,Kt,Na,Uo)=>(a._OrtRun=A0.La)(E,k,ie,ge,Le,Kt,Na,Uo),a._OrtEndProfiling=E=>(a._OrtEndProfiling=A0.Ma)(E),a._JsepOutput=(E,k,ie)=>(a._JsepOutput=A0.Na)(E,k,ie),a._JsepGetNodeName=E=>(a._JsepGetNodeName=A0.Oa)(E);var H1=a._malloc=E=>(H1=a._malloc=A0.Pa)(E),Xg=a._free=E=>(Xg=a._free=A0.Qa)(E),cy=E=>(cy=A0.Sa)(E),Zy=E=>(Zy=A0.Ta)(E),by=()=>(by=A0.Ua)(),Z0=E=>(Z0=A0.Wa)(E),Y1=()=>(Y1=A0.Xa)(),E1=E=>(E1=A0.Ya)(E),_1=()=>(_1=A0.Za)();a.___start_em_js=837952,a.___stop_em_js=838113;function qy(){var E=A0;E=Object.assign({},E);var k=ie=>ge=>ie(ge)>>>0;return E.la=k(E.la),E.Pa=k(E.Pa),E.Ta=k(E.Ta),E.Ua=(ie=>()=>ie()>>>0)(E.Ua),E}a.stackSave=()=>by(),a.stackRestore=E=>cy(E),a.stackAlloc=E=>Zy(E),a.UTF8ToString=B0,a.stringToUTF8=(E,k,ie)=>Kg(E,xn,k,ie),a.lengthBytesUTF8=Zg;var K1;t0=function E(){K1||de(),K1||(t0=E)};function de(){if(!(0<Mo)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var E=a.preRun.shift();tr.unshift(E)}for(;0<tr.length;)tr.shift()(a);if(!(0<Mo||K1||(K1=!0,a.calledRun=!0,He))){for(;0<No.length;)No.shift()(a);for(l(a);0<ah.length;)ah.shift()(a)}}}return de(),p}})();typeof t=="object"&&typeof e=="object"?e.exports=n:typeof define=="function"&&define.amd&&define([],()=>n)}),Ba=Er(()=>{}),Da=Er(()=>{}),Ma={};kr(Ma,{cpus:()=>fc});var fc,Ua=j(()=>{fc=void 0}),Va=Er((t,e)=>{var n=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(o={}){function a(){return Ae.buffer!=ah.buffer&&eg(),ah}function l(){return Ae.buffer!=ah.buffer&&eg(),Mo}function c(){return Ae.buffer!=ah.buffer&&eg(),t0}function p(){return Ae.buffer!=ah.buffer&&eg(),o0}function s(){return Ae.buffer!=ah.buffer&&eg(),Xr}function u(){return Ae.buffer!=ah.buffer&&eg(),a0}function d(){return Ae.buffer!=ah.buffer&&eg(),Ih}function g(){return Ae.buffer!=ah.buffer&&eg(),n1}var w=o,x,C,O=new Promise((A,ee)=>{x=A,C=ee});w.mountExternalData=(A,ee)=>{(w.Db||(w.Db=new Map)).set(A,ee)},w.unmountExternalData=()=>{delete w.Db};let Y=()=>{let A=(he,Ie,Ye)=>(...wn)=>{let Pa=_1,Qo=Ie?.();wn=he(...wn);let g0=Ie?.();return Qo!==g0&&(he=g0,Ye(Qo),Ie=Ye=null),_1!=Pa?Le():wn},ee=he=>async(...Ie)=>{try{if(w.Cb)throw Error("Session already started");let Ye=w.Cb={ec:Ie[0],errors:[]},wn=await he(...Ie);if(w.Cb!==Ye)throw Error("Session mismatch");w.Kb?.flush();let Pa=Ye.errors;if(0<Pa.length){let Qo=await Promise.all(Pa);if(Qo=Qo.filter(g0=>g0),0<Qo.length)throw Error(Qo.join(`
`))}return wn}finally{w.Cb=null}};w._OrtCreateSession=A(w._OrtCreateSession,()=>w._OrtCreateSession,he=>w._OrtCreateSession=he),w._OrtRun=ee(A(w._OrtRun,()=>w._OrtRun,he=>w._OrtRun=he)),w._OrtRunWithBinding=ee(A(w._OrtRunWithBinding,()=>w._OrtRunWithBinding,he=>w._OrtRunWithBinding=he)),w._OrtBindInput=A(w._OrtBindInput,()=>w._OrtBindInput,he=>w._OrtBindInput=he),Y=void 0};w.jsepInit=(A,ee)=>{if(Y?.(),A==="webgpu"){[w.Kb,w.Wb,w.$b,w.Lb,w.Zb,w.ob,w.ac,w.cc,w.Xb,w.Yb,w.bc]=ee;let he=w.Kb;w.jsepRegisterBuffer=(Ie,Ye,wn,Pa)=>he.registerBuffer(Ie,Ye,wn,Pa),w.jsepGetBuffer=Ie=>he.getBuffer(Ie),w.jsepCreateDownloader=(Ie,Ye,wn)=>he.createDownloader(Ie,Ye,wn),w.jsepOnReleaseSession=Ie=>{he.onReleaseSession(Ie)},w.jsepOnRunStart=Ie=>he.onRunStart(Ie)}};var q=Object.assign({},w),ue="./this.program",pe=(A,ee)=>{throw ee},se=typeof window=="object",Re=typeof importScripts=="function",Oe=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Ce=w.ENVIRONMENT_IS_PTHREAD||!1,He="";function $t(A){return w.locateFile?w.locateFile(A,He):He+A}var Sn,xn,Lr;if(Oe){var jr=(Mi(),sr(Di)),et=(Wi(),sr(Ui));He=Re?et.dirname(He)+"/":__dirname+"/",Sn=(A,ee)=>(A=Kg(A)?new URL(A):et.normalize(A),jr.readFileSync(A,ee?void 0:"utf8")),Lr=A=>(A=Sn(A,!0),A.buffer||(A=new Uint8Array(A)),A),xn=(A,ee,he,Ie=!0)=>{A=Kg(A)?new URL(A):et.normalize(A),jr.readFile(A,Ie?void 0:"utf8",(Ye,wn)=>{Ye?he(Ye):ee(Ie?wn.buffer:wn)})},!w.thisProgram&&1<process.argv.length&&(ue=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),pe=(A,ee)=>{throw process.exitCode=A,ee},global.Worker=Ba().Worker}else(se||Re)&&(Re?He=self.location.href:typeof document<"u"&&document.currentScript&&(He=document.currentScript.src),typeof i<"u"&&i&&(He=i),He.startsWith("blob:")?He="":He=He.substr(0,He.replace(/[?#].*/,"").lastIndexOf("/")+1),Oe||(Sn=A=>{var ee=new XMLHttpRequest;return ee.open("GET",A,!1),ee.send(null),ee.responseText},Re&&(Lr=A=>{var ee=new XMLHttpRequest;return ee.open("GET",A,!1),ee.responseType="arraybuffer",ee.send(null),new Uint8Array(ee.response)}),xn=(A,ee,he)=>{var Ie=new XMLHttpRequest;Ie.open("GET",A,!0),Ie.responseType="arraybuffer",Ie.onload=()=>{Ie.status==200||Ie.status==0&&Ie.response?ee(Ie.response):he()},Ie.onerror=he,Ie.send(null)}));Oe&&typeof performance>"u"&&(global.performance=Da().performance);var Ft=console.log.bind(console),Tt=console.error.bind(console);Oe&&(Ft=(...A)=>jr.writeSync(1,A.join(" ")+`
`),Tt=(...A)=>jr.writeSync(2,A.join(" ")+`
`));var ze=Ft,Ht=Tt;Object.assign(w,q),q=null;var Ae,Be,tr=!1,No,ah,Mo,t0,o0,Xr,a0,Ih,S0,Sg,n1;function eg(){var A=Ae.buffer;w.HEAP8=ah=new Int8Array(A),w.HEAP16=t0=new Int16Array(A),w.HEAPU8=Mo=new Uint8Array(A),w.HEAPU16=o0=new Uint16Array(A),w.HEAP32=Xr=new Int32Array(A),w.HEAPU32=a0=new Uint32Array(A),w.HEAPF32=Ih=new Float32Array(A),w.HEAPF64=n1=new Float64Array(A),w.HEAP64=S0=new BigInt64Array(A),w.HEAPU64=Sg=new BigUint64Array(A)}var i0=16777216;if(Ce)Ae=w.wasmMemory;else if(w.wasmMemory)Ae=w.wasmMemory;else if(Ae=new WebAssembly.Memory({initial:i0/65536,maximum:65536,shared:!0}),!(Ae.buffer instanceof SharedArrayBuffer))throw Ht("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),Oe&&Ht("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");eg(),i0=Ae.buffer.byteLength;var p0=[],P0=[],_g=[],N0=0,F0=null;function U0(){if(N0--,N0==0&&F0){var A=F0;F0=null,A()}}function B0(A){throw A="Aborted("+A+")",Ht(A),tr=!0,No=1,A=new WebAssembly.RuntimeError(A+". Build with -sASSERTIONS for more info."),C(A),A}var Zg=A=>A.startsWith("data:application/octet-stream;base64,"),Kg=A=>A.startsWith("file://"),r1;r1="ort-wasm-simd-threaded.wasm",Zg(r1)||(r1=$t(r1));function Ug(A){if(Lr)return Lr(A);throw"both async and sync fetching of the wasm failed"}function L1(A){if(se||Re){if(typeof fetch=="function"&&!Kg(A))return fetch(A,{credentials:"same-origin"}).then(ee=>{if(!ee.ok)throw`failed to load wasm binary file at '${A}'`;return ee.arrayBuffer()}).catch(()=>Ug(A));if(xn)return new Promise((ee,he)=>{xn(A,Ie=>ee(new Uint8Array(Ie)),he)})}return Promise.resolve().then(()=>Ug(A))}function V0(A,ee,he){return L1(A).then(Ie=>WebAssembly.instantiate(Ie,ee)).then(he,Ie=>{Ht(`failed to asynchronously prepare wasm: ${Ie}`),B0(Ie)})}function g1(A,ee){var he=r1;return typeof WebAssembly.instantiateStreaming!="function"||Zg(he)||Kg(he)||Oe||typeof fetch!="function"?V0(he,A,ee):fetch(he,{credentials:"same-origin"}).then(Ie=>WebAssembly.instantiateStreaming(Ie,A).then(ee,function(Ye){return Ht(`wasm streaming compile failed: ${Ye}`),Ht("falling back to ArrayBuffer instantiation"),V0(he,A,ee)}))}var E0={826468:(A,ee,he,Ie)=>{if(typeof w>"u"||!w.Db)return 1;if(A=Hr(A>>>0),A.startsWith("./")&&(A=A.substring(2)),A=w.Db.get(A),!A)return 2;if(ee>>>=0,he>>>=0,Ie>>>=0,ee+he>A.byteLength)return 3;try{return l().set(A.subarray(ee,ee+he),Ie>>>0),0}catch{return 4}},826969:()=>{w.Xb()},827e3:()=>{w.Yb()},827029:()=>{w.bc()},827054:A=>w.Wb(A),827087:A=>w.$b(A),827119:(A,ee,he)=>{w.Lb(A,ee,he,!0)},827158:(A,ee,he)=>{w.Lb(A,ee,he)},827191:A=>{w.ob("Abs",A,void 0)},827242:A=>{w.ob("Neg",A,void 0)},827293:A=>{w.ob("Floor",A,void 0)},827346:A=>{w.ob("Ceil",A,void 0)},827398:A=>{w.ob("Reciprocal",A,void 0)},827456:A=>{w.ob("Sqrt",A,void 0)},827508:A=>{w.ob("Exp",A,void 0)},827559:A=>{w.ob("Erf",A,void 0)},827610:A=>{w.ob("Sigmoid",A,void 0)},827665:(A,ee,he)=>{w.ob("HardSigmoid",A,{alpha:ee,beta:he})},827744:A=>{w.ob("Log",A,void 0)},827795:A=>{w.ob("Sin",A,void 0)},827846:A=>{w.ob("Cos",A,void 0)},827897:A=>{w.ob("Tan",A,void 0)},827948:A=>{w.ob("Asin",A,void 0)},828e3:A=>{w.ob("Acos",A,void 0)},828052:A=>{w.ob("Atan",A,void 0)},828104:A=>{w.ob("Sinh",A,void 0)},828156:A=>{w.ob("Cosh",A,void 0)},828208:A=>{w.ob("Asinh",A,void 0)},828261:A=>{w.ob("Acosh",A,void 0)},828314:A=>{w.ob("Atanh",A,void 0)},828367:A=>{w.ob("Tanh",A,void 0)},828419:A=>{w.ob("Not",A,void 0)},828470:(A,ee,he)=>{w.ob("Clip",A,{min:ee,max:he})},828539:A=>{w.ob("Clip",A,void 0)},828591:(A,ee)=>{w.ob("Elu",A,{alpha:ee})},828649:A=>{w.ob("Relu",A,void 0)},828701:(A,ee)=>{w.ob("LeakyRelu",A,{alpha:ee})},828765:(A,ee)=>{w.ob("ThresholdedRelu",A,{alpha:ee})},828835:(A,ee)=>{w.ob("Cast",A,{to:ee})},828893:A=>{w.ob("Add",A,void 0)},828944:A=>{w.ob("Sub",A,void 0)},828995:A=>{w.ob("Mul",A,void 0)},829046:A=>{w.ob("Div",A,void 0)},829097:A=>{w.ob("Pow",A,void 0)},829148:A=>{w.ob("Equal",A,void 0)},829201:A=>{w.ob("Greater",A,void 0)},829256:A=>{w.ob("GreaterOrEqual",A,void 0)},829318:A=>{w.ob("Less",A,void 0)},829370:A=>{w.ob("LessOrEqual",A,void 0)},829429:(A,ee,he,Ie,Ye)=>{w.ob("ReduceMean",A,{keepDims:!!ee,noopWithEmptyAxes:!!he,axes:Ie?Array.from(s().subarray(Ie>>>0,Ye>>>0)):[]})},829588:(A,ee,he,Ie,Ye)=>{w.ob("ReduceMax",A,{keepDims:!!ee,noopWithEmptyAxes:!!he,axes:Ie?Array.from(s().subarray(Ie>>>0,Ye>>>0)):[]})},829746:(A,ee,he,Ie,Ye)=>{w.ob("ReduceMin",A,{keepDims:!!ee,noopWithEmptyAxes:!!he,axes:Ie?Array.from(s().subarray(Ie>>>0,Ye>>>0)):[]})},829904:(A,ee,he,Ie,Ye)=>{w.ob("ReduceProd",A,{keepDims:!!ee,noopWithEmptyAxes:!!he,axes:Ie?Array.from(s().subarray(Ie>>>0,Ye>>>0)):[]})},830063:(A,ee,he,Ie,Ye)=>{w.ob("ReduceSum",A,{keepDims:!!ee,noopWithEmptyAxes:!!he,axes:Ie?Array.from(s().subarray(Ie>>>0,Ye>>>0)):[]})},830221:(A,ee,he,Ie,Ye)=>{w.ob("ReduceL1",A,{keepDims:!!ee,noopWithEmptyAxes:!!he,axes:Ie?Array.from(s().subarray(Ie>>>0,Ye>>>0)):[]})},830378:(A,ee,he,Ie,Ye)=>{w.ob("ReduceL2",A,{keepDims:!!ee,noopWithEmptyAxes:!!he,axes:Ie?Array.from(s().subarray(Ie>>>0,Ye>>>0)):[]})},830535:(A,ee,he,Ie,Ye)=>{w.ob("ReduceLogSum",A,{keepDims:!!ee,noopWithEmptyAxes:!!he,axes:Ie?Array.from(s().subarray(Ie>>>0,Ye>>>0)):[]})},830696:(A,ee,he,Ie,Ye)=>{w.ob("ReduceSumSquare",A,{keepDims:!!ee,noopWithEmptyAxes:!!he,axes:Ie?Array.from(s().subarray(Ie>>>0,Ye>>>0)):[]})},830860:(A,ee,he,Ie,Ye)=>{w.ob("ReduceLogSumExp",A,{keepDims:!!ee,noopWithEmptyAxes:!!he,axes:Ie?Array.from(s().subarray(Ie>>>0,Ye>>>0)):[]})},831024:A=>{w.ob("Where",A,void 0)},831077:(A,ee,he)=>{w.ob("Transpose",A,{perm:ee?Array.from(s().subarray(ee>>>0,he>>>0)):[]})},831185:(A,ee,he,Ie)=>{w.ob("DepthToSpace",A,{blocksize:ee,mode:Hr(he),format:Ie?"NHWC":"NCHW"})},831318:(A,ee,he,Ie)=>{w.ob("DepthToSpace",A,{blocksize:ee,mode:Hr(he),format:Ie?"NHWC":"NCHW"})},831451:(A,ee,he,Ie,Ye,wn,Pa,Qo,g0,l0,I0,Cg,$g,Kr,q0)=>{w.ob("ConvTranspose",A,{format:g0?"NHWC":"NCHW",autoPad:ee,dilations:[he],group:Ie,kernelShape:[Ye],pads:[wn,Pa],strides:[Qo],wIsConst:()=>!!a()[l0>>>0],outputPadding:I0?Array.from(s().subarray(I0>>>0,Cg>>>0)):[],outputShape:$g?Array.from(s().subarray($g>>>0,Kr>>>0)):[],activation:Hr(q0)})},831852:(A,ee,he,Ie,Ye,wn,Pa,Qo,g0,l0,I0,Cg,$g,Kr)=>{w.ob("ConvTranspose",A,{format:Qo?"NHWC":"NCHW",autoPad:ee,dilations:Array.from(s().subarray(he>>>0,(he>>>0)+2>>>0)),group:Ie,kernelShape:Array.from(s().subarray(Ye>>>0,(Ye>>>0)+2>>>0)),pads:Array.from(s().subarray(wn>>>0,(wn>>>0)+4>>>0)),strides:Array.from(s().subarray(Pa>>>0,(Pa>>>0)+2>>>0)),wIsConst:()=>!!a()[g0>>>0],outputPadding:l0?Array.from(s().subarray(l0>>>0,I0>>>0)):[],outputShape:Cg?Array.from(s().subarray(Cg>>>0,$g>>>0)):[],activation:Hr(Kr)})},832417:(A,ee,he,Ie,Ye,wn,Pa,Qo,g0,l0,I0,Cg,$g,Kr,q0)=>{w.ob("ConvTranspose",A,{format:g0?"NHWC":"NCHW",autoPad:ee,dilations:[he],group:Ie,kernelShape:[Ye],pads:[wn,Pa],strides:[Qo],wIsConst:()=>!!a()[l0>>>0],outputPadding:I0?Array.from(s().subarray(I0>>>0,Cg>>>0)):[],outputShape:$g?Array.from(s().subarray($g>>>0,Kr>>>0)):[],activation:Hr(q0)})},832818:(A,ee,he,Ie,Ye,wn,Pa,Qo,g0,l0,I0,Cg,$g,Kr)=>{w.ob("ConvTranspose",A,{format:Qo?"NHWC":"NCHW",autoPad:ee,dilations:Array.from(s().subarray(he>>>0,(he>>>0)+2>>>0)),group:Ie,kernelShape:Array.from(s().subarray(Ye>>>0,(Ye>>>0)+2>>>0)),pads:Array.from(s().subarray(wn>>>0,(wn>>>0)+4>>>0)),strides:Array.from(s().subarray(Pa>>>0,(Pa>>>0)+2>>>0)),wIsConst:()=>!!a()[g0>>>0],outputPadding:l0?Array.from(s().subarray(l0>>>0,I0>>>0)):[],outputShape:Cg?Array.from(s().subarray(Cg>>>0,$g>>>0)):[],activation:Hr(Kr)})},833383:(A,ee)=>{w.ob("GlobalAveragePool",A,{format:ee?"NHWC":"NCHW"})},833474:(A,ee,he,Ie,Ye,wn,Pa,Qo,g0,l0,I0,Cg,$g,Kr,q0,Ig)=>{w.ob("AveragePool",A,{format:Ig?"NHWC":"NCHW",auto_pad:ee,ceil_mode:he,count_include_pad:Ie,storage_order:Ye,dilations:[wn,Pa],kernel_shape:[Qo,g0],pads:[l0,I0,Cg,$g],strides:[Kr,q0]})},833758:(A,ee)=>{w.ob("GlobalAveragePool",A,{format:ee?"NHWC":"NCHW"})},833849:(A,ee,he,Ie,Ye,wn,Pa,Qo,g0,l0,I0,Cg,$g,Kr,q0,Ig)=>{w.ob("AveragePool",A,{format:Ig?"NHWC":"NCHW",auto_pad:ee,ceil_mode:he,count_include_pad:Ie,storage_order:Ye,dilations:[wn,Pa],kernel_shape:[Qo,g0],pads:[l0,I0,Cg,$g],strides:[Kr,q0]})},834133:(A,ee)=>{w.ob("GlobalMaxPool",A,{format:ee?"NHWC":"NCHW"})},834220:(A,ee,he,Ie,Ye,wn,Pa,Qo,g0,l0,I0,Cg,$g,Kr,q0,Ig)=>{w.ob("MaxPool",A,{format:Ig?"NHWC":"NCHW",auto_pad:ee,ceil_mode:he,count_include_pad:Ie,storage_order:Ye,dilations:[wn,Pa],kernel_shape:[Qo,g0],pads:[l0,I0,Cg,$g],strides:[Kr,q0]})},834500:(A,ee)=>{w.ob("GlobalMaxPool",A,{format:ee?"NHWC":"NCHW"})},834587:(A,ee,he,Ie,Ye,wn,Pa,Qo,g0,l0,I0,Cg,$g,Kr,q0,Ig)=>{w.ob("MaxPool",A,{format:Ig?"NHWC":"NCHW",auto_pad:ee,ceil_mode:he,count_include_pad:Ie,storage_order:Ye,dilations:[wn,Pa],kernel_shape:[Qo,g0],pads:[l0,I0,Cg,$g],strides:[Kr,q0]})},834867:(A,ee,he,Ie,Ye)=>{w.ob("Gemm",A,{alpha:ee,beta:he,transA:Ie,transB:Ye})},834971:A=>{w.ob("MatMul",A,void 0)},835025:(A,ee,he,Ie)=>{w.ob("ArgMax",A,{keepDims:!!ee,selectLastIndex:!!he,axis:Ie})},835133:(A,ee,he,Ie)=>{w.ob("ArgMin",A,{keepDims:!!ee,selectLastIndex:!!he,axis:Ie})},835241:(A,ee)=>{w.ob("Softmax",A,{axis:ee})},835304:(A,ee)=>{w.ob("Concat",A,{axis:ee})},835364:(A,ee,he,Ie,Ye)=>{w.ob("Split",A,{axis:ee,numOutputs:he,splitSizes:Ie?Array.from(s().subarray(Ie>>>0,Ye>>>0)):[]})},835504:A=>{w.ob("Expand",A,void 0)},835558:(A,ee)=>{w.ob("Gather",A,{axis:Number(ee)})},835629:(A,ee)=>{w.ob("GatherElements",A,{axis:Number(ee)})},835708:(A,ee,he,Ie,Ye,wn,Pa,Qo,g0,l0,I0)=>{w.ob("Resize",A,{antialias:ee,axes:he?Array.from(s().subarray(he>>>0,Ie>>>0)):[],coordinateTransformMode:Hr(Ye),cubicCoeffA:wn,excludeOutside:Pa,extrapolationValue:Qo,keepAspectRatioPolicy:Hr(g0),mode:Hr(l0),nearestMode:Hr(I0)})},836054:(A,ee,he,Ie,Ye,wn,Pa)=>{w.ob("Slice",A,{starts:ee?Array.from(s().subarray(ee>>>0,he>>>0)):[],ends:Ie?Array.from(s().subarray(Ie>>>0,Ye>>>0)):[],axes:wn?Array.from(s().subarray(wn>>>0,Pa>>>0)):[]})},836270:A=>{w.ob("Tile",A,void 0)},836322:(A,ee,he,Ie)=>{w.ob("LayerNormalization",A,{axis:ee,epsilon:he,simplified:!!Ie})},836433:(A,ee,he)=>{w.ob("InstanceNormalization",A,{epsilon:ee,format:he?"NHWC":"NCHW"})},836547:(A,ee,he)=>{w.ob("InstanceNormalization",A,{epsilon:ee,format:he?"NHWC":"NCHW"})},836661:A=>{w.ob("Range",A,void 0)},836714:(A,ee)=>{w.ob("Einsum",A,{equation:Hr(ee)})},836795:(A,ee,he,Ie,Ye)=>{w.ob("Pad",A,{mode:ee,value:he,pads:Ie?Array.from(s().subarray(Ie>>>0,Ye>>>0)):[]})},836922:(A,ee,he,Ie,Ye,wn)=>{w.ob("BatchNormalization",A,{epsilon:ee,momentum:he,spatial:!!Ye,trainingMode:!!Ie,format:wn?"NHWC":"NCHW"})},837091:(A,ee,he,Ie,Ye,wn)=>{w.ob("BatchNormalization",A,{epsilon:ee,momentum:he,spatial:!!Ye,trainingMode:!!Ie,format:wn?"NHWC":"NCHW"})},837260:(A,ee,he)=>{w.ob("CumSum",A,{exclusive:Number(ee),reverse:Number(he)})},837357:(A,ee,he,Ie,Ye,wn,Pa,Qo,g0)=>{w.ob("Attention",A,{numHeads:ee,isUnidirectional:he,maskFilterValue:Ie,scale:Ye,doRotary:wn,qkvHiddenSizes:Pa?Array.from(s().subarray(Number(Qo)>>>0,Number(Qo)+Pa>>>0)):[],pastPresentShareBuffer:!!g0})},837629:A=>{w.ob("BiasAdd",A,void 0)},837684:A=>{w.ob("BiasSplitGelu",A,void 0)},837745:A=>{w.ob("FastGelu",A,void 0)},837801:(A,ee,he,Ie,Ye,wn,Pa,Qo,g0,l0,I0,Cg,$g)=>{w.ob("Conv",A,{format:g0?"NHWC":"NCHW",auto_pad:ee,dilations:[he],group:Ie,kernel_shape:[Ye],pads:wn?Array.from(s().subarray(wn>>>0,Pa>>>0)):[],strides:[Qo],w_is_const:()=>!!a()[l0>>>0],activation:Hr(I0),activation_params:Cg?Array.from(d().subarray(Cg>>>0,$g>>>0)):[]})},838171:(A,ee,he,Ie,Ye,wn,Pa,Qo,g0,l0,I0,Cg,$g,Kr,q0,Ig)=>{w.ob("Conv",A,{format:Cg?"NHWC":"NCHW",auto_pad:ee,dilations:[he,Ie],group:Ye,kernel_shape:[wn,Pa],pads:Qo?Array.from(s().subarray(Qo>>>0,g0>>>0)):[],strides:[l0,I0],w_is_const:()=>!!a()[$g>>>0],activation:Hr(Kr),activation_params:q0?Array.from(d().subarray(q0>>>0,Ig>>>0)):[]})},838562:A=>{w.ob("Gelu",A,void 0)},838614:(A,ee,he,Ie,Ye,wn)=>{w.ob("MatMulNBits",A,{k:ee,n:he,accuracyLevel:Ie,bits:Ye,blockSize:wn})},838741:(A,ee,he,Ie,Ye,wn)=>{w.ob("MultiHeadAttention",A,{numHeads:ee,isUnidirectional:he,maskFilterValue:Ie,scale:Ye,doRotary:wn})},838900:(A,ee,he,Ie,Ye)=>{w.ob("RotaryEmbedding",A,{interleaved:!!ee,numHeads:he,rotaryEmbeddingDim:Ie,scale:Ye})},839039:(A,ee,he)=>{w.ob("SkipLayerNormalization",A,{epsilon:ee,simplified:!!he})},839141:(A,ee,he)=>{w.ob("SkipLayerNormalization",A,{epsilon:ee,simplified:!!he})},839243:(A,ee,he,Ie)=>{w.ob("LayerNormalization",A,{axis:ee,epsilon:he,simplified:!!Ie})},839354:A=>{w.ac(A)},839388:(A,ee)=>w.cc(A,ee,w.Cb.ec,w.Cb.errors)};function qg(A){this.name="ExitStatus",this.message=`Program terminated with exit(${A})`,this.status=A}var W1=A=>{A.terminate(),A.onmessage=()=>{}},V1=A=>{ko.xb.length==0&&(nr(),ko.Mb(ko.xb[0]));var ee=ko.xb.pop();if(!ee)return 6;ko.yb.push(ee),ko.ub[A.wb]=ee,ee.wb=A.wb;var he={cmd:"run",start_routine:A.fc,arg:A.Rb,pthread_ptr:A.wb};return Oe&&ee.unref(),ee.postMessage(he,A.mc),0},u0=0,Z1=A=>{var ee=I_();return A=A(),B2(ee),A},k0=(A,ee,...he)=>Z1(()=>{for(var Ie=2*he.length,Ye=u2(8*Ie),wn=Ye>>>3,Pa=0;Pa<he.length;Pa++){var Qo=he[Pa];typeof Qo=="bigint"?(S0[wn+2*Pa]=1n,S0[wn+2*Pa+1]=Qo):(S0[wn+2*Pa]=0n,g()[wn+2*Pa+1>>>0]=Qo)}return Mv(A,0,Ie,Ye,ee)});function Bg(A){if(Ce)return k0(0,1,A);No=A,0<u0||(ko.hc(),w.onExit?.(A),tr=!0),pe(A,new qg(A))}var Ge=A=>{if(No=A,Ce)throw j0(A),"unwind";Bg(A)};function An(){for(var A=w.numThreads;A--;)nr();p0.unshift(()=>{N0++,Ra(()=>U0())})}function nr(){var A=$t("ort-wasm-simd-threaded.worker.js");A=new Worker(A),ko.xb.push(A)}function Ra(A){Ce?A():Promise.all(ko.xb.map(ko.Mb)).then(A)}var ko={xb:[],yb:[],Qb:[],ub:{},Gb(){Ce?(ko.receiveObjectTransfer=ko.dc,ko.threadInitTLS=ko.Pb,ko.setExitStatus=ko.Ob):An()},Ob:A=>No=A,pc:["$terminateWorker"],hc:()=>{for(var A of ko.yb)W1(A);for(A of ko.xb)W1(A);ko.xb=[],ko.yb=[],ko.ub=[]},Nb:A=>{var ee=A.wb;delete ko.ub[ee],ko.xb.push(A),ko.yb.splice(ko.yb.indexOf(A),1),A.wb=0,U2(ee)},dc(){},Pb(){ko.Qb.forEach(A=>A())},Mb:A=>new Promise(ee=>{A.onmessage=wn=>{wn=wn.data;var Pa=wn.cmd;if(wn.targetThread&&wn.targetThread!=l2()){var Qo=ko.ub[wn.targetThread];Qo?Qo.postMessage(wn,wn.transferList):Ht(`Internal error! Worker sent a message "${Pa}" to target pthread ${wn.targetThread}, but that thread no longer exists!`)}else Pa==="checkMailbox"?Xg():Pa==="spawnThread"?V1(wn):Pa==="cleanupThread"?ko.Nb(ko.ub[wn.thread]):Pa==="killThread"?(wn=wn.thread,Pa=ko.ub[wn],delete ko.ub[wn],W1(Pa),U2(wn),ko.yb.splice(ko.yb.indexOf(Pa),1),Pa.wb=0):Pa==="cancelThread"?ko.ub[wn.thread].postMessage({cmd:"cancel"}):Pa==="loaded"?(A.loaded=!0,Oe&&!A.wb&&A.unref(),ee(A)):Pa==="alert"?alert(`Thread ${wn.threadId}: ${wn.text}`):wn.target==="setimmediate"?A.postMessage(wn):Pa==="callHandler"?w[wn.handler](...wn.args):Pa&&Ht(`worker sent an unknown command ${Pa}`)},A.onerror=wn=>{throw Ht(`worker sent an error! ${wn.filename}:${wn.lineno}: ${wn.message}`),wn},Oe&&(A.on("message",wn=>A.onmessage({data:wn})),A.on("error",wn=>A.onerror(wn)));var he=[],Ie=["onExit"],Ye;for(Ye of Ie)w.hasOwnProperty(Ye)&&he.push(Ye);A.postMessage({cmd:"load",handlers:he,urlOrBlob:w.mainScriptUrlOrBlob||i,wasmMemory:Ae,wasmModule:Be})})};w.PThread=ko;var b0=A=>{for(;0<A.length;)A.shift()(w)};w.establishStackSpace=()=>{var A=l2(),ee=u()[A+52>>>2>>>0];A=u()[A+56>>>2>>>0],Fv(ee,ee-A),B2(ee)};function j0(A){if(Ce)return k0(1,0,A);Ge(A)}w.invokeEntryPoint=(A,ee)=>{u0=0,A=pw(A,ee),0<u0?ko.Ob(A):Kw(A)};class Gg{constructor(ee){this.Ib=ee-24}Gb(ee,he){u()[this.Ib+16>>>2>>>0]=0,u()[this.Ib+4>>>2>>>0]=ee,u()[this.Ib+8>>>2>>>0]=he}}var c1=0;function Hg(A,ee,he,Ie){return Ce?k0(2,1,A,ee,he,Ie):zg(A,ee,he,Ie)}function zg(A,ee,he,Ie){if(A>>>=0,ee>>>=0,he>>>=0,Ie>>>=0,typeof SharedArrayBuffer>"u")return Ht("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Ye=[];return Ce&&Ye.length===0?Hg(A,ee,he,Ie):(A={fc:he,wb:A,Rb:Ie,mc:Ye},Ce?(A.oc="spawnThread",postMessage(A,Ye),0):V1(A))}var yy=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,s1=(A,ee,he)=>{ee>>>=0;var Ie=ee+he;for(he=ee;A[he]&&!(he>=Ie);)++he;if(16<he-ee&&A.buffer&&yy)return yy.decode(A.buffer instanceof SharedArrayBuffer?A.slice(ee,he):A.subarray(ee,he));for(Ie="";ee<he;){var Ye=A[ee++];if(Ye&128){var wn=A[ee++]&63;if((Ye&224)==192)Ie+=String.fromCharCode((Ye&31)<<6|wn);else{var Pa=A[ee++]&63;Ye=(Ye&240)==224?(Ye&15)<<12|wn<<6|Pa:(Ye&7)<<18|wn<<12|Pa<<6|A[ee++]&63,65536>Ye?Ie+=String.fromCharCode(Ye):(Ye-=65536,Ie+=String.fromCharCode(55296|Ye>>10,56320|Ye&1023))}}else Ie+=String.fromCharCode(Ye)}return Ie},Hr=(A,ee)=>(A>>>=0)?s1(l(),A,ee):"";function H0(A,ee,he){return Ce?k0(3,1,A,ee,he):0}function Y0(A,ee){if(Ce)return k0(4,1,A,ee)}var Dg=A=>{for(var ee=0,he=0;he<A.length;++he){var Ie=A.charCodeAt(he);127>=Ie?ee++:2047>=Ie?ee+=2:55296<=Ie&&57343>=Ie?(ee+=4,++he):ee+=3}return ee},q1=(A,ee,he,Ie)=>{if(he>>>=0,!(0<Ie))return 0;var Ye=he;Ie=he+Ie-1;for(var wn=0;wn<A.length;++wn){var Pa=A.charCodeAt(wn);if(55296<=Pa&&57343>=Pa){var Qo=A.charCodeAt(++wn);Pa=65536+((Pa&1023)<<10)|Qo&1023}if(127>=Pa){if(he>=Ie)break;ee[he++>>>0]=Pa}else{if(2047>=Pa){if(he+1>=Ie)break;ee[he++>>>0]=192|Pa>>6}else{if(65535>=Pa){if(he+2>=Ie)break;ee[he++>>>0]=224|Pa>>12}else{if(he+3>=Ie)break;ee[he++>>>0]=240|Pa>>18,ee[he++>>>0]=128|Pa>>12&63}ee[he++>>>0]=128|Pa>>6&63}ee[he++>>>0]=128|Pa&63}}return ee[he>>>0]=0,he-Ye},T1=(A,ee,he)=>q1(A,l(),ee,he);function Uy(A,ee){if(Ce)return k0(5,1,A,ee)}function T_(A,ee,he){if(Ce)return k0(6,1,A,ee,he)}function B_(A,ee,he){return Ce?k0(7,1,A,ee,he):0}function s_(A,ee){if(Ce)return k0(8,1,A,ee)}function uy(A,ee,he){if(Ce)return k0(9,1,A,ee,he)}function By(A,ee,he,Ie){if(Ce)return k0(10,1,A,ee,he,Ie)}function zy(A,ee,he,Ie){if(Ce)return k0(11,1,A,ee,he,Ie)}function $_(A,ee,he,Ie){if(Ce)return k0(12,1,A,ee,he,Ie)}function dy(A){if(Ce)return k0(13,1,A)}function Sy(A,ee){if(Ce)return k0(14,1,A,ee)}function E_(A,ee,he){if(Ce)return k0(15,1,A,ee,he)}var Wy,f1=A=>{for(var ee="";l()[A>>>0];)ee+=Wy[l()[A++>>>0]];return ee},o_={},Ag={},G1;function l_(A,ee,he={}){var Ie=ee.name;if(!A)throw new G1(`type "${Ie}" must have a positive integer typeid pointer`);if(Ag.hasOwnProperty(A)){if(he.Ub)return;throw new G1(`Cannot register type '${Ie}' twice`)}Ag[A]=ee,o_.hasOwnProperty(A)&&(ee=o_[A],delete o_[A],ee.forEach(Ye=>Ye()))}function o1(A,ee,he={}){if(!("argPackAdvance"in ee))throw new TypeError("registerType registeredInstance requires argPackAdvance");return l_(A,ee,he)}var _y=(A,ee,he)=>{switch(ee){case 1:return he?Ie=>a()[Ie>>>0]:Ie=>l()[Ie>>>0];case 2:return he?Ie=>c()[Ie>>>1>>>0]:Ie=>p()[Ie>>>1>>>0];case 4:return he?Ie=>s()[Ie>>>2>>>0]:Ie=>u()[Ie>>>2>>>0];case 8:return he?Ie=>S0[Ie>>>3]:Ie=>Sg[Ie>>>3];default:throw new TypeError(`invalid integer width (${ee}): ${A}`)}},Vy=[],y1=[];function wy(A){A>>>=0,9<A&&--y1[A+1]===0&&(y1[A]=void 0,Vy.push(A))}var Mg=A=>{if(!A)throw new G1("Cannot use deleted val. handle = "+A);return y1[A]},$1=A=>{switch(A){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let ee=Vy.pop()||y1.length;return y1[ee]=A,y1[ee+1]=1,ee}};function l1(A){return this.fromWireType(u()[A>>>2>>>0])}var z_={name:"emscripten::val",fromWireType:A=>{var ee=Mg(A);return wy(A),ee},toWireType:(A,ee)=>$1(ee),argPackAdvance:8,readValueFromPointer:l1,Bb:null},W_=(A,ee)=>{switch(ee){case 4:return function(he){return this.fromWireType(d()[he>>>2>>>0])};case 8:return function(he){return this.fromWireType(g()[he>>>3>>>0])};default:throw new TypeError(`invalid float width (${ee}): ${A}`)}},S_=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Ay=(A,ee)=>{for(var he=A>>1,Ie=he+ee/2;!(he>=Ie)&&p()[he>>>0];)++he;if(he<<=1,32<he-A&&S_)return S_.decode(l().slice(A,he));for(he="",Ie=0;!(Ie>=ee/2);++Ie){var Ye=c()[A+2*Ie>>>1>>>0];if(Ye==0)break;he+=String.fromCharCode(Ye)}return he},u_=(A,ee,he)=>{if(he??=2147483647,2>he)return 0;he-=2;var Ie=ee;he=he<2*A.length?he/2:A.length;for(var Ye=0;Ye<he;++Ye){var wn=A.charCodeAt(Ye);c()[ee>>>1>>>0]=wn,ee+=2}return c()[ee>>>1>>>0]=0,ee-Ie},Iy=A=>2*A.length,v0=(A,ee)=>{for(var he=0,Ie="";!(he>=ee/4);){var Ye=s()[A+4*he>>>2>>>0];if(Ye==0)break;++he,65536<=Ye?(Ye-=65536,Ie+=String.fromCharCode(55296|Ye>>10,56320|Ye&1023)):Ie+=String.fromCharCode(Ye)}return Ie},d_=(A,ee,he)=>{if(ee>>>=0,he??=2147483647,4>he)return 0;var Ie=ee;he=Ie+he-4;for(var Ye=0;Ye<A.length;++Ye){var wn=A.charCodeAt(Ye);if(55296<=wn&&57343>=wn){var Pa=A.charCodeAt(++Ye);wn=65536+((wn&1023)<<10)|Pa&1023}if(s()[ee>>>2>>>0]=wn,ee+=4,ee+4>he)break}return s()[ee>>>2>>>0]=0,ee-Ie},A0=A=>{for(var ee=0,he=0;he<A.length;++he){var Ie=A.charCodeAt(he);55296<=Ie&&57343>=Ie&&++he,ee+=4}return ee},Cy=A=>{if(!tr)try{if(A(),!(0<u0))try{Ce?Kw(No):Ge(No)}catch(ee){ee instanceof qg||ee=="unwind"||pe(1,ee)}}catch(ee){ee instanceof qg||ee=="unwind"||pe(1,ee)}};function H1(A){A>>>=0,typeof Atomics.nc=="function"&&(Atomics.nc(s(),A>>>2,A).value.then(Xg),A+=128,Atomics.store(s(),A>>>2,1))}w.__emscripten_thread_mailbox_await=H1;var Xg=()=>{var A=l2();A&&(H1(A),Cy(Xw))};w.checkMailbox=Xg;var cy=[],Zy=(A,ee)=>{var he=Ag[A];if(he===void 0)throw A=L2(A),he=f1(A),S1(A),new G1(`${ee} has unknown type ${he}`);return he},by=(A,ee,he)=>{var Ie=[];return A=A.toWireType(Ie,he),Ie.length&&(u()[ee>>>2>>>0]=$1(Ie)),A},Z0=A=>{try{A()}catch(ee){B0(ee)}};function Y1(){var A=m0,ee={};for(let[he,Ie]of Object.entries(A))ee[he]=typeof Ie=="function"?(...Ye)=>{K1.push(he);try{return Ie(...Ye)}finally{tr||(K1.pop(),_1&&E1===1&&K1.length===0&&(E1=0,u0+=1,Z0(Jw),typeof Fibers<"u"&&Fibers.rc()))}}:Ie;return ee}var E1=0,_1=null,qy=0,K1=[],de={},E={},k=0,ie=null,ge=[];function Le(){return new Promise((A,ee)=>{ie={resolve:A,reject:ee}})}function Kt(){var A=Fg(65548),ee=A+12;u()[A>>>2>>>0]=ee,u()[A+4>>>2>>>0]=ee+65536,ee=K1[0];var he=de[ee];return he===void 0&&(he=k++,de[ee]=he,E[he]=ee),ee=he,s()[A+8>>>2>>>0]=ee,A}function Na(){var A=s()[_1+8>>>2>>>0];return A=m0[E[A]],--u0,A()}function Uo(A){if(!tr){if(E1===0){var ee=!1,he=!1;A((Ie=0)=>{if(!tr&&(qy=Ie,ee=!0,he)){E1=2,Z0(()=>hw(_1)),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.resume(),Ie=!1;try{var Ye=Na()}catch(Qo){Ye=Qo,Ie=!0}var wn=!1;if(!_1){var Pa=ie;Pa&&(ie=null,(Ie?Pa.reject:Pa.resolve)(Ye),wn=!0)}if(Ie&&!wn)throw Ye}}),he=!0,ee||(E1=1,_1=Kt(),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.pause(),Z0(()=>Qw(_1)))}else E1===2?(E1=0,Z0(z2),S1(_1),_1=null,ge.forEach(Cy)):B0(`invalid state: ${E1}`);return qy}}function s0(A){return Uo(ee=>{A().then(ee)})}var n0=[],_0={},ag=A=>{var ee=_0[A];return ee===void 0?f1(A):ee},Zr=()=>typeof globalThis=="object"?globalThis:Function("return this")(),ir=A=>{var ee=n0.length;return n0.push(A),ee},h0=(A,ee)=>{for(var he=Array(A),Ie=0;Ie<A;++Ie)he[Ie]=Zy(u()[ee+4*Ie>>>2>>>0],"parameter "+Ie);return he},z0=(A,ee)=>Object.defineProperty(ee,"name",{value:A});function G0(A){var ee=Function;if(!(ee instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof ee} which is not a function`);var he=z0(ee.name||"unknownFunctionName",function(){});return he.prototype=ee.prototype,he=new he,A=ee.apply(he,A),A instanceof Object?A:he}var J0=A=>A%4===0&&(A%100!==0||A%400===0),V_=[0,31,60,91,121,152,182,213,244,274,305,335],D2=[0,31,59,90,120,151,181,212,243,273,304,334];function Nv(A,ee,he,Ie,Ye,wn,Pa){return Ce?k0(16,1,A,ee,he,Ie,Ye,wn,Pa):-52}function Pv(A,ee,he,Ie,Ye,wn){if(Ce)return k0(17,1,A,ee,he,Ie,Ye,wn)}var M2=[],F2=(A,ee)=>{M2.length=0;for(var he;he=l()[A++>>>0];){var Ie=he!=105;Ie&=he!=112,ee+=Ie&&ee%8?4:0,M2.push(he==112?u()[ee>>>2>>>0]:he==106?S0[ee>>>3]:he==105?s()[ee>>>2>>>0]:g()[ee>>>3>>>0]),ee+=Ie?8:4}return M2},a2={},Gw=()=>{if(!Lg){var A={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ue||"./this.program"},ee;for(ee in a2)a2[ee]===void 0?delete A[ee]:A[ee]=a2[ee];var he=[];for(ee in A)he.push(`${ee}=${A[ee]}`);Lg=he}return Lg},Lg;function s2(A,ee){if(Ce)return k0(18,1,A,ee);A>>>=0,ee>>>=0;var he=0;return Gw().forEach((Ie,Ye)=>{var wn=ee+he;for(Ye=u()[A+4*Ye>>>2>>>0]=wn,wn=0;wn<Ie.length;++wn)a()[Ye++>>>0]=Ie.charCodeAt(wn);a()[Ye>>>0]=0,he+=Ie.length+1}),0}function Oy(A,ee){if(Ce)return k0(19,1,A,ee);A>>>=0,ee>>>=0;var he=Gw();u()[A>>>2>>>0]=he.length;var Ie=0;return he.forEach(Ye=>Ie+=Ye.length+1),u()[ee>>>2>>>0]=Ie,0}function uw(A){return Ce?k0(20,1,A):52}function Z_(A,ee,he,Ie){return Ce?k0(21,1,A,ee,he,Ie):52}function D1(A,ee,he,Ie){return Ce?k0(22,1,A,ee,he,Ie):70}var Hw=[null,[],[]];function U1(A,ee,he,Ie){if(Ce)return k0(23,1,A,ee,he,Ie);ee>>>=0,he>>>=0,Ie>>>=0;for(var Ye=0,wn=0;wn<he;wn++){var Pa=u()[ee>>>2>>>0],Qo=u()[ee+4>>>2>>>0];ee+=8;for(var g0=0;g0<Qo;g0++){var l0=l()[Pa+g0>>>0],I0=Hw[A];l0===0||l0===10?((A===1?ze:Ht)(s1(I0,0)),I0.length=0):I0.push(l0)}Ye+=Qo}return u()[Ie>>>2>>>0]=Ye,0}var A_=[31,29,31,30,31,30,31,31,30,31,30,31],j2=[31,28,31,30,31,30,31,31,30,31,30,31];function o2(A){var ee=Array(Dg(A)+1);return q1(A,ee,0,ee.length),ee}var Dv=(A,ee)=>{a().set(A,ee>>>0)};function M1(A,ee,he,Ie){function Ye(Kr,q0,Ig){for(Kr=typeof Kr=="number"?Kr.toString():Kr||"";Kr.length<q0;)Kr=Ig[0]+Kr;return Kr}function wn(Kr,q0){return Ye(Kr,q0,"0")}function Pa(Kr,q0){function Ig(yw){return 0>yw?-1:0<yw?1:0}var Gy;return(Gy=Ig(Kr.getFullYear()-q0.getFullYear()))===0&&(Gy=Ig(Kr.getMonth()-q0.getMonth()))===0&&(Gy=Ig(Kr.getDate()-q0.getDate())),Gy}function Qo(Kr){switch(Kr.getDay()){case 0:return new Date(Kr.getFullYear()-1,11,29);case 1:return Kr;case 2:return new Date(Kr.getFullYear(),0,3);case 3:return new Date(Kr.getFullYear(),0,2);case 4:return new Date(Kr.getFullYear(),0,1);case 5:return new Date(Kr.getFullYear()-1,11,31);case 6:return new Date(Kr.getFullYear()-1,11,30)}}function g0(Kr){var q0=Kr.zb;for(Kr=new Date(new Date(Kr.Ab+1900,0,1).getTime());0<q0;){var Ig=Kr.getMonth(),Gy=(J0(Kr.getFullYear())?A_:j2)[Ig];if(q0>Gy-Kr.getDate())q0-=Gy-Kr.getDate()+1,Kr.setDate(1),11>Ig?Kr.setMonth(Ig+1):(Kr.setMonth(0),Kr.setFullYear(Kr.getFullYear()+1));else{Kr.setDate(Kr.getDate()+q0);break}}return Ig=new Date(Kr.getFullYear()+1,0,4),q0=Qo(new Date(Kr.getFullYear(),0,4)),Ig=Qo(Ig),0>=Pa(q0,Kr)?0>=Pa(Ig,Kr)?Kr.getFullYear()+1:Kr.getFullYear():Kr.getFullYear()-1}A>>>=0,ee>>>=0,he>>>=0,Ie>>>=0;var l0=u()[Ie+40>>>2>>>0];Ie={kc:s()[Ie>>>2>>>0],jc:s()[Ie+4>>>2>>>0],Eb:s()[Ie+8>>>2>>>0],Jb:s()[Ie+12>>>2>>>0],Fb:s()[Ie+16>>>2>>>0],Ab:s()[Ie+20>>>2>>>0],vb:s()[Ie+24>>>2>>>0],zb:s()[Ie+28>>>2>>>0],qc:s()[Ie+32>>>2>>>0],ic:s()[Ie+36>>>2>>>0],lc:l0?Hr(l0):""},he=Hr(he),l0={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var I0 in l0)he=he.replace(new RegExp(I0,"g"),l0[I0]);var Cg="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),$g="January February March April May June July August September October November December".split(" ");l0={"%a":Kr=>Cg[Kr.vb].substring(0,3),"%A":Kr=>Cg[Kr.vb],"%b":Kr=>$g[Kr.Fb].substring(0,3),"%B":Kr=>$g[Kr.Fb],"%C":Kr=>wn((Kr.Ab+1900)/100|0,2),"%d":Kr=>wn(Kr.Jb,2),"%e":Kr=>Ye(Kr.Jb,2," "),"%g":Kr=>g0(Kr).toString().substring(2),"%G":g0,"%H":Kr=>wn(Kr.Eb,2),"%I":Kr=>(Kr=Kr.Eb,Kr==0?Kr=12:12<Kr&&(Kr-=12),wn(Kr,2)),"%j":Kr=>{for(var q0=0,Ig=0;Ig<=Kr.Fb-1;q0+=(J0(Kr.Ab+1900)?A_:j2)[Ig++]);return wn(Kr.Jb+q0,3)},"%m":Kr=>wn(Kr.Fb+1,2),"%M":Kr=>wn(Kr.jc,2),"%n":()=>`
`,"%p":Kr=>0<=Kr.Eb&&12>Kr.Eb?"AM":"PM","%S":Kr=>wn(Kr.kc,2),"%t":()=>"	","%u":Kr=>Kr.vb||7,"%U":Kr=>wn(Math.floor((Kr.zb+7-Kr.vb)/7),2),"%V":Kr=>{var q0=Math.floor((Kr.zb+7-(Kr.vb+6)%7)/7);if(2>=(Kr.vb+371-Kr.zb-2)%7&&q0++,q0)q0==53&&(Ig=(Kr.vb+371-Kr.zb)%7,Ig==4||Ig==3&&J0(Kr.Ab)||(q0=1));else{q0=52;var Ig=(Kr.vb+7-Kr.zb-1)%7;(Ig==4||Ig==5&&J0(Kr.Ab%400-1))&&q0++}return wn(q0,2)},"%w":Kr=>Kr.vb,"%W":Kr=>wn(Math.floor((Kr.zb+7-(Kr.vb+6)%7)/7),2),"%y":Kr=>(Kr.Ab+1900).toString().substring(2),"%Y":Kr=>Kr.Ab+1900,"%z":Kr=>{Kr=Kr.ic;var q0=0<=Kr;return Kr=Math.abs(Kr)/60,(q0?"+":"-")+("0000"+(Kr/60*100+Kr%60)).slice(-4)},"%Z":Kr=>Kr.lc,"%%":()=>"%"},he=he.replace(/%%/g,"\0\0");for(I0 in l0)he.includes(I0)&&(he=he.replace(new RegExp(I0,"g"),l0[I0](Ie)));return he=he.replace(/\0\0/g,"%"),I0=o2(he),I0.length>ee?0:(Dv(I0,A),I0.length-1)}ko.Gb();for(var dw=Array(256),p1=0;256>p1;++p1)dw[p1]=String.fromCharCode(p1);Wy=dw,G1=w.BindingError=class extends Error{constructor(A){super(A),this.name="BindingError"}},w.InternalError=class extends Error{constructor(A){super(A),this.name="InternalError"}},y1.push(0,1,void 0,1,null,1,!0,1,!1,1),w.count_emval_handles=()=>y1.length/2-5-Vy.length;var cw=[Bg,j0,Hg,H0,Y0,Uy,T_,B_,s_,uy,By,zy,$_,dy,Sy,E_,Nv,Pv,s2,Oy,uw,Z_,D1,U1],Yw={ua:function(A,ee,he){return s0(async()=>{await w.Zb(A,ee,he)})},b:function(A,ee,he){throw A>>>=0,new Gg(A).Gb(ee>>>0,he>>>0),c1=A,c1},ia:function(A){fw(A>>>0,!Re,1,!se,131072,!1),ko.Pb()},G:function(A){A>>>=0,Ce?postMessage({cmd:"cleanupThread",thread:A}):ko.Nb(ko.ub[A])},_:zg,A:H0,pa:Y0,W:Uy,Y:T_,qa:B_,na:s_,fa:uy,ma:By,K:zy,X:$_,U:dy,oa:Sy,V:E_,E:function(A,ee,he){A>>>=0,he>>>=0,ee=f1(ee>>>0),o1(A,{name:ee,fromWireType:Ie=>Ie,toWireType:function(Ie,Ye){if(typeof Ye!="bigint"&&typeof Ye!="number")throw Ye===null?Ye="null":(Ie=typeof Ye,Ye=Ie==="object"||Ie==="array"||Ie==="function"?Ye.toString():""+Ye),new TypeError(`Cannot convert "${Ye}" to ${this.name}`);return typeof Ye=="number"&&(Ye=BigInt(Ye)),Ye},argPackAdvance:8,readValueFromPointer:_y(ee,he,ee.indexOf("u")==-1),Bb:null})},O:function(A,ee,he,Ie){A>>>=0,ee=f1(ee>>>0),o1(A,{name:ee,fromWireType:function(Ye){return!!Ye},toWireType:function(Ye,wn){return wn?he:Ie},argPackAdvance:8,readValueFromPointer:function(Ye){return this.fromWireType(l()[Ye>>>0])},Bb:null})},N:function(A){return o1(A>>>0,z_)},D:function(A,ee,he){A>>>=0,he>>>=0,ee=f1(ee>>>0),o1(A,{name:ee,fromWireType:Ie=>Ie,toWireType:(Ie,Ye)=>Ye,argPackAdvance:8,readValueFromPointer:W_(ee,he),Bb:null})},t:function(A,ee,he,Ie,Ye){if(A>>>=0,he>>>=0,ee=f1(ee>>>0),Ye===-1&&(Ye=4294967295),Ye=Qo=>Qo,Ie===0){var wn=32-8*he;Ye=Qo=>Qo<<wn>>>wn}var Pa=ee.includes("unsigned")?function(Qo,g0){return g0>>>0}:function(Qo,g0){return g0};o1(A,{name:ee,fromWireType:Ye,toWireType:Pa,argPackAdvance:8,readValueFromPointer:_y(ee,he,Ie!==0),Bb:null})},p:function(A,ee,he){function Ie(wn){var Pa=u()[wn>>>2>>>0];return wn=u()[wn+4>>>2>>>0],new Ye(a().buffer,wn,Pa)}A>>>=0;var Ye=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][ee];he=f1(he>>>0),o1(A,{name:he,fromWireType:Ie,argPackAdvance:8,readValueFromPointer:Ie},{Ub:!0})},F:function(A,ee){A>>>=0,ee=f1(ee>>>0);var he=ee==="std::string";o1(A,{name:ee,fromWireType:function(Ie){var Ye=u()[Ie>>>2>>>0],wn=Ie+4;if(he)for(var Pa=wn,Qo=0;Qo<=Ye;++Qo){var g0=wn+Qo;if(Qo==Ye||l()[g0>>>0]==0){if(Pa=Hr(Pa,g0-Pa),l0===void 0)var l0=Pa;else l0+="\0",l0+=Pa;Pa=g0+1}}else{for(l0=Array(Ye),Qo=0;Qo<Ye;++Qo)l0[Qo]=String.fromCharCode(l()[wn+Qo>>>0]);l0=l0.join("")}return S1(Ie),l0},toWireType:function(Ie,Ye){Ye instanceof ArrayBuffer&&(Ye=new Uint8Array(Ye));var wn=typeof Ye=="string";if(!(wn||Ye instanceof Uint8Array||Ye instanceof Uint8ClampedArray||Ye instanceof Int8Array))throw new G1("Cannot pass non-string to std::string");var Pa=he&&wn?Dg(Ye):Ye.length,Qo=Fg(4+Pa+1),g0=Qo+4;if(u()[Qo>>>2>>>0]=Pa,he&&wn)T1(Ye,g0,Pa+1);else if(wn)for(wn=0;wn<Pa;++wn){var l0=Ye.charCodeAt(wn);if(255<l0)throw S1(g0),new G1("String has UTF-16 code units that do not fit in 8 bits");l()[g0+wn>>>0]=l0}else for(wn=0;wn<Pa;++wn)l()[g0+wn>>>0]=Ye[wn];return Ie!==null&&Ie.push(S1,Qo),Qo},argPackAdvance:8,readValueFromPointer:l1,Bb(Ie){S1(Ie)}})},z:function(A,ee,he){if(A>>>=0,ee>>>=0,he>>>=0,he=f1(he),ee===2)var Ie=Ay,Ye=u_,wn=Iy,Pa=Qo=>p()[Qo>>>1>>>0];else ee===4&&(Ie=v0,Ye=d_,wn=A0,Pa=Qo=>u()[Qo>>>2>>>0]);o1(A,{name:he,fromWireType:Qo=>{for(var g0=u()[Qo>>>2>>>0],l0,I0=Qo+4,Cg=0;Cg<=g0;++Cg){var $g=Qo+4+Cg*ee;(Cg==g0||Pa($g)==0)&&(I0=Ie(I0,$g-I0),l0===void 0?l0=I0:(l0+="\0",l0+=I0),I0=$g+ee)}return S1(Qo),l0},toWireType:(Qo,g0)=>{if(typeof g0!="string")throw new G1(`Cannot pass non-string to C++ string type ${he}`);var l0=wn(g0),I0=Fg(4+l0+ee);return u()[I0>>>2>>>0]=l0/ee,Ye(g0,I0+4,l0+ee),Qo!==null&&Qo.push(S1,I0),I0},argPackAdvance:8,readValueFromPointer:l1,Bb(Qo){S1(Qo)}})},P:function(A,ee){A>>>=0,ee=f1(ee>>>0),o1(A,{Vb:!0,name:ee,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ta:()=>1,S:function(A,ee){A>>>=0,A==ee>>>0?setTimeout(Xg):Ce?postMessage({targetThread:A,cmd:"checkMailbox"}):(A=ko.ub[A])&&A.postMessage({cmd:"checkMailbox"})},$:function(A,ee,he,Ie,Ye){ee>>>=0,he>>>=0,Ie/=2,cy.length=Ie,Ye=Ye>>>0>>>3;for(var wn=0;wn<Ie;wn++)cy[wn]=S0[Ye+2*wn]?S0[Ye+2*wn+1]:g()[Ye+2*wn+1>>>0];return A=ee?E0[ee]:cw[A],ko.Sb=he,he=A(...cy),ko.Sb=0,he},ha:H1,sa:function(A){Oe&&ko.ub[A>>>0].ref()},w:function(A,ee,he){return ee>>>=0,he>>>=0,A=Mg(A>>>0),ee=Zy(ee,"emval::as"),by(ee,he,A)},y:function(A){return A>>>=0,s0(()=>(A=Mg(A),A.then($1)))},o:function(A,ee,he,Ie){return he>>>=0,Ie>>>=0,A=n0[A>>>0],ee=Mg(ee>>>0),A(null,ee,he,Ie)},k:function(A,ee,he,Ie,Ye){return he>>>=0,Ie>>>=0,Ye>>>=0,A=n0[A>>>0],ee=Mg(ee>>>0),he=ag(he),A(ee,ee[he],Ie,Ye)},c:wy,C:function(A,ee){return ee>>>=0,A=Mg(A>>>0),ee=Mg(ee),A==ee},n:function(A){return A>>>=0,A===0?$1(Zr()):(A=ag(A),$1(Zr()[A]))},j:function(A,ee,he){ee=h0(A,ee>>>0);var Ie=ee.shift();A--;var Ye=`return function (obj, func, destructorsRef, args) {
`,wn=0,Pa=[];he===0&&Pa.push("obj");for(var Qo=["retType"],g0=[Ie],l0=0;l0<A;++l0)Pa.push("arg"+l0),Qo.push("argType"+l0),g0.push(ee[l0]),Ye+=`  var arg${l0} = argType${l0}.readValueFromPointer(args${wn?"+"+wn:""});
`,wn+=ee[l0].argPackAdvance;return Ye+=`  var rv = ${he===1?"new func":"func.call"}(${Pa.join(", ")});
`,Ie.Vb||(Qo.push("emval_returnValue"),g0.push(by),Ye+=`  return emval_returnValue(retType, destructorsRef, rv);
`),Qo.push(Ye+`};
`),A=G0(Qo)(...g0),he=`methodCaller<(${ee.map(I0=>I0.name).join(", ")}) => ${Ie.name}>`,ir(z0(he,A))},s:function(A,ee){return ee>>>=0,A=Mg(A>>>0),ee=Mg(ee),$1(A[ee])},d:function(A){A>>>=0,9<A&&(y1[A+1]+=1)},v:function(){return $1([])},m:function(A){A=Mg(A>>>0);for(var ee=Array(A.length),he=0;he<A.length;he++)ee[he]=A[he];return $1(ee)},g:function(A){return $1(ag(A>>>0))},l:function(){return $1({})},i:function(A){A>>>=0;for(var ee=Mg(A);ee.length;){var he=ee.pop();ee.pop()(he)}wy(A)},h:function(A,ee,he){ee>>>=0,he>>>=0,A=Mg(A>>>0),ee=Mg(ee),he=Mg(he),A[ee]=he},e:function(A,ee){return ee>>>=0,A=Zy(A>>>0,"_emval_take_value"),A=A.readValueFromPointer(ee),$1(A)},ca:function(A,ee){A=-9007199254740992>A||9007199254740992<A?NaN:Number(A),ee>>>=0,A=new Date(1e3*A),s()[ee>>>2>>>0]=A.getUTCSeconds(),s()[ee+4>>>2>>>0]=A.getUTCMinutes(),s()[ee+8>>>2>>>0]=A.getUTCHours(),s()[ee+12>>>2>>>0]=A.getUTCDate(),s()[ee+16>>>2>>>0]=A.getUTCMonth(),s()[ee+20>>>2>>>0]=A.getUTCFullYear()-1900,s()[ee+24>>>2>>>0]=A.getUTCDay(),A=(A.getTime()-Date.UTC(A.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,s()[ee+28>>>2>>>0]=A},da:function(A,ee){A=-9007199254740992>A||9007199254740992<A?NaN:Number(A),ee>>>=0,A=new Date(1e3*A),s()[ee>>>2>>>0]=A.getSeconds(),s()[ee+4>>>2>>>0]=A.getMinutes(),s()[ee+8>>>2>>>0]=A.getHours(),s()[ee+12>>>2>>>0]=A.getDate(),s()[ee+16>>>2>>>0]=A.getMonth(),s()[ee+20>>>2>>>0]=A.getFullYear()-1900,s()[ee+24>>>2>>>0]=A.getDay();var he=(J0(A.getFullYear())?V_:D2)[A.getMonth()]+A.getDate()-1|0;s()[ee+28>>>2>>>0]=he,s()[ee+36>>>2>>>0]=-(60*A.getTimezoneOffset()),he=new Date(A.getFullYear(),6,1).getTimezoneOffset();var Ie=new Date(A.getFullYear(),0,1).getTimezoneOffset();A=(he!=Ie&&A.getTimezoneOffset()==Math.min(Ie,he))|0,s()[ee+32>>>2>>>0]=A},ea:function(A){A>>>=0;var ee=new Date(s()[A+20>>>2>>>0]+1900,s()[A+16>>>2>>>0],s()[A+12>>>2>>>0],s()[A+8>>>2>>>0],s()[A+4>>>2>>>0],s()[A>>>2>>>0],0),he=s()[A+32>>>2>>>0],Ie=ee.getTimezoneOffset(),Ye=new Date(ee.getFullYear(),6,1).getTimezoneOffset(),wn=new Date(ee.getFullYear(),0,1).getTimezoneOffset(),Pa=Math.min(wn,Ye);return 0>he?s()[A+32>>>2>>>0]=+(Ye!=wn&&Pa==Ie):0<he!=(Pa==Ie)&&(Ye=Math.max(wn,Ye),ee.setTime(ee.getTime()+6e4*((0<he?Pa:Ye)-Ie))),s()[A+24>>>2>>>0]=ee.getDay(),he=(J0(ee.getFullYear())?V_:D2)[ee.getMonth()]+ee.getDate()-1|0,s()[A+28>>>2>>>0]=he,s()[A>>>2>>>0]=ee.getSeconds(),s()[A+4>>>2>>>0]=ee.getMinutes(),s()[A+8>>>2>>>0]=ee.getHours(),s()[A+12>>>2>>>0]=ee.getDate(),s()[A+16>>>2>>>0]=ee.getMonth(),s()[A+20>>>2>>>0]=ee.getYear(),A=ee.getTime(),BigInt(isNaN(A)?-1:A/1e3)},aa:Nv,ba:Pv,R:function(A,ee,he,Ie){A>>>=0,ee>>>=0,he>>>=0,Ie>>>=0;var Ye=new Date().getFullYear(),wn=new Date(Ye,0,1),Pa=new Date(Ye,6,1);Ye=wn.getTimezoneOffset();var Qo=Pa.getTimezoneOffset(),g0=Math.max(Ye,Qo);u()[A>>>2>>>0]=60*g0,s()[ee>>>2>>>0]=+(Ye!=Qo),A=l0=>l0.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],wn=A(wn),Pa=A(Pa),Qo<Ye?(T1(wn,he,17),T1(Pa,Ie,17)):(T1(wn,Ie,17),T1(Pa,he,17))},q:()=>{B0("")},f:function(A,ee,he){return A>>>=0,ee=F2(ee>>>0,he>>>0),E0[A](...ee)},M:function(A,ee,he){return A>>>=0,ee=F2(ee>>>0,he>>>0),E0[A](...ee)},H:()=>{},L:()=>Date.now(),ra:()=>{throw u0+=1,"unwind"},T:function(){return 4294901760},u:()=>performance.timeOrigin+performance.now(),x:()=>Oe?(Ua(),sr(Ma)).cpus().length:navigator.hardwareConcurrency,Q:function(A){A>>>=0;var ee=l().length;if(A<=ee||4294901760<A)return!1;for(var he=1;4>=he;he*=2){var Ie=ee*(1+.2/he);Ie=Math.min(Ie,A+100663296);var Ye=Math;Ie=Math.max(A,Ie);e:{Ye=(Ye.min.call(Ye,4294901760,Ie+(65536-Ie%65536)%65536)-Ae.buffer.byteLength+65535)/65536;try{Ae.grow(Ye),eg();var wn=1;break e}catch{}wn=void 0}if(wn)return!0}return!1},ja:s2,la:Oy,Z:Ge,B:uw,J:Z_,ga:D1,I:U1,a:Ae||w.wasmMemory,ka:M1,r:function(A,ee,he,Ie){return M1(A>>>0,ee>>>0,he>>>0,Ie>>>0)}},m0=(function(){function A(he,Ie){return m0=he.exports,m0=Y1(),m0=jv(),ko.Qb.push(m0.cb),P0.unshift(m0.va),Be=Ie,U0(),m0}var ee={a:Yw};if(N0++,w.instantiateWasm)try{return w.instantiateWasm(ee,A)}catch(he){Ht(`Module.instantiateWasm callback failed with error: ${he}`),C(he)}return g1(ee,function(he){A(he.instance,he.module)}).catch(C),{}})(),L2=A=>(L2=m0.wa)(A);w.__embind_initialize_bindings=()=>(w.__embind_initialize_bindings=m0.xa)(),w._OrtInit=(A,ee)=>(w._OrtInit=m0.ya)(A,ee),w._OrtGetLastError=(A,ee)=>(w._OrtGetLastError=m0.za)(A,ee),w._OrtCreateSessionOptions=(A,ee,he,Ie,Ye,wn,Pa,Qo,g0,l0)=>(w._OrtCreateSessionOptions=m0.Aa)(A,ee,he,Ie,Ye,wn,Pa,Qo,g0,l0),w._OrtAppendExecutionProvider=(A,ee)=>(w._OrtAppendExecutionProvider=m0.Ba)(A,ee),w._OrtAddFreeDimensionOverride=(A,ee,he)=>(w._OrtAddFreeDimensionOverride=m0.Ca)(A,ee,he),w._OrtAddSessionConfigEntry=(A,ee,he)=>(w._OrtAddSessionConfigEntry=m0.Da)(A,ee,he),w._OrtReleaseSessionOptions=A=>(w._OrtReleaseSessionOptions=m0.Ea)(A),w._OrtCreateSession=(A,ee,he)=>(w._OrtCreateSession=m0.Fa)(A,ee,he),w._OrtReleaseSession=A=>(w._OrtReleaseSession=m0.Ga)(A),w._OrtGetInputOutputCount=(A,ee,he)=>(w._OrtGetInputOutputCount=m0.Ha)(A,ee,he),w._OrtGetInputName=(A,ee)=>(w._OrtGetInputName=m0.Ia)(A,ee),w._OrtGetOutputName=(A,ee)=>(w._OrtGetOutputName=m0.Ja)(A,ee),w._OrtFree=A=>(w._OrtFree=m0.Ka)(A),w._OrtCreateTensor=(A,ee,he,Ie,Ye,wn)=>(w._OrtCreateTensor=m0.La)(A,ee,he,Ie,Ye,wn),w._OrtGetTensorData=(A,ee,he,Ie,Ye)=>(w._OrtGetTensorData=m0.Ma)(A,ee,he,Ie,Ye),w._OrtReleaseTensor=A=>(w._OrtReleaseTensor=m0.Na)(A),w._OrtCreateRunOptions=(A,ee,he,Ie)=>(w._OrtCreateRunOptions=m0.Oa)(A,ee,he,Ie),w._OrtAddRunConfigEntry=(A,ee,he)=>(w._OrtAddRunConfigEntry=m0.Pa)(A,ee,he),w._OrtReleaseRunOptions=A=>(w._OrtReleaseRunOptions=m0.Qa)(A),w._OrtCreateBinding=A=>(w._OrtCreateBinding=m0.Ra)(A),w._OrtBindInput=(A,ee,he)=>(w._OrtBindInput=m0.Sa)(A,ee,he),w._OrtBindOutput=(A,ee,he,Ie)=>(w._OrtBindOutput=m0.Ta)(A,ee,he,Ie),w._OrtClearBoundOutputs=A=>(w._OrtClearBoundOutputs=m0.Ua)(A),w._OrtReleaseBinding=A=>(w._OrtReleaseBinding=m0.Va)(A),w._OrtRunWithBinding=(A,ee,he,Ie,Ye)=>(w._OrtRunWithBinding=m0.Wa)(A,ee,he,Ie,Ye),w._OrtRun=(A,ee,he,Ie,Ye,wn,Pa,Qo)=>(w._OrtRun=m0.Xa)(A,ee,he,Ie,Ye,wn,Pa,Qo),w._OrtEndProfiling=A=>(w._OrtEndProfiling=m0.Ya)(A),w._JsepOutput=(A,ee,he)=>(w._JsepOutput=m0.Za)(A,ee,he),w._JsepGetNodeName=A=>(w._JsepGetNodeName=m0._a)(A);var l2=w._pthread_self=()=>(l2=w._pthread_self=m0.$a)(),Fg=w._malloc=A=>(Fg=w._malloc=m0.ab)(A),S1=w._free=A=>(S1=w._free=m0.bb)(A);w.__emscripten_tls_init=()=>(w.__emscripten_tls_init=m0.cb)();var fw=w.__emscripten_thread_init=(A,ee,he,Ie,Ye,wn)=>(fw=w.__emscripten_thread_init=m0.eb)(A,ee,he,Ie,Ye,wn);w.__emscripten_thread_crashed=()=>(w.__emscripten_thread_crashed=m0.fb)();var Mv=(A,ee,he,Ie,Ye)=>(Mv=m0.gb)(A,ee,he,Ie,Ye),U2=A=>(U2=m0.hb)(A),Kw=w.__emscripten_thread_exit=A=>(Kw=w.__emscripten_thread_exit=m0.ib)(A),Xw=()=>(Xw=m0.jb)(),Fv=(A,ee)=>(Fv=m0.kb)(A,ee),B2=A=>(B2=m0.lb)(A),u2=A=>(u2=m0.mb)(A),I_=()=>(I_=m0.nb)(),pw=w.dynCall_ii=(A,ee)=>(pw=w.dynCall_ii=m0.pb)(A,ee),Qw=A=>(Qw=m0.qb)(A),Jw=()=>(Jw=m0.rb)(),hw=A=>(hw=m0.sb)(A),z2=()=>(z2=m0.tb)();w.___start_em_js=839500,w.___stop_em_js=839661;function jv(){var A=m0;A=Object.assign({},A);var ee=Ie=>Ye=>Ie(Ye)>>>0,he=Ie=>()=>Ie()>>>0;return A.wa=ee(A.wa),A.$a=he(A.$a),A.ab=ee(A.ab),A.emscripten_main_runtime_thread_id=he(A.emscripten_main_runtime_thread_id),A.mb=ee(A.mb),A.nb=he(A.nb),A}w.wasmMemory=Ae,w.stackSave=()=>I_(),w.stackRestore=A=>B2(A),w.stackAlloc=A=>u2(A),w.keepRuntimeAlive=()=>0<u0,w.UTF8ToString=Hr,w.stringToUTF8=T1,w.lengthBytesUTF8=Dg,w.ExitStatus=qg,w.PThread=ko;var mw;F0=function A(){mw||gw(),mw||(F0=A)};function gw(){if(!(0<N0))if(Ce)x(w),Ce||b0(P0),startWorker(w);else{if(w.preRun)for(typeof w.preRun=="function"&&(w.preRun=[w.preRun]);w.preRun.length;)p0.unshift(w.preRun.shift());b0(p0),0<N0||mw||(mw=!0,w.calledRun=!0,tr||(Ce||b0(P0),x(w),Ce||b0(_g)))}}return gw(),O}})();typeof t=="object"&&typeof e=="object"?e.exports=n:typeof define=="function"&&define.amd&&define([],()=>n)}),Ha=Er((t,e)=>{e.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),La,gc,Hi,Gi,Un,Ga,yc,bc,vc,Fa,Fe,Or=j(()=>{La=za(),gc=Va(),Gi=!1,Un=!1,Ga=!1,yc=t=>{if(t===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+t+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+t+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},bc=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},vc=(t,e)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":e?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Fa=async t=>{if(Gi)return Promise.resolve();if(Un)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Ga)throw new Error("previous call to 'initializeWebAssembly()' failed.");Un=!0;let e=t.initTimeout,n=t.numThreads,i=t.simd,o=yc(n),a=i&&bc(),l=t.wasmPaths,c=typeof l=="string"?l:void 0,p=vc(a,o),s=typeof l=="object"?l[p]:void 0,u=!1,d=[];if(e>0&&d.push(new Promise(g=>{setTimeout(()=>{u=!0,g()},e)})),d.push(new Promise((g,w)=>{let x=o?gc:La,C={locateFile:(O,Y)=>{if(o&&O.endsWith(".worker.js")&&typeof Blob<"u")return URL.createObjectURL(new Blob([Ha()],{type:"text/javascript"}));if(O.endsWith(".wasm")){if(s)return s;let q=c??Y;return p==="ort-wasm-simd.wasm"?q+"ort-wasm-simd.jsep.wasm":p==="ort-wasm-simd-threaded.wasm"?q+"ort-wasm-simd-threaded.jsep.wasm":q+p}return Y+O}};if(o)if(C.numThreads=n,typeof Blob>"u")C.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let O=`var ortWasmThreaded=${x.toString()};`;C.mainScriptUrlOrBlob=new Blob([O],{type:"text/javascript"})}x(C).then(O=>{Un=!1,Gi=!0,Hi=O,g()},O=>{Un=!1,Ga=!0,w(O)})})),await Promise.race(d),u)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},Fe=()=>{if(Gi&&Hi)return Hi;throw new Error("WebAssembly is not initialized yet.")}}),qe,Jr,We,Wn=j(()=>{Or(),qe=(t,e)=>{let n=Fe(),i=n.lengthBytesUTF8(t)+1,o=n._malloc(i);return n.stringToUTF8(t,o,i),e.push(o),o},Jr=(t,e,n,i)=>{if(typeof t=="object"&&t!==null){if(n.has(t))throw new Error("Circular reference in options");n.add(t)}Object.entries(t).forEach(([o,a])=>{let l=e?e+o:o;if(typeof a=="object")Jr(a,l+".",n,i);else if(typeof a=="string"||typeof a=="number")i(l,a.toString());else if(typeof a=="boolean")i(l,a?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof a}`)})},We=t=>{let e=Fe(),n=e.stackSave();try{let i=e.stackAlloc(8);e._OrtGetLastError(i,i+4);let o=e.HEAP32[i/4],a=e.HEAPU32[i/4+1],l=a?e.UTF8ToString(a):"";throw new Error(`${t} ERROR_CODE: ${o}, ERROR_MESSAGE: ${l}`)}finally{e.stackRestore(n)}}}),qa,ja=j(()=>{Or(),Wn(),qa=t=>{let e=Fe(),n=0,i=[],o=t||{};try{if(t?.logSeverityLevel===void 0)o.logSeverityLevel=2;else if(typeof t.logSeverityLevel!="number"||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(t?.logVerbosityLevel===void 0)o.logVerbosityLevel=0;else if(typeof t.logVerbosityLevel!="number"||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);t?.terminate===void 0&&(o.terminate=!1);let a=0;return t?.tag!==void 0&&(a=qe(t.tag,i)),n=e._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,a),n===0&&We("Can't create run options."),t?.extra!==void 0&&Jr(t.extra,"",new WeakSet,(l,c)=>{let p=qe(l,i),s=qe(c,i);e._OrtAddRunConfigEntry(n,p,s)!==0&&We(`Can't set a run config entry: ${l} - ${c}.`)}),[n,i]}catch(a){throw n!==0&&e._OrtReleaseRunOptions(n),i.forEach(l=>e._free(l)),a}}}),wc,$c,_c,xc,Ka,Ya=j(()=>{Or(),Wn(),wc=t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}},$c=t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}},_c=t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});let e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1"),t.executionProviders&&t.executionProviders.some(n=>(typeof n=="string"?n:n.name)==="webgpu")&&(t.enableMemPattern=!1)},xc=(t,e,n)=>{for(let i of e){let o=typeof i=="string"?i:i.name;switch(o){case"webnn":if(o="WEBNN",typeof i!="string"){let l=i;if(l?.deviceType){let c=qe("deviceType",n),p=qe(l.deviceType,n);Fe()._OrtAddSessionConfigEntry(t,c,p)!==0&&We(`Can't set a session config entry: 'deviceType' - ${l.deviceType}.`)}if(l?.numThreads){let c=l.numThreads;(typeof c!="number"||!Number.isInteger(c)||c<0)&&(c=0);let p=qe("numThreads",n),s=qe(c.toString(),n);Fe()._OrtAddSessionConfigEntry(t,p,s)!==0&&We(`Can't set a session config entry: 'numThreads' - ${l.numThreads}.`)}if(l?.powerPreference){let c=qe("powerPreference",n),p=qe(l.powerPreference,n);Fe()._OrtAddSessionConfigEntry(t,c,p)!==0&&We(`Can't set a session config entry: 'powerPreference' - ${l.powerPreference}.`)}}break;case"webgpu":if(o="JS",typeof i!="string"){let l=i;if(l?.preferredLayout){if(l.preferredLayout!=="NCHW"&&l.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${l.preferredLayout}`);let c=qe("preferredLayout",n),p=qe(l.preferredLayout,n);Fe()._OrtAddSessionConfigEntry(t,c,p)!==0&&We(`Can't set a session config entry: 'preferredLayout' - ${l.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${o}`)}let a=qe(o,n);Fe()._OrtAppendExecutionProvider(t,a)!==0&&We(`Can't append execution provider: ${o}.`)}},Ka=t=>{let e=Fe(),n=0,i=[],o=t||{};_c(o);try{let a=wc(o.graphOptimizationLevel??"all"),l=$c(o.executionMode??"sequential"),c=typeof o.logId=="string"?qe(o.logId,i):0,p=o.logSeverityLevel??2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);let s=o.logVerbosityLevel??0;if(!Number.isInteger(s)||s<0||s>4)throw new Error(`log verbosity level is not valid: ${s}`);let u=typeof o.optimizedModelFilePath=="string"?qe(o.optimizedModelFilePath,i):0;if(n=e._OrtCreateSessionOptions(a,!!o.enableCpuMemArena,!!o.enableMemPattern,l,!!o.enableProfiling,0,c,p,s,u),n===0&&We("Can't create session options."),o.executionProviders&&xc(n,o.executionProviders,i),o.enableGraphCapture!==void 0){if(typeof o.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${o.enableGraphCapture}`);let d=qe("enableGraphCapture",i),g=qe(o.enableGraphCapture.toString(),i);e._OrtAddSessionConfigEntry(n,d,g)!==0&&We(`Can't set a session config entry: 'enableGraphCapture' - ${o.enableGraphCapture}.`)}if(o.freeDimensionOverrides)for(let[d,g]of Object.entries(o.freeDimensionOverrides)){if(typeof d!="string")throw new Error(`free dimension override name must be a string: ${d}`);if(typeof g!="number"||!Number.isInteger(g)||g<0)throw new Error(`free dimension override value must be a non-negative integer: ${g}`);let w=qe(d,i);e._OrtAddFreeDimensionOverride(n,w,g)!==0&&We(`Can't set a free dimension override: ${d} - ${g}.`)}return o.extra!==void 0&&Jr(o.extra,"",new WeakSet,(d,g)=>{let w=qe(d,i),x=qe(g,i);e._OrtAddSessionConfigEntry(n,w,x)!==0&&We(`Can't set a session config entry: ${d} - ${g}.`)}),[n,i]}catch(a){throw n!==0&&e._OrtReleaseSessionOptions(n),i.forEach(l=>e._free(l)),a}}}),Li,Yt,cr,Nn,en,Vn,Fi,ye=j(()=>{Li=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},Yt=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},cr=t=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][t],Nn=t=>{switch(t){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}},en=t=>{switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${t}`)}},Vn=t=>t==="float32"||t==="float16"||t==="int32"||t==="int64"||t==="uint32"||t==="uint8"||t==="bool",Fi=t=>{switch(t){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${t}`)}}}),tn,qi=j(()=>{tn=async t=>{if(typeof t=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(t))}catch(e){if(e.code==="ERR_FS_FILE_TOO_LARGE"){let n=(void 0)(t),i=[];for await(let o of n)i.push(o);return new Uint8Array(Buffer.concat(i))}throw e}else{let e=await fetch(t);if(!e.ok)throw new Error(`failed to load external data file: ${t}`);let n=e.headers.get("Content-Length"),i=n?parseInt(n,10):0;if(i<1073741824)return new Uint8Array(await e.arrayBuffer());{if(!e.body)throw new Error(`failed to load external data file: ${t}, no response body.`);let o=e.body.getReader(),a;try{a=new ArrayBuffer(i)}catch(c){if(c instanceof RangeError){let p=Math.ceil(i/65536);a=new WebAssembly.Memory({initial:p,maximum:p}).buffer}else throw c}let l=0;for(;;){let{done:c,value:p}=await o.read();if(c)break;let s=p.byteLength;new Uint8Array(a,l,s).set(p),l+=s}return new Uint8Array(a,0,i)}}else return t instanceof Blob?new Uint8Array(await t.arrayBuffer()):t instanceof Uint8Array?t:new Uint8Array(t)}}),Sc,Cc,Xa,Za,Qa,Ic,Ne,Xt=j(()=>{ye(),Sc=["V","I","W","E","F"],Cc=(t,e)=>{console.log(`[${Sc[t]},${new Date().toISOString()}]${e}`)},Qa=(t,e)=>{Xa=t,Za=e},Ic=(t,e)=>{let n=en(t),i=en(Xa);n>=i&&Cc(n,typeof e=="function"?e():e)},Ne=(...t)=>{Za&&Ic(...t)}}),Ja,es=j(()=>{ye(),Ja=(t,e)=>new(Nn(e))(t)}),Hn=j(()=>{}),ts,ji,Ki,Tc,Ac,rs,Xi,Yi,is,os=j(()=>{Xt(),Hn(),ts=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),ji=[],Ki=t=>Math.ceil(t/16)*16,Tc=t=>{for(let e=0;e<ji.length;e++){let n=ji[e];if(t<=n)return n}return Math.ceil(t/16)*16},Ac=1,rs=()=>Ac++,Xi=async(t,e,n,i)=>{let o=Ki(n),a=t.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let l=t.getCommandEncoder();t.endComputePass(),l.copyBufferToBuffer(e,0,a,0,o),t.flush(),await a.mapAsync(GPUMapMode.READ);let c=a.getMappedRange();if(i){let p=i();return p.set(new Uint8Array(c,0,n)),p}else return new Uint8Array(c.slice(0,n))}finally{a.destroy()}},Yi=class{constructor(t){this.backend=t,this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[],this.externalBuffers=new Map,this.capturedPendingBuffers=new Map;for(let[e]of ts)ji.push(e),this.freeBuffers.set(e,[]),this.freeUniformBuffers.set(e,[])}upload(t,e){let n=e.buffer,i=e.byteOffset,o=e.byteLength,a=Ki(o),l=this.storageCache.get(t);if(!l)throw new Error("gpu data for uploading does not exist");if(l.originalSize!==o)throw new Error(`inconsistent data size. gpu data size=${l.originalSize}, data size=${o}`);let c=this.backend.device.createBuffer({mappedAtCreation:!0,size:a,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),p=c.getMappedRange();new Uint8Array(p).set(new Uint8Array(n,i,o)),c.unmap();let s=this.backend.getCommandEncoder();this.backend.endComputePass(),s.copyBufferToBuffer(c,0,l.gpuData.buffer,0,a),Ne("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${t})`),this.buffersForUploadingPending.push(c)}memcpy(t,e){let n=this.storageCache.get(t);if(!n)throw new Error("source gpu data for memcpy does not exist");let i=this.storageCache.get(e);if(!i)throw new Error("destination gpu data for memcpy does not exist");if(n.originalSize!==i.originalSize)throw new Error("inconsistent source and destination gpu data size");let o=Ki(n.originalSize),a=this.backend.getCommandEncoder();this.backend.endComputePass(),a.copyBufferToBuffer(n.gpuData.buffer,0,i.gpuData.buffer,0,o)}registerExternalBuffer(t,e,n){let i;if(n){if(i=this.externalBuffers.get(n),i===void 0)throw new Error("previous buffer is not registered");if(t===n)return Ne("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${e}) => id=${i}, buffer is the same, skip.`),i;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.
             Please use the previous external buffer!`);this.externalBuffers.delete(n)}else i=rs();return this.storageCache.set(i,{gpuData:{id:i,type:0,buffer:t},originalSize:e}),this.externalBuffers.set(t,i),Ne("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${e}) => id=${i}, registered.`),i}unregisterExternalBuffer(t){let e=this.externalBuffers.get(t);e!==void 0&&(this.storageCache.delete(e),this.externalBuffers.delete(t),Ne("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${e}`))}create(t,e=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let n=Tc(t),i,o=(e&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,a=(e&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(o||a){let c=(o?this.freeBuffers:this.freeUniformBuffers).get(n);c?c.length>0?i=c.pop():i=this.backend.device.createBuffer({size:n,usage:e}):i=this.backend.device.createBuffer({size:n,usage:e})}else i=this.backend.device.createBuffer({size:n,usage:e});let l={id:rs(),type:0,buffer:i};return this.storageCache.set(l.id,{gpuData:l,originalSize:t}),Ne("verbose",()=>`[WebGPU] GpuDataManager.create(size=${t}) => id=${l.id}`),l}get(t){return this.storageCache.get(t)?.gpuData}release(t){let e=this.storageCache.get(t);if(!e)throw new Error("releasing data does not exist");return Ne("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${e.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(e.gpuData.buffer),e.originalSize}async download(t,e){let n=this.storageCache.get(t);if(!n)throw new Error("data does not exist");await Xi(this.backend,n.gpuData.buffer,n.originalSize,e)}refreshPendingBuffers(){for(let t of this.buffersForUploadingPending)t.destroy();if(this.buffersForUploadingPending=[],this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let t of this.buffersPending){let e=ts.get(t.size);if((t.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let n=this.freeBuffers.get(t.size)||[];e===void 0||n.length>=e?t.destroy():n.push(t)}else if((t.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let n=this.freeUniformBuffers.get(t.size)||[];e===void 0||n.length>=e?t.destroy():n.push(t)}else t.destroy()}this.buffersPending=[]}else{let t=this.capturedPendingBuffers.get(this.backend.currentSessionId);t||(t=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,t));for(let e of this.buffersPending)t.push(e);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(t=>{t.forEach(e=>{e.destroy()})}),this.freeUniformBuffers.forEach(t=>{t.forEach(e=>{e.destroy()})}),this.storageCache.forEach(t=>{t.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(t=>{t.forEach(e=>{e.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onReleaseSession(t){let e=this.capturedPendingBuffers.get(t);e&&(e.forEach(n=>{n.destroy()}),this.capturedPendingBuffers.delete(t))}},is=(...t)=>new Yi(...t)}),Zi,we,Ze=j(()=>{Zi=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},we=t=>new Zi(t)}),Qi,zt,M,pr,Gn,Ln,Fn,xe=j(()=>{Qi=class{static calcMatMulShape(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]}},zt=class{static calcShape(t,e,n=!1){let i=t.length,o=e.length;if(i===0)return e;if(o===0)return t;let a=Math.max(t.length,e.length),l=new Array(a);if(n){if(i<2||o<2)return;let c=Qi.calcMatMulShape([t[i-2],t[i-1]],[e[o-2],e[o-1]]);if(c===void 0)return;[l[a-2],l[a-1]]=c}for(let c=n?3:1;c<=a;c++){let p=i-c<0?1:t[i-c],s=o-c<0?1:e[o-c];if(p!==s&&p>1&&s>1)return;let u=Math.max(p,s);if(p&&s)l[a-c]=Math.max(p,s);else{if(u>1)return;l[a-c]=0}}return l}static isValidBroadcast(t,e){let n=t.length,i=e.length;if(n>i)return!1;for(let o=1;o<=n;o++)if(t[n-o]!==1&&t[n-o]!==e[i-o])return!1;return!0}},M=class l${static size(e){return l$.getSizeFromDimensionRange(e,0,e.length)}static convertShape(e,n=4){let i=e.length;if(i===0)return[];let o=new Array(i),a=i-1;for(;a>=0;){if(e[a]%n===0){o[a]=e[a]/n;break}if(n%e[a]!==0)throw new Error("cannot convert shape");o[a]=1,n/=e[a],a--}for(a--;a>=0;a--)o[a]=e[a];return o}static sizeFromDimension(e,n){if(n<0||n>e.length)throw new Error(`invalid dimension of ${n} for sizeFromDimension as Tensor has ${e.length} dimensions.`);return l$.getSizeFromDimensionRange(e,n,e.length)}static sizeToDimension(e,n){if(n<0||n>e.length)throw new Error(`invalid dimension of ${n} for sizeToDimension as Tensor has ${e.length} dimensions.`);return l$.getSizeFromDimensionRange(e,0,n)}static getSizeFromDimensionRange(e,n,i){let o=1;for(let a=n;a<i;a++){if(e[a]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");o*=e[a]}return o}static computeStrides(e){let n=e.length;if(n===0)return[];if(n===1)return[1];let i=new Array(n);i[n-1]=1,i[n-2]=e[n-1];for(let o=n-3;o>=0;--o)i[o]=i[o+1]*e[o+1];return i}static normalizeAxis(e,n){if(e<-n&&e>=n)throw new Error("unsupported axis for this operation.");return e<0?e+n:e}static normalizeAxes(e,n){return e.map(i=>this.normalizeAxis(i,n??e.length))}static sortBasedOnPerm(e,n){return n?n.map(i=>e[i]):e.slice().reverse()}static padShape(e,n){let i=e.length;return e.map((o,a)=>o+n[a]+n[a+i])}static areEqual(e,n){return e.length!==n.length?!1:e.every((i,o)=>i===n[o])}},pr=class nT{static adjustPoolAttributes(e,n,i,o,a,l){if(!e&&i.length!==n.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(let c=0;c<n.length-2;c++)c>=i.length?i.push(n[c+2]):i[c]=n[c+2];for(let c=0;c<i.length;c++)if(c<o.length){if(o[c]<0)throw new Error("strides should be greater than or equal to 1")}else o.push(1);for(let c=0;c<i.length;c++)if(c<a.length){if(a[c]<0)throw new Error("dilations should be greater than or equal to 1")}else a.push(1);for(let c=0;c<i.length*2;c++)if(c<l.length){if(l[c]<0)throw new Error("pad should be greater than or equal to 1")}else l.push(0);for(let c=0;c<i.length;c++){if(i[c]<=0)throw new Error("kernel shapes need to be greater than 0");if(l[c]>=i[c]||l[c+i.length]>=i[c])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(e,n,i,o,a,l,c){if(c){if(a.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let p=0;p<e.length-2;p++)nT.adjustPadAndReturnShape(e[p+(l?1:2)],n[p],i[p],o[p],a,p,p+e.length-2,c)}}static computePoolOutputShape(e,n,i,o,a,l,c){if(n.length<=0)throw new Error("input shape must be of size greater than 0");let p=[n[0],n[1]];return nT.computeShapeHelper(e,n,p,i,o,a,l,c),p}static computeConvOutputShape(e,n,i,o,a,l,c){if(e.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let p=[e[0],n[0]];return nT.computeShapeHelper(!1,e,p,i,o,a,l,c),p}static computeShapeHelper(e,n,i,o,a,l,c,p){if(e)for(let s=0;s<n.length-2;s++)i.push(1);else for(let s=0;s<n.length-2;s++)i.push(nT.adjustPadAndReturnShape(n[s+2],o[s],a[s],l[s],c,s,s+n.length-2,p))}static adjustPadAndReturnShape(e,n,i,o,a,l,c,p){let s=i*(o-1)+1;if(p&&p!=="NOTSET")switch(p){case"VALID":return a[l]=0,a[c]=0,Math.floor((e-s)/n+1);case"SAME_LOWER":case"SAME_UPPER":if(i!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let u=((e+n-1)/n-1)*n+o-e;return a[l]=Math.floor(p==="SAME_LOWER"?(u+1)/2:u/2),a[c]=u-a[l],Math.floor((e+u-o)/n+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((e+a[l]+a[c]-s)/n+1)}},Gn=class{static getShapeOfGemmResult(t,e,n,i,o){if(t.length!==2||n.length!==2)throw new Error("shape need to be of size 2");let a,l,c;e?(a=t[1],l=t[0]):(a=t[0],l=t[1]);let p=-1;if(i?(c=n[0],p=1):(c=n[1],p=0),n[p]!==l)throw new Error("dimension mismatch");if(a<=0||c<=0||l<=0)throw new Error("invalid shape specified");if(o&&!zt.isValidBroadcast(o,[a,c]))throw new Error("gemm: invalid bias shape for broadcast");return[a,c,l]}},Ln=-34028234663852886e22,Fn=34028234663852886e22}),mr,eo,De,rt,X,Ue,At,fr,Et,fe,to$1,U,K,qn,Ji,as,Pr,_e=j(()=>{ye(),xe(),mr=64,eo=(t,e)=>{if(e===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(t){case 10:return e>1?`vec${e}<f16>`:"f16";case 1:return e>1?`vec${e}<f32>`:"f32";case 6:return e>1?`vec${e}<i32>`:"i32";case 12:return e>1?`vec${e}<u32>`:"u32";case 7:if(e>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(e>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(e!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error(`Unknown data type: ${t}`)}},De=(t,e=1)=>{let n=eo(t,e);return typeof n=="string"?n:n[0]},rt=(t,e=1)=>{let n=eo(t,e);return typeof n=="string"?n:n[1]},X=(...t)=>{let e=[];return t.forEach(n=>{n.length!==0&&e.push({type:12,data:n},{type:12,data:M.computeStrides(n)})}),e},Ue=t=>t%4===0?4:t%2===0?2:1,At=(t="f32",e,n="0")=>!e||e===1?`${t}(${n})`:`vec${e}<${t}>(${n})`,fr=(t,e,n)=>t==="f32"?n:e===1?`f32(${n})`:`vec${e}<f32>(${n})`,Et=(t,e)=>e===4?`(${t}.x + ${t}.y + ${t}.z + ${t}.w)`:e===2?`(${t}.x + ${t}.y)`:e===3?`(${t}.x + ${t}.y + ${t}.z)`:t,fe=(t,e,n,i)=>t.startsWith("uniforms.")&&n>4?typeof e=="string"?i==="f16"?`${t}[(${e}) / 8][(${e}) % 8 / 4][(${e}) % 8 % 4]`:`${t}[(${e}) / 4][(${e}) % 4]`:i==="f16"?`${t}[${Math.floor(e/8)}][${Math.floor(e%8/4)}][${e%8%4}]`:`${t}[${Math.floor(e/4)}][${e%4}]`:n>1?`${t}[${e}]`:t,to$1=(t,e,n,i,o)=>{let a=typeof n=="number",l=a?n:n.length,c=[...new Array(l).keys()],p=l<2?"u32":l<=4?`vec${l}<u32>`:`array<u32, ${l}>`,s=eo(e,o),u=typeof s=="string"?s:s[1],d=typeof s=="string"?s:s[0],g={indices:p,value:u,storage:d,tensor:e},w=Be=>typeof Be=="string"?Be:`${Be}u`,x={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},C=a?"uniforms.":"",O=`${C}${t}_shape`,Y=`${C}${t}_strides`,q="";for(let Be=0;Be<l-1;Be++)q+=`
    let dim${Be} = current / ${fe(Y,Be,l)};
    let rest${Be} = current % ${fe(Y,Be,l)};
    indices[${Be}] = dim${Be};
    current = rest${Be};
    `;q+=`indices[${l-1}] = current;`;let ue=l<2?"":`
  fn o2i_${t}(offset: u32) -> ${g.indices} {
    var indices: ${g.indices};
    var current = offset;
    ${q}
    return indices;
  }`,pe=Be=>(x.offsetToIndices=!0,l<2?Be:`o2i_${t}(${Be})`),se=[];if(l>=2)for(let Be=l-1;Be>=0;Be--)se.push(`${fe(Y,Be,l)} * (indices[${Be}])`);let Re=l<2?"":`
  fn i2o_${t}(indices: ${g.indices}) -> u32 {
    return ${se.join("+")};
  }`,Oe=Be=>(x.indicesToOffset=!0,l<2?Be:`i2o_${t}(${Be})`),Ce=(...Be)=>l===0?"0u":`${g.indices}(${Be.map(w).join(",")})`,He=(Be,tr)=>l<2?`${Be}`:`${fe(Be,tr,l)}`,$t=(Be,tr,No)=>l<2?`${Be}=${No};`:`${fe(Be,tr,l)}=${No};`,Sn={},xn=(Be,tr)=>{x.broadcastedIndicesToOffset=!0;let No=`${tr.name}broadcastedIndicesTo${t}Offset`;if(No in Sn)return`${No}(${Be})`;let ah=[];for(let Mo=l-1;Mo>=0;Mo--){let t0=tr.indicesGet("outputIndices",Mo+tr.rank-l);ah.push(`${He(Y,Mo)} * (${t0} % ${He(O,Mo)})`)}return Sn[No]=`fn ${No}(outputIndices: ${tr.type.indices}) -> u32 {
             return ${ah.length>0?ah.join("+"):"0u"};
           }`,`${No}(${Be})`},Lr=(Be,tr)=>(()=>{if(g.storage===g.value)return`${t}[${Be}]=${tr};`;if(g.storage==="vec2<u32>"&&g.value==="i32")return`${t}[${Be}]=vec2<u32>(u32(${tr}), select(0u, 0xFFFFFFFFu, ${tr} < 0));`;if(g.storage==="vec2<u32>"&&g.value==="u32")return`${t}[${Be}]=vec2<u32>(u32(${tr}), 0u);`;if(g.storage==="u32"&&g.value==="vec4<bool>")return`${t}[${Be}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${tr}));`;throw new Error(`not supported combination of storage type ${g.storage} and value type ${g.value} yet`)})(),jr=Be=>(()=>{if(g.storage===g.value)return`${t}[${Be}]`;if(g.storage==="vec2<u32>"&&g.value==="i32")return`i32(${t}[${Be}].x)`;if(g.storage==="vec2<u32>"&&g.value==="u32")return`u32(${t}[${Be}].x)`;if(g.storage==="u32"&&g.value==="vec4<bool>")return`vec4<bool>(bool(${t}[${Be}] & 0xFFu), bool(${t}[${Be}] & 0xFF00u), bool(${t}[${Be}] & 0xFF0000u), bool(${t}[${Be}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${g.storage} and value type ${g.value} yet`)})(),et=l<2?"":`
  fn get_${t}ByIndices(indices: ${g.indices}) -> ${u} {
    return ${jr(`i2o_${t}(indices)`)};
  }`,Ft=l<2?"":(()=>{let Be=c.map(No=>`d${No}: u32`).join(", "),tr=c.map(No=>`d${No}`).join(", ");return`
  fn get_${t}(${Be}) -> ${u} {
    return get_${t}ByIndices(${Ce(tr)});
  }`})(),Tt=(...Be)=>{if(Be.length!==l)throw new Error(`indices length must be ${l}`);let tr=Be.map(w).join(",");return l===0?jr("0u"):l===1?jr(tr[0]):(x.get=!0,x.getByIndices=!0,x.indicesToOffset=!0,`get_${t}(${tr})`)},ze=Be=>l<2?jr(Be):(x.getByIndices=!0,x.indicesToOffset=!0,`get_${t}ByIndices(${Be})`),Ht=l<2?"":`
  fn set_${t}ByIndices(indices: ${g.indices}, value: ${u}) {
    ${Lr(`i2o_${t}(indices)`,"value")}
  }`,Ae=l<2?"":(()=>{let Be=c.map(No=>`d${No}: u32`).join(", "),tr=c.map(No=>`d${No}`).join(", ");return`
  fn set_${t}(${Be}, value: ${u}) {
    set_${t}ByIndices(${Ce(tr)}, value);
  }`})();return{impl:()=>{let Be=[],tr=!1;return x.offsetToIndices&&(Be.push(ue),tr=!0),x.indicesToOffset&&(Be.push(Re),tr=!0),x.broadcastedIndicesToOffset&&(Object.values(Sn).forEach(No=>Be.push(No)),tr=!0),x.set&&(Be.push(Ae),tr=!0),x.setByIndices&&(Be.push(Ht),tr=!0),x.get&&(Be.push(Ft),tr=!0),x.getByIndices&&(Be.push(et),tr=!0),!a&&tr&&Be.unshift(`const ${O} = ${g.indices}(${n.join(",")});`,`const ${Y} = ${g.indices}(${M.computeStrides(n).join(",")});`),Be.join(`
`)},type:g,offsetToIndices:pe,indicesToOffset:Oe,broadcastedIndicesToOffset:xn,indices:Ce,indicesGet:He,indicesSet:$t,set:(...Be)=>{if(Be.length!==l+1)throw new Error(`indices length must be ${l}`);let tr=Be[l];if(typeof tr!="string")throw new Error("value must be string");let No=Be.slice(0,l).map(w).join(",");return l===0?Lr("0u",tr):l===1?Lr(No[0],tr):(x.set=!0,x.setByIndices=!0,x.indicesToOffset=!0,`set_${t}(${No}, ${tr})`)},setByOffset:Lr,setByIndices:(Be,tr)=>l<2?Lr(Be,tr):(x.setByIndices=!0,x.indicesToOffset=!0,`set_${t}ByIndices(${Be}, ${tr});`),get:Tt,getByOffset:jr,getByIndices:ze,usage:i,name:t,strides:Y,shape:O,rank:l}},U=(t,e,n,i=1)=>to$1(t,e,n,"input",i),K=(t,e,n,i=1)=>to$1(t,e,n,"output",i),qn=(t,e,n,i=1)=>to$1(t,e,n,"internal",i),Ji=class{constructor(t,e){this.normalizedDispatchGroup=t,this.limits=e,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(t){return`if (global_idx >= ${typeof t=="number"?`${t}u`:t}) { return; }`}mainStart(t=mr){let e=typeof t=="number"?t:t[0],n=typeof t=="number"?1:t[1],i=typeof t=="number"?1:t[2];if(e>this.limits.maxComputeWorkgroupSizeX||n>this.limits.maxComputeWorkgroupSizeY||i>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${e}, ${n}, ${i}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(e*n*i>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${e}, ${n}, ${i}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let o=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,a=o?`@builtin(global_invocation_id) global_id : vec3<u32>,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,
                                             @builtin(local_invocation_id) local_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(num_workgroups) num_workgroups : vec3<u32>`,l=o?"let global_idx = global_id.x; let local_idx = local_id.x;":`let global_idx = (workgroup_id.z * num_workgroups[0] * num_workgroups[1] +
          workgroup_id.y * num_workgroups[0] + workgroup_id.x) * ${e*n*i}u + local_idx;`;return`@compute @workgroup_size(${e}, ${n}, ${i})
  fn main(${a}) {
    ${l}
  `}appendVariableUniforms(t){t.rank!==0&&(t.shape.startsWith("uniforms.")&&this.uniforms.push({name:t.shape.replace("uniforms.",""),type:"u32",length:t.rank}),t.strides.startsWith("uniforms.")&&this.uniforms.push({name:t.strides.replace("uniforms.",""),type:"u32",length:t.rank}))}declareVariable(t,e){if(t.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(t),this.appendVariableUniforms(t);let n=t.usage==="input"?"read":"read_write",i=t.type.storage;return`@group(0) @binding(${e}) var<storage, ${n}> ${t.name}: array<${i}>;`}declareVariables(...t){return t.map(e=>this.declareVariable(e,this.variableIndex++)).join(`
`)}registerInternalVariable(t){if(t.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(t),this.appendVariableUniforms(t)}registerInternalVariables(...t){return t.forEach(e=>this.registerInternalVariable(e)),this}registerUniform(t,e,n=1){return this.uniforms.push({name:t,type:e,length:n}),this}registerUniforms(t){return this.uniforms=this.uniforms.concat(t),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let t=[];for(let{name:e,type:n,length:i}of this.uniforms)if(i&&i>4)n==="f16"?t.push(`@align(16) ${e}:array<mat2x4<${n}>, ${Math.ceil(i/8)}>`):t.push(`${e}:array<vec4<${n}>, ${Math.ceil(i/4)}>`);else{let o=i==null||i===1?n:`vec${i}<${n}>`;t.push(`${e}:${o}`)}return`
      struct Uniforms { ${t.join(", ")} };
      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(t=>t.impl()).join(`
`)+this.internalVariables.map(t=>t.impl()).join(`
`)}get variablesInfo(){if(this.uniforms.length===0)return;let t=e=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(e)];return this.uniforms.map(e=>[t(e.type),e.length??1])}},as=(t,e)=>new Ji(t,e),Pr=(t,e)=>{let n=t.length,i=[];for(let o=0;o<n;o++){let a=n-1-o,l=t[a]||1;(e[e.length-1-o]||1)>1&&l===1&&i.unshift(a)}return i}}),Ec,ss,kc,Oc,xt,us,ls,Rr=j(()=>{ye(),xe(),Ze(),_e(),Ec=t=>{if(!t||t.length!==1)throw new Error("Transpose requires 1 input.")},ss=(t,e)=>e&&e.length!==t?[...new Array(t).keys()].reverse():e,kc=(t,e)=>M.sortBasedOnPerm(t,ss(t.length,e)),Oc=(t,e,n,i)=>{let o=[];o.push(`fn perm(i: ${i.type.indices}) -> ${n.type.indices} {
    var a: ${n.type.indices};`);for(let a=0;a<e;++a)o.push(n.indicesSet("a",t[a],`i[${a}]`));return o.push("return a;}"),o.join(`
`)},xt=(t,e)=>{let n=t.dataType,i=t.dims.length,o=ss(i,e),a=kc(t.dims,o),l=K("output",n,a.length),c=U("a",n,i),p=s=>`
  ${s.registerUniform("output_size","u32").declareVariables(c,l)}

  ${Oc(o,i,c,l)}

  ${s.mainStart()}
    ${s.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${l.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${l.setByOffset("global_idx",c.getByIndices("aIndices"))}
  }`;return{name:"Transpose",shaderCache:{hint:`${e}`,inputDependencies:["rank"]},getRunData:s=>{let u=M.size(a);return{outputs:[{dims:a,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:[{type:12,data:u},...X(s[0].dims,a)]}},getShaderSource:p}},us=(t,e)=>{Ec(t.inputs),t.compute(xt(t.inputs[0],e.perm))},ls=t=>we({perm:t.perm})}),Pc,Rc,zc,Bc,Dc,Mc,Uc,Wc,Nc,Vc,Bt,ds,cs,ps,ms,fs,hs,gs,ys,bs,vs,ws=j(()=>{ye(),xe(),_e(),jn(),Rr(),Pc={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},Rc={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},zc={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},Bc={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Dc=(t,e)=>{let n=[];for(let i=e-t;i<e;++i)n.push(i);return n},Mc=(t,e)=>{let n=[],i=t.length;for(let a=0;a<i;a++)e.indexOf(a)===-1&&n.push(t[a]);let o=e.map(a=>t[a]);return[n,o]},Uc=(t,e)=>{let n=t.length+e.length,i=[],o=0;for(let a=0;a<n;a++)e.indexOf(a)===-1?i.push(t[o++]):i.push(1);return i},Wc=(t,e)=>{for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0},Nc=(t,e)=>{let n=[];if(!Wc(t,e)){for(let i=0;i<e;++i)t.indexOf(i)===-1&&n.push(i);t.forEach(i=>n.push(i))}return n},Vc=(t,e,n,i,o,a,l)=>{let c=n[0].dims,p=M.size(a),s=M.size(l),u=U("_A",n[0].dataType,c),d=K("output",o,a),g=32,w=`
          var<workgroup> aBestValues : array<f32, ${g}>;
       `;return{name:t,shaderCache:e,getShaderSource:x=>`
        ${x.registerUniform("reduceSize","u32").declareVariables(u,d)}
        ${w}
        fn DIV_CEIL(a : u32, b : u32) -> u32 {
          return ((a - 1u) / b + 1u);
         }
         ${x.mainStart(g)}

          let outputIndex = global_idx / ${g};
          let offset = outputIndex * uniforms.reduceSize;

          var bestValue = f32(${zc[i]});
          let Length = uniforms.reduceSize;
          for (var k = local_idx; k < Length; k = k + ${g}) {
           let candidate = f32(${u.getByOffset("offset + k")});
           bestValue = ${Pc[i]};
          }
          aBestValues[local_idx] = bestValue;
          workgroupBarrier();

         var reduceSize = min(Length, ${g}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (local_idx < currentSize) {
            let candidate = aBestValues[local_idx + interval];
            bestValue = ${Rc[i]};
            aBestValues[local_idx] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (local_idx == 0u) {
          ${d.setByOffset("outputIndex",`${i==="mean"?`${d.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${d.type.storage}(${Bc[i]})`}`)};
         }
        }`,getRunData:()=>({outputs:[{dims:a,dataType:o}],dispatchGroup:{x:p},programUniforms:[{type:12,data:s}]})}},Bt=(t,e,n,i)=>{let o=t.inputs.length===1?n:ro(t.inputs,n),a=o.axes;a.length===0&&!o.noopWithEmptyAxes&&(a=t.inputs[0].dims.map((w,x)=>x));let l=M.normalizeAxes(a,t.inputs[0].dims.length),c=l,p=t.inputs[0],s=Nc(c,t.inputs[0].dims.length);s.length>0&&(p=t.compute(xt(t.inputs[0],s),{inputs:[0],outputs:[-1]})[0],c=Dc(c.length,p.dims.length));let[u,d]=Mc(p.dims,c),g=u;o.keepDims&&(g=Uc(u,l)),t.compute(Vc(e,{hint:o.cacheKey,inputDependencies:["type"]},[p],i,t.inputs[0].dataType,g,d),{inputs:[p]})},ds=(t,e)=>{Bt(t,"ReduceMeanShared",e,"mean")},cs=(t,e)=>{Bt(t,"ReduceL1Shared",e,"l1")},ps=(t,e)=>{Bt(t,"ReduceL2Shared",e,"l2")},ms=(t,e)=>{Bt(t,"ReduceLogSumExpShared",e,"logSumExp")},fs=(t,e)=>{Bt(t,"ReduceMaxShared",e,"max")},hs=(t,e)=>{Bt(t,"ReduceMinShared",e,"min")},gs=(t,e)=>{Bt(t,"ReduceProdShared",e,"prod")},ys=(t,e)=>{Bt(t,"ReduceSumShared",e,"sum")},bs=(t,e)=>{Bt(t,"ReduceSumSquareShared",e,"sumSquare")},vs=(t,e)=>{Bt(t,"ReduceLogSumShared",e,"logSum")}}),Dt,Hc,Kn,ro,Mt,Gc,Lc,Fc,qc,jc,Kc,Yc,Xc,Zc,Qc,Ut,$s,_s,xs,Ss,Cs,Is,Ts,As,Es,ks,jn=j(()=>{ye(),xe(),Ze(),_e(),ws(),Dt=t=>{if(!t||t.length===0||t.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(t.length===2&&t[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Hc=t=>["","",`var value = ${t.getByIndices("input_indices")};`,""],Kn=(t,e,n,i,o,a,l=!1,c=!1)=>{let p=[],s=n[0].dims,u=s.length,d=M.normalizeAxes(o,u),g=!c&&d.length===0;s.forEach((C,O)=>{g||d.indexOf(O)>=0?l&&p.push(1):p.push(C)});let w=p.length,x=M.size(p);return{name:t,shaderCache:e,getShaderSource:C=>{let O=[],Y=U("_A",n[0].dataType,u),q=K("output",a,w),ue=i(Y,q,d),pe=ue[2];for(let se=0,Re=0;se<u;se++)g||d.indexOf(se)>=0?(l&&Re++,pe=`for(var j${se}: u32 = 0; j${se} < ${s[se]}; j${se}++) {
                  ${ue[2].includes("last_index")?`let last_index = j${se};`:""}
                  ${Y.indicesSet("input_indices",se,`j${se}`)}
                  ${pe}
                }`):(O.push(`${Y.indicesSet("input_indices",se,q.indicesGet("output_indices",Re))};`),Re++);return`

        ${C.registerUniform("output_size","u32").declareVariables(Y,q)}

        ${C.mainStart()}
          ${C.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var input_indices: ${Y.type.indices};
          let output_indices = ${q.offsetToIndices("global_idx")};

          ${O.join(`
`)}
          ${ue[0]}       // init ops for reduce max/min
          ${ue[1]}
          ${pe}
          ${ue[3]}
          ${ue.length===4?q.setByOffset("global_idx","value"):ue.slice(4).join(`
`)}
        }`},getRunData:()=>({outputs:[{dims:p,dataType:a}],dispatchGroup:{x:Math.ceil(x/64)},programUniforms:[{type:12,data:x},...X(s,p)]})}},ro=(t,e)=>{let n=[];return t[1].dims[0]>0&&t[1].getBigInt64Array().forEach(i=>n.push(Number(i))),we({axes:n,keepDims:e.keepDims,noopWithEmptyAxes:e.noopWithEmptyAxes})},Mt=(t,e,n,i)=>{let o=t.inputs,a=o.length===1?n:ro(o,n);t.compute(Kn(e,{hint:a.cacheKey,inputDependencies:["rank"]},[o[0]],a.noopWithEmptyAxes&&a.axes.length===0?Hc:i,a.axes,o[0].dataType,a.keepDims,a.noopWithEmptyAxes),{inputs:[0]})},Gc=(t,e)=>{Dt(t.inputs),Mt(t,"ReduceLogSum",e,(n,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${n.getByIndices("input_indices")};`,"value = log(value);"])},Lc=(t,e)=>{Dt(t.inputs),Mt(t,"ReduceL1",e,(n,i)=>[`var value = ${i.type.storage}(0);`,"",`value += abs(${n.getByIndices("input_indices")});`,""])},Fc=(t,e)=>{Dt(t.inputs),Mt(t,"ReduceL2",e,(n,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${n.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},qc=(t,e)=>{Dt(t.inputs),Mt(t,"ReduceLogSumExp",e,(n,i)=>[`var value = ${i.type.storage}(0);`,"",`value += exp(${n.getByIndices("input_indices")});`,"value = log(value);"])},jc=(t,e)=>{Dt(t.inputs),Mt(t,"ReduceMax",e,(n,i,o)=>{let a=[];for(let l=0;l<n.rank;l++)(o.indexOf(l)>=0||o.length===0)&&a.push(n.indicesSet("input_indices",l,0));return[`${a.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};`,`value = max(value, ${n.getByIndices("input_indices")});`,""]})},Kc=(t,e)=>{Dt(t.inputs),Mt(t,"ReduceMean",e,(n,i,o)=>{let a=1;for(let l=0;l<n.rank;l++)(o.indexOf(l)>=0||o.length===0)&&(a*=t.inputs[0].dims[l]);return["var sum = f32(0);","",`sum += f32(${n.getByIndices("input_indices")});`,`let value = ${i.type.value}(sum / ${a});`]})},Yc=(t,e)=>{Dt(t.inputs),Mt(t,"ReduceMin",e,(n,i,o)=>{let a=[];for(let l=0;l<n.rank;l++)(o.indexOf(l)>=0||o.length===0)&&a.push(`input_indices[${l}] = 0;`);return[`${a.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};`,`value = min(value, ${n.getByIndices("input_indices")});`,""]})},Xc=(t,e)=>{Dt(t.inputs),Mt(t,"ReduceProd",e,(n,i)=>[`var value = ${i.type.storage}(1);`,"",`value *= ${n.getByIndices("input_indices")};`,""])},Zc=(t,e)=>{Dt(t.inputs),Mt(t,"ReduceSum",e,(n,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${n.getByIndices("input_indices")};`,""])},Qc=(t,e)=>{Dt(t.inputs),Mt(t,"ReduceSumSquare",e,(n,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${n.getByIndices("input_indices")}; value += t * t;`,""])},Ut=(t,e,n)=>{if(e.length===0)return n;let i=1,o=1;for(let a=0;a<e.length;a++)e.indexOf(a)===-1?i*=t[a]:o*=t[a];return o<32&&i>1024},$s=(t,e)=>{Ut(t.inputs[0].dims,e.axes,e.noopWithEmptyAxes)?Kc(t,e):ds(t,e)},_s=(t,e)=>{Ut(t.inputs[0].dims,e.axes,e.noopWithEmptyAxes)?Lc(t,e):cs(t,e)},xs=(t,e)=>{Ut(t.inputs[0].dims,e.axes,e.noopWithEmptyAxes)?Fc(t,e):ps(t,e)},Ss=(t,e)=>{Ut(t.inputs[0].dims,e.axes,e.noopWithEmptyAxes)?qc(t,e):ms(t,e)},Cs=(t,e)=>{Ut(t.inputs[0].dims,e.axes,e.noopWithEmptyAxes)?jc(t,e):fs(t,e)},Is=(t,e)=>{Ut(t.inputs[0].dims,e.axes,e.noopWithEmptyAxes)?Yc(t,e):hs(t,e)},Ts=(t,e)=>{Ut(t.inputs[0].dims,e.axes,e.noopWithEmptyAxes)?Xc(t,e):gs(t,e)},As=(t,e)=>{Ut(t.inputs[0].dims,e.axes,e.noopWithEmptyAxes)?Zc(t,e):ys(t,e)},Es=(t,e)=>{Ut(t.inputs[0].dims,e.axes,e.noopWithEmptyAxes)?Qc(t,e):bs(t,e)},ks=(t,e)=>{Ut(t.inputs[0].dims,e.axes,e.noopWithEmptyAxes)?Gc(t,e):vs(t,e)}}),Os,Ps,Rs,no,zs=j(()=>{ye(),Ze(),jn(),Os=t=>{if(!t||t.length===0||t.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(t[0].dataType!==1)throw new Error("Invalid input type.")},Ps=(t,e)=>{Os(t.inputs);let n=(i,o,a)=>{let l=[];for(let c=0;c<i.rank;c++)(a.indexOf(c)>=0||a.length===0)&&l.push(`input_indices[${c}] = 0;`);return[`${l.join(`
`)}`,`var value = ${i.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${i.getByIndices("input_indices")} ${e.selectLastIndex>0?"<=":"<"} value) {
         value = ${i.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",o.setByOffset("global_idx","best_index")]};t.compute(Kn("ArgMin",{hint:e.cacheKey,inputDependencies:["rank"]},[t.inputs[0]],n,[e.axis],7,e.keepDims),{inputs:[0]})},Rs=(t,e)=>{Os(t.inputs);let n=(i,o,a)=>{let l=[];for(let c=0;c<i.rank;c++)(a.indexOf(c)>=0||a.length===0)&&l.push(`input_indices[${c}] = 0;`);return[`${l.join(`
`)}`,`var value = ${i.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${i.getByIndices("input_indices")} ${e.selectLastIndex>0?">=":">"} value) {
         value = ${i.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",o.setByOffset("global_idx","best_index")]};t.compute(Kn("argMax",{hint:e.cacheKey,inputDependencies:["rank"]},[t.inputs[0]],n,[e.axis],7,e.keepDims),{inputs:[0]})},no=t=>we(t)}),Jc,ep,tp,Yn,Bs,Ds,io=j(()=>{ye(),xe(),Ze(),_e(),Jc=(t,e)=>{if(!t||t.length<1)throw new Error("too few inputs");let n=0,i=t[n],o=i.dataType,a=i.dims.length;t.forEach((l,c)=>{if(c!==n){if(l.dataType!==o)throw new Error("input tensors should be one type");if(l.dims.length!==a)throw new Error("input tensors should have the same shape");l.dims.forEach((p,s)=>{if(s!==e&&p!==i.dims[s])throw new Error("non concat dimensions must match")})}})},ep=(t,e)=>`
  fn calculateInputIndex(index: u32) -> u32 {
    let sizeInConcatAxis = array<u32, ${t}u>(${e});
    for (var i: u32 = 0u; i < ${t}; i += 1u ) {
      if (index < sizeInConcatAxis[i]) {
        return i;
      }
    }
    return ${t}u;
  }`,tp=(t,e)=>{let n=t.length,i=[];for(let o=0;o<n;++o){let a=e.setByOffset("global_idx",t[o].getByIndices("indices"));n===1?i.push(a):o===0?i.push(`if (inputIndex == ${o}u) { ${a} }`):o===n-1?i.push(`else { ${a} }`):i.push(`else if (inputIndex == ${o}) { ${a} }`)}return i.join(`
`)},Yn=(t,e,n,i)=>{let o=M.size(n),a=new Array(t.length),l=new Array(t.length),c=0,p=[],s=[],u=[{type:12,data:o}];for(let C=0;C<t.length;++C)c+=t[C].dims[e],a[C]=c,s.push(t[C].dims.length),l[C]=U(`input${C}`,i,s[C]),p.push("rank"),u.push({type:12,data:a[C]});for(let C=0;C<t.length;++C)u.push(...X(t[C].dims));u.push(...X(n));let d=K("output",i,n.length),g=d.indicesGet("indices",e),w=Array.from(Array(a.length).keys()).map(C=>`uniforms.sizeInConcatAxis${C}`).join(","),x=C=>`

  ${(()=>{C.registerUniform("outputSize","u32");for(let O=0;O<t.length;O++)C.registerUniform(`sizeInConcatAxis${O}`,"u32");return C.declareVariables(...l,d)})()}

  ${ep(a.length,w)}

  ${C.mainStart()}
    ${C.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

    var indices = ${d.offsetToIndices("global_idx")};

    let inputIndex = calculateInputIndex(${g});
    if (inputIndex != 0u) {
      let sizeInConcatAxis = array<u32, ${a.length}u>(${w});
      ${g} -= sizeInConcatAxis[inputIndex - 1u];
    }

    ${tp(l,d)}
  }`;return{name:"Concat",shaderCache:{hint:`${e}`,inputDependencies:p},getRunData:()=>({outputs:[{dims:n,dataType:i}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:u}),getShaderSource:x}},Bs=(t,e)=>{let n=t.inputs,i=n[0].dims,o=M.normalizeAxis(e.axis,i.length);Jc(n,o);let a=i.slice();a[o]=n.reduce((c,p)=>c+(p.dims.length>o?p.dims[o]:0),0);let l=n.filter(c=>M.size(c.dims)>0);t.compute(Yn(l,o,a,n[0].dataType),{inputs:l})},Ds=t=>we({axis:t.axis})}),rp,np,ip,op,Xn,ap,Ms,oo=j(()=>{ye(),Hn(),_e(),io(),rp=(t,e)=>{let n=t[0],i=t[1],o=t[2],a=t[3],l=t[4],c=t[5];if(l&&c)throw new Error("Attention cannot have both past and relative_position_bias");if(n.dims.length!==3)throw new Error('Input "input" must have 3 dimensions');let p=n.dims[0],s=n.dims[1],u=n.dims[2];if(o.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimensions');if(i.dims.length!==2)throw new Error('Input "weights" is expected to have 2 dimensions');if(i.dims[0]!==u)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(o.dims[0]!==i.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');let d=o.dims[0]/3,g=d,w=g;if(e.qkvHiddenSizes.length>0){if(e.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let ue of e.qkvHiddenSizes)if(ue%e.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");d=e.qkvHiddenSizes[0],g=e.qkvHiddenSizes[1],w=e.qkvHiddenSizes[2]}let x=s;if(d!==g)throw new Error("qkv_hidden_sizes first element should be same as the second");if(o.dims[0]!==d+g+w)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');let C=0;if(l){if(g!==w)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(l.dims.length!==5)throw new Error('Input "past" must have 5 dimensions');if(l.dims[0]!==2)throw new Error('Input "past" first dimension must be 2');if(l.dims[1]!==p)throw new Error('Input "past" second dimension must be batch_size');if(l.dims[2]!==e.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(l.dims[4]!==g/e.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');e.pastPresentShareBuffer||(C=l.dims[3])}let O=x+C,Y=-1,q=0;if(a)throw new Error("Mask not supported");if(l)throw new Error("past is not supported");return{batchSize:p,sequenceLength:s,pastSequenceLength:C,kvSequenceLength:x,totalSequenceLength:O,maxSequenceLength:Y,inputHiddenSize:u,hiddenSize:d,vHiddenSize:w,headSize:Math.floor(d/e.numHeads),vHeadSize:Math.floor(w/e.numHeads),numHeads:e.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:e.maskFilterValue,maskType:q,scale:e.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},np=(t,e,n,i)=>{let o=Ue(i),a=64,l=i/o;l<a?a=1:l/8<64&&(a=Math.ceil(l/8));let c=Math.ceil(i/o/a),p=[{type:e.dataType,data:1/i},{type:12,data:l},{type:12,data:c}],s=De(e.dataType,o),u=rt(1,o),d=g=>{let w=K("x",e.dataType,e.dims,o),x=[{name:"d_inv",type:rt(e.dataType)},{name:"d_comp",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`
  var<workgroup> thread_max: array<f32, ${a}>;
  var<workgroup> thread_sum: array<f32, ${a}>;
  ${g.registerUniforms(x).declareVariables(w)}
  ${g.mainStart([a,1,1])}
    let local_offset = local_idx * uniforms.elements_per_thread;
    let offset = workgroup_id.x * uniforms.d_comp + local_offset;

    var thread_max_vector = ${u}(-3.402823e+38f);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
      thread_max_vector = max(${u}(x[offset + i]), thread_max_vector);
    }
    thread_max[local_idx] = ${(()=>{switch(o){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${o}`)}})()};
    workgroupBarrier();

    var max_value =  f32(-3.402823e+38f);
    for (var i = 0u; i < ${a}; i++) {
      max_value = max(thread_max[i], max_value);
    }

    var sum_vector = ${u}(0);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
      sum_vector += exp(${u}(x[offset + i]) - max_value);
    }
    thread_sum[local_idx] = ${(()=>{switch(o){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${o}`)}})()};
    workgroupBarrier();

    var sum: f32 = 0;
    for (var i = 0u; i < ${a}; i++) {
      sum += thread_sum[i];
    }

    if (sum == 0) {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
        x[offset + i] = ${w.type.value}(uniforms.d_inv);
      }
    } else {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
        var f32input = ${u}(x[offset + i]);
        x[offset + i] = ${w.type.value}(exp(f32input - max_value) / sum);
      }
    }
  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${a};${s};${o}`},getShaderSource:d,getRunData:()=>({outputs:[],dispatchGroup:{x:n},programUniforms:p})}},ip=(t,e,n,i,o,a,l)=>{let c=l+o.kvSequenceLength,p=[o.batchSize,o.numHeads,o.sequenceLength,c],s=a.scale===0?1/Math.sqrt(o.headSize):a.scale,u=Ue(o.headSize),d=o.headSize/u,g=12,w={x:Math.ceil(c/g),y:Math.ceil(o.sequenceLength/g),z:o.batchSize*o.numHeads},x=[{type:12,data:o.sequenceLength},{type:12,data:d},{type:12,data:c},{type:12,data:o.numHeads},{type:1,data:s}],C=i?["type","type","type"]:["type","type"],O=Y=>{let q=U("q",e.dataType,e.dims,u),ue=U("key",n.dataType,n.dims,u),pe=[q,ue];i&&pe.push(U("relative_position_bias",i.dataType,i.dims));let se=K("output",e.dataType,p),Re=rt(1,u),Oe=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"alpha",type:"f32"}];return`
  const TILE_SIZE = ${g}u;

  var<workgroup> tileQ: array<${q.type.storage}, ${g*g}>;
  var<workgroup> tileK: array<${q.type.storage}, ${g*g}>;
  ${Y.registerUniforms(Oe).declareVariables(...pe,se)}
  ${Y.mainStart([g,g,1])}
    // x holds the N and y holds the M
    let headIdx = workgroup_id.z;
    let m = workgroup_id.y * TILE_SIZE;
    let n = workgroup_id.x * TILE_SIZE;
    let qOffset = uniforms.M * uniforms.K * headIdx + m * uniforms.K;
    let kOffset = uniforms.N * uniforms.K * headIdx + n * uniforms.K;

    var value = ${Re}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {
        tileK[TILE_SIZE * local_id.y + local_id.x] = key[kOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      workgroupBarrier();

      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
        value += ${Re}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);
      }

      workgroupBarrier();
    }

    let headOffset = headIdx * uniforms.M * uniforms.N;
    if (global_id.y < uniforms.M && global_id.x < uniforms.N) {
      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;
      var sum: f32 = ${(()=>{switch(u){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${u}`)}})()};
        output[outputIdx] = ${se.type.value} (sum * uniforms.alpha) + ${i?"relative_position_bias[outputIdx]":"0.0"};
    }
  }`};return{name:"AttentionProbs",shaderCache:{hint:`${u}`,inputDependencies:C},getRunData:()=>({outputs:[{dims:p,dataType:e.dataType,gpuDataType:0}],dispatchGroup:w,programUniforms:x}),getShaderSource:O}},op=(t,e,n,i,o)=>{let a=o+i.kvSequenceLength,l=[i.batchSize,i.sequenceLength,i.vHiddenSize],c=12,p={x:Math.ceil(i.vHeadSize/c),y:Math.ceil(i.sequenceLength/c),z:i.batchSize*i.numHeads},s=[{type:12,data:i.sequenceLength},{type:12,data:a},{type:12,data:i.vHeadSize},{type:12,data:i.numHeads},{type:12,data:i.vHiddenSize}];return{name:"AttentionScore",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:l,dataType:e.dataType,gpuDataType:0}],dispatchGroup:p,programUniforms:s}),getShaderSource:u=>{let d=U("probs",e.dataType,e.dims),g=U("v",n.dataType,n.dims),w=K("output",e.dataType,l),x=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"v_hidden_size",type:"u32"}];return`
  const TILE_SIZE = ${c}u;
  var<workgroup> tileQ: array<${d.type.value}, ${c*c}>;
  var<workgroup> tileK: array<${d.type.value}, ${c*c}>;
  ${u.registerUniforms(x).declareVariables(d,g,w)}
  ${u.mainStart([c,c,1])}
   let headIdx = workgroup_id.z;
   let m = global_id.y;
   let n = global_id.x;

   let offsetA = headIdx * (uniforms.M * uniforms.K) + m * uniforms.K;
   let offsetB = headIdx * (uniforms.N * uniforms.K) + n;

   var value = ${d.type.storage}(0);
   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
     if (m < uniforms.M && w + local_id.x < uniforms.K) {
       tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];
     }
     if (n < uniforms.N && w + local_id.y < uniforms.K) {
       tileK[TILE_SIZE * local_id.y + local_id.x] = v[offsetB + (w + local_id.y) * uniforms.N];
     }
     workgroupBarrier();
     for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
       value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * k + local_id.x];
     }
     workgroupBarrier();
   }

   // we need to transpose output from BNSH_v to BSND_v
   let batchIdx = workgroup_id.z / uniforms.num_heads;
   let currentBatchHeadNumber = workgroup_id.z % uniforms.num_heads;
   if (m < uniforms.M && n < uniforms.N) {
     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size
       + currentBatchHeadNumber * uniforms.N + n;
     output[outputIdx] = value;
   }
  }`}}},Xn=(t,e,n,i,o,a,l,c,p,s,u)=>{let d=t.outputCount>1,g=t.outputCount>2,w=d&&g?s.pastSequenceLength:0,x=w+s.kvSequenceLength,C=[s.batchSize,s.numHeads,x,s.headSize],O=l?[l,n]:[n],Y=d?t.compute(Yn(O,2,C,n.dataType),{inputs:O,outputs:[1]})[0]:n,q=[s.batchSize,s.numHeads,x,s.headSize],ue=c?[c,i]:[i],pe=g?t.compute(Yn(ue,2,q,i.dataType),{inputs:ue,outputs:[2]})[0]:i,se=[e,Y];p&&se.push(p);let Re=t.compute(ip(t,e,Y,p,s,u,w),{inputs:se,outputs:[-1]})[0];t.compute(np(t,Re,s.batchSize*s.numHeads*s.sequenceLength,x),{inputs:[Re],outputs:[]});let Oe=[Re,pe];t.compute(op(t,Re,pe,s,w),{inputs:Oe,outputs:[0]})},ap=(t,e)=>{let n=[e.batchSize,e.numHeads,e.sequenceLength,e.headSize],i=e.sequenceLength,o=e.inputHiddenSize,a=e.headSize,l=12,c={x:Math.ceil(e.headSize/l),y:Math.ceil(e.sequenceLength/l),z:e.batchSize*e.numHeads},p=[t.inputs[0],t.inputs[1],t.inputs[2]],s=[{type:12,data:i},{type:12,data:o},{type:12,data:a},{type:12,data:e.numHeads},{type:12,data:e.headSize},{type:12,data:e.hiddenSize},{type:12,data:e.hiddenSize+e.hiddenSize+e.vHiddenSize}],u=d=>{let g=K("output_q",p[0].dataType,n),w=K("output_k",p[0].dataType,n),x=K("output_v",p[0].dataType,n),C=U("input",p[0].dataType,p[0].dims),O=U("weight",p[1].dataType,p[1].dims),Y=U("bias",p[2].dataType,p[2].dims),q=C.type.storage,ue=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`
  const TILE_SIZE = ${l}u;
  var<workgroup> tileInput: array<${q}, ${l*l}>;
  var<workgroup> tileWeightQ: array<${q}, ${l*l}>;
  var<workgroup> tileWeightK: array<${q}, ${l*l}>;
  var<workgroup> tileWeightV: array<${q}, ${l*l}>;
  ${d.registerUniforms(ue).declareVariables(C,O,Y,g,w,x)}
  ${d.mainStart([l,l,1])}
    let batchIndex = workgroup_id.z / uniforms.num_heads;
    let headNumber = workgroup_id.z % uniforms.num_heads;
    let m = global_id.y;
    let n = global_id.x;

    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;
    let biasOffsetQ = headNumber * uniforms.head_size;
    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;
    let biasOffsetV = uniforms.hidden_size + biasOffsetK;

    var valueQ = ${q}(0);
    var valueK = ${q}(0);
    var valueV = ${q}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        let offset = n + (w + local_id.y) * uniforms.ldb;
        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];
        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];
        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];
      }
      workgroupBarrier();
      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {
        let inputTileOffset = TILE_SIZE * local_id.y + k;
        let weightTileOffset = TILE_SIZE * k + local_id.x;
        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];
        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];
        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];
      }

      workgroupBarrier();
    }

    let headOffset = (m * uniforms.N + n) % uniforms.head_size;
    valueQ += bias[headOffset + biasOffsetQ];
    valueK += bias[headOffset + biasOffsetK];
    valueV += bias[headOffset + biasOffsetV];

    let offset = workgroup_id.z * uniforms.M * uniforms.N;
    if (m < uniforms.M && n < uniforms.N) {
      let outputIdx = offset + m * uniforms.N + n;
      output_q[outputIdx] = valueQ;
      output_k[outputIdx] = valueK;
      output_v[outputIdx] = valueV;
    }
  }`};return t.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:n,dataType:t.inputs[0].dataType,gpuDataType:0},{dims:n,dataType:t.inputs[0].dataType,gpuDataType:0},{dims:n,dataType:t.inputs[0].dataType,gpuDataType:0}],dispatchGroup:c,programUniforms:s}),getShaderSource:u},{inputs:p,outputs:[-1,-1,-1]})},Ms=(t,e)=>{let n=rp(t.inputs,e),[i,o,a]=ap(t,n);return Xn(t,i,o,a,t.inputs[4],void 0,void 0,void 0,t.inputs[5],n,e)}}),sp,up,lp,Us,Ws=j(()=>{_t(),ye(),xe(),Ze(),_e(),sp=(t,e)=>{if(!t||t.length!==5)throw new Error("BatchNormalization requires 5 inputs");let n=(i,o,a)=>{let l=o.length;if(l!==i.length)throw new Error(`${a}: num dimensions != ${l}`);o.forEach((c,p)=>{if(c!==i[p])throw new Error(`${a}: dim[${p}] do not match`)})};if(t[0].dims.length>1){let i=e.format==="NHWC"?e.spatial?t[0].dims.slice(-1):t[0].dims.slice(-1).concat(t[0].dims.slice(1,t[0].dims.length-1)):t[0].dims.slice(1,e.spatial?2:void 0);n(t[1].dims,i,"Invalid input scale"),n(t[2].dims,i,"Invalid input B"),n(t[3].dims,i,"Invalid input mean"),n(t[4].dims,i,"Invalid input var")}else n(t[1].dims,[1],"Invalid input scale"),n(t[2].dims,[1],"Invalid input B"),n(t[3].dims,[1],"Invalid input mean"),n(t[4].dims,[1],"Invalid input var")},up=(t,e)=>{let{epsilon:n,spatial:i,format:o}=e,a=t[0].dims,l=i?Ue(a[a.length-1]):1,c=o==="NHWC"&&a.length>1?l:1,p=M.size(a)/l,s=i,u=s?a.length:a,d=U("x",t[0].dataType,t[0].dims,l),g=U("scale",t[1].dataType,t[1].dims,c),w=U("bias",t[2].dataType,t[2].dims,c),x=U("inputMean",t[3].dataType,t[3].dims,c),C=U("inputVar",t[4].dataType,t[4].dims,c),O=K("y",t[0].dataType,u,l),Y=()=>{let ue="";if(i)ue=`let cOffset = ${a.length===1?"0u":o==="NHWC"?`outputIndices[${a.length-1}] / ${l}`:"outputIndices[1]"};`;else if(o==="NCHW")ue=`
            ${O.indicesSet("outputIndices","0","0")}
            let cOffset = ${O.indicesToOffset("outputIndices")};`;else{ue=`var cIndices = ${g.type.indices}(0);
                       cIndices[0] = outputIndices[${a.length-1}];`;for(let pe=1;pe<g.rank;pe++)ue+=`cIndices[${pe}] = outputIndices[${pe}];`;ue+=`let cOffset = ${g.indicesToOffset("cIndices")};`}return ue},q=ue=>`
  const epsilon = ${n};
  ${ue.registerUniform("outputSize","u32").declareVariables(d,g,w,x,C,O)}
  ${ue.mainStart()}
  ${ue.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
    var outputIndices = ${O.offsetToIndices(`global_idx * ${l}`)};
    ${Y()}
    let scale = ${g.getByOffset("cOffset")};
    let bias = ${w.getByOffset("cOffset")};
    let inputMean = ${x.getByOffset("cOffset")};
    let inputVar = ${C.getByOffset("cOffset")};
    let x = ${d.getByOffset("global_idx")};
    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;
    ${O.setByOffset("global_idx","value")}
  }`;return{name:"BatchNormalization",shaderCache:{hint:`${e.epsilon}_${e.format}_${i}_${l}`,inputDependencies:s?["rank","type","type","type","type"]:void 0},getShaderSource:q,getRunData:()=>({outputs:[{dims:t[0].dims,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:s?[{type:12,data:p},...X(a)]:[{type:12,data:p}]})}},lp=t=>we(t),Us=(t,e)=>{let{inputs:n,outputCount:i}=t,o=lp({...e,outputCount:i});if(ke.webgpu.validateInputContent&&sp(n,o),e.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");t.compute(up(n,o))}}),dp,cp,Ns,Vs=j(()=>{xe(),_e(),dp=t=>{if(t[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(t[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(t[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(t[0].dims[2]!==t[1].dims[0])throw new Error("last dimension of input and bias are not the same")},cp=t=>{let e=t[0].dims,n=t[0].dims[2],i=M.size(e)/4,o=t[0].dataType,a=U("input",o,e,4),l=U("bias",o,[n],4),c=U("residual",o,e,4),p=K("output",o,e,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:e,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(i/64)}}),getShaderSource:s=>`
  const channels = ${n}u / 4;
  ${s.declareVariables(a,l,c,p)}

  ${s.mainStart()}
    ${s.guardAgainstOutOfBoundsWorkgroupSizes(i)}
    let value = ${a.getByOffset("global_idx")}
      + ${l.getByOffset("global_idx % channels")} + ${c.getByOffset("global_idx")};
    ${p.setByOffset("global_idx","value")}
  }`}},Ns=t=>{dp(t.inputs),t.compute(cp(t.inputs))}}),pp,Pe,Hs,Gs,Ls,Fs,qs,js,Ks,Ys,Xs,mp,Zs,Qs,Js,eu,Zn,tu,Qn,ru,nu,iu,ou,au,su,uu,lu,du,cu,pu,mu,fu,hu,gu,yu,bu,vu,ao,so,wu,$u,_u,Jn=j(()=>{ye(),xe(),Ze(),_e(),pp=(t,e,n,i,o,a)=>{let l=Math.ceil(e/4),c="";typeof o=="string"?c=`${o}(a)`:c=o("a");let p=U("inputData",n,[l],4),s=K("outputData",i,[l],4);return`
      ${t.registerUniform("vec_size","u32").declareVariables(p,s)}

  ${a??""}

  ${t.mainStart()}
    ${t.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}

    let a = ${p.getByOffset("global_idx")};
    ${s.setByOffset("global_idx",c)}
  }`},Pe=(t,e,n,i,o,a=t.dataType)=>({name:e,shaderCache:{hint:o,inputDependencies:["type"]},getShaderSource:l=>pp(l,M.size(t.dims),t.dataType,a,n,i),getRunData:l=>({outputs:[{dims:t.dims,dataType:a}],dispatchGroup:{x:Math.ceil(M.size(l[0].dims)/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size(t.dims)/4)}]})}),Hs=t=>{t.compute(Pe(t.inputs[0],"Abs","abs"))},Gs=t=>{t.compute(Pe(t.inputs[0],"Acos","acos"))},Ls=t=>{t.compute(Pe(t.inputs[0],"Acosh","acosh"))},Fs=t=>{t.compute(Pe(t.inputs[0],"Asin","asin"))},qs=t=>{t.compute(Pe(t.inputs[0],"Asinh","asinh"))},js=t=>{t.compute(Pe(t.inputs[0],"Atan","atan"))},Ks=t=>{t.compute(Pe(t.inputs[0],"Atanh","atanh"))},Ys=t=>we(t),Xs=(t,e)=>{let n;switch(e.to){case 10:n="vec4<f16>";break;case 1:n="vec4<f32>";break;case 12:n="vec4<u32>";break;case 6:n="vec4<i32>";break;case 9:n="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute 'to' from 'Cast' operator): ${e.to}`)}t.compute(Pe(t.inputs[0],"Cast",n,void 0,e.cacheKey,e.to))},mp=t=>{let e=t.length>=2&&t[1].data!==0?t[1].getFloat32Array()[0]:Ln,n=t.length>=3&&t[2].data!==0?t[2].getFloat32Array()[0]:Fn;return we({min:e,max:n})},Zs=(t,e)=>{let n=t.inputs.length===1?e:mp(t.inputs),i=rt(t.inputs[0].dataType);t.compute(Pe(t.inputs[0],"Clip",o=>`clamp(${o}, clip_min_, clip_max_)`,`
    const clip_min_: vec4<${i}> = vec4(${i}(${n.min}));
    const clip_max_: vec4<${i}> = vec4(${i}(${n.max}));
`,n.cacheKey),{inputs:[0]})},Qs=t=>{t.compute(Pe(t.inputs[0],"Ceil","ceil"))},Js=t=>{t.compute(Pe(t.inputs[0],"Cos","cos"))},eu=t=>{t.compute(Pe(t.inputs[0],"Cosh","cosh"))},Zn=t=>we(t),tu=(t,e)=>{let n=rt(t.inputs[0].dataType);t.compute(Pe(t.inputs[0],"Elu",i=>`elu_vf32(${i})`,`
  const elu_alpha_ = ${n}(${e.alpha});

  fn elu_f32(a: ${n}) -> ${n} {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<${n}>) -> vec4<${n}> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,e.cacheKey))},Qn=(t="f32")=>`
const r0: ${t} = 0.3275911;
const r1: ${t} = 0.254829592;
const r2: ${t} = -0.284496736;
const r3: ${t} = 1.421413741;
const r4: ${t} = -1.453152027;
const r5: ${t} = 1.061405429;

fn erf_vf32(v: vec4<${t}>) -> vec4<${t}> {
  let absv = abs(v);
  let x = 1.0 / (1.0 + r0 * absv);
  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
}`,ru=t=>{let e=rt(t.inputs[0].dataType);t.compute(Pe(t.inputs[0],"Erf",n=>`erf_vf32(${n})`,Qn(e)))},nu=t=>{t.compute(Pe(t.inputs[0],"Exp","exp"))},iu=t=>{t.compute(Pe(t.inputs[0],"Floor","floor"))},ou=t=>{let e=rt(t.inputs[0].dataType);t.compute(Pe(t.inputs[0],"Gelu",n=>`0.5 * ${n} * (1.0 + erf_vf32(${n} * 0.7071067811865475))`,Qn(e)))},au=(t,e)=>{let n=rt(t.inputs[0].dataType);t.compute(Pe(t.inputs[0],"LeakyRelu",i=>`select(leaky_relu_alpha_ * ${i}, ${i}, ${i} >= vec4<${n}>(0.0))`,`const leaky_relu_alpha_ = ${n}(${e.alpha});`,e.cacheKey))},su=t=>{t.compute(Pe(t.inputs[0],"Not",e=>`!${e}`))},uu=t=>{t.compute(Pe(t.inputs[0],"Neg",e=>`-${e}`))},lu=t=>{t.compute(Pe(t.inputs[0],"Reciprocal",e=>`1.0/${e}`))},du=t=>{let e=rt(t.inputs[0].dataType);t.compute(Pe(t.inputs[0],"Relu",n=>`select(vec4<${e}>(0.0), ${n}, ${n} > vec4<${e}>(0.0))`))},cu=t=>{t.compute(Pe(t.inputs[0],"Sigmoid",e=>`(1.0 / (1.0 + exp(-${e})))`))},pu=t=>we(t),mu=(t,e)=>{let n=rt(t.inputs[0].dataType);t.compute(Pe(t.inputs[0],"HardSigmoid",i=>`max(vec4<${n}>(0.0), min(vec4<${n}>(1.0), ${e.alpha} * ${i} + vec4<${n}>(${e.beta})))`,void 0,e.cacheKey))},fu=t=>{t.compute(Pe(t.inputs[0],"Sin","sin"))},hu=t=>{t.compute(Pe(t.inputs[0],"Sinh","sinh"))},gu=t=>{t.compute(Pe(t.inputs[0],"Sqrt","sqrt"))},yu=t=>{t.compute(Pe(t.inputs[0],"Tan","tan"))},bu=t=>`sign(${t}) * (1 - exp(-2 * abs(${t}))) / (1 + exp(-2 * abs(${t})))`,vu=t=>{t.compute(Pe(t.inputs[0],"Tanh",bu))},ao=(t="f32")=>`
const fast_gelu_a: ${t} = 0.5;
const fast_gelu_b: ${t} = 0.7978845608028654;
const fast_gelu_c: ${t} = 0.035677408136300125;

fn tanh_v(v: vec4<${t}>) -> vec4<${t}> {
  return ${bu("v")};
}
`,so=t=>`(fast_gelu_a + fast_gelu_a * tanh_v(${t} * (fast_gelu_c * ${t} * ${t} + fast_gelu_b))) * ${t}`,wu=t=>{let e=rt(t.inputs[0].dataType);t.compute(Pe(t.inputs[0],"FastGelu",so,ao(e),void 0,t.inputs[0].dataType))},$u=(t,e)=>{let n=rt(t.inputs[0].dataType);return t.compute(Pe(t.inputs[0],"ThresholdedRelu",i=>`select(vec4<${n}>(0.0), ${i}, ${i} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${n}>(${e.alpha});`,e.cacheKey)),0},_u=t=>{t.compute(Pe(t.inputs[0],"Log","log"))}}),fp,hp,Su,Cu=j(()=>{xe(),_e(),Jn(),fp=t=>{if(t[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(t[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(t[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(t[0].dims[2]!==t[1].dims[0])throw new Error("last dimension of input and bias are not the same")},hp=t=>{let e=t[0].dims.slice();e[2]=e[2]/2;let n=U("input",t[0].dataType,t[0].dims,4),i=U("bias",t[0].dataType,[t[0].dims[2]],4),o=K("output",t[0].dataType,e,4),a=M.size(e)/4,l=De(t[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:e,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)}}),getShaderSource:c=>`
  const M_SQRT2 = sqrt(2.0);
  const halfChannels = ${t[0].dims[2]/4/2}u;

  ${c.declareVariables(n,i,o)}

  ${Qn(l)}

  ${c.mainStart()}
    ${c.guardAgainstOutOfBoundsWorkgroupSizes(a)}
    let biasIdx = global_idx % halfChannels;
    let batchIndex = global_idx / halfChannels;
    let inputOffset = biasIdx + batchIndex * halfChannels * 2;
    let valueLeft = input[inputOffset] + bias[biasIdx];
    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];
    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);

    ${o.setByOffset("global_idx","valueLeft * geluRight")}
  }`}},Su=t=>{fp(t.inputs),t.compute(hp(t.inputs))}}),gp,yp,Wt,Iu,Tu,Au,Eu,ku,Ou,Pu,Ru,zu,Bu,Du=j(()=>{ye(),xe(),_e(),gp=(t,e,n,i,o,a,l,c,p,s,u,d)=>{let g,w;typeof c=="string"?g=w=(q,ue)=>`${c}((${q}),(${ue}))`:typeof c=="function"?g=w=c:(g=c.scalar,w=c.vector);let x=K("outputData",u,i.length,4),C=U("aData",p,e.length,4),O=U("bData",s,n.length,4),Y;if(o)if(a){let q=M.size(e)===1,ue=M.size(n)===1,pe=e.length>0&&e[e.length-1]%4===0,se=n.length>0&&n[n.length-1]%4===0;q||ue?Y=x.setByOffset("global_idx",w(q?`${C.type.value}(${C.getByOffset("0")}.x)`:C.getByOffset("global_idx"),ue?`${O.type.value}(${O.getByOffset("0")}.x)`:O.getByOffset("global_idx"))):Y=`
            let outputIndices = ${x.offsetToIndices("global_idx * 4u")};
            let offsetA = ${C.broadcastedIndicesToOffset("outputIndices",x)};
            let offsetB = ${O.broadcastedIndicesToOffset("outputIndices",x)};
            ${x.setByOffset("global_idx",w(l||pe?C.getByOffset("offsetA / 4u"):`${C.type.value}(${C.getByOffset("offsetA / 4u")}[offsetA % 4u])`,l||se?O.getByOffset("offsetB / 4u"):`${O.type.value}(${O.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}
          `}else Y=x.setByOffset("global_idx",w(C.getByOffset("global_idx"),O.getByOffset("global_idx")));else{if(!a)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let q=(ue,pe,se="")=>{let Re=`aData[indexA${pe}][componentA${pe}]`,Oe=`bData[indexB${pe}][componentB${pe}]`;return`
            let outputIndices${pe} = ${x.offsetToIndices(`global_idx * 4u + ${pe}u`)};
            let offsetA${pe} = ${C.broadcastedIndicesToOffset(`outputIndices${pe}`,x)};
            let offsetB${pe} = ${O.broadcastedIndicesToOffset(`outputIndices${pe}`,x)};
            let indexA${pe} = offsetA${pe} / 4u;
            let indexB${pe} = offsetB${pe} / 4u;
            let componentA${pe} = offsetA${pe} % 4u;
            let componentB${pe} = offsetB${pe} % 4u;
            ${ue}[${pe}] = ${se}(${g(Re,Oe)});
          `};u===9?Y=`
            var data = vec4<u32>(0);
            ${q("data",0,"u32")}
            ${q("data",1,"u32")}
            ${q("data",2,"u32")}
            ${q("data",3,"u32")}
            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:Y=`
            ${q("outputData[global_idx]",0)}
            ${q("outputData[global_idx]",1)}
            ${q("outputData[global_idx]",2)}
            ${q("outputData[global_idx]",3)}
          `}return`
        ${t.registerUniform("vec_size","u32").declareVariables(C,O,x)}

        ${d??""}

        ${t.mainStart()}
        ${t.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${Y}
      }`},yp=(t,e,n,i,o,a,l=n.dataType)=>{let c=!M.areEqual(n.dims,i.dims),p=n.dims,s=M.size(n.dims),u=!1,d=!1,g=[c];if(c){let w=zt.calcShape(n.dims,i.dims,!1);if(!w)throw new Error("Can't perform binary op on the given tensors");p=w,s=M.size(p);let x=M.size(n.dims)===1,C=M.size(i.dims)===1,O=n.dims.length>0&&n.dims[n.dims.length-1]%4===0,Y=i.dims.length>0&&i.dims[i.dims.length-1]%4===0;g.push(x),g.push(C),g.push(O),g.push(Y);let q=1;for(let ue=1;ue<p.length;ue++){let pe=n.dims[n.dims.length-ue]??1,se=i.dims[i.dims.length-ue]??1;if(pe===se)q*=pe;else break}q%4===0?(d=!0,u=!0):(x||C||O||Y)&&(u=!0)}else u=!0;return g.push(u),{name:t,shaderCache:{hint:e+g.map(w=>w.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:w=>gp(w,n.dims,i.dims,p,u,c,d,o,n.dataType,i.dataType,l,a),getRunData:()=>({outputs:[{dims:p,dataType:l}],dispatchGroup:{x:Math.ceil(s/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size(p)/4)},...X(n.dims,i.dims,p)]})}},Wt=(t,e,n,i,o,a)=>{t.compute(yp(e,o??"",t.inputs[0],t.inputs[1],n,i,a))},Iu=t=>{Wt(t,"Add",(e,n)=>`${e}+${n}`)},Tu=t=>{Wt(t,"Div",(e,n)=>`${e}/${n}`)},Au=t=>{Wt(t,"Equal",{scalar:(e,n)=>`u32(${e}==${n})`,vector:(e,n)=>`vec4<u32>(${e}==${n})`},void 0,void 0,9)},Eu=t=>{Wt(t,"Mul",(e,n)=>`${e}*${n}`)},ku=t=>{let e=U("input",t.inputs[0].dataType,t.inputs[0].dims).type.value;Wt(t,"Pow",{scalar:(n,i)=>`pow_custom(${n},${i})`,vector:(n,i)=>`pow_vector_custom(${n},${i})`},`
    fn pow_custom(a : ${e}, b : ${e}) -> ${e} {
      if (b == ${e}(0.0)) {
        return ${e}(1.0);
      } else if (a < ${e}(0.0) && f32(b) != floor(f32(b))) {
        return ${e}(pow(f32(a), f32(b))); // NaN
      }
      return select(sign(a), ${e}(1.0), round(f32(abs(b) % ${e}(2.0))) != 1.0) * ${e}(${e==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));
    }
    fn pow_vector_custom(a : vec4<${e}>, b : vec4<${e}>) -> vec4<${e}> {
      // TODO: implement vectorized pow
      return vec4<${e}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));
    }
      `)},Ou=t=>{Wt(t,"Sub",(e,n)=>`${e}-${n}`)},Pu=t=>{Wt(t,"Greater",{scalar:(e,n)=>`u32(${e}>${n})`,vector:(e,n)=>`vec4<u32>(${e}>${n})`},void 0,void 0,9)},Ru=t=>{Wt(t,"Less",{scalar:(e,n)=>`u32(${e}<${n})`,vector:(e,n)=>`vec4<u32>(${e}<${n})`},void 0,void 0,9)},zu=t=>{Wt(t,"GreaterOrEqual",{scalar:(e,n)=>`u32(${e}>=${n})`,vector:(e,n)=>`vec4<u32>(${e}>=${n})`},void 0,void 0,9)},Bu=t=>{Wt(t,"LessOrEqual",{scalar:(e,n)=>`u32(${e}<=${n})`,vector:(e,n)=>`vec4<u32>(${e}<=${n})`},void 0,void 0,9)}}),kt,Ot,Pt,ei,Zt=j(()=>{ye(),xe(),kt=(t,e,n="f32")=>{switch(t.activation){case"Relu":return`value = max(value, ${e}(0.0));`;case"Sigmoid":return`value = (${e}(1.0) / (${e}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${e}(${n}(uniforms.clip_min)), ${e}(${n}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${e}(0.0), min(${e}(1.0), ${n}(uniforms.alpha) * value + ${n}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${n}(uniforms.alpha) * value, value, value >= ${e}(0.0));`;case"":return"";default:throw new Error(`Unsupported activation ${t.activation}`)}},Ot=(t,e)=>{t.activation==="Clip"?e.push({type:1,data:t.clipMax},{type:1,data:t.clipMin}):t.activation==="HardSigmoid"?e.push({type:1,data:t.alpha},{type:1,data:t.beta}):t.activation==="LeakyRelu"&&e.push({type:1,data:t.alpha})},Pt=(t,e)=>{t.activation==="Clip"?e.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):t.activation==="HardSigmoid"?e.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):t.activation==="LeakyRelu"&&e.push({name:"alpha",type:"f32"})},ei=t=>{let e=t?.activation||"";if(e==="HardSigmoid"){let[n,i]=t?.activation_params||[.2,.5];return{activation:e,alpha:n,beta:i}}else if(e==="Clip"){let[n,i]=t?.activation_params||[Ln,Fn];return{activation:e,clipMax:i,clipMin:n}}else if(e==="LeakyRelu"){let[n]=t?.activation_params||[.01];return{activation:e,alpha:n}}return{activation:e}}}),nt,ti,ri=j(()=>{nt=(t,e)=>{switch(t){case 1:return e;case 2:return`vec2<${e}>`;case 3:return`vec3<${e}>`;case 4:return`vec4<${e}>`;default:throw new Error(`${t}-component is not supported.`)}},ti=t=>`
      ${t?"value = value + getBiasByOutputCoords(coords);":""}
      `}),ni,uo=j(()=>{ni=t=>`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    i32(${t}.x), i32(${t}.y), i32(${t}.z), 1));
}
`}),vp,wp,rn,Mu,$p,nn,_p,ii,on=j(()=>{ye(),xe(),_e(),Zt(),ri(),vp=(t,e)=>t?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol${e?", batchIndices":""});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol${e?", batchIndices":""});
        `,wp=(t,e)=>t?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${e===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${e===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${e===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`,rn=(t,e,n="f32",i,o=!1,a=32,l=!1,c=32)=>{let p=e[1]*t[1],s=e[0]*t[0],u=o?p:a,d=o?a:p,g=u/e[0],w=a/e[1];if(!((o&&g===4&&t[1]===4||!o&&(g===3||g===4))&&u%e[0]===0&&a%e[1]===0&&t[0]===4))throw new Error(`If transposeA ${o} is true, innerElementSize ${g} and workPerThread[1] ${t[1]} must be 4.
      Otherwise, innerElementSize ${g} must be 3 or 4.
  tileAWidth ${u} must be divisible by workgroupSize[0]${e[0]}. tileInner ${a} must be divisible by workgroupSize[1] ${e[1]}. colPerThread ${t[0]} must be 4.`);return`
var<workgroup> mm_Asub: array<array<vec${g}<${n}>, ${u/g}>, ${d}>;
var<workgroup> mm_Bsub: array<array<vec4<${n}>, ${s/t[0]}>, ${a}>;

const rowPerThread = ${t[1]};
const colPerThread = ${t[0]};
const innerElementSize = ${g};
const tileInner = ${a};

@compute @workgroup_size(${e[0]}, ${e[1]}, ${e[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = localRow * rowPerThread;
  let tileCol = i32(localId.x);

  let globalRow =i32(globalId.y) * rowPerThread;
  let globalCol = i32(globalId.x);
  let batch = ${l?"0":"i32(globalId.z)"};
  ${i?`let batchIndices = ${i.offsetToIndices("u32(batch)")};`:""}
  let globalRowStart = i32(workgroupId.y) * ${p};

  let num_tiles = ${l?`${Math.ceil(c/a)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
  var kStart = ${l?`i32(globalId.z) * ${c}`:"0"};

  var acc: array<vec4<${n}>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${w};
  for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${vp(o,i)}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${w}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${i?", batchIndices":""});
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${g===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${wp(o,g)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`},Mu=(t,e)=>t?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol${e?", batchIndices":""});
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol${e?", batchIndices":""});
            `,$p=t=>t?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",nn=(t,e,n="f32",i,o=!1,a=32,l=!1,c=32,p=!1)=>{let s=t[1]*e[1],u=t[0]*e[0],d=o?s:a,g=o?a:s;if(!(g%e[1]===0&&d%e[0]===0&&a%e[1]===0))throw new Error(`tileAHight ${g} must be divisible by workgroupSize[1]${e[1]}, tileAWidth ${d} must be divisible by workgroupSize[0]${e[0]}, tileInner ${a} must be divisible by workgroupSize[1]${e[1]}`);let w=g/e[1],x=d/e[0],C=a/e[1],O=p?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${s};
    let globalColStart = i32(workgroupId.x) * ${u};

    // Loop over shared dimension.
    for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${g}; inputRow = inputRow + ${e[1]}) {
        for (var inputCol = localCol; inputCol < ${d}; inputCol = inputCol + ${e[0]}) {
          ${Mu(o,i)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${a}; inputRow = inputRow + ${e[1]}) {
            for (var inputCol = localCol; inputCol < ${u}; inputCol = inputCol + ${e[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol${i?", batchIndices":""});
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<${n}, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${e[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${o?`mm_Asub[k][localRow + innerRow * ${e[1]}];`:`mm_Asub[localRow + innerRow * ${e[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${e[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${e[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${s};

let tileRowA = i32(localId.y) * ${w};
let tileColA = i32(localId.x) * ${x};
let tileRowB = i32(localId.y) * ${C};
// Loop over shared dimension.
for (var t = 0; t < num_tiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${w}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${x}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${Mu(o,i)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${C}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol${i?", batchIndices":""});
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<${n}, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${$p(o)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<${n}, ${d}>, ${g}>;
  var<workgroup> mm_Bsub : array<array<${n}, ${u}>, ${a}>;
  const rowPerThread = ${t[1]};
  const colPerThread = ${t[0]};
  const tileInner = ${a};

@compute @workgroup_size(${e[0]}, ${e[1]}, ${e[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${l?"0":"i32(globalId.z)"};
    ${i?`let batchIndices = ${i.offsetToIndices("u32(batch)")};`:""}
    let num_tiles = ${l?`${Math.ceil(c/a)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
    var kStart = ${l?`i32(globalId.z) * ${c}`:"0"};

    var acc : array<array<${n}, colPerThread>, rowPerThread>;

    // Without this initialization strange values show up in acc.
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = 0.0;
      }
    }
    ${O}
  }
`},_p=(t,e,n,i,o,a=!1)=>{let[l,c,p]=o,[s,u,d,g]=i,w=Pr(l,p),x=Pr(c,p),C=De(i[0].type.tensor),O=()=>{let q=u.rank,ue=s.rank,pe=`var aIndices: ${u.type.indices};`;for(let se=q-2-1,Re=ue-1;se>=0;se--,Re--)pe+=`
aIndices[${se}] = ${ue>1?`batchIndices[${Re}]`:"batchIndices"};`;return w.forEach(se=>{pe+=`
aIndices[${se}] = 0;`}),pe+=`
aIndices[${q-2}] = u32(row);
                   aIndices[${q-1}] = u32(colIn);`,pe},Y=()=>{let q=d.rank,ue=s.rank,pe=`var bIndices: ${d.type.indices};`;for(let se=q-2-1,Re=ue-1;se>=0;se--,Re--)pe+=`
bIndices[${se}] = ${ue>1?`batchIndices[${Re}]`:"batchIndices"};`;return x.forEach(se=>{pe+=`
bIndices[${se}] = 0;`}),pe+=`
bIndices[${q-2}] = u32(row);
                   bIndices[${q-1}] = u32(colIn);`,pe};return`
    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${s.type.indices}) -> ${nt(t,C)} {
      var value = ${nt(t,C)}(0.0);
      let col = colIn * ${t};
      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)
      {
        ${O()}
        value = ${u.getByIndices("aIndices")};
      }
      return value;
    }

    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${s.type.indices}) -> ${nt(t,C)} {
      var value = ${nt(t,C)}(0.0);
      let col = colIn * ${t};
      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)
      {
        ${Y()}
        value = ${d.getByIndices("bIndices")};
      }
      return value;
    }

    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${nt(t,C)}) {
      let col = colIn * ${t};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
        var value = valueIn;
        let coords = vec3<i32>(batch, row, colIn);
        ${e?`value = value + ${a?"bias[colIn]":`${nt(t,C)}(bias[row])`};`:""}
        ${n}
        ${g.setByIndices("vec3<u32>(coords)","value")}
      }
    }
    `},ii=(t,e,n,i,o=!1)=>{let a=t[0].dims,l=t[1].dims,c=a.slice(0,-2),p=l.slice(0,-2),s=i?i.slice(0,-2):n.slice(0,-2),u=M.size(s),d=a[a.length-2],g=a[a.length-1],w=l[l.length-1],x=g%4===0&&w%4===0,C=d<=8?[4,1,1]:[4,4,1],O=[8,8,1],Y=[Math.ceil(w/O[0]/C[0]),Math.ceil(d/O[1]/C[1]),Math.ceil(u/O[2]/C[2])],q=x?4:1,ue=[...c,d,g/q],pe=ue.length,se=[...p,g,w/q],Re=se.length,Oe=[u,d,w/q],Ce=[{type:6,data:d},{type:6,data:w},{type:6,data:g}];Ot(e,Ce),Ce.push(...X(s,ue,se));let He=["rank","rank"],$t=t.length>2;$t&&(Ce.push(...X(t[2].dims)),He.push("rank")),Ce.push(...X(Oe));let Sn=xn=>{let Lr=s.length,jr=qn("batchDims",t[0].dataType,Lr,1),et=De(t[0].dataType),Ft=U("a",t[0].dataType,pe,q),Tt=U("b",t[1].dataType,Re,q),ze=K("result",t[0].dataType,Oe.length,q),Ht=[Ft,Tt];if($t){let ah=o?q:1;Ht.push(U("bias",t[2].dataType,t[2].dims.length,ah))}let Ae=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Pt(e,Ae);let Be=De(ze.type.tensor),tr=kt(e,ze.type.value,Be),No=_p(q,$t,tr,[jr,Ft,Tt,ze],[c,p,s],o);return`
  ${xn.registerUniforms(Ae).registerInternalVariables(jr).declareVariables(...Ht,ze)}
  ${No}
  ${x?rn(C,O,et,jr):nn(C,O,et,jr)}
                   `};return{name:"MatMul",shaderCache:{hint:`${C};${e.activation};${x};${o}`,inputDependencies:He},getRunData:()=>({outputs:[{dims:n,dataType:t[0].dataType}],dispatchGroup:{x:Y[0],y:Y[1],z:Y[2]},programUniforms:Ce}),getShaderSource:Sn}}}),xp,Uu,Wu=j(()=>{ye(),Xt(),_e(),Zt(),ri(),uo(),on(),xp=(t,e,n,i,o=!1,a,l=4,c=4,p=4,s="f32")=>{let u=He=>{switch(He){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${s}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${He} is not supported.`)}},d=He=>{switch(He){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${He} is not supported.`)}},g=t?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,w=t?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,x=t?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",C=t?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",O=t?"row":"col",Y=t?"col":"row",q=`
    let inChannels = i32(uniforms.w_shape[2]);
    let outWidth = ${t?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
    let outRow = ${O} / outWidth;
    let outCol = ${O} % outWidth;

    let WRow = ${Y} / (i32(uniforms.w_shape[1]) * inChannels);
    let WCol = ${Y} / inChannels % i32(uniforms.w_shape[1]);
    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];
    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];
    let xCh = ${Y} % inChannels;
    var resData = ${nt(l,s)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${x} && xCol >= 0 && xCol < ${C}) {
      ${g}
      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));
      ${u(l)}
    }
    return resData;`,ue=t?e&&i?`
    let col = colIn * ${l};
    ${q}`:`
    let col = colIn * ${l};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
      ${q}
    }
    return ${nt(l,s)}(0.0);`:i&&n?`
    let col = colIn * ${l};
    ${q}`:`
    let col = colIn * ${l};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${q}
    }
    return ${nt(l,s)}(0.0);`,pe=`${d(c)}`,se=nt(p,s),Re=nt(t?l:c,s),Oe=nt(t?c:l,s),Ce=kt(a,se,s);return`
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${Re} {
      ${t?ue:pe}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${Oe} {
      ${t?pe:ue}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${se}) {
      let col = colIn * ${p};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)
      {
      var value = valueIn;
      let outWidth = ${t?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${w}
      ${ti(o)}
      ${Ce}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`},Uu=(t,e,n,i,o,a,l,c)=>{let p=e.format==="NHWC",s=p?t[0].dims[3]:t[0].dims[1],u=n[0],d=p?n[2]:n[3],g=p?n[1]:n[2],w=p?n[3]:n[1],x=p&&(s%4===0||s%3===0)&&w%4===0,C=p?w:d*g,O=p?d*g:w,Y=[8,8,1],q=i<=8?[4,1,1]:[4,4,1],ue=[Math.ceil(C/Y[0]/q[0]),Math.ceil(O/Y[1]/q[1]),Math.ceil(u/Y[2]/q[2])];Ne("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${ue}`);let pe=x?p&&s%4!==0?3:4:1,se=Y[1]*q[1],Re=Y[0]*q[0],Oe=Math.max(Y[0]*pe,Y[1]),Ce=i%se===0,He=o%Re===0,$t=a%Oe===0,Sn=x?[pe,4,4]:[1,1,1],xn=[{type:6,data:i},{type:6,data:o},{type:6,data:a},{type:6,data:[e.pads[0],e.pads[1]]},{type:6,data:e.strides},{type:6,data:e.dilations}];Ot(e,xn),xn.push(...X(t[0].dims,t[1].dims));let Lr=["rank","rank"];l&&(xn.push(...X(t[2].dims)),Lr.push("rank")),xn.push(...X(n));let jr=et=>{let Ft=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Pt(e,Ft);let Tt=x?4:1,ze=De(t[0].dataType),Ht=`
      fn setOutputAtIndex(flatIndex : i32, value : ${x?`vec4<${ze}>`:ze}) {
        result[flatIndex] = ${x?`vec4<${ze}>`:ze}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${x?`vec4<${ze}>`:ze}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${x?"/ 4":""}, value);
      }`,Ae=U("x",t[0].dataType,t[0].dims.length,pe===3?1:pe),Be=U("w",t[1].dataType,t[1].dims.length,Tt),tr=[Ae,Be],No=K("result",t[0].dataType,n.length,Tt);if(l){let ah=U("bias",t[2].dataType,t[2].dims.length,Tt);tr.push(ah),Ht+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${x?`vec4<${ze}>`:ze} {
          return bias[coords.${p?"w":"y"}${x?"/ 4":""}];
        }`}return`
        ${ni("uniforms.result_strides")}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${et.registerUniforms(Ft).declareVariables(...tr,No)}
        ${Ht}
        ${xp(p,Ce,He,$t,l,e,Sn[0],Sn[1],Sn[2],ze)}
        ${x?rn(q,Y,ze,void 0,!p,Oe):nn(q,Y,ze,void 0,!p,Oe,!1,void 0,c)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${e.cacheKey};${pe};${x};${Ce};${He};${$t};${se};${Re};${Oe}`,inputDependencies:Lr},getRunData:()=>({outputs:[{dims:n,dataType:t[0].dataType}],dispatchGroup:{x:ue[0],y:ue[1],z:ue[2]},programUniforms:xn}),getShaderSource:jr}}}),lo,Nu,Vu=j(()=>{ye(),xe(),_e(),co(),Zt(),lo=(t,e,n)=>{let i=t.length>2,o=i?"value += b[output_channel];":"",a=t[0].dims,l=t[1].dims,c=l[0]/e.group,p=e.format==="NHWC",s=oi(a,l,e.dilations,e.pads,e.strides,p),u=M.size(s),d=[{type:12,data:u},{type:12,data:e.dilations},{type:12,data:[e.strides[0],e.strides[1]]},{type:12,data:[e.pads[0],e.pads[1]]},{type:12,data:c}];Ot(e,d),d.push(...X(a,l));let g=["rank","rank"];i&&(d.push(...X(t[2].dims)),g.push("rank")),d.push(...X(s));let w=x=>{let C=K("output",t[0].dataType,s.length),O=De(C.type.tensor),Y=kt(e,C.type.value,O),q=U("x",t[0].dataType,a.length),ue=U("w",t[1].dataType,l.length),pe=[q,ue];i&&pe.push(U("b",t[2].dataType,t[2].dims.length));let se=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:e.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];return Pt(e,se),`
  ${x.registerUniforms(se).declareVariables(...pe,C)}

  ${x.mainStart()}
    ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let outputIndices = ${C.offsetToIndices("global_idx")};
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${p?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${p?1:2}], outputIndices[${p?2:3}]) * uniforms.strides - uniforms.pads;
    let group_id: u32 = output_channel / uniforms.output_channels_per_group;

    var value: ${C.type.value} = ${C.type.value}(0);
    for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {
      let input_channel = group_id * uniforms.w_shape[1] + wInChannel;
      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

        if (xHeight < 0u || xHeight >= uniforms.x_shape[${p?1:2}]) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
          if (xWidth < 0u || xWidth >= uniforms.x_shape[${p?2:3}]) {
            continue;
          }

          let xVal = ${p?q.get("batch","xHeight","xWidth","input_channel"):q.get("batch","input_channel","xHeight","xWidth")};
          let wVal = ${ue.get("output_channel","wInChannel","wHeight","wWidth")};
          value += xVal*wVal;
        }
      }
    }
    ${o}
    ${Y}
    ${C.setByOffset("global_idx","value")}
  }`};return{name:"GroupedConv",shaderCache:{hint:e.cacheKey,inputDependencies:g},getRunData:()=>({outputs:[{dims:n?n(s):s,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:d}),getShaderSource:w}},Nu=(t,e,n)=>{let i=t.length>2,o=Ue(n[3]),a=Ue(n[2]),l=M.size(n)/o/a,c=[t[0].dims[0],t[0].dims[1],t[0].dims[2],t[0].dims[3]/o],p=[t[1].dims[0],t[1].dims[1],t[1].dims[2],t[1].dims[3]/o],s=[n[0],n[1],n[2],n[3]/o],u=[{type:12,data:l},{type:6,data:[e.strides[0],e.strides[1]]},{type:6,data:[e.pads[0],e.pads[1]]}];Ot(e,u),u.push(...X(c,p,s));let d=(a-1)*e.strides[1]+p[1],g=w=>{let x=K("output",t[0].dataType,s.length,o),C=De(x.type.tensor),O=kt(e,x.type.value,C),Y=U("x",t[0].dataType,c.length,o),q=U("w",t[1].dataType,p.length,o),ue=[Y,q];i&&ue.push(U("b",t[2].dataType,t[2].dims,o));let pe=i?"value += b[output_channel];":"",se=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Pt(e,se),`
  ${w.registerUniforms(se).declareVariables(...ue,x)}
  ${w.mainStart()}
    ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let width0 = uniforms.output_shape[3];
    let output_channel = global_idx % width0;
    var index1 = global_idx / width0;
    let width1 = uniforms.output_shape[2] / ${a}u;
    let col = (index1 % width1) * ${a}u;
    index1 = index1 / width1;
    let row = index1 % uniforms.output_shape[1];
    let batch = index1 / uniforms.output_shape[1];

    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;

    var x_vals: array<${Y.type.value}, ${d}>;
    var values: array<${x.type.value}, ${a}>;
    let input_channel = output_channel;
    // Use constant instead of uniform can give better performance for w's height/width.
    for (var w_height: u32 = 0u; w_height < ${p[0]}; w_height++) {
      let x_height = x_corner.x + i32(w_height);
      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {
        for (var i = 0; i < ${d}; i++) {
          let x_width = x_corner.y + i;
          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {
            x_vals[i] = ${Y.get("batch","u32(x_height)","u32(x_width)","input_channel")};
          } else {
            x_vals[i] = ${Y.type.value}(0);
          }
        }
        for (var w_width: u32 = 0u; w_width < ${p[1]}; w_width++) {
          let w_val = ${q.get("w_height","w_width","0","output_channel")};
          for (var i = 0u; i < ${a}u; i++) {
            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);
          }
        }
      }
    }

    for (var i = 0u; i < ${a}u; i++) {
      var value = values[i];
      ${pe}
      ${O}
      ${x.set("batch","row","col + i","output_channel","value")};
    }
  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${e.cacheKey};${o};${a};${d};${p[0]};${p[1]}`,inputDependencies:i?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:n,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:u}),getShaderSource:g}}}),po,Sp,Hu,mo=j(()=>{ye(),xe(),on(),_e(),Zt(),po=(t,e,n,i,o=!1)=>{let a=t[0].dims,l=t[1].dims,c=a[a.length-2],p=l[l.length-1],s=a[a.length-1],u=Ue(p),d=Ue(s),g=Ue(c),w=M.size(n)/u/g,x=t.length>2,C=i?i.slice(0,-2):n.slice(0,-2),O=[M.size(C),c,p],Y=[{type:12,data:w},{type:12,data:c},{type:12,data:p},{type:12,data:s}];Ot(e,Y),Y.push(...X(C,a,l)),x&&Y.push(...X(t[2].dims)),Y.push(...X(O));let q=ue=>{let pe=qn("batch_dims",t[0].dataType,C.length),se=U("a",t[0].dataType,a.length,d),Re=U("b",t[1].dataType,l.length,u),Oe=K("output",t[0].dataType,O.length,u),Ce=De(Oe.type.tensor),He=kt(e,Oe.type.value,Ce),$t=[se,Re],Sn="";if(x){let Ht=o?u:1;$t.push(U("bias",t[2].dataType,t[2].dims.length,Ht)),Sn=`${o?`value += bias[col / ${Ht}];`:`value += ${Oe.type.value}(bias[row + i]);`}`}let xn=a.slice(0,-2),Lr=l.slice(0,-2),jr=Pr(xn,C),et=Pr(Lr,C),Ft=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Pt(e,Ft);let Tt=(Ht,Ae)=>{let Be=Ht.rank,tr=Ht.name;if(Be===2)return`var ${tr}_indices = ${Ht.type.indices}(0u, 0u);`;let No=pe.rank,ah=`var ${tr}_indices: ${Ht.type.indices};`;for(let Mo=Be-2-1,t0=No-1;Mo>=0;Mo--,t0--)ah+=`
${tr}_indices[${Mo}] = ${No>1?`batch_indices[${t0}]`:"batch_indices"};`;return Ae.forEach(Mo=>{ah+=`
${tr}_indices[${Mo}] = 0;`}),ah+=`${tr}_indices[${Be-2}] = 0u;
                     ${tr}_indices[${Be-1}] = 0u;`,ah},ze=()=>{let Ht=`var a_data: ${se.type.value};`;for(let Ae=0;Ae<d;Ae++)Ht+=`
              let b_data${Ae} = b[(b_offset + (k + ${Ae}) * uniforms.N + col) / ${u}];`;for(let Ae=0;Ae<g;Ae++){Ht+=`a_data = a[(a_offset + (row + ${Ae}) * uniforms.K + k) / ${d}];`;for(let Be=0;Be<d;Be++)Ht+=`
            values[${Ae}] = fma(${Re.type.value}(a_data${d===1?"":`[${Be}]`}), b_data${Be}, values[${Ae}]);
`}return Ht};return`
  ${ue.registerUniforms(Ft).registerInternalVariables(pe).declareVariables(...$t,Oe)}
  ${ue.mainStart()}
    ${ue.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let col = (global_idx % (uniforms.N / ${u})) * ${u};
    var index1 = global_idx / (uniforms.N / ${u});
    let stride1 = uniforms.M / ${g};
    let row = (index1 % stride1) * ${g};
    let batch = index1 / stride1;

    ${n.length===2?"":`let batch_indices = ${pe.offsetToIndices("batch")};`}
    ${Tt(se,jr)}
    let a_offset = ${se.indicesToOffset("a_indices")};
    ${Tt(Re,et)}
    let b_offset = ${Re.indicesToOffset("b_indices")};
    var values: array<${Oe.type.value}, ${g}>;
    for (var k: u32 = 0u; k < uniforms.K; k = k + ${d}) {
      ${ze()}
    }
    for (var i = 0u; i < ${g}u; i++) {
      var value = values[i];
      ${Sn}
      ${He}
      let cur_indices = ${Oe.type.indices}(batch, row + i, col);
      let offset = ${Oe.indicesToOffset("cur_indices")};
      ${Oe.setByOffset(`offset / ${u}`,"value")};
    }
  }
  `};return{name:"MatMulNaive",shaderCache:{hint:`${e.activation};${u};${d};${g};${o}`,inputDependencies:x?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:n,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(w/64)},programUniforms:Y}),getShaderSource:q}},Sp=t=>{if(!t||t.length!==2)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.")},Hu=t=>{Sp(t.inputs);let e=zt.calcShape(t.inputs[0].dims,t.inputs[1].dims,!0);if(!e)throw new Error("Can't use matmul on the given tensors");let n=e[e.length-1],i=t.inputs[0].dims[t.inputs[0].dims.length-1];n<8&&i<8?t.compute(po(t.inputs,{activation:""},e)):t.compute(ii(t.inputs,{activation:""},e))}}),oi,fo,Cp,Gu,ho,Ip,Tp,go,co=j(()=>{xe(),Wu(),on(),Vu(),Zt(),mo(),Rr(),oi=(t,e,n,i,o,a)=>{let l=t[0],c=t.slice(a?1:2,a?3:4),p=c.length,s=e[0],u=e.slice(2).map((g,w)=>g+(g-1)*(n[w]-1)),d=c.map((g,w)=>g+i[w]+i[w+p]).map((g,w)=>Math.floor((g-u[w]+o[w])/o[w]));return d.splice(0,0,l),d.splice(a?3:1,0,s),d},fo=[2,3,1,0],Cp=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4&&t[0].dims.length!==3)throw new Error("currently only support conv 1D and 2D");if(t[0].dims.length!==t[1].dims.length)throw new Error("filter does not have same dimension as input");let n=t[0].dims[e.format==="NHWC"?t[0].dims.length-1:1],i=t[1].dims[1]*e.group;if(n!==i)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(t.length===3&&(t[2].dims.length!==1||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");let o=t[0].dims.length-2;if(e.dilations.length!==o)throw new Error(`dilations should be ${o}D`);if(e.strides.length!==o)throw new Error(`strides should be ${o}D`);if(e.pads.length!==o*2)throw new Error(`pads should be ${o*2}D`);if(e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape")},Gu=(t,e)=>{let n=t.kernelShape.slice();for(let a=2;a<e[1].dims.length;++a)n[a-2]===0&&(n[a-2]=e[1].dims[a]);let i=t.pads.slice();pr.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,n,i,t.format==="NHWC",t.autoPad);let o=Object.assign({},t);return Object.assign(o,{kernelShape:n,pads:i}),o},ho=t=>{let e=ei(t),n=t.format,i=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][t.auto_pad],o=t.dilations,a=t.group,l=t.kernel_shape,c=t.pads,p=t.strides,s=t.w_is_const();return{autoPad:i,format:n,dilations:o,group:a,kernelShape:l,pads:c,strides:p,wIsConst:s,...e,cacheKey:`${t.format};${e.activation};`}},Ip=(t,e,n)=>{let i=Gu(n,e),o=n.format==="NHWC";if(n.group!==1){if(!t.adapterInfo.isArchitecture("ampere")&&o&&e[1].dims[0]===n.group&&e[1].dims[1]===1&&n.dilations[0]===1&&n.dilations[1]===1){let Re=oi(e[0].dims,e[1].dims,n.dilations,i.pads,n.strides,o),Oe=t.kernelCustomData.wT??t.compute(xt(e[1],fo),{inputs:[1],outputs:[n.wIsConst?-2:-1]})[0];n.wIsConst&&!t.kernelCustomData.wT&&(t.kernelCustomData.wT=Oe);let Ce=[e[0],Oe];e.length===3&&Ce.push(e[2]),t.compute(Nu(Ce,i,Re),{inputs:Ce})}else t.compute(lo(e,i));return}let a=e.length===3,l=e[0].dims[o?1:2],c=e[0].dims[o?2:3],p=e[0].dims[o?3:1],s=e[1].dims[2],u=e[1].dims[3],d=oi(e[0].dims,e[1].dims,n.dilations,i.pads,n.strides,o),g=d[o?1:2],w=d[o?2:3],x=d[o?3:1],C=o&&s===l&&u===c&&n.pads[0]===0&&n.pads[1]===0;if(C||s===1&&u===1&&n.dilations[0]===1&&n.dilations[1]===1&&n.strides[0]===1&&n.strides[1]===1&&n.pads[0]===0&&n.pads[1]===0){let Re=d[0],Oe,Ce,He,$t=[];if(o){let Lr=t.kernelCustomData.wT??t.compute(xt(e[1],fo),{inputs:[1],outputs:[n.wIsConst?-2:-1]})[0];if(n.wIsConst&&!t.kernelCustomData.wT&&(t.kernelCustomData.wT=Lr),C){let jr=l*c*p;Oe=e[0].reshape([1,Re,jr]),Ce=Lr.reshape([1,jr,x]),He=[1,Re,x]}else Oe=e[0].reshape([Re,l*c,p]),Ce=Lr.reshape([1,p,x]),He=[Re,g*w,x];$t.push(Oe),$t.push(Ce)}else Oe=e[0].reshape([Re,p,l*c]),Ce=e[1].reshape([1,x,p]),He=[Re,x,g*w],$t.push(Ce),$t.push(Oe);a&&$t.push(e[2]);let Sn=He[2],xn=$t[0].dims[$t[0].dims.length-1];Sn<8&&xn<8?t.compute(po($t,i,d,He,o),{inputs:$t}):t.compute(ii($t,i,d,He,o),{inputs:$t});return}let O=!0,Y=t.kernelCustomData.wT??t.compute(xt(e[1],fo),{inputs:[1],outputs:[n.wIsConst?-2:-1]})[0];n.wIsConst&&!t.kernelCustomData.wT&&(t.kernelCustomData.wT=Y);let q=[e[0],Y];a&&q.push(e[2]);let ue=o?g*w:x,pe=o?x:g*w,se=s*u*p;t.compute(Uu(q,i,d,ue,pe,se,a,O),{inputs:q})},Tp=(t,e)=>{let n=e.format==="NHWC",i=[t.inputs[0].reshape(n?[t.inputs[0].dims[0],1,t.inputs[0].dims[1],t.inputs[0].dims[2]]:[t.inputs[0].dims[0],t.inputs[0].dims[1],1,t.inputs[0].dims[2]]),t.inputs[1].reshape([t.inputs[1].dims[0],t.inputs[1].dims[1],1,t.inputs[1].dims[2]])];t.inputs.length===3&&i.push(t.inputs[2]);let o=[0,e.pads[0],0,e.pads[1]],a=[1].concat(e.strides),l=[1].concat(e.dilations),c=[1].concat(e.kernelShape),p=Gu({...e,pads:o,strides:a,dilations:l,kernelShape:c},i);t.compute(lo(i,p,s=>n?[s[0],s[2],s[3]]:[]))},go=(t,e)=>{Cp(t.inputs,e),t.inputs[0].dims.length===3?Tp(t,e):Ip(t,t.inputs,e)}}),Ap,Lu,Fu=j(()=>{ye(),Xt(),_e(),Zt(),ri(),uo(),on(),Ap=(t,e=!1,n,i,o=4)=>{let a=O=>{switch(O){case 1:return"return w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];";case 4:return`
            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);
            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);
            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);
            let v0 = w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];
            let v1 = w[getIndexFromCoords4D(coord1, vec4<i32>(uniforms.w_shape))];
            let v2 = w[getIndexFromCoords4D(coord2, vec4<i32>(uniforms.w_shape))];
            let v3 = w[getIndexFromCoords4D(coord3, vec4<i32>(uniforms.w_shape))];
            return ${i}(v0, v1, v2, v3);
            `;default:throw new Error(`innerElementSize ${O} is not supported.`)}},l=t?`
      let coord = vec4<i32>(batch, iXR, iXC, xCh);
      `:`
      let coord = vec4<i32>(batch, xCh, iXR, iXC);
      `,c=t?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,p=t?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",s=t?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",u=t?"row":"col",d=t?"col":"row",g=`
      let inChannels = ${t?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};
      let outWidth = ${t?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      let outRow = ${u} / outWidth;
      let outCol = ${u} % outWidth;

      let WRow = ${d} / (uniforms.filter_dims[1] * inChannels);
      let WCol = ${d} / inChannels % uniforms.filter_dims[1];
      let xR = f32(outRow - uniforms.pads[0] + uniforms.dilations[0] * WRow) / f32(uniforms.strides[0]);
      let xC = f32(outCol - uniforms.pads[1] + uniforms.dilations[1] * WCol) / f32(uniforms.strides[1]);
      if (xR < 0.0 || xR >= f32(${p}) || fract(xR) > 0.0) {
        return ${i}(0.0);
      }
      if (xC < 0.0 || xC >= f32(${s}) || fract(xC) > 0.0) {
        return ${i}(0.0);
      }
      let iXR = i32(xR);
      let iXC = i32(xC);
      let xCh = ${d} % inChannels;
      ${l}
      return x[getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape))/${o}];`,w=t?`
      let col = colIn * ${o};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
        ${g}
      }
      return ${i}(0.0);`:`
      let col = colIn * ${o};
      if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
        ${g}
      }
      return ${i}(0.0);`,x=`
      let col = colIn * ${o};
      let inChannels = ${t?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};
      let coordX = uniforms.filter_dims[0] - 1 - row / (uniforms.filter_dims[1] * inChannels);
      let coordY = uniforms.filter_dims[1] - 1 - (row / inChannels) % uniforms.filter_dims[1];
      if (${t?"row < uniforms.dim_inner && col < uniforms.dim_b_outer":"row < uniforms.dim_inner && col < uniforms.dim_a_outer"}  && coordX >= 0 && coordY >= 0) {
        let rowInner = row % inChannels;
        let coord = vec4<i32>(coordX, coordY, col, rowInner);
        ${a(o)}
      }
      return ${i}(0.0);
      `,C=kt(n,i);return`
  fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${i} {
    ${t?w:x}
  }

  fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${i} {
    ${t?x:w}
  }

  fn mm_write(batch: i32, row : i32, colIn : i32, valueInput : ${i}) {
    let col = colIn * ${o};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
      var value = valueInput;
      let outWidth = ${t?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${c}
      ${ti(e)}
      ${C}
      result[getIndexFromCoords4D(coords, vec4<i32>(uniforms.result_shape))/${o}] = value;
    }
  }`},Lu=(t,e,n,i,o,a,l,c)=>{let p=e.format==="NHWC",s=p?t[0].dims[3]:t[0].dims[1],u=n[0],d=p?n[2]:n[3],g=p?n[1]:n[2],w=p?n[3]:n[1],x=p&&s%4===0&&s%3&&w%4===0,C=p?w:d*g,O=p?d*g:w,Y=[8,8,1],q=i<=8?[4,1,1]:[4,4,1],ue=[Math.ceil(C/Y[0]/q[0]),Math.ceil(O/Y[1]/q[1]),Math.ceil(u/Y[2]/q[2])];Ne("verbose",()=>`[conv_backprop_mm_webgpu] dispatch = ${ue}`);let pe=x?4:1,se=Math.max(Y[0]*pe,Y[1]),Re=x?4:1,Oe=[e.kernelShape[p?1:2],e.kernelShape[p?2:3]],Ce=[Oe[0]+(e.dilations[0]<=1?0:(Oe[0]-1)*(e.dilations[0]-1)),Oe[1]+(e.dilations[1]<=1?0:(Oe[1]-1)*(e.dilations[1]-1))],He=[Ce[0]-1-Math.floor((e.pads[0]+e.pads[2])/2),Ce[1]-1-Math.floor((e.pads[1]+e.pads[3])/2)],$t=[{type:6,data:i},{type:6,data:o},{type:6,data:a},{type:6,data:e.strides},{type:6,data:e.dilations},{type:6,data:Oe},{type:6,data:He}];Ot(e,$t),$t.push(...X(t[0].dims,t[1].dims));let Sn=["rank","rank"];l&&($t.push(...X(t[2].dims)),Sn.push("rank")),$t.push(...X(n));let xn=Lr=>{let jr=U("x",t[0].dataType,t[0].dims.length,Re),et=U("w",t[1].dataType,t[1].dims.length,1),Ft=K("result",t[0].dataType,n.length,Re),Tt=[jr,et],ze="";if(l){let Be=U("bias",t[2].dataType,t[2].dims.length,Re);Tt.push(Be),ze+=`
          fn getBiasByOutputCoords(coords : vec4<i32>) -> ${Be.type.value} {
            return bias[coords.${p?"w":"y"}${x?"/ 4":""}];
          }`}let Ht=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"strides",type:"i32",length:2},{name:"dilations",type:"i32",length:2},{name:"filter_dims",type:"i32",length:Oe.length},{name:"pads",type:"i32",length:He.length}];Pt(e,Ht);let Ae=De(t[0].dataType,1);if(Ae!=="f16"&&Ae!=="f32")throw new Error(`elemType ${Ae} is not supported.`);return`
        ${ni("uniforms.result_strides")}
        ${Lr.registerUniforms(Ht).declareVariables(...Tt,Ft)};
        ${ze}
        ${Ap(p,l,e,jr.type.value,pe)}
        ${x?rn(q,Y,Ae,void 0,!p,se):nn(q,Y,Ae,void 0,!p,se,!1,void 0,c)}`};return{name:"Conv2DTransposeMatMul",shaderCache:{hint:`${e.cacheKey};${q};${Y};${x}`,inputDependencies:Sn},getRunData:()=>({outputs:[{dims:n,dataType:t[0].dataType}],dispatchGroup:{x:ue[0],y:ue[1],z:ue[2]},programUniforms:$t}),getShaderSource:xn}}}),Ep,yo,qu=j(()=>{ye(),Xt(),xe(),_e(),Ep=(t,e,n,i,o,a=!1,l,c,p=!1)=>{let s=p?1:2,u=p?2:3,d=p?3:1,g=a?2:1,w=`
  fn setOutputAtIndex(flatIndex : u32, value : ${a?`vec4<${l}>`:l}) {
    result[flatIndex] = ${a?`vec4<${l}>`:l}(value);
  }`;i&&(w+=`
    fn getBiasByOutputCoords(coords : vec4<u32>) -> ${a?`vec4<${l}>`:l} {
      return bias[coords.${p?"w":"y"}${a?"/ 4":""}];
    }`);let x=a?4:1,C=U("W",e[1].dataType,e[1].dims.length,x),O=U("Dy",e[0].dataType,e[0].dims.length,x),Y=[O,C];i&&Y.push(U("bias",e[2].dataType,[n[d]].length,x));let q=K("result",e[0].dataType,n.length,x),ue=`{
        let batch: u32 = ${o?"global_id.z":"workgroup_id.z"} / uniforms.result_shape[1];
        let r = ${o?"global_id.z":"workgroup_id.z"} % uniforms.result_shape[1];
        let c = ${o?"global_id.y":"workgroup_id.y"} * ${g};
        let d1: u32 = ${o?"global_id.x":"workgroup_id.x"} * 4;

        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(uniforms.pads);

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        var dotProd: array<vec4<${l}>, ${g}>;
        for (var i = 0; i < ${g}; i++) {
          dotProd[i] = vec4<${l}>(0.0);
        }
        for (var wR: u32 = 0; wR < uniforms.filter_dims[0]; wR = wR + 1) {
          var dyR = (${l}(dyCorner.x) + ${l}(wR)) / ${l}(uniforms.strides.x);
          let wRPerm = uniforms.filter_dims[0] - 1 - wR;
          if (dyR < 0.0 || dyR >= ${l}(uniforms.Dy_shape[1]) ||
              fract(dyR) > 0.0 || wRPerm < 0) {
            continue;
          }
          let idyR: u32 = u32(dyR);

          for (var wC: u32 = 0; wC < uniforms.filter_dims[1]; wC = wC + 1) {
            let dyC = (${l}(dyCorner.y) + ${l}(wC)) / ${l}(uniforms.strides.y);
            let dyC2 = (${l}(dyCorner.y) + 1.0 + ${l}(wC)) / ${l}(uniforms.strides.y);
            let wCPerm = uniforms.filter_dims[1] - 1 - wC;
            if (wCPerm < 0) {
              continue;
            }
            var bDyCVal = true;
            var bDyCVal2 = true;
            if (dyC < 0.0 || dyC >= ${l}(uniforms.Dy_shape[2]) ||
                fract(dyC) > 0.0) {
              bDyCVal = false;
            }
            if (dyC2 < 0.0 || dyC2 >= ${l}(uniforms.Dy_shape[2]) ||
                fract(dyC2) > 0.0) {
              bDyCVal2 = false;
            }

            let idyC: u32 = u32(dyC);
            let idyC2: u32 = u32(dyC2);
            if (bDyCVal && bDyCVal2) {
              let d2Length = uniforms.Dy_shape[3];
              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${C.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${C.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${C.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${C.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${O.get("batch","idyR","idyC","d2")};
                let tmpval = vec4<${l}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[0] = dotProd[0] + tmpval;

                xValue =  ${O.get("batch","idyR","idyC2","d2")};

                dotProd[1] = dotProd[1] + vec4<${l}>(dot(xValue, wValue0),
                                                    dot(xValue, wValue1),
                                                    dot(xValue, wValue2),
                                                    dot(xValue, wValue3));
              }
            } else if (bDyCVal) {
              let d2Length = uniforms.Dy_shape[${d}];
              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${C.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${C.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${C.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${C.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${O.get("batch","idyR","idyC","d2")};
                let tmpval = vec4<${l}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[0] = dotProd[0] + tmpval;
              }
            } else if (bDyCVal2) {
              let d2Length = uniforms.Dy_shape[3];
              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${C.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${C.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${C.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${C.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${O.get("batch","idyR","idyC2","d2")};
                let tmpval = vec4<${l}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[1] = dotProd[1] + tmpval;
              }
            }
          }
        }

        for (var i: u32 = 0; i < ${g}; i = i + 1) {
          let value = dotProd[i] + ${i?"bias[c+i]":`vec4<${l}>(0.0)`};
          ${q.set("batch","r","c + i","d1","value")};
        }
      }`,pe=`
          let outputIndices = ${q.offsetToIndices("global_idx")};
          let batch = ${q.indicesGet("outputIndices",0)};
          let d1 = ${q.indicesGet("outputIndices",d)};
          let r = ${q.indicesGet("outputIndices",s)};
          let c = ${q.indicesGet("outputIndices",u)};
          let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;
          let dyRCorner = dyCorner.x;
          let dyCCorner = dyCorner.y;
          let groupId = d1 / uniforms.output_channels_per_group;
          let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;
          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
          // ? = to be determined. : = across all values in that axis.
          var dotProd = ${l}(0.0);
          for (var wR: u32 = 0; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {
            if (wR % uniforms.dilations.x != 0) {
              continue;
            }
            let dyR = (${l}(dyRCorner) + ${l}(wR)) / ${l}(uniforms.strides[0]);
            let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;
            if (dyR < 0.0 || dyR >= ${l}(uniforms.Dy_shape[${s}]) || fract(dyR) > 0.0 ||
                wRPerm < 0) {
              continue;
            }
            let idyR: u32 = u32(dyR);

            for (var wC: u32 = 0; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {
              if (wC % uniforms.dilations.y != 0) {
                continue;
              }
              let dyC = (${l}(dyCCorner) + ${l}(wC)) / ${l}(uniforms.strides.y);
              let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;
              if (dyC < 0.0 || dyC >= ${l}(uniforms.Dy_shape[${u}]) ||
                  fract(dyC) > 0.0 || wCPerm < 0) {
                continue;
              }
              let idyC: u32 = u32(dyC);
              var inputChannel = groupId * uniforms.input_channels_per_group;
              for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group; d2 = d2 + 1) {
                let xValue = ${p?O.get("batch","idyR","idyC","inputChannel"):O.get("batch","inputChannel","idyR","idyC")};
                let wValue = ${C.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)")};
                dotProd = dotProd + xValue * wValue;
                inputChannel = inputChannel + 1;
              }
            }
          }
          let value = dotProd + ${i?"bias[d1]":`${l}(0.0)`};
          ${q.setByOffset("global_idx","value")};
        `;return`
  ${t.registerUniforms(c).declareVariables(...Y,q)}
  ${w}

    ${t.mainStart()}
    ${t.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};
  ${a?ue:pe}}`},yo=(t,e,n)=>{let i=t.length>2,o=e.outputShape,a=M.size(o),l=[Math.ceil(a/64),1,1];Ne("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${l}`);let c=e.format==="NHWC",p=["rank","rank"],s=[e.strides[0],e.strides[1]],u=[e.kernelShape[c?1:2],e.kernelShape[c?2:3]],d=[e.dilations[0],e.dilations[1]],g=[u[0]+(e.dilations[0]<=1?0:(e.kernelShape[c?1:2]-1)*(e.dilations[0]-1)),u[1]+(e.dilations[1]<=1?0:(e.kernelShape[c?2:3]-1)*(e.dilations[1]-1))],w=[g[0]-1-Math.floor((e.pads[0]+e.pads[2])/2),g[1]-1-Math.floor(e.pads[1]+e.pads[3])/2],x=!1,C=e.group,O=t[1].dims,Y=O[0]/C,q=O[1],ue=[{type:12,data:a},{type:12,data:s},{type:12,data:u},{type:12,data:d},{type:12,data:g},{type:6,data:w},{type:12,data:Y},{type:12,data:q},...X(t[0].dims,t[1].dims)];i&&(ue.push(...X(t[2].dims)),p.push("rank")),ue.push(...X(o));let pe=l[1]===1&&l[2]===1,se=Re=>{let Oe=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:s.length},{name:"filter_dims",type:"u32",length:u.length},{name:"dilations",type:"u32",length:u.length},{name:"effective_filter_dims",type:"u32",length:g.length},{name:"pads",type:"i32",length:w.length},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],Ce=De(t[0].dataType);return`${Ep(Re,t,o,i,pe,x,Ce,Oe,c)}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${e.cacheKey};`,inputDependencies:p},getRunData:()=>({dispatchGroup:{x:l[0],y:l[1],z:l[2]},outputs:[{dims:n?n(o):o,dataType:t[0].dataType}],programUniforms:ue}),getShaderSource:se}}}),kp,Op,Pp,ju,Ku,Rp,zp,Bp,Dp,Yu,Xu=j(()=>{Fu(),qu(),Zt(),Rr(),kp=(t,e,n,i,o,a)=>(t-1)*e+n+(i-1)*o+1-a,Op=(t,e,n,i,o)=>{let a=Math.floor(t/2);e==="SAME_UPPER"?(n[i]=a,n[o]=t-a):e==="SAME_LOWER"&&(n[i]=t-a,n[o]=a)},Pp=(t,e,n,i,o,a,l,c,p,s)=>{let u=t.length-2,d=s.length===0;if(p.length===0)for(let x=0;x<u;++x)p.push(0);let g=t[0],w=e[c?3:1]*o;for(let x=0,C=t.length-u-(c?1:0);x<u;++x,++C){let O=t[C],Y=d?O*l[x]:s[x],q=kp(O,l[x],a[x],e[C],n[x],Y);Op(q,i,a,x,x+u),d&&s.push(l[x]*(O-1)+p[x]+(e[C]-1)*n[x]+1-a[x]-a[x+u])}s.splice(0,0,g),s.splice(c?3:1,0,w)},ju=(t,e)=>{let n=t.kernelShape.slice();if(t.kernelShape.length===0||t.kernelShape.reduce((d,g)=>d*g,1)===0){n.length=0;for(let d=2;d<e[1].dims.length;++d)n.push(e[1].dims[d])}let i=t.format==="NHWC";n.splice(0,0,e[1].dims[0]),n.splice(i?3:1,0,e[1].dims[1]);let o=t.pads.slice(),a=t.outputShape.slice(),l=t.outputPadding.slice(),c=e[0].dims,p=t.dilations.slice();if(p.reduce((d,g)=>d+g,0)===0){let d=e[0].dims.length-2;p=new Array(d).fill(1)}let s=t.strides.slice();if(s.reduce((d,g)=>d+g,0)===0){let d=e[0].dims.length-2;s=new Array(d).fill(1)}Pp(c,n,p,t.autoPad,t.group,o,s,i,l,a);let u=Object.assign({},t);return Object.assign(u,{kernelShape:n,pads:o,outputPadding:l,outputShape:a,dilations:p,strides:s}),u},Ku=t=>{let e=ei(t),n=t.format,i=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof t.autoPad>"u"?0:t.autoPad],o=t.dilations,a=t.group,l=t.kernelShape,c=t.pads,p=t.strides,s=t.wIsConst(),u=t.outputPadding,d=t.outputShape;return{autoPad:i,format:n,dilations:o,group:a,kernelShape:l,outputPadding:u,outputShape:d,pads:c,strides:p,wIsConst:s,...e,cacheKey:`${t.format};${e.activation};`}},Rp=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4&&t[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(t[0].dims.length!==t[1].dims.length)throw new Error("filter does not have same dimension as input");let n=t[0].dims[e.format==="NHWC"?t[0].dims.length-1:1],i=t[1].dims[0];if(n!==i)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let o=t[1].dims[1]*e.group;if(t.length===3&&(t[2].dims.length!==1||t[2].dims[0]!==o))throw new Error("invalid bias");let a=t[0].dims.length-2;if(e.dilations.reduce((l,c)=>l+c,0)>0&&e.dilations.length!==a)throw new Error(`dilations should be ${a}D`);if(e.strides.reduce((l,c)=>l+c,0)>0&&e.strides.length!==a)throw new Error(`strides should be ${a}D`);if(e.pads.reduce((l,c)=>l+c,0)>0&&e.pads.length!==a*2)throw new Error(`pads should be ${a*2}D`);if(e.outputPadding.length!==a&&e.outputPadding.length!==0)throw new Error(`output_padding should be ${a}D`);if(e.kernelShape.reduce((l,c)=>l+c,0)>0&&e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(e.outputShape.length!==0&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape")},zp=[2,3,1,0],Bp=(t,e,n)=>{let i=ju(n,e),o=n.format==="NHWC",a=i.outputShape,l=a[o?3:1],c=e[0].dims[o?3:1];if(i.group!==1||l===1&&c===1){t.compute(yo(e,i));return}let p=a[o?1:2],s=a[o?2:3],u=e[1].dims[2],d=e[1].dims[3],g=o?p*s:l,w=o?l:p*s,x=u*d*c,C=!0,O=t.kernelCustomData.wT??t.compute(xt(e[1],zp),{inputs:[1],outputs:[n.wIsConst?-2:-1]})[0];n.wIsConst&&!t.kernelCustomData.wT&&(t.kernelCustomData.wT=O);let Y=[e[0],O],q=e.length===3;q&&(!o&&e[2].dims.length===1?Y.push(e[2].reshape([e[2].dims[0],1,1])):Y.push(e[2])),t.compute(Lu(Y,i,a,g,w,x,q,C),{inputs:Y})},Dp=(t,e)=>{let n=e.format==="NHWC",i=[t.inputs[0].reshape(n?[t.inputs[0].dims[0],1,t.inputs[0].dims[1],t.inputs[0].dims[2]]:[t.inputs[0].dims[0],t.inputs[0].dims[1],1,t.inputs[0].dims[2]]),t.inputs[1].reshape([t.inputs[1].dims[0],t.inputs[1].dims[1],1,t.inputs[1].dims[2]])];t.inputs.length===3&&i.push(t.inputs[2]);let o=e.kernelShape;(o.length===0||o[0]===0)&&(o=[t.inputs[1].dims[2]]);let a=e.dilations;(a.length===0||a[0]===0)&&(a=[1]);let l=e.strides;(l.length===0||l[0]===0)&&(l=[1]);let c=e.pads;c.length===0&&(c=[0,0]),c=[0,c[0],0,c[1]],l=[1].concat(l),a=[1].concat(a),o=[1].concat(o);let p=ju({...e,pads:c,strides:l,dilations:a,kernelShape:o},i);t.compute(yo(i,p,s=>n?[s[0],s[2],s[3]]:[s[0],s[1],s[3]]))},Yu=(t,e)=>{Rp(t.inputs,e),t.inputs[0].dims.length===3?Dp(t,e):Bp(t,t.inputs,e)}}),Mp,Zu,Qu,Ju=j(()=>{ye(),xe(),Ze(),_e(),Mp=(t,e,n,i)=>{let o=M.size(e),a=e.length,l=U("input",t,a),c=K("output",t,a),p=n.dataType===6?n.getInt32Array()[0]:Number(n.getBigInt64Array()[0]),s=M.normalizeAxis(p,a),u=d=>{let g=` i32(${l.indicesGet("inputIndices","uniforms.axis")}) `,w=fe("uniforms.input_shape","uniforms.axis",a),x=i.reverse?g+(i.exclusive?" + 1":""):"0",C=i.reverse?w:g+(i.exclusive?"":" + 1");return`
                ${d.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(l,c)}
                ${d.mainStart()}
                  ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
                  var inputIndices = ${c.offsetToIndices("global_idx")};
                  var sum = ${c.type.value}(0);
                  let first : i32 = ${x};
                  let last : i32 = ${C};
                  for (var i : i32 = first; i < last; i++) {
                    ${l.indicesSet("inputIndices","uniforms.axis","u32(i)")};
                    sum = sum + ${l.getByIndices("inputIndices")};
                  }
                  ${c.setByOffset("global_idx","sum")};
                }`};return{name:"CumSum",shaderCache:{hint:i.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:e,dataType:t}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:[{type:12,data:o},{type:12,data:s},...X(e,e)]}),getShaderSource:u}},Zu=(t,e)=>{let n=t.inputs[0].dims,i=t.inputs[0].dataType,o=t.inputs[1];t.compute(Mp(i,n,o,e),{inputs:[0]})},Qu=t=>{let e=t.exclusive===1,n=t.reverse===1;return we({exclusive:e,reverse:n})}}),Up,Wp,Np,el,tl,rl=j(()=>{ye(),xe(),Ze(),_e(),Up=t=>{if(!t||t.length!==1)throw new Error("DepthToSpace requires 1 input.");if(t[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},Wp=(t,e,n,i)=>{let o=[];o.push(`fn perm(i: ${i.type.indices}) -> ${n.type.indices} {
    var a: ${n.type.indices};`);for(let a=0;a<e;++a)o.push(n.indicesSet("a",t[a],`i[${a}]`));return o.push("return a;}"),o.join(`
`)},Np=(t,e)=>{let n,i,o,a,l,c,p=e.format==="NHWC",s=e.blocksize,u=e.mode==="DCR";p?([n,i,o,a]=t.dims,l=u?[n,i,o,s,s,a/s**2]:[n,i,o,a/s**2,s,s],c=u?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([n,i,o,a]=[t.dims[0],t.dims[2],t.dims[3],t.dims[1]],l=u?[n,s,s,a/s**2,i,o]:[n,a/s**2,s,s,i,o],c=u?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let d=t.reshape(l),g=d.dims.length,w=t.dataType,x=U("a",w,g),C=K("output",w,g),O=Y=>`
  ${Y.registerUniform("output_size","u32").declareVariables(x,C)}

  ${Wp(c,g,x,C)}

  ${Y.mainStart()}
    ${Y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${C.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${C.setByOffset("global_idx",x.getByIndices("aIndices"))}
  }`;return{name:"DepthToSpace",shaderCache:{hint:`${t.dims};${e.blocksize};${e.mode}`,inputDependencies:["rank"]},getRunData:Y=>{let q=p?[n,i*s,o*s,a/s**2]:[n,a/s**2,i*s,o*s],ue=M.size(q),pe=d.dims,se=M.sortBasedOnPerm(pe,c);return{outputs:[{dims:q,dataType:Y[0].dataType}],dispatchGroup:{x:Math.ceil(ue/64)},programUniforms:[{type:12,data:ue},...X(pe,se)]}},getShaderSource:O}},el=(t,e)=>{Up(t.inputs),t.compute(Np(t.inputs[0],e))},tl=t=>we({blocksize:t.blocksize,mode:t.mode,format:t.format})}),bo,ai,nl,Vp,Hp,vo,wo,il,Gp,ol,al,sl=j(()=>{ye(),xe(),Ze(),_e(),bo="[a-zA-Z]|\\.\\.\\.",ai="("+bo+")+",nl="^"+ai+"$",Vp="("+ai+",)*"+ai,Hp="^"+Vp+"$",vo=class{constructor(t=-1){this.symbolToIndices=new Map,this.inputIndex=t}addSymbol(t,e){let n=this.symbolToIndices.get(t);n===void 0?n=[e]:n.push(e),this.symbolToIndices.set(t,n)}},wo=class{constructor(t,e){this.equation=e,this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[n,i]=e.includes("->")?e.split("->",2):[e,""];if(!n.match(RegExp(Hp)))throw new Error("Invalid LHS term");if(n.split(",").forEach((o,a)=>{let l=t[a].dims.slice();if(!o.match(RegExp(nl)))throw new Error("Invalid LHS term");let c=this.processTerm(o,!0,l,a);this.lhs.push(c)}),i==="")i+=[...this.symbolToInfo.entries()].filter(([o,a])=>a.count===1||o==="...").map(([o])=>o).join("");else if(!i.match(RegExp(ai)))throw new Error("Invalid RHS");i.match(RegExp(bo,"g"))?.forEach(o=>{if(o==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let a=this.symbolToInfo.get(o);if(a===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(a.dimValue)}}),this.rhs=this.processTerm(i,!1,this.outputDims)}addSymbol(t,e,n){let i=this.symbolToInfo.get(t);if(i!==void 0){if(i.dimValue!==e&&i.count!==1)throw new Error("Dimension mismatch");i.count++,i.inputIndices.push(n)}else i={count:1,dimValue:e,inputIndices:[n]};this.symbolToInfo.set(t,i)}processTerm(t,e,n,i=-1){let o=n.length,a=!1,l=[],c=0;if(!t.match(RegExp(nl))&&!e&&t!=="")throw new Error("Invalid LHS term");let p=t.match(RegExp(bo,"g")),s=new vo(i);return p?.forEach((u,d)=>{if(u==="..."){if(a)throw new Error("Only one ellipsis is allowed per input term");a=!0;let g=o-p.length+1;if(g<0)throw new Error("Ellipsis out of bounds");if(l=n.slice(c,c+g),this.hasEllipsis){if(this.ellipsisDims.length!==l.length||this.ellipsisDims.toString()!==l.toString())throw new Error("Ellipsis dimensions mismatch")}else if(e)this.hasEllipsis=!0,this.ellipsisDims=l;else throw new Error("Ellipsis must be specified in the LHS");for(let w=0;w<l.length;w++){let x=String.fromCharCode(48+w);s.addSymbol(x,d+w),this.addSymbol(x,n[c++],i)}}else s.addSymbol(u,d+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(u,n[c++],i)}),s}},il=t=>t+"_max",Gp=(t,e,n,i)=>{let o=t.map(s=>s.length).map((s,u)=>U(`input${u}`,e,s)),a=M.size(i),l=K("output",e,i.length),c=[...n.symbolToInfo.keys()].filter(s=>!n.rhs.symbolToIndices.has(s)),p=s=>{let u=[],d="var prod = 1.0;",g="var sum = 0.0;",w="sum += prod;",x=[],C=[],O=[],Y=[],q=n.symbolToInfo.size===n.rhs.symbolToIndices.size;n.symbolToInfo.forEach((pe,se)=>{if(n.rhs.symbolToIndices.has(se)){let Re=n.rhs.symbolToIndices.get(se)?.[0];Re!==void 0&&n.lhs.forEach((Oe,Ce)=>{if(pe.inputIndices.includes(Ce)){let He=Oe.symbolToIndices.get(se);if(He===void 0)throw new Error("Invalid symbol error");He.forEach($t=>{u.push(`${o[Ce].indicesSet(`input${Ce}Indices`,$t,l.indicesGet("outputIndices",Re))}`)})}})}else n.lhs.forEach((Re,Oe)=>{if(pe.inputIndices.includes(Oe)){let Ce=Re.symbolToIndices.get(se);if(Ce===void 0)throw new Error("Invalid symbol error");Ce.forEach(He=>{x.push(`${o[Oe].indicesSet(`input${Oe}Indices`,He,`${se}`)}`)}),Y.push(`prod *= ${o[Oe].getByIndices(`input${Oe}Indices`)};`)}}),C.push(`for(var ${se}: u32 = 0; ${se} < uniforms.${il(se)}; ${se}++) {`),O.push("}")});let ue=q?[...u,`let sum = ${o.map((pe,se)=>pe.getByIndices(`input${se}Indices`)).join(" * ")};`]:[...u,g,...C,...x,d,...Y,w,...O];return`
            ${s.registerUniforms(c.map(pe=>({name:`${il(pe)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...o,l)}

            ${s.mainStart()}
            ${s.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
            var outputIndices = ${l.offsetToIndices("global_idx")};
            ${o.map((pe,se)=>`var input${se}Indices: ${o[se].type.indices};`).join(`
`)}
            ${ue.join(`
`)};
            ${l.setByOffset("global_idx","sum")};
          }`};return{name:"Einsum",shaderCache:{hint:n.equation,inputDependencies:t.map(()=>"rank")},getRunData:()=>{let s=c.filter(d=>n.symbolToInfo.has(d)).map(d=>({type:12,data:n.symbolToInfo.get(d)?.dimValue||0}));s.push({type:12,data:a});let u=t.map((d,g)=>[...X(d)]).reduce((d,g)=>d.concat(g),s);return u.push(...X(i)),{outputs:[{dims:i,dataType:e}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:u}},getShaderSource:p}},ol=(t,e)=>{let n=new wo(t.inputs,e.equation),i=n.outputDims,o=t.inputs.map((a,l)=>a.dims);t.compute(Gp(o,t.inputs[0].dataType,n,i))},al=t=>{let e=t.equation.replace(/\s+/g,"");return we({equation:e})}}),Lp,ul,Fp,qp,ll,dl=j(()=>{ye(),xe(),_e(),Lp=t=>{if(!t||t.length!==2)throw new Error("Expand requires 2 input.");let e=t[0].dims,n=Array.from(t[1].getBigInt64Array(),Number),i=n.length<e.length?0:n.length-e.length,o=e.length<n.length?0:e.length-n.length;for(;i<n.length&&o<e.length;++i,++o)if(n[i]!==e[o]&&n[i]!==1&&e[o]!==1)throw new Error("Expand requires shape to be broadcastable to input")},ul=(t,e)=>{let n=t.length-e.length,i=[];for(let o=0;o<n;++o)i.push(t[o]);for(let o=0;o<e.length;++o)i.push(e[o]===1?t[o+n]:e[o]);return i},Fp=(t,e)=>t.length>e.length?ul(t,e):ul(e,t),qp=t=>{let e=t[0].dims,n=Array.from(t[1].getBigInt64Array(),Number),i=Fp(e,n),o=t[0].dataType,a=o===9?4:1,l=Math.ceil(M.size(i)/a),c=s=>{let u=U("input",o,e.length,a),d=K("output",o,i.length,a),g;if(o===9){let w=(x,C,O="")=>`
          let outputIndices${C} = ${d.offsetToIndices(`outputOffset + ${C}u`)};
          let offset${C} = ${u.broadcastedIndicesToOffset(`outputIndices${C}`,d)};
          let index${C} = offset${C} / 4u;
          let component${C} = offset${C} % 4u;
          ${x}[${C}] = ${O}(${u.getByOffset(`index${C}`)}[component${C}]);
        `;g=`
        let outputOffset = global_idx * ${a};
        var data = vec4<u32>(0);
        ${w("data",0,"u32")}
        ${w("data",1,"u32")}
        ${w("data",2,"u32")}
        ${w("data",3,"u32")}
        ${d.setByOffset("global_idx","data")}
      }`}else g=`
        let outputIndices = ${d.offsetToIndices("global_idx")};
        let inputOffset = ${u.broadcastedIndicesToOffset("outputIndices",d)};
        ${d.setByOffset("global_idx",u.getByOffset("inputOffset"))}
      }`;return`
    ${s.registerUniform("vec_size","u32").declareVariables(u,d)}
    ${s.mainStart()}
    ${s.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
    ${g}`},p=[{type:12,data:l},...X(e,i)];return{name:"Expand",shaderCache:{hint:`${i.length}`,inputDependencies:["rank"]},getShaderSource:c,getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:p})}},ll=t=>{Lp(t.inputs),t.compute(qp(t.inputs),{inputs:[0]})}}),jp,cl,pl=j(()=>{ye(),xe(),_e(),Jn(),jp=t=>{let e=t[0].dataType,n=M.size(t[0].dims),i=M.size(t[1].dims),o=i%4===0,a=l=>{let c=U("x",e,[1],4),p=U("bias",e,[1],4),s=K("y",e,[1],4),u=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],d=w=>`
      let bias${w}_offset: u32 = (global_idx * 4 + ${w}) % uniforms.bias_size;
      let bias${w} = ${p.getByOffset(`bias${w}_offset / 4`)}[bias${w}_offset % 4];`,g=o?`
      let bias = ${p.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${d(0)}${d(1)}${d(2)}${d(3)}
      let bias = ${c.type.value}(bias0, bias1, bias2, bias3);`;return`${l.registerUniforms(u).declareVariables(c,p,s)}

    ${ao(rt(e))}

    ${l.mainStart(mr)}
      ${l.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}

      let x = ${c.getByOffset("global_idx")};
      ${g}
      let x_in = x + bias;
      ${s.setByOffset("global_idx",so("x_in"))}
    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${o}`,inputDependencies:["type","type"]},getShaderSource:a,getRunData:l=>({outputs:[{dims:l[0].dims,dataType:l[0].dataType}],programUniforms:[{type:12,data:Math.ceil(n/4)},{type:12,data:i}],dispatchGroup:{x:Math.ceil(n/mr/4)}})}},cl=t=>{t.inputs.length<2||M.size(t.inputs[1].dims)===0?wu(t):t.compute(jp(t.inputs))}}),Kp,Yp,ml,fl,hl=j(()=>{ye(),xe(),Ze(),_e(),Kp=t=>{if(!t||t.length!==2)throw new Error("Gather requires 2 inputs.")},Yp=(t,e)=>{let n=t[0].dims,i=t[1].dims,o=n.length,a=M.normalizeAxis(e.axis,o),l=n.slice(0);l.splice(a,1,...i);let c=n[a],p=t[0].dataType===9?4:1,s=Math.ceil(M.size(l)/p),u=[{type:12,data:s},{type:6,data:c},{type:12,data:a},...X(t[0].dims,t[1].dims,l)],d=g=>{let w=U("data",t[0].dataType,t[0].dims.length,p),x=U("inputIndices",t[1].dataType,t[1].dims.length),C=K("output",t[0].dataType,l.length,p),O=q=>{let ue=i.length,pe=`var indicesIndices${q}  = ${x.type.indices}(0);`;for(let se=0;se<ue;se++)pe+=`${ue>1?`indicesIndices${q}[${se}]`:`indicesIndices${q}`} = ${l.length>1?`outputIndices${q}[uniforms.axis + ${se}]`:`outputIndices${q}`};`;pe+=`
          var idx${q} = ${x.getByIndices(`indicesIndices${q}`)};
          if (idx${q} < 0) {
            idx${q} = idx${q} + uniforms.axisDimLimit;
          }
          var dataIndices${q} : ${w.type.indices};
        `;for(let se=0,Re=0;se<o;se++)se===a?(pe+=`${o>1?`dataIndices${q}[${se}]`:`dataIndices${q}`} = u32(idx${q});`,Re+=ue):(pe+=`${o>1?`dataIndices${q}[${se}]`:`dataIndices${q}`} = ${l.length>1?`outputIndices${q}[${Re}]`:`outputIndices${q}`};`,Re++);return pe},Y;if(t[0].dataType===9){let q=(ue,pe,se="")=>`
          let outputIndices${pe} = ${C.offsetToIndices(`outputOffset + ${pe}u`)};
          ${O(pe)};
          let offset${pe} = ${w.indicesToOffset(`dataIndices${pe}`)};
          let index${pe} = offset${pe} / 4u;
          let component${pe} = offset${pe} % 4u;
          ${ue}[${pe}] = ${se}(${w.getByOffset(`index${pe}`)}[component${pe}]);
        `;Y=`
        let outputOffset = global_idx * ${p};
        var value = vec4<u32>(0);
        ${q("value",0,"u32")}
        ${q("value",1,"u32")}
        ${q("value",2,"u32")}
        ${q("value",3,"u32")}
        ${C.setByOffset("global_idx","value")}
      `}else Y=`
      let outputIndices = ${C.offsetToIndices("global_idx")};
      ${O("")};
      let value = ${w.getByIndices("dataIndices")};
      ${C.setByOffset("global_idx","value")};
      `;return`
      ${g.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(w,x,C)}
      ${g.mainStart()}
        ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        ${Y}
      }`};return{name:"Gather",shaderCache:{hint:e.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:l,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:u}),getShaderSource:d}},ml=t=>we({axis:t.axis}),fl=(t,e)=>{let n=t.inputs;Kp(n),t.compute(Yp(t.inputs,e))}}),Xp,Zp,gl,yl,bl=j(()=>{ye(),xe(),Ze(),_e(),Xp=t=>{if(!t||t.length!==2)throw new Error("GatherElements requires 2 inputs.");if(t[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(t[0].dims.length!==t[1].dims.length)throw new Error(`GatherElements requires that the data input and
                     indices input tensors be of same rank.`)},Zp=(t,e)=>{let n=t[0].dims,i=t[0].dataType,o=n.length,a=t[1].dims,l=t[1].dataType,c=M.normalizeAxis(e.axis,o),p=n[c],s=a.slice(0),u=M.size(s),d=U("input",i,o),g=U("indicesInput",l,a.length),w=K("output",i,s.length),x=[{type:12,data:u},{type:6,data:p},{type:12,data:c}];return x.push(...X(n,a,s)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:s,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:x}),getShaderSource:C=>`
      ${C.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(d,g,w)}
      ${C.mainStart()}
      ${C.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

      let outputIndices = ${w.offsetToIndices("global_idx")};

      var idx = ${g.getByOffset("global_idx")};
      if (idx < 0) {
        idx = idx + uniforms.axisDimLimit;
      }
      var inputIndices = ${d.type.indices}(outputIndices);
      ${d.indicesSet("inputIndices","uniforms.axis","u32(idx)")};
      let value = ${d.getByIndices("inputIndices")};

      ${w.setByOffset("global_idx","value")};
  }`}},gl=t=>we({axis:t.axis}),yl=(t,e)=>{let n=t.inputs;Xp(n),t.compute(Zp(t.inputs,e))}}),Qp,Jp,vl,wl,$l=j(()=>{ye(),xe(),_e(),Qp=t=>{if(!t)throw new Error("Input is missing");if(t.length<2||t.length>3)throw new Error("Invaid input number.");if(t.length===3&&t[2].dims.length>2)throw new Error("Invalid input shape of C");if(t[0].dataType!==t[1].dataType||t.length===3&&t[0].dataType!==t[2].dataType)throw new Error("Input types are mismatched")},Jp=(t,e)=>{let n=t[0].dims.slice(),i=t[1].dims.slice(),[o,a,l]=Gn.getShapeOfGemmResult(n,e.transA,i,e.transB,t.length===3?t[2].dims:void 0),c=[o,a];if(!c)throw new Error("Can't use gemm on the given tensors");let p=M.size(c),s=[{type:12,data:p},{type:12,data:o},{type:12,data:a},{type:12,data:l},{type:1,data:e.alpha},{type:1,data:e.beta}],u=["type","type"];t.length===3&&(s.push(...X(t[2].dims)),u.push("rank")),s.push(...X(c));let d=g=>{let w="";e.transA&&e.transB?w="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":e.transA&&!e.transB?w="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!e.transA&&e.transB?w="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!e.transA&&!e.transB&&(w="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let x=e.alpha===1?"":"value *= uniforms.alpha;",C=U("a",t[0].dataType,t[0].dims),O=U("b",t[1].dataType,t[1].dims),Y=C.type.value,q=null,ue=[C,O];t.length===3&&(q=U("c",t[2].dataType,t[2].dims.length),ue.push(q));let pe=K("output",t[0].dataType,c.length);ue.push(pe);let se=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`
  ${g.registerUniforms(se).declareVariables(...ue)}

  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let m = global_idx / uniforms.N;
    let n = global_idx % uniforms.N;

    var value = ${Y}(0);
    for (var k: u32 = 0u; k < uniforms.K; k++) {
      ${w}
    }

    ${x}
    ${q!=null?`let cOffset = ${q.broadcastedIndicesToOffset("vec2(m, n)",pe)}; value += ${Y}(uniforms.beta) * ${q.getByOffset("cOffset")};`:""}
    output[global_idx] = value;
  }`};return{name:"Gemm",shaderCache:{hint:`${e.cacheKey}`,inputDependencies:u},getRunData:()=>({outputs:[{dims:c,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:s}),getShaderSource:d}},vl=t=>{let e=t.transA,n=t.transB,i=t.alpha,o=t.beta;return{transA:e,transB:n,alpha:i,beta:o,cacheKey:`${t.transA};${t.transB};${t.alpha===1}`}},wl=(t,e)=>{Qp(t.inputs),t.compute(Jp(t.inputs,e))}}),em,tm,rm,_l,xl=j(()=>{ye(),xe(),_e(),em=(t,e)=>{let n=t[0].dims,i=n,o=2,a=M.sizeToDimension(n,o),l=M.sizeFromDimension(n,o),c=Ue(l),p=l/c,s=[n[0],n[1],p],u=["rank","type","type"],d=[{type:12,data:l},{type:12,data:p}];d.push(...X(s,s));let g=w=>{let x=U("x",t[0].dataType,s.length,c),C=U("scale",t[1].dataType,t[1].dims),O=U("bias",t[2].dataType,t[2].dims),Y=K("output",t[0].dataType,s.length,c),q=[x,C,O,Y],ue=x.type.value,pe=c===1?"f32":`vec${c}<f32>`,se=64,Re=[{name:"normSize",type:"u32"},{name:"normPackedSize",type:"u32"}];return`
  var<workgroup> meanShared : f32;
  var<workgroup> squaredNormShared : f32;
  var<workgroup> workgroupShared : array<${pe}, ${se}>;
  const workgroupSize = ${se}u;
  ${w.registerUniforms(Re).declareVariables(...q)}
  ${w.mainStart(se)}
    let norm = global_idx / workgroupSize;
    let batch = norm / uniforms.x_shape[1];
    let channel = norm % uniforms.x_shape[1];
    let localIndex = local_id.x;

    // initialize workgroup memory
    var initial = ${pe}(0);
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      initial = initial + ${pe}(${x.get("batch","channel","h")});
    }
    workgroupShared[localIndex] = initial;
    workgroupBarrier();

    // Calculate the mean of current channel data.
    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (localIndex < currSize) {
        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];
      }
      workgroupBarrier();
    }
    if (localIndex == 0) {
      meanShared = ${Et("workgroupShared[0]",c)} / f32(uniforms.normSize);
    }
    workgroupBarrier();

    // reinitialize workgroup memory.
    initial = ${pe}(0);
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      let deviation =  ${pe}(${x.get("batch","channel","h")}) - ${pe}(meanShared);
      initial = initial + deviation * deviation;
    }
    workgroupShared[localIndex] = initial;
    workgroupBarrier();

    // Calculate the sum of square of deviation of current channel data.
    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (localIndex < currSize) {
        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];
      }
      workgroupBarrier();
    }
    if (localIndex == 0) {
      squaredNormShared = ${Et("workgroupShared[0]",c)};
    }
    workgroupBarrier();

    let invStdDev = inverseSqrt(squaredNormShared / f32(uniforms.normSize) + f32(${e.epsilon}));
    let channelScale = invStdDev * f32(${C.getByOffset("channel")});
    let channelShift = f32(${O.getByOffset("channel")}) - meanShared * channelScale;
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      let value = ${x.get("batch","channel","h")} * ${ue}(${pe}(channelScale)) + ${ue}(${pe}(channelShift));
      ${Y.set("batch","channel","h","value")};
    }
  }`};return{name:"InstanceNormalization",shaderCache:{hint:`${e.epsilon};${c}`,inputDependencies:u},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:a},programUniforms:d}),getShaderSource:g}},tm=(t,e,n,i,o,a,l,c)=>{let p=Ue(l),s=64,u=p===1?"vec2f":`mat2x${p}f`,d=p===1?"f32":`vec${p}f`,g=(Re,Oe)=>`${u}(${Re}, ${Oe})`,w=o*l/p,x=Math.ceil(a/s),C=["type"],O=[{type:12,data:x},{type:12,data:a},{type:12,data:Math.floor(l/p)},{type:12,data:Math.floor(a*l/p)}],Y=Re=>{let Oe=U("input",e.dataType,e.dims,p);return`
  ${Re.declareVariables(Oe)}
  @group(0) @binding(1) var<storage, read_write> output : array<${u}>;
  struct Uniforms {wg_size:u32, H:u32, C:u32, image_size:u32};
  @group(0) @binding(2) var<uniform> uniforms: Uniforms;

  ${Re.mainStart(s)}
    let currentImageNumber = global_idx / ${s} / uniforms.C;
    let currentChannelNumber = (global_idx / ${s}) % uniforms.C;
    let wgOffset = local_id.x * uniforms.wg_size;
    if (wgOffset >= uniforms.H) {
        return;
    }
    let wgMax = min(wgOffset + uniforms.wg_size, uniforms.H);

    let offset = currentImageNumber * uniforms.image_size + currentChannelNumber;
    var sum = ${At("f32",p)};
    var squaredSum = ${At("f32",p)};
    for (var i: u32 = wgOffset; i < wgMax; i++) {
        let value = ${d}(input[offset + i * uniforms.C]);
        sum += value;
        squaredSum += value * value;
    }
    output[global_idx] = ${g("sum","squaredSum")};
  }`},q=t.compute({name:"InstanceNormComputeMean",shaderCache:{hint:`${p}`,inputDependencies:C},getRunData:()=>({outputs:[{dims:[o,l,s,2],dataType:1}],dispatchGroup:{x:o*l/p},programUniforms:O}),getShaderSource:Y},{inputs:[e],outputs:[-1]})[0],ue=[{type:12,data:w},{type:12,data:a},{type:12,data:Math.floor(l/p)},{type:12,data:Math.floor(s*l/p)}],pe=["type","type","type"],se=Re=>{let Oe=U("scale",n.dataType,n.dims,p),Ce=U("bias",i.dataType,i.dims,p);return`
  @group(0) @binding(0) var<storage, read> input : array<${u}>;
  @group(0) @binding(1) var<storage, read> scale : array<${Oe.type.storage}>;
  @group(0) @binding(2) var<storage, read> bias : array<${Ce.type.storage}>;
  @group(0) @binding(3) var<storage, read_write> output : array<${u}>;
  struct Uniforms {units_of_work : u32, H: u32, C : u32, image_size : u32};
  @group(0) @binding(4) var<uniform> uniforms: Uniforms;

  ${Re.mainStart()}
    ${Re.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.units_of_work")}
    let currentImageNumber = global_idx / uniforms.C;
    let currentChannelNumber = global_idx % uniforms.C;

    let offset = currentImageNumber * uniforms.image_size;
    var sum = ${At("f32",p)};
    var squaredSum = ${At("f32",p)};
    for (var i: u32 = 0; i < min(${s}, uniforms.H); i++) {
        let value = input[offset + i + currentChannelNumber * ${s}];
        sum += value[0];
        squaredSum += value[1];
    }
    sum = sum / f32(uniforms.H);
    squaredSum = squaredSum / f32(uniforms.H);
    let invStdDev = inverseSqrt(squaredSum - sum * sum + f32(${c}));
    let channelScale = invStdDev * ${d}(scale[currentChannelNumber]);
    let channelShift = ${d}(bias[currentChannelNumber]) - sum * channelScale;

    output[global_idx] = ${g("channelScale","channelShift")};
  }`};return t.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${p};${c}`,inputDependencies:pe},getRunData:()=>({outputs:[{dims:[o,l,2],dataType:1}],dispatchGroup:{x:Math.ceil(w/64)},programUniforms:ue}),getShaderSource:se},{inputs:[q,n,i],outputs:[-1]})[0]},rm=(t,e,n)=>{let i=e[0].dims,o=i,a=i[0],l=i[i.length-1],c=M.sizeFromDimension(i,1)/l,p=Ue(l),s=M.size(o)/p,u=[{type:12,data:c},{type:12,data:Math.floor(l/p)}],d=["type","type"],g=tm(t,e[0],e[1],e[2],a,c,l,n.epsilon),w=x=>{let C=De(e[0].dataType),O=p===1?"vec2f":`mat2x${p}f`,Y=p===1?C:`vec${p}<${C}>`,q=U("input",e[0].dataType,e[0].dims,p),ue=K("output",e[0].dataType,o,p);return`
  @group(0) @binding(0) var<storage, read> input : array<${q.type.storage}>;
  @group(0) @binding(1) var<storage, read> scaleInput : array<${O}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${ue.type.storage}>;
  struct Uniforms {H: u32, C : u32};
  @group(0) @binding(3) var<uniform> uniforms: Uniforms;

  ${x.mainStart()}
    let currentImageNumber = global_idx / (uniforms.C * uniforms.H);
    let currentChannelNumber = global_idx % uniforms.C;

    let scaleOffset = currentImageNumber * uniforms.C + currentChannelNumber;
    let scale = scaleInput[scaleOffset];
    output[global_idx] = fma(input[global_idx], ${Y}(scale[0]), ${Y}(scale[1]));
  }`};t.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${p}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:u}),getShaderSource:w},{inputs:[e[0],g]})},_l=(t,e)=>{e.format==="NHWC"?rm(t,t.inputs,e):t.compute(em(t.inputs,e))}}),nm,im,Sl,Cl=j(()=>{ye(),xe(),_e(),nm=t=>{if(!t||t.length<2)throw new Error("layerNorm requires at least 2 inputs.")},im=(t,e,n)=>{let i=e.simplified,o=t[0].dims,a=t[1],l=!i&&t[2],c=o,p=M.normalizeAxis(e.axis,o.length),s=M.sizeToDimension(o,p),u=M.sizeFromDimension(o,p),d=M.size(a.dims),g=l?M.size(l.dims):0;if(d!==u||l&&g!==u)throw new Error(`Size of X.shape()[axis:] == ${u}.
       Size of scale and bias (if provided) must match this.
       Got scale size of ${d} and bias size of ${g}`);let w=[];for(let se=0;se<o.length;++se)se<p?w.push(o[se]):w.push(1);let x=Ue(u),C=["type","type"],O=[{type:12,data:s},{type:1,data:u},{type:12,data:Math.floor(u/x)},{type:1,data:e.epsilon}];l&&C.push("type");let Y=n>1,q=n>2,ue=se=>{let Re=De(t[0].dataType),Oe=[U("x",t[0].dataType,t[0].dims,x),U("scale",a.dataType,a.dims,x)];l&&Oe.push(U("bias",l.dataType,l.dims,x)),Oe.push(K("output",t[0].dataType,c,x)),Y&&Oe.push(K("mean_data_output",1,w)),q&&Oe.push(K("inv_std_output",1,w));let Ce=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`
  ${se.registerUniforms(Ce).declareVariables(...Oe)}
  ${se.mainStart()}
    ${se.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}
    let offset = global_idx * uniforms.norm_size_vectorized;
    var mean_vector = ${At("f32",x)};
    var mean_square_vector = ${At("f32",x)};

    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {
      let value = ${fr(Re,x,"x[h + offset]")};
      mean_vector += value;
      mean_square_vector += value * value;
    }
    let mean = ${Et("mean_vector",x)} / uniforms.norm_size;
    let inv_std_dev = inverseSqrt(${Et("mean_square_vector",x)} / uniforms.norm_size ${i?"":"- mean * mean"} + uniforms.epsilon);

    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {
      let f32input = ${fr(Re,x,"x[j + offset]")};
      let f32scale = ${fr(Re,x,"scale[j]")};
      output[j + offset] = ${Oe[0].type.value}((f32input ${i?"":"- mean"}) * inv_std_dev * f32scale
        ${l?`+ ${fr(Re,x,"bias[j]")}`:""}
      );
    }

    ${Y?"mean_data_output[global_idx] = mean":""};
    ${q?"inv_std_output[global_idx] = inv_std_dev":""};
  }`},pe=[{dims:c,dataType:t[0].dataType}];return Y&&pe.push({dims:w,dataType:1}),q&&pe.push({dims:w,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${x};${n};${i}`,inputDependencies:C},getRunData:()=>({outputs:pe,dispatchGroup:{x:Math.ceil(s/64)},programUniforms:O}),getShaderSource:ue}},Sl=(t,e)=>{nm(t.inputs),t.compute(im(t.inputs,e,t.outputCount))}}),om,am,Il,Tl,Al=j(()=>{ye(),xe(),Ze(),_e(),om=(t,e)=>{if(t.length<3||t.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let n=t[0],i=n.dims.length;if(n.dims[i-1]!==e.k)throw new Error("The last dim of input shape does not match the k value");let o=Math.floor((e.k+e.blockSize-1)/e.blockSize),a=e.blockSize/8*e.bits,l=t[1];if(!M.areEqual(l.dims,[e.n,o,a]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let c=t[2].dims;if(M.size(c)!==e.n*o)throw new Error("scales input size error.");if(t.length===4){let p=t[3].dims,s=e.bits>4?e.n*o:e.n*Math.floor((o+1)/2);if(M.size(p)!==s)throw new Error("zeroPoints input size error.")}},am=(t,e,n,i)=>{let o=t[0].dims,a=o.length,l=Math.floor((e.k+e.blockSize-1)/e.blockSize),c=o[a-2],p=e.k,s=e.n,u=o.slice(0,a-2),d=M.size(u),g=e.blockSize/8*e.bits/4,w=t[0].dataType,x=Ue(c),C=Ue(e.k),O=Ue(g),Y=cr(w),q=c*l*Y,ue=Math.floor(i/q),pe=l<=n[0]&&ue>0,se=!pe||ue>=4?Ue(s):ue>=2&&Ue(s)>=2?2:1,Re=u.concat([c,s]),Oe=M.size(Re)/se/x,Ce=pe?[]:[{type:12,data:Oe},{type:12,data:e.blockSize}],He=[d,c,p/C],$t=M.convertShape(t[1].dims).slice();$t.splice(-1,1,g/O),Ce.push(...X(He)),Ce.push(...X($t)),Ce.push(...X(t[2].dims)),t.length===4&&Ce.push(...X(M.convertShape(t[3].dims)));let Sn=[d,c,s/se];Ce.push(...X(Sn));let xn=Lr=>{let jr=He.length,et=U("a",t[0].dataType,jr,C),Ft=U("b",12,$t.length,O),Tt=U("scales",t[2].dataType,t[2].dims.length),ze=[et,Ft,Tt],Ht=t.length===4?U("zero_points",12,t[3].dims.length):void 0;Ht&&ze.push(Ht);let Ae=Sn.length,Be=K("output",t[0].dataType,Ae,se),tr=[{name:"output_size",type:"u32"},{name:"block_size",type:"u32"}],No=De(t[0].dataType),ah=(()=>{switch(C){case 1:return`array<${No}, 8>`;case 2:return`mat4x2<${No}>`;case 4:return`mat2x4<${No}>`;default:throw new Error(`${C}-component is not supported.`)}})(),Mo=`
        for (var word: u32 = 0; word < ${g}; word += ${O}) {
          ${Ft.indicesSet("b_indices","2","word")};
          let b_data = ${Ft.getByIndices("b_indices")};
          for (var i: u32 = 0; i < ${O}; i++) {
            let b_value: u32 = ${O===1?"b_data":"b_data[word + i]"};
            let b_mask: u32 = 0x0F0F0F0Fu;
            let b_value_lower: vec4<u32> = unpack4xU8(b_value & b_mask);
            let b_value_upper: vec4<u32> = unpack4xU8((b_value >> 4) & b_mask);
            let b_quantized_values = ${ah}(${Array.from({length:4},(o0,Xr)=>`${No}(b_value_lower[${Xr}]), ${No}(b_value_upper[${Xr}])`).join(", ")});
            let b_dequantized_values = ${C===1?`${ah}(${Array.from({length:8},(o0,Xr)=>`(b_quantized_values[${Xr}] - zero_point) * scale`).join(", ")});`:`(b_quantized_values - ${ah}(${Array(8).fill("zero_point").join(",")})) * scale;`};
            // Number of B elements per 32-bit word is 32/bits = 32/4 = 8
            for (var m: u32 = 0; m < ${pe?c:x}u; m++) {
              ${et.indicesSet("a_indices",jr-2,pe?"m":`row * ${x} + m`)};
              ${et.indicesSet("a_indices",jr-1,"word_offset")};
              var input_offset = ${et.indicesToOffset("a_indices")};
              var a_data: ${ah};
              for (var j: u32 = 0; j < ${8/C}; j++) {
                a_data[j] = ${et.getByOffset("input_offset")};
                input_offset++;
              }
              ${pe?"workgroup_shared[workgroup_shared_offset + m]":"output_values[m]"}${se>1?"[c]":""} += ${Array.from({length:8/C},(o0,Xr)=>`${C===1?`a_data[${Xr}] * b_dequantized_values[${Xr}]`:`dot(a_data[${Xr}], b_dequantized_values[${Xr}])`}`).join(" + ")};
            }
            word_offset += ${8/C};
          }
        }`,t0=Ht?`
          zero_point_offset += 4;
          if (zero_point_offset == 32) {
            zero_point_offset = 0;
            zero_point_index++;
            zero_point_word = ${Ht.getByOffset("zero_point_index")};
          }`:"";return pe?`
        var<workgroup> workgroup_shared: array<${Be.type.value}, ${c*l}>;
        ${Lr.declareVariables(...ze,Be)}
        ${Lr.mainStart([l,1,1])}
          var a_indices: ${et.type.indices};
          var block = local_id.x;
          var col = workgroup_id.y;
          var batch = workgroup_id.z;
          ${et.indicesSet("a_indices","0","batch")};
          // Two zero points are packed into one byte when uniforms.bits is 4.
          for (var c: u32 = 0; c < ${se}; c++) {
            let col_times_components_plus_c = col * ${se} + c;
              ${Ht?`
            var zero_point_bytes_per_col: u32 = (${l} + 1) / 2;
            var zero_point_byte_count: u32 = col_times_components_plus_c * zero_point_bytes_per_col + (block >> 0x1u);
            var zero_point_word_index: u32 = zero_point_byte_count >> 0x2u;
            var zero_point_byte_offset: u32 = zero_point_byte_count & 0x3u;
            var zero_point_nibble_offset: u32 = block & 0x1u;
            var zero_point_bits_offset: u32 = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            var zero_point_word: u32 = ${Ht.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;`:""}
            var b_indices: ${Ft.type.indices};
            ${Ft.indicesSet("b_indices","0","col_times_components_plus_c")};
            // The scale and zero points are computed per block.
            var scales_index = col_times_components_plus_c * ${l} + block;
            let scale = ${Tt.getByOffset("scales_index")};
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${No}(${Ht?"(zero_point_word) & 0xFu":8});
            ${Ft.indicesSet("b_indices","1","block")};
            var word_offset: u32 = block * ${e.blockSize/C};
            var workgroup_shared_offset: u32 = block * ${c};
            ${Mo}
          }
          workgroupBarrier();
          if (local_id.x == 0u) {
            var output_indices: ${Be.type.indices};
            ${Be.indicesSet("output_indices","0","batch")};
            ${Be.indicesSet("output_indices",Ae-1,"col")};
            ${Be.indicesSet("output_indices",Ae-2,"0")};
            var output_offset = ${Be.indicesToOffset("output_indices")};
            for (var m: u32 = 0u; m < ${c}u; m++) {
              var output_value: ${Be.type.value} = ${Be.type.value}(0);
              var workgroup_shared_offset: u32 = m;
              for (var b: u32 = 0u; b < ${l}u; b++) {
                output_value += workgroup_shared[workgroup_shared_offset];
                workgroup_shared_offset += ${c};
              }
              ${Be.setByOffset("output_offset","output_value")};
              output_offset += ${s/se};
            }
          }
        }`:`
        ${Lr.registerUniforms(tr).declareVariables(...ze,Be)}
        ${Lr.mainStart()}
          ${Lr.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var output_values: array<${Be.type.value}, ${x}>;
          var output_indices = ${Be.offsetToIndices("global_idx")};
          var col = ${Be.indicesGet("output_indices",Ae-1)};
          var row = ${Be.indicesGet("output_indices",Ae-2)};
          var a_indices: ${et.type.indices} = output_indices;
          // Two zero points are packed into one byte because uniforms.bits <= 4.
          // zero_point_offset is either 0 or 4. It is bit offset within one byte.
          // TODO support zero_point_offset for bits > 4
          ${Ht?`
          var zero_point_abs_offset = col * ${se} * ((${l} + 1) / 2);
          var zero_point_index: u32 = zero_point_abs_offset / 4;
          var zero_point_word: u32 = ${Ht.getByOffset("zero_point_index")};
          var zero_point_offset: u32 = (zero_point_abs_offset % 4) * 8;`:""}
          var scale_index = col * ${l*se};
          var b_indices: ${Ft.type.indices};
          for (var c: u32 = 0; c < ${se}; c++) {
            ${Ft.indicesSet("b_indices","0",`col * ${se} + c`)};
            var block_offset: u32 = 0;
            for (var block: u32 = 0; block < ${l}; block++) {
              // The scale and zero points are computed per block.
              let scale = ${Tt.getByOffset("scale_index")};
              // The default zero point is 8 for unsigned 4-bit quantization.
              let zero_point = ${No}(${Ht?"extractBits(zero_point_word, zero_point_offset, 4)":8});
              ${Ft.indicesSet("b_indices","1","block")};
              var word_offset: u32 = block_offset;
              ${Mo}
              scale_index++;
              ${t0}
              block_offset += uniforms.block_size / ${C};
            }
            // Drop the trailing 4 bits if the zero_poit_offset is not a byte boundary to align with the next byte.
            ${Ht?`if (zero_point_offset % 8 > 0) {
                ${t0}
              }`:""}
            }
            for (var k: u32 = 0u; k < ${x}u; k++) {
              ${Be.indicesSet("output_indices",Ae-2,`${x} * row + k`)};
              ${Be.setByIndices("output_indices","output_values[k]")}
            }
        }`};return{name:pe?"BlockwiseMatMulNBits":"MatMulNBits",shaderCache:{hint:`${e.cacheKey};${c};${w};${t.length}`,inputDependencies:Array(t.length).fill("rank")},getRunData:()=>({outputs:[{dims:Re,dataType:w}],name:pe?"BlockwiseMatMulNBits":"MatMulNBits",dispatchGroup:pe?{x:1,y:Math.ceil(s/se),z:d}:{x:Math.ceil(Oe/64)},programUniforms:Ce}),getShaderSource:xn}},Il=(t,e)=>{om(t.inputs,e);let n=t.getMaxComputeWorkgroupSizes(),i=t.getMaxComputeWorkgroupStoragesize();t.compute(am(t.inputs,e,n,i))},Tl=t=>we(t)}),lt,sm,kl,El,um,$o,Ol,Pl=j(()=>{ye(),xe(),Ze(),Hn(),oo(),_e(),Rr(),lt=(t,e)=>t.length>e&&t[e].dims.length>0&&M.size(t[e].dims)>0?t[e]:void 0,sm=(t,e)=>{let n=t[0],i=lt(t,1),o=lt(t,2),a=lt(t,3),l=lt(t,4),c=lt(t,5),p=lt(t,6),s=lt(t,7);if(n.dims.length!==3&&n.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let u=!1,d=n.dims[0],g=n.dims[1],w=n.dims.length===3?u?n.dims[2]/3:n.dims[2]:e.numHeads*n.dims[4],x=g,C=0,O=0,Y=Math.floor(w/e.numHeads);if(p&&s){if(p.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(p.dims[0]!==d||p.dims[1]!==e.numHeads||p.dims[3]!==Y)throw new Error('Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)');if(s.dims[0]!==d||s.dims[1]!==e.numHeads||s.dims[3]!==Y)throw new Error('Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)');if(p.dims[2]!==s.dims[2])throw new Error('Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)');if(s.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');C=p.dims[2],O=p.dims[2]}else if(p||s)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let q;if(i){if(n.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(i.dims.length<3||i.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(n.dims[0]!==i.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(i.dims.length===3){if(i.dims[2]!==n.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');q=2,x=i.dims[1]}else if(i.dims.length===5){if(i.dims[2]!==e.numHeads||i.dims[3]!==2||i.dims[4]!==Y)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(o)throw new Error('Expect "value" be none when "key" has packed kv format.');q=5,x=i.dims[1]}else{if(i.dims[1]!==e.numHeads||i.dims[3]!==Y)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');q=0,x=i.dims[2]}}else{if(n.dims.length!==3&&n.dims.length!==5)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(n.dims.length===5&&(n.dims[2]!==e.numHeads||n.dims[3]!==3))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');q=3}if(a){if(a.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimension');if(o&&n.dims.length===5&&n.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let ue=0;if(l){ue=8;let Ce=l.dims;throw Ce.length===1?Ce[0]===d?ue=1:Ce[0]===3*d+2&&(ue=3):Ce.length===2&&Ce[0]===d&&Ce[1]===x&&(ue=5),ue===8?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, kv_sequence_length)'):new Error("Mask not supported")}let pe=!1,se=w;if(o){if(o.dims.length!==3&&o.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(n.dims[0]!==o.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(o.dims.length===3){if(x!==o.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');se=o.dims[2]}else{if(x!==o.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');se=o.dims[1]*o.dims[3],pe=!0}}let Re=C+x,Oe=!1;if(l)throw new Error("Key padding mask is not supported");if(c){if(c.dims.length!==4)throw new Error('Input "relative_position_bias" is expected to have 4 dimensions');if(c.dims[0]!==d&&c.dims[0]!==1||c.dims[1]!==e.numHeads||c.dims[2]!==g||c.dims[3]!==Re)throw new Error('Input "relative_position_bias" shape (batch_size, 1, sequence_length, kv_sequence_length)')}return{batchSize:d,sequenceLength:g,pastSequenceLength:C,kvSequenceLength:x,totalSequenceLength:Re,maxSequenceLength:O,inputHiddenSize:0,hiddenSize:w,vHiddenSize:se,headSize:Y,vHeadSize:Math.floor(se/e.numHeads),numHeads:e.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:e.maskFilterValue,maskType:ue,scale:e.scale,broadcastResPosBias:Oe,passPastInKv:pe,qkvFormat:q}},kl=t=>we({...t}),El=we({perm:[0,2,1,3]}),um=(t,e,n,i,o,a,l)=>{let c=[i,o,a],p=M.size(c),s=[{type:12,data:p},{type:12,data:l},{type:12,data:a}],u=d=>{let g=K("qkv_with_bias",e.dataType,c),w=U("qkv",e.dataType,c),x=U("bias",n.dataType,c),C=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`
  ${d.registerUniforms(C).declareVariables(w,x,g)}
  ${d.mainStart()}
    ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;

    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];
  }`};return t.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:c,dataType:e.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:s}),getShaderSource:u},{inputs:[e,n],outputs:[-1]})[0]},$o=(t,e,n,i,o,a,l,c)=>{let p=a;if(l){if(i===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return p=um(t,a,l,e,i,n*o,c),p=p.reshape([e,i,n,o]),t.compute(xt(p,El.perm),{inputs:[p],outputs:[-1]})[0]}else return a.dims.length===3&&(p=a.reshape([e,i,n,o])),t.compute(xt(p,El.perm),{inputs:[p],outputs:[-1]})[0]},Ol=(t,e)=>{let n=sm(t.inputs,e),i=t.inputs[0],o=lt(t.inputs,1),a=lt(t.inputs,2),l=lt(t.inputs,3),c=lt(t.inputs,4),p=lt(t.inputs,5),s=lt(t.inputs,6),u=lt(t.inputs,7);if(i.dims.length===5)throw new Error("Packed QKV is not implemented");if(o?.dims.length===5)throw new Error("Packed KV is not implemented");let d=o&&a&&o.dims.length===4&&a.dims.length===4,g=$o(t,n.batchSize,n.numHeads,n.sequenceLength,n.headSize,i,l,0);if(d)return Xn(t,g,o,a,c,void 0,s,u,p,n,e);if(!o||!a)throw new Error("key and value must be provided");let w=$o(t,n.batchSize,n.numHeads,n.kvSequenceLength,n.headSize,o,l,n.hiddenSize),x=$o(t,n.batchSize,n.numHeads,n.kvSequenceLength,n.vHeadSize,a,l,2*n.hiddenSize);Xn(t,g,w,x,c,void 0,s,u,p,n,e)}}),lm,dm,cm,pm,mm,fm,hm,gm,Rl,zl=j(()=>{ye(),xe(),_e(),lm=t=>{if(!t||t.length<1)throw new Error("Too few inputs");if(t[0].dataType!==1&&t[0].dataType!==10)throw new Error("Input type must be float or float16.");if(t.length>=2){let e=t[0].dims.length*2===t[1].dims[0];if(t.length===4&&(e=t[3].dims[0]*2===t[1].dims[0]),!e)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},dm=(t,e,n)=>{let i="";for(let o=e-1;o>=0;--o)i+=`
            k = i32(${t.indicesGet("indices",o)}) - ${fe("uniforms.pads",o,n)};
            if (k < 0) {
              break;
            }
            if (k >= i32(${fe("uniforms.x_shape",o,e)})) {
              break;
            }
            offset += k * i32(${fe("uniforms.x_strides",o,e)});
        `;return`
          value = ${t.type.value}(uniforms.constant_value);
          for (var i = 0; i < 1; i++) {
            var offset = 0;
            var k = 0;
            ${i}
            value = x[offset];
          }
      `},cm=(t,e,n)=>{let i="";for(let o=e-1;o>=0;--o)i+=`
                k = i32(${t.indicesGet("indices",o)}) - ${fe("uniforms.pads",o,n)};
                if (k < 0) {
                  k = -k;
                }
                {
                  let _2n_1 = 2 * (i32(${fe("uniforms.x_shape",o,e)}) - 1);
                  k = k % _2n_1;
                  if(k >= i32(${fe("uniforms.x_shape",o,e)})) {
                    k = _2n_1 - k;
                  }
                }
                offset += k * i32(${fe("uniforms.x_strides",o,e)});
            `;return`
              var offset = 0;
              var k = 0;
              ${i}
              value = x[offset];
          `},pm=(t,e,n)=>{let i="";for(let o=e-1;o>=0;--o)i+=`
                k = i32(${t.indicesGet("indices",o)}) - ${fe("uniforms.pads",o,n)};
                if (k < 0) {
                  k = 0;
                }
                if (k >= i32(${fe("uniforms.x_shape",o,e)})) {
                  k = i32(${fe("uniforms.x_shape",o,e)}) - 1;
                }
                offset += k * i32(${fe("uniforms.x_strides",o,e)});
            `;return`
              var offset = 0;
              var k = 0;
              ${i}
              value = x[offset];
          `},mm=(t,e,n)=>{let i="";for(let o=e-1;o>=0;--o)i+=`
                k = i32(${t.indicesGet("indices",o)}) - ${fe("uniforms.pads",o,n)};
                if (k < 0)  {
                  k += i32(${fe("uniforms.x_shape",o,e)}]);
                }
                if (k >= i32(${fe("uniforms.x_shape",o,e)})) {
                  k -= i32(${fe("uniforms.x_shape",o,e)});
                }
                offset += k * i32(${fe("uniforms.x_strides",o,e)});
            `;return`
              var offset = 0;
              var k = 0;
              ${i}
              value = x[offset];
          `},fm=(t,e,n)=>{switch(n.mode){case 0:return dm(t,e,n.pads.length);case 1:return cm(t,e,n.pads.length);case 2:return pm(t,e,n.pads.length);case 3:return mm(t,e,n.pads.length);default:throw new Error("Invalid mode")}},hm=(t,e)=>{let n=M.padShape(t[0].dims.slice(),e.pads),i=t[0].dims,o=M.size(n),a=[{type:12,data:o},{type:6,data:e.pads}];e.mode===0&&a.push({type:t[0].dataType,data:e.value}),a.push(...X(t[0].dims,n));let l=["rank"],c=p=>{let s=K("output",t[0].dataType,n.length),u=U("x",t[0].dataType,i.length),d=u.type.value,g=fm(s,i.length,e),w=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:e.pads.length}];return e.mode===0&&w.push({name:"constant_value",type:d}),`
            ${p.registerUniforms(w).declareVariables(u,s)}
            ${p.mainStart()}
            ${p.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

            let indices = ${s.offsetToIndices("global_idx")};

            var value = ${d}(0);
            ${g}
            output[global_idx] = value;
        }`};return{name:"Pad",shaderCache:{hint:`${e.mode}`,inputDependencies:l},getRunData:()=>({outputs:[{dims:n,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(n)/64)},programUniforms:a}),getShaderSource:c}},gm=(t,e)=>{if(t.length>1){let n=t[1].getBigInt64Array(),i=t.length>=3&&t[2].data?t[2].getFloat32Array()[0]:0,o=t[0].dims.length,a=new Int32Array(2*o).fill(0);if(t.length>=4){let c=t[3].getBigInt64Array();for(let p=0;p<c.length;p++)a[Number(c[p])]=Number(n[p]),a[Number(c[p])+o]=Number(n[p+c.length])}else n.forEach((c,p)=>a[Number(p)]=Number(c));let l=[];return a.forEach(c=>l.push(c)),{mode:e.mode,value:i,pads:l}}else return e},Rl=(t,e)=>{lm(t.inputs);let n=gm(t.inputs,e);t.compute(hm(t.inputs,n),{inputs:[0]})}}),si,Bl,Dl,Ml,Ul,ym,bm,Wl,Nl,Vl,Hl,Gl,Ll,Fl,ql,jl,Kl,Yl,Xl,Zl=j(()=>{_t(),ye(),xe(),_e(),si=t=>{if(ke.webgpu.validateInputContent&&(!t||t.length!==1))throw new Error("Pool ops requires 1 input.")},Bl=(t,e,n)=>{let i=e.format==="NHWC",o=t.dims.slice();i&&o.splice(1,0,o.pop());let a=Object.hasOwnProperty.call(e,"dilations"),l=e.kernelShape.slice(),c=e.strides.slice(),p=a?e.dilations.slice():[],s=e.pads.slice();pr.adjustPoolAttributes(n,o,l,c,p,s);let u=pr.computePoolOutputShape(n,o,c,p,l,s,e.autoPad),d=Object.assign({},e);a?Object.assign(d,{kernelShape:l,strides:c,pads:s,dilations:p,cacheKey:e.cacheKey}):Object.assign(d,{kernelShape:l,strides:c,pads:s,cacheKey:e.cacheKey});let g=u.slice();return g.push(g.splice(1,1)[0]),[d,i?g:u]},Dl=(t,e)=>{let n=e.format==="NHWC",i=M.size(t),o=M.size(e.kernelShape),a=[{type:12,data:i},{type:12,data:o}],l=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(e.kernelShape.length<=2){let c=e.kernelShape[e.kernelShape.length-1],p=e.strides[e.strides.length-1],s=e.pads[e.pads.length/2-1],u=e.pads[e.pads.length-1],d=!!(s+u);a.push({type:12,data:c},{type:12,data:p},{type:12,data:s},{type:12,data:u}),l.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let g=!1;if(e.kernelShape.length===2){let w=e.kernelShape[e.kernelShape.length-2],x=e.strides[e.strides.length-2],C=e.pads[e.pads.length/2-2],O=e.pads[e.pads.length-2];g=!!(C+O),a.push({type:12,data:w},{type:12,data:x},{type:12,data:C},{type:12,data:O}),l.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[a,l,!0,d,g]}else{if(n)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let c=M.computeStrides(e.kernelShape);a.push({type:12,data:c},{type:12,data:e.pads},{type:12,data:e.strides}),l.push({name:"kernelStrides",type:"u32",length:c.length},{name:"pads",type:"u32",length:e.pads.length},{name:"strides",type:"u32",length:e.strides.length});let p=e.pads.reduce((s,u)=>s+u);return[a,l,!!p,!1,!1]}},Ml=(t,e,n,i,o,a,l,c,p,s,u,d)=>{let g=o.format==="NHWC",w=e.type.value,x=K("output",e.type.tensor,i);if(o.kernelShape.length<=2){let C="",O="",Y="",q=n-(g?2:1);if(u?C=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${q}] = indices[${q}] * uniforms.sw - uniforms.pwStart + i;
                  if (xIndices[${q}] < 0 || xIndices[${q}]
                      >= uniforms.x_shape[${q}]) {
                    pad++;
                    continue;
                  }
                  let x_val = x[${e.indicesToOffset("xIndices")}];
                  ${a}
                }`:C=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${q}] = indices[${q}] * uniforms.sw - uniforms.pwStart + i;
                  let x_val = x[${e.indicesToOffset("xIndices")}];
                  ${a}
                }`,o.kernelShape.length===2){let ue=n-(g?3:2);d?O=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${ue}] = indices[${ue}] * uniforms.sh - uniforms.phStart + j;
                  if (xIndices[${ue}] < 0 || xIndices[${ue}] >= uniforms.x_shape[${ue}]) {
                    pad += i32(uniforms.kw);
                    continue;
                  }
              `:O=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${ue}] = indices[${ue}] * uniforms.sh - uniforms.phStart + j;
                `,Y=`
              }
            `}return`
            ${t.registerUniforms(p).declareVariables(e,x)}

            ${t.mainStart()}
              ${t.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

              let indices = ${x.offsetToIndices("global_idx")};
              var xIndices = ${x.offsetToIndices("global_idx")};

              var value = ${w}(${c});
              var pad = 0;
              ${O}
              ${C}
              ${Y}
              ${l}

              output[global_idx] = value;
            }`}else{if(g)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let C=o.kernelShape.length,O=o.pads.length,Y="";return s?Y=`
                if (xIndices[j] >= uniforms.x_shape[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${e.indicesToOffset("xIndices")}];
                ${a}
              }`:Y=`
              }
              let x_val = x[${e.indicesToOffset("xIndices")}];
              ${a}
            `,`
            ${t.registerUniforms(p).declareVariables(e,x)}

            ${t.mainStart()}
              ${t.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
              let indices = ${x.offsetToIndices("global_idx")};
              var xIndices = ${x.offsetToIndices("global_idx")};

              var offsets: array<u32, ${C}>;

              var value = ${w}(${c});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {
                var offset = i;
                for (var j = 0u; j < ${C-1}u; j++) {
                  offsets[j] = offset / ${fe("uniforms.kernelStrides","j",C)};
                  offset -= offsets[j] * ${fe("uniforms.kernelStrides","j",C)};
                }
                offsets[${C-1}] = offset;

                isPad = false;
                for (var j = ${n-C}u; j < ${n}u; j++) {
                  xIndices[j] = indices[j] * ${fe("uniforms.strides",`j - ${n-C}u`,C)}
                    + offsets[j - ${n-C}u] - ${fe("uniforms.pads","j - 2u",O)};
                  ${Y}
              }
              ${l}

              output[global_idx] = value;
            }`}},Ul=t=>`${t.format};${t.ceilMode};${t.autoPad};${t.kernelShape.length}`,ym=t=>`${Ul(t)};${t.countIncludePad}`,bm=t=>`${Ul(t)};${t.storageOrder};${t.dilations}`,Wl=t=>({format:t.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][t.auto_pad],ceilMode:t.ceil_mode,kernelShape:t.kernel_shape,strides:t.strides,pads:t.pads}),Nl=(t,e,n,i)=>{let[o,a]=Bl(e,i,n),l=U("x",e.dataType,e.dims.length),c=l.type.value,p="value += x_val;",s="";o.countIncludePad?s+=`value /= ${c}(uniforms.kernelSize);`:s+=`value /= ${c}(i32(uniforms.kernelSize) - pad);`;let[u,d,g,w,x]=Dl(a,o);u.push(...X(e.dims,a));let C=["rank"];return{name:t,shaderCache:{hint:`${i.cacheKey};${g};${w};${x}`,inputDependencies:C},getRunData:()=>({outputs:[{dims:a,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(M.size(a)/64)},programUniforms:u}),getShaderSource:O=>Ml(O,l,e.dims.length,a.length,o,p,s,0,d,g,w,x)}},Vl=t=>{let e=t.count_include_pad!==0,n=Wl(t);if(n.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let i={countIncludePad:e,...n,cacheKey:""};return{...i,cacheKey:ym(i)}},Hl=(t,e)=>{si(t.inputs),t.compute(Nl("AveragePool",t.inputs[0],!1,e))},Gl={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},Ll=t=>{let e=t.format;return{format:e,...Gl,cacheKey:e}},Fl=(t,e)=>{si(t.inputs),t.compute(Nl("GlobalAveragePool",t.inputs[0],!0,e))},ql=(t,e,n,i)=>{let[o,a]=Bl(e,i,n),l=`
      value = max(x_val, value);
    `,c="",p=U("x",e.dataType,e.dims.length),s=["rank"],[u,d,g,w,x]=Dl(a,o);return u.push(...X(e.dims,a)),{name:t,shaderCache:{hint:`${i.cacheKey};${g};${w};${x}`,inputDependencies:s},getRunData:()=>({outputs:[{dims:a,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(M.size(a)/64)},programUniforms:u}),getShaderSource:C=>Ml(C,p,e.dims.length,a.length,o,l,c,e.dataType===10?-65504:-1e5,d,g,w,x)}},jl=(t,e)=>{si(t.inputs),t.compute(ql("MaxPool",t.inputs[0],!1,e))},Kl=t=>{let e=t.storage_order,n=t.dilations,i=Wl(t);if(e!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(i.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let o={storageOrder:e,dilations:n,...i,cacheKey:""};return{...o,cacheKey:bm(o)}},Yl=t=>{let e=t.format;return{format:e,...Gl,cacheKey:e}},Xl=(t,e)=>{si(t.inputs),t.compute(ql("GlobalMaxPool",t.inputs[0],!0,e))}}),wm,$m,Ql,Jl=j(()=>{_t(),ye(),_e(),wm=(t,e,n)=>{let i=t===e,o=t<e&&n<0,a=t>e&&n>0;if(i||o||a)throw new Error("Range these inputs' contents are invalid.")},$m=(t,e,n,i)=>{let o=Math.abs(Math.ceil((e-t)/n)),a=[o],l=o,c=[{type:12,data:l},{type:i,data:t},{type:i,data:n},...X(a)],p=s=>{let u=K("output",i,a.length),d=u.type.value,g=[{name:"outputSize",type:"u32"},{name:"start",type:d},{name:"delta",type:d}];return`
        ${s.registerUniforms(g).declareVariables(u)}
        ${s.mainStart()}
        ${s.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        output[global_idx] = uniforms.start + ${d}(global_idx) * uniforms.delta;
      }`};return{name:"Range",shaderCache:{hint:`${i}`},getShaderSource:p,getRunData:()=>({outputs:[{dims:a,dataType:i}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:c})}},Ql=t=>{let e=0,n=0,i=0;t.inputs[0].dataType===6?(e=t.inputs[0].getInt32Array()[0],n=t.inputs[1].getInt32Array()[0],i=t.inputs[2].getInt32Array()[0]):t.inputs[0].dataType===1&&(e=t.inputs[0].getFloat32Array()[0],n=t.inputs[1].getFloat32Array()[0],i=t.inputs[2].getFloat32Array()[0]),ke.webgpu.validateInputContent&&wm(e,n,i),t.compute($m(e,n,i,t.inputs[0].dataType),{inputs:[]})}}),_m,xm,Sm,Cm,Im,Tm,Am,Em,km,Om,Pm,ed,Rm,zm,Bm,Dm,Mm,td,rd,nd=j(()=>{ye(),xe(),Ze(),_e(),_m=(t,e)=>{if(t.every(n=>n>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),t.length>0){if(e.mode==="linear"){if(!(t.length===2||t.length===3||t.length===4&&t[0]===1&&t[1]===1||t.length===4&&t[0]===1&&t[3]===1||t.length===5&&t[0]===1&&t[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and
            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(e.mode==="cubic"&&!(t.length===2||t.length===4&&t[0]===1&&t[1]===1||t.length===4&&t[0]===1&&t[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},xm=(t,e,n)=>{e.every(o=>o>=0&&o<n||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let i=new Array(n).fill(1);return e.forEach((o,a)=>i[o]=t[a]),i},Sm=(t,e,n,i,o,a)=>{let[l,c,p]=n>10?[1,2,3]:[-1,t.length>1?1:-1,-1],s=t[0].dims.length;if(l>0&&t.length>l&&t[l].dims.length>0)t[l].getFloat32Array().forEach(u=>a.push(u));else if(e.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(c>0&&t.length>c&&t[c].dims.length>0){if(t[c].getFloat32Array().forEach(u=>i.push(u)),i.length!==0&&i.length!==s&&n>=18&&i.length!==e.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");_m(i,e),e.axes.length>0&&xm(i,e.axes,s).forEach((u,d)=>i[d]=u)}if(p>0&&t.length>p&&(t[p].getBigInt64Array().forEach(u=>o.push(Number(u))),o.length!==s||n>=18&&o.length===e.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(e.axes.length>0){if(i.length!==e.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(o.length!==e.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(typeof i<"u"&&typeof o<"u"&&i.length>0&&o.length>s)throw new Error("Resize requires only of scales or sizes to be specified")},Cm=(t,e)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,
     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${e} { `+(()=>{switch(t){case"asymmetric":return`return ${e}(xResized) / ${e}(xScale);`;case"pytorch_half_pixel":return`if (lengthResized > 1) {
                    return (${e}(xResized) + 0.5) / ${e}(xScale) - 0.5;
                  } else {
                    return 0.0;
                  }`;case"tf_half_pixel_for_nn":return`return (${e}(xResized) + 0.5) / ${e}(xScale);`;case"align_corners":return`if (lengthResized == 1) {
                    return 0.0;
                  } else {
                    // The whole part and the fractional part are calculated separately due to inaccuracy of floating
                    // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an
                    // offset-by-one error later in floor().
                    let whole = ${e}(xResized * (lengthOriginal - 1) / (lengthResized - 1));
                    let fract =
                        ${e}(xResized * (lengthOriginal - 1) % (lengthResized - 1)) / ${e}(lengthResized - 1);
                    return whole + fract;
                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {
                    return ${e}(roiStart) * ${e}(lengthOriginal - 1) +
                        (${e}(xResized) * ${e}(roiEnd - roiStart) * ${e}(lengthOriginal - 1)) /
                        ${e}(lengthResized - 1);
                  } else {
                    return 0.5 * ${e}(roiStart + roiEnd) * ${e}(lengthOriginal - 1);
                  }`;case"half_pixel_symmetric":return`const outputWidth = ${e}xScale * ${e}(lengthResized);
                  const adjustment = ${e}(lengthResized) / outputWidth;
                  const center = ${e}(lengthOriginal) / 2;
                  const offset = center * (1 - adjustment);
                  return offset + ((${e}(xResized) + 0.5) / ${e}(xScale)) - 0.5;`;case"half_pixel":return`return ((${e}(xResized) + 0.5) / ${e}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${t} is not supported`)}})()+"}",Im=(t,e,n)=>`fn getNearestPixelFromOriginal(xOriginal: ${n}, isDownSample: bool) -> ${n} {`+(()=>{switch(t){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(e<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${t} is not supported`)}})()+"}",Tm=(t,e,n)=>{let i=new Array(n).fill(0).concat(new Array(n).fill(1)),o=t.length===0?i:t.slice();return e.length>0?(e.forEach((a,l)=>{i[a]=o[l],i[l+n]=o[e.length+l]}),i):o},Am=(t,e,n,i)=>{let o=[];if(n.length>0)if(i.length>0){if(t.forEach(a=>o.push(a)),Math.max(...i)>t.length)throw new Error("axes is out of bound");i.forEach((a,l)=>o[a]=n[l])}else n.forEach(a=>o.push(a));else{if(e.length===0)throw new Error("Resize requires either scales or sizes.");o=t.map((a,l)=>Math.round(a*e[l]))}return o},Em=(t,e,n)=>{let i=(()=>{switch(n.keepAspectRatioPolicy){case"not_larger":return n.axes.length>0?Math.min(...n.axes.map(a=>e[a]),Number.MAX_VALUE):Math.min(...e,Number.MAX_VALUE);case"not_smaller":return n.axes.length>0?Math.max(...n.axes.map(a=>e[a]),Number.MIN_VALUE):Math.max(...e,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${n.keepAspectRatioPolicy} is not supported`)}})();e.fill(1,0,e.length);let o=t.slice();return n.axes.length>0?(n.axes.forEach(a=>e[a]=i),n.axes.forEach(a=>o[a]=Math.round(t[a]*e[a]))):(e.fill(i,0,e.length),o.forEach((a,l)=>o[l]=Math.round(a*e[l]))),o},km=(t,e,n,i,o)=>`
    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> array<${t.type.value}, ${n.length}> {
      var original_indices: array<${t.type.value}, ${n.length}>;
      for (var i:u32 = 0; i < ${n.length}; i++) {
        var output_index = ${t.indicesGet("output_indices","i")};
        var scale = ${fe("uniforms.scales","i",i)};
        var roi_low = ${fe("uniforms.roi","i",o)};
        var roi_hi = ${fe("uniforms.roi",`i + ${e.length}`,o)};
        if (scale == 1.0) {
          original_indices[i] = ${t.type.value}(output_index);
        } else {
          var input_shape_i = ${fe("uniforms.input_shape","i",e.length)};
          var output_shape_i = ${fe("uniforms.output_shape","i",n.length)};
          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                           input_shape_i, roi_low, roi_hi);
        }
      }
      return original_indices;
    }`,Om=(t,e,n,i,o,a,l)=>`
    fn calculateInputIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> ${t.type.indices} {
      var input_indices: ${t.type.indices};
      for (var i:u32 = 0; i < ${i.length}; i++) {
        var output_index = ${e.indicesGet("output_indices","i")};
        var input_index: u32;
        var scale = ${fe("uniforms.scales","i",o)};
        if (scale == 1.0) {
          input_index = output_index;
        } else {
          var roi_low = ${fe("uniforms.roi","i",a)};
          var roi_hi = ${fe("uniforms.roi",`i + ${n.length}`,a)};
          var input_shape_i = ${fe("uniforms.input_shape","i",n.length)};
          var output_shape_i = ${fe("uniforms.output_shape","i",i.length)};
          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                        input_shape_i, roi_low, roi_hi);
          if (!${l} || (original_idx >= 0 && original_idx < ${e.type.value}(input_shape_i))) {
            if (original_idx < 0) {
              input_index = 0;
            } else if (original_idx > ${e.type.value}(input_shape_i - 1)) {
              input_index = input_shape_i - 1;
            } else {
              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));
            }
          } else {
            input_index = u32(original_idx);
          }
        }
        ${t.indicesSet("input_indices","i"," input_index")}
      }
      return input_indices;
    }`,Pm=(t,e)=>`
    fn checkInputIndices(input_indices: ${t.type.indices}) -> bool {
      for (var i:u32 = 0; i < ${e.length}; i++) {
        var input_index = ${t.indicesGet("input_indices","i")};
        if (input_index < 0 || input_index >= ${fe("uniforms.input_shape","i",e.length)}) {
          return false;
        }
      }
      return true;
    }`,ed=(t,e,n,i)=>t.rank>i?`
    ${t.indicesSet("input_indices",e,"channel")};
    ${t.indicesSet("input_indices",n,"batch")};
`:"",Rm=(t,e,n,i,o)=>{let[a,l,c,p]=n.length===2?[-1,0,1,-1]:[0,2,3,1],s=t.type.value;return`
    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${s} {
      var input_indices: ${t.type.indices};
      ${t.indicesSet("input_indices",l,`max(0, min(row, ${n[l]} - 1))`)};
      ${t.indicesSet("input_indices",c,`max(0, min(col, ${n[c]} - 1))`)};
      ${ed(t,p,a,2)}
      return ${t.getByIndices("input_indices")};
    }

    fn bilinearInterpolation(output_indices: ${e.type.indices}) -> ${s} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var row:${s} = originalIndices[${l}];
      var col:${s} = originalIndices[${c}];
      ${i?`if (row < 0 || row > (${n[l]} - 1) || col < 0 || col > (${n[c]} - 1)) {
        return ${o};
      }`:""};
      row = max(0, min(row, ${n[l]} - 1));
      col = max(0, min(col, ${n[c]} - 1));
      var row1: u32 = u32(row);
      var col1: u32 = u32(col);
      var row2: u32 = u32(row + 1);
      var col2: u32 = u32(col + 1);
      var channel: u32 = ${n.length>2?`u32(originalIndices[${p}])`:"0"};
      var batch: u32 =  ${n.length>2?`u32(originalIndices[${a}])`:"0"};
      var x11: ${s} = getInputValue(batch, channel, row1, col1);
      var x12: ${s} = getInputValue(batch, channel, row1, col2);
      var x21: ${s} = getInputValue(batch, channel, row2, col1);
      var x22: ${s} = getInputValue(batch, channel, row2, col2);
      var dx1: ${s} = abs(row - ${s}(row1));
      var dx2: ${s} = abs(${s}(row2) - row);
      var dy1: ${s} = abs(col - ${s}(col1));
      var dy2: ${s} = abs(${s}(col2) - col);
      if (row1 == row2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (col1 == col2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);
    }`},zm=(t,e,n,i,o,a,l,c,p,s)=>{let u=n.length===2,[d,g]=u?[0,1]:[2,3],w=t.type.value,x=C=>{let O=C===d?"row":"col";return`
      fn ${O}CubicInterpolation(input_indices: ${t.type.indices}, output_indices: ${e.type.indices}) -> ${w} {
        var output_index = ${e.indicesGet("output_indices",C)};
        var originalIdx: ${w} = getOriginalCoordinateFromResizedCoordinate(output_index, ${o[C]},
        ${i[C]}, ${n[C]}, ${a[C]}, ${a[C]} + ${n.length});
        var fractOriginalIdx: ${w} = originalIdx - floor(originalIdx);
        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);

        if (${c} && (originalIdx < 0 || originalIdx > (${n[C]} - 1))) {
          return ${p};
        }
        var data: array<${w}, 4> = array<${w}, 4>(0.0, 0.0, 0.0, 0.0);
        for (var i: i32 = -1; i < 3; i++) {
          var ${O}: ${w} = originalIdx + ${w}(i);
          if (${O} < 0 || ${O} >= ${n[C]}) {
            ${s?`coefs[i + 1] = 0.0;
                        continue;`:c?`return ${p};`:`${O} = max(0, min(${O}, ${n[C]} - 1));`};
          }
        var input_indices_copy: ${t.type.indices} = input_indices;
          ${t.indicesSet("input_indices_copy",C,`u32(${O})`)};
          data[i + 1] = ${C===d?t.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};
        }
        return cubicInterpolation1D(data, coefs);
      }`};return`
    ${x(d)};
    ${x(g)};
  fn getCubicInterpolationCoefs(s: ${w}) -> array<${w}, 4> {
    var absS = abs(s);
    var coeffs: array<${w}, 4> = array<${w}, 4>(0.0, 0.0, 0.0, 0.0);
    var oneMinusAbsS: ${w} = 1.0 - absS;
    var twoMinusAbsS: ${w} = 2.0 - absS;
    var onePlusAbsS: ${w} = 1.0 + absS;
    coeffs[0] = ((${l} * onePlusAbsS - 5 * ${l}) * onePlusAbsS + 8 * ${l}) * onePlusAbsS - 4 * ${l};
    coeffs[1] = ((${l} + 2) * absS - (${l} + 3)) * absS * absS + 1;
    coeffs[2] = ((${l} + 2) * oneMinusAbsS - (${l} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;
    coeffs[3] = ((${l} * twoMinusAbsS - 5 * ${l}) * twoMinusAbsS + 8 * ${l}) * twoMinusAbsS - 4 * ${l};
    return coeffs;
  }

  fn cubicInterpolation1D(x: array<${w}, 4>, coefs: array<${w}, 4>) -> ${w} {
    var coefsSum: ${w} = coefs[0] + coefs[1] + coefs[2] + coefs[3];
    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;
  }

  fn bicubicInterpolation(output_indices: ${e.type.indices}) -> ${w} {
    var input_indices: ${t.type.indices} = output_indices;
    return colCubicInterpolation(input_indices, output_indices);
  }
    `},Bm=(t,e,n,i,o)=>{let[a,l,c,p,s]=n.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],u=t.type.value;return`
    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${u} {
      var input_indices: ${t.type.indices};
      ${t.indicesSet("input_indices",l,`max(0, min(depth, ${n[l]} - 1))`)};
      ${t.indicesSet("input_indices",c,`max(0, min(height, ${n[c]} - 1))`)};
      ${t.indicesSet("input_indices",p,`max(0, min(width, ${n[p]} - 1))`)};
      ${ed(t,s,a,3)}
      return ${t.getByIndices("input_indices")};
    }

    fn trilinearInterpolation(output_indices: ${e.type.indices}) -> ${u} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var depth:${u} = originalIndices[${l}];
      var height:${u} = originalIndices[${c}];
      var width:${u} = originalIndices[${p}];
      ${i?`if (depth < 0 || depth > (${n[l]} - 1) || height < 0 || height > (${n[c]} - 1) || width < 0 || (width > ${n[p]} - 1)) {
      return ${o};
        }`:""};

    depth = max(0, min(depth, ${n[l]} - 1));
      height = max(0, min(height, ${n[c]} - 1));
      width = max(0, min(width, ${n[p]} - 1));
      var depth1: u32 = u32(depth);
      var height1: u32 = u32(height);
      var width1: u32 = u32(width);
      var depth2: u32 = u32(depth + 1);
      var height2: u32 = u32(height + 1);
      var width2: u32 = u32(width + 1);
      var channel: u32 = ${n.length>3?`u32(originalIndices[${s}])`:"0"};
      var batch: u32 =  ${n.length>3?`u32(originalIndices[${a}])`:"0"};

      var x111: ${u} = getInputValue(batch, channel, depth1, height1, width1);
      var x112: ${u} = getInputValue(batch, channel, depth1, height1, width2);
      var x121: ${u} = getInputValue(batch, channel, depth1, height2, width1);
      var x122: ${u} = getInputValue(batch, channel, depth1, height2, width2);
      var x211: ${u} = getInputValue(batch, channel, depth2, height1, width1);
      var x212: ${u} = getInputValue(batch, channel, depth2, height1, width2);
      var x221: ${u} = getInputValue(batch, channel, depth2, height2, width1);
      var x222: ${u} = getInputValue(batch, channel, depth2, height2, width2);
      var dx1: ${u} = abs(depth - ${u}(depth1));
      var dx2: ${u} = abs(${u}(depth2) - depth);
      var dy1: ${u} = abs(height - ${u}(height1));
      var dy2: ${u} = abs(${u}(height2) - height);
      var dz1: ${u} = abs(width - ${u}(width1));
      var dz2: ${u} = abs(${u}(width2) - width);
      if (depth1 == depth2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (height1 == height2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      if (width1 == width2) {
        dz1 = 0.5;
        dz2 = 0.5;
      }
      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +
              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);
    }`},Dm=(t,e,n,i,o,a)=>{let l=t.dims,c=Tm(a,e.axes,l.length),p=Am(l,i,o,e.axes),s=i.slice();i.length===0&&(s=l.map((q,ue)=>q===0?1:p[ue]/q),e.keepAspectRatioPolicy!=="stretch"&&(p=Em(l,s,e)));let u=K("output",t.dataType,p.length),d=U("input",t.dataType,l.length),g=M.size(p),w=l.length===p.length&&l.every((q,ue)=>q===p[ue]),x=e.coordinateTransformMode==="tf_crop_and_resize",C=e.extrapolationValue,O=d.type.value,Y=q=>`
      ${w?"":`
      ${Cm(e.coordinateTransformMode,O)};
      ${(()=>{switch(e.mode){case"nearest":return`
              ${Pm(d,l)};
              ${Im(e.nearestMode,n,O)};
              ${Om(d,u,l,p,s.length,c.length,x)};
              `;case"linear":return`
              ${km(u,l,p,s.length,c.length)};
              ${(()=>{if(l.length===2||l.length===4)return`${Rm(d,u,l,x,C)}`;if(l.length===3||l.length===5)return`${Bm(d,u,l,x,C)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};
            `;case"cubic":return`
            ${(()=>{if(l.length===2||l.length===4)return`${zm(d,u,l,p,s,c,e.cubicCoeffA,x,e.extrapolationValue,e.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};
            `;default:throw Error("Invalid resize mode")}})()};
      `}
      ${q.registerUniform("output_size","u32").registerUniform("scales","f32",s.length).registerUniform("roi","f32",c.length).declareVariables(d,u)}
      ${q.mainStart()}
        ${q.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
        ${w?"output[global_idx] = input[global_idx];":`
        let output_indices = ${u.offsetToIndices("global_idx")};
        var input_indices: ${d.type.indices};
        ${(()=>{switch(e.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);
                if (checkInputIndices(input_indices)) {
                  output[global_idx] = ${d.getByIndices("input_indices")};
                } else {
                  output[global_idx] = ${e.extrapolationValue};
                }`;case"linear":return`output[global_idx] = ${l.length===2||l.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${e.mode}`)}})()};
`}
      }`;return{name:"Resize",shaderCache:{hint:`${e.cacheKey}|${n}|${s.length>0?s:""}|${o.length>0?o:""}|${c.length>0?c:""}|${w}|${l}`,inputDependencies:["rank"]},getShaderSource:Y,getRunData:()=>({outputs:[{dims:p,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(g/64)},programUniforms:[{type:12,data:g},{type:1,data:s},{type:1,data:c},...X(l,p)]})}},Mm=t=>{let e=t.customDataBuffer;return new Uint32Array(e,e.byteOffset,1)[0]},td=(t,e)=>{let n=[],i=[],o=[],a=Mm(t);if(e.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");Sm(t.inputs,e,a,n,i,o),t.compute(Dm(t.inputs[0],e,a,n,i,o),{inputs:[0]})},rd=t=>{let e=t.antialias,n=t.axes,i=t.coordinateTransformMode,o=t.cubicCoeffA,a=t.excludeOutside!==0,l=t.extrapolationValue,c=t.keepAspectRatioPolicy,p=t.mode,s=t.nearestMode===""?"simple":t.nearestMode;return we({antialias:e,axes:n,coordinateTransformMode:i,cubicCoeffA:o,excludeOutside:a,extrapolationValue:l,keepAspectRatioPolicy:c,mode:p,nearestMode:s})}}),Um,Wm,id$1,od=j(()=>{ye(),xe(),Ze(),_e(),Um=(t,e)=>{let[n,i,o,a]=t,{numHeads:l,rotaryEmbeddingDim:c}=e;if(n.dims.length!==3&&n.dims.length!==4)throw new Error(`Input 'x' is expected to have 3 or 4 dimensions, got ${n.dims.length}`);if(!M.areEqual(i.dims,[])&&!M.areEqual(i.dims,[1])&&i.dims.length!==2)throw new Error(`Input 'position_ids' is expected to have 0, 1, or 2 dimensions, got ${i.dims.length}`);if(o.dims.length!==2)throw new Error(`Input 'cos_cache' is expected to have 2 dimensions, got ${o.dims.length}`);if(a.dims.length!==2)throw new Error(`Input 'sin_cache' is expected to have 2 dimensions, got ${a.dims.length}`);if(!M.areEqual(o.dims,a.dims))throw new Error("Inputs 'cos_cache' and 'sin_cache' are expected to have the same shape");if(c>0&&l===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let p=n.dims[0],s=n.dims[n.dims.length-2],u=o.dims[0],d=M.sizeFromDimension(n.dims,1)/s,g=c===0?o.dims[1]*2:d/l;if(c>g)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(i.dims.length===2){if(p!==i.dims[0])throw new Error(`Input 'position_ids' dimension 0 should be of size batch_size, got ${i.dims[0]}`);if(s!==i.dims[1])throw new Error(`Input 'position_ids' dimension 1 should be of size sequence_length, got ${i.dims[1]}`)}if(g/2!==o.dims[1]&&c/2!==o.dims[1])throw new Error(`Input 'cos_cache' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${o.dims[1]}`);if(s>u)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Wm=(t,e)=>{let{interleaved:n,numHeads:i,rotaryEmbeddingDim:o,scale:a}=e,l=t[0].dims[0],c=M.sizeFromDimension(t[0].dims,1),p=t[0].dims[t[0].dims.length-2],s=c/p,u=t[2].dims[1],d=o===0?u*2:s/i,g=new Array(l,p,s/d,d-u),w=M.computeStrides(g),x=[{type:1,data:a},{type:12,data:g},{type:12,data:w},...t[0].dims.length===3?new Array({type:12,data:[c,s,d,1]}):[],...t[0].dims.length===4?new Array({type:12,data:[c,d,p*d,1]}):[],...X(t[0].dims,t[1].dims,t[2].dims,t[3].dims,t[0].dims)],C=O=>{let Y=U("input",t[0].dataType,t[0].dims.length),q=U("position_ids",t[1].dataType,t[1].dims.length),ue=U("cos_cache",t[2].dataType,t[2].dims.length),pe=U("sin_cache",t[3].dataType,t[3].dims.length),se=K("output",t[0].dataType,t[0].dims.length);return O.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:g.length},{name:"global_strides",type:"u32",length:w.length},{name:"input_output_strides",type:"u32",length:w.length}]),`
        ${O.declareVariables(Y,q,ue,pe,se)}

        ${O.mainStart(mr)}
          let half_rotary_emb_dim = uniforms.${ue.name}_shape[1];
          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;
          let size = uniforms.global_shape[0] * uniforms.global_strides[0];
          ${O.guardAgainstOutOfBoundsWorkgroupSizes("size")}

          if (bsnh[3] < half_rotary_emb_dim) {
            let position_ids_idx =
                ${q.broadcastedIndicesToOffset("bsnh.xy",K("",q.type.tensor,2))};
            let position_id =
                u32(${q.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);
            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${n});
            let j = i + select(half_rotary_emb_dim, 1, ${n});
            let re = ${Y.getByOffset("i")} * ${ue.get("position_id","bsnh[3]")} -
                ${Y.getByOffset("j")} * ${pe.get("position_id","bsnh[3]")};
            ${se.setByOffset("i","re")}
            let im = ${Y.getByOffset("i")} * ${pe.get("position_id","bsnh[3]")} +
                ${Y.getByOffset("j")} * ${ue.get("position_id","bsnh[3]")};
            ${se.setByOffset("j","im")}
          } else {
            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;
            ${se.setByOffset("k",Y.getByOffset("k"))}
          }
        }`};return{name:"RotaryEmbedding",shaderCache:{hint:we({interleaved:n}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:C,getRunData:()=>({outputs:[{dims:t[0].dims,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(g)/mr)},programUniforms:x})}},id$1=(t,e)=>{Um(t.inputs,e),t.compute(Wm(t.inputs,e))}}),Nm,Vm,ad,sd=j(()=>{ye(),xe(),_e(),Nm=t=>{if(!t||t.length<3)throw new Error("layerNorm requires at least 3 inputs.");let e=t[0],n=t[1],i=t[2];if(e.dataType!==n.dataType||e.dataType!==i.dataType)throw new Error("All inputs must have the same data type");if(e.dims.length!==3&&e.dims.length!==2)throw new Error("Input must be 2D or 3D");if(n.dims.length!==3&&n.dims.length!==2)throw new Error("Skip must be 2D or 3D");let o=e.dims[e.dims.length-1],a=e.dims[e.dims.length-2];if(n.dims[n.dims.length-1]!==o)throw new Error("Skip must have the same hidden size as input");if(n.dims[n.dims.length-2]!==a)throw new Error("Skip must have the same sequence length as input");if(i.dims.length!==1)throw new Error("Gamma must be 1D");if(i.dims[i.dims.length-1]!==o)throw new Error("Gamma must have the same hidden size as input");if(t.length>3){let l=t[3];if(l.dims.length!==1)throw new Error("Beta must be 1D");if(l.dims[l.dims.length-1]!==o)throw new Error("Beta must have the same hidden size as input")}if(t.length>4){let l=t[4];if(l.dims.length!==1)throw new Error("Bias must be 1D");if(l.dims[l.dims.length-1]!==o)throw new Error("Bias must have the same hidden size as input")}},Vm=(t,e,n,i)=>{let o=e.simplified,a=t[0].dims,l=M.size(a),c=a,p=l,s=a.slice(-1)[0],u=i?a.slice(0,-1).concat(1):[],d=!o&&t.length>3,g=t.length>4,w=i&&n>1,x=i&&n>2,C=n>3,O=Ue(s),Y=[{type:12,data:p},{type:12,data:O},{type:12,data:s},{type:1,data:e.epsilon}],q=pe=>{let se=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],Re=[U("x",t[0].dataType,t[0].dims,O),U("skip",t[1].dataType,t[1].dims,O),U("gamma",t[2].dataType,t[2].dims,O)];d&&Re.push(U("beta",t[3].dataType,t[3].dims,O)),g&&Re.push(U("bias",t[4].dataType,t[4].dims,O)),Re.push(K("output",t[0].dataType,c,O)),w&&Re.push(K("mean_output",1,u)),x&&Re.push(K("inv_std_output",1,u)),C&&Re.push(K("input_skip_bias_sum",t[0].dataType,c,O));let Oe=De(t[0].dataType);return`

      ${pe.registerUniforms(se).declareVariables(...Re)}

      ${pe.mainStart()}
        ${pe.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size / uniforms.hidden_size")}
        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;
        let offset = global_idx * hidden_size_vectorized;
        var sum = ${At("f32",O)};
        var squareSum = ${At("f32",O)};
        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {
          let skip_value = skip[offset + i];
          let bias_value = ${g?"bias[i]":Oe+"(0.0)"};
          let input_value = x[offset + i];
          let value = input_value + skip_value + bias_value;
          ${C?"input_skip_bias_sum[offset + i] = value;":""}
          output[offset + i] = value;
          let f32_value = ${fr(Oe,O,"value")};
          sum += f32_value;
          squareSum += f32_value * f32_value;
        }
        let mean = ${Et("sum",O)} / f32(uniforms.hidden_size);
        let inv_std_dev = inverseSqrt(${Et("squareSum",O)} / f32(uniforms.hidden_size) ${o?"":"- mean * mean"} + uniforms.epsilon);
        ${w?"mean_output[global_idx] = mean;":""}
        ${x?"inv_std_output[global_idx] = inv_std_dev;":""}
        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {
          output[offset + i] = (output[offset + i] ${o?"":`- ${Oe}(mean)`}) * ${Oe}(inv_std_dev) * gamma[i] ${d?"+ beta[i]":""};
        }
      }`},ue=[{dims:c,dataType:t[0].dataType}];return n>1&&ue.push({dims:u,dataType:1}),n>2&&ue.push({dims:u,dataType:1}),n>3&&ue.push({dims:a,dataType:t[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${O};${w};${x};${C}`,inputDependencies:t.map((pe,se)=>"type")},getShaderSource:q,getRunData:()=>({outputs:ue,dispatchGroup:{x:Math.ceil(p/s/64)},programUniforms:Y})}},ad=(t,e)=>{Nm(t.inputs);let n=[0];t.outputCount>1&&n.push(-3),t.outputCount>2&&n.push(-3),t.outputCount>3&&n.push(3),t.compute(Vm(t.inputs,e,t.outputCount,!1),{outputs:n})}}),Hm,ui,Gm,ud,Lm,Fm,ld,dd,cd=j(()=>{ye(),xe(),Ze(),_e(),Hm=(t,e)=>{if(!t||t.length<1)throw new Error("too few inputs");if(e.axes.length!==0){if(e.axes.length!==e.starts.length||e.axes.length!==e.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(e.starts.length!==e.ends.length)throw new Error("starts and ends must have the same length");t.slice(1).forEach((n,i)=>{if(t[i+1].dataType!==6&&t[i+1].dataType!==7)throw new Error(`Input ${i} must be an array of int32 or int64`)})},ui=(t,e)=>{let n=[];if(t.length>e)if(t[e].dataType===7)t[e].getBigInt64Array().forEach(i=>n.push(Number(i)));else if(t[e].dataType===6)t[e].getInt32Array().forEach(i=>n.push(Number(i)));else throw new Error(`Input ${e} must be an array of int32 or int64`);return n},Gm=(t,e)=>{if(t.length>1){let n=ui(t,1),i=ui(t,2),o=ui(t,3);return o.length===0&&(o=[...Array(t[0].dims.length).keys()]),we({starts:n,ends:i,axes:o})}else return e},ud=(t,e,n,i,o)=>{let a=t;return t<0&&(a+=n[i[e]]),o[e]<0?Math.max(0,Math.min(a,n[i[e]]-1)):Math.max(0,Math.min(a,n[i[e]]))},Lm=(t,e,n)=>`fn calculateInputIndices(output_indices: ${e.type.indices}) -> ${t.type.indices} {
          var input_indices: ${t.type.indices};
          var carry = 0u;
          for (var i = ${n.length}; i >= 0; i--) {
            let input_shape_i = ${fe("uniforms.input_shape","i",n.length)};
            let steps_i = ${fe("uniforms.steps","i",n.length)};
            let signs_i = ${fe("uniforms.signs","i",n.length)};
            let starts_i = ${fe("uniforms.starts","i",n.length)};
            var output_index = ${e.indicesGet("output_indices","i")};
            var input_index = output_index * steps_i + starts_i + carry;
            carry = input_index / input_shape_i;
            input_index = input_index % input_shape_i;
            if (signs_i < 0) {
              input_index = input_shape_i - input_index - 1u + starts_i;
            }
            ${t.indicesSet("input_indices","i","input_index")};
          }
          return input_indices;
      }`,Fm=(t,e)=>{let n=t[0].dims,i=M.size(n),o=e.axes.length>0?M.normalizeAxes(e.axes,n.length):[...Array(n.length).keys()],a=ui(t,4);a.forEach(Y=>Y!==0||(()=>{throw new Error("step cannot be 0")})),a.length===0&&(a=Array(o.length).fill(1));let l=e.starts.map((Y,q)=>ud(Y,q,n,o,a)),c=e.ends.map((Y,q)=>ud(Y,q,n,o,a));if(o.length!==l.length||o.length!==c.length)throw new Error("start, ends and axes should have the same number of elements");if(o.length!==n.length)for(let Y=0;Y<n.length;++Y)o.includes(Y)||(l.splice(Y,0,0),c.splice(Y,0,n[Y]),a.splice(Y,0,1));let p=a.map(Y=>Math.sign(Y));a.forEach((Y,q,ue)=>{if(Y<0){let pe=(c[q]-l[q])/Y,se=l[q],Re=se+pe*a[q];l[q]=Re,c[q]=se,ue[q]=-Y}});let s=n.slice(0);o.forEach((Y,q)=>{s[Y]=Math.ceil((c[Y]-l[Y])/a[Y])});let u={dims:s,dataType:t[0].dataType},d=K("output",t[0].dataType,s.length),g=U("input",t[0].dataType,t[0].dims.length),w=M.size(s),x=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:l.length},{name:"signs",type:"i32",length:p.length},{name:"steps",type:"u32",length:a.length}],C=[{type:12,data:w},{type:12,data:l},{type:6,data:p},{type:12,data:a},...X(t[0].dims,s)],O=Y=>`
      ${Y.registerUniforms(x).declareVariables(g,d)}
        ${Lm(g,d,n)}
        ${Y.mainStart()}
          ${Y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
          let output_indices = ${d.offsetToIndices("global_idx")};
          let input_indices = calculateInputIndices(output_indices);
          ${d.setByOffset("global_idx",g.getByIndices("input_indices"))}
      }`;return{name:"Slice",shaderCache:{hint:`${p.length}_${l.length}_${a.length}`,inputDependencies:["rank"]},getShaderSource:O,getRunData:()=>({outputs:[u],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:C})}},ld=(t,e)=>{Hm(t.inputs,e);let n=Gm(t.inputs,e);t.compute(Fm(t.inputs,n),{inputs:[0]})},dd=t=>{let e=t.starts,n=t.ends,i=t.axes;return we({starts:e,ends:n,axes:i})}}),qm,jm,pd,md,fd=j(()=>{ye(),xe(),Ze(),_e(),qm=t=>{if(!t||t.length!==1)throw new Error("Softmax op requires 1 input.")},jm=(t,e)=>{let n=t.dims,i=M.size(n),o=64,a=e.axis;if(a<0&&(a=n.length+a),a<n.length-1)throw new Error("softmax only supports last axis for now.");let l=n[a],c=i/l,p=Ue(l),s=l/p,u=(O,Y)=>Y===4?`max(max(${O}.x, ${O}.y), max(${O}.z, ${O}.w))`:Y===2?`max(${O}.x, ${O}.y)`:Y===3?`max(max(${O}.x, ${O}.y), ${O}.z)`:O,d=U("x",t.dataType,t.dims,p),g=K("result",t.dataType,t.dims,p),w=d.type.value,x=De(t.dataType)==="f32"?`var threadMax = ${w}(-3.402823e+38f);`:`var threadMax = ${w}(-65504.0h);`,C=O=>`
      var<workgroup> rowMaxShared : ${w};
      var<workgroup> rowSumShared : ${w};
      var<workgroup> threadShared : array<${w}, ${o}>;

      fn getValue(row: i32, col: i32, row_stride: i32) -> ${w} {
        let index = row * row_stride + col;
        return x[index];
      }

      fn setValue(row: i32, col: i32, row_stride: i32, value: ${w}) {
        let index = row * row_stride + col;
        result[index] = value;
      }
      ${O.registerUniform("packedCols","i32").declareVariables(d,g)}
      ${O.mainStart()}
        let gindex = i32(global_idx);
        let lindex = i32(local_idx);
        const wg = ${o};
        let row = gindex / wg;
        let cols = uniforms.packedCols;
        let row_stride : i32 = uniforms.packedCols;

        // find the rows max
        ${x}
        for (var col = lindex; col < cols; col += wg) {
          let value = getValue(row, col, row_stride);
          threadMax = max(threadMax, value);
        }
        if (lindex < cols) {
          threadShared[lindex] = threadMax;
        }
        workgroupBarrier();

        var reduceSize = min(cols, wg);
        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
          reduceSize = currSize + (reduceSize & 1);
          if (lindex < currSize) {
            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowMaxShared = ${w}(${u("threadShared[0]",p)});
        }
        workgroupBarrier();

        // find the rows sum
        var threadSum = ${w}(0.0);
        for (var col = lindex; col < cols; col += wg) {
          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);
          threadSum += subExp;
        }
        threadShared[lindex] = threadSum;
        workgroupBarrier();

        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {
          if (lindex < currSize) {
            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowSumShared = ${w}(${Et("threadShared[0]",p)});
        }
        workgroupBarrier();

        // calculate final value for each element in the row
        for (var col = lindex; col < cols; col += wg) {
          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;
          setValue(row, col, row_stride, value);
        }
      }`;return{name:"Softmax",shaderCache:{hint:`${p}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:n,dataType:t.dataType}],dispatchGroup:{x:c},programUniforms:[{type:6,data:s}]}),getShaderSource:C}},pd=(t,e)=>{qm(t.inputs),t.compute(jm(t.inputs[0],e))},md=t=>we({axis:t.axis})}),Km,Ym,Xm,Zm,Qm,hd,gd,yd=j(()=>{ye(),xe(),Ze(),_e(),Km=t=>{if(!t||t.length<1)throw new Error("too few inputs")},Ym=(t,e)=>{let n=[],i=e.numOutputs;return t[1].dims[0]>0&&(t[1].getBigInt64Array().forEach(o=>n.push(Number(o))),i=n.length),we({numOutputs:i,axis:e.axis,splitSizes:n})},Xm=t=>`
fn calculateOutputIndex(index: u32) -> u32 {
    for (var i: u32 = 0u; i < ${t}u; i += 1u ) {
    if (index < ${fe("uniforms.size_in_split_axis","i",t)}) {
        return i;
    }
    }
    return ${t}u;
}`,Zm=t=>{let e=t.length,n=[];for(let i=0;i<e;++i){let o=t[i].setByIndices("indices","input[global_idx]");e===1?n.push(o):i===0?n.push(`if (output_number == ${i}u) { ${o} }`):i===e-1?n.push(`else { ${o} }`):n.push(`else if (output_number == ${i}) { ${o} }`)}return`
      fn writeBufferData(output_number: u32, indices: ${t[0].type.indices}, global_idx: u32) {
        ${n.join(`
`)}
      }`},Qm=(t,e)=>{let n=t[0].dims,i=M.size(n),o=t[0].dataType,a=M.normalizeAxis(e.axis,n.length),l=new Array(e.numOutputs),c=U("input",o,n.length),p=new Array(e.numOutputs),s=[],u=[],d=0,g=[{type:12,data:i}];for(let x=0;x<e.numOutputs;x++){d+=e.splitSizes[x],p[x]=d;let C=n.slice();C[e.axis]=e.splitSizes[x],u.push(C),l[x]=K(`output${x}`,o,C.length),s.push({dims:u[x],dataType:t[0].dataType})}g.push({type:12,data:p},...X(n,...u));let w=x=>`
  ${x.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",p.length).declareVariables(c,...l)}
  ${Xm(p.length)}
  ${Zm(l)}

  ${x.mainStart()}
    ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}

    var indices = ${c.offsetToIndices("global_idx")};
    var index = ${c.indicesGet("indices",a)};
    let output_number = calculateOutputIndex(index);
    if (output_number != 0) {
      index -= ${fe("uniforms.size_in_split_axis","output_number - 1u",p.length)};
      ${c.indicesSet("indices",a,"index")};
    }
    writeBufferData(output_number, indices, global_idx);
  }`;return{name:"Split",shaderCache:{hint:e.cacheKey,inputDependencies:["rank"]},getShaderSource:w,getRunData:()=>({outputs:s,dispatchGroup:{x:Math.ceil(i/64)},programUniforms:g})}},hd=(t,e)=>{Km(t.inputs);let n=t.inputs.length===1?e:Ym(t.inputs,e);t.compute(Qm(t.inputs,n),{inputs:[0]})},gd=t=>{let e=t.axis,n=t.splitSizes,i=t.numOutputs<0?n.length:t.numOutputs;if(i!==n.length)throw new Error("numOutputs and splitSizes lengh must be equal");return we({axis:e,numOutputs:i,splitSizes:n})}}),bd,Jm,ef,tf,vd,wd=j(()=>{ye(),xe(),_e(),bd=t=>Array.from(t.getBigInt64Array(),Number),Jm=t=>{if(!t||t.length!==2)throw new Error("Tile requires 2 inputs.");if(t[0].dataType!==1&&t[0].dataType!==6&&t[0].dataType!==12)throw new Error("Tile only support float, int32, and uint32 data types");if(t[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(t[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(bd(t[1]).length!==t[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},ef=(t,e)=>{let n=[];for(let i=0;i<t.length;++i)n.push(t[i]*e[i]);return n},tf=t=>{let e=t[0].dims,n=bd(t[1]),i=ef(e,n),o=M.size(i),a=t[0].dataType,l=U("input",a,e.length),c=K("output",a,i.length),p=s=>`
      const inputShape = ${l.indices(...e)};
      ${s.registerUniform("output_size","u32").declareVariables(l,c)}
      ${s.mainStart()}
      ${s.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let output_indices = ${c.offsetToIndices("global_idx")};
      var input_indices: ${l.type.indices};
      for (var i = 0; i < ${e.length}; i++) {
        let input_dim_i = ${l.indicesGet("uniforms.input_shape","i")};
        let input_dim_value = ${c.indicesGet("output_indices","i")}  % input_dim_i;

        ${l.indicesSet("input_indices","i","input_dim_value")}
      }
      ${c.setByOffset("global_idx",l.getByIndices("input_indices"))}
    }`;return{name:"Tile",shaderCache:{hint:`${n}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:[{type:12,data:o},...X(t[0].dims,i)]}),getShaderSource:p}},vd=t=>{Jm(t.inputs),t.compute(tf(t.inputs),{inputs:[0]})}}),rf,nf,$d,_d=j(()=>{ye(),xe(),_e(),rf=(t,e,n,i,o)=>{let a=K("output_data",o,n.length,4),l=U("a_data",e[1].dataType,e[1].dims.length,4),c=U("b_data",e[2].dataType,e[2].dims.length,4),p=U("c_data",e[0].dataType,e[0].dims.length,4),s,u=(d,g,w)=>`select(${g}, ${d}, ${w})`;if(!i)s=a.setByOffset("global_idx",u(l.getByOffset("global_idx"),c.getByOffset("global_idx"),p.getByOffset("global_idx")));else{let d=(g,w,x="")=>{let C=`a_data[index_a${w}][component_a${w}]`,O=`b_data[index_b${w}][component_b${w}]`,Y=`bool(c_data[index_c${w}] & (0xffu << (component_c${w} * 8)))`;return`
            let output_indices${w} = ${a.offsetToIndices(`global_idx * 4u + ${w}u`)};
            let offset_a${w} = ${l.broadcastedIndicesToOffset(`output_indices${w}`,a)};
            let offset_b${w} = ${c.broadcastedIndicesToOffset(`output_indices${w}`,a)};
            let offset_c${w} = ${p.broadcastedIndicesToOffset(`output_indices${w}`,a)};
            let index_a${w} = offset_a${w} / 4u;
            let index_b${w} = offset_b${w} / 4u;
            let index_c${w} = offset_c${w} / 4u;
            let component_a${w} = offset_a${w} % 4u;
            let component_b${w} = offset_b${w} % 4u;
            let component_c${w} = offset_c${w} % 4u;
            ${g}[${w}] = ${x}(${u(C,O,Y)});
          `};o===9?s=`
            var data = vec4<u32>(0);
            ${d("data",0,"u32")}
            ${d("data",1,"u32")}
            ${d("data",2,"u32")}
            ${d("data",3,"u32")}
            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:s=`
            ${d("output_data[global_idx]",0)}
            ${d("output_data[global_idx]",1)}
            ${d("output_data[global_idx]",2)}
            ${d("output_data[global_idx]",3)}
          `}return`
        ${t.registerUniform("vec_size","u32").declareVariables(p,l,c,a)}
        ${t.mainStart()}
        ${t.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${s}
      }`},nf=t=>{let e=t[1].dims,n=t[2].dims,i=t[0].dims,o=t[1].dataType,a=!(M.areEqual(e,n)&&M.areEqual(n,i)),l=e,c=M.size(e);if(a){let s=zt.calcShape(zt.calcShape(e,n,!1),i,!1);if(!s)throw new Error("Can't perform where op on the given tensors");l=s,c=M.size(l)}let p=Math.ceil(c/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:s=>rf(s,t,l,a,o),getRunData:()=>({outputs:[{dims:l,dataType:o}],dispatchGroup:{x:Math.ceil(c/64/4)},programUniforms:[{type:12,data:p},...X(i,e,n,l)]})}},$d=t=>{t.compute(nf(t.inputs))}}),xd,Sd=j(()=>{zs(),oo(),Ws(),Vs(),Cu(),Du(),io(),co(),Xu(),Ju(),rl(),sl(),dl(),pl(),hl(),bl(),$l(),xl(),Cl(),mo(),Al(),Pl(),zl(),Zl(),Jl(),jn(),nd(),od(),sd(),cd(),fd(),yd(),wd(),Rr(),Jn(),_d(),xd=new Map([["Abs",[Hs]],["Acos",[Gs]],["Acosh",[Ls]],["Add",[Iu]],["ArgMax",[Rs,no]],["ArgMin",[Ps,no]],["Asin",[Fs]],["Asinh",[qs]],["Atan",[js]],["Atanh",[Ks]],["Attention",[Ms]],["AveragePool",[Hl,Vl]],["BatchNormalization",[Us]],["BiasAdd",[Ns]],["BiasSplitGelu",[Su]],["Cast",[Xs,Ys]],["Ceil",[Qs]],["Clip",[Zs]],["Concat",[Bs,Ds]],["Conv",[go,ho]],["ConvTranspose",[Yu,Ku]],["Cos",[Js]],["Cosh",[eu]],["CumSum",[Zu,Qu]],["DepthToSpace",[el,tl]],["Div",[Tu]],["Einsum",[ol,al]],["Elu",[tu,Zn]],["Equal",[Au]],["Erf",[ru]],["Exp",[nu]],["Expand",[ll]],["FastGelu",[cl]],["Floor",[iu]],["FusedConv",[go,ho]],["Gather",[fl,ml]],["GatherElements",[yl,gl]],["Gelu",[ou]],["Gemm",[wl,vl]],["GlobalAveragePool",[Fl,Ll]],["GlobalMaxPool",[Xl,Yl]],["Greater",[Pu]],["GreaterOrEqual",[zu]],["HardSigmoid",[mu,pu]],["InstanceNormalization",[_l]],["LayerNormalization",[Sl]],["LeakyRelu",[au,Zn]],["Less",[Ru]],["LessOrEqual",[Bu]],["Log",[_u]],["MatMul",[Hu]],["MatMulNBits",[Il,Tl]],["MaxPool",[jl,Kl]],["Mul",[Eu]],["MultiHeadAttention",[Ol,kl]],["Neg",[uu]],["Not",[su]],["Pad",[Rl]],["Pow",[ku]],["Range",[Ql]],["Reciprocal",[lu]],["ReduceMin",[Is]],["ReduceMean",[$s]],["ReduceMax",[Cs]],["ReduceSum",[As]],["ReduceProd",[Ts]],["ReduceL1",[_s]],["ReduceL2",[xs]],["ReduceLogSum",[ks]],["ReduceLogSumExp",[Ss]],["ReduceSumSquare",[Es]],["Relu",[du]],["Resize",[td,rd]],["RotaryEmbedding",[id$1]],["Sigmoid",[cu]],["Sin",[fu]],["Sinh",[hu]],["Slice",[ld,dd]],["SkipLayerNormalization",[ad]],["Split",[hd,gd]],["Sqrt",[gu]],["Softmax",[pd,md]],["Sub",[Ou]],["Tan",[yu]],["Tanh",[vu]],["ThresholdedRelu",[$u,Zn]],["Tile",[vd]],["Transpose",[us,ls]],["Where",[$d]]])}),li,Cd=j(()=>{_t(),Xt(),_e(),li=class{constructor(t){this.backend=t,this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,e){this.repo.set(t,e)}run(t,e,n,i,o){yt(t.programInfo.name);let a=this.backend.device,l=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let c=[];for(let s of e)c.push({binding:c.length,resource:{buffer:s.buffer}});for(let s of n)c.push({binding:c.length,resource:{buffer:s.buffer}});o&&c.push({binding:c.length,resource:o});let p=a.createBindGroup({layout:t.computePipeline.getBindGroupLayout(0),entries:c,label:t.programInfo.name});if(this.backend.sessionStatus==="capturing"){let s={kernelId:this.backend.currentKernelId,computePipeline:t.computePipeline,bindGroup:p,dispatchGroup:i};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(s)}l.setPipeline(t.computePipeline),l.setBindGroup(0,p),l.dispatchWorkgroups(...i),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),ut(t.programInfo.name)}dispose(){}build(t,e){yt(t.name);let n=this.backend.device,i=[];n.features.has("shader-f16")&&i.push("enable f16;");let o=as(e,this.backend.device.limits),a=t.getShaderSource(o),l=`${i.join(`
`)}
${o.additionalImplementations}
${a}`,c=n.createShaderModule({code:l,label:t.name});Ne("verbose",()=>`[WebGPU] ${t.name} shader code: ${l}`);let p=n.createComputePipeline({compute:{module:c,entryPoint:"main"},layout:"auto",label:t.name});return ut(t.name),{programInfo:t,computePipeline:p,uniformVariablesInfo:o.variablesInfo}}normalizeDispatchGroupSize(t){let e=typeof t=="number"?t:t.x,n=typeof t=="number"?1:t.y||1,i=typeof t=="number"?1:t.z||1,o=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(e<=o&&n<=o&&i<=o)return[e,n,i];let a=e*n*i,l=Math.ceil(Math.sqrt(a));if(l>o){if(l=Math.ceil(Math.cbrt(a)),l>o)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[l,l,l]}else return[l,l,1]}}}),of,af,_o,di,Id=j(()=>{_t(),ye(),Xt(),es(),os(),Sd(),Cd(),of=(t,e)=>{if(e.length!==t.length)throw new Error(`inputDependencies length ${e.length} is not equal to inputTensors length ${t.length}.`);let n=[];for(let i=0;i<t.length;++i){let o=t[i].dataType;switch(e[i]){case"none":{n.push("");break}case"type":{n.push(`${o}`);break}case"rank":{let a=t[i].dims.length;n.push(`${o};${a}`);break}case"dims":{let a=t[i].dims.join(",");n.push(`${o};${a}`);break}default:throw new Error(`unsupported input dependency: ${e[i]}`)}}return n.join("|")},af=(t,e,n)=>{let i=t.name;return t.shaderCache?.hint&&(i+="["+t.shaderCache.hint+"]"),i+=":"+n+`:${of(e,t.shaderCache?.inputDependencies??new Array(e.length).fill("dims"))}`,i},_o=class{constructor(t){t&&(this.architecture=t.architecture,this.vendor=t.vendor)}isArchitecture(t){return this.architecture===t}isVendor(t){return this.vendor===t}},di=class{constructor(){this.currentSessionId=null,this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map,this.sessionStatus="default",this.capturedCommandList=new Map,this.capturedPendingKernels=new Map,this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let t=this.kernelCustomData.get(this.currentKernelId);return t||(t={},this.kernelCustomData.set(this.currentKernelId,t)),t}async initialize(t,e){this.env=t;let n=[],i={requiredLimits:{maxComputeWorkgroupStorageSize:e.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:e.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:e.limits.maxStorageBufferBindingSize,maxBufferSize:e.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:e.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:e.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:e.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:e.limits.maxComputeWorkgroupSizeZ},requiredFeatures:n};e.features.has("chromium-experimental-timestamp-query-inside-passes")?n.push("chromium-experimental-timestamp-query-inside-passes"):e.features.has("timestamp-query")&&n.push("timestamp-query"),e.features.has("shader-f16")&&n.push("shader-f16"),this.device=await e.requestDevice(i),this.adapterInfo=new _o(await e.requestAdapterInfo()),this.gpuDataManager=is(this),this.programManager=new li(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,Qa(t.logLevel,!!t.debug),this.device.onuncapturederror=o=>{o.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${o.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:e,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let t=this.getCommandEncoder(),e={};this.queryType==="at-passes"&&(e.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=t.beginComputePass(e)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;yt(),this.endComputePass();let t;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),t=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(t,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,t,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&t.mapAsync(GPUMapMode.READ).then(()=>{let e=new BigUint64Array(t.getMappedRange()),n=this.pendingQueries.get(t);for(let i=0;i<e.length/2;i++){let o=n[i],a=o.kernelId,l=this.kernels.get(a),c=l.kernelType,p=l.kernelName,s=o.programName,u=o.inputTensorViews,d=o.outputTensorViews,g=e[i*2],w=e[i*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=g);let x=Number(g-this.queryTimeBase),C=Number(w-this.queryTimeBase);if(!Number.isSafeInteger(x)||!Number.isSafeInteger(C))throw new RangeError("incorrect timestamp range");if(this.env.webgpu.profiling?.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:u.map(O=>({dims:O.dims,dataType:Yt(O.dataType)})),outputsMetadata:d.map(O=>({dims:O.dims,dataType:Yt(O.dataType)})),kernelId:a,kernelType:c,kernelName:p,programName:s,startTime:x,endTime:C});else{let O="";u.forEach((q,ue)=>{O+=`input[${ue}]: [${q.dims}] | ${Yt(q.dataType)}, `});let Y="";d.forEach((q,ue)=>{Y+=`output[${ue}]: [${q.dims}] | ${Yt(q.dataType)}, `}),console.log(`[profiling] kernel "${a}|${c}|${p}|${s}" ${O}${Y}execution time: ${C-x} ns`)}Bn("GPU",`${s}::${g}::${w}`)}t.unmap(),this.pendingQueries.delete(t)}),ut()}run(t,e,n,i,o,a){yt(t.name);let l=[];for(let q=0;q<e.length;++q){let ue=e[q].data;if(ue===0)continue;let pe=this.gpuDataManager.get(ue);if(!pe)throw new Error(`no GPU data for input: ${ue}`);l.push(pe)}let{outputs:c,dispatchGroup:p,programUniforms:s}=t.getRunData(e),u=n.length===0?c.map((q,ue)=>ue):n;if(u.length!==c.length)throw new Error(`Output size ${u.length} must be equal to ${c.length}.`);let d=[],g=[];for(let q=0;q<c.length;++q){if(!Number.isInteger(u[q])||u[q]<-3||u[q]>=a)throw new Error(`Invalid output index: ${u[q]}`);if(u[q]===-3)continue;let ue=u[q]===-1,pe=u[q]===-2,se=ue||pe?o(c[q].dataType,c[q].dims):i(u[q],c[q].dataType,c[q].dims);if(d.push(se),se.data===0)continue;let Re=this.gpuDataManager.get(se.data);if(!Re)throw new Error(`no GPU data for output: ${se.data}`);if(ue&&this.temporaryData.push(Re),pe){let Oe=this.kernelPersistentData.get(this.currentKernelId);Oe||(Oe=[],this.kernelPersistentData.set(this.currentKernelId,Oe)),Oe.push(Re)}g.push(Re)}if(l.length!==e.length||g.length!==d.length){if(g.length===0)return ut(t.name),d;throw new Error(`Program ${t.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let w;if(s){let q=0,ue=[];s.forEach(Oe=>{let Ce=typeof Oe.data=="number"?[Oe.data]:Oe.data;if(Ce.length===0)return;let He=Oe.type===10?2:4,$t,Sn;Oe.type===10?(Sn=Ce.length>4?16:Ce.length>2?8:Ce.length*He,$t=Ce.length>4?16:He*Ce.length):(Sn=Ce.length<=2?Ce.length*He:16,$t=16),q=Math.ceil(q/Sn)*Sn,ue.push(q);let xn=Oe.type===10?8:4;q+=Ce.length>4?Math.ceil(Ce.length/xn)*$t:Ce.length*He});let pe=16;q=Math.ceil(q/pe)*pe;let se=new ArrayBuffer(q);s.forEach((Oe,Ce)=>{let He=ue[Ce],$t=typeof Oe.data=="number"?[Oe.data]:Oe.data;if(Oe.type===6)new Int32Array(se,He,$t.length).set($t);else if(Oe.type===12)new Uint32Array(se,He,$t.length).set($t);else if(Oe.type===10)new Uint16Array(se,He,$t.length).set($t);else if(Oe.type===1)new Float32Array(se,He,$t.length).set($t);else throw new Error(`Unsupported uniform type: ${Yt(Oe.type)}`)});let Re=this.gpuDataManager.create(q,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(Re.buffer,0,se,0,q),this.gpuDataManager.release(Re.id),w={offset:0,size:q,buffer:Re.buffer}}let x=this.programManager.normalizeDispatchGroupSize(p),C=x[1]===1&&x[2]===1,O=af(t,e,C),Y=this.programManager.getArtifact(O);if(Y||(Y=this.programManager.build(t,x),this.programManager.setArtifact(O,Y),Ne("info",()=>`[artifact] key: ${O}, programName: ${t.name}`)),s&&Y.uniformVariablesInfo){if(s.length!==Y.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${Y.uniformVariablesInfo.length}, got ${s.length} in program "${Y.programInfo.name}".`);for(let q=0;q<s.length;q++){let ue=s[q],pe=ue.type,se=typeof ue.data=="number"?1:ue.data.length,[Re,Oe]=Y.uniformVariablesInfo[q];if(pe!==Re||se!==Oe)throw new Error(`Uniform variable ${q} mismatch: expect type ${Re} with size ${Oe}, got type ${pe} with size ${se} in program "${Y.programInfo.name}".`)}}if(Ne("info",()=>`[ProgramManager] run "${t.name}" (key=${O}) with ${x[0]}x${x[1]}x${x[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let q={kernelId:this.currentKernelId,programName:Y.programInfo.name,inputTensorViews:e,outputTensorViews:d};this.pendingKernels.push(q),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(q)}return this.programManager.run(Y,l,g,x,w),ut(t.name),d}upload(t,e){this.gpuDataManager.upload(t,e)}memcpy(t,e){this.gpuDataManager.memcpy(t,e)}async download(t,e){await this.gpuDataManager.download(t,e)}alloc(t){return this.gpuDataManager.create(t).id}free(t){return this.gpuDataManager.release(t)}createKernel(t,e,n,i){let o=xd.get(t);if(!o)throw new Error(`kernel not implemented: ${t}`);let a={kernelType:t,kernelName:i,kernelEntry:o[0],attributes:[o[1],n]};this.kernels.set(e,a)}releaseKernel(t){let e=this.kernelPersistentData.get(t);if(e){for(let n of e)this.gpuDataManager.release(n.id);this.kernelPersistentData.delete(t)}this.kernelCustomData.delete(t),this.kernels.delete(t)}computeKernel(t,e,n){let i=this.kernels.get(t);if(!i)throw new Error(`kernel not created: ${t}`);let o=i.kernelType,a=i.kernelName,l=i.kernelEntry,c=i.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${o}] ${a}" is not allowed to be called recursively`);this.currentKernelId=t,c[0]&&(c[1]=c[0](c[1]),c[0]=void 0),Ne("info",()=>`[WebGPU] Start to run kernel "[${o}] ${a}"...`);let p=this.env.debug;this.temporaryData=[];try{return p&&this.device.pushErrorScope("validation"),l(e,c[1]),0}catch(s){return n.push(Promise.resolve(`[WebGPU] Kernel "[${o}] ${a}" failed. ${s}`)),1}finally{p&&n.push(this.device.popErrorScope().then(s=>s?`GPU validation error for kernel "[${o}] ${a}": ${s.message}`:null));for(let s of this.temporaryData)this.gpuDataManager.release(s.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(t,e,n,i){let o=this.sessionExternalDataMapping.get(t);o||(o=new Map,this.sessionExternalDataMapping.set(t,o));let a=o.get(e),l=this.gpuDataManager.registerExternalBuffer(n,i,a?.[1]);return o.set(e,[l,n]),l}unregisterBuffers(t){let e=this.sessionExternalDataMapping.get(t);e&&(e.forEach(n=>this.gpuDataManager.unregisterExternalBuffer(n[1])),this.sessionExternalDataMapping.delete(t))}getBuffer(t){let e=this.gpuDataManager.get(t);if(!e)throw new Error(`no GPU data for buffer: ${t}`);return e.buffer}createDownloader(t,e,n){return async()=>{let i=await Xi(this,t,e);return Ja(i.buffer,n)}}writeTimestamp(t){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,t)}setQueryType(){this.queryType="none",(this.env.webgpu.profiling?.mode==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){Ne("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){Ne("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){Ne("info","replay"),this.sessionStatus="replaying";let t=this.capturedCommandList.get(this.currentSessionId),e=this.capturedPendingKernels.get(this.currentSessionId),n=t.length;this.pendingKernels=[];for(let i=0;i<n;i++){let o=this.getComputePassEncoder(),a=t[i];this.writeTimestamp(this.pendingDispatchNumber*2),o.setPipeline(a.computePipeline),o.setBindGroup(0,a.bindGroup),o.dispatchWorkgroups(...a.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(e[i]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onReleaseSession(t){this.unregisterBuffers(t),this.capturedCommandList.has(t)&&this.capturedCommandList.delete(t),this.capturedPendingKernels.has(t)&&this.capturedPendingKernels.delete(t),this.gpuDataManager.onReleaseSession(t)}onRunStart(t){this.currentSessionId=t,this.setQueryType()}}}),Td={};kr(Td,{init:()=>sf});var an,xo,sf,Ad=j(()=>{ye(),Id(),Xt(),xe(),an=class w4{constructor(e,n,i,o){this.module=e,this.dataType=n,this.data=i,this.dims=o}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let e=M.size(this.dims);return e===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,e)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let e=M.size(this.dims);return e===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,e)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let e=M.size(this.dims);return e===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,e)}reshape(e){if(M.size(e)!==M.size(this.dims))throw new Error("Invalid new shape");return new w4(this.module,this.dataType,this.data,e)}},xo=class{constructor(t,e,n){this.module=t,this.backend=e,this.customDataOffset=0,this.customDataSize=0,this.adapterInfo=e.adapterInfo;let i=t.HEAPU32,o=n>>>2;this.opKernelContext=i[o++];let a=i[o++];this.outputCount=i[o++],this.customDataOffset=i[o++],this.customDataSize=i[o++];let l=[];for(let c=0;c<a;c++){let p=i[o++],s=i[o++],u=i[o++],d=[];for(let g=0;g<u;g++)d.push(i[o++]);l.push(new an(t,p,s,d))}this.inputs=l}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}getMaxComputeWorkgroupSizes(){return[this.backend.device.limits.maxComputeWorkgroupSizeX,this.backend.device.limits.maxComputeWorkgroupSizeY,this.backend.device.limits.maxComputeWorkgroupSizeZ]}getMaxComputeWorkgroupStoragesize(){return this.backend.device.limits.maxComputeWorkgroupStorageSize}compute(t,e){let n=e?.inputs?.map(l=>typeof l=="number"?this.inputs[l]:l)??this.inputs,i=e?.outputs??[],o=(l,c,p)=>new an(this.module,c,this.output(l,p),p),a=(l,c)=>{let p=cr(l);if(!p)throw new Error(`Unsupported data type: ${l}`);let s=p*M.size(c),u=s>0?this.backend.gpuDataManager.create(s).id:0;return new an(this.module,l,u,c)};return this.backend.run(t,n,i,o,a,this.outputCount)}output(t,e){let n=this.module.stackSave();try{let i=this.module.stackAlloc((1+e.length)*4),o=i>>2;this.module.HEAPU32[o++]=e.length;for(let a=0;a<e.length;a++)this.module.HEAPU32[o++]=e[a];return this.module._JsepOutput(this.opKernelContext,t,i)}catch(i){throw new Error(`Failed to generate kernel's output[${t}] with dims [${e}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${i}`)}finally{this.module.stackRestore(n)}}},sf=async(t,e,n,i)=>{let o=e.jsepInit;if(!o)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(t==="webgpu"){let a=new di;await a.initialize(n,i),o("webgpu",[a,l=>a.alloc(l),l=>a.free(l),(l,c,p,s=!1)=>{if(s)Ne("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${l}, dst=${c}, size=${p}`),a.memcpy(l,c);else{Ne("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${l}, gpuDataId=${c}, size=${p}`);let u=e.HEAPU8.subarray(l>>>0,(l>>>0)+p);a.upload(c,u)}},async(l,c,p)=>{Ne("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${l}, dataOffset=${c}, size=${p}`),await a.download(l,()=>e.HEAPU8.subarray(c>>>0,(c>>>0)+p))},(l,c,p)=>a.createKernel(l,c,p,e.UTF8ToString(e._JsepGetNodeName(c))),l=>a.releaseKernel(l),(l,c,p,s)=>{Ne("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${p}, kernel=${l}, contextDataOffset=${c}`);let u=new xo(e,a,c);return a.computeKernel(l,u,s)},()=>a.captureBegin(),()=>a.captureEnd(),()=>a.replay()])}else o("webnn")}}),uf,kd,Od,hr,lf,So,Pd,Rd,Ed,zd,Bd,Dd,Md=j(()=>{ja(),Ya(),ye(),Or(),Wn(),qi(),uf=(t,e)=>{Fe()._OrtInit(t,e)!==0&&We("Can't initialize onnxruntime.")},kd=async t=>{uf(t.wasm.numThreads,en(t.logLevel))},Od=async(t,e)=>{{let n=(Ad(),sr(Td)).init;if(e==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let i=t.webgpu.adapter;if(i){if(typeof i.limits!="object"||typeof i.features!="object"||typeof i.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let o=t.webgpu.powerPreference;if(o!==void 0&&o!=="low-power"&&o!=="high-performance")throw new Error(`Invalid powerPreference setting: "${o}"`);let a=t.webgpu.forceFallbackAdapter;if(a!==void 0&&typeof a!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${a}"`);if(i=await navigator.gpu.requestAdapter({powerPreference:o,forceFallbackAdapter:a}),!i)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}if(!t.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using `webgpu` EP");await n("webgpu",Fe(),t,i)}if(e==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await n("webnn",Fe(),t)}}},hr=new Map,lf=t=>{let e=Fe(),n=e.stackSave();try{let i=e.stackAlloc(8);return e._OrtGetInputOutputCount(t,i,i+4)!==0&&We("Can't get session input/output count."),[e.HEAP32[i/4],e.HEAP32[i/4+1]]}finally{e.stackRestore(n)}},So=t=>{let e=Fe(),n=e._malloc(t.byteLength);if(n===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${t.byteLength}.`);return e.HEAPU8.set(t,n),[n,t.byteLength]},Pd=async(t,e)=>{let n,i,o=Fe();Array.isArray(t)?[n,i]=t:t.buffer===o.HEAPU8.buffer?[n,i]=[t.byteOffset,t.byteLength]:[n,i]=So(t);let a=0,l=0,c=0,p=[],s=[],u=[];try{if([l,p]=Ka(e),e?.externalData&&o.mountExternalData){let q=[];for(let ue of e.externalData){let pe=typeof ue=="string"?ue:ue.path;q.push(tn(typeof ue=="string"?ue:ue.data).then(se=>{o.mountExternalData(pe,se)}))}await Promise.all(q)}a=await o._OrtCreateSession(n,i,l),a===0&&We("Can't create a session.");let[d,g]=lf(a),w=!!e?.enableGraphCapture,x=[],C=[],O=[];for(let q=0;q<d;q++){let ue=o._OrtGetInputName(a,q);ue===0&&We("Can't get an input name."),s.push(ue),x.push(o.UTF8ToString(ue))}for(let q=0;q<g;q++){let ue=o._OrtGetOutputName(a,q);ue===0&&We("Can't get an output name."),u.push(ue);let pe=o.UTF8ToString(ue);C.push(pe);{if(w&&e?.preferredOutputLocation===void 0){O.push("gpu-buffer");continue}let se=typeof e?.preferredOutputLocation=="string"?e.preferredOutputLocation:e?.preferredOutputLocation?.[pe]??"cpu";if(se!=="cpu"&&se!=="cpu-pinned"&&se!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${se}.`);if(w&&se!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${se}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);O.push(se)}}let Y=null;return O.some(q=>q==="gpu-buffer")&&(c=o._OrtCreateBinding(a),c===0&&We("Can't create IO binding."),Y={handle:c,outputPreferredLocations:O,outputPreferredLocationsEncoded:O.map(q=>Fi(q))}),hr.set(a,[a,s,u,Y,w,!1]),[a,x,C]}catch(d){throw s.forEach(g=>o._OrtFree(g)),u.forEach(g=>o._OrtFree(g)),c!==0&&o._OrtReleaseBinding(c),a!==0&&o._OrtReleaseSession(a),d}finally{o._free(n),l!==0&&o._OrtReleaseSessionOptions(l),p.forEach(d=>o._free(d)),o.unmountExternalData?.()}},Rd=t=>{let e=Fe(),n=hr.get(t);if(!n)throw new Error(`cannot release session. invalid session id: ${t}`);let[i,o,a,l,c]=n;l&&(c&&e._OrtClearBoundOutputs(l.handle),e._OrtReleaseBinding(l.handle)),e.jsepOnReleaseSession?.(t),o.forEach(p=>e._OrtFree(p)),a.forEach(p=>e._OrtFree(p)),e._OrtReleaseSession(i),hr.delete(t)},Ed=(t,e,n,i,o,a=!1)=>{if(!t){e.push(0);return}let l=Fe(),c=t[0],p=t[1],s=t[3],u,d;if(c==="string"&&s==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(a&&s!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${o} when enableGraphCapture is true.`);if(s==="gpu-buffer"){let x=t[2].gpuBuffer,C=cr(Li(c));d=p.reduce((Y,q)=>Y*q,1)*C;let O=l.jsepRegisterBuffer;if(!O)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');u=O(i,o,x,d)}else{let x=t[2];if(Array.isArray(x)){d=4*x.length,u=l._malloc(d),n.push(u);let C=u/4;for(let O=0;O<x.length;O++){if(typeof x[O]!="string")throw new TypeError(`tensor data at index ${O} is not a string`);l.HEAPU32[C++]=qe(x[O],n)}}else d=x.byteLength,u=l._malloc(d),n.push(u),l.HEAPU8.set(new Uint8Array(x.buffer,x.byteOffset,d),u)}let g=l.stackSave(),w=l.stackAlloc(4*p.length);try{let x=w/4;p.forEach(O=>l.HEAP32[x++]=O);let C=l._OrtCreateTensor(Li(c),u,d,w,p.length,Fi(s));C===0&&We(`Can't create tensor for input/output. session=${i}, index=${o}.`),e.push(C)}finally{l.stackRestore(g)}},zd=async(t,e,n,i,o,a)=>{let l=Fe(),c=hr.get(t);if(!c)throw new Error(`cannot run inference. invalid session id: ${t}`);let p=c[0],s=c[1],u=c[2],d=c[3],g=c[4],w=c[5],x=e.length,C=i.length,O=0,Y=[],q=[],ue=[],pe=[],se=l.stackSave(),Re=l.stackAlloc(x*4),Oe=l.stackAlloc(x*4),Ce=l.stackAlloc(C*4),He=l.stackAlloc(C*4);try{[O,Y]=qa(a);for(let Ft=0;Ft<x;Ft++)Ed(n[Ft],q,pe,t,e[Ft],g);for(let Ft=0;Ft<C;Ft++)Ed(o[Ft],ue,pe,t,x+i[Ft],g);let $t=Re/4,Sn=Oe/4,xn=Ce/4,Lr=He/4;for(let Ft=0;Ft<x;Ft++)l.HEAPU32[$t++]=q[Ft],l.HEAPU32[Sn++]=s[e[Ft]];for(let Ft=0;Ft<C;Ft++)l.HEAPU32[xn++]=ue[Ft],l.HEAPU32[Lr++]=u[i[Ft]];if(d&&!w){let{handle:Ft,outputPreferredLocations:Tt,outputPreferredLocationsEncoded:ze}=d;if(s.length!==x)throw new Error(`input count from feeds (${x}) is expected to be always equal to model's input count (${s.length}).`);for(let Ht=0;Ht<x;Ht++){let Ae=e[Ht];await l._OrtBindInput(Ft,s[Ae],q[Ht])!==0&&We(`Can't bind input[${Ht}] for session=${t}.`)}for(let Ht=0;Ht<C;Ht++){let Ae=i[Ht];o[Ht]?.[3]?l._OrtBindOutput(Ft,u[Ae],ue[Ht],0)!==0&&We(`Can't bind pre-allocated output[${Ht}] for session=${t}.`):l._OrtBindOutput(Ft,u[Ae],0,ze[Ae])!==0&&We(`Can't bind output[${Ht}] to ${Tt[Ht]} for session=${t}.`)}hr.set(t,[p,s,u,d,g,!0])}l.jsepOnRunStart?.(p);let jr;d?jr=await l._OrtRunWithBinding(p,d.handle,C,Ce,O):jr=await l._OrtRun(p,Oe,Re,x,He,C,Ce,O),jr!==0&&We("failed to call OrtRun().");let et=[];for(let Ft=0;Ft<C;Ft++){let Tt=l.HEAPU32[Ce/4+Ft];if(Tt===ue[Ft]){et.push(o[Ft]);continue}let ze=l.stackSave(),Ht=l.stackAlloc(16),Ae=!1,Be,tr=0;try{l._OrtGetTensorData(Tt,Ht,Ht+4,Ht+8,Ht+12)!==0&&We(`Can't access output tensor data on index ${Ft}.`);let No=Ht/4,ah=l.HEAPU32[No++];tr=l.HEAPU32[No++];let Mo=l.HEAPU32[No++],t0=l.HEAPU32[No++],o0=[];for(let Ih=0;Ih<t0;Ih++)o0.push(l.HEAPU32[Mo/4+Ih]);l._OrtFree(Mo);let Xr=o0.reduce((Ih,S0)=>Ih*S0,1);Be=Yt(ah);let a0=d?.outputPreferredLocations[i[Ft]];if(Be==="string"){if(a0==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Ih=[],S0=tr/4;for(let Sg=0;Sg<Xr;Sg++){let n1=l.HEAPU32[S0++],eg=Sg===Xr-1?void 0:l.HEAPU32[S0]-n1;Ih.push(l.UTF8ToString(n1,eg))}et.push([Be,o0,Ih,"cpu"])}else if(a0==="gpu-buffer"&&Xr>0){let Ih=l.jsepGetBuffer;if(!Ih)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let S0=Ih(tr),Sg=cr(ah);if(Sg===void 0||!Vn(Be))throw new Error(`Unsupported data type: ${Be}`);Ae=!0,et.push([Be,o0,{gpuBuffer:S0,download:l.jsepCreateDownloader(S0,Xr*Sg,Be),dispose:()=>{l._OrtReleaseTensor(Tt)}},"gpu-buffer"])}else{let Ih=Nn(Be),S0=new Ih(Xr);new Uint8Array(S0.buffer,S0.byteOffset,S0.byteLength).set(l.HEAPU8.subarray(tr,tr+S0.byteLength)),et.push([Be,o0,S0,"cpu"])}}finally{l.stackRestore(ze),Be==="string"&&tr&&l._free(tr),Ae||l._OrtReleaseTensor(Tt)}}return d&&!g&&(l._OrtClearBoundOutputs(d.handle),hr.set(t,[p,s,u,d,g,!1])),et}finally{l.stackRestore(se),q.forEach($t=>l._OrtReleaseTensor($t)),ue.forEach($t=>l._OrtReleaseTensor($t)),pe.forEach($t=>l._free($t)),O!==0&&l._OrtReleaseRunOptions(O),Y.forEach($t=>l._free($t))}},Bd=t=>{let e=Fe(),n=hr.get(t);if(!n)throw new Error("invalid session id");let i=n[0],o=e._OrtEndProfiling(i);o===0&&We("Can't get an profile file name."),e._OrtFree(o)},Dd=t=>{let e=[];for(let n of t){let i=n[2];!Array.isArray(i)&&"buffer"in i&&e.push(i.buffer)}return e}}),Ud=Er((t,e)=>{e.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var ao=Object.defineProperty;var nl=Object.getOwnPropertyDescriptor;var ol=Object.getOwnPropertyNames;var il=Object.prototype.hasOwnProperty;var Y=(e,t)=>()=>(e&&(t=e(e=0)),t);var Wr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),gn=(e,t)=>{for(var r in t)ao(e,r,{get:t[r],enumerable:!0})},al=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ol(t))!il.call(e,i)&&i!==r&&ao(e,i,{get:()=>t[i],enumerable:!(o=nl(t,i))||o.enumerable});return e};var wr=e=>al(ao({},"__esModule",{value:!0}),e);var so={};gn(so,{createReadStream:()=>Ai,readFile:()=>sl,readFileSync:()=>ul});var sl,ul,Ai,uo=Y(()=>{sl=void 0,ul=void 0,Ai=void 0});var lo={};gn(lo,{join:()=>dl});var dl,co=Y(()=>{dl=void 0});var Ei=Wr((Ti,po)=>{"use strict";var Ii=(()=>{var e=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(e||=__filename),function(t={}){var r=t,o,i,u=new Promise((s,m)=>{o=s,i=m});r.mountExternalData=(s,m)=>{(r.eb||(r.eb=new Map)).set(s,m)},r.unmountExternalData=()=>{delete r.eb};let a=()=>{let s=(g,$,T)=>(...B)=>{let H=dt,q=$?.();B=g(...B);let te=$?.();return q!==te&&(g=te,T(q),$=T=null),dt!=H?tn():B},m=g=>async(...$)=>{try{if(r.cb)throw Error("Session already started");let T=r.cb={xb:$[0],errors:[]},B=await g(...$);if(r.cb!==T)throw Error("Session mismatch");r.kb?.flush();let H=T.errors;if(0<H.length){let q=await Promise.all(H);if(q=q.filter(te=>te),0<q.length)throw Error(q.join(`\n`))}return B}finally{r.cb=null}};r._OrtCreateSession=s(r._OrtCreateSession,()=>r._OrtCreateSession,g=>r._OrtCreateSession=g),r._OrtRun=m(s(r._OrtRun,()=>r._OrtRun,g=>r._OrtRun=g)),r._OrtRunWithBinding=m(s(r._OrtRunWithBinding,()=>r._OrtRunWithBinding,g=>r._OrtRunWithBinding=g)),r._OrtBindInput=s(r._OrtBindInput,()=>r._OrtBindInput,g=>r._OrtBindInput=g),a=void 0};r.jsepInit=(s,m)=>{if(a?.(),s==="webgpu"){[r.kb,r.pb,r.tb,r.lb,r.sb,r.Ra,r.ub,r.wb,r.qb,r.rb,r.vb]=m;let g=r.kb;r.jsepRegisterBuffer=($,T,B,H)=>g.registerBuffer($,T,B,H),r.jsepGetBuffer=$=>g.getBuffer($),r.jsepCreateDownloader=($,T,B)=>g.createDownloader($,T,B),r.jsepOnReleaseSession=$=>{g.onReleaseSession($)},r.jsepOnRunStart=$=>g.onRunStart($)}};var c=Object.assign({},r),p="./this.program",h=(s,m)=>{throw m},d=typeof window=="object",y=typeof importScripts=="function",w=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_="",v,S,A;if(w){var I=(uo(),wr(so)),x=(co(),wr(lo));_=y?x.dirname(_)+"/":__dirname+"/",v=(s,m)=>(s=Ke(s)?new URL(s):x.normalize(s),I.readFileSync(s,m?void 0:"utf8")),A=s=>(s=v(s,!0),s.buffer||(s=new Uint8Array(s)),s),S=(s,m,g,$=!0)=>{s=Ke(s)?new URL(s):x.normalize(s),I.readFile(s,$?void 0:"utf8",(T,B)=>{T?g(T):m($?B.buffer:B)})},!r.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),h=(s,m)=>{throw process.exitCode=s,m}}else(d||y)&&(y?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),e&&(_=e),_.startsWith("blob:")?_="":_=_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1),v=s=>{var m=new XMLHttpRequest;return m.open("GET",s,!1),m.send(null),m.responseText},y&&(A=s=>{var m=new XMLHttpRequest;return m.open("GET",s,!1),m.responseType="arraybuffer",m.send(null),new Uint8Array(m.response)}),S=(s,m,g)=>{var $=new XMLHttpRequest;$.open("GET",s,!0),$.responseType="arraybuffer",$.onload=()=>{$.status==200||$.status==0&&$.response?m($.response):g()},$.onerror=g,$.send(null)});var E=console.log.bind(console),P=console.error.bind(console);Object.assign(r,c),c=null;var O,R=!1,L,N,K,Q,he,W,se,Ce,We,ee,ae;function Ae(){var s=O.buffer;r.HEAP8=N=new Int8Array(s),r.HEAP16=Q=new Int16Array(s),r.HEAPU8=K=new Uint8Array(s),r.HEAPU16=he=new Uint16Array(s),r.HEAP32=W=new Int32Array(s),r.HEAPU32=se=new Uint32Array(s),r.HEAPF32=Ce=new Float32Array(s),r.HEAPF64=ae=new Float64Array(s),r.HEAP64=We=new BigInt64Array(s),r.HEAPU64=ee=new BigUint64Array(s)}var me=[],ie=[],ue=[],le=0,qe=null,G=null;function ne(s){throw s="Aborted("+s+")",P(s),R=!0,L=1,s=new WebAssembly.RuntimeError(s+". Build with -sASSERTIONS for more info."),i(s),s}var xe=s=>s.startsWith("data:application/octet-stream;base64,"),Ke=s=>s.startsWith("file://"),Be;if(Be="ort-wasm-simd.wasm",!xe(Be)){var Ge=Be;Be=r.locateFile?r.locateFile(Ge,_):_+Ge}function Ut(s){if(A)return A(s);throw"both async and sync fetching of the wasm failed"}function Ne(s){if(d||y){if(typeof fetch=="function"&&!Ke(s))return fetch(s,{credentials:"same-origin"}).then(m=>{if(!m.ok)throw`failed to load wasm binary file at \'${s}\'`;return m.arrayBuffer()}).catch(()=>Ut(s));if(S)return new Promise((m,g)=>{S(s,$=>m(new Uint8Array($)),g)})}return Promise.resolve().then(()=>Ut(s))}function Ye(s,m,g){return Ne(s).then($=>WebAssembly.instantiate($,m)).then(g,$=>{P(`failed to asynchronously prepare wasm: ${$}`),ne($)})}function mt(s,m){var g=Be;return typeof WebAssembly.instantiateStreaming!="function"||xe(g)||Ke(g)||w||typeof fetch!="function"?Ye(g,s,m):fetch(g,{credentials:"same-origin"}).then($=>WebAssembly.instantiateStreaming($,s).then(m,function(T){return P(`wasm streaming compile failed: ${T}`),P("falling back to ArrayBuffer instantiation"),Ye(g,s,m)}))}var Rt={824920:(s,m,g,$)=>{if(typeof r>"u"||!r.eb)return 1;if(s=je(s>>>0),s.startsWith("./")&&(s=s.substring(2)),s=r.eb.get(s),!s)return 2;if(m>>>=0,g>>>=0,m+g>s.byteLength)return 3;try{return K.set(s.subarray(m,m+g),$>>>0>>>0),0}catch{return 4}},825421:()=>{r.qb()},825452:()=>{r.rb()},825481:()=>{r.vb()},825506:s=>r.pb(s),825539:s=>r.tb(s),825571:(s,m,g)=>{r.lb(s,m,g,!0)},825610:(s,m,g)=>{r.lb(s,m,g)},825643:s=>{r.Ra("Abs",s,void 0)},825694:s=>{r.Ra("Neg",s,void 0)},825745:s=>{r.Ra("Floor",s,void 0)},825798:s=>{r.Ra("Ceil",s,void 0)},825850:s=>{r.Ra("Reciprocal",s,void 0)},825908:s=>{r.Ra("Sqrt",s,void 0)},825960:s=>{r.Ra("Exp",s,void 0)},826011:s=>{r.Ra("Erf",s,void 0)},826062:s=>{r.Ra("Sigmoid",s,void 0)},826117:(s,m,g)=>{r.Ra("HardSigmoid",s,{alpha:m,beta:g})},826196:s=>{r.Ra("Log",s,void 0)},826247:s=>{r.Ra("Sin",s,void 0)},826298:s=>{r.Ra("Cos",s,void 0)},826349:s=>{r.Ra("Tan",s,void 0)},826400:s=>{r.Ra("Asin",s,void 0)},826452:s=>{r.Ra("Acos",s,void 0)},826504:s=>{r.Ra("Atan",s,void 0)},826556:s=>{r.Ra("Sinh",s,void 0)},826608:s=>{r.Ra("Cosh",s,void 0)},826660:s=>{r.Ra("Asinh",s,void 0)},826713:s=>{r.Ra("Acosh",s,void 0)},826766:s=>{r.Ra("Atanh",s,void 0)},826819:s=>{r.Ra("Tanh",s,void 0)},826871:s=>{r.Ra("Not",s,void 0)},826922:(s,m,g)=>{r.Ra("Clip",s,{min:m,max:g})},826991:s=>{r.Ra("Clip",s,void 0)},827043:(s,m)=>{r.Ra("Elu",s,{alpha:m})},827101:s=>{r.Ra("Relu",s,void 0)},827153:(s,m)=>{r.Ra("LeakyRelu",s,{alpha:m})},827217:(s,m)=>{r.Ra("ThresholdedRelu",s,{alpha:m})},827287:(s,m)=>{r.Ra("Cast",s,{to:m})},827345:s=>{r.Ra("Add",s,void 0)},827396:s=>{r.Ra("Sub",s,void 0)},827447:s=>{r.Ra("Mul",s,void 0)},827498:s=>{r.Ra("Div",s,void 0)},827549:s=>{r.Ra("Pow",s,void 0)},827600:s=>{r.Ra("Equal",s,void 0)},827653:s=>{r.Ra("Greater",s,void 0)},827708:s=>{r.Ra("GreaterOrEqual",s,void 0)},827770:s=>{r.Ra("Less",s,void 0)},827822:s=>{r.Ra("LessOrEqual",s,void 0)},827881:(s,m,g,$,T)=>{r.Ra("ReduceMean",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828040:(s,m,g,$,T)=>{r.Ra("ReduceMax",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828198:(s,m,g,$,T)=>{r.Ra("ReduceMin",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828356:(s,m,g,$,T)=>{r.Ra("ReduceProd",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828515:(s,m,g,$,T)=>{r.Ra("ReduceSum",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828673:(s,m,g,$,T)=>{r.Ra("ReduceL1",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828830:(s,m,g,$,T)=>{r.Ra("ReduceL2",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828987:(s,m,g,$,T)=>{r.Ra("ReduceLogSum",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829148:(s,m,g,$,T)=>{r.Ra("ReduceSumSquare",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829312:(s,m,g,$,T)=>{r.Ra("ReduceLogSumExp",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829476:s=>{r.Ra("Where",s,void 0)},829529:(s,m,g)=>{r.Ra("Transpose",s,{perm:m?Array.from(W.subarray(m>>>0,g>>>0)):[]})},829637:(s,m,g,$)=>{r.Ra("DepthToSpace",s,{blocksize:m,mode:je(g),format:$?"NHWC":"NCHW"})},829770:(s,m,g,$)=>{r.Ra("DepthToSpace",s,{blocksize:m,mode:je(g),format:$?"NHWC":"NCHW"})},829903:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be)=>{r.Ra("ConvTranspose",s,{format:te?"NHWC":"NCHW",autoPad:m,dilations:[g],group:$,kernelShape:[T],pads:[B,H],strides:[q],wIsConst:()=>!!N[X>>>0],outputPadding:de?Array.from(W.subarray(de>>>0,Ee>>>0)):[],outputShape:Oe?Array.from(W.subarray(Oe>>>0,D>>>0)):[],activation:je(be)})},830304:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D)=>{r.Ra("ConvTranspose",s,{format:q?"NHWC":"NCHW",autoPad:m,dilations:Array.from(W.subarray(g>>>0,(g>>>0)+2>>>0)),group:$,kernelShape:Array.from(W.subarray(T>>>0,(T>>>0)+2>>>0)),pads:Array.from(W.subarray(B>>>0,(B>>>0)+4>>>0)),strides:Array.from(W.subarray(H>>>0,(H>>>0)+2>>>0)),wIsConst:()=>!!N[te>>>0],outputPadding:X?Array.from(W.subarray(X>>>0,de>>>0)):[],outputShape:Ee?Array.from(W.subarray(Ee>>>0,Oe>>>0)):[],activation:je(D)})},830869:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be)=>{r.Ra("ConvTranspose",s,{format:te?"NHWC":"NCHW",autoPad:m,dilations:[g],group:$,kernelShape:[T],pads:[B,H],strides:[q],wIsConst:()=>!!N[X>>>0],outputPadding:de?Array.from(W.subarray(de>>>0,Ee>>>0)):[],outputShape:Oe?Array.from(W.subarray(Oe>>>0,D>>>0)):[],activation:je(be)})},831270:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D)=>{r.Ra("ConvTranspose",s,{format:q?"NHWC":"NCHW",autoPad:m,dilations:Array.from(W.subarray(g>>>0,(g>>>0)+2>>>0)),group:$,kernelShape:Array.from(W.subarray(T>>>0,(T>>>0)+2>>>0)),pads:Array.from(W.subarray(B>>>0,(B>>>0)+4>>>0)),strides:Array.from(W.subarray(H>>>0,(H>>>0)+2>>>0)),wIsConst:()=>!!N[te>>>0],outputPadding:X?Array.from(W.subarray(X>>>0,de>>>0)):[],outputShape:Ee?Array.from(W.subarray(Ee>>>0,Oe>>>0)):[],activation:je(D)})},831835:(s,m)=>{r.Ra("GlobalAveragePool",s,{format:m?"NHWC":"NCHW"})},831926:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("AveragePool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832210:(s,m)=>{r.Ra("GlobalAveragePool",s,{format:m?"NHWC":"NCHW"})},832301:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("AveragePool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832585:(s,m)=>{r.Ra("GlobalMaxPool",s,{format:m?"NHWC":"NCHW"})},832672:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("MaxPool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832952:(s,m)=>{r.Ra("GlobalMaxPool",s,{format:m?"NHWC":"NCHW"})},833039:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("MaxPool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},833319:(s,m,g,$,T)=>{r.Ra("Gemm",s,{alpha:m,beta:g,transA:$,transB:T})},833423:s=>{r.Ra("MatMul",s,void 0)},833477:(s,m,g,$)=>{r.Ra("ArgMax",s,{keepDims:!!m,selectLastIndex:!!g,axis:$})},833585:(s,m,g,$)=>{r.Ra("ArgMin",s,{keepDims:!!m,selectLastIndex:!!g,axis:$})},833693:(s,m)=>{r.Ra("Softmax",s,{axis:m})},833756:(s,m)=>{r.Ra("Concat",s,{axis:m})},833816:(s,m,g,$,T)=>{r.Ra("Split",s,{axis:m,numOutputs:g,splitSizes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},833956:s=>{r.Ra("Expand",s,void 0)},834010:(s,m)=>{r.Ra("Gather",s,{axis:Number(m)})},834081:(s,m)=>{r.Ra("GatherElements",s,{axis:Number(m)})},834160:(s,m,g,$,T,B,H,q,te,X,de)=>{r.Ra("Resize",s,{antialias:m,axes:g?Array.from(W.subarray(g>>>0,$>>>0)):[],coordinateTransformMode:je(T),cubicCoeffA:B,excludeOutside:H,extrapolationValue:q,keepAspectRatioPolicy:je(te),mode:je(X),nearestMode:je(de)})},834506:(s,m,g,$,T,B,H)=>{r.Ra("Slice",s,{starts:m?Array.from(W.subarray(m>>>0,g>>>0)):[],ends:$?Array.from(W.subarray($>>>0,T>>>0)):[],axes:B?Array.from(W.subarray(B>>>0,H>>>0)):[]})},834722:s=>{r.Ra("Tile",s,void 0)},834774:(s,m,g,$)=>{r.Ra("LayerNormalization",s,{axis:m,epsilon:g,simplified:!!$})},834885:(s,m,g)=>{r.Ra("InstanceNormalization",s,{epsilon:m,format:g?"NHWC":"NCHW"})},834999:(s,m,g)=>{r.Ra("InstanceNormalization",s,{epsilon:m,format:g?"NHWC":"NCHW"})},835113:s=>{r.Ra("Range",s,void 0)},835166:(s,m)=>{r.Ra("Einsum",s,{equation:je(m)})},835247:(s,m,g,$,T)=>{r.Ra("Pad",s,{mode:m,value:g,pads:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},835374:(s,m,g,$,T,B)=>{r.Ra("BatchNormalization",s,{epsilon:m,momentum:g,spatial:!!T,trainingMode:!!$,format:B?"NHWC":"NCHW"})},835543:(s,m,g,$,T,B)=>{r.Ra("BatchNormalization",s,{epsilon:m,momentum:g,spatial:!!T,trainingMode:!!$,format:B?"NHWC":"NCHW"})},835712:(s,m,g)=>{r.Ra("CumSum",s,{exclusive:Number(m),reverse:Number(g)})},835809:(s,m,g,$,T,B,H,q,te)=>{r.Ra("Attention",s,{numHeads:m,isUnidirectional:g,maskFilterValue:$,scale:T,doRotary:B,qkvHiddenSizes:H?Array.from(W.subarray(Number(q)>>>0,Number(q)+H>>>0)):[],pastPresentShareBuffer:!!te})},836081:s=>{r.Ra("BiasAdd",s,void 0)},836136:s=>{r.Ra("BiasSplitGelu",s,void 0)},836197:s=>{r.Ra("FastGelu",s,void 0)},836253:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe)=>{r.Ra("Conv",s,{format:te?"NHWC":"NCHW",auto_pad:m,dilations:[g],group:$,kernel_shape:[T],pads:B?Array.from(W.subarray(B>>>0,H>>>0)):[],strides:[q],w_is_const:()=>!!N[X>>>0],activation:je(de),activation_params:Ee?Array.from(Ce.subarray(Ee>>>0,Oe>>>0)):[]})},836623:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("Conv",s,{format:Ee?"NHWC":"NCHW",auto_pad:m,dilations:[g,$],group:T,kernel_shape:[B,H],pads:q?Array.from(W.subarray(q>>>0,te>>>0)):[],strides:[X,de],w_is_const:()=>!!N[Oe>>>0],activation:je(D),activation_params:be?Array.from(Ce.subarray(be>>>0,Ie>>>0)):[]})},837014:s=>{r.Ra("Gelu",s,void 0)},837066:(s,m,g,$,T,B)=>{r.Ra("MatMulNBits",s,{k:m,n:g,accuracyLevel:$,bits:T,blockSize:B})},837193:(s,m,g,$,T,B)=>{r.Ra("MultiHeadAttention",s,{numHeads:m,isUnidirectional:g,maskFilterValue:$,scale:T,doRotary:B})},837352:(s,m,g,$,T)=>{r.Ra("RotaryEmbedding",s,{interleaved:!!m,numHeads:g,rotaryEmbeddingDim:$,scale:T})},837491:(s,m,g)=>{r.Ra("SkipLayerNormalization",s,{epsilon:m,simplified:!!g})},837593:(s,m,g)=>{r.Ra("SkipLayerNormalization",s,{epsilon:m,simplified:!!g})},837695:(s,m,g,$)=>{r.Ra("LayerNormalization",s,{axis:m,epsilon:g,simplified:!!$})},837806:s=>{r.ub(s)},837840:(s,m)=>r.wb(s,m,r.cb.xb,r.cb.errors)};function qt(s){this.name="ExitStatus",this.message=`Program terminated with exit(${s})`,this.status=s}class Vt{constructor(m){this.hb=m-24}}var sr=0,jt=0,xr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Kt=(s,m,g)=>{m>>>=0;var $=m+g;for(g=m;s[g]&&!(g>=$);)++g;if(16<g-m&&s.buffer&&xr)return xr.decode(s.subarray(m,g));for($="";m<g;){var T=s[m++];if(T&128){var B=s[m++]&63;if((T&224)==192)$+=String.fromCharCode((T&31)<<6|B);else{var H=s[m++]&63;T=(T&240)==224?(T&15)<<12|B<<6|H:(T&7)<<18|B<<12|H<<6|s[m++]&63,65536>T?$+=String.fromCharCode(T):(T-=65536,$+=String.fromCharCode(55296|T>>10,56320|T&1023))}}else $+=String.fromCharCode(T)}return $},je=(s,m)=>(s>>>=0)?Kt(K,s,m):"",Wt=s=>{for(var m=0,g=0;g<s.length;++g){var $=s.charCodeAt(g);127>=$?m++:2047>=$?m+=2:55296<=$&&57343>=$?(m+=4,++g):m+=3}return m},at=(s,m,g,$)=>{if(g>>>=0,!(0<$))return 0;var T=g;$=g+$-1;for(var B=0;B<s.length;++B){var H=s.charCodeAt(B);if(55296<=H&&57343>=H){var q=s.charCodeAt(++B);H=65536+((H&1023)<<10)|q&1023}if(127>=H){if(g>=$)break;m[g++>>>0]=H}else{if(2047>=H){if(g+1>=$)break;m[g++>>>0]=192|H>>6}else{if(65535>=H){if(g+2>=$)break;m[g++>>>0]=224|H>>12}else{if(g+3>=$)break;m[g++>>>0]=240|H>>18,m[g++>>>0]=128|H>>12&63}m[g++>>>0]=128|H>>6&63}m[g++>>>0]=128|H&63}}return m[g>>>0]=0,g-T},Cr,ft=s=>{for(var m="";K[s>>>0];)m+=Cr[K[s++>>>0]];return m},ur={},Ar={},Ir={},st;function Tr(s,m,g={}){var $=m.name;if(!s)throw new st(`type "${$}" must have a positive integer typeid pointer`);if(Ar.hasOwnProperty(s)){if(g.nb)return;throw new st(`Cannot register type \'${$}\' twice`)}Ar[s]=m,delete Ir[s],ur.hasOwnProperty(s)&&(m=ur[s],delete ur[s],m.forEach(T=>T()))}function ht(s,m,g={}){if(!("argPackAdvance"in m))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Tr(s,m,g)}var bt=(s,m,g)=>{switch(m){case 1:return g?$=>N[$>>>0]:$=>K[$>>>0];case 2:return g?$=>Q[$>>>1>>>0]:$=>he[$>>>1>>>0];case 4:return g?$=>W[$>>>2>>>0]:$=>se[$>>>2>>>0];case 8:return g?$=>We[$>>>3]:$=>ee[$>>>3];default:throw new TypeError(`invalid integer width (${m}): ${s}`)}},Er=[],Te=[];function dr(s){s>>>=0,9<s&&--Te[s+1]===0&&(Te[s]=void 0,Er.push(s))}var Xe=s=>{if(!s)throw new st("Cannot use deleted val. handle = "+s);return Te[s]},ut=s=>{switch(s){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let m=Er.pop()||Te.length;return Te[m]=s,Te[m+1]=1,m}};function lr(s){return this.fromWireType(se[s>>>2>>>0])}var Fn={name:"emscripten::val",fromWireType:s=>{var m=Xe(s);return dr(s),m},toWireType:(s,m)=>ut(m),argPackAdvance:8,readValueFromPointer:lr,bb:null},ge=(s,m)=>{switch(m){case 4:return function(g){return this.fromWireType(Ce[g>>>2>>>0])};case 8:return function(g){return this.fromWireType(ae[g>>>3>>>0])};default:throw new TypeError(`invalid float width (${m}): ${s}`)}},Yt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,jr=(s,m)=>{for(var g=s>>1,$=g+m/2;!(g>=$)&&he[g>>>0];)++g;if(g<<=1,32<g-s&&Yt)return Yt.decode(K.subarray(s>>>0,g>>>0));for(g="",$=0;!($>=m/2);++$){var T=Q[s+2*$>>>1>>>0];if(T==0)break;g+=String.fromCharCode(T)}return g},qn=(s,m,g)=>{if(g??=2147483647,2>g)return 0;g-=2;var $=m;g=g<2*s.length?g/2:s.length;for(var T=0;T<g;++T)Q[m>>>1>>>0]=s.charCodeAt(T),m+=2;return Q[m>>>1>>>0]=0,m-$},Kr=s=>2*s.length,jn=(s,m)=>{for(var g=0,$="";!(g>=m/4);){var T=W[s+4*g>>>2>>>0];if(T==0)break;++g,65536<=T?(T-=65536,$+=String.fromCharCode(55296|T>>10,56320|T&1023)):$+=String.fromCharCode(T)}return $},Yr=(s,m,g)=>{if(m>>>=0,g??=2147483647,4>g)return 0;var $=m;g=$+g-4;for(var T=0;T<s.length;++T){var B=s.charCodeAt(T);if(55296<=B&&57343>=B){var H=s.charCodeAt(++T);B=65536+((B&1023)<<10)|H&1023}if(W[m>>>2>>>0]=B,m+=4,m+4>g)break}return W[m>>>2>>>0]=0,m-$},Zr=s=>{for(var m=0,g=0;g<s.length;++g){var $=s.charCodeAt(g);55296<=$&&57343>=$&&++g,m+=4}return m},cr=(s,m)=>{var g=Ar[s];if(g===void 0)throw s=Mr(s),g=ft(s),rt(s),new st(`${m} has unknown type ${g}`);return g},Pr=(s,m,g)=>{var $=[];return s=s.toWireType($,g),$.length&&(se[m>>>2>>>0]=ut($)),s},He=s=>{try{s()}catch(m){ne(m)}},Xr=s=>{if(!R)try{s();try{L=L=s=L,r.onExit?.(s),R=!0,h(s,new qt(s))}catch(m){m instanceof qt||m=="unwind"||h(1,m)}}catch(m){m instanceof qt||m=="unwind"||h(1,m)}};function Qr(){var s=pe,m={};for(let[g,$]of Object.entries(s))m[g]=typeof $=="function"?(...T)=>{Zt.push(g);try{return $(...T)}finally{R||(Zt.pop(),dt&&gt===1&&Zt.length===0&&(gt=0,He(dn),typeof Fibers<"u"&&Fibers.Db()))}}:$;return m}var gt=0,dt=null,Bt=0,Zt=[],kr={},Or={},Jr=0,pr=null,en=[];function tn(){return new Promise((s,m)=>{pr={resolve:s,reject:m}})}function rn(){var s=Nt(65548),m=s+12;se[s>>>2>>>0]=m,se[s+4>>>2>>>0]=m+65536,m=Zt[0];var g=kr[m];return g===void 0&&(g=Jr++,kr[m]=g,Or[g]=m),W[s+8>>>2>>>0]=g,s}function nn(s){if(!R){if(gt===0){var m=!1,g=!1;s(($=0)=>{if(!R&&(Bt=$,m=!0,g)){gt=2,He(()=>vt(dt)),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.resume(),$=!1;try{var T=(0,pe[Or[W[dt+8>>>2>>>0]]])()}catch(q){T=q,$=!0}var B=!1;if(!dt){var H=pr;H&&(pr=null,($?H.reject:H.resolve)(T),B=!0)}if($&&!B)throw T}}),g=!0,m||(gt=1,dt=rn(),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.pause(),He(()=>Jt(dt)))}else gt===2?(gt=0,He(ct),rt(dt),dt=null,en.forEach(Xr)):ne(`invalid state: ${gt}`);return Bt}}function Rr(s){return nn(m=>{s().then(m)})}var Xt=[],on={},nt=s=>{var m=on[s];return m===void 0?ft(s):m},mr=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Br=s=>{var m=Xt.length;return Xt.push(s),m},Kn=(s,m)=>{for(var g=Array(s),$=0;$<s;++$)g[$]=cr(se[m+4*$>>>2>>>0],"parameter "+$);return g},wt=(s,m)=>Object.defineProperty(m,"name",{value:s});function Yn(s){var m=Function;if(!(m instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof m} which is not a function`);var g=wt(m.name||"unknownFunctionName",function(){});return g.prototype=m.prototype,g=new g,s=m.apply(g,s),s instanceof Object?s:g}var Je=s=>s%4===0&&(s%100!==0||s%400===0),Dr=[0,31,60,91,121,152,182,213,244,274,305,335],fr=[0,31,59,90,120,151,181,212,243,273,304,334],lt=[],hr=(s,m)=>{lt.length=0;for(var g;g=K[s++>>>0];){var $=g!=105;$&=g!=112,m+=$&&m%8?4:0,lt.push(g==112?se[m>>>2>>>0]:g==106?We[m>>>3]:g==105?W[m>>>2>>>0]:ae[m>>>3>>>0]),m+=$?8:4}return lt},Qe={},ot=()=>{if(!Qt){var s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},m;for(m in Qe)Qe[m]===void 0?delete s[m]:s[m]=Qe[m];var g=[];for(m in s)g.push(`${m}=${s[m]}`);Qt=g}return Qt},Qt,Zn=[null,[],[]],an=[31,29,31,30,31,30,31,31,30,31,30,31],zr=[31,28,31,30,31,30,31,31,30,31,30,31];function Xn(s){var m=Array(Wt(s)+1);return at(s,m,0,m.length),m}function sn(s,m,g,$){function T(D,be,Ie){for(D=typeof D=="number"?D.toString():D||"";D.length<be;)D=Ie[0]+D;return D}function B(D,be){return T(D,be,"0")}function H(D,be){function Ie(Mt){return 0>Mt?-1:0<Mt?1:0}var zt;return(zt=Ie(D.getFullYear()-be.getFullYear()))===0&&(zt=Ie(D.getMonth()-be.getMonth()))===0&&(zt=Ie(D.getDate()-be.getDate())),zt}function q(D){switch(D.getDay()){case 0:return new Date(D.getFullYear()-1,11,29);case 1:return D;case 2:return new Date(D.getFullYear(),0,3);case 3:return new Date(D.getFullYear(),0,2);case 4:return new Date(D.getFullYear(),0,1);case 5:return new Date(D.getFullYear()-1,11,31);case 6:return new Date(D.getFullYear()-1,11,30)}}function te(D){var be=D.$a;for(D=new Date(new Date(D.ab+1900,0,1).getTime());0<be;){var Ie=D.getMonth(),zt=(Je(D.getFullYear())?an:zr)[Ie];if(be>zt-D.getDate())be-=zt-D.getDate()+1,D.setDate(1),11>Ie?D.setMonth(Ie+1):(D.setMonth(0),D.setFullYear(D.getFullYear()+1));else{D.setDate(D.getDate()+be);break}}return Ie=new Date(D.getFullYear()+1,0,4),be=q(new Date(D.getFullYear(),0,4)),Ie=q(Ie),0>=H(be,D)?0>=H(Ie,D)?D.getFullYear()+1:D.getFullYear():D.getFullYear()-1}s>>>=0,m>>>=0,g>>>=0,$>>>=0;var X=se[$+40>>>2>>>0];$={Ab:W[$>>>2>>>0],zb:W[$+4>>>2>>>0],fb:W[$+8>>>2>>>0],jb:W[$+12>>>2>>>0],gb:W[$+16>>>2>>>0],ab:W[$+20>>>2>>>0],Va:W[$+24>>>2>>>0],$a:W[$+28>>>2>>>0],Cb:W[$+32>>>2>>>0],yb:W[$+36>>>2>>>0],Bb:X?je(X):""},g=je(g),X={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var de in X)g=g.replace(new RegExp(de,"g"),X[de]);var Ee="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Oe="January February March April May June July August September October November December".split(" ");X={"%a":D=>Ee[D.Va].substring(0,3),"%A":D=>Ee[D.Va],"%b":D=>Oe[D.gb].substring(0,3),"%B":D=>Oe[D.gb],"%C":D=>B((D.ab+1900)/100|0,2),"%d":D=>B(D.jb,2),"%e":D=>T(D.jb,2," "),"%g":D=>te(D).toString().substring(2),"%G":te,"%H":D=>B(D.fb,2),"%I":D=>(D=D.fb,D==0?D=12:12<D&&(D-=12),B(D,2)),"%j":D=>{for(var be=0,Ie=0;Ie<=D.gb-1;be+=(Je(D.ab+1900)?an:zr)[Ie++]);return B(D.jb+be,3)},"%m":D=>B(D.gb+1,2),"%M":D=>B(D.zb,2),"%n":()=>`\n`,"%p":D=>0<=D.fb&&12>D.fb?"AM":"PM","%S":D=>B(D.Ab,2),"%t":()=>"	","%u":D=>D.Va||7,"%U":D=>B(Math.floor((D.$a+7-D.Va)/7),2),"%V":D=>{var be=Math.floor((D.$a+7-(D.Va+6)%7)/7);if(2>=(D.Va+371-D.$a-2)%7&&be++,be)be==53&&(Ie=(D.Va+371-D.$a)%7,Ie==4||Ie==3&&Je(D.ab)||(be=1));else{be=52;var Ie=(D.Va+7-D.$a-1)%7;(Ie==4||Ie==5&&Je(D.ab%400-1))&&be++}return B(be,2)},"%w":D=>D.Va,"%W":D=>B(Math.floor((D.$a+7-(D.Va+6)%7)/7),2),"%y":D=>(D.ab+1900).toString().substring(2),"%Y":D=>D.ab+1900,"%z":D=>{D=D.yb;var be=0<=D;return D=Math.abs(D)/60,(be?"+":"-")+("0000"+(D/60*100+D%60)).slice(-4)},"%Z":D=>D.Bb,"%%":()=>"%"},g=g.replace(/%%/g,"\\0\\0");for(de in X)g.includes(de)&&(g=g.replace(new RegExp(de,"g"),X[de]($)));return g=g.replace(/\\0\\0/g,"%"),de=Xn(g),de.length>m?0:(N.set(de,s>>>0),de.length-1)}for(var un=Array(256),gr=0;256>gr;++gr)un[gr]=String.fromCharCode(gr);Cr=un,st=r.BindingError=class extends Error{constructor(s){super(s),this.name="BindingError"}},r.InternalError=class extends Error{constructor(s){super(s),this.name="InternalError"}},Te.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=()=>Te.length/2-5-Er.length;var Qn={ia:function(s,m,g){return Rr(async()=>{await r.sb(s,m,g)})},a:function(s,m,g){s>>>=0;var $=new Vt(s);throw se[$.hb+16>>>2>>>0]=0,se[$.hb+4>>>2>>>0]=m>>>0,se[$.hb+8>>>2>>>0]=g>>>0,sr=s,jt++,sr},y:function(){return 0},ea:function(){},R:function(){},T:function(){},ga:function(){return 0},ca:function(){},Z:function(){},ba:function(){},G:function(){},S:function(){},P:function(){},da:function(){},Q:function(){},C:function(s,m,g){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:$=>$,toWireType:function($,T){if(typeof T!="bigint"&&typeof T!="number")throw T===null?T="null":($=typeof T,T=$==="object"||$==="array"||$==="function"?T.toString():""+T),new TypeError(`Cannot convert "${T}" to ${this.name}`);return typeof T=="number"&&(T=BigInt(T)),T},argPackAdvance:8,readValueFromPointer:bt(m,g>>>0,m.indexOf("u")==-1),bb:null})},K:function(s,m,g,$){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:function(T){return!!T},toWireType:function(T,B){return B?g:$},argPackAdvance:8,readValueFromPointer:function(T){return this.fromWireType(K[T>>>0])},bb:null})},J:function(s){return ht(s>>>0,Fn)},B:function(s,m,g){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:$=>$,toWireType:($,T)=>T,argPackAdvance:8,readValueFromPointer:ge(m,g>>>0),bb:null})},s:function(s,m,g,$,T){if(s>>>=0,g>>>=0,m=ft(m>>>0),T===-1&&(T=4294967295),T=q=>q,$===0){var B=32-8*g;T=q=>q<<B>>>B}var H=m.includes("unsigned")?function(q,te){return te>>>0}:function(q,te){return te};ht(s,{name:m,fromWireType:T,toWireType:H,argPackAdvance:8,readValueFromPointer:bt(m,g,$!==0),bb:null})},o:function(s,m,g){function $(B){return new T(N.buffer,se[B+4>>>2>>>0],se[B>>>2>>>0])}var T=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][m];g=ft(g>>>0),ht(s>>>0,{name:g,fromWireType:$,argPackAdvance:8,readValueFromPointer:$},{nb:!0})},D:function(s,m){m=ft(m>>>0);var g=m==="std::string";ht(s>>>0,{name:m,fromWireType:function($){var T=se[$>>>2>>>0],B=$+4;if(g)for(var H=B,q=0;q<=T;++q){var te=B+q;if(q==T||K[te>>>0]==0){if(H=je(H,te-H),X===void 0)var X=H;else X+=String.fromCharCode(0),X+=H;H=te+1}}else{for(X=Array(T),q=0;q<T;++q)X[q]=String.fromCharCode(K[B+q>>>0]);X=X.join("")}return rt($),X},toWireType:function($,T){T instanceof ArrayBuffer&&(T=new Uint8Array(T));var B=typeof T=="string";if(!(B||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int8Array))throw new st("Cannot pass non-string to std::string");var H=g&&B?Wt(T):T.length,q=Nt(4+H+1),te=q+4;if(se[q>>>2>>>0]=H,g&&B)at(T,K,te,H+1);else if(B)for(B=0;B<H;++B){var X=T.charCodeAt(B);if(255<X)throw rt(te),new st("String has UTF-16 code units that do not fit in 8 bits");K[te+B>>>0]=X}else for(B=0;B<H;++B)K[te+B>>>0]=T[B];return $!==null&&$.push(rt,q),q},argPackAdvance:8,readValueFromPointer:lr,bb($){rt($)}})},x:function(s,m,g){if(m>>>=0,g>>>=0,g=ft(g),m===2)var $=jr,T=qn,B=Kr,H=q=>he[q>>>1>>>0];else m===4&&($=jn,T=Yr,B=Zr,H=q=>se[q>>>2>>>0]);ht(s>>>0,{name:g,fromWireType:q=>{for(var te=se[q>>>2>>>0],X,de=q+4,Ee=0;Ee<=te;++Ee){var Oe=q+4+Ee*m;(Ee==te||H(Oe)==0)&&(de=$(de,Oe-de),X===void 0?X=de:(X+=String.fromCharCode(0),X+=de),de=Oe+m)}return rt(q),X},toWireType:(q,te)=>{if(typeof te!="string")throw new st(`Cannot pass non-string to C++ string type ${g}`);var X=B(te),de=Nt(4+X+m);return se[de>>>2>>>0]=X/m,T(te,de+4,X+m),q!==null&&q.push(rt,de),de},argPackAdvance:8,readValueFromPointer:lr,bb(q){rt(q)}})},L:function(s,m){m=ft(m>>>0),ht(s>>>0,{ob:!0,name:m,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ha:()=>1,u:function(s,m,g){return m>>>=0,g>>>=0,s=Xe(s>>>0),m=cr(m,"emval::as"),Pr(m,g,s)},w:function(s){return s>>>=0,Rr(()=>(s=Xe(s),s.then(ut)))},n:function(s,m,g,$){return g>>>=0,$>>>=0,s=Xt[s>>>0],m=Xe(m>>>0),s(null,m,g,$)},j:function(s,m,g,$,T){return g>>>=0,$>>>=0,T>>>=0,s=Xt[s>>>0],m=Xe(m>>>0),g=nt(g),s(m,m[g],$,T)},b:dr,A:function(s,m){return m>>>=0,s=Xe(s>>>0),m=Xe(m),s==m},m:function(s){return s>>>=0,s===0?ut(mr()):(s=nt(s),ut(mr()[s]))},i:function(s,m,g){m=Kn(s,m>>>0);var $=m.shift();s--;var T=`return function (obj, func, destructorsRef, args) {\n`,B=0,H=[];g===0&&H.push("obj");for(var q=["retType"],te=[$],X=0;X<s;++X)H.push("arg"+X),q.push("argType"+X),te.push(m[X]),T+=`  var arg${X} = argType${X}.readValueFromPointer(args${B?"+"+B:""});\n`,B+=m[X].argPackAdvance;return T+=`  var rv = ${g===1?"new func":"func.call"}(${H.join(", ")});\n`,$.ob||(q.push("emval_returnValue"),te.push(Pr),T+=`  return emval_returnValue(retType, destructorsRef, rv);\n`),q.push(T+`};\n`),s=Yn(q)(...te),g=`methodCaller<(${m.map(de=>de.name).join(", ")}) => ${$.name}>`,Br(wt(g,s))},r:function(s,m){return m>>>=0,s=Xe(s>>>0),m=Xe(m),ut(s[m])},e:function(s){s>>>=0,9<s&&(Te[s+1]+=1)},t:function(){return ut([])},l:function(s){s=Xe(s>>>0);for(var m=Array(s.length),g=0;g<s.length;g++)m[g]=s[g];return ut(m)},f:function(s){return ut(nt(s>>>0))},k:function(){return ut({})},h:function(s){s>>>=0;for(var m=Xe(s);m.length;){var g=m.pop();m.pop()(g)}dr(s)},g:function(s,m,g){m>>>=0,g>>>=0,s=Xe(s>>>0),m=Xe(m),g=Xe(g),s[m]=g},c:function(s,m){return m>>>=0,s=cr(s>>>0,"_emval_take_value"),s=s.readValueFromPointer(m),ut(s)},W:function(s,m){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s),m>>>=0,s=new Date(1e3*s),W[m>>>2>>>0]=s.getUTCSeconds(),W[m+4>>>2>>>0]=s.getUTCMinutes(),W[m+8>>>2>>>0]=s.getUTCHours(),W[m+12>>>2>>>0]=s.getUTCDate(),W[m+16>>>2>>>0]=s.getUTCMonth(),W[m+20>>>2>>>0]=s.getUTCFullYear()-1900,W[m+24>>>2>>>0]=s.getUTCDay(),W[m+28>>>2>>>0]=(s.getTime()-Date.UTC(s.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},X:function(s,m){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s),m>>>=0,s=new Date(1e3*s),W[m>>>2>>>0]=s.getSeconds(),W[m+4>>>2>>>0]=s.getMinutes(),W[m+8>>>2>>>0]=s.getHours(),W[m+12>>>2>>>0]=s.getDate(),W[m+16>>>2>>>0]=s.getMonth(),W[m+20>>>2>>>0]=s.getFullYear()-1900,W[m+24>>>2>>>0]=s.getDay(),W[m+28>>>2>>>0]=(Je(s.getFullYear())?Dr:fr)[s.getMonth()]+s.getDate()-1|0,W[m+36>>>2>>>0]=-(60*s.getTimezoneOffset());var g=new Date(s.getFullYear(),6,1).getTimezoneOffset(),$=new Date(s.getFullYear(),0,1).getTimezoneOffset();W[m+32>>>2>>>0]=(g!=$&&s.getTimezoneOffset()==Math.min($,g))|0},Y:function(s){s>>>=0;var m=new Date(W[s+20>>>2>>>0]+1900,W[s+16>>>2>>>0],W[s+12>>>2>>>0],W[s+8>>>2>>>0],W[s+4>>>2>>>0],W[s>>>2>>>0],0),g=W[s+32>>>2>>>0],$=m.getTimezoneOffset(),T=new Date(m.getFullYear(),6,1).getTimezoneOffset(),B=new Date(m.getFullYear(),0,1).getTimezoneOffset(),H=Math.min(B,T);return 0>g?W[s+32>>>2>>>0]=+(T!=B&&H==$):0<g!=(H==$)&&(T=Math.max(B,T),m.setTime(m.getTime()+6e4*((0<g?H:T)-$))),W[s+24>>>2>>>0]=m.getDay(),W[s+28>>>2>>>0]=(Je(m.getFullYear())?Dr:fr)[m.getMonth()]+m.getDate()-1|0,W[s>>>2>>>0]=m.getSeconds(),W[s+4>>>2>>>0]=m.getMinutes(),W[s+8>>>2>>>0]=m.getHours(),W[s+12>>>2>>>0]=m.getDate(),W[s+16>>>2>>>0]=m.getMonth(),W[s+20>>>2>>>0]=m.getYear(),s=m.getTime(),BigInt(isNaN(s)?-1:s/1e3)},U:function(){return-52},V:function(){},N:function(s,m,g,$){g>>>=0,$>>>=0;var T=new Date().getFullYear(),B=new Date(T,0,1),H=new Date(T,6,1);T=B.getTimezoneOffset();var q=H.getTimezoneOffset();se[s>>>0>>>2>>>0]=60*Math.max(T,q),W[m>>>0>>>2>>>0]=+(T!=q),s=te=>te.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],B=s(B),H=s(H),q<T?(at(B,K,g,17),at(H,K,$,17)):(at(B,K,$,17),at(H,K,g,17))},v:()=>{ne("")},d:function(s,m,g){return s>>>=0,m=hr(m>>>0,g>>>0),Rt[s](...m)},I:function(s,m,g){return s>>>=0,m=hr(m>>>0,g>>>0),Rt[s](...m)},H:()=>Date.now(),O:function(){return 4294901760},q:()=>performance.now(),M:function(s){s>>>=0;var m=K.length;if(4294901760<s)return!1;for(var g=1;4>=g;g*=2){var $=m*(1+.2/g);$=Math.min($,s+100663296);var T=Math;$=Math.max(s,$);e:{T=(T.min.call(T,4294901760,$+(65536-$%65536)%65536)-O.buffer.byteLength+65535)/65536;try{O.grow(T),Ae();var B=1;break e}catch{}B=void 0}if(B)return!0}return!1},$:function(s,m){s>>>=0,m>>>=0;var g=0;return ot().forEach(($,T)=>{var B=m+g;for(T=se[s+4*T>>>2>>>0]=B,B=0;B<$.length;++B)N[T++>>>0]=$.charCodeAt(B);N[T>>>0]=0,g+=$.length+1}),0},aa:function(s,m){s>>>=0,m>>>=0;var g=ot();se[s>>>2>>>0]=g.length;var $=0;return g.forEach(T=>$+=T.length+1),se[m>>>2>>>0]=$,0},z:()=>52,F:function(){return 52},_:function(){return 70},E:function(s,m,g,$){m>>>=0,g>>>=0,$>>>=0;for(var T=0,B=0;B<g;B++){var H=se[m>>>2>>>0],q=se[m+4>>>2>>>0];m+=8;for(var te=0;te<q;te++){var X=K[H+te>>>0],de=Zn[s];X===0||X===10?((s===1?E:P)(Kt(de,0)),de.length=0):de.push(X)}T+=q}return se[$>>>2>>>0]=T,0},fa:sn,p:function(s,m,g,$){return sn(s>>>0,m>>>0,g>>>0,$>>>0)}},pe=function(){function s(g){return pe=g.exports,pe=Qr(),pe=ln(),O=pe.ja,Ae(),ie.unshift(pe.ka),le--,le==0&&(qe!==null&&(clearInterval(qe),qe=null),G&&(g=G,G=null,g())),pe}var m={a:Qn};if(le++,r.instantiateWasm)try{return r.instantiateWasm(m,s)}catch(g){P(`Module.instantiateWasm callback failed with error: ${g}`),i(g)}return mt(m,function(g){s(g.instance)}).catch(i),{}}(),Mr=s=>(Mr=pe.la)(s);r._OrtInit=(s,m)=>(r._OrtInit=pe.ma)(s,m),r._OrtGetLastError=(s,m)=>(r._OrtGetLastError=pe.na)(s,m),r._OrtCreateSessionOptions=(s,m,g,$,T,B,H,q,te,X)=>(r._OrtCreateSessionOptions=pe.oa)(s,m,g,$,T,B,H,q,te,X),r._OrtAppendExecutionProvider=(s,m)=>(r._OrtAppendExecutionProvider=pe.pa)(s,m),r._OrtAddFreeDimensionOverride=(s,m,g)=>(r._OrtAddFreeDimensionOverride=pe.qa)(s,m,g),r._OrtAddSessionConfigEntry=(s,m,g)=>(r._OrtAddSessionConfigEntry=pe.ra)(s,m,g),r._OrtReleaseSessionOptions=s=>(r._OrtReleaseSessionOptions=pe.sa)(s),r._OrtCreateSession=(s,m,g)=>(r._OrtCreateSession=pe.ta)(s,m,g),r._OrtReleaseSession=s=>(r._OrtReleaseSession=pe.ua)(s),r._OrtGetInputOutputCount=(s,m,g)=>(r._OrtGetInputOutputCount=pe.va)(s,m,g),r._OrtGetInputName=(s,m)=>(r._OrtGetInputName=pe.wa)(s,m),r._OrtGetOutputName=(s,m)=>(r._OrtGetOutputName=pe.xa)(s,m),r._OrtFree=s=>(r._OrtFree=pe.ya)(s),r._OrtCreateTensor=(s,m,g,$,T,B)=>(r._OrtCreateTensor=pe.za)(s,m,g,$,T,B),r._OrtGetTensorData=(s,m,g,$,T)=>(r._OrtGetTensorData=pe.Aa)(s,m,g,$,T),r._OrtReleaseTensor=s=>(r._OrtReleaseTensor=pe.Ba)(s),r._OrtCreateRunOptions=(s,m,g,$)=>(r._OrtCreateRunOptions=pe.Ca)(s,m,g,$),r._OrtAddRunConfigEntry=(s,m,g)=>(r._OrtAddRunConfigEntry=pe.Da)(s,m,g),r._OrtReleaseRunOptions=s=>(r._OrtReleaseRunOptions=pe.Ea)(s),r._OrtCreateBinding=s=>(r._OrtCreateBinding=pe.Fa)(s),r._OrtBindInput=(s,m,g)=>(r._OrtBindInput=pe.Ga)(s,m,g),r._OrtBindOutput=(s,m,g,$)=>(r._OrtBindOutput=pe.Ha)(s,m,g,$),r._OrtClearBoundOutputs=s=>(r._OrtClearBoundOutputs=pe.Ia)(s),r._OrtReleaseBinding=s=>(r._OrtReleaseBinding=pe.Ja)(s),r._OrtRunWithBinding=(s,m,g,$,T)=>(r._OrtRunWithBinding=pe.Ka)(s,m,g,$,T),r._OrtRun=(s,m,g,$,T,B,H,q)=>(r._OrtRun=pe.La)(s,m,g,$,T,B,H,q),r._OrtEndProfiling=s=>(r._OrtEndProfiling=pe.Ma)(s),r._JsepOutput=(s,m,g)=>(r._JsepOutput=pe.Na)(s,m,g),r._JsepGetNodeName=s=>(r._JsepGetNodeName=pe.Oa)(s);var Nt=r._malloc=s=>(Nt=r._malloc=pe.Pa)(s),rt=r._free=s=>(rt=r._free=pe.Qa)(s),yr=s=>(yr=pe.Sa)(s),br=s=>(br=pe.Ta)(s),Ur=()=>(Ur=pe.Ua)(),Jt=s=>(Jt=pe.Wa)(s),dn=()=>(dn=pe.Xa)(),vt=s=>(vt=pe.Ya)(s),ct=()=>(ct=pe.Za)();r.___start_em_js=837952,r.___stop_em_js=838113;function ln(){var s=pe;s=Object.assign({},s);var m=g=>$=>g($)>>>0;return s.la=m(s.la),s.Pa=m(s.Pa),s.Ta=m(s.Ta),s.Ua=(g=>()=>g()>>>0)(s.Ua),s}r.stackSave=()=>Ur(),r.stackRestore=s=>yr(s),r.stackAlloc=s=>br(s),r.UTF8ToString=je,r.stringToUTF8=(s,m,g)=>at(s,K,m,g),r.lengthBytesUTF8=Wt;var Dt;G=function s(){Dt||Vr(),Dt||(G=s)};function Vr(){if(!(0<le)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;){var s=r.preRun.shift();me.unshift(s)}for(;0<me.length;)me.shift()(r);if(!(0<le||Dt||(Dt=!0,r.calledRun=!0,R))){for(;0<ie.length;)ie.shift()(r);for(o(r);0<ue.length;)ue.shift()(r)}}}return Vr(),u}})();typeof Ti=="object"&&typeof po=="object"?po.exports=Ii:typeof define=="function"&&define.amd&&define([],()=>Ii)});var Pi=Wr(()=>{});var ki=Wr(()=>{});var Oi={};gn(Oi,{cpus:()=>ll});var ll,Ri=Y(()=>{ll=void 0});var zi=Wr((Di,mo)=>{"use strict";var Bi=(()=>{var e=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(e||=__filename),function(t={}){function r(){return ae.buffer!=ue.buffer&&Ne(),ue}function o(){return ae.buffer!=ue.buffer&&Ne(),le}function i(){return ae.buffer!=ue.buffer&&Ne(),qe}function u(){return ae.buffer!=ue.buffer&&Ne(),G}function a(){return ae.buffer!=ue.buffer&&Ne(),ne}function c(){return ae.buffer!=ue.buffer&&Ne(),xe}function p(){return ae.buffer!=ue.buffer&&Ne(),Ke}function h(){return ae.buffer!=ue.buffer&&Ne(),Ut}var d=t,y,w,_=new Promise((n,l)=>{y=n,w=l});d.mountExternalData=(n,l)=>{(d.Db||(d.Db=new Map)).set(n,l)},d.unmountExternalData=()=>{delete d.Db};let v=()=>{let n=(f,b,C)=>(...k)=>{let V=ct,F=b?.();k=f(...k);let re=b?.();return F!==re&&(f=re,C(F),b=C=null),ct!=V?T():k},l=f=>async(...b)=>{try{if(d.Cb)throw Error("Session already started");let C=d.Cb={ec:b[0],errors:[]},k=await f(...b);if(d.Cb!==C)throw Error("Session mismatch");d.Kb?.flush();let V=C.errors;if(0<V.length){let F=await Promise.all(V);if(F=F.filter(re=>re),0<F.length)throw Error(F.join(`\n`))}return k}finally{d.Cb=null}};d._OrtCreateSession=n(d._OrtCreateSession,()=>d._OrtCreateSession,f=>d._OrtCreateSession=f),d._OrtRun=l(n(d._OrtRun,()=>d._OrtRun,f=>d._OrtRun=f)),d._OrtRunWithBinding=l(n(d._OrtRunWithBinding,()=>d._OrtRunWithBinding,f=>d._OrtRunWithBinding=f)),d._OrtBindInput=n(d._OrtBindInput,()=>d._OrtBindInput,f=>d._OrtBindInput=f),v=void 0};d.jsepInit=(n,l)=>{if(v?.(),n==="webgpu"){[d.Kb,d.Wb,d.$b,d.Lb,d.Zb,d.ob,d.ac,d.cc,d.Xb,d.Yb,d.bc]=l;let f=d.Kb;d.jsepRegisterBuffer=(b,C,k,V)=>f.registerBuffer(b,C,k,V),d.jsepGetBuffer=b=>f.getBuffer(b),d.jsepCreateDownloader=(b,C,k)=>f.createDownloader(b,C,k),d.jsepOnReleaseSession=b=>{f.onReleaseSession(b)},d.jsepOnRunStart=b=>f.onRunStart(b)}};var S=Object.assign({},d),A="./this.program",I=(n,l)=>{throw l},x=typeof window=="object",E=typeof importScripts=="function",P=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",O=d.ENVIRONMENT_IS_PTHREAD||!1,R="";function L(n){return d.locateFile?d.locateFile(n,R):R+n}var N,K,Q;if(P){var he=(uo(),wr(so)),W=(co(),wr(lo));R=E?W.dirname(R)+"/":__dirname+"/",N=(n,l)=>(n=Wt(n)?new URL(n):W.normalize(n),he.readFileSync(n,l?void 0:"utf8")),Q=n=>(n=N(n,!0),n.buffer||(n=new Uint8Array(n)),n),K=(n,l,f,b=!0)=>{n=Wt(n)?new URL(n):W.normalize(n),he.readFile(n,b?void 0:"utf8",(C,k)=>{C?f(C):l(b?k.buffer:k)})},!d.thisProgram&&1<process.argv.length&&(A=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),I=(n,l)=>{throw process.exitCode=n,l},global.Worker=Pi().Worker}else(x||E)&&(E?R=self.location.href:typeof document<"u"&&document.currentScript&&(R=document.currentScript.src),typeof e<"u"&&e&&(R=e),R.startsWith("blob:")?R="":R=R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1),P||(N=n=>{var l=new XMLHttpRequest;return l.open("GET",n,!1),l.send(null),l.responseText},E&&(Q=n=>{var l=new XMLHttpRequest;return l.open("GET",n,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),K=(n,l,f)=>{var b=new XMLHttpRequest;b.open("GET",n,!0),b.responseType="arraybuffer",b.onload=()=>{b.status==200||b.status==0&&b.response?l(b.response):f()},b.onerror=f,b.send(null)}));P&&typeof performance>"u"&&(global.performance=ki().performance);var se=console.log.bind(console),Ce=console.error.bind(console);P&&(se=(...n)=>he.writeSync(1,n.join(" ")+`\n`),Ce=(...n)=>he.writeSync(2,n.join(" ")+`\n`));var We=se,ee=Ce;Object.assign(d,S),S=null;var ae,Ae,me=!1,ie,ue,le,qe,G,ne,xe,Ke,Be,Ge,Ut;function Ne(){var n=ae.buffer;d.HEAP8=ue=new Int8Array(n),d.HEAP16=qe=new Int16Array(n),d.HEAPU8=le=new Uint8Array(n),d.HEAPU16=G=new Uint16Array(n),d.HEAP32=ne=new Int32Array(n),d.HEAPU32=xe=new Uint32Array(n),d.HEAPF32=Ke=new Float32Array(n),d.HEAPF64=Ut=new Float64Array(n),d.HEAP64=Be=new BigInt64Array(n),d.HEAPU64=Ge=new BigUint64Array(n)}var Ye=16777216;if(O)ae=d.wasmMemory;else if(d.wasmMemory)ae=d.wasmMemory;else if(ae=new WebAssembly.Memory({initial:Ye/65536,maximum:65536,shared:!0}),!(ae.buffer instanceof SharedArrayBuffer))throw ee("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),P&&ee("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Ne(),Ye=ae.buffer.byteLength;var mt=[],Rt=[],qt=[],Vt=0,sr=null,jt=null;function xr(){if(Vt--,Vt==0&&(sr!==null&&(clearInterval(sr),sr=null),jt)){var n=jt;jt=null,n()}}function Kt(n){throw n="Aborted("+n+")",ee(n),me=!0,ie=1,n=new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info."),w(n),n}var je=n=>n.startsWith("data:application/octet-stream;base64,"),Wt=n=>n.startsWith("file://"),at;at="ort-wasm-simd-threaded.wasm",je(at)||(at=L(at));function Cr(n){if(Q)return Q(n);throw"both async and sync fetching of the wasm failed"}function ft(n){if(x||E){if(typeof fetch=="function"&&!Wt(n))return fetch(n,{credentials:"same-origin"}).then(l=>{if(!l.ok)throw`failed to load wasm binary file at \'${n}\'`;return l.arrayBuffer()}).catch(()=>Cr(n));if(K)return new Promise((l,f)=>{K(n,b=>l(new Uint8Array(b)),f)})}return Promise.resolve().then(()=>Cr(n))}function ur(n,l,f){return ft(n).then(b=>WebAssembly.instantiate(b,l)).then(f,b=>{ee(`failed to asynchronously prepare wasm: ${b}`),Kt(b)})}function Ar(n,l){var f=at;return typeof WebAssembly.instantiateStreaming!="function"||je(f)||Wt(f)||P||typeof fetch!="function"?ur(f,n,l):fetch(f,{credentials:"same-origin"}).then(b=>WebAssembly.instantiateStreaming(b,n).then(l,function(C){return ee(`wasm streaming compile failed: ${C}`),ee("falling back to ArrayBuffer instantiation"),ur(f,n,l)}))}var Ir={826468:(n,l,f,b)=>{if(typeof d>"u"||!d.Db)return 1;if(n=He(n>>>0),n.startsWith("./")&&(n=n.substring(2)),n=d.Db.get(n),!n)return 2;if(l>>>=0,f>>>=0,b>>>=0,l+f>n.byteLength)return 3;try{return o().set(n.subarray(l,l+f),b>>>0),0}catch{return 4}},826969:()=>{d.Xb()},827e3:()=>{d.Yb()},827029:()=>{d.bc()},827054:n=>d.Wb(n),827087:n=>d.$b(n),827119:(n,l,f)=>{d.Lb(n,l,f,!0)},827158:(n,l,f)=>{d.Lb(n,l,f)},827191:n=>{d.ob("Abs",n,void 0)},827242:n=>{d.ob("Neg",n,void 0)},827293:n=>{d.ob("Floor",n,void 0)},827346:n=>{d.ob("Ceil",n,void 0)},827398:n=>{d.ob("Reciprocal",n,void 0)},827456:n=>{d.ob("Sqrt",n,void 0)},827508:n=>{d.ob("Exp",n,void 0)},827559:n=>{d.ob("Erf",n,void 0)},827610:n=>{d.ob("Sigmoid",n,void 0)},827665:(n,l,f)=>{d.ob("HardSigmoid",n,{alpha:l,beta:f})},827744:n=>{d.ob("Log",n,void 0)},827795:n=>{d.ob("Sin",n,void 0)},827846:n=>{d.ob("Cos",n,void 0)},827897:n=>{d.ob("Tan",n,void 0)},827948:n=>{d.ob("Asin",n,void 0)},828e3:n=>{d.ob("Acos",n,void 0)},828052:n=>{d.ob("Atan",n,void 0)},828104:n=>{d.ob("Sinh",n,void 0)},828156:n=>{d.ob("Cosh",n,void 0)},828208:n=>{d.ob("Asinh",n,void 0)},828261:n=>{d.ob("Acosh",n,void 0)},828314:n=>{d.ob("Atanh",n,void 0)},828367:n=>{d.ob("Tanh",n,void 0)},828419:n=>{d.ob("Not",n,void 0)},828470:(n,l,f)=>{d.ob("Clip",n,{min:l,max:f})},828539:n=>{d.ob("Clip",n,void 0)},828591:(n,l)=>{d.ob("Elu",n,{alpha:l})},828649:n=>{d.ob("Relu",n,void 0)},828701:(n,l)=>{d.ob("LeakyRelu",n,{alpha:l})},828765:(n,l)=>{d.ob("ThresholdedRelu",n,{alpha:l})},828835:(n,l)=>{d.ob("Cast",n,{to:l})},828893:n=>{d.ob("Add",n,void 0)},828944:n=>{d.ob("Sub",n,void 0)},828995:n=>{d.ob("Mul",n,void 0)},829046:n=>{d.ob("Div",n,void 0)},829097:n=>{d.ob("Pow",n,void 0)},829148:n=>{d.ob("Equal",n,void 0)},829201:n=>{d.ob("Greater",n,void 0)},829256:n=>{d.ob("GreaterOrEqual",n,void 0)},829318:n=>{d.ob("Less",n,void 0)},829370:n=>{d.ob("LessOrEqual",n,void 0)},829429:(n,l,f,b,C)=>{d.ob("ReduceMean",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829588:(n,l,f,b,C)=>{d.ob("ReduceMax",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829746:(n,l,f,b,C)=>{d.ob("ReduceMin",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829904:(n,l,f,b,C)=>{d.ob("ReduceProd",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830063:(n,l,f,b,C)=>{d.ob("ReduceSum",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830221:(n,l,f,b,C)=>{d.ob("ReduceL1",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830378:(n,l,f,b,C)=>{d.ob("ReduceL2",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830535:(n,l,f,b,C)=>{d.ob("ReduceLogSum",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830696:(n,l,f,b,C)=>{d.ob("ReduceSumSquare",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830860:(n,l,f,b,C)=>{d.ob("ReduceLogSumExp",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},831024:n=>{d.ob("Where",n,void 0)},831077:(n,l,f)=>{d.ob("Transpose",n,{perm:l?Array.from(a().subarray(l>>>0,f>>>0)):[]})},831185:(n,l,f,b)=>{d.ob("DepthToSpace",n,{blocksize:l,mode:He(f),format:b?"NHWC":"NCHW"})},831318:(n,l,f,b)=>{d.ob("DepthToSpace",n,{blocksize:l,mode:He(f),format:b?"NHWC":"NCHW"})},831451:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we)=>{d.ob("ConvTranspose",n,{format:re?"NHWC":"NCHW",autoPad:l,dilations:[f],group:b,kernelShape:[C],pads:[k,V],strides:[F],wIsConst:()=>!!r()[J>>>0],outputPadding:ce?Array.from(a().subarray(ce>>>0,Re>>>0)):[],outputShape:ze?Array.from(a().subarray(ze>>>0,z>>>0)):[],activation:He(we)})},831852:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z)=>{d.ob("ConvTranspose",n,{format:F?"NHWC":"NCHW",autoPad:l,dilations:Array.from(a().subarray(f>>>0,(f>>>0)+2>>>0)),group:b,kernelShape:Array.from(a().subarray(C>>>0,(C>>>0)+2>>>0)),pads:Array.from(a().subarray(k>>>0,(k>>>0)+4>>>0)),strides:Array.from(a().subarray(V>>>0,(V>>>0)+2>>>0)),wIsConst:()=>!!r()[re>>>0],outputPadding:J?Array.from(a().subarray(J>>>0,ce>>>0)):[],outputShape:Re?Array.from(a().subarray(Re>>>0,ze>>>0)):[],activation:He(z)})},832417:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we)=>{d.ob("ConvTranspose",n,{format:re?"NHWC":"NCHW",autoPad:l,dilations:[f],group:b,kernelShape:[C],pads:[k,V],strides:[F],wIsConst:()=>!!r()[J>>>0],outputPadding:ce?Array.from(a().subarray(ce>>>0,Re>>>0)):[],outputShape:ze?Array.from(a().subarray(ze>>>0,z>>>0)):[],activation:He(we)})},832818:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z)=>{d.ob("ConvTranspose",n,{format:F?"NHWC":"NCHW",autoPad:l,dilations:Array.from(a().subarray(f>>>0,(f>>>0)+2>>>0)),group:b,kernelShape:Array.from(a().subarray(C>>>0,(C>>>0)+2>>>0)),pads:Array.from(a().subarray(k>>>0,(k>>>0)+4>>>0)),strides:Array.from(a().subarray(V>>>0,(V>>>0)+2>>>0)),wIsConst:()=>!!r()[re>>>0],outputPadding:J?Array.from(a().subarray(J>>>0,ce>>>0)):[],outputShape:Re?Array.from(a().subarray(Re>>>0,ze>>>0)):[],activation:He(z)})},833383:(n,l)=>{d.ob("GlobalAveragePool",n,{format:l?"NHWC":"NCHW"})},833474:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("AveragePool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},833758:(n,l)=>{d.ob("GlobalAveragePool",n,{format:l?"NHWC":"NCHW"})},833849:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("AveragePool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834133:(n,l)=>{d.ob("GlobalMaxPool",n,{format:l?"NHWC":"NCHW"})},834220:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("MaxPool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834500:(n,l)=>{d.ob("GlobalMaxPool",n,{format:l?"NHWC":"NCHW"})},834587:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("MaxPool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834867:(n,l,f,b,C)=>{d.ob("Gemm",n,{alpha:l,beta:f,transA:b,transB:C})},834971:n=>{d.ob("MatMul",n,void 0)},835025:(n,l,f,b)=>{d.ob("ArgMax",n,{keepDims:!!l,selectLastIndex:!!f,axis:b})},835133:(n,l,f,b)=>{d.ob("ArgMin",n,{keepDims:!!l,selectLastIndex:!!f,axis:b})},835241:(n,l)=>{d.ob("Softmax",n,{axis:l})},835304:(n,l)=>{d.ob("Concat",n,{axis:l})},835364:(n,l,f,b,C)=>{d.ob("Split",n,{axis:l,numOutputs:f,splitSizes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},835504:n=>{d.ob("Expand",n,void 0)},835558:(n,l)=>{d.ob("Gather",n,{axis:Number(l)})},835629:(n,l)=>{d.ob("GatherElements",n,{axis:Number(l)})},835708:(n,l,f,b,C,k,V,F,re,J,ce)=>{d.ob("Resize",n,{antialias:l,axes:f?Array.from(a().subarray(f>>>0,b>>>0)):[],coordinateTransformMode:He(C),cubicCoeffA:k,excludeOutside:V,extrapolationValue:F,keepAspectRatioPolicy:He(re),mode:He(J),nearestMode:He(ce)})},836054:(n,l,f,b,C,k,V)=>{d.ob("Slice",n,{starts:l?Array.from(a().subarray(l>>>0,f>>>0)):[],ends:b?Array.from(a().subarray(b>>>0,C>>>0)):[],axes:k?Array.from(a().subarray(k>>>0,V>>>0)):[]})},836270:n=>{d.ob("Tile",n,void 0)},836322:(n,l,f,b)=>{d.ob("LayerNormalization",n,{axis:l,epsilon:f,simplified:!!b})},836433:(n,l,f)=>{d.ob("InstanceNormalization",n,{epsilon:l,format:f?"NHWC":"NCHW"})},836547:(n,l,f)=>{d.ob("InstanceNormalization",n,{epsilon:l,format:f?"NHWC":"NCHW"})},836661:n=>{d.ob("Range",n,void 0)},836714:(n,l)=>{d.ob("Einsum",n,{equation:He(l)})},836795:(n,l,f,b,C)=>{d.ob("Pad",n,{mode:l,value:f,pads:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},836922:(n,l,f,b,C,k)=>{d.ob("BatchNormalization",n,{epsilon:l,momentum:f,spatial:!!C,trainingMode:!!b,format:k?"NHWC":"NCHW"})},837091:(n,l,f,b,C,k)=>{d.ob("BatchNormalization",n,{epsilon:l,momentum:f,spatial:!!C,trainingMode:!!b,format:k?"NHWC":"NCHW"})},837260:(n,l,f)=>{d.ob("CumSum",n,{exclusive:Number(l),reverse:Number(f)})},837357:(n,l,f,b,C,k,V,F,re)=>{d.ob("Attention",n,{numHeads:l,isUnidirectional:f,maskFilterValue:b,scale:C,doRotary:k,qkvHiddenSizes:V?Array.from(a().subarray(Number(F)>>>0,Number(F)+V>>>0)):[],pastPresentShareBuffer:!!re})},837629:n=>{d.ob("BiasAdd",n,void 0)},837684:n=>{d.ob("BiasSplitGelu",n,void 0)},837745:n=>{d.ob("FastGelu",n,void 0)},837801:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze)=>{d.ob("Conv",n,{format:re?"NHWC":"NCHW",auto_pad:l,dilations:[f],group:b,kernel_shape:[C],pads:k?Array.from(a().subarray(k>>>0,V>>>0)):[],strides:[F],w_is_const:()=>!!r()[J>>>0],activation:He(ce),activation_params:Re?Array.from(p().subarray(Re>>>0,ze>>>0)):[]})},838171:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("Conv",n,{format:Re?"NHWC":"NCHW",auto_pad:l,dilations:[f,b],group:C,kernel_shape:[k,V],pads:F?Array.from(a().subarray(F>>>0,re>>>0)):[],strides:[J,ce],w_is_const:()=>!!r()[ze>>>0],activation:He(z),activation_params:we?Array.from(p().subarray(we>>>0,Pe>>>0)):[]})},838562:n=>{d.ob("Gelu",n,void 0)},838614:(n,l,f,b,C,k)=>{d.ob("MatMulNBits",n,{k:l,n:f,accuracyLevel:b,bits:C,blockSize:k})},838741:(n,l,f,b,C,k)=>{d.ob("MultiHeadAttention",n,{numHeads:l,isUnidirectional:f,maskFilterValue:b,scale:C,doRotary:k})},838900:(n,l,f,b,C)=>{d.ob("RotaryEmbedding",n,{interleaved:!!l,numHeads:f,rotaryEmbeddingDim:b,scale:C})},839039:(n,l,f)=>{d.ob("SkipLayerNormalization",n,{epsilon:l,simplified:!!f})},839141:(n,l,f)=>{d.ob("SkipLayerNormalization",n,{epsilon:l,simplified:!!f})},839243:(n,l,f,b)=>{d.ob("LayerNormalization",n,{axis:l,epsilon:f,simplified:!!b})},839354:n=>{d.ac(n)},839388:(n,l)=>d.cc(n,l,d.Cb.ec,d.Cb.errors)};function st(n){this.name="ExitStatus",this.message=`Program terminated with exit(${n})`,this.status=n}var Tr=n=>{n.terminate(),n.onmessage=()=>{}},ht=n=>{ge.xb.length==0&&(lr(),ge.Mb(ge.xb[0]));var l=ge.xb.pop();if(!l)return 6;ge.yb.push(l),ge.ub[n.wb]=l,l.wb=n.wb;var f={cmd:"run",start_routine:n.fc,arg:n.Rb,pthread_ptr:n.wb};return P&&l.unref(),l.postMessage(f,n.mc),0},bt=0,Er=n=>{var l=io();return n=n(),fn(l),n},Te=(n,l,...f)=>Er(()=>{for(var b=2*f.length,C=oo(8*b),k=C>>>3,V=0;V<f.length;V++){var F=f[V];typeof F=="bigint"?(Be[k+2*V]=1n,Be[k+2*V+1]=F):(Be[k+2*V]=0n,h()[k+2*V+1>>>0]=F)}return gi(n,0,b,C,l)});function dr(n){if(O)return Te(0,1,n);ie=n,0<bt||(ge.hc(),d.onExit?.(n),me=!0),I(n,new st(n))}var Xe=n=>{if(ie=n,O)throw jr(n),"unwind";dr(n)};function ut(){for(var n=d.numThreads;n--;)lr();mt.unshift(()=>{Vt++,Fn(()=>xr())})}function lr(){var n=L("ort-wasm-simd-threaded.worker.js");n=new Worker(n),ge.xb.push(n)}function Fn(n){O?n():Promise.all(ge.xb.map(ge.Mb)).then(n)}var ge={xb:[],yb:[],Qb:[],ub:{},Gb(){O?(ge.receiveObjectTransfer=ge.dc,ge.threadInitTLS=ge.Pb,ge.setExitStatus=ge.Ob):ut()},Ob:n=>ie=n,pc:["$terminateWorker"],hc:()=>{for(var n of ge.yb)Tr(n);for(n of ge.xb)Tr(n);ge.xb=[],ge.yb=[],ge.ub=[]},Nb:n=>{var l=n.wb;delete ge.ub[l],ge.xb.push(n),ge.yb.splice(ge.yb.indexOf(n),1),n.wb=0,ro(l)},dc(){},Pb(){ge.Qb.forEach(n=>n())},Mb:n=>new Promise(l=>{n.onmessage=k=>{k=k.data;var V=k.cmd;if(k.targetThread&&k.targetThread!=pn()){var F=ge.ub[k.targetThread];F?F.postMessage(k,k.transferList):ee(`Internal error! Worker sent a message "${V}" to target pthread ${k.targetThread}, but that thread no longer exists!`)}else V==="checkMailbox"?rt():V==="spawnThread"?ht(k):V==="cleanupThread"?ge.Nb(ge.ub[k.thread]):V==="killThread"?(k=k.thread,V=ge.ub[k],delete ge.ub[k],Tr(V),ro(k),ge.yb.splice(ge.yb.indexOf(V),1),V.wb=0):V==="cancelThread"?ge.ub[k.thread].postMessage({cmd:"cancel"}):V==="loaded"?(n.loaded=!0,P&&!n.wb&&n.unref(),l(n)):V==="alert"?alert(`Thread ${k.threadId}: ${k.text}`):k.target==="setimmediate"?n.postMessage(k):V==="callHandler"?d[k.handler](...k.args):V&&ee(`worker sent an unknown command ${V}`)},n.onerror=k=>{throw ee(`worker sent an error! ${k.filename}:${k.lineno}: ${k.message}`),k},P&&(n.on("message",k=>n.onmessage({data:k})),n.on("error",k=>n.onerror(k)));var f=[],b=["onExit"],C;for(C of b)d.hasOwnProperty(C)&&f.push(C);n.postMessage({cmd:"load",handlers:f,urlOrBlob:d.mainScriptUrlOrBlob||e,wasmMemory:ae,wasmModule:Ae})})};d.PThread=ge;var Yt=n=>{for(;0<n.length;)n.shift()(d)};d.establishStackSpace=()=>{var n=pn(),l=c()[n+52>>>2>>>0];n=c()[n+56>>>2>>>0],bi(l,l-n),fn(l)};function jr(n){if(O)return Te(1,0,n);Xe(n)}d.invokeEntryPoint=(n,l)=>{bt=0,n=wi(n,l),0<bt?ge.Ob(n):no(n)};class qn{constructor(l){this.Ib=l-24}Gb(l,f){c()[this.Ib+16>>>2>>>0]=0,c()[this.Ib+4>>>2>>>0]=l,c()[this.Ib+8>>>2>>>0]=f}}var Kr=0,jn=0;function Yr(n,l,f,b){return O?Te(2,1,n,l,f,b):Zr(n,l,f,b)}function Zr(n,l,f,b){if(n>>>=0,l>>>=0,f>>>=0,b>>>=0,typeof SharedArrayBuffer>"u")return ee("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var C=[];return O&&C.length===0?Yr(n,l,f,b):(n={fc:f,wb:n,Rb:b,mc:C},O?(n.oc="spawnThread",postMessage(n,C),0):ht(n))}var cr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Pr=(n,l,f)=>{l>>>=0;var b=l+f;for(f=l;n[f]&&!(f>=b);)++f;if(16<f-l&&n.buffer&&cr)return cr.decode(n.buffer instanceof SharedArrayBuffer?n.slice(l,f):n.subarray(l,f));for(b="";l<f;){var C=n[l++];if(C&128){var k=n[l++]&63;if((C&224)==192)b+=String.fromCharCode((C&31)<<6|k);else{var V=n[l++]&63;C=(C&240)==224?(C&15)<<12|k<<6|V:(C&7)<<18|k<<12|V<<6|n[l++]&63,65536>C?b+=String.fromCharCode(C):(C-=65536,b+=String.fromCharCode(55296|C>>10,56320|C&1023))}}else b+=String.fromCharCode(C)}return b},He=(n,l)=>(n>>>=0)?Pr(o(),n,l):"";function Xr(n,l,f){return O?Te(3,1,n,l,f):0}function Qr(n,l){if(O)return Te(4,1,n,l)}var gt=n=>{for(var l=0,f=0;f<n.length;++f){var b=n.charCodeAt(f);127>=b?l++:2047>=b?l+=2:55296<=b&&57343>=b?(l+=4,++f):l+=3}return l},dt=(n,l,f,b)=>{if(f>>>=0,!(0<b))return 0;var C=f;b=f+b-1;for(var k=0;k<n.length;++k){var V=n.charCodeAt(k);if(55296<=V&&57343>=V){var F=n.charCodeAt(++k);V=65536+((V&1023)<<10)|F&1023}if(127>=V){if(f>=b)break;l[f++>>>0]=V}else{if(2047>=V){if(f+1>=b)break;l[f++>>>0]=192|V>>6}else{if(65535>=V){if(f+2>=b)break;l[f++>>>0]=224|V>>12}else{if(f+3>=b)break;l[f++>>>0]=240|V>>18,l[f++>>>0]=128|V>>12&63}l[f++>>>0]=128|V>>6&63}l[f++>>>0]=128|V&63}}return l[f>>>0]=0,f-C},Bt=(n,l,f)=>dt(n,o(),l,f);function Zt(n,l){if(O)return Te(5,1,n,l)}function kr(n,l,f){if(O)return Te(6,1,n,l,f)}function Or(n,l,f){return O?Te(7,1,n,l,f):0}function Jr(n,l){if(O)return Te(8,1,n,l)}function pr(n,l,f){if(O)return Te(9,1,n,l,f)}function en(n,l,f,b){if(O)return Te(10,1,n,l,f,b)}function tn(n,l,f,b){if(O)return Te(11,1,n,l,f,b)}function rn(n,l,f,b){if(O)return Te(12,1,n,l,f,b)}function nn(n){if(O)return Te(13,1,n)}function Rr(n,l){if(O)return Te(14,1,n,l)}function Xt(n,l,f){if(O)return Te(15,1,n,l,f)}var on,nt=n=>{for(var l="";o()[n>>>0];)l+=on[o()[n++>>>0]];return l},mr={},Br={},Kn={},wt;function Yn(n,l,f={}){var b=l.name;if(!n)throw new wt(`type "${b}" must have a positive integer typeid pointer`);if(Br.hasOwnProperty(n)){if(f.Ub)return;throw new wt(`Cannot register type \'${b}\' twice`)}Br[n]=l,delete Kn[n],mr.hasOwnProperty(n)&&(l=mr[n],delete mr[n],l.forEach(C=>C()))}function Je(n,l,f={}){if(!("argPackAdvance"in l))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Yn(n,l,f)}var Dr=(n,l,f)=>{switch(l){case 1:return f?b=>r()[b>>>0]:b=>o()[b>>>0];case 2:return f?b=>i()[b>>>1>>>0]:b=>u()[b>>>1>>>0];case 4:return f?b=>a()[b>>>2>>>0]:b=>c()[b>>>2>>>0];case 8:return f?b=>Be[b>>>3]:b=>Ge[b>>>3];default:throw new TypeError(`invalid integer width (${l}): ${n}`)}},fr=[],lt=[];function hr(n){n>>>=0,9<n&&--lt[n+1]===0&&(lt[n]=void 0,fr.push(n))}var Qe=n=>{if(!n)throw new wt("Cannot use deleted val. handle = "+n);return lt[n]},ot=n=>{switch(n){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let l=fr.pop()||lt.length;return lt[l]=n,lt[l+1]=1,l}};function Qt(n){return this.fromWireType(c()[n>>>2>>>0])}var Zn={name:"emscripten::val",fromWireType:n=>{var l=Qe(n);return hr(n),l},toWireType:(n,l)=>ot(l),argPackAdvance:8,readValueFromPointer:Qt,Bb:null},an=(n,l)=>{switch(l){case 4:return function(f){return this.fromWireType(p()[f>>>2>>>0])};case 8:return function(f){return this.fromWireType(h()[f>>>3>>>0])};default:throw new TypeError(`invalid float width (${l}): ${n}`)}},zr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Xn=(n,l)=>{for(var f=n>>1,b=f+l/2;!(f>=b)&&u()[f>>>0];)++f;if(f<<=1,32<f-n&&zr)return zr.decode(o().slice(n,f));for(f="",b=0;!(b>=l/2);++b){var C=i()[n+2*b>>>1>>>0];if(C==0)break;f+=String.fromCharCode(C)}return f},sn=(n,l,f)=>{if(f??=2147483647,2>f)return 0;f-=2;var b=l;f=f<2*n.length?f/2:n.length;for(var C=0;C<f;++C){var k=n.charCodeAt(C);i()[l>>>1>>>0]=k,l+=2}return i()[l>>>1>>>0]=0,l-b},un=n=>2*n.length,gr=(n,l)=>{for(var f=0,b="";!(f>=l/4);){var C=a()[n+4*f>>>2>>>0];if(C==0)break;++f,65536<=C?(C-=65536,b+=String.fromCharCode(55296|C>>10,56320|C&1023)):b+=String.fromCharCode(C)}return b},Qn=(n,l,f)=>{if(l>>>=0,f??=2147483647,4>f)return 0;var b=l;f=b+f-4;for(var C=0;C<n.length;++C){var k=n.charCodeAt(C);if(55296<=k&&57343>=k){var V=n.charCodeAt(++C);k=65536+((k&1023)<<10)|V&1023}if(a()[l>>>2>>>0]=k,l+=4,l+4>f)break}return a()[l>>>2>>>0]=0,l-b},pe=n=>{for(var l=0,f=0;f<n.length;++f){var b=n.charCodeAt(f);55296<=b&&57343>=b&&++f,l+=4}return l},Mr=n=>{if(!me)try{if(n(),!(0<bt))try{O?no(ie):Xe(ie)}catch(l){l instanceof st||l=="unwind"||I(1,l)}}catch(l){l instanceof st||l=="unwind"||I(1,l)}};function Nt(n){n>>>=0,typeof Atomics.nc=="function"&&(Atomics.nc(a(),n>>>2,n).value.then(rt),n+=128,Atomics.store(a(),n>>>2,1))}d.__emscripten_thread_mailbox_await=Nt;var rt=()=>{var n=pn();n&&(Nt(n),Mr(yi))};d.checkMailbox=rt;var yr=[],br=(n,l)=>{var f=Br[n];if(f===void 0)throw n=fi(n),f=nt(n),At(n),new wt(`${l} has unknown type ${f}`);return f},Ur=(n,l,f)=>{var b=[];return n=n.toWireType(b,f),b.length&&(c()[l>>>2>>>0]=ot(b)),n},Jt=n=>{try{n()}catch(l){Kt(l)}};function dn(){var n=oe,l={};for(let[f,b]of Object.entries(n))l[f]=typeof b=="function"?(...C)=>{Dt.push(f);try{return b(...C)}finally{me||(Dt.pop(),ct&&vt===1&&Dt.length===0&&(vt=0,bt+=1,Jt($i),typeof Fibers<"u"&&Fibers.rc()))}}:b;return l}var vt=0,ct=null,ln=0,Dt=[],Vr={},s={},m=0,g=null,$=[];function T(){return new Promise((n,l)=>{g={resolve:n,reject:l}})}function B(){var n=mn(65548),l=n+12;c()[n>>>2>>>0]=l,c()[n+4>>>2>>>0]=l+65536,l=Dt[0];var f=Vr[l];return f===void 0&&(f=m++,Vr[l]=f,s[f]=l),l=f,a()[n+8>>>2>>>0]=l,n}function H(){var n=a()[ct+8>>>2>>>0];return n=oe[s[n]],--bt,n()}function q(n){if(!me){if(vt===0){var l=!1,f=!1;n((b=0)=>{if(!me&&(ln=b,l=!0,f)){vt=2,Jt(()=>_i(ct)),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.resume(),b=!1;try{var C=H()}catch(F){C=F,b=!0}var k=!1;if(!ct){var V=g;V&&(g=null,(b?V.reject:V.resolve)(C),k=!0)}if(b&&!k)throw C}}),f=!0,l||(vt=1,ct=B(),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.pause(),Jt(()=>vi(ct)))}else vt===2?(vt=0,Jt(Si),At(ct),ct=null,$.forEach(Mr)):Kt(`invalid state: ${vt}`);return ln}}function te(n){return q(l=>{n().then(l)})}var X=[],de={},Ee=n=>{var l=de[n];return l===void 0?nt(n):l},Oe=()=>typeof globalThis=="object"?globalThis:Function("return this")(),D=n=>{var l=X.length;return X.push(n),l},be=(n,l)=>{for(var f=Array(n),b=0;b<n;++b)f[b]=br(c()[l+4*b>>>2>>>0],"parameter "+b);return f},Ie=(n,l)=>Object.defineProperty(l,"name",{value:n});function zt(n){var l=Function;if(!(l instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof l} which is not a function`);var f=Ie(l.name||"unknownFunctionName",function(){});return f.prototype=l.prototype,f=new f,n=l.apply(f,n),n instanceof Object?n:f}var Mt=n=>n%4===0&&(n%100!==0||n%400===0),Qo=[0,31,60,91,121,152,182,213,244,274,305,335],Jo=[0,31,59,90,120,151,181,212,243,273,304,334];function ei(n,l,f,b,C,k,V){return O?Te(16,1,n,l,f,b,C,k,V):-52}function ti(n,l,f,b,C,k){if(O)return Te(17,1,n,l,f,b,C,k)}var Jn=[],ri=(n,l)=>{Jn.length=0;for(var f;f=o()[n++>>>0];){var b=f!=105;b&=f!=112,l+=b&&l%8?4:0,Jn.push(f==112?c()[l>>>2>>>0]:f==106?Be[l>>>3]:f==105?a()[l>>>2>>>0]:h()[l>>>3>>>0]),l+=b?8:4}return Jn},eo={},ni=()=>{if(!to){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:A||"./this.program"},l;for(l in eo)eo[l]===void 0?delete n[l]:n[l]=eo[l];var f=[];for(l in n)f.push(`${l}=${n[l]}`);to=f}return to},to;function oi(n,l){if(O)return Te(18,1,n,l);n>>>=0,l>>>=0;var f=0;return ni().forEach((b,C)=>{var k=l+f;for(C=c()[n+4*C>>>2>>>0]=k,k=0;k<b.length;++k)r()[C++>>>0]=b.charCodeAt(k);r()[C>>>0]=0,f+=b.length+1}),0}function ii(n,l){if(O)return Te(19,1,n,l);n>>>=0,l>>>=0;var f=ni();c()[n>>>2>>>0]=f.length;var b=0;return f.forEach(C=>b+=C.length+1),c()[l>>>2>>>0]=b,0}function ai(n){return O?Te(20,1,n):52}function si(n,l,f,b){return O?Te(21,1,n,l,f,b):52}function ui(n,l,f,b){return O?Te(22,1,n,l,f,b):70}var Xd=[null,[],[]];function di(n,l,f,b){if(O)return Te(23,1,n,l,f,b);l>>>=0,f>>>=0,b>>>=0;for(var C=0,k=0;k<f;k++){var V=c()[l>>>2>>>0],F=c()[l+4>>>2>>>0];l+=8;for(var re=0;re<F;re++){var J=o()[V+re>>>0],ce=Xd[n];J===0||J===10?((n===1?We:ee)(Pr(ce,0)),ce.length=0):ce.push(J)}C+=F}return c()[b>>>2>>>0]=C,0}var li=[31,29,31,30,31,30,31,31,30,31,30,31],ci=[31,28,31,30,31,30,31,31,30,31,30,31];function Qd(n){var l=Array(gt(n)+1);return dt(n,l,0,l.length),l}var Jd=(n,l)=>{r().set(n,l>>>0)};function pi(n,l,f,b){function C(z,we,Pe){for(z=typeof z=="number"?z.toString():z||"";z.length<we;)z=Pe[0]+z;return z}function k(z,we){return C(z,we,"0")}function V(z,we){function Pe(Ci){return 0>Ci?-1:0<Ci?1:0}var er;return(er=Pe(z.getFullYear()-we.getFullYear()))===0&&(er=Pe(z.getMonth()-we.getMonth()))===0&&(er=Pe(z.getDate()-we.getDate())),er}function F(z){switch(z.getDay()){case 0:return new Date(z.getFullYear()-1,11,29);case 1:return z;case 2:return new Date(z.getFullYear(),0,3);case 3:return new Date(z.getFullYear(),0,2);case 4:return new Date(z.getFullYear(),0,1);case 5:return new Date(z.getFullYear()-1,11,31);case 6:return new Date(z.getFullYear()-1,11,30)}}function re(z){var we=z.zb;for(z=new Date(new Date(z.Ab+1900,0,1).getTime());0<we;){var Pe=z.getMonth(),er=(Mt(z.getFullYear())?li:ci)[Pe];if(we>er-z.getDate())we-=er-z.getDate()+1,z.setDate(1),11>Pe?z.setMonth(Pe+1):(z.setMonth(0),z.setFullYear(z.getFullYear()+1));else{z.setDate(z.getDate()+we);break}}return Pe=new Date(z.getFullYear()+1,0,4),we=F(new Date(z.getFullYear(),0,4)),Pe=F(Pe),0>=V(we,z)?0>=V(Pe,z)?z.getFullYear()+1:z.getFullYear():z.getFullYear()-1}n>>>=0,l>>>=0,f>>>=0,b>>>=0;var J=c()[b+40>>>2>>>0];b={kc:a()[b>>>2>>>0],jc:a()[b+4>>>2>>>0],Eb:a()[b+8>>>2>>>0],Jb:a()[b+12>>>2>>>0],Fb:a()[b+16>>>2>>>0],Ab:a()[b+20>>>2>>>0],vb:a()[b+24>>>2>>>0],zb:a()[b+28>>>2>>>0],qc:a()[b+32>>>2>>>0],ic:a()[b+36>>>2>>>0],lc:J?He(J):""},f=He(f),J={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ce in J)f=f.replace(new RegExp(ce,"g"),J[ce]);var Re="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ze="January February March April May June July August September October November December".split(" ");J={"%a":z=>Re[z.vb].substring(0,3),"%A":z=>Re[z.vb],"%b":z=>ze[z.Fb].substring(0,3),"%B":z=>ze[z.Fb],"%C":z=>k((z.Ab+1900)/100|0,2),"%d":z=>k(z.Jb,2),"%e":z=>C(z.Jb,2," "),"%g":z=>re(z).toString().substring(2),"%G":re,"%H":z=>k(z.Eb,2),"%I":z=>(z=z.Eb,z==0?z=12:12<z&&(z-=12),k(z,2)),"%j":z=>{for(var we=0,Pe=0;Pe<=z.Fb-1;we+=(Mt(z.Ab+1900)?li:ci)[Pe++]);return k(z.Jb+we,3)},"%m":z=>k(z.Fb+1,2),"%M":z=>k(z.jc,2),"%n":()=>`\n`,"%p":z=>0<=z.Eb&&12>z.Eb?"AM":"PM","%S":z=>k(z.kc,2),"%t":()=>"	","%u":z=>z.vb||7,"%U":z=>k(Math.floor((z.zb+7-z.vb)/7),2),"%V":z=>{var we=Math.floor((z.zb+7-(z.vb+6)%7)/7);if(2>=(z.vb+371-z.zb-2)%7&&we++,we)we==53&&(Pe=(z.vb+371-z.zb)%7,Pe==4||Pe==3&&Mt(z.Ab)||(we=1));else{we=52;var Pe=(z.vb+7-z.zb-1)%7;(Pe==4||Pe==5&&Mt(z.Ab%400-1))&&we++}return k(we,2)},"%w":z=>z.vb,"%W":z=>k(Math.floor((z.zb+7-(z.vb+6)%7)/7),2),"%y":z=>(z.Ab+1900).toString().substring(2),"%Y":z=>z.Ab+1900,"%z":z=>{z=z.ic;var we=0<=z;return z=Math.abs(z)/60,(we?"+":"-")+("0000"+(z/60*100+z%60)).slice(-4)},"%Z":z=>z.lc,"%%":()=>"%"},f=f.replace(/%%/g,"\\0\\0");for(ce in J)f.includes(ce)&&(f=f.replace(new RegExp(ce,"g"),J[ce](b)));return f=f.replace(/\\0\\0/g,"%"),ce=Qd(f),ce.length>l?0:(Jd(ce,n),ce.length-1)}ge.Gb();for(var mi=Array(256),cn=0;256>cn;++cn)mi[cn]=String.fromCharCode(cn);on=mi,wt=d.BindingError=class extends Error{constructor(n){super(n),this.name="BindingError"}},d.InternalError=class extends Error{constructor(n){super(n),this.name="InternalError"}},lt.push(0,1,void 0,1,null,1,!0,1,!1,1),d.count_emval_handles=()=>lt.length/2-5-fr.length;var el=[dr,jr,Yr,Xr,Qr,Zt,kr,Or,Jr,pr,en,tn,rn,nn,Rr,Xt,ei,ti,oi,ii,ai,si,ui,di],tl={ua:function(n,l,f){return te(async()=>{await d.Zb(n,l,f)})},b:function(n,l,f){throw n>>>=0,new qn(n).Gb(l>>>0,f>>>0),Kr=n,jn++,Kr},ia:function(n){hi(n>>>0,!E,1,!x,131072,!1),ge.Pb()},G:function(n){n>>>=0,O?postMessage({cmd:"cleanupThread",thread:n}):ge.Nb(ge.ub[n])},_:Zr,A:Xr,pa:Qr,W:Zt,Y:kr,qa:Or,na:Jr,fa:pr,ma:en,K:tn,X:rn,U:nn,oa:Rr,V:Xt,E:function(n,l,f){n>>>=0,f>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:b=>b,toWireType:function(b,C){if(typeof C!="bigint"&&typeof C!="number")throw C===null?C="null":(b=typeof C,C=b==="object"||b==="array"||b==="function"?C.toString():""+C),new TypeError(`Cannot convert "${C}" to ${this.name}`);return typeof C=="number"&&(C=BigInt(C)),C},argPackAdvance:8,readValueFromPointer:Dr(l,f,l.indexOf("u")==-1),Bb:null})},O:function(n,l,f,b){n>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:function(C){return!!C},toWireType:function(C,k){return k?f:b},argPackAdvance:8,readValueFromPointer:function(C){return this.fromWireType(o()[C>>>0])},Bb:null})},N:function(n){return Je(n>>>0,Zn)},D:function(n,l,f){n>>>=0,f>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:b=>b,toWireType:(b,C)=>C,argPackAdvance:8,readValueFromPointer:an(l,f),Bb:null})},t:function(n,l,f,b,C){if(n>>>=0,f>>>=0,l=nt(l>>>0),C===-1&&(C=4294967295),C=F=>F,b===0){var k=32-8*f;C=F=>F<<k>>>k}var V=l.includes("unsigned")?function(F,re){return re>>>0}:function(F,re){return re};Je(n,{name:l,fromWireType:C,toWireType:V,argPackAdvance:8,readValueFromPointer:Dr(l,f,b!==0),Bb:null})},p:function(n,l,f){function b(k){var V=c()[k>>>2>>>0];return k=c()[k+4>>>2>>>0],new C(r().buffer,k,V)}n>>>=0;var C=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][l];f=nt(f>>>0),Je(n,{name:f,fromWireType:b,argPackAdvance:8,readValueFromPointer:b},{Ub:!0})},F:function(n,l){n>>>=0,l=nt(l>>>0);var f=l==="std::string";Je(n,{name:l,fromWireType:function(b){var C=c()[b>>>2>>>0],k=b+4;if(f)for(var V=k,F=0;F<=C;++F){var re=k+F;if(F==C||o()[re>>>0]==0){if(V=He(V,re-V),J===void 0)var J=V;else J+=String.fromCharCode(0),J+=V;V=re+1}}else{for(J=Array(C),F=0;F<C;++F)J[F]=String.fromCharCode(o()[k+F>>>0]);J=J.join("")}return At(b),J},toWireType:function(b,C){C instanceof ArrayBuffer&&(C=new Uint8Array(C));var k=typeof C=="string";if(!(k||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Int8Array))throw new wt("Cannot pass non-string to std::string");var V=f&&k?gt(C):C.length,F=mn(4+V+1),re=F+4;if(c()[F>>>2>>>0]=V,f&&k)Bt(C,re,V+1);else if(k)for(k=0;k<V;++k){var J=C.charCodeAt(k);if(255<J)throw At(re),new wt("String has UTF-16 code units that do not fit in 8 bits");o()[re+k>>>0]=J}else for(k=0;k<V;++k)o()[re+k>>>0]=C[k];return b!==null&&b.push(At,F),F},argPackAdvance:8,readValueFromPointer:Qt,Bb(b){At(b)}})},z:function(n,l,f){if(n>>>=0,l>>>=0,f>>>=0,f=nt(f),l===2)var b=Xn,C=sn,k=un,V=F=>u()[F>>>1>>>0];else l===4&&(b=gr,C=Qn,k=pe,V=F=>c()[F>>>2>>>0]);Je(n,{name:f,fromWireType:F=>{for(var re=c()[F>>>2>>>0],J,ce=F+4,Re=0;Re<=re;++Re){var ze=F+4+Re*l;(Re==re||V(ze)==0)&&(ce=b(ce,ze-ce),J===void 0?J=ce:(J+=String.fromCharCode(0),J+=ce),ce=ze+l)}return At(F),J},toWireType:(F,re)=>{if(typeof re!="string")throw new wt(`Cannot pass non-string to C++ string type ${f}`);var J=k(re),ce=mn(4+J+l);return c()[ce>>>2>>>0]=J/l,C(re,ce+4,J+l),F!==null&&F.push(At,ce),ce},argPackAdvance:8,readValueFromPointer:Qt,Bb(F){At(F)}})},P:function(n,l){n>>>=0,l=nt(l>>>0),Je(n,{Vb:!0,name:l,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ta:()=>1,S:function(n,l){n>>>=0,n==l>>>0?setTimeout(rt):O?postMessage({targetThread:n,cmd:"checkMailbox"}):(n=ge.ub[n])&&n.postMessage({cmd:"checkMailbox"})},$:function(n,l,f,b,C){l>>>=0,f>>>=0,b/=2,yr.length=b,C=C>>>0>>>3;for(var k=0;k<b;k++)yr[k]=Be[C+2*k]?Be[C+2*k+1]:h()[C+2*k+1>>>0];return n=l?Ir[l]:el[n],ge.Sb=f,f=n(...yr),ge.Sb=0,f},ha:Nt,sa:function(n){P&&ge.ub[n>>>0].ref()},w:function(n,l,f){return l>>>=0,f>>>=0,n=Qe(n>>>0),l=br(l,"emval::as"),Ur(l,f,n)},y:function(n){return n>>>=0,te(()=>(n=Qe(n),n.then(ot)))},o:function(n,l,f,b){return f>>>=0,b>>>=0,n=X[n>>>0],l=Qe(l>>>0),n(null,l,f,b)},k:function(n,l,f,b,C){return f>>>=0,b>>>=0,C>>>=0,n=X[n>>>0],l=Qe(l>>>0),f=Ee(f),n(l,l[f],b,C)},c:hr,C:function(n,l){return l>>>=0,n=Qe(n>>>0),l=Qe(l),n==l},n:function(n){return n>>>=0,n===0?ot(Oe()):(n=Ee(n),ot(Oe()[n]))},j:function(n,l,f){l=be(n,l>>>0);var b=l.shift();n--;var C=`return function (obj, func, destructorsRef, args) {\n`,k=0,V=[];f===0&&V.push("obj");for(var F=["retType"],re=[b],J=0;J<n;++J)V.push("arg"+J),F.push("argType"+J),re.push(l[J]),C+=`  var arg${J} = argType${J}.readValueFromPointer(args${k?"+"+k:""});\n`,k+=l[J].argPackAdvance;return C+=`  var rv = ${f===1?"new func":"func.call"}(${V.join(", ")});\n`,b.Vb||(F.push("emval_returnValue"),re.push(Ur),C+=`  return emval_returnValue(retType, destructorsRef, rv);\n`),F.push(C+`};\n`),n=zt(F)(...re),f=`methodCaller<(${l.map(ce=>ce.name).join(", ")}) => ${b.name}>`,D(Ie(f,n))},s:function(n,l){return l>>>=0,n=Qe(n>>>0),l=Qe(l),ot(n[l])},d:function(n){n>>>=0,9<n&&(lt[n+1]+=1)},v:function(){return ot([])},m:function(n){n=Qe(n>>>0);for(var l=Array(n.length),f=0;f<n.length;f++)l[f]=n[f];return ot(l)},g:function(n){return ot(Ee(n>>>0))},l:function(){return ot({})},i:function(n){n>>>=0;for(var l=Qe(n);l.length;){var f=l.pop();l.pop()(f)}hr(n)},h:function(n,l,f){l>>>=0,f>>>=0,n=Qe(n>>>0),l=Qe(l),f=Qe(f),n[l]=f},e:function(n,l){return l>>>=0,n=br(n>>>0,"_emval_take_value"),n=n.readValueFromPointer(l),ot(n)},ca:function(n,l){n=-9007199254740992>n||9007199254740992<n?NaN:Number(n),l>>>=0,n=new Date(1e3*n),a()[l>>>2>>>0]=n.getUTCSeconds(),a()[l+4>>>2>>>0]=n.getUTCMinutes(),a()[l+8>>>2>>>0]=n.getUTCHours(),a()[l+12>>>2>>>0]=n.getUTCDate(),a()[l+16>>>2>>>0]=n.getUTCMonth(),a()[l+20>>>2>>>0]=n.getUTCFullYear()-1900,a()[l+24>>>2>>>0]=n.getUTCDay(),n=(n.getTime()-Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[l+28>>>2>>>0]=n},da:function(n,l){n=-9007199254740992>n||9007199254740992<n?NaN:Number(n),l>>>=0,n=new Date(1e3*n),a()[l>>>2>>>0]=n.getSeconds(),a()[l+4>>>2>>>0]=n.getMinutes(),a()[l+8>>>2>>>0]=n.getHours(),a()[l+12>>>2>>>0]=n.getDate(),a()[l+16>>>2>>>0]=n.getMonth(),a()[l+20>>>2>>>0]=n.getFullYear()-1900,a()[l+24>>>2>>>0]=n.getDay();var f=(Mt(n.getFullYear())?Qo:Jo)[n.getMonth()]+n.getDate()-1|0;a()[l+28>>>2>>>0]=f,a()[l+36>>>2>>>0]=-(60*n.getTimezoneOffset()),f=new Date(n.getFullYear(),6,1).getTimezoneOffset();var b=new Date(n.getFullYear(),0,1).getTimezoneOffset();n=(f!=b&&n.getTimezoneOffset()==Math.min(b,f))|0,a()[l+32>>>2>>>0]=n},ea:function(n){n>>>=0;var l=new Date(a()[n+20>>>2>>>0]+1900,a()[n+16>>>2>>>0],a()[n+12>>>2>>>0],a()[n+8>>>2>>>0],a()[n+4>>>2>>>0],a()[n>>>2>>>0],0),f=a()[n+32>>>2>>>0],b=l.getTimezoneOffset(),C=new Date(l.getFullYear(),6,1).getTimezoneOffset(),k=new Date(l.getFullYear(),0,1).getTimezoneOffset(),V=Math.min(k,C);return 0>f?a()[n+32>>>2>>>0]=+(C!=k&&V==b):0<f!=(V==b)&&(C=Math.max(k,C),l.setTime(l.getTime()+6e4*((0<f?V:C)-b))),a()[n+24>>>2>>>0]=l.getDay(),f=(Mt(l.getFullYear())?Qo:Jo)[l.getMonth()]+l.getDate()-1|0,a()[n+28>>>2>>>0]=f,a()[n>>>2>>>0]=l.getSeconds(),a()[n+4>>>2>>>0]=l.getMinutes(),a()[n+8>>>2>>>0]=l.getHours(),a()[n+12>>>2>>>0]=l.getDate(),a()[n+16>>>2>>>0]=l.getMonth(),a()[n+20>>>2>>>0]=l.getYear(),n=l.getTime(),BigInt(isNaN(n)?-1:n/1e3)},aa:ei,ba:ti,R:function(n,l,f,b){n>>>=0,l>>>=0,f>>>=0,b>>>=0;var C=new Date().getFullYear(),k=new Date(C,0,1),V=new Date(C,6,1);C=k.getTimezoneOffset();var F=V.getTimezoneOffset(),re=Math.max(C,F);c()[n>>>2>>>0]=60*re,a()[l>>>2>>>0]=+(C!=F),n=J=>J.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],k=n(k),V=n(V),F<C?(Bt(k,f,17),Bt(V,b,17)):(Bt(k,b,17),Bt(V,f,17))},q:()=>{Kt("")},f:function(n,l,f){return n>>>=0,l=ri(l>>>0,f>>>0),Ir[n](...l)},M:function(n,l,f){return n>>>=0,l=ri(l>>>0,f>>>0),Ir[n](...l)},H:()=>{},L:()=>Date.now(),ra:()=>{throw bt+=1,"unwind"},T:function(){return 4294901760},u:()=>performance.timeOrigin+performance.now(),x:()=>P?(Ri(),wr(Oi)).cpus().length:navigator.hardwareConcurrency,Q:function(n){n>>>=0;var l=o().length;if(n<=l||4294901760<n)return!1;for(var f=1;4>=f;f*=2){var b=l*(1+.2/f);b=Math.min(b,n+100663296);var C=Math;b=Math.max(n,b);e:{C=(C.min.call(C,4294901760,b+(65536-b%65536)%65536)-ae.buffer.byteLength+65535)/65536;try{ae.grow(C),Ne();var k=1;break e}catch{}k=void 0}if(k)return!0}return!1},ja:oi,la:ii,Z:Xe,B:ai,J:si,ga:ui,I:di,a:ae||d.wasmMemory,ka:pi,r:function(n,l,f,b){return pi(n>>>0,l>>>0,f>>>0,b>>>0)}},oe=function(){function n(f,b){return oe=f.exports,oe=dn(),oe=rl(),ge.Qb.push(oe.cb),Rt.unshift(oe.va),Ae=b,xr(),oe}var l={a:tl};if(Vt++,d.instantiateWasm)try{return d.instantiateWasm(l,n)}catch(f){ee(`Module.instantiateWasm callback failed with error: ${f}`),w(f)}return Ar(l,function(f){n(f.instance,f.module)}).catch(w),{}}(),fi=n=>(fi=oe.wa)(n);d.__embind_initialize_bindings=()=>(d.__embind_initialize_bindings=oe.xa)(),d._OrtInit=(n,l)=>(d._OrtInit=oe.ya)(n,l),d._OrtGetLastError=(n,l)=>(d._OrtGetLastError=oe.za)(n,l),d._OrtCreateSessionOptions=(n,l,f,b,C,k,V,F,re,J)=>(d._OrtCreateSessionOptions=oe.Aa)(n,l,f,b,C,k,V,F,re,J),d._OrtAppendExecutionProvider=(n,l)=>(d._OrtAppendExecutionProvider=oe.Ba)(n,l),d._OrtAddFreeDimensionOverride=(n,l,f)=>(d._OrtAddFreeDimensionOverride=oe.Ca)(n,l,f),d._OrtAddSessionConfigEntry=(n,l,f)=>(d._OrtAddSessionConfigEntry=oe.Da)(n,l,f),d._OrtReleaseSessionOptions=n=>(d._OrtReleaseSessionOptions=oe.Ea)(n),d._OrtCreateSession=(n,l,f)=>(d._OrtCreateSession=oe.Fa)(n,l,f),d._OrtReleaseSession=n=>(d._OrtReleaseSession=oe.Ga)(n),d._OrtGetInputOutputCount=(n,l,f)=>(d._OrtGetInputOutputCount=oe.Ha)(n,l,f),d._OrtGetInputName=(n,l)=>(d._OrtGetInputName=oe.Ia)(n,l),d._OrtGetOutputName=(n,l)=>(d._OrtGetOutputName=oe.Ja)(n,l),d._OrtFree=n=>(d._OrtFree=oe.Ka)(n),d._OrtCreateTensor=(n,l,f,b,C,k)=>(d._OrtCreateTensor=oe.La)(n,l,f,b,C,k),d._OrtGetTensorData=(n,l,f,b,C)=>(d._OrtGetTensorData=oe.Ma)(n,l,f,b,C),d._OrtReleaseTensor=n=>(d._OrtReleaseTensor=oe.Na)(n),d._OrtCreateRunOptions=(n,l,f,b)=>(d._OrtCreateRunOptions=oe.Oa)(n,l,f,b),d._OrtAddRunConfigEntry=(n,l,f)=>(d._OrtAddRunConfigEntry=oe.Pa)(n,l,f),d._OrtReleaseRunOptions=n=>(d._OrtReleaseRunOptions=oe.Qa)(n),d._OrtCreateBinding=n=>(d._OrtCreateBinding=oe.Ra)(n),d._OrtBindInput=(n,l,f)=>(d._OrtBindInput=oe.Sa)(n,l,f),d._OrtBindOutput=(n,l,f,b)=>(d._OrtBindOutput=oe.Ta)(n,l,f,b),d._OrtClearBoundOutputs=n=>(d._OrtClearBoundOutputs=oe.Ua)(n),d._OrtReleaseBinding=n=>(d._OrtReleaseBinding=oe.Va)(n),d._OrtRunWithBinding=(n,l,f,b,C)=>(d._OrtRunWithBinding=oe.Wa)(n,l,f,b,C),d._OrtRun=(n,l,f,b,C,k,V,F)=>(d._OrtRun=oe.Xa)(n,l,f,b,C,k,V,F),d._OrtEndProfiling=n=>(d._OrtEndProfiling=oe.Ya)(n),d._JsepOutput=(n,l,f)=>(d._JsepOutput=oe.Za)(n,l,f),d._JsepGetNodeName=n=>(d._JsepGetNodeName=oe._a)(n);var pn=d._pthread_self=()=>(pn=d._pthread_self=oe.$a)(),mn=d._malloc=n=>(mn=d._malloc=oe.ab)(n),At=d._free=n=>(At=d._free=oe.bb)(n);d.__emscripten_tls_init=()=>(d.__emscripten_tls_init=oe.cb)();var hi=d.__emscripten_thread_init=(n,l,f,b,C,k)=>(hi=d.__emscripten_thread_init=oe.eb)(n,l,f,b,C,k);d.__emscripten_thread_crashed=()=>(d.__emscripten_thread_crashed=oe.fb)();var gi=(n,l,f,b,C)=>(gi=oe.gb)(n,l,f,b,C),ro=n=>(ro=oe.hb)(n),no=d.__emscripten_thread_exit=n=>(no=d.__emscripten_thread_exit=oe.ib)(n),yi=()=>(yi=oe.jb)(),bi=(n,l)=>(bi=oe.kb)(n,l),fn=n=>(fn=oe.lb)(n),oo=n=>(oo=oe.mb)(n),io=()=>(io=oe.nb)(),wi=d.dynCall_ii=(n,l)=>(wi=d.dynCall_ii=oe.pb)(n,l),vi=n=>(vi=oe.qb)(n),$i=()=>($i=oe.rb)(),_i=n=>(_i=oe.sb)(n),Si=()=>(Si=oe.tb)();d.___start_em_js=839500,d.___stop_em_js=839661;function rl(){var n=oe;n=Object.assign({},n);var l=b=>C=>b(C)>>>0,f=b=>()=>b()>>>0;return n.wa=l(n.wa),n.$a=f(n.$a),n.ab=l(n.ab),n.emscripten_main_runtime_thread_id=f(n.emscripten_main_runtime_thread_id),n.mb=l(n.mb),n.nb=f(n.nb),n}d.wasmMemory=ae,d.stackSave=()=>io(),d.stackRestore=n=>fn(n),d.stackAlloc=n=>oo(n),d.keepRuntimeAlive=()=>0<bt,d.UTF8ToString=He,d.stringToUTF8=Bt,d.lengthBytesUTF8=gt,d.ExitStatus=st,d.PThread=ge;var hn;jt=function n(){hn||xi(),hn||(jt=n)};function xi(){if(!(0<Vt))if(O)y(d),O||Yt(Rt),startWorker(d);else{if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)mt.unshift(d.preRun.shift());Yt(mt),0<Vt||hn||(hn=!0,d.calledRun=!0,me||(O||Yt(Rt),y(d),O||Yt(qt)))}}return xi(),_}})();typeof Di=="object"&&typeof mo=="object"?mo.exports=Bi:typeof define=="function"&&define.amd&&define([],()=>Bi)});var Mi=Wr((gm,cl)=>{cl.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var go,Gt,tr,bn,Gr,Hi,yo,ye=Y(()=>{"use strict";go=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},Gt=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},tr=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],bn=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},Gr=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},Hi=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool",yo=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e}`)}}});var wn=Y(()=>{"use strict"});var Fi=Y(()=>{"use strict";wn()});var qi,ji=Y(()=>{"use strict";qi="1.18.0"});var Ki,pt,bo=Y(()=>{"use strict";ji();Ki="warning",pt={wasm:{},webgl:{},webgpu:{},versions:{common:qi},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);Ki=e}},get logLevel(){return Ki}};Object.defineProperty(pt,"logLevel",{enumerable:!0})});var vr,Yi=Y(()=>{"use strict";bo();vr=pt});var Zi=Y(()=>{"use strict"});var Xi=Y(()=>{"use strict";vn()});var Ji=Y(()=>{"use strict"});var ea=Y(()=>{"use strict";vn()});var vn=Y(()=>{"use strict";Zi();Xi();Ji();ea()});var $n=Y(()=>{"use strict";vn()});var wo,ta,rr,Ht,vo=Y(()=>{"use strict";bo();wo=(e,t)=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||console.timeStamp(`${e}::ORT::${t}`)},ta=(e,t)=>{let r=new Error().stack?.split(/\\r\\n|\\r|\\n/g)||[],o=!1;for(let i=0;i<r.length;i++){if(o&&!r[i].includes("TRACE_FUNC")){let u=`FUNC_${e}::${r[i].trim().split(" ")[1]}`;t&&(u+=`::${t}`),wo("CPU",u);return}r[i].includes("TRACE_FUNC")&&(o=!0)}},rr=e=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||ta("BEGIN",e)},Ht=e=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||ta("END",e)}});var ra=Y(()=>{"use strict";wn();$n();vo()});var na=Y(()=>{"use strict";ra()});var oa=Y(()=>{"use strict"});var ia=Y(()=>{"use strict"});var aa=Y(()=>{"use strict"});var sa=Y(()=>{"use strict"});var ua=Y(()=>{"use strict";wn();$n()});var da=Y(()=>{"use strict";ua()});var $r=Y(()=>{"use strict";Fi();Yi();na();$n();oa();ia();vo();aa();sa();da()});var _l,Sl,la,ca,pa,xl,Ve,Lt=Y(()=>{"use strict";ye();_l=["V","I","W","E","F"],Sl=(e,t)=>{console.log(`[${_l[e]},${new Date().toISOString()}]${t}`)},pa=(e,t)=>{la=e,ca=t},xl=(e,t)=>{let r=Gr(e),o=Gr(la);r>=o&&Sl(r,typeof t=="function"?t():t)},Ve=(...e)=>{ca&&xl(...e)}});var ma,fa=Y(()=>{"use strict";ye();ma=(e,t)=>new(bn(t))(e)});var _n=Y(()=>{"use strict"});var ha,$o,_o,Cl,Al,ga,xo,So,ba,wa=Y(()=>{"use strict";Lt();_n();ha=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),$o=[],_o=e=>Math.ceil(e/16)*16,Cl=e=>{for(let t=0;t<$o.length;t++){let r=$o[t];if(e<=r)return r}return Math.ceil(e/16)*16},Al=1,ga=()=>Al++,xo=async(e,t,r,o)=>{let i=_o(r),u=e.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let a=e.getCommandEncoder();e.endComputePass(),a.copyBufferToBuffer(t,0,u,0,i),e.flush(),await u.mapAsync(GPUMapMode.READ);let c=u.getMappedRange();if(o){let p=o();return p.set(new Uint8Array(c,0,r)),p}else return new Uint8Array(c.slice(0,r))}finally{u.destroy()}},So=class{constructor(t){this.backend=t;this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[],this.externalBuffers=new Map,this.capturedPendingBuffers=new Map;for(let[r]of ha)$o.push(r),this.freeBuffers.set(r,[]),this.freeUniformBuffers.set(r,[])}upload(t,r){let o=r.buffer,i=r.byteOffset,u=r.byteLength,a=_o(u),c=this.storageCache.get(t);if(!c)throw new Error("gpu data for uploading does not exist");if(c.originalSize!==u)throw new Error(`inconsistent data size. gpu data size=${c.originalSize}, data size=${u}`);let p=this.backend.device.createBuffer({mappedAtCreation:!0,size:a,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),h=p.getMappedRange();new Uint8Array(h).set(new Uint8Array(o,i,u)),p.unmap();let d=this.backend.getCommandEncoder();this.backend.endComputePass(),d.copyBufferToBuffer(p,0,c.gpuData.buffer,0,a),Ve("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${t})`),this.buffersForUploadingPending.push(p)}memcpy(t,r){let o=this.storageCache.get(t);if(!o)throw new Error("source gpu data for memcpy does not exist");let i=this.storageCache.get(r);if(!i)throw new Error("destination gpu data for memcpy does not exist");if(o.originalSize!==i.originalSize)throw new Error("inconsistent source and destination gpu data size");let u=_o(o.originalSize),a=this.backend.getCommandEncoder();this.backend.endComputePass(),a.copyBufferToBuffer(o.gpuData.buffer,0,i.gpuData.buffer,0,u)}registerExternalBuffer(t,r,o){let i;if(o){if(i=this.externalBuffers.get(o),i===void 0)throw new Error("previous buffer is not registered");if(t===o)return Ve("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${r}) => id=${i}, buffer is the same, skip.`),i;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.\n             Please use the previous external buffer!`);this.externalBuffers.delete(o)}else i=ga();return this.storageCache.set(i,{gpuData:{id:i,type:0,buffer:t},originalSize:r}),this.externalBuffers.set(t,i),Ve("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${r}) => id=${i}, registered.`),i}unregisterExternalBuffer(t){let r=this.externalBuffers.get(t);r!==void 0&&(this.storageCache.delete(r),this.externalBuffers.delete(t),Ve("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${r}`))}create(t,r=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let o=Cl(t),i,u=(r&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,a=(r&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(u||a){let h=(u?this.freeBuffers:this.freeUniformBuffers).get(o);h?h.length>0?i=h.pop():i=this.backend.device.createBuffer({size:o,usage:r}):i=this.backend.device.createBuffer({size:o,usage:r})}else i=this.backend.device.createBuffer({size:o,usage:r});let c={id:ga(),type:0,buffer:i};return this.storageCache.set(c.id,{gpuData:c,originalSize:t}),Ve("verbose",()=>`[WebGPU] GpuDataManager.create(size=${t}) => id=${c.id}`),c}get(t){return this.storageCache.get(t)?.gpuData}release(t){let r=this.storageCache.get(t);if(!r)throw new Error("releasing data does not exist");return Ve("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${r.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(r.gpuData.buffer),r.originalSize}async download(t,r){let o=this.storageCache.get(t);if(!o)throw new Error("data does not exist");await xo(this.backend,o.gpuData.buffer,o.originalSize,r)}refreshPendingBuffers(){for(let t of this.buffersForUploadingPending)t.destroy();if(this.buffersForUploadingPending=[],this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let t of this.buffersPending){let r=ha.get(t.size);if((t.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let o=this.freeBuffers.get(t.size)||[];r===void 0||o.length>=r?t.destroy():o.push(t)}else if((t.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let o=this.freeUniformBuffers.get(t.size)||[];r===void 0||o.length>=r?t.destroy():o.push(t)}else t.destroy()}this.buffersPending=[]}else{let t=this.capturedPendingBuffers.get(this.backend.currentSessionId);t||(t=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,t));for(let r of this.buffersPending)t.push(r);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.freeUniformBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.storageCache.forEach(t=>{t.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onReleaseSession(t){let r=this.capturedPendingBuffers.get(t);r&&(r.forEach(o=>{o.destroy()}),this.capturedPendingBuffers.delete(t))}},ba=(...e)=>new So(...e)});var Co,ve,Ze=Y(()=>{"use strict";Co=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},ve=e=>new Co(e)});var Ao,It,M,nr,Sn,xn,Cn,Se=Y(()=>{"use strict";Ao=class{static calcMatMulShape(t,r){return t[1]!==r[0]?void 0:[t[0],r[1]]}},It=class{static calcShape(t,r,o=!1){let i=t.length,u=r.length;if(i===0)return r;if(u===0)return t;let a=Math.max(t.length,r.length),c=new Array(a);if(o){if(i<2||u<2)return;let p=Ao.calcMatMulShape([t[i-2],t[i-1]],[r[u-2],r[u-1]]);if(p===void 0)return;[c[a-2],c[a-1]]=p}for(let p=o?3:1;p<=a;p++){let h=i-p<0?1:t[i-p],d=u-p<0?1:r[u-p];if(h!==d&&h>1&&d>1)return;let y=Math.max(h,d);if(h&&d)c[a-p]=Math.max(h,d);else{if(y>1)return;c[a-p]=0}}return c}static isValidBroadcast(t,r){let o=t.length,i=r.length;if(o>i)return!1;for(let u=1;u<=o;u++)if(t[o-u]!==1&&t[o-u]!==r[i-u])return!1;return!0}},M=class e{static size(t){return e.getSizeFromDimensionRange(t,0,t.length)}static convertShape(t,r=4){let o=t.length;if(o===0)return[];let i=new Array(o),u=o-1;for(;u>=0;){if(t[u]%r===0){i[u]=t[u]/r;break}if(r%t[u]!==0)throw new Error("cannot convert shape");i[u]=1,r/=t[u],u--}for(u--;u>=0;u--)i[u]=t[u];return i}static sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,r,t.length)}static sizeToDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,0,r)}static getSizeFromDimensionRange(t,r,o){let i=1;for(let u=r;u<o;u++){if(t[u]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");i*=t[u]}return i}static computeStrides(t){let r=t.length;if(r===0)return[];if(r===1)return[1];let o=new Array(r);o[r-1]=1,o[r-2]=t[r-1];for(let i=r-3;i>=0;--i)o[i]=o[i+1]*t[i+1];return o}static normalizeAxis(t,r){if(t<-r&&t>=r)throw new Error("unsupported axis for this operation.");return t<0?t+r:t}static normalizeAxes(t,r){return t.map(o=>this.normalizeAxis(o,r??t.length))}static sortBasedOnPerm(t,r){return r?r.map(o=>t[o]):t.slice().reverse()}static padShape(t,r){let o=t.length;return t.map((i,u)=>i+r[u]+r[u+o])}static areEqual(t,r){return t.length!==r.length?!1:t.every((o,i)=>o===r[i])}},nr=class e{static adjustPoolAttributes(t,r,o,i,u,a){if(!t&&o.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let c=0;c<r.length-2;c++)c>=o.length?o.push(r[c+2]):o[c]=r[c+2];for(let c=0;c<o.length;c++)if(c<i.length){if(i[c]<0)throw new Error("strides should be greater than or equal to 1")}else i.push(1);for(let c=0;c<o.length;c++)if(c<u.length){if(u[c]<0)throw new Error("dilations should be greater than or equal to 1")}else u.push(1);for(let c=0;c<o.length*2;c++)if(c<a.length){if(a[c]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(let c=0;c<o.length;c++){if(o[c]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[c]>=o[c]||a[c+o.length]>=o[c])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,r,o,i,u,a,c){if(c){if(u.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let p=0;p<t.length-2;p++)e.adjustPadAndReturnShape(t[p+(a?1:2)],r[p],o[p],i[p],u,p,p+t.length-2,c)}}static computePoolOutputShape(t,r,o,i,u,a,c){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let p=[r[0],r[1]];return e.computeShapeHelper(t,r,p,o,i,u,a,c),p}static computeConvOutputShape(t,r,o,i,u,a,c){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let p=[t[0],r[0]];return e.computeShapeHelper(!1,t,p,o,i,u,a,c),p}static computeShapeHelper(t,r,o,i,u,a,c,p){if(t)for(let h=0;h<r.length-2;h++)o.push(1);else for(let h=0;h<r.length-2;h++)o.push(e.adjustPadAndReturnShape(r[h+2],i[h],u[h],a[h],c,h,h+r.length-2,p))}static adjustPadAndReturnShape(t,r,o,i,u,a,c,p){let h=o*(i-1)+1;if(p&&p!=="NOTSET")switch(p){case"VALID":return u[a]=0,u[c]=0,Math.floor((t-h)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(o!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let y=((t+r-1)/r-1)*r+i-t;return u[a]=Math.floor(p==="SAME_LOWER"?(y+1)/2:y/2),u[c]=y-u[a],Math.floor((t+y-i)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+u[a]+u[c]-h)/r+1)}},Sn=class{static getShapeOfGemmResult(t,r,o,i,u){if(t.length!==2||o.length!==2)throw new Error("shape need to be of size 2");let a,c,p;r?(a=t[1],c=t[0]):(a=t[0],c=t[1]);let h=-1;if(i?(p=o[0],h=1):(p=o[1],h=0),o[h]!==c)throw new Error("dimension mismatch");if(a<=0||p<=0||c<=0)throw new Error("invalid shape specified");if(u&&!It.isValidBroadcast(u,[a,p]))throw new Error("gemm: invalid bias shape for broadcast");return[a,p,c]}},xn=-34028234663852886e22,Cn=34028234663852886e22});var or,To,De,et,Z,Me,$t,ir,_t,fe,Eo,U,j,An,Io,va,_r,_e=Y(()=>{"use strict";ye();Se();or=64,To=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(e){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error(`Unknown data type: ${e}`)}},De=(e,t=1)=>{let r=To(e,t);return typeof r=="string"?r:r[0]},et=(e,t=1)=>{let r=To(e,t);return typeof r=="string"?r:r[1]},Z=(...e)=>{let t=[];return e.forEach(r=>{r.length!==0&&t.push({type:12,data:r},{type:12,data:M.computeStrides(r)})}),t},Me=e=>e%4===0?4:e%2===0?2:1,$t=(e="f32",t,r="0")=>!t||t===1?`${e}(${r})`:`vec${t}<${e}>(${r})`,ir=(e,t,r)=>e==="f32"?r:t===1?`f32(${r})`:`vec${t}<f32>(${r})`,_t=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,fe=(e,t,r,o)=>e.startsWith("uniforms.")&&r>4?typeof t=="string"?o==="f16"?`${e}[(${t}) / 8][(${t}) % 8 / 4][(${t}) % 8 % 4]`:`${e}[(${t}) / 4][(${t}) % 4]`:o==="f16"?`${e}[${Math.floor(t/8)}][${Math.floor(t%8/4)}][${t%8%4}]`:`${e}[${Math.floor(t/4)}][${t%4}]`:r>1?`${e}[${t}]`:e,Eo=(e,t,r,o,i)=>{let u=typeof r=="number",a=u?r:r.length,c=[...new Array(a).keys()],p=a<2?"u32":a<=4?`vec${a}<u32>`:`array<u32, ${a}>`,h=To(t,i),d=typeof h=="string"?h:h[1],y=typeof h=="string"?h:h[0],w={indices:p,value:d,storage:y,tensor:t},_=G=>typeof G=="string"?G:`${G}u`,v={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},S=u?"uniforms.":"",A=`${S}${e}_shape`,I=`${S}${e}_strides`,x="";for(let G=0;G<a-1;G++)x+=`\n    let dim${G} = current / ${fe(I,G,a)};\n    let rest${G} = current % ${fe(I,G,a)};\n    indices[${G}] = dim${G};\n    current = rest${G};\n    `;x+=`indices[${a-1}] = current;`;let E=a<2?"":`\n  fn o2i_${e}(offset: u32) -> ${w.indices} {\n    var indices: ${w.indices};\n    var current = offset;\n    ${x}\n    return indices;\n  }`,P=G=>(v.offsetToIndices=!0,a<2?G:`o2i_${e}(${G})`),O=[];if(a>=2)for(let G=a-1;G>=0;G--)O.push(`${fe(I,G,a)} * (indices[${G}])`);let R=a<2?"":`\n  fn i2o_${e}(indices: ${w.indices}) -> u32 {\n    return ${O.join("+")};\n  }`,L=G=>(v.indicesToOffset=!0,a<2?G:`i2o_${e}(${G})`),N=(...G)=>a===0?"0u":`${w.indices}(${G.map(_).join(",")})`,K=(G,ne)=>a<2?`${G}`:`${fe(G,ne,a)}`,Q=(G,ne,xe)=>a<2?`${G}=${xe};`:`${fe(G,ne,a)}=${xe};`,he={},W=(G,ne)=>{v.broadcastedIndicesToOffset=!0;let xe=`${ne.name}broadcastedIndicesTo${e}Offset`;if(xe in he)return`${xe}(${G})`;let Ke=[];for(let Be=a-1;Be>=0;Be--){let Ge=ne.indicesGet("outputIndices",Be+ne.rank-a);Ke.push(`${K(I,Be)} * (${Ge} % ${K(A,Be)})`)}return he[xe]=`fn ${xe}(outputIndices: ${ne.type.indices}) -> u32 {\n             return ${Ke.length>0?Ke.join("+"):"0u"};\n           }`,`${xe}(${G})`},se=(G,ne)=>(()=>{if(w.storage===w.value)return`${e}[${G}]=${ne};`;if(w.storage==="vec2<u32>"&&w.value==="i32")return`${e}[${G}]=vec2<u32>(u32(${ne}), select(0u, 0xFFFFFFFFu, ${ne} < 0));`;if(w.storage==="vec2<u32>"&&w.value==="u32")return`${e}[${G}]=vec2<u32>(u32(${ne}), 0u);`;if(w.storage==="u32"&&w.value==="vec4<bool>")return`${e}[${G}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${ne}));`;throw new Error(`not supported combination of storage type ${w.storage} and value type ${w.value} yet`)})(),Ce=G=>(()=>{if(w.storage===w.value)return`${e}[${G}]`;if(w.storage==="vec2<u32>"&&w.value==="i32")return`i32(${e}[${G}].x)`;if(w.storage==="vec2<u32>"&&w.value==="u32")return`u32(${e}[${G}].x)`;if(w.storage==="u32"&&w.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${G}] & 0xFFu), bool(${e}[${G}] & 0xFF00u), bool(${e}[${G}] & 0xFF0000u), bool(${e}[${G}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${w.storage} and value type ${w.value} yet`)})(),We=a<2?"":`\n  fn get_${e}ByIndices(indices: ${w.indices}) -> ${d} {\n    return ${Ce(`i2o_${e}(indices)`)};\n  }`,ee=a<2?"":(()=>{let G=c.map(xe=>`d${xe}: u32`).join(", "),ne=c.map(xe=>`d${xe}`).join(", ");return`\n  fn get_${e}(${G}) -> ${d} {\n    return get_${e}ByIndices(${N(ne)});\n  }`})(),ae=(...G)=>{if(G.length!==a)throw new Error(`indices length must be ${a}`);let ne=G.map(_).join(",");return a===0?Ce("0u"):a===1?Ce(ne[0]):(v.get=!0,v.getByIndices=!0,v.indicesToOffset=!0,`get_${e}(${ne})`)},Ae=G=>a<2?Ce(G):(v.getByIndices=!0,v.indicesToOffset=!0,`get_${e}ByIndices(${G})`),me=a<2?"":`\n  fn set_${e}ByIndices(indices: ${w.indices}, value: ${d}) {\n    ${se(`i2o_${e}(indices)`,"value")}\n  }`,ie=a<2?"":(()=>{let G=c.map(xe=>`d${xe}: u32`).join(", "),ne=c.map(xe=>`d${xe}`).join(", ");return`\n  fn set_${e}(${G}, value: ${d}) {\n    set_${e}ByIndices(${N(ne)}, value);\n  }`})();return{impl:()=>{let G=[],ne=!1;return v.offsetToIndices&&(G.push(E),ne=!0),v.indicesToOffset&&(G.push(R),ne=!0),v.broadcastedIndicesToOffset&&(Object.values(he).forEach(xe=>G.push(xe)),ne=!0),v.set&&(G.push(ie),ne=!0),v.setByIndices&&(G.push(me),ne=!0),v.get&&(G.push(ee),ne=!0),v.getByIndices&&(G.push(We),ne=!0),!u&&ne&&G.unshift(`const ${A} = ${w.indices}(${r.join(",")});`,`const ${I} = ${w.indices}(${M.computeStrides(r).join(",")});`),G.join(`\n`)},type:w,offsetToIndices:P,indicesToOffset:L,broadcastedIndicesToOffset:W,indices:N,indicesGet:K,indicesSet:Q,set:(...G)=>{if(G.length!==a+1)throw new Error(`indices length must be ${a}`);let ne=G[a];if(typeof ne!="string")throw new Error("value must be string");let xe=G.slice(0,a).map(_).join(",");return a===0?se("0u",ne):a===1?se(xe[0],ne):(v.set=!0,v.setByIndices=!0,v.indicesToOffset=!0,`set_${e}(${xe}, ${ne})`)},setByOffset:se,setByIndices:(G,ne)=>a<2?se(G,ne):(v.setByIndices=!0,v.indicesToOffset=!0,`set_${e}ByIndices(${G}, ${ne});`),get:ae,getByOffset:Ce,getByIndices:Ae,usage:o,name:e,strides:I,shape:A,rank:a}},U=(e,t,r,o=1)=>Eo(e,t,r,"input",o),j=(e,t,r,o=1)=>Eo(e,t,r,"output",o),An=(e,t,r,o=1)=>Eo(e,t,r,"internal",o),Io=class{constructor(t,r){this.normalizedDispatchGroup=t;this.limits=r;this.internalVariables=[];this.variables=[];this.uniforms=[];this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(t){return`if (global_idx >= ${typeof t=="number"?`${t}u`:t}) { return; }`}mainStart(t=or){let r=typeof t=="number"?t:t[0],o=typeof t=="number"?1:t[1],i=typeof t=="number"?1:t[2];if(r>this.limits.maxComputeWorkgroupSizeX||o>this.limits.maxComputeWorkgroupSizeY||i>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${r}, ${o}, ${i}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(r*o*i>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${r}, ${o}, ${i}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let u=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,a=u?`@builtin(global_invocation_id) global_id : vec3<u32>,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,\n                                             @builtin(local_invocation_id) local_id : vec3<u32>,\n    @builtin(local_invocation_index) local_idx : u32,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(num_workgroups) num_workgroups : vec3<u32>`,c=u?"let global_idx = global_id.x; let local_idx = local_id.x;":`let global_idx = (workgroup_id.z * num_workgroups[0] * num_workgroups[1] +\n          workgroup_id.y * num_workgroups[0] + workgroup_id.x) * ${r*o*i}u + local_idx;`;return`@compute @workgroup_size(${r}, ${o}, ${i})\n  fn main(${a}) {\n    ${c}\n  `}appendVariableUniforms(t){t.rank!==0&&(t.shape.startsWith("uniforms.")&&this.uniforms.push({name:t.shape.replace("uniforms.",""),type:"u32",length:t.rank}),t.strides.startsWith("uniforms.")&&this.uniforms.push({name:t.strides.replace("uniforms.",""),type:"u32",length:t.rank}))}declareVariable(t,r){if(t.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(t),this.appendVariableUniforms(t);let o=t.usage==="input"?"read":"read_write",i=t.type.storage;return`@group(0) @binding(${r}) var<storage, ${o}> ${t.name}: array<${i}>;`}declareVariables(...t){return t.map(r=>this.declareVariable(r,this.variableIndex++)).join(`\n`)}registerInternalVariable(t){if(t.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(t),this.appendVariableUniforms(t)}registerInternalVariables(...t){return t.forEach(r=>this.registerInternalVariable(r)),this}registerUniform(t,r,o=1){return this.uniforms.push({name:t,type:r,length:o}),this}registerUniforms(t){return this.uniforms=this.uniforms.concat(t),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let t=[];for(let{name:r,type:o,length:i}of this.uniforms)if(i&&i>4)o==="f16"?t.push(`@align(16) ${r}:array<mat2x4<${o}>, ${Math.ceil(i/8)}>`):t.push(`${r}:array<vec4<${o}>, ${Math.ceil(i/4)}>`);else{let u=i==null||i===1?o:`vec${i}<${o}>`;t.push(`${r}:${u}`)}return`\n      struct Uniforms { ${t.join(", ")} };\n      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(t=>t.impl()).join(`\n`)+this.internalVariables.map(t=>t.impl()).join(`\n`)}get variablesInfo(){if(this.uniforms.length===0)return;let t=r=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(r)];return this.uniforms.map(r=>[t(r.type),r.length??1])}},va=(e,t)=>new Io(e,t),_r=(e,t)=>{let r=e.length,o=[];for(let i=0;i<r;i++){let u=r-1-i,a=e[u]||1;(t[t.length-1-i]||1)>1&&a===1&&o.unshift(u)}return o}});var Il,$a,Tl,El,yt,_a,Sa,Sr=Y(()=>{"use strict";ye();Se();Ze();_e();Il=e=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.")},$a=(e,t)=>t&&t.length!==e?[...new Array(e).keys()].reverse():t,Tl=(e,t)=>M.sortBasedOnPerm(e,$a(e.length,t)),El=(e,t,r,o)=>{let i=[];i.push(`fn perm(i: ${o.type.indices}) -> ${r.type.indices} {\n    var a: ${r.type.indices};`);for(let u=0;u<t;++u)i.push(r.indicesSet("a",e[u],`i[${u}]`));return i.push("return a;}"),i.join(`\n`)},yt=(e,t)=>{let r=e.dataType,o=e.dims.length,i=$a(o,t),u=Tl(e.dims,i),a=j("output",r,u.length),c=U("a",r,o),p=h=>`\n  ${h.registerUniform("output_size","u32").declareVariables(c,a)}\n\n  ${El(i,o,c,a)}\n\n  ${h.mainStart()}\n    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let indices = ${a.offsetToIndices("global_idx")};\n    let aIndices = perm(indices);\n\n    ${a.setByOffset("global_idx",c.getByIndices("aIndices"))}\n  }`;return{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:["rank"]},getRunData:h=>{let d=M.size(u);return{outputs:[{dims:u,dataType:h[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:[{type:12,data:d},...Z(h[0].dims,u)]}},getShaderSource:p}},_a=(e,t)=>{Il(e.inputs),e.compute(yt(e.inputs[0],t.perm))},Sa=e=>ve({perm:e.perm})});var Pl,kl,Ol,Rl,Bl,Dl,zl,Ml,Ul,Vl,Tt,xa,Ca,Aa,Ia,Ta,Ea,Pa,ka,Oa,Ra,Ba=Y(()=>{"use strict";ye();Se();_e();In();Sr();Pl={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},kl={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},Ol={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},Rl={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Bl=(e,t)=>{let r=[];for(let o=t-e;o<t;++o)r.push(o);return r},Dl=(e,t)=>{let r=[],o=e.length;for(let u=0;u<o;u++)t.indexOf(u)===-1&&r.push(e[u]);let i=t.map(u=>e[u]);return[r,i]},zl=(e,t)=>{let r=e.length+t.length,o=[],i=0;for(let u=0;u<r;u++)t.indexOf(u)===-1?o.push(e[i++]):o.push(1);return o},Ml=(e,t)=>{for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0},Ul=(e,t)=>{let r=[];if(!Ml(e,t)){for(let o=0;o<t;++o)e.indexOf(o)===-1&&r.push(o);e.forEach(o=>r.push(o))}return r},Vl=(e,t,r,o,i,u,a)=>{let c=r[0].dims,p=M.size(u),h=M.size(a),d=U("_A",r[0].dataType,c),y=j("output",i,u),w=32,_=`\n          var<workgroup> aBestValues : array<f32, ${w}>;\n       `;return{name:e,shaderCache:t,getShaderSource:S=>`\n        ${S.registerUniform("reduceSize","u32").declareVariables(d,y)}\n        ${_}\n        fn DIV_CEIL(a : u32, b : u32) -> u32 {\n          return ((a - 1u) / b + 1u);\n         }\n         ${S.mainStart(w)}\n\n          let outputIndex = global_idx / ${w};\n          let offset = outputIndex * uniforms.reduceSize;\n\n          var bestValue = f32(${Ol[o]});\n          let Length = uniforms.reduceSize;\n          for (var k = local_idx; k < Length; k = k + ${w}) {\n           let candidate = f32(${d.getByOffset("offset + k")});\n           bestValue = ${Pl[o]};\n          }\n          aBestValues[local_idx] = bestValue;\n          workgroupBarrier();\n\n         var reduceSize = min(Length, ${w}u);\n         for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n             currentSize = reduceSize / 2u) {\n           let interval = DIV_CEIL(reduceSize, 2u);\n           if (local_idx < currentSize) {\n            let candidate = aBestValues[local_idx + interval];\n            bestValue = ${kl[o]};\n            aBestValues[local_idx] = bestValue;\n           }\n           reduceSize = interval;\n           workgroupBarrier();\n         }\n\n         if (local_idx == 0u) {\n          ${y.setByOffset("outputIndex",`${o==="mean"?`${y.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${y.type.storage}(${Rl[o]})`}`)};\n         }\n        }`,getRunData:()=>({outputs:[{dims:u,dataType:i}],dispatchGroup:{x:p},programUniforms:[{type:12,data:h}]})}},Tt=(e,t,r,o)=>{let i=e.inputs.length===1?r:Po(e.inputs,r),u=i.axes;u.length===0&&!i.noopWithEmptyAxes&&(u=e.inputs[0].dims.map((_,v)=>v));let a=M.normalizeAxes(u,e.inputs[0].dims.length),c=a,p=e.inputs[0],h=Ul(c,e.inputs[0].dims.length);h.length>0&&(p=e.compute(yt(e.inputs[0],h),{inputs:[0],outputs:[-1]})[0],c=Bl(c.length,p.dims.length));let[d,y]=Dl(p.dims,c),w=d;i.keepDims&&(w=zl(d,a)),e.compute(Vl(t,{hint:i.cacheKey,inputDependencies:["type"]},[p],o,e.inputs[0].dataType,w,y),{inputs:[p]})},xa=(e,t)=>{Tt(e,"ReduceMeanShared",t,"mean")},Ca=(e,t)=>{Tt(e,"ReduceL1Shared",t,"l1")},Aa=(e,t)=>{Tt(e,"ReduceL2Shared",t,"l2")},Ia=(e,t)=>{Tt(e,"ReduceLogSumExpShared",t,"logSumExp")},Ta=(e,t)=>{Tt(e,"ReduceMaxShared",t,"max")},Ea=(e,t)=>{Tt(e,"ReduceMinShared",t,"min")},Pa=(e,t)=>{Tt(e,"ReduceProdShared",t,"prod")},ka=(e,t)=>{Tt(e,"ReduceSumShared",t,"sum")},Oa=(e,t)=>{Tt(e,"ReduceSumSquareShared",t,"sumSquare")},Ra=(e,t)=>{Tt(e,"ReduceLogSumShared",t,"logSum")}});var Et,Wl,Tn,Po,Pt,Nl,Gl,Hl,Ll,Fl,ql,jl,Kl,Yl,Zl,kt,Da,za,Ma,Ua,Va,Wa,Na,Ga,Ha,La,In=Y(()=>{"use strict";ye();Se();Ze();_e();Ba();Et=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Wl=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],Tn=(e,t,r,o,i,u,a=!1,c=!1)=>{let p=[],h=r[0].dims,d=h.length,y=M.normalizeAxes(i,d),w=!c&&y.length===0;h.forEach((A,I)=>{w||y.indexOf(I)>=0?a&&p.push(1):p.push(A)});let _=p.length,v=M.size(p);return{name:e,shaderCache:t,getShaderSource:A=>{let I=[],x=U("_A",r[0].dataType,d),E=j("output",u,_),P=o(x,E,y),O=P[2];for(let R=0,L=0;R<d;R++)w||y.indexOf(R)>=0?(a&&L++,O=`for(var j${R}: u32 = 0; j${R} < ${h[R]}; j${R}++) {\n                  ${P[2].includes("last_index")?`let last_index = j${R};`:""}\n                  ${x.indicesSet("input_indices",R,`j${R}`)}\n                  ${O}\n                }`):(I.push(`${x.indicesSet("input_indices",R,E.indicesGet("output_indices",L))};`),L++);return`\n\n        ${A.registerUniform("output_size","u32").declareVariables(x,E)}\n\n        ${A.mainStart()}\n          ${A.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n          var input_indices: ${x.type.indices};\n          let output_indices = ${E.offsetToIndices("global_idx")};\n\n          ${I.join(`\n`)}\n          ${P[0]}       // init ops for reduce max/min\n          ${P[1]}\n          ${O}\n          ${P[3]}\n          ${P.length===4?E.setByOffset("global_idx","value"):P.slice(4).join(`\n`)}\n        }`},getRunData:()=>({outputs:[{dims:p,dataType:u}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:[{type:12,data:v},...Z(h,p)]})}},Po=(e,t)=>{let r=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(o=>r.push(Number(o))),ve({axes:r,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},Pt=(e,t,r,o)=>{let i=e.inputs,u=i.length===1?r:Po(i,r);e.compute(Tn(t,{hint:u.cacheKey,inputDependencies:["rank"]},[i[0]],u.noopWithEmptyAxes&&u.axes.length===0?Wl:o,u.axes,i[0].dataType,u.keepDims,u.noopWithEmptyAxes),{inputs:[0]})},Nl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceLogSum",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${o.getByIndices("input_indices")};`,"value = log(value);"])},Gl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceL1",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += abs(${o.getByIndices("input_indices")});`,""])},Hl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceL2",t,(o,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${o.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},Ll=(e,t)=>{Et(e.inputs),Pt(e,"ReduceLogSumExp",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += exp(${o.getByIndices("input_indices")});`,"value = log(value);"])},Fl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMax",t,(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(o.indicesSet("input_indices",c,0));return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};`,`value = max(value, ${o.getByIndices("input_indices")});`,""]})},ql=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMean",t,(o,i,u)=>{let a=1;for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&(a*=e.inputs[0].dims[c]);return["var sum = f32(0);","",`sum += f32(${o.getByIndices("input_indices")});`,`let value = ${i.type.value}(sum / ${a});`]})},jl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMin",t,(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};`,`value = min(value, ${o.getByIndices("input_indices")});`,""]})},Kl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceProd",t,(o,i)=>[`var value = ${i.type.storage}(1);`,"",`value *= ${o.getByIndices("input_indices")};`,""])},Yl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceSum",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${o.getByIndices("input_indices")};`,""])},Zl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceSumSquare",t,(o,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${o.getByIndices("input_indices")}; value += t * t;`,""])},kt=(e,t,r)=>{if(t.length===0)return r;let o=1,i=1;for(let u=0;u<t.length;u++)t.indexOf(u)===-1?o*=e[u]:i*=e[u];return i<32&&o>1024},Da=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?ql(e,t):xa(e,t)},za=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Gl(e,t):Ca(e,t)},Ma=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Hl(e,t):Aa(e,t)},Ua=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Ll(e,t):Ia(e,t)},Va=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Fl(e,t):Ta(e,t)},Wa=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?jl(e,t):Ea(e,t)},Na=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Kl(e,t):Pa(e,t)},Ga=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Yl(e,t):ka(e,t)},Ha=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Zl(e,t):Oa(e,t)},La=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Nl(e,t):Ra(e,t)}});var Fa,qa,ja,ko,Ka=Y(()=>{"use strict";ye();Ze();In();Fa=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},qa=(e,t)=>{Fa(e.inputs);let r=(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};\nvar best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {\n         value = ${o.getByIndices("input_indices")};\n         best_index = i32(last_index);\n       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Tn("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},ja=(e,t)=>{Fa(e.inputs);let r=(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};\nvar best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {\n         value = ${o.getByIndices("input_indices")};\n         best_index = i32(last_index);\n       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Tn("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},ko=e=>ve(e)});var Xl,Ql,Jl,En,Ya,Za,Oo=Y(()=>{"use strict";ye();Se();Ze();_e();Xl=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");let r=0,o=e[r],i=o.dataType,u=o.dims.length;e.forEach((a,c)=>{if(c!==r){if(a.dataType!==i)throw new Error("input tensors should be one type");if(a.dims.length!==u)throw new Error("input tensors should have the same shape");a.dims.forEach((p,h)=>{if(h!==t&&p!==o.dims[h])throw new Error("non concat dimensions must match")})}})},Ql=(e,t)=>`\n  fn calculateInputIndex(index: u32) -> u32 {\n    let sizeInConcatAxis = array<u32, ${e}u>(${t});\n    for (var i: u32 = 0u; i < ${e}; i += 1u ) {\n      if (index < sizeInConcatAxis[i]) {\n        return i;\n      }\n    }\n    return ${e}u;\n  }`,Jl=(e,t)=>{let r=e.length,o=[];for(let i=0;i<r;++i){let u=t.setByOffset("global_idx",e[i].getByIndices("indices"));r===1?o.push(u):i===0?o.push(`if (inputIndex == ${i}u) { ${u} }`):i===r-1?o.push(`else { ${u} }`):o.push(`else if (inputIndex == ${i}) { ${u} }`)}return o.join(`\n`)},En=(e,t,r,o)=>{let i=M.size(r),u=new Array(e.length),a=new Array(e.length),c=0,p=[],h=[],d=[{type:12,data:i}];for(let S=0;S<e.length;++S)c+=e[S].dims[t],u[S]=c,h.push(e[S].dims.length),a[S]=U(`input${S}`,o,h[S]),p.push("rank"),d.push({type:12,data:u[S]});for(let S=0;S<e.length;++S)d.push(...Z(e[S].dims));d.push(...Z(r));let y=j("output",o,r.length),w=y.indicesGet("indices",t),_=Array.from(Array(u.length).keys()).map(S=>`uniforms.sizeInConcatAxis${S}`).join(","),v=S=>`\n\n  ${(()=>{S.registerUniform("outputSize","u32");for(let A=0;A<e.length;A++)S.registerUniform(`sizeInConcatAxis${A}`,"u32");return S.declareVariables(...a,y)})()}\n\n  ${Ql(u.length,_)}\n\n  ${S.mainStart()}\n    ${S.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n    var indices = ${y.offsetToIndices("global_idx")};\n\n    let inputIndex = calculateInputIndex(${w});\n    if (inputIndex != 0u) {\n      let sizeInConcatAxis = array<u32, ${u.length}u>(${_});\n      ${w} -= sizeInConcatAxis[inputIndex - 1u];\n    }\n\n    ${Jl(a,y)}\n  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:p},getRunData:()=>({outputs:[{dims:r,dataType:o}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:d}),getShaderSource:v}},Ya=(e,t)=>{let r=e.inputs,o=r[0].dims,i=M.normalizeAxis(t.axis,o.length);Xl(r,i);let u=o.slice();u[i]=r.reduce((c,p)=>c+(p.dims.length>i?p.dims[i]:0),0);let a=r.filter(c=>M.size(c.dims)>0);e.compute(En(a,i,u,r[0].dataType),{inputs:a})},Za=e=>ve({axis:e.axis})});var ec,tc,rc,nc,Pn,oc,Xa,Ro=Y(()=>{"use strict";ye();_n();_e();Oo();ec=(e,t)=>{let r=e[0],o=e[1],i=e[2],u=e[3],a=e[4],c=e[5];if(a&&c)throw new Error("Attention cannot have both past and relative_position_bias");if(r.dims.length!==3)throw new Error(\'Input "input" must have 3 dimensions\');let p=r.dims[0],h=r.dims[1],d=r.dims[2];if(i.dims.length!==1)throw new Error(\'Input "bias" is expected to have 1 dimensions\');if(o.dims.length!==2)throw new Error(\'Input "weights" is expected to have 2 dimensions\');if(o.dims[0]!==d)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(i.dims[0]!==o.dims[1])throw new Error(\'Input "bias" dimension 0 should have same length as dimension 1 of input "weights"\');let y=i.dims[0]/3,w=y,_=w;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let E of t.qkvHiddenSizes)if(E%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");y=t.qkvHiddenSizes[0],w=t.qkvHiddenSizes[1],_=t.qkvHiddenSizes[2]}let v=h;if(y!==w)throw new Error("qkv_hidden_sizes first element should be same as the second");if(i.dims[0]!==y+w+_)throw new Error(\'Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes\');let S=0;if(a){if(w!==_)throw new Error(\'Input "past" expect k_hidden_size == v_hidden_size\');if(a.dims.length!==5)throw new Error(\'Input "past" must have 5 dimensions\');if(a.dims[0]!==2)throw new Error(\'Input "past" first dimension must be 2\');if(a.dims[1]!==p)throw new Error(\'Input "past" second dimension must be batch_size\');if(a.dims[2]!==t.numHeads)throw new Error(\'Input "past" third dimension must be num_heads\');if(a.dims[4]!==w/t.numHeads)throw new Error(\'Input "past" fifth dimension must be k_hidden_size / num_heads\');t.pastPresentShareBuffer||(S=a.dims[3])}let A=v+S,I=-1,x=0;if(u)throw new Error("Mask not supported");if(a)throw new Error("past is not supported");return{batchSize:p,sequenceLength:h,pastSequenceLength:S,kvSequenceLength:v,totalSequenceLength:A,maxSequenceLength:I,inputHiddenSize:d,hiddenSize:y,vHiddenSize:_,headSize:Math.floor(y/t.numHeads),vHeadSize:Math.floor(_/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:x,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},tc=(e,t,r,o)=>{let i=Me(o),u=64,a=o/i;a<u?u=1:a/8<64&&(u=Math.ceil(a/8));let c=Math.ceil(o/i/u),p=[{type:t.dataType,data:1/o},{type:12,data:a},{type:12,data:c}],h=De(t.dataType,i),d=et(1,i),y=w=>{let _=j("x",t.dataType,t.dims,i),S=[{name:"d_inv",type:et(t.dataType)},{name:"d_comp",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`\n  var<workgroup> thread_max: array<f32, ${u}>;\n  var<workgroup> thread_sum: array<f32, ${u}>;\n  ${w.registerUniforms(S).declareVariables(_)}\n  ${w.mainStart([u,1,1])}\n    let local_offset = local_idx * uniforms.elements_per_thread;\n    let offset = workgroup_id.x * uniforms.d_comp + local_offset;\n\n    var thread_max_vector = ${d}(-3.402823e+38f);\n    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n      thread_max_vector = max(${d}(x[offset + i]), thread_max_vector);\n    }\n    thread_max[local_idx] = ${(()=>{switch(i){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${i}`)}})()};\n    workgroupBarrier();\n\n    var max_value =  f32(-3.402823e+38f);\n    for (var i = 0u; i < ${u}; i++) {\n      max_value = max(thread_max[i], max_value);\n    }\n\n    var sum_vector = ${d}(0);\n    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n      sum_vector += exp(${d}(x[offset + i]) - max_value);\n    }\n    thread_sum[local_idx] = ${(()=>{switch(i){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${i}`)}})()};\n    workgroupBarrier();\n\n    var sum: f32 = 0;\n    for (var i = 0u; i < ${u}; i++) {\n      sum += thread_sum[i];\n    }\n\n    if (sum == 0) {\n      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n        x[offset + i] = ${_.type.value}(uniforms.d_inv);\n      }\n    } else {\n      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n        var f32input = ${d}(x[offset + i]);\n        x[offset + i] = ${_.type.value}(exp(f32input - max_value) / sum);\n      }\n    }\n  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${u};${h};${i}`},getShaderSource:y,getRunData:()=>({outputs:[],dispatchGroup:{x:r},programUniforms:p})}},rc=(e,t,r,o,i,u,a)=>{let c=a+i.kvSequenceLength,p=[i.batchSize,i.numHeads,i.sequenceLength,c],h=u.scale===0?1/Math.sqrt(i.headSize):u.scale,d=Me(i.headSize),y=i.headSize/d,w=12,_={x:Math.ceil(c/w),y:Math.ceil(i.sequenceLength/w),z:i.batchSize*i.numHeads},v=[{type:12,data:i.sequenceLength},{type:12,data:y},{type:12,data:c},{type:12,data:i.numHeads},{type:1,data:h}],S=o?["type","type","type"]:["type","type"],A=I=>{let x=U("q",t.dataType,t.dims,d),E=U("key",r.dataType,r.dims,d),P=[x,E];o&&P.push(U("relative_position_bias",o.dataType,o.dims));let O=j("output",t.dataType,p),R=et(1,d),L=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"alpha",type:"f32"}];return`\n  const TILE_SIZE = ${w}u;\n\n  var<workgroup> tileQ: array<${x.type.storage}, ${w*w}>;\n  var<workgroup> tileK: array<${x.type.storage}, ${w*w}>;\n  ${I.registerUniforms(L).declareVariables(...P,O)}\n  ${I.mainStart([w,w,1])}\n    // x holds the N and y holds the M\n    let headIdx = workgroup_id.z;\n    let m = workgroup_id.y * TILE_SIZE;\n    let n = workgroup_id.x * TILE_SIZE;\n    let qOffset = uniforms.M * uniforms.K * headIdx + m * uniforms.K;\n    let kOffset = uniforms.N * uniforms.K * headIdx + n * uniforms.K;\n\n    var value = ${R}(0);\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {\n        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {\n        tileK[TILE_SIZE * local_id.y + local_id.x] = key[kOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      workgroupBarrier();\n\n      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {\n        value += ${R}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = headIdx * uniforms.M * uniforms.N;\n    if (global_id.y < uniforms.M && global_id.x < uniforms.N) {\n      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;\n      var sum: f32 = ${(()=>{switch(d){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${d}`)}})()};\n        output[outputIdx] = ${O.type.value} (sum * uniforms.alpha) + ${o?"relative_position_bias[outputIdx]":"0.0"};\n    }\n  }`};return{name:"AttentionProbs",shaderCache:{hint:`${d}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:p,dataType:t.dataType,gpuDataType:0}],dispatchGroup:_,programUniforms:v}),getShaderSource:A}},nc=(e,t,r,o,i)=>{let u=i+o.kvSequenceLength,a=[o.batchSize,o.sequenceLength,o.vHiddenSize],c=12,p={x:Math.ceil(o.vHeadSize/c),y:Math.ceil(o.sequenceLength/c),z:o.batchSize*o.numHeads},h=[{type:12,data:o.sequenceLength},{type:12,data:u},{type:12,data:o.vHeadSize},{type:12,data:o.numHeads},{type:12,data:o.vHiddenSize}];return{name:"AttentionScore",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:a,dataType:t.dataType,gpuDataType:0}],dispatchGroup:p,programUniforms:h}),getShaderSource:w=>{let _=U("probs",t.dataType,t.dims),v=U("v",r.dataType,r.dims),S=j("output",t.dataType,a),A=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"v_hidden_size",type:"u32"}];return`\n  const TILE_SIZE = ${c}u;\n  var<workgroup> tileQ: array<${_.type.value}, ${c*c}>;\n  var<workgroup> tileK: array<${_.type.value}, ${c*c}>;\n  ${w.registerUniforms(A).declareVariables(_,v,S)}\n  ${w.mainStart([c,c,1])}\n   let headIdx = workgroup_id.z;\n   let m = global_id.y;\n   let n = global_id.x;\n\n   let offsetA = headIdx * (uniforms.M * uniforms.K) + m * uniforms.K;\n   let offsetB = headIdx * (uniforms.N * uniforms.K) + n;\n\n   var value = ${_.type.storage}(0);\n   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n     if (m < uniforms.M && w + local_id.x < uniforms.K) {\n       tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];\n     }\n     if (n < uniforms.N && w + local_id.y < uniforms.K) {\n       tileK[TILE_SIZE * local_id.y + local_id.x] = v[offsetB + (w + local_id.y) * uniforms.N];\n     }\n     workgroupBarrier();\n     for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {\n       value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * k + local_id.x];\n     }\n     workgroupBarrier();\n   }\n\n   // we need to transpose output from BNSH_v to BSND_v\n   let batchIdx = workgroup_id.z / uniforms.num_heads;\n   let currentBatchHeadNumber = workgroup_id.z % uniforms.num_heads;\n   if (m < uniforms.M && n < uniforms.N) {\n     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size\n       + currentBatchHeadNumber * uniforms.N + n;\n     output[outputIdx] = value;\n   }\n  }`}}},Pn=(e,t,r,o,i,u,a,c,p,h,d)=>{let y=e.outputCount>1,w=e.outputCount>2,_=y&&w?h.pastSequenceLength:0,v=_+h.kvSequenceLength,S=[h.batchSize,h.numHeads,v,h.headSize],A=a?[a,r]:[r],I=y?e.compute(En(A,2,S,r.dataType),{inputs:A,outputs:[1]})[0]:r,x=[h.batchSize,h.numHeads,v,h.headSize],E=c?[c,o]:[o],P=w?e.compute(En(E,2,x,o.dataType),{inputs:E,outputs:[2]})[0]:o,O=[t,I];p&&O.push(p);let R=e.compute(rc(e,t,I,p,h,d,_),{inputs:O,outputs:[-1]})[0];e.compute(tc(e,R,h.batchSize*h.numHeads*h.sequenceLength,v),{inputs:[R],outputs:[]});let L=[R,P];e.compute(nc(e,R,P,h,_),{inputs:L,outputs:[0]})},oc=(e,t)=>{let r=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],o=t.sequenceLength,i=t.inputHiddenSize,u=t.headSize,a=12,c={x:Math.ceil(t.headSize/a),y:Math.ceil(t.sequenceLength/a),z:t.batchSize*t.numHeads},p=[e.inputs[0],e.inputs[1],e.inputs[2]],h=[{type:12,data:o},{type:12,data:i},{type:12,data:u},{type:12,data:t.numHeads},{type:12,data:t.headSize},{type:12,data:t.hiddenSize},{type:12,data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],d=y=>{let w=j("output_q",p[0].dataType,r),_=j("output_k",p[0].dataType,r),v=j("output_v",p[0].dataType,r),S=U("input",p[0].dataType,p[0].dims),A=U("weight",p[1].dataType,p[1].dims),I=U("bias",p[2].dataType,p[2].dims),x=S.type.storage,E=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`\n  const TILE_SIZE = ${a}u;\n  var<workgroup> tileInput: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightQ: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightK: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightV: array<${x}, ${a*a}>;\n  ${y.registerUniforms(E).declareVariables(S,A,I,w,_,v)}\n  ${y.mainStart([a,a,1])}\n    let batchIndex = workgroup_id.z / uniforms.num_heads;\n    let headNumber = workgroup_id.z % uniforms.num_heads;\n    let m = global_id.y;\n    let n = global_id.x;\n\n    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;\n    let biasOffsetQ = headNumber * uniforms.head_size;\n    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;\n    let biasOffsetV = uniforms.hidden_size + biasOffsetK;\n\n    var valueQ = ${x}(0);\n    var valueK = ${x}(0);\n    var valueV = ${x}(0);\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (m < uniforms.M && w + local_id.x < uniforms.K) {\n        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];\n      }\n      if (n < uniforms.N && w + local_id.y < uniforms.K) {\n        let offset = n + (w + local_id.y) * uniforms.ldb;\n        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];\n        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];\n        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];\n      }\n      workgroupBarrier();\n      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {\n        let inputTileOffset = TILE_SIZE * local_id.y + k;\n        let weightTileOffset = TILE_SIZE * k + local_id.x;\n        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];\n        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];\n        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = (m * uniforms.N + n) % uniforms.head_size;\n    valueQ += bias[headOffset + biasOffsetQ];\n    valueK += bias[headOffset + biasOffsetK];\n    valueV += bias[headOffset + biasOffsetV];\n\n    let offset = workgroup_id.z * uniforms.M * uniforms.N;\n    if (m < uniforms.M && n < uniforms.N) {\n      let outputIdx = offset + m * uniforms.N + n;\n      output_q[outputIdx] = valueQ;\n      output_k[outputIdx] = valueK;\n      output_v[outputIdx] = valueV;\n    }\n  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:c,programUniforms:h}),getShaderSource:d},{inputs:p,outputs:[-1,-1,-1]})},Xa=(e,t)=>{let r=ec(e.inputs,t),[o,i,u]=oc(e,r);return Pn(e,o,i,u,e.inputs[4],void 0,void 0,void 0,e.inputs[5],r,t)}});var ic,ac,sc,Qa,Ja=Y(()=>{"use strict";$r();ye();Se();Ze();_e();ic=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let r=(o,i,u)=>{let a=i.length;if(a!==o.length)throw new Error(`${u}: num dimensions != ${a}`);i.forEach((c,p)=>{if(c!==o[p])throw new Error(`${u}: dim[${p}] do not match`)})};if(e[0].dims.length>1){let o=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);r(e[1].dims,o,"Invalid input scale"),r(e[2].dims,o,"Invalid input B"),r(e[3].dims,o,"Invalid input mean"),r(e[4].dims,o,"Invalid input var")}else r(e[1].dims,[1],"Invalid input scale"),r(e[2].dims,[1],"Invalid input B"),r(e[3].dims,[1],"Invalid input mean"),r(e[4].dims,[1],"Invalid input var")},ac=(e,t)=>{let{epsilon:r,spatial:o,format:i}=t,u=e[0].dims,a=o?Me(u[u.length-1]):1,c=i==="NHWC"&&u.length>1?a:1,p=M.size(u)/a,h=o,d=h?u.length:u,y=U("x",e[0].dataType,e[0].dims,a),w=U("scale",e[1].dataType,e[1].dims,c),_=U("bias",e[2].dataType,e[2].dims,c),v=U("inputMean",e[3].dataType,e[3].dims,c),S=U("inputVar",e[4].dataType,e[4].dims,c),A=j("y",e[0].dataType,d,a),I=()=>{let E="";if(o)E=`let cOffset = ${u.length===1?"0u":i==="NHWC"?`outputIndices[${u.length-1}] / ${a}`:"outputIndices[1]"};`;else if(i==="NCHW")E=`\n            ${A.indicesSet("outputIndices","0","0")}\n            let cOffset = ${A.indicesToOffset("outputIndices")};`;else{E=`var cIndices = ${w.type.indices}(0);\n                       cIndices[0] = outputIndices[${u.length-1}];`;for(let P=1;P<w.rank;P++)E+=`cIndices[${P}] = outputIndices[${P}];`;E+=`let cOffset = ${w.indicesToOffset("cIndices")};`}return E},x=E=>`\n  const epsilon = ${r};\n  ${E.registerUniform("outputSize","u32").declareVariables(y,w,_,v,S,A)}\n  ${E.mainStart()}\n  ${E.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n    var outputIndices = ${A.offsetToIndices(`global_idx * ${a}`)};\n    ${I()}\n    let scale = ${w.getByOffset("cOffset")};\n    let bias = ${_.getByOffset("cOffset")};\n    let inputMean = ${v.getByOffset("cOffset")};\n    let inputVar = ${S.getByOffset("cOffset")};\n    let x = ${y.getByOffset("global_idx")};\n    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;\n    ${A.setByOffset("global_idx","value")}\n  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${o}_${a}`,inputDependencies:h?["rank","type","type","type","type"]:void 0},getShaderSource:x,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h?[{type:12,data:p},...Z(u)]:[{type:12,data:p}]})}},sc=e=>ve(e),Qa=(e,t)=>{let{inputs:r,outputCount:o}=e,i=sc({...t,outputCount:o});if(vr.webgpu.validateInputContent&&ic(r,i),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(ac(r,i))}});var uc,dc,es,ts=Y(()=>{"use strict";Se();_e();uc=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},dc=e=>{let t=e[0].dims,r=e[0].dims[2],o=M.size(t)/4,i=e[0].dataType,u=U("input",i,t,4),a=U("bias",i,[r],4),c=U("residual",i,t,4),p=j("output",i,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)}}),getShaderSource:d=>`\n  const channels = ${r}u / 4;\n  ${d.declareVariables(u,a,c,p)}\n\n  ${d.mainStart()}\n    ${d.guardAgainstOutOfBoundsWorkgroupSizes(o)}\n    let value = ${u.getByOffset("global_idx")}\n      + ${a.getByOffset("global_idx % channels")} + ${c.getByOffset("global_idx")};\n    ${p.setByOffset("global_idx","value")}\n  }`}},es=e=>{uc(e.inputs),e.compute(dc(e.inputs))}});var lc,ke,rs,ns,os,is,as,ss,us,ds,ls,cc,cs,ps,ms,fs,kn,hs,On,gs,ys,bs,ws,vs,$s,_s,Ss,xs,Cs,As,Is,Ts,Es,Ps,ks,Os,Rs,Bo,Do,Bs,Ds,zs,Rn=Y(()=>{"use strict";ye();Se();Ze();_e();lc=(e,t,r,o,i,u)=>{let a=Math.ceil(t/4),c="";typeof i=="string"?c=`${i}(a)`:c=i("a");let p=U("inputData",r,[a],4),h=j("outputData",o,[a],4);return`\n      ${e.registerUniform("vec_size","u32").declareVariables(p,h)}\n\n  ${u??""}\n\n  ${e.mainStart()}\n    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n\n    let a = ${p.getByOffset("global_idx")};\n    ${h.setByOffset("global_idx",c)}\n  }`},ke=(e,t,r,o,i,u=e.dataType)=>({name:t,shaderCache:{hint:i,inputDependencies:["type"]},getShaderSource:a=>lc(a,M.size(e.dims),e.dataType,u,r,o),getRunData:a=>({outputs:[{dims:e.dims,dataType:u}],dispatchGroup:{x:Math.ceil(M.size(a[0].dims)/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size(e.dims)/4)}]})}),rs=e=>{e.compute(ke(e.inputs[0],"Abs","abs"))},ns=e=>{e.compute(ke(e.inputs[0],"Acos","acos"))},os=e=>{e.compute(ke(e.inputs[0],"Acosh","acosh"))},is=e=>{e.compute(ke(e.inputs[0],"Asin","asin"))},as=e=>{e.compute(ke(e.inputs[0],"Asinh","asinh"))},ss=e=>{e.compute(ke(e.inputs[0],"Atan","atan"))},us=e=>{e.compute(ke(e.inputs[0],"Atanh","atanh"))},ds=e=>ve(e),ls=(e,t)=>{let r;switch(t.to){case 10:r="vec4<f16>";break;case 1:r="vec4<f32>";break;case 12:r="vec4<u32>";break;case 6:r="vec4<i32>";break;case 9:r="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute \'to\' from \'Cast\' operator): ${t.to}`)}e.compute(ke(e.inputs[0],"Cast",r,void 0,t.cacheKey,t.to))},cc=e=>{let t=e.length>=2&&e[1].data!==0?e[1].getFloat32Array()[0]:xn,r=e.length>=3&&e[2].data!==0?e[2].getFloat32Array()[0]:Cn;return ve({min:t,max:r})},cs=(e,t)=>{let r=e.inputs.length===1?t:cc(e.inputs),o=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Clip",i=>`clamp(${i}, clip_min_, clip_max_)`,`\n    const clip_min_: vec4<${o}> = vec4(${o}(${r.min}));\n    const clip_max_: vec4<${o}> = vec4(${o}(${r.max}));\n`,r.cacheKey),{inputs:[0]})},ps=e=>{e.compute(ke(e.inputs[0],"Ceil","ceil"))},ms=e=>{e.compute(ke(e.inputs[0],"Cos","cos"))},fs=e=>{e.compute(ke(e.inputs[0],"Cosh","cosh"))},kn=e=>ve(e),hs=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Elu",o=>`elu_vf32(${o})`,`\n  const elu_alpha_ = ${r}(${t.alpha});\n\n  fn elu_f32(a: ${r}) -> ${r} {\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\n  }\n\n  fn elu_vf32(v: vec4<${r}>) -> vec4<${r}> {\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\n  }`,t.cacheKey))},On=(e="f32")=>`\nconst r0: ${e} = 0.3275911;\nconst r1: ${e} = 0.254829592;\nconst r2: ${e} = -0.284496736;\nconst r3: ${e} = 1.421413741;\nconst r4: ${e} = -1.453152027;\nconst r5: ${e} = 1.061405429;\n\nfn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {\n  let absv = abs(v);\n  let x = 1.0 / (1.0 + r0 * absv);\n  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\n}`,gs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Erf",r=>`erf_vf32(${r})`,On(t)))},ys=e=>{e.compute(ke(e.inputs[0],"Exp","exp"))},bs=e=>{e.compute(ke(e.inputs[0],"Floor","floor"))},ws=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Gelu",r=>`0.5 * ${r} * (1.0 + erf_vf32(${r} * 0.7071067811865475))`,On(t)))},vs=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"LeakyRelu",o=>`select(leaky_relu_alpha_ * ${o}, ${o}, ${o} >= vec4<${r}>(0.0))`,`const leaky_relu_alpha_ = ${r}(${t.alpha});`,t.cacheKey))},$s=e=>{e.compute(ke(e.inputs[0],"Not",t=>`!${t}`))},_s=e=>{e.compute(ke(e.inputs[0],"Neg",t=>`-${t}`))},Ss=e=>{e.compute(ke(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},xs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Relu",r=>`select(vec4<${t}>(0.0), ${r}, ${r} > vec4<${t}>(0.0))`))},Cs=e=>{e.compute(ke(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},As=e=>ve(e),Is=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"HardSigmoid",o=>`max(vec4<${r}>(0.0), min(vec4<${r}>(1.0), ${t.alpha} * ${o} + vec4<${r}>(${t.beta})))`,void 0,t.cacheKey))},Ts=e=>{e.compute(ke(e.inputs[0],"Sin","sin"))},Es=e=>{e.compute(ke(e.inputs[0],"Sinh","sinh"))},Ps=e=>{e.compute(ke(e.inputs[0],"Sqrt","sqrt"))},ks=e=>{e.compute(ke(e.inputs[0],"Tan","tan"))},Os=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,Rs=e=>{e.compute(ke(e.inputs[0],"Tanh",Os))},Bo=(e="f32")=>`\nconst fast_gelu_a: ${e} = 0.5;\nconst fast_gelu_b: ${e} = 0.7978845608028654;\nconst fast_gelu_c: ${e} = 0.035677408136300125;\n\nfn tanh_v(v: vec4<${e}>) -> vec4<${e}> {\n  return ${Os("v")};\n}\n`,Do=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,Bs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"FastGelu",Do,Bo(t),void 0,e.inputs[0].dataType))},Ds=(e,t)=>{let r=et(e.inputs[0].dataType);return e.compute(ke(e.inputs[0],"ThresholdedRelu",o=>`select(vec4<${r}>(0.0), ${o}, ${o} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${r}>(${t.alpha});`,t.cacheKey)),0},zs=e=>{e.compute(ke(e.inputs[0],"Log","log"))}});var pc,mc,Us,Vs=Y(()=>{"use strict";Se();_e();Rn();pc=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},mc=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let r=U("input",e[0].dataType,e[0].dims,4),o=U("bias",e[0].dataType,[e[0].dims[2]],4),i=j("output",e[0].dataType,t,4),u=M.size(t)/4,a=De(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)}}),getShaderSource:p=>`\n  const M_SQRT2 = sqrt(2.0);\n  const halfChannels = ${e[0].dims[2]/4/2}u;\n\n  ${p.declareVariables(r,o,i)}\n\n  ${On(a)}\n\n  ${p.mainStart()}\n    ${p.guardAgainstOutOfBoundsWorkgroupSizes(u)}\n    let biasIdx = global_idx % halfChannels;\n    let batchIndex = global_idx / halfChannels;\n    let inputOffset = biasIdx + batchIndex * halfChannels * 2;\n    let valueLeft = input[inputOffset] + bias[biasIdx];\n    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];\n    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);\n\n    ${i.setByOffset("global_idx","valueLeft * geluRight")}\n  }`}},Us=e=>{pc(e.inputs),e.compute(mc(e.inputs))}});var fc,hc,Ot,Ws,Ns,Gs,Hs,Ls,Fs,qs,js,Ks,Ys,Zs=Y(()=>{"use strict";ye();Se();_e();fc=(e,t,r,o,i,u,a,c,p,h,d,y)=>{let w,_;typeof c=="string"?w=_=(x,E)=>`${c}((${x}),(${E}))`:typeof c=="function"?w=_=c:(w=c.scalar,_=c.vector);let v=j("outputData",d,o.length,4),S=U("aData",p,t.length,4),A=U("bData",h,r.length,4),I;if(i)if(u){let x=M.size(t)===1,E=M.size(r)===1,P=t.length>0&&t[t.length-1]%4===0,O=r.length>0&&r[r.length-1]%4===0;x||E?I=v.setByOffset("global_idx",_(x?`${S.type.value}(${S.getByOffset("0")}.x)`:S.getByOffset("global_idx"),E?`${A.type.value}(${A.getByOffset("0")}.x)`:A.getByOffset("global_idx"))):I=`\n            let outputIndices = ${v.offsetToIndices("global_idx * 4u")};\n            let offsetA = ${S.broadcastedIndicesToOffset("outputIndices",v)};\n            let offsetB = ${A.broadcastedIndicesToOffset("outputIndices",v)};\n            ${v.setByOffset("global_idx",_(a||P?S.getByOffset("offsetA / 4u"):`${S.type.value}(${S.getByOffset("offsetA / 4u")}[offsetA % 4u])`,a||O?A.getByOffset("offsetB / 4u"):`${A.type.value}(${A.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}\n          `}else I=v.setByOffset("global_idx",_(S.getByOffset("global_idx"),A.getByOffset("global_idx")));else{if(!u)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let x=(E,P,O="")=>{let R=`aData[indexA${P}][componentA${P}]`,L=`bData[indexB${P}][componentB${P}]`;return`\n            let outputIndices${P} = ${v.offsetToIndices(`global_idx * 4u + ${P}u`)};\n            let offsetA${P} = ${S.broadcastedIndicesToOffset(`outputIndices${P}`,v)};\n            let offsetB${P} = ${A.broadcastedIndicesToOffset(`outputIndices${P}`,v)};\n            let indexA${P} = offsetA${P} / 4u;\n            let indexB${P} = offsetB${P} / 4u;\n            let componentA${P} = offsetA${P} % 4u;\n            let componentB${P} = offsetB${P} % 4u;\n            ${E}[${P}] = ${O}(${w(R,L)});\n          `};d===9?I=`\n            var data = vec4<u32>(0);\n            ${x("data",0,"u32")}\n            ${x("data",1,"u32")}\n            ${x("data",2,"u32")}\n            ${x("data",3,"u32")}\n            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:I=`\n            ${x("outputData[global_idx]",0)}\n            ${x("outputData[global_idx]",1)}\n            ${x("outputData[global_idx]",2)}\n            ${x("outputData[global_idx]",3)}\n          `}return`\n        ${e.registerUniform("vec_size","u32").declareVariables(S,A,v)}\n\n        ${y??""}\n\n        ${e.mainStart()}\n        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n        ${I}\n      }`},hc=(e,t,r,o,i,u,a=r.dataType)=>{let c=!M.areEqual(r.dims,o.dims),p=r.dims,h=M.size(r.dims),d=!1,y=!1,w=[c];if(c){let _=It.calcShape(r.dims,o.dims,!1);if(!_)throw new Error("Can\'t perform binary op on the given tensors");p=_,h=M.size(p);let v=M.size(r.dims)===1,S=M.size(o.dims)===1,A=r.dims.length>0&&r.dims[r.dims.length-1]%4===0,I=o.dims.length>0&&o.dims[o.dims.length-1]%4===0;w.push(v),w.push(S),w.push(A),w.push(I);let x=1;for(let E=1;E<p.length;E++){let P=r.dims[r.dims.length-E]??1,O=o.dims[o.dims.length-E]??1;if(P===O)x*=P;else break}x%4===0?(y=!0,d=!0):(v||S||A||I)&&(d=!0)}else d=!0;return w.push(d),{name:e,shaderCache:{hint:t+w.map(_=>_.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:_=>fc(_,r.dims,o.dims,p,d,c,y,i,r.dataType,o.dataType,a,u),getRunData:()=>({outputs:[{dims:p,dataType:a}],dispatchGroup:{x:Math.ceil(h/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size(p)/4)},...Z(r.dims,o.dims,p)]})}},Ot=(e,t,r,o,i,u)=>{e.compute(hc(t,i??"",e.inputs[0],e.inputs[1],r,o,u))},Ws=e=>{Ot(e,"Add",(t,r)=>`${t}+${r}`)},Ns=e=>{Ot(e,"Div",(t,r)=>`${t}/${r}`)},Gs=e=>{Ot(e,"Equal",{scalar:(t,r)=>`u32(${t}==${r})`,vector:(t,r)=>`vec4<u32>(${t}==${r})`},void 0,void 0,9)},Hs=e=>{Ot(e,"Mul",(t,r)=>`${t}*${r}`)},Ls=e=>{let t=U("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;Ot(e,"Pow",{scalar:(o,i)=>`pow_custom(${o},${i})`,vector:(o,i)=>`pow_vector_custom(${o},${i})`},`\n    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {\n      if (b == ${t}(0.0)) {\n        return ${t}(1.0);\n      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {\n        return ${t}(pow(f32(a), f32(b))); // NaN\n      }\n      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));\n    }\n    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {\n      // TODO: implement vectorized pow\n      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));\n    }\n      `)},Fs=e=>{Ot(e,"Sub",(t,r)=>`${t}-${r}`)},qs=e=>{Ot(e,"Greater",{scalar:(t,r)=>`u32(${t}>${r})`,vector:(t,r)=>`vec4<u32>(${t}>${r})`},void 0,void 0,9)},js=e=>{Ot(e,"Less",{scalar:(t,r)=>`u32(${t}<${r})`,vector:(t,r)=>`vec4<u32>(${t}<${r})`},void 0,void 0,9)},Ks=e=>{Ot(e,"GreaterOrEqual",{scalar:(t,r)=>`u32(${t}>=${r})`,vector:(t,r)=>`vec4<u32>(${t}>=${r})`},void 0,void 0,9)},Ys=e=>{Ot(e,"LessOrEqual",{scalar:(t,r)=>`u32(${t}<=${r})`,vector:(t,r)=>`vec4<u32>(${t}<=${r})`},void 0,void 0,9)}});var St,xt,Ct,Bn,Ft=Y(()=>{"use strict";ye();Se();St=(e,t,r="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${t}(0.0));`;case"Sigmoid":return`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${t}(${r}(uniforms.clip_min)), ${t}(${r}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${t}(0.0), min(${t}(1.0), ${r}(uniforms.alpha) * value + ${r}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${r}(uniforms.alpha) * value, value, value >= ${t}(0.0));`;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},xt=(e,t)=>{e.activation==="Clip"?t.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?t.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&t.push({type:1,data:e.alpha})},Ct=(e,t)=>{e.activation==="Clip"?t.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?t.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&t.push({name:"alpha",type:"f32"})},Bn=e=>{let t=e?.activation||"";if(t==="HardSigmoid"){let[r,o]=e?.activation_params||[.2,.5];return{activation:t,alpha:r,beta:o}}else if(t==="Clip"){let[r,o]=e?.activation_params||[xn,Cn];return{activation:t,clipMax:o,clipMin:r}}else if(t==="LeakyRelu"){let[r]=e?.activation_params||[.01];return{activation:t,alpha:r}}return{activation:t}}});var tt,Dn,zn=Y(()=>{"use strict";tt=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},Dn=e=>`\n      ${e?"value = value + getBiasByOutputCoords(coords);":""}\n      `});var Mn,zo=Y(()=>{"use strict";Mn=e=>`\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n}\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));\n}\n`});var yc,bc,Hr,Xs,wc,Lr,vc,Un,Fr=Y(()=>{"use strict";ye();Se();_e();Ft();zn();yc=(e,t)=>e?`\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          kStart + inputRow,\n          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});\n        `:`\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          globalRow + innerRow,\n          kStart / innerElementSize + inputCol${t?", batchIndices":""});\n        `,bc=(e,t)=>e?`\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\n        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          acc[i] = BCached0 * ACached0[i] + acc[i];\n          acc[i] = BCached1 * ACached1[i] + acc[i];\n          acc[i] = BCached2 * ACached2[i] + acc[i];\n          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}\n        }`:`\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          let ACached = mm_Asub[tileRow + i][k];\n          acc[i] = BCached0 * ACached.x + acc[i];\n          acc[i] = BCached1 * ACached.y + acc[i];\n          acc[i] = BCached2 * ACached.z + acc[i];\n          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}\n        }`,Hr=(e,t,r="f32",o,i=!1,u=32,a=!1,c=32)=>{let p=t[1]*e[1],h=t[0]*e[0],d=i?p:u,y=i?u:p,w=d/t[0],_=u/t[1];if(!((i&&w===4&&e[1]===4||!i&&(w===3||w===4))&&d%t[0]===0&&u%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${i} is true, innerElementSize ${w} and workPerThread[1] ${e[1]} must be 4.\n      Otherwise, innerElementSize ${w} must be 3 or 4.\n  tileAWidth ${d} must be divisible by workgroupSize[0]${t[0]}. tileInner ${u} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`\nvar<workgroup> mm_Asub: array<array<vec${w}<${r}>, ${d/w}>, ${y}>;\nvar<workgroup> mm_Bsub: array<array<vec4<${r}>, ${h/e[0]}>, ${u}>;\n\nconst rowPerThread = ${e[1]};\nconst colPerThread = ${e[0]};\nconst innerElementSize = ${w};\nconst tileInner = ${u};\n\n@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n  let localRow = i32(localId.y);\n  let tileRow = localRow * rowPerThread;\n  let tileCol = i32(localId.x);\n\n  let globalRow =i32(globalId.y) * rowPerThread;\n  let globalCol = i32(globalId.x);\n  let batch = ${a?"0":"i32(globalId.z)"};\n  ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}\n  let globalRowStart = i32(workgroupId.y) * ${p};\n\n  let num_tiles = ${a?`${Math.ceil(c/u)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};\n  var kStart = ${a?`i32(globalId.z) * ${c}`:"0"};\n\n  var acc: array<vec4<${r}>, rowPerThread>;\n\n  // Loop over shared dimension.\n  let tileRowB = localRow * ${_};\n  for (var t = 0; t < num_tiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let inputRow = tileRow + innerRow;\n          let inputCol = tileCol;\n          ${yc(i,o)}\n      }\n\n      // Load one tile of B into local memory.\n      for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {\n          let inputRow = tileRowB + innerRow;\n          let inputCol = tileCol;\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${o?", batchIndices":""});\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\n          ${w===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}\n\n          ${bc(i,w)}\n      }\n\n      workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n  }\n}`},Xs=(e,t)=>e?`\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              kStart + inputRow,\n              globalRowStart + inputCol${t?", batchIndices":""});\n            `:`\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              globalRowStart + inputRow,\n              kStart + inputCol${t?", batchIndices":""});\n            `,wc=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",Lr=(e,t,r="f32",o,i=!1,u=32,a=!1,c=32,p=!1)=>{let h=e[1]*t[1],d=e[0]*t[0],y=i?h:u,w=i?u:h;if(!(w%t[1]===0&&y%t[0]===0&&u%t[1]===0))throw new Error(`tileAHight ${w} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${y} must be divisible by workgroupSize[0]${t[0]}, tileInner ${u} must be divisible by workgroupSize[1]${t[1]}`);let _=w/t[1],v=y/t[0],S=u/t[1],A=p?`\n    let localRow = i32(localId.y);\n    let localCol = i32(localId.x);\n    let globalRowStart = i32(workgroupId.y) * ${h};\n    let globalColStart = i32(workgroupId.x) * ${d};\n\n    // Loop over shared dimension.\n    for (var t = 0; t < num_tiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var inputRow = localRow; inputRow < ${w}; inputRow = inputRow + ${t[1]}) {\n        for (var inputCol = localCol; inputCol < ${y}; inputCol = inputCol + ${t[0]}) {\n          ${Xs(i,o)}\n        }\n      }\n      // Load one tile of B into local memory.\n      for (var inputRow = localRow; inputRow < ${u}; inputRow = inputRow + ${t[1]}) {\n            for (var inputCol = localCol; inputCol < ${d}; inputCol = inputCol + ${t[0]}) {\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n            kStart + inputRow,\n            globalColStart + inputCol${o?", batchIndices":""});\n        }\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      var BCached : array<${r}, colPerThread>;\n      for (var k = 0; k < tileInner; k = k + 1) {\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];\n        }\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let ACached = ${i?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\n                ACached * BCached[innerCol];\n          }\n        }\n      }\n      workgroupBarrier();\n    }\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      let gRow = globalRowStart + localRow + innerRow * ${t[1]};\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        let gCol = globalColStart + localCol + innerCol * ${t[0]};\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n      }\n    }\n    `:`\nlet tileRow = i32(localId.y) * rowPerThread;\nlet tileCol = i32(localId.x) * colPerThread;\n\nlet globalRow = i32(globalId.y) * rowPerThread;\nlet globalCol = i32(globalId.x) * colPerThread;\nlet globalRowStart = i32(workgroupId.y) * ${h};\n\nlet tileRowA = i32(localId.y) * ${_};\nlet tileColA = i32(localId.x) * ${v};\nlet tileRowB = i32(localId.y) * ${S};\n// Loop over shared dimension.\nfor (var t = 0; t < num_tiles; t = t + 1) {\n  // Load one tile of A into local memory.\n  for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < ${v}; innerCol = innerCol + 1) {\n      let inputRow = tileRowA + innerRow;\n      let inputCol = tileColA + innerCol;\n      ${Xs(i,o)}\n    }\n  }\n\n  // Load one tile of B into local memory.\n  for (var innerRow = 0; innerRow < ${S}; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n      let inputRow = tileRowB + innerRow;\n      let inputCol = tileCol + innerCol;\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n        kStart + inputRow,\n        globalCol + innerCol${o?", batchIndices":""});\n    }\n  }\n  kStart = kStart + tileInner;\n  workgroupBarrier();\n\n  // Compute acc values for a single thread.\n  var BCached : array<${r}, colPerThread>;\n  for (var k = 0; k < tileInner; k = k + 1) {\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\n    }\n\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      ${wc(i)}\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\n      }\n    }\n  }\n\n  workgroupBarrier();\n}\n\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n        acc[innerRow][innerCol]);\n  }\n}\n`;return`\n  var<workgroup> mm_Asub : array<array<${r}, ${y}>, ${w}>;\n  var<workgroup> mm_Bsub : array<array<${r}, ${d}>, ${u}>;\n  const rowPerThread = ${e[1]};\n  const colPerThread = ${e[0]};\n  const tileInner = ${u};\n\n@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n    let batch = ${a?"0":"i32(globalId.z)"};\n    ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}\n    let num_tiles = ${a?`${Math.ceil(c/u)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};\n    var kStart = ${a?`i32(globalId.z) * ${c}`:"0"};\n\n    var acc : array<array<${r}, colPerThread>, rowPerThread>;\n\n    // Without this initialization strange values show up in acc.\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = 0.0;\n      }\n    }\n    ${A}\n  }\n`},vc=(e,t,r,o,i,u=!1)=>{let[a,c,p]=i,[h,d,y,w]=o,_=_r(a,p),v=_r(c,p),S=De(o[0].type.tensor),A=()=>{let E=d.rank,P=h.rank,O=`var aIndices: ${d.type.indices};`;for(let R=E-2-1,L=P-1;R>=0;R--,L--)O+=`\naIndices[${R}] = ${P>1?`batchIndices[${L}]`:"batchIndices"};`;return _.forEach(R=>{O+=`\naIndices[${R}] = 0;`}),O+=`\naIndices[${E-2}] = u32(row);\n                   aIndices[${E-1}] = u32(colIn);`,O},I=()=>{let E=y.rank,P=h.rank,O=`var bIndices: ${y.type.indices};`;for(let R=E-2-1,L=P-1;R>=0;R--,L--)O+=`\nbIndices[${R}] = ${P>1?`batchIndices[${L}]`:"batchIndices"};`;return v.forEach(R=>{O+=`\nbIndices[${R}] = 0;`}),O+=`\nbIndices[${E-2}] = u32(row);\n                   bIndices[${E-1}] = u32(colIn);`,O};return`\n    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${h.type.indices}) -> ${tt(e,S)} {\n      var value = ${tt(e,S)}(0.0);\n      let col = colIn * ${e};\n      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)\n      {\n        ${A()}\n        value = ${d.getByIndices("aIndices")};\n      }\n      return value;\n    }\n\n    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${h.type.indices}) -> ${tt(e,S)} {\n      var value = ${tt(e,S)}(0.0);\n      let col = colIn * ${e};\n      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)\n      {\n        ${I()}\n        value = ${y.getByIndices("bIndices")};\n      }\n      return value;\n    }\n\n    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${tt(e,S)}) {\n      let col = colIn * ${e};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {\n        var value = valueIn;\n        let coords = vec3<i32>(batch, row, colIn);\n        ${t?`value = value + ${u?"bias[colIn]":`${tt(e,S)}(bias[row])`};`:""}\n        ${r}\n        ${w.setByIndices("vec3<u32>(coords)","value")}\n      }\n    }\n    `},Un=(e,t,r,o,i=!1)=>{let u=e[0].dims,a=e[1].dims,c=u.slice(0,-2),p=a.slice(0,-2),h=o?o.slice(0,-2):r.slice(0,-2),d=M.size(h),y=u[u.length-2],w=u[u.length-1],_=a[a.length-1],v=w%4===0&&_%4===0,S=y<=8?[4,1,1]:[4,4,1],A=[8,8,1],I=[Math.ceil(_/A[0]/S[0]),Math.ceil(y/A[1]/S[1]),Math.ceil(d/A[2]/S[2])],x=v?4:1,E=[...c,y,w/x],P=E.length,O=[...p,w,_/x],R=O.length,L=[d,y,_/x],N=[{type:6,data:y},{type:6,data:_},{type:6,data:w}];xt(t,N),N.push(...Z(h,E,O));let K=["rank","rank"],Q=e.length>2;Q&&(N.push(...Z(e[2].dims)),K.push("rank")),N.push(...Z(L));let he=W=>{let se=h.length,Ce=An("batchDims",e[0].dataType,se,1),We=De(e[0].dataType),ee=U("a",e[0].dataType,P,x),ae=U("b",e[1].dataType,R,x),Ae=j("result",e[0].dataType,L.length,x),me=[ee,ae];if(Q){let G=i?x:1;me.push(U("bias",e[2].dataType,e[2].dims.length,G))}let ie=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Ct(t,ie);let ue=De(Ae.type.tensor),le=St(t,Ae.type.value,ue),qe=vc(x,Q,le,[Ce,ee,ae,Ae],[c,p,h],i);return`\n  ${W.registerUniforms(ie).registerInternalVariables(Ce).declareVariables(...me,Ae)}\n  ${qe}\n  ${v?Hr(S,A,We,Ce):Lr(S,A,We,Ce)}\n                   `};return{name:"MatMul",shaderCache:{hint:`${S};${t.activation};${v};${i}`,inputDependencies:K},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:I[0],y:I[1],z:I[2]},programUniforms:N}),getShaderSource:he}}});var $c,Qs,Js=Y(()=>{"use strict";ye();Lt();_e();Ft();zn();zo();Fr();$c=(e,t,r,o,i=!1,u,a=4,c=4,p=4,h="f32")=>{let d=Q=>{switch(Q){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${h}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${Q} is not supported.`)}},y=Q=>{switch(Q){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${Q} is not supported.`)}},w=e?`\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\n    `:`\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\n    `,_=e?`\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    `:`\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    `,v=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",S=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",A=e?"row":"col",I=e?"col":"row",x=`\n    let inChannels = i32(uniforms.w_shape[2]);\n    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n    let outRow = ${A} / outWidth;\n    let outCol = ${A} % outWidth;\n\n    let WRow = ${I} / (i32(uniforms.w_shape[1]) * inChannels);\n    let WCol = ${I} / inChannels % i32(uniforms.w_shape[1]);\n    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];\n    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];\n    let xCh = ${I} % inChannels;\n    var resData = ${tt(a,h)}(0.0);\n    // The bounds checking is always needed since we use it to pad zero for\n    // the \'same\' padding type.\n    if (xRow >= 0 && xRow < ${v} && xCol >= 0 && xCol < ${S}) {\n      ${w}\n      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));\n      ${d(a)}\n    }\n    return resData;`,E=e?t&&o?`\n    let col = colIn * ${a};\n    ${x}`:`\n    let col = colIn * ${a};\n    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {\n      ${x}\n    }\n    return ${tt(a,h)}(0.0);`:o&&r?`\n    let col = colIn * ${a};\n    ${x}`:`\n    let col = colIn * ${a};\n    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {\n      ${x}\n    }\n    return ${tt(a,h)}(0.0);`,P=`${y(c)}`,O=tt(p,h),R=e?tt(a,h):tt(c,h),L=e?tt(c,h):tt(a,h),N=St(u,O,h);return`\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${R} {\n      ${e?E:P}\n    }\n\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${L} {\n      ${e?P:E}\n    }\n\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${O}) {\n      let col = colIn * ${p};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)\n      {\n      var value = valueIn;\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      ${_}\n      ${Dn(i)}\n      ${N}\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n      }\n    }`},Qs=(e,t,r,o,i,u,a,c)=>{let p=t.format==="NHWC",h=p?e[0].dims[3]:e[0].dims[1],d=r[0],y=p?r[2]:r[3],w=p?r[1]:r[2],_=p?r[3]:r[1],v=p&&(h%4===0||h%3===0)&&_%4===0,S=p?_:y*w,A=p?y*w:_,I=[8,8,1],x=o<=8?[4,1,1]:[4,4,1],E=[Math.ceil(S/I[0]/x[0]),Math.ceil(A/I[1]/x[1]),Math.ceil(d/I[2]/x[2])];Ve("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${E}`);let P=v?p&&h%4!==0?3:4:1,O=I[1]*x[1],R=I[0]*x[0],L=Math.max(I[0]*P,I[1]),N=o%O===0,K=i%R===0,Q=u%L===0,he=v?[P,4,4]:[1,1,1],W=[{type:6,data:o},{type:6,data:i},{type:6,data:u},{type:6,data:[t.pads[0],t.pads[1]]},{type:6,data:t.strides},{type:6,data:t.dilations}];xt(t,W),W.push(...Z(e[0].dims,e[1].dims));let se=["rank","rank"];a&&(W.push(...Z(e[2].dims)),se.push("rank")),W.push(...Z(r));let Ce=We=>{let ee=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Ct(t,ee);let ae=v?4:1,Ae=De(e[0].dataType),me=`\n      fn setOutputAtIndex(flatIndex : i32, value : ${v?`vec4<${Ae}>`:Ae}) {\n        result[flatIndex] = ${v?`vec4<${Ae}>`:Ae}(value);\n      }\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${v?`vec4<${Ae}>`:Ae}) {\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\n        setOutputAtIndex(flatIndex ${v?"/ 4":""}, value);\n      }`,ie=U("x",e[0].dataType,e[0].dims.length,P===3?1:P),ue=U("w",e[1].dataType,e[1].dims.length,ae),le=[ie,ue],qe=j("result",e[0].dataType,r.length,ae);if(a){let G=U("bias",e[2].dataType,e[2].dims.length,ae);le.push(G),me+=`\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${v?`vec4<${Ae}>`:Ae} {\n          return bias[coords.${p?"w":"y"}${v?"/ 4":""}];\n        }`}return`\n        ${Mn("uniforms.result_strides")}\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\n        ${We.registerUniforms(ee).declareVariables(...le,qe)}\n        ${me}\n        ${$c(p,N,K,Q,a,t,he[0],he[1],he[2],Ae)}\n        ${v?Hr(x,I,Ae,void 0,!p,L):Lr(x,I,Ae,void 0,!p,L,!1,void 0,c)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${t.cacheKey};${P};${v};${N};${K};${Q};${O};${R};${L}`,inputDependencies:se},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:E[0],y:E[1],z:E[2]},programUniforms:W}),getShaderSource:Ce}}});var Mo,eu,tu=Y(()=>{"use strict";ye();Se();_e();Uo();Ft();Mo=(e,t,r)=>{let o=e.length>2,i=o?"value += b[output_channel];":"",u=e[0].dims,a=e[1].dims,c=a[0]/t.group,p=t.format==="NHWC",h=Vn(u,a,t.dilations,t.pads,t.strides,p),d=M.size(h),y=[{type:12,data:d},{type:12,data:t.dilations},{type:12,data:[t.strides[0],t.strides[1]]},{type:12,data:[t.pads[0],t.pads[1]]},{type:12,data:c}];xt(t,y),y.push(...Z(u,a));let w=["rank","rank"];o&&(y.push(...Z(e[2].dims)),w.push("rank")),y.push(...Z(h));let _=v=>{let S=j("output",e[0].dataType,h.length),A=De(S.type.tensor),I=St(t,S.type.value,A),x=U("x",e[0].dataType,u.length),E=U("w",e[1].dataType,a.length),P=[x,E];o&&P.push(U("b",e[2].dataType,e[2].dims.length));let O=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:t.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];return Ct(t,O),`\n  ${v.registerUniforms(O).declareVariables(...P,S)}\n\n  ${v.mainStart()}\n    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let outputIndices = ${S.offsetToIndices("global_idx")};\n    let batch: u32 = outputIndices[0];\n    let output_channel: u32 = outputIndices[${p?3:1}];\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${p?1:2}], outputIndices[${p?2:3}]) * uniforms.strides - uniforms.pads;\n    let group_id: u32 = output_channel / uniforms.output_channels_per_group;\n\n    var value: ${S.type.value} = ${S.type.value}(0);\n    for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {\n      let input_channel = group_id * uniforms.w_shape[1] + wInChannel;\n      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {\n        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];\n\n        if (xHeight < 0u || xHeight >= uniforms.x_shape[${p?1:2}]) {\n          continue;\n        }\n\n        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {\n          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];\n          if (xWidth < 0u || xWidth >= uniforms.x_shape[${p?2:3}]) {\n            continue;\n          }\n\n          let xVal = ${p?x.get("batch","xHeight","xWidth","input_channel"):x.get("batch","input_channel","xHeight","xWidth")};\n          let wVal = ${E.get("output_channel","wInChannel","wHeight","wWidth")};\n          value += xVal*wVal;\n        }\n      }\n    }\n    ${i}\n    ${I}\n    ${S.setByOffset("global_idx","value")}\n  }`};return{name:"GroupedConv",shaderCache:{hint:t.cacheKey,inputDependencies:w},getRunData:()=>({outputs:[{dims:r?r(h):h,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:y}),getShaderSource:_}},eu=(e,t,r)=>{let o=e.length>2,i=Me(r[3]),u=Me(r[2]),a=M.size(r)/i/u,c=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/i],p=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/i],h=[r[0],r[1],r[2],r[3]/i],d=[{type:12,data:a},{type:6,data:[t.strides[0],t.strides[1]]},{type:6,data:[t.pads[0],t.pads[1]]}];xt(t,d),d.push(...Z(c,p,h));let y=(u-1)*t.strides[1]+p[1],w=_=>{let v=j("output",e[0].dataType,h.length,i),S=De(v.type.tensor),A=St(t,v.type.value,S),I=U("x",e[0].dataType,c.length,i),x=U("w",e[1].dataType,p.length,i),E=[I,x];o&&E.push(U("b",e[2].dataType,e[2].dims,i));let P=o?"value += b[output_channel];":"",O=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Ct(t,O),`\n  ${_.registerUniforms(O).declareVariables(...E,v)}\n  ${_.mainStart()}\n    ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let width0 = uniforms.output_shape[3];\n    let output_channel = global_idx % width0;\n    var index1 = global_idx / width0;\n    let width1 = uniforms.output_shape[2] / ${u}u;\n    let col = (index1 % width1) * ${u}u;\n    index1 = index1 / width1;\n    let row = index1 % uniforms.output_shape[1];\n    let batch = index1 / uniforms.output_shape[1];\n\n    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;\n\n    var x_vals: array<${I.type.value}, ${y}>;\n    var values: array<${v.type.value}, ${u}>;\n    let input_channel = output_channel;\n    // Use constant instead of uniform can give better performance for w\'s height/width.\n    for (var w_height: u32 = 0u; w_height < ${p[0]}; w_height++) {\n      let x_height = x_corner.x + i32(w_height);\n      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {\n        for (var i = 0; i < ${y}; i++) {\n          let x_width = x_corner.y + i;\n          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {\n            x_vals[i] = ${I.get("batch","u32(x_height)","u32(x_width)","input_channel")};\n          } else {\n            x_vals[i] = ${I.type.value}(0);\n          }\n        }\n        for (var w_width: u32 = 0u; w_width < ${p[1]}; w_width++) {\n          let w_val = ${x.get("w_height","w_width","0","output_channel")};\n          for (var i = 0u; i < ${u}u; i++) {\n            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);\n          }\n        }\n      }\n    }\n\n    for (var i = 0u; i < ${u}u; i++) {\n      var value = values[i];\n      ${P}\n      ${A}\n      ${v.set("batch","row","col + i","output_channel","value")};\n    }\n  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${t.cacheKey};${i};${u};${y};${p[0]};${p[1]}`,inputDependencies:o?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:d}),getShaderSource:w}}});var Vo,_c,ru,Wo=Y(()=>{"use strict";ye();Se();Fr();_e();Ft();Vo=(e,t,r,o,i=!1)=>{let u=e[0].dims,a=e[1].dims,c=u[u.length-2],p=a[a.length-1],h=u[u.length-1],d=Me(p),y=Me(h),w=Me(c),_=M.size(r)/d/w,v=e.length>2,S=o?o.slice(0,-2):r.slice(0,-2),I=[M.size(S),c,p],x=[{type:12,data:_},{type:12,data:c},{type:12,data:p},{type:12,data:h}];xt(t,x),x.push(...Z(S,u,a)),v&&x.push(...Z(e[2].dims)),x.push(...Z(I));let E=P=>{let O=An("batch_dims",e[0].dataType,S.length),R=U("a",e[0].dataType,u.length,y),L=U("b",e[1].dataType,a.length,d),N=j("output",e[0].dataType,I.length,d),K=De(N.type.tensor),Q=St(t,N.type.value,K),he=[R,L],W="";if(v){let ie=i?d:1;he.push(U("bias",e[2].dataType,e[2].dims.length,ie)),W=`${i?`value += bias[col / ${ie}];`:`value += ${N.type.value}(bias[row + i]);`}`}let se=u.slice(0,-2),Ce=a.slice(0,-2),We=_r(se,S),ee=_r(Ce,S),ae=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Ct(t,ae);let Ae=(ie,ue)=>{let le=ie.rank,qe=ie.name;if(le===2)return`var ${qe}_indices = ${ie.type.indices}(0u, 0u);`;let G=O.rank,ne=`var ${qe}_indices: ${ie.type.indices};`;for(let xe=le-2-1,Ke=G-1;xe>=0;xe--,Ke--)ne+=`\n${qe}_indices[${xe}] = ${G>1?`batch_indices[${Ke}]`:"batch_indices"};`;return ue.forEach(xe=>{ne+=`\n${qe}_indices[${xe}] = 0;`}),ne+=`${qe}_indices[${le-2}] = 0u;\n                     ${qe}_indices[${le-1}] = 0u;`,ne},me=()=>{let ie=`var a_data: ${R.type.value};`;for(let ue=0;ue<y;ue++)ie+=`\n              let b_data${ue} = b[(b_offset + (k + ${ue}) * uniforms.N + col) / ${d}];`;for(let ue=0;ue<w;ue++){ie+=`a_data = a[(a_offset + (row + ${ue}) * uniforms.K + k) / ${y}];`;for(let le=0;le<y;le++)ie+=`\n            values[${ue}] = fma(${L.type.value}(a_data${y===1?"":`[${le}]`}), b_data${le}, values[${ue}]);\n`}return ie};return`\n  ${P.registerUniforms(ae).registerInternalVariables(O).declareVariables(...he,N)}\n  ${P.mainStart()}\n    ${P.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let col = (global_idx % (uniforms.N / ${d})) * ${d};\n    var index1 = global_idx / (uniforms.N / ${d});\n    let stride1 = uniforms.M / ${w};\n    let row = (index1 % stride1) * ${w};\n    let batch = index1 / stride1;\n\n    ${r.length===2?"":`let batch_indices = ${O.offsetToIndices("batch")};`}\n    ${Ae(R,We)}\n    let a_offset = ${R.indicesToOffset("a_indices")};\n    ${Ae(L,ee)}\n    let b_offset = ${L.indicesToOffset("b_indices")};\n    var values: array<${N.type.value}, ${w}>;\n    for (var k: u32 = 0u; k < uniforms.K; k = k + ${y}) {\n      ${me()}\n    }\n    for (var i = 0u; i < ${w}u; i++) {\n      var value = values[i];\n      ${W}\n      ${Q}\n      let cur_indices = ${N.type.indices}(batch, row + i, col);\n      let offset = ${N.indicesToOffset("cur_indices")};\n      ${N.setByOffset(`offset / ${d}`,"value")};\n    }\n  }\n  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activation};${d};${y};${w};${i}`,inputDependencies:v?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:x}),getShaderSource:E}},_c=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},ru=e=>{_c(e.inputs);let t=It.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can\'t use matmul on the given tensors");let r=t[t.length-1],o=e.inputs[0].dims[e.inputs[0].dims.length-1];r<8&&o<8?e.compute(Vo(e.inputs,{activation:""},t)):e.compute(Un(e.inputs,{activation:""},t))}});var Vn,No,Sc,nu,Go,xc,Cc,Ho,Uo=Y(()=>{"use strict";Se();Js();Fr();tu();Ft();Wo();Sr();Vn=(e,t,r,o,i,u)=>{let a=e[0],c=e.slice(u?1:2,u?3:4),p=c.length,h=t[0],y=t.slice(2).map((v,S)=>v+(v-1)*(r[S]-1)),_=c.map((v,S)=>v+o[S]+o[S+p]).map((v,S)=>Math.floor((v-y[S]+i[S])/i[S]));return _.splice(0,0,a),_.splice(u?3:1,0,h),_},No=[2,3,1,0],Sc=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support conv 1D and 2D");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[1]*t.group;if(r!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let i=e[0].dims.length-2;if(t.dilations.length!==i)throw new Error(`dilations should be ${i}D`);if(t.strides.length!==i)throw new Error(`strides should be ${i}D`);if(t.pads.length!==i*2)throw new Error(`pads should be ${i*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},nu=(e,t)=>{let r=e.kernelShape.slice();for(let u=2;u<t[1].dims.length;++u)r[u-2]===0&&(r[u-2]=t[1].dims[u]);let o=e.pads.slice();nr.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,o,e.format==="NHWC",e.autoPad);let i=Object.assign({},e);return Object.assign(i,{kernelShape:r,pads:o}),i},Go=e=>{let t=Bn(e),r=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],i=e.dilations,u=e.group,a=e.kernel_shape,c=e.pads,p=e.strides,h=e.w_is_const();return{autoPad:o,format:r,dilations:i,group:u,kernelShape:a,pads:c,strides:p,wIsConst:h,...t,cacheKey:`${e.format};${t.activation};`}},xc=(e,t,r)=>{let o=nu(r,t),i=r.format==="NHWC";if(r.group!==1){if(!e.adapterInfo.isArchitecture("ampere")&&i&&t[1].dims[0]===r.group&&t[1].dims[1]===1&&r.dilations[0]===1&&r.dilations[1]===1){let L=Vn(t[0].dims,t[1].dims,r.dilations,o.pads,r.strides,i),N=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=N);let K=[t[0],N];t.length===3&&K.push(t[2]),e.compute(eu(K,o,L),{inputs:K})}else e.compute(Mo(t,o));return}let u=t.length===3,a=t[0].dims[i?1:2],c=t[0].dims[i?2:3],p=t[0].dims[i?3:1],h=t[1].dims[2],d=t[1].dims[3],y=Vn(t[0].dims,t[1].dims,r.dilations,o.pads,r.strides,i),w=y[i?1:2],_=y[i?2:3],v=y[i?3:1],S=i&&h===a&&d===c&&r.pads[0]===0&&r.pads[1]===0;if(S||h===1&&d===1&&r.dilations[0]===1&&r.dilations[1]===1&&r.strides[0]===1&&r.strides[1]===1&&r.pads[0]===0&&r.pads[1]===0){let R=y[0],L,N,K,Q=[];if(i){let se=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];if(r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=se),S){let Ce=a*c*p;L=t[0].reshape([1,R,Ce]),N=se.reshape([1,Ce,v]),K=[1,R,v]}else L=t[0].reshape([R,a*c,p]),N=se.reshape([1,p,v]),K=[R,w*_,v];Q.push(L),Q.push(N)}else L=t[0].reshape([R,p,a*c]),N=t[1].reshape([1,v,p]),K=[R,v,w*_],Q.push(N),Q.push(L);u&&Q.push(t[2]);let he=K[2],W=Q[0].dims[Q[0].dims.length-1];he<8&&W<8?e.compute(Vo(Q,o,y,K,i),{inputs:Q}):e.compute(Un(Q,o,y,K,i),{inputs:Q});return}let A=!0,I=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=I);let x=[t[0],I];u&&x.push(t[2]);let E=i?w*_:v,P=i?v:w*_,O=h*d*p;e.compute(Qs(x,o,y,E,P,O,u,A),{inputs:x})},Cc=(e,t)=>{let r=t.format==="NHWC",o=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&o.push(e.inputs[2]);let i=[0,t.pads[0],0,t.pads[1]],u=[1].concat(t.strides),a=[1].concat(t.dilations),c=[1].concat(t.kernelShape),p=nu({...t,pads:i,strides:u,dilations:a,kernelShape:c},o);e.compute(Mo(o,p,h=>r?[h[0],h[2],h[3]]:[]))},Ho=(e,t)=>{Sc(e.inputs,t),e.inputs[0].dims.length===3?Cc(e,t):xc(e,e.inputs,t)}});var Ac,ou,iu=Y(()=>{"use strict";ye();Lt();_e();Ft();zn();zo();Fr();Ac=(e,t=!1,r,o,i=4)=>{let u=I=>{switch(I){case 1:return"return w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];";case 4:return`\n            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);\n            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);\n            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);\n            let v0 = w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];\n            let v1 = w[getIndexFromCoords4D(coord1, vec4<i32>(uniforms.w_shape))];\n            let v2 = w[getIndexFromCoords4D(coord2, vec4<i32>(uniforms.w_shape))];\n            let v3 = w[getIndexFromCoords4D(coord3, vec4<i32>(uniforms.w_shape))];\n            return ${o}(v0, v1, v2, v3);\n            `;default:throw new Error(`innerElementSize ${I} is not supported.`)}},a=e?`\n      let coord = vec4<i32>(batch, iXR, iXC, xCh);\n      `:`\n      let coord = vec4<i32>(batch, xCh, iXR, iXC);\n      `,c=e?`\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    `:`\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    `,p=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",h=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",d=e?"row":"col",y=e?"col":"row",w=`\n      let inChannels = ${e?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      let outRow = ${d} / outWidth;\n      let outCol = ${d} % outWidth;\n\n      let WRow = ${y} / (uniforms.filter_dims[1] * inChannels);\n      let WCol = ${y} / inChannels % uniforms.filter_dims[1];\n      let xR = f32(outRow - uniforms.pads[0] + uniforms.dilations[0] * WRow) / f32(uniforms.strides[0]);\n      let xC = f32(outCol - uniforms.pads[1] + uniforms.dilations[1] * WCol) / f32(uniforms.strides[1]);\n      if (xR < 0.0 || xR >= f32(${p}) || fract(xR) > 0.0) {\n        return ${o}(0.0);\n      }\n      if (xC < 0.0 || xC >= f32(${h}) || fract(xC) > 0.0) {\n        return ${o}(0.0);\n      }\n      let iXR = i32(xR);\n      let iXC = i32(xC);\n      let xCh = ${y} % inChannels;\n      ${a}\n      return x[getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape))/${i}];`,_=e?`\n      let col = colIn * ${i};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {\n        ${w}\n      }\n      return ${o}(0.0);`:`\n      let col = colIn * ${i};\n      if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {\n        ${w}\n      }\n      return ${o}(0.0);`,v=`\n      let col = colIn * ${i};\n      let inChannels = ${e?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};\n      let coordX = uniforms.filter_dims[0] - 1 - row / (uniforms.filter_dims[1] * inChannels);\n      let coordY = uniforms.filter_dims[1] - 1 - (row / inChannels) % uniforms.filter_dims[1];\n      if (${e?"row < uniforms.dim_inner && col < uniforms.dim_b_outer":"row < uniforms.dim_inner && col < uniforms.dim_a_outer"}  && coordX >= 0 && coordY >= 0) {\n        let rowInner = row % inChannels;\n        let coord = vec4<i32>(coordX, coordY, col, rowInner);\n        ${u(i)}\n      }\n      return ${o}(0.0);\n      `,S=St(r,o);return`\n  fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${o} {\n    ${e?_:v}\n  }\n\n  fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${o} {\n    ${e?v:_}\n  }\n\n  fn mm_write(batch: i32, row : i32, colIn : i32, valueInput : ${o}) {\n    let col = colIn * ${i};\n    if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {\n      var value = valueInput;\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      ${c}\n      ${Dn(t)}\n      ${S}\n      result[getIndexFromCoords4D(coords, vec4<i32>(uniforms.result_shape))/${i}] = value;\n    }\n  }`},ou=(e,t,r,o,i,u,a,c)=>{let p=t.format==="NHWC",h=p?e[0].dims[3]:e[0].dims[1],d=r[0],y=p?r[2]:r[3],w=p?r[1]:r[2],_=p?r[3]:r[1],v=p&&h%4===0&&h%3&&_%4===0,S=p?_:y*w,A=p?y*w:_,I=[8,8,1],x=o<=8?[4,1,1]:[4,4,1],E=[Math.ceil(S/I[0]/x[0]),Math.ceil(A/I[1]/x[1]),Math.ceil(d/I[2]/x[2])];Ve("verbose",()=>`[conv_backprop_mm_webgpu] dispatch = ${E}`);let P=v?4:1,O=Math.max(I[0]*P,I[1]),R=v?4:1,L=[t.kernelShape[p?1:2],t.kernelShape[p?2:3]],N=[L[0]+(t.dilations[0]<=1?0:(L[0]-1)*(t.dilations[0]-1)),L[1]+(t.dilations[1]<=1?0:(L[1]-1)*(t.dilations[1]-1))],K=[N[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),N[1]-1-Math.floor((t.pads[1]+t.pads[3])/2)],Q=[{type:6,data:o},{type:6,data:i},{type:6,data:u},{type:6,data:t.strides},{type:6,data:t.dilations},{type:6,data:L},{type:6,data:K}];xt(t,Q),Q.push(...Z(e[0].dims,e[1].dims));let he=["rank","rank"];a&&(Q.push(...Z(e[2].dims)),he.push("rank")),Q.push(...Z(r));let W=se=>{let Ce=U("x",e[0].dataType,e[0].dims.length,R),We=U("w",e[1].dataType,e[1].dims.length,1),ee=j("result",e[0].dataType,r.length,R),ae=[Ce,We],Ae="";if(a){let ue=U("bias",e[2].dataType,e[2].dims.length,R);ae.push(ue),Ae+=`\n          fn getBiasByOutputCoords(coords : vec4<i32>) -> ${ue.type.value} {\n            return bias[coords.${p?"w":"y"}${v?"/ 4":""}];\n          }`}let me=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"strides",type:"i32",length:2},{name:"dilations",type:"i32",length:2},{name:"filter_dims",type:"i32",length:L.length},{name:"pads",type:"i32",length:K.length}];Ct(t,me);let ie=De(e[0].dataType,1);if(ie!=="f16"&&ie!=="f32")throw new Error(`elemType ${ie} is not supported.`);return`\n        ${Mn("uniforms.result_strides")}\n        ${se.registerUniforms(me).declareVariables(...ae,ee)};\n        ${Ae}\n        ${Ac(p,a,t,Ce.type.value,P)}\n        ${v?Hr(x,I,ie,void 0,!p,O):Lr(x,I,ie,void 0,!p,O,!1,void 0,c)}`};return{name:"Conv2DTransposeMatMul",shaderCache:{hint:`${t.cacheKey};${x};${I};${v}`,inputDependencies:he},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:E[0],y:E[1],z:E[2]},programUniforms:Q}),getShaderSource:W}}});var Ic,Lo,au=Y(()=>{"use strict";ye();Lt();Se();_e();Ic=(e,t,r,o,i,u=!1,a,c,p=!1)=>{let h=p?1:2,d=p?2:3,y=p?3:1,w=u?2:1,_=`\n  fn setOutputAtIndex(flatIndex : u32, value : ${u?`vec4<${a}>`:a}) {\n    result[flatIndex] = ${u?`vec4<${a}>`:a}(value);\n  }`;o&&(_+=`\n    fn getBiasByOutputCoords(coords : vec4<u32>) -> ${u?`vec4<${a}>`:a} {\n      return bias[coords.${p?"w":"y"}${u?"/ 4":""}];\n    }`);let v=u?4:1,S=U("W",t[1].dataType,t[1].dims.length,v),A=U("Dy",t[0].dataType,t[0].dims.length,v),I=[A,S];o&&I.push(U("bias",t[2].dataType,[r[y]].length,v));let x=j("result",t[0].dataType,r.length,v),E=`{\n        let batch: u32 = ${i?"global_id.z":"workgroup_id.z"} / uniforms.result_shape[1];\n        let r = ${i?"global_id.z":"workgroup_id.z"} % uniforms.result_shape[1];\n        let c = ${i?"global_id.y":"workgroup_id.y"} * ${w};\n        let d1: u32 = ${i?"global_id.x":"workgroup_id.x"} * 4;\n\n        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(uniforms.pads);\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd: array<vec4<${a}>, ${w}>;\n        for (var i = 0; i < ${w}; i++) {\n          dotProd[i] = vec4<${a}>(0.0);\n        }\n        for (var wR: u32 = 0; wR < uniforms.filter_dims[0]; wR = wR + 1) {\n          var dyR = (${a}(dyCorner.x) + ${a}(wR)) / ${a}(uniforms.strides.x);\n          let wRPerm = uniforms.filter_dims[0] - 1 - wR;\n          if (dyR < 0.0 || dyR >= ${a}(uniforms.Dy_shape[1]) ||\n              fract(dyR) > 0.0 || wRPerm < 0) {\n            continue;\n          }\n          let idyR: u32 = u32(dyR);\n\n          for (var wC: u32 = 0; wC < uniforms.filter_dims[1]; wC = wC + 1) {\n            let dyC = (${a}(dyCorner.y) + ${a}(wC)) / ${a}(uniforms.strides.y);\n            let dyC2 = (${a}(dyCorner.y) + 1.0 + ${a}(wC)) / ${a}(uniforms.strides.y);\n            let wCPerm = uniforms.filter_dims[1] - 1 - wC;\n            if (wCPerm < 0) {\n              continue;\n            }\n            var bDyCVal = true;\n            var bDyCVal2 = true;\n            if (dyC < 0.0 || dyC >= ${a}(uniforms.Dy_shape[2]) ||\n                fract(dyC) > 0.0) {\n              bDyCVal = false;\n            }\n            if (dyC2 < 0.0 || dyC2 >= ${a}(uniforms.Dy_shape[2]) ||\n                fract(dyC2) > 0.0) {\n              bDyCVal2 = false;\n            }\n\n            let idyC: u32 = u32(dyC);\n            let idyC2: u32 = u32(dyC2);\n            if (bDyCVal && bDyCVal2) {\n              let d2Length = uniforms.Dy_shape[3];\n              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n\n                xValue =  ${A.get("batch","idyR","idyC2","d2")};\n\n                dotProd[1] = dotProd[1] + vec4<${a}>(dot(xValue, wValue0),\n                                                    dot(xValue, wValue1),\n                                                    dot(xValue, wValue2),\n                                                    dot(xValue, wValue3));\n              }\n            } else if (bDyCVal) {\n              let d2Length = uniforms.Dy_shape[${y}];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n              }\n            } else if (bDyCVal2) {\n              let d2Length = uniforms.Dy_shape[3];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC2","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[1] = dotProd[1] + tmpval;\n              }\n            }\n          }\n        }\n\n        for (var i: u32 = 0; i < ${w}; i = i + 1) {\n          let value = dotProd[i] + ${o?"bias[c+i]":`vec4<${a}>(0.0)`};\n          ${x.set("batch","r","c + i","d1","value")};\n        }\n      }`,P=`\n          let outputIndices = ${x.offsetToIndices("global_idx")};\n          let batch = ${x.indicesGet("outputIndices",0)};\n          let d1 = ${x.indicesGet("outputIndices",y)};\n          let r = ${x.indicesGet("outputIndices",h)};\n          let c = ${x.indicesGet("outputIndices",d)};\n          let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;\n          let dyRCorner = dyCorner.x;\n          let dyCCorner = dyCorner.y;\n          let groupId = d1 / uniforms.output_channels_per_group;\n          let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;\n          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n          // ? = to be determined. : = across all values in that axis.\n          var dotProd = ${a}(0.0);\n          for (var wR: u32 = 0; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {\n            if (wR % uniforms.dilations.x != 0) {\n              continue;\n            }\n            let dyR = (${a}(dyRCorner) + ${a}(wR)) / ${a}(uniforms.strides[0]);\n            let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;\n            if (dyR < 0.0 || dyR >= ${a}(uniforms.Dy_shape[${h}]) || fract(dyR) > 0.0 ||\n                wRPerm < 0) {\n              continue;\n            }\n            let idyR: u32 = u32(dyR);\n\n            for (var wC: u32 = 0; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {\n              if (wC % uniforms.dilations.y != 0) {\n                continue;\n              }\n              let dyC = (${a}(dyCCorner) + ${a}(wC)) / ${a}(uniforms.strides.y);\n              let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;\n              if (dyC < 0.0 || dyC >= ${a}(uniforms.Dy_shape[${d}]) ||\n                  fract(dyC) > 0.0 || wCPerm < 0) {\n                continue;\n              }\n              let idyC: u32 = u32(dyC);\n              var inputChannel = groupId * uniforms.input_channels_per_group;\n              for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group; d2 = d2 + 1) {\n                let xValue = ${p?A.get("batch","idyR","idyC","inputChannel"):A.get("batch","inputChannel","idyR","idyC")};\n                let wValue = ${S.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)")};\n                dotProd = dotProd + xValue * wValue;\n                inputChannel = inputChannel + 1;\n              }\n            }\n          }\n          let value = dotProd + ${o?"bias[d1]":`${a}(0.0)`};\n          ${x.setByOffset("global_idx","value")};\n        `;return`\n  ${e.registerUniforms(c).declareVariables(...I,x)}\n  ${_}\n\n    ${e.mainStart()}\n    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};\n  ${u?E:P}}`},Lo=(e,t,r)=>{let o=e.length>2,i=t.outputShape,u=M.size(i),a=[Math.ceil(u/64),1,1];Ve("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${a}`);let c=t.format==="NHWC",p=["rank","rank"],h=[t.strides[0],t.strides[1]],d=[t.kernelShape[c?1:2],t.kernelShape[c?2:3]],y=[t.dilations[0],t.dilations[1]],w=[d[0]+(t.dilations[0]<=1?0:(t.kernelShape[c?1:2]-1)*(t.dilations[0]-1)),d[1]+(t.dilations[1]<=1?0:(t.kernelShape[c?2:3]-1)*(t.dilations[1]-1))],_=[w[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),w[1]-1-Math.floor(t.pads[1]+t.pads[3])/2],v=!1,S=t.group,A=e[1].dims,I=A[0]/S,x=A[1],E=[{type:12,data:u},{type:12,data:h},{type:12,data:d},{type:12,data:y},{type:12,data:w},{type:6,data:_},{type:12,data:I},{type:12,data:x},...Z(e[0].dims,e[1].dims)];o&&(E.push(...Z(e[2].dims)),p.push("rank")),E.push(...Z(i));let P=a[1]===1&&a[2]===1,O=R=>{let L=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:h.length},{name:"filter_dims",type:"u32",length:d.length},{name:"dilations",type:"u32",length:d.length},{name:"effective_filter_dims",type:"u32",length:w.length},{name:"pads",type:"i32",length:_.length},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],N=De(e[0].dataType);return`${Ic(R,e,i,o,P,v,N,L,c)}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${t.cacheKey};`,inputDependencies:p},getRunData:()=>({dispatchGroup:{x:a[0],y:a[1],z:a[2]},outputs:[{dims:r?r(i):i,dataType:e[0].dataType}],programUniforms:E}),getShaderSource:O}}});var Tc,Ec,Pc,su,uu,kc,Oc,Rc,Bc,du,lu=Y(()=>{"use strict";iu();au();Ft();Sr();Tc=(e,t,r,o,i,u)=>(e-1)*t+r+(o-1)*i+1-u,Ec=(e,t,r,o,i)=>{let u=Math.floor(e/2);t==="SAME_UPPER"?(r[o]=u,r[i]=e-u):t==="SAME_LOWER"&&(r[o]=e-u,r[i]=u)},Pc=(e,t,r,o,i,u,a,c,p,h)=>{let d=e.length-2,y=h.length===0;if(p.length===0)for(let v=0;v<d;++v)p.push(0);let w=e[0],_=t[c?3:1]*i;for(let v=0,S=e.length-d-(c?1:0);v<d;++v,++S){let A=e[S],I=y?A*a[v]:h[v],x=Tc(A,a[v],u[v],t[S],r[v],I);Ec(x,o,u,v,v+d),y&&h.push(a[v]*(A-1)+p[v]+(t[S]-1)*r[v]+1-u[v]-u[v+d])}h.splice(0,0,w),h.splice(c?3:1,0,_)},su=(e,t)=>{let r=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((y,w)=>y*w,1)===0){r.length=0;for(let y=2;y<t[1].dims.length;++y)r.push(t[1].dims[y])}let o=e.format==="NHWC";r.splice(0,0,t[1].dims[0]),r.splice(o?3:1,0,t[1].dims[1]);let i=e.pads.slice(),u=e.outputShape.slice(),a=e.outputPadding.slice(),c=t[0].dims,p=e.dilations.slice();if(p.reduce((y,w)=>y+w,0)===0){let y=t[0].dims.length-2;p=new Array(y).fill(1)}let h=e.strides.slice();if(h.reduce((y,w)=>y+w,0)===0){let y=t[0].dims.length-2;h=new Array(y).fill(1)}Pc(c,r,p,e.autoPad,e.group,i,h,o,a,u);let d=Object.assign({},e);return Object.assign(d,{kernelShape:r,pads:i,outputPadding:a,outputShape:u,dilations:p,strides:h}),d},uu=e=>{let t=Bn(e),r=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],i=e.dilations,u=e.group,a=e.kernelShape,c=e.pads,p=e.strides,h=e.wIsConst(),d=e.outputPadding,y=e.outputShape;return{autoPad:o,format:r,dilations:i,group:u,kernelShape:a,outputPadding:d,outputShape:y,pads:c,strides:p,wIsConst:h,...t,cacheKey:`${e.format};${t.activation};`}},kc=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[0];if(r!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let i=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==i))throw new Error("invalid bias");let u=e[0].dims.length-2;if(t.dilations.reduce((d,y)=>d+y,0)>0&&t.dilations.length!==u)throw new Error(`dilations should be ${u}D`);if(t.strides.reduce((d,y)=>d+y,0)>0&&t.strides.length!==u)throw new Error(`strides should be ${u}D`);if(t.pads.reduce((d,y)=>d+y,0)>0&&t.pads.length!==u*2)throw new Error(`pads should be ${u*2}D`);if(t.outputPadding.length!==u&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${u}D`);if(t.kernelShape.reduce((d,y)=>d+y,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},Oc=[2,3,1,0],Rc=(e,t,r)=>{let o=su(r,t),i=r.format==="NHWC",u=o.outputShape,a=u[i?3:1],c=t[0].dims[i?3:1];if(o.group!==1||a===1&&c===1){e.compute(Lo(t,o));return}let p=u[i?1:2],h=u[i?2:3],d=t[1].dims[2],y=t[1].dims[3],w=i?p*h:a,_=i?a:p*h,v=d*y*c,S=!0,A=e.kernelCustomData.wT??e.compute(yt(t[1],Oc),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=A);let I=[t[0],A],x=t.length===3;x&&(!i&&t[2].dims.length===1?I.push(t[2].reshape([t[2].dims[0],1,1])):I.push(t[2])),e.compute(ou(I,o,u,w,_,v,x,S),{inputs:I})},Bc=(e,t)=>{let r=t.format==="NHWC",o=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&o.push(e.inputs[2]);let i=t.kernelShape;(i.length===0||i[0]===0)&&(i=[e.inputs[1].dims[2]]);let u=t.dilations;(u.length===0||u[0]===0)&&(u=[1]);let a=t.strides;(a.length===0||a[0]===0)&&(a=[1]);let c=t.pads;c.length===0&&(c=[0,0]),c=[0,c[0],0,c[1]],a=[1].concat(a),u=[1].concat(u),i=[1].concat(i);let p=su({...t,pads:c,strides:a,dilations:u,kernelShape:i},o);e.compute(Lo(o,p,h=>r?[h[0],h[2],h[3]]:[h[0],h[1],h[3]]))},du=(e,t)=>{kc(e.inputs,t),e.inputs[0].dims.length===3?Bc(e,t):Rc(e,e.inputs,t)}});var Dc,cu,pu,mu=Y(()=>{"use strict";ye();Se();Ze();_e();Dc=(e,t,r,o)=>{let i=M.size(t),u=t.length,a=U("input",e,u),c=j("output",e,u),p=r.dataType===6?r.getInt32Array()[0]:Number(r.getBigInt64Array()[0]),h=M.normalizeAxis(p,u),d=y=>{let w=` i32(${a.indicesGet("inputIndices","uniforms.axis")}) `,_=fe("uniforms.input_shape","uniforms.axis",u),v=o.reverse?w+(o.exclusive?" + 1":""):"0",S=o.reverse?_:w+(o.exclusive?"":" + 1");return`\n                ${y.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(a,c)}\n                ${y.mainStart()}\n                  ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n                  var inputIndices = ${c.offsetToIndices("global_idx")};\n                  var sum = ${c.type.value}(0);\n                  let first : i32 = ${v};\n                  let last : i32 = ${S};\n                  for (var i : i32 = first; i < last; i++) {\n                    ${a.indicesSet("inputIndices","uniforms.axis","u32(i)")};\n                    sum = sum + ${a.getByIndices("inputIndices")};\n                  }\n                  ${c.setByOffset("global_idx","sum")};\n                }`};return{name:"CumSum",shaderCache:{hint:o.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},{type:12,data:h},...Z(t,t)]}),getShaderSource:d}},cu=(e,t)=>{let r=e.inputs[0].dims,o=e.inputs[0].dataType,i=e.inputs[1];e.compute(Dc(o,r,i,t),{inputs:[0]})},pu=e=>{let t=e.exclusive===1,r=e.reverse===1;return ve({exclusive:t,reverse:r})}});var zc,Mc,Uc,fu,hu,gu=Y(()=>{"use strict";ye();Se();Ze();_e();zc=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},Mc=(e,t,r,o)=>{let i=[];i.push(`fn perm(i: ${o.type.indices}) -> ${r.type.indices} {\n    var a: ${r.type.indices};`);for(let u=0;u<t;++u)i.push(r.indicesSet("a",e[u],`i[${u}]`));return i.push("return a;}"),i.join(`\n`)},Uc=(e,t)=>{let r,o,i,u,a,c,p=t.format==="NHWC",h=t.blocksize,d=t.mode==="DCR";p?([r,o,i,u]=e.dims,a=d?[r,o,i,h,h,u/h**2]:[r,o,i,u/h**2,h,h],c=d?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([r,o,i,u]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],a=d?[r,h,h,u/h**2,o,i]:[r,u/h**2,h,h,o,i],c=d?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let y=e.reshape(a),w=y.dims.length,_=e.dataType,v=U("a",_,w),S=j("output",_,w),A=I=>`\n  ${I.registerUniform("output_size","u32").declareVariables(v,S)}\n\n  ${Mc(c,w,v,S)}\n\n  ${I.mainStart()}\n    ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let indices = ${S.offsetToIndices("global_idx")};\n    let aIndices = perm(indices);\n\n    ${S.setByOffset("global_idx",v.getByIndices("aIndices"))}\n  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${t.blocksize};${t.mode}`,inputDependencies:["rank"]},getRunData:I=>{let x=p?[r,o*h,i*h,u/h**2]:[r,u/h**2,o*h,i*h],E=M.size(x),P=y.dims,O=M.sortBasedOnPerm(P,c);return{outputs:[{dims:x,dataType:I[0].dataType}],dispatchGroup:{x:Math.ceil(E/64)},programUniforms:[{type:12,data:E},...Z(P,O)]}},getShaderSource:A}},fu=(e,t)=>{zc(e.inputs),e.compute(Uc(e.inputs[0],t))},hu=e=>ve({blocksize:e.blocksize,mode:e.mode,format:e.format})});var Fo,Wn,yu,Vc,Wc,qo,jo,bu,Nc,wu,vu,$u=Y(()=>{"use strict";ye();Se();Ze();_e();Fo="[a-zA-Z]|\\\\.\\\\.\\\\.",Wn="("+Fo+")+",yu="^"+Wn+"$",Vc="("+Wn+",)*"+Wn,Wc="^"+Vc+"$",qo=class{constructor(t=-1){this.symbolToIndices=new Map,this.inputIndex=t}addSymbol(t,r){let o=this.symbolToIndices.get(t);o===void 0?o=[r]:o.push(r),this.symbolToIndices.set(t,o)}},jo=class{constructor(t,r){this.equation=r;this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[o,i]=r.includes("->")?r.split("->",2):[r,""];if(!o.match(RegExp(Wc)))throw new Error("Invalid LHS term");if(o.split(",").forEach((c,p)=>{let h=t[p].dims.slice();if(!c.match(RegExp(yu)))throw new Error("Invalid LHS term");let d=this.processTerm(c,!0,h,p);this.lhs.push(d)}),i==="")i+=[...this.symbolToInfo.entries()].filter(([c,p])=>p.count===1||c==="...").map(([c])=>c).join("");else if(!i.match(RegExp(Wn)))throw new Error("Invalid RHS");i.match(RegExp(Fo,"g"))?.forEach(c=>{if(c==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let p=this.symbolToInfo.get(c);if(p===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(p.dimValue)}}),this.rhs=this.processTerm(i,!1,this.outputDims)}addSymbol(t,r,o){let i=this.symbolToInfo.get(t);if(i!==void 0){if(i.dimValue!==r&&i.count!==1)throw new Error("Dimension mismatch");i.count++,i.inputIndices.push(o)}else i={count:1,dimValue:r,inputIndices:[o]};this.symbolToInfo.set(t,i)}processTerm(t,r,o,i=-1){let u=o.length,a=!1,c=[],p=0;if(!t.match(RegExp(yu))&&!r&&t!=="")throw new Error("Invalid LHS term");let h=t.match(RegExp(Fo,"g")),d=new qo(i);return h?.forEach((y,w)=>{if(y==="..."){if(a)throw new Error("Only one ellipsis is allowed per input term");a=!0;let _=u-h.length+1;if(_<0)throw new Error("Ellipsis out of bounds");if(c=o.slice(p,p+_),this.hasEllipsis){if(this.ellipsisDims.length!==c.length||this.ellipsisDims.toString()!==c.toString())throw new Error("Ellipsis dimensions mismatch")}else if(r)this.hasEllipsis=!0,this.ellipsisDims=c;else throw new Error("Ellipsis must be specified in the LHS");for(let v=0;v<c.length;v++){let S=String.fromCharCode("0".charCodeAt(0)+v);d.addSymbol(S,w+v),this.addSymbol(S,o[p++],i)}}else d.addSymbol(y,w+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(y,o[p++],i)}),d}},bu=e=>e+"_max",Nc=(e,t,r,o)=>{let u=e.map(d=>d.length).map((d,y)=>U(`input${y}`,t,d)),a=M.size(o),c=j("output",t,o.length),p=[...r.symbolToInfo.keys()].filter(d=>!r.rhs.symbolToIndices.has(d)),h=d=>{let y=[],w="var prod = 1.0;",_="var sum = 0.0;",v="sum += prod;",S=[],A=[],I=[],x=[],E=r.symbolToInfo.size===r.rhs.symbolToIndices.size;r.symbolToInfo.forEach((O,R)=>{if(r.rhs.symbolToIndices.has(R)){let L=r.rhs.symbolToIndices.get(R)?.[0];L!==void 0&&r.lhs.forEach((N,K)=>{if(O.inputIndices.includes(K)){let Q=N.symbolToIndices.get(R);if(Q===void 0)throw new Error("Invalid symbol error");Q.forEach(he=>{y.push(`${u[K].indicesSet(`input${K}Indices`,he,c.indicesGet("outputIndices",L))}`)})}})}else r.lhs.forEach((L,N)=>{if(O.inputIndices.includes(N)){let K=L.symbolToIndices.get(R);if(K===void 0)throw new Error("Invalid symbol error");K.forEach(Q=>{S.push(`${u[N].indicesSet(`input${N}Indices`,Q,`${R}`)}`)}),x.push(`prod *= ${u[N].getByIndices(`input${N}Indices`)};`)}}),A.push(`for(var ${R}: u32 = 0; ${R} < uniforms.${bu(R)}; ${R}++) {`),I.push("}")});let P=E?[...y,`let sum = ${u.map((O,R)=>O.getByIndices(`input${R}Indices`)).join(" * ")};`]:[...y,_,...A,...S,w,...x,v,...I];return`\n            ${d.registerUniforms(p.map(O=>({name:`${bu(O)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...u,c)}\n\n            ${d.mainStart()}\n            ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n            var outputIndices = ${c.offsetToIndices("global_idx")};\n            ${u.map((O,R)=>`var input${R}Indices: ${u[R].type.indices};`).join(`\n`)}\n            ${P.join(`\n`)};\n            ${c.setByOffset("global_idx","sum")};\n          }`};return{name:"Einsum",shaderCache:{hint:r.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let d=p.filter(w=>r.symbolToInfo.has(w)).map(w=>({type:12,data:r.symbolToInfo.get(w)?.dimValue||0}));d.push({type:12,data:a});let y=e.map((w,_)=>[...Z(w)]).reduce((w,_)=>w.concat(_),d);return y.push(...Z(o)),{outputs:[{dims:o,dataType:t}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:y}},getShaderSource:h}},wu=(e,t)=>{let r=new jo(e.inputs,t.equation),o=r.outputDims,i=e.inputs.map((u,a)=>u.dims);e.compute(Nc(i,e.inputs[0].dataType,r,o))},vu=e=>{let t=e.equation.replace(/\\s+/g,"");return ve({equation:t})}});var Gc,_u,Hc,Lc,Su,xu=Y(()=>{"use strict";ye();Se();_e();Gc=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),o=r.length<t.length?0:r.length-t.length,i=t.length<r.length?0:t.length-r.length;for(;o<r.length&&i<t.length;++o,++i)if(r[o]!==t[i]&&r[o]!==1&&t[i]!==1)throw new Error("Expand requires shape to be broadcastable to input")},_u=(e,t)=>{let r=e.length-t.length,o=[];for(let i=0;i<r;++i)o.push(e[i]);for(let i=0;i<t.length;++i)o.push(t[i]===1?e[i+r]:t[i]);return o},Hc=(e,t)=>e.length>t.length?_u(e,t):_u(t,e),Lc=e=>{let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),o=Hc(t,r),i=e[0].dataType,u=i===9?4:1,a=Math.ceil(M.size(o)/u),c=h=>{let d=U("input",i,t.length,u),y=j("output",i,o.length,u),w;if(i===9){let _=(v,S,A="")=>`\n          let outputIndices${S} = ${y.offsetToIndices(`outputOffset + ${S}u`)};\n          let offset${S} = ${d.broadcastedIndicesToOffset(`outputIndices${S}`,y)};\n          let index${S} = offset${S} / 4u;\n          let component${S} = offset${S} % 4u;\n          ${v}[${S}] = ${A}(${d.getByOffset(`index${S}`)}[component${S}]);\n        `;w=`\n        let outputOffset = global_idx * ${u};\n        var data = vec4<u32>(0);\n        ${_("data",0,"u32")}\n        ${_("data",1,"u32")}\n        ${_("data",2,"u32")}\n        ${_("data",3,"u32")}\n        ${y.setByOffset("global_idx","data")}\n      }`}else w=`\n        let outputIndices = ${y.offsetToIndices("global_idx")};\n        let inputOffset = ${d.broadcastedIndicesToOffset("outputIndices",y)};\n        ${y.setByOffset("global_idx",d.getByOffset("inputOffset"))}\n      }`;return`\n    ${h.registerUniform("vec_size","u32").declareVariables(d,y)}\n    ${h.mainStart()}\n    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n    ${w}`},p=[{type:12,data:a},...Z(t,o)];return{name:"Expand",shaderCache:{hint:`${o.length}`,inputDependencies:["rank"]},getShaderSource:c,getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:p})}},Su=e=>{Gc(e.inputs),e.compute(Lc(e.inputs),{inputs:[0]})}});var Fc,Cu,Au=Y(()=>{"use strict";ye();Se();_e();Rn();Fc=e=>{let t=e[0].dataType,r=M.size(e[0].dims),o=M.size(e[1].dims),i=o%4===0,u=a=>{let c=U("x",t,[1],4),p=U("bias",t,[1],4),h=j("y",t,[1],4),d=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],y=_=>`\n      let bias${_}_offset: u32 = (global_idx * 4 + ${_}) % uniforms.bias_size;\n      let bias${_} = ${p.getByOffset(`bias${_}_offset / 4`)}[bias${_}_offset % 4];`,w=i?`\n      let bias = ${p.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${y(0)}${y(1)}${y(2)}${y(3)}\n      let bias = ${c.type.value}(bias0, bias1, bias2, bias3);`;return`${a.registerUniforms(d).declareVariables(c,p,h)}\n\n    ${Bo(et(t))}\n\n    ${a.mainStart(or)}\n      ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}\n\n      let x = ${c.getByOffset("global_idx")};\n      ${w}\n      let x_in = x + bias;\n      ${h.setByOffset("global_idx",Do("x_in"))}\n    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${i}`,inputDependencies:["type","type"]},getShaderSource:u,getRunData:a=>({outputs:[{dims:a[0].dims,dataType:a[0].dataType}],programUniforms:[{type:12,data:Math.ceil(r/4)},{type:12,data:o}],dispatchGroup:{x:Math.ceil(r/or/4)}})}},Cu=e=>{e.inputs.length<2||M.size(e.inputs[1].dims)===0?Bs(e):e.compute(Fc(e.inputs))}});var qc,jc,Iu,Tu,Eu=Y(()=>{"use strict";ye();Se();Ze();_e();qc=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},jc=(e,t)=>{let r=e[0].dims,o=e[1].dims,i=r.length,u=M.normalizeAxis(t.axis,i),a=r.slice(0);a.splice(u,1,...o);let c=r[u],p=e[0].dataType===9?4:1,h=Math.ceil(M.size(a)/p),d=[{type:12,data:h},{type:6,data:c},{type:12,data:u},...Z(e[0].dims,e[1].dims,a)],y=w=>{let _=U("data",e[0].dataType,e[0].dims.length,p),v=U("inputIndices",e[1].dataType,e[1].dims.length),S=j("output",e[0].dataType,a.length,p),A=x=>{let E=o.length,P=`var indicesIndices${x}  = ${v.type.indices}(0);`;for(let O=0;O<E;O++)P+=`${E>1?`indicesIndices${x}[${O}]`:`indicesIndices${x}`} = ${a.length>1?`outputIndices${x}[uniforms.axis + ${O}]`:`outputIndices${x}`};`;P+=`\n          var idx${x} = ${v.getByIndices(`indicesIndices${x}`)};\n          if (idx${x} < 0) {\n            idx${x} = idx${x} + uniforms.axisDimLimit;\n          }\n          var dataIndices${x} : ${_.type.indices};\n        `;for(let O=0,R=0;O<i;O++)O===u?(P+=`${i>1?`dataIndices${x}[${O}]`:`dataIndices${x}`} = u32(idx${x});`,R+=E):(P+=`${i>1?`dataIndices${x}[${O}]`:`dataIndices${x}`} = ${a.length>1?`outputIndices${x}[${R}]`:`outputIndices${x}`};`,R++);return P},I;if(e[0].dataType===9){let x=(E,P,O="")=>`\n          let outputIndices${P} = ${S.offsetToIndices(`outputOffset + ${P}u`)};\n          ${A(P)};\n          let offset${P} = ${_.indicesToOffset(`dataIndices${P}`)};\n          let index${P} = offset${P} / 4u;\n          let component${P} = offset${P} % 4u;\n          ${E}[${P}] = ${O}(${_.getByOffset(`index${P}`)}[component${P}]);\n        `;I=`\n        let outputOffset = global_idx * ${p};\n        var value = vec4<u32>(0);\n        ${x("value",0,"u32")}\n        ${x("value",1,"u32")}\n        ${x("value",2,"u32")}\n        ${x("value",3,"u32")}\n        ${S.setByOffset("global_idx","value")}\n      `}else I=`\n      let outputIndices = ${S.offsetToIndices("global_idx")};\n      ${A("")};\n      let value = ${_.getByIndices("dataIndices")};\n      ${S.setByOffset("global_idx","value")};\n      `;return`\n      ${w.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(_,v,S)}\n      ${w.mainStart()}\n        ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n        ${I}\n      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:d}),getShaderSource:y}},Iu=e=>ve({axis:e.axis}),Tu=(e,t)=>{let r=e.inputs;qc(r),e.compute(jc(e.inputs,t))}});var Kc,Yc,Pu,ku,Ou=Y(()=>{"use strict";ye();Se();Ze();_e();Kc=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and\n                     indices input tensors be of same rank.`)},Yc=(e,t)=>{let r=e[0].dims,o=e[0].dataType,i=r.length,u=e[1].dims,a=e[1].dataType,c=M.normalizeAxis(t.axis,i),p=r[c],h=u.slice(0),d=M.size(h),y=U("input",o,i),w=U("indicesInput",a,u.length),_=j("output",o,h.length),v=[{type:12,data:d},{type:6,data:p},{type:12,data:c}];return v.push(...Z(r,u,h)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:h,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:v}),getShaderSource:I=>`\n      ${I.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(y,w,_)}\n      ${I.mainStart()}\n      ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n      let outputIndices = ${_.offsetToIndices("global_idx")};\n\n      var idx = ${w.getByOffset("global_idx")};\n      if (idx < 0) {\n        idx = idx + uniforms.axisDimLimit;\n      }\n      var inputIndices = ${y.type.indices}(outputIndices);\n      ${y.indicesSet("inputIndices","uniforms.axis","u32(idx)")};\n      let value = ${y.getByIndices("inputIndices")};\n\n      ${_.setByOffset("global_idx","value")};\n  }`}},Pu=e=>ve({axis:e.axis}),ku=(e,t)=>{let r=e.inputs;Kc(r),e.compute(Yc(e.inputs,t))}});var Zc,Xc,Ru,Bu,Du=Y(()=>{"use strict";ye();Se();_e();Zc=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},Xc=(e,t)=>{let r=e[0].dims.slice(),o=e[1].dims.slice(),[i,u,a]=Sn.getShapeOfGemmResult(r,t.transA,o,t.transB,e.length===3?e[2].dims:void 0),c=[i,u];if(!c)throw new Error("Can\'t use gemm on the given tensors");let p=M.size(c),h=[{type:12,data:p},{type:12,data:i},{type:12,data:u},{type:12,data:a},{type:1,data:t.alpha},{type:1,data:t.beta}],d=["type","type"];e.length===3&&(h.push(...Z(e[2].dims)),d.push("rank")),h.push(...Z(c));let y=w=>{let _="";t.transA&&t.transB?_="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?_="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?_="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(_="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let v=t.alpha===1?"":"value *= uniforms.alpha;",S=U("a",e[0].dataType,e[0].dims),A=U("b",e[1].dataType,e[1].dims),I=S.type.value,x=null,E=[S,A];e.length===3&&(x=U("c",e[2].dataType,e[2].dims.length),E.push(x));let P=j("output",e[0].dataType,c.length);E.push(P);let O=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`\n  ${w.registerUniforms(O).declareVariables(...E)}\n\n  ${w.mainStart()}\n    ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let m = global_idx / uniforms.N;\n    let n = global_idx % uniforms.N;\n\n    var value = ${I}(0);\n    for (var k: u32 = 0u; k < uniforms.K; k++) {\n      ${_}\n    }\n\n    ${v}\n    ${(()=>x!=null?`let cOffset = ${x.broadcastedIndicesToOffset("vec2(m, n)",P)}; value += ${I}(uniforms.beta) * ${x.getByOffset("cOffset")};`:"")()}\n    output[global_idx] = value;\n  }`};return{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:c,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h}),getShaderSource:y}},Ru=e=>{let t=e.transA,r=e.transB,o=e.alpha,i=e.beta;return{transA:t,transB:r,alpha:o,beta:i,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},Bu=(e,t)=>{Zc(e.inputs),e.compute(Xc(e.inputs,t))}});var Qc,Jc,ep,zu,Mu=Y(()=>{"use strict";ye();Se();_e();Qc=(e,t)=>{let r=e[0].dims,o=r,i=2,u=M.sizeToDimension(r,i),a=M.sizeFromDimension(r,i),c=Me(a),p=a/c,h=[r[0],r[1],p],d=["rank","type","type"],y=[{type:12,data:a},{type:12,data:p}];y.push(...Z(h,h));let w=_=>{let v=U("x",e[0].dataType,h.length,c),S=U("scale",e[1].dataType,e[1].dims),A=U("bias",e[2].dataType,e[2].dims),I=j("output",e[0].dataType,h.length,c),x=[v,S,A,I],E=v.type.value,P=c===1?"f32":`vec${c}<f32>`,O=64,R=[{name:"normSize",type:"u32"},{name:"normPackedSize",type:"u32"}];return`\n  var<workgroup> meanShared : f32;\n  var<workgroup> squaredNormShared : f32;\n  var<workgroup> workgroupShared : array<${P}, ${O}>;\n  const workgroupSize = ${O}u;\n  ${_.registerUniforms(R).declareVariables(...x)}\n  ${_.mainStart(O)}\n    let norm = global_idx / workgroupSize;\n    let batch = norm / uniforms.x_shape[1];\n    let channel = norm % uniforms.x_shape[1];\n    let localIndex = local_id.x;\n\n    // initialize workgroup memory\n    var initial = ${P}(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      initial = initial + ${P}(${v.get("batch","channel","h")});\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the mean of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      meanShared = ${_t("workgroupShared[0]",c)} / f32(uniforms.normSize);\n    }\n    workgroupBarrier();\n\n    // reinitialize workgroup memory.\n    initial = ${P}(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let deviation =  ${P}(${v.get("batch","channel","h")}) - ${P}(meanShared);\n      initial = initial + deviation * deviation;\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the sum of square of deviation of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      squaredNormShared = ${_t("workgroupShared[0]",c)};\n    }\n    workgroupBarrier();\n\n    let invStdDev = inverseSqrt(squaredNormShared / f32(uniforms.normSize) + f32(${t.epsilon}));\n    let channelScale = invStdDev * f32(${S.getByOffset("channel")});\n    let channelShift = f32(${A.getByOffset("channel")}) - meanShared * channelScale;\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let value = ${v.get("batch","channel","h")} * ${E}(${P}(channelScale)) + ${E}(${P}(channelShift));\n      ${I.set("batch","channel","h","value")};\n    }\n  }`};return{name:"InstanceNormalization",shaderCache:{hint:`${t.epsilon};${c}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:u},programUniforms:y}),getShaderSource:w}},Jc=(e,t,r,o,i,u,a,c)=>{let p=Me(a),h=64,d=p===1?"vec2f":`mat2x${p}f`,y=p===1?"f32":`vec${p}f`,w=(R,L)=>`${d}(${R}, ${L})`,_=i*a/p,v=Math.ceil(u/h),S=["type"],A=[{type:12,data:v},{type:12,data:u},{type:12,data:Math.floor(a/p)},{type:12,data:Math.floor(u*a/p)}],I=R=>{let L=U("input",t.dataType,t.dims,p);return`\n  ${R.declareVariables(L)}\n  @group(0) @binding(1) var<storage, read_write> output : array<${d}>;\n  struct Uniforms {wg_size:u32, H:u32, C:u32, image_size:u32};\n  @group(0) @binding(2) var<uniform> uniforms: Uniforms;\n\n  ${R.mainStart(h)}\n    let currentImageNumber = global_idx / ${h} / uniforms.C;\n    let currentChannelNumber = (global_idx / ${h}) % uniforms.C;\n    let wgOffset = local_id.x * uniforms.wg_size;\n    if (wgOffset >= uniforms.H) {\n        return;\n    }\n    let wgMax = min(wgOffset + uniforms.wg_size, uniforms.H);\n\n    let offset = currentImageNumber * uniforms.image_size + currentChannelNumber;\n    var sum = ${$t("f32",p)};\n    var squaredSum = ${$t("f32",p)};\n    for (var i: u32 = wgOffset; i < wgMax; i++) {\n        let value = ${y}(input[offset + i * uniforms.C]);\n        sum += value;\n        squaredSum += value * value;\n    }\n    output[global_idx] = ${w("sum","squaredSum")};\n  }`},x=e.compute({name:"InstanceNormComputeMean",shaderCache:{hint:`${p}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:[i,a,h,2],dataType:1}],dispatchGroup:{x:i*a/p},programUniforms:A}),getShaderSource:I},{inputs:[t],outputs:[-1]})[0],E=[{type:12,data:_},{type:12,data:u},{type:12,data:Math.floor(a/p)},{type:12,data:Math.floor(h*a/p)}],P=["type","type","type"],O=R=>{let L=U("scale",r.dataType,r.dims,p),N=U("bias",o.dataType,o.dims,p);return`\n  @group(0) @binding(0) var<storage, read> input : array<${d}>;\n  @group(0) @binding(1) var<storage, read> scale : array<${L.type.storage}>;\n  @group(0) @binding(2) var<storage, read> bias : array<${N.type.storage}>;\n  @group(0) @binding(3) var<storage, read_write> output : array<${d}>;\n  struct Uniforms {units_of_work : u32, H: u32, C : u32, image_size : u32};\n  @group(0) @binding(4) var<uniform> uniforms: Uniforms;\n\n  ${R.mainStart()}\n    ${R.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.units_of_work")}\n    let currentImageNumber = global_idx / uniforms.C;\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let offset = currentImageNumber * uniforms.image_size;\n    var sum = ${$t("f32",p)};\n    var squaredSum = ${$t("f32",p)};\n    for (var i: u32 = 0; i < min(${h}, uniforms.H); i++) {\n        let value = input[offset + i + currentChannelNumber * ${h}];\n        sum += value[0];\n        squaredSum += value[1];\n    }\n    sum = sum / f32(uniforms.H);\n    squaredSum = squaredSum / f32(uniforms.H);\n    let invStdDev = inverseSqrt(squaredSum - sum * sum + f32(${c}));\n    let channelScale = invStdDev * ${y}(scale[currentChannelNumber]);\n    let channelShift = ${y}(bias[currentChannelNumber]) - sum * channelScale;\n\n    output[global_idx] = ${w("channelScale","channelShift")};\n  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${p};${c}`,inputDependencies:P},getRunData:()=>({outputs:[{dims:[i,a,2],dataType:1}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:E}),getShaderSource:O},{inputs:[x,r,o],outputs:[-1]})[0]},ep=(e,t,r)=>{let o=t[0].dims,i=o,u=o[0],a=o[o.length-1],c=M.sizeFromDimension(o,1)/a,p=Me(a),h=M.size(i)/p,d=[{type:12,data:c},{type:12,data:Math.floor(a/p)}],y=["type","type"],w=Jc(e,t[0],t[1],t[2],u,c,a,r.epsilon),_=v=>{let S=De(t[0].dataType),A=p===1?"vec2f":`mat2x${p}f`,I=p===1?S:`vec${p}<${S}>`,x=U("input",t[0].dataType,t[0].dims,p),E=j("output",t[0].dataType,i,p);return`\n  @group(0) @binding(0) var<storage, read> input : array<${x.type.storage}>;\n  @group(0) @binding(1) var<storage, read> scaleInput : array<${A}>;\n  @group(0) @binding(2) var<storage, read_write> output : array<${E.type.storage}>;\n  struct Uniforms {H: u32, C : u32};\n  @group(0) @binding(3) var<uniform> uniforms: Uniforms;\n\n  ${v.mainStart()}\n    let currentImageNumber = global_idx / (uniforms.C * uniforms.H);\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let scaleOffset = currentImageNumber * uniforms.C + currentChannelNumber;\n    let scale = scaleInput[scaleOffset];\n    output[global_idx] = fma(input[global_idx], ${I}(scale[0]), ${I}(scale[1]));\n  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${p}`,inputDependencies:y},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:d}),getShaderSource:_},{inputs:[t[0],w]})},zu=(e,t)=>{t.format==="NHWC"?ep(e,e.inputs,t):e.compute(Qc(e.inputs,t))}});var tp,rp,Uu,Vu=Y(()=>{"use strict";ye();Se();_e();tp=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},rp=(e,t,r)=>{let o=t.simplified,i=e[0].dims,u=e[1],a=!o&&e[2],c=i,p=M.normalizeAxis(t.axis,i.length),h=M.sizeToDimension(i,p),d=M.sizeFromDimension(i,p),y=M.size(u.dims),w=a?M.size(a.dims):0;if(y!==d||a&&w!==d)throw new Error(`Size of X.shape()[axis:] == ${d}.\n       Size of scale and bias (if provided) must match this.\n       Got scale size of ${y} and bias size of ${w}`);let _=[];for(let O=0;O<i.length;++O)O<p?_.push(i[O]):_.push(1);let v=Me(d),S=["type","type"],A=[{type:12,data:h},{type:1,data:d},{type:12,data:Math.floor(d/v)},{type:1,data:t.epsilon}];a&&S.push("type");let I=r>1,x=r>2,E=O=>{let R=De(e[0].dataType),L=[U("x",e[0].dataType,e[0].dims,v),U("scale",u.dataType,u.dims,v)];a&&L.push(U("bias",a.dataType,a.dims,v)),L.push(j("output",e[0].dataType,c,v)),I&&L.push(j("mean_data_output",1,_)),x&&L.push(j("inv_std_output",1,_));let N=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`\n  ${O.registerUniforms(N).declareVariables(...L)}\n  ${O.mainStart()}\n    ${O.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}\n    let offset = global_idx * uniforms.norm_size_vectorized;\n    var mean_vector = ${$t("f32",v)};\n    var mean_square_vector = ${$t("f32",v)};\n\n    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {\n      let value = ${ir(R,v,"x[h + offset]")};\n      mean_vector += value;\n      mean_square_vector += value * value;\n    }\n    let mean = ${_t("mean_vector",v)} / uniforms.norm_size;\n    let inv_std_dev = inverseSqrt(${_t("mean_square_vector",v)} / uniforms.norm_size ${o?"":"- mean * mean"} + uniforms.epsilon);\n\n    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {\n      let f32input = ${ir(R,v,"x[j + offset]")};\n      let f32scale = ${ir(R,v,"scale[j]")};\n      output[j + offset] = ${L[0].type.value}((f32input ${o?"":"- mean"}) * inv_std_dev * f32scale\n        ${a?`+ ${ir(R,v,"bias[j]")}`:""}\n      );\n    }\n\n    ${I?"mean_data_output[global_idx] = mean":""};\n    ${x?"inv_std_output[global_idx] = inv_std_dev":""};\n  }`},P=[{dims:c,dataType:e[0].dataType}];return I&&P.push({dims:_,dataType:1}),x&&P.push({dims:_,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${v};${r};${o}`,inputDependencies:S},getRunData:()=>({outputs:P,dispatchGroup:{x:Math.ceil(h/64)},programUniforms:A}),getShaderSource:E}},Uu=(e,t)=>{tp(e.inputs),e.compute(rp(e.inputs,t,e.outputCount))}});var np,op,Wu,Nu,Gu=Y(()=>{"use strict";ye();Se();Ze();_e();np=(e,t)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let r=e[0],o=r.dims.length;if(r.dims[o-1]!==t.k)throw new Error("The last dim of input shape does not match the k value");let i=Math.floor((t.k+t.blockSize-1)/t.blockSize),u=t.blockSize/8*t.bits,a=e[1];if(!M.areEqual(a.dims,[t.n,i,u]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let p=e[2].dims;if(M.size(p)!==t.n*i)throw new Error("scales input size error.");if(e.length===4){let d=e[3].dims,y=t.bits>4?t.n*i:t.n*Math.floor((i+1)/2);if(M.size(d)!==y)throw new Error("zeroPoints input size error.")}},op=(e,t,r,o)=>{let i=e[0].dims,u=i.length,a=Math.floor((t.k+t.blockSize-1)/t.blockSize),c=i[u-2],p=t.k,h=t.n,d=i.slice(0,u-2),y=M.size(d),_=t.blockSize/8*t.bits/4,v=e[0].dataType,S=Me(c),A=Me(t.k),I=Me(_),x=tr(v),E=c*a*x,P=Math.floor(o/E),O=a<=r[0]&&P>0,R=!O||P>=4?Me(h):P>=2&&Me(h)>=2?2:1,L=d.concat([c,h]),N=M.size(L)/R/S,K=O?[]:[{type:12,data:N},{type:12,data:t.blockSize}],Q=[y,c,p/A],he=M.convertShape(e[1].dims).slice();he.splice(-1,1,_/I),K.push(...Z(Q)),K.push(...Z(he)),K.push(...Z(e[2].dims)),e.length===4&&K.push(...Z(M.convertShape(e[3].dims)));let W=[y,c,h/R];K.push(...Z(W));let se=Ce=>{let We=Q.length,ee=U("a",e[0].dataType,We,A),ae=U("b",12,he.length,I),Ae=U("scales",e[2].dataType,e[2].dims.length),me=[ee,ae,Ae],ie=e.length===4?U("zero_points",12,e[3].dims.length):void 0;ie&&me.push(ie);let ue=W.length,le=j("output",e[0].dataType,ue,R),qe=[{name:"output_size",type:"u32"},{name:"block_size",type:"u32"}],G=De(e[0].dataType),ne=(()=>{switch(A){case 1:return`array<${G}, 8>`;case 2:return`mat4x2<${G}>`;case 4:return`mat2x4<${G}>`;default:throw new Error(`${A}-component is not supported.`)}})(),xe=`\n        for (var word: u32 = 0; word < ${_}; word += ${I}) {\n          ${ae.indicesSet("b_indices","2","word")};\n          let b_data = ${ae.getByIndices("b_indices")};\n          for (var i: u32 = 0; i < ${I}; i++) {\n            let b_value: u32 = ${I===1?"b_data":"b_data[word + i]"};\n            let b_mask: u32 = 0x0F0F0F0Fu;\n            let b_value_lower: vec4<u32> = unpack4xU8(b_value & b_mask);\n            let b_value_upper: vec4<u32> = unpack4xU8((b_value >> 4) & b_mask);\n            let b_quantized_values = ${ne}(${Array.from({length:4},(Be,Ge)=>`${G}(b_value_lower[${Ge}]), ${G}(b_value_upper[${Ge}])`).join(", ")});\n            let b_dequantized_values = ${(()=>A===1?`${ne}(${Array.from({length:8},(Be,Ge)=>`(b_quantized_values[${Ge}] - zero_point) * scale`).join(", ")});`:`(b_quantized_values - ${ne}(${Array(8).fill("zero_point").join(",")})) * scale;`)()};\n            // Number of B elements per 32-bit word is 32/bits = 32/4 = 8\n            for (var m: u32 = 0; m < ${O?c:S}u; m++) {\n              ${ee.indicesSet("a_indices",We-2,O?"m":`row * ${S} + m`)};\n              ${ee.indicesSet("a_indices",We-1,"word_offset")};\n              var input_offset = ${ee.indicesToOffset("a_indices")};\n              var a_data: ${ne};\n              for (var j: u32 = 0; j < ${8/A}; j++) {\n                a_data[j] = ${ee.getByOffset("input_offset")};\n                input_offset++;\n              }\n              ${O?"workgroup_shared[workgroup_shared_offset + m]":"output_values[m]"}${R>1?"[c]":""} += ${Array.from({length:8/A},(Be,Ge)=>`${A===1?`a_data[${Ge}] * b_dequantized_values[${Ge}]`:`dot(a_data[${Ge}], b_dequantized_values[${Ge}])`}`).join(" + ")};\n            }\n            word_offset += ${8/A};\n          }\n        }`,Ke=ie?`\n          zero_point_offset += 4;\n          if (zero_point_offset == 32) {\n            zero_point_offset = 0;\n            zero_point_index++;\n            zero_point_word = ${ie.getByOffset("zero_point_index")};\n          }`:"";return O?`\n        var<workgroup> workgroup_shared: array<${le.type.value}, ${c*a}>;\n        ${Ce.declareVariables(...me,le)}\n        ${Ce.mainStart([a,1,1])}\n          var a_indices: ${ee.type.indices};\n          var block = local_id.x;\n          var col = workgroup_id.y;\n          var batch = workgroup_id.z;\n          ${ee.indicesSet("a_indices","0","batch")};\n          // Two zero points are packed into one byte when uniforms.bits is 4.\n          for (var c: u32 = 0; c < ${R}; c++) {\n            let col_times_components_plus_c = col * ${R} + c;\n              ${ie?`\n            var zero_point_bytes_per_col: u32 = (${a} + 1) / 2;\n            var zero_point_byte_count: u32 = col_times_components_plus_c * zero_point_bytes_per_col + (block >> 0x1u);\n            var zero_point_word_index: u32 = zero_point_byte_count >> 0x2u;\n            var zero_point_byte_offset: u32 = zero_point_byte_count & 0x3u;\n            var zero_point_nibble_offset: u32 = block & 0x1u;\n            var zero_point_bits_offset: u32 = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);\n            var zero_point_word: u32 = ${ie.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;`:""}\n            var b_indices: ${ae.type.indices};\n            ${ae.indicesSet("b_indices","0","col_times_components_plus_c")};\n            // The scale and zero points are computed per block.\n            var scales_index = col_times_components_plus_c * ${a} + block;\n            let scale = ${Ae.getByOffset("scales_index")};\n            // The default zero point is 8 for unsigned 4-bit quantization.\n            let zero_point = ${G}(${ie?"(zero_point_word) & 0xFu":8});\n            ${ae.indicesSet("b_indices","1","block")};\n            var word_offset: u32 = block * ${t.blockSize/A};\n            var workgroup_shared_offset: u32 = block * ${c};\n            ${xe}\n          }\n          workgroupBarrier();\n          if (local_id.x == 0u) {\n            var output_indices: ${le.type.indices};\n            ${le.indicesSet("output_indices","0","batch")};\n            ${le.indicesSet("output_indices",ue-1,"col")};\n            ${le.indicesSet("output_indices",ue-2,"0")};\n            var output_offset = ${le.indicesToOffset("output_indices")};\n            for (var m: u32 = 0u; m < ${c}u; m++) {\n              var output_value: ${le.type.value} = ${le.type.value}(0);\n              var workgroup_shared_offset: u32 = m;\n              for (var b: u32 = 0u; b < ${a}u; b++) {\n                output_value += workgroup_shared[workgroup_shared_offset];\n                workgroup_shared_offset += ${c};\n              }\n              ${le.setByOffset("output_offset","output_value")};\n              output_offset += ${h/R};\n            }\n          }\n        }`:`\n        ${Ce.registerUniforms(qe).declareVariables(...me,le)}\n        ${Ce.mainStart()}\n          ${Ce.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n          var output_values: array<${le.type.value}, ${S}>;\n          var output_indices = ${le.offsetToIndices("global_idx")};\n          var col = ${le.indicesGet("output_indices",ue-1)};\n          var row = ${le.indicesGet("output_indices",ue-2)};\n          var a_indices: ${ee.type.indices} = output_indices;\n          // Two zero points are packed into one byte because uniforms.bits <= 4.\n          // zero_point_offset is either 0 or 4. It is bit offset within one byte.\n          // TODO support zero_point_offset for bits > 4\n          ${ie?`\n          var zero_point_abs_offset = col * ${R} * ((${a} + 1) / 2);\n          var zero_point_index: u32 = zero_point_abs_offset / 4;\n          var zero_point_word: u32 = ${ie.getByOffset("zero_point_index")};\n          var zero_point_offset: u32 = (zero_point_abs_offset % 4) * 8;`:""}\n          var scale_index = col * ${a*R};\n          var b_indices: ${ae.type.indices};\n          for (var c: u32 = 0; c < ${R}; c++) {\n            ${ae.indicesSet("b_indices","0",`col * ${R} + c`)};\n            var block_offset: u32 = 0;\n            for (var block: u32 = 0; block < ${a}; block++) {\n              // The scale and zero points are computed per block.\n              let scale = ${Ae.getByOffset("scale_index")};\n              // The default zero point is 8 for unsigned 4-bit quantization.\n              let zero_point = ${G}(${ie?"extractBits(zero_point_word, zero_point_offset, 4)":8});\n              ${ae.indicesSet("b_indices","1","block")};\n              var word_offset: u32 = block_offset;\n              ${xe}\n              scale_index++;\n              ${Ke}\n              block_offset += uniforms.block_size / ${A};\n            }\n            // Drop the trailing 4 bits if the zero_poit_offset is not a byte boundary to align with the next byte.\n            ${ie?`if (zero_point_offset % 8 > 0) {\n                ${Ke}\n              }`:""}\n            }\n            for (var k: u32 = 0u; k < ${S}u; k++) {\n              ${le.indicesSet("output_indices",ue-2,`${S} * row + k`)};\n              ${le.setByIndices("output_indices","output_values[k]")}\n            }\n        }`};return{name:O?"BlockwiseMatMulNBits":"MatMulNBits",shaderCache:{hint:`${t.cacheKey};${c};${v};${e.length}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:L,dataType:v}],name:O?"BlockwiseMatMulNBits":"MatMulNBits",dispatchGroup:O?{x:1,y:Math.ceil(h/R),z:y}:{x:Math.ceil(N/64)},programUniforms:K}),getShaderSource:se}},Wu=(e,t)=>{np(e.inputs,t);let r=e.getMaxComputeWorkgroupSizes(),o=e.getMaxComputeWorkgroupStoragesize();e.compute(op(e.inputs,t,r,o))},Nu=e=>ve(e)});var it,ip,Lu,Hu,ap,Ko,Fu,qu=Y(()=>{"use strict";ye();Se();Ze();_n();Ro();_e();Sr();it=(e,t)=>e.length>t&&e[t].dims.length>0&&M.size(e[t].dims)>0?e[t]:void 0,ip=(e,t)=>{let r=e[0],o=it(e,1),i=it(e,2),u=it(e,3),a=it(e,4),c=it(e,5),p=it(e,6),h=it(e,7);if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let d=!1,y=r.dims[0],w=r.dims[1],_=r.dims.length===3?d?r.dims[2]/3:r.dims[2]:t.numHeads*r.dims[4],v=w,S=0,A=0,I=Math.floor(_/t.numHeads);if(p&&h){if(p.dims.length!==4)throw new Error(\'Input "past_key" is expected to have 4 dimensions\');if(p.dims[0]!==y||p.dims[1]!==t.numHeads||p.dims[3]!==I)throw new Error(\'Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)\');if(h.dims[0]!==y||h.dims[1]!==t.numHeads||h.dims[3]!==I)throw new Error(\'Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)\');if(p.dims[2]!==h.dims[2])throw new Error(\'Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)\');if(h.dims.length!==4)throw new Error(\'Input "past_value" is expected to have 4 dimensions\');S=p.dims[2],A=p.dims[2]}else if(p||h)throw new Error(\'Input "past_key" and "past_value" shall be both present or both absent\');let x;if(o){if(r.dims.length!==3)throw new Error(\'Input "query" is expected to have 3 dimensions when key is given\');if(o.dims.length<3||o.dims.length>5)throw new Error(\'Input "key" is expected to have 3, 4, or 5 dimensions\');if(r.dims[0]!==o.dims[0])throw new Error(\'Input "query" and "key" shall have same dim 0 (batch size)\');if(o.dims.length===3){if(o.dims[2]!==r.dims[2])throw new Error(\'Input "query" and "key" shall have same dim 2 (hidden_size)\');x=2,v=o.dims[1]}else if(o.dims.length===5){if(o.dims[2]!==t.numHeads||o.dims[3]!==2||o.dims[4]!==I)throw new Error(\'Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv\');if(i)throw new Error(\'Expect "value" be none when "key" has packed kv format.\');x=5,v=o.dims[1]}else{if(o.dims[1]!==t.numHeads||o.dims[3]!==I)throw new Error(\'Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key\');x=0,v=o.dims[2]}}else{if(r.dims.length!==3&&r.dims.length!==5)throw new Error(\'Input "query" is expected to have 3 or 5 dimensions when key is empty\');if(r.dims.length===5&&(r.dims[2]!==t.numHeads||r.dims[3]!==3))throw new Error(\'Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv\');x=3}if(u){if(u.dims.length!==1)throw new Error(\'Input "bias" is expected to have 1 dimension\');if(i&&r.dims.length===5&&r.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let E=0;if(a){E=8;let N=a.dims;throw N.length===1?N[0]===y?E=1:N[0]===3*y+2&&(E=3):N.length===2&&N[0]===y&&N[1]===v&&(E=5),E===8?new Error(\'Input "key_padding_mask" shape shall be (batch_size) or (batch_size, kv_sequence_length)\'):new Error("Mask not supported")}let P=!1,O=_;if(i){if(i.dims.length!==3&&i.dims.length!==4)throw new Error(\'Input "value" is expected to have 3 or 4 dimensions\');if(r.dims[0]!==i.dims[0])throw new Error(\'Input "query" and "value" shall have same dim 0 (batch_size)\');if(i.dims.length===3){if(v!==i.dims[1])throw new Error(\'Input "key" and "value" shall have the same dim 1 (kv_sequence_length)\');O=i.dims[2]}else{if(v!==i.dims[2])throw new Error(\'Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)\');O=i.dims[1]*i.dims[3],P=!0}}let R=S+v,L=!1;if(a)throw new Error("Key padding mask is not supported");if(c){if(c.dims.length!==4)throw new Error(\'Input "relative_position_bias" is expected to have 4 dimensions\');if(c.dims[0]!==y&&c.dims[0]!==1||c.dims[1]!==t.numHeads||c.dims[2]!==w||c.dims[3]!==R)throw new Error(\'Input "relative_position_bias" shape (batch_size, 1, sequence_length, kv_sequence_length)\')}return{batchSize:y,sequenceLength:w,pastSequenceLength:S,kvSequenceLength:v,totalSequenceLength:R,maxSequenceLength:A,inputHiddenSize:0,hiddenSize:_,vHiddenSize:O,headSize:I,vHeadSize:Math.floor(O/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:E,scale:t.scale,broadcastResPosBias:L,passPastInKv:P,qkvFormat:x}},Lu=e=>ve({...e}),Hu=ve({perm:[0,2,1,3]}),ap=(e,t,r,o,i,u,a)=>{let c=[o,i,u],p=M.size(c),h=[{type:12,data:p},{type:12,data:a},{type:12,data:u}],d=y=>{let w=j("qkv_with_bias",t.dataType,c),_=U("qkv",t.dataType,c),v=U("bias",r.dataType,c),S=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`\n  ${y.registerUniforms(S).declareVariables(_,v,w)}\n  ${y.mainStart()}\n    ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;\n\n    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];\n  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:c,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h}),getShaderSource:d},{inputs:[t,r],outputs:[-1]})[0]},Ko=(e,t,r,o,i,u,a,c)=>{let p=u;if(a){if(o===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return p=ap(e,u,a,t,o,r*i,c),p=p.reshape([t,o,r,i]),e.compute(yt(p,Hu.perm),{inputs:[p],outputs:[-1]})[0]}else return u.dims.length===3&&(p=u.reshape([t,o,r,i])),e.compute(yt(p,Hu.perm),{inputs:[p],outputs:[-1]})[0]},Fu=(e,t)=>{let r=ip(e.inputs,t),o=e.inputs[0],i=it(e.inputs,1),u=it(e.inputs,2),a=it(e.inputs,3),c=it(e.inputs,4),p=it(e.inputs,5),h=it(e.inputs,6),d=it(e.inputs,7);if(o.dims.length===5)throw new Error("Packed QKV is not implemented");if(i?.dims.length===5)throw new Error("Packed KV is not implemented");let y=i&&u&&i.dims.length===4&&u.dims.length===4,w=Ko(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,o,a,0);if(y)return Pn(e,w,i,u,c,void 0,h,d,p,r,t);if(!i||!u)throw new Error("key and value must be provided");let _=Ko(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.headSize,i,a,r.hiddenSize),v=Ko(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.vHeadSize,u,a,2*r.hiddenSize);Pn(e,w,_,v,c,void 0,h,d,p,r,t)}});var sp,up,dp,lp,cp,pp,mp,fp,ju,Ku=Y(()=>{"use strict";ye();Se();_e();sp=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},up=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n            k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n            if (k < 0) {\n              break;\n            }\n            if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n              break;\n            }\n            offset += k * i32(${fe("uniforms.x_strides",i,t)});\n        `;return`\n          value = ${e.type.value}(uniforms.constant_value);\n          for (var i = 0; i < 1; i++) {\n            var offset = 0;\n            var k = 0;\n            ${o}\n            value = x[offset];\n          }\n      `},dp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0) {\n                  k = -k;\n                }\n                {\n                  let _2n_1 = 2 * (i32(${fe("uniforms.x_shape",i,t)}) - 1);\n                  k = k % _2n_1;\n                  if(k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                    k = _2n_1 - k;\n                  }\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},lp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0) {\n                  k = 0;\n                }\n                if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                  k = i32(${fe("uniforms.x_shape",i,t)}) - 1;\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},cp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0)  {\n                  k += i32(${fe("uniforms.x_shape",i,t)}]);\n                }\n                if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                  k -= i32(${fe("uniforms.x_shape",i,t)});\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},pp=(e,t,r)=>{switch(r.mode){case 0:return up(e,t,r.pads.length);case 1:return dp(e,t,r.pads.length);case 2:return lp(e,t,r.pads.length);case 3:return cp(e,t,r.pads.length);default:throw new Error("Invalid mode")}},mp=(e,t)=>{let r=M.padShape(e[0].dims.slice(),t.pads),o=e[0].dims,i=M.size(r),u=[{type:12,data:i},{type:6,data:t.pads}];t.mode===0&&u.push({type:e[0].dataType,data:t.value}),u.push(...Z(e[0].dims,r));let a=["rank"],c=p=>{let h=j("output",e[0].dataType,r.length),d=U("x",e[0].dataType,o.length),y=d.type.value,w=pp(h,o.length,t),_=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&_.push({name:"constant_value",type:y}),`\n            ${p.registerUniforms(_).declareVariables(d,h)}\n            ${p.mainStart()}\n            ${p.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n            let indices = ${h.offsetToIndices("global_idx")};\n\n            var value = ${y}(0);\n            ${w}\n            output[global_idx] = value;\n        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}`,inputDependencies:a},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(r)/64)},programUniforms:u}),getShaderSource:c}},fp=(e,t)=>{if(e.length>1){let r=e[1].getBigInt64Array(),o=e.length>=3&&e[2].data?e[2].getFloat32Array()[0]:0,i=e[0].dims.length,u=new Int32Array(2*i).fill(0);if(e.length>=4){let c=e[3].getBigInt64Array();for(let p=0;p<c.length;p++)u[Number(c[p])]=Number(r[p]),u[Number(c[p])+i]=Number(r[p+c.length])}else r.forEach((c,p)=>u[Number(p)]=Number(c));let a=[];return u.forEach(c=>a.push(c)),{mode:t.mode,value:o,pads:a}}else return t},ju=(e,t)=>{sp(e.inputs);let r=fp(e.inputs,t);e.compute(mp(e.inputs,r),{inputs:[0]})}});var Nn,Yu,Zu,Xu,Qu,hp,gp,Ju,ed,td,rd,nd,od,id,ad,sd,ud,dd,ld,cd=Y(()=>{"use strict";$r();ye();Se();_e();Nn=e=>{if(vr.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},Yu=(e,t,r)=>{let o=t.format==="NHWC",i=e.dims.slice();o&&i.splice(1,0,i.pop());let u=Object.hasOwnProperty.call(t,"dilations"),a=t.kernelShape.slice(),c=t.strides.slice(),p=u?t.dilations.slice():[],h=t.pads.slice();nr.adjustPoolAttributes(r,i,a,c,p,h);let d=nr.computePoolOutputShape(r,i,c,p,a,h,t.autoPad),y=Object.assign({},t);u?Object.assign(y,{kernelShape:a,strides:c,pads:h,dilations:p,cacheKey:t.cacheKey}):Object.assign(y,{kernelShape:a,strides:c,pads:h,cacheKey:t.cacheKey});let w=d.slice();return w.push(w.splice(1,1)[0]),[y,o?w:d]},Zu=(e,t)=>{let r=t.format==="NHWC",o=M.size(e),i=M.size(t.kernelShape),u=[{type:12,data:o},{type:12,data:i}],a=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let c=t.kernelShape[t.kernelShape.length-1],p=t.strides[t.strides.length-1],h=t.pads[t.pads.length/2-1],d=t.pads[t.pads.length-1],y=!!(h+d);u.push({type:12,data:c},{type:12,data:p},{type:12,data:h},{type:12,data:d}),a.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let w=!1;if(t.kernelShape.length===2){let _=t.kernelShape[t.kernelShape.length-2],v=t.strides[t.strides.length-2],S=t.pads[t.pads.length/2-2],A=t.pads[t.pads.length-2];w=!!(S+A),u.push({type:12,data:_},{type:12,data:v},{type:12,data:S},{type:12,data:A}),a.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[u,a,!0,y,w]}else{if(r)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let c=M.computeStrides(t.kernelShape);u.push({type:12,data:c},{type:12,data:t.pads},{type:12,data:t.strides}),a.push({name:"kernelStrides",type:"u32",length:c.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let p=t.pads.reduce((h,d)=>h+d);return[u,a,!!p,!1,!1]}},Xu=(e,t,r,o,i,u,a,c,p,h,d,y)=>{let w=i.format==="NHWC",_=t.type.value,v=j("output",t.type.tensor,o);if(i.kernelShape.length<=2){let S="",A="",I="",x=r-(w?2:1);if(d?S=`\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[${x}] = indices[${x}] * uniforms.sw - uniforms.pwStart + i;\n                  if (xIndices[${x}] < 0 || xIndices[${x}]\n                      >= uniforms.x_shape[${x}]) {\n                    pad++;\n                    continue;\n                  }\n                  let x_val = x[${t.indicesToOffset("xIndices")}];\n                  ${u}\n                }`:S=`\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[${x}] = indices[${x}] * uniforms.sw - uniforms.pwStart + i;\n                  let x_val = x[${t.indicesToOffset("xIndices")}];\n                  ${u}\n                }`,i.kernelShape.length===2){let P=r-(w?3:2);y?A=`\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[${P}] = indices[${P}] * uniforms.sh - uniforms.phStart + j;\n                  if (xIndices[${P}] < 0 || xIndices[${P}] >= uniforms.x_shape[${P}]) {\n                    pad += i32(uniforms.kw);\n                    continue;\n                  }\n              `:A=`\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[${P}] = indices[${P}] * uniforms.sh - uniforms.phStart + j;\n                `,I=`\n              }\n            `}return`\n            ${e.registerUniforms(p).declareVariables(t,v)}\n\n            ${e.mainStart()}\n              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n              let indices = ${v.offsetToIndices("global_idx")};\n              var xIndices = ${v.offsetToIndices("global_idx")};\n\n              var value = ${_}(${c});\n              var pad = 0;\n              ${A}\n              ${S}\n              ${I}\n              ${a}\n\n              output[global_idx] = value;\n            }`}else{if(w)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let S=i.kernelShape.length,A=i.pads.length,I="";return h?I=`\n                if (xIndices[j] >= uniforms.x_shape[j]) {\n                  pad++;\n                  isPad = true;\n                  break;\n                }\n              }\n              if (!isPad) {\n                let x_val = x[${t.indicesToOffset("xIndices")}];\n                ${u}\n              }`:I=`\n              }\n              let x_val = x[${t.indicesToOffset("xIndices")}];\n              ${u}\n            `,`\n            ${e.registerUniforms(p).declareVariables(t,v)}\n\n            ${e.mainStart()}\n              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n              let indices = ${v.offsetToIndices("global_idx")};\n              var xIndices = ${v.offsetToIndices("global_idx")};\n\n              var offsets: array<u32, ${S}>;\n\n              var value = ${_}(${c});\n              var pad = 0;\n              var isPad = false;\n\n              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {\n                var offset = i;\n                for (var j = 0u; j < ${S-1}u; j++) {\n                  offsets[j] = offset / ${fe("uniforms.kernelStrides","j",S)};\n                  offset -= offsets[j] * ${fe("uniforms.kernelStrides","j",S)};\n                }\n                offsets[${S-1}] = offset;\n\n                isPad = false;\n                for (var j = ${r-S}u; j < ${r}u; j++) {\n                  xIndices[j] = indices[j] * ${fe("uniforms.strides",`j - ${r-S}u`,S)}\n                    + offsets[j - ${r-S}u] - ${fe("uniforms.pads","j - 2u",A)};\n                  ${I}\n              }\n              ${a}\n\n              output[global_idx] = value;\n            }`}},Qu=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,hp=e=>`${Qu(e)};${e.countIncludePad}`,gp=e=>`${Qu(e)};${e.storageOrder};${e.dilations}`,Ju=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),ed=(e,t,r,o)=>{let[i,u]=Yu(t,o,r),a=U("x",t.dataType,t.dims.length),c=a.type.value,p="value += x_val;",h="";i.countIncludePad?h+=`value /= ${c}(uniforms.kernelSize);`:h+=`value /= ${c}(i32(uniforms.kernelSize) - pad);`;let[d,y,w,_,v]=Zu(u,i);d.push(...Z(t.dims,u));let S=["rank"];return{name:e,shaderCache:{hint:`${o.cacheKey};${w};${_};${v}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:u,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(M.size(u)/64)},programUniforms:d}),getShaderSource:A=>Xu(A,a,t.dims.length,u.length,i,p,h,0,y,w,_,v)}},td=e=>{let t=e.count_include_pad!==0,r=Ju(e);if(r.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let o={countIncludePad:t,...r,cacheKey:""};return{...o,cacheKey:hp(o)}},rd=(e,t)=>{Nn(e.inputs),e.compute(ed("AveragePool",e.inputs[0],!1,t))},nd={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},od=e=>{let t=e.format;return{format:t,...nd,cacheKey:t}},id=(e,t)=>{Nn(e.inputs),e.compute(ed("GlobalAveragePool",e.inputs[0],!0,t))},ad=(e,t,r,o)=>{let[i,u]=Yu(t,o,r),a=`\n      value = max(x_val, value);\n    `,c="",p=U("x",t.dataType,t.dims.length),h=["rank"],[d,y,w,_,v]=Zu(u,i);return d.push(...Z(t.dims,u)),{name:e,shaderCache:{hint:`${o.cacheKey};${w};${_};${v}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:u,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(M.size(u)/64)},programUniforms:d}),getShaderSource:S=>Xu(S,p,t.dims.length,u.length,i,a,c,t.dataType===10?-65504:-1e5,y,w,_,v)}},sd=(e,t)=>{Nn(e.inputs),e.compute(ad("MaxPool",e.inputs[0],!1,t))},ud=e=>{let t=e.storage_order,r=e.dilations,o=Ju(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(o.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let i={storageOrder:t,dilations:r,...o,cacheKey:""};return{...i,cacheKey:gp(i)}},dd=e=>{let t=e.format;return{format:t,...nd,cacheKey:t}},ld=(e,t)=>{Nn(e.inputs),e.compute(ad("GlobalMaxPool",e.inputs[0],!0,t))}});var bp,wp,pd,md=Y(()=>{"use strict";$r();ye();_e();bp=(e,t,r)=>{let o=e===t,i=e<t&&r<0,u=e>t&&r>0;if(o||i||u)throw new Error("Range these inputs\' contents are invalid.")},wp=(e,t,r,o)=>{let i=Math.abs(Math.ceil((t-e)/r)),u=[i],a=i,c=[{type:12,data:a},{type:o,data:e},{type:o,data:r},...Z(u)],p=h=>{let d=j("output",o,u.length),y=d.type.value,w=[{name:"outputSize",type:"u32"},{name:"start",type:y},{name:"delta",type:y}];return`\n        ${h.registerUniforms(w).declareVariables(d)}\n        ${h.mainStart()}\n        ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n        output[global_idx] = uniforms.start + ${y}(global_idx) * uniforms.delta;\n      }`};return{name:"Range",shaderCache:{hint:`${o}`},getShaderSource:p,getRunData:()=>({outputs:[{dims:u,dataType:o}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:c})}},pd=e=>{let t=0,r=0,o=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],r=e.inputs[1].getInt32Array()[0],o=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],r=e.inputs[1].getFloat32Array()[0],o=e.inputs[2].getFloat32Array()[0]),vr.webgpu.validateInputContent&&bp(t,r,o),e.compute(wp(t,r,o,e.inputs[0].dataType),{inputs:[]})}});var vp,$p,_p,Sp,xp,Cp,Ap,Ip,Tp,Ep,Pp,fd,kp,Op,Rp,Bp,Dp,hd,gd,yd=Y(()=>{"use strict";ye();Se();Ze();_e();vp=(e,t)=>{if(e.every(r=>r>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and\n            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},$p=(e,t,r)=>{t.every(i=>i>=0&&i<r||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let o=new Array(r).fill(1);return t.forEach((i,u)=>o[i]=e[u]),o},_p=(e,t,r,o,i,u)=>{let[a,c,p]=r>10?[1,2,3]:[-1,e.length>1?1:-1,-1],h=e[0].dims.length;if(a>0&&e.length>a&&e[a].dims.length>0)e[a].getFloat32Array().forEach(d=>u.push(d));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(c>0&&e.length>c&&e[c].dims.length>0){if(e[c].getFloat32Array().forEach(d=>o.push(d)),o.length!==0&&o.length!==h&&r>=18&&o.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");vp(o,t),t.axes.length>0&&$p(o,t.axes,h).forEach((d,y)=>o[y]=d)}if(p>0&&e.length>p&&(e[p].getBigInt64Array().forEach(d=>i.push(Number(d))),i.length!==h||r>=18&&i.length===t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(o.length!==t.axes.length)throw new Error(\'Resize requires "scales" input size to be of axes rank when axes attributes is specified\');if(i.length!==t.axes.length)throw new Error(\'Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified\')}if(typeof o<"u"&&typeof i<"u"&&o.length>0&&i.length>h)throw new Error("Resize requires only of scales or sizes to be specified")},Sp=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,\n     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`return ${t}(xResized) / ${t}(xScale);`;case"pytorch_half_pixel":return`if (lengthResized > 1) {\n                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;\n                  } else {\n                    return 0.0;\n                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {\n                    return 0.0;\n                  } else {\n                    // The whole part and the fractional part are calculated separately due to inaccuracy of floating\n                    // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an\n                    // offset-by-one error later in floor().\n                    let whole = ${t}(xResized * (lengthOriginal - 1) / (lengthResized - 1));\n                    let fract =\n                        ${t}(xResized * (lengthOriginal - 1) % (lengthResized - 1)) / ${t}(lengthResized - 1);\n                    return whole + fract;\n                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {\n                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +\n                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /\n                        ${t}(lengthResized - 1);\n                  } else {\n                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);\n                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);\n                  const adjustment = ${t}(lengthResized) / outputWidth;\n                  const center = ${t}(lengthOriginal) / 2;\n                  const offset = center * (1 - adjustment);\n                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",xp=(e,t,r)=>`fn getNearestPixelFromOriginal(xOriginal: ${r}, isDownSample: bool) -> ${r} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",Cp=(e,t,r)=>{let o=new Array(r).fill(0).concat(new Array(r).fill(1)),i=e.length===0?o:e.slice();return t.length>0?(t.forEach((u,a)=>{o[u]=i[a],o[a+r]=i[t.length+a]}),o):i},Ap=(e,t,r,o)=>{let i=[];if(r.length>0)if(o.length>0){if(e.forEach(u=>i.push(u)),Math.max(...o)>e.length)throw new Error("axes is out of bound");o.forEach((u,a)=>i[u]=r[a])}else r.forEach(u=>i.push(u));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");i=e.map((u,a)=>Math.round(u*t[a]))}return i},Ip=(e,t,r)=>{let o=(()=>{switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min(...r.axes.map(u=>t[u]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return r.axes.length>0?Math.max(...r.axes.map(u=>t[u]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${r.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let i=e.slice();return r.axes.length>0?(r.axes.forEach(u=>t[u]=o),r.axes.forEach(u=>i[u]=Math.round(e[u]*t[u]))):(t.fill(o,0,t.length),i.forEach((u,a)=>i[a]=Math.round(u*t[a]))),i},Tp=(e,t,r,o,i)=>`\n    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${r.length}> {\n      var original_indices: array<${e.type.value}, ${r.length}>;\n      for (var i:u32 = 0; i < ${r.length}; i++) {\n        var output_index = ${e.indicesGet("output_indices","i")};\n        var scale = ${fe("uniforms.scales","i",o)};\n        var roi_low = ${fe("uniforms.roi","i",i)};\n        var roi_hi = ${fe("uniforms.roi",`i + ${t.length}`,i)};\n        if (scale == 1.0) {\n          original_indices[i] = ${e.type.value}(output_index);\n        } else {\n          var input_shape_i = ${fe("uniforms.input_shape","i",t.length)};\n          var output_shape_i = ${fe("uniforms.output_shape","i",r.length)};\n          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                           input_shape_i, roi_low, roi_hi);\n        }\n      }\n      return original_indices;\n    }`,Ep=(e,t,r,o,i,u,a)=>`\n    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {\n      var input_indices: ${e.type.indices};\n      for (var i:u32 = 0; i < ${o.length}; i++) {\n        var output_index = ${t.indicesGet("output_indices","i")};\n        var input_index: u32;\n        var scale = ${fe("uniforms.scales","i",i)};\n        if (scale == 1.0) {\n          input_index = output_index;\n        } else {\n          var roi_low = ${fe("uniforms.roi","i",u)};\n          var roi_hi = ${fe("uniforms.roi",`i + ${r.length}`,u)};\n          var input_shape_i = ${fe("uniforms.input_shape","i",r.length)};\n          var output_shape_i = ${fe("uniforms.output_shape","i",o.length)};\n          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                        input_shape_i, roi_low, roi_hi);\n          if (!${a} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {\n            if (original_idx < 0) {\n              input_index = 0;\n            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {\n              input_index = input_shape_i - 1;\n            } else {\n              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));\n            }\n          } else {\n            input_index = u32(original_idx);\n          }\n        }\n        ${e.indicesSet("input_indices","i"," input_index")}\n      }\n      return input_indices;\n    }`,Pp=(e,t)=>`\n    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {\n      for (var i:u32 = 0; i < ${t.length}; i++) {\n        var input_index = ${e.indicesGet("input_indices","i")};\n        if (input_index < 0 || input_index >= ${fe("uniforms.input_shape","i",t.length)}) {\n          return false;\n        }\n      }\n      return true;\n    }`,fd=(e,t,r,o)=>e.rank>o?`\n    ${e.indicesSet("input_indices",t,"channel")};\n    ${e.indicesSet("input_indices",r,"batch")};\n`:"",kp=(e,t,r,o,i)=>{let[a,c,p,h]=r.length===2?[-1,0,1,-1]:[0,2,3,1],d=e.type.value;return`\n    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${d} {\n      var input_indices: ${e.type.indices};\n      ${e.indicesSet("input_indices",c,`max(0, min(row, ${r[c]} - 1))`)};\n      ${e.indicesSet("input_indices",p,`max(0, min(col, ${r[p]} - 1))`)};\n      ${fd(e,h,a,2)}\n      return ${e.getByIndices("input_indices")};\n    }\n\n    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${d} {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var row:${d} = originalIndices[${c}];\n      var col:${d} = originalIndices[${p}];\n      ${o?`if (row < 0 || row > (${r[c]} - 1) || col < 0 || col > (${r[p]} - 1)) {\n        return ${i};\n      }`:""};\n      row = max(0, min(row, ${r[c]} - 1));\n      col = max(0, min(col, ${r[p]} - 1));\n      var row1: u32 = u32(row);\n      var col1: u32 = u32(col);\n      var row2: u32 = u32(row + 1);\n      var col2: u32 = u32(col + 1);\n      var channel: u32 = ${r.length>2?`u32(originalIndices[${h}])`:"0"};\n      var batch: u32 =  ${r.length>2?`u32(originalIndices[${a}])`:"0"};\n      var x11: ${d} = getInputValue(batch, channel, row1, col1);\n      var x12: ${d} = getInputValue(batch, channel, row1, col2);\n      var x21: ${d} = getInputValue(batch, channel, row2, col1);\n      var x22: ${d} = getInputValue(batch, channel, row2, col2);\n      var dx1: ${d} = abs(row - ${d}(row1));\n      var dx2: ${d} = abs(${d}(row2) - row);\n      var dy1: ${d} = abs(col - ${d}(col1));\n      var dy2: ${d} = abs(${d}(col2) - col);\n      if (row1 == row2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (col1 == col2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);\n    }`},Op=(e,t,r,o,i,u,a,c,p,h)=>{let d=r.length===2,y=!0,[w,_]=d?[0,1]:y?[2,3]:[1,2],v=e.type.value,S=A=>{let I=A===w?"row":"col";return`\n      fn ${I}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${v} {\n        var output_index = ${t.indicesGet("output_indices",A)};\n        var originalIdx: ${v} = getOriginalCoordinateFromResizedCoordinate(output_index, ${i[A]},\n        ${o[A]}, ${r[A]}, ${u[A]}, ${u[A]} + ${r.length});\n        var fractOriginalIdx: ${v} = originalIdx - floor(originalIdx);\n        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);\n\n        if (${c} && (originalIdx < 0 || originalIdx > (${r[A]} - 1))) {\n          return ${p};\n        }\n        var data: array<${v}, 4> = array<${v}, 4>(0.0, 0.0, 0.0, 0.0);\n        for (var i: i32 = -1; i < 3; i++) {\n          var ${I}: ${v} = originalIdx + ${v}(i);\n          if (${I} < 0 || ${I} >= ${r[A]}) {\n            ${(()=>h?`coefs[i + 1] = 0.0;\n                        continue;`:c?`return ${p};`:`${I} = max(0, min(${I}, ${r[A]} - 1));`)()};\n          }\n        var input_indices_copy: ${e.type.indices} = input_indices;\n          ${e.indicesSet("input_indices_copy",A,`u32(${I})`)};\n          data[i + 1] = ${A===w?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};\n        }\n        return cubicInterpolation1D(data, coefs);\n      }`};return`\n    ${S(w)};\n    ${S(_)};\n  fn getCubicInterpolationCoefs(s: ${v}) -> array<${v}, 4> {\n    var absS = abs(s);\n    var coeffs: array<${v}, 4> = array<${v}, 4>(0.0, 0.0, 0.0, 0.0);\n    var oneMinusAbsS: ${v} = 1.0 - absS;\n    var twoMinusAbsS: ${v} = 2.0 - absS;\n    var onePlusAbsS: ${v} = 1.0 + absS;\n    coeffs[0] = ((${a} * onePlusAbsS - 5 * ${a}) * onePlusAbsS + 8 * ${a}) * onePlusAbsS - 4 * ${a};\n    coeffs[1] = ((${a} + 2) * absS - (${a} + 3)) * absS * absS + 1;\n    coeffs[2] = ((${a} + 2) * oneMinusAbsS - (${a} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;\n    coeffs[3] = ((${a} * twoMinusAbsS - 5 * ${a}) * twoMinusAbsS + 8 * ${a}) * twoMinusAbsS - 4 * ${a};\n    return coeffs;\n  }\n\n  fn cubicInterpolation1D(x: array<${v}, 4>, coefs: array<${v}, 4>) -> ${v} {\n    var coefsSum: ${v} = coefs[0] + coefs[1] + coefs[2] + coefs[3];\n    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;\n  }\n\n  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${v} {\n    var input_indices: ${e.type.indices} = output_indices;\n    return colCubicInterpolation(input_indices, output_indices);\n  }\n    `},Rp=(e,t,r,o,i)=>{let[a,c,p,h,d]=r.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],y=e.type.value;return`\n    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${y} {\n      var input_indices: ${e.type.indices};\n      ${e.indicesSet("input_indices",c,`max(0, min(depth, ${r[c]} - 1))`)};\n      ${e.indicesSet("input_indices",p,`max(0, min(height, ${r[p]} - 1))`)};\n      ${e.indicesSet("input_indices",h,`max(0, min(width, ${r[h]} - 1))`)};\n      ${fd(e,d,a,3)}\n      return ${e.getByIndices("input_indices")};\n    }\n\n    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${y} {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var depth:${y} = originalIndices[${c}];\n      var height:${y} = originalIndices[${p}];\n      var width:${y} = originalIndices[${h}];\n      ${o?`if (depth < 0 || depth > (${r[c]} - 1) || height < 0 || height > (${r[p]} - 1) || width < 0 || (width > ${r[h]} - 1)) {\n      return ${i};\n        }`:""};\n\n    depth = max(0, min(depth, ${r[c]} - 1));\n      height = max(0, min(height, ${r[p]} - 1));\n      width = max(0, min(width, ${r[h]} - 1));\n      var depth1: u32 = u32(depth);\n      var height1: u32 = u32(height);\n      var width1: u32 = u32(width);\n      var depth2: u32 = u32(depth + 1);\n      var height2: u32 = u32(height + 1);\n      var width2: u32 = u32(width + 1);\n      var channel: u32 = ${r.length>3?`u32(originalIndices[${d}])`:"0"};\n      var batch: u32 =  ${r.length>3?`u32(originalIndices[${a}])`:"0"};\n\n      var x111: ${y} = getInputValue(batch, channel, depth1, height1, width1);\n      var x112: ${y} = getInputValue(batch, channel, depth1, height1, width2);\n      var x121: ${y} = getInputValue(batch, channel, depth1, height2, width1);\n      var x122: ${y} = getInputValue(batch, channel, depth1, height2, width2);\n      var x211: ${y} = getInputValue(batch, channel, depth2, height1, width1);\n      var x212: ${y} = getInputValue(batch, channel, depth2, height1, width2);\n      var x221: ${y} = getInputValue(batch, channel, depth2, height2, width1);\n      var x222: ${y} = getInputValue(batch, channel, depth2, height2, width2);\n      var dx1: ${y} = abs(depth - ${y}(depth1));\n      var dx2: ${y} = abs(${y}(depth2) - depth);\n      var dy1: ${y} = abs(height - ${y}(height1));\n      var dy2: ${y} = abs(${y}(height2) - height);\n      var dz1: ${y} = abs(width - ${y}(width1));\n      var dz2: ${y} = abs(${y}(width2) - width);\n      if (depth1 == depth2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (height1 == height2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      if (width1 == width2) {\n        dz1 = 0.5;\n        dz2 = 0.5;\n      }\n      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +\n              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);\n    }`},Bp=(e,t,r,o,i,u)=>{let a=e.dims,c=Cp(u,t.axes,a.length),p=Ap(a,o,i,t.axes),h=o.slice();o.length===0&&(h=a.map((x,E)=>x===0?1:p[E]/x),t.keepAspectRatioPolicy!=="stretch"&&(p=Ip(a,h,t)));let d=j("output",e.dataType,p.length),y=U("input",e.dataType,a.length),w=M.size(p),_=a.length===p.length&&a.every((x,E)=>x===p[E]),v=t.coordinateTransformMode==="tf_crop_and_resize",S=t.extrapolationValue,A=y.type.value,I=x=>`\n      ${_?"":`\n      ${Sp(t.coordinateTransformMode,A)};\n      ${(()=>{switch(t.mode){case"nearest":return`\n              ${Pp(y,a)};\n              ${xp(t.nearestMode,r,A)};\n              ${Ep(y,d,a,p,h.length,c.length,v)};\n              `;case"linear":return`\n              ${Tp(d,a,p,h.length,c.length)};\n              ${(()=>{if(a.length===2||a.length===4)return`${kp(y,d,a,v,S)}`;if(a.length===3||a.length===5)return`${Rp(y,d,a,v,S)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};\n            `;case"cubic":return`\n            ${(()=>{if(a.length===2||a.length===4)return`${Op(y,d,a,p,h,c,t.cubicCoeffA,v,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};\n            `;default:throw Error("Invalid resize mode")}})()};\n      `}\n      ${x.registerUniform("output_size","u32").registerUniform("scales","f32",h.length).registerUniform("roi","f32",c.length).declareVariables(y,d)}\n      ${x.mainStart()}\n        ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n        ${_?"output[global_idx] = input[global_idx];":`\n        let output_indices = ${d.offsetToIndices("global_idx")};\n        var input_indices: ${y.type.indices};\n        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);\n                if (checkInputIndices(input_indices)) {\n                  output[global_idx] = ${y.getByIndices("input_indices")};\n                } else {\n                  output[global_idx] = ${t.extrapolationValue};\n                }`;case"linear":return`output[global_idx] = ${a.length===2||a.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};\n`}\n      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${r}|${h.length>0?h:""}|${i.length>0?i:""}|${c.length>0?c:""}|${_}|${a}`,inputDependencies:["rank"]},getShaderSource:I,getRunData:()=>({outputs:[{dims:p,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(w/64)},programUniforms:[{type:12,data:w},{type:1,data:h},{type:1,data:c},...Z(a,p)]})}},Dp=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},hd=(e,t)=>{let r=[],o=[],i=[],u=Dp(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");_p(e.inputs,t,u,r,o,i),e.compute(Bp(e.inputs[0],t,u,r,o,i),{inputs:[0]})},gd=e=>{let t=e.antialias,r=e.axes,o=e.coordinateTransformMode,i=e.cubicCoeffA,u=e.excludeOutside!==0,a=e.extrapolationValue,c=e.keepAspectRatioPolicy,p=e.mode,h=e.nearestMode===""?"simple":e.nearestMode;return ve({antialias:t,axes:r,coordinateTransformMode:o,cubicCoeffA:i,excludeOutside:u,extrapolationValue:a,keepAspectRatioPolicy:c,mode:p,nearestMode:h})}});var zp,Mp,bd,wd=Y(()=>{"use strict";ye();Se();Ze();_e();zp=(e,t)=>{let[r,o,i,u]=e,{numHeads:a,rotaryEmbeddingDim:c}=t;if(r.dims.length!==3&&r.dims.length!==4)throw new Error(`Input \'x\' is expected to have 3 or 4 dimensions, got ${r.dims.length}`);if(!M.areEqual(o.dims,[])&&!M.areEqual(o.dims,[1])&&o.dims.length!==2)throw new Error(`Input \'position_ids\' is expected to have 0, 1, or 2 dimensions, got ${o.dims.length}`);if(i.dims.length!==2)throw new Error(`Input \'cos_cache\' is expected to have 2 dimensions, got ${i.dims.length}`);if(u.dims.length!==2)throw new Error(`Input \'sin_cache\' is expected to have 2 dimensions, got ${u.dims.length}`);if(!M.areEqual(i.dims,u.dims))throw new Error("Inputs \'cos_cache\' and \'sin_cache\' are expected to have the same shape");if(c>0&&a===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let p=r.dims[0],h=r.dims[r.dims.length-2],d=i.dims[0],y=M.sizeFromDimension(r.dims,1)/h,w=c===0?i.dims[1]*2:y/a;if(c>w)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(o.dims.length===2){if(p!==o.dims[0])throw new Error(`Input \'position_ids\' dimension 0 should be of size batch_size, got ${o.dims[0]}`);if(h!==o.dims[1])throw new Error(`Input \'position_ids\' dimension 1 should be of size sequence_length, got ${o.dims[1]}`)}if(w/2!==i.dims[1]&&c/2!==i.dims[1])throw new Error(`Input \'cos_cache\' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${i.dims[1]}`);if(h>d)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Mp=(e,t)=>{let{interleaved:r,numHeads:o,rotaryEmbeddingDim:i,scale:u}=t,a=e[0].dims[0],c=M.sizeFromDimension(e[0].dims,1),p=e[0].dims[e[0].dims.length-2],h=c/p,d=e[2].dims[1],y=i===0?d*2:h/o,w=new Array(a,p,h/y,y-d),_=M.computeStrides(w),v=[{type:1,data:u},{type:12,data:w},{type:12,data:_},...e[0].dims.length===3?new Array({type:12,data:[c,h,y,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[c,y,p*y,1]}):[],...Z(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],S=A=>{let I=U("input",e[0].dataType,e[0].dims.length),x=U("position_ids",e[1].dataType,e[1].dims.length),E=U("cos_cache",e[2].dataType,e[2].dims.length),P=U("sin_cache",e[3].dataType,e[3].dims.length),O=j("output",e[0].dataType,e[0].dims.length);return A.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:w.length},{name:"global_strides",type:"u32",length:_.length},{name:"input_output_strides",type:"u32",length:_.length}]),`\n        ${A.declareVariables(I,x,E,P,O)}\n\n        ${A.mainStart(or)}\n          let half_rotary_emb_dim = uniforms.${E.name}_shape[1];\n          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;\n          let size = uniforms.global_shape[0] * uniforms.global_strides[0];\n          ${A.guardAgainstOutOfBoundsWorkgroupSizes("size")}\n\n          if (bsnh[3] < half_rotary_emb_dim) {\n            let position_ids_idx =\n                ${x.broadcastedIndicesToOffset("bsnh.xy",j("",x.type.tensor,2))};\n            let position_id =\n                u32(${x.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);\n            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${r});\n            let j = i + select(half_rotary_emb_dim, 1, ${r});\n            let re = ${I.getByOffset("i")} * ${E.get("position_id","bsnh[3]")} -\n                ${I.getByOffset("j")} * ${P.get("position_id","bsnh[3]")};\n            ${O.setByOffset("i","re")}\n            let im = ${I.getByOffset("i")} * ${P.get("position_id","bsnh[3]")} +\n                ${I.getByOffset("j")} * ${E.get("position_id","bsnh[3]")};\n            ${O.setByOffset("j","im")}\n          } else {\n            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;\n            ${O.setByOffset("k",I.getByOffset("k"))}\n          }\n        }`};return{name:"RotaryEmbedding",shaderCache:{hint:ve({interleaved:r}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:S,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(w)/or)},programUniforms:v})}},bd=(e,t)=>{zp(e.inputs,t),e.compute(Mp(e.inputs,t))}});var Up,Vp,vd,$d=Y(()=>{"use strict";ye();Se();_e();Up=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],r=e[1],o=e[2];if(t.dataType!==r.dataType||t.dataType!==o.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(r.dims.length!==3&&r.dims.length!==2)throw new Error("Skip must be 2D or 3D");let i=t.dims[t.dims.length-1],u=t.dims[t.dims.length-2];if(r.dims[r.dims.length-1]!==i)throw new Error("Skip must have the same hidden size as input");if(r.dims[r.dims.length-2]!==u)throw new Error("Skip must have the same sequence length as input");if(o.dims.length!==1)throw new Error("Gamma must be 1D");if(o.dims[o.dims.length-1]!==i)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let a=e[3];if(a.dims.length!==1)throw new Error("Beta must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let a=e[4];if(a.dims.length!==1)throw new Error("Bias must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Bias must have the same hidden size as input")}},Vp=(e,t,r,o)=>{let i=t.simplified,u=e[0].dims,a=M.size(u),c=u,p=a,h=u.slice(-1)[0],d=o?u.slice(0,-1).concat(1):[],y=!i&&e.length>3,w=e.length>4,_=o&&r>1,v=o&&r>2,S=r>3,A=Me(h),I=[{type:12,data:p},{type:12,data:A},{type:12,data:h},{type:1,data:t.epsilon}],x=P=>{let O=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],R=[U("x",e[0].dataType,e[0].dims,A),U("skip",e[1].dataType,e[1].dims,A),U("gamma",e[2].dataType,e[2].dims,A)];y&&R.push(U("beta",e[3].dataType,e[3].dims,A)),w&&R.push(U("bias",e[4].dataType,e[4].dims,A)),R.push(j("output",e[0].dataType,c,A)),_&&R.push(j("mean_output",1,d)),v&&R.push(j("inv_std_output",1,d)),S&&R.push(j("input_skip_bias_sum",e[0].dataType,c,A));let L=De(e[0].dataType);return`\n\n      ${P.registerUniforms(O).declareVariables(...R)}\n\n      ${P.mainStart()}\n        ${P.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size / uniforms.hidden_size")}\n        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;\n        let offset = global_idx * hidden_size_vectorized;\n        var sum = ${$t("f32",A)};\n        var squareSum = ${$t("f32",A)};\n        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {\n          let skip_value = skip[offset + i];\n          let bias_value = ${w?"bias[i]":L+"(0.0)"};\n          let input_value = x[offset + i];\n          let value = input_value + skip_value + bias_value;\n          ${S?"input_skip_bias_sum[offset + i] = value;":""}\n          output[offset + i] = value;\n          let f32_value = ${ir(L,A,"value")};\n          sum += f32_value;\n          squareSum += f32_value * f32_value;\n        }\n        let mean = ${_t("sum",A)} / f32(uniforms.hidden_size);\n        let inv_std_dev = inverseSqrt(${_t("squareSum",A)} / f32(uniforms.hidden_size) ${i?"":"- mean * mean"} + uniforms.epsilon);\n        ${_?"mean_output[global_idx] = mean;":""}\n        ${v?"inv_std_output[global_idx] = inv_std_dev;":""}\n        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {\n          output[offset + i] = (output[offset + i] ${i?"":`- ${L}(mean)`}) * ${L}(inv_std_dev) * gamma[i] ${y?"+ beta[i]":""};\n        }\n      }`},E=[{dims:c,dataType:e[0].dataType}];return r>1&&E.push({dims:d,dataType:1}),r>2&&E.push({dims:d,dataType:1}),r>3&&E.push({dims:u,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${A};${_};${v};${S}`,inputDependencies:e.map((P,O)=>"type")},getShaderSource:x,getRunData:()=>({outputs:E,dispatchGroup:{x:Math.ceil(p/h/64)},programUniforms:I})}},vd=(e,t)=>{Up(e.inputs);let o=[0];e.outputCount>1&&o.push(-3),e.outputCount>2&&o.push(-3),e.outputCount>3&&o.push(3),e.compute(Vp(e.inputs,t,e.outputCount,!1),{outputs:o})}});var Wp,Gn,Np,_d,Gp,Hp,Sd,xd,Cd=Y(()=>{"use strict";ye();Se();Ze();_e();Wp=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((r,o)=>{if(e[o+1].dataType!==6&&e[o+1].dataType!==7)throw new Error(`Input ${o} must be an array of int32 or int64`)})},Gn=(e,t)=>{let r=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(o=>r.push(Number(o)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(o=>r.push(Number(o)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return r},Np=(e,t)=>{if(e.length>1){let r=Gn(e,1),o=Gn(e,2),i=Gn(e,3);return i.length===0&&(i=[...Array(e[0].dims.length).keys()]),ve({starts:r,ends:o,axes:i})}else return t},_d=(e,t,r,o,i)=>{let u=e;return e<0&&(u+=r[o[t]]),i[t]<0?Math.max(0,Math.min(u,r[o[t]]-1)):Math.max(0,Math.min(u,r[o[t]]))},Gp=(e,t,r)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {\n          var input_indices: ${e.type.indices};\n          var carry = 0u;\n          for (var i = ${r.length}; i >= 0; i--) {\n            let input_shape_i = ${fe("uniforms.input_shape","i",r.length)};\n            let steps_i = ${fe("uniforms.steps","i",r.length)};\n            let signs_i = ${fe("uniforms.signs","i",r.length)};\n            let starts_i = ${fe("uniforms.starts","i",r.length)};\n            var output_index = ${t.indicesGet("output_indices","i")};\n            var input_index = output_index * steps_i + starts_i + carry;\n            carry = input_index / input_shape_i;\n            input_index = input_index % input_shape_i;\n            if (signs_i < 0) {\n              input_index = input_shape_i - input_index - 1u + starts_i;\n            }\n            ${e.indicesSet("input_indices","i","input_index")};\n          }\n          return input_indices;\n      }`,Hp=(e,t)=>{let r=e[0].dims,o=M.size(r),i=t.axes.length>0?M.normalizeAxes(t.axes,r.length):[...Array(r.length).keys()],u=Gn(e,4);u.forEach(I=>I!==0||(()=>{throw new Error("step cannot be 0")})),u.length===0&&(u=Array(i.length).fill(1));let a=t.starts.map((I,x)=>_d(I,x,r,i,u)),c=t.ends.map((I,x)=>_d(I,x,r,i,u));if(i.length!==a.length||i.length!==c.length)throw new Error("start, ends and axes should have the same number of elements");if(i.length!==r.length)for(let I=0;I<r.length;++I)i.includes(I)||(a.splice(I,0,0),c.splice(I,0,r[I]),u.splice(I,0,1));let p=u.map(I=>Math.sign(I));u.forEach((I,x,E)=>{if(I<0){let P=(c[x]-a[x])/I,O=a[x],R=O+P*u[x];a[x]=R,c[x]=O,E[x]=-I}});let h=r.slice(0);i.forEach((I,x)=>{h[I]=Math.ceil((c[I]-a[I])/u[I])});let d={dims:h,dataType:e[0].dataType},y=j("output",e[0].dataType,h.length),w=U("input",e[0].dataType,e[0].dims.length),_=M.size(h),v=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:a.length},{name:"signs",type:"i32",length:p.length},{name:"steps",type:"u32",length:u.length}],S=[{type:12,data:_},{type:12,data:a},{type:6,data:p},{type:12,data:u},...Z(e[0].dims,h)],A=I=>`\n      ${I.registerUniforms(v).declareVariables(w,y)}\n        ${Gp(w,y,r)}\n        ${I.mainStart()}\n          ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n          let output_indices = ${y.offsetToIndices("global_idx")};\n          let input_indices = calculateInputIndices(output_indices);\n          ${y.setByOffset("global_idx",w.getByIndices("input_indices"))}\n      }`;return{name:"Slice",shaderCache:{hint:`${p.length}_${a.length}_${u.length}`,inputDependencies:["rank"]},getShaderSource:A,getRunData:()=>({outputs:[d],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:S})}},Sd=(e,t)=>{Wp(e.inputs,t);let r=Np(e.inputs,t);e.compute(Hp(e.inputs,r),{inputs:[0]})},xd=e=>{let t=e.starts,r=e.ends,o=e.axes;return ve({starts:t,ends:r,axes:o})}});var Lp,Fp,Ad,Id,Td=Y(()=>{"use strict";ye();Se();Ze();_e();Lp=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},Fp=(e,t)=>{let r=e.dims,o=M.size(r),i=64,u=t.axis;if(u<0&&(u=r.length+u),u<r.length-1)throw new Error("softmax only supports last axis for now.");let a=r[u],c=o/a,p=Me(a),h=a/p,d=(A,I)=>I===4?`max(max(${A}.x, ${A}.y), max(${A}.z, ${A}.w))`:I===2?`max(${A}.x, ${A}.y)`:I===3?`max(max(${A}.x, ${A}.y), ${A}.z)`:A,y=U("x",e.dataType,e.dims,p),w=j("result",e.dataType,e.dims,p),_=y.type.value,v=De(e.dataType)==="f32"?`var threadMax = ${_}(-3.402823e+38f);`:`var threadMax = ${_}(-65504.0h);`,S=A=>`\n      var<workgroup> rowMaxShared : ${_};\n      var<workgroup> rowSumShared : ${_};\n      var<workgroup> threadShared : array<${_}, ${i}>;\n\n      fn getValue(row: i32, col: i32, row_stride: i32) -> ${_} {\n        let index = row * row_stride + col;\n        return x[index];\n      }\n\n      fn setValue(row: i32, col: i32, row_stride: i32, value: ${_}) {\n        let index = row * row_stride + col;\n        result[index] = value;\n      }\n      ${A.registerUniform("packedCols","i32").declareVariables(y,w)}\n      ${A.mainStart()}\n        let gindex = i32(global_idx);\n        let lindex = i32(local_idx);\n        const wg = ${i};\n        let row = gindex / wg;\n        let cols = uniforms.packedCols;\n        let row_stride : i32 = uniforms.packedCols;\n\n        // find the rows max\n        ${v}\n        for (var col = lindex; col < cols; col += wg) {\n          let value = getValue(row, col, row_stride);\n          threadMax = max(threadMax, value);\n        }\n        if (lindex < cols) {\n          threadShared[lindex] = threadMax;\n        }\n        workgroupBarrier();\n\n        var reduceSize = min(cols, wg);\n        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {\n          reduceSize = currSize + (reduceSize & 1);\n          if (lindex < currSize) {\n            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowMaxShared = ${_}(${d("threadShared[0]",p)});\n        }\n        workgroupBarrier();\n\n        // find the rows sum\n        var threadSum = ${_}(0.0);\n        for (var col = lindex; col < cols; col += wg) {\n          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);\n          threadSum += subExp;\n        }\n        threadShared[lindex] = threadSum;\n        workgroupBarrier();\n\n        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {\n          if (lindex < currSize) {\n            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowSumShared = ${_}(${_t("threadShared[0]",p)});\n        }\n        workgroupBarrier();\n\n        // calculate final value for each element in the row\n        for (var col = lindex; col < cols; col += wg) {\n          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;\n          setValue(row, col, row_stride, value);\n        }\n      }`;return{name:"Softmax",shaderCache:{hint:`${p}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.dataType}],dispatchGroup:{x:c},programUniforms:[{type:6,data:h}]}),getShaderSource:S}},Ad=(e,t)=>{Lp(e.inputs),e.compute(Fp(e.inputs[0],t))},Id=e=>ve({axis:e.axis})});var qp,jp,Kp,Yp,Zp,Ed,Pd,kd=Y(()=>{"use strict";ye();Se();Ze();_e();qp=e=>{if(!e||e.length<1)throw new Error("too few inputs")},jp=(e,t)=>{let r=[],o=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(i=>r.push(Number(i))),o=r.length),ve({numOutputs:o,axis:t.axis,splitSizes:r})},Kp=e=>`\nfn calculateOutputIndex(index: u32) -> u32 {\n    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {\n    if (index < ${fe("uniforms.size_in_split_axis","i",e)}) {\n        return i;\n    }\n    }\n    return ${e}u;\n}`,Yp=e=>{let t=e.length,r=[];for(let o=0;o<t;++o){let i=e[o].setByIndices("indices","input[global_idx]");t===1?r.push(i):o===0?r.push(`if (output_number == ${o}u) { ${i} }`):o===t-1?r.push(`else { ${i} }`):r.push(`else if (output_number == ${o}) { ${i} }`)}return`\n      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {\n        ${r.join(`\n`)}\n      }`},Zp=(e,t)=>{let r=e[0].dims,o=M.size(r),i=e[0].dataType,u=M.normalizeAxis(t.axis,r.length),a=new Array(t.numOutputs),c=U("input",i,r.length),p=new Array(t.numOutputs),h=[],d=[],y=0,w=[{type:12,data:o}];for(let v=0;v<t.numOutputs;v++){y+=t.splitSizes[v],p[v]=y;let S=r.slice();S[t.axis]=t.splitSizes[v],d.push(S),a[v]=j(`output${v}`,i,S.length),h.push({dims:d[v],dataType:e[0].dataType})}w.push({type:12,data:p},...Z(r,...d));let _=v=>`\n  ${v.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",p.length).declareVariables(c,...a)}\n  ${Kp(p.length)}\n  ${Yp(a)}\n\n  ${v.mainStart()}\n    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}\n\n    var indices = ${c.offsetToIndices("global_idx")};\n    var index = ${c.indicesGet("indices",u)};\n    let output_number = calculateOutputIndex(index);\n    if (output_number != 0) {\n      index -= ${fe("uniforms.size_in_split_axis","output_number - 1u",p.length)};\n      ${c.indicesSet("indices",u,"index")};\n    }\n    writeBufferData(output_number, indices, global_idx);\n  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:_,getRunData:()=>({outputs:h,dispatchGroup:{x:Math.ceil(o/64)},programUniforms:w})}},Ed=(e,t)=>{qp(e.inputs);let r=e.inputs.length===1?t:jp(e.inputs,t);e.compute(Zp(e.inputs,r),{inputs:[0]})},Pd=e=>{let t=e.axis,r=e.splitSizes,o=e.numOutputs<0?r.length:e.numOutputs;if(o!==r.length)throw new Error("numOutputs and splitSizes lengh must be equal");return ve({axis:t,numOutputs:o,splitSizes:r})}});var Od,Xp,Qp,Jp,Rd,Bd=Y(()=>{"use strict";ye();Se();_e();Od=e=>Array.from(e.getBigInt64Array(),Number),Xp=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(Od(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},Qp=(e,t)=>{let r=[];for(let o=0;o<e.length;++o)r.push(e[o]*t[o]);return r},Jp=e=>{let t=e[0].dims,r=Od(e[1]),o=Qp(t,r),i=M.size(o),u=e[0].dataType,a=U("input",u,t.length),c=j("output",u,o.length),p=h=>`\n      const inputShape = ${a.indices(...t)};\n      ${h.registerUniform("output_size","u32").declareVariables(a,c)}\n      ${h.mainStart()}\n      ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n      let output_indices = ${c.offsetToIndices("global_idx")};\n      var input_indices: ${a.type.indices};\n      for (var i = 0; i < ${t.length}; i++) {\n        let input_dim_i = ${a.indicesGet("uniforms.input_shape","i")};\n        let input_dim_value = ${c.indicesGet("output_indices","i")}  % input_dim_i;\n\n        ${a.indicesSet("input_indices","i","input_dim_value")}\n      }\n      ${c.setByOffset("global_idx",a.getByIndices("input_indices"))}\n    }`;return{name:"Tile",shaderCache:{hint:`${r}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},...Z(e[0].dims,o)]}),getShaderSource:p}},Rd=e=>{Xp(e.inputs),e.compute(Jp(e.inputs),{inputs:[0]})}});var em,tm,Dd,zd=Y(()=>{"use strict";ye();Se();_e();em=(e,t,r,o,i)=>{let u=j("output_data",i,r.length,4),a=U("a_data",t[1].dataType,t[1].dims.length,4),c=U("b_data",t[2].dataType,t[2].dims.length,4),p=U("c_data",t[0].dataType,t[0].dims.length,4),h,d=(y,w,_)=>`select(${w}, ${y}, ${_})`;if(!o)h=u.setByOffset("global_idx",d(a.getByOffset("global_idx"),c.getByOffset("global_idx"),p.getByOffset("global_idx")));else{let y=(w,_,v="")=>{let S=`a_data[index_a${_}][component_a${_}]`,A=`b_data[index_b${_}][component_b${_}]`,I=`bool(c_data[index_c${_}] & (0xffu << (component_c${_} * 8)))`;return`\n            let output_indices${_} = ${u.offsetToIndices(`global_idx * 4u + ${_}u`)};\n            let offset_a${_} = ${a.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let offset_b${_} = ${c.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let offset_c${_} = ${p.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let index_a${_} = offset_a${_} / 4u;\n            let index_b${_} = offset_b${_} / 4u;\n            let index_c${_} = offset_c${_} / 4u;\n            let component_a${_} = offset_a${_} % 4u;\n            let component_b${_} = offset_b${_} % 4u;\n            let component_c${_} = offset_c${_} % 4u;\n            ${w}[${_}] = ${v}(${d(S,A,I)});\n          `};i===9?h=`\n            var data = vec4<u32>(0);\n            ${y("data",0,"u32")}\n            ${y("data",1,"u32")}\n            ${y("data",2,"u32")}\n            ${y("data",3,"u32")}\n            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:h=`\n            ${y("output_data[global_idx]",0)}\n            ${y("output_data[global_idx]",1)}\n            ${y("output_data[global_idx]",2)}\n            ${y("output_data[global_idx]",3)}\n          `}return`\n        ${e.registerUniform("vec_size","u32").declareVariables(p,a,c,u)}\n        ${e.mainStart()}\n        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n        ${h}\n      }`},tm=e=>{let t=e[1].dims,r=e[2].dims,o=e[0].dims,i=e[1].dataType,u=!(M.areEqual(t,r)&&M.areEqual(r,o)),a=t,c=M.size(t);if(u){let h=It.calcShape(It.calcShape(t,r,!1),o,!1);if(!h)throw new Error("Can\'t perform where op on the given tensors");a=h,c=M.size(a)}let p=Math.ceil(c/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:h=>em(h,e,a,u,i),getRunData:()=>({outputs:[{dims:a,dataType:i}],dispatchGroup:{x:Math.ceil(c/64/4)},programUniforms:[{type:12,data:p},...Z(o,t,r,a)]})}},Dd=e=>{e.compute(tm(e.inputs))}});var Md,Ud=Y(()=>{"use strict";Ka();Ro();Ja();ts();Vs();Zs();Oo();Uo();lu();mu();gu();$u();xu();Au();Eu();Ou();Du();Mu();Vu();Wo();Gu();qu();Ku();cd();md();In();yd();wd();$d();Cd();Td();kd();Bd();Sr();Rn();zd();Md=new Map([["Abs",[rs]],["Acos",[ns]],["Acosh",[os]],["Add",[Ws]],["ArgMax",[ja,ko]],["ArgMin",[qa,ko]],["Asin",[is]],["Asinh",[as]],["Atan",[ss]],["Atanh",[us]],["Attention",[Xa]],["AveragePool",[rd,td]],["BatchNormalization",[Qa]],["BiasAdd",[es]],["BiasSplitGelu",[Us]],["Cast",[ls,ds]],["Ceil",[ps]],["Clip",[cs]],["Concat",[Ya,Za]],["Conv",[Ho,Go]],["ConvTranspose",[du,uu]],["Cos",[ms]],["Cosh",[fs]],["CumSum",[cu,pu]],["DepthToSpace",[fu,hu]],["Div",[Ns]],["Einsum",[wu,vu]],["Elu",[hs,kn]],["Equal",[Gs]],["Erf",[gs]],["Exp",[ys]],["Expand",[Su]],["FastGelu",[Cu]],["Floor",[bs]],["FusedConv",[Ho,Go]],["Gather",[Tu,Iu]],["GatherElements",[ku,Pu]],["Gelu",[ws]],["Gemm",[Bu,Ru]],["GlobalAveragePool",[id,od]],["GlobalMaxPool",[ld,dd]],["Greater",[qs]],["GreaterOrEqual",[Ks]],["HardSigmoid",[Is,As]],["InstanceNormalization",[zu]],["LayerNormalization",[Uu]],["LeakyRelu",[vs,kn]],["Less",[js]],["LessOrEqual",[Ys]],["Log",[zs]],["MatMul",[ru]],["MatMulNBits",[Wu,Nu]],["MaxPool",[sd,ud]],["Mul",[Hs]],["MultiHeadAttention",[Fu,Lu]],["Neg",[_s]],["Not",[$s]],["Pad",[ju]],["Pow",[Ls]],["Range",[pd]],["Reciprocal",[Ss]],["ReduceMin",[Wa]],["ReduceMean",[Da]],["ReduceMax",[Va]],["ReduceSum",[Ga]],["ReduceProd",[Na]],["ReduceL1",[za]],["ReduceL2",[Ma]],["ReduceLogSum",[La]],["ReduceLogSumExp",[Ua]],["ReduceSumSquare",[Ha]],["Relu",[xs]],["Resize",[hd,gd]],["RotaryEmbedding",[bd]],["Sigmoid",[Cs]],["Sin",[Ts]],["Sinh",[Es]],["Slice",[Sd,xd]],["SkipLayerNormalization",[vd]],["Split",[Ed,Pd]],["Sqrt",[Ps]],["Softmax",[Ad,Id]],["Sub",[Fs]],["Tan",[ks]],["Tanh",[Rs]],["ThresholdedRelu",[Ds,kn]],["Tile",[Rd]],["Transpose",[_a,Sa]],["Where",[Dd]]])});var Hn,Vd=Y(()=>{"use strict";$r();Lt();_e();Hn=class{constructor(t){this.backend=t;this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,r){this.repo.set(t,r)}run(t,r,o,i,u){rr(t.programInfo.name);let a=this.backend.device,c=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let p=[];for(let d of r)p.push({binding:p.length,resource:{buffer:d.buffer}});for(let d of o)p.push({binding:p.length,resource:{buffer:d.buffer}});u&&p.push({binding:p.length,resource:u});let h=a.createBindGroup({layout:t.computePipeline.getBindGroupLayout(0),entries:p,label:t.programInfo.name});if(this.backend.sessionStatus==="capturing"){let d={kernelId:this.backend.currentKernelId,computePipeline:t.computePipeline,bindGroup:h,dispatchGroup:i};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(d)}c.setPipeline(t.computePipeline),c.setBindGroup(0,h),c.dispatchWorkgroups(...i),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),Ht(t.programInfo.name)}dispose(){}build(t,r){rr(t.name);let o=this.backend.device,i=[];o.features.has("shader-f16")&&i.push("enable f16;");let u=va(r,this.backend.device.limits),a=t.getShaderSource(u),c=`${i.join(`\n`)}\n${u.additionalImplementations}\n${a}`,p=o.createShaderModule({code:c,label:t.name});Ve("verbose",()=>`[WebGPU] ${t.name} shader code: ${c}`);let h=o.createComputePipeline({compute:{module:p,entryPoint:"main"},layout:"auto",label:t.name});return Ht(t.name),{programInfo:t,computePipeline:h,uniformVariablesInfo:u.variablesInfo}}normalizeDispatchGroupSize(t){let r=typeof t=="number"?t:t.x,o=typeof t=="number"?1:t.y||1,i=typeof t=="number"?1:t.z||1,u=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(r<=u&&o<=u&&i<=u)return[r,o,i];let a=r*o*i,c=Math.ceil(Math.sqrt(a));if(c>u){if(c=Math.ceil(Math.cbrt(a)),c>u)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[c,c,c]}else return[c,c,1]}}});var rm,nm,Yo,Ln,Wd=Y(()=>{"use strict";$r();ye();Lt();fa();wa();Ud();Vd();rm=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let r=[];for(let o=0;o<e.length;++o){let i=e[o].dataType;switch(t[o]){case"none":{r.push("");break}case"type":{r.push(`${i}`);break}case"rank":{let u=e[o].dims.length;r.push(`${i};${u}`);break}case"dims":{let u=e[o].dims.join(",");r.push(`${i};${u}`);break}default:throw new Error(`unsupported input dependency: ${t[o]}`)}}return r.join("|")},nm=(e,t,r)=>{let o=e.name;return e.shaderCache?.hint&&(o+="["+e.shaderCache.hint+"]"),o+=":"+r+`:${rm(t,e.shaderCache?.inputDependencies??new Array(t.length).fill("dims"))}`,o},Yo=class{constructor(t){t&&(this.architecture=t.architecture,this.vendor=t.vendor)}isArchitecture(t){return this.architecture===t}isVendor(t){return this.vendor===t}},Ln=class{constructor(){this.currentSessionId=null;this.currentKernelId=null;this.commandEncoder=null;this.computePassEncoder=null;this.maxDispatchNumber=16;this.pendingDispatchNumber=0;this.pendingKernels=[];this.pendingQueries=new Map;this.sessionStatus="default";this.capturedCommandList=new Map;this.capturedPendingKernels=new Map;this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let t=this.kernelCustomData.get(this.currentKernelId);return t||(t={},this.kernelCustomData.set(this.currentKernelId,t)),t}async initialize(t,r){this.env=t;let o=[],i={requiredLimits:{maxComputeWorkgroupStorageSize:r.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:r.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:r.limits.maxStorageBufferBindingSize,maxBufferSize:r.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:r.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:r.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:r.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:r.limits.maxComputeWorkgroupSizeZ},requiredFeatures:o};r.features.has("chromium-experimental-timestamp-query-inside-passes")?o.push("chromium-experimental-timestamp-query-inside-passes"):r.features.has("timestamp-query")&&o.push("timestamp-query"),r.features.has("shader-f16")&&o.push("shader-f16"),this.device=await r.requestDevice(i),this.adapterInfo=new Yo(await r.requestAdapterInfo()),this.gpuDataManager=ba(this),this.programManager=new Hn(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,pa(t.logLevel,!!t.debug),this.device.onuncapturederror=u=>{u.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${u.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:r,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let t=this.getCommandEncoder(),r={};this.queryType==="at-passes"&&(r.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=t.beginComputePass(r)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;rr(),this.endComputePass();let t;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),t=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(t,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,t,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&t.mapAsync(GPUMapMode.READ).then(()=>{let r=new BigUint64Array(t.getMappedRange()),o=this.pendingQueries.get(t);for(let i=0;i<r.length/2;i++){let u=o[i],a=u.kernelId,c=this.kernels.get(a),p=c.kernelType,h=c.kernelName,d=u.programName,y=u.inputTensorViews,w=u.outputTensorViews,_=r[i*2],v=r[i*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=_);let S=Number(_-this.queryTimeBase),A=Number(v-this.queryTimeBase);if(!Number.isSafeInteger(S)||!Number.isSafeInteger(A))throw new RangeError("incorrect timestamp range");if(this.env.webgpu.profiling?.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:y.map(I=>({dims:I.dims,dataType:Gt(I.dataType)})),outputsMetadata:w.map(I=>({dims:I.dims,dataType:Gt(I.dataType)})),kernelId:a,kernelType:p,kernelName:h,programName:d,startTime:S,endTime:A});else{let I="";y.forEach((E,P)=>{I+=`input[${P}]: [${E.dims}] | ${Gt(E.dataType)}, `});let x="";w.forEach((E,P)=>{x+=`output[${P}]: [${E.dims}] | ${Gt(E.dataType)}, `}),console.log(`[profiling] kernel "${a}|${p}|${h}|${d}" ${I}${x}execution time: ${A-S} ns`)}wo("GPU",`${d}::${_}::${v}`)}t.unmap(),this.pendingQueries.delete(t)}),Ht()}run(t,r,o,i,u,a){rr(t.name);let c=[];for(let E=0;E<r.length;++E){let P=r[E].data;if(P===0)continue;let O=this.gpuDataManager.get(P);if(!O)throw new Error(`no GPU data for input: ${P}`);c.push(O)}let{outputs:p,dispatchGroup:h,programUniforms:d}=t.getRunData(r),y=o.length===0?p.map((E,P)=>P):o;if(y.length!==p.length)throw new Error(`Output size ${y.length} must be equal to ${p.length}.`);let w=[],_=[];for(let E=0;E<p.length;++E){if(!Number.isInteger(y[E])||y[E]<-3||y[E]>=a)throw new Error(`Invalid output index: ${y[E]}`);if(y[E]===-3)continue;let P=y[E]===-1,O=y[E]===-2,R=P||O?u(p[E].dataType,p[E].dims):i(y[E],p[E].dataType,p[E].dims);if(w.push(R),R.data===0)continue;let L=this.gpuDataManager.get(R.data);if(!L)throw new Error(`no GPU data for output: ${R.data}`);if(P&&this.temporaryData.push(L),O){let N=this.kernelPersistentData.get(this.currentKernelId);N||(N=[],this.kernelPersistentData.set(this.currentKernelId,N)),N.push(L)}_.push(L)}if(c.length!==r.length||_.length!==w.length){if(_.length===0)return Ht(t.name),w;throw new Error(`Program ${t.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let v;if(d){let E=0,P=[];d.forEach(N=>{let K=typeof N.data=="number"?[N.data]:N.data;if(K.length===0)return;let Q=N.type===10?2:4,he,W;N.type===10?(W=K.length>4?16:K.length>2?8:K.length*Q,he=K.length>4?16:Q*K.length):(W=K.length<=2?K.length*Q:16,he=16),E=Math.ceil(E/W)*W,P.push(E);let se=N.type===10?8:4;E+=K.length>4?Math.ceil(K.length/se)*he:K.length*Q});let O=16;E=Math.ceil(E/O)*O;let R=new ArrayBuffer(E);d.forEach((N,K)=>{let Q=P[K],he=typeof N.data=="number"?[N.data]:N.data;if(N.type===6)new Int32Array(R,Q,he.length).set(he);else if(N.type===12)new Uint32Array(R,Q,he.length).set(he);else if(N.type===10)new Uint16Array(R,Q,he.length).set(he);else if(N.type===1)new Float32Array(R,Q,he.length).set(he);else throw new Error(`Unsupported uniform type: ${Gt(N.type)}`)});let L=this.gpuDataManager.create(E,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(L.buffer,0,R,0,E),this.gpuDataManager.release(L.id),v={offset:0,size:E,buffer:L.buffer}}let S=this.programManager.normalizeDispatchGroupSize(h),A=S[1]===1&&S[2]===1,I=nm(t,r,A),x=this.programManager.getArtifact(I);if(x||(x=this.programManager.build(t,S),this.programManager.setArtifact(I,x),Ve("info",()=>`[artifact] key: ${I}, programName: ${t.name}`)),d&&x.uniformVariablesInfo){if(d.length!==x.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${x.uniformVariablesInfo.length}, got ${d.length} in program "${x.programInfo.name}".`);for(let E=0;E<d.length;E++){let P=d[E],O=P.type,R=typeof P.data=="number"?1:P.data.length,[L,N]=x.uniformVariablesInfo[E];if(O!==L||R!==N)throw new Error(`Uniform variable ${E} mismatch: expect type ${L} with size ${N}, got type ${O} with size ${R} in program "${x.programInfo.name}".`)}}if(Ve("info",()=>`[ProgramManager] run "${t.name}" (key=${I}) with ${S[0]}x${S[1]}x${S[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let E={kernelId:this.currentKernelId,programName:x.programInfo.name,inputTensorViews:r,outputTensorViews:w};this.pendingKernels.push(E),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(E)}return this.programManager.run(x,c,_,S,v),Ht(t.name),w}upload(t,r){this.gpuDataManager.upload(t,r)}memcpy(t,r){this.gpuDataManager.memcpy(t,r)}async download(t,r){await this.gpuDataManager.download(t,r)}alloc(t){return this.gpuDataManager.create(t).id}free(t){return this.gpuDataManager.release(t)}createKernel(t,r,o,i){let u=Md.get(t);if(!u)throw new Error(`kernel not implemented: ${t}`);let a={kernelType:t,kernelName:i,kernelEntry:u[0],attributes:[u[1],o]};this.kernels.set(r,a)}releaseKernel(t){let r=this.kernelPersistentData.get(t);if(r){for(let o of r)this.gpuDataManager.release(o.id);this.kernelPersistentData.delete(t)}this.kernelCustomData.delete(t),this.kernels.delete(t)}computeKernel(t,r,o){let i=this.kernels.get(t);if(!i)throw new Error(`kernel not created: ${t}`);let u=i.kernelType,a=i.kernelName,c=i.kernelEntry,p=i.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${u}] ${a}" is not allowed to be called recursively`);this.currentKernelId=t,p[0]&&(p[1]=p[0](p[1]),p[0]=void 0),Ve("info",()=>`[WebGPU] Start to run kernel "[${u}] ${a}"...`);let h=this.env.debug;this.temporaryData=[];try{return h&&this.device.pushErrorScope("validation"),c(r,p[1]),0}catch(d){return o.push(Promise.resolve(`[WebGPU] Kernel "[${u}] ${a}" failed. ${d}`)),1}finally{h&&o.push(this.device.popErrorScope().then(d=>d?`GPU validation error for kernel "[${u}] ${a}": ${d.message}`:null));for(let d of this.temporaryData)this.gpuDataManager.release(d.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(t,r,o,i){let u=this.sessionExternalDataMapping.get(t);u||(u=new Map,this.sessionExternalDataMapping.set(t,u));let a=u.get(r),c=this.gpuDataManager.registerExternalBuffer(o,i,a?.[1]);return u.set(r,[c,o]),c}unregisterBuffers(t){let r=this.sessionExternalDataMapping.get(t);r&&(r.forEach(o=>this.gpuDataManager.unregisterExternalBuffer(o[1])),this.sessionExternalDataMapping.delete(t))}getBuffer(t){let r=this.gpuDataManager.get(t);if(!r)throw new Error(`no GPU data for buffer: ${t}`);return r.buffer}createDownloader(t,r,o){return async()=>{let i=await xo(this,t,r);return ma(i.buffer,o)}}writeTimestamp(t){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,t)}setQueryType(){this.queryType="none",(this.env.webgpu.profiling?.mode==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){Ve("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){Ve("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){Ve("info","replay"),this.sessionStatus="replaying";let t=this.capturedCommandList.get(this.currentSessionId),r=this.capturedPendingKernels.get(this.currentSessionId),o=t.length;this.pendingKernels=[];for(let i=0;i<o;i++){let u=this.getComputePassEncoder(),a=t[i];this.writeTimestamp(this.pendingDispatchNumber*2),u.setPipeline(a.computePipeline),u.setBindGroup(0,a.bindGroup),u.dispatchWorkgroups(...a.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(r[i]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onReleaseSession(t){this.unregisterBuffers(t),this.capturedCommandList.has(t)&&this.capturedCommandList.delete(t),this.capturedPendingKernels.has(t)&&this.capturedPendingKernels.delete(t),this.gpuDataManager.onReleaseSession(t)}onRunStart(t){this.currentSessionId=t,this.setQueryType()}}});var Nd={};gn(Nd,{init:()=>om});var qr,Zo,om,Gd=Y(()=>{"use strict";ye();Wd();Lt();Se();qr=class e{constructor(t,r,o,i){this.module=t;this.dataType=r;this.data=o;this.dims=i}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(M.size(t)!==M.size(this.dims))throw new Error("Invalid new shape");return new e(this.module,this.dataType,this.data,t)}},Zo=class{constructor(t,r,o){this.module=t;this.backend=r;this.customDataOffset=0;this.customDataSize=0;this.adapterInfo=r.adapterInfo;let i=t.HEAPU32,u=o>>>2;this.opKernelContext=i[u++];let a=i[u++];this.outputCount=i[u++],this.customDataOffset=i[u++],this.customDataSize=i[u++];let c=[];for(let p=0;p<a;p++){let h=i[u++],d=i[u++],y=i[u++],w=[];for(let _=0;_<y;_++)w.push(i[u++]);c.push(new qr(t,h,d,w))}this.inputs=c}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}getMaxComputeWorkgroupSizes(){return[this.backend.device.limits.maxComputeWorkgroupSizeX,this.backend.device.limits.maxComputeWorkgroupSizeY,this.backend.device.limits.maxComputeWorkgroupSizeZ]}getMaxComputeWorkgroupStoragesize(){return this.backend.device.limits.maxComputeWorkgroupStorageSize}compute(t,r){let o=r?.inputs?.map(c=>typeof c=="number"?this.inputs[c]:c)??this.inputs,i=r?.outputs??[],u=(c,p,h)=>new qr(this.module,p,this.output(c,h),h),a=(c,p)=>{let h=tr(c);if(!h)throw new Error(`Unsupported data type: ${c}`);let d=h*M.size(p),y=d>0?this.backend.gpuDataManager.create(d).id:0;return new qr(this.module,c,y,p)};return this.backend.run(t,o,i,u,a,this.outputCount)}output(t,r){let o=this.module.stackSave();try{let i=this.module.stackAlloc((1+r.length)*4),u=i>>2;this.module.HEAPU32[u++]=r.length;for(let a=0;a<r.length;a++)this.module.HEAPU32[u++]=r[a];return this.module._JsepOutput(this.opKernelContext,t,i)}catch(i){throw new Error(`Failed to generate kernel\'s output[${t}] with dims [${r}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${i}`)}finally{this.module.stackRestore(o)}}},om=async(e,t,r,o)=>{let i=t.jsepInit;if(!i)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let u=new Ln;await u.initialize(r,o),i("webgpu",[u,a=>u.alloc(a),a=>u.free(a),(a,c,p,h=!1)=>{if(h)Ve("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${a}, dst=${c}, size=${p}`),u.memcpy(a,c);else{Ve("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${a}, gpuDataId=${c}, size=${p}`);let d=t.HEAPU8.subarray(a>>>0,(a>>>0)+p);u.upload(c,d)}},async(a,c,p)=>{Ve("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${a}, dataOffset=${c}, size=${p}`),await u.download(a,()=>t.HEAPU8.subarray(c>>>0,(c>>>0)+p))},(a,c,p)=>u.createKernel(a,c,p,t.UTF8ToString(t._JsepGetNodeName(c))),a=>u.releaseKernel(a),(a,c,p,h)=>{Ve("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${p}, kernel=${a}, contextDataOffset=${c}`);let d=new Zo(t,u,c);return u.computeKernel(a,d,h)},()=>u.captureBegin(),()=>u.captureEnd(),()=>u.replay()])}else i("webnn")}});var Vi;Vi=Ei();var pl=zi(),fo,ho=!1,yn=!1,Ui=!1,ml=e=>{if(e===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},fl=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},hl=(e,t)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Wi=async e=>{if(ho)return Promise.resolve();if(yn)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Ui)throw new Error("previous call to \'initializeWebAssembly()\' failed.");yn=!0;let t=e.initTimeout,r=e.numThreads,o=e.simd,i=ml(r),u=o&&fl(),a=e.wasmPaths,c=typeof a=="string"?a:void 0,p=hl(u,i),h=typeof a=="object"?a[p]:void 0,d=!1,y=[];if(t>0&&y.push(new Promise(w=>{setTimeout(()=>{d=!0,w()},t)})),y.push(new Promise((w,_)=>{let v=i?pl:Vi,S={locateFile:(A,I)=>{if(i&&A.endsWith(".worker.js")&&typeof Blob<"u")return URL.createObjectURL(new Blob([Mi()],{type:"text/javascript"}));if(A.endsWith(".wasm")){if(h)return h;let x=c??I;return p==="ort-wasm-simd.wasm"?x+"ort-wasm-simd.jsep.wasm":p==="ort-wasm-simd-threaded.wasm"?x+"ort-wasm-simd-threaded.jsep.wasm":x+p}return I+A}};if(i)if(S.numThreads=r,typeof Blob>"u")S.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let A=`var ortWasmThreaded=${v.toString()};`;S.mainScriptUrlOrBlob=new Blob([A],{type:"text/javascript"})}v(S).then(A=>{yn=!1,ho=!0,fo=A,w()},A=>{yn=!1,Ui=!0,_(A)})})),await Promise.race(y),d)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},Le=()=>{if(ho&&fo)return fo;throw new Error("WebAssembly is not initialized yet.")};var Fe=(e,t)=>{let r=Le(),o=r.lengthBytesUTF8(e)+1,i=r._malloc(o);return r.stringToUTF8(e,i,o),t.push(i),i},Nr=(e,t,r,o)=>{if(typeof e=="object"&&e!==null){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach(([i,u])=>{let a=t?t+i:i;if(typeof u=="object")Nr(u,a+".",r,o);else if(typeof u=="string"||typeof u=="number")o(a,u.toString());else if(typeof u=="boolean")o(a,u?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof u}`)})},Ue=e=>{let t=Le(),r=t.stackSave();try{let o=t.stackAlloc(8);t._OrtGetLastError(o,o+4);let i=t.HEAP32[o/4],u=t.HEAPU32[o/4+1],a=u?t.UTF8ToString(u):"";throw new Error(`${e} ERROR_CODE: ${i}, ERROR_MESSAGE: ${a}`)}finally{t.stackRestore(r)}};var Ni=e=>{let t=Le(),r=0,o=[],i=e||{};try{if(e?.logSeverityLevel===void 0)i.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(e?.logVerbosityLevel===void 0)i.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);e?.terminate===void 0&&(i.terminate=!1);let u=0;return e?.tag!==void 0&&(u=Fe(e.tag,o)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,u),r===0&&Ue("Can\'t create run options."),e?.extra!==void 0&&Nr(e.extra,"",new WeakSet,(a,c)=>{let p=Fe(a,o),h=Fe(c,o);t._OrtAddRunConfigEntry(r,p,h)!==0&&Ue(`Can\'t set a run config entry: ${a} - ${c}.`)}),[r,o]}catch(u){throw r!==0&&t._OrtReleaseRunOptions(r),o.forEach(a=>t._free(a)),u}};var gl=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},yl=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},bl=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(e.enableMemPattern=!1)},wl=(e,t,r)=>{for(let o of t){let i=typeof o=="string"?o:o.name;switch(i){case"webnn":if(i="WEBNN",typeof o!="string"){let a=o;if(a?.deviceType){let c=Fe("deviceType",r),p=Fe(a.deviceType,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'deviceType\' - ${a.deviceType}.`)}if(a?.numThreads){let c=a.numThreads;(typeof c!="number"||!Number.isInteger(c)||c<0)&&(c=0);let p=Fe("numThreads",r),h=Fe(c.toString(),r);Le()._OrtAddSessionConfigEntry(e,p,h)!==0&&Ue(`Can\'t set a session config entry: \'numThreads\' - ${a.numThreads}.`)}if(a?.powerPreference){let c=Fe("powerPreference",r),p=Fe(a.powerPreference,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'powerPreference\' - ${a.powerPreference}.`)}}break;case"webgpu":if(i="JS",typeof o!="string"){let a=o;if(a?.preferredLayout){if(a.preferredLayout!=="NCHW"&&a.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${a.preferredLayout}`);let c=Fe("preferredLayout",r),p=Fe(a.preferredLayout,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'preferredLayout\' - ${a.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${i}`)}let u=Fe(i,r);Le()._OrtAppendExecutionProvider(e,u)!==0&&Ue(`Can\'t append execution provider: ${i}.`)}},Gi=e=>{let t=Le(),r=0,o=[],i=e||{};bl(i);try{let u=gl(i.graphOptimizationLevel??"all"),a=yl(i.executionMode??"sequential"),c=typeof i.logId=="string"?Fe(i.logId,o):0,p=i.logSeverityLevel??2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);let h=i.logVerbosityLevel??0;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log verbosity level is not valid: ${h}`);let d=typeof i.optimizedModelFilePath=="string"?Fe(i.optimizedModelFilePath,o):0;if(r=t._OrtCreateSessionOptions(u,!!i.enableCpuMemArena,!!i.enableMemPattern,a,!!i.enableProfiling,0,c,p,h,d),r===0&&Ue("Can\'t create session options."),i.executionProviders&&wl(r,i.executionProviders,o),i.enableGraphCapture!==void 0){if(typeof i.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${i.enableGraphCapture}`);let y=Fe("enableGraphCapture",o),w=Fe(i.enableGraphCapture.toString(),o);t._OrtAddSessionConfigEntry(r,y,w)!==0&&Ue(`Can\'t set a session config entry: \'enableGraphCapture\' - ${i.enableGraphCapture}.`)}if(i.freeDimensionOverrides)for(let[y,w]of Object.entries(i.freeDimensionOverrides)){if(typeof y!="string")throw new Error(`free dimension override name must be a string: ${y}`);if(typeof w!="number"||!Number.isInteger(w)||w<0)throw new Error(`free dimension override value must be a non-negative integer: ${w}`);let _=Fe(y,o);t._OrtAddFreeDimensionOverride(r,_,w)!==0&&Ue(`Can\'t set a free dimension override: ${y} - ${w}.`)}return i.extra!==void 0&&Nr(i.extra,"",new WeakSet,(y,w)=>{let _=Fe(y,o),v=Fe(w,o);t._OrtAddSessionConfigEntry(r,_,v)!==0&&Ue(`Can\'t set a session config entry: ${y} - ${w}.`)}),[r,o]}catch(u){throw r!==0&&t._OrtReleaseSessionOptions(r),o.forEach(a=>t._free(a)),u}};ye();var Li=async e=>{if(typeof e=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(e))}catch(t){if(t.code==="ERR_FS_FILE_TOO_LARGE"){let r=(void 0)(e),o=[];for await(let i of r)o.push(i);return new Uint8Array(Buffer.concat(o))}throw t}else{let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let r=t.headers.get("Content-Length"),o=r?parseInt(r,10):0;if(o<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let i=t.body.getReader(),u;try{u=new ArrayBuffer(o)}catch(c){if(c instanceof RangeError){let p=Math.ceil(o/65536);u=new WebAssembly.Memory({initial:p,maximum:p}).buffer}else throw c}let a=0;for(;;){let{done:c,value:p}=await i.read();if(c)break;let h=p.byteLength;new Uint8Array(u,a,h).set(p),a+=h}return new Uint8Array(u,0,o)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)};var im=(e,t)=>{Le()._OrtInit(e,t)!==0&&Ue("Can\'t initialize onnxruntime.")},Ld=async e=>{im(e.wasm.numThreads,Gr(e.logLevel))},Fd=async(e,t)=>{{let r=(Gd(),wr(Nd)).init;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let o=e.webgpu.adapter;if(o){if(typeof o.limits!="object"||typeof o.features!="object"||typeof o.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let i=e.webgpu.powerPreference;if(i!==void 0&&i!=="low-power"&&i!=="high-performance")throw new Error(`Invalid powerPreference setting: "${i}"`);let u=e.webgpu.forceFallbackAdapter;if(u!==void 0&&typeof u!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${u}"`);if(o=await navigator.gpu.requestAdapter({powerPreference:i,forceFallbackAdapter:u}),!o)throw new Error(\'Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.\')}if(!e.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using `webgpu` EP");await r("webgpu",Le(),e,o)}if(t==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await r("webnn",Le(),e)}}},ar=new Map,am=e=>{let t=Le(),r=t.stackSave();try{let o=t.stackAlloc(8);return t._OrtGetInputOutputCount(e,o,o+4)!==0&&Ue("Can\'t get session input/output count."),[t.HEAP32[o/4],t.HEAP32[o/4+1]]}finally{t.stackRestore(r)}},Xo=e=>{let t=Le(),r=t._malloc(e.byteLength);if(r===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},qd=async(e,t)=>{let r,o,i=Le();Array.isArray(e)?[r,o]=e:e.buffer===i.HEAPU8.buffer?[r,o]=[e.byteOffset,e.byteLength]:[r,o]=Xo(e);let u=0,a=0,c=0,p=[],h=[],d=[];try{if([a,p]=Gi(t),t?.externalData&&i.mountExternalData){let x=[];for(let E of t.externalData){let P=typeof E=="string"?E:E.path;x.push(Li(typeof E=="string"?E:E.data).then(O=>{i.mountExternalData(P,O)}))}await Promise.all(x)}u=await i._OrtCreateSession(r,o,a),u===0&&Ue("Can\'t create a session.");let[y,w]=am(u),_=!!t?.enableGraphCapture,v=[],S=[],A=[];for(let x=0;x<y;x++){let E=i._OrtGetInputName(u,x);E===0&&Ue("Can\'t get an input name."),h.push(E),v.push(i.UTF8ToString(E))}for(let x=0;x<w;x++){let E=i._OrtGetOutputName(u,x);E===0&&Ue("Can\'t get an output name."),d.push(E);let P=i.UTF8ToString(E);S.push(P);{if(_&&t?.preferredOutputLocation===void 0){A.push("gpu-buffer");continue}let O=typeof t?.preferredOutputLocation=="string"?t.preferredOutputLocation:t?.preferredOutputLocation?.[P]??"cpu";if(O!=="cpu"&&O!=="cpu-pinned"&&O!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${O}.`);if(_&&O!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${O}. Only \'gpu-buffer\' location is supported when enableGraphCapture is true.`);A.push(O)}}let I=null;return A.some(x=>x==="gpu-buffer")&&(c=i._OrtCreateBinding(u),c===0&&Ue("Can\'t create IO binding."),I={handle:c,outputPreferredLocations:A,outputPreferredLocationsEncoded:A.map(x=>yo(x))}),ar.set(u,[u,h,d,I,_,!1]),[u,v,S]}catch(y){throw h.forEach(w=>i._OrtFree(w)),d.forEach(w=>i._OrtFree(w)),c!==0&&i._OrtReleaseBinding(c),u!==0&&i._OrtReleaseSession(u),y}finally{i._free(r),a!==0&&i._OrtReleaseSessionOptions(a),p.forEach(y=>i._free(y)),i.unmountExternalData?.()}},jd=e=>{let t=Le(),r=ar.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);let[o,i,u,a,c]=r;a&&(c&&t._OrtClearBoundOutputs(a.handle),t._OrtReleaseBinding(a.handle)),t.jsepOnReleaseSession?.(e),i.forEach(p=>t._OrtFree(p)),u.forEach(p=>t._OrtFree(p)),t._OrtReleaseSession(o),ar.delete(e)},Hd=(e,t,r,o,i,u=!1)=>{if(!e){t.push(0);return}let a=Le(),c=e[0],p=e[1],h=e[3],d,y;if(c==="string"&&h==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(u&&h!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${i} when enableGraphCapture is true.`);if(h==="gpu-buffer"){let v=e[2].gpuBuffer,S=tr(go(c));y=p.reduce((I,x)=>I*x,1)*S;let A=a.jsepRegisterBuffer;if(!A)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');d=A(o,i,v,y)}else{let v=e[2];if(Array.isArray(v)){y=4*v.length,d=a._malloc(y),r.push(d);let S=d/4;for(let A=0;A<v.length;A++){if(typeof v[A]!="string")throw new TypeError(`tensor data at index ${A} is not a string`);a.HEAPU32[S++]=Fe(v[A],r)}}else y=v.byteLength,d=a._malloc(y),r.push(d),a.HEAPU8.set(new Uint8Array(v.buffer,v.byteOffset,y),d)}let w=a.stackSave(),_=a.stackAlloc(4*p.length);try{let v=_/4;p.forEach(A=>a.HEAP32[v++]=A);let S=a._OrtCreateTensor(go(c),d,y,_,p.length,yo(h));S===0&&Ue(`Can\'t create tensor for input/output. session=${o}, index=${i}.`),t.push(S)}finally{a.stackRestore(w)}},Kd=async(e,t,r,o,i,u)=>{let a=Le(),c=ar.get(e);if(!c)throw new Error(`cannot run inference. invalid session id: ${e}`);let p=c[0],h=c[1],d=c[2],y=c[3],w=c[4],_=c[5],v=t.length,S=o.length,A=0,I=[],x=[],E=[],P=[],O=a.stackSave(),R=a.stackAlloc(v*4),L=a.stackAlloc(v*4),N=a.stackAlloc(S*4),K=a.stackAlloc(S*4);try{[A,I]=Ni(u);for(let ee=0;ee<v;ee++)Hd(r[ee],x,P,e,t[ee],w);for(let ee=0;ee<S;ee++)Hd(i[ee],E,P,e,v+o[ee],w);let Q=R/4,he=L/4,W=N/4,se=K/4;for(let ee=0;ee<v;ee++)a.HEAPU32[Q++]=x[ee],a.HEAPU32[he++]=h[t[ee]];for(let ee=0;ee<S;ee++)a.HEAPU32[W++]=E[ee],a.HEAPU32[se++]=d[o[ee]];if(y&&!_){let{handle:ee,outputPreferredLocations:ae,outputPreferredLocationsEncoded:Ae}=y;if(h.length!==v)throw new Error(`input count from feeds (${v}) is expected to be always equal to model\'s input count (${h.length}).`);for(let me=0;me<v;me++){let ie=t[me];await a._OrtBindInput(ee,h[ie],x[me])!==0&&Ue(`Can\'t bind input[${me}] for session=${e}.`)}for(let me=0;me<S;me++){let ie=o[me];i[me]?.[3]?a._OrtBindOutput(ee,d[ie],E[me],0)!==0&&Ue(`Can\'t bind pre-allocated output[${me}] for session=${e}.`):a._OrtBindOutput(ee,d[ie],0,Ae[ie])!==0&&Ue(`Can\'t bind output[${me}] to ${ae[me]} for session=${e}.`)}ar.set(e,[p,h,d,y,w,!0])}a.jsepOnRunStart?.(p);let Ce;y?Ce=await a._OrtRunWithBinding(p,y.handle,S,N,A):Ce=await a._OrtRun(p,L,R,v,K,S,N,A),Ce!==0&&Ue("failed to call OrtRun().");let We=[];for(let ee=0;ee<S;ee++){let ae=a.HEAPU32[N/4+ee];if(ae===E[ee]){We.push(i[ee]);continue}let Ae=a.stackSave(),me=a.stackAlloc(4*4),ie=!1,ue,le=0;try{a._OrtGetTensorData(ae,me,me+4,me+8,me+12)!==0&&Ue(`Can\'t access output tensor data on index ${ee}.`);let G=me/4,ne=a.HEAPU32[G++];le=a.HEAPU32[G++];let xe=a.HEAPU32[G++],Ke=a.HEAPU32[G++],Be=[];for(let Ne=0;Ne<Ke;Ne++)Be.push(a.HEAPU32[xe/4+Ne]);a._OrtFree(xe);let Ge=Be.reduce((Ne,Ye)=>Ne*Ye,1);ue=Gt(ne);let Ut=y?.outputPreferredLocations[o[ee]];if(ue==="string"){if(Ut==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Ne=[],Ye=le/4;for(let mt=0;mt<Ge;mt++){let Rt=a.HEAPU32[Ye++],qt=mt===Ge-1?void 0:a.HEAPU32[Ye]-Rt;Ne.push(a.UTF8ToString(Rt,qt))}We.push([ue,Be,Ne,"cpu"])}else if(Ut==="gpu-buffer"&&Ge>0){let Ne=a.jsepGetBuffer;if(!Ne)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let Ye=Ne(le),mt=tr(ne);if(mt===void 0||!Hi(ue))throw new Error(`Unsupported data type: ${ue}`);ie=!0,We.push([ue,Be,{gpuBuffer:Ye,download:a.jsepCreateDownloader(Ye,Ge*mt,ue),dispose:()=>{a._OrtReleaseTensor(ae)}},"gpu-buffer"])}else{let Ne=bn(ue),Ye=new Ne(Ge);new Uint8Array(Ye.buffer,Ye.byteOffset,Ye.byteLength).set(a.HEAPU8.subarray(le,le+Ye.byteLength)),We.push([ue,Be,Ye,"cpu"])}}finally{a.stackRestore(Ae),ue==="string"&&le&&a._free(le),ie||a._OrtReleaseTensor(ae)}}return y&&!w&&(a._OrtClearBoundOutputs(y.handle),ar.set(e,[p,h,d,y,w,!1])),We}finally{a.stackRestore(O),x.forEach(Q=>a._OrtReleaseTensor(Q)),E.forEach(Q=>a._OrtReleaseTensor(Q)),P.forEach(Q=>a._free(Q)),A!==0&&a._OrtReleaseRunOptions(A),I.forEach(Q=>a._free(Q))}},Yd=e=>{let t=Le(),r=ar.get(e);if(!r)throw new Error("invalid session id");let o=r[0],i=t._OrtEndProfiling(o);i===0&&Ue("Can\'t get an profile file name."),t._OrtFree(i)},Zd=e=>{let t=[];for(let r of e){let o=r[2];!Array.isArray(o)&&"buffer"in o&&t.push(o.buffer)}return t};self.onmessage=e=>{let{type:t,in:r}=e.data;try{switch(t){case"init-wasm":Wi(r.wasm).then(()=>{Ld(r).then(()=>{postMessage({type:t})},o=>{postMessage({type:t,err:o})})},o=>{postMessage({type:t,err:o})});break;case"init-ep":{let{epName:o,env:i}=r;Fd(i,o).then(()=>{postMessage({type:t})},u=>{postMessage({type:t,err:u})});break}case"copy-from":{let{buffer:o}=r,i=Xo(o);postMessage({type:t,out:i});break}case"create":{let{model:o,options:i}=r;qd(o,i).then(u=>{postMessage({type:t,out:u})},u=>{postMessage({type:t,err:u})});break}case"release":jd(r),postMessage({type:t});break;case"run":{let{sessionId:o,inputIndices:i,inputs:u,outputIndices:a,options:c}=r;Kd(o,i,u,a,new Array(a.length).fill(null),c).then(p=>{p.some(h=>h[3]!=="cpu")?postMessage({type:t,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:t,out:p},Zd([...u,...p]))},p=>{postMessage({type:t,err:p})});break}case"end-profiling":Yd(r),postMessage({type:t});break;default:}}catch(o){postMessage({type:t,err:o})}};})();\n/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n'}),gr,St,sn,pi,mi,Co,Io,zr,Br,pf,ci,Wd,Nd,Vd,Hd,Gd,Ld,Fd,To=j(()=>{_t(),Md(),Or(),gr=()=>!!ke.wasm.proxy&&typeof document<"u",sn=!1,pi=!1,mi=!1,Io=new Map,zr=(t,e)=>{let n=Io.get(t);n?n.push(e):Io.set(t,[e])},Br=()=>{if(sn||!pi||mi||!St)throw new Error("worker not ready")},pf=t=>{switch(t.data.type){case"init-wasm":sn=!1,t.data.err?(mi=!0,Co[1](t.data.err)):(pi=!0,Co[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let e=Io.get(t.data.type);t.data.err?e.shift()[1](t.data.err):e.shift()[0](t.data.out);break}}},ci=typeof document<"u"?document?.currentScript?.src:void 0,Wd=async()=>{if(!pi){if(sn)throw new Error("multiple calls to 'initWasm()' detected.");if(mi)throw new Error("previous call to 'initWasm()' failed.");if(sn=!0,gr())return ke.wasm.wasmPaths===void 0&&ci&&ci.indexOf("blob:")!==0&&(ke.wasm.wasmPaths=ci.substr(0,+ci.lastIndexOf("/")+1)),new Promise((t,e)=>{St?.terminate();let n=URL.createObjectURL(new Blob([Ud()],{type:"text/javascript"}));St=new Worker(n,{name:"ort-wasm-proxy-worker"}),St.onerror=o=>e(o),St.onmessage=pf,URL.revokeObjectURL(n),Co=[t,e];let i={type:"init-wasm",in:ke};St.postMessage(i)});try{await Fa(ke.wasm),await kd(ke),pi=!0}catch(t){throw mi=!0,t}finally{sn=!1}}},Nd=async t=>{if(gr())return Br(),new Promise((e,n)=>{zr("init-ep",[e,n]);let i={type:"init-ep",in:{epName:t,env:ke}};St.postMessage(i)});await Od(ke,t)},Vd=async t=>gr()?(Br(),new Promise((e,n)=>{zr("copy-from",[e,n]);let i={type:"copy-from",in:{buffer:t}};St.postMessage(i,[t.buffer])})):So(t),Hd=async(t,e)=>{if(gr()){if(e?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Br(),new Promise((n,i)=>{zr("create",[n,i]);let o={type:"create",in:{model:t,options:{...e}}},a=[];t instanceof Uint8Array&&a.push(t.buffer),St.postMessage(o,a)})}else return Pd(t,e)},Gd=async t=>{if(gr())return Br(),new Promise((e,n)=>{zr("release",[e,n]);let i={type:"release",in:t};St.postMessage(i)});Rd(t)},Ld=async(t,e,n,i,o,a)=>{if(gr()){if(n.some(l=>l[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(o.some(l=>l))throw new Error("pre-allocated output tensor is not supported for proxy.");return Br(),new Promise((l,c)=>{zr("run",[l,c]);let p=n,s={type:"run",in:{sessionId:t,inputIndices:e,inputs:p,outputIndices:i,options:a}};St.postMessage(s,Dd(p))})}else return zd(t,e,n,i,o,a)},Fd=async t=>{if(gr())return Br(),new Promise((e,n)=>{zr("end-profiling",[e,n]);let i={type:"end-profiling",in:t};St.postMessage(i)});Bd(t)}}),qd,mf,fi,jd=j(()=>{_t(),To(),ye(),qi(),qd=(t,e)=>{switch(t.location){case"cpu":return[t.type,t.dims,t.data,"cpu"];case"gpu-buffer":return[t.type,t.dims,{gpuBuffer:t.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${t.location} for ${e()}`)}},mf=t=>{switch(t[3]){case"cpu":return new tt(t[0],t[2],t[1]);case"gpu-buffer":{let e=t[0];if(!Vn(e))throw new Error(`not supported data type: ${e} for deserializing GPU tensor`);let{gpuBuffer:n,download:i,dispose:o}=t[2];return tt.fromGpuBuffer(n,{dataType:e,dims:t[1],download:i,dispose:o})}default:throw new Error(`invalid data location: ${t[3]}`)}},fi=class{async fetchModelAndCopyToWasmMemory(t){return Vd(await tn(t))}async loadModel(t,e){yt();let n;typeof t=="string"?typeof process<"u"&&process.versions&&process.versions.node?n=await tn(t):n=await this.fetchModelAndCopyToWasmMemory(t):n=t,[this.sessionId,this.inputNames,this.outputNames]=await Hd(n,e),ut()}async dispose(){return Gd(this.sessionId)}async run(t,e,n){yt();let i=[],o=[];Object.entries(t).forEach(d=>{let g=d[0],w=d[1],x=this.inputNames.indexOf(g);if(x===-1)throw new Error(`invalid input '${g}'`);i.push(w),o.push(x)});let a=[],l=[];Object.entries(e).forEach(d=>{let g=d[0],w=d[1],x=this.outputNames.indexOf(g);if(x===-1)throw new Error(`invalid output '${g}'`);a.push(w),l.push(x)});let c=i.map((d,g)=>qd(d,()=>`input "${this.inputNames[o[g]]}"`)),p=a.map((d,g)=>d?qd(d,()=>`output "${this.outputNames[l[g]]}"`):null),s=await Ld(this.sessionId,o,c,l,p,n),u={};for(let d=0;d<s.length;d++)u[this.outputNames[l[d]]]=a[d]??mf(s[d]);return ut(),u}startProfiling(){}endProfiling(){Fd(this.sessionId)}}}),ff,hi,Kd=j(()=>{_t(),To(),jd(),ff=()=>{if((typeof ke.wasm.initTimeout!="number"||ke.wasm.initTimeout<0)&&(ke.wasm.initTimeout=0),typeof ke.wasm.simd!="boolean"&&(ke.wasm.simd=!0),typeof ke.wasm.proxy!="boolean"&&(ke.wasm.proxy=!1),typeof ke.wasm.trace!="boolean"&&(ke.wasm.trace=!1),typeof ke.wasm.numThreads!="number"||!Number.isInteger(ke.wasm.numThreads)||ke.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(ke.wasm.numThreads=1);let t=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;ke.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},hi=class{async init(t){ff(),await Wd(),await Nd(t)}async createInferenceSessionHandler(t,e){let n=new fi;return await n.loadModel(t,e),Promise.resolve(n)}}}),Yd={};kr(Yd,{wasmBackend:()=>hf});var hf,Xd=j(()=>{Kd(),hf=new hi});_t();_t();_t();var ka="1.18.0",h$=Bi;{let t=(Xd(),sr(Yd)).wasmBackend;lr("webgpu",t,5),lr("webnn",t,5),lr("cpu",t,10),lr("wasm",t,10)}Object.defineProperty(ke.versions,"web",{value:ka,enumerable:!0});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ort_gpu=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return uc},get TRACE(){return Bn},get TRACE_FUNC_BEGIN(){return yt},get TRACE_FUNC_END(){return ut},get Tensor(){return tt},get TrainingSession(){return dc},default:h$,get env(){return ke},get registerBackend(){return lr}},Symbol.toStringTag,{value:"Module"}));var util;(function(t){t.assertEqual=o=>o;function e(o){}t.assertIs=e;function n(o){throw new Error}t.assertNever=n,t.arrayToEnum=o=>{const a={};for(const l of o)a[l]=l;return a},t.getValidEnumValues=o=>{const a=t.objectKeys(o).filter(c=>typeof o[o[c]]!="number"),l={};for(const c of a)l[c]=o[c];return t.objectValues(l)},t.objectValues=o=>t.objectKeys(o).map(function(a){return o[a]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const a=[];for(const l in o)Object.prototype.hasOwnProperty.call(o,l)&&a.push(l);return a},t.find=(o,a)=>{for(const l of o)if(a(l))return l},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function i(o,a=" | "){return o.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}t.joinValues=i,t.jsonStringifyReplacer=(o,a)=>typeof a=="bigint"?a.toString():a})(util||(util={}));var objectUtil;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=t=>{switch(typeof t){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(t)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(t)?ZodParsedType.array:t===null?ZodParsedType.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&t instanceof Map?ZodParsedType.map:typeof Set<"u"&&t instanceof Set?ZodParsedType.set:typeof Date<"u"&&t instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(a){return a.message},i={_errors:[]},o=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(o);else if(l.code==="invalid_return_type")o(l.returnTypeError);else if(l.code==="invalid_arguments")o(l.argumentsError);else if(l.path.length===0)i._errors.push(n(l));else{let c=i,p=0;for(;p<l.path.length;){const s=l.path[p];p===l.path.length-1?(c[s]=c[s]||{_errors:[]},c[s]._errors.push(n(l))):c[s]=c[s]||{_errors:[]},c=c[s],p++}}};return o(this),i}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const o of this.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(e(o))):i.push(e(o));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}ZodError.create=t=>new ZodError(t);const errorMap=(t,e)=>{let n;switch(t.code){case ZodIssueCode.invalid_type:t.received===ZodParsedType.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ZodIssueCode.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:n=`Unrecognized key(s) in object: ${util.joinValues(t.keys,", ")}`;break;case ZodIssueCode.invalid_union:n="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${util.joinValues(t.options)}`;break;case ZodIssueCode.invalid_enum_value:n=`Invalid enum value. Expected ${util.joinValues(t.options)}, received '${t.received}'`;break;case ZodIssueCode.invalid_arguments:n="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:n="Invalid function return type";break;case ZodIssueCode.invalid_date:n="Invalid date";break;case ZodIssueCode.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:util.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ZodIssueCode.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ZodIssueCode.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ZodIssueCode.custom:n="Invalid input";break;case ZodIssueCode.invalid_intersection_types:n="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ZodIssueCode.not_finite:n="Number must be finite";break;default:n=e.defaultError,util.assertNever(t)}return{message:n}};let overrideErrorMap=errorMap;function setErrorMap(t){overrideErrorMap=t}function getErrorMap(){return overrideErrorMap}const makeIssue=t=>{const{data:e,path:n,errorMaps:i,issueData:o}=t,a=[...n,...o.path||[]],l={...o,path:a};if(o.message!==void 0)return{...o,path:a,message:o.message};let c="";const p=i.filter(s=>!!s).slice().reverse();for(const s of p)c=s(l,{data:e,defaultError:c}).message;return{...o,path:a,message:c}},EMPTY_PATH=[];function addIssueToContext(t,e){const n=getErrorMap(),i=makeIssue({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===errorMap?void 0:errorMap].filter(o=>!!o)});t.common.issues.push(i)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const o of n){if(o.status==="aborted")return INVALID;o.status==="dirty"&&e.dirty(),i.push(o.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const o of n){const a=await o.key,l=await o.value;i.push({key:a,value:l})}return ParseStatus.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const o of n){const{key:a,value:l}=o;if(a.status==="aborted"||l.status==="aborted")return INVALID;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||o.alwaysSet)&&(i[a.value]=l.value)}return{status:e.value,value:i}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=t=>({status:"dirty",value:t}),OK=t=>({status:"valid",value:t}),isAborted=t=>t.status==="aborted",isDirty=t=>t.status==="dirty",isValid$2=t=>t.status==="valid",isAsync=t=>typeof Promise<"u"&&t instanceof Promise;function __classPrivateFieldGet(t,e,n,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function __classPrivateFieldSet(t,e,n,i,o){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(e,n,i,o){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(t,e)=>{if(isValid$2(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ZodError(t.common.issues);return this._error=n,this._error}}};function processCreateParams(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:o}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(l,c)=>{var p,s;const{message:u}=t;return l.code==="invalid_enum_value"?{message:u??c.defaultError}:typeof c.data>"u"?{message:(p=u??i)!==null&&p!==void 0?p:c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:(s=u??n)!==null&&s!==void 0?s:c.defaultError}},description:o}}class ZodType{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(isAsync(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const o={common:{issues:[],async:(i=n?.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},a=this._parseSync({data:e,path:o.path,parent:o});return handleResult(o,a)}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},o=this._parse({data:e,path:i.path,parent:i}),a=await(isAsync(o)?o:Promise.resolve(o));return handleResult(i,a)}refine(e,n){const i=o=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(o):n;return this._refinement((o,a)=>{const l=e(o),c=()=>a.addIssue({code:ZodIssueCode.custom,...i(o)});return typeof Promise<"u"&&l instanceof Promise?l.then(p=>p?!0:(c(),!1)):l?!0:(c(),!1)})}refinement(e,n){return this._refinement((i,o)=>e(i)?!0:(o.addIssue(typeof n=="function"?n(i,o):n),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:n,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:n,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function timeRegex(t){return new RegExp(`^${timeRegexSource(t)}$`)}function datetimeRegex(t){let e=`${dateRegexSource}T${timeRegexSource(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function isValidIP(t,e){return!!((e==="v4"||!e)&&ipv4Regex.test(t)||(e==="v6"||!e)&&ipv6Regex.test(t))}class ZodString extends ZodType{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ZodParsedType.string){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:a.parsedType}),INVALID}const i=new ParseStatus;let o;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="max")e.data.length>a.value&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="length"){const l=e.data.length>a.value,c=e.data.length<a.value;(l||c)&&(o=this._getOrReturnCtx(e,o),l?addIssueToContext(o,{code:ZodIssueCode.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&addIssueToContext(o,{code:ZodIssueCode.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),i.dirty())}else if(a.kind==="email")emailRegex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"email",code:ZodIssueCode.invalid_string,message:a.message}),i.dirty());else if(a.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"emoji",code:ZodIssueCode.invalid_string,message:a.message}),i.dirty());else if(a.kind==="uuid")uuidRegex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"uuid",code:ZodIssueCode.invalid_string,message:a.message}),i.dirty());else if(a.kind==="nanoid")nanoidRegex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid")cuidRegex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"cuid",code:ZodIssueCode.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid2")cuid2Regex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:a.message}),i.dirty());else if(a.kind==="ulid")ulidRegex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"ulid",code:ZodIssueCode.invalid_string,message:a.message}),i.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"url",code:ZodIssueCode.invalid_string,message:a.message}),i.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"regex",code:ZodIssueCode.invalid_string,message:a.message}),i.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),i.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.invalid_string,validation:{startsWith:a.value},message:a.message}),i.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.invalid_string,validation:{endsWith:a.value},message:a.message}),i.dirty()):a.kind==="datetime"?datetimeRegex(a).test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.invalid_string,validation:"datetime",message:a.message}),i.dirty()):a.kind==="date"?dateRegex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.invalid_string,validation:"date",message:a.message}),i.dirty()):a.kind==="time"?timeRegex(a).test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.invalid_string,validation:"time",message:a.message}),i.dirty()):a.kind==="duration"?durationRegex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"duration",code:ZodIssueCode.invalid_string,message:a.message}),i.dirty()):a.kind==="ip"?isValidIP(e.data,a.version)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"ip",code:ZodIssueCode.invalid_string,message:a.message}),i.dirty()):a.kind==="base64"?base64Regex.test(e.data)||(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{validation:"base64",code:ZodIssueCode.invalid_string,message:a.message}),i.dirty()):util.assertNever(a);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(o=>e.test(o),{validation:n,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(i)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}datetime(e){var n,i;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(i=e?.local)!==null&&i!==void 0?i:!1,...errorUtil.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...errorUtil.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...errorUtil.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...errorUtil.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(n)})}nonempty(e){return this.min(1,errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ZodString.create=t=>{var e;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(t)})};function floatSafeRemainder(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,o=n>i?n:i,a=parseInt(t.toFixed(o).replace(".","")),l=parseInt(e.toFixed(o).replace(".",""));return a%l/Math.pow(10,o)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ZodParsedType.number){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:a.parsedType}),INVALID}let i;const o=new ParseStatus;for(const a of this._def.checks)a.kind==="int"?util.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:a.message}),o.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="multipleOf"?floatSafeRemainder(e.data,a.value)!==0&&(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.not_finite,message:a.message}),o.dirty()):util.assertNever(a);return{status:o.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,errorUtil.toString(n))}gt(e,n){return this.setLimit("min",e,!1,errorUtil.toString(n))}lte(e,n){return this.setLimit("max",e,!0,errorUtil.toString(n))}lt(e,n){return this.setLimit("max",e,!1,errorUtil.toString(n))}setLimit(e,n,i,o){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:errorUtil.toString(o)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&util.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ZodNumber.create=t=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:t?.coerce||!1,...processCreateParams(t)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ZodParsedType.bigint){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:a.parsedType}),INVALID}let i;const o=new ParseStatus;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):util.assertNever(a);return{status:o.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,errorUtil.toString(n))}gt(e,n){return this.setLimit("min",e,!1,errorUtil.toString(n))}lte(e,n){return this.setLimit("max",e,!0,errorUtil.toString(n))}lt(e,n){return this.setLimit("max",e,!1,errorUtil.toString(n))}setLimit(e,n,i,o){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:errorUtil.toString(o)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ZodBigInt.create=t=>{var e;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(t)})};class ZodBoolean extends ZodType{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ZodParsedType.boolean){const i=this._getOrReturnCtx(e);return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:i.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=t=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:t?.coerce||!1,...processCreateParams(t)});class ZodDate extends ZodType{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ZodParsedType.date){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:a.parsedType}),INVALID}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return addIssueToContext(a,{code:ZodIssueCode.invalid_date}),INVALID}const i=new ParseStatus;let o;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),i.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(o=this._getOrReturnCtx(e,o),addIssueToContext(o,{code:ZodIssueCode.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),i.dirty()):util.assertNever(a);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ZodDate.create=t=>new ZodDate({checks:[],coerce:t?.coerce||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(t)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const i=this._getOrReturnCtx(e);return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:i.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=t=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(t)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const i=this._getOrReturnCtx(e);return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:i.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=t=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(t)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const i=this._getOrReturnCtx(e);return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:i.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=t=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(t)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=t=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(t)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=t=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(t)});class ZodNever extends ZodType{_parse(e){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:n.parsedType}),INVALID}}ZodNever.create=t=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(t)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const i=this._getOrReturnCtx(e);return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:i.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=t=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(t)});class ZodArray extends ZodType{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),o=this._def;if(n.parsedType!==ZodParsedType.array)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:n.parsedType}),INVALID;if(o.exactLength!==null){const l=n.data.length>o.exactLength.value,c=n.data.length<o.exactLength.value;(l||c)&&(addIssueToContext(n,{code:l?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:c?o.exactLength.value:void 0,maximum:l?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),i.dirty())}if(o.minLength!==null&&n.data.length<o.minLength.value&&(addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),i.dirty()),o.maxLength!==null&&n.data.length>o.maxLength.value&&(addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((l,c)=>o.type._parseAsync(new ParseInputLazyPath(n,l,n.path,c)))).then(l=>ParseStatus.mergeArray(i,l));const a=[...n.data].map((l,c)=>o.type._parseSync(new ParseInputLazyPath(n,l,n.path,c)));return ParseStatus.mergeArray(i,a)}get element(){return this._def.type}min(e,n){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(n)}})}max(e,n){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(n)}})}length(e,n){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(n)}})}nonempty(e){return this.min(1,e)}}ZodArray.create=(t,e)=>new ZodArray({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(e)});function deepPartialify(t){if(t instanceof ZodObject){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=ZodOptional.create(deepPartialify(i))}return new ZodObject({...t._def,shape:()=>e})}else return t instanceof ZodArray?new ZodArray({...t._def,type:deepPartialify(t.element)}):t instanceof ZodOptional?ZodOptional.create(deepPartialify(t.unwrap())):t instanceof ZodNullable?ZodNullable.create(deepPartialify(t.unwrap())):t instanceof ZodTuple?ZodTuple.create(t.items.map(e=>deepPartialify(e))):t}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=util.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ZodParsedType.object){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:s.parsedType}),INVALID}const{status:i,ctx:o}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const s in o.data)l.includes(s)||c.push(s);const p=[];for(const s of l){const u=a[s],d=o.data[s];p.push({key:{status:"valid",value:s},value:u._parse(new ParseInputLazyPath(o,d,o.path,s)),alwaysSet:s in o.data})}if(this._def.catchall instanceof ZodNever){const s=this._def.unknownKeys;if(s==="passthrough")for(const u of c)p.push({key:{status:"valid",value:u},value:{status:"valid",value:o.data[u]}});else if(s==="strict")c.length>0&&(addIssueToContext(o,{code:ZodIssueCode.unrecognized_keys,keys:c}),i.dirty());else if(s!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const s=this._def.catchall;for(const u of c){const d=o.data[u];p.push({key:{status:"valid",value:u},value:s._parse(new ParseInputLazyPath(o,d,o.path,u)),alwaysSet:u in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const s=[];for(const u of p){const d=await u.key,g=await u.value;s.push({key:d,value:g,alwaysSet:u.alwaysSet})}return s}).then(s=>ParseStatus.mergeObjectSync(i,s)):ParseStatus.mergeObjectSync(i,p)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var o,a,l,c;const p=(l=(a=(o=this._def).errorMap)===null||a===void 0?void 0:a.call(o,n,i).message)!==null&&l!==void 0?l:i.defaultError;return n.code==="unrecognized_keys"?{message:(c=errorUtil.errToObj(e).message)!==null&&c!==void 0?c:p}:{message:p}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const n={};return util.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new ZodObject({...this._def,shape:()=>n})}omit(e){const n={};return util.objectKeys(this.shape).forEach(i=>{e[i]||(n[i]=this.shape[i])}),new ZodObject({...this._def,shape:()=>n})}deepPartial(){return deepPartialify(this)}partial(e){const n={};return util.objectKeys(this.shape).forEach(i=>{const o=this.shape[i];e&&!e[i]?n[i]=o:n[i]=o.optional()}),new ZodObject({...this._def,shape:()=>n})}required(e){const n={};return util.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])n[i]=this.shape[i];else{let a=this.shape[i];for(;a instanceof ZodOptional;)a=a._def.innerType;n[i]=a}}),new ZodObject({...this._def,shape:()=>n})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(t,e)=>new ZodObject({shape:()=>t,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.strictCreate=(t,e)=>new ZodObject({shape:()=>t,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.lazycreate=(t,e)=>new ZodObject({shape:t,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});class ZodUnion extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function o(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const l=a.map(c=>new ZodError(c.ctx.common.issues));return addIssueToContext(n,{code:ZodIssueCode.invalid_union,unionErrors:l}),INVALID}if(n.common.async)return Promise.all(i.map(async a=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(o);{let a;const l=[];for(const p of i){const s={...n,common:{...n.common,issues:[]},parent:null},u=p._parseSync({data:n.data,path:n.path,parent:s});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:s}),s.common.issues.length&&l.push(s.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const c=l.map(p=>new ZodError(p));return addIssueToContext(n,{code:ZodIssueCode.invalid_union,unionErrors:c}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(t,e)=>new ZodUnion({options:t,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(e)});const getDiscriminator=t=>t instanceof ZodLazy?getDiscriminator(t.schema):t instanceof ZodEffects?getDiscriminator(t.innerType()):t instanceof ZodLiteral?[t.value]:t instanceof ZodEnum?t.options:t instanceof ZodNativeEnum?util.objectValues(t.enum):t instanceof ZodDefault?getDiscriminator(t._def.innerType):t instanceof ZodUndefined?[void 0]:t instanceof ZodNull?[null]:t instanceof ZodOptional?[void 0,...getDiscriminator(t.unwrap())]:t instanceof ZodNullable?[null,...getDiscriminator(t.unwrap())]:t instanceof ZodBranded||t instanceof ZodReadonly?getDiscriminator(t.unwrap()):t instanceof ZodCatch?getDiscriminator(t._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.object)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:n.parsedType}),INVALID;const i=this.discriminator,o=n.data[i],a=this.optionsMap.get(o);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(addIssueToContext(n,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const o=new Map;for(const a of n){const l=getDiscriminator(a.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of l){if(o.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);o.set(c,a)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:o,...processCreateParams(i)})}}function mergeValues(t,e){const n=getParsedType(t),i=getParsedType(e);if(t===e)return{valid:!0,data:t};if(n===ZodParsedType.object&&i===ZodParsedType.object){const o=util.objectKeys(e),a=util.objectKeys(t).filter(c=>o.indexOf(c)!==-1),l={...t,...e};for(const c of a){const p=mergeValues(t[c],e[c]);if(!p.valid)return{valid:!1};l[c]=p.data}return{valid:!0,data:l}}else if(n===ZodParsedType.array&&i===ZodParsedType.array){if(t.length!==e.length)return{valid:!1};const o=[];for(let a=0;a<t.length;a++){const l=t[a],c=e[a],p=mergeValues(l,c);if(!p.valid)return{valid:!1};o.push(p.data)}return{valid:!0,data:o}}else return n===ZodParsedType.date&&i===ZodParsedType.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),o=(a,l)=>{if(isAborted(a)||isAborted(l))return INVALID;const c=mergeValues(a.value,l.value);return c.valid?((isDirty(a)||isDirty(l))&&n.dirty(),{status:n.value,value:c.data}):(addIssueToContext(i,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([a,l])=>o(a,l)):o(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}ZodIntersection.create=(t,e,n)=>new ZodIntersection({left:t,right:e,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(n)});class ZodTuple extends ZodType{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ZodParsedType.array)return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:i.parsedType}),INVALID;if(i.data.length<this._def.items.length)return addIssueToContext(i,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&i.data.length>this._def.items.length&&(addIssueToContext(i,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...i.data].map((l,c)=>{const p=this._def.items[c]||this._def.rest;return p?p._parse(new ParseInputLazyPath(i,l,i.path,c)):null}).filter(l=>!!l);return i.common.async?Promise.all(a).then(l=>ParseStatus.mergeArray(n,l)):ParseStatus.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:t,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(e)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ZodParsedType.object)return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:i.parsedType}),INVALID;const o=[],a=this._def.keyType,l=this._def.valueType;for(const c in i.data)o.push({key:a._parse(new ParseInputLazyPath(i,c,i.path,c)),value:l._parse(new ParseInputLazyPath(i,i.data[c],i.path,c)),alwaysSet:c in i.data});return i.common.async?ParseStatus.mergeObjectAsync(n,o):ParseStatus.mergeObjectSync(n,o)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof ZodType?new ZodRecord({keyType:e,valueType:n,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(i)}):new ZodRecord({keyType:ZodString.create(),valueType:e,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(n)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ZodParsedType.map)return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:i.parsedType}),INVALID;const o=this._def.keyType,a=this._def.valueType,l=[...i.data.entries()].map(([c,p],s)=>({key:o._parse(new ParseInputLazyPath(i,c,i.path,[s,"key"])),value:a._parse(new ParseInputLazyPath(i,p,i.path,[s,"value"]))}));if(i.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const p of l){const s=await p.key,u=await p.value;if(s.status==="aborted"||u.status==="aborted")return INVALID;(s.status==="dirty"||u.status==="dirty")&&n.dirty(),c.set(s.value,u.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const p of l){const s=p.key,u=p.value;if(s.status==="aborted"||u.status==="aborted")return INVALID;(s.status==="dirty"||u.status==="dirty")&&n.dirty(),c.set(s.value,u.value)}return{status:n.value,value:c}}}}ZodMap.create=(t,e,n)=>new ZodMap({valueType:e,keyType:t,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(n)});class ZodSet extends ZodType{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ZodParsedType.set)return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:i.parsedType}),INVALID;const o=this._def;o.minSize!==null&&i.data.size<o.minSize.value&&(addIssueToContext(i,{code:ZodIssueCode.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),n.dirty()),o.maxSize!==null&&i.data.size>o.maxSize.value&&(addIssueToContext(i,{code:ZodIssueCode.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),n.dirty());const a=this._def.valueType;function l(p){const s=new Set;for(const u of p){if(u.status==="aborted")return INVALID;u.status==="dirty"&&n.dirty(),s.add(u.value)}return{status:n.value,value:s}}const c=[...i.data.values()].map((p,s)=>a._parse(new ParseInputLazyPath(i,p,i.path,s)));return i.common.async?Promise.all(c).then(p=>l(p)):l(c)}min(e,n){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(n)}})}max(e,n){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ZodSet.create=(t,e)=>new ZodSet({valueType:t,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(e)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.function)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:n.parsedType}),INVALID;function i(c,p){return makeIssue({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,getErrorMap(),errorMap].filter(s=>!!s),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:p}})}function o(c,p){return makeIssue({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,getErrorMap(),errorMap].filter(s=>!!s),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:p}})}const a={errorMap:n.common.contextualErrorMap},l=n.data;if(this._def.returns instanceof ZodPromise){const c=this;return OK(async function(...p){const s=new ZodError([]),u=await c._def.args.parseAsync(p,a).catch(w=>{throw s.addIssue(i(p,w)),s}),d=await Reflect.apply(l,this,u);return await c._def.returns._def.type.parseAsync(d,a).catch(w=>{throw s.addIssue(o(d,w)),s})})}else{const c=this;return OK(function(...p){const s=c._def.args.safeParse(p,a);if(!s.success)throw new ZodError([i(p,s.error)]);const u=Reflect.apply(l,this,s.data),d=c._def.returns.safeParse(u,a);if(!d.success)throw new ZodError([o(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:n||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(i)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ZodLazy.create=(t,e)=>new ZodLazy({getter:t,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(e)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{received:n.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}ZodLiteral.create=(t,e)=>new ZodLiteral({value:t,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(e)});function createZodEnum(t,e){return new ZodEnum({values:t,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(e)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return addIssueToContext(n,{expected:util.joinValues(i),received:n.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return addIssueToContext(n,{received:n.data,code:ZodIssueCode.invalid_enum_value,options:i}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ZodEnum.create(e,{...this._def,...n})}exclude(e,n=this._def){return ZodEnum.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(e){const n=util.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==ZodParsedType.string&&i.parsedType!==ZodParsedType.number){const o=util.objectValues(n);return addIssueToContext(i,{expected:util.joinValues(o),received:i.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(e.data)){const o=util.objectValues(n);return addIssueToContext(i,{received:i.data,code:ZodIssueCode.invalid_enum_value,options:o}),INVALID}return OK(e.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(t,e)=>new ZodNativeEnum({values:t,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(e)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.promise&&n.common.async===!1)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:n.parsedType}),INVALID;const i=n.parsedType===ZodParsedType.promise?n.data:Promise.resolve(n.data);return OK(i.then(o=>this._def.type.parseAsync(o,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ZodPromise.create=(t,e)=>new ZodPromise({type:t,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(e)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),o=this._def.effect||null,a={addIssue:l=>{addIssueToContext(i,l),l.fatal?n.abort():n.dirty()},get path(){return i.path}};if(a.addIssue=a.addIssue.bind(a),o.type==="preprocess"){const l=o.transform(i.data,a);if(i.common.async)return Promise.resolve(l).then(async c=>{if(n.value==="aborted")return INVALID;const p=await this._def.schema._parseAsync({data:c,path:i.path,parent:i});return p.status==="aborted"?INVALID:p.status==="dirty"||n.value==="dirty"?DIRTY(p.value):p});{if(n.value==="aborted")return INVALID;const c=this._def.schema._parseSync({data:l,path:i.path,parent:i});return c.status==="aborted"?INVALID:c.status==="dirty"||n.value==="dirty"?DIRTY(c.value):c}}if(o.type==="refinement"){const l=c=>{const p=o.refinement(c,a);if(i.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(i.common.async===!1){const c=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return c.status==="aborted"?INVALID:(c.status==="dirty"&&n.dirty(),l(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(c=>c.status==="aborted"?INVALID:(c.status==="dirty"&&n.dirty(),l(c.value).then(()=>({status:n.value,value:c.value}))))}if(o.type==="transform")if(i.common.async===!1){const l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!isValid$2(l))return l;const c=o.transform(l.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(l=>isValid$2(l)?Promise.resolve(o.transform(l.value,a)).then(c=>({status:n.value,value:c})):l);util.assertNever(o)}}ZodEffects.create=(t,e,n)=>new ZodEffects({schema:t,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:e,...processCreateParams(n)});ZodEffects.createWithPreprocess=(t,e,n)=>new ZodEffects({schema:e,effect:{type:"preprocess",transform:t},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(n)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(t,e)=>new ZodOptional({innerType:t,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(e)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(t,e)=>new ZodNullable({innerType:t,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(e)});class ZodDefault extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===ZodParsedType.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ZodDefault.create=(t,e)=>new ZodDefault({innerType:t,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...processCreateParams(e)});class ZodCatch extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},o=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return isAsync(o)?o.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ZodError(i.common.issues)},input:i.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ZodError(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(t,e)=>new ZodCatch({innerType:t,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...processCreateParams(e)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const i=this._getOrReturnCtx(e);return addIssueToContext(i,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:i.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=t=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(t)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?INVALID:a.status==="dirty"?(n.dirty(),DIRTY(a.value)):this._def.out._parseAsync({data:a.value,path:i.path,parent:i})})();{const o=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?INVALID:o.status==="dirty"?(n.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:i.path,parent:i})}}static create(e,n){return new ZodPipeline({in:e,out:n,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const n=this._def.innerType._parse(e),i=o=>(isValid$2(o)&&(o.value=Object.freeze(o.value)),o);return isAsync(n)?n.then(o=>i(o)):i(n)}unwrap(){return this._def.innerType}}ZodReadonly.create=(t,e)=>new ZodReadonly({innerType:t,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(e)});function custom(t,e={},n){return t?ZodAny.create().superRefine((i,o)=>{var a,l;if(!t(i)){const c=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,p=(l=(a=c.fatal)!==null&&a!==void 0?a:n)!==null&&l!==void 0?l:!0,s=typeof c=="string"?{message:c}:c;o.addIssue({code:"custom",...s,fatal:p})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(t,e={message:`Input not instance of ${t.name}`})=>custom(n=>n instanceof t,e),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:(t=>ZodString.create({...t,coerce:!0})),number:(t=>ZodNumber.create({...t,coerce:!0})),boolean:(t=>ZodBoolean.create({...t,coerce:!0})),bigint:(t=>ZodBigInt.create({...t,coerce:!0})),date:(t=>ZodDate.create({...t,coerce:!0}))},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid:isValid$2,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError}),__create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(t,e)=>function(){return e||(0,t[__getOwnPropNames(t)[0]])((e={exports:{}}).exports,e),e.exports},__copyProps=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of __getOwnPropNames(e))!__hasOwnProp.call(t,o)&&o!==n&&__defProp(t,o,{get:()=>e[o],enumerable:!(i=__getOwnPropDesc(e,o))||i.enumerable});return t},__toESM=(t,e,n)=>(n=t!=null?__create(__getProtoOf(t)):{},__copyProps(!t||!t.__esModule?__defProp(n,"default",{value:t,enumerable:!0}):n,t)),require_lodash=__commonJS({"../../node_modules/lodash/lodash.js"(t,e){(function(){var n,i="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",p="__lodash_hash_undefined__",s=500,u="__lodash_placeholder__",d=1,g=2,w=4,x=1,C=2,O=1,Y=2,q=4,ue=8,pe=16,se=32,Re=64,Oe=128,Ce=256,He=512,$t=30,Sn="...",xn=800,Lr=16,jr=1,et=2,Ft=3,Tt=1/0,ze=9007199254740991,Ht=17976931348623157e292,Ae=NaN,Be=4294967295,tr=Be-1,No=Be>>>1,ah=[["ary",Oe],["bind",O],["bindKey",Y],["curry",ue],["curryRight",pe],["flip",He],["partial",se],["partialRight",Re],["rearg",Ce]],Mo="[object Arguments]",t0="[object Array]",o0="[object AsyncFunction]",Xr="[object Boolean]",a0="[object Date]",Ih="[object DOMException]",S0="[object Error]",Sg="[object Function]",n1="[object GeneratorFunction]",eg="[object Map]",i0="[object Number]",p0="[object Null]",P0="[object Object]",_g="[object Promise]",N0="[object Proxy]",F0="[object RegExp]",U0="[object Set]",B0="[object String]",Zg="[object Symbol]",Kg="[object Undefined]",r1="[object WeakMap]",Ug="[object WeakSet]",L1="[object ArrayBuffer]",V0="[object DataView]",g1="[object Float32Array]",E0="[object Float64Array]",qg="[object Int8Array]",W1="[object Int16Array]",V1="[object Int32Array]",u0="[object Uint8Array]",Z1="[object Uint8ClampedArray]",k0="[object Uint16Array]",Bg="[object Uint32Array]",Ge=/\b__p \+= '';/g,An=/\b(__p \+=) '' \+/g,nr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ra=/&(?:amp|lt|gt|quot|#39);/g,ko=/[&<>"']/g,b0=RegExp(Ra.source),j0=RegExp(ko.source),Gg=/<%-([\s\S]+?)%>/g,c1=/<%([\s\S]+?)%>/g,Hg=/<%=([\s\S]+?)%>/g,zg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yy=/^\w*$/,s1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hr=/[\\^$.*+?()[\]{}|]/g,H0=RegExp(Hr.source),Y0=/^\s+/,Dg=/\s/,q1=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,T1=/\{\n\/\* \[wrapped with (.+)\] \*/,Uy=/,? & /,T_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,B_=/[()=,{}\[\]\/\s]/,s_=/\\(\\)?/g,uy=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,By=/\w*$/,zy=/^[-+]0x[0-9a-f]+$/i,$_=/^0b[01]+$/i,dy=/^\[object .+?Constructor\]$/,Sy=/^0o[0-7]+$/i,E_=/^(?:0|[1-9]\d*)$/,Wy=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,f1=/($^)/,o_=/['\n\r\u2028\u2029\\]/g,Ag="\\ud800-\\udfff",G1="\\u0300-\\u036f",l_="\\ufe20-\\ufe2f",o1="\\u20d0-\\u20ff",_y=G1+l_+o1,Vy="\\u2700-\\u27bf",y1="a-z\\xdf-\\xf6\\xf8-\\xff",wy="\\xac\\xb1\\xd7\\xf7",Mg="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$1="\\u2000-\\u206f",l1=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",z_="A-Z\\xc0-\\xd6\\xd8-\\xde",W_="\\ufe0e\\ufe0f",S_=wy+Mg+$1+l1,Ay="['’]",u_="["+Ag+"]",Iy="["+S_+"]",v0="["+_y+"]",d_="\\d+",A0="["+Vy+"]",Cy="["+y1+"]",H1="[^"+Ag+S_+d_+Vy+y1+z_+"]",Xg="\\ud83c[\\udffb-\\udfff]",cy="(?:"+v0+"|"+Xg+")",Zy="[^"+Ag+"]",by="(?:\\ud83c[\\udde6-\\uddff]){2}",Z0="[\\ud800-\\udbff][\\udc00-\\udfff]",Y1="["+z_+"]",E1="\\u200d",_1="(?:"+Cy+"|"+H1+")",qy="(?:"+Y1+"|"+H1+")",K1="(?:"+Ay+"(?:d|ll|m|re|s|t|ve))?",de="(?:"+Ay+"(?:D|LL|M|RE|S|T|VE))?",E=cy+"?",k="["+W_+"]?",ie="(?:"+E1+"(?:"+[Zy,by,Z0].join("|")+")"+k+E+")*",ge="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Le="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Kt=k+E+ie,Na="(?:"+[A0,by,Z0].join("|")+")"+Kt,Uo="(?:"+[Zy+v0+"?",v0,by,Z0,u_].join("|")+")",s0=RegExp(Ay,"g"),n0=RegExp(v0,"g"),_0=RegExp(Xg+"(?="+Xg+")|"+Uo+Kt,"g"),ag=RegExp([Y1+"?"+Cy+"+"+K1+"(?="+[Iy,Y1,"$"].join("|")+")",qy+"+"+de+"(?="+[Iy,Y1+_1,"$"].join("|")+")",Y1+"?"+_1+"+"+K1,Y1+"+"+de,Le,ge,d_,Na].join("|"),"g"),Zr=RegExp("["+E1+Ag+_y+W_+"]"),ir=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,h0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],z0=-1,G0={};G0[g1]=G0[E0]=G0[qg]=G0[W1]=G0[V1]=G0[u0]=G0[Z1]=G0[k0]=G0[Bg]=!0,G0[Mo]=G0[t0]=G0[L1]=G0[Xr]=G0[V0]=G0[a0]=G0[S0]=G0[Sg]=G0[eg]=G0[i0]=G0[P0]=G0[F0]=G0[U0]=G0[B0]=G0[r1]=!1;var J0={};J0[Mo]=J0[t0]=J0[L1]=J0[V0]=J0[Xr]=J0[a0]=J0[g1]=J0[E0]=J0[qg]=J0[W1]=J0[V1]=J0[eg]=J0[i0]=J0[P0]=J0[F0]=J0[U0]=J0[B0]=J0[Zg]=J0[u0]=J0[Z1]=J0[k0]=J0[Bg]=!0,J0[S0]=J0[Sg]=J0[r1]=!1;var V_={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},D2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Nv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Pv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},M2=parseFloat,F2=parseInt,a2=typeof global=="object"&&global&&global.Object===Object&&global,Gw=typeof self=="object"&&self&&self.Object===Object&&self,Lg=a2||Gw||Function("return this")(),s2=typeof t=="object"&&t&&!t.nodeType&&t,Oy=s2&&typeof e=="object"&&e&&!e.nodeType&&e,uw=Oy&&Oy.exports===s2,Z_=uw&&a2.process,D1=(function(){try{var In=Oy&&Oy.require&&Oy.require("util").types;return In||Z_&&Z_.binding&&Z_.binding("util")}catch{}})(),Hw=D1&&D1.isArrayBuffer,U1=D1&&D1.isDate,A_=D1&&D1.isMap,j2=D1&&D1.isRegExp,o2=D1&&D1.isSet,Dv=D1&&D1.isTypedArray;function M1(In,Ro,qr){switch(qr.length){case 0:return In.call(Ro);case 1:return In.call(Ro,qr[0]);case 2:return In.call(Ro,qr[0],qr[1]);case 3:return In.call(Ro,qr[0],qr[1],qr[2])}return In.apply(Ro,qr)}function dw(In,Ro,qr,c0){for(var W0=-1,Rg=In==null?0:In.length;++W0<Rg;){var w1=In[W0];Ro(c0,w1,qr(w1),In)}return c0}function p1(In,Ro){for(var qr=-1,c0=In==null?0:In.length;++qr<c0&&Ro(In[qr],qr,In)!==!1;);return In}function cw(In,Ro){for(var qr=In==null?0:In.length;qr--&&Ro(In[qr],qr,In)!==!1;);return In}function Yw(In,Ro){for(var qr=-1,c0=In==null?0:In.length;++qr<c0;)if(!Ro(In[qr],qr,In))return!1;return!0}function m0(In,Ro){for(var qr=-1,c0=In==null?0:In.length,W0=0,Rg=[];++qr<c0;){var w1=In[qr];Ro(w1,qr,In)&&(Rg[W0++]=w1)}return Rg}function L2(In,Ro){var qr=In==null?0:In.length;return!!qr&&I_(In,Ro,0)>-1}function l2(In,Ro,qr){for(var c0=-1,W0=In==null?0:In.length;++c0<W0;)if(qr(Ro,In[c0]))return!0;return!1}function Fg(In,Ro){for(var qr=-1,c0=In==null?0:In.length,W0=Array(c0);++qr<c0;)W0[qr]=Ro(In[qr],qr,In);return W0}function S1(In,Ro){for(var qr=-1,c0=Ro.length,W0=In.length;++qr<c0;)In[W0+qr]=Ro[qr];return In}function fw(In,Ro,qr,c0){var W0=-1,Rg=In==null?0:In.length;for(c0&&Rg&&(qr=In[++W0]);++W0<Rg;)qr=Ro(qr,In[W0],W0,In);return qr}function Mv(In,Ro,qr,c0){var W0=In==null?0:In.length;for(c0&&W0&&(qr=In[--W0]);W0--;)qr=Ro(qr,In[W0],W0,In);return qr}function U2(In,Ro){for(var qr=-1,c0=In==null?0:In.length;++qr<c0;)if(Ro(In[qr],qr,In))return!0;return!1}var Kw=hw("length");function Xw(In){return In.split("")}function Fv(In){return In.match(T_)||[]}function B2(In,Ro,qr){var c0;return qr(In,function(W0,Rg,w1){if(Ro(W0,Rg,w1))return c0=Rg,!1}),c0}function u2(In,Ro,qr,c0){for(var W0=In.length,Rg=qr+(c0?1:-1);c0?Rg--:++Rg<W0;)if(Ro(In[Rg],Rg,In))return Rg;return-1}function I_(In,Ro,qr){return Ro===Ro?Lv(In,Ro,qr):u2(In,Qw,qr)}function pw(In,Ro,qr,c0){for(var W0=qr-1,Rg=In.length;++W0<Rg;)if(c0(In[W0],Ro))return W0;return-1}function Qw(In){return In!==In}function Jw(In,Ro){var qr=In==null?0:In.length;return qr?gw(In,Ro)/qr:Ae}function hw(In){return function(Ro){return Ro==null?n:Ro[In]}}function z2(In){return function(Ro){return In==null?n:In[Ro]}}function jv(In,Ro,qr,c0,W0){return W0(In,function(Rg,w1,Wg){qr=c0?(c0=!1,Rg):Ro(qr,Rg,w1,Wg)}),qr}function mw(In,Ro){var qr=In.length;for(In.sort(Ro);qr--;)In[qr]=In[qr].value;return In}function gw(In,Ro){for(var qr,c0=-1,W0=In.length;++c0<W0;){var Rg=Ro(In[c0]);Rg!==n&&(qr=qr===n?Rg:qr+Rg)}return qr}function A(In,Ro){for(var qr=-1,c0=Array(In);++qr<In;)c0[qr]=Ro(qr);return c0}function ee(In,Ro){return Fg(Ro,function(qr){return[qr,In[qr]]})}function he(In){return In&&In.slice(0,Uv(In)+1).replace(Y0,"")}function Ie(In){return function(Ro){return In(Ro)}}function Ye(In,Ro){return Fg(Ro,function(qr){return In[qr]})}function wn(In,Ro){return In.has(Ro)}function Pa(In,Ro){for(var qr=-1,c0=In.length;++qr<c0&&I_(Ro,In[qr],0)>-1;);return qr}function Qo(In,Ro){for(var qr=In.length;qr--&&I_(Ro,In[qr],0)>-1;);return qr}function g0(In,Ro){for(var qr=In.length,c0=0;qr--;)In[qr]===Ro&&++c0;return c0}var l0=z2(V_),I0=z2(D2);function Cg(In){return"\\"+Pv[In]}function $g(In,Ro){return In==null?n:In[Ro]}function Kr(In){return Zr.test(In)}function q0(In){return ir.test(In)}function Ig(In){for(var Ro,qr=[];!(Ro=In.next()).done;)qr.push(Ro.value);return qr}function Gy(In){var Ro=-1,qr=Array(In.size);return In.forEach(function(c0,W0){qr[++Ro]=[W0,c0]}),qr}function yw(In,Ro){return function(qr){return In(Ro(qr))}}function Hy(In,Ro){for(var qr=-1,c0=In.length,W0=0,Rg=[];++qr<c0;){var w1=In[qr];(w1===Ro||w1===u)&&(In[qr]=u,Rg[W0++]=qr)}return Rg}function d2(In){var Ro=-1,qr=Array(In.size);return In.forEach(function(c0){qr[++Ro]=c0}),qr}function u$(In){var Ro=-1,qr=Array(In.size);return In.forEach(function(c0){qr[++Ro]=[c0,c0]}),qr}function Lv(In,Ro,qr){for(var c0=qr-1,W0=In.length;++c0<W0;)if(In[c0]===Ro)return c0;return-1}function d$(In,Ro,qr){for(var c0=qr+1;c0--;)if(In[c0]===Ro)return c0;return c0}function W2(In){return Kr(In)?iT(In):Kw(In)}function ky(In){return Kr(In)?aT(In):Xw(In)}function Uv(In){for(var Ro=In.length;Ro--&&Dg.test(In.charAt(Ro)););return Ro}var rT=z2(Nv);function iT(In){for(var Ro=_0.lastIndex=0;_0.test(In);)++Ro;return Ro}function aT(In){return In.match(_0)||[]}function c$(In){return In.match(ag)||[]}var f$=function In(Ro){Ro=Ro==null?Lg:c2.defaults(Lg.Object(),Ro,c2.pick(Lg,h0));var qr=Ro.Array,c0=Ro.Date,W0=Ro.Error,Rg=Ro.Function,w1=Ro.Math,Wg=Ro.Object,Wb=Ro.RegExp,p$=Ro.String,Yy=Ro.TypeError,q_=qr.prototype,Kx=Rg.prototype,C_=Wg.prototype,_w=Ro["__core-js_shared__"],Hb=Kx.toString,Ng=C_.hasOwnProperty,ww=0,Bv=(function(){var m=/[^.]+$/.exec(_w&&_w.keys&&_w.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""})(),ev=C_.toString,zv=Hb.call(Wg),sT=Lg._,oT=Wb("^"+Hb.call(Ng).replace(Hr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tv=uw?Ro.Buffer:n,G_=Ro.Symbol,nv=Ro.Uint8Array,Xx=tv?tv.allocUnsafe:n,c_=yw(Wg.getPrototypeOf,Wg),Wv=Wg.create,Vv=C_.propertyIsEnumerable,Zv=q_.splice,lT=G_?G_.isConcatSpreadable:n,H_=G_?G_.iterator:n,V2=G_?G_.toStringTag:n,rv=(function(){try{var m=e2(Wg,"defineProperty");return m({},"",{}),m}catch{}})(),uT=Ro.clearTimeout!==Lg.clearTimeout&&Ro.clearTimeout,Qg=c0&&c0.now!==Lg.Date.now&&c0.now,Qx=Ro.setTimeout!==Lg.setTimeout&&Ro.setTimeout,Z2=w1.ceil,f2=w1.floor,qv=Wg.getOwnPropertySymbols,Jx=tv?tv.isBuffer:n,bw=Ro.isFinite,Gv=q_.join,vw=yw(Wg.keys,Wg),b1=w1.max,X1=w1.min,m$=c0.now,dT=Ro.parseInt,iv=w1.random,Hv=q_.reverse,av=e2(Ro,"DataView"),q2=e2(Ro,"Map"),sv=e2(Ro,"Promise"),p2=e2(Ro,"Set"),ov=e2(Ro,"WeakMap"),xw=e2(Wg,"create"),Yv=ov&&new ov,Tw={},e3=A2(av),h2=A2(q2),cT=A2(sv),$w=A2(p2),O_=A2(ov),m2=G_?G_.prototype:n,Ry=m2?m2.valueOf:n,Kv=m2?m2.toString:n;function je(m){if(x1(m)&&!Q0(m)&&!(m instanceof K0)){if(m instanceof Q1)return m;if(Ng.call(m,"__wrapped__"))return N3(m)}return new Q1(m)}var Ew=(function(){function m(){}return function(b){if(!m1(b))return{};if(Wv)return Wv(b);m.prototype=b;var S=new m;return m.prototype=n,S}})();function k_(){}function Q1(m,b){this.__wrapped__=m,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}je.templateSettings={escape:Gg,evaluate:c1,interpolate:Hg,variable:"",imports:{_:je}},je.prototype=k_.prototype,je.prototype.constructor=je,Q1.prototype=Ew(k_.prototype),Q1.prototype.constructor=Q1;function K0(m){this.__wrapped__=m,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Be,this.__views__=[]}function Xv(){var m=new K0(this.__wrapped__);return m.__actions__=hy(this.__actions__),m.__dir__=this.__dir__,m.__filtered__=this.__filtered__,m.__iteratees__=hy(this.__iteratees__),m.__takeCount__=this.__takeCount__,m.__views__=hy(this.__views__),m}function t3(){if(this.__filtered__){var m=new K0(this);m.__dir__=-1,m.__filtered__=!0}else m=this.clone(),m.__dir__*=-1;return m}function Sw(){var m=this.__wrapped__.value(),b=this.__dir__,S=Q0(m),re=b<0,Te=S?m.length:0,Ve=DT(0,Te,this.__views__),jt=Ve.start,vn=Ve.end,rr=vn-jt,Bo=re?vn:jt-1,zo=this.__iteratees__,fh=zo.length,d0=0,$0=X1(rr,this.__takeCount__);if(!S||!re&&Te==rr&&$0==rr)return p3(m,this.__actions__);var D0=[];e:for(;rr--&&d0<$0;){Bo+=b;for(var yg=-1,M0=m[Bo];++yg<fh;){var Eg=zo[yg],kg=Eg.iteratee,v_=Eg.type,Ly=kg(M0);if(v_==et)M0=Ly;else if(!Ly){if(v_==jr)continue e;break e}}D0[d0++]=M0}return D0}K0.prototype=Ew(k_.prototype),K0.prototype.constructor=K0;function vy(m){var b=-1,S=m==null?0:m.length;for(this.clear();++b<S;){var re=m[b];this.set(re[0],re[1])}}function Jg(){this.__data__=xw?xw(null):{},this.size=0}function Yg(m){var b=this.has(m)&&delete this.__data__[m];return this.size-=b?1:0,b}function g2(m){var b=this.__data__;if(xw){var S=b[m];return S===p?n:S}return Ng.call(b,m)?b[m]:n}function J1(m){var b=this.__data__;return xw?b[m]!==n:Ng.call(b,m)}function xy(m,b){var S=this.__data__;return this.size+=this.has(m)?0:1,S[m]=xw&&b===n?p:b,this}vy.prototype.clear=Jg,vy.prototype.delete=Yg,vy.prototype.get=g2,vy.prototype.has=J1,vy.prototype.set=xy;function fy(m){var b=-1,S=m==null?0:m.length;for(this.clear();++b<S;){var re=m[b];this.set(re[0],re[1])}}function Aw(){this.__data__=[],this.size=0}function Ty(m){var b=this.__data__,S=ty(b,m);if(S<0)return!1;var re=b.length-1;return S==re?b.pop():Zv.call(b,S,1),--this.size,!0}function Qv(m){var b=this.__data__,S=ty(b,m);return S<0?n:b[S][1]}function fT(m){return ty(this.__data__,m)>-1}function pT(m,b){var S=this.__data__,re=ty(S,m);return re<0?(++this.size,S.push([m,b])):S[re][1]=b,this}fy.prototype.clear=Aw,fy.prototype.delete=Ty,fy.prototype.get=Qv,fy.prototype.has=fT,fy.prototype.set=pT;function Ky(m){var b=-1,S=m==null?0:m.length;for(this.clear();++b<S;){var re=m[b];this.set(re[0],re[1])}}function hT(){this.size=0,this.__data__={hash:new vy,map:new(q2||fy),string:new vy}}function Y_(m){var b=Ex(this,m).delete(m);return this.size-=b?1:0,b}function Jv(m){return Ex(this,m).get(m)}function n3(m){return Ex(this,m).has(m)}function mT(m,b){var S=Ex(this,m),re=S.size;return S.set(m,b),this.size+=S.size==re?0:1,this}Ky.prototype.clear=hT,Ky.prototype.delete=Y_,Ky.prototype.get=Jv,Ky.prototype.has=n3,Ky.prototype.set=mT;function G2(m){var b=-1,S=m==null?0:m.length;for(this.__data__=new Ky;++b<S;)this.add(m[b])}function y2(m){return this.__data__.set(m,p),this}function Iw(m){return this.__data__.has(m)}G2.prototype.add=G2.prototype.push=y2,G2.prototype.has=Iw;function ey(m){var b=this.__data__=new fy(m);this.size=b.size}function ex(){this.__data__=new fy,this.size=0}function tx(m){var b=this.__data__,S=b.delete(m);return this.size=b.size,S}function Xy(m){return this.__data__.get(m)}function Qy(m){return this.__data__.has(m)}function H2(m,b){var S=this.__data__;if(S instanceof fy){var re=S.__data__;if(!q2||re.length<o-1)return re.push([m,b]),this.size=++S.size,this;S=this.__data__=new Ky(re)}return S.set(m,b),this.size=S.size,this}ey.prototype.clear=ex,ey.prototype.delete=tx,ey.prototype.get=Xy,ey.prototype.has=Qy,ey.prototype.set=H2;function R_(m,b){var S=Q0(m),re=!S&&Rv(m),Te=!S&&!re&&Zw(m),Ve=!S&&!re&&!Te&&Hx(m),jt=S||re||Te||Ve,vn=jt?A(m.length,p$):[],rr=vn.length;for(var Bo in m)(b||Ng.call(m,Bo))&&!(jt&&(Bo=="length"||Te&&(Bo=="offset"||Bo=="parent")||Ve&&(Bo=="buffer"||Bo=="byteLength"||Bo=="byteOffset")||e_(Bo,rr)))&&vn.push(Bo);return vn}function N_(m){var b=m.length;return b?m[mv(0,b-1)]:n}function Y2(m,b){return My(hy(m),K_(b,0,m.length))}function gT(m){return My(hy(m))}function lv(m,b,S){(S!==n&&!r2(m[b],S)||S===n&&!(b in m))&&P_(m,b,S)}function K2(m,b,S){var re=m[b];(!(Ng.call(m,b)&&r2(re,S))||S===n&&!(b in m))&&P_(m,b,S)}function ty(m,b){for(var S=m.length;S--;)if(r2(m[S][0],b))return S;return-1}function Ny(m,b,S,re){return M_(m,function(Te,Ve,jt){b(re,Te,S(Te),jt)}),re}function e1(m,b){return m&&y_(b,ly(b),m)}function f_(m,b){return m&&y_(b,i_(b),m)}function P_(m,b,S){b=="__proto__"&&rv?rv(m,b,{configurable:!0,enumerable:!0,value:S,writable:!0}):m[b]=S}function nx(m,b){for(var S=-1,re=b.length,Te=qr(re),Ve=m==null;++S<re;)Te[S]=Ve?n:j$(m,b[S]);return Te}function K_(m,b,S){return m===m&&(S!==n&&(m=m<=S?m:S),b!==n&&(m=m>=b?m:b)),m}function $y(m,b,S,re,Te,Ve){var jt,vn=b&d,rr=b&g,Bo=b&w;if(S&&(jt=Te?S(m,re,Te,Ve):S(m)),jt!==n)return jt;if(!m1(m))return m;var zo=Q0(m);if(zo){if(jt=MT(m),!vn)return hy(m,jt)}else{var fh=ay(m),d0=fh==Sg||fh==n1;if(Zw(m))return m3(m,vn);if(fh==P0||fh==Mo||d0&&!Te){if(jt=rr||d0?{}:Lw(m),!vn)return rr?y$(m,f_(jt,m)):ST(m,e1(jt,m))}else{if(!J0[fh])return Te?m:{};jt=sy(m,fh,vn)}}Ve||(Ve=new ey);var $0=Ve.get(m);if($0)return $0;Ve.set(m,jt),J$(m)?m.forEach(function(M0){jt.add($y(M0,b,S,M0,m,Ve))}):X$(m)&&m.forEach(function(M0,Eg){jt.set(Eg,$y(M0,b,S,Eg,m,Ve))});var D0=Bo?rr?xv:$x:rr?i_:ly,yg=zo?n:D0(m);return p1(yg||m,function(M0,Eg){yg&&(Eg=M0,M0=m[Eg]),K2(jt,Eg,$y(M0,b,S,Eg,m,Ve))}),jt}function yT(m){var b=ly(m);return function(S){return uv(S,m,b)}}function uv(m,b,S){var re=S.length;if(m==null)return!re;for(m=Wg(m);re--;){var Te=S[re],Ve=b[Te],jt=m[Te];if(jt===n&&!(Te in m)||!Ve(jt))return!1}return!0}function r3(m,b,S){if(typeof m!="function")throw new Yy(l);return Bw(function(){m.apply(n,S)},b)}function D_(m,b,S,re){var Te=-1,Ve=L2,jt=!0,vn=m.length,rr=[],Bo=b.length;if(!vn)return rr;S&&(b=Fg(b,Ie(S))),re?(Ve=l2,jt=!1):b.length>=o&&(Ve=wn,jt=!1,b=new G2(b));e:for(;++Te<vn;){var zo=m[Te],fh=S==null?zo:S(zo);if(zo=re||zo!==0?zo:0,jt&&fh===fh){for(var d0=Bo;d0--;)if(b[d0]===fh)continue e;rr.push(zo)}else Ve(b,fh,re)||rr.push(zo)}return rr}var M_=AT(Jy),_T=AT(_2,!0);function p_(m,b){var S=!0;return M_(m,function(re,Te,Ve){return S=!!b(re,Te,Ve),S}),S}function X2(m,b,S){for(var re=-1,Te=m.length;++re<Te;){var Ve=m[re],jt=b(Ve);if(jt!=null&&(vn===n?jt===jt&&!b_(jt):S(jt,vn)))var vn=jt,rr=Ve}return rr}function rx(m,b,S,re){var Te=m.length;for(S=gg(S),S<0&&(S=-S>Te?0:Te+S),re=re===n||re>Te?Te:gg(re),re<0&&(re+=Te),re=S>re?0:t4(re);S<re;)m[S++]=b;return m}function Q2(m,b){var S=[];return M_(m,function(re,Te,Ve){b(re,Te,Ve)&&S.push(re)}),S}function A1(m,b,S,re,Te){var Ve=-1,jt=m.length;for(S||(S=b$),Te||(Te=[]);++Ve<jt;){var vn=m[Ve];b>0&&S(vn)?b>1?A1(vn,b-1,S,re,Te):S1(Te,vn):re||(Te[Te.length]=vn)}return Te}var dv=b3(),ix=b3(!0);function Jy(m,b){return m&&dv(m,b,ly)}function _2(m,b){return m&&ix(m,b,ly)}function py(m,b){return m0(b,function(S){return sw(m[S])})}function Py(m,b){b=X_(b,m);for(var S=0,re=b.length;m!=null&&S<re;)m=m[__(b[S++])];return S&&S==re?m:n}function ax(m,b,S){var re=b(m);return Q0(m)?re:S1(re,S(m))}function ny(m){return m==null?m===n?Kg:p0:V2&&V2 in Wg(m)?PT(m):BT(m)}function h_(m,b){return m>b}function w2(m,b){return m!=null&&Ng.call(m,b)}function i3(m,b){return m!=null&&b in Wg(m)}function wT(m,b,S){return m>=X1(b,S)&&m<b1(b,S)}function m_(m,b,S){for(var re=S?l2:L2,Te=m[0].length,Ve=m.length,jt=Ve,vn=qr(Ve),rr=1/0,Bo=[];jt--;){var zo=m[jt];jt&&b&&(zo=Fg(zo,Ie(b))),rr=X1(zo.length,rr),vn[jt]=!S&&(b||Te>=120&&zo.length>=120)?new G2(jt&&zo):n}zo=m[0];var fh=-1,d0=vn[0];e:for(;++fh<Te&&Bo.length<rr;){var $0=zo[fh],D0=b?b($0):$0;if($0=S||$0!==0?$0:0,!(d0?wn(d0,D0):re(Bo,D0,S))){for(jt=Ve;--jt;){var yg=vn[jt];if(!(yg?wn(yg,D0):re(m[jt],D0,S)))continue e}d0&&d0.push(D0),Bo.push($0)}}return Bo}function b2(m,b,S,re){return Jy(m,function(Te,Ve,jt){b(re,S(Te),Ve,jt)}),re}function v2(m,b,S){b=X_(b,m),m=Ix(m,b);var re=m==null?m:m[__(R1(b))];return re==null?n:M1(re,m,S)}function a3(m){return x1(m)&&ny(m)==Mo}function sx(m){return x1(m)&&ny(m)==L1}function bT(m){return x1(m)&&ny(m)==a0}function Cw(m,b,S,re,Te){return m===b?!0:m==null||b==null||!x1(m)&&!x1(b)?m!==m&&b!==b:s3(m,b,S,re,Cw,Te)}function s3(m,b,S,re,Te,Ve){var jt=Q0(m),vn=Q0(b),rr=jt?t0:ay(m),Bo=vn?t0:ay(b);rr=rr==Mo?P0:rr,Bo=Bo==Mo?P0:Bo;var zo=rr==P0,fh=Bo==P0,d0=rr==Bo;if(d0&&Zw(m)){if(!Zw(b))return!1;jt=!0,zo=!1}if(d0&&!zo)return Ve||(Ve=new ey),jt||Hx(m)?Tx(m,b,S,re,Te,Ve):NT(m,b,rr,S,re,Te,Ve);if(!(S&x)){var $0=zo&&Ng.call(m,"__wrapped__"),D0=fh&&Ng.call(b,"__wrapped__");if($0||D0){var yg=$0?m.value():m,M0=D0?b.value():b;return Ve||(Ve=new ey),Te(yg,M0,S,re,Ve)}}return d0?(Ve||(Ve=new ey),S3(m,b,S,re,Te,Ve)):!1}function ox(m){return x1(m)&&ay(m)==eg}function lx(m,b,S,re){var Te=S.length,Ve=Te,jt=!re;if(m==null)return!Ve;for(m=Wg(m);Te--;){var vn=S[Te];if(jt&&vn[2]?vn[1]!==m[vn[0]]:!(vn[0]in m))return!1}for(;++Te<Ve;){vn=S[Te];var rr=vn[0],Bo=m[rr],zo=vn[1];if(jt&&vn[2]){if(Bo===n&&!(rr in m))return!1}else{var fh=new ey;if(re)var d0=re(Bo,zo,rr,m,b,fh);if(!(d0===n?Cw(zo,Bo,x|C,re,fh):d0))return!1}}return!0}function o3(m){if(!m1(m)||O3(m))return!1;var b=sw(m)?oT:dy;return b.test(A2(m))}function vT(m){return x1(m)&&ny(m)==F0}function l3(m){return x1(m)&&ay(m)==U0}function cv(m){return x1(m)&&i$(m.length)&&!!G0[ny(m)]}function fv(m){return typeof m=="function"?m:m==null?a_:typeof m=="object"?Q0(m)?g_(m[0],m[1]):Ow(m):f4(m)}function ux(m){if(!Ev(m))return vw(m);var b=[];for(var S in Wg(m))Ng.call(m,S)&&S!="constructor"&&b.push(S);return b}function xT(m){if(!m1(m))return UT(m);var b=Ev(m),S=[];for(var re in m)re=="constructor"&&(b||!Ng.call(m,re))||S.push(re);return S}function x2(m,b){return m<b}function u3(m,b){var S=-1,re=r_(m)?qr(m.length):[];return M_(m,function(Te,Ve,jt){re[++S]=b(Te,Ve,jt)}),re}function Ow(m){var b=Sx(m);return b.length==1&&b[0][2]?Sv(b[0][0],b[0][1]):function(S){return S===m||lx(S,m,b)}}function g_(m,b){return C3(m)&&Uw(b)?Sv(__(m),b):function(S){var re=j$(S,m);return re===n&&re===b?L$(S,m):Cw(b,re,x|C)}}function T2(m,b,S,re,Te){m!==b&&dv(b,function(Ve,jt){if(Te||(Te=new ey),m1(Ve))pv(m,b,jt,S,T2,re,Te);else{var vn=re?re(Dy(m,jt),Ve,jt+"",m,b,Te):n;vn===n&&(vn=Ve),lv(m,jt,vn)}},i_)}function pv(m,b,S,re,Te,Ve,jt){var vn=Dy(m,S),rr=Dy(b,S),Bo=jt.get(rr);if(Bo){lv(m,S,Bo);return}var zo=Ve?Ve(vn,rr,S+"",m,b,jt):n,fh=zo===n;if(fh){var d0=Q0(rr),$0=!d0&&Zw(rr),D0=!d0&&!$0&&Hx(rr);zo=rr,d0||$0||D0?Q0(vn)?zo=vn:N1(vn)?zo=hy(vn):$0?(fh=!1,zo=m3(rr,!0)):D0?(fh=!1,zo=y3(rr,!0)):zo=[]:X3(rr)||Rv(rr)?(zo=vn,Rv(vn)?zo=n4(vn):(!m1(vn)||sw(vn))&&(zo=Lw(rr))):fh=!1}fh&&(jt.set(rr,zo),Te(zo,rr,re,Ve,jt),jt.delete(rr)),lv(m,S,zo)}function $2(m,b){var S=m.length;if(S)return b+=b<0?S:0,e_(b,S)?m[b]:n}function dx(m,b,S){b.length?b=Fg(b,function(Ve){return Q0(Ve)?function(jt){return Py(jt,Ve.length===1?Ve[0]:Ve)}:Ve}):b=[a_];var re=-1;b=Fg(b,Ie(C0()));var Te=u3(m,function(Ve,jt,vn){var rr=Fg(b,function(Bo){return Bo(Ve)});return{criteria:rr,index:++re,value:Ve}});return mw(Te,function(Ve,jt){return ET(Ve,jt,S)})}function kw(m,b){return d3(m,b,function(S,re){return L$(m,re)})}function d3(m,b,S){for(var re=-1,Te=b.length,Ve={};++re<Te;){var jt=b[re],vn=Py(m,jt);S(vn,jt)&&a1(Ve,X_(jt,m),vn)}return Ve}function c3(m){return function(b){return Py(b,m)}}function t1(m,b,S,re){var Te=re?pw:I_,Ve=-1,jt=b.length,vn=m;for(m===b&&(b=hy(b)),S&&(vn=Fg(m,Ie(S)));++Ve<jt;)for(var rr=0,Bo=b[Ve],zo=S?S(Bo):Bo;(rr=Te(vn,zo,rr,re))>-1;)vn!==m&&Zv.call(vn,rr,1),Zv.call(m,rr,1);return m}function hv(m,b){for(var S=m?b.length:0,re=S-1;S--;){var Te=b[S];if(S==re||Te!==Ve){var Ve=Te;e_(Te)?Zv.call(m,Te,1):ew(m,Te)}}return m}function mv(m,b){return m+f2(iv()*(b-m+1))}function f3(m,b,S,re){for(var Te=-1,Ve=b1(Z2((b-m)/(S||1)),0),jt=qr(Ve);Ve--;)jt[re?Ve:++Te]=m,m+=S;return jt}function Rw(m,b){var S="";if(!m||b<1||b>ze)return S;do b%2&&(S+=m),b=f2(b/2),b&&(m+=m);while(b);return S}function X0(m,b){return Cx(Ax(m,b,a_),m+"")}function J2(m){return N_(Yx(m))}function i1(m,b){var S=Yx(m);return My(S,K_(b,0,S.length))}function a1(m,b,S,re){if(!m1(m))return m;b=X_(b,m);for(var Te=-1,Ve=b.length,jt=Ve-1,vn=m;vn!=null&&++Te<Ve;){var rr=__(b[Te]),Bo=S;if(rr==="__proto__"||rr==="constructor"||rr==="prototype")return m;if(Te!=jt){var zo=vn[rr];Bo=re?re(zo,rr,vn):n,Bo===n&&(Bo=m1(zo)?zo:e_(b[Te+1])?[]:{})}K2(vn,rr,Bo),vn=vn[rr]}return m}var I1=Yv?function(m,b){return Yv.set(m,b),m}:a_,cx=rv?function(m,b){return rv(m,"toString",{configurable:!0,enumerable:!1,value:B$(b),writable:!0})}:a_;function gv(m){return My(Yx(m))}function ry(m,b,S){var re=-1,Te=m.length;b<0&&(b=-b>Te?0:Te+b),S=S>Te?Te:S,S<0&&(S+=Te),Te=b>S?0:S-b>>>0,b>>>=0;for(var Ve=qr(Te);++re<Te;)Ve[re]=m[re+b];return Ve}function g$(m,b){var S;return M_(m,function(re,Te,Ve){return S=b(re,Te,Ve),!S}),!!S}function C1(m,b,S){var re=0,Te=m==null?re:m.length;if(typeof b=="number"&&b===b&&Te<=No){for(;re<Te;){var Ve=re+Te>>>1,jt=m[Ve];jt!==null&&!b_(jt)&&(S?jt<=b:jt<b)?re=Ve+1:Te=Ve}return Te}return yv(m,b,a_,S)}function yv(m,b,S,re){var Te=0,Ve=m==null?0:m.length;if(Ve===0)return 0;b=S(b);for(var jt=b!==b,vn=b===null,rr=b_(b),Bo=b===n;Te<Ve;){var zo=f2((Te+Ve)/2),fh=S(m[zo]),d0=fh!==n,$0=fh===null,D0=fh===fh,yg=b_(fh);if(jt)var M0=re||D0;else Bo?M0=D0&&(re||d0):vn?M0=D0&&d0&&(re||!$0):rr?M0=D0&&d0&&!$0&&(re||!yg):$0||yg?M0=!1:M0=re?fh<=b:fh<b;M0?Te=zo+1:Ve=zo}return X1(Ve,tr)}function fx(m,b){for(var S=-1,re=m.length,Te=0,Ve=[];++S<re;){var jt=m[S],vn=b?b(jt):jt;if(!S||!r2(vn,rr)){var rr=vn;Ve[Te++]=jt===0?0:jt}}return Ve}function px(m){return typeof m=="number"?m:b_(m)?Ae:+m}function u1(m){if(typeof m=="string")return m;if(Q0(m))return Fg(m,u1)+"";if(b_(m))return Kv?Kv.call(m):"";var b=m+"";return b=="0"&&1/m==-Tt?"-0":b}function O1(m,b,S){var re=-1,Te=L2,Ve=m.length,jt=!0,vn=[],rr=vn;if(S)jt=!1,Te=l2;else if(Ve>=o){var Bo=b?null:my(m);if(Bo)return d2(Bo);jt=!1,Te=wn,rr=new G2}else rr=b?[]:vn;e:for(;++re<Ve;){var zo=m[re],fh=b?b(zo):zo;if(zo=S||zo!==0?zo:0,jt&&fh===fh){for(var d0=rr.length;d0--;)if(rr[d0]===fh)continue e;b&&rr.push(fh),vn.push(zo)}else Te(rr,fh,S)||(rr!==vn&&rr.push(fh),vn.push(zo))}return vn}function ew(m,b){return b=X_(b,m),m=Ix(m,b),m==null||delete m[__(R1(b))]}function hx(m,b,S,re){return a1(m,b,S(Py(m,b)),re)}function Nw(m,b,S,re){for(var Te=m.length,Ve=re?Te:-1;(re?Ve--:++Ve<Te)&&b(m[Ve],Ve,m););return S?ry(m,re?0:Ve,re?Ve+1:Te):ry(m,re?Ve+1:0,re?Te:Ve)}function p3(m,b){var S=m;return S instanceof K0&&(S=S.value()),fw(b,function(re,Te){return Te.func.apply(Te.thisArg,S1([re],Te.args))},S)}function mx(m,b,S){var re=m.length;if(re<2)return re?O1(m[0]):[];for(var Te=-1,Ve=qr(re);++Te<re;)for(var jt=m[Te],vn=-1;++vn<re;)vn!=Te&&(Ve[Te]=D_(Ve[Te]||jt,m[vn],b,S));return O1(A1(Ve,1),b,S)}function h3(m,b,S){for(var re=-1,Te=m.length,Ve=b.length,jt={};++re<Te;){var vn=re<Ve?b[re]:n;S(jt,m[re],vn)}return jt}function gx(m){return N1(m)?m:[]}function yx(m){return typeof m=="function"?m:a_}function X_(m,b){return Q0(m)?m:C3(m,b)?[m]:zT(Vg(m))}var TT=X0;function Q_(m,b,S){var re=m.length;return S=S===n?re:S,!b&&S>=re?m:ry(m,b,S)}var Pw=uT||function(m){return Lg.clearTimeout(m)};function m3(m,b){if(b)return m.slice();var S=m.length,re=Xx?Xx(S):new m.constructor(S);return m.copy(re),re}function Dw(m){var b=new m.constructor(m.byteLength);return new nv(b).set(new nv(m)),b}function _x(m,b){var S=b?Dw(m.buffer):m.buffer;return new m.constructor(S,m.byteOffset,m.byteLength)}function $T(m){var b=new m.constructor(m.source,By.exec(m));return b.lastIndex=m.lastIndex,b}function g3(m){return Ry?Wg(Ry.call(m)):{}}function y3(m,b){var S=b?Dw(m.buffer):m.buffer;return new m.constructor(S,m.byteOffset,m.length)}function _3(m,b){if(m!==b){var S=m!==n,re=m===null,Te=m===m,Ve=b_(m),jt=b!==n,vn=b===null,rr=b===b,Bo=b_(b);if(!vn&&!Bo&&!Ve&&m>b||Ve&&jt&&rr&&!vn&&!Bo||re&&jt&&rr||!S&&rr||!Te)return 1;if(!re&&!Ve&&!Bo&&m<b||Bo&&S&&Te&&!re&&!Ve||vn&&S&&Te||!jt&&Te||!rr)return-1}return 0}function ET(m,b,S){for(var re=-1,Te=m.criteria,Ve=b.criteria,jt=Te.length,vn=S.length;++re<jt;){var rr=_3(Te[re],Ve[re]);if(rr){if(re>=vn)return rr;var Bo=S[re];return rr*(Bo=="desc"?-1:1)}}return m.index-b.index}function w3(m,b,S,re){for(var Te=-1,Ve=m.length,jt=S.length,vn=-1,rr=b.length,Bo=b1(Ve-jt,0),zo=qr(rr+Bo),fh=!re;++vn<rr;)zo[vn]=b[vn];for(;++Te<jt;)(fh||Te<Ve)&&(zo[S[Te]]=m[Te]);for(;Bo--;)zo[vn++]=m[Te++];return zo}function wx(m,b,S,re){for(var Te=-1,Ve=m.length,jt=-1,vn=S.length,rr=-1,Bo=b.length,zo=b1(Ve-vn,0),fh=qr(zo+Bo),d0=!re;++Te<zo;)fh[Te]=m[Te];for(var $0=Te;++rr<Bo;)fh[$0+rr]=b[rr];for(;++jt<vn;)(d0||Te<Ve)&&(fh[$0+S[jt]]=m[Te++]);return fh}function hy(m,b){var S=-1,re=m.length;for(b||(b=qr(re));++S<re;)b[S]=m[S];return b}function y_(m,b,S,re){var Te=!S;S||(S={});for(var Ve=-1,jt=b.length;++Ve<jt;){var vn=b[Ve],rr=re?re(S[vn],m[vn],vn,S,m):n;rr===n&&(rr=m[vn]),Te?P_(S,vn,rr):K2(S,vn,rr)}return S}function ST(m,b){return y_(m,jw(m),b)}function y$(m,b){return y_(m,L_(m),b)}function _v(m,b){return function(S,re){var Te=Q0(S)?dw:Ny,Ve=b?b():{};return Te(S,m,C0(re,2),Ve)}}function Mw(m){return X0(function(b,S){var re=-1,Te=S.length,Ve=Te>1?S[Te-1]:n,jt=Te>2?S[2]:n;for(Ve=m.length>3&&typeof Ve=="function"?(Te--,Ve):n,jt&&jg(S[0],S[1],jt)&&(Ve=Te<3?n:Ve,Te=1),b=Wg(b);++re<Te;){var vn=S[re];vn&&m(b,vn,re,Ve)}return b})}function AT(m,b){return function(S,re){if(S==null)return S;if(!r_(S))return m(S,re);for(var Te=S.length,Ve=b?Te:-1,jt=Wg(S);(b?Ve--:++Ve<Te)&&re(jt[Ve],Ve,jt)!==!1;);return S}}function b3(m){return function(b,S,re){for(var Te=-1,Ve=Wg(b),jt=re(b),vn=jt.length;vn--;){var rr=jt[m?vn:++Te];if(S(Ve[rr],rr,Ve)===!1)break}return b}}function IT(m,b,S){var re=b&O,Te=wv(m);function Ve(){var jt=this&&this!==Lg&&this instanceof Ve?Te:m;return jt.apply(re?S:this,arguments)}return Ve}function v3(m){return function(b){b=Vg(b);var S=Kr(b)?ky(b):n,re=S?S[0]:b.charAt(0),Te=S?Q_(S,1).join(""):b.slice(1);return re[m]()+Te}}function J_(m){return function(b){return fw(d4(u4(b).replace(s0,"")),m,"")}}function wv(m){return function(){var b=arguments;switch(b.length){case 0:return new m;case 1:return new m(b[0]);case 2:return new m(b[0],b[1]);case 3:return new m(b[0],b[1],b[2]);case 4:return new m(b[0],b[1],b[2],b[3]);case 5:return new m(b[0],b[1],b[2],b[3],b[4]);case 6:return new m(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new m(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var S=Ew(m.prototype),re=m.apply(S,b);return m1(re)?re:S}}function _$(m,b,S){var re=wv(m);function Te(){for(var Ve=arguments.length,jt=qr(Ve),vn=Ve,rr=E2(Te);vn--;)jt[vn]=arguments[vn];var Bo=Ve<3&&jt[0]!==rr&&jt[Ve-1]!==rr?[]:Hy(jt,rr);if(Ve-=Bo.length,Ve<S)return kT(m,b,Fw,Te.placeholder,n,jt,Bo,n,n,S-Ve);var zo=this&&this!==Lg&&this instanceof Te?re:m;return M1(zo,this,jt)}return Te}function CT(m){return function(b,S,re){var Te=Wg(b);if(!r_(b)){var Ve=C0(S,3);b=ly(b),S=function(vn){return Ve(Te[vn],vn,Te)}}var jt=m(b,S,re);return jt>-1?Te[Ve?b[jt]:jt]:n}}function tw(m){return j_(function(b){var S=b.length,re=S,Te=Q1.prototype.thru;for(m&&b.reverse();re--;){var Ve=b[re];if(typeof Ve!="function")throw new Yy(l);if(Te&&!jt&&$v(Ve)=="wrapper")var jt=new Q1([],!0)}for(re=jt?re:S;++re<S;){Ve=b[re];var vn=$v(Ve),rr=vn=="wrapper"?Tv(Ve):n;rr&&S2(rr[0])&&rr[1]==(Oe|ue|se|Ce)&&!rr[4].length&&rr[9]==1?jt=jt[$v(rr[0])].apply(jt,rr[3]):jt=Ve.length==1&&S2(Ve)?jt[vn]():jt.thru(Ve)}return function(){var Bo=arguments,zo=Bo[0];if(jt&&Bo.length==1&&Q0(zo))return jt.plant(zo).value();for(var fh=0,d0=S?b[fh].apply(this,Bo):zo;++fh<S;)d0=b[fh].call(this,d0);return d0}})}function Fw(m,b,S,re,Te,Ve,jt,vn,rr,Bo){var zo=b&Oe,fh=b&O,d0=b&Y,$0=b&(ue|pe),D0=b&He,yg=d0?n:wv(m);function M0(){for(var Eg=arguments.length,kg=qr(Eg),v_=Eg;v_--;)kg[v_]=arguments[v_];if($0)var Ly=E2(M0),x_=g0(kg,Ly);if(re&&(kg=w3(kg,re,Te,$0)),Ve&&(kg=wx(kg,Ve,jt,$0)),Eg-=x_,$0&&Eg<Bo){var P1=Hy(kg,Ly);return kT(m,b,Fw,M0.placeholder,S,kg,P1,vn,rr,Bo-Eg)}var i2=fh?S:this,lw=d0?i2[m]:m;return Eg=kg.length,vn?kg=B1(kg,vn):D0&&Eg>1&&kg.reverse(),zo&&rr<Eg&&(kg.length=rr),this&&this!==Lg&&this instanceof M0&&(lw=yg||wv(lw)),lw.apply(i2,kg)}return M0}function bx(m,b){return function(S,re){return b2(S,m,b(re),{})}}function vx(m,b){return function(S,re){var Te;if(S===n&&re===n)return b;if(S!==n&&(Te=S),re!==n){if(Te===n)return re;typeof S=="string"||typeof re=="string"?(S=u1(S),re=u1(re)):(S=px(S),re=px(re)),Te=m(S,re)}return Te}}function xx(m){return j_(function(b){return b=Fg(b,Ie(C0())),X0(function(S){var re=this;return m(b,function(Te){return M1(Te,re,S)})})})}function bv(m,b){b=b===n?" ":u1(b);var S=b.length;if(S<2)return S?Rw(b,m):b;var re=Rw(b,Z2(m/W2(b)));return Kr(b)?Q_(ky(re),0,m).join(""):re.slice(0,m)}function OT(m,b,S,re){var Te=b&O,Ve=wv(m);function jt(){for(var vn=-1,rr=arguments.length,Bo=-1,zo=re.length,fh=qr(zo+rr),d0=this&&this!==Lg&&this instanceof jt?Ve:m;++Bo<zo;)fh[Bo]=re[Bo];for(;rr--;)fh[Bo++]=arguments[++vn];return M1(d0,Te?S:this,fh)}return jt}function x3(m){return function(b,S,re){return re&&typeof re!="number"&&jg(b,S,re)&&(S=re=n),b=ow(b),S===n?(S=b,b=0):S=ow(S),re=re===n?b<S?1:-1:ow(re),f3(b,S,re,m)}}function vv(m){return function(b,S){return typeof b=="string"&&typeof S=="string"||(b=U_(b),S=U_(S)),m(b,S)}}function kT(m,b,S,re,Te,Ve,jt,vn,rr,Bo){var zo=b&ue,fh=zo?jt:n,d0=zo?n:jt,$0=zo?Ve:n,D0=zo?n:Ve;b|=zo?se:Re,b&=~(zo?Re:se),b&q||(b&=-4);var yg=[m,b,Te,$0,fh,D0,d0,vn,rr,Bo],M0=S.apply(n,yg);return S2(m)&&t2(M0,yg),M0.placeholder=re,t_(M0,m,b)}function iy(m){var b=w1[m];return function(S,re){if(S=U_(S),re=re==null?0:X1(gg(re),292),re&&bw(S)){var Te=(Vg(S)+"e").split("e"),Ve=b(Te[0]+"e"+(+Te[1]+re));return Te=(Vg(Ve)+"e").split("e"),+(Te[0]+"e"+(+Te[1]-re))}return b(S)}}var my=p2&&1/d2(new p2([,-0]))[1]==Tt?function(m){return new p2(m)}:V$;function T3(m){return function(b){var S=ay(b);return S==eg?Gy(b):S==U0?u$(b):ee(b,m(b))}}function F_(m,b,S,re,Te,Ve,jt,vn){var rr=b&Y;if(!rr&&typeof m!="function")throw new Yy(l);var Bo=re?re.length:0;if(Bo||(b&=-97,re=Te=n),jt=jt===n?jt:b1(gg(jt),0),vn=vn===n?vn:gg(vn),Bo-=Te?Te.length:0,b&Re){var zo=re,fh=Te;re=Te=n}var d0=rr?n:Tv(m),$0=[m,b,S,re,Te,zo,fh,Ve,jt,vn];if(d0&&jT($0,d0),m=$0[0],b=$0[1],S=$0[2],re=$0[3],Te=$0[4],vn=$0[9]=$0[9]===n?rr?0:m.length:b1($0[9]-Bo,0),!vn&&b&(ue|pe)&&(b&=-25),!b||b==O)var D0=IT(m,b,S);else b==ue||b==pe?D0=_$(m,b,vn):(b==se||b==(O|se))&&!Te.length?D0=OT(m,b,S,re):D0=Fw.apply(n,$0);var yg=d0?I1:t2;return t_(yg(D0,$0),m,b)}function $3(m,b,S,re){return m===n||r2(m,C_[S])&&!Ng.call(re,S)?b:m}function E3(m,b,S,re,Te,Ve){return m1(m)&&m1(b)&&(Ve.set(b,m),T2(m,b,n,E3,Ve),Ve.delete(b)),m}function RT(m){return X3(m)?n:m}function Tx(m,b,S,re,Te,Ve){var jt=S&x,vn=m.length,rr=b.length;if(vn!=rr&&!(jt&&rr>vn))return!1;var Bo=Ve.get(m),zo=Ve.get(b);if(Bo&&zo)return Bo==b&&zo==m;var fh=-1,d0=!0,$0=S&C?new G2:n;for(Ve.set(m,b),Ve.set(b,m);++fh<vn;){var D0=m[fh],yg=b[fh];if(re)var M0=jt?re(yg,D0,fh,b,m,Ve):re(D0,yg,fh,m,b,Ve);if(M0!==n){if(M0)continue;d0=!1;break}if($0){if(!U2(b,function(Eg,kg){if(!wn($0,kg)&&(D0===Eg||Te(D0,Eg,S,re,Ve)))return $0.push(kg)})){d0=!1;break}}else if(!(D0===yg||Te(D0,yg,S,re,Ve))){d0=!1;break}}return Ve.delete(m),Ve.delete(b),d0}function NT(m,b,S,re,Te,Ve,jt){switch(S){case V0:if(m.byteLength!=b.byteLength||m.byteOffset!=b.byteOffset)return!1;m=m.buffer,b=b.buffer;case L1:return!(m.byteLength!=b.byteLength||!Ve(new nv(m),new nv(b)));case Xr:case a0:case i0:return r2(+m,+b);case S0:return m.name==b.name&&m.message==b.message;case F0:case B0:return m==b+"";case eg:var vn=Gy;case U0:var rr=re&x;if(vn||(vn=d2),m.size!=b.size&&!rr)return!1;var Bo=jt.get(m);if(Bo)return Bo==b;re|=C,jt.set(m,b);var zo=Tx(vn(m),vn(b),re,Te,Ve,jt);return jt.delete(m),zo;case Zg:if(Ry)return Ry.call(m)==Ry.call(b)}return!1}function S3(m,b,S,re,Te,Ve){var jt=S&x,vn=$x(m),rr=vn.length,Bo=$x(b),zo=Bo.length;if(rr!=zo&&!jt)return!1;for(var fh=rr;fh--;){var d0=vn[fh];if(!(jt?d0 in b:Ng.call(b,d0)))return!1}var $0=Ve.get(m),D0=Ve.get(b);if($0&&D0)return $0==b&&D0==m;var yg=!0;Ve.set(m,b),Ve.set(b,m);for(var M0=jt;++fh<rr;){d0=vn[fh];var Eg=m[d0],kg=b[d0];if(re)var v_=jt?re(kg,Eg,d0,b,m,Ve):re(Eg,kg,d0,m,b,Ve);if(!(v_===n?Eg===kg||Te(Eg,kg,S,re,Ve):v_)){yg=!1;break}M0||(M0=d0=="constructor")}if(yg&&!M0){var Ly=m.constructor,x_=b.constructor;Ly!=x_&&"constructor"in m&&"constructor"in b&&!(typeof Ly=="function"&&Ly instanceof Ly&&typeof x_=="function"&&x_ instanceof x_)&&(yg=!1)}return Ve.delete(m),Ve.delete(b),yg}function j_(m){return Cx(Ax(m,n,Av),m+"")}function $x(m){return ax(m,ly,jw)}function xv(m){return ax(m,i_,L_)}var Tv=Yv?function(m){return Yv.get(m)}:V$;function $v(m){for(var b=m.name+"",S=Tw[b],re=Ng.call(Tw,b)?S.length:0;re--;){var Te=S[re],Ve=Te.func;if(Ve==null||Ve==m)return Te.name}return b}function E2(m){var b=Ng.call(je,"placeholder")?je:m;return b.placeholder}function C0(){var m=je.iteratee||z$;return m=m===z$?fv:m,arguments.length?m(arguments[0],arguments[1]):m}function Ex(m,b){var S=m.__data__;return y0(b)?S[typeof b=="string"?"string":"hash"]:S.map}function Sx(m){for(var b=ly(m),S=b.length;S--;){var re=b[S],Te=m[re];b[S]=[re,Te,Uw(Te)]}return b}function e2(m,b){var S=$g(m,b);return o3(S)?S:n}function PT(m){var b=Ng.call(m,V2),S=m[V2];try{m[V2]=n;var re=!0}catch{}var Te=ev.call(m);return re&&(b?m[V2]=S:delete m[V2]),Te}var jw=qv?function(m){return m==null?[]:(m=Wg(m),m0(qv(m),function(b){return Vv.call(m,b)}))}:Z$,L_=qv?function(m){for(var b=[];m;)S1(b,jw(m)),m=c_(m);return b}:Z$,ay=ny;(av&&ay(new av(new ArrayBuffer(1)))!=V0||q2&&ay(new q2)!=eg||sv&&ay(sv.resolve())!=_g||p2&&ay(new p2)!=U0||ov&&ay(new ov)!=r1)&&(ay=function(m){var b=ny(m),S=b==P0?m.constructor:n,re=S?A2(S):"";if(re)switch(re){case e3:return V0;case h2:return eg;case cT:return _g;case $w:return U0;case O_:return r1}return b});function DT(m,b,S){for(var re=-1,Te=S.length;++re<Te;){var Ve=S[re],jt=Ve.size;switch(Ve.type){case"drop":m+=jt;break;case"dropRight":b-=jt;break;case"take":b=X1(b,m+jt);break;case"takeRight":m=b1(m,b-jt);break}}return{start:m,end:b}}function A3(m){var b=m.match(T1);return b?b[1].split(Uy):[]}function I3(m,b,S){b=X_(b,m);for(var re=-1,Te=b.length,Ve=!1;++re<Te;){var jt=__(b[re]);if(!(Ve=m!=null&&S(m,jt)))break;m=m[jt]}return Ve||++re!=Te?Ve:(Te=m==null?0:m.length,!!Te&&i$(Te)&&e_(jt,Te)&&(Q0(m)||Rv(m)))}function MT(m){var b=m.length,S=new m.constructor(b);return b&&typeof m[0]=="string"&&Ng.call(m,"index")&&(S.index=m.index,S.input=m.input),S}function Lw(m){return typeof m.constructor=="function"&&!Ev(m)?Ew(c_(m)):{}}function sy(m,b,S){var re=m.constructor;switch(b){case L1:return Dw(m);case Xr:case a0:return new re(+m);case V0:return _x(m,S);case g1:case E0:case qg:case W1:case V1:case u0:case Z1:case k0:case Bg:return y3(m,S);case eg:return new re;case i0:case B0:return new re(m);case F0:return $T(m);case U0:return new re;case Zg:return g3(m)}}function w$(m,b){var S=b.length;if(!S)return m;var re=S-1;return b[re]=(S>1?"& ":"")+b[re],b=b.join(S>2?", ":" "),m.replace(q1,`{
/* [wrapped with `+b+`] */
`)}function b$(m){return Q0(m)||Rv(m)||!!(lT&&m&&m[lT])}function e_(m,b){var S=typeof m;return b=b??ze,!!b&&(S=="number"||S!="symbol"&&E_.test(m))&&m>-1&&m%1==0&&m<b}function jg(m,b,S){if(!m1(S))return!1;var re=typeof b;return(re=="number"?r_(S)&&e_(b,S.length):re=="string"&&b in S)?r2(S[b],m):!1}function C3(m,b){if(Q0(m))return!1;var S=typeof m;return S=="number"||S=="symbol"||S=="boolean"||m==null||b_(m)?!0:yy.test(m)||!zg.test(m)||b!=null&&m in Wg(b)}function y0(m){var b=typeof m;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?m!=="__proto__":m===null}function S2(m){var b=$v(m),S=je[b];if(typeof S!="function"||!(b in K0.prototype))return!1;if(m===S)return!0;var re=Tv(S);return!!re&&m===re[0]}function O3(m){return!!Bv&&Bv in m}var FT=_w?sw:q$;function Ev(m){var b=m&&m.constructor,S=typeof b=="function"&&b.prototype||C_;return m===S}function Uw(m){return m===m&&!m1(m)}function Sv(m,b){return function(S){return S==null?!1:S[m]===b&&(b!==n||m in Wg(S))}}function k3(m){var b=Tn(m,function(re){return S.size===s&&S.clear(),re}),S=b.cache;return b}function jT(m,b){var S=m[1],re=b[1],Te=S|re,Ve=Te<(O|Y|Oe),jt=re==Oe&&S==ue||re==Oe&&S==Ce&&m[7].length<=b[8]||re==(Oe|Ce)&&b[7].length<=b[8]&&S==ue;if(!(Ve||jt))return m;re&O&&(m[2]=b[2],Te|=S&O?0:q);var vn=b[3];if(vn){var rr=m[3];m[3]=rr?w3(rr,vn,b[4]):vn,m[4]=rr?Hy(m[3],u):b[4]}return vn=b[5],vn&&(rr=m[5],m[5]=rr?wx(rr,vn,b[6]):vn,m[6]=rr?Hy(m[5],u):b[6]),vn=b[7],vn&&(m[7]=vn),re&Oe&&(m[8]=m[8]==null?b[8]:X1(m[8],b[8])),m[9]==null&&(m[9]=b[9]),m[0]=b[0],m[1]=Te,m}function UT(m){var b=[];if(m!=null)for(var S in Wg(m))b.push(S);return b}function BT(m){return ev.call(m)}function Ax(m,b,S){return b=b1(b===n?m.length-1:b,0),function(){for(var re=arguments,Te=-1,Ve=b1(re.length-b,0),jt=qr(Ve);++Te<Ve;)jt[Te]=re[b+Te];Te=-1;for(var vn=qr(b+1);++Te<b;)vn[Te]=re[Te];return vn[b]=S(jt),M1(m,this,vn)}}function Ix(m,b){return b.length<2?m:Py(m,ry(b,0,-1))}function B1(m,b){for(var S=m.length,re=X1(b.length,S),Te=hy(m);re--;){var Ve=b[re];m[re]=e_(Ve,S)?Te[Ve]:n}return m}function Dy(m,b){if(!(b==="constructor"&&typeof m[b]=="function")&&b!="__proto__")return m[b]}var t2=R3(I1),Bw=Qx||function(m,b){return Lg.setTimeout(m,b)},Cx=R3(cx);function t_(m,b,S){var re=b+"";return Cx(m,w$(re,WT(A3(re),S)))}function R3(m){var b=0,S=0;return function(){var re=m$(),Te=Lr-(re-S);if(S=re,Te>0){if(++b>=xn)return arguments[0]}else b=0;return m.apply(n,arguments)}}function My(m,b){var S=-1,re=m.length,Te=re-1;for(b=b===n?re:b;++S<b;){var Ve=mv(S,Te),jt=m[Ve];m[Ve]=m[S],m[S]=jt}return m.length=b,m}var zT=k3(function(m){var b=[];return m.charCodeAt(0)===46&&b.push(""),m.replace(s1,function(S,re,Te,Ve){b.push(Te?Ve.replace(s_,"$1"):re||S)}),b});function __(m){if(typeof m=="string"||b_(m))return m;var b=m+"";return b=="0"&&1/m==-Tt?"-0":b}function A2(m){if(m!=null){try{return Hb.call(m)}catch{}try{return m+""}catch{}}return""}function WT(m,b){return p1(ah,function(S){var re="_."+S[0];b&S[1]&&!L2(m,re)&&m.push(re)}),m.sort()}function N3(m){if(m instanceof K0)return m.clone();var b=new Q1(m.__wrapped__,m.__chain__);return b.__actions__=hy(m.__actions__),b.__index__=m.__index__,b.__values__=m.__values__,b}function v$(m,b,S){(S?jg(m,b,S):b===n)?b=1:b=b1(gg(b),0);var re=m==null?0:m.length;if(!re||b<1)return[];for(var Te=0,Ve=0,jt=qr(Z2(re/b));Te<re;)jt[Ve++]=ry(m,Te,Te+=b);return jt}function Ox(m){for(var b=-1,S=m==null?0:m.length,re=0,Te=[];++b<S;){var Ve=m[b];Ve&&(Te[re++]=Ve)}return Te}function P3(){var m=arguments.length;if(!m)return[];for(var b=qr(m-1),S=arguments[0],re=m;re--;)b[re-1]=arguments[re];return S1(Q0(S)?hy(S):[S],A1(b,1))}var n_=X0(function(m,b){return N1(m)?D_(m,A1(b,1,N1,!0)):[]}),Og=X0(function(m,b){var S=R1(b);return N1(S)&&(S=n),N1(m)?D_(m,A1(b,1,N1,!0),C0(S,2)):[]}),F1=X0(function(m,b){var S=R1(b);return N1(S)&&(S=n),N1(m)?D_(m,A1(b,1,N1,!0),n,S):[]});function v1(m,b,S){var re=m==null?0:m.length;return re?(b=S||b===n?1:gg(b),ry(m,b<0?0:b,re)):[]}function z1(m,b,S){var re=m==null?0:m.length;return re?(b=S||b===n?1:gg(b),b=re-b,ry(m,0,b<0?0:b)):[]}function Fy(m,b){return m&&m.length?Nw(m,C0(b,3),!0,!0):[]}function zw(m,b){return m&&m.length?Nw(m,C0(b,3),!0):[]}function k1(m,b,S,re){var Te=m==null?0:m.length;return Te?(S&&typeof S!="number"&&jg(m,b,S)&&(S=0,re=Te),rx(m,b,S,re)):[]}function Ww(m,b,S){var re=m==null?0:m.length;if(!re)return-1;var Te=S==null?0:gg(S);return Te<0&&(Te=b1(re+Te,0)),u2(m,C0(b,3),Te)}function I2(m,b,S){var re=m==null?0:m.length;if(!re)return-1;var Te=re-1;return S!==n&&(Te=gg(S),Te=S<0?b1(re+Te,0):X1(Te,re-1)),u2(m,C0(b,3),Te,!0)}function Av(m){var b=m==null?0:m.length;return b?A1(m,1):[]}function D3(m){var b=m==null?0:m.length;return b?A1(m,Tt):[]}function Iv(m,b){var S=m==null?0:m.length;return S?(b=b===n?1:gg(b),A1(m,b)):[]}function Ey(m){for(var b=-1,S=m==null?0:m.length,re={};++b<S;){var Te=m[b];re[Te[0]]=Te[1]}return re}function kx(m){return m&&m.length?m[0]:n}function Vw(m,b,S){var re=m==null?0:m.length;if(!re)return-1;var Te=S==null?0:gg(S);return Te<0&&(Te=b1(re+Te,0)),I_(m,b,Te)}function n2(m){var b=m==null?0:m.length;return b?ry(m,0,-1):[]}var Rx=X0(function(m){var b=Fg(m,gx);return b.length&&b[0]===m[0]?m_(b):[]}),M3=X0(function(m){var b=R1(m),S=Fg(m,gx);return b===R1(S)?b=n:S.pop(),S.length&&S[0]===m[0]?m_(S,C0(b,2)):[]}),C2=X0(function(m){var b=R1(m),S=Fg(m,gx);return b=typeof b=="function"?b:n,b&&S.pop(),S.length&&S[0]===m[0]?m_(S,n,b):[]});function Nx(m,b){return m==null?"":Gv.call(m,b)}function R1(m){var b=m==null?0:m.length;return b?m[b-1]:n}function Px(m,b,S){var re=m==null?0:m.length;if(!re)return-1;var Te=re;return S!==n&&(Te=gg(S),Te=Te<0?b1(re+Te,0):X1(Te,re-1)),b===b?d$(m,b,Te):u2(m,Qw,Te,!0)}function Cv(m,b){return m&&m.length?$2(m,gg(b)):n}var F3=X0(Ov);function Ov(m,b){return m&&m.length&&b&&b.length?t1(m,b):m}function Dx(m,b,S){return m&&m.length&&b&&b.length?t1(m,b,C0(S,2)):m}function gy(m,b,S){return m&&m.length&&b&&b.length?t1(m,b,n,S):m}var O2=j_(function(m,b){var S=m==null?0:m.length,re=nx(m,b);return hv(m,Fg(b,function(Te){return e_(Te,S)?+Te:Te}).sort(_3)),re});function w_(m,b){var S=[];if(!(m&&m.length))return S;var re=-1,Te=[],Ve=m.length;for(b=C0(b,3);++re<Ve;){var jt=m[re];b(jt,re,m)&&(S.push(jt),Te.push(re))}return hv(m,Te),S}function oy(m){return m==null?m:Hv.call(m)}function VT(m,b,S){var re=m==null?0:m.length;return re?(S&&typeof S!="number"&&jg(m,b,S)?(b=0,S=re):(b=b==null?0:gg(b),S=S===n?re:gg(S)),ry(m,b,S)):[]}function j3(m,b){return C1(m,b)}function L3(m,b,S){return yv(m,b,C0(S,2))}function x$(m,b){var S=m==null?0:m.length;if(S){var re=C1(m,b);if(re<S&&r2(m[re],b))return re}return-1}function k2(m,b){return C1(m,b,!0)}function ZT(m,b,S){return yv(m,b,C0(S,2),!0)}function U3(m,b){var S=m==null?0:m.length;if(S){var re=C1(m,b,!0)-1;if(r2(m[re],b))return re}return-1}function nw(m){return m&&m.length?fx(m):[]}function B3(m,b){return m&&m.length?fx(m,C0(b,2)):[]}function rw(m){var b=m==null?0:m.length;return b?ry(m,1,b):[]}function qT(m,b,S){return m&&m.length?(b=S||b===n?1:gg(b),ry(m,0,b<0?0:b)):[]}function HT(m,b,S){var re=m==null?0:m.length;return re?(b=S||b===n?1:gg(b),b=re-b,ry(m,b<0?0:b,re)):[]}function z3(m,b){return m&&m.length?Nw(m,C0(b,3),!1,!0):[]}function Mx(m,b){return m&&m.length?Nw(m,C0(b,3)):[]}var T$=X0(function(m){return O1(A1(m,1,N1,!0))}),$$=X0(function(m){var b=R1(m);return N1(b)&&(b=n),O1(A1(m,1,N1,!0),C0(b,2))}),YT=X0(function(m){var b=R1(m);return b=typeof b=="function"?b:n,O1(A1(m,1,N1,!0),n,b)});function KT(m){return m&&m.length?O1(m):[]}function iw(m,b){return m&&m.length?O1(m,C0(b,2)):[]}function E$(m,b){return b=typeof b=="function"?b:n,m&&m.length?O1(m,n,b):[]}function R2(m){if(!(m&&m.length))return[];var b=0;return m=m0(m,function(S){if(N1(S))return b=b1(S.length,b),!0}),A(b,function(S){return Fg(m,hw(S))})}function W3(m,b){if(!(m&&m.length))return[];var S=R2(m);return b==null?S:Fg(S,function(re){return M1(b,n,re)})}var d1=X0(function(m,b){return N1(m)?D_(m,b):[]}),S$=X0(function(m){return mx(m0(m,N1))}),XT=X0(function(m){var b=R1(m);return N1(b)&&(b=n),mx(m0(m,N1),C0(b,2))}),A$=X0(function(m){var b=R1(m);return b=typeof b=="function"?b:n,mx(m0(m,N1),n,b)}),I$=X0(R2);function QT(m,b){return h3(m||[],b||[],K2)}function JT(m,b){return h3(m||[],b||[],a1)}var C$=X0(function(m){var b=m.length,S=b>1?m[b-1]:n;return S=typeof S=="function"?(m.pop(),S):n,W3(m,S)});function jy(m){var b=je(m);return b.__chain__=!0,b}function V3(m,b){return b(m),m}function Fx(m,b){return b(m)}var N2=j_(function(m){var b=m.length,S=b?m[0]:0,re=this.__wrapped__,Te=function(Ve){return nx(Ve,m)};return b>1||this.__actions__.length||!(re instanceof K0)||!e_(S)?this.thru(Te):(re=re.slice(S,+S+(b?1:0)),re.__actions__.push({func:Fx,args:[Te],thisArg:n}),new Q1(re,this.__chain__).thru(function(Ve){return b&&!Ve.length&&Ve.push(n),Ve}))});function jx(){return jy(this)}function aw(){return new Q1(this.value(),this.__chain__)}function Lx(){this.__values__===n&&(this.__values__=e4(this.value()));var m=this.__index__>=this.__values__.length,b=m?n:this.__values__[this.__index__++];return{done:m,value:b}}function Z3(){return this}function q3(m){for(var b,S=this;S instanceof k_;){var re=N3(S);re.__index__=0,re.__values__=n,b?Te.__wrapped__=re:b=re;var Te=re;S=S.__wrapped__}return Te.__wrapped__=m,b}function O$(){var m=this.__wrapped__;if(m instanceof K0){var b=m;return this.__actions__.length&&(b=new K0(this)),b=b.reverse(),b.__actions__.push({func:Fx,args:[oy],thisArg:n}),new Q1(b,this.__chain__)}return this.thru(oy)}function G3(){return p3(this.__wrapped__,this.__actions__)}var k$=_v(function(m,b,S){Ng.call(m,S)?++m[S]:P_(m,S,1)});function e$(m,b,S){var re=Q0(m)?Yw:p_;return S&&jg(m,b,S)&&(b=n),re(m,C0(b,3))}function t$(m,b){var S=Q0(m)?m0:Q2;return S(m,C0(b,3))}var Ux=CT(Ww),Bx=CT(I2);function n$(m,b){return A1(Zx(m,b),1)}function H3(m,b){return A1(Zx(m,b),Tt)}function R$(m,b,S){return S=S===n?1:gg(S),A1(Zx(m,b),S)}function Y3(m,b){var S=Q0(m)?p1:M_;return S(m,C0(b,3))}function zx(m,b){var S=Q0(m)?cw:_T;return S(m,C0(b,3))}var Wx=_v(function(m,b,S){Ng.call(m,S)?m[S].push(b):P_(m,S,[b])});function K3(m,b,S,re){m=r_(m)?m:Yx(m),S=S&&!re?gg(S):0;var Te=m.length;return S<0&&(S=b1(Te+S,0)),a$(m)?S<=Te&&m.indexOf(b,S)>-1:!!Te&&I_(m,b,S)>-1}var Vx=X0(function(m,b,S){var re=-1,Te=typeof b=="function",Ve=r_(m)?qr(m.length):[];return M_(m,function(jt){Ve[++re]=Te?M1(b,jt,S):v2(jt,b,S)}),Ve}),r$=_v(function(m,b,S){P_(m,S,b)});function Zx(m,b){var S=Q0(m)?Fg:u3;return S(m,C0(b,3))}function qx(m,b,S,re){return m==null?[]:(Q0(b)||(b=b==null?[]:[b]),S=re?n:S,Q0(S)||(S=S==null?[]:[S]),dx(m,b,S))}var N$=_v(function(m,b,S){m[S?0:1].push(b)},function(){return[[],[]]});function kv(m,b,S){var re=Q0(m)?fw:jv,Te=arguments.length<3;return re(m,C0(b,4),S,Te,M_)}function P$(m,b,S){var re=Q0(m)?Mv:jv,Te=arguments.length<3;return re(m,C0(b,4),S,Te,_T)}function Gx(m,b){var S=Q0(m)?m0:Q2;return S(m,Ir(C0(b,3)))}function f(m){var b=Q0(m)?N_:J2;return b(m)}function h(m,b,S){(S?jg(m,b,S):b===n)?b=1:b=gg(b);var re=Q0(m)?Y2:i1;return re(m,b)}function v(m){var b=Q0(m)?gT:gv;return b(m)}function T(m){if(m==null)return 0;if(r_(m))return a$(m)?W2(m):m.length;var b=ay(m);return b==eg||b==U0?m.size:ux(m).length}function D(m,b,S){var re=Q0(m)?U2:g$;return S&&jg(m,b,S)&&(b=n),re(m,C0(b,3))}var te=X0(function(m,b){if(m==null)return[];var S=b.length;return S>1&&jg(m,b[0],b[1])?b=[]:S>2&&jg(b[0],b[1],b[2])&&(b=[b[0]]),dx(m,A1(b,1),[])}),Se=Qg||function(){return Lg.Date.now()};function Ke(m,b){if(typeof b!="function")throw new Yy(l);return m=gg(m),function(){if(--m<1)return b.apply(this,arguments)}}function _n(m,b,S){return b=S?n:b,b=m&&b==null?m.length:b,F_(m,Oe,n,n,n,n,b)}function Yr(m,b){var S;if(typeof b!="function")throw new Yy(l);return m=gg(m),function(){return--m>0&&(S=b.apply(this,arguments)),m<=1&&(b=n),S}}var Xo=X0(function(m,b,S){var re=O;if(S.length){var Te=Hy(S,E2(Xo));re|=se}return F_(m,re,b,S,Te)}),e0=X0(function(m,b,S){var re=O|Y;if(S.length){var Te=Hy(S,E2(e0));re|=se}return F_(b,re,m,S,Te)});function Go(m,b,S){b=S?n:b;var re=F_(m,ue,n,n,n,n,n,b);return re.placeholder=Go.placeholder,re}function f0(m,b,S){b=S?n:b;var re=F_(m,pe,n,n,n,n,n,b);return re.placeholder=f0.placeholder,re}function w0(m,b,S){var re,Te,Ve,jt,vn,rr,Bo=0,zo=!1,fh=!1,d0=!0;if(typeof m!="function")throw new Yy(l);b=U_(b)||0,m1(S)&&(zo=!!S.leading,fh="maxWait"in S,Ve=fh?b1(U_(S.maxWait)||0,b):Ve,d0="trailing"in S?!!S.trailing:d0);function $0(P1){var i2=re,lw=Te;return re=Te=n,Bo=P1,jt=m.apply(lw,i2),jt}function D0(P1){return Bo=P1,vn=Bw(Eg,b),zo?$0(P1):jt}function yg(P1){var i2=P1-rr,lw=P1-Bo,p4=b-i2;return fh?X1(p4,Ve-lw):p4}function M0(P1){var i2=P1-rr,lw=P1-Bo;return rr===n||i2>=b||i2<0||fh&&lw>=Ve}function Eg(){var P1=Se();if(M0(P1))return kg(P1);vn=Bw(Eg,yg(P1))}function kg(P1){return vn=n,d0&&re?$0(P1):(re=Te=n,jt)}function v_(){vn!==n&&Pw(vn),Bo=0,re=rr=Te=vn=n}function Ly(){return vn===n?jt:kg(Se())}function x_(){var P1=Se(),i2=M0(P1);if(re=arguments,Te=this,rr=P1,i2){if(vn===n)return D0(rr);if(fh)return Pw(vn),vn=Bw(Eg,b),$0(rr)}return vn===n&&(vn=Bw(Eg,b)),jt}return x_.cancel=v_,x_.flush=Ly,x_}var x0=X0(function(m,b){return r3(m,1,b)}),h1=X0(function(m,b,S){return r3(m,U_(b)||0,S)});function or(m){return F_(m,He)}function Tn(m,b){if(typeof m!="function"||b!=null&&typeof b!="function")throw new Yy(l);var S=function(){var re=arguments,Te=b?b.apply(this,re):re[0],Ve=S.cache;if(Ve.has(Te))return Ve.get(Te);var jt=m.apply(this,re);return S.cache=Ve.set(Te,jt)||Ve,jt};return S.cache=new(Tn.Cache||Ky),S}Tn.Cache=Ky;function Ir(m){if(typeof m!="function")throw new Yy(l);return function(){var b=arguments;switch(b.length){case 0:return!m.call(this);case 1:return!m.call(this,b[0]);case 2:return!m.call(this,b[0],b[1]);case 3:return!m.call(this,b[0],b[1],b[2])}return!m.apply(this,b)}}function r0(m){return Yr(2,m)}var T0=TT(function(m,b){b=b.length==1&&Q0(b[0])?Fg(b[0],Ie(C0())):Fg(A1(b,1),Ie(C0()));var S=b.length;return X0(function(re){for(var Te=-1,Ve=X1(re.length,S);++Te<Ve;)re[Te]=b[Te].call(this,re[Te]);return M1(m,this,re)})}),O0=X0(function(m,b){var S=Hy(b,E2(O0));return F_(m,se,n,b,S)}),R0=X0(function(m,b){var S=Hy(b,E2(R0));return F_(m,Re,n,b,S)}),L0=j_(function(m,b){return F_(m,Ce,n,n,n,b)});function j1(m,b){if(typeof m!="function")throw new Yy(l);return b=b===n?b:gg(b),X0(m,b)}function Pg(m,b){if(typeof m!="function")throw new Yy(l);return b=b==null?0:b1(gg(b),0),X0(function(S){var re=S[b],Te=Q_(S,0,b);return re&&S1(Te,re),M1(m,this,Te)})}function P2(m,b,S){var re=!0,Te=!0;if(typeof m!="function")throw new Yy(l);return m1(S)&&(re="leading"in S?!!S.leading:re,Te="trailing"in S?!!S.trailing:Te),w0(m,b,{leading:re,maxWait:b,trailing:Te})}function D$(m){return _n(m,1)}function x4(m,b){return O0(yx(b),m)}function T4(){if(!arguments.length)return[];var m=arguments[0];return Q0(m)?m:[m]}function $4(m){return $y(m,w)}function E4(m,b){return b=typeof b=="function"?b:n,$y(m,w,b)}function S4(m){return $y(m,d|w)}function I4(m,b){return b=typeof b=="function"?b:n,$y(m,d|w,b)}function C4(m,b){return b==null||uv(m,b,ly(b))}function r2(m,b){return m===b||m!==m&&b!==b}var O4=vv(h_),k4=vv(function(m,b){return m>=b}),Rv=a3((function(){return arguments})())?a3:function(m){return x1(m)&&Ng.call(m,"callee")&&!Vv.call(m,"callee")},Q0=qr.isArray,R4=Hw?Ie(Hw):sx;function r_(m){return m!=null&&i$(m.length)&&!sw(m)}function N1(m){return x1(m)&&r_(m)}function N4(m){return m===!0||m===!1||x1(m)&&ny(m)==Xr}var Zw=Jx||q$,P4=U1?Ie(U1):bT;function D4(m){return x1(m)&&m.nodeType===1&&!X3(m)}function M4(m){if(m==null)return!0;if(r_(m)&&(Q0(m)||typeof m=="string"||typeof m.splice=="function"||Zw(m)||Hx(m)||Rv(m)))return!m.length;var b=ay(m);if(b==eg||b==U0)return!m.size;if(Ev(m))return!ux(m).length;for(var S in m)if(Ng.call(m,S))return!1;return!0}function F4(m,b){return Cw(m,b)}function j4(m,b,S){S=typeof S=="function"?S:n;var re=S?S(m,b):n;return re===n?Cw(m,b,n,S):!!re}function M$(m){if(!x1(m))return!1;var b=ny(m);return b==S0||b==Ih||typeof m.message=="string"&&typeof m.name=="string"&&!X3(m)}function L4(m){return typeof m=="number"&&bw(m)}function sw(m){if(!m1(m))return!1;var b=ny(m);return b==Sg||b==n1||b==o0||b==N0}function K$(m){return typeof m=="number"&&m==gg(m)}function i$(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=ze}function m1(m){var b=typeof m;return m!=null&&(b=="object"||b=="function")}function x1(m){return m!=null&&typeof m=="object"}var X$=A_?Ie(A_):ox;function U4(m,b){return m===b||lx(m,b,Sx(b))}function B4(m,b,S){return S=typeof S=="function"?S:n,lx(m,b,Sx(b),S)}function z4(m){return Q$(m)&&m!=+m}function W4(m){if(FT(m))throw new W0(a);return o3(m)}function V4(m){return m===null}function Z4(m){return m==null}function Q$(m){return typeof m=="number"||x1(m)&&ny(m)==i0}function X3(m){if(!x1(m)||ny(m)!=P0)return!1;var b=c_(m);if(b===null)return!0;var S=Ng.call(b,"constructor")&&b.constructor;return typeof S=="function"&&S instanceof S&&Hb.call(S)==zv}var F$=j2?Ie(j2):vT;function q4(m){return K$(m)&&m>=-ze&&m<=ze}var J$=o2?Ie(o2):l3;function a$(m){return typeof m=="string"||!Q0(m)&&x1(m)&&ny(m)==B0}function b_(m){return typeof m=="symbol"||x1(m)&&ny(m)==Zg}var Hx=Dv?Ie(Dv):cv;function G4(m){return m===n}function H4(m){return x1(m)&&ay(m)==r1}function Y4(m){return x1(m)&&ny(m)==Ug}var K4=vv(x2),X4=vv(function(m,b){return m<=b});function e4(m){if(!m)return[];if(r_(m))return a$(m)?ky(m):hy(m);if(H_&&m[H_])return Ig(m[H_]());var b=ay(m),S=b==eg?Gy:b==U0?d2:Yx;return S(m)}function ow(m){if(!m)return m===0?m:0;if(m=U_(m),m===Tt||m===-Tt){var b=m<0?-1:1;return b*Ht}return m===m?m:0}function gg(m){var b=ow(m),S=b%1;return b===b?S?b-S:b:0}function t4(m){return m?K_(gg(m),0,Be):0}function U_(m){if(typeof m=="number")return m;if(b_(m))return Ae;if(m1(m)){var b=typeof m.valueOf=="function"?m.valueOf():m;m=m1(b)?b+"":b}if(typeof m!="string")return m===0?m:+m;m=he(m);var S=$_.test(m);return S||Sy.test(m)?F2(m.slice(2),S?2:8):zy.test(m)?Ae:+m}function n4(m){return y_(m,i_(m))}function Q4(m){return m?K_(gg(m),-ze,ze):m===0?m:0}function Vg(m){return m==null?"":u1(m)}var J4=Mw(function(m,b){if(Ev(b)||r_(b)){y_(b,ly(b),m);return}for(var S in b)Ng.call(b,S)&&K2(m,S,b[S])}),r4=Mw(function(m,b){y_(b,i_(b),m)}),s$=Mw(function(m,b,S,re){y_(b,i_(b),m,re)}),eE=Mw(function(m,b,S,re){y_(b,ly(b),m,re)}),tE=j_(nx);function nE(m,b){var S=Ew(m);return b==null?S:e1(S,b)}var rE=X0(function(m,b){m=Wg(m);var S=-1,re=b.length,Te=re>2?b[2]:n;for(Te&&jg(b[0],b[1],Te)&&(re=1);++S<re;)for(var Ve=b[S],jt=i_(Ve),vn=-1,rr=jt.length;++vn<rr;){var Bo=jt[vn],zo=m[Bo];(zo===n||r2(zo,C_[Bo])&&!Ng.call(m,Bo))&&(m[Bo]=Ve[Bo])}return m}),iE=X0(function(m){return m.push(n,E3),M1(i4,n,m)});function aE(m,b){return B2(m,C0(b,3),Jy)}function sE(m,b){return B2(m,C0(b,3),_2)}function oE(m,b){return m==null?m:dv(m,C0(b,3),i_)}function lE(m,b){return m==null?m:ix(m,C0(b,3),i_)}function uE(m,b){return m&&Jy(m,C0(b,3))}function dE(m,b){return m&&_2(m,C0(b,3))}function cE(m){return m==null?[]:py(m,ly(m))}function fE(m){return m==null?[]:py(m,i_(m))}function j$(m,b,S){var re=m==null?n:Py(m,b);return re===n?S:re}function pE(m,b){return m!=null&&I3(m,b,w2)}function L$(m,b){return m!=null&&I3(m,b,i3)}var hE=bx(function(m,b,S){b!=null&&typeof b.toString!="function"&&(b=ev.call(b)),m[b]=S},B$(a_)),mE=bx(function(m,b,S){b!=null&&typeof b.toString!="function"&&(b=ev.call(b)),Ng.call(m,b)?m[b].push(S):m[b]=[S]},C0),gE=X0(v2);function ly(m){return r_(m)?R_(m):ux(m)}function i_(m){return r_(m)?R_(m,!0):xT(m)}function yE(m,b){var S={};return b=C0(b,3),Jy(m,function(re,Te,Ve){P_(S,b(re,Te,Ve),re)}),S}function _E(m,b){var S={};return b=C0(b,3),Jy(m,function(re,Te,Ve){P_(S,Te,b(re,Te,Ve))}),S}var wE=Mw(function(m,b,S){T2(m,b,S)}),i4=Mw(function(m,b,S,re){T2(m,b,S,re)}),bE=j_(function(m,b){var S={};if(m==null)return S;var re=!1;b=Fg(b,function(Ve){return Ve=X_(Ve,m),re||(re=Ve.length>1),Ve}),y_(m,xv(m),S),re&&(S=$y(S,d|g|w,RT));for(var Te=b.length;Te--;)ew(S,b[Te]);return S});function vE(m,b){return a4(m,Ir(C0(b)))}var xE=j_(function(m,b){return m==null?{}:kw(m,b)});function a4(m,b){if(m==null)return{};var S=Fg(xv(m),function(re){return[re]});return b=C0(b),d3(m,S,function(re,Te){return b(re,Te[0])})}function TE(m,b,S){b=X_(b,m);var re=-1,Te=b.length;for(Te||(Te=1,m=n);++re<Te;){var Ve=m==null?n:m[__(b[re])];Ve===n&&(re=Te,Ve=S),m=sw(Ve)?Ve.call(m):Ve}return m}function $E(m,b,S){return m==null?m:a1(m,b,S)}function EE(m,b,S,re){return re=typeof re=="function"?re:n,m==null?m:a1(m,b,S,re)}var s4=T3(ly),o4=T3(i_);function SE(m,b,S){var re=Q0(m),Te=re||Zw(m)||Hx(m);if(b=C0(b,4),S==null){var Ve=m&&m.constructor;Te?S=re?new Ve:[]:m1(m)?S=sw(Ve)?Ew(c_(m)):{}:S={}}return(Te?p1:Jy)(m,function(jt,vn,rr){return b(S,jt,vn,rr)}),S}function AE(m,b){return m==null?!0:ew(m,b)}function IE(m,b,S){return m==null?m:hx(m,b,yx(S))}function CE(m,b,S,re){return re=typeof re=="function"?re:n,m==null?m:hx(m,b,yx(S),re)}function Yx(m){return m==null?[]:Ye(m,ly(m))}function OE(m){return m==null?[]:Ye(m,i_(m))}function kE(m,b,S){return S===n&&(S=b,b=n),S!==n&&(S=U_(S),S=S===S?S:0),b!==n&&(b=U_(b),b=b===b?b:0),K_(U_(m),b,S)}function RE(m,b,S){return b=ow(b),S===n?(S=b,b=0):S=ow(S),m=U_(m),wT(m,b,S)}function NE(m,b,S){if(S&&typeof S!="boolean"&&jg(m,b,S)&&(b=S=n),S===n&&(typeof b=="boolean"?(S=b,b=n):typeof m=="boolean"&&(S=m,m=n)),m===n&&b===n?(m=0,b=1):(m=ow(m),b===n?(b=m,m=0):b=ow(b)),m>b){var re=m;m=b,b=re}if(S||m%1||b%1){var Te=iv();return X1(m+Te*(b-m+M2("1e-"+((Te+"").length-1))),b)}return mv(m,b)}var PE=J_(function(m,b,S){return b=b.toLowerCase(),m+(S?l4(b):b)});function l4(m){return U$(Vg(m).toLowerCase())}function u4(m){return m=Vg(m),m&&m.replace(Wy,l0).replace(n0,"")}function DE(m,b,S){m=Vg(m),b=u1(b);var re=m.length;S=S===n?re:K_(gg(S),0,re);var Te=S;return S-=b.length,S>=0&&m.slice(S,Te)==b}function ME(m){return m=Vg(m),m&&j0.test(m)?m.replace(ko,I0):m}function FE(m){return m=Vg(m),m&&H0.test(m)?m.replace(Hr,"\\$&"):m}var jE=J_(function(m,b,S){return m+(S?"-":"")+b.toLowerCase()}),LE=J_(function(m,b,S){return m+(S?" ":"")+b.toLowerCase()}),UE=v3("toLowerCase");function BE(m,b,S){m=Vg(m),b=gg(b);var re=b?W2(m):0;if(!b||re>=b)return m;var Te=(b-re)/2;return bv(f2(Te),S)+m+bv(Z2(Te),S)}function zE(m,b,S){m=Vg(m),b=gg(b);var re=b?W2(m):0;return b&&re<b?m+bv(b-re,S):m}function WE(m,b,S){m=Vg(m),b=gg(b);var re=b?W2(m):0;return b&&re<b?bv(b-re,S)+m:m}function VE(m,b,S){return S||b==null?b=0:b&&(b=+b),dT(Vg(m).replace(Y0,""),b||0)}function ZE(m,b,S){return(S?jg(m,b,S):b===n)?b=1:b=gg(b),Rw(Vg(m),b)}function qE(){var m=arguments,b=Vg(m[0]);return m.length<3?b:b.replace(m[1],m[2])}var GE=J_(function(m,b,S){return m+(S?"_":"")+b.toLowerCase()});function HE(m,b,S){return S&&typeof S!="number"&&jg(m,b,S)&&(b=S=n),S=S===n?Be:S>>>0,S?(m=Vg(m),m&&(typeof b=="string"||b!=null&&!F$(b))&&(b=u1(b),!b&&Kr(m))?Q_(ky(m),0,S):m.split(b,S)):[]}var YE=J_(function(m,b,S){return m+(S?" ":"")+U$(b)});function KE(m,b,S){return m=Vg(m),S=S==null?0:K_(gg(S),0,m.length),b=u1(b),m.slice(S,S+b.length)==b}function XE(m,b,S){var re=je.templateSettings;S&&jg(m,b,S)&&(b=n),m=Vg(m),b=s$({},b,re,$3);var Te=s$({},b.imports,re.imports,$3),Ve=ly(Te),jt=Ye(Te,Ve),vn,rr,Bo=0,zo=b.interpolate||f1,fh="__p += '",d0=Wb((b.escape||f1).source+"|"+zo.source+"|"+(zo===Hg?uy:f1).source+"|"+(b.evaluate||f1).source+"|$","g"),$0="//# sourceURL="+(Ng.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++z0+"]")+`
`;m.replace(d0,function(M0,Eg,kg,v_,Ly,x_){return kg||(kg=v_),fh+=m.slice(Bo,x_).replace(o_,Cg),Eg&&(vn=!0,fh+=`' +
__e(`+Eg+`) +
'`),Ly&&(rr=!0,fh+=`';
`+Ly+`;
__p += '`),kg&&(fh+=`' +
((__t = (`+kg+`)) == null ? '' : __t) +
'`),Bo=x_+M0.length,M0}),fh+=`';
`;var D0=Ng.call(b,"variable")&&b.variable;if(!D0)fh=`with (obj) {
`+fh+`
}
`;else if(B_.test(D0))throw new W0(c);fh=(rr?fh.replace(Ge,""):fh).replace(An,"$1").replace(nr,"$1;"),fh="function("+(D0||"obj")+`) {
`+(D0?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(vn?", __e = _.escape":"")+(rr?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+fh+`return __p
}`;var yg=c4(function(){return Rg(Ve,$0+"return "+fh).apply(n,jt)});if(yg.source=fh,M$(yg))throw yg;return yg}function QE(m){return Vg(m).toLowerCase()}function JE(m){return Vg(m).toUpperCase()}function eS(m,b,S){if(m=Vg(m),m&&(S||b===n))return he(m);if(!m||!(b=u1(b)))return m;var re=ky(m),Te=ky(b),Ve=Pa(re,Te),jt=Qo(re,Te)+1;return Q_(re,Ve,jt).join("")}function tS(m,b,S){if(m=Vg(m),m&&(S||b===n))return m.slice(0,Uv(m)+1);if(!m||!(b=u1(b)))return m;var re=ky(m),Te=Qo(re,ky(b))+1;return Q_(re,0,Te).join("")}function nS(m,b,S){if(m=Vg(m),m&&(S||b===n))return m.replace(Y0,"");if(!m||!(b=u1(b)))return m;var re=ky(m),Te=Pa(re,ky(b));return Q_(re,Te).join("")}function rS(m,b){var S=$t,re=Sn;if(m1(b)){var Te="separator"in b?b.separator:Te;S="length"in b?gg(b.length):S,re="omission"in b?u1(b.omission):re}m=Vg(m);var Ve=m.length;if(Kr(m)){var jt=ky(m);Ve=jt.length}if(S>=Ve)return m;var vn=S-W2(re);if(vn<1)return re;var rr=jt?Q_(jt,0,vn).join(""):m.slice(0,vn);if(Te===n)return rr+re;if(jt&&(vn+=rr.length-vn),F$(Te)){if(m.slice(vn).search(Te)){var Bo,zo=rr;for(Te.global||(Te=Wb(Te.source,Vg(By.exec(Te))+"g")),Te.lastIndex=0;Bo=Te.exec(zo);)var fh=Bo.index;rr=rr.slice(0,fh===n?vn:fh)}}else if(m.indexOf(u1(Te),vn)!=vn){var d0=rr.lastIndexOf(Te);d0>-1&&(rr=rr.slice(0,d0))}return rr+re}function iS(m){return m=Vg(m),m&&b0.test(m)?m.replace(Ra,rT):m}var aS=J_(function(m,b,S){return m+(S?" ":"")+b.toUpperCase()}),U$=v3("toUpperCase");function d4(m,b,S){return m=Vg(m),b=S?n:b,b===n?q0(m)?c$(m):Fv(m):m.match(b)||[]}var c4=X0(function(m,b){try{return M1(m,n,b)}catch(S){return M$(S)?S:new W0(S)}}),sS=j_(function(m,b){return p1(b,function(S){S=__(S),P_(m,S,Xo(m[S],m))}),m});function oS(m){var b=m==null?0:m.length,S=C0();return m=b?Fg(m,function(re){if(typeof re[1]!="function")throw new Yy(l);return[S(re[0]),re[1]]}):[],X0(function(re){for(var Te=-1;++Te<b;){var Ve=m[Te];if(M1(Ve[0],this,re))return M1(Ve[1],this,re)}})}function lS(m){return yT($y(m,d))}function B$(m){return function(){return m}}function uS(m,b){return m==null||m!==m?b:m}var dS=tw(),cS=tw(!0);function a_(m){return m}function z$(m){return fv(typeof m=="function"?m:$y(m,d))}function fS(m){return Ow($y(m,d))}function pS(m,b){return g_(m,$y(b,d))}var hS=X0(function(m,b){return function(S){return v2(S,m,b)}}),mS=X0(function(m,b){return function(S){return v2(m,S,b)}});function W$(m,b,S){var re=ly(b),Te=py(b,re);S==null&&!(m1(b)&&(Te.length||!re.length))&&(S=b,b=m,m=this,Te=py(b,ly(b)));var Ve=!(m1(S)&&"chain"in S)||!!S.chain,jt=sw(m);return p1(Te,function(vn){var rr=b[vn];m[vn]=rr,jt&&(m.prototype[vn]=function(){var Bo=this.__chain__;if(Ve||Bo){var zo=m(this.__wrapped__),fh=zo.__actions__=hy(this.__actions__);return fh.push({func:rr,args:arguments,thisArg:m}),zo.__chain__=Bo,zo}return rr.apply(m,S1([this.value()],arguments))})}),m}function gS(){return Lg._===this&&(Lg._=sT),this}function V$(){}function yS(m){return m=gg(m),X0(function(b){return $2(b,m)})}var _S=xx(Fg),wS=xx(Yw),bS=xx(U2);function f4(m){return C3(m)?hw(__(m)):c3(m)}function vS(m){return function(b){return m==null?n:Py(m,b)}}var xS=x3(),TS=x3(!0);function Z$(){return[]}function q$(){return!1}function $S(){return{}}function ES(){return""}function SS(){return!0}function AS(m,b){if(m=gg(m),m<1||m>ze)return[];var S=Be,re=X1(m,Be);b=C0(b),m-=Be;for(var Te=A(re,b);++S<m;)b(S);return Te}function IS(m){return Q0(m)?Fg(m,__):b_(m)?[m]:hy(zT(Vg(m)))}function CS(m){var b=++ww;return Vg(m)+b}var OS=vx(function(m,b){return m+b},0),kS=iy("ceil"),RS=vx(function(m,b){return m/b},1),NS=iy("floor");function PS(m){return m&&m.length?X2(m,a_,h_):n}function DS(m,b){return m&&m.length?X2(m,C0(b,2),h_):n}function MS(m){return Jw(m,a_)}function FS(m,b){return Jw(m,C0(b,2))}function jS(m){return m&&m.length?X2(m,a_,x2):n}function LS(m,b){return m&&m.length?X2(m,C0(b,2),x2):n}var US=vx(function(m,b){return m*b},1),BS=iy("round"),zS=vx(function(m,b){return m-b},0);function WS(m){return m&&m.length?gw(m,a_):0}function VS(m,b){return m&&m.length?gw(m,C0(b,2)):0}return je.after=Ke,je.ary=_n,je.assign=J4,je.assignIn=r4,je.assignInWith=s$,je.assignWith=eE,je.at=tE,je.before=Yr,je.bind=Xo,je.bindAll=sS,je.bindKey=e0,je.castArray=T4,je.chain=jy,je.chunk=v$,je.compact=Ox,je.concat=P3,je.cond=oS,je.conforms=lS,je.constant=B$,je.countBy=k$,je.create=nE,je.curry=Go,je.curryRight=f0,je.debounce=w0,je.defaults=rE,je.defaultsDeep=iE,je.defer=x0,je.delay=h1,je.difference=n_,je.differenceBy=Og,je.differenceWith=F1,je.drop=v1,je.dropRight=z1,je.dropRightWhile=Fy,je.dropWhile=zw,je.fill=k1,je.filter=t$,je.flatMap=n$,je.flatMapDeep=H3,je.flatMapDepth=R$,je.flatten=Av,je.flattenDeep=D3,je.flattenDepth=Iv,je.flip=or,je.flow=dS,je.flowRight=cS,je.fromPairs=Ey,je.functions=cE,je.functionsIn=fE,je.groupBy=Wx,je.initial=n2,je.intersection=Rx,je.intersectionBy=M3,je.intersectionWith=C2,je.invert=hE,je.invertBy=mE,je.invokeMap=Vx,je.iteratee=z$,je.keyBy=r$,je.keys=ly,je.keysIn=i_,je.map=Zx,je.mapKeys=yE,je.mapValues=_E,je.matches=fS,je.matchesProperty=pS,je.memoize=Tn,je.merge=wE,je.mergeWith=i4,je.method=hS,je.methodOf=mS,je.mixin=W$,je.negate=Ir,je.nthArg=yS,je.omit=bE,je.omitBy=vE,je.once=r0,je.orderBy=qx,je.over=_S,je.overArgs=T0,je.overEvery=wS,je.overSome=bS,je.partial=O0,je.partialRight=R0,je.partition=N$,je.pick=xE,je.pickBy=a4,je.property=f4,je.propertyOf=vS,je.pull=F3,je.pullAll=Ov,je.pullAllBy=Dx,je.pullAllWith=gy,je.pullAt=O2,je.range=xS,je.rangeRight=TS,je.rearg=L0,je.reject=Gx,je.remove=w_,je.rest=j1,je.reverse=oy,je.sampleSize=h,je.set=$E,je.setWith=EE,je.shuffle=v,je.slice=VT,je.sortBy=te,je.sortedUniq=nw,je.sortedUniqBy=B3,je.split=HE,je.spread=Pg,je.tail=rw,je.take=qT,je.takeRight=HT,je.takeRightWhile=z3,je.takeWhile=Mx,je.tap=V3,je.throttle=P2,je.thru=Fx,je.toArray=e4,je.toPairs=s4,je.toPairsIn=o4,je.toPath=IS,je.toPlainObject=n4,je.transform=SE,je.unary=D$,je.union=T$,je.unionBy=$$,je.unionWith=YT,je.uniq=KT,je.uniqBy=iw,je.uniqWith=E$,je.unset=AE,je.unzip=R2,je.unzipWith=W3,je.update=IE,je.updateWith=CE,je.values=Yx,je.valuesIn=OE,je.without=d1,je.words=d4,je.wrap=x4,je.xor=S$,je.xorBy=XT,je.xorWith=A$,je.zip=I$,je.zipObject=QT,je.zipObjectDeep=JT,je.zipWith=C$,je.entries=s4,je.entriesIn=o4,je.extend=r4,je.extendWith=s$,W$(je,je),je.add=OS,je.attempt=c4,je.camelCase=PE,je.capitalize=l4,je.ceil=kS,je.clamp=kE,je.clone=$4,je.cloneDeep=S4,je.cloneDeepWith=I4,je.cloneWith=E4,je.conformsTo=C4,je.deburr=u4,je.defaultTo=uS,je.divide=RS,je.endsWith=DE,je.eq=r2,je.escape=ME,je.escapeRegExp=FE,je.every=e$,je.find=Ux,je.findIndex=Ww,je.findKey=aE,je.findLast=Bx,je.findLastIndex=I2,je.findLastKey=sE,je.floor=NS,je.forEach=Y3,je.forEachRight=zx,je.forIn=oE,je.forInRight=lE,je.forOwn=uE,je.forOwnRight=dE,je.get=j$,je.gt=O4,je.gte=k4,je.has=pE,je.hasIn=L$,je.head=kx,je.identity=a_,je.includes=K3,je.indexOf=Vw,je.inRange=RE,je.invoke=gE,je.isArguments=Rv,je.isArray=Q0,je.isArrayBuffer=R4,je.isArrayLike=r_,je.isArrayLikeObject=N1,je.isBoolean=N4,je.isBuffer=Zw,je.isDate=P4,je.isElement=D4,je.isEmpty=M4,je.isEqual=F4,je.isEqualWith=j4,je.isError=M$,je.isFinite=L4,je.isFunction=sw,je.isInteger=K$,je.isLength=i$,je.isMap=X$,je.isMatch=U4,je.isMatchWith=B4,je.isNaN=z4,je.isNative=W4,je.isNil=Z4,je.isNull=V4,je.isNumber=Q$,je.isObject=m1,je.isObjectLike=x1,je.isPlainObject=X3,je.isRegExp=F$,je.isSafeInteger=q4,je.isSet=J$,je.isString=a$,je.isSymbol=b_,je.isTypedArray=Hx,je.isUndefined=G4,je.isWeakMap=H4,je.isWeakSet=Y4,je.join=Nx,je.kebabCase=jE,je.last=R1,je.lastIndexOf=Px,je.lowerCase=LE,je.lowerFirst=UE,je.lt=K4,je.lte=X4,je.max=PS,je.maxBy=DS,je.mean=MS,je.meanBy=FS,je.min=jS,je.minBy=LS,je.stubArray=Z$,je.stubFalse=q$,je.stubObject=$S,je.stubString=ES,je.stubTrue=SS,je.multiply=US,je.nth=Cv,je.noConflict=gS,je.noop=V$,je.now=Se,je.pad=BE,je.padEnd=zE,je.padStart=WE,je.parseInt=VE,je.random=NE,je.reduce=kv,je.reduceRight=P$,je.repeat=ZE,je.replace=qE,je.result=TE,je.round=BS,je.runInContext=In,je.sample=f,je.size=T,je.snakeCase=GE,je.some=D,je.sortedIndex=j3,je.sortedIndexBy=L3,je.sortedIndexOf=x$,je.sortedLastIndex=k2,je.sortedLastIndexBy=ZT,je.sortedLastIndexOf=U3,je.startCase=YE,je.startsWith=KE,je.subtract=zS,je.sum=WS,je.sumBy=VS,je.template=XE,je.times=AS,je.toFinite=ow,je.toInteger=gg,je.toLength=t4,je.toLower=QE,je.toNumber=U_,je.toSafeInteger=Q4,je.toString=Vg,je.toUpper=JE,je.trim=eS,je.trimEnd=tS,je.trimStart=nS,je.truncate=rS,je.unescape=iS,je.uniqueId=CS,je.upperCase=aS,je.upperFirst=U$,je.each=Y3,je.eachRight=zx,je.first=kx,W$(je,(function(){var m={};return Jy(je,function(b,S){Ng.call(je.prototype,S)||(m[S]=b)}),m})(),{chain:!1}),je.VERSION=i,p1(["bind","bindKey","curry","curryRight","partial","partialRight"],function(m){je[m].placeholder=je}),p1(["drop","take"],function(m,b){K0.prototype[m]=function(S){S=S===n?1:b1(gg(S),0);var re=this.__filtered__&&!b?new K0(this):this.clone();return re.__filtered__?re.__takeCount__=X1(S,re.__takeCount__):re.__views__.push({size:X1(S,Be),type:m+(re.__dir__<0?"Right":"")}),re},K0.prototype[m+"Right"]=function(S){return this.reverse()[m](S).reverse()}}),p1(["filter","map","takeWhile"],function(m,b){var S=b+1,re=S==jr||S==Ft;K0.prototype[m]=function(Te){var Ve=this.clone();return Ve.__iteratees__.push({iteratee:C0(Te,3),type:S}),Ve.__filtered__=Ve.__filtered__||re,Ve}}),p1(["head","last"],function(m,b){var S="take"+(b?"Right":"");K0.prototype[m]=function(){return this[S](1).value()[0]}}),p1(["initial","tail"],function(m,b){var S="drop"+(b?"":"Right");K0.prototype[m]=function(){return this.__filtered__?new K0(this):this[S](1)}}),K0.prototype.compact=function(){return this.filter(a_)},K0.prototype.find=function(m){return this.filter(m).head()},K0.prototype.findLast=function(m){return this.reverse().find(m)},K0.prototype.invokeMap=X0(function(m,b){return typeof m=="function"?new K0(this):this.map(function(S){return v2(S,m,b)})}),K0.prototype.reject=function(m){return this.filter(Ir(C0(m)))},K0.prototype.slice=function(m,b){m=gg(m);var S=this;return S.__filtered__&&(m>0||b<0)?new K0(S):(m<0?S=S.takeRight(-m):m&&(S=S.drop(m)),b!==n&&(b=gg(b),S=b<0?S.dropRight(-b):S.take(b-m)),S)},K0.prototype.takeRightWhile=function(m){return this.reverse().takeWhile(m).reverse()},K0.prototype.toArray=function(){return this.take(Be)},Jy(K0.prototype,function(m,b){var S=/^(?:filter|find|map|reject)|While$/.test(b),re=/^(?:head|last)$/.test(b),Te=je[re?"take"+(b=="last"?"Right":""):b],Ve=re||/^find/.test(b);Te&&(je.prototype[b]=function(){var jt=this.__wrapped__,vn=re?[1]:arguments,rr=jt instanceof K0,Bo=vn[0],zo=rr||Q0(jt),fh=function(Eg){var kg=Te.apply(je,S1([Eg],vn));return re&&d0?kg[0]:kg};zo&&S&&typeof Bo=="function"&&Bo.length!=1&&(rr=zo=!1);var d0=this.__chain__,$0=!!this.__actions__.length,D0=Ve&&!d0,yg=rr&&!$0;if(!Ve&&zo){jt=yg?jt:new K0(this);var M0=m.apply(jt,vn);return M0.__actions__.push({func:Fx,args:[fh],thisArg:n}),new Q1(M0,d0)}return D0&&yg?m.apply(this,vn):(M0=this.thru(fh),D0?re?M0.value()[0]:M0.value():M0)})}),p1(["pop","push","shift","sort","splice","unshift"],function(m){var b=q_[m],S=/^(?:push|sort|unshift)$/.test(m)?"tap":"thru",re=/^(?:pop|shift)$/.test(m);je.prototype[m]=function(){var Te=arguments;if(re&&!this.__chain__){var Ve=this.value();return b.apply(Q0(Ve)?Ve:[],Te)}return this[S](function(jt){return b.apply(Q0(jt)?jt:[],Te)})}}),Jy(K0.prototype,function(m,b){var S=je[b];if(S){var re=S.name+"";Ng.call(Tw,re)||(Tw[re]=[]),Tw[re].push({name:b,func:S})}}),Tw[Fw(n,Y).name]=[{name:"wrapper",func:n}],K0.prototype.clone=Xv,K0.prototype.reverse=t3,K0.prototype.value=Sw,je.prototype.at=N2,je.prototype.chain=jx,je.prototype.commit=aw,je.prototype.next=Lx,je.prototype.plant=q3,je.prototype.reverse=O$,je.prototype.toJSON=je.prototype.valueOf=je.prototype.value=G3,je.prototype.first=je.prototype.head,H_&&(je.prototype[H_]=Z3),je},c2=f$();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Lg._=c2,define(function(){return c2})):Oy?((Oy.exports=c2)._=c2,s2._=c2):Lg._=c2}).call(t)}}),import_lodash=__toESM(require_lodash());async function imageDecode(t){const e=MimeType.fromString(t.type);switch(e.type){case"image/x-alpha8":{const n=parseInt(e.params.width),i=parseInt(e.params.height);return ndarray4(new Uint8Array(await t.arrayBuffer()),[i,n,1])}case"image/x-rgba8":{const n=parseInt(e.params.width),i=parseInt(e.params.height);return ndarray4(new Uint8Array(await t.arrayBuffer()),[i,n,4])}case"application/octet-stream":case"image/png":case"image/jpeg":case"image/jpg":case"image/webp":{const n=await createImageBitmap(t),i=imageBitmapToImageData(n);return ndarray4(new Uint8Array(i.data),[i.height,i.width,4])}default:throw new Error(`Invalid format: ${e.type} with params: ${e.params}`)}}async function imageEncode(t,e=.8,n="image/png"){const[i,o,a]=t.shape;switch(n){case"image/x-alpha8":case"image/x-rgba8":{const p=MimeType.create(n,{width:o.toString(),height:i.toString()});return new Blob([t.data],{type:p.toString()})}case"image/png":case"image/jpeg":case"image/webp":{const p=new ImageData(new Uint8ClampedArray(t.data),o,i);var l=createCanvas(p.width,p.height),c=l.getContext("2d");return c.putImageData(p,0,0),l.convertToBlob({quality:e,type:n})}default:throw new Error(`Invalid format: ${n}`)}}var MimeType=class Y${constructor(e,n){this.type="application/octet-stream",this.params={},this.type=e,this.params=n}toString(){const e=[];for(const n in this.params){const i=this.params[n];e.push(`${n}=${i}`)}return[this.type,...e].join(";")}static create(e,n){return new Y$(e,n)}isIdentical(e){return this.type===e.type&&this.params===e.params}isEqual(e){return this.type===e.type}static fromString(e){const[n,...i]=e.split(";"),o={};for(const a of i){const[l,c]=a.split("=");o[l.trim()]=c.trim()}return new Y$(n,o)}};function isAbsoluteURI(t){return new RegExp("^(?:[a-z+]+:)?//","i").test(t)}function ensureAbsoluteURI(t,e){return isAbsoluteURI(t)?t:new URL(t,e).href}function imageBitmapToImageData(t){var e=createCanvas(t.width,t.height),n=e.getContext("2d");return n.drawImage(t,0,0),n.getImageData(0,0,e.width,e.height)}function createTypeArray(t){if(typeof Uint8Array<"u")return new Uint8Array(t);if(typeof Uint8ClampedArray<"u")return new Uint8ClampedArray(t);if(typeof Uint16Array<"u")return new Uint16Array(t);if(typeof Uint32Array<"u")return new Uint32Array(t);if(typeof Float32Array<"u")return new Float32Array(t);if(typeof Float64Array<"u")return new Float64Array(t);throw new Error("TypedArray not supported")}function tensorResizeBilinear(t,e,n,i=!1){const[o,a,l]=t.shape;let c=a/e,p=o/n;i&&(c=p=Math.max(c,p)>1?Math.max(c,p):Math.min(c,p));const s=ndarray4(createTypeArray(l*e*n),[n,e,l]);for(let u=0;u<n;u++)for(let d=0;d<e;d++){const g=d*c,w=u*p,x=Math.max(Math.floor(g),0),C=Math.min(Math.ceil(g),a-1),O=Math.max(Math.floor(w),0),Y=Math.min(Math.ceil(w),o-1),q=g-x,ue=w-O;for(let pe=0;pe<l;pe++){const se=t.get(O,x,pe),Re=t.get(O,C,pe),Oe=t.get(Y,x,pe),Ce=t.get(Y,C,pe),He=(1-q)*(1-ue)*se+q*(1-ue)*Re+(1-q)*ue*Oe+q*ue*Ce;s.set(u,d,pe,He)}}return s}function tensorHWCtoBCHW(t,e=[128,128,128],n=[256,256,256]){var i=t.data;const[o,a,l]=t.shape,c=o*a,p=new Float32Array(3*c);for(let s=0,u=0;s<i.length;s+=4,u+=1)p[u]=(i[s]-e[0])/n[0],p[u+c]=(i[s+1]-e[1])/n[1],p[u+c+c]=(i[s+2]-e[2])/n[2];return ndarray4(p,[1,3,o,a])}async function imageSourceToImageData(t,e){return typeof t=="string"&&(t=ensureAbsoluteURI(t,e.publicPath),t=new URL(t)),t instanceof URL&&(t=await(await fetch(t,{})).blob()),(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t=new Blob([t])),t instanceof Blob&&(t=await imageDecode(t)),t}function convertFloat32ToUint8(t){const e=new Uint8Array(t.data.length);for(let n=0;n<t.data.length;n++)e[n]=t.data[n]*255;return ndarray4(e,t.shape)}function createCanvas(t,e){let n;if(typeof OffscreenCanvas<"u"?n=new OffscreenCanvas(t,e):n=document.createElement("canvas"),!n)throw new Error("Canvas nor OffscreenCanvas are available in the current context.");return n}async function loadAsUrl(t,e){return URL.createObjectURL(await loadAsBlob(t,e))}async function loadAsBlob(t,e){const n=new URL("resources.json",e.publicPath),i=await fetch(n);if(!i.ok)throw new Error("Resource metadata not found. Ensure that the config.publicPath is configured correctly.");const a=(await i.json())[t];if(!a)throw new Error(`Resource ${t} not found. Ensure that the config.publicPath is configured correctly.`);const l=a.chunks;let c=0;const p=l.map(async d=>{const g=d.offsets[1]-d.offsets[0],w=e.publicPath?new URL(d.hash,e.publicPath).toString():d.hash,C=await(await fetch(w,e.fetchArgs)).blob();if(g!==C.size)throw new Error(`Failed to fetch ${t} with size ${g} but got ${C.size}`);return e.progress&&(c+=g,e.progress(`fetch:${t}`,c,a.size)),C}),s=await Promise.all(p),u=new Blob(s,{type:a.mime});if(u.size!==a.size)throw new Error(`Failed to fetch ${t} with size ${a.size} but got ${u.size}`);return u}var simd=()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),threads=()=>(async t=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(t)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),webgpu=()=>navigator.gpu!==void 0,maxNumThreads=()=>navigator.hardwareConcurrency??4;async function createOnnxSession(t,e){const n=e.device==="gpu",i=await threads(),o=simd(),a=e.proxyToWorker,l=[n?"webgpu":"wasm"],c=n?ort_gpu:ort_cpu;e.debug&&(console.debug("	Using Threads:",i),console.debug("	Using SIMD:",o),console.debug("	Using WebGPU:",n),console.debug("	Proxy to Worker:",a),c.env.debug=!0,c.env.logLevel="verbose"),c.env.wasm.numThreads=maxNumThreads(),c.env.wasm.simd=simd(),c.env.wasm.proxy=a;const p={"ort-wasm-simd-threaded.wasm":i&&o,"ort-wasm-simd.wasm":!i&&o,"ort-wasm-threaded.wasm":!n&&i&&!o,"ort-wasm.wasm":!n&&!i&&!o},s={};for(const[g,w]of Object.entries(p))if(w){const x=n&&g.includes("simd")?`/onnxruntime-web/${g.replace(".wasm",".jsep.wasm")}`:`/onnxruntime-web/${g}`;s[g]=await loadAsUrl(x,e)}c.env.wasm.wasmPaths=s,e.debug&&console.debug("ort.env.wasm:",c.env.wasm);const u={executionProviders:l,graphOptimizationLevel:"all",executionMode:"parallel",enableCpuMemArena:!0};return await c.InferenceSession.create(t,u).catch(g=>{throw new Error(`Failed to create session: "${g}". Please check if the publicPath is set correctly.`)})}async function runOnnxSession(t,e,n,i){const a=i.device==="gpu"?ort_gpu:ort_cpu,l={};for(const[s,u]of e)l[s]=new a.Tensor("float32",new Float32Array(u.data),u.shape);const c=await t.run(l,{}),p=[];for(const s of n){const u=c[s],d=u.dims,g=u.data,w=ndarray4(g,d);p.push(w)}return p}var package_default={name:"@imgly/background-removal",version:"1.5.3"},ConfigSchema=z.object({publicPath:z.string().optional().describe("The public path to the wasm files and the onnx model.").default("https://staticimgly.com/@imgly/background-removal-data/${PACKAGE_VERSION}/dist/").transform(t=>t.replace("${PACKAGE_NAME}",package_default.name).replace("${PACKAGE_VERSION}",package_default.version)),debug:z.boolean().default(!1).describe("Whether to enable debug logging."),rescale:z.boolean().default(!0).describe("Whether to rescale the image."),device:z.enum(["cpu","gpu"]).default("cpu").describe("The device to run the model on."),proxyToWorker:z.boolean().default(!0).describe("Whether to proxy inference to a web worker."),fetchArgs:z.any().default({}).describe("Arguments to pass to fetch when loading the model."),progress:z.function().args(z.string(),z.number(),z.number()).returns(z.void()).describe("Progress callback.").optional(),model:z.preprocess(t=>{switch(t){case"large":return"isnet";case"small":return"isnet_quint8";case"medium":return"isnet_fp16";default:return t}},z.enum(["isnet","isnet_fp16","isnet_quint8"])).default("medium"),output:z.object({format:z.enum(["image/png","image/jpeg","image/webp","image/x-rgba8","image/x-alpha8"]).default("image/png"),quality:z.number().default(.8)}).default({})}).default({}).transform(t=>(t.debug&&console.log("Config:",t),t.debug&&!t.progress&&(t.progress=t.progress??((e,n,i)=>{console.debug(`Downloading ${e}: ${n} of ${i}`)}),crossOriginIsolated||t.debug&&console.debug("Cross-Origin-Isolated is not enabled. Performance will be degraded. Please see  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer.")),t.device=="gpu"&&(webgpu()||(t.debug&&console.debug("Switching to CPU for GPU not supported."),t.device="cpu")),t));function validateConfig(t){return ConfigSchema.parse(t??{})}async function initBase(t){t.debug&&console.debug("Loading model...",t.model);const e=t.model,i=await(await loadAsBlob(`/models/${e}`,t)).arrayBuffer();return await createOnnxSession(i,t)}async function initInference(t){t=validateConfig(t);const e=await initBase(t);return{config:t,session:{base:e}}}async function runInference(t,e,n){const[o,a,l]=t.shape,c=!1;let p=tensorResizeBilinear(t,1024,1024,c);const s=tensorHWCtoBCHW(p);let u=await runOnnxSession(n.base,[["input",s]],["output"],e),d=ndarray4(u[0].data,[1024,1024,1]),g=convertFloat32ToUint8(d);return e.rescale?(g=tensorResizeBilinear(g,a,o,c),[g,t]):[g,p]}var init=(0,import_lodash.memoize)(initInference,t=>JSON.stringify(t));async function removeBackground(t,e){const{config:n,session:i}=await init(e);n.progress&&n.progress("compute:decode",0,4);const o=await imageSourceToImageData(t,n);n.progress?.("compute:inference",1,4);const[a,l]=await runInference(o,n,i);n.progress?.("compute:mask",2,4);const c=l,[p,s]=c.shape,u=p*s;for(let g=0;g<u;g+=1)c.data[4*g+3]=a.data[g];n.progress?.("compute:encode",3,4);const d=await imageEncode(c,n.output.quality,n.output.format);return n.progress?.("compute:encode",4,4),d}/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/const useRemoveBackground=()=>{const t=useIsMobile(),[e,n]=reactExports.useState(!1),[i,o]=reactExports.useState(null),[a,l]=reactExports.useState(null),c="isnet";return{removeBackground:async({file:s,output:u="no-bg",download:d=!1})=>{try{l("Started."),n(!0);const g=await removeBackground(s,{model:c,device:t?"cpu":"gpu",progress:(C,O,Y)=>{l(`Downloading ${C}: ${O} of ${Y}`)}}),w=URL.createObjectURL(g);n(!1),l("Finished.");const x=`${u}-${randomUUID()}.png`;if(d){const C=document.createElement("a");C.href=w,C.download=x,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(C.href)}return{name:x,url:w}}catch(g){o(g),n(!1)}},progress:a,isLoading:e,error:i}},ImageViewer=({src:t,alt:e,download:n})=>{const[i,o]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:"avatar",children:[jsxRuntimeExports.jsx("div",{className:"w-24 rounded-xl",onClick:()=>o(!0),children:jsxRuntimeExports.jsx("img",{src:t,alt:e})}),jsxRuntimeExports.jsx(Modal,{title:"Image",visible:i,onClose:()=>o(!1),children:jsxRuntimeExports.jsxs("div",{className:"flex justify-center card bg-base-100 w-96 shadow-xl",children:[jsxRuntimeExports.jsx("figure",{children:jsxRuntimeExports.jsx("img",{src:t,alt:e})}),jsxRuntimeExports.jsx("a",{href:t,className:"btn btn-dark",download:n,children:"Download"})]})})]})},ActionRow=({file:t,index:e,result:n})=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{scope:"row",children:e+1}),jsxRuntimeExports.jsx("td",{children:t.name}),jsxRuntimeExports.jsxs("td",{children:[n&&jsxRuntimeExports.jsx("a",{href:n.url,className:"btn btn-dark",download:n.download,children:"Download"}),!n&&jsxRuntimeExports.jsx(Loading,{})]}),jsxRuntimeExports.jsxs("td",{children:[n&&jsxRuntimeExports.jsx(ImageViewer,{download:n.download,src:n.url,alt:t.name}),!n&&jsxRuntimeExports.jsx(Loading,{})]})]},t.name),RemoveBackground=()=>{const{removeBackground:t,isLoading:e,progress:n}=useRemoveBackground(),[i,o]=reactExports.useState(null),[a,l]=reactExports.useState(null),[c,p]=reactExports.useState([]),s=async d=>{if(d){o(d);for(const g of d){const w=await t({file:g});if(!w)return;p(x=>[...x,{fileName:g.name,download:w.name,url:w.url}])}}},u=async d=>{const g=d.clipboardData?.items;if(g){for(const w of g)if(w.kind==="file"){const x=w.getAsFile();if(x){const C=await t({file:x});if(!C)return;l({fileName:x.name,download:C.name,url:C.url})}}}};return jsxRuntimeExports.jsx(Page,{className:"table",onPaste:u,name:"Remove Background",description:"Select a file or paste it",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row",children:[n&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx("span",{children:n})}),e&&jsxRuntimeExports.jsx(Loading,{}),jsxRuntimeExports.jsx(FilePicker,{onFileChange:s}),jsxRuntimeExports.jsx("div",{className:"container",style:{display:"flex",marginTop:"1rem"},children:jsxRuntimeExports.jsxs("table",{className:"table table-light relative overflow-x-auto",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{scope:"col",children:"#"}),jsxRuntimeExports.jsx("th",{scope:"col",children:"File Name"}),jsxRuntimeExports.jsx("th",{scope:"col",children:"Actions"}),jsxRuntimeExports.jsx("th",{scope:"col",children:"Preview"})]})}),jsxRuntimeExports.jsxs("tbody",{children:[a&&jsxRuntimeExports.jsx(ActionRow,{index:1,file:new File([],a.fileName),result:a}),i&&Array.from(i).map((d,g)=>{const w=c.find(x=>x.fileName===d.name);return jsxRuntimeExports.jsx(ActionRow,{file:d,index:g,result:w},d.name)})]})]})})]})})},MIN_DISTANCE=25,addImageToCanvas=(t,e,n,i)=>{const o=new Image;o.src=`images/${i}.png`,t.drawImage(o,e,n,30,30)},drawRock=(t,e,n)=>{t.fillStyle="red",addImageToCanvas(t,e,n,"rock")},drawScissors=(t,e,n)=>{t.save(),t.translate(e+15,n+15),t.rotate(Math.PI),t.translate(-15,-15),addImageToCanvas(t,-15,-15,"scissors"),t.restore()},drawPaper=(t,e,n)=>{t.fillStyle="green",addImageToCanvas(t,e,n,"paper")},itsA=(t,{type:e})=>e===t,countFor=(t,e)=>e.filter(n=>itsA(t,n)).length,calculateWinner=t=>{const e=countFor("rock",t),n=countFor("paper",t),i=countFor("scissors",t);return e>n&&e>i?"Rock":n>e&&n>i?"Paper":i>e&&i>n?"Scissors":"Tie"},CanvasGame=()=>{const t=useIsMobile(),e=reactExports.useRef(null),n=reactExports.useRef(null),i=reactExports.useRef([]),[o,a]=reactExports.useState(10),[l,c]=reactExports.useState(10),[p,s]=reactExports.useState(l),[u,d]=reactExports.useState(o),[g,w]=reactExports.useState(o),[x,C]=reactExports.useState(o),[O,Y]=reactExports.useState(null),[q,ue]=reactExports.useState(!1),pe=Re=>{const Oe=n.current;if(!Oe)return[];const Ce=Oe.width,He=Oe.height,$t=[];for(let Sn=0;Sn<o;Sn++){const xn={x:Math.random()*Ce,y:Math.random()*He,dx:Math.random()*4-2,dy:Math.random()*4-2,type:Re};Re==="rock"?(xn.x=Ce*.1,xn.y=He*.1):Re==="paper"?(xn.x=Ce*.9,xn.y=He*.1):Re==="scissors"&&(xn.x=Ce*.9,xn.y=He*.9),$t.push(xn)}return $t},se=()=>{i.current=[...pe("rock"),...pe("paper"),...pe("scissors")],d(o),w(o),C(o),s(l),Y(null),ue(!0)};return reactExports.useEffect(()=>{const Re=n.current;if(!Re)return;const Oe=Re.getContext("2d");if(!Oe)return;const Ce=Re.width,He=Re.height;if(!q)return;const $t=()=>{Oe.clearRect(0,0,Ce,He);const et=i.current.map(Ht=>(Ht.x+=Ht.dx,Ht.y+=Ht.dy,(Ht.x+10>Ce||Ht.x-10<0)&&(Ht.dx*=-1),(Ht.y+10>He||Ht.y-10<0)&&(Ht.dy*=-1),Ht)).filter(Ht=>{let Ae=!0;return i.current.forEach(Be=>{if(Ht!==Be){const tr=Math.abs(Ht.x-Be.x),No=Math.abs(Ht.y-Be.y);tr<MIN_DISTANCE&&No<MIN_DISTANCE&&(itsA("rock",Ht)&&itsA("paper",Be)||itsA("scissors",Ht)&&itsA("rock",Be)||itsA("paper",Ht)&&itsA("scissors",Be))&&(Ae=!1,e.current?.play())}}),Ae}),Ft=countFor("rock",et),Tt=countFor("paper",et),ze=countFor("scissors",et);d(Ft),w(Tt),C(ze),Ft===0&&Tt===0?Y("Scissors"):Ft===0&&ze===0?Y("Paper"):Tt===0&&ze===0&&Y("Rock"),i.current=et,et.forEach(Ht=>{Ht.type==="paper"?drawPaper(Oe,Ht.x,Ht.y):Ht.type==="rock"?drawRock(Oe,Ht.x,Ht.y):drawScissors(Oe,Ht.x,Ht.y)})};let Sn,xn=null;const Lr=jr=>{xn||(xn=jr);const et=(jr-xn)/1e3,Ft=l-et;if(s(Math.max(Ft,0).toFixed(2)),O){window.cancelAnimationFrame(Sn);return}if(Ft<=0){cancelAnimationFrame(Sn),ue(!1),Y(calculateWinner(i.current));return}$t(),Sn=requestAnimationFrame(Lr)};return Sn=requestAnimationFrame(Lr),()=>{window.cancelAnimationFrame(Sn)}},[q,O]),jsxRuntimeExports.jsxs(Page,{name:"Canvas Game (Rock, Paper, Scissors)",children:[jsxRuntimeExports.jsx("audio",{src:"/sounds/impact.mp3",ref:e,style:{display:"none"}}),jsxRuntimeExports.jsx("div",{className:"container mx-auto text-center my-10",children:jsxRuntimeExports.jsxs("ul",{className:"list-none space-y-4",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("label",{className:"inline-block text-sm mr-2",children:"Run For (s)"}),jsxRuntimeExports.jsx("input",{type:"number",disabled:q,value:l,onChange:Re=>{const Oe=parseInt(Re.target.value);c(Oe),s(Oe)},className:"grow input input-sm",placeholder:"Daisy"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"inline-block text-sm mr-2",children:"Number of Elements"}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-2",children:jsxRuntimeExports.jsx("input",{disabled:q,min:10,step:"0",max:"50",type:"range",value:o,className:"range input-sm",onChange:Re=>{const Oe=parseInt(Re.target.value);a(Oe),d(Oe),w(Oe),C(Oe)}})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col-reverse md:flex-row md:items-center",children:[jsxRuntimeExports.jsx("div",{className:"justify-self-end w-52 md:w-full",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("table",{className:"table",children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"text-right",children:"Rock Count"}),jsxRuntimeExports.jsx("td",{children:u})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"text-right",children:"Paper Count"}),jsxRuntimeExports.jsx("td",{children:g})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"text-right",children:"Scissors Count"}),jsxRuntimeExports.jsx("td",{children:x})]})]})}),O&&jsxRuntimeExports.jsxs("div",{children:["Winner: ",O]}),jsxRuntimeExports.jsx("button",{className:"btn btn-primary mt-4",onClick:se,children:"Reset Game"})]})}),jsxRuntimeExports.jsx("div",{className:"justify-self-start w-full md:w-1/2",children:jsxRuntimeExports.jsx("canvas",{ref:n,width:t?"auto":600,height:t?"auto":400,style:{objectFit:"contain"},className:"mx-auto block border border-black rounded-lg bg-white"})})]}),jsxRuntimeExports.jsx("div",{className:"flex mt-4",children:jsxRuntimeExports.jsxs("h3",{children:["Remaining Time: ",p]})}),jsxRuntimeExports.jsx("div",{className:"text-center p-10",children:jsxRuntimeExports.jsx("a",{className:"underline",target:"blank",href:"https://www.instagram.com/p/C48bvLiIXM0/",children:"Based on this"})})]})},resume=new Map;reverseRange(2008,2024).map(t=>{resume.set(t,{experiences:[{year:t,title:"Software Engineer",description:`Developed software for the company.
Developed software for the company.
Developed software for the company.
Developed software for the company.`}],education:[{year:t,title:"Computer Science",description:"Learned computer science."}]})});const Bullet=()=>jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-5 w-5",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})}),Resume=()=>jsxRuntimeExports.jsx(Page,{name:"About Me (Under construction)",children:jsxRuntimeExports.jsx(Toggle,{title:"Show progress so far",children:jsxRuntimeExports.jsx("ul",{className:"timeline timeline-snap-icon max-md:timeline-compact timeline-vertical",children:Array.from(resume).map(([t,e],n)=>{const i=n%2===0?"timeline-start md:text-end":"timeline-end";return e.experiences.map((o,a)=>jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("div",{className:"timeline-middle",children:jsxRuntimeExports.jsx(Bullet,{})}),jsxRuntimeExports.jsxs("div",{className:`${i} mb-10`,children:[jsxRuntimeExports.jsx("time",{className:"font-mono",children:t}),jsxRuntimeExports.jsx("div",{className:"text-lg font-black",children:o.title}),o.description]}),jsxRuntimeExports.jsx("hr",{})]},a))})})})}),appRoutes=[{label:"Home",link:"/"},{label:"About",link:"/about"},{label:"Blog",link:"/blog"}],Navbar=()=>{const t=window.screen.width,e=useIsMobile(),[n,i]=reactExports.useState(!e&&t>1024);return jsxRuntimeExports.jsxs("nav",{id:"header",className:"sticky w-full z-30 top-0 text-white bg-black",children:[jsxRuntimeExports.jsxs("div",{className:"w-full container mx-auto flex flex-wrap items-center justify-between mt-0 py-2 md:px-0 pl-6",children:[jsxRuntimeExports.jsx("div",{className:"items-center",children:jsxRuntimeExports.jsx(Link,{className:"text-white no-underline hover:no-underline font-bold text-1xl",to:"/",children:e?"~/":"emerson.run"})}),jsxRuntimeExports.jsx("div",{className:"block lg:hidden pr-4",children:jsxRuntimeExports.jsx("button",{type:"button",id:"nav-toggle",onClick:()=>i(!n),className:"flex items-center p-1 text-gray-800 hover:text-gray-900 focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out",children:jsxRuntimeExports.jsxs("svg",{className:"fill-current h-6 w-6",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{background:"#fff"},children:[jsxRuntimeExports.jsx("title",{children:"Menu"}),jsxRuntimeExports.jsx("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),jsxRuntimeExports.jsx("div",{style:{height:e?"auto":80},className:"w-full flex-grow lg:flex lg:items-center lg:w-auto  mt-2 lg:mt-0 lg:bg-transparent text-black p-4 lg:p-0 z-20"+(n?" block":" hidden"),id:"nav-content",children:jsxRuntimeExports.jsx("ul",{className:"list-reset lg:flex justify-end flex-1 items-center",children:appRoutes.map((o,a)=>jsxRuntimeExports.jsx("li",{className:"mr-3",children:jsxRuntimeExports.jsx(Link,{to:o.link,className:"inline-block text-white no-underline hover:text-white-800 hover:text-underline py-2 px-4",onClick:()=>i(!1),children:o.label})},a))})})]}),jsxRuntimeExports.jsx("hr",{className:"border-b border-gray-100 opacity-25 my-0 py-0"})]})},API_KEY="44c00948576d44c58db175549221303",BASE_URL="https://api.weatherapi.com/v1/current.json",DEFAULT_PLACE="Florianópolis, Santa Catarina, Brazil",CACHE_KEY="weather-app-cache",fetchJson=async(t,e)=>{try{return await fetch(t,e).then(n=>n.json())}catch(n){return{error:n}}},getSearchString=t=>`${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(t||DEFAULT_PLACE)}&aqi=yes`,fetchWeather=async t=>{const e=getSearchString(t);return await fetchJson(e,{method:"GET",headers:{"Content-Type":"application/json"}})},useWeather=t=>{const[e,n]=reactExports.useState(!0),[i,o]=reactExports.useState(null),[a,l]=reactExports.useState(null),{get:c,set:p,createItemKey:s}=useCache(CACHE_KEY),u=async(d,g)=>{if(n(!0),!g){const w=s(d,new Date().getTime()),x=c(w);if(x){const C={...x,source:"cache"};o(C),n(!1);return}}fetchWeather(d).then(w=>{if(!w.error){o({...w,source:"api"});const x=s(d,new Date().getTime());p(x,w)}n(!1)}).catch(w=>{l(w),n(!1)})};return reactExports.useEffect(()=>{u(t,!1)},[t]),{data:i,isLoading:e,error:a,refetch:d=>u(d,!0)}};function toDate(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function constructFrom(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function addDays(t,e){const n=toDate(t);return isNaN(e)?constructFrom(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function addMonths(t,e){const n=toDate(t);if(isNaN(e))return constructFrom(t,NaN);if(!e)return n;const i=n.getDate(),o=constructFrom(t,n.getTime());o.setMonth(n.getMonth()+e+1,0);const a=o.getDate();return i>=a?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}const millisecondsInWeek=6048e5,millisecondsInDay=864e5;let defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfWeek(t,e){const n=getDefaultOptions(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=toDate(t),a=o.getDay(),l=(a<i?7:0)+a-i;return o.setDate(o.getDate()-l),o.setHours(0,0,0,0),o}function startOfISOWeek(t){return startOfWeek(t,{weekStartsOn:1})}function getISOWeekYear(t){const e=toDate(t),n=e.getFullYear(),i=constructFrom(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const o=startOfISOWeek(i),a=constructFrom(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const l=startOfISOWeek(a);return e.getTime()>=o.getTime()?n+1:e.getTime()>=l.getTime()?n:n-1}function startOfDay(t){const e=toDate(t);return e.setHours(0,0,0,0),e}function getTimezoneOffsetInMilliseconds(t){const e=toDate(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function differenceInCalendarDays(t,e){const n=startOfDay(t),i=startOfDay(e),o=+n-getTimezoneOffsetInMilliseconds(n),a=+i-getTimezoneOffsetInMilliseconds(i);return Math.round((o-a)/millisecondsInDay)}function startOfISOWeekYear(t){const e=getISOWeekYear(t),n=constructFrom(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),startOfISOWeek(n)}function addWeeks(t,e){const n=e*7;return addDays(t,n)}function addYears(t,e){return addMonths(t,e*12)}function max(t){let e;return t.forEach(function(n){const i=toDate(n);(e===void 0||e<i||isNaN(Number(i)))&&(e=i)}),e||new Date(NaN)}function min(t){let e;return t.forEach(n=>{const i=toDate(n);(!e||e>i||isNaN(+i))&&(e=i)}),e||new Date(NaN)}function isSameDay(t,e){const n=startOfDay(t),i=startOfDay(e);return+n==+i}function isDate(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function isValid$1(t){if(!isDate(t)&&typeof t!="number")return!1;const e=toDate(t);return!isNaN(Number(e))}function differenceInCalendarMonths(t,e){const n=toDate(t),i=toDate(e),o=n.getFullYear()-i.getFullYear(),a=n.getMonth()-i.getMonth();return o*12+a}function differenceInCalendarWeeks(t,e,n){const i=startOfWeek(t,n),o=startOfWeek(e,n),a=+i-getTimezoneOffsetInMilliseconds(i),l=+o-getTimezoneOffsetInMilliseconds(o);return Math.round((a-l)/millisecondsInWeek)}function endOfMonth(t){const e=toDate(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function startOfMonth(t){const e=toDate(t);return e.setDate(1),e.setHours(0,0,0,0),e}function startOfYear(t){const e=toDate(t),n=constructFrom(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function endOfWeek(t,e){const n=getDefaultOptions(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=toDate(t),a=o.getDay(),l=(a<i?-7:0)+6-(a-i);return o.setDate(o.getDate()+l),o.setHours(23,59,59,999),o}function endOfISOWeek(t){return endOfWeek(t,{weekStartsOn:1})}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(t,e,n)=>{let i;const o=formatDistanceLocale[t];return typeof o=="string"?i=o:e===1?i=o.one:i=o.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function buildFormatLongFn(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(t,e,n,i)=>formatRelativeLocale[t];function buildLocalizeFn(t){return(e,n)=>{const i=n?.context?String(n.context):"standalone";let o;if(i==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,c=n?.width?String(n.width):l;o=t.formattingValues[c]||t.formattingValues[l]}else{const l=t.defaultWidth,c=n?.width?String(n.width):t.defaultWidth;o=t.values[c]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return o[a]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:t=>t-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(t){return(e,n={})=>{const i=n.width,o=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],a=e.match(o);if(!a)return null;const l=a[0],c=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(c)?findIndex(c,d=>d.test(l)):findKey(c,d=>d.test(l));let s;s=t.valueCallback?t.valueCallback(p):p,s=n.valueCallback?n.valueCallback(s):s;const u=e.slice(l.length);return{value:s,rest:u}}}function findKey(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function findIndex(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function buildMatchPatternFn(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const o=i[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const c=e.slice(o.length);return{value:l,rest:c}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:t=>parseInt(t,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:t=>t+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getDayOfYear(t){const e=toDate(t);return differenceInCalendarDays(e,startOfYear(e))+1}function getISOWeek(t){const e=toDate(t),n=+startOfISOWeek(e)-+startOfISOWeekYear(e);return Math.round(n/millisecondsInWeek)+1}function getWeekYear(t,e){const n=toDate(t),i=n.getFullYear(),o=getDefaultOptions(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=constructFrom(t,0);l.setFullYear(i+1,0,a),l.setHours(0,0,0,0);const c=startOfWeek(l,e),p=constructFrom(t,0);p.setFullYear(i,0,a),p.setHours(0,0,0,0);const s=startOfWeek(p,e);return n.getTime()>=c.getTime()?i+1:n.getTime()>=s.getTime()?i:i-1}function startOfWeekYear(t,e){const n=getDefaultOptions(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=getWeekYear(t,e),a=constructFrom(t,0);return a.setFullYear(o,0,i),a.setHours(0,0,0,0),startOfWeek(a,e)}function getWeek(t,e){const n=toDate(t),i=+startOfWeek(n,e)-+startOfWeekYear(n,e);return Math.round(i/millisecondsInWeek)+1}function addLeadingZeros(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const lightFormatters={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return addLeadingZeros(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):addLeadingZeros(n+1,2)},d(t,e){return addLeadingZeros(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return addLeadingZeros(t.getHours()%12||12,e.length)},H(t,e){return addLeadingZeros(t.getHours(),e.length)},m(t,e){return addLeadingZeros(t.getMinutes(),e.length)},s(t,e){return addLeadingZeros(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),o=Math.trunc(i*Math.pow(10,n-3));return addLeadingZeros(o,e.length)}},dayPeriodEnum={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters$1={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),o=i>0?i:1-i;return n.ordinalNumber(o,{unit:"year"})}return lightFormatters.y(t,e)},Y:function(t,e,n,i){const o=getWeekYear(t,i),a=o>0?o:1-o;if(e==="YY"){const l=a%100;return addLeadingZeros(l,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):addLeadingZeros(a,e.length)},R:function(t,e){const n=getISOWeekYear(t);return addLeadingZeros(n,e.length)},u:function(t,e){const n=t.getFullYear();return addLeadingZeros(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return addLeadingZeros(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return addLeadingZeros(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return lightFormatters.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return addLeadingZeros(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const o=getWeek(t,i);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):addLeadingZeros(o,e.length)},I:function(t,e,n){const i=getISOWeek(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):addLeadingZeros(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):lightFormatters.d(t,e)},D:function(t,e,n){const i=getDayOfYear(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):addLeadingZeros(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const o=t.getDay(),a=(o-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return addLeadingZeros(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const o=t.getDay(),a=(o-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return addLeadingZeros(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),o=i===0?7:i;switch(e){case"i":return String(o);case"ii":return addLeadingZeros(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let o;switch(i===12?o=dayPeriodEnum.noon:i===0?o=dayPeriodEnum.midnight:o=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let o;switch(i>=17?o=dayPeriodEnum.evening:i>=12?o=dayPeriodEnum.afternoon:i>=4?o=dayPeriodEnum.morning:o=dayPeriodEnum.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return lightFormatters.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):lightFormatters.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):addLeadingZeros(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):addLeadingZeros(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):lightFormatters.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):lightFormatters.s(t,e)},S:function(t,e){return lightFormatters.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return formatTimezoneWithOptionalMinutes(i);case"XXXX":case"XX":return formatTimezone(i);case"XXXXX":case"XXX":default:return formatTimezone(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return formatTimezoneWithOptionalMinutes(i);case"xxxx":case"xx":return formatTimezone(i);case"xxxxx":case"xxx":default:return formatTimezone(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(i,":");case"OOOO":default:return"GMT"+formatTimezone(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(i,":");case"zzzz":default:return"GMT"+formatTimezone(i,":")}},t:function(t,e,n){const i=Math.trunc(t.getTime()/1e3);return addLeadingZeros(i,e.length)},T:function(t,e,n){const i=t.getTime();return addLeadingZeros(i,e.length)}};function formatTimezoneShort(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),o=Math.trunc(i/60),a=i%60;return a===0?n+String(o):n+String(o)+e+addLeadingZeros(a,2)}function formatTimezoneWithOptionalMinutes(t,e){return t%60===0?(t>0?"-":"+")+addLeadingZeros(Math.abs(t)/60,2):formatTimezone(t,e)}function formatTimezone(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),o=addLeadingZeros(Math.trunc(i/60),2),a=addLeadingZeros(i%60,2);return n+o+e+a}const dateLongFormatter=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},timeLongFormatter=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},dateTimeLongFormatter=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],o=n[2];if(!o)return dateLongFormatter(t,e);let a;switch(i){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",dateLongFormatter(i,e)).replace("{{time}}",timeLongFormatter(o,e))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(t){return dayOfYearTokenRE.test(t)}function isProtectedWeekYearToken(t){return weekYearTokenRE.test(t)}function warnOrThrowProtectedError(t,e,n){const i=message(t,e,n);if(console.warn(i),throwTokens.includes(t))throw new RangeError(i)}function message(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(t,e,n){const i=getDefaultOptions(),o=n?.locale??i.locale??enUS,a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,c=toDate(t);if(!isValid$1(c))throw new RangeError("Invalid time value");let p=e.match(longFormattingTokensRegExp).map(u=>{const d=u[0];if(d==="p"||d==="P"){const g=longFormatters[d];return g(u,o.formatLong)}return u}).join("").match(formattingTokensRegExp).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const d=u[0];if(d==="'")return{isToken:!1,value:cleanEscapedString(u)};if(formatters$1[d])return{isToken:!0,value:u};if(d.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:u}});o.localize.preprocessor&&(p=o.localize.preprocessor(c,p));const s={firstWeekContainsDate:a,weekStartsOn:l,locale:o};return p.map(u=>{if(!u.isToken)return u.value;const d=u.value;(!n?.useAdditionalWeekYearTokens&&isProtectedWeekYearToken(d)||!n?.useAdditionalDayOfYearTokens&&isProtectedDayOfYearToken(d))&&warnOrThrowProtectedError(d,e,String(t));const g=formatters$1[d[0]];return g(c,d,o.localize,s)}).join("")}function cleanEscapedString(t){const e=t.match(escapedStringRegExp);return e?e[1].replace(doubleQuoteRegExp,"'"):t}function getDaysInMonth(t){const e=toDate(t),n=e.getFullYear(),i=e.getMonth(),o=constructFrom(t,0);return o.setFullYear(n,i+1,0),o.setHours(0,0,0,0),o.getDate()}function getUnixTime(t){return Math.trunc(+toDate(t)/1e3)}function lastDayOfMonth(t){const e=toDate(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function getWeeksInMonth(t,e){return differenceInCalendarWeeks(lastDayOfMonth(t),startOfMonth(t),e)+1}function isAfter(t,e){const n=toDate(t),i=toDate(e);return n.getTime()>i.getTime()}function isBefore(t,e){const n=toDate(t),i=toDate(e);return+n<+i}function isSameMonth(t,e){const n=toDate(t),i=toDate(e);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()}function isSameYear(t,e){const n=toDate(t),i=toDate(e);return n.getFullYear()===i.getFullYear()}function subDays(t,e){return addDays(t,-e)}function setMonth(t,e){const n=toDate(t),i=n.getFullYear(),o=n.getDate(),a=constructFrom(t,0);a.setFullYear(i,e,15),a.setHours(0,0,0,0);const l=getDaysInMonth(a);return n.setMonth(e,Math.min(o,l)),n}function setYear(t,e){const n=toDate(t);return isNaN(+n)?constructFrom(t,NaN):(n.setFullYear(e),n)}const genericDateOptions={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1},formatDate=(t,e)=>new Intl.DateTimeFormat("pt-BR",{...genericDateOptions,timeZone:t}).format(e),isCurrentLocalTimeZone=t=>Intl.DateTimeFormat().resolvedOptions().timeZone===t,getNewsURL=t=>`https://www.google.com/search?q=${encodeURI(t)}&source=lnms&tbm=nws`,getForecastUrl=(t,e)=>`https://www.google.com/search?q=${encodeURI(`forecast ${t} in ${format(e,"yyyy/MMMM/dd")}`)}`,titleCase=t=>{if(t)return t.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")},Clock$1=({timeZone:t})=>{const[e,n]=reactExports.useState(formatDate(t,new Date)),i=reactExports.useRef(null);return reactExports.useEffect(()=>{const o=()=>{n(formatDate(t,new Date))};return i.current=window.setInterval(o,1e3),()=>{i.current!==null&&clearInterval(i.current)}},[t]),jsxRuntimeExports.jsx("div",{children:e})},Info=()=>jsxRuntimeExports.jsx("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 245.334 245.334",width:"30",height:"30",className:"update-button",children:jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("path",{d:"M122.667,0C55.028,0,0,55.028,0,122.667s55.027,122.667,122.666,122.667s122.667-55.028,122.667-122.667   S190.305,0,122.667,0z M122.667,215.334C71.57,215.334,30,173.764,30,122.667S71.57,30,122.667,30s92.667,41.57,92.667,92.667   S173.763,215.334,122.667,215.334z"}),jsxRuntimeExports.jsx("rect",{width:"30",x:"107.667",y:"109.167",height:"79"}),jsxRuntimeExports.jsx("rect",{width:"30",x:"107.667",y:"57.167",height:"29"})]})}),Reload=()=>jsxRuntimeExports.jsx("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 488.482 488.482",width:"30",height:"30",className:"update-button",children:jsxRuntimeExports.jsx("g",{children:jsxRuntimeExports.jsx("g",{children:jsxRuntimeExports.jsx("path",{d:`M456.382,359.741l4.1-6.6c1.2-2.3,2.4-4.6,3.5-6.9c2.3-4.7,4.8-9.2,6.8-14c3.7-9.7,7.7-19.3,10.1-29.4
            c3.1-10,4.4-20.3,6.1-30.6c0.7-5.2,0.7-10.4,1.1-15.6l0.4-7.8v-0.5v-0.2v-0.1v-1.1v-0.9l-0.1-1.8l-0.2-3.6l-0.6-14.3l-2.3-16.2
            c-0.4-2.7-0.7-5.5-1.3-8l-1.9-7.6c-1.4-5-2.4-10.2-4.2-15.1c-6.4-19.9-16.1-38.7-27.7-56c-12.1-17.1-26.6-32.3-42.7-45.6
            c-15.7-13-33.1-24.5-52-33.1c-7.5-3.2-15.3-6.1-23-8.8l-11.9-3.2c-4-1-7.9-2.3-12-2.8l-12.2-2l-6.1-1l-6.2-0.4l-12.3-0.7l-3.1-0.2
            h-0.8h-0.2h-1.2h-0.4l-1.4,0.1l-5.6,0.2l-11.3,0.5c-1.8,0-4,0.4-6.1,0.7l-6.4,0.9l-12.8,1.9l-12,3c-4,1.1-8.1,1.8-11.9,3.4
            l-11.6,4.2l-5.8,2.2l-5.6,2.7l-11.1,5.4c-58.8,30.5-101.2,89.3-112,153.5c-0.6,4.6-1.1,9.1-1.5,13.4c-0.4,4.3-0.8,8.5-0.5,12.5
            c0.1,2.4,0.2,4.6,0.4,6.9c-11.1-17.4-23.7-33.9-34-51.8c-0.8-1.4-5.2-1.7-7.7-1c-4.9,1.3-7.2,5.4-8.1,9.7
            c-2.9,14.3,0.3,27.3,6.4,38.6c11.5,21.3,22.1,43.2,35.8,63.2l0.3,0.5c0.5,0.7,1,1.4,1.7,2.1c7,7.6,18.9,8.1,26.6,1
            c4.9-4.5,9.6-9.2,14.1-14.2c3.1-2.3,6.2-4.5,9.2-6.9c19.1-15,37.5-30.9,52.7-50.1c4.3-5.5,5.5-12.7-1-19.1
            c-5.9-5.8-13.6-7.1-19.5-3.1c-10.6,7.2-21.3,14.3-30.6,23c-8.6,8-16.8,16.4-24.9,24.9c0.5-1.6,1-3.3,1.5-5.2
            c1.5-5.2,3-11.1,4.2-17.9c0.4-3.4,1.7-6.8,2.4-10.5c0.8-3.7,1.6-7.5,2.4-11.5c7-28.5,20.7-55.1,39.3-77.5
            c18.5-22.5,42.5-40,68.5-52.3c5.1-2.8,10.7-4.5,16.1-6.6c5.4-2.3,11-3.5,16.7-5.1c2.8-0.7,5.6-1.7,8.4-2.1l8.2-1.3l8.3-1.4
            l9.5-0.6c23.4-1.5,46.9,1.1,69.2,8.2c44.7,13.9,84.1,45.4,107.3,86.8l6,14.7c1.1,2.4,1.8,5,2.6,7.5l2.3,7.6
            c1.8,5,2.6,10.2,3.7,15.3l1.6,7.7c0.4,2.5,0.5,5,0.8,7.5l0.8,7.4c0.1,1.3,0.3,2.4,0.4,3.8l0.1,4.3l0.1,8.6l0.1,4.3v2.1v0.5v0.3
            v0.1c0,0.2,0-1.6,0-0.8l-0.1,1l-1.3,15.6c-0.5,5.2-1.8,10.3-2.6,15.4c-8.3,40.6-29.6,78.7-61.3,105.6
            c-15.7,13.6-33.6,24.5-52.9,32.2c-4.9,1.7-9.7,3.8-14.7,5.2l-15.1,3.9l-14.6,2.3c-2.2,0.5-5.2,0.6-8.1,0.8l-8.6,0.5l-4.3,0.2
            l-1.7,0.1h-0.4h-1l-7.8-0.2c-5.2-0.4-10.4-0.7-15.5-1.5c-10.3-1.4-20.4-3.7-30.3-6.9c-19.8-6.3-38.3-16.3-54.6-28.9
            c-2.9-2.3-7.1-4.6-10.9-6.4c-3.8-1.6-8.1-3.9-10.3-4.3c-4.6-1-5.7,1-4.5,5c0.6,1.9,1.7,4.4,3.3,7.1c1.6,2.6,3.6,5.5,6.1,8.5
            c16.3,20,40.6,38,70.1,48.8c14.7,5.4,30.6,9.1,47.1,10.4l6.2,0.4l1.5,0.1l0.8,0.1h0.4h0.2h0.8h2.9c3.9-0.1,7.8-0.1,11.8-0.2
            l5.9-0.1l6.4-0.8l12.9-1.7c40.2-7.1,78.4-25.4,108.8-53.2C432.182,393.241,445.882,377.541,456.382,359.741z`})})})}),openNews=t=>window.open(t),dateDiffInHours=t=>{const e=new Date,i=new Date(new Date().toLocaleString("en-US",{timeZone:t})).getTime()-e.getTime(),o=Math.round(i/(1e3*60*60));return o===0?"Same as local":`${o}h ${o>0?"ahead":"behind"}`},feelsLike=t=>{let e="";return t?.condition?.text&&(e+=t.condition.text),t?.temp_c&&(e+=`, ${t.temp_c}°C`),t?.feelslike_c&&(e+=`, Feels like ${t.feelslike_c}°C`),e},Place=({name:t,timeZone:e,city:n,current:i})=>{const{data:o,isLoading:a,error:l,refetch:c}=useWeather(n),p=window.innerWidth<768,s=p?"flex-col":"flex-row",u=p?"justify-items-start":"justify-between",d=p?"w-full":"w-1/3",g=p?"mb-4":"mb-0",w=(...O)=>O.join(" "),x=o&&o.current&&!a&&!l,C=[`${p?"h-full":"h-40"}`,"w-full","border-2","flex",s,u,`${p?"p-10":"p-1"}`,"my-4","rounded-lg","items-center","bg-slate-600","shadow-lg",`${i?"border-amber-50":"border-transparent"}`].join(" ");return jsxRuntimeExports.jsxs("div",{className:C,children:[jsxRuntimeExports.jsx("div",{className:w("ml-2",d,g),children:jsxRuntimeExports.jsxs("h3",{children:[t," ",a?"Loading...":""]})}),jsxRuntimeExports.jsxs("div",{className:w(d,g,"flex-col flex justify-between"),children:[jsxRuntimeExports.jsx(Clock$1,{timeZone:e}),jsxRuntimeExports.jsxs("span",{children:[dateDiffInHours(e),i&&", Current"]})]}),!!l&&jsxRuntimeExports.jsxs("div",{className:w(d,g),children:[jsxRuntimeExports.jsx("p",{children:"Unable to get weather info"}),jsxRuntimeExports.jsx("button",{style:{border:"solid 1px #ddd",padding:10},onClick:()=>c(n),children:"Try again"})]}),!x&&!l&&jsxRuntimeExports.jsx("div",{className:w(d,g),children:jsxRuntimeExports.jsx("div",{className:"bg-slate-600 skeleton h-32 w-full"})}),x&&jsxRuntimeExports.jsxs("div",{className:w(d,g,"p-4"),children:[jsxRuntimeExports.jsx("h3",{className:"text-gray-50 flex justify-start lg:justify-end md:justify-end",children:feelsLike(o.current)}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row items-center justify-end",children:[jsxRuntimeExports.jsx("div",{children:o?.current?.condition?.icon&&jsxRuntimeExports.jsx("img",{className:"condition-img",src:o.current.condition.icon,alt:o.current.condition.text})}),jsxRuntimeExports.jsxs("div",{className:"left-40 ml-5",children:[jsxRuntimeExports.jsx("button",{className:"btn btn-circle btn-info",disabled:a,onClick:()=>c(n),children:jsxRuntimeExports.jsx(Reload,{})}),jsxRuntimeExports.jsx("button",{className:"btn btn-circle btn-info",onClick:()=>openNews(getNewsURL(n)),children:jsxRuntimeExports.jsx(Info,{})})]})]})]})]})},Place$1=reactExports.memo(Place),places=[{name:"Florianópolis/Brazil",city:"Florianópolis, Santa Catarina, Brazil",timeZone:"America/Sao_Paulo"},{name:"Munich/Germany",city:"Munich, Germany",timeZone:"Europe/Berlin"},{name:"San Francisco/USA",city:"San Francisco, California, USA",timeZone:"America/Los_Angeles"},{name:"Lisbon/Portugal",city:"Lisbon, Portugal",timeZone:"Europe/Lisbon"},{name:"Dublin/Ireland",timeZone:"Europe/Dublin",city:"Dublin, Ireland"},{name:"Europe/Gothenburg",city:"Gothenburg, Sweden",timeZone:"Europe/Stockholm"},{name:"Europe/Braila",city:"Braila, Romania",timeZone:"Europe/Bucharest"}].map(t=>({...t,current:isCurrentLocalTimeZone(t.timeZone)})),WeatherApp=()=>{const t=useIsMobile();return jsxRuntimeExports.jsx(Page,{name:"Weather",withoutPadding:t,repo:REPOS.weather.url,children:jsxRuntimeExports.jsx("div",{className:"flex flex-col w-full",children:places.map(e=>reactExports.createElement(Place$1,{...e,key:e.timeZone}))})})},transformMap={á:"a",à:"a",ó:"o",é:"e",ç:"c",ã:"a","¿":"?",o:"o",a:"a"},transform=t=>(transformMap[t]??t).toLowerCase(),to=(t,e="yellow")=>{if(t===" ")return"  ";if(t===".")return".";if(t==="?")return":question:";if(t==="!")return":exclamation:";const n=transform(t);return/[a-zA-Z]/.test(t)?`:alphabet-${e}-${n}:`:t},createSlackAlphabet=(t,e="yellow")=>t.split("").map(n=>to(n,e)).join(""),url2JSON=t=>{const e={source:t,props:{},keysList:[],valuesList:[]},n=t.split("?");return n.length>1&&n[1].split("&").forEach(o=>{const a=o.split("=");e.keysList.push(a[0]),e.valuesList.push(a[1]),e.props[a[0]]=decodeURIComponent(a[1])}),e},CodePen=()=>{const t=useIsMobile(),e=d=>y(d),[n,i]=reactExports.useState(null),[o,a]=reactExports.useState(""),[l,c]=reactExports.useState("yellow"),p=d=>{c(d);const g=d==="yellow"?"white":"yellow";a(o.replace(new RegExp(g,"g"),d))},s=(d,g=100)=>{window.setTimeout(d,g)},u=async d=>{d&&(await copyToClipboard(d),e("Copied to clipboard"))};return jsxRuntimeExports.jsx(Page,{name:"Code Pens",withoutPadding:t,repo:REPOS.codepen.url,className:"bg-gray-200 text-black",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{className:"w-full bg-grey-50 mt-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-black text-lg font-bold cursor-pointer",children:"URL to JSON"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap -mx-3 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"w-full px-3",children:jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Paste URL",className:"appearance-none block w-full text-black border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white",onChange:d=>i(url2JSON(d.target.value))})}),jsxRuntimeExports.jsxs("div",{className:"w-full px-3",children:[jsxRuntimeExports.jsx("label",{className:"block text-black text-lg font-bold cursor-pointer",children:"Results"}),jsxRuntimeExports.jsx("textarea",{rows:10,placeholder:"Paste above ^",value:n?JSON.stringify(n,null,4):"",onClick:()=>n?u(JSON.stringify(n,null,4)):noop,className:"appearance-none block w-full text-black border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-full bg-grey-50 mt-3",children:[jsxRuntimeExports.jsxs("h3",{className:"text-black text-lg font-bold",children:["Slacker (",l,")"]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap mx-3 mb-6 space-x-4 mt-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"radio",id:"yellow",name:"color",value:"yellow",defaultChecked:!0,onChange:()=>p("yellow")}),jsxRuntimeExports.jsx("label",{htmlFor:"yellow",children:"Yellow"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center ml-2",children:[jsxRuntimeExports.jsx("input",{type:"radio",id:"white",name:"color",value:"white",onChange:()=>p("white")}),jsxRuntimeExports.jsx("label",{htmlFor:"white",children:"White"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap -mx-3 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"w-full px-3",children:jsxRuntimeExports.jsx("input",{placeholder:"Type Something",onChange:d=>s(()=>a(createSlackAlphabet(d.target.value,l))),type:"text",className:"appearance-none block w-full text-black border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"})}),jsxRuntimeExports.jsxs("div",{className:"w-full px-3",children:[jsxRuntimeExports.jsx("label",{className:"block text-black text-lg font-bold cursor-pointer",onClick:()=>u(o),children:"Results 📋"}),jsxRuntimeExports.jsx("textarea",{rows:5,value:o,placeholder:"Type above ^",onClick:()=>u(o),className:"appearance-none block w-full text-black border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"})]})]})]})]})})},urlFriendlyRegex=/[^a-zA-Z0-9-, ]/g,replaceNonUrlFriendly=(t,e="")=>t.replace(urlFriendlyRegex,e);var __assign=function(){return __assign=Object.assign||function(e){for(var n,i=1,o=arguments.length;i<o;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},__assign.apply(this,arguments)};function __rest(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function __spreadArray(t,e,n){for(var i=0,o=e.length,a;i<o;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;function isDayPickerMultiple(t){return t.mode==="multiple"}function isDayPickerRange(t){return t.mode==="range"}function isDayPickerSingle(t){return t.mode==="single"}var defaultClassNames={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function formatCaption(t,e){return format(t,"LLLL y",e)}function formatDay(t,e){return format(t,"d",e)}function formatMonthCaption(t,e){return format(t,"LLLL",e)}function formatWeekNumber(t){return"".concat(t)}function formatWeekdayName(t,e){return format(t,"cccccc",e)}function formatYearCaption(t,e){return format(t,"yyyy",e)}var formatters=Object.freeze({__proto__:null,formatCaption,formatDay,formatMonthCaption,formatWeekNumber,formatWeekdayName,formatYearCaption}),labelDay=function(t,e,n){return format(t,"do MMMM (EEEE)",n)},labelMonthDropdown=function(){return"Month: "},labelNext=function(){return"Go to next month"},labelPrevious=function(){return"Go to previous month"},labelWeekday=function(t,e){return format(t,"cccc",e)},labelWeekNumber=function(t){return"Week n. ".concat(t)},labelYearDropdown=function(){return"Year: "},labels=Object.freeze({__proto__:null,labelDay,labelMonthDropdown,labelNext,labelPrevious,labelWeekNumber,labelWeekday,labelYearDropdown});function getDefaultContextValues(){var t="buttons",e=defaultClassNames,n=enUS,i={},o={},a=1,l={},c=new Date;return{captionLayout:t,classNames:e,formatters,labels,locale:n,modifiersClassNames:i,modifiers:o,numberOfMonths:a,styles:l,today:c,mode:"default"}}function parseFromToProps(t){var e=t.fromYear,n=t.toYear,i=t.fromMonth,o=t.toMonth,a=t.fromDate,l=t.toDate;return i?a=startOfMonth(i):e&&(a=new Date(e,0,1)),o?l=endOfMonth(o):n&&(l=new Date(n,11,31)),{fromDate:a?startOfDay(a):void 0,toDate:l?startOfDay(l):void 0}}var DayPickerContext=reactExports.createContext(void 0);function DayPickerProvider(t){var e,n=t.initialProps,i=getDefaultContextValues(),o=parseFromToProps(n),a=o.fromDate,l=o.toDate,c=(e=n.captionLayout)!==null&&e!==void 0?e:i.captionLayout;c!=="buttons"&&(!a||!l)&&(c="buttons");var p;(isDayPickerSingle(n)||isDayPickerMultiple(n)||isDayPickerRange(n))&&(p=n.onSelect);var s=__assign(__assign(__assign({},i),n),{captionLayout:c,classNames:__assign(__assign({},i.classNames),n.classNames),components:__assign({},n.components),formatters:__assign(__assign({},i.formatters),n.formatters),fromDate:a,labels:__assign(__assign({},i.labels),n.labels),mode:n.mode||i.mode,modifiers:__assign(__assign({},i.modifiers),n.modifiers),modifiersClassNames:__assign(__assign({},i.modifiersClassNames),n.modifiersClassNames),onSelect:p,styles:__assign(__assign({},i.styles),n.styles),toDate:l});return jsxRuntimeExports.jsx(DayPickerContext.Provider,{value:s,children:t.children})}function useDayPicker(){var t=reactExports.useContext(DayPickerContext);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function CaptionLabel(t){var e=useDayPicker(),n=e.locale,i=e.classNames,o=e.styles,a=e.formatters.formatCaption;return jsxRuntimeExports.jsx("div",{className:i.caption_label,style:o.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function IconDropdown(t){return jsxRuntimeExports.jsx("svg",__assign({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:jsxRuntimeExports.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Dropdown(t){var e,n,i=t.onChange,o=t.value,a=t.children,l=t.caption,c=t.className,p=t.style,s=useDayPicker(),u=(n=(e=s.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:IconDropdown;return jsxRuntimeExports.jsxs("div",{className:c,style:p,children:[jsxRuntimeExports.jsx("span",{className:s.classNames.vhidden,children:t["aria-label"]}),jsxRuntimeExports.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:s.classNames.dropdown,style:s.styles.dropdown,value:o,onChange:i,children:a}),jsxRuntimeExports.jsxs("div",{className:s.classNames.caption_label,style:s.styles.caption_label,"aria-hidden":"true",children:[l,jsxRuntimeExports.jsx(u,{className:s.classNames.dropdown_icon,style:s.styles.dropdown_icon})]})]})}function MonthsDropdown(t){var e,n=useDayPicker(),i=n.fromDate,o=n.toDate,a=n.styles,l=n.locale,c=n.formatters.formatMonthCaption,p=n.classNames,s=n.components,u=n.labels.labelMonthDropdown;if(!i)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});if(!o)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});var d=[];if(isSameYear(i,o))for(var g=startOfMonth(i),w=i.getMonth();w<=o.getMonth();w++)d.push(setMonth(g,w));else for(var g=startOfMonth(new Date),w=0;w<=11;w++)d.push(setMonth(g,w));var x=function(O){var Y=Number(O.target.value),q=setMonth(startOfMonth(t.displayMonth),Y);t.onChange(q)},C=(e=s?.Dropdown)!==null&&e!==void 0?e:Dropdown;return jsxRuntimeExports.jsx(C,{name:"months","aria-label":u(),className:p.dropdown_month,style:a.dropdown_month,onChange:x,value:t.displayMonth.getMonth(),caption:c(t.displayMonth,{locale:l}),children:d.map(function(O){return jsxRuntimeExports.jsx("option",{value:O.getMonth(),children:c(O,{locale:l})},O.getMonth())})})}function YearsDropdown(t){var e,n=t.displayMonth,i=useDayPicker(),o=i.fromDate,a=i.toDate,l=i.locale,c=i.styles,p=i.classNames,s=i.components,u=i.formatters.formatYearCaption,d=i.labels.labelYearDropdown,g=[];if(!o)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});if(!a)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});for(var w=o.getFullYear(),x=a.getFullYear(),C=w;C<=x;C++)g.push(setYear(startOfYear(new Date),C));var O=function(q){var ue=setYear(startOfMonth(n),Number(q.target.value));t.onChange(ue)},Y=(e=s?.Dropdown)!==null&&e!==void 0?e:Dropdown;return jsxRuntimeExports.jsx(Y,{name:"years","aria-label":d(),className:p.dropdown_year,style:c.dropdown_year,onChange:O,value:n.getFullYear(),caption:u(n,{locale:l}),children:g.map(function(q){return jsxRuntimeExports.jsx("option",{value:q.getFullYear(),children:u(q,{locale:l})},q.getFullYear())})})}function useControlledValue(t,e){var n=reactExports.useState(t),i=n[0],o=n[1],a=e===void 0?i:e;return[a,o]}function getInitialMonth(t){var e=t.month,n=t.defaultMonth,i=t.today,o=e||n||i||new Date,a=t.toDate,l=t.fromDate,c=t.numberOfMonths,p=c===void 0?1:c;if(a&&differenceInCalendarMonths(a,o)<0){var s=-1*(p-1);o=addMonths(a,s)}return l&&differenceInCalendarMonths(o,l)<0&&(o=l),startOfMonth(o)}function useNavigationState(){var t=useDayPicker(),e=getInitialMonth(t),n=useControlledValue(e,t.month),i=n[0],o=n[1],a=function(l){var c;if(!t.disableNavigation){var p=startOfMonth(l);o(p),(c=t.onMonthChange)===null||c===void 0||c.call(t,p)}};return[i,a]}function getDisplayMonths(t,e){for(var n=e.reverseMonths,i=e.numberOfMonths,o=startOfMonth(t),a=startOfMonth(addMonths(o,i)),l=differenceInCalendarMonths(a,o),c=[],p=0;p<l;p++){var s=addMonths(o,p);c.push(s)}return n&&(c=c.reverse()),c}function getNextMonth(t,e){if(!e.disableNavigation){var n=e.toDate,i=e.pagedNavigation,o=e.numberOfMonths,a=o===void 0?1:o,l=i?a:1,c=startOfMonth(t);if(!n)return addMonths(c,l);var p=differenceInCalendarMonths(n,t);if(!(p<a))return addMonths(c,l)}}function getPreviousMonth(t,e){if(!e.disableNavigation){var n=e.fromDate,i=e.pagedNavigation,o=e.numberOfMonths,a=o===void 0?1:o,l=i?a:1,c=startOfMonth(t);if(!n)return addMonths(c,-l);var p=differenceInCalendarMonths(c,n);if(!(p<=0))return addMonths(c,-l)}}var NavigationContext=reactExports.createContext(void 0);function NavigationProvider(t){var e=useDayPicker(),n=useNavigationState(),i=n[0],o=n[1],a=getDisplayMonths(i,e),l=getNextMonth(i,e),c=getPreviousMonth(i,e),p=function(d){return a.some(function(g){return isSameMonth(d,g)})},s=function(d,g){p(d)||(g&&isBefore(d,g)?o(addMonths(d,1+e.numberOfMonths*-1)):o(d))},u={currentMonth:i,displayMonths:a,goToMonth:o,goToDate:s,previousMonth:c,nextMonth:l,isDateDisplayed:p};return jsxRuntimeExports.jsx(NavigationContext.Provider,{value:u,children:t.children})}function useNavigation(){var t=reactExports.useContext(NavigationContext);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function CaptionDropdowns(t){var e,n=useDayPicker(),i=n.classNames,o=n.styles,a=n.components,l=useNavigation().goToMonth,c=function(u){l(addMonths(u,t.displayIndex?-t.displayIndex:0))},p=(e=a?.CaptionLabel)!==null&&e!==void 0?e:CaptionLabel,s=jsxRuntimeExports.jsx(p,{id:t.id,displayMonth:t.displayMonth});return jsxRuntimeExports.jsxs("div",{className:i.caption_dropdowns,style:o.caption_dropdowns,children:[jsxRuntimeExports.jsx("div",{className:i.vhidden,children:s}),jsxRuntimeExports.jsx(MonthsDropdown,{onChange:c,displayMonth:t.displayMonth}),jsxRuntimeExports.jsx(YearsDropdown,{onChange:c,displayMonth:t.displayMonth})]})}function IconLeft(t){return jsxRuntimeExports.jsx("svg",__assign({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:jsxRuntimeExports.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function IconRight(t){return jsxRuntimeExports.jsx("svg",__assign({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:jsxRuntimeExports.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Button=reactExports.forwardRef(function(t,e){var n=useDayPicker(),i=n.classNames,o=n.styles,a=[i.button_reset,i.button];t.className&&a.push(t.className);var l=a.join(" "),c=__assign(__assign({},o.button_reset),o.button);return t.style&&Object.assign(c,t.style),jsxRuntimeExports.jsx("button",__assign({},t,{ref:e,type:"button",className:l,style:c}))});function Navigation(t){var e,n,i=useDayPicker(),o=i.dir,a=i.locale,l=i.classNames,c=i.styles,p=i.labels,s=p.labelPrevious,u=p.labelNext,d=i.components;if(!t.nextMonth&&!t.previousMonth)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});var g=s(t.previousMonth,{locale:a}),w=[l.nav_button,l.nav_button_previous].join(" "),x=u(t.nextMonth,{locale:a}),C=[l.nav_button,l.nav_button_next].join(" "),O=(e=d?.IconRight)!==null&&e!==void 0?e:IconRight,Y=(n=d?.IconLeft)!==null&&n!==void 0?n:IconLeft;return jsxRuntimeExports.jsxs("div",{className:l.nav,style:c.nav,children:[!t.hidePrevious&&jsxRuntimeExports.jsx(Button,{name:"previous-month","aria-label":g,className:w,style:c.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:o==="rtl"?jsxRuntimeExports.jsx(O,{className:l.nav_icon,style:c.nav_icon}):jsxRuntimeExports.jsx(Y,{className:l.nav_icon,style:c.nav_icon})}),!t.hideNext&&jsxRuntimeExports.jsx(Button,{name:"next-month","aria-label":x,className:C,style:c.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:o==="rtl"?jsxRuntimeExports.jsx(Y,{className:l.nav_icon,style:c.nav_icon}):jsxRuntimeExports.jsx(O,{className:l.nav_icon,style:c.nav_icon})})]})}function CaptionNavigation(t){var e=useDayPicker().numberOfMonths,n=useNavigation(),i=n.previousMonth,o=n.nextMonth,a=n.goToMonth,l=n.displayMonths,c=l.findIndex(function(x){return isSameMonth(t.displayMonth,x)}),p=c===0,s=c===l.length-1,u=e>1&&(p||!s),d=e>1&&(s||!p),g=function(){i&&a(i)},w=function(){o&&a(o)};return jsxRuntimeExports.jsx(Navigation,{displayMonth:t.displayMonth,hideNext:u,hidePrevious:d,nextMonth:o,previousMonth:i,onPreviousClick:g,onNextClick:w})}function Caption(t){var e,n=useDayPicker(),i=n.classNames,o=n.disableNavigation,a=n.styles,l=n.captionLayout,c=n.components,p=(e=c?.CaptionLabel)!==null&&e!==void 0?e:CaptionLabel,s;return o?s=jsxRuntimeExports.jsx(p,{id:t.id,displayMonth:t.displayMonth}):l==="dropdown"?s=jsxRuntimeExports.jsx(CaptionDropdowns,{displayMonth:t.displayMonth,id:t.id}):l==="dropdown-buttons"?s=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CaptionDropdowns,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),jsxRuntimeExports.jsx(CaptionNavigation,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):s=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(p,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),jsxRuntimeExports.jsx(CaptionNavigation,{displayMonth:t.displayMonth,id:t.id})]}),jsxRuntimeExports.jsx("div",{className:i.caption,style:a.caption,children:s})}function Footer(t){var e=useDayPicker(),n=e.footer,i=e.styles,o=e.classNames.tfoot;return n?jsxRuntimeExports.jsx("tfoot",{className:o,style:i.tfoot,children:jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:8,children:n})})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function getWeekdays(t,e,n){for(var i=n?startOfISOWeek(new Date):startOfWeek(new Date,{locale:t,weekStartsOn:e}),o=[],a=0;a<7;a++){var l=addDays(i,a);o.push(l)}return o}function HeadRow(){var t=useDayPicker(),e=t.classNames,n=t.styles,i=t.showWeekNumber,o=t.locale,a=t.weekStartsOn,l=t.ISOWeek,c=t.formatters.formatWeekdayName,p=t.labels.labelWeekday,s=getWeekdays(o,a,l);return jsxRuntimeExports.jsxs("tr",{style:n.head_row,className:e.head_row,children:[i&&jsxRuntimeExports.jsx("td",{style:n.head_cell,className:e.head_cell}),s.map(function(u,d){return jsxRuntimeExports.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":p(u,{locale:o}),children:c(u,{locale:o})},d)})]})}function Head(){var t,e=useDayPicker(),n=e.classNames,i=e.styles,o=e.components,a=(t=o?.HeadRow)!==null&&t!==void 0?t:HeadRow;return jsxRuntimeExports.jsx("thead",{style:i.head,className:n.head,children:jsxRuntimeExports.jsx(a,{})})}function DayContent(t){var e=useDayPicker(),n=e.locale,i=e.formatters.formatDay;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:i(t.date,{locale:n})})}var SelectMultipleContext=reactExports.createContext(void 0);function SelectMultipleProvider(t){if(!isDayPickerMultiple(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return jsxRuntimeExports.jsx(SelectMultipleContext.Provider,{value:e,children:t.children})}return jsxRuntimeExports.jsx(SelectMultipleProviderInternal,{initialProps:t.initialProps,children:t.children})}function SelectMultipleProviderInternal(t){var e=t.initialProps,n=t.children,i=e.selected,o=e.min,a=e.max,l=function(s,u,d){var g,w;(g=e.onDayClick)===null||g===void 0||g.call(e,s,u,d);var x=!!(u.selected&&o&&i?.length===o);if(!x){var C=!!(!u.selected&&a&&i?.length===a);if(!C){var O=i?__spreadArray([],i):[];if(u.selected){var Y=O.findIndex(function(q){return isSameDay(s,q)});O.splice(Y,1)}else O.push(s);(w=e.onSelect)===null||w===void 0||w.call(e,O,s,u,d)}}},c={disabled:[]};i&&c.disabled.push(function(s){var u=a&&i.length>a-1,d=i.some(function(g){return isSameDay(g,s)});return!!(u&&!d)});var p={selected:i,onDayClick:l,modifiers:c};return jsxRuntimeExports.jsx(SelectMultipleContext.Provider,{value:p,children:n})}function useSelectMultiple(){var t=reactExports.useContext(SelectMultipleContext);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function addToRange(t,e){var n=e||{},i=n.from,o=n.to;return i&&o?isSameDay(o,t)&&isSameDay(i,t)?void 0:isSameDay(o,t)?{from:o,to:void 0}:isSameDay(i,t)?void 0:isAfter(i,t)?{from:t,to:o}:{from:i,to:t}:o?isAfter(t,o)?{from:o,to:t}:{from:t,to:o}:i?isBefore(t,i)?{from:t,to:i}:{from:i,to:t}:{from:t,to:void 0}}var SelectRangeContext=reactExports.createContext(void 0);function SelectRangeProvider(t){if(!isDayPickerRange(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return jsxRuntimeExports.jsx(SelectRangeContext.Provider,{value:e,children:t.children})}return jsxRuntimeExports.jsx(SelectRangeProviderInternal,{initialProps:t.initialProps,children:t.children})}function SelectRangeProviderInternal(t){var e=t.initialProps,n=t.children,i=e.selected,o=i||{},a=o.from,l=o.to,c=e.min,p=e.max,s=function(w,x,C){var O,Y;(O=e.onDayClick)===null||O===void 0||O.call(e,w,x,C);var q=addToRange(w,i);(Y=e.onSelect)===null||Y===void 0||Y.call(e,q,w,x,C)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(u.range_start=[a],l?(u.range_end=[l],isSameDay(a,l)||(u.range_middle=[{after:a,before:l}])):u.range_end=[a]):l&&(u.range_start=[l],u.range_end=[l]),c&&(a&&!l&&u.disabled.push({after:subDays(a,c-1),before:addDays(a,c-1)}),a&&l&&u.disabled.push({after:a,before:addDays(a,c-1)}),!a&&l&&u.disabled.push({after:subDays(l,c-1),before:addDays(l,c-1)})),p){if(a&&!l&&(u.disabled.push({before:addDays(a,-p+1)}),u.disabled.push({after:addDays(a,p-1)})),a&&l){var d=differenceInCalendarDays(l,a)+1,g=p-d;u.disabled.push({before:subDays(a,g)}),u.disabled.push({after:addDays(l,g)})}!a&&l&&(u.disabled.push({before:addDays(l,-p+1)}),u.disabled.push({after:addDays(l,p-1)}))}return jsxRuntimeExports.jsx(SelectRangeContext.Provider,{value:{selected:i,onDayClick:s,modifiers:u},children:n})}function useSelectRange(){var t=reactExports.useContext(SelectRangeContext);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function matcherToArray(t){return Array.isArray(t)?__spreadArray([],t):t!==void 0?[t]:[]}function getCustomModifiers(t){var e={};return Object.entries(t).forEach(function(n){var i=n[0],o=n[1];e[i]=matcherToArray(o)}),e}var InternalModifier;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(InternalModifier||(InternalModifier={}));var Selected=InternalModifier.Selected,Disabled=InternalModifier.Disabled,Hidden=InternalModifier.Hidden,Today=InternalModifier.Today,RangeEnd=InternalModifier.RangeEnd,RangeMiddle=InternalModifier.RangeMiddle,RangeStart=InternalModifier.RangeStart,Outside=InternalModifier.Outside;function getInternalModifiers(t,e,n){var i,o=(i={},i[Selected]=matcherToArray(t.selected),i[Disabled]=matcherToArray(t.disabled),i[Hidden]=matcherToArray(t.hidden),i[Today]=[t.today],i[RangeEnd]=[],i[RangeMiddle]=[],i[RangeStart]=[],i[Outside]=[],i);return t.fromDate&&o[Disabled].push({before:t.fromDate}),t.toDate&&o[Disabled].push({after:t.toDate}),isDayPickerMultiple(t)?o[Disabled]=o[Disabled].concat(e.modifiers[Disabled]):isDayPickerRange(t)&&(o[Disabled]=o[Disabled].concat(n.modifiers[Disabled]),o[RangeStart]=n.modifiers[RangeStart],o[RangeMiddle]=n.modifiers[RangeMiddle],o[RangeEnd]=n.modifiers[RangeEnd]),o}var ModifiersContext=reactExports.createContext(void 0);function ModifiersProvider(t){var e=useDayPicker(),n=useSelectMultiple(),i=useSelectRange(),o=getInternalModifiers(e,n,i),a=getCustomModifiers(e.modifiers),l=__assign(__assign({},o),a);return jsxRuntimeExports.jsx(ModifiersContext.Provider,{value:l,children:t.children})}function useModifiers(){var t=reactExports.useContext(ModifiersContext);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function isDateInterval(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function isDateRange(t){return!!(t&&typeof t=="object"&&"from"in t)}function isDateAfterType(t){return!!(t&&typeof t=="object"&&"after"in t)}function isDateBeforeType(t){return!!(t&&typeof t=="object"&&"before"in t)}function isDayOfWeekType(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function isDateInRange(t,e){var n,i=e.from,o=e.to;if(i&&o){var a=differenceInCalendarDays(o,i)<0;a&&(n=[o,i],i=n[0],o=n[1]);var l=differenceInCalendarDays(t,i)>=0&&differenceInCalendarDays(o,t)>=0;return l}return o?isSameDay(o,t):i?isSameDay(i,t):!1}function isDateType(t){return isDate(t)}function isArrayOfDates(t){return Array.isArray(t)&&t.every(isDate)}function isMatch(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(isDateType(n))return isSameDay(t,n);if(isArrayOfDates(n))return n.includes(t);if(isDateRange(n))return isDateInRange(t,n);if(isDayOfWeekType(n))return n.dayOfWeek.includes(t.getDay());if(isDateInterval(n)){var i=differenceInCalendarDays(n.before,t),o=differenceInCalendarDays(n.after,t),a=i>0,l=o<0,c=isAfter(n.before,n.after);return c?l&&a:a||l}return isDateAfterType(n)?differenceInCalendarDays(t,n.after)>0:isDateBeforeType(n)?differenceInCalendarDays(n.before,t)>0:typeof n=="function"?n(t):!1})}function getActiveModifiers(t,e,n){var i=Object.keys(e).reduce(function(a,l){var c=e[l];return isMatch(t,c)&&a.push(l),a},[]),o={};return i.forEach(function(a){return o[a]=!0}),n&&!isSameMonth(t,n)&&(o.outside=!0),o}function getInitialFocusTarget(t,e){for(var n=startOfMonth(t[0]),i=endOfMonth(t[t.length-1]),o,a,l=n;l<=i;){var c=getActiveModifiers(l,e),p=!c.disabled&&!c.hidden;if(!p){l=addDays(l,1);continue}if(c.selected)return l;c.today&&!a&&(a=l),o||(o=l),l=addDays(l,1)}return a||o}var MAX_RETRY=365;function getNextFocus(t,e){var n=e.moveBy,i=e.direction,o=e.context,a=e.modifiers,l=e.retry,c=l===void 0?{count:0,lastFocused:t}:l,p=o.weekStartsOn,s=o.fromDate,u=o.toDate,d=o.locale,g={day:addDays,week:addWeeks,month:addMonths,year:addYears,startOfWeek:function(O){return o.ISOWeek?startOfISOWeek(O):startOfWeek(O,{locale:d,weekStartsOn:p})},endOfWeek:function(O){return o.ISOWeek?endOfISOWeek(O):endOfWeek(O,{locale:d,weekStartsOn:p})}},w=g[n](t,i==="after"?1:-1);i==="before"&&s?w=max([s,w]):i==="after"&&u&&(w=min([u,w]));var x=!0;if(a){var C=getActiveModifiers(w,a);x=!C.disabled&&!C.hidden}return x?w:c.count>MAX_RETRY?c.lastFocused:getNextFocus(w,{moveBy:n,direction:i,context:o,modifiers:a,retry:__assign(__assign({},c),{count:c.count+1})})}var FocusContext=reactExports.createContext(void 0);function FocusProvider(t){var e=useNavigation(),n=useModifiers(),i=reactExports.useState(),o=i[0],a=i[1],l=reactExports.useState(),c=l[0],p=l[1],s=getInitialFocusTarget(e.displayMonths,n),u=o??(c&&e.isDateDisplayed(c))?c:s,d=function(){p(o),a(void 0)},g=function(O){a(O)},w=useDayPicker(),x=function(O,Y){if(o){var q=getNextFocus(o,{moveBy:O,direction:Y,context:w,modifiers:n});isSameDay(o,q)||(e.goToDate(q,o),g(q))}},C={focusedDay:o,focusTarget:u,blur:d,focus:g,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return jsxRuntimeExports.jsx(FocusContext.Provider,{value:C,children:t.children})}function useFocusContext(){var t=reactExports.useContext(FocusContext);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function useActiveModifiers(t,e){var n=useModifiers(),i=getActiveModifiers(t,n,e);return i}var SelectSingleContext=reactExports.createContext(void 0);function SelectSingleProvider(t){if(!isDayPickerSingle(t.initialProps)){var e={selected:void 0};return jsxRuntimeExports.jsx(SelectSingleContext.Provider,{value:e,children:t.children})}return jsxRuntimeExports.jsx(SelectSingleProviderInternal,{initialProps:t.initialProps,children:t.children})}function SelectSingleProviderInternal(t){var e=t.initialProps,n=t.children,i=function(a,l,c){var p,s,u;if((p=e.onDayClick)===null||p===void 0||p.call(e,a,l,c),l.selected&&!e.required){(s=e.onSelect)===null||s===void 0||s.call(e,void 0,a,l,c);return}(u=e.onSelect)===null||u===void 0||u.call(e,a,a,l,c)},o={selected:e.selected,onDayClick:i};return jsxRuntimeExports.jsx(SelectSingleContext.Provider,{value:o,children:n})}function useSelectSingle(){var t=reactExports.useContext(SelectSingleContext);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function useDayEventHandlers(t,e){var n=useDayPicker(),i=useSelectSingle(),o=useSelectMultiple(),a=useSelectRange(),l=useFocusContext(),c=l.focusDayAfter,p=l.focusDayBefore,s=l.focusWeekAfter,u=l.focusWeekBefore,d=l.blur,g=l.focus,w=l.focusMonthBefore,x=l.focusMonthAfter,C=l.focusYearBefore,O=l.focusYearAfter,Y=l.focusStartOfWeek,q=l.focusEndOfWeek,ue=function(Tt){var ze,Ht,Ae,Be;isDayPickerSingle(n)?(ze=i.onDayClick)===null||ze===void 0||ze.call(i,t,e,Tt):isDayPickerMultiple(n)?(Ht=o.onDayClick)===null||Ht===void 0||Ht.call(o,t,e,Tt):isDayPickerRange(n)?(Ae=a.onDayClick)===null||Ae===void 0||Ae.call(a,t,e,Tt):(Be=n.onDayClick)===null||Be===void 0||Be.call(n,t,e,Tt)},pe=function(Tt){var ze;g(t),(ze=n.onDayFocus)===null||ze===void 0||ze.call(n,t,e,Tt)},se=function(Tt){var ze;d(),(ze=n.onDayBlur)===null||ze===void 0||ze.call(n,t,e,Tt)},Re=function(Tt){var ze;(ze=n.onDayMouseEnter)===null||ze===void 0||ze.call(n,t,e,Tt)},Oe=function(Tt){var ze;(ze=n.onDayMouseLeave)===null||ze===void 0||ze.call(n,t,e,Tt)},Ce=function(Tt){var ze;(ze=n.onDayPointerEnter)===null||ze===void 0||ze.call(n,t,e,Tt)},He=function(Tt){var ze;(ze=n.onDayPointerLeave)===null||ze===void 0||ze.call(n,t,e,Tt)},$t=function(Tt){var ze;(ze=n.onDayTouchCancel)===null||ze===void 0||ze.call(n,t,e,Tt)},Sn=function(Tt){var ze;(ze=n.onDayTouchEnd)===null||ze===void 0||ze.call(n,t,e,Tt)},xn=function(Tt){var ze;(ze=n.onDayTouchMove)===null||ze===void 0||ze.call(n,t,e,Tt)},Lr=function(Tt){var ze;(ze=n.onDayTouchStart)===null||ze===void 0||ze.call(n,t,e,Tt)},jr=function(Tt){var ze;(ze=n.onDayKeyUp)===null||ze===void 0||ze.call(n,t,e,Tt)},et=function(Tt){var ze;switch(Tt.key){case"ArrowLeft":Tt.preventDefault(),Tt.stopPropagation(),n.dir==="rtl"?c():p();break;case"ArrowRight":Tt.preventDefault(),Tt.stopPropagation(),n.dir==="rtl"?p():c();break;case"ArrowDown":Tt.preventDefault(),Tt.stopPropagation(),s();break;case"ArrowUp":Tt.preventDefault(),Tt.stopPropagation(),u();break;case"PageUp":Tt.preventDefault(),Tt.stopPropagation(),Tt.shiftKey?C():w();break;case"PageDown":Tt.preventDefault(),Tt.stopPropagation(),Tt.shiftKey?O():x();break;case"Home":Tt.preventDefault(),Tt.stopPropagation(),Y();break;case"End":Tt.preventDefault(),Tt.stopPropagation(),q();break}(ze=n.onDayKeyDown)===null||ze===void 0||ze.call(n,t,e,Tt)},Ft={onClick:ue,onFocus:pe,onBlur:se,onKeyDown:et,onKeyUp:jr,onMouseEnter:Re,onMouseLeave:Oe,onPointerEnter:Ce,onPointerLeave:He,onTouchCancel:$t,onTouchEnd:Sn,onTouchMove:xn,onTouchStart:Lr};return Ft}function useSelectedDays(){var t=useDayPicker(),e=useSelectSingle(),n=useSelectMultiple(),i=useSelectRange(),o=isDayPickerSingle(t)?e.selected:isDayPickerMultiple(t)?n.selected:isDayPickerRange(t)?i.selected:void 0;return o}function isInternalModifier(t){return Object.values(InternalModifier).includes(t)}function getDayClassNames(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(i){var o=t.modifiersClassNames[i];if(o)n.push(o);else if(isInternalModifier(i)){var a=t.classNames["day_".concat(i)];a&&n.push(a)}}),n}function getDayStyle(t,e){var n=__assign({},t.styles.day);return Object.keys(e).forEach(function(i){var o;n=__assign(__assign({},n),(o=t.modifiersStyles)===null||o===void 0?void 0:o[i])}),n}function useDayRender(t,e,n){var i,o,a,l=useDayPicker(),c=useFocusContext(),p=useActiveModifiers(t,e),s=useDayEventHandlers(t,p),u=useSelectedDays(),d=!!(l.onDayClick||l.mode!=="default");reactExports.useEffect(function(){var Re;p.outside||c.focusedDay&&d&&isSameDay(c.focusedDay,t)&&((Re=n.current)===null||Re===void 0||Re.focus())},[c.focusedDay,t,n,d,p.outside]);var g=getDayClassNames(l,p).join(" "),w=getDayStyle(l,p),x=!!(p.outside&&!l.showOutsideDays||p.hidden),C=(a=(o=l.components)===null||o===void 0?void 0:o.DayContent)!==null&&a!==void 0?a:DayContent,O=jsxRuntimeExports.jsx(C,{date:t,displayMonth:e,activeModifiers:p}),Y={style:w,className:g,children:O,role:"gridcell"},q=c.focusTarget&&isSameDay(c.focusTarget,t)&&!p.outside,ue=c.focusedDay&&isSameDay(c.focusedDay,t),pe=__assign(__assign(__assign({},Y),(i={disabled:p.disabled,role:"gridcell"},i["aria-selected"]=p.selected,i.tabIndex=ue||q?0:-1,i)),s),se={isButton:d,isHidden:x,activeModifiers:p,selectedDays:u,buttonProps:pe,divProps:Y};return se}function Day(t){var e=reactExports.useRef(null),n=useDayRender(t.date,t.displayMonth,e);return n.isHidden?jsxRuntimeExports.jsx("div",{role:"gridcell"}):n.isButton?jsxRuntimeExports.jsx(Button,__assign({name:"day",ref:e},n.buttonProps)):jsxRuntimeExports.jsx("div",__assign({},n.divProps))}function WeekNumber(t){var e=t.number,n=t.dates,i=useDayPicker(),o=i.onWeekNumberClick,a=i.styles,l=i.classNames,c=i.locale,p=i.labels.labelWeekNumber,s=i.formatters.formatWeekNumber,u=s(Number(e),{locale:c});if(!o)return jsxRuntimeExports.jsx("span",{className:l.weeknumber,style:a.weeknumber,children:u});var d=p(Number(e),{locale:c}),g=function(w){o(e,n,w)};return jsxRuntimeExports.jsx(Button,{name:"week-number","aria-label":d,className:l.weeknumber,style:a.weeknumber,onClick:g,children:u})}function Row(t){var e,n,i=useDayPicker(),o=i.styles,a=i.classNames,l=i.showWeekNumber,c=i.components,p=(e=c?.Day)!==null&&e!==void 0?e:Day,s=(n=c?.WeekNumber)!==null&&n!==void 0?n:WeekNumber,u;return l&&(u=jsxRuntimeExports.jsx("td",{className:a.cell,style:o.cell,children:jsxRuntimeExports.jsx(s,{number:t.weekNumber,dates:t.dates})})),jsxRuntimeExports.jsxs("tr",{className:a.row,style:o.row,children:[u,t.dates.map(function(d){return jsxRuntimeExports.jsx("td",{className:a.cell,style:o.cell,role:"presentation",children:jsxRuntimeExports.jsx(p,{displayMonth:t.displayMonth,date:d})},getUnixTime(d))})]})}function daysToMonthWeeks(t,e,n){for(var i=n?.ISOWeek?endOfISOWeek(e):endOfWeek(e,n),o=n?.ISOWeek?startOfISOWeek(t):startOfWeek(t,n),a=differenceInCalendarDays(i,o),l=[],c=0;c<=a;c++)l.push(addDays(o,c));var p=l.reduce(function(s,u){var d=n?.ISOWeek?getISOWeek(u):getWeek(u,n),g=s.find(function(w){return w.weekNumber===d});return g?(g.dates.push(u),s):(s.push({weekNumber:d,dates:[u]}),s)},[]);return p}function getMonthWeeks(t,e){var n=daysToMonthWeeks(startOfMonth(t),endOfMonth(t),e);if(e?.useFixedWeeks){var i=getWeeksInMonth(t,e);if(i<6){var o=n[n.length-1],a=o.dates[o.dates.length-1],l=addWeeks(a,6-i),c=daysToMonthWeeks(addWeeks(a,1),l,e);n.push.apply(n,c)}}return n}function Table(t){var e,n,i,o=useDayPicker(),a=o.locale,l=o.classNames,c=o.styles,p=o.hideHead,s=o.fixedWeeks,u=o.components,d=o.weekStartsOn,g=o.firstWeekContainsDate,w=o.ISOWeek,x=getMonthWeeks(t.displayMonth,{useFixedWeeks:!!s,ISOWeek:w,locale:a,weekStartsOn:d,firstWeekContainsDate:g}),C=(e=u?.Head)!==null&&e!==void 0?e:Head,O=(n=u?.Row)!==null&&n!==void 0?n:Row,Y=(i=u?.Footer)!==null&&i!==void 0?i:Footer;return jsxRuntimeExports.jsxs("table",{id:t.id,className:l.table,style:c.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!p&&jsxRuntimeExports.jsx(C,{}),jsxRuntimeExports.jsx("tbody",{className:l.tbody,style:c.tbody,children:x.map(function(q){return jsxRuntimeExports.jsx(O,{displayMonth:t.displayMonth,dates:q.dates,weekNumber:q.weekNumber},q.weekNumber)})}),jsxRuntimeExports.jsx(Y,{displayMonth:t.displayMonth})]})}function canUseDOM(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var useIsomorphicLayoutEffect=canUseDOM()?reactExports.useLayoutEffect:reactExports.useEffect,serverHandoffComplete=!1,id=0;function genId(){return"react-day-picker-".concat(++id)}function useId(t){var e,n=t??(serverHandoffComplete?genId():null),i=reactExports.useState(n),o=i[0],a=i[1];return useIsomorphicLayoutEffect(function(){o===null&&a(genId())},[]),reactExports.useEffect(function(){serverHandoffComplete===!1&&(serverHandoffComplete=!0)},[]),(e=t??o)!==null&&e!==void 0?e:void 0}function Month(t){var e,n,i=useDayPicker(),o=i.dir,a=i.classNames,l=i.styles,c=i.components,p=useNavigation().displayMonths,s=useId(i.id?"".concat(i.id,"-").concat(t.displayIndex):void 0),u=i.id?"".concat(i.id,"-grid-").concat(t.displayIndex):void 0,d=[a.month],g=l.month,w=t.displayIndex===0,x=t.displayIndex===p.length-1,C=!w&&!x;o==="rtl"&&(e=[w,x],x=e[0],w=e[1]),w&&(d.push(a.caption_start),g=__assign(__assign({},g),l.caption_start)),x&&(d.push(a.caption_end),g=__assign(__assign({},g),l.caption_end)),C&&(d.push(a.caption_between),g=__assign(__assign({},g),l.caption_between));var O=(n=c?.Caption)!==null&&n!==void 0?n:Caption;return jsxRuntimeExports.jsxs("div",{className:d.join(" "),style:g,children:[jsxRuntimeExports.jsx(O,{id:s,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),jsxRuntimeExports.jsx(Table,{id:u,"aria-labelledby":s,displayMonth:t.displayMonth})]},t.displayIndex)}function Months(t){var e=useDayPicker(),n=e.classNames,i=e.styles;return jsxRuntimeExports.jsx("div",{className:n.months,style:i.months,children:t.children})}function Root(t){var e,n,i=t.initialProps,o=useDayPicker(),a=useFocusContext(),l=useNavigation(),c=reactExports.useState(!1),p=c[0],s=c[1];reactExports.useEffect(function(){o.initialFocus&&a.focusTarget&&(p||(a.focus(a.focusTarget),s(!0)))},[o.initialFocus,p,a.focus,a.focusTarget,a]);var u=[o.classNames.root,o.className];o.numberOfMonths>1&&u.push(o.classNames.multiple_months),o.showWeekNumber&&u.push(o.classNames.with_weeknumber);var d=__assign(__assign({},o.styles.root),o.style),g=Object.keys(i).filter(function(x){return x.startsWith("data-")}).reduce(function(x,C){var O;return __assign(__assign({},x),(O={},O[C]=i[C],O))},{}),w=(n=(e=i.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:Months;return jsxRuntimeExports.jsx("div",__assign({className:u.join(" "),style:d,dir:o.dir,id:o.id,nonce:i.nonce,title:i.title,lang:i.lang},g,{children:jsxRuntimeExports.jsx(w,{children:l.displayMonths.map(function(x,C){return jsxRuntimeExports.jsx(Month,{displayIndex:C,displayMonth:x},C)})})}))}function RootProvider(t){var e=t.children,n=__rest(t,["children"]);return jsxRuntimeExports.jsx(DayPickerProvider,{initialProps:n,children:jsxRuntimeExports.jsx(NavigationProvider,{children:jsxRuntimeExports.jsx(SelectSingleProvider,{initialProps:n,children:jsxRuntimeExports.jsx(SelectMultipleProvider,{initialProps:n,children:jsxRuntimeExports.jsx(SelectRangeProvider,{initialProps:n,children:jsxRuntimeExports.jsx(ModifiersProvider,{children:jsxRuntimeExports.jsx(FocusProvider,{children:e})})})})})})})}function DayPicker(t){return jsxRuntimeExports.jsx(RootProvider,__assign({},t,{children:jsxRuntimeExports.jsx(Root,{initialProps:t})}))}const durationToString=t=>{if(!t)return"Invalid duration";const e=Math.floor(t/1e3),n=Math.floor(e/60),i=Math.floor(n/60),o=Math.floor(i/24),a=("0"+e%60).slice(-2),l=("0"+n%60).slice(-2),c=("0"+i%24).slice(-2);return`${o!==0?o+"d ":""}${c}h ${l}m ${a}s`},useIntervalCountdown=t=>{const[e,n]=reactExports.useState(null),[i,o]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(!t){o(!0);return}const a=()=>{const c=new Date,p=t.getTime()-c.getTime();if(p<=0){o(!0),n(0);return}n(p)};a();const l=setInterval(a,1e3);return()=>clearInterval(l)},[t]),{remainingTime:e,durationString:durationToString(e),expired:i}},CountdownTimer=({end:t})=>{const{durationString:e}=useIntervalCountdown(t);return jsxRuntimeExports.jsx("div",{children:e})},ViewCountdown=({end:t,name:e,description:n})=>{const i=decodeURIComponent(e||""),o=`Countdown to ${i?titleCase(i):`${format(t,"dd/MM/yyyy")}`}`;return jsxRuntimeExports.jsx(Page,{landing:!0,name:o,children:jsxRuntimeExports.jsx("div",{className:"my-[5px] md:my-[50px] flex items-start justify-center text-white",children:jsxRuntimeExports.jsxs("div",{className:"shadow rounded-lg p-6 max-w-sm w-full bg-white border border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-center mb-4 capitalize",children:o}),jsxRuntimeExports.jsxs("div",{className:"text-center mb-4",children:[n.map(a=>jsxRuntimeExports.jsx("div",{className:"my-2",children:a},a)),jsxRuntimeExports.jsx(CountdownTimer,{end:t})]}),jsxRuntimeExports.jsx("div",{className:"mt-20 w-full",children:e&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-between",children:[jsxRuntimeExports.jsx(Link,{target:"_blank",to:getNewsURL(i),className:"w-full bg-green-700 text-white py-2 px-4 rounded",children:"What's going on in over there?"}),jsxRuntimeExports.jsx(Link,{target:"_blank",to:getForecastUrl(i,t),className:"mt-10 w-full text-white py-2 px-4 rounded hover:bg-blue-700",children:"Forecast for the day"})]})}),jsxRuntimeExports.jsx("div",{className:"mt-20 w-full",children:jsxRuntimeExports.jsx(Link,{to:"/labs/countdown",className:"w-full text-white py-2 px-4 rounded hover:bg-blue-700",children:"Click to create a countdown"})})]})})})},dateToQueryParam=t=>{const e=t.split(" "),[n,i]=e;return`${n}_${i}`},getDescription=(t,e)=>[`From: ${format(t,"dd/MM/yyyy")}`,`To: ${format(e,"dd/MM/yyyy HH:00")}`,`(${format(e,"EEEE")})`],createDateTime=(t,e)=>(t.setHours(parseInt(e,10),0,0,0),t),queryToDate=t=>{const[e,n]=t.split("_"),i=new Date(`${e}`.replace(/-/g,"/"));return createDateTime(i,n)},getIntervalFromId=t=>{const e=new Date,n=queryToDate(t);return isNaN(n.getTime())?[null,null,null]:[e,n,getDescription(e,n)]},dateIsToday=t=>t.getDate()===new Date().getDate()&&t.getMonth()===new Date().getMonth()&&t.getFullYear()===new Date().getFullYear(),dateIsInThePast=t=>t.getTime()<new Date().getTime(),sanitize=t=>t?encodeURIComponent(limitString(replaceNonUrlFriendly(t," "),30)):"",isValid=t=>t&&!dateIsToday(t)&&!dateIsInThePast(t),Countdown=()=>{const{id:t,countdownName:e}=useParams(),[n,i]=reactExports.useState(new Date),[o,a]=reactExports.useState("10:00"),[l,c]=reactExports.useState("");if(t){const[s,u,d]=getIntervalFromId(t);return!s||!u?jsxRuntimeExports.jsx(Page,{name:"View Countdown",description:"Invalid countdown",children:jsxRuntimeExports.jsx(Link,{to:"/labs/countdown",className:"btn btn-black text-blue-600",children:"Create one here."})}):jsxRuntimeExports.jsx(ViewCountdown,{end:u,name:sanitize(e),description:d})}const p=()=>{if(!n)return;const s=n.getDate(),u=n.getMonth()+1,d=n.getFullYear(),w=`#/labs/countdown/${dateToQueryParam(`${d}-${u}-${s} ${o}`)}`+(l?`/${encodeURIComponent(l)}`:"");i(void 0),c(""),window.location.href=w};return jsxRuntimeExports.jsx(Page,{name:"Countdown",className:"flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md w-full",children:[jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("input",{type:"text",id:"first_name",value:l,onChange:s=>c(s.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Enter countdown name",required:!0,maxLength:30,minLength:5})}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx(DayPicker,{mode:"single",selected:n,onSelect:i}),!n&&jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:"Please select a different ending date."})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{htmlFor:"theTime",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Select time"}),jsxRuntimeExports.jsx("select",{value:o,id:"theTime",name:"theTime",onChange:s=>a(s.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:Array.from({length:24},(s,u)=>u).map(s=>jsxRuntimeExports.jsxs("option",{value:s,children:[s,":00"]},s))})]}),jsxRuntimeExports.jsx("button",{disabled:!isValid(n)||!l,className:`w-full py-2 px-4 rounded ${!n||dateIsToday(n)||dateIsInThePast(n)||!l?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-700 text-white"}`,onClick:p,children:"Create Countdown"})]})})},DEFAULT_TRACK=0,useCamera=()=>{const t=reactExports.useRef(null),e=reactExports.useRef(null),[n,i]=reactExports.useState(!1),[o,a]=reactExports.useState(1),[l,c]=reactExports.useState(null),[p,s]=reactExports.useState(null),[u,d]=reactExports.useState(null),[g,w]=reactExports.useState(!1),[x,C]=reactExports.useState(1),[O,Y]=reactExports.useState(!0),[q,ue]=reactExports.useState(!1),[pe,se]=reactExports.useState(DEFAULT_TRACK),[Re,Oe]=reactExports.useState([]);reactExports.useEffect(()=>((async()=>{try{const jr=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720},audio:!1});c(jr),t.current&&(t.current.srcObject=jr);const et=jr.getVideoTracks();Oe(et);const Ft=et[DEFAULT_TRACK];d(Ft);const Tt=Ft.getCapabilities();"zoom"in Tt&&(w(!0),C(Tt.zoom?.max??1)),s(null),Y(!1)}catch(jr){console.error("Error accessing camera:",jr),s(jr.message)}})(),()=>{l&&l.getTracks().forEach(jr=>jr.stop())}),[]);const Ce=()=>i(!n),He=()=>{if(t.current&&e.current){ue(!0);const Lr=t.current,jr=e.current;jr.width=Lr.videoWidth,jr.height=Lr.videoHeight;const et=jr.getContext("2d");if(et){n&&(et.translate(jr.width,0),et.scale(-1,1)),et.drawImage(Lr,0,0,jr.width,jr.height);const Ft=document.createElement("a"),Tt=jr.toDataURL("image/jpeg",1);Ft.href=Tt,Ft.download=`cam-capture-${randomUUID()}.jpg`,Ft.click(),setTimeout(()=>{ue(!1)},100)}}},$t=()=>{if(u){const Lr=Math.min(o+.1,x);a(Lr),u.applyConstraints({advanced:[{zoom:Lr}]})}},Sn=()=>{if(u){const Lr=Math.max(o-.1,1);a(Lr),u.applyConstraints({advanced:[{zoom:Lr}]})}},xn=()=>{if(Re.length<=1)return;const Lr=(pe+1)%Re.length;Re[Lr]?(se(Lr),d(Re[Lr])):(se(DEFAULT_TRACK),d(Re[DEFAULT_TRACK]))};return{videoRef:t,canvasRef:e,isFlipped:n,flipCamera:Ce,download:He,zoomIn:$t,zoomOut:Sn,zoomLevel:o,error:p,hasZoom:g,isLoading:O,isDownloading:q,tracks:Re.length,changeTrack:xn}},Camera=()=>{const{videoRef:t,canvasRef:e,isFlipped:n,flipCamera:i,download:o,hasZoom:a,zoomIn:l,zoomOut:c,error:p,isDownloading:s,isLoading:u,tracks:d,changeTrack:g}=useCamera();return jsxRuntimeExports.jsxs(Page,{name:"Camera",children:[p&&jsxRuntimeExports.jsx("div",{className:"text-red-500 mb-4",children:p}),jsxRuntimeExports.jsx(Modal,{title:"Downloading file",visible:s,children:jsxRuntimeExports.jsx("div",{className:"text-gray-500",children:"Please wait..."})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-10",children:[jsxRuntimeExports.jsxs("div",{className:"relative border border-gray-300 shadow-md p-4 rounded-lg",children:[jsxRuntimeExports.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,className:"w-full max-w-500 transition-transform duration-300 ease-in-out",style:{transform:`${n?"scaleX(-1)":"none"}`}}),u&&jsxRuntimeExports.jsx("div",{className:"w-full max-w-500 transition-transform duration-300 ease-in-out absolute inset-0 flex items-center justify-center",children:"Loading..."}),jsxRuntimeExports.jsx("canvas",{ref:e,className:"hidden"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[jsxRuntimeExports.jsxs("button",{onClick:i,className:"bg-green-500 text-white px-4 py-1 rounded-md hover:bg-green-600 transition duration-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:n?"⏪":"⏩"}),"Flip"]}),a&&jsxRuntimeExports.jsxs("button",{onClick:l,className:"bg-yellow-500 text-white px-4 py-1 rounded-md hover:bg-yellow-600 transition duration-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:"🔍+"}),"Zoom In"]}),a&&jsxRuntimeExports.jsxs("button",{onClick:c,className:"bg-blue-500 text-white px-4 py-1 rounded-md hover:bg-blue-600 transition duration-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:"🔍-"}),"Zoom Out"]}),jsxRuntimeExports.jsxs("button",{onClick:o,className:"bg-purple-500 text-white px-4 py-1 rounded-md hover:bg-purple-600 transition duration-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:"📸"}),"Capture"]}),d>1&&jsxRuntimeExports.jsxs("button",{onClick:g,className:"bg-gray-500 text-white px-4 py-1 rounded-md hover:bg-gray-600 transition duration-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:"🔃"}),"Change Camera"]})]})]})]})},DevDaily=()=>jsxRuntimeExports.jsx(Page,{name:"DevDaily",description:"Come back soon!"}),Pasteable=()=>{const{image:t,error:e,isLoading:n,handlePaste:i,clearImage:o}=usePasteable();return jsxRuntimeExports.jsx(Page,{name:"Pasteable",description:"Paste images to see and download them",onPaste:i,children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold",children:n?"Processing...":"Paste an image (Ctrl+V)"}),e&&jsxRuntimeExports.jsxs("p",{className:"text-red-500",children:["Error: ",e]})]}),t?jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jsxRuntimeExports.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[jsxRuntimeExports.jsx("img",{src:t.url,alt:t.fileName,className:"w-full max-h-[70vh] object-contain"}),jsxRuntimeExports.jsxs("div",{className:"p-2 flex justify-between items-center bg-slate-50",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500 truncate",children:t.fileName}),jsxRuntimeExports.jsx("button",{onClick:o,className:"btn btn-error btn-sm",children:"Clear"})]})]})}):jsxRuntimeExports.jsx("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-12",children:jsxRuntimeExports.jsx("div",{className:"text-center text-slate-500",children:"No image pasted yet"})})]})})},version="15.1.22",createExtendedExponentialRampToValueAutomationEvent=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),createExtendedLinearRampToValueAutomationEvent=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),createSetValueAutomationEvent=(t,e)=>({startTime:e,type:"setValue",value:t}),createSetValueCurveAutomationEvent=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),getTargetValueAtTime=(t,e,{startTime:n,target:i,timeConstant:o})=>i+(e-i)*Math.exp((n-t)/o),isExponentialRampToValueAutomationEvent=t=>t.type==="exponentialRampToValue",isLinearRampToValueAutomationEvent=t=>t.type==="linearRampToValue",isAnyRampToValueAutomationEvent=t=>isExponentialRampToValueAutomationEvent(t)||isLinearRampToValueAutomationEvent(t),isSetValueAutomationEvent=t=>t.type==="setValue",isSetValueCurveAutomationEvent=t=>t.type==="setValueCurve",getValueOfAutomationEventAtIndexAtTime=(t,e,n,i)=>{const o=t[e];return o===void 0?i:isAnyRampToValueAutomationEvent(o)||isSetValueAutomationEvent(o)?o.value:isSetValueCurveAutomationEvent(o)?o.values[o.values.length-1]:getTargetValueAtTime(n,getValueOfAutomationEventAtIndexAtTime(t,e-1,o.startTime,i),o)},getEndTimeAndValueOfPreviousAutomationEvent=(t,e,n,i,o)=>n===void 0?[i.insertTime,o]:isAnyRampToValueAutomationEvent(n)?[n.endTime,n.value]:isSetValueAutomationEvent(n)?[n.startTime,n.value]:isSetValueCurveAutomationEvent(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,getValueOfAutomationEventAtIndexAtTime(t,e-1,n.startTime,o)],isCancelAndHoldAutomationEvent=t=>t.type==="cancelAndHold",isCancelScheduledValuesAutomationEvent=t=>t.type==="cancelScheduledValues",getEventTime=t=>isCancelAndHoldAutomationEvent(t)||isCancelScheduledValuesAutomationEvent(t)?t.cancelTime:isExponentialRampToValueAutomationEvent(t)||isLinearRampToValueAutomationEvent(t)?t.endTime:t.startTime,getExponentialRampValueAtTime=(t,e,n,{endTime:i,value:o})=>n===o?o:0<n&&0<o||n<0&&o<0?n*(o/n)**((t-e)/(i-e)):0,getLinearRampValueAtTime=(t,e,n,{endTime:i,value:o})=>n+(t-e)/(i-e)*(o-n),interpolateValue=(t,e)=>{const n=Math.floor(e),i=Math.ceil(e);return n===i?t[n]:(1-(e-n))*t[n]+(1-(i-e))*t[i]},getValueCurveValueAtTime=(t,{duration:e,startTime:n,values:i})=>{const o=(t-n)/e*(i.length-1);return interpolateValue(i,o)},isSetTargetAutomationEvent=t=>t.type==="setTarget";class AutomationEventList{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=getEventTime(e);if(isCancelAndHoldAutomationEvent(e)||isCancelScheduledValuesAutomationEvent(e)){const i=this._automationEvents.findIndex(a=>isCancelScheduledValuesAutomationEvent(e)&&isSetValueCurveAutomationEvent(a)?a.startTime+a.duration>=n:getEventTime(a)>=n),o=this._automationEvents[i];if(i!==-1&&(this._automationEvents=this._automationEvents.slice(0,i)),isCancelAndHoldAutomationEvent(e)){const a=this._automationEvents[this._automationEvents.length-1];if(o!==void 0&&isAnyRampToValueAutomationEvent(o)){if(a!==void 0&&isSetTargetAutomationEvent(a))throw new Error("The internal list is malformed.");const l=a===void 0?o.insertTime:isSetValueCurveAutomationEvent(a)?a.startTime+a.duration:getEventTime(a),c=a===void 0?this._defaultValue:isSetValueCurveAutomationEvent(a)?a.values[a.values.length-1]:a.value,p=isExponentialRampToValueAutomationEvent(o)?getExponentialRampValueAtTime(n,l,c,o):getLinearRampValueAtTime(n,l,c,o),s=isExponentialRampToValueAutomationEvent(o)?createExtendedExponentialRampToValueAutomationEvent(p,n,this._currenTime):createExtendedLinearRampToValueAutomationEvent(p,n,this._currenTime);this._automationEvents.push(s)}if(a!==void 0&&isSetTargetAutomationEvent(a)&&this._automationEvents.push(createSetValueAutomationEvent(this.getValue(n),n)),a!==void 0&&isSetValueCurveAutomationEvent(a)&&a.startTime+a.duration>n){const l=n-a.startTime,c=(a.values.length-1)/a.duration,p=Math.max(2,1+Math.ceil(l*c)),s=l/(p-1)*c,u=a.values.slice(0,p);if(s<1)for(let d=1;d<p;d+=1){const g=s*d%1;u[d]=a.values[d-1]*(1-g)+a.values[d]*g}this._automationEvents[this._automationEvents.length-1]=createSetValueCurveAutomationEvent(u,a.startTime,l)}}}else{const i=this._automationEvents.findIndex(l=>getEventTime(l)>n),o=i===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[i-1];if(o!==void 0&&isSetValueCurveAutomationEvent(o)&&getEventTime(o)+o.duration>n)return!1;const a=isExponentialRampToValueAutomationEvent(e)?createExtendedExponentialRampToValueAutomationEvent(e.value,e.endTime,this._currenTime):isLinearRampToValueAutomationEvent(e)?createExtendedLinearRampToValueAutomationEvent(e.value,n,this._currenTime):e;if(i===-1)this._automationEvents.push(a);else{if(isSetValueCurveAutomationEvent(e)&&n+e.duration>getEventTime(this._automationEvents[i]))return!1;this._automationEvents.splice(i,0,a)}}return!0}flush(e){const n=this._automationEvents.findIndex(i=>getEventTime(i)>e);if(n>1){const i=this._automationEvents.slice(n-1),o=i[0];isSetTargetAutomationEvent(o)&&i.unshift(createSetValueAutomationEvent(getValueOfAutomationEventAtIndexAtTime(this._automationEvents,n-2,o.startTime,this._defaultValue),o.startTime)),this._automationEvents=i}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(l=>getEventTime(l)>e),i=this._automationEvents[n],o=(n===-1?this._automationEvents.length:n)-1,a=this._automationEvents[o];if(a!==void 0&&isSetTargetAutomationEvent(a)&&(i===void 0||!isAnyRampToValueAutomationEvent(i)||i.insertTime>e))return getTargetValueAtTime(e,getValueOfAutomationEventAtIndexAtTime(this._automationEvents,o-1,a.startTime,this._defaultValue),a);if(a!==void 0&&isSetValueAutomationEvent(a)&&(i===void 0||!isAnyRampToValueAutomationEvent(i)))return a.value;if(a!==void 0&&isSetValueCurveAutomationEvent(a)&&(i===void 0||!isAnyRampToValueAutomationEvent(i)||a.startTime+a.duration>e))return e<a.startTime+a.duration?getValueCurveValueAtTime(e,a):a.values[a.values.length-1];if(a!==void 0&&isAnyRampToValueAutomationEvent(a)&&(i===void 0||!isAnyRampToValueAutomationEvent(i)))return a.value;if(i!==void 0&&isExponentialRampToValueAutomationEvent(i)){const[l,c]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,o,a,i,this._defaultValue);return getExponentialRampValueAtTime(e,l,c,i)}if(i!==void 0&&isLinearRampToValueAutomationEvent(i)){const[l,c]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,o,a,i,this._defaultValue);return getLinearRampValueAtTime(e,l,c,i)}return this._defaultValue}}const createCancelAndHoldAutomationEvent=t=>({cancelTime:t,type:"cancelAndHold"}),createCancelScheduledValuesAutomationEvent=t=>({cancelTime:t,type:"cancelScheduledValues"}),createExponentialRampToValueAutomationEvent=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),createLinearRampToValueAutomationEvent=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),createSetTargetAutomationEvent=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),createAbortError=()=>new DOMException("","AbortError"),createAddActiveInputConnectionToAudioNode=t=>(e,n,[i,o,a],l)=>{t(e[o],[n,i,a],c=>c[0]===n&&c[1]===i,l)},createAddAudioNodeConnections=t=>(e,n,i)=>{const o=[];for(let a=0;a<i.numberOfInputs;a+=1)o.push(new Set);t.set(e,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},createAddAudioParamConnections=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},ACTIVE_AUDIO_NODE_STORE=new WeakSet,AUDIO_NODE_CONNECTIONS_STORE=new WeakMap,AUDIO_NODE_STORE=new WeakMap,AUDIO_PARAM_CONNECTIONS_STORE=new WeakMap,AUDIO_PARAM_STORE=new WeakMap,CONTEXT_STORE=new WeakMap,EVENT_LISTENERS=new WeakMap,CYCLE_COUNTERS=new WeakMap,NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=new WeakMap,NODE_TO_PROCESSOR_MAPS=new WeakMap,handler={construct(){return handler}},isConstructible=t=>{try{const e=new Proxy(t,handler);new e}catch{return!1}return!0},IMPORT_STATEMENT_REGEX=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,splitImportStatements=(t,e)=>{const n=[];let i=t.replace(/^[\s]+/,""),o=i.match(IMPORT_STATEMENT_REGEX);for(;o!==null;){const a=o[1].slice(1,-1),l=o[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,e).toString());n.push(l),i=i.slice(o[0].length).replace(/^[\s]+/,""),o=i.match(IMPORT_STATEMENT_REGEX)}return[n.join(";"),i]},verifyParameterDescriptors=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},verifyProcessorCtor=t=>{if(!isConstructible(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},createAddAudioWorkletModule=(t,e,n,i,o,a,l,c,p,s,u,d,g)=>{let w=0;return(x,C,O={credentials:"omit"})=>{const Y=u.get(x);if(Y!==void 0&&Y.has(C))return Promise.resolve();const q=s.get(x);if(q!==void 0){const se=q.get(C);if(se!==void 0)return se}const ue=a(x),pe=ue.audioWorklet===void 0?o(C).then(([se,Re])=>{const[Oe,Ce]=splitImportStatements(se,Re),He=`${Oe};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${Ce}
})})(window,'_AWGS')`;return n(He)}).then(()=>{const se=g._AWGS.pop();if(se===void 0)throw new SyntaxError;i(ue.currentTime,ue.sampleRate,()=>se(class{},void 0,(Re,Oe)=>{if(Re.trim()==="")throw e();const Ce=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(ue);if(Ce!==void 0){if(Ce.has(Re))throw e();verifyProcessorCtor(Oe),verifyParameterDescriptors(Oe.parameterDescriptors),Ce.set(Re,Oe)}else verifyProcessorCtor(Oe),verifyParameterDescriptors(Oe.parameterDescriptors),NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(ue,new Map([[Re,Oe]]))},ue.sampleRate,void 0,void 0))}):Promise.all([o(C),Promise.resolve(t(d,d))]).then(([[se,Re],Oe])=>{const Ce=w+1;w=Ce;const[He,$t]=splitImportStatements(se,Re),jr=`${He};((AudioWorkletProcessor,registerProcessor)=>{${$t}
})(${Oe?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${Oe?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${Oe?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${Ce}',class extends AudioWorkletProcessor{process(){return !1}})`,et=new Blob([jr],{type:"application/javascript; charset=utf-8"}),Ft=URL.createObjectURL(et);return ue.audioWorklet.addModule(Ft,O).then(()=>{if(c(ue))return ue;const Tt=l(ue);return Tt.audioWorklet.addModule(Ft,O).then(()=>Tt)}).then(Tt=>{if(p===null)throw new SyntaxError;try{new p(Tt,`__sac${Ce}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Ft))});return q===void 0?s.set(x,new Map([[C,pe]])):q.set(C,pe),pe.then(()=>{const se=u.get(x);se===void 0?u.set(x,new Set([C])):se.add(C)}).finally(()=>{const se=s.get(x);se!==void 0&&se.delete(C)}),pe}},getValueForKey=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},pickElementFromSet=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[i]=n;return t.delete(i),i},deletePassiveInputConnectionToAudioNode=(t,e,n,i)=>{const o=getValueForKey(t,e),a=pickElementFromSet(o,l=>l[0]===n&&l[1]===i);return o.size===0&&t.delete(e),a},getEventListenersOfAudioNode=t=>getValueForKey(EVENT_LISTENERS,t),setInternalStateToActive=t=>{if(ACTIVE_AUDIO_NODE_STORE.has(t))throw new Error("The AudioNode is already stored.");ACTIVE_AUDIO_NODE_STORE.add(t),getEventListenersOfAudioNode(t).forEach(e=>e(!0))},isAudioWorkletNode=t=>"port"in t,setInternalStateToPassive=t=>{if(!ACTIVE_AUDIO_NODE_STORE.has(t))throw new Error("The AudioNode is not stored.");ACTIVE_AUDIO_NODE_STORE.delete(t),getEventListenersOfAudioNode(t).forEach(e=>e(!1))},setInternalStateToPassiveWhenNecessary=(t,e)=>{!isAudioWorkletNode(t)&&e.every(n=>n.size===0)&&setInternalStateToPassive(t)},createAddConnectionToAudioNode=(t,e,n,i,o,a,l,c,p,s,u,d,g)=>{const w=new WeakMap;return(x,C,O,Y,q)=>{const{activeInputs:ue,passiveInputs:pe}=a(C),{outputs:se}=a(x),Re=c(x),Oe=Ce=>{const He=p(C),$t=p(x);if(Ce){const Sn=deletePassiveInputConnectionToAudioNode(pe,x,O,Y);t(ue,x,Sn,!1),!q&&!d(x)&&n($t,He,O,Y),g(C)&&setInternalStateToActive(C)}else{const Sn=i(ue,x,O,Y);e(pe,Y,Sn,!1),!q&&!d(x)&&o($t,He,O,Y);const xn=l(C);if(xn===0)u(C)&&setInternalStateToPassiveWhenNecessary(C,ue);else{const Lr=w.get(C);Lr!==void 0&&clearTimeout(Lr),w.set(C,setTimeout(()=>{u(C)&&setInternalStateToPassiveWhenNecessary(C,ue)},xn*1e3))}}};return s(se,[C,O,Y],Ce=>Ce[0]===C&&Ce[1]===O&&Ce[2]===Y,!0)?(Re.add(Oe),u(x)?t(ue,x,[O,Y,Oe],!0):e(pe,Y,[x,O,Oe],!0),!0):!1}},createAddPassiveInputConnectionToAudioNode=t=>(e,n,[i,o,a],l)=>{const c=e.get(i);c===void 0?e.set(i,new Set([[o,n,a]])):t(c,[o,n,a],p=>p[0]===o&&p[1]===n,l)},createAddSilentConnection=t=>(e,n)=>{const i=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(i).connect(e.destination);const o=()=>{n.removeEventListener("ended",o),n.disconnect(i),i.disconnect()};n.addEventListener("ended",o)},createAddUnrenderedAudioWorkletNode=t=>(e,n)=>{t(e).add(n)},DEFAULT_OPTIONS$j={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},createAnalyserNodeConstructor=(t,e,n,i,o,a)=>class extends t{constructor(c,p){const s=o(c),u={...DEFAULT_OPTIONS$j,...p},d=i(s,u),g=a(s)?e():null;super(c,!1,d,g),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const p=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=p,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const p=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=p,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},isOwnedByContext=(t,e)=>t.context===e,createAnalyserNodeRendererFactory=(t,e,n)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=e(a);if(!isOwnedByContext(c,l)){const s={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=t(l,s)}return i.set(l,c),await n(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},testAudioBufferCopyChannelMethodsOutOfBoundsSupport=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},createIndexSizeError=()=>new DOMException("","IndexSizeError"),wrapAudioBufferGetChannelDataMethod=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(i){throw i.code===12?createIndexSizeError():i}})(t.getChannelData)},DEFAULT_OPTIONS$i={numberOfChannels:1},createAudioBufferConstructor=(t,e,n,i,o,a,l,c)=>{let p=null;return class b4{constructor(u){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:g,sampleRate:w}={...DEFAULT_OPTIONS$i,...u};p===null&&(p=new o(1,1,44100));const x=i!==null&&e(a,a)?new i({length:d,numberOfChannels:g,sampleRate:w}):p.createBuffer(g,d,w);if(x.numberOfChannels===0)throw n();return typeof x.copyFromChannel!="function"?(l(x),wrapAudioBufferGetChannelDataMethod(x)):e(testAudioBufferCopyChannelMethodsOutOfBoundsSupport,()=>testAudioBufferCopyChannelMethodsOutOfBoundsSupport(x))||c(x),t.add(x),x}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===b4.prototype||t.has(u)}}},MOST_NEGATIVE_SINGLE_FLOAT=-34028234663852886e22,MOST_POSITIVE_SINGLE_FLOAT=-MOST_NEGATIVE_SINGLE_FLOAT,isActiveAudioNode=t=>ACTIVE_AUDIO_NODE_STORE.has(t),DEFAULT_OPTIONS$h={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},createAudioBufferSourceNodeConstructor=(t,e,n,i,o,a,l,c)=>class extends t{constructor(s,u){const d=a(s),g={...DEFAULT_OPTIONS$h,...u},w=o(d,g),x=l(d),C=x?e():null;super(s,!1,w,C),this._audioBufferSourceNodeRenderer=C,this._isBufferNullified=!1,this._isBufferSet=g.buffer!==null,this._nativeAudioBufferSourceNode=w,this._onended=null,this._playbackRate=n(this,x,w.playbackRate,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(s){if(this._nativeAudioBufferSourceNode.buffer=s,s!==null){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(s){this._nativeAudioBufferSourceNode.loop=s}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(s){this._nativeAudioBufferSourceNode.loopEnd=s}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(s){this._nativeAudioBufferSourceNode.loopStart=s}get onended(){return this._onended}set onended(s){const u=typeof s=="function"?c(this,s):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?s:d}get playbackRate(){return this._playbackRate}start(s=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(s,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[s,u]:[s,u,d]),this.context.state!=="closed"){setInternalStateToActive(this);const g=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",g),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",g)}}stop(s=0){this._nativeAudioBufferSourceNode.stop(s),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=s)}},createAudioBufferSourceNodeRendererFactory=(t,e,n,i,o)=>()=>{const a=new WeakMap;let l=null,c=null;const p=async(s,u)=>{let d=n(s);const g=isOwnedByContext(d,u);if(!g){const w={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,w),l!==null&&d.start(...l),c!==null&&d.stop(c)}return a.set(u,d),g?await t(u,s.playbackRate,d.playbackRate):await i(u,s.playbackRate,d.playbackRate),await o(s,u,d),d};return{set start(s){l=s},set stop(s){c=s},render(s,u){const d=a.get(u);return d!==void 0?Promise.resolve(d):p(s,u)}}},isAudioBufferSourceNode=t=>"playbackRate"in t,isBiquadFilterNode=t=>"frequency"in t&&"gain"in t,isConstantSourceNode=t=>"offset"in t,isGainNode=t=>!("frequency"in t)&&"gain"in t,isOscillatorNode=t=>"detune"in t&&"frequency"in t&&!("gain"in t),isStereoPannerNode=t=>"pan"in t,getAudioNodeConnections=t=>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE,t),getAudioParamConnections=t=>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE,t),deactivateActiveAudioNodeInputConnections=(t,e)=>{const{activeInputs:n}=getAudioNodeConnections(t);n.forEach(o=>o.forEach(([a])=>{e.includes(t)||deactivateActiveAudioNodeInputConnections(a,[...e,t])}));const i=isAudioBufferSourceNode(t)?[t.playbackRate]:isAudioWorkletNode(t)?Array.from(t.parameters.values()):isBiquadFilterNode(t)?[t.Q,t.detune,t.frequency,t.gain]:isConstantSourceNode(t)?[t.offset]:isGainNode(t)?[t.gain]:isOscillatorNode(t)?[t.detune,t.frequency]:isStereoPannerNode(t)?[t.pan]:[];for(const o of i){const a=getAudioParamConnections(o);a!==void 0&&a.activeInputs.forEach(([l])=>deactivateActiveAudioNodeInputConnections(l,e))}isActiveAudioNode(t)&&setInternalStateToPassive(t)},deactivateAudioGraph=t=>{deactivateActiveAudioNodeInputConnections(t.destination,[])},isValidLatencyHint=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),createAudioContextConstructor=(t,e,n,i,o,a,l,c,p)=>class extends t{constructor(u={}){if(p===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new p(u)}catch(x){throw x.code===12&&x.message==="sampleRate is not in range"?n():x}if(d===null)throw i();if(!isValidLatencyHint(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw n();super(d,2);const{latencyHint:g}=u,{sampleRate:w}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:g==="balanced"?512/w:g==="interactive"||g===void 0?256/w:g==="playback"?1024/w:Math.max(2,Math.min(128,Math.round(g*w/128)))*128/w,this._nativeAudioContext=d,p.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const x=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",x)};d.addEventListener("statechange",x)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),deactivateAudioGraph(this)}))}createMediaElementSource(u){return new o(this,{mediaElement:u})}createMediaStreamDestination(){return new a(this)}createMediaStreamSource(u){return new l(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new c(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const g=()=>{this._nativeAudioContext.removeEventListener("statechange",g),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",g)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},createAudioDestinationNodeConstructor=(t,e,n,i,o,a,l,c)=>class extends t{constructor(s,u){const d=a(s),g=l(d),w=o(d,u,g),x=g?e(c):null;super(s,!1,w,x),this._isNodeOfNativeOfflineAudioContext=g,this._nativeAudioDestinationNode=w}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(s){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(s>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=s}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(s){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=s}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},createAudioDestinationNodeRenderer=t=>{const e=new WeakMap,n=async(i,o)=>{const a=o.destination;return e.set(o,a),await t(i,o,a),a};return{render(i,o){const a=e.get(o);return a!==void 0?Promise.resolve(a):n(i,o)}}},createAudioListenerFactory=(t,e,n,i,o,a,l,c)=>(p,s)=>{const u=s.listener,d=()=>{const se=new Float32Array(1),Re=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),Oe=l(s);let Ce=!1,He=[0,0,-1,0,1,0],$t=[0,0,0];const Sn=()=>{if(Ce)return;Ce=!0;const et=i(s,256,9,0);et.onaudioprocess=({inputBuffer:Ft})=>{const Tt=[a(Ft,se,0),a(Ft,se,1),a(Ft,se,2),a(Ft,se,3),a(Ft,se,4),a(Ft,se,5)];Tt.some((Ht,Ae)=>Ht!==He[Ae])&&(u.setOrientation(...Tt),He=Tt);const ze=[a(Ft,se,6),a(Ft,se,7),a(Ft,se,8)];ze.some((Ht,Ae)=>Ht!==$t[Ae])&&(u.setPosition(...ze),$t=ze)},Re.connect(et)},xn=et=>Ft=>{Ft!==He[et]&&(He[et]=Ft,u.setOrientation(...He))},Lr=et=>Ft=>{Ft!==$t[et]&&($t[et]=Ft,u.setPosition(...$t))},jr=(et,Ft,Tt)=>{const ze=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Ft});ze.connect(Re,0,et),ze.start(),Object.defineProperty(ze.offset,"defaultValue",{get(){return Ft}});const Ht=t({context:p},Oe,ze.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT);return c(Ht,"value",Ae=>()=>Ae.call(Ht),Ae=>Be=>{try{Ae.call(Ht,Be)}catch(tr){if(tr.code!==9)throw tr}Sn(),Oe&&Tt(Be)}),Ht.cancelAndHoldAtTime=(Ae=>Oe?()=>{throw o()}:(...Be)=>{const tr=Ae.apply(Ht,Be);return Sn(),tr})(Ht.cancelAndHoldAtTime),Ht.cancelScheduledValues=(Ae=>Oe?()=>{throw o()}:(...Be)=>{const tr=Ae.apply(Ht,Be);return Sn(),tr})(Ht.cancelScheduledValues),Ht.exponentialRampToValueAtTime=(Ae=>Oe?()=>{throw o()}:(...Be)=>{const tr=Ae.apply(Ht,Be);return Sn(),tr})(Ht.exponentialRampToValueAtTime),Ht.linearRampToValueAtTime=(Ae=>Oe?()=>{throw o()}:(...Be)=>{const tr=Ae.apply(Ht,Be);return Sn(),tr})(Ht.linearRampToValueAtTime),Ht.setTargetAtTime=(Ae=>Oe?()=>{throw o()}:(...Be)=>{const tr=Ae.apply(Ht,Be);return Sn(),tr})(Ht.setTargetAtTime),Ht.setValueAtTime=(Ae=>Oe?()=>{throw o()}:(...Be)=>{const tr=Ae.apply(Ht,Be);return Sn(),tr})(Ht.setValueAtTime),Ht.setValueCurveAtTime=(Ae=>Oe?()=>{throw o()}:(...Be)=>{const tr=Ae.apply(Ht,Be);return Sn(),tr})(Ht.setValueCurveAtTime),Ht};return{forwardX:jr(0,0,xn(0)),forwardY:jr(1,0,xn(1)),forwardZ:jr(2,-1,xn(2)),positionX:jr(6,0,Lr(0)),positionY:jr(7,0,Lr(1)),positionZ:jr(8,0,Lr(2)),upX:jr(3,0,xn(3)),upY:jr(4,1,xn(4)),upZ:jr(5,0,xn(5))}},{forwardX:g,forwardY:w,forwardZ:x,positionX:C,positionY:O,positionZ:Y,upX:q,upY:ue,upZ:pe}=u.forwardX===void 0?d():u;return{get forwardX(){return g},get forwardY(){return w},get forwardZ(){return x},get positionX(){return C},get positionY(){return O},get positionZ(){return Y},get upX(){return q},get upY(){return ue},get upZ(){return pe}}},isAudioNode$1=t=>"context"in t,isAudioNodeOutputConnection=t=>isAudioNode$1(t[0]),insertElementInSet=(t,e,n,i)=>{for(const o of t)if(n(o)){if(i)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},addActiveInputConnectionToAudioParam=(t,e,[n,i],o)=>{insertElementInSet(t,[e,n,i],a=>a[0]===e&&a[1]===n,o)},addPassiveInputConnectionToAudioParam=(t,[e,n,i],o)=>{const a=t.get(e);a===void 0?t.set(e,new Set([[n,i]])):insertElementInSet(a,[n,i],l=>l[0]===n,o)},isNativeAudioNodeFaker=t=>"inputs"in t,connectNativeAudioNodeToNativeAudioNode=(t,e,n,i)=>{if(isNativeAudioNodeFaker(e)){const o=e.inputs[i];return t.connect(o,n,0),[o,n,0]}return t.connect(e,n,i),[e,n,i]},deleteActiveInputConnection=(t,e,n)=>{for(const i of t)if(i[0]===e&&i[1]===n)return t.delete(i),i;return null},deleteActiveInputConnectionToAudioParam=(t,e,n)=>pickElementFromSet(t,i=>i[0]===e&&i[1]===n),deleteEventListenerOfAudioNode=(t,e)=>{if(!getEventListenersOfAudioNode(t).delete(e))throw new Error("Missing the expected event listener.")},deletePassiveInputConnectionToAudioParam=(t,e,n)=>{const i=getValueForKey(t,e),o=pickElementFromSet(i,a=>a[0]===n);return i.size===0&&t.delete(e),o},disconnectNativeAudioNodeFromNativeAudioNode=(t,e,n,i)=>{isNativeAudioNodeFaker(e)?t.disconnect(e.inputs[i],n,0):t.disconnect(e,n,i)},getNativeAudioNode=t=>getValueForKey(AUDIO_NODE_STORE,t),getNativeAudioParam=t=>getValueForKey(AUDIO_PARAM_STORE,t),isPartOfACycle=t=>CYCLE_COUNTERS.has(t),isPassiveAudioNode=t=>!ACTIVE_AUDIO_NODE_STORE.has(t),testAudioNodeDisconnectMethodSupport=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const i=t.createScriptProcessor(256,1,1),o=t.createGain(),a=t.createBuffer(1,2,44100),l=a.getChannelData(0);l[0]=1,l[1]=1;const c=t.createBufferSource();c.buffer=a,c.loop=!0,c.connect(i).connect(t.destination),c.connect(o),c.disconnect(o),i.onaudioprocess=p=>{const s=p.inputBuffer.getChannelData(0);Array.prototype.some.call(s,u=>u===1)?n(!0):n(!1),c.stop(),i.onaudioprocess=null,c.disconnect(i),i.disconnect(t.destination)},c.start()}}),visitEachAudioNodeOnce=(t,e)=>{const n=new Map;for(const i of t)for(const o of i){const a=n.get(o);n.set(o,a===void 0?1:a+1)}n.forEach((i,o)=>e(o,i))},isNativeAudioNode$1=t=>"context"in t,wrapAudioNodeDisconnectMethod=t=>{const e=new Map;t.connect=(n=>(i,o=0,a=0)=>{const l=isNativeAudioNode$1(i)?n(i,o,a):n(i,o),c=e.get(i);return c===void 0?e.set(i,[{input:a,output:o}]):c.every(p=>p.input!==a||p.output!==o)&&c.push({input:a,output:o}),l})(t.connect.bind(t)),t.disconnect=(n=>(i,o,a)=>{if(n.apply(t),i===void 0)e.clear();else if(typeof i=="number")for(const[l,c]of e){const p=c.filter(s=>s.output!==i);p.length===0?e.delete(l):e.set(l,p)}else if(e.has(i))if(o===void 0)e.delete(i);else{const l=e.get(i);if(l!==void 0){const c=l.filter(p=>p.output!==o&&(p.input!==a||a===void 0));c.length===0?e.delete(i):e.set(i,c)}}for(const[l,c]of e)c.forEach(p=>{isNativeAudioNode$1(l)?t.connect(l,p.output,p.input):t.connect(l,p.output)})})(t.disconnect)},addConnectionToAudioParamOfAudioContext=(t,e,n,i)=>{const{activeInputs:o,passiveInputs:a}=getAudioParamConnections(e),{outputs:l}=getAudioNodeConnections(t),c=getEventListenersOfAudioNode(t),p=s=>{const u=getNativeAudioNode(t),d=getNativeAudioParam(e);if(s){const g=deletePassiveInputConnectionToAudioParam(a,t,n);addActiveInputConnectionToAudioParam(o,t,g,!1),!i&&!isPartOfACycle(t)&&u.connect(d,n)}else{const g=deleteActiveInputConnectionToAudioParam(o,t,n);addPassiveInputConnectionToAudioParam(a,g,!1),!i&&!isPartOfACycle(t)&&u.disconnect(d,n)}};return insertElementInSet(l,[e,n],s=>s[0]===e&&s[1]===n,!0)?(c.add(p),isActiveAudioNode(t)?addActiveInputConnectionToAudioParam(o,t,[n,p],!0):addPassiveInputConnectionToAudioParam(a,[t,n,p],!0),!0):!1},deleteInputConnectionOfAudioNode=(t,e,n,i)=>{const{activeInputs:o,passiveInputs:a}=getAudioNodeConnections(e),l=deleteActiveInputConnection(o[i],t,n);return l===null?[deletePassiveInputConnectionToAudioNode(a,t,n,i)[2],!1]:[l[2],!0]},deleteInputConnectionOfAudioParam=(t,e,n)=>{const{activeInputs:i,passiveInputs:o}=getAudioParamConnections(e),a=deleteActiveInputConnection(i,t,n);return a===null?[deletePassiveInputConnectionToAudioParam(o,t,n)[1],!1]:[a[2],!0]},deleteInputsOfAudioNode=(t,e,n,i,o)=>{const[a,l]=deleteInputConnectionOfAudioNode(t,n,i,o);if(a!==null&&(deleteEventListenerOfAudioNode(t,a),l&&!e&&!isPartOfACycle(t)&&disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(t),getNativeAudioNode(n),i,o)),isActiveAudioNode(n)){const{activeInputs:c}=getAudioNodeConnections(n);setInternalStateToPassiveWhenNecessary(n,c)}},deleteInputsOfAudioParam=(t,e,n,i)=>{const[o,a]=deleteInputConnectionOfAudioParam(t,n,i);o!==null&&(deleteEventListenerOfAudioNode(t,o),a&&!e&&!isPartOfACycle(t)&&getNativeAudioNode(t).disconnect(getNativeAudioParam(n),i))},deleteAnyConnection=(t,e)=>{const n=getAudioNodeConnections(t),i=[];for(const o of n.outputs)isAudioNodeOutputConnection(o)?deleteInputsOfAudioNode(t,e,...o):deleteInputsOfAudioParam(t,e,...o),i.push(o[0]);return n.outputs.clear(),i},deleteConnectionAtOutput=(t,e,n)=>{const i=getAudioNodeConnections(t),o=[];for(const a of i.outputs)a[1]===n&&(isAudioNodeOutputConnection(a)?deleteInputsOfAudioNode(t,e,...a):deleteInputsOfAudioParam(t,e,...a),o.push(a[0]),i.outputs.delete(a));return o},deleteConnectionToDestination=(t,e,n,i,o)=>{const a=getAudioNodeConnections(t);return Array.from(a.outputs).filter(l=>l[0]===n&&(i===void 0||l[1]===i)&&(o===void 0||l[2]===o)).map(l=>(isAudioNodeOutputConnection(l)?deleteInputsOfAudioNode(t,e,...l):deleteInputsOfAudioParam(t,e,...l),a.outputs.delete(l),l[0]))},createAudioNodeConstructor=(t,e,n,i,o,a,l,c,p,s,u,d,g,w,x,C)=>class extends s{constructor(Y,q,ue,pe){super(ue),this._context=Y,this._nativeAudioNode=ue;const se=u(Y);d(se)&&n(testAudioNodeDisconnectMethodSupport,()=>testAudioNodeDisconnectMethodSupport(se,C))!==!0&&wrapAudioNodeDisconnectMethod(ue),AUDIO_NODE_STORE.set(this,ue),EVENT_LISTENERS.set(this,new Set),Y.state!=="closed"&&q&&setInternalStateToActive(this),t(this,pe,ue)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(Y){this._nativeAudioNode.channelCount=Y}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(Y){this._nativeAudioNode.channelCountMode=Y}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(Y){this._nativeAudioNode.channelInterpretation=Y}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(Y,q=0,ue=0){if(q<0||q>=this._nativeAudioNode.numberOfOutputs)throw o();const pe=u(this._context),se=x(pe);if(g(Y)||w(Y))throw a();if(isAudioNode$1(Y)){const Ce=getNativeAudioNode(Y);try{const $t=connectNativeAudioNodeToNativeAudioNode(this._nativeAudioNode,Ce,q,ue),Sn=isPassiveAudioNode(this);(se||Sn)&&this._nativeAudioNode.disconnect(...$t),this.context.state!=="closed"&&!Sn&&isPassiveAudioNode(Y)&&setInternalStateToActive(Y)}catch($t){throw $t.code===12?a():$t}if(e(this,Y,q,ue,se)){const $t=p([this],Y);visitEachAudioNodeOnce($t,i(se))}return Y}const Re=getNativeAudioParam(Y);if(Re.name==="playbackRate"&&Re.maxValue===1024)throw l();try{this._nativeAudioNode.connect(Re,q),(se||isPassiveAudioNode(this))&&this._nativeAudioNode.disconnect(Re,q)}catch(Ce){throw Ce.code===12?a():Ce}if(addConnectionToAudioParamOfAudioContext(this,Y,q,se)){const Ce=p([this],Y);visitEachAudioNodeOnce(Ce,i(se))}}disconnect(Y,q,ue){let pe;const se=u(this._context),Re=x(se);if(Y===void 0)pe=deleteAnyConnection(this,Re);else if(typeof Y=="number"){if(Y<0||Y>=this.numberOfOutputs)throw o();pe=deleteConnectionAtOutput(this,Re,Y)}else{if(q!==void 0&&(q<0||q>=this.numberOfOutputs)||isAudioNode$1(Y)&&ue!==void 0&&(ue<0||ue>=Y.numberOfInputs))throw o();if(pe=deleteConnectionToDestination(this,Re,Y,q,ue),pe.length===0)throw a()}for(const Oe of pe){const Ce=p([this],Oe);visitEachAudioNodeOnce(Ce,c)}}},createAudioParamFactory=(t,e,n,i,o,a,l,c,p,s,u,d,g)=>(w,x,C,O=null,Y=null)=>{const q=C.value,ue=new AutomationEventList(q),pe=x?i(ue):null,se={get defaultValue(){return q},get maxValue(){return O===null?C.maxValue:O},get minValue(){return Y===null?C.minValue:Y},get value(){return C.value},set value(Re){C.value=Re,se.setValueAtTime(Re,w.context.currentTime)},cancelAndHoldAtTime(Re){if(typeof C.cancelAndHoldAtTime=="function")pe===null&&ue.flush(w.context.currentTime),ue.add(o(Re)),C.cancelAndHoldAtTime(Re);else{const Oe=Array.from(ue).pop();pe===null&&ue.flush(w.context.currentTime),ue.add(o(Re));const Ce=Array.from(ue).pop();C.cancelScheduledValues(Re),Oe!==Ce&&Ce!==void 0&&(Ce.type==="exponentialRampToValue"?C.exponentialRampToValueAtTime(Ce.value,Ce.endTime):Ce.type==="linearRampToValue"?C.linearRampToValueAtTime(Ce.value,Ce.endTime):Ce.type==="setValue"?C.setValueAtTime(Ce.value,Ce.startTime):Ce.type==="setValueCurve"&&C.setValueCurveAtTime(Ce.values,Ce.startTime,Ce.duration))}return se},cancelScheduledValues(Re){return pe===null&&ue.flush(w.context.currentTime),ue.add(a(Re)),C.cancelScheduledValues(Re),se},exponentialRampToValueAtTime(Re,Oe){if(Re===0)throw new RangeError;if(!Number.isFinite(Oe)||Oe<0)throw new RangeError;const Ce=w.context.currentTime;return pe===null&&ue.flush(Ce),Array.from(ue).length===0&&(ue.add(s(q,Ce)),C.setValueAtTime(q,Ce)),ue.add(l(Re,Oe)),C.exponentialRampToValueAtTime(Re,Oe),se},linearRampToValueAtTime(Re,Oe){const Ce=w.context.currentTime;return pe===null&&ue.flush(Ce),Array.from(ue).length===0&&(ue.add(s(q,Ce)),C.setValueAtTime(q,Ce)),ue.add(c(Re,Oe)),C.linearRampToValueAtTime(Re,Oe),se},setTargetAtTime(Re,Oe,Ce){return pe===null&&ue.flush(w.context.currentTime),ue.add(p(Re,Oe,Ce)),C.setTargetAtTime(Re,Oe,Ce),se},setValueAtTime(Re,Oe){return pe===null&&ue.flush(w.context.currentTime),ue.add(s(Re,Oe)),C.setValueAtTime(Re,Oe),se},setValueCurveAtTime(Re,Oe,Ce){const He=Re instanceof Float32Array?Re:new Float32Array(Re);if(d!==null&&d.name==="webkitAudioContext"){const $t=Oe+Ce,Sn=w.context.sampleRate,xn=Math.ceil(Oe*Sn),Lr=Math.floor($t*Sn),jr=Lr-xn,et=new Float32Array(jr);for(let Tt=0;Tt<jr;Tt+=1){const ze=(He.length-1)/Ce*((xn+Tt)/Sn-Oe),Ht=Math.floor(ze),Ae=Math.ceil(ze);et[Tt]=Ht===Ae?He[Ht]:(1-(ze-Ht))*He[Ht]+(1-(Ae-ze))*He[Ae]}pe===null&&ue.flush(w.context.currentTime),ue.add(u(et,Oe,Ce)),C.setValueCurveAtTime(et,Oe,Ce);const Ft=Lr/Sn;Ft<$t&&g(se,et[et.length-1],Ft),g(se,He[He.length-1],$t)}else pe===null&&ue.flush(w.context.currentTime),ue.add(u(He,Oe,Ce)),C.setValueCurveAtTime(He,Oe,Ce);return se}};return n.set(se,C),e.set(se,w),t(se,pe),se},createAudioParamRenderer=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:i,value:o}=n;e.exponentialRampToValueAtTime(o,i)}else if(n.type==="linearRampToValue"){const{endTime:i,value:o}=n;e.linearRampToValueAtTime(o,i)}else if(n.type==="setTarget"){const{startTime:i,target:o,timeConstant:a}=n;e.setTargetAtTime(o,i,a)}else if(n.type==="setValue"){const{startTime:i,value:o}=n;e.setValueAtTime(o,i)}else if(n.type==="setValueCurve"){const{duration:i,startTime:o,values:a}=n;e.setValueCurveAtTime(a,o,i)}else throw new Error("Can't apply an unknown automation.")}});class ReadOnlyMap{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((i,o)=>e.call(n,i,o,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const DEFAULT_OPTIONS$g={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},createAudioWorkletNodeConstructor=(t,e,n,i,o,a,l,c,p,s,u,d,g,w)=>class extends e{constructor(C,O,Y){var q;const ue=c(C),pe=p(ue),se=u({...DEFAULT_OPTIONS$g,...Y});g(se);const Re=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(ue),Oe=Re?.get(O),Ce=pe||ue.state!=="closed"?ue:(q=l(ue))!==null&&q!==void 0?q:ue,He=o(Ce,pe?null:C.baseLatency,s,O,Oe,se),$t=pe?i(O,se,Oe):null;super(C,!0,He,$t);const Sn=[];He.parameters.forEach((Lr,jr)=>{const et=n(this,pe,Lr);Sn.push([jr,et])}),this._nativeAudioWorkletNode=He,this._onprocessorerror=null,this._parameters=new ReadOnlyMap(Sn),pe&&t(ue,this);const{activeInputs:xn}=a(this);d(He,xn)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(C){const O=typeof C=="function"?w(this,C):null;this._nativeAudioWorkletNode.onprocessorerror=O;const Y=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=Y!==null&&Y===O?C:Y}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function copyFromChannel(t,e,n,i,o){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],i,o);else{const a=t.getChannelData(i);if(e[n].byteLength===0)e[n]=a.slice(o,o+128);else{const l=new Float32Array(a.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(l)}}}const copyToChannel=(t,e,n,i,o)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],i,o):e[n].byteLength!==0&&t.getChannelData(i).set(e[n],o)},createNestedArrays=(t,e)=>{const n=[];for(let i=0;i<t;i+=1){const o=[],a=typeof e=="number"?e:e[i];for(let l=0;l<a;l+=1)o.push(new Float32Array(128));n.push(o)}return n},getAudioWorkletProcessor=(t,e)=>{const n=getValueForKey(NODE_TO_PROCESSOR_MAPS,t),i=getNativeAudioNode(e);return getValueForKey(n,i)},processBuffer=async(t,e,n,i,o,a,l)=>{const c=e===null?Math.ceil(t.context.length/128)*128:e.length,p=i.channelCount*i.numberOfInputs,s=o.reduce((O,Y)=>O+Y,0),u=s===0?null:n.createBuffer(s,c,n.sampleRate);if(a===void 0)throw new Error("Missing the processor constructor.");const d=getAudioNodeConnections(t),g=await getAudioWorkletProcessor(n,t),w=createNestedArrays(i.numberOfInputs,i.channelCount),x=createNestedArrays(i.numberOfOutputs,o),C=Array.from(t.parameters.keys()).reduce((O,Y)=>({...O,[Y]:new Float32Array(128)}),{});for(let O=0;O<c;O+=128){if(i.numberOfInputs>0&&e!==null)for(let Y=0;Y<i.numberOfInputs;Y+=1)for(let q=0;q<i.channelCount;q+=1)copyFromChannel(e,w[Y],q,q,O);a.parameterDescriptors!==void 0&&e!==null&&a.parameterDescriptors.forEach(({name:Y},q)=>{copyFromChannel(e,C,Y,p+q,O)});for(let Y=0;Y<i.numberOfInputs;Y+=1)for(let q=0;q<o[Y];q+=1)x[Y][q].byteLength===0&&(x[Y][q]=new Float32Array(128));try{const Y=w.map((ue,pe)=>d.activeInputs[pe].size===0?[]:ue),q=l(O/n.sampleRate,n.sampleRate,()=>g.process(Y,x,C));if(u!==null)for(let ue=0,pe=0;ue<i.numberOfOutputs;ue+=1){for(let se=0;se<o[ue];se+=1)copyToChannel(u,x[ue],se,pe+se,O);pe+=o[ue]}if(!q)break}catch(Y){t.dispatchEvent(new ErrorEvent("processorerror",{colno:Y.colno,filename:Y.filename,lineno:Y.lineno,message:Y.message}));break}}return u},createAudioWorkletNodeRendererFactory=(t,e,n,i,o,a,l,c,p,s,u,d,g,w,x,C)=>(O,Y,q)=>{const ue=new WeakMap;let pe=null;const se=async(Re,Oe)=>{let Ce=u(Re),He=null;const $t=isOwnedByContext(Ce,Oe),Sn=Array.isArray(Y.outputChannelCount)?Y.outputChannelCount:Array.from(Y.outputChannelCount);if(d===null){const xn=Sn.reduce((Ft,Tt)=>Ft+Tt,0),Lr=o(Oe,{channelCount:Math.max(1,xn),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,xn)}),jr=[];for(let Ft=0;Ft<Re.numberOfOutputs;Ft+=1)jr.push(i(Oe,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Sn[Ft]}));const et=l(Oe,{channelCount:Y.channelCount,channelCountMode:Y.channelCountMode,channelInterpretation:Y.channelInterpretation,gain:1});et.connect=e.bind(null,jr),et.disconnect=p.bind(null,jr),He=[Lr,jr,et]}else $t||(Ce=new d(Oe,O));if(ue.set(Oe,He===null?Ce:He[2]),He!==null){if(pe===null){if(q===void 0)throw new Error("Missing the processor constructor.");if(g===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Tt=Re.channelCount*Re.numberOfInputs,ze=q.parameterDescriptors===void 0?0:q.parameterDescriptors.length,Ht=Tt+ze;pe=processBuffer(Re,Ht===0?null:await(async()=>{const Be=new g(Ht,Math.ceil(Re.context.length/128)*128,Oe.sampleRate),tr=[],No=[];for(let t0=0;t0<Y.numberOfInputs;t0+=1)tr.push(l(Be,{channelCount:Y.channelCount,channelCountMode:Y.channelCountMode,channelInterpretation:Y.channelInterpretation,gain:1})),No.push(o(Be,{channelCount:Y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Y.channelCount}));const ah=await Promise.all(Array.from(Re.parameters.values()).map(async t0=>{const o0=a(Be,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t0.value});return await w(Be,t0,o0.offset),o0})),Mo=i(Be,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Tt+ze)});for(let t0=0;t0<Y.numberOfInputs;t0+=1){tr[t0].connect(No[t0]);for(let o0=0;o0<Y.channelCount;o0+=1)No[t0].connect(Mo,o0,t0*Y.channelCount+o0)}for(const[t0,o0]of ah.entries())o0.connect(Mo,0,Tt+t0),o0.start(0);return Mo.connect(Be.destination),await Promise.all(tr.map(t0=>x(Re,Be,t0))),C(Be)})(),Oe,Y,Sn,q,s)}const xn=await pe,Lr=n(Oe,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[jr,et,Ft]=He;xn!==null&&(Lr.buffer=xn,Lr.start(0)),Lr.connect(jr);for(let Tt=0,ze=0;Tt<Re.numberOfOutputs;Tt+=1){const Ht=et[Tt];for(let Ae=0;Ae<Sn[Tt];Ae+=1)jr.connect(Ht,ze+Ae,Ae);ze+=Sn[Tt]}return Ft}if($t)for(const[xn,Lr]of Re.parameters.entries())await t(Oe,Lr,Ce.parameters.get(xn));else for(const[xn,Lr]of Re.parameters.entries())await w(Oe,Lr,Ce.parameters.get(xn));return await x(Re,Oe,Ce),Ce};return{render(Re,Oe){c(Oe,Re);const Ce=ue.get(Oe);return Ce!==void 0?Promise.resolve(Ce):se(Re,Oe)}}},createBaseAudioContextConstructor=(t,e,n,i,o,a,l,c,p,s,u,d,g,w,x,C,O,Y,q,ue)=>class extends x{constructor(se,Re){super(se,Re),this._nativeContext=se,this._audioWorklet=t===void 0?void 0:{addModule:(Oe,Ce)=>t(this,Oe,Ce)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new o(this)}createBuffer(se,Re,Oe){return new n({length:Re,numberOfChannels:se,sampleRate:Oe})}createBufferSource(){return new i(this)}createChannelMerger(se=6){return new a(this,{numberOfInputs:se})}createChannelSplitter(se=6){return new l(this,{numberOfOutputs:se})}createConstantSource(){return new c(this)}createConvolver(){return new p(this)}createDelay(se=1){return new u(this,{maxDelayTime:se})}createDynamicsCompressor(){return new d(this)}createGain(){return new g(this)}createIIRFilter(se,Re){return new w(this,{feedback:Re,feedforward:se})}createOscillator(){return new C(this)}createPanner(){return new O(this)}createPeriodicWave(se,Re,Oe={disableNormalization:!1}){return new Y(this,{...Oe,imag:Re,real:se})}createStereoPanner(){return new q(this)}createWaveShaper(){return new ue(this)}decodeAudioData(se,Re,Oe){return s(this._nativeContext,se).then(Ce=>(typeof Re=="function"&&Re(Ce),Ce),Ce=>{throw typeof Oe=="function"&&Oe(Ce),Ce})}},DEFAULT_OPTIONS$f={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},createBiquadFilterNodeConstructor=(t,e,n,i,o,a,l,c)=>class extends t{constructor(s,u){const d=a(s),g={...DEFAULT_OPTIONS$f,...u},w=o(d,g),x=l(d),C=x?n():null;super(s,!1,w,C),this._Q=e(this,x,w.Q,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._detune=e(this,x,w.detune,1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT),-1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT)),this._frequency=e(this,x,w.frequency,s.sampleRate/2,0),this._gain=e(this,x,w.gain,40*Math.log10(MOST_POSITIVE_SINGLE_FLOAT),MOST_NEGATIVE_SINGLE_FLOAT),this._nativeBiquadFilterNode=w,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(s){this._nativeBiquadFilterNode.type=s}getFrequencyResponse(s,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(s,u,d)}catch(g){throw g.code===11?i():g}if(s.length!==u.length||u.length!==d.length)throw i()}},createBiquadFilterNodeRendererFactory=(t,e,n,i,o)=>()=>{const a=new WeakMap,l=async(c,p)=>{let s=n(c);const u=isOwnedByContext(s,p);if(!u){const d={Q:s.Q.value,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,detune:s.detune.value,frequency:s.frequency.value,gain:s.gain.value,type:s.type};s=e(p,d)}return a.set(p,s),u?(await t(p,c.Q,s.Q),await t(p,c.detune,s.detune),await t(p,c.frequency,s.frequency),await t(p,c.gain,s.gain)):(await i(p,c.Q,s.Q),await i(p,c.detune,s.detune),await i(p,c.frequency,s.frequency),await i(p,c.gain,s.gain)),await o(c,p,s),s};return{render(c,p){const s=a.get(p);return s!==void 0?Promise.resolve(s):l(c,p)}}},createCacheTestResult=(t,e)=>(n,i)=>{const o=e.get(n);if(o!==void 0)return o;const a=t.get(n);if(a!==void 0)return a;try{const l=i();return l instanceof Promise?(t.set(n,l),l.catch(()=>!1).then(c=>(t.delete(n),e.set(n,c),c))):(e.set(n,l),l)}catch{return e.set(n,!1),!1}},DEFAULT_OPTIONS$e={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},createChannelMergerNodeConstructor=(t,e,n,i,o)=>class extends t{constructor(l,c){const p=i(l),s={...DEFAULT_OPTIONS$e,...c},u=n(p,s),d=o(p)?e():null;super(l,!1,u,d)}},createChannelMergerNodeRendererFactory=(t,e,n)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=e(a);if(!isOwnedByContext(c,l)){const s={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=t(l,s)}return i.set(l,c),await n(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},DEFAULT_OPTIONS$d={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},createChannelSplitterNodeConstructor=(t,e,n,i,o,a)=>class extends t{constructor(c,p){const s=i(c),u=a({...DEFAULT_OPTIONS$d,...p}),d=n(s,u),g=o(s)?e():null;super(c,!1,d,g)}},createChannelSplitterNodeRendererFactory=(t,e,n)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=e(a);if(!isOwnedByContext(c,l)){const s={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=t(l,s)}return i.set(l,c),await n(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},createConnectAudioParam=t=>(e,n,i)=>t(n,e,i),createConnectMultipleOutputs=t=>(e,n,i=0,o=0)=>{const a=e[i];if(a===void 0)throw t();return isNativeAudioNode$1(n)?a.connect(n,0,o):a.connect(n,0)},createConnectedNativeAudioBufferSourceNodeFactory=t=>(e,n)=>{const i=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=e.createBuffer(1,2,44100);return i.buffer=o,i.loop=!0,i.connect(n),i.start(),()=>{i.stop(),i.disconnect(n)}},DEFAULT_OPTIONS$c={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},createConstantSourceNodeConstructor=(t,e,n,i,o,a,l)=>class extends t{constructor(p,s){const u=o(p),d={...DEFAULT_OPTIONS$c,...s},g=i(u,d),w=a(u),x=w?n():null;super(p,!1,g,x),this._constantSourceNodeRenderer=x,this._nativeConstantSourceNode=g,this._offset=e(this,w,g.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(p){const s=typeof p=="function"?l(this,p):null;this._nativeConstantSourceNode.onended=s;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===s?p:u}start(p=0){if(this._nativeConstantSourceNode.start(p),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=p),this.context.state!=="closed"){setInternalStateToActive(this);const s=()=>{this._nativeConstantSourceNode.removeEventListener("ended",s),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeConstantSourceNode.addEventListener("ended",s)}}stop(p=0){this._nativeConstantSourceNode.stop(p),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=p)}},createConstantSourceNodeRendererFactory=(t,e,n,i,o)=>()=>{const a=new WeakMap;let l=null,c=null;const p=async(s,u)=>{let d=n(s);const g=isOwnedByContext(d,u);if(!g){const w={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,w),l!==null&&d.start(l),c!==null&&d.stop(c)}return a.set(u,d),g?await t(u,s.offset,d.offset):await i(u,s.offset,d.offset),await o(s,u,d),d};return{set start(s){l=s},set stop(s){c=s},render(s,u){const d=a.get(u);return d!==void 0?Promise.resolve(d):p(s,u)}}},createConvertNumberToUnsignedLong=t=>e=>(t[0]=e,t[0]),DEFAULT_OPTIONS$b={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},createConvolverNodeConstructor=(t,e,n,i,o,a)=>class extends t{constructor(c,p){const s=i(c),u={...DEFAULT_OPTIONS$b,...p},d=n(s,u),w=o(s)?e():null;super(c,!1,d,w),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&a(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const p=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=p.createBuffer(1,1,p.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},createConvolverNodeRendererFactory=(t,e,n)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=e(a);if(!isOwnedByContext(c,l)){const s={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=t(l,s)}return i.set(l,c),isNativeAudioNodeFaker(c)?await n(a,l,c.inputs[0]):await n(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},createCreateNativeOfflineAudioContext=(t,e)=>(n,i,o)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,i,o)}catch(a){throw a.name==="SyntaxError"?t():a}},createDataCloneError=()=>new DOMException("","DataCloneError"),detachArrayBuffer=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(i=>{const o=()=>{n.onmessage=null,e.close(),n.close(),i()};n.onmessage=()=>o();try{e.postMessage(t,[t])}catch{}finally{o()}})},createDecodeAudioData=(t,e,n,i,o,a,l,c,p,s,u)=>(d,g)=>{const w=l(d)?d:a(d);if(o.has(g)){const x=n();return Promise.reject(x)}try{o.add(g)}catch{}return e(p,()=>p(w))?w.decodeAudioData(g).then(x=>(detachArrayBuffer(g).catch(()=>{}),e(c,()=>c(x))||u(x),t.add(x),x)):new Promise((x,C)=>{const O=async()=>{try{await detachArrayBuffer(g)}catch{}},Y=q=>{C(q),O()};try{w.decodeAudioData(g,q=>{typeof q.copyFromChannel!="function"&&(s(q),wrapAudioBufferGetChannelDataMethod(q)),t.add(q),O().then(()=>x(q))},q=>{Y(q===null?i():q)})}catch(q){Y(q)}})},createDecrementCycleCounter=(t,e,n,i,o,a,l,c)=>(p,s)=>{const u=e.get(p);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=a(p.context),g=c(d);if(u===s){if(e.delete(p),!g&&l(p)){const w=i(p),{outputs:x}=n(p);for(const C of x)if(isAudioNodeOutputConnection(C)){const O=i(C[0]);t(w,O,C[1],C[2])}else{const O=o(C[0]);w.connect(O,C[1])}}}else e.set(p,u-s)},DEFAULT_OPTIONS$a={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},createDelayNodeConstructor=(t,e,n,i,o,a,l)=>class extends t{constructor(p,s){const u=o(p),d={...DEFAULT_OPTIONS$a,...s},g=i(u,d),w=a(u),x=w?n(d.maxDelayTime):null;super(p,!1,g,x),this._delayTime=e(this,w,g.delayTime),l(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},createDelayNodeRendererFactory=(t,e,n,i,o)=>a=>{const l=new WeakMap,c=async(p,s)=>{let u=n(p);const d=isOwnedByContext(u,s);if(!d){const g={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:a};u=e(s,g)}return l.set(s,u),d?await t(s,p.delayTime,u.delayTime):await i(s,p.delayTime,u.delayTime),await o(p,s,u),u};return{render(p,s){const u=l.get(s);return u!==void 0?Promise.resolve(u):c(p,s)}}},createDeleteActiveInputConnectionToAudioNode=t=>(e,n,i,o)=>t(e[o],a=>a[0]===n&&a[1]===i),createDeleteUnrenderedAudioWorkletNode=t=>(e,n)=>{t(e).delete(n)},isDelayNode=t=>"delayTime"in t,createDetectCycles=(t,e,n)=>function i(o,a){const l=isAudioNode$1(a)?a:n(t,a);if(isDelayNode(l))return[];if(o[0]===l)return[o];if(o.includes(l))return[];const{outputs:c}=e(l);return Array.from(c).map(p=>i([...o,l],p[0])).reduce((p,s)=>p.concat(s),[])},getOutputAudioNodeAtIndex=(t,e,n)=>{const i=e[n];if(i===void 0)throw t();return i},createDisconnectMultipleOutputs=t=>(e,n=void 0,i=void 0,o=0)=>n===void 0?e.forEach(a=>a.disconnect()):typeof n=="number"?getOutputAudioNodeAtIndex(t,e,n).disconnect():isNativeAudioNode$1(n)?i===void 0?e.forEach(a=>a.disconnect(n)):o===void 0?getOutputAudioNodeAtIndex(t,e,i).disconnect(n,0):getOutputAudioNodeAtIndex(t,e,i).disconnect(n,0,o):i===void 0?e.forEach(a=>a.disconnect(n)):getOutputAudioNodeAtIndex(t,e,i).disconnect(n,0),DEFAULT_OPTIONS$9={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},createDynamicsCompressorNodeConstructor=(t,e,n,i,o,a,l,c)=>class extends t{constructor(s,u){const d=a(s),g={...DEFAULT_OPTIONS$9,...u},w=i(d,g),x=l(d),C=x?n():null;super(s,!1,w,C),this._attack=e(this,x,w.attack),this._knee=e(this,x,w.knee),this._nativeDynamicsCompressorNode=w,this._ratio=e(this,x,w.ratio),this._release=e(this,x,w.release),this._threshold=e(this,x,w.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(s){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=s,s>2)throw this._nativeDynamicsCompressorNode.channelCount=u,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(s){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=s,s==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},createDynamicsCompressorNodeRendererFactory=(t,e,n,i,o)=>()=>{const a=new WeakMap,l=async(c,p)=>{let s=n(c);const u=isOwnedByContext(s,p);if(!u){const d={attack:s.attack.value,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,knee:s.knee.value,ratio:s.ratio.value,release:s.release.value,threshold:s.threshold.value};s=e(p,d)}return a.set(p,s),u?(await t(p,c.attack,s.attack),await t(p,c.knee,s.knee),await t(p,c.ratio,s.ratio),await t(p,c.release,s.release),await t(p,c.threshold,s.threshold)):(await i(p,c.attack,s.attack),await i(p,c.knee,s.knee),await i(p,c.ratio,s.ratio),await i(p,c.release,s.release),await i(p,c.threshold,s.threshold)),await o(c,p,s),s};return{render(c,p){const s=a.get(p);return s!==void 0?Promise.resolve(s):l(c,p)}}},createEncodingError=()=>new DOMException("","EncodingError"),createEvaluateSource=t=>e=>new Promise((n,i)=>{if(t===null){i(new SyntaxError);return}const o=t.document.head;if(o===null)i(new SyntaxError);else{const a=t.document.createElement("script"),l=new Blob([e],{type:"application/javascript"}),c=URL.createObjectURL(l),p=t.onerror,s=()=>{t.onerror=p,URL.revokeObjectURL(c)};t.onerror=(u,d,g,w,x)=>{if(d===c||d===t.location.href&&g===1&&w===1)return s(),i(x),!1;if(p!==null)return p(u,d,g,w,x)},a.onerror=()=>{s(),i(new SyntaxError)},a.onload=()=>{s(),n()},a.src=c,a.type="module",o.appendChild(a)}}),createEventTargetConstructor=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,i,o){if(i!==null){let a=this._listeners.get(i);a===void 0&&(a=t(this,i),typeof i=="function"&&this._listeners.set(i,a)),this._nativeEventTarget.addEventListener(n,a,o)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,i,o){const a=i===null?void 0:this._listeners.get(i);this._nativeEventTarget.removeEventListener(n,a===void 0?null:a,o)}},createExposeCurrentFrameAndCurrentTime=t=>(e,n,i)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return i()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},createFetchSource=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},DEFAULT_OPTIONS$8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},createGainNodeConstructor=(t,e,n,i,o,a)=>class extends t{constructor(c,p){const s=o(c),u={...DEFAULT_OPTIONS$8,...p},d=i(s,u),g=a(s),w=g?n():null;super(c,!1,d,w),this._gain=e(this,g,d.gain,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get gain(){return this._gain}},createGainNodeRendererFactory=(t,e,n,i,o)=>()=>{const a=new WeakMap,l=async(c,p)=>{let s=n(c);const u=isOwnedByContext(s,p);if(!u){const d={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:s.gain.value};s=e(p,d)}return a.set(p,s),u?await t(p,c.gain,s.gain):await i(p,c.gain,s.gain),await o(c,p,s),s};return{render(c,p){const s=a.get(p);return s!==void 0?Promise.resolve(s):l(c,p)}}},createGetActiveAudioWorkletNodeInputs=(t,e)=>n=>e(t,n),createGetAudioNodeRenderer=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},createGetAudioNodeTailTime=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},createGetAudioParamRenderer=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},createGetBackupOfflineAudioContext=t=>e=>t.get(e),createInvalidStateError=()=>new DOMException("","InvalidStateError"),createGetNativeContext=t=>e=>{const n=t.get(e);if(n===void 0)throw createInvalidStateError();return n},createGetOrCreateBackupOfflineAudioContext=(t,e)=>n=>{let i=t.get(n);if(i!==void 0)return i;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new e(1,1,44100),t.set(n,i),i},createGetUnrenderedAudioWorkletNodes=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},createInvalidAccessError=()=>new DOMException("","InvalidAccessError"),wrapIIRFilterNodeGetFrequencyResponseMethod=t=>{t.getFrequencyResponse=(e=>(n,i,o)=>{if(n.length!==i.length||i.length!==o.length)throw createInvalidAccessError();return e.call(t,n,i,o)})(t.getFrequencyResponse)},DEFAULT_OPTIONS$7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},createIIRFilterNodeConstructor=(t,e,n,i,o,a)=>class extends t{constructor(c,p){const s=i(c),u=o(s),d={...DEFAULT_OPTIONS$7,...p},g=e(s,u?null:c.baseLatency,d),w=u?n(d.feedback,d.feedforward):null;super(c,!1,g,w),wrapIIRFilterNodeGetFrequencyResponseMethod(g),this._nativeIIRFilterNode=g,a(this,1)}getFrequencyResponse(c,p,s){return this._nativeIIRFilterNode.getFrequencyResponse(c,p,s)}},filterBuffer=(t,e,n,i,o,a,l,c,p,s,u)=>{const d=s.length;let g=c;for(let w=0;w<d;w+=1){let x=n[0]*s[w];for(let C=1;C<o;C+=1){const O=g-C&p-1;x+=n[C]*a[O],x-=t[C]*l[O]}for(let C=o;C<i;C+=1)x+=n[C]*a[g-C&p-1];for(let C=o;C<e;C+=1)x-=t[C]*l[g-C&p-1];a[g]=s[w],l[g]=x,g=g+1&p-1,u[w]=x}return g},filterFullBuffer=(t,e,n,i)=>{const o=n instanceof Float64Array?n:new Float64Array(n),a=i instanceof Float64Array?i:new Float64Array(i),l=o.length,c=a.length,p=Math.min(l,c);if(o[0]!==1){for(let x=0;x<l;x+=1)a[x]/=o[0];for(let x=1;x<c;x+=1)o[x]/=o[0]}const s=32,u=new Float32Array(s),d=new Float32Array(s),g=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),w=t.numberOfChannels;for(let x=0;x<w;x+=1){const C=t.getChannelData(x),O=g.getChannelData(x);u.fill(0),d.fill(0),filterBuffer(o,l,a,c,p,u,d,0,s,C,O)}return g},createIIRFilterNodeRendererFactory=(t,e,n,i,o)=>(a,l)=>{const c=new WeakMap;let p=null;const s=async(u,d)=>{let g=null,w=e(u);const x=isOwnedByContext(w,d);if(d.createIIRFilter===void 0?g=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):x||(w=d.createIIRFilter(l,a)),c.set(d,g===null?w:g),g!==null){if(p===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const O=new n(u.context.destination.channelCount,u.context.length,d.sampleRate);p=(async()=>{await i(u,O,O.destination);const Y=await o(O);return filterFullBuffer(Y,d,a,l)})()}const C=await p;return g.buffer=C,g.start(0),g}return await i(u,d,w),w};return{render(u,d){const g=c.get(d);return g!==void 0?Promise.resolve(g):s(u,d)}}},createIncrementCycleCounterFactory=(t,e,n,i,o,a)=>l=>(c,p)=>{const s=t.get(c);if(s===void 0){if(!l&&a(c)){const u=i(c),{outputs:d}=n(c);for(const g of d)if(isAudioNodeOutputConnection(g)){const w=i(g[0]);e(u,w,g[1],g[2])}else{const w=o(g[0]);u.disconnect(w,g[1])}}t.set(c,p)}else t.set(c,s+p)},createIsAnyAudioContext=(t,e)=>n=>{const i=t.get(n);return e(i)||e(n)},createIsAnyAudioNode=(t,e)=>n=>t.has(n)||e(n),createIsAnyAudioParam=(t,e)=>n=>t.has(n)||e(n),createIsAnyOfflineAudioContext=(t,e)=>n=>{const i=t.get(n);return e(i)||e(n)},createIsNativeAudioContext=t=>e=>t!==null&&e instanceof t,createIsNativeAudioNode=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,createIsNativeAudioParam=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,createIsNativeContext=(t,e)=>n=>t(n)||e(n),createIsNativeOfflineAudioContext=t=>e=>t!==null&&e instanceof t,createIsSecureContext=t=>t!==null&&t.isSecureContext,createMediaElementAudioSourceNodeConstructor=(t,e,n,i)=>class extends t{constructor(a,l){const c=n(a),p=e(c,l);if(i(c))throw TypeError();super(a,!0,p,null),this._nativeMediaElementAudioSourceNode=p}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},DEFAULT_OPTIONS$6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},createMediaStreamAudioDestinationNodeConstructor=(t,e,n,i)=>class extends t{constructor(a,l){const c=n(a);if(i(c))throw new TypeError;const p={...DEFAULT_OPTIONS$6,...l},s=e(c,p);super(a,!1,s,null),this._nativeMediaStreamAudioDestinationNode=s}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},createMediaStreamAudioSourceNodeConstructor=(t,e,n,i)=>class extends t{constructor(a,l){const c=n(a),p=e(c,l);if(i(c))throw new TypeError;super(a,!0,p,null),this._nativeMediaStreamAudioSourceNode=p}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},createMediaStreamTrackAudioSourceNodeConstructor=(t,e,n)=>class extends t{constructor(o,a){const l=n(o),c=e(l,a);super(o,!0,c,null)}},createMinimalBaseAudioContextConstructor=(t,e,n,i,o,a)=>class extends n{constructor(c,p){super(c),this._nativeContext=c,CONTEXT_STORE.set(this,c),i(c)&&o.set(c,new Set),this._destination=new t(this,p),this._listener=e(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const p=typeof c=="function"?a(this,c):null;this._nativeContext.onstatechange=p;const s=this._nativeContext.onstatechange;this._onstatechange=s!==null&&s===p?c:s}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},testPromiseSupport=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},createMonitorConnections=(t,e)=>(n,i,o)=>{const a=new Set;return n.connect=(l=>(c,p=0,s=0)=>{const u=a.size===0;if(e(c))return l.call(n,c,p,s),t(a,[c,p,s],d=>d[0]===c&&d[1]===p&&d[2]===s,!0),u&&i(),c;l.call(n,c,p),t(a,[c,p],d=>d[0]===c&&d[1]===p,!0),u&&i()})(n.connect),n.disconnect=(l=>(c,p,s)=>{const u=a.size>0;if(c===void 0)l.apply(n),a.clear();else if(typeof c=="number"){l.call(n,c);for(const g of a)g[1]===c&&a.delete(g)}else{e(c)?l.call(n,c,p,s):l.call(n,c,p);for(const g of a)g[0]===c&&(p===void 0||g[1]===p)&&(s===void 0||g[2]===s)&&a.delete(g)}const d=a.size===0;u&&d&&o()})(n.disconnect),n},assignNativeAudioNodeOption=(t,e,n)=>{const i=e[n];i!==void 0&&i!==t[n]&&(t[n]=i)},assignNativeAudioNodeOptions=(t,e)=>{assignNativeAudioNodeOption(t,e,"channelCount"),assignNativeAudioNodeOption(t,e,"channelCountMode"),assignNativeAudioNodeOption(t,e,"channelInterpretation")},testAnalyserNodeGetFloatTimeDomainDataMethodSupport=t=>typeof t.getFloatTimeDomainData=="function",wrapAnalyserNodeGetFloatTimeDomainDataMethod=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const i=Math.max(n.length,t.fftSize);for(let o=0;o<i;o+=1)e[o]=(n[o]-128)*.0078125;return e}},createNativeAnalyserNodeFactory=(t,e)=>(n,i)=>{const o=n.createAnalyser();if(assignNativeAudioNodeOptions(o,i),!(i.maxDecibels>i.minDecibels))throw e();return assignNativeAudioNodeOption(o,i,"fftSize"),assignNativeAudioNodeOption(o,i,"maxDecibels"),assignNativeAudioNodeOption(o,i,"minDecibels"),assignNativeAudioNodeOption(o,i,"smoothingTimeConstant"),t(testAnalyserNodeGetFloatTimeDomainDataMethodSupport,()=>testAnalyserNodeGetFloatTimeDomainDataMethodSupport(o))||wrapAnalyserNodeGetFloatTimeDomainDataMethod(o),o},createNativeAudioBufferConstructor=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,assignNativeAudioNodeAudioParamValue=(t,e,n)=>{const i=e[n];i!==void 0&&i!==t[n].value&&(t[n].value=i)},wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=t=>{t.start=(e=>{let n=!1;return(i=0,o=0,a)=>{if(n)throw createInvalidStateError();e.call(t,i,o,a),n=!0}})(t.start)},wrapAudioScheduledSourceNodeStartMethodNegativeParameters=t=>{t.start=(e=>(n=0,i=0,o)=>{if(typeof o=="number"&&o<0||i<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,i,o)})(t.start)},wrapAudioScheduledSourceNodeStopMethodNegativeParameters=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},createNativeAudioBufferSourceNodeFactory=(t,e,n,i,o,a,l,c,p,s,u)=>(d,g)=>{const w=d.createBufferSource();return assignNativeAudioNodeOptions(w,g),assignNativeAudioNodeAudioParamValue(w,g,"playbackRate"),assignNativeAudioNodeOption(w,g,"buffer"),assignNativeAudioNodeOption(w,g,"loop"),assignNativeAudioNodeOption(w,g,"loopEnd"),assignNativeAudioNodeOption(w,g,"loopStart"),e(n,()=>n(d))||wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(w),e(i,()=>i(d))||p(w),e(o,()=>o(d))||s(w,d),e(a,()=>a(d))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(w),e(l,()=>l(d))||u(w,d),e(c,()=>c(d))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(w),t(d,w),w},createNativeAudioContextConstructor=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,createNativeAudioDestinationNodeFactory=(t,e)=>(n,i,o)=>{const a=n.destination;if(a.channelCount!==i)try{a.channelCount=i}catch{}o&&a.channelCountMode!=="explicit"&&(a.channelCountMode="explicit"),a.maxChannelCount===0&&Object.defineProperty(a,"maxChannelCount",{value:i});const l=t(n,{channelCount:i,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return e(l,"channelCount",c=>()=>c.call(l),c=>p=>{c.call(l,p);try{a.channelCount=p}catch(s){if(p>a.maxChannelCount)throw s}}),e(l,"channelCountMode",c=>()=>c.call(l),c=>p=>{c.call(l,p),a.channelCountMode=p}),e(l,"channelInterpretation",c=>()=>c.call(l),c=>p=>{c.call(l,p),a.channelInterpretation=p}),Object.defineProperty(l,"maxChannelCount",{get:()=>a.maxChannelCount}),l.connect(a),l},createNativeAudioWorkletNodeConstructor=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,testClonabilityOfAudioWorkletNodeOptions=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},createNativeAudioWorkletNodeFactory=(t,e,n,i,o)=>(a,l,c,p,s,u)=>{if(c!==null)try{const d=new c(a,p,u),g=new Map;let w=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>w,set:x=>{typeof w=="function"&&d.removeEventListener("processorerror",w),w=typeof x=="function"?x:null,typeof w=="function"&&d.addEventListener("processorerror",w)}}}),d.addEventListener=(x=>(...C)=>{if(C[0]==="processorerror"){const O=typeof C[1]=="function"?C[1]:typeof C[1]=="object"&&C[1]!==null&&typeof C[1].handleEvent=="function"?C[1].handleEvent:null;if(O!==null){const Y=g.get(C[1]);Y!==void 0?C[1]=Y:(C[1]=q=>{q.type==="error"?(Object.defineProperties(q,{type:{value:"processorerror"}}),O(q)):O(new ErrorEvent(C[0],{...q}))},g.set(O,C[1]))}}return x.call(d,"error",C[1],C[2]),x.call(d,...C)})(d.addEventListener),d.removeEventListener=(x=>(...C)=>{if(C[0]==="processorerror"){const O=g.get(C[1]);O!==void 0&&(g.delete(C[1]),C[1]=O)}return x.call(d,"error",C[1],C[2]),x.call(d,C[0],C[1],C[2])})(d.removeEventListener),u.numberOfOutputs!==0){const x=n(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(x).connect(a.destination),o(d,()=>x.disconnect(),()=>x.connect(a.destination))}return d}catch(d){throw d.code===11?i():d}if(s===void 0)throw i();return testClonabilityOfAudioWorkletNodeOptions(u),e(a,l,s,u)},computeBufferSize=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),cloneAudioWorkletNodeOptions=t=>new Promise((e,n)=>{const{port1:i,port2:o}=new MessageChannel;i.onmessage=({data:a})=>{i.close(),o.close(),e(a)},i.onmessageerror=({data:a})=>{i.close(),o.close(),n(a)},o.postMessage(t)}),createAudioWorkletProcessorPromise=async(t,e)=>{const n=await cloneAudioWorkletNodeOptions(e);return new t(n)},createAudioWorkletProcessor=(t,e,n,i)=>{let o=NODE_TO_PROCESSOR_MAPS.get(t);o===void 0&&(o=new WeakMap,NODE_TO_PROCESSOR_MAPS.set(t,o));const a=createAudioWorkletProcessorPromise(n,i);return o.set(e,a),a},createNativeAudioWorkletNodeFakerFactory=(t,e,n,i,o,a,l,c,p,s,u,d,g)=>(w,x,C,O)=>{if(O.numberOfInputs===0&&O.numberOfOutputs===0)throw p();const Y=Array.isArray(O.outputChannelCount)?O.outputChannelCount:Array.from(O.outputChannelCount);if(Y.some(i0=>i0<1))throw p();if(Y.length!==O.numberOfOutputs)throw e();if(O.channelCountMode!=="explicit")throw p();const q=O.channelCount*O.numberOfInputs,ue=Y.reduce((i0,p0)=>i0+p0,0),pe=C.parameterDescriptors===void 0?0:C.parameterDescriptors.length;if(q+pe>6||ue>6)throw p();const se=new MessageChannel,Re=[],Oe=[];for(let i0=0;i0<O.numberOfInputs;i0+=1)Re.push(l(w,{channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation,gain:1})),Oe.push(o(w,{channelCount:O.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:O.channelCount}));const Ce=[];if(C.parameterDescriptors!==void 0)for(const{defaultValue:i0,maxValue:p0,minValue:P0,name:_g}of C.parameterDescriptors){const N0=a(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:O.parameterData[_g]!==void 0?O.parameterData[_g]:i0===void 0?0:i0});Object.defineProperties(N0.offset,{defaultValue:{get:()=>i0===void 0?0:i0},maxValue:{get:()=>p0===void 0?MOST_POSITIVE_SINGLE_FLOAT:p0},minValue:{get:()=>P0===void 0?MOST_NEGATIVE_SINGLE_FLOAT:P0}}),Ce.push(N0)}const He=i(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,q+pe)}),$t=computeBufferSize(x,w.sampleRate),Sn=c(w,$t,q+pe,Math.max(1,ue)),xn=o(w,{channelCount:Math.max(1,ue),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,ue)}),Lr=[];for(let i0=0;i0<O.numberOfOutputs;i0+=1)Lr.push(i(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Y[i0]}));for(let i0=0;i0<O.numberOfInputs;i0+=1){Re[i0].connect(Oe[i0]);for(let p0=0;p0<O.channelCount;p0+=1)Oe[i0].connect(He,p0,i0*O.channelCount+p0)}const jr=new ReadOnlyMap(C.parameterDescriptors===void 0?[]:C.parameterDescriptors.map(({name:i0},p0)=>{const P0=Ce[p0];return P0.connect(He,0,q+p0),P0.start(0),[i0,P0.offset]}));He.connect(Sn);let et=O.channelInterpretation,Ft=null;const Tt=O.numberOfOutputs===0?[Sn]:Lr,ze={get bufferSize(){return $t},get channelCount(){return O.channelCount},set channelCount(i0){throw n()},get channelCountMode(){return O.channelCountMode},set channelCountMode(i0){throw n()},get channelInterpretation(){return et},set channelInterpretation(i0){for(const p0 of Re)p0.channelInterpretation=i0;et=i0},get context(){return Sn.context},get inputs(){return Re},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},get onprocessorerror(){return Ft},set onprocessorerror(i0){typeof Ft=="function"&&ze.removeEventListener("processorerror",Ft),Ft=typeof i0=="function"?i0:null,typeof Ft=="function"&&ze.addEventListener("processorerror",Ft)},get parameters(){return jr},get port(){return se.port2},addEventListener(...i0){return Sn.addEventListener(i0[0],i0[1],i0[2])},connect:t.bind(null,Tt),disconnect:s.bind(null,Tt),dispatchEvent(...i0){return Sn.dispatchEvent(i0[0])},removeEventListener(...i0){return Sn.removeEventListener(i0[0],i0[1],i0[2])}},Ht=new Map;se.port1.addEventListener=(i0=>(...p0)=>{if(p0[0]==="message"){const P0=typeof p0[1]=="function"?p0[1]:typeof p0[1]=="object"&&p0[1]!==null&&typeof p0[1].handleEvent=="function"?p0[1].handleEvent:null;if(P0!==null){const _g=Ht.get(p0[1]);_g!==void 0?p0[1]=_g:(p0[1]=N0=>{u(w.currentTime,w.sampleRate,()=>P0(N0))},Ht.set(P0,p0[1]))}}return i0.call(se.port1,p0[0],p0[1],p0[2])})(se.port1.addEventListener),se.port1.removeEventListener=(i0=>(...p0)=>{if(p0[0]==="message"){const P0=Ht.get(p0[1]);P0!==void 0&&(Ht.delete(p0[1]),p0[1]=P0)}return i0.call(se.port1,p0[0],p0[1],p0[2])})(se.port1.removeEventListener);let Ae=null;Object.defineProperty(se.port1,"onmessage",{get:()=>Ae,set:i0=>{typeof Ae=="function"&&se.port1.removeEventListener("message",Ae),Ae=typeof i0=="function"?i0:null,typeof Ae=="function"&&(se.port1.addEventListener("message",Ae),se.port1.start())}}),C.prototype.port=se.port1;let Be=null;createAudioWorkletProcessor(w,ze,C,O).then(i0=>Be=i0);const No=createNestedArrays(O.numberOfInputs,O.channelCount),ah=createNestedArrays(O.numberOfOutputs,Y),Mo=C.parameterDescriptors===void 0?[]:C.parameterDescriptors.reduce((i0,{name:p0})=>({...i0,[p0]:new Float32Array(128)}),{});let t0=!0;const o0=()=>{O.numberOfOutputs>0&&Sn.disconnect(xn);for(let i0=0,p0=0;i0<O.numberOfOutputs;i0+=1){const P0=Lr[i0];for(let _g=0;_g<Y[i0];_g+=1)xn.disconnect(P0,p0+_g,_g);p0+=Y[i0]}},Xr=new Map;Sn.onaudioprocess=({inputBuffer:i0,outputBuffer:p0})=>{if(Be!==null){const P0=d(ze);for(let _g=0;_g<$t;_g+=128){for(let N0=0;N0<O.numberOfInputs;N0+=1)for(let F0=0;F0<O.channelCount;F0+=1)copyFromChannel(i0,No[N0],F0,F0,_g);C.parameterDescriptors!==void 0&&C.parameterDescriptors.forEach(({name:N0},F0)=>{copyFromChannel(i0,Mo,N0,q+F0,_g)});for(let N0=0;N0<O.numberOfInputs;N0+=1)for(let F0=0;F0<Y[N0];F0+=1)ah[N0][F0].byteLength===0&&(ah[N0][F0]=new Float32Array(128));try{const N0=No.map((U0,B0)=>{if(P0[B0].size>0)return Xr.set(B0,$t/128),U0;const Kg=Xr.get(B0);return Kg===void 0?[]:(U0.every(r1=>r1.every(Ug=>Ug===0))&&(Kg===1?Xr.delete(B0):Xr.set(B0,Kg-1)),U0)});t0=u(w.currentTime+_g/w.sampleRate,w.sampleRate,()=>Be.process(N0,ah,Mo));for(let U0=0,B0=0;U0<O.numberOfOutputs;U0+=1){for(let Zg=0;Zg<Y[U0];Zg+=1)copyToChannel(p0,ah[U0],Zg,B0+Zg,_g);B0+=Y[U0]}}catch(N0){t0=!1,ze.dispatchEvent(new ErrorEvent("processorerror",{colno:N0.colno,filename:N0.filename,lineno:N0.lineno,message:N0.message}))}if(!t0){for(let N0=0;N0<O.numberOfInputs;N0+=1){Re[N0].disconnect(Oe[N0]);for(let F0=0;F0<O.channelCount;F0+=1)Oe[_g].disconnect(He,F0,N0*O.channelCount+F0)}if(C.parameterDescriptors!==void 0){const N0=C.parameterDescriptors.length;for(let F0=0;F0<N0;F0+=1){const U0=Ce[F0];U0.disconnect(He,0,q+F0),U0.stop()}}He.disconnect(Sn),Sn.onaudioprocess=null,a0?o0():Sg();break}}}};let a0=!1;const Ih=l(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),S0=()=>Sn.connect(Ih).connect(w.destination),Sg=()=>{Sn.disconnect(Ih),Ih.disconnect()},n1=()=>{if(t0){Sg(),O.numberOfOutputs>0&&Sn.connect(xn);for(let i0=0,p0=0;i0<O.numberOfOutputs;i0+=1){const P0=Lr[i0];for(let _g=0;_g<Y[i0];_g+=1)xn.connect(P0,p0+_g,_g);p0+=Y[i0]}}a0=!0},eg=()=>{t0&&(S0(),o0()),a0=!1};return S0(),g(ze,n1,eg)},createNativeBiquadFilterNode=(t,e)=>{const n=t.createBiquadFilter();return assignNativeAudioNodeOptions(n,e),assignNativeAudioNodeAudioParamValue(n,e,"Q"),assignNativeAudioNodeAudioParamValue(n,e,"detune"),assignNativeAudioNodeAudioParamValue(n,e,"frequency"),assignNativeAudioNodeAudioParamValue(n,e,"gain"),assignNativeAudioNodeOption(n,e,"type"),n},createNativeChannelMergerNodeFactory=(t,e)=>(n,i)=>{const o=n.createChannelMerger(i.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,o),assignNativeAudioNodeOptions(o,i),o},wrapChannelSplitterNode=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw createInvalidStateError()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw createInvalidStateError()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw createInvalidStateError()}})},createNativeChannelSplitterNode=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return assignNativeAudioNodeOptions(n,e),wrapChannelSplitterNode(n),n},createNativeConstantSourceNodeFactory=(t,e,n,i,o)=>(a,l)=>{if(a.createConstantSource===void 0)return n(a,l);const c=a.createConstantSource();return assignNativeAudioNodeOptions(c,l),assignNativeAudioNodeAudioParamValue(c,l,"offset"),e(i,()=>i(a))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(c),e(o,()=>o(a))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(c),t(a,c),c},interceptConnections=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),createNativeConstantSourceNodeFakerFactory=(t,e,n,i)=>(o,{offset:a,...l})=>{const c=o.createBuffer(1,2,44100),p=e(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=n(o,{...l,gain:a}),u=c.getChannelData(0);u[0]=1,u[1]=1,p.buffer=c,p.loop=!0;const d={get bufferSize(){},get channelCount(){return s.channelCount},set channelCount(x){s.channelCount=x},get channelCountMode(){return s.channelCountMode},set channelCountMode(x){s.channelCountMode=x},get channelInterpretation(){return s.channelInterpretation},set channelInterpretation(x){s.channelInterpretation=x},get context(){return s.context},get inputs(){return[]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return s.numberOfOutputs},get offset(){return s.gain},get onended(){return p.onended},set onended(x){p.onended=x},addEventListener(...x){return p.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return p.dispatchEvent(x[0])},removeEventListener(...x){return p.removeEventListener(x[0],x[1],x[2])},start(x=0){p.start.call(p,x)},stop(x=0){p.stop.call(p,x)}},g=()=>p.connect(s),w=()=>p.disconnect(s);return t(o,p),i(interceptConnections(d,s),g,w)},createNativeConvolverNodeFactory=(t,e)=>(n,i)=>{const o=n.createConvolver();if(assignNativeAudioNodeOptions(o,i),i.disableNormalization===o.normalize&&(o.normalize=!i.disableNormalization),assignNativeAudioNodeOption(o,i,"buffer"),i.channelCount>2||(e(o,"channelCount",a=>()=>a.call(o),a=>l=>{if(l>2)throw t();return a.call(o,l)}),i.channelCountMode==="max"))throw t();return e(o,"channelCountMode",a=>()=>a.call(o),a=>l=>{if(l==="max")throw t();return a.call(o,l)}),o},createNativeDelayNode=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return assignNativeAudioNodeOptions(n,e),assignNativeAudioNodeAudioParamValue(n,e,"delayTime"),n},createNativeDynamicsCompressorNodeFactory=t=>(e,n)=>{const i=e.createDynamicsCompressor();if(assignNativeAudioNodeOptions(i,n),n.channelCount>2||n.channelCountMode==="max")throw t();return assignNativeAudioNodeAudioParamValue(i,n,"attack"),assignNativeAudioNodeAudioParamValue(i,n,"knee"),assignNativeAudioNodeAudioParamValue(i,n,"ratio"),assignNativeAudioNodeAudioParamValue(i,n,"release"),assignNativeAudioNodeAudioParamValue(i,n,"threshold"),i},createNativeGainNode=(t,e)=>{const n=t.createGain();return assignNativeAudioNodeOptions(n,e),assignNativeAudioNodeAudioParamValue(n,e,"gain"),n},createNativeIIRFilterNodeFactory=t=>(e,n,i)=>{if(e.createIIRFilter===void 0)return t(e,n,i);const o=e.createIIRFilter(i.feedforward,i.feedback);return assignNativeAudioNodeOptions(o,i),o};function divide(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function multiply(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function evaluatePolynomial(t,e){let n=[0,0];for(let i=t.length-1;i>=0;i-=1)n=multiply(n,e),n[0]+=t[i];return n}const createNativeIIRFilterNodeFakerFactory=(t,e,n,i)=>(o,a,{channelCount:l,channelCountMode:c,channelInterpretation:p,feedback:s,feedforward:u})=>{const d=computeBufferSize(a,o.sampleRate),g=s instanceof Float64Array?s:new Float64Array(s),w=u instanceof Float64Array?u:new Float64Array(u),x=g.length,C=w.length,O=Math.min(x,C);if(x===0||x>20)throw i();if(g[0]===0)throw e();if(C===0||C>20)throw i();if(w[0]===0)throw e();if(g[0]!==1){for(let Ce=0;Ce<C;Ce+=1)w[Ce]/=g[0];for(let Ce=1;Ce<x;Ce+=1)g[Ce]/=g[0]}const Y=n(o,d,l,l);Y.channelCount=l,Y.channelCountMode=c,Y.channelInterpretation=p;const q=32,ue=[],pe=[],se=[];for(let Ce=0;Ce<l;Ce+=1){ue.push(0);const He=new Float32Array(q),$t=new Float32Array(q);He.fill(0),$t.fill(0),pe.push(He),se.push($t)}Y.onaudioprocess=Ce=>{const He=Ce.inputBuffer,$t=Ce.outputBuffer,Sn=He.numberOfChannels;for(let xn=0;xn<Sn;xn+=1){const Lr=He.getChannelData(xn),jr=$t.getChannelData(xn);ue[xn]=filterBuffer(g,x,w,C,O,pe[xn],se[xn],ue[xn],q,Lr,jr)}};const Re=o.sampleRate/2;return interceptConnections({get bufferSize(){return d},get channelCount(){return Y.channelCount},set channelCount(Ce){Y.channelCount=Ce},get channelCountMode(){return Y.channelCountMode},set channelCountMode(Ce){Y.channelCountMode=Ce},get channelInterpretation(){return Y.channelInterpretation},set channelInterpretation(Ce){Y.channelInterpretation=Ce},get context(){return Y.context},get inputs(){return[Y]},get numberOfInputs(){return Y.numberOfInputs},get numberOfOutputs(){return Y.numberOfOutputs},addEventListener(...Ce){return Y.addEventListener(Ce[0],Ce[1],Ce[2])},dispatchEvent(...Ce){return Y.dispatchEvent(Ce[0])},getFrequencyResponse(Ce,He,$t){if(Ce.length!==He.length||He.length!==$t.length)throw t();const Sn=Ce.length;for(let xn=0;xn<Sn;xn+=1){const Lr=-Math.PI*(Ce[xn]/Re),jr=[Math.cos(Lr),Math.sin(Lr)],et=evaluatePolynomial(w,jr),Ft=evaluatePolynomial(g,jr),Tt=divide(et,Ft);He[xn]=Math.sqrt(Tt[0]*Tt[0]+Tt[1]*Tt[1]),$t[xn]=Math.atan2(Tt[1],Tt[0])}},removeEventListener(...Ce){return Y.removeEventListener(Ce[0],Ce[1],Ce[2])}},Y)},createNativeMediaElementAudioSourceNode=(t,e)=>t.createMediaElementSource(e.mediaElement),createNativeMediaStreamAudioDestinationNode=(t,e)=>{const n=t.createMediaStreamDestination();return assignNativeAudioNodeOptions(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},createNativeMediaStreamAudioSourceNode=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((a,l)=>a.id<l.id?-1:a.id>l.id?1:0);const i=n.slice(0,1),o=t.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(o,"mediaStream",{value:e}),o},createNativeMediaStreamTrackAudioSourceNodeFactory=(t,e)=>(n,{mediaStreamTrack:i})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(i);const o=new MediaStream([i]),a=n.createMediaStreamSource(o);if(i.kind!=="audio")throw t();if(e(n))throw new TypeError;return a},createNativeOfflineAudioContextConstructor=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,createNativeOscillatorNodeFactory=(t,e,n,i,o,a)=>(l,c)=>{const p=l.createOscillator();return assignNativeAudioNodeOptions(p,c),assignNativeAudioNodeAudioParamValue(p,c,"detune"),assignNativeAudioNodeAudioParamValue(p,c,"frequency"),c.periodicWave!==void 0?p.setPeriodicWave(c.periodicWave):assignNativeAudioNodeOption(p,c,"type"),e(n,()=>n(l))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(p),e(i,()=>i(l))||a(p,l),e(o,()=>o(l))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(p),t(l,p),p},createNativePannerNodeFactory=t=>(e,n)=>{const i=e.createPanner();return i.orientationX===void 0?t(e,n):(assignNativeAudioNodeOptions(i,n),assignNativeAudioNodeAudioParamValue(i,n,"orientationX"),assignNativeAudioNodeAudioParamValue(i,n,"orientationY"),assignNativeAudioNodeAudioParamValue(i,n,"orientationZ"),assignNativeAudioNodeAudioParamValue(i,n,"positionX"),assignNativeAudioNodeAudioParamValue(i,n,"positionY"),assignNativeAudioNodeAudioParamValue(i,n,"positionZ"),assignNativeAudioNodeOption(i,n,"coneInnerAngle"),assignNativeAudioNodeOption(i,n,"coneOuterAngle"),assignNativeAudioNodeOption(i,n,"coneOuterGain"),assignNativeAudioNodeOption(i,n,"distanceModel"),assignNativeAudioNodeOption(i,n,"maxDistance"),assignNativeAudioNodeOption(i,n,"panningModel"),assignNativeAudioNodeOption(i,n,"refDistance"),assignNativeAudioNodeOption(i,n,"rolloffFactor"),i)},createNativePannerNodeFakerFactory=(t,e,n,i,o,a,l,c,p,s)=>(u,{coneInnerAngle:d,coneOuterAngle:g,coneOuterGain:w,distanceModel:x,maxDistance:C,orientationX:O,orientationY:Y,orientationZ:q,panningModel:ue,positionX:pe,positionY:se,positionZ:Re,refDistance:Oe,rolloffFactor:Ce,...He})=>{const $t=u.createPanner();if(He.channelCount>2||He.channelCountMode==="max")throw l();assignNativeAudioNodeOptions($t,He);const Sn={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},xn=n(u,{...Sn,channelInterpretation:"speakers",numberOfInputs:6}),Lr=i(u,{...He,gain:1}),jr=i(u,{...Sn,gain:1}),et=i(u,{...Sn,gain:0}),Ft=i(u,{...Sn,gain:0}),Tt=i(u,{...Sn,gain:0}),ze=i(u,{...Sn,gain:0}),Ht=i(u,{...Sn,gain:0}),Ae=o(u,256,6,1),Be=a(u,{...Sn,curve:new Float32Array([1,1]),oversample:"none"});let tr=[O,Y,q],No=[pe,se,Re];const ah=new Float32Array(1);Ae.onaudioprocess=({inputBuffer:Xr})=>{const a0=[p(Xr,ah,0),p(Xr,ah,1),p(Xr,ah,2)];a0.some((S0,Sg)=>S0!==tr[Sg])&&($t.setOrientation(...a0),tr=a0);const Ih=[p(Xr,ah,3),p(Xr,ah,4),p(Xr,ah,5)];Ih.some((S0,Sg)=>S0!==No[Sg])&&($t.setPosition(...Ih),No=Ih)},Object.defineProperty(et.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Ft.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Tt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ze.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Ht.gain,"defaultValue",{get:()=>0});const Mo={get bufferSize(){},get channelCount(){return $t.channelCount},set channelCount(Xr){if(Xr>2)throw l();Lr.channelCount=Xr,$t.channelCount=Xr},get channelCountMode(){return $t.channelCountMode},set channelCountMode(Xr){if(Xr==="max")throw l();Lr.channelCountMode=Xr,$t.channelCountMode=Xr},get channelInterpretation(){return $t.channelInterpretation},set channelInterpretation(Xr){Lr.channelInterpretation=Xr,$t.channelInterpretation=Xr},get coneInnerAngle(){return $t.coneInnerAngle},set coneInnerAngle(Xr){$t.coneInnerAngle=Xr},get coneOuterAngle(){return $t.coneOuterAngle},set coneOuterAngle(Xr){$t.coneOuterAngle=Xr},get coneOuterGain(){return $t.coneOuterGain},set coneOuterGain(Xr){if(Xr<0||Xr>1)throw e();$t.coneOuterGain=Xr},get context(){return $t.context},get distanceModel(){return $t.distanceModel},set distanceModel(Xr){$t.distanceModel=Xr},get inputs(){return[Lr]},get maxDistance(){return $t.maxDistance},set maxDistance(Xr){if(Xr<0)throw new RangeError;$t.maxDistance=Xr},get numberOfInputs(){return $t.numberOfInputs},get numberOfOutputs(){return $t.numberOfOutputs},get orientationX(){return jr.gain},get orientationY(){return et.gain},get orientationZ(){return Ft.gain},get panningModel(){return $t.panningModel},set panningModel(Xr){$t.panningModel=Xr},get positionX(){return Tt.gain},get positionY(){return ze.gain},get positionZ(){return Ht.gain},get refDistance(){return $t.refDistance},set refDistance(Xr){if(Xr<0)throw new RangeError;$t.refDistance=Xr},get rolloffFactor(){return $t.rolloffFactor},set rolloffFactor(Xr){if(Xr<0)throw new RangeError;$t.rolloffFactor=Xr},addEventListener(...Xr){return Lr.addEventListener(Xr[0],Xr[1],Xr[2])},dispatchEvent(...Xr){return Lr.dispatchEvent(Xr[0])},removeEventListener(...Xr){return Lr.removeEventListener(Xr[0],Xr[1],Xr[2])}};d!==Mo.coneInnerAngle&&(Mo.coneInnerAngle=d),g!==Mo.coneOuterAngle&&(Mo.coneOuterAngle=g),w!==Mo.coneOuterGain&&(Mo.coneOuterGain=w),x!==Mo.distanceModel&&(Mo.distanceModel=x),C!==Mo.maxDistance&&(Mo.maxDistance=C),O!==Mo.orientationX.value&&(Mo.orientationX.value=O),Y!==Mo.orientationY.value&&(Mo.orientationY.value=Y),q!==Mo.orientationZ.value&&(Mo.orientationZ.value=q),ue!==Mo.panningModel&&(Mo.panningModel=ue),pe!==Mo.positionX.value&&(Mo.positionX.value=pe),se!==Mo.positionY.value&&(Mo.positionY.value=se),Re!==Mo.positionZ.value&&(Mo.positionZ.value=Re),Oe!==Mo.refDistance&&(Mo.refDistance=Oe),Ce!==Mo.rolloffFactor&&(Mo.rolloffFactor=Ce),(tr[0]!==1||tr[1]!==0||tr[2]!==0)&&$t.setOrientation(...tr),(No[0]!==0||No[1]!==0||No[2]!==0)&&$t.setPosition(...No);const t0=()=>{Lr.connect($t),t(Lr,Be,0,0),Be.connect(jr).connect(xn,0,0),Be.connect(et).connect(xn,0,1),Be.connect(Ft).connect(xn,0,2),Be.connect(Tt).connect(xn,0,3),Be.connect(ze).connect(xn,0,4),Be.connect(Ht).connect(xn,0,5),xn.connect(Ae).connect(u.destination)},o0=()=>{Lr.disconnect($t),c(Lr,Be,0,0),Be.disconnect(jr),jr.disconnect(xn),Be.disconnect(et),et.disconnect(xn),Be.disconnect(Ft),Ft.disconnect(xn),Be.disconnect(Tt),Tt.disconnect(xn),Be.disconnect(ze),ze.disconnect(xn),Be.disconnect(Ht),Ht.disconnect(xn),xn.disconnect(Ae),Ae.disconnect(u.destination)};return s(interceptConnections(Mo,$t),t0,o0)},createNativePeriodicWaveFactory=t=>(e,{disableNormalization:n,imag:i,real:o})=>{const a=i instanceof Float32Array?i:new Float32Array(i),l=o instanceof Float32Array?o:new Float32Array(o),c=e.createPeriodicWave(l,a,{disableNormalization:n});if(Array.from(i).length<2)throw t();return c},createNativeScriptProcessorNode=(t,e,n,i)=>t.createScriptProcessor(e,n,i),createNativeStereoPannerNodeFactory=(t,e)=>(n,i)=>{const o=i.channelCountMode;if(o==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,i);const a=n.createStereoPanner();return assignNativeAudioNodeOptions(a,i),assignNativeAudioNodeAudioParamValue(a,i,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>o,set:l=>{if(l!==o)throw e()}}),a},createNativeStereoPannerNodeFakerFactory=(t,e,n,i,o,a)=>{const c=new Float32Array([1,1]),p=Math.PI/2,s={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...s,oversample:"none"},d=(x,C,O,Y)=>{const q=new Float32Array(16385),ue=new Float32Array(16385);for(let He=0;He<16385;He+=1){const $t=He/16384*p;q[He]=Math.cos($t),ue[He]=Math.sin($t)}const pe=n(x,{...s,gain:0}),se=i(x,{...u,curve:q}),Re=i(x,{...u,curve:c}),Oe=n(x,{...s,gain:0}),Ce=i(x,{...u,curve:ue});return{connectGraph(){C.connect(pe),C.connect(Re.inputs===void 0?Re:Re.inputs[0]),C.connect(Oe),Re.connect(O),O.connect(se.inputs===void 0?se:se.inputs[0]),O.connect(Ce.inputs===void 0?Ce:Ce.inputs[0]),se.connect(pe.gain),Ce.connect(Oe.gain),pe.connect(Y,0,0),Oe.connect(Y,0,1)},disconnectGraph(){C.disconnect(pe),C.disconnect(Re.inputs===void 0?Re:Re.inputs[0]),C.disconnect(Oe),Re.disconnect(O),O.disconnect(se.inputs===void 0?se:se.inputs[0]),O.disconnect(Ce.inputs===void 0?Ce:Ce.inputs[0]),se.disconnect(pe.gain),Ce.disconnect(Oe.gain),pe.disconnect(Y,0,0),Oe.disconnect(Y,0,1)}}},g=(x,C,O,Y)=>{const q=new Float32Array(16385),ue=new Float32Array(16385),pe=new Float32Array(16385),se=new Float32Array(16385),Re=Math.floor(16385/2);for(let Tt=0;Tt<16385;Tt+=1)if(Tt>Re){const ze=(Tt-Re)/(16384-Re)*p;q[Tt]=Math.cos(ze),ue[Tt]=Math.sin(ze),pe[Tt]=0,se[Tt]=1}else{const ze=Tt/(16384-Re)*p;q[Tt]=1,ue[Tt]=0,pe[Tt]=Math.cos(ze),se[Tt]=Math.sin(ze)}const Oe=e(x,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),Ce=n(x,{...s,gain:0}),He=i(x,{...u,curve:q}),$t=n(x,{...s,gain:0}),Sn=i(x,{...u,curve:ue}),xn=i(x,{...u,curve:c}),Lr=n(x,{...s,gain:0}),jr=i(x,{...u,curve:pe}),et=n(x,{...s,gain:0}),Ft=i(x,{...u,curve:se});return{connectGraph(){C.connect(Oe),C.connect(xn.inputs===void 0?xn:xn.inputs[0]),Oe.connect(Ce,0),Oe.connect($t,0),Oe.connect(Lr,1),Oe.connect(et,1),xn.connect(O),O.connect(He.inputs===void 0?He:He.inputs[0]),O.connect(Sn.inputs===void 0?Sn:Sn.inputs[0]),O.connect(jr.inputs===void 0?jr:jr.inputs[0]),O.connect(Ft.inputs===void 0?Ft:Ft.inputs[0]),He.connect(Ce.gain),Sn.connect($t.gain),jr.connect(Lr.gain),Ft.connect(et.gain),Ce.connect(Y,0,0),Lr.connect(Y,0,0),$t.connect(Y,0,1),et.connect(Y,0,1)},disconnectGraph(){C.disconnect(Oe),C.disconnect(xn.inputs===void 0?xn:xn.inputs[0]),Oe.disconnect(Ce,0),Oe.disconnect($t,0),Oe.disconnect(Lr,1),Oe.disconnect(et,1),xn.disconnect(O),O.disconnect(He.inputs===void 0?He:He.inputs[0]),O.disconnect(Sn.inputs===void 0?Sn:Sn.inputs[0]),O.disconnect(jr.inputs===void 0?jr:jr.inputs[0]),O.disconnect(Ft.inputs===void 0?Ft:Ft.inputs[0]),He.disconnect(Ce.gain),Sn.disconnect($t.gain),jr.disconnect(Lr.gain),Ft.disconnect(et.gain),Ce.disconnect(Y,0,0),Lr.disconnect(Y,0,0),$t.disconnect(Y,0,1),et.disconnect(Y,0,1)}}},w=(x,C,O,Y,q)=>{if(C===1)return d(x,O,Y,q);if(C===2)return g(x,O,Y,q);throw o()};return(x,{channelCount:C,channelCountMode:O,pan:Y,...q})=>{if(O==="max")throw o();const ue=t(x,{...q,channelCount:1,channelCountMode:O,numberOfInputs:2}),pe=n(x,{...q,channelCount:C,channelCountMode:O,gain:1}),se=n(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:Y});let{connectGraph:Re,disconnectGraph:Oe}=w(x,C,pe,se,ue);Object.defineProperty(se.gain,"defaultValue",{get:()=>0}),Object.defineProperty(se.gain,"maxValue",{get:()=>1}),Object.defineProperty(se.gain,"minValue",{get:()=>-1});const Ce={get bufferSize(){},get channelCount(){return pe.channelCount},set channelCount(xn){pe.channelCount!==xn&&(He&&Oe(),{connectGraph:Re,disconnectGraph:Oe}=w(x,xn,pe,se,ue),He&&Re()),pe.channelCount=xn},get channelCountMode(){return pe.channelCountMode},set channelCountMode(xn){if(xn==="clamped-max"||xn==="max")throw o();pe.channelCountMode=xn},get channelInterpretation(){return pe.channelInterpretation},set channelInterpretation(xn){pe.channelInterpretation=xn},get context(){return pe.context},get inputs(){return[pe]},get numberOfInputs(){return pe.numberOfInputs},get numberOfOutputs(){return pe.numberOfOutputs},get pan(){return se.gain},addEventListener(...xn){return pe.addEventListener(xn[0],xn[1],xn[2])},dispatchEvent(...xn){return pe.dispatchEvent(xn[0])},removeEventListener(...xn){return pe.removeEventListener(xn[0],xn[1],xn[2])}};let He=!1;const $t=()=>{Re(),He=!0},Sn=()=>{Oe(),He=!1};return a(interceptConnections(Ce,ue),$t,Sn)}},createNativeWaveShaperNodeFactory=(t,e,n,i,o,a,l)=>(c,p)=>{const s=c.createWaveShaper();if(a!==null&&a.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return n(c,p);assignNativeAudioNodeOptions(s,p);const u=p.curve===null||p.curve instanceof Float32Array?p.curve:new Float32Array(p.curve);if(u!==null&&u.length<2)throw e();assignNativeAudioNodeOption(s,{curve:u},"curve"),assignNativeAudioNodeOption(s,p,"oversample");let d=null,g=!1;return l(s,"curve",C=>()=>C.call(s),C=>O=>(C.call(s,O),g&&(i(O)&&d===null?d=t(c,s):!i(O)&&d!==null&&(d(),d=null)),O)),o(s,()=>{g=!0,i(s.curve)&&(d=t(c,s))},()=>{g=!1,d!==null&&(d(),d=null)})},createNativeWaveShaperNodeFakerFactory=(t,e,n,i,o)=>(a,{curve:l,oversample:c,...p})=>{const s=a.createWaveShaper(),u=a.createWaveShaper();assignNativeAudioNodeOptions(s,p),assignNativeAudioNodeOptions(u,p);const d=n(a,{...p,gain:1}),g=n(a,{...p,gain:-1}),w=n(a,{...p,gain:1}),x=n(a,{...p,gain:-1});let C=null,O=!1,Y=null;const q={get bufferSize(){},get channelCount(){return s.channelCount},set channelCount(se){d.channelCount=se,g.channelCount=se,s.channelCount=se,w.channelCount=se,u.channelCount=se,x.channelCount=se},get channelCountMode(){return s.channelCountMode},set channelCountMode(se){d.channelCountMode=se,g.channelCountMode=se,s.channelCountMode=se,w.channelCountMode=se,u.channelCountMode=se,x.channelCountMode=se},get channelInterpretation(){return s.channelInterpretation},set channelInterpretation(se){d.channelInterpretation=se,g.channelInterpretation=se,s.channelInterpretation=se,w.channelInterpretation=se,u.channelInterpretation=se,x.channelInterpretation=se},get context(){return s.context},get curve(){return Y},set curve(se){if(se!==null&&se.length<2)throw e();if(se===null)s.curve=se,u.curve=se;else{const Re=se.length,Oe=new Float32Array(Re+2-Re%2),Ce=new Float32Array(Re+2-Re%2);Oe[0]=se[0],Ce[0]=-se[Re-1];const He=Math.ceil((Re+1)/2),$t=(Re+1)/2-1;for(let Sn=1;Sn<He;Sn+=1){const xn=Sn/He*$t,Lr=Math.floor(xn),jr=Math.ceil(xn);Oe[Sn]=Lr===jr?se[Lr]:(1-(xn-Lr))*se[Lr]+(1-(jr-xn))*se[jr],Ce[Sn]=Lr===jr?-se[Re-1-Lr]:-((1-(xn-Lr))*se[Re-1-Lr])-(1-(jr-xn))*se[Re-1-jr]}Oe[He]=Re%2===1?se[He-1]:(se[He-2]+se[He-1])/2,s.curve=Oe,u.curve=Ce}Y=se,O&&(i(Y)&&C===null?C=t(a,d):C!==null&&(C(),C=null))},get inputs(){return[d]},get numberOfInputs(){return s.numberOfInputs},get numberOfOutputs(){return s.numberOfOutputs},get oversample(){return s.oversample},set oversample(se){s.oversample=se,u.oversample=se},addEventListener(...se){return d.addEventListener(se[0],se[1],se[2])},dispatchEvent(...se){return d.dispatchEvent(se[0])},removeEventListener(...se){return d.removeEventListener(se[0],se[1],se[2])}};l!==null&&(q.curve=l instanceof Float32Array?l:new Float32Array(l)),c!==q.oversample&&(q.oversample=c);const ue=()=>{d.connect(s).connect(w),d.connect(g).connect(u).connect(x).connect(w),O=!0,i(Y)&&(C=t(a,d))},pe=()=>{d.disconnect(s),s.disconnect(w),d.disconnect(g),g.disconnect(u),u.disconnect(x),x.disconnect(w),O=!1,C!==null&&(C(),C=null)};return o(interceptConnections(q,w),ue,pe)},createNotSupportedError=()=>new DOMException("","NotSupportedError"),DEFAULT_OPTIONS$5={numberOfChannels:1},createOfflineAudioContextConstructor=(t,e,n,i,o)=>class extends t{constructor(l,c,p){let s;if(typeof l=="number"&&c!==void 0&&p!==void 0)s={length:c,numberOfChannels:l,sampleRate:p};else if(typeof l=="object")s=l;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:d,sampleRate:g}={...DEFAULT_OPTIONS$5,...s},w=i(d,u,g);e(testPromiseSupport,()=>testPromiseSupport(w))||w.addEventListener("statechange",(()=>{let x=0;const C=O=>{this._state==="running"&&(x>0?(w.removeEventListener("statechange",C),O.stopImmediatePropagation(),this._waitForThePromiseToSettle(O)):x+=1)};return C})()),super(w,d),this._length=u,this._nativeOfflineAudioContext=w,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,deactivateAudioGraph(this)}))}_waitForThePromiseToSettle(l){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(l):setTimeout(()=>this._waitForThePromiseToSettle(l))}},DEFAULT_OPTIONS$4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},createOscillatorNodeConstructor=(t,e,n,i,o,a,l)=>class extends t{constructor(p,s){const u=o(p),d={...DEFAULT_OPTIONS$4,...s},g=n(u,d),w=a(u),x=w?i():null,C=p.sampleRate/2;super(p,!1,g,x),this._detune=e(this,w,g.detune,153600,-153600),this._frequency=e(this,w,g.frequency,C,-C),this._nativeOscillatorNode=g,this._onended=null,this._oscillatorNodeRenderer=x,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(p){const s=typeof p=="function"?l(this,p):null;this._nativeOscillatorNode.onended=s;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===s?p:u}get type(){return this._nativeOscillatorNode.type}set type(p){this._nativeOscillatorNode.type=p,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(p){this._nativeOscillatorNode.setPeriodicWave(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=p)}start(p=0){if(this._nativeOscillatorNode.start(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=p),this.context.state!=="closed"){setInternalStateToActive(this);const s=()=>{this._nativeOscillatorNode.removeEventListener("ended",s),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeOscillatorNode.addEventListener("ended",s)}}stop(p=0){this._nativeOscillatorNode.stop(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=p)}},createOscillatorNodeRendererFactory=(t,e,n,i,o)=>()=>{const a=new WeakMap;let l=null,c=null,p=null;const s=async(u,d)=>{let g=n(u);const w=isOwnedByContext(g,d);if(!w){const x={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,detune:g.detune.value,frequency:g.frequency.value,periodicWave:l===null?void 0:l,type:g.type};g=e(d,x),c!==null&&g.start(c),p!==null&&g.stop(p)}return a.set(d,g),w?(await t(d,u.detune,g.detune),await t(d,u.frequency,g.frequency)):(await i(d,u.detune,g.detune),await i(d,u.frequency,g.frequency)),await o(u,d,g),g};return{set periodicWave(u){l=u},set start(u){c=u},set stop(u){p=u},render(u,d){const g=a.get(d);return g!==void 0?Promise.resolve(g):s(u,d)}}},DEFAULT_OPTIONS$3={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},createPannerNodeConstructor=(t,e,n,i,o,a,l)=>class extends t{constructor(p,s){const u=o(p),d={...DEFAULT_OPTIONS$3,...s},g=n(u,d),w=a(u),x=w?i():null;super(p,!1,g,x),this._nativePannerNode=g,this._orientationX=e(this,w,g.orientationX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationY=e(this,w,g.orientationY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationZ=e(this,w,g.orientationZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionX=e(this,w,g.positionX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionY=e(this,w,g.positionY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionZ=e(this,w,g.positionZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),l(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(p){this._nativePannerNode.coneInnerAngle=p}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(p){this._nativePannerNode.coneOuterAngle=p}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(p){this._nativePannerNode.coneOuterGain=p}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(p){this._nativePannerNode.distanceModel=p}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(p){this._nativePannerNode.maxDistance=p}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(p){this._nativePannerNode.panningModel=p}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(p){this._nativePannerNode.refDistance=p}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(p){this._nativePannerNode.rolloffFactor=p}},createPannerNodeRendererFactory=(t,e,n,i,o,a,l,c,p,s)=>()=>{const u=new WeakMap;let d=null;const g=async(w,x)=>{let C=null,O=a(w);const Y={channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation},q={...Y,coneInnerAngle:O.coneInnerAngle,coneOuterAngle:O.coneOuterAngle,coneOuterGain:O.coneOuterGain,distanceModel:O.distanceModel,maxDistance:O.maxDistance,panningModel:O.panningModel,refDistance:O.refDistance,rolloffFactor:O.rolloffFactor},ue=isOwnedByContext(O,x);if("bufferSize"in O)C=i(x,{...Y,gain:1});else if(!ue){const pe={...q,orientationX:O.orientationX.value,orientationY:O.orientationY.value,orientationZ:O.orientationZ.value,positionX:O.positionX.value,positionY:O.positionY.value,positionZ:O.positionZ.value};O=o(x,pe)}if(u.set(x,C===null?O:C),C!==null){if(d===null){if(l===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Sn=new l(6,w.context.length,x.sampleRate),xn=e(Sn,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});xn.connect(Sn.destination),d=(async()=>{const Lr=await Promise.all([w.orientationX,w.orientationY,w.orientationZ,w.positionX,w.positionY,w.positionZ].map(async(jr,et)=>{const Ft=n(Sn,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:et===0?1:0});return await c(Sn,jr,Ft.offset),Ft}));for(let jr=0;jr<6;jr+=1)Lr[jr].connect(xn,0,jr),Lr[jr].start(0);return s(Sn)})()}const pe=await d,se=i(x,{...Y,gain:1});await p(w,x,se);const Re=[];for(let Sn=0;Sn<pe.numberOfChannels;Sn+=1)Re.push(pe.getChannelData(Sn));let Oe=[Re[0][0],Re[1][0],Re[2][0]],Ce=[Re[3][0],Re[4][0],Re[5][0]],He=i(x,{...Y,gain:1}),$t=o(x,{...q,orientationX:Oe[0],orientationY:Oe[1],orientationZ:Oe[2],positionX:Ce[0],positionY:Ce[1],positionZ:Ce[2]});se.connect(He).connect($t.inputs[0]),$t.connect(C);for(let Sn=128;Sn<pe.length;Sn+=128){const xn=[Re[0][Sn],Re[1][Sn],Re[2][Sn]],Lr=[Re[3][Sn],Re[4][Sn],Re[5][Sn]];if(xn.some((jr,et)=>jr!==Oe[et])||Lr.some((jr,et)=>jr!==Ce[et])){Oe=xn,Ce=Lr;const jr=Sn/x.sampleRate;He.gain.setValueAtTime(0,jr),He=i(x,{...Y,gain:0}),$t=o(x,{...q,orientationX:Oe[0],orientationY:Oe[1],orientationZ:Oe[2],positionX:Ce[0],positionY:Ce[1],positionZ:Ce[2]}),He.gain.setValueAtTime(1,jr),se.connect(He).connect($t.inputs[0]),$t.connect(C)}}return C}return ue?(await t(x,w.orientationX,O.orientationX),await t(x,w.orientationY,O.orientationY),await t(x,w.orientationZ,O.orientationZ),await t(x,w.positionX,O.positionX),await t(x,w.positionY,O.positionY),await t(x,w.positionZ,O.positionZ)):(await c(x,w.orientationX,O.orientationX),await c(x,w.orientationY,O.orientationY),await c(x,w.orientationZ,O.orientationZ),await c(x,w.positionX,O.positionX),await c(x,w.positionY,O.positionY),await c(x,w.positionZ,O.positionZ)),isNativeAudioNodeFaker(O)?await p(w,x,O.inputs[0]):await p(w,x,O),O};return{render(w,x){const C=u.get(x);return C!==void 0?Promise.resolve(C):g(w,x)}}},DEFAULT_OPTIONS$2={disableNormalization:!1},createPeriodicWaveConstructor=(t,e,n,i)=>class v4{constructor(a,l){const c=e(a),p=i({...DEFAULT_OPTIONS$2,...l}),s=t(c,p);return n.add(s),s}static[Symbol.hasInstance](a){return a!==null&&typeof a=="object"&&Object.getPrototypeOf(a)===v4.prototype||n.has(a)}},createRenderAutomation=(t,e)=>(n,i,o)=>(t(i).replay(o),e(i,n,o)),createRenderInputsOfAudioNode=(t,e,n)=>async(i,o,a)=>{const l=t(i);await Promise.all(l.activeInputs.map((c,p)=>Array.from(c).map(async([s,u])=>{const g=await e(s).render(s,o),w=i.context.destination;!n(s)&&(i!==w||!n(i))&&g.connect(a,u,p)})).reduce((c,p)=>[...c,...p],[]))},createRenderInputsOfAudioParam=(t,e,n)=>async(i,o,a)=>{const l=e(i);await Promise.all(Array.from(l.activeInputs).map(async([c,p])=>{const u=await t(c).render(c,o);n(c)||u.connect(a,p)}))},createRenderNativeOfflineAudioContext=(t,e,n,i)=>o=>t(testPromiseSupport,()=>testPromiseSupport(o))?Promise.resolve(t(i,i)).then(a=>{if(!a){const l=n(o,512,0,1);o.oncomplete=()=>{l.onaudioprocess=null,l.disconnect()},l.onaudioprocess=()=>o.currentTime,l.connect(o.destination)}return o.startRendering()}):new Promise(a=>{const l=e(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=c=>{l.disconnect(),a(c.renderedBuffer)},l.connect(o.destination),o.startRendering()}),createSetActiveAudioWorkletNodeInputs=t=>(e,n)=>{t.set(e,n)},createSetAudioNodeTailTime=t=>(e,n)=>t.set(e,n),createStartRendering=(t,e,n,i,o,a,l,c)=>(p,s)=>n(p).render(p,s).then(()=>Promise.all(Array.from(i(s)).map(u=>n(u).render(u,s)))).then(()=>o(s)).then(u=>(typeof u.copyFromChannel!="function"?(l(u),wrapAudioBufferGetChannelDataMethod(u)):e(a,()=>a(u))||c(u),t.add(u),u)),DEFAULT_OPTIONS$1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},createStereoPannerNodeConstructor=(t,e,n,i,o,a)=>class extends t{constructor(c,p){const s=o(c),u={...DEFAULT_OPTIONS$1,...p},d=n(s,u),g=a(s),w=g?i():null;super(c,!1,d,w),this._pan=e(this,g,d.pan)}get pan(){return this._pan}},createStereoPannerNodeRendererFactory=(t,e,n,i,o)=>()=>{const a=new WeakMap,l=async(c,p)=>{let s=n(c);const u=isOwnedByContext(s,p);if(!u){const d={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,pan:s.pan.value};s=e(p,d)}return a.set(p,s),u?await t(p,c.pan,s.pan):await i(p,c.pan,s.pan),isNativeAudioNodeFaker(s)?await o(c,p,s.inputs[0]):await o(c,p,s),s};return{render(c,p){const s=a.get(p);return s!==void 0?Promise.resolve(s):l(c,p)}}},createTestAudioBufferConstructorSupport=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},createTestAudioWorkletProcessorPostMessageSupport=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new e(1,128,44100),o=URL.createObjectURL(n);let a=!1,l=!1;try{await i.audioWorklet.addModule(o);const c=new t(i,"a",{numberOfOutputs:0}),p=i.createOscillator();c.port.onmessage=()=>a=!0,c.onprocessorerror=()=>l=!0,p.connect(c),p.start(0),await i.startRendering(),await new Promise(s=>setTimeout(s))}catch{}finally{URL.revokeObjectURL(o)}return a&&!l},createTestOfflineAudioContextCurrentTimeSupport=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),i=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{n.oncomplete=()=>{i.disconnect(),o(n.currentTime!==0)},n.startRendering()})},createUnknownError=()=>new DOMException("","UnknownError"),DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},createWaveShaperNodeConstructor=(t,e,n,i,o,a,l)=>class extends t{constructor(p,s){const u=o(p),d={...DEFAULT_OPTIONS,...s},g=n(u,d),x=a(u)?i():null;super(p,!0,g,x),this._isCurveNullified=!1,this._nativeWaveShaperNode=g,l(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(p){if(p===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(p.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=p}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(p){this._nativeWaveShaperNode.oversample=p}},createWaveShaperNodeRendererFactory=(t,e,n)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=e(a);if(!isOwnedByContext(c,l)){const s={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=t(l,s)}return i.set(l,c),isNativeAudioNodeFaker(c)?await n(a,l,c.inputs[0]):await n(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},createWindow=()=>typeof window>"u"?null:window,createWrapAudioBufferCopyChannelMethods=(t,e)=>n=>{n.copyFromChannel=(i,o,a=0)=>{const l=t(a),c=t(o);if(c>=n.numberOfChannels)throw e();const p=n.length,s=n.getChannelData(c),u=i.length;for(let d=l<0?-l:0;d+l<p&&d<u;d+=1)i[d]=s[d+l]},n.copyToChannel=(i,o,a=0)=>{const l=t(a),c=t(o);if(c>=n.numberOfChannels)throw e();const p=n.length,s=n.getChannelData(c),u=i.length;for(let d=l<0?-l:0;d+l<p&&d<u;d+=1)s[d+l]=i[d]}},createWrapAudioBufferCopyChannelMethodsOutOfBounds=t=>e=>{e.copyFromChannel=(n=>(i,o,a=0)=>{const l=t(a),c=t(o);if(l<e.length)return n.call(e,i,c,l)})(e.copyFromChannel),e.copyToChannel=(n=>(i,o,a=0)=>{const l=t(a),c=t(o);if(l<e.length)return n.call(e,i,c,l)})(e.copyToChannel)},createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=t=>(e,n)=>{const i=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=i),t(e,"buffer",o=>()=>{const a=o.call(e);return a===i?null:a},o=>a=>o.call(e,a===null?i:a))},createWrapChannelMergerNode=(t,e)=>(n,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const o=n.createBufferSource();e(i,()=>{const c=i.numberOfInputs;for(let p=0;p<c;p+=1)o.connect(i,0,p)},()=>o.disconnect(i))},getFirstSample=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),isDCCurve=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},overwriteAccessors=(t,e,n,i)=>{let o=t;for(;!o.hasOwnProperty(e);)o=Object.getPrototypeOf(o);const{get:a,set:l}=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(t,e,{get:n(a),set:i(l)})},sanitizeAudioWorkletNodeOptions=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),sanitizeChannelSplitterOptions=t=>({...t,channelCount:t.numberOfOutputs}),sanitizePeriodicWaveOptions=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},setValueAtTimeUntilPossible=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(i){if(i.code!==9)throw i;setValueAtTimeUntilPossible(t,e,n+1e-7)}},testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},testAudioBufferSourceNodeStartMethodOffsetClampingSupport=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},testAudioBufferSourceNodeStopMethodNullifiedBufferSupport=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},testAudioScheduledSourceNodeStartMethodNegativeParametersSupport=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},testAudioScheduledSourceNodeStopMethodNegativeParametersSupport=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},testAudioWorkletNodeOptionsClonability=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},wrapAudioBufferSourceNodeStartMethodOffsetClamping=t=>{t.start=(e=>(n=0,i=0,o)=>{const a=t.buffer,l=a===null?i:Math.min(a.duration,i);a!==null&&l>a.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,l,o)})(t.start)},wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=(t,e)=>{const n=e.createGain();t.connect(n);const i=(o=>()=>{o.call(t,n),t.removeEventListener("ended",i)})(t.disconnect);t.addEventListener("ended",i),interceptConnections(t,n),t.stop=(o=>{let a=!1;return(l=0)=>{if(a)try{o.call(t,l)}catch{n.gain.setValueAtTime(0,l)}else o.call(t,l),a=!0}})(t.stop)},wrapEventListener=(t,e)=>n=>{const i={value:t};return Object.defineProperties(n,{currentTarget:i,target:i}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},addActiveInputConnectionToAudioNode=createAddActiveInputConnectionToAudioNode(insertElementInSet),addPassiveInputConnectionToAudioNode=createAddPassiveInputConnectionToAudioNode(insertElementInSet),deleteActiveInputConnectionToAudioNode=createDeleteActiveInputConnectionToAudioNode(pickElementFromSet),audioNodeTailTimeStore=new WeakMap,getAudioNodeTailTime=createGetAudioNodeTailTime(audioNodeTailTimeStore),cacheTestResult=createCacheTestResult(new Map,new WeakMap),window$1=createWindow(),createNativeAnalyserNode=createNativeAnalyserNodeFactory(cacheTestResult,createIndexSizeError),getAudioNodeRenderer=createGetAudioNodeRenderer(getAudioNodeConnections),renderInputsOfAudioNode=createRenderInputsOfAudioNode(getAudioNodeConnections,getAudioNodeRenderer,isPartOfACycle),createAnalyserNodeRenderer=createAnalyserNodeRendererFactory(createNativeAnalyserNode,getNativeAudioNode,renderInputsOfAudioNode),getNativeContext=createGetNativeContext(CONTEXT_STORE),nativeOfflineAudioContextConstructor=createNativeOfflineAudioContextConstructor(window$1),isNativeOfflineAudioContext=createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor),audioParamAudioNodeStore=new WeakMap,eventTargetConstructor=createEventTargetConstructor(wrapEventListener),nativeAudioContextConstructor=createNativeAudioContextConstructor(window$1),isNativeAudioContext=createIsNativeAudioContext(nativeAudioContextConstructor),isNativeAudioNode=createIsNativeAudioNode(window$1),isNativeAudioParam=createIsNativeAudioParam(window$1),nativeAudioWorkletNodeConstructor=createNativeAudioWorkletNodeConstructor(window$1),audioNodeConstructor=createAudioNodeConstructor(createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE),createAddConnectionToAudioNode(addActiveInputConnectionToAudioNode,addPassiveInputConnectionToAudioNode,connectNativeAudioNodeToNativeAudioNode,deleteActiveInputConnectionToAudioNode,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getAudioNodeTailTime,getEventListenersOfAudioNode,getNativeAudioNode,insertElementInSet,isActiveAudioNode,isPartOfACycle,isPassiveAudioNode),cacheTestResult,createIncrementCycleCounterFactory(CYCLE_COUNTERS,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,isActiveAudioNode),createIndexSizeError,createInvalidAccessError,createNotSupportedError,createDecrementCycleCounter(connectNativeAudioNodeToNativeAudioNode,CYCLE_COUNTERS,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,getNativeContext,isActiveAudioNode,isNativeOfflineAudioContext),createDetectCycles(audioParamAudioNodeStore,getAudioNodeConnections,getValueForKey),eventTargetConstructor,getNativeContext,isNativeAudioContext,isNativeAudioNode,isNativeAudioParam,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor),analyserNodeConstructor=createAnalyserNodeConstructor(audioNodeConstructor,createAnalyserNodeRenderer,createIndexSizeError,createNativeAnalyserNode,getNativeContext,isNativeOfflineAudioContext),audioBufferStore=new WeakSet,nativeAudioBufferConstructor=createNativeAudioBufferConstructor(window$1),convertNumberToUnsignedLong=createConvertNumberToUnsignedLong(new Uint32Array(1)),wrapAudioBufferCopyChannelMethods=createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong,createIndexSizeError),wrapAudioBufferCopyChannelMethodsOutOfBounds=createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong),audioBufferConstructor=createAudioBufferConstructor(audioBufferStore,cacheTestResult,createNotSupportedError,nativeAudioBufferConstructor,nativeOfflineAudioContextConstructor,createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor),wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),addSilentConnection=createAddSilentConnection(createNativeGainNode),renderInputsOfAudioParam=createRenderInputsOfAudioParam(getAudioNodeRenderer,getAudioParamConnections,isPartOfACycle),connectAudioParam=createConnectAudioParam(renderInputsOfAudioParam),createNativeAudioBufferSourceNode=createNativeAudioBufferSourceNodeFactory(addSilentConnection,cacheTestResult,testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,testAudioBufferSourceNodeStartMethodOffsetClampingSupport,testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioBufferSourceNodeStartMethodOffsetClamping,createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors),wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),renderAutomation=createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections),renderInputsOfAudioParam),createAudioBufferSourceNodeRenderer=createAudioBufferSourceNodeRendererFactory(connectAudioParam,createNativeAudioBufferSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),createAudioParam=createAudioParamFactory(createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE),audioParamAudioNodeStore,AUDIO_PARAM_STORE,createAudioParamRenderer,createCancelAndHoldAutomationEvent,createCancelScheduledValuesAutomationEvent,createExponentialRampToValueAutomationEvent,createLinearRampToValueAutomationEvent,createSetTargetAutomationEvent,createSetValueAutomationEvent,createSetValueCurveAutomationEvent,nativeAudioContextConstructor,setValueAtTimeUntilPossible),audioBufferSourceNodeConstructor=createAudioBufferSourceNodeConstructor(audioNodeConstructor,createAudioBufferSourceNodeRenderer,createAudioParam,createInvalidStateError,createNativeAudioBufferSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),audioDestinationNodeConstructor=createAudioDestinationNodeConstructor(audioNodeConstructor,createAudioDestinationNodeRenderer,createIndexSizeError,createInvalidStateError,createNativeAudioDestinationNodeFactory(createNativeGainNode,overwriteAccessors),getNativeContext,isNativeOfflineAudioContext,renderInputsOfAudioNode),createBiquadFilterNodeRenderer=createBiquadFilterNodeRendererFactory(connectAudioParam,createNativeBiquadFilterNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),setAudioNodeTailTime=createSetAudioNodeTailTime(audioNodeTailTimeStore),biquadFilterNodeConstructor=createBiquadFilterNodeConstructor(audioNodeConstructor,createAudioParam,createBiquadFilterNodeRenderer,createInvalidAccessError,createNativeBiquadFilterNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),monitorConnections=createMonitorConnections(insertElementInSet,isNativeAudioNode),wrapChannelMergerNode=createWrapChannelMergerNode(createInvalidStateError,monitorConnections),createNativeChannelMergerNode=createNativeChannelMergerNodeFactory(nativeAudioContextConstructor,wrapChannelMergerNode),createChannelMergerNodeRenderer=createChannelMergerNodeRendererFactory(createNativeChannelMergerNode,getNativeAudioNode,renderInputsOfAudioNode),channelMergerNodeConstructor=createChannelMergerNodeConstructor(audioNodeConstructor,createChannelMergerNodeRenderer,createNativeChannelMergerNode,getNativeContext,isNativeOfflineAudioContext),createChannelSplitterNodeRenderer=createChannelSplitterNodeRendererFactory(createNativeChannelSplitterNode,getNativeAudioNode,renderInputsOfAudioNode),channelSplitterNodeConstructor=createChannelSplitterNodeConstructor(audioNodeConstructor,createChannelSplitterNodeRenderer,createNativeChannelSplitterNode,getNativeContext,isNativeOfflineAudioContext,sanitizeChannelSplitterOptions),createNativeConstantSourceNodeFaker=createNativeConstantSourceNodeFakerFactory(addSilentConnection,createNativeAudioBufferSourceNode,createNativeGainNode,monitorConnections),createNativeConstantSourceNode=createNativeConstantSourceNodeFactory(addSilentConnection,cacheTestResult,createNativeConstantSourceNodeFaker,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport),createConstantSourceNodeRenderer=createConstantSourceNodeRendererFactory(connectAudioParam,createNativeConstantSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),constantSourceNodeConstructor=createConstantSourceNodeConstructor(audioNodeConstructor,createAudioParam,createConstantSourceNodeRenderer,createNativeConstantSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createNativeConvolverNode=createNativeConvolverNodeFactory(createNotSupportedError,overwriteAccessors),createConvolverNodeRenderer=createConvolverNodeRendererFactory(createNativeConvolverNode,getNativeAudioNode,renderInputsOfAudioNode),convolverNodeConstructor=createConvolverNodeConstructor(audioNodeConstructor,createConvolverNodeRenderer,createNativeConvolverNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createDelayNodeRenderer=createDelayNodeRendererFactory(connectAudioParam,createNativeDelayNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),delayNodeConstructor=createDelayNodeConstructor(audioNodeConstructor,createAudioParam,createDelayNodeRenderer,createNativeDelayNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativeDynamicsCompressorNode=createNativeDynamicsCompressorNodeFactory(createNotSupportedError),createDynamicsCompressorNodeRenderer=createDynamicsCompressorNodeRendererFactory(connectAudioParam,createNativeDynamicsCompressorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),dynamicsCompressorNodeConstructor=createDynamicsCompressorNodeConstructor(audioNodeConstructor,createAudioParam,createDynamicsCompressorNodeRenderer,createNativeDynamicsCompressorNode,createNotSupportedError,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createGainNodeRenderer=createGainNodeRendererFactory(connectAudioParam,createNativeGainNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),gainNodeConstructor=createGainNodeConstructor(audioNodeConstructor,createAudioParam,createGainNodeRenderer,createNativeGainNode,getNativeContext,isNativeOfflineAudioContext),createNativeIIRFilterNodeFaker=createNativeIIRFilterNodeFakerFactory(createInvalidAccessError,createInvalidStateError,createNativeScriptProcessorNode,createNotSupportedError),renderNativeOfflineAudioContext=createRenderNativeOfflineAudioContext(cacheTestResult,createNativeGainNode,createNativeScriptProcessorNode,createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode,nativeOfflineAudioContextConstructor)),createIIRFilterNodeRenderer=createIIRFilterNodeRendererFactory(createNativeAudioBufferSourceNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderInputsOfAudioNode,renderNativeOfflineAudioContext),createNativeIIRFilterNode=createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker),iIRFilterNodeConstructor=createIIRFilterNodeConstructor(audioNodeConstructor,createNativeIIRFilterNode,createIIRFilterNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createAudioListener=createAudioListenerFactory(createAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeScriptProcessorNode,createNotSupportedError,getFirstSample,isNativeOfflineAudioContext,overwriteAccessors),unrenderedAudioWorkletNodeStore=new WeakMap,minimalBaseAudioContextConstructor=createMinimalBaseAudioContextConstructor(audioDestinationNodeConstructor,createAudioListener,eventTargetConstructor,isNativeOfflineAudioContext,unrenderedAudioWorkletNodeStore,wrapEventListener),createNativeOscillatorNode=createNativeOscillatorNodeFactory(addSilentConnection,cacheTestResult,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),createOscillatorNodeRenderer=createOscillatorNodeRendererFactory(connectAudioParam,createNativeOscillatorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),oscillatorNodeConstructor=createOscillatorNodeConstructor(audioNodeConstructor,createAudioParam,createNativeOscillatorNode,createOscillatorNodeRenderer,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createConnectedNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode),createNativeWaveShaperNodeFaker=createNativeWaveShaperNodeFakerFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeGainNode,isDCCurve,monitorConnections),createNativeWaveShaperNode=createNativeWaveShaperNodeFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeWaveShaperNodeFaker,isDCCurve,monitorConnections,nativeAudioContextConstructor,overwriteAccessors),createNativePannerNodeFaker=createNativePannerNodeFakerFactory(connectNativeAudioNodeToNativeAudioNode,createInvalidStateError,createNativeChannelMergerNode,createNativeGainNode,createNativeScriptProcessorNode,createNativeWaveShaperNode,createNotSupportedError,disconnectNativeAudioNodeFromNativeAudioNode,getFirstSample,monitorConnections),createNativePannerNode=createNativePannerNodeFactory(createNativePannerNodeFaker),createPannerNodeRenderer=createPannerNodeRendererFactory(connectAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeGainNode,createNativePannerNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),pannerNodeConstructor=createPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativePannerNode,createPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativePeriodicWave=createNativePeriodicWaveFactory(createIndexSizeError),periodicWaveConstructor=createPeriodicWaveConstructor(createNativePeriodicWave,getNativeContext,new WeakSet,sanitizePeriodicWaveOptions),nativeStereoPannerNodeFakerFactory=createNativeStereoPannerNodeFakerFactory(createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeGainNode,createNativeWaveShaperNode,createNotSupportedError,monitorConnections),createNativeStereoPannerNode=createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory,createNotSupportedError),createStereoPannerNodeRenderer=createStereoPannerNodeRendererFactory(connectAudioParam,createNativeStereoPannerNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),stereoPannerNodeConstructor=createStereoPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativeStereoPannerNode,createStereoPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext),createWaveShaperNodeRenderer=createWaveShaperNodeRendererFactory(createNativeWaveShaperNode,getNativeAudioNode,renderInputsOfAudioNode),waveShaperNodeConstructor=createWaveShaperNodeConstructor(audioNodeConstructor,createInvalidStateError,createNativeWaveShaperNode,createWaveShaperNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),isSecureContext=createIsSecureContext(window$1),exposeCurrentFrameAndCurrentTime=createExposeCurrentFrameAndCurrentTime(window$1),backupOfflineAudioContextStore=new WeakMap,getOrCreateBackupOfflineAudioContext=createGetOrCreateBackupOfflineAudioContext(backupOfflineAudioContextStore,nativeOfflineAudioContextConstructor),addAudioWorkletModule=isSecureContext?createAddAudioWorkletModule(cacheTestResult,createNotSupportedError,createEvaluateSource(window$1),exposeCurrentFrameAndCurrentTime,createFetchSource(createAbortError),getNativeContext,getOrCreateBackupOfflineAudioContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,new WeakMap,new WeakMap,createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),window$1):void 0,isNativeContext=createIsNativeContext(isNativeAudioContext,isNativeOfflineAudioContext),decodeAudioData=createDecodeAudioData(audioBufferStore,cacheTestResult,createDataCloneError,createEncodingError,new WeakSet,getNativeContext,isNativeContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,testPromiseSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),baseAudioContextConstructor=createBaseAudioContextConstructor(addAudioWorkletModule,analyserNodeConstructor,audioBufferConstructor,audioBufferSourceNodeConstructor,biquadFilterNodeConstructor,channelMergerNodeConstructor,channelSplitterNodeConstructor,constantSourceNodeConstructor,convolverNodeConstructor,decodeAudioData,delayNodeConstructor,dynamicsCompressorNodeConstructor,gainNodeConstructor,iIRFilterNodeConstructor,minimalBaseAudioContextConstructor,oscillatorNodeConstructor,pannerNodeConstructor,periodicWaveConstructor,stereoPannerNodeConstructor,waveShaperNodeConstructor),mediaElementAudioSourceNodeConstructor=createMediaElementAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaElementAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioDestinationNodeConstructor=createMediaStreamAudioDestinationNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioDestinationNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioSourceNodeConstructor=createMediaStreamAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),createNativeMediaStreamTrackAudioSourceNode=createNativeMediaStreamTrackAudioSourceNodeFactory(createInvalidStateError,isNativeOfflineAudioContext),mediaStreamTrackAudioSourceNodeConstructor=createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamTrackAudioSourceNode,getNativeContext),audioContextConstructor=createAudioContextConstructor(baseAudioContextConstructor,createInvalidStateError,createNotSupportedError,createUnknownError,mediaElementAudioSourceNodeConstructor,mediaStreamAudioDestinationNodeConstructor,mediaStreamAudioSourceNodeConstructor,mediaStreamTrackAudioSourceNodeConstructor,nativeAudioContextConstructor),getUnrenderedAudioWorkletNodes=createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore),addUnrenderedAudioWorkletNode=createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),connectMultipleOutputs=createConnectMultipleOutputs(createIndexSizeError),deleteUnrenderedAudioWorkletNode=createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),disconnectMultipleOutputs=createDisconnectMultipleOutputs(createIndexSizeError),activeAudioWorkletNodeInputsStore=new WeakMap,getActiveAudioWorkletNodeInputs=createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore,getValueForKey),createNativeAudioWorkletNodeFaker=createNativeAudioWorkletNodeFakerFactory(connectMultipleOutputs,createIndexSizeError,createInvalidStateError,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,createNativeScriptProcessorNode,createNotSupportedError,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getActiveAudioWorkletNodeInputs,monitorConnections),createNativeAudioWorkletNode=createNativeAudioWorkletNodeFactory(createInvalidStateError,createNativeAudioWorkletNodeFaker,createNativeGainNode,createNotSupportedError,monitorConnections),createAudioWorkletNodeRenderer=createAudioWorkletNodeRendererFactory(connectAudioParam,connectMultipleOutputs,createNativeAudioBufferSourceNode,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,deleteUnrenderedAudioWorkletNode,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getNativeAudioNode,nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),getBackupOfflineAudioContext=createGetBackupOfflineAudioContext(backupOfflineAudioContextStore),setActiveAudioWorkletNodeInputs=createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore),audioWorkletNodeConstructor=isSecureContext?createAudioWorkletNodeConstructor(addUnrenderedAudioWorkletNode,audioNodeConstructor,createAudioParam,createAudioWorkletNodeRenderer,createNativeAudioWorkletNode,getAudioNodeConnections,getBackupOfflineAudioContext,getNativeContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,sanitizeAudioWorkletNodeOptions,setActiveAudioWorkletNodeInputs,testAudioWorkletNodeOptionsClonability,wrapEventListener):void 0,createNativeOfflineAudioContext=createCreateNativeOfflineAudioContext(createNotSupportedError,nativeOfflineAudioContextConstructor),startRendering=createStartRendering(audioBufferStore,cacheTestResult,getAudioNodeRenderer,getUnrenderedAudioWorkletNodes,renderNativeOfflineAudioContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),offlineAudioContextConstructor=createOfflineAudioContextConstructor(baseAudioContextConstructor,cacheTestResult,createInvalidStateError,createNativeOfflineAudioContext,startRendering),isAnyAudioContext=createIsAnyAudioContext(CONTEXT_STORE,isNativeAudioContext),isAnyAudioNode=createIsAnyAudioNode(AUDIO_NODE_STORE,isNativeAudioNode),isAnyAudioParam=createIsAnyAudioParam(AUDIO_PARAM_STORE,isNativeAudioParam),isAnyOfflineAudioContext=createIsAnyOfflineAudioContext(CONTEXT_STORE,isNativeOfflineAudioContext);function isUndef(t){return t===void 0}function isDefined(t){return t!==void 0}function isFunction(t){return typeof t=="function"}function isNumber(t){return typeof t=="number"}function isObject(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function isBoolean(t){return typeof t=="boolean"}function isArray(t){return Array.isArray(t)}function isString(t){return typeof t=="string"}function isNote(t){return isString(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function assert(t,e){if(!t)throw new Error(e)}function assertRange(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function assertContextRunning(t){!t.isOffline&&t.state!=="running"&&warn('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let isInsideScheduledCallback=!1,printedScheduledWarning=!1;function enterScheduledCallback(t){isInsideScheduledCallback=t}function assertUsedScheduleTime(t){isUndef(t)&&isInsideScheduledCallback&&!printedScheduledWarning&&(printedScheduledWarning=!0,warn("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let defaultLogger=console;function log(...t){defaultLogger.log(...t)}function warn(...t){defaultLogger.warn(...t)}function createAudioContext(t){return new audioContextConstructor(t)}function createOfflineAudioContext(t,e,n){return new offlineAudioContextConstructor(t,e,n)}const theWindow=typeof self=="object"?self:null,hasAudioContext=theWindow&&(theWindow.hasOwnProperty("AudioContext")||theWindow.hasOwnProperty("webkitAudioContext"));function createAudioWorkletNode(t,e,n){return assert(isDefined(audioWorkletNodeConstructor),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof theWindow?.BaseAudioContext?theWindow?.AudioWorkletNode:audioWorkletNodeConstructor)(t,e,n)}function __decorate(t,e,n,i){var o=arguments.length,a=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(l=t[c])&&(a=(o<3?l(a):o>3?l(e,n,a):l(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function __awaiter(t,e,n,i){function o(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function c(u){try{s(i.next(u))}catch(d){l(d)}}function p(u){try{s(i.throw(u))}catch(d){l(d)}}function s(u){u.done?a(u.value):o(u.value).then(c,p)}s((i=i.apply(t,e||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;class Ticker{constructor(e,n,i,o){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(o||44100),.001),this.updateInterval=i,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),i=new Worker(n);i.onmessage=this._callback.bind(this),this._worker=i}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function isAudioParam(t){return isAnyAudioParam(t)}function isAudioNode(t){return isAnyAudioNode(t)}function isOfflineAudioContext(t){return isAnyOfflineAudioContext(t)}function isAudioContext(t){return isAnyAudioContext(t)}function isAudioBuffer(t){return t instanceof audioBufferConstructor}function noCopy(t,e){return t==="value"||isAudioParam(e)||isAudioNode(e)||isAudioBuffer(e)}function deepMerge(t,...e){if(!e.length)return t;const n=e.shift();if(isObject(t)&&isObject(n))for(const i in n)noCopy(i,n[i])?t[i]=n[i]:isObject(n[i])?(t[i]||Object.assign(t,{[i]:{}}),deepMerge(t[i],n[i])):Object.assign(t,{[i]:n[i]});return deepMerge(t,...e)}function deepEquals(t,e){return t.length===e.length&&t.every((n,i)=>e[i]===n)}function optionsFromArguments(t,e,n=[],i){const o={},a=Array.from(e);if(isObject(a[0])&&i&&!Reflect.has(a[0],i)&&(Object.keys(a[0]).some(c=>Reflect.has(t,c))||(deepMerge(o,{[i]:a[0]}),n.splice(n.indexOf(i),1),a.shift())),a.length===1&&isObject(a[0]))deepMerge(o,a[0]);else for(let l=0;l<n.length;l++)isDefined(a[l])&&(o[n[l]]=a[l]);return deepMerge(t,o)}function getDefaultsFromInstance(t){return t.constructor.getDefaults()}function defaultArg(t,e){return isUndef(t)?e:t}function omitFromObject(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class Tone{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||theWindow&&this.toString()===theWindow.TONE_DEBUG_CLASS)&&log(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Tone.version=version;const EPSILON=1e-6;function GT(t,e){return t>e+EPSILON}function GTE(t,e){return GT(t,e)||EQ(t,e)}function LT(t,e){return t+EPSILON<e}function EQ(t,e){return Math.abs(t-e)<EPSILON}function clamp(t,e,n){return Math.max(Math.min(t,n),e)}class Timeline extends Tone{constructor(){super(),this.name="Timeline",this._timeline=[];const e=optionsFromArguments(Timeline.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(assert(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];assert(GTE(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const i=this._search(e,n);return i!==-1?this._timeline[i]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const i=this._search(e,n);return i+1<this._timeline.length?this._timeline[i+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const i=this._search(e);return i-1>=0?this._timeline[i-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(EQ(this._timeline[n].time,e)){for(let i=n;i>=0&&EQ(this._timeline[i].time,e);i--)n=i;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&GTE(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let i=0;const o=this._timeline.length;let a=o;if(o>0&&this._timeline[o-1][n]<=e)return o-1;for(;i<a;){let l=Math.floor(i+(a-i)/2);const c=this._timeline[l],p=this._timeline[l+1];if(EQ(c[n],e)){for(let s=l;s<this._timeline.length;s++){const u=this._timeline[s];if(EQ(u[n],e))l=s;else break}return l}else{if(LT(c[n],e)&&GT(p[n],e))return l;GT(c[n],e)?a=l:i=l+1}}return-1}_iterate(e,n=0,i=this._timeline.length-1){this._timeline.slice(n,i+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const i=this._search(e);return i!==-1&&this._iterate(n,0,i),this}forEachAfter(e,n){const i=this._search(e);return this._iterate(n,i+1),this}forEachBetween(e,n,i){let o=this._search(e),a=this._search(n);return o!==-1&&a!==-1?(this._timeline[o].time!==e&&(o+=1),this._timeline[a].time===n&&(a-=1),this._iterate(i,o,a)):o===-1&&this._iterate(i,0,a),this}forEachFrom(e,n){let i=this._search(e);for(;i>=0&&this._timeline[i].time>=e;)i--;return this._iterate(n,i+1),this}forEachAtTime(e,n){const i=this._search(e);if(i!==-1&&EQ(this._timeline[i].time,e)){let o=i;for(let a=i;a>=0&&EQ(this._timeline[a].time,e);a--)o=a;this._iterate(a=>{n(a)},o,i)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const notifyNewContext=[];function onContextInit(t){notifyNewContext.push(t)}function initializeContext(t){notifyNewContext.forEach(e=>e(t))}const notifyCloseContext=[];function onContextClose(t){notifyCloseContext.push(t)}function closeContext(t){notifyCloseContext.forEach(e=>e(t))}class Emitter extends Tone{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(o=>{isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(n)}),this}once(e,n){const i=(...o)=>{n(...o),this.off(e,i)};return this.on(e,i),this}off(e,n){return e.split(/\W+/).forEach(o=>{if(isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(o))if(isUndef(n))this._events[o]=[];else{const a=this._events[o];for(let l=a.length-1;l>=0;l--)a[l]===n&&a.splice(l,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const i=this._events[e].slice(0);for(let o=0,a=i.length;o<a;o++)i[o].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const i=Object.getOwnPropertyDescriptor(Emitter.prototype,n);Object.defineProperty(e.prototype,n,i)})}dispose(){return super.dispose(),this._events=void 0,this}}class BaseContext extends Emitter{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Context extends BaseContext{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Timeline,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const i=optionsFromArguments(Context.getDefaults(),arguments,["context"]);i.context?(this._context=i.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=createAudioContext({latencyHint:i.latencyHint}),this._latencyHint=i.latencyHint),this._ticker=new Ticker(this.emit.bind(this,"tick"),i.clockSource,i.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=i.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(initializeContext(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,i){return this._context.createBuffer(e,n,i)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,i){return this._context.createPeriodicWave(e,n,i)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){assert(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){assert(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){assert(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){assert(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return createAudioWorkletNode(this.rawContext,e,n)}addAudioWorkletModule(e){return __awaiter(this,void 0,void 0,function*(){assert(isDefined(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return __awaiter(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return isAudioContext(this._context)?this._context.resume():Promise.resolve()}close(){return __awaiter(this,void 0,void 0,function*(){isAudioContext(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&closeContext(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),i=n.getChannelData(0);for(let a=0;a<i.length;a++)i[a]=e;const o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=n,o.loop=!0,o.start(0),this._constants.set(e,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,n=>{n.callback(),this._timeouts.remove(n)})}setTimeout(e,n){this._timeoutIds++;const i=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:i+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const i=++this._timeoutIds,o=()=>{const a=this.now();this._timeouts.add({callback:()=>{e(),o()},id:i,time:a+n})};return o(),i}}class DummyContext extends BaseContext{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,i){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,i){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return __awaiter(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function readOnly(t,e){isArray(e)?e.forEach(n=>readOnly(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function writable(t,e){isArray(e)?e.forEach(n=>writable(t,n)):Object.defineProperty(t,e,{writable:!0})}const noOp=()=>{};class ToneAudioBuffer extends Tone{constructor(){super(),this.name="ToneAudioBuffer",this.onload=noOp;const e=optionsFromArguments(ToneAudioBuffer.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,isString(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:noOp,onload:noOp,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:getContext().sampleRate}set(e){return e instanceof ToneAudioBuffer?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return __awaiter(this,void 0,void 0,function*(){const n=ToneAudioBuffer.load(e).then(i=>{this.set(i),this.onload(this)});ToneAudioBuffer.downloads.push(n);try{yield n}finally{const i=ToneAudioBuffer.downloads.indexOf(n);ToneAudioBuffer.downloads.splice(i,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=isArray(e)&&e[0].length>0,i=n?e.length:1,o=n?e[0].length:e.length,a=getContext(),l=a.createBuffer(i,o,a.sampleRate),c=!n&&i===1?[e]:e;for(let p=0;p<i;p++)l.copyToChannel(c[p],p);return this._buffer=l,this}toMono(e){if(isNumber(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const i=this.numberOfChannels;for(let o=0;o<i;o++){const a=this.toArray(o);for(let l=0;l<a.length;l++)n[l]+=a[l]}n=n.map(o=>o/i),this.fromArray(n)}return this}toArray(e){if(isNumber(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let i=0;i<this.numberOfChannels;i++)n[i]=this.getChannelData(i);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){assert(this.loaded,"Buffer is not loaded");const i=Math.floor(e*this.sampleRate),o=Math.floor(n*this.sampleRate);assert(i<o,"The start time must be less than the end time");const a=o-i,l=getContext().createBuffer(this.numberOfChannels,a,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)l.copyToChannel(this.getChannelData(c).subarray(i,o),c);return new ToneAudioBuffer(l)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new ToneAudioBuffer().fromArray(e)}static fromUrl(e){return __awaiter(this,void 0,void 0,function*(){return yield new ToneAudioBuffer().load(e)})}static load(e){return __awaiter(this,void 0,void 0,function*(){const n=ToneAudioBuffer.baseUrl===""||ToneAudioBuffer.baseUrl.endsWith("/")?ToneAudioBuffer.baseUrl:ToneAudioBuffer.baseUrl+"/",i=yield fetch(n+e);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield getContext().decodeAudioData(o)})}static supportsType(e){const n=e.split("."),i=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+i)!==""}static loaded(){return __awaiter(this,void 0,void 0,function*(){for(yield Promise.resolve();ToneAudioBuffer.downloads.length;)yield ToneAudioBuffer.downloads[0]})}}ToneAudioBuffer.baseUrl="";ToneAudioBuffer.downloads=[];class OfflineContext extends Context{constructor(){super({clockSource:"offline",context:isOfflineAudioContext(arguments[0])?arguments[0]:createOfflineAudioContext(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:isOfflineAudioContext(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=isOfflineAudioContext(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return __awaiter(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const i=Math.floor(this.sampleRate/128);e&&n%i===0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(){return __awaiter(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new ToneAudioBuffer(n)})}close(){return Promise.resolve()}}const dummyContext=new DummyContext;let globalContext=dummyContext;function getContext(){return globalContext===dummyContext&&hasAudioContext&&setContext(new Context),globalContext}function setContext(t,e=!1){e&&globalContext.dispose(),isAudioContext(t)?globalContext=new Context(t):isOfflineAudioContext(t)?globalContext=new OfflineContext(t):globalContext=t}function start(){return globalContext.resume()}if(theWindow&&!theWindow.TONE_SILENCE_LOGGING){const e=` * Tone.js v${version} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function dbToGain(t){return Math.pow(10,t/20)}function gainToDb(t){return 20*(Math.log(t)/Math.LN10)}function intervalToFrequencyRatio(t){return Math.pow(2,t/12)}let A4=440;function getA4(){return A4}function setA4(t){A4=t}function ftom(t){return Math.round(ftomf(t))}function ftomf(t){return 69+12*Math.log2(t/A4)}function mtof(t){return A4*Math.pow(2,(t-69)/12)}class TimeBaseClass extends Tone{constructor(e,n,i){super(),this.defaultUnits="s",this._val=n,this._units=i,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const i=parseInt(e,10),o=n==="."?1.5:1;return i===1?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/i)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,i)=>{let o=0;return e&&e!=="0"&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(o+=this._beatsToUnits(parseFloat(n))),i&&i!=="0"&&(o+=this._beatsToUnits(parseFloat(i)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof TimeBaseClass&&this.fromType(this._val),isUndef(this._val))return this._noArg();if(isString(this._val)&&isUndef(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(isObject(this._val)){let e=0;for(const n in this._val)if(isDefined(this._val[n])){const i=this._val[n],o=new this.constructor(this.context,n).valueOf()*i;e+=o}return e}if(isDefined(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return isString(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class TimeClass extends TimeBaseClass{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new TimeClass(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const i=new this.constructor(this.context,e).valueOf(),o=this.valueOf(),c=Math.round(o/i)*i-o;return o+c*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let a=1;a<9;a++){const l=Math.pow(2,a);n.push(l+"n."),n.push(l+"n"),n.push(l+"t")}n.push("0");let i=n[0],o=new TimeClass(this.context,n[0]).toSeconds();return n.forEach(a=>{const l=new TimeClass(this.context,a).toSeconds();Math.abs(l-e)<Math.abs(o-e)&&(i=a,o=l)}),i}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const i=Math.floor(n/this._getTimeSignature());let o=n%1*4;n=Math.floor(n)%this._getTimeSignature();const a=o.toString();return a.length>3&&(o=parseFloat(parseFloat(a).toFixed(3))),[i,n,o].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return ftom(this.toFrequency())}_now(){return this.context.now()}}class FrequencyClass extends TimeClass{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return getA4()}static set A4(e){setA4(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:FrequencyClass.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const o=noteToScaleIndex[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?o:FrequencyClass.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,i){let o=1;return e&&e!=="0"&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(o*=this._beatsToUnits(parseFloat(n))),i&&i!=="0"&&(o*=this._beatsToUnits(parseFloat(i)/4)),o}}})}transpose(e){return new FrequencyClass(this.context,this.valueOf()*intervalToFrequencyRatio(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return ftom(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/FrequencyClass.A4);let i=Math.round(12*n)+57;const o=Math.floor(i/12);return o<0&&(i+=-12*o),scaleIndexToNote[i%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return mtof(e)}static ftom(e){return ftom(e)}}const noteToScaleIndex={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},scaleIndexToNote=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class TransportTimeClass extends TimeClass{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ToneWithContext extends Tone{constructor(){super();const e=optionsFromArguments(ToneWithContext.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:getContext()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return assertUsedScheduleTime(e),new TimeClass(this.context,e).toSeconds()}toFrequency(e){return new FrequencyClass(this.context,e).toFrequency()}toTicks(e){return new TransportTimeClass(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(i=>{isUndef(e[i])&&delete n[i]}),n}get(){const e=getDefaultsFromInstance(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const i=this[n];isDefined(i)&&isDefined(i.value)&&isDefined(i.setValueAtTime)?e[n]=i.value:i instanceof ToneWithContext?e[n]=i._getPartialProperties(e[n]):isArray(i)||isNumber(i)||isString(i)||isBoolean(i)?e[n]=i:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&isDefined(this[n])&&(this[n]&&isDefined(this[n].value)&&isDefined(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof ToneWithContext?this[n].set(e[n]):this[n]=e[n])}),this}}class StateTimeline extends Timeline{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,i){return assertRange(n,0),this.add(Object.assign({},i,{state:e,time:n})),this}getLastState(e,n){const i=this._search(n);for(let o=i;o>=0;o--){const a=this._timeline[o];if(a.state===e)return a}}getNextState(e,n){const i=this._search(n);if(i!==-1)for(let o=i;o<this._timeline.length;o++){const a=this._timeline[o];if(a.state===e)return a}}}class Param extends ToneWithContext{constructor(){const e=optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,assert(isDefined(e.param)&&(isAudioParam(e.param)||e.param instanceof Param),"param must be an AudioParam");!isAudioParam(e.param);)e.param=e.param._param;this._swappable=isDefined(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Timeline(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,isDefined(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return isDefined(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return isDefined(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return isDefined(this.maxValue)&&isDefined(this.minValue)&&assertRange(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?dbToGain(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?gainToDb(e):e}setValueAtTime(e,n){const i=this.toSeconds(n),o=this._fromType(e);return assert(isFinite(o)&&isFinite(i),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",e,i),this._events.add({time:i,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,i),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),i=this._events.getAfter(n),o=this._events.get(n);let a=this._initialValue;if(o===null)a=this._initialValue;else if(o.type==="setTargetAtTime"&&(i===null||i.type==="setValueAtTime")){const l=this._events.getBefore(o.time);let c;l===null?c=this._initialValue:c=l.value,o.type==="setTargetAtTime"&&(a=this._exponentialApproach(o.time,c,o.value,o.constant,n))}else if(i===null)a=o.value;else if(i.type==="linearRampToValueAtTime"||i.type==="exponentialRampToValueAtTime"){let l=o.value;if(o.type==="setTargetAtTime"){const c=this._events.getBefore(o.time);c===null?l=this._initialValue:l=c.value}i.type==="linearRampToValueAtTime"?a=this._linearInterpolate(o.time,l,i.time,i.value,n):a=this._exponentialInterpolate(o.time,l,i.time,i.value,n)}else a=o.value;return this._toType(a)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const i=this._fromType(e),o=this.toSeconds(n);return assert(isFinite(i)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(i),this._events.add({time:o,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",e,o),this._param.linearRampToValueAtTime(i,o),this}exponentialRampToValueAtTime(e,n){let i=this._fromType(e);i=EQ(i,0)?this._minOutput:i,this._assertRange(i);const o=this.toSeconds(n);return assert(isFinite(i)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",e,o),this._param.exponentialRampToValueAtTime(i,o),this}exponentialRampTo(e,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(e,i+this.toSeconds(n)),this}linearRampTo(e,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(e,i+this.toSeconds(n)),this}targetRampTo(e,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(e,i,n),this}exponentialApproachValueAtTime(e,n,i){n=this.toSeconds(n),i=this.toSeconds(i);const o=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(e,n,o),this.cancelAndHoldAtTime(n+i*.9),this.linearRampToValueAtTime(e,n+i),this}setTargetAtTime(e,n,i){const o=this._fromType(e);assert(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");const a=this.toSeconds(n);return this._assertRange(o),assert(isFinite(o)&&isFinite(a),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:i,time:a,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",e,a,i),this._param.setTargetAtTime(o,a,i),this}setValueCurveAtTime(e,n,i,o=1){i=this.toSeconds(i),n=this.toSeconds(n);const a=this._fromType(e[0])*o;this.setValueAtTime(this._toType(a),n);const l=i/(e.length-1);for(let c=1;c<e.length;c++){const p=this._fromType(e[c])*o;this.linearRampToValueAtTime(this._toType(p),n+c*l)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return assert(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),i=this._fromType(this.getValueAtTime(n));assert(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+i);const o=this._events.get(n),a=this._events.getAfter(n);return o&&EQ(o.time,n)?a?(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):a&&(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time),a.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(i),n):a.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(i),n)),this._events.add({time:n,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,n),this}rampTo(e,n=.1,i){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,i):this.linearRampTo(e,n,i),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const i=this._events.get(n);if(i&&i.type==="setTargetAtTime"){const o=this._events.getAfter(i.time),a=o?o.time:n+2,l=(a-n)/10;for(let c=n;c<a;c+=l)e.linearRampToValueAtTime(this.getValueAtTime(c),c)}return this._events.forEachAfter(this.context.currentTime,o=>{o.type==="cancelScheduledValues"?e.cancelScheduledValues(o.time):o.type==="setTargetAtTime"?e.setTargetAtTime(o.value,o.time,o.constant):e[o.type](o.value,o.time)}),this}setParam(e){assert(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,i,o,a){return i+(n-i)*Math.exp(-(a-e)/o)}_linearInterpolate(e,n,i,o,a){return n+(o-n)*((a-e)/(i-e))}_exponentialInterpolate(e,n,i,o,a){return n*Math.pow(o/n,(a-e)/(i-e))}}class ToneAudioNode extends ToneWithContext{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return isDefined(this.input)?isAudioParam(this.input)||this.input instanceof Param?1:this.input.numberOfInputs:0}get numberOfOutputs(){return isDefined(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return isDefined(e)&&(e instanceof ToneAudioNode||isAudioNode(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(i=>{i.channelCount=e.channelCount,i.channelCountMode=e.channelCountMode,i.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();assert(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,i=0){return connect(this,e,n,i),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return warn("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,i=0){return disconnect(this,e,n,i),this}chain(...e){return connectSeries(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),isDefined(this.input)&&(this.input instanceof ToneAudioNode?this.input.dispose():isAudioNode(this.input)&&this.input.disconnect()),isDefined(this.output)&&(this.output instanceof ToneAudioNode?this.output.dispose():isAudioNode(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function connectSeries(...t){const e=t.shift();t.reduce((n,i)=>(n instanceof ToneAudioNode?n.connect(i):isAudioNode(n)&&connect(n,i),i),e)}function connect(t,e,n=0,i=0){for(assert(isDefined(t),"Cannot connect from undefined node"),assert(isDefined(e),"Cannot connect to undefined node"),(e instanceof ToneAudioNode||isAudioNode(e))&&assert(e.numberOfInputs>0,"Cannot connect to node with no inputs"),assert(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ToneAudioNode||e instanceof Param;)isDefined(e.input)&&(e=e.input);for(;t instanceof ToneAudioNode;)isDefined(t.output)&&(t=t.output);isAudioParam(e)?t.connect(e,n):t.connect(e,n,i)}function disconnect(t,e,n=0,i=0){if(isDefined(e))for(;e instanceof ToneAudioNode;)e=e.input;for(;!isAudioNode(t);)isDefined(t.output)&&(t=t.output);isAudioParam(e)?t.disconnect(e,n):isAudioNode(e)?t.disconnect(e,n,i):t.disconnect()}class Gain extends ToneAudioNode{constructor(){const e=optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Param({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),readOnly(this,"gain")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class OneShotSource extends ToneAudioNode{constructor(e){super(e),this.onended=noOp,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Gain({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const i=this.toSeconds(n);return this._startTime!==-1&&i>=this._startTime&&(this._stopTime===-1||i<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:noOp})}_startGain(e,n=1){assert(this._startTime===-1,"Source cannot be started more than once");const i=this.toSeconds(this._fadeIn);return this._startTime=e+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+i):this._gainNode.gain.exponentialApproachValueAtTime(n,e,i)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){assert(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const i=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+i),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==noOp&&(this.onended(this),this.onended=noOp,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),assert(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=noOp,this}}class ToneConstantSource extends OneShotSource{constructor(){const e=optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),connect(this._source,this._gainNode),this.offset=new Param({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Signal extends ToneAudioNode{constructor(){const e=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new ToneConstantSource({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,i=0){return connectSignal(this,e,n,i),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,i){return this._param.exponentialRampTo(e,n,i),this}linearRampTo(e,n,i){return this._param.linearRampTo(e,n,i),this}targetRampTo(e,n,i){return this._param.targetRampTo(e,n,i),this}exponentialApproachValueAtTime(e,n,i){return this._param.exponentialApproachValueAtTime(e,n,i),this}setTargetAtTime(e,n,i){return this._param.setTargetAtTime(e,n,i),this}setValueCurveAtTime(e,n,i,o){return this._param.setValueCurveAtTime(e,n,i,o),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,i){return this._param.rampTo(e,n,i),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function connectSignal(t,e,n,i){(e instanceof Param||isAudioParam(e)||e instanceof Signal&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Signal&&(e.overridden=!0)),connect(t,e,n,i)}class TickParam extends Param{constructor(){const e=optionsFromArguments(TickParam.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Timeline(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Param.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,i){n=this.toSeconds(n),this.setRampPoint(n);const o=this._fromType(e),a=this._events.get(n),l=Math.round(Math.max(1/i,1));for(let c=0;c<=l;c++){const p=i*c+n,s=this._exponentialApproach(a.time,a.value,o,i,p);this.linearRampToValueAtTime(this._toType(s),p)}return this}setValueAtTime(e,n){const i=this.toSeconds(n);super.setValueAtTime(e,n);const o=this._events.get(i),a=this._events.previousEvent(o),l=this._getTicksUntilEvent(a,i);return o.ticks=Math.max(l,0),this}linearRampToValueAtTime(e,n){const i=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const o=this._events.get(i),a=this._events.previousEvent(o),l=this._getTicksUntilEvent(a,i);return o.ticks=Math.max(l,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const i=this._fromType(e),o=this._events.get(n),a=Math.round(Math.max((n-o.time)*10,1)),l=(n-o.time)/a;for(let c=0;c<=a;c++){const p=l*c+o.time,s=this._exponentialInterpolate(o.time,o.value,n,i,p);this.linearRampToValueAtTime(this._toType(s),p)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(isUndef(e.ticks)){const l=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(l,e.time)}const i=this._fromType(this.getValueAtTime(e.time));let o=this._fromType(this.getValueAtTime(n));const a=this._events.get(n);return a&&a.time===n&&a.type==="setValueAtTime"&&(o=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(i+o)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),i=this._events.get(n);return Math.max(this._getTicksUntilEvent(i,n),0)}getDurationOfTicks(e,n){const i=this.toSeconds(n),o=this.getTicksAtTime(n);return this.getTimeOfTick(o+e)-i}getTimeOfTick(e){const n=this._events.get(e,"ticks"),i=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&i&&i.type==="linearRampToValueAtTime"&&n.value!==i.value){const o=this._fromType(this.getValueAtTime(n.time)),l=(this._fromType(this.getValueAtTime(i.time))-o)/(i.time-n.time),c=Math.sqrt(Math.pow(o,2)-2*l*(n.ticks-e)),p=(-o+c)/l,s=(-o-c)/l;return(p>0?p:s)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const i=this.toSeconds(n),o=this.toSeconds(e),a=this.getTicksAtTime(i);return this.getTicksAtTime(i+o)-a}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class TickSignal extends Signal{constructor(){const e=optionsFromArguments(TickSignal.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new TickParam({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Signal.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class TickSource extends ToneWithContext{constructor(){const e=optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new StateTimeline,this._tickOffset=new Timeline,this._ticksAtTime=new Timeline,this._secondsAtTime=new Timeline,this.frequency=new TickSignal({context:this.context,units:e.units,value:e.frequency}),readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ToneWithContext.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const i=this.toSeconds(e);return this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),isDefined(n)&&this.setTicksAtTime(n,i),this._ticksAtTime.cancel(i),this._secondsAtTime.cancel(i)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const i=this._state.get(n);i&&i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),i=this._state.getLastState("stopped",n),o=this._ticksAtTime.get(n),a={state:"paused",time:n};this._state.add(a);let l=o||i,c=o?o.ticks:0,p=null;return this._state.forEachBetween(l.time,n+this.sampleTime,s=>{let u=l.time;const d=this._tickOffset.get(s.time);d&&d.time>=l.time&&(c=d.ticks,u=d.time),l.state==="started"&&s.state!=="started"&&(c+=this.frequency.getTicksAtTime(s.time)-this.frequency.getTicksAtTime(u),s.time!==a.time&&(p={state:s.state,time:s.time,ticks:c})),l=s}),this._state.remove(a),p&&this._ticksAtTime.add(p),c}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),i=this.frequency.timeToTicks(e,n);this.setTicksAtTime(i,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),i={state:"paused",time:e};this._state.add(i);const o=this._secondsAtTime.get(e);let a=o||n,l=o?o.seconds:0,c=null;return this._state.forEachBetween(a.time,e+this.sampleTime,p=>{let s=a.time;const u=this._tickOffset.get(p.time);u&&u.time>=a.time&&(l=u.seconds,s=u.time),a.state==="started"&&p.state!=="started"&&(l+=p.time-s,p.time!==i.time&&(c={state:p.state,time:p.time,seconds:l})),a=p}),this._state.remove(i),c&&this._secondsAtTime.add(c),l}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const i=this._tickOffset.get(n),o=this._state.get(n),a=Math.max(i.time,o.time),l=this.frequency.getTicksAtTime(a)+e-i.ticks;return this.frequency.getTimeOfTick(l)}forEachTickBetween(e,n,i){let o=this._state.get(e);this._state.forEachBetween(e,n,l=>{o&&o.state==="started"&&l.state!=="started"&&this.forEachTickBetween(Math.max(o.time,e),l.time-this.sampleTime,i),o=l});let a=null;if(o&&o.state==="started"){const l=Math.max(o.time,e),c=this.frequency.getTicksAtTime(l),p=this.frequency.getTicksAtTime(o.time),s=c-p;let u=Math.ceil(s)-s;u=EQ(u,1)?0:u;let d=this.frequency.getTimeOfTick(c+u);for(;d<n;){try{i(d,Math.round(this.getTicksAtTime(d)))}catch(g){a=g;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(a)throw a;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Clock extends ToneWithContext{constructor(){const e=optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=noOp,this._lastUpdate=0,this._state=new StateTimeline("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new TickSource({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){assertContextRunning(this.context);const i=this.toSeconds(e);return this.log("start",i),this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),this._tickSource.start(i,n),i<this._lastUpdate&&this.emit("start",i,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const i=this.toSeconds(n),o=this.getTicksAtTime(i);return this._tickSource.getTimeOfTick(o+e,i)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,i=>{switch(i.state){case"started":const o=this._tickSource.getTicksAtTime(i.time);this.emit("start",i.time,o);break;case"stopped":i.time!==0&&this.emit("stop",i.time);break;case"paused":this.emit("pause",i.time);break}}),this._tickSource.forEachTickBetween(e,n,(i,o)=>{this.callback(i,o)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Emitter.mixin(Clock);class Delay extends ToneAudioNode{constructor(){const e=optionsFromArguments(Delay.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const n=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(n,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(n),this.delayTime=new Param({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),readOnly(this,"delayTime")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Volume extends ToneAudioNode{constructor(){const e=optionsFromArguments(Volume.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Gain({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,readOnly(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class DestinationClass extends ToneAudioNode{constructor(){const e=optionsFromArguments(DestinationClass.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Volume({context:this.context}),this.output=new Gain({context:this.context}),this.volume=this.input.volume,connectSeries(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),connectSeries(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}onContextInit(t=>{t.destination=new DestinationClass({context:t})});onContextClose(t=>{t.destination.dispose()});class ListenerClass extends ToneAudioNode{constructor(){super(...arguments),this.name="Listener",this.positionX=new Param({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Param({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Param({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Param({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Param({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Param({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Param({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Param({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Param({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}onContextInit(t=>{t.listener=new ListenerClass({context:t})});onContextClose(t=>{t.listener.dispose()});function Offline(t,e){return __awaiter(this,arguments,void 0,function*(n,i,o=2,a=getContext().sampleRate){const l=getContext(),c=new OfflineContext(o,i,a);setContext(c),yield n(c);const p=c.render();setContext(l);const s=yield p;return new ToneAudioBuffer(s)})}class ToneAudioBuffers extends Tone{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=optionsFromArguments(ToneAudioBuffers.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const i=e.urls[n];this.add(n,i,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:noOp,onload:noOp,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return assert(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,i=noOp,o=noOp){return isString(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new ToneAudioBuffer(this.baseUrl+n,i,o))):this._buffers.set(e.toString(),new ToneAudioBuffer(n,i,o)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class TicksClass extends TransportTimeClass{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class DrawClass extends ToneWithContext{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Timeline,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,n=>{e-n.time<=this.expiration&&n.callback(),this._events.remove(n)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}onContextInit(t=>{t.draw=new DrawClass({context:t})});onContextClose(t=>{t.draw.dispose()});class IntervalTimeline extends Tone{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){assert(isDefined(e.time),"Events must have a time property"),assert(isDefined(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new IntervalNode(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const i of n)if(i.event===e){this._removeNode(i),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let i,o=null;if(n>0)if(e.left.right===null)i=e.left,i.right=e.right,o=i;else{for(i=e.left.right;i.right!==null;)i=i.right;i.parent&&(i.parent.right=i.left,o=i.parent,i.left=e.left,i.right=e.right)}else if(e.right.left===null)i=e.right,i.left=e.left,o=i;else{for(i=e.right.left;i.left!==null;)i=i.left;i.parent&&(i.parent.left=i.right,o=i.parent,i.left=e.left,i.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=i:e.parent.right=i:this._setRoot(i),o&&this._rebalance(o)}e.dispose()}_rotateLeft(e){const n=e.parent,i=e.isLeftChild(),o=e.right;o&&(e.right=o.left,o.left=e),n!==null?i?n.left=o:n.right=o:this._setRoot(o)}_rotateRight(e){const n=e.parent,i=e.isLeftChild(),o=e.left;o&&(e.left=o.right,o.right=e),n!==null?i?n.left=o:n.right=o:this._setRoot(o)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let i=n[0];for(let o=1;o<n.length;o++)n[o].low>i.low&&(i=n[o]);return i.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(i=>n.push(i)),n.forEach(i=>{i.event&&e(i.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const i=[];this._root.search(e,i),i.forEach(o=>{o.event&&n(o.event)})}return this}forEachFrom(e,n){if(this._root!==null){const i=[];this._root.searchAfter(e,i),i.forEach(o=>{o.event&&n(o.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class IntervalNode{constructor(e,n,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class TimelineValue extends Tone{constructor(e){super(),this.name="TimelineValue",this._timeline=new Timeline({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class SignalOperator extends ToneAudioNode{constructor(){super(optionsFromArguments(SignalOperator.getDefaults(),arguments,["context"]))}connect(e,n=0,i=0){return connectSignal(this,e,n,i),this}}class WaveShaper extends SignalOperator{constructor(){const e=optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,isArray(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):isFunction(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Signal.getDefaults(),{length:1024})}setMap(e,n=1024){const i=new Float32Array(n);for(let o=0,a=n;o<a;o++){const l=o/(a-1)*2-1;i[o]=e(l,o)}return this.curve=i,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(i=>i.includes(e));assert(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Pow extends SignalOperator{constructor(){const e=optionsFromArguments(Pow.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new WaveShaper({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class TransportEvent{constructor(e,n){this.id=TransportEvent._eventId++,this._remainderTime=0;const i=Object.assign(TransportEvent.getDefaults(),n);this.transport=e,this.callback=i.callback,this._once=i.once,this.time=Math.floor(i.time),this._remainderTime=i.time-this.time}static getDefaults(){return{callback:noOp,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}TransportEvent._eventId=0;class TransportRepeatEvent extends TransportEvent{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const i=Object.assign(TransportRepeatEvent.getDefaults(),n);this.duration=i.duration,this._interval=i.interval,this._nextTick=i.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return LT(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){LT(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);GT(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class TransportClass extends ToneWithContext{constructor(){const e=optionsFromArguments(TransportClass.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new TimelineValue(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Timeline,this._repeatedEvents=new IntervalTimeline,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Clock({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),readOnly(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const i=n%(this._swingTicks*2)/(this._swingTicks*2),o=Math.sin(i*Math.PI)*this._swingAmount;e+=new TicksClass(this.context,this._swingTicks*2/3).toSeconds()*o}enterScheduledCallback(!0),this._timeline.forEachAtTime(n,i=>i.invoke(e)),enterScheduledCallback(!1)}schedule(e,n){const i=new TransportEvent(this,{callback:e,time:new TransportTimeClass(this.context,n).toTicks()});return this._addEvent(i,this._timeline)}scheduleRepeat(e,n,i,o=1/0){const a=new TransportRepeatEvent(this,{callback:e,duration:new TimeClass(this.context,o).toTicks(),interval:new TimeClass(this.context,n).toTicks(),time:new TransportTimeClass(this.context,i).toTicks()});return this._addEvent(a,this._repeatedEvents)}scheduleOnce(e,n){const i=new TransportEvent(this,{callback:e,once:!0,time:new TransportTimeClass(this.context,n).toTicks()});return this._addEvent(i,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,i=>this.clear(i.id)),this._repeatedEvents.forEachFrom(n,i=>this.clear(i.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new TicksClass(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let i;return isDefined(n)&&(i=this.toTicks(n)),this._clock.start(e,i),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){isArray(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new TimeClass(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new TimeClass(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new TicksClass(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new TicksClass(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),i=this._clock.frequency.timeToTicks(e,n);this.ticks=i}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const i=this._clock.getTicksAtTime(n),o=this._clock.frequency.getDurationOfTicks(Math.ceil(i)-i,n),a=n+o;this.emit("stop",a),this._clock.setTicksAtTime(e,a),this.emit("start",a,this._clock.getSecondsAtTime(a))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),i=this.getTicksAtTime(n),o=e-i%e;return this._clock.nextTickTime(o,n)}}syncSignal(e,n){const i=this.now();let o=this.bpm,a=1/(60/o.getValueAtTime(i)/this.PPQ),l=[];if(e.units==="time"){const p=.015625/a,s=new Gain(p),u=new Pow(-1),d=new Gain(p);o.chain(s,u,d),o=d,a=1/a,l=[s,u,d]}n||(e.getValueAtTime(i)!==0?n=e.getValueAtTime(i)/a:n=0);const c=new Gain(n);return o.connect(c),c.connect(e._param),l.push(c),this._syncedSignals.push({initial:e.value,nodes:l,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const i=this._syncedSignals[n];i.signal===e&&(i.nodes.forEach(o=>o.dispose()),i.signal.value=i.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),writable(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Emitter.mixin(TransportClass);onContextInit(t=>{t.transport=new TransportClass({context:t})});onContextClose(t=>{t.transport.dispose()});class Source extends ToneAudioNode{constructor(e){super(e),this.input=void 0,this._state=new StateTimeline("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=noOp,this._syncedStop=noOp,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Volume({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,onstop:noOp,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,i){let o=isUndef(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(o=this._clampToCurrentTime(o),!this._synced&&this._state.getValueAtTime(o)==="started")assert(GT(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,n,i);else if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){const a=this._state.get(o);a&&(a.offset=this.toSeconds(defaultArg(n,0)),a.duration=i?this.toSeconds(i):void 0);const l=this.context.transport.schedule(c=>{this._start(c,n,i)},o);this._scheduled.push(l),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else assertContextRunning(this.context),this._start(o,n,i);return this}stop(e){let n=isUndef(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||isDefined(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const i=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(i)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,i){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,i)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(GT(n,0)){const i=this._state.get(n);if(i&&i.state==="started"&&i.time!==n){const o=n-this.toSeconds(i.time);let a;i.duration&&(a=this.toSeconds(i.duration)-o),this._start(e,this.toSeconds(i.offset)+o,a)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=noOp,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ToneBufferSource extends OneShotSource{constructor(){const e=optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,connect(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Param({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new ToneAudioBuffer(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{url:new ToneAudioBuffer,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,i,o=1){assert(this.buffer.loaded,"buffer is either not set or not loaded");const a=this.toSeconds(e);this._startGain(a,o),this.loop?n=defaultArg(n,this.loopStart):n=defaultArg(n,0);let l=Math.max(this.toSeconds(n),0);if(this.loop){const c=this.toSeconds(this.loopEnd)||this.buffer.duration,p=this.toSeconds(this.loopStart),s=c-p;GTE(l,c)&&(l=(l-p)%s+p),EQ(l,this.buffer.duration)&&(l=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,LT(l,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(a,l)),isDefined(i)){let c=this.toSeconds(i);c=Math.max(c,0),this.stop(a+c)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Noise extends Source{constructor(){const e=optionsFromArguments(Noise.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(assert(e in _noiseBuffers,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=_noiseBuffers[this._type];this._source=new ToneBufferSource({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const BUFFER_LENGTH=44100*5,NUM_CHANNELS=2,_noiseCache={brown:null,pink:null,white:null},_noiseBuffers={get brown(){if(!_noiseCache.brown){const t=[];for(let e=0;e<NUM_CHANNELS;e++){const n=new Float32Array(BUFFER_LENGTH);t[e]=n;let i=0;for(let o=0;o<BUFFER_LENGTH;o++){const a=Math.random()*2-1;n[o]=(i+.02*a)/1.02,i=n[o],n[o]*=3.5}}_noiseCache.brown=new ToneAudioBuffer().fromArray(t)}return _noiseCache.brown},get pink(){if(!_noiseCache.pink){const t=[];for(let e=0;e<NUM_CHANNELS;e++){const n=new Float32Array(BUFFER_LENGTH);t[e]=n;let i,o,a,l,c,p,s;i=o=a=l=c=p=s=0;for(let u=0;u<BUFFER_LENGTH;u++){const d=Math.random()*2-1;i=.99886*i+d*.0555179,o=.99332*o+d*.0750759,a=.969*a+d*.153852,l=.8665*l+d*.3104856,c=.55*c+d*.5329522,p=-.7616*p-d*.016898,n[u]=i+o+a+l+c+p+s+d*.5362,n[u]*=.11,s=d*.115926}}_noiseCache.pink=new ToneAudioBuffer().fromArray(t)}return _noiseCache.pink},get white(){if(!_noiseCache.white){const t=[];for(let e=0;e<NUM_CHANNELS;e++){const n=new Float32Array(BUFFER_LENGTH);t[e]=n;for(let i=0;i<BUFFER_LENGTH;i++)n[i]=Math.random()*2-1}_noiseCache.white=new ToneAudioBuffer().fromArray(t)}return _noiseCache.white}};function generateWaveform(t,e){return __awaiter(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,i=new OfflineContext(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class ToneOscillatorNode extends OneShotSource{constructor(){const e=optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],connect(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Param({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Param({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Oscillator extends Source{constructor(){const e=optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new Signal({context:this.context,units:"frequency",value:e.frequency}),readOnly(this,"frequency"),this.detune=new Signal({context:this.context,units:"cents",value:e.detune}),readOnly(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),i=new ToneOscillatorNode({context:this.context,onended:()=>this.onstop(this)});this._oscillator=i,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Oscillator._periodicWaveCache.find(n=>n.phase===this._phase&&deepEquals(n.partials,this._partials));{const e=Oscillator._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const i=this._getCachedPeriodicWave();if(isDefined(i)){const{partials:o,wave:a}=i;this._wave=a,this._partials=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[o,a]=this._getRealImaginary(e,this._phase),l=this.context.createPeriodicWave(o,a);this._wave=l,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Oscillator._periodicWaveCache.push({imag:a,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:o,type:this._type,wave:this._wave}),Oscillator._periodicWaveCache.length>100&&Oscillator._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){assertRange(e,0);let n=this._type;const i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(i&&(n=i[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const o=new Float32Array(e);this._partials.forEach((a,l)=>o[l]=a),this._partials=Array.from(o),this.type=this._type}}_getRealImaginary(e,n){let o=2048;const a=new Float32Array(o),l=new Float32Array(o);let c=1;if(e==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,o=c,this._partials.length===0)return[a,l]}else{const p=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);p?(c=parseInt(p[2],10)+1,this._partialCount=parseInt(p[2],10),e=p[1],c=Math.max(c,2),o=c):this._partialCount=0,this._partials=[]}for(let p=1;p<o;++p){const s=2/(p*Math.PI);let u;switch(e){case"sine":u=p<=c?1:0,this._partials[p-1]=u;break;case"square":u=p&1?2*s:0,this._partials[p-1]=u;break;case"sawtooth":u=s*(p&1?1:-1),this._partials[p-1]=u;break;case"triangle":p&1?u=2*(s*s)*(p-1>>1&1?-1:1):u=0,this._partials[p-1]=u;break;case"custom":u=this._partials[p-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(a[p]=-u*Math.sin(n*p),l[p]=u*Math.cos(n*p)):(a[p]=0,l[p]=0)}return[a,l]}_inverseFFT(e,n,i){let o=0;const a=e.length;for(let l=0;l<a;l++)o+=e[l]*Math.cos(l*i)+n[l]*Math.sin(l*i);return o}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let i=0;const o=Math.PI*2,a=32;for(let l=0;l<a;l++)i=Math.max(this._inverseFFT(e,n,l/a*o),i);return clamp(-this._inverseFFT(e,n,this._phase)/i,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return __awaiter(this,arguments,void 0,function*(e=1024){return generateWaveform(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Oscillator._periodicWaveCache=[];class AudioToGain extends SignalOperator{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new WaveShaper({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Multiply extends Signal{constructor(){const e=optionsFromArguments(Multiply.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Gain({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class AMOscillator extends Source{constructor(){const e=optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new AudioToGain({context:this.context}),this._modulationNode=new Gain({context:this.context}),this._carrier=new Oscillator({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Oscillator({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),readOnly(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return __awaiter(this,arguments,void 0,function*(e=1024){return generateWaveform(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class FMOscillator extends Source{constructor(){const e=optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Gain({context:this.context,gain:0}),this._carrier=new Oscillator({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Signal({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Oscillator({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Multiply({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),readOnly(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return __awaiter(this,arguments,void 0,function*(e=1024){return generateWaveform(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class PulseOscillator extends Source{constructor(){const e=optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Gain({context:this.context,gain:0}),this._thresh=new WaveShaper({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new Signal({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Oscillator({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),readOnly(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return __awaiter(this,arguments,void 0,function*(e=1024){return generateWaveform(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class FatOscillator extends Source{constructor(){const e=optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new Signal({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,i=e/(this._oscillators.length-1);this._forEach((o,a)=>o.detune.value=n+i*a)}}get count(){return this._oscillators.length}set count(e){if(assertRange(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const i=new Oscillator({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):noOp});this.type==="custom"&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[n]=i}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,i)=>n.phase=this._phase+i/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return __awaiter(this,arguments,void 0,function*(e=1024){return generateWaveform(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class PWMOscillator extends Source{constructor(){const e=optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Multiply({context:this.context,value:2}),this._pulse=new PulseOscillator({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Oscillator({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),readOnly(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return __awaiter(this,arguments,void 0,function*(e=1024){return generateWaveform(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const OmniOscillatorSourceMap={am:AMOscillator,fat:FatOscillator,fm:FMOscillator,oscillator:Oscillator,pulse:PulseOscillator,pwm:PWMOscillator};class OmniOscillator extends Source{constructor(){const e=optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new Signal({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:e.detune}),readOnly(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Oscillator.getDefaults(),FMOscillator.getDefaults(),AMOscillator.getDefaults(),FatOscillator.getDefaults(),PulseOscillator.getDefaults(),PWMOscillator.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=OmniOscillatorSourceMap[e],i=this.now();if(this._oscillator){const o=this._oscillator;o.stop(i),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(i)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof OmniOscillatorSourceMap[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&isNumber(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&isNumber(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&isString(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return __awaiter(this,arguments,void 0,function*(e=1024){return generateWaveform(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Add extends Signal{constructor(){super(optionsFromArguments(Add.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,connectSeries(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Scale extends SignalOperator{constructor(){const e=optionsFromArguments(Scale.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Multiply({context:this.context,value:e.max-e.min}),this._add=this.output=new Add({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Zero extends SignalOperator{constructor(){super(optionsFromArguments(Zero.getDefaults(),arguments)),this.name="Zero",this._gain=new Gain({context:this.context}),this.output=this._gain,this.input=void 0,connect(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),disconnect(this.context.getConstant(0),this._gain),this}}class LFO extends ToneAudioNode{constructor(){const e=optionsFromArguments(LFO.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Param.prototype._fromType,this._toType=Param.prototype._toType,this._is=Param.prototype._is,this._clampValue=Param.prototype._clampValue,this._oscillator=new Oscillator(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Gain({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Signal({context:this.context,units:"audioRange",value:0}),this._zeros=new Zero({context:this.context}),this._a2g=new AudioToGain({context:this.context}),this._scaler=this.output=new Scale({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),readOnly(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const n=this.min,i=this.max;this._units=e,this.min=n,this.max=i}get state(){return this._oscillator.state}connect(e,n,i){return(e instanceof Param||e instanceof Signal)&&(this.convert=e.convert,this.units=e.units),connectSignal(this,e,n,i),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function range(t,e=1/0){const n=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(a){assertRange(a,t,e),n.set(this,a)}})}}function timeRange(t,e=1/0){const n=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(a){assertRange(this.toSeconds(a),t,e),n.set(this,a)}})}}class Player extends Source{constructor(){const e=optionsFromArguments(Player.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new ToneAudioBuffer({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1,reverse:!1})}load(e){return __awaiter(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=noOp){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,i){return super.start(e,n,i),this}_start(e,n,i){this._loop?n=defaultArg(n,this._loopStart):n=defaultArg(n,0);const o=this.toSeconds(n),a=i;i=defaultArg(i,Math.max(this._buffer.duration-o,0));let l=this.toSeconds(i);l=l/this._playbackRate,e=this.toSeconds(e);const c=new ToneBufferSource({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+l),this._state.setStateAtTime("stopped",e+l,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&isUndef(a)?c.start(e,o):c.start(e,o,l-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(i=>i.stop(n))}restart(e,n,i){return super.restart(e,n,i),this}_restart(e,n,i){var o;(o=[...this._activeSources].pop())===null||o===void 0||o.stop(e),this._start(e,n,i)}seek(e,n){const i=this.toSeconds(n);if(this._state.getValueAtTime(i)==="started"){const o=this.toSeconds(e);this._stop(i),this._start(i,o)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&assertRange(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&assertRange(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),i=this._state.getNextState("stopped",n);i&&i.implicitEnd&&(this._state.cancel(i.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}__decorate([timeRange(0)],Player.prototype,"fadeIn",void 0);__decorate([timeRange(0)],Player.prototype,"fadeOut",void 0);class GainToAudio extends SignalOperator{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new WaveShaper({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Envelope extends ToneAudioNode{constructor(){const e=optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new Signal({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(isString(e))return e;{let i;for(i in EnvelopeCurves)if(EnvelopeCurves[i][n]===e)return i;return e}}_setCurve(e,n,i){if(isString(i)&&Reflect.has(EnvelopeCurves,i)){const o=EnvelopeCurves[i];isObject(o)?e!=="_decayCurve"&&(this[e]=o[n]):this[e]=o}else if(isArray(i)&&e!=="_decayCurve")this[e]=i;else throw new Error("Envelope: invalid curve: "+i)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let o=this.toSeconds(this.attack);const a=this.toSeconds(this.decay),l=this.getValueAtTime(e);if(l>0){const c=1/o;o=(1-l)/c}if(o<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,o,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,o,e);else{this._sig.cancelAndHoldAtTime(e);let c=this._attackCurve;for(let p=1;p<c.length;p++)if(c[p-1]<=l&&l<=c[p]){c=this._attackCurve.slice(p),c[0]=l;break}this._sig.setValueCurveAtTime(c,e,o,n)}if(a&&this.sustain<1){const c=n*this.sustain,p=e+o;this.log("decay",p),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(c,a+p):this._sig.exponentialApproachValueAtTime(c,p,a)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const i=this.toSeconds(this.release);i<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,i,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,i,e):(assert(isArray(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,i,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,i=1){return n=this.toSeconds(n),this.triggerAttack(n,i),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,i=0){return connectSignal(this,e,n,i),this}asArray(){return __awaiter(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,i=new OfflineContext(1,n,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),a=o+this.toSeconds(this.release),l=a*.1,c=a+l,p=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/c,decay:n*this.toSeconds(this.decay)/c,release:n*this.toSeconds(this.release)/c,context:i}));return p._sig.toDestination(),p.triggerAttackRelease(n*(o+l)/c,0),(yield i.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}__decorate([timeRange(0)],Envelope.prototype,"attack",void 0);__decorate([timeRange(0)],Envelope.prototype,"decay",void 0);__decorate([range(0,1)],Envelope.prototype,"sustain",void 0);__decorate([timeRange(0)],Envelope.prototype,"release",void 0);const EnvelopeCurves=(()=>{let e,n;const i=[];for(e=0;e<128;e++)i[e]=Math.sin(e/127*(Math.PI/2));const o=[],a=6.4;for(e=0;e<127;e++){n=e/127;const g=Math.sin(n*(Math.PI*2)*a-Math.PI/2)+1;o[e]=g/10+n*.83}o[127]=1;const l=[],c=5;for(e=0;e<128;e++)l[e]=Math.ceil(e/127*c)/c;const p=[];for(e=0;e<128;e++)n=e/127,p[e]=.5*(1-Math.cos(Math.PI*n));const s=[];for(e=0;e<128;e++){n=e/127;const g=Math.pow(n,3)*4+.2,w=Math.cos(g*Math.PI*2*n);s[e]=Math.abs(w*(1-n))}function u(g){const w=new Array(g.length);for(let x=0;x<g.length;x++)w[x]=1-g[x];return w}function d(g){return g.slice(0).reverse()}return{bounce:{In:u(s),Out:s},cosine:{In:i,Out:d(i)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:u(o)},sine:{In:p,Out:u(p)},step:{In:l,Out:u(l)}}})();class Instrument extends ToneAudioNode{constructor(){const e=optionsFromArguments(Instrument.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new Volume({context:this.context,volume:e.volume}),this.volume=this._volume.volume,readOnly(this,"volume")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const i=this["_original_"+e]=this[e];this[e]=(...o)=>{const a=o[n],l=this.context.transport.schedule(c=>{o[n]=c,i.apply(this,o)},a);this._scheduledEvents.push(l)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,i,o){const a=this.toSeconds(i),l=this.toSeconds(n);return this.triggerAttack(e,a,o),this.triggerRelease(a+l),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Monophonic extends Instrument{constructor(){const e=optionsFromArguments(Monophonic.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Instrument.getDefaults(),{detune:0,onsilence:noOp,portamento:0})}triggerAttack(e,n,i=1){this.log("triggerAttack",e,n,i);const o=this.toSeconds(n);return this._triggerEnvelopeAttack(o,i),this.setNote(e,o),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const i=this.toSeconds(n),o=e instanceof FrequencyClass?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(i)>.05){const a=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,a,i)}else this.frequency.setValueAtTime(o,i);return this}}__decorate([timeRange(0)],Monophonic.prototype,"portamento",void 0);class AmplitudeEnvelope extends Envelope{constructor(){super(optionsFromArguments(AmplitudeEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Gain({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Synth extends Monophonic{constructor(){const e=optionsFromArguments(Synth.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new OmniOscillator(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),readOnly(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const i=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+i+o)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class BiquadFilter extends ToneAudioNode{constructor(){const e=optionsFromArguments(BiquadFilter.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Param({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Param({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Param({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Param({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let l=0;l<e;l++){const p=Math.pow(l/e,2)*19980+20;n[l]=p}const i=new Float32Array(e),o=new Float32Array(e),a=this.context.createBiquadFilter();return a.type=this.type,a.Q.value=this.Q.value,a.frequency.value=this.frequency.value,a.gain.value=this.gain.value,a.getFrequencyResponse(n,i,o),i}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Filter extends ToneAudioNode{constructor(){const e=optionsFromArguments(Filter.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._filters=[],this._filters=[],this.Q=new Signal({context:this.context,units:"positive",value:e.Q}),this.frequency=new Signal({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:e.detune}),this.gain=new Signal({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,readOnly(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(i=>i.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const n=isNumber(e)?e:parseInt(e,10),i=[-12,-24,-48,-96];let o=i.indexOf(n);assert(o!==-1,`rolloff can only be ${i.join(", ")}`),o+=1,this._rolloff=n,this.input.disconnect(),this._filters.forEach(a=>a.disconnect()),this._filters=new Array(o);for(let a=0;a<o;a++){const l=new BiquadFilter({context:this.context});l.type=this._type,this.frequency.connect(l.frequency),this.detune.connect(l.detune),this.Q.connect(l.Q),this.gain.connect(l.gain),this._filters[a]=l}this._internalChannels=this._filters,connectSeries(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const n=new BiquadFilter({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),i=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{n.getFrequencyResponse(e).forEach((a,l)=>i[l]*=a)}),n.dispose(),i}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),writable(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class MembraneSynth extends Synth{constructor(){const e=optionsFromArguments(MembraneSynth.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,readOnly(this,["oscillator","envelope"])}static getDefaults(){return deepMerge(Monophonic.getDefaults(),Synth.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const i=this.toSeconds(n),o=this.toFrequency(e instanceof FrequencyClass?e.toFrequency():e),a=o*this.octaves;return this.oscillator.frequency.setValueAtTime(a,i),this.oscillator.frequency.exponentialRampToValueAtTime(o,i+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}__decorate([range(0)],MembraneSynth.prototype,"octaves",void 0);__decorate([timeRange(0)],MembraneSynth.prototype,"pitchDecay",void 0);const workletContext=new Set;function addToWorklet(t){workletContext.add(t)}function registerProcessor(t,e){const n=`registerProcessor("${t}", ${e})`;workletContext.add(n)}const toneAudioWorkletProcessor=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;addToWorklet(toneAudioWorkletProcessor);const singleIOProcess=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;addToWorklet(singleIOProcess);const delayLine=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;addToWorklet(delayLine);const workletName$1="feedback-comb-filter",feedbackCombFilter=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;registerProcessor(workletName$1,feedbackCombFilter);class Sampler extends Instrument{constructor(){const e=optionsFromArguments(Sampler.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(i=>{const o=parseInt(i,10);if(assert(isNote(i)||isNumber(o)&&isFinite(o),`url key is neither a note or midi pitch: ${i}`),isNote(i)){const a=new FrequencyClass(this.context,i).toMidi();n[a]=e.urls[i]}else isNumber(o)&&isFinite(o)&&(n[o]=e.urls[o])}),this._buffers=new ToneAudioBuffers({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Instrument.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:noOp,onerror:noOp,release:.1,urls:{}})}_findClosest(e){let i=0;for(;i<96;){if(this._buffers.has(e+i))return-i;if(this._buffers.has(e-i))return i;i++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,i=1){return this.log("triggerAttack",e,n,i),Array.isArray(e)||(e=[e]),e.forEach(o=>{const a=ftomf(new FrequencyClass(this.context,o).toFrequency()),l=Math.round(a),c=a-l,p=this._findClosest(l),s=l-p,u=this._buffers.get(s),d=intervalToFrequencyRatio(p+c),g=new ToneBufferSource({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);g.start(n,0,u.duration/d,i),isArray(this._activeSources.get(l))||this._activeSources.set(l,[]),this._activeSources.get(l).push(g),g.onended=()=>{if(this._activeSources&&this._activeSources.has(l)){const w=this._activeSources.get(l),x=w.indexOf(g);x!==-1&&w.splice(x,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(i=>{const o=new FrequencyClass(this.context,i).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){const a=this._activeSources.get(o);n=this.toSeconds(n),a.forEach(l=>{l.stop(n)}),this._activeSources.set(o,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(i=>{for(;i.length;)i.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,i,o=1){const a=this.toSeconds(i);return this.triggerAttack(e,a,o),isArray(n)?(assert(isArray(e),"notes must be an array when duration is array"),e.forEach((l,c)=>{const p=n[Math.min(c,n.length-1)];this.triggerRelease(l,a+this.toSeconds(p))})):this.triggerRelease(e,a+this.toSeconds(n)),this}add(e,n,i){if(assert(isNote(e)||isFinite(e),`note must be a pitch or midi: ${e}`),isNote(e)){const o=new FrequencyClass(this.context,e).toMidi();this._buffers.add(o,n,i)}else this._buffers.add(e,n,i);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}__decorate([timeRange(0)],Sampler.prototype,"attack",void 0);__decorate([timeRange(0)],Sampler.prototype,"release",void 0);class CrossFade extends ToneAudioNode{constructor(){const e=optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new GainToAudio({context:this.context}),this.a=new Gain({context:this.context,gain:0}),this.b=new Gain({context:this.context,gain:0}),this.output=new Gain({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new Signal({context:this.context,units:"normalRange",value:e.fade}),readOnly(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",connect(this._split,this.a.gain,0),connect(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Effect extends ToneAudioNode{constructor(e){super(e),this.name="Effect",this._dryWet=new CrossFade({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Gain({context:this.context}),this.effectReturn=new Gain({context:this.context}),this.input=new Gain({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],readOnly(this,"wet")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class LFOEffect extends Effect{constructor(e){super(e),this.name="LFOEffect",this._lfo=new LFO({context:this.context,frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=e.type,readOnly(this,["frequency","depth"])}static getDefaults(){return Object.assign(Effect.getDefaults(),{frequency:1,type:"sine",depth:1})}start(e){return this._lfo.start(e),this}stop(e){return this._lfo.stop(e),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class AutoFilter extends LFOEffect{constructor(){const e=optionsFromArguments(AutoFilter.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);super(e),this.name="AutoFilter",this.filter=new Filter(Object.assign(e.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency}static getDefaults(){return Object.assign(LFOEffect.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(e){this._lfo.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._lfo.max=this._lfo.min*Math.pow(2,e)}dispose(){return super.dispose(),this.filter.dispose(),this}}class Panner extends ToneAudioNode{constructor(){const e=optionsFromArguments(Panner.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Param({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",readOnly(this,"pan")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const workletName="bit-crusher",bitCrusherWorklet=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;registerProcessor(workletName,bitCrusherWorklet);class Split extends ToneAudioNode{constructor(){const e=optionsFromArguments(Split.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Merge extends ToneAudioNode{constructor(){const e=optionsFromArguments(Merge.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class StereoEffect extends ToneAudioNode{constructor(e){super(e),this.name="StereoEffect",this.input=new Gain({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new CrossFade({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new Split({context:this.context,channels:2}),this._merge=new Merge({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),readOnly(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),connectSeries(...e),connect(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),connectSeries(...e),connect(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class StereoFeedbackEffect extends StereoEffect{constructor(e){super(e),this.feedback=new Signal({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new Gain({context:this.context}),this._feedbackR=new Gain({context:this.context}),this._feedbackSplit=new Split({context:this.context,channels:2}),this._feedbackMerge=new Merge({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),readOnly(this,["feedback"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Chorus extends StereoFeedbackEffect{constructor(){const e=optionsFromArguments(Chorus.getDefaults(),arguments,["frequency","delayTime","depth"]);super(e),this.name="Chorus",this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new LFO({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new LFO({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new Delay({context:this.context}),this._delayNodeR=new Delay({context:this.context}),this.frequency=this._lfoL.frequency,readOnly(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(StereoFeedbackEffect.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const n=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-n,0),this._lfoL.max=this._delayTime+n,this._lfoR.min=Math.max(this._delayTime-n,0),this._lfoR.max=this._delayTime+n}get delayTime(){return this._delayTime*1e3}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Distortion extends Effect{constructor(){const e=optionsFromArguments(Distortion.getDefaults(),arguments,["distortion"]);super(e),this.name="Distortion",this._shaper=new WaveShaper({context:this.context,length:4096}),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample}static getDefaults(){return Object.assign(Effect.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(e){this._distortion=e;const n=e*100,i=Math.PI/180;this._shaper.setMap(o=>Math.abs(o)<.001?0:(3+n)*o*20*i/(Math.PI+n*Math.abs(o)))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class FeedbackEffect extends Effect{constructor(e){super(e),this.name="FeedbackEffect",this._feedbackGain=new Gain({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,readOnly(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Effect.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class FeedbackDelay extends FeedbackEffect{constructor(){const e=optionsFromArguments(FeedbackDelay.getDefaults(),arguments,["delayTime","feedback"]);super(e),this.name="FeedbackDelay",this._delayNode=new Delay({context:this.context,delayTime:e.delayTime,maxDelay:e.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),readOnly(this,"delayTime")}static getDefaults(){return Object.assign(FeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class StereoXFeedbackEffect extends StereoFeedbackEffect{constructor(e){super(e),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),readOnly(this,["feedback"])}}class PingPongDelay extends StereoXFeedbackEffect{constructor(){const e=optionsFromArguments(PingPongDelay.getDefaults(),arguments,["delayTime","feedback"]);super(e),this.name="PingPongDelay",this._leftDelay=new Delay({context:this.context,maxDelay:e.maxDelay}),this._rightDelay=new Delay({context:this.context,maxDelay:e.maxDelay}),this._rightPreDelay=new Delay({context:this.context,maxDelay:e.maxDelay}),this.delayTime=new Signal({context:this.context,units:"time",value:e.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),readOnly(this,["delayTime"])}static getDefaults(){return Object.assign(StereoXFeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class PitchShift extends FeedbackEffect{constructor(){const e=optionsFromArguments(PitchShift.getDefaults(),arguments,["pitch"]);super(e),this.name="PitchShift",this._frequency=new Signal({context:this.context}),this._delayA=new Delay({maxDelay:1,context:this.context}),this._lfoA=new LFO({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new Delay({maxDelay:1,context:this.context}),this._lfoB=new LFO({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new CrossFade({context:this.context}),this._crossFadeLFO=new LFO({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new Delay({delayTime:e.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,readOnly(this,"delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const n=this.now();this._lfoA.start(n),this._lfoB.start(n),this._crossFadeLFO.start(n),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(FeedbackEffect.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(e){this._pitch=e;let n=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,n=intervalToFrequencyRatio(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,n=intervalToFrequencyRatio(e)-1),this._frequency.value=n*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(e){this._windowSize=this.toSeconds(e),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class Phaser extends StereoEffect{constructor(){const e=optionsFromArguments(Phaser.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);super(e),this.name="Phaser",this._lfoL=new LFO({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new LFO({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this.Q=new Signal({context:this.context,value:e.Q,units:"positive"}),this._filtersL=this._makeFilters(e.stages,this._lfoL),this._filtersR=this._makeFilters(e.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),readOnly(this,["frequency","Q"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(e,n){const i=[];for(let o=0;o<e;o++){const a=this.context.createBiquadFilter();a.type="allpass",this.Q.connect(a.Q),n.connect(a.frequency),i.push(a)}return i}get octaves(){return this._octaves}set octaves(e){this._octaves=e;const n=this._baseFrequency*Math.pow(2,e);this._lfoL.max=n,this._lfoR.max=n}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(e=>e.disconnect()),this._filtersR.forEach(e=>e.disconnect()),this.frequency.dispose(),this}}class Reverb extends Effect{constructor(){const e=optionsFromArguments(Reverb.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const n=this.toSeconds(e.decay);assertRange(n,.001),this._decay=n;const i=this.toSeconds(e.preDelay);assertRange(i,0),this._preDelay=i,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Effect.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),assertRange(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),assertRange(e,0),this._preDelay=e,this.generate()}generate(){return __awaiter(this,void 0,void 0,function*(){const e=this.ready,n=new OfflineContext(2,this._decay+this._preDelay,this.context.sampleRate),i=new Noise({context:n}),o=new Noise({context:n}),a=new Merge({context:n});i.connect(a,0,0),o.connect(a,0,1);const l=new Gain({context:n}).toDestination();a.connect(l),i.start(0),o.start(0),l.gain.setValueAtTime(0,0),l.gain.setValueAtTime(1,this._preDelay),l.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const c=n.render();return this.ready=c.then(noOp),yield e,this._convolver.buffer=(yield c).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Tremolo extends StereoEffect{constructor(){const e=optionsFromArguments(Tremolo.getDefaults(),arguments,["frequency","depth"]);super(e),this.name="Tremolo",this._lfoL=new LFO({context:this.context,type:e.type,min:1,max:0}),this._lfoR=new LFO({context:this.context,type:e.type,min:1,max:0}),this._amplitudeL=new Gain({context:this.context}),this._amplitudeR=new Gain({context:this.context}),this.frequency=new Signal({context:this.context,value:e.frequency,units:"frequency"}),this.depth=new Signal({context:this.context,value:e.depth,units:"normalRange"}),readOnly(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=e.spread}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Vibrato extends Effect{constructor(){const e=optionsFromArguments(Vibrato.getDefaults(),arguments,["frequency","depth"]);super(e),this.name="Vibrato",this._delayNode=new Delay({context:this.context,delayTime:0,maxDelay:e.maxDelay}),this._lfo=new LFO({context:this.context,type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,readOnly(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(Effect.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Solo extends ToneAudioNode{constructor(){const e=optionsFromArguments(Solo.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Gain({context:this.context}),Solo._allSolos.has(this.context)||Solo._allSolos.set(this.context,new Set),Solo._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Solo._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Solo._soloed.has(this.context)||Solo._soloed.set(this.context,new Set),Solo._soloed.get(this.context).add(this)}_removeSolo(){Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).delete(this)}_isSoloed(){return Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).has(this)}_noSolos(){return!Solo._soloed.has(this.context)||Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Solo._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Solo._allSolos=new Map;Solo._soloed=new Map;class PanVol extends ToneAudioNode{constructor(){const e=optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Panner({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Volume({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Channel extends ToneAudioNode{constructor(){const e=optionsFromArguments(Channel.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new Solo({solo:e.solo,context:this.context}),this._panVol=this.output=new PanVol({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Channel.buses.has(e)||Channel.buses.set(e,new Gain({context:this.context})),Channel.buses.get(e)}send(e,n=0){const i=this._getBus(e),o=new Gain({context:this.context,units:"decibels",gain:n});return this.connect(o),o.connect(i),o}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Channel.buses=new Map;class MultibandSplit extends ToneAudioNode{constructor(){const e=optionsFromArguments(MultibandSplit.getDefaults(),arguments,["lowFrequency","highFrequency"]);super(e),this.name="MultibandSplit",this.input=new Gain({context:this.context}),this.output=void 0,this.low=new Filter({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Filter({context:this.context,frequency:0,type:"highpass"}),this.mid=new Filter({context:this.context,frequency:0,type:"lowpass"}),this.high=new Filter({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high],this.lowFrequency=new Signal({context:this.context,units:"frequency",value:e.lowFrequency}),this.highFrequency=new Signal({context:this.context,units:"frequency",value:e.highFrequency}),this.Q=new Signal({context:this.context,units:"positive",value:e.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),readOnly(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),writable(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class Recorder extends ToneAudioNode{constructor(){const e=optionsFromArguments(Recorder.getDefaults(),arguments);super(e),this.name="Recorder",this.input=new Gain({context:this.context}),assert(Recorder.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:e.mimeType})}static getDefaults(){return ToneAudioNode.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return theWindow!==null&&Reflect.has(theWindow,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return __awaiter(this,void 0,void 0,function*(){assert(this.state!=="started","Recorder is already started");const e=new Promise(n=>{const i=()=>{this._recorder.removeEventListener("start",i,!1),n()};this._recorder.addEventListener("start",i,!1)});return this.state==="stopped"?this._recorder.start():this._recorder.resume(),yield e})}stop(){return __awaiter(this,void 0,void 0,function*(){assert(this.state!=="stopped","Recorder is not started");const e=new Promise(n=>{const i=o=>{this._recorder.removeEventListener("dataavailable",i,!1),n(o.data)};this._recorder.addEventListener("dataavailable",i,!1)});return this._recorder.stop(),yield e})}pause(){return assert(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class Compressor extends ToneAudioNode{constructor(){const e=optionsFromArguments(Compressor.getDefaults(),arguments,["threshold","ratio"]);super(e),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor,this.threshold=new Param({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:e.threshold}),this.attack=new Param({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:e.attack}),this.release=new Param({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:e.release}),this.knee=new Param({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:e.knee}),this.ratio=new Param({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:e.ratio}),readOnly(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Limiter extends ToneAudioNode{constructor(){const e=optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]);super(e),this.name="Limiter",this._compressor=this.input=this.output=new Compressor({context:this.context,ratio:20,attack:.003,release:.01,threshold:e.threshold}),this.threshold=this._compressor.threshold,readOnly(this,"threshold")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class EQ3 extends ToneAudioNode{constructor(){const e=optionsFromArguments(EQ3.getDefaults(),arguments,["low","mid","high"]);super(e),this.name="EQ3",this.output=new Gain({context:this.context}),this._internalChannels=[],this.input=this._multibandSplit=new MultibandSplit({context:this.context,highFrequency:e.highFrequency,lowFrequency:e.lowFrequency}),this._lowGain=new Gain({context:this.context,gain:e.low,units:"decibels"}),this._midGain=new Gain({context:this.context,gain:e.mid,units:"decibels"}),this._highGain=new Gain({context:this.context,gain:e.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),readOnly(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),writable(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}function now(){return getContext().now()}getContext().transport;const Destination=getContext().destination;getContext().destination;getContext().listener;getContext().draw;getContext();var FFMessageType;(function(t){t.LOAD="LOAD",t.EXEC="EXEC",t.FFPROBE="FFPROBE",t.WRITE_FILE="WRITE_FILE",t.READ_FILE="READ_FILE",t.DELETE_FILE="DELETE_FILE",t.RENAME="RENAME",t.CREATE_DIR="CREATE_DIR",t.LIST_DIR="LIST_DIR",t.DELETE_DIR="DELETE_DIR",t.ERROR="ERROR",t.DOWNLOAD="DOWNLOAD",t.PROGRESS="PROGRESS",t.LOG="LOG",t.MOUNT="MOUNT",t.UNMOUNT="UNMOUNT"})(FFMessageType||(FFMessageType={}));const getMessageID=(()=>{let t=0;return()=>t++})(),ERROR_NOT_LOADED=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),ERROR_TERMINATED=new Error("called FFmpeg.terminate()");class FFmpeg{#t=null;#r={};#n={};#i=[];#a=[];loaded=!1;#s=()=>{this.#t&&(this.#t.onmessage=({data:{id:e,type:n,data:i}})=>{switch(n){case FFMessageType.LOAD:this.loaded=!0,this.#r[e](i);break;case FFMessageType.MOUNT:case FFMessageType.UNMOUNT:case FFMessageType.EXEC:case FFMessageType.FFPROBE:case FFMessageType.WRITE_FILE:case FFMessageType.READ_FILE:case FFMessageType.DELETE_FILE:case FFMessageType.RENAME:case FFMessageType.CREATE_DIR:case FFMessageType.LIST_DIR:case FFMessageType.DELETE_DIR:this.#r[e](i);break;case FFMessageType.LOG:this.#i.forEach(o=>o(i));break;case FFMessageType.PROGRESS:this.#a.forEach(o=>o(i));break;case FFMessageType.ERROR:this.#n[e](i);break}delete this.#r[e],delete this.#n[e]})};#e=({type:e,data:n},i=[],o)=>this.#t?new Promise((a,l)=>{const c=getMessageID();this.#t&&this.#t.postMessage({id:c,type:e,data:n},i),this.#r[c]=a,this.#n[c]=l,o?.addEventListener("abort",()=>{l(new DOMException(`Message # ${c} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(ERROR_NOT_LOADED);on(e,n){e==="log"?this.#i.push(n):e==="progress"&&this.#a.push(n)}off(e,n){e==="log"?this.#i=this.#i.filter(i=>i!==n):e==="progress"&&(this.#a=this.#a.filter(i=>i!==n))}load=({classWorkerURL:e,...n}={},{signal:i}={})=>(this.#t||(this.#t=e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL(""+new URL("worker-BAOIWoxA.js",import.meta.url).href,import.meta.url),{type:"module"}),this.#s()),this.#e({type:FFMessageType.LOAD,data:n},void 0,i));exec=(e,n=-1,{signal:i}={})=>this.#e({type:FFMessageType.EXEC,data:{args:e,timeout:n}},void 0,i);ffprobe=(e,n=-1,{signal:i}={})=>this.#e({type:FFMessageType.FFPROBE,data:{args:e,timeout:n}},void 0,i);terminate=()=>{const e=Object.keys(this.#n);for(const n of e)this.#n[n](ERROR_TERMINATED),delete this.#n[n],delete this.#r[n];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(e,n,{signal:i}={})=>{const o=[];return n instanceof Uint8Array&&o.push(n.buffer),this.#e({type:FFMessageType.WRITE_FILE,data:{path:e,data:n}},o,i)};mount=(e,n,i)=>{const o=[];return this.#e({type:FFMessageType.MOUNT,data:{fsType:e,options:n,mountPoint:i}},o)};unmount=e=>{const n=[];return this.#e({type:FFMessageType.UNMOUNT,data:{mountPoint:e}},n)};readFile=(e,n="binary",{signal:i}={})=>this.#e({type:FFMessageType.READ_FILE,data:{path:e,encoding:n}},void 0,i);deleteFile=(e,{signal:n}={})=>this.#e({type:FFMessageType.DELETE_FILE,data:{path:e}},void 0,n);rename=(e,n,{signal:i}={})=>this.#e({type:FFMessageType.RENAME,data:{oldPath:e,newPath:n}},void 0,i);createDir=(e,{signal:n}={})=>this.#e({type:FFMessageType.CREATE_DIR,data:{path:e}},void 0,n);listDir=(e,{signal:n}={})=>this.#e({type:FFMessageType.LIST_DIR,data:{path:e}},void 0,n);deleteDir=(e,{signal:n}={})=>this.#e({type:FFMessageType.DELETE_DIR,data:{path:e}},void 0,n)}var FFFSType;(function(t){t.MEMFS="MEMFS",t.NODEFS="NODEFS",t.NODERAWFS="NODERAWFS",t.IDBFS="IDBFS",t.WORKERFS="WORKERFS",t.PROXYFS="PROXYFS"})(FFFSType||(FFFSType={}));const AudioMimeTypes={mp3:"audio/mpeg",wav:"audio/wav",m4a:"audio/mp4",ogg:"audio/ogg"},KnownFormats={mp3:{name:"mp3"}},useFFmpeg=()=>{const[t,e]=reactExports.useState(!1),[n,i]=reactExports.useState(0),o=reactExports.useRef(new FFmpeg),a=reactExports.useCallback(async()=>{const p=o.current;p.on("log",({message:s})=>{console.log("📝 FFmpeg:",s)}),await p.load(),e(!0)},[]),l=reactExports.useCallback(async()=>{if(!t)return await a(),!0},[t,a]),c=reactExports.useCallback(async(p,s=KnownFormats.mp3.name)=>{ensure(t,"FFmpeg");try{const u="input.wav",d=`output.${s}`;console.log("📝 Writing input file...");const g=await p.arrayBuffer(),w=o.current;await w.writeFile(u,new Uint8Array(g)),console.log("✓ Input file written");const x=["-i",u,...s==="mp3"?["-b:a","192k"]:[],d];console.log("🎬 Running FFmpeg command:",x.join(" ")),await w.exec(x),console.log("✓ FFmpeg command completed"),console.log("📤 Reading output file...");const C=await w.readFile(d),O=C instanceof Uint8Array?C:new Uint8Array(C);console.log("✓ Output file read");const Y=new Blob([O],{type:AudioMimeTypes[s]||AudioMimeTypes.mp3});return console.log("✅ Conversion complete!"),console.log("  → Output size:",Math.round(Y.size/1024),"KB"),Y}catch(u){throw console.error("❌ FFmpeg conversion error:",u),u}},[t]);return reactExports.useEffect(()=>{a().catch(p=>{console.error("❌ FFmpeg auto-load failed:",p),i(0)})},[a]),reactExports.useEffect(()=>()=>{},[]),{loaded:t,loadProgress:n,load:l,convertAudio:c,ffmpeg:o.current}},audioBufferToWav=t=>new Promise(e=>{const n=t.length,i=t.numberOfChannels,o=t.sampleRate,a=new ArrayBuffer(44+n*i*2),l=new DataView(a),c=(s,u)=>{for(let d=0;d<u.length;d++)l.setUint8(s+d,u.charCodeAt(d))};c(0,"RIFF"),l.setUint32(4,36+n*i*2,!0),c(8,"WAVE"),c(12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,1,!0),l.setUint16(22,i,!0),l.setUint32(24,o,!0),l.setUint32(28,o*i*2,!0),l.setUint16(32,i*2,!0),l.setUint16(34,16,!0),c(36,"data"),l.setUint32(40,n*i*2,!0);let p=44;for(let s=0;s<n;s++)for(let u=0;u<i;u++){const d=Math.max(-1,Math.min(1,t.getChannelData(u)[s]));l.setInt16(p,d<0?d*32768:d*32767,!0),p+=2}e(new Blob([a],{type:"audio/wav"}))}),defaultEffects={tempo:{enabled:!1,playbackRate:1},distortion:{enabled:!1,amount:.4,oversample:"4x"},chorus:{enabled:!1,frequency:1.5,delayTime:3.5,depth:.7},phaser:{enabled:!1,frequency:.5,octaves:3,depth:1},tremolo:{enabled:!1,frequency:10,depth:.9},vibrato:{enabled:!1,frequency:5,depth:.1},reverb:{enabled:!1,decay:1.5,wet:.3},delay:{enabled:!1,delayTime:.25,feedback:.125,wet:.25},pingPongDelay:{enabled:!1,delayTime:.25,feedback:.125,wet:.25},filter:{enabled:!1,frequency:1e3,type:"lowpass",Q:1},autoFilter:{enabled:!1,frequency:1,depth:1,baseFrequency:200},compressor:{enabled:!1,threshold:-24,ratio:12,attack:.003,release:.25},limiter:{enabled:!1,threshold:-20},pitchShift:{enabled:!1,pitch:0,wet:1},eq3:{enabled:!1,low:0,mid:0,high:0},volume:{enabled:!1,volume:0}},useAudioEffects=()=>{const[t,e]=reactExports.useState(null),[n,i]=reactExports.useState(""),[o,a]=reactExports.useState({isPlaying:!1,isLoading:!1,duration:0,currentTime:0,isLooping:!1}),[l,c]=reactExports.useState(defaultEffects),[p,s]=reactExports.useState(!1),[u,d]=reactExports.useState([]),g=reactExports.useRef(null),w=reactExports.useRef({}),x=reactExports.useRef(null),C=reactExports.useRef(null),O=reactExports.useRef(null),{loaded:Y,loadProgress:q,convertAudio:ue}=useFFmpeg(),pe=reactExports.useCallback(()=>{if(!g.current)return;Object.values(w.current).forEach(ze=>{if(ze&&ze.dispose)try{ze.dispose()}catch(Ht){console.warn("Error disposing effect:",Ht)}}),w.current={};try{g.current.disconnect()}catch{}const Ft=new Gain(1);C.current=Ft;let Tt=g.current;if(l.tempo.enabled?g.current.playbackRate=l.tempo.playbackRate:g.current.playbackRate=1,l.eq3.enabled){const ze=new EQ3(l.eq3.low,l.eq3.mid,l.eq3.high);w.current.eq3=ze,Tt.connect(ze),Tt=ze}if(l.compressor.enabled){const ze=new Compressor({threshold:l.compressor.threshold,ratio:l.compressor.ratio,attack:l.compressor.attack,release:l.compressor.release});w.current.compressor=ze,Tt.connect(ze),Tt=ze}if(l.distortion.enabled){const ze=new Distortion({distortion:l.distortion.amount,oversample:l.distortion.oversample});w.current.distortion=ze,Tt.connect(ze),Tt=ze}if(l.filter.enabled){const ze=new Filter({frequency:l.filter.frequency,type:l.filter.type,Q:l.filter.Q});w.current.filter=ze,Tt.connect(ze),Tt=ze}if(l.autoFilter.enabled){const ze=new AutoFilter({frequency:l.autoFilter.frequency,depth:l.autoFilter.depth,baseFrequency:l.autoFilter.baseFrequency}).start();w.current.autoFilter=ze,Tt.connect(ze),Tt=ze}if(l.pitchShift.enabled){const ze=new PitchShift({pitch:l.pitchShift.pitch,wet:l.pitchShift.wet});w.current.pitchShift=ze,Tt.connect(ze),Tt=ze}if(l.chorus.enabled){const ze=new Chorus({frequency:l.chorus.frequency,delayTime:l.chorus.delayTime,depth:l.chorus.depth}).start();w.current.chorus=ze,Tt.connect(ze),Tt=ze}if(l.phaser.enabled){const ze=new Phaser({frequency:l.phaser.frequency,octaves:l.phaser.octaves});w.current.phaser=ze,Tt.connect(ze),Tt=ze}if(l.tremolo.enabled){const ze=new Tremolo({frequency:l.tremolo.frequency,depth:l.tremolo.depth}).start();w.current.tremolo=ze,Tt.connect(ze),Tt=ze}if(l.vibrato.enabled){const ze=new Vibrato({frequency:l.vibrato.frequency,depth:l.vibrato.depth});w.current.vibrato=ze,Tt.connect(ze),Tt=ze}if(l.delay.enabled){const ze=new FeedbackDelay({delayTime:l.delay.delayTime,feedback:l.delay.feedback,wet:l.delay.wet});w.current.delay=ze,Tt.connect(ze),Tt=ze}if(l.pingPongDelay.enabled){const ze=new PingPongDelay({delayTime:l.pingPongDelay.delayTime,feedback:l.pingPongDelay.feedback,wet:l.pingPongDelay.wet});w.current.pingPongDelay=ze,Tt.connect(ze),Tt=ze}if(l.reverb.enabled){const ze=new Reverb({decay:l.reverb.decay,wet:l.reverb.wet});w.current.reverb=ze,Tt.connect(ze),Tt=ze}if(l.volume.enabled){const ze=new Volume(l.volume.volume);w.current.volume=ze,Tt.connect(ze),Tt=ze}if(l.limiter.enabled){const ze=new Limiter(l.limiter.threshold);w.current.limiter=ze,Tt.connect(ze),Tt=ze}Tt.connect(Ft),x.current&&Ft.connect(x.current),Ft.connect(Destination)},[l]),se=reactExports.useCallback(Ft=>{const ze=Math.floor(Ft.length/1e3),Ht=[],Ae=Ft.getChannelData(0);for(let No=0;No<1e3;No++){let ah=0;const Mo=No*ze,t0=Math.min(Mo+ze,Ae.length);for(let Xr=Mo;Xr<t0;Xr++)ah+=Ae[Xr]*Ae[Xr];const o0=Math.sqrt(ah/(t0-Mo));Ht.push(o0)}const Be=Math.max(...Ht),tr=Ht.map(No=>No/Be);d(tr)},[]),Re=reactExports.useCallback(async Ft=>{Ft.trim()&&(console.log("YouTube URL loading not implemented yet:",Ft),alert("YouTube integration coming soon! For now, please upload an audio file."))},[]),Oe=reactExports.useCallback(async Ft=>{if(!Ft||Ft.length===0)return;const Tt=Ft[0];e(Tt),a(ze=>({...ze,isLoading:!0}));try{getContext().state!=="running"&&await start(),g.current&&g.current.dispose(),Object.values(w.current).forEach(Ae=>{Ae&&Ae.dispose&&Ae.dispose()}),x.current&&x.current.dispose(),C.current&&C.current.dispose(),w.current={};const ze=URL.createObjectURL(Tt),Ht=new Player({url:ze,loop:!1,onload:()=>{console.log("Audio loaded successfully"),a(tr=>({...tr,isLoading:!1,duration:Ht.buffer.duration}));const Ae=Ht.buffer.get();Ae&&se(Ae);const Be=new Recorder;x.current=Be,pe()},onerror:Ae=>{console.error("Error loading audio:",Ae),a(Be=>({...Be,isLoading:!1}))}});g.current=Ht}catch(ze){console.error("Error loading audio file:",ze),a(Ht=>({...Ht,isLoading:!1}))}},[pe,se]),Ce=reactExports.useCallback(Ft=>{O.current&&clearInterval(O.current);const Tt=now();let ze=Ft;ze===void 0&&a(Ht=>(ze=Ht.currentTime,Ht)),O.current=setInterval(()=>{if(g.current&&g.current.state==="started"){const Ht=now()-Tt;a(Ae=>{let Be=(ze||0)+Ht;return Ae.isLooping&&Ae.duration>0?Be=Be%Ae.duration:Be=Math.min(Be,Ae.duration),Be>=Ae.duration&&!Ae.isLooping?(g.current?.stop(),O.current&&(clearInterval(O.current),O.current=null),{...Ae,isPlaying:!1,currentTime:0}):{...Ae,currentTime:Be}})}},100)},[]),He=reactExports.useCallback(()=>{O.current&&(clearInterval(O.current),O.current=null)},[]),$t=reactExports.useCallback(()=>{a(Ft=>{const Tt=!Ft.isLooping;return g.current&&(g.current.loop=Tt),{...Ft,isLooping:Tt}})},[]),Sn=reactExports.useCallback(Ft=>{if(!(!g.current||!g.current.loaded))try{const Tt=o.isPlaying;g.current.state==="started"&&g.current.stop(),He(),a(ze=>({...ze,currentTime:Ft,isPlaying:!1})),Tt&&setTimeout(()=>{g.current&&(g.current.start(0,Ft),a(ze=>({...ze,isPlaying:!0})),Ce(Ft))},50)}catch(Tt){console.error("Seek error:",Tt)}},[o.isPlaying,Ce,He]),xn=reactExports.useCallback(async()=>{if(g.current)try{if(getContext().state!=="running"&&(console.log("Starting AudioContext after user gesture..."),await start()),!g.current.loaded){console.warn("Audio buffer not loaded yet");return}o.isPlaying?(g.current.stop(),He(),a(Ft=>({...Ft,isPlaying:!1}))):(g.current.start(0,o.currentTime),Ce(o.currentTime),a(Ft=>({...Ft,isPlaying:!0})))}catch(Ft){console.error("Playback error:",Ft)}},[o.isPlaying,o.currentTime,Ce,He]),Lr=reactExports.useCallback((Ft,Tt)=>{c(ze=>({...ze,[Ft]:{...ze[Ft],...Tt}}))},[]),jr=reactExports.useCallback(async(Ft="mp3")=>{if(!(!g.current||!t||p)){if(!Y)throw new Error("FFmpeg not ready");try{s(!0),console.log("🎛️ Starting offline audio processing...");const Tt=g.current.buffer;if(!Tt)throw new Error("No audio buffer loaded");const ze=Tt.duration;console.log(`📊 Processing ${ze.toFixed(2)}s of audio offline...`);const Ht=await Offline(async()=>{const Xr=new Player(Tt);let a0=Xr;if(l.distortion.enabled){const Ih=new Distortion(l.distortion.amount);a0.connect(Ih),a0=Ih}if(l.chorus.enabled){const Ih=new Chorus(l.chorus.frequency,l.chorus.delayTime,l.chorus.depth);a0.connect(Ih),a0=Ih}if(l.phaser.enabled){const Ih=new Phaser(l.phaser.frequency,l.phaser.octaves);a0.connect(Ih),a0=Ih}if(l.tremolo.enabled){const Ih=new Tremolo(l.tremolo.frequency,l.tremolo.depth);a0.connect(Ih),a0=Ih}if(l.vibrato.enabled){const Ih=new Vibrato(l.vibrato.frequency,l.vibrato.depth);a0.connect(Ih),a0=Ih}if(l.filter.enabled){const Ih=new Filter(l.filter.frequency,l.filter.type);a0.connect(Ih),a0=Ih}if(l.autoFilter.enabled){const Ih=new AutoFilter(l.autoFilter.frequency,l.autoFilter.baseFrequency,l.autoFilter.depth);a0.connect(Ih),a0=Ih}if(l.compressor.enabled){const Ih=new Compressor(l.compressor.threshold,l.compressor.ratio);a0.connect(Ih),a0=Ih}if(l.limiter.enabled){const Ih=new Limiter(l.limiter.threshold);a0.connect(Ih),a0=Ih}if(l.pitchShift.enabled){const Ih=new PitchShift(l.pitchShift.pitch);a0.connect(Ih),a0=Ih}if(l.eq3.enabled){const Ih=new EQ3(l.eq3.low,l.eq3.mid,l.eq3.high);a0.connect(Ih),a0=Ih}if(l.delay.enabled){const Ih=new Delay(l.delay.delayTime,l.delay.feedback);a0.connect(Ih),a0=Ih}if(l.pingPongDelay.enabled){const Ih=new PingPongDelay(l.pingPongDelay.delayTime,l.pingPongDelay.feedback);a0.connect(Ih),a0=Ih}if(l.reverb.enabled){const Ih=new Reverb(l.reverb.decay);a0.connect(Ih),a0=Ih}if(l.volume.enabled){const Ih=new Volume(l.volume.volume);a0.connect(Ih),a0=Ih}a0.toDestination(),Xr.start(0)},ze);console.log("✅ Offline processing complete!");const Ae=Ht.get(),Be=await audioBufferToWav(Ae);console.log("📦 Created WAV blob:",Math.round(Be.size/1024),"KB");const tr=await ue(Be,Ft),No=new Date().toISOString().slice(0,19).replace(/:/g,"-"),Mo=`${t.name.replace(/\.[^/.]+$/,"")||"audio"}-fx-${No}.${Ft}`,t0=URL.createObjectURL(tr),o0=document.createElement("a");o0.href=t0,o0.download=Mo,document.body.appendChild(o0),o0.click(),document.body.removeChild(o0),setTimeout(()=>URL.revokeObjectURL(t0),100),console.log(`✅ Downloaded processed audio: ${Mo}`),s(!1)}catch(Tt){console.error("❌ Offline processing error:",Tt),alert("Audio processing failed: "+Tt),s(!1)}}},[t,l,p,Y,ue]);return reactExports.useEffect(()=>{g.current&&pe()},[l,pe]),reactExports.useEffect(()=>()=>{He(),g.current&&g.current.dispose(),Object.values(w.current).forEach(Ft=>{Ft&&Ft.dispose&&Ft.dispose()})},[He]),{audioFile:t,resetAudioFile:()=>e(null),youtubeUrl:n,setYoutubeUrl:i,audioState:o,effects:l,waveformData:u,isDownloading:p,loaded:Y,ffmpegLoadProgress:q,loadAudioFile:Oe,loadYouTubeAudio:Re,togglePlayback:xn,toggleLoop:$t,seekTo:Sn,updateEffect:Lr,downloadProcessedAudio:jr,formatTime:Ft=>{const Tt=Math.floor(Ft/60),ze=Math.floor(Ft%60);return`${Tt}:${ze.toString().padStart(2,"0")}`},convertAudio:ue}},Pedal=({color:t="#015077",className:e="",size:n=200,onSettingsClick:i,showSettings:o=!1})=>jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 768",width:n,height:n*.75,className:e,children:[jsxRuntimeExports.jsx("path",{fill:"#4D494D",d:"M535.6 681s-17.4 2-23.2 2c-5.8 0-23.2-2-23.2-2l-3-29h52.4l-3 29z"}),jsxRuntimeExports.jsx("path",{fill:"#333030",d:"M535.6 681s-17.4-1-23.2-1c-5.8 0-23.2 1-23.2 1l-3-29h52.4l-3 29z"}),jsxRuntimeExports.jsx("path",{fill:t,d:"M654.2 658H370.5c-5.6 0-10.1-4.6-10.1-10.1v-386c0-5.6 4.6-10.1 10.1-10.1h283.8c5.6 0 10.1 4.6 10.1 10.1v386c0 5.5-4.6 10.1-10.2 10.1z"}),jsxRuntimeExports.jsx("path",{fill:t,style:{filter:"brightness(1.2)"},d:"M657.4 274.2H367.3c-3.8 0-6.9-3.1-6.9-6.9V90.4c0-3.8 3.1-6.9 6.9-6.9h290.1c3.8 0 6.9 3.1 6.9 6.9v176.9c.1 3.8-3.1 6.9-6.9 6.9zM656.5 657.9H368.2c-5.4 0-9.8-4.4-9.8-9.8V291.3c0-5.4 4.4-9.8 9.8-9.8h288.4c5.4 0 9.8 4.4 9.8 9.8V648c0 5.4-4.5 9.9-9.9 9.9z"}),jsxRuntimeExports.jsx("path",{fill:"#333030",d:"M644.4 635h-264c-4.9 0-9-4-9-9V460c0-5 4.1-9 9-9h264c5 0 9 4 9 9v166c0 5-4.1 9-9 9z"}),jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{fill:"#4D494D",cx:"513.5",cy:"223",r:"31"}),jsxRuntimeExports.jsx("circle",{fill:"#E7EFF4",cx:"513.6",cy:"223.5",r:"25.5"}),jsxRuntimeExports.jsx("circle",{fill:"#F00025",cx:"513.5",cy:"121",r:"8"}),jsxRuntimeExports.jsx("circle",{fill:"#333030",cx:"436.9",cy:"160.2",r:"46"}),jsxRuntimeExports.jsx("path",{fill:"#4D494D",d:"M475.1 166c.3-2 .5-4 .5-6.1 0-2.8-.3-5.6-.9-8.2-3.1-2-6.4-4-7.3-6.1-.8-1.9-.1-5.2.6-8.6-3-4-6.7-7.5-10.9-10.1-3.1.7-6.1 1.2-7.9.5-1.7-.7-3.4-3-5-5.6-2.4-.5-4.9-.7-7.5-.7-2.9 0-5.7.3-8.4.9-1.6 2.5-3.2 4.7-4.9 5.4-1.7.7-4.4.2-7.3-.4-4.5 2.8-8.3 6.4-11.3 10.7.6 3.1 1.2 6 .4 7.8-.8 1.9-3.6 3.8-6.4 5.6-.6 2.8-1 5.7-1 8.7 0 2.3.2 4.6.6 6.9 3.4 2.5 6 2.6 6.8 4.5.9 2.1-1.1 4.3-1.7 8.9 2.6 4.3 6.1 8.1 10.2 11 4.8-.5 7.4-2.7 9.7-1.7 2.4 1 2.8 4.7 6 8.6 2.3.4 4.7.7 7.2.7 2.2 0 4.3-.2 6.3-.6 3.3-3.9 3.7-7.7 6.1-8.7 2.4-1 5.3 1.3 10.3 1.8 3.8-2.8 7-6.1 9.6-10.1-.5-4.9-2.7-7.6-1.8-9.9 1.3-2.1 4.3-2.3 8-5.2z"}),jsxRuntimeExports.jsx("circle",{fill:"#E7EFF4",cx:"436.9",cy:"160.2",r:"25.5"}),jsxRuntimeExports.jsxs("g",{fill:"#FFCA2C",children:[jsxRuntimeExports.jsx("circle",{cx:"436.9",cy:"107.7",r:"4.3"}),jsxRuntimeExports.jsx("circle",{cx:"409.4",cy:"210.7",r:"4.3"}),jsxRuntimeExports.jsx("circle",{cx:"464.4",cy:"210.7",r:"4.3"})]}),jsxRuntimeExports.jsx("circle",{fill:"#333030",cx:"589.9",cy:"160.2",r:"46"}),jsxRuntimeExports.jsx("path",{fill:"#4D494D",d:"M623.6 179.2c1-1.8 1.9-3.6 2.7-5.5 1-2.6 1.7-5.3 2.1-8-2.2-3-4.6-6-4.6-8.3-.1-2.1 1.8-4.9 3.6-7.8-1.3-4.8-3.6-9.3-6.6-13.3-3.1-.5-6.1-1-7.5-2.3-1.4-1.3-2.1-4-2.7-7-2.1-1.3-4.3-2.4-6.7-3.3-2.7-1-5.4-1.7-8.1-2.1-2.4 1.7-4.7 3.2-6.5 3.3-1.8.1-4.2-1.3-6.7-2.9-5.2 1-10.1 3.1-14.4 6-.5 3.1-1.1 6.1-2.4 7.5-1.4 1.5-4.7 2.3-8 3-1.6 2.4-3 5-4.1 7.8-.8 2.2-1.4 4.4-1.8 6.6 2.3 3.6 4.7 4.6 4.7 6.6.1 2.3-2.6 3.7-4.7 7.7.9 5 2.8 9.7 5.6 13.9 4.7 1.2 7.9.1 9.7 1.8 1.9 1.8.9 5.4 2.6 10.2 2 1.2 4.2 2.3 6.5 3.2 2 .8 4.1 1.3 6.1 1.7 4.5-2.5 6.2-5.9 8.8-6 2.6-.1 4.5 3.1 9 5.4 4.5-1.2 8.8-3.3 12.6-6 1.3-4.8.1-8.1 1.9-9.9 1.5-1.8 4.4-.9 8.9-2.3z"}),jsxRuntimeExports.jsx("circle",{fill:"#E7EFF4",cx:"589.9",cy:"160.2",r:"25.5"}),jsxRuntimeExports.jsxs("g",{fill:"#FFCA2C",children:[jsxRuntimeExports.jsx("circle",{cx:"589.9",cy:"107.7",r:"4.3"}),jsxRuntimeExports.jsx("circle",{cx:"562.4",cy:"210.7",r:"4.3"}),jsxRuntimeExports.jsx("circle",{cx:"617.4",cy:"210.7",r:"4.3"})]}),jsxRuntimeExports.jsx("path",{fill:"#FFCA2C",d:"M395.5 315h-12.4l3.1-3.1c1-1 1-2.7 0-3.7l-.7-.7c-1-1-2.7-1-3.7 0 0 0-8.6 8.5-8.8 8.8l-.1.1c-.5.5-.8 1.2-.8 1.9s.2 1.4.8 1.9l8.8 8.8c1 1 2.7 1 3.7 0l.7-.7c1-1 1-2.8 0-3.8l-3.3-3.5h12.7c1.7 0 3.1-1.3 3.1-3s-1.4-3-3.1-3zM649.5 315h-12.4l3.1-3.1c1-1 1-2.7 0-3.7l-.7-.7c-1-1-2.7-1-3.7 0 0 0-8.6 8.5-8.8 8.8l-.1.1c-.5.5-.8 1.2-.8 1.9s.2 1.4.8 1.9l8.8 8.8c1 1 2.7 1 3.7 0l.7-.7c1-1 1-2.8 0-3.8l-3.3-3.5h12.7c1.7 0 3.1-1.3 3.1-3s-1.4-3-3.1-3z"}),jsxRuntimeExports.jsx("g",{opacity:".5",fill:"#FFF",children:jsxRuntimeExports.jsx("path",{d:"M454.9 142.2c-10-10-26.1-10-36.1 0l18 18 18.1-18zM436.9 160.2l-18 18c10 10 26.1 10 36.1 0l-18.1-18z"})}),jsxRuntimeExports.jsx("g",{opacity:".5",fill:"#FFF",children:jsxRuntimeExports.jsx("path",{d:"M607.9 142.2c-10-10-26.1-10-36.1 0l18 18 18.1-18zM589.9 160.2l-18 18c10 10 26.1 10 36.1 0l-18.1-18z"})}),jsxRuntimeExports.jsx("g",{opacity:".5",fill:"#FFF",children:jsxRuntimeExports.jsx("path",{d:"M531.6 205.5c-10-10-26.1-10-36.1 0l18 18 18.1-18zM513.6 223.5l-18 18c10 10 26.1 10 36.1 0l-18.1-18z"})})]})]}),i&&jsxRuntimeExports.jsx("button",{onClick:i,className:`absolute top-2 right-2 w-8 h-8 rounded-full bg-base-100 shadow-lg border border-base-300 flex items-center justify-center hover:bg-base-200 transition-all duration-200 ${o?"bg-primary text-primary-content":""}`,title:"Settings",children:jsxRuntimeExports.jsx("span",{className:"text-sm",children:"⚙️"})})]}),AudioEffects=[{key:"tempo",name:"Tempo",color:"#FF6B35",params:[{key:"playbackRate",label:"Speed",min:.25,max:2,step:.05,unit:"x"}]},{key:"eq3",name:"EQ3",color:"#4ECDC4",params:[{key:"low",label:"Low",min:-30,max:30,step:1,unit:"dB"},{key:"mid",label:"Mid",min:-30,max:30,step:1,unit:"dB"},{key:"high",label:"High",min:-30,max:30,step:1,unit:"dB"}]},{key:"compressor",name:"Compressor",color:"#45B7D1",params:[{key:"threshold",label:"Threshold",min:-60,max:0,step:1,unit:"dB"},{key:"ratio",label:"Ratio",min:1,max:20,step:.1}]},{key:"distortion",name:"Distortion",color:"#E74C3C",params:[{key:"amount",label:"Amount",min:0,max:1,step:.01}]},{key:"filter",name:"Filter",color:"#9B59B6",params:[{key:"type",label:"Type",min:0,max:1,step:1,type:"select",options:[{value:"lowpass",label:"Low Pass"},{value:"highpass",label:"High Pass"},{value:"bandpass",label:"Band Pass"},{value:"notch",label:"Notch"}]},{key:"frequency",label:"Frequency",min:20,max:2e4,step:10,unit:"Hz"}]},{key:"pitchShift",name:"Pitch",color:"#F39C12",params:[{key:"pitch",label:"Pitch",min:-24,max:24,step:1,unit:" semitones"}]},{key:"chorus",name:"Chorus",color:"#1ABC9C",params:[{key:"frequency",label:"Rate",min:.1,max:10,step:.1,unit:"Hz"},{key:"depth",label:"Depth",min:0,max:1,step:.01}]},{key:"phaser",name:"Phaser",color:"#8E44AD",params:[{key:"frequency",label:"Rate",min:.1,max:10,step:.1,unit:"Hz"},{key:"depth",label:"Depth",min:0,max:2,step:.1}]},{key:"tremolo",name:"Tremolo",color:"#E67E22",params:[{key:"frequency",label:"Rate",min:.1,max:20,step:.1,unit:"Hz"},{key:"depth",label:"Depth",min:0,max:1,step:.01}]},{key:"delay",name:"Delay",color:"#27AE60",params:[{key:"delayTime",label:"Time",min:.01,max:1,step:.01,unit:"s"},{key:"feedback",label:"Feedback",min:0,max:.9,step:.01}]},{key:"pingPongDelay",name:"Ping Pong",color:"#2ECC71",params:[{key:"delayTime",label:"Time",min:.01,max:1,step:.01,unit:"s"},{key:"feedback",label:"Feedback",min:0,max:.9,step:.01}]},{key:"reverb",name:"Reverb",color:"#3498DB",params:[{key:"decay",label:"Decay",min:.1,max:10,step:.1,unit:"s"},{key:"wet",label:"Wet",min:0,max:1,step:.01}]},{key:"limiter",name:"Limiter",color:"#34495E",params:[{key:"threshold",label:"Threshold",min:-40,max:0,step:1,unit:"dB"}]},{key:"volume",name:"Volume",color:"#FF9500",params:[{key:"volume",label:"Volume",min:-30,max:20,step:.5,unit:"dB"}]}],PedalControl=({name:t,enabled:e,onToggle:n,color:i,children:o})=>{const[a,l]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-2 h-[135px]",children:[jsxRuntimeExports.jsx("div",{className:`cursor-pointer transition-all duration-200 ${e?"scale-100 opacity-100":"scale-95 opacity-60"} hover:scale-105`,onClick:n,children:jsxRuntimeExports.jsx(Pedal,{color:e?i:"#666666",size:120,className:`drop-shadow-lg ${e?"drop-shadow-xl":""}`,onSettingsClick:c=>{c?.stopPropagation(),l(!0)},showSettings:a})}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:`text-sm font-bold ${e?"text-primary":"text-base-content/60"}`,children:t}),e&&jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full bg-red-500 mx-auto mt-1 ${e?"animate-pulse":""}`})]}),jsxRuntimeExports.jsx(Modal,{title:`${t} Settings`,visible:a,onClose:()=>l(!1),children:jsxRuntimeExports.jsx("div",{className:"space-y-4 py-4",children:o})})]})},Control=({label:t,value:e,min:n,max:i,step:o,onChange:a,unit:l="",type:c="slider",options:p=[]})=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"text-xs text-base-content/70",children:[t,": ",c==="slider"&&typeof e=="number"?e.toFixed(2):e,l]}),c==="select"?jsxRuntimeExports.jsx("select",{value:e,onChange:s=>a(s.target.value),className:"select select-xs w-full",children:p.map(s=>jsxRuntimeExports.jsx("option",{value:s.value,children:s.label},s.value))}):jsxRuntimeExports.jsx("input",{type:"range",min:n,max:i,step:o,value:e,onChange:s=>a(parseFloat(s.target.value)),className:"range range-xs range-primary w-full"})]}),PedalBoard=({effects:t,updateEffect:e})=>jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-b from-base-300 to-base-200 p-6 rounded-xl shadow-inner",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold mb-6 text-center",children:"🎸 Pedalboard"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 justify-items-center",children:AudioEffects.map(n=>{const i=t[n.key];return jsxRuntimeExports.jsx(PedalControl,{name:n.name,color:n.color,enabled:i.enabled,onToggle:()=>e(n.key,{enabled:!i.enabled}),children:n.params.map(o=>jsxRuntimeExports.jsx(Control,{label:o.label,value:i[o.key],min:o.min,max:o.max,step:o.step,unit:o.unit,type:o.type,options:o.options,onChange:a=>e(n.key,{[o.key]:a})},o.key))},n.key)})})]}),Waveform=({waveformData:t,duration:e,currentTime:n,onSeek:i})=>{const[o,a]=reactExports.useState(null);if(t.length===0)return null;const l=d=>{const g=d.currentTarget.getBoundingClientRect(),C=(d.clientX-g.left)/g.width*e;i(C)},c=d=>{const g=d.currentTarget.getBoundingClientRect(),x=(d.clientX-g.left)/g.width;a(x)},p=()=>{a(null)},s=e>0?n/e:0,u=d=>{const g=Math.floor(d/60),w=Math.floor(d%60);return`${g}:${w.toString().padStart(2,"0")}`};return jsxRuntimeExports.jsxs("div",{className:"w-full relative",children:[o!==null&&jsxRuntimeExports.jsx("div",{className:"absolute -top-8 bg-base-100 text-base-content px-2 py-1 rounded shadow-lg text-xs pointer-events-none z-10",style:{left:`${o*100}%`,transform:"translateX(-50%)"},children:u(o*e)}),jsxRuntimeExports.jsxs("svg",{width:"100%",height:"60",viewBox:`0 0 ${t.length} 60`,className:"cursor-pointer hover:bg-base-100/10 transition-colors rounded",onClick:l,onMouseMove:c,onMouseLeave:p,children:[t.map((d,g)=>{const w=Math.max(1,d*50),x=g/t.length,C=x<=s,O=Math.abs(x-s)<.01;let Y;return O?Y="#FF6B35":C?Y="#4ECDC4":Y="hsl(var(--b3))",jsxRuntimeExports.jsx("rect",{x:g,y:(60-w)/2,width:.8,height:w,fill:Y,className:"transition-colors duration-150",opacity:C?1:.6},g)}),jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#FF6B35",stopOpacity:"0.8"}),jsxRuntimeExports.jsx("stop",{offset:"50%",stopColor:"#FF6B35",stopOpacity:"1"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#FF6B35",stopOpacity:"0.8"})]}),jsxRuntimeExports.jsxs("filter",{id:"glow",children:[jsxRuntimeExports.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),jsxRuntimeExports.jsxs("feMerge",{children:[jsxRuntimeExports.jsx("feMergeNode",{in:"coloredBlur"}),jsxRuntimeExports.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),jsxRuntimeExports.jsx("line",{x1:s*t.length,y1:0,x2:s*t.length,y2:60,stroke:"#FF6B35",strokeWidth:4,opacity:.3,filter:"url(#glow)"}),jsxRuntimeExports.jsx("line",{x1:s*t.length,y1:0,x2:s*t.length,y2:60,stroke:"url(#progressGradient)",strokeWidth:3}),jsxRuntimeExports.jsx("circle",{cx:s*t.length,cy:30,r:4,fill:"#FF6B35",stroke:"#FFF",strokeWidth:2,filter:"url(#glow)"}),o!==null&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("line",{x1:o*t.length,y1:0,x2:o*t.length,y2:60,stroke:"#FFF",strokeWidth:2,opacity:.7,strokeDasharray:"4,4"}),jsxRuntimeExports.jsx("circle",{cx:o*t.length,cy:30,r:3,fill:"#FFF",opacity:.8})]})]})]})},AudioFx=()=>{const t=reactExports.useRef(null),{audioFile:e,youtubeUrl:n,setYoutubeUrl:i,audioState:o,effects:a,waveformData:l,isDownloading:c,loadAudioFile:p,loadYouTubeAudio:s,togglePlayback:u,toggleLoop:d,seekTo:g,updateEffect:w,downloadProcessedAudio:x,formatTime:C,loaded:O,ffmpegLoadProgress:Y,resetAudioFile:q}=useAudioEffects(),[ue,pe]=reactExports.useState(!1),se=async()=>{pe(!0),await x(),pe(!1)};return jsxRuntimeExports.jsx(Page,{name:"Audio Effects Studio",description:"Professional audio effects with real-time processing",children:jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-base-100 w-full",children:[jsxRuntimeExports.jsx(Modal,{title:"Downloading file",visible:ue,children:jsxRuntimeExports.jsx("div",{className:"text-gray-500",children:"Please wait..."})}),jsxRuntimeExports.jsx("div",{className:"text-primary-content p-4 mb-6",children:jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold",children:"🎵 Audio Effects Studio"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:O?"Audio processor ready":`Initializing audio processor... ${Math.round(Y*100)}%`}),jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full ${O?"bg-success":"bg-warning animate-pulse"}`})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-right gap-2 text-primary-content/90",children:[e&&jsxRuntimeExports.jsxs("div",{className:"mt-1",children:[jsxRuntimeExports.jsx("div",{className:"text-sm opacity-80",children:e.name}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-60",children:C(o.duration)})]}),e&&jsxRuntimeExports.jsx("button",{className:"btn btn-primary btn-sm",onClick:q,children:"🔄 Reset File"}),jsxRuntimeExports.jsx("p",{ref:t,className:"text-xs text-error ml-2"})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 px-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[!e&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"border-2 border-dashed border-base-300 p-6 rounded-lg text-center",children:[jsxRuntimeExports.jsx(FilePicker,{onFileChange:p}),jsxRuntimeExports.jsx("p",{className:"text-base-content/60 mt-2",children:"MP3, WAV, OGG, M4A"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 h-px bg-base-300"}),jsxRuntimeExports.jsx("span",{className:"px-3 text-sm text-base-content/60",children:"OR"}),jsxRuntimeExports.jsx("div",{className:"flex-1 h-px bg-base-300"})]}),jsxRuntimeExports.jsxs("div",{className:"border border-base-300 p-6 rounded-lg",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold mb-3",children:"🎥 YouTube URL"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://youtube.com/watch?v=...",value:n,onChange:Re=>i(Re.target.value),className:"input input-bordered flex-1"}),jsxRuntimeExports.jsx("button",{onClick:()=>s(n),disabled:!n.trim(),className:"btn btn-primary",children:"Load"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-base-content/50 mt-2",children:"⚠️ Coming soon - YouTube audio extraction"})]})]}),e&&jsxRuntimeExports.jsx(PedalBoard,{effects:a,updateEffect:w})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:e?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-base-200 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-6",children:"Audio Player"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:u,disabled:o.isLoading,className:`btn btn-primary w-[100px] ${o.isLoading?"loading":""}`,children:o.isPlaying?"⏸️ Pause":"▶️ Play"}),jsxRuntimeExports.jsx("button",{onClick:d,className:`btn ${o.isLooping?"btn-accent":"btn-outline"} w-[60px]`,title:o.isLooping?"Loop: ON":"Loop: OFF",children:"🔂"}),jsxRuntimeExports.jsxs("button",{className:`btn btn-success ${c?"btn-primary":""}`,onClick:c?void 0:se,disabled:!O,children:[c?"Downloading...":"⬇️ Download",c&&jsxRuntimeExports.jsx("span",{className:"loading loading-spinner loading-xs"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-base-content/60 mb-2",children:[jsxRuntimeExports.jsx("span",{children:C(o.currentTime)}),jsxRuntimeExports.jsx("span",{children:C(o.duration)})]}),l.length>0?jsxRuntimeExports.jsx("div",{className:"bg-base-300 rounded p-2",children:jsxRuntimeExports.jsx(Waveform,{waveformData:l,duration:o.duration,currentTime:o.currentTime,onSeek:g})}):jsxRuntimeExports.jsx("div",{className:"bg-base-300 rounded p-4 text-center text-base-content/40",children:jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Waveform will appear here"})})]}),jsxRuntimeExports.jsx("div",{className:"text-center text-sm text-base-content/60",children:e.name})]}),jsxRuntimeExports.jsxs("div",{className:"bg-base-200 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-3",children:"🔧 Active Effects"}),jsxRuntimeExports.jsx("div",{className:"text-sm space-y-1",children:Object.entries(a).some(([,Re])=>Re.enabled)?Object.entries(a).filter(([,Re])=>Re.enabled).map(([Re])=>jsxRuntimeExports.jsx("div",{className:"badge badge-primary badge-sm mr-2",children:Re},Re)):jsxRuntimeExports.jsx("span",{className:"text-base-content/60",children:"No effects applied"})})]})]}):jsxRuntimeExports.jsxs("div",{className:"bg-base-200 p-8 rounded-lg text-center text-base-content/60",children:[jsxRuntimeExports.jsx("p",{className:"mb-2",children:"👈 Upload an audio file to get started"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Choose a file from the effects panel"})]})})]})]})})},oldRoutes=[{from:["/bg","experiment/bg"],to:"/labs/bg"},{from:["/game","/experiment/game"],to:"/labs/game"},{from:"/experiments/timezones",to:"/labs/timezones"}].map(({from:t,to:e})=>typeof t=="string"?{from:t,to:e}:t.map(n=>({from:n,to:e}))).flat(),App=()=>jsxRuntimeExports.jsx(HashRouter,{basename:"/",children:jsxRuntimeExports.jsxs("div",{className:"grid min-h-[100dvh] grid-rows-[auto_1fr_auto]",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx("main",{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(Resume,{})}),jsxRuntimeExports.jsx(Route,{path:"/resume",element:jsxRuntimeExports.jsx(Resume,{})}),jsxRuntimeExports.jsx(Route,{path:"/blog",element:jsxRuntimeExports.jsx(Blog,{})}),jsxRuntimeExports.jsx(Route,{path:"/dev",element:jsxRuntimeExports.jsx(DevDaily,{})}),jsxRuntimeExports.jsx(Route,{path:"/pasteable",element:jsxRuntimeExports.jsx(Pasteable,{})}),jsxRuntimeExports.jsx(Route,{path:"/paste",element:jsxRuntimeExports.jsx(Pasteable,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/background",element:jsxRuntimeExports.jsx(RemoveBackground,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/game",element:jsxRuntimeExports.jsx(CanvasGame,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/timezones",element:jsxRuntimeExports.jsx(WeatherApp,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/weather",element:jsxRuntimeExports.jsx(WeatherApp,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/code-pen",element:jsxRuntimeExports.jsx(CodePen,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/countdown",element:jsxRuntimeExports.jsx(Countdown,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/paste",element:jsxRuntimeExports.jsx(Pasteable,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/pasteable",element:jsxRuntimeExports.jsx(Pasteable,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/countdown/:id/:countdownName?",element:jsxRuntimeExports.jsx(Countdown,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/camera",element:jsxRuntimeExports.jsx(Camera,{})}),jsxRuntimeExports.jsx(Route,{path:"/labs/audio-fx",element:jsxRuntimeExports.jsx(AudioFx,{})}),oldRoutes.map(({from:t,to:e})=>jsxRuntimeExports.jsx(Route,{path:t,element:jsxRuntimeExports.jsx(Navigate,{to:e})},`${t}-${e}`)),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/"})})]})}),jsxRuntimeExports.jsx(Lt,{}),jsxRuntimeExports.jsx(Footer$1,{})]})});ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
